cscope 15 /home/mdl/amk7371/video_analytics/HM               0003142175
	@build/CMakeFiles/3.18.4/CompilerIdC/CMakeCCompilerId.c

1 #ifdeà
__ýlu¥lus


5 #ià
defšed
(
__18CXX
)

6 
	#ID_VOID_MAIN


	)

8 #ià
defšed
(
__CLASSIC_C__
)

10 cÚ¡

	)

11 vÞ©že

	)

18 #ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

19 
	#COMPILER_ID
 "IÁ–"

	)

20 #ià
defšed
(
_MSC_VER
)

21 
	#SIMULATE_ID
 "MSVC"

	)

23 #ià
defšed
(
__GNUC__
)

24 
	#SIMULATE_ID
 "GNU"

	)

27 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

28 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

29 #ià
defšed
(
__INTEL_COMPILER_UPDATE
)

30 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

32 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

34 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

36 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

38 #ià
defšed
(
_MSC_VER
)

40 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

41 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

43 #ià
defšed
(
__GNUC__
)

44 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

45 #–ià
defšed
(
__GNUG__
)

46 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

48 #ià
defšed
(
__GNUC_MINOR__
)

49 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

51 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

52 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

55 #–ià
defšed
(
__PATHCC__
)

56 
	#COMPILER_ID
 "P©hSÿË"

	)

57 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

58 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

59 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

60 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

63 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

64 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

65 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

66 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

67 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

69 #–ià
defšed
(
__BORLANDC__
)

70 
	#COMPILER_ID
 "BÜÏnd"

	)

72 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

73 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

75 #–ià
defšed
(
__WATCOMC__
) && __WATCOMC__ < 1200

76 
	#COMPILER_ID
 "W©com"

	)

78 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

79 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

80 #ià(
__WATCOMC__
 % 10) > 0

81 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

84 #–ià
defšed
(
__WATCOMC__
)

85 
	#COMPILER_ID
 "O³nW©com"

	)

87 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100è/ 100)

	)

88 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

89 #ià(
__WATCOMC__
 % 10) > 0

90 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

93 #–ià
defšed
(
__SUNPRO_C
)

94 
	#COMPILER_ID
 "SunPro"

	)

95 #ià
__SUNPRO_C
 >= 0x5100

97 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>12)

	)

98 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xFF)

	)

99 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

102 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>8)

	)

103 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xF)

	)

104 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

107 #–ià
defšed
(
__HP_cc
)

108 
	#COMPILER_ID
 "HP"

	)

110 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_cc
/10000)

	)

111 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_cc
/100 % 100)

	)

112 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_cc
 % 100)

	)

114 #–ià
defšed
(
__DECC
)

115 
	#COMPILER_ID
 "Com·q"

	)

117 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECC_VER
/10000000)

	)

118 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECC_VER
/100000 % 100)

	)

119 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECC_VER
 % 10000)

	)

121 #–ià
defšed
(
__IBMC__
è&& defšed(
__COMPILER_VER__
)

122 
	#COMPILER_ID
 "zOS"

	)

124 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

125 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

126 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

128 #–ià
defšed
(
__ibmxl__
è&& defšed(
__þªg__
)

129 
	#COMPILER_ID
 "XLCÏng"

	)

130 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ibmxl_v”siÚ__
)

	)

131 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ibmxl_»Ëa£__
)

	)

132 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ibmxl_modifiÿtiÚ__
)

	)

133 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__ibmxl_±f_fix_Ëv–__
)

	)

136 #–ià
defšed
(
__IBMC__
è&& !defšed(
__COMPILER_VER__
) && __IBMC__ >= 800

137 
	#COMPILER_ID
 "XL"

	)

139 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

140 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

141 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

143 #–ià
defšed
(
__IBMC__
è&& !defšed(
__COMPILER_VER__
) && __IBMC__ < 800

144 
	#COMPILER_ID
 "Visu®Age"

	)

146 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

147 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

148 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

150 #–ià
defšed
(
__PGI
)

151 
	#COMPILER_ID
 "PGI"

	)

152 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

153 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

154 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

155 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

158 #–ià
defšed
(
_CRAYC
)

159 
	#COMPILER_ID
 "C¿y"

	)

160 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

161 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

163 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

164 
	#COMPILER_ID
 "TI"

	)

166 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

167 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

168 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

170 #–ià
defšed
(
__FUJITSU
è|| defšed(
__FCC_VERSION
è|| defšed(
__fcc_v”siÚ
)

171 
	#COMPILER_ID
 "Fuj™su"

	)

173 #–ià
defšed
(
__ghs__
)

174 
	#COMPILER_ID
 "GHS"

	)

176 #ifdeà
__GHS_VERSION_NUMBER


177 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 100)

	)

178 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 10 % 10)

	)

179 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GHS_VERSION_NUMBER
 % 10)

	)

182 #–ià
defšed
(
__TINYC__
)

183 
	#COMPILER_ID
 "TšyCC"

	)

185 #–ià
defšed
(
__BCC__
)

186 
	#COMPILER_ID
 "Bruû"

	)

188 #–ià
defšed
(
__SCO_VERSION__
)

189 
	#COMPILER_ID
 "SCO"

	)

191 #–ià
defšed
(
__ARMCC_VERSION
è&& !defšed(
__þªg__
)

192 
	#COMPILER_ID
 "ARMCC"

	)

193 #ià
__ARMCC_VERSION
 >= 1000000

195 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

196 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

197 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

200 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

201 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

202 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

206 #–ià
defšed
(
__þªg__
è&& defšed(
__­¶e_bužd_v”siÚ__
)

207 
	#COMPILER_ID
 "AµËCÏng"

	)

208 #ià
defšed
(
_MSC_VER
)

209 
	#SIMULATE_ID
 "MSVC"

	)

211 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__þªg_majÜ__
)

	)

212 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__þªg_mšÜ__
)

	)

213 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__þªg_·tchËv–__
)

	)

214 #ià
defšed
(
_MSC_VER
)

216 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

217 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

219 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__­¶e_bužd_v”siÚ__
)

	)

221 #–ià
defšed
(
__þªg__
è&& defšed(
__ARMCOMPILER_VERSION
)

222 
	#COMPILER_ID
 "ARMCÏng"

	)

223 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/1000000)

	)

224 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/10000 % 100)

	)

225 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCOMPILER_VERSION
 % 10000)

	)

226 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__ARMCOMPILER_VERSION
)

	)

228 #–ià
defšed
(
__þªg__
)

229 
	#COMPILER_ID
 "CÏng"

	)

230 #ià
defšed
(
_MSC_VER
)

231 
	#SIMULATE_ID
 "MSVC"

	)

233 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__þªg_majÜ__
)

	)

234 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__þªg_mšÜ__
)

	)

235 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__þªg_·tchËv–__
)

	)

236 #ià
defšed
(
_MSC_VER
)

238 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

239 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

242 #–ià
defšed
(
__GNUC__
)

243 
	#COMPILER_ID
 "GNU"

	)

244 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

245 #ià
defšed
(
__GNUC_MINOR__
)

246 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

248 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

249 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

252 #–ià
defšed
(
_MSC_VER
)

253 
	#COMPILER_ID
 "MSVC"

	)

255 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

256 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

257 #ià
defšed
(
_MSC_FULL_VER
)

258 #ià
_MSC_VER
 >= 1400

260 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

263 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

266 #ià
defšed
(
_MSC_BUILD
)

267 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

270 #–ià
defšed
(
__VISUALDSPVERSION__
è|| defšed(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

271 
	#COMPILER_ID
 "ADSP"

	)

272 #ià
defšed
(
__VISUALDSPVERSION__
)

274 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

275 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

276 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

279 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

280 
	#COMPILER_ID
 "IAR"

	)

281 #ià
defšed
(
__VER__
è&& defšed(
__ICCARM__
)

282 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 1000000)

	)

283 
	#COMPILER_VERSION_MINOR
 
	`DEC
(((
__VER__
è/ 1000è% 1000)

	)

284 
	#COMPILER_VERSION_PATCH
 
	`DEC
((
__VER__
è% 1000)

	)

285 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

286 #–ià
defšed
(
__VER__
è&& (defšed(
__ICCAVR__
è|| defšed(
__ICCRX__
è|| defšed(
__ICCRH850__
è|| defšed(
__ICCRL78__
è|| defšed(
__ICC430__
è|| defšed(
__ICCRISCV__
è|| defšed(
__ICCV850__
è|| defšed(
__ICC8051__
))

287 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 100)

	)

288 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__VER__
è- (((__VER__è/ 100)*100))

	)

289 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SUBVERSION__
)

	)

290 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

293 #–ià
defšed
(
__SDCC_VERSION_MAJOR
è|| defšed(
SDCC
)

294 
	#COMPILER_ID
 "SDCC"

	)

295 #ià
defšed
(
__SDCC_VERSION_MAJOR
)

296 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__SDCC_VERSION_MAJOR
)

	)

297 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__SDCC_VERSION_MINOR
)

	)

298 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SDCC_VERSION_PATCH
)

	)

301 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
SDCC
/100)

	)

302 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
SDCC
/10 % 10)

	)

303 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
SDCC
 % 10)

	)

310 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

311 
	#COMPILER_ID
 "HP"

	)

314 
	#COMPILER_ID
 ""

	)

321 cÚ¡* 
	gšfo_compž”
 = "INFO" ":" "compž”[" 
COMPILER_ID
 "]";

322 #ifdeà
SIMULATE_ID


323 cÚ¡* 
	gšfo_simuÏ‹
 = "INFO" ":" "simuÏ‹[" 
SIMULATE_ID
 "]";

326 #ifdeà
__QNXNTO__


327 cÚ¡* 
	gqnxÁo
 = "INFO" ":" "qnxnto[]";

330 #ià
defšed
(
__CRAYXE
è|| defšed(
__CRAYXC
)

331 cÚ¡ *
	gšfo_üay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

334 
	#STRINGIFY_HELPER
(
X
è#X

	)

335 
	#STRINGIFY
(
X
è
	`STRINGIFY_HELPER
(X)

	)

338 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

339 
	#PLATFORM_ID
 "Lšux"

	)

341 #–ià
defšed
(
__CYGWIN__
)

342 
	#PLATFORM_ID
 "Cygwš"

	)

344 #–ià
defšed
(
__MINGW32__
)

345 
	#PLATFORM_ID
 "MšGW"

	)

347 #–ià
defšed
(
__APPLE__
)

348 
	#PLATFORM_ID
 "D¬wš"

	)

350 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

351 
	#PLATFORM_ID
 "Wšdows"

	)

353 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

354 
	#PLATFORM_ID
 "F»eBSD"

	)

356 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

357 
	#PLATFORM_ID
 "N‘BSD"

	)

359 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

360 
	#PLATFORM_ID
 "O³nBSD"

	)

362 #–ià
defšed
(
__sun
è|| defšed(
sun
)

363 
	#PLATFORM_ID
 "SunOS"

	)

365 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

366 
	#PLATFORM_ID
 "AIX"

	)

368 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

369 
	#PLATFORM_ID
 "HP-UX"

	)

371 #–ià
defšed
(
__HAIKU__
)

372 
	#PLATFORM_ID
 "Haiku"

	)

374 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

375 
	#PLATFORM_ID
 "BeOS"

	)

377 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

378 
	#PLATFORM_ID
 "QNX"

	)

380 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

381 
	#PLATFORM_ID
 "Tru64"

	)

383 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

384 
	#PLATFORM_ID
 "RISCos"

	)

386 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

387 
	#PLATFORM_ID
 "SINIX"

	)

389 #–ià
defšed
(
__UNIX_SV__
)

390 
	#PLATFORM_ID
 "UNIX_SV"

	)

392 #–ià
defšed
(
__bsdos__
)

393 
	#PLATFORM_ID
 "BSDOS"

	)

395 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

396 
	#PLATFORM_ID
 "MP-RAS"

	)

398 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

399 
	#PLATFORM_ID
 "OSF1"

	)

401 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

402 
	#PLATFORM_ID
 "SCO_SV"

	)

404 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

405 
	#PLATFORM_ID
 "ULTRIX"

	)

407 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

408 
	#PLATFORM_ID
 "X’ix"

	)

410 #–ià
defšed
(
__WATCOMC__
)

411 #ià
defšed
(
__LINUX__
)

412 
	#PLATFORM_ID
 "Lšux"

	)

414 #–ià
defšed
(
__DOS__
)

415 
	#PLATFORM_ID
 "DOS"

	)

417 #–ià
defšed
(
__OS2__
)

418 
	#PLATFORM_ID
 "OS2"

	)

420 #–ià
defšed
(
__WINDOWS__
)

421 
	#PLATFORM_ID
 "Wšdows3x"

	)

423 #–ià
defšed
(
__VXWORKS__
)

424 
	#PLATFORM_ID
 "VxWÜks"

	)

427 
	#PLATFORM_ID


	)

430 #–ià
defšed
(
__INTEGRITY
)

431 #ià
defšed
(
INT_178B
)

432 
	#PLATFORM_ID
 "IÁegr™y178"

	)

435 
	#PLATFORM_ID
 "IÁegr™y"

	)

439 
	#PLATFORM_ID


	)

448 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

449 #ià
defšed
(
_M_IA64
)

450 
	#ARCHITECTURE_ID
 "IA64"

	)

452 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

453 
	#ARCHITECTURE_ID
 "x64"

	)

455 #–ià
defšed
(
_M_IX86
)

456 
	#ARCHITECTURE_ID
 "X86"

	)

458 #–ià
defšed
(
_M_ARM64
)

459 
	#ARCHITECTURE_ID
 "ARM64"

	)

461 #–ià
defšed
(
_M_ARM
)

462 #ià
_M_ARM
 == 4

463 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

464 #–ià
_M_ARM
 == 5

465 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

467 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

470 #–ià
defšed
(
_M_MIPS
)

471 
	#ARCHITECTURE_ID
 "MIPS"

	)

473 #–ià
defšed
(
_M_SH
)

474 
	#ARCHITECTURE_ID
 "SHx"

	)

477 
	#ARCHITECTURE_ID
 ""

	)

480 #–ià
defšed
(
__WATCOMC__
)

481 #ià
defšed
(
_M_I86
)

482 
	#ARCHITECTURE_ID
 "I86"

	)

484 #–ià
defšed
(
_M_IX86
)

485 
	#ARCHITECTURE_ID
 "X86"

	)

488 
	#ARCHITECTURE_ID
 ""

	)

491 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

492 #ià
defšed
(
__ICCARM__
)

493 
	#ARCHITECTURE_ID
 "ARM"

	)

495 #–ià
defšed
(
__ICCRX__
)

496 
	#ARCHITECTURE_ID
 "RX"

	)

498 #–ià
defšed
(
__ICCRH850__
)

499 
	#ARCHITECTURE_ID
 "RH850"

	)

501 #–ià
defšed
(
__ICCRL78__
)

502 
	#ARCHITECTURE_ID
 "RL78"

	)

504 #–ià
defšed
(
__ICCRISCV__
)

505 
	#ARCHITECTURE_ID
 "RISCV"

	)

507 #–ià
defšed
(
__ICCAVR__
)

508 
	#ARCHITECTURE_ID
 "AVR"

	)

510 #–ià
defšed
(
__ICC430__
)

511 
	#ARCHITECTURE_ID
 "MSP430"

	)

513 #–ià
defšed
(
__ICCV850__
)

514 
	#ARCHITECTURE_ID
 "V850"

	)

516 #–ià
defšed
(
__ICC8051__
)

517 
	#ARCHITECTURE_ID
 "8051"

	)

520 
	#ARCHITECTURE_ID
 ""

	)

523 #–ià
defšed
(
__ghs__
)

524 #ià
defšed
(
__PPC64__
)

525 
	#ARCHITECTURE_ID
 "PPC64"

	)

527 #–ià
defšed
(
__µc__
)

528 
	#ARCHITECTURE_ID
 "PPC"

	)

530 #–ià
defšed
(
__ARM__
)

531 
	#ARCHITECTURE_ID
 "ARM"

	)

533 #–ià
defšed
(
__x86_64__
)

534 
	#ARCHITECTURE_ID
 "x64"

	)

536 #–ià
defšed
(
__i386__
)

537 
	#ARCHITECTURE_ID
 "X86"

	)

540 
	#ARCHITECTURE_ID
 ""

	)

543 
	#ARCHITECTURE_ID


	)

547 
	#DEC
(
n
) \

548 ('0' + (((
n
) / 10000000)%10)), \

549 ('0' + (((
n
) / 1000000)%10)), \

550 ('0' + (((
n
) / 100000)%10)), \

551 ('0' + (((
n
) / 10000)%10)), \

552 ('0' + (((
n
) / 1000)%10)), \

553 ('0' + (((
n
) / 100)%10)), \

554 ('0' + (((
n
) / 10)%10)), \

555 ('0' + ((
n
è% 10))

	)

558 
	#HEX
(
n
) \

559 ('0' + ((
n
)>>28 & 0xF)), \

560 ('0' + ((
n
)>>24 & 0xF)), \

561 ('0' + ((
n
)>>20 & 0xF)), \

562 ('0' + ((
n
)>>16 & 0xF)), \

563 ('0' + ((
n
)>>12 & 0xF)), \

564 ('0' + ((
n
)>>8 & 0xF)), \

565 ('0' + ((
n
)>>4 & 0xF)), \

566 ('0' + ((
n
è& 0xF))

	)

569 #ifdeà
COMPILER_VERSION_MAJOR


570 cÚ¡ 
	gšfo_v”siÚ
[] = {

573 
COMPILER_VERSION_MAJOR
,

574 #ifdeà
COMPILER_VERSION_MINOR


575 '.', 
COMPILER_VERSION_MINOR
,

576 #ifdeà
COMPILER_VERSION_PATCH


577 '.', 
COMPILER_VERSION_PATCH
,

578 #ifdeà
COMPILER_VERSION_TWEAK


579 '.', 
COMPILER_VERSION_TWEAK
,

587 #ifdeà
COMPILER_VERSION_INTERNAL


588 cÚ¡ 
	gšfo_v”siÚ_š‹º®
[] = {

592 
COMPILER_VERSION_INTERNAL
,']','\0'};

596 #ifdeà
SIMULATE_VERSION_MAJOR


597 cÚ¡ 
	gšfo_simuÏ‹_v”siÚ
[] = {

600 
SIMULATE_VERSION_MAJOR
,

601 #ifdeà
SIMULATE_VERSION_MINOR


602 '.', 
SIMULATE_VERSION_MINOR
,

603 #ifdeà
SIMULATE_VERSION_PATCH


604 '.', 
SIMULATE_VERSION_PATCH
,

605 #ifdeà
SIMULATE_VERSION_TWEAK


606 '.', 
SIMULATE_VERSION_TWEAK
,

617 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

618 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

623 #ià!
defšed
(
__STDC__
)

624 #ià(
defšed
(
_MSC_VER
è&& !defšed(
__þªg__
)) \

625 || (
defšed
(
__ibmxl__
è|| 
	$defšed
(
__IBMC__
))

626 
	#C_DIALECT
 "90"

	)

628 
	#C_DIALECT


	)

630 #–ià
__STDC_VERSION__
 >= 201000L

631 
	#C_DIALECT
 "11"

	)

632 #–ià
__STDC_VERSION__
 >= 199901L

633 
	#C_DIALECT
 "99"

	)

635 
	#C_DIALECT
 "90"

	)

637 cÚ¡ * 
šfo_Ïnguage_dŸËù_deçuÉ
 =

638 "INFO" ":" "dŸËù_deçuÉ[" 
C_DIALECT
 "]";

642 #ifdeà
ID_VOID_MAIN


643 
	$maš
(è{
	}
}

645 #ià
defšed
(
__CLASSIC_C__
)

646 
	$maš
(
¬gc
, 
¬gv
) argc; *argv[];

648 
	$maš
(
¬gc
, * 
¬gv
[])

651 
»quœe
 = 0;

652 
»quœe
 +ð
šfo_compž”
[
¬gc
];

653 
»quœe
 +ð
šfo_¶©fÜm
[
¬gc
];

654 
»quœe
 +ð
šfo_¬ch
[
¬gc
];

655 #ifdeà
COMPILER_VERSION_MAJOR


656 
»quœe
 +ð
šfo_v”siÚ
[
¬gc
];

658 #ifdeà
COMPILER_VERSION_INTERNAL


659 
»quœe
 +ð
šfo_v”siÚ_š‹º®
[
¬gc
];

661 #ifdeà
SIMULATE_ID


662 
»quœe
 +ð
šfo_simuÏ‹
[
¬gc
];

664 #ifdeà
SIMULATE_VERSION_MAJOR


665 
»quœe
 +ð
šfo_simuÏ‹_v”siÚ
[
¬gc
];

667 #ià
	`defšed
(
__CRAYXE
è|| defšed(
__CRAYXC
)

668 
»quœe
 +ð
šfo_üay
[
¬gc
];

670 
»quœe
 +ð
šfo_Ïnguage_dŸËù_deçuÉ
[
¬gc
];

671 ()
¬gv
;

672  
»quœe
;

673 
	}
}

	@build/CMakeFiles/3.18.4/CompilerIdCXX/CMakeCXXCompilerId.cpp

4 #iâdeà
__ýlu¥lus


12 #ià
defšed
(
__COMO__
)

13 
	#COMPILER_ID
 "Com—u"

	)

15 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__COMO_VERSION__
 / 100)

	)

16 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__COMO_VERSION__
 % 100)

	)

18 #–ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

19 
	#COMPILER_ID
 "IÁ–"

	)

20 #ià
defšed
(
_MSC_VER
)

21 
	#SIMULATE_ID
 "MSVC"

	)

23 #ià
defšed
(
__GNUC__
)

24 
	#SIMULATE_ID
 "GNU"

	)

27 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

28 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

29 #ià
defšed
(
__INTEL_COMPILER_UPDATE
)

30 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

32 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

34 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

36 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

38 #ià
defšed
(
_MSC_VER
)

40 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

41 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

43 #ià
defšed
(
__GNUC__
)

44 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

45 #–ià
defšed
(
__GNUG__
)

46 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

48 #ià
defšed
(
__GNUC_MINOR__
)

49 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

51 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

52 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

55 #–ià
defšed
(
__PATHCC__
)

56 
	#COMPILER_ID
 "P©hSÿË"

	)

57 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

58 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

59 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

60 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

63 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

64 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

65 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

66 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

67 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

69 #–ià
defšed
(
__BORLANDC__
)

70 
	#COMPILER_ID
 "BÜÏnd"

	)

72 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

73 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

75 #–ià
defšed
(
__WATCOMC__
) && __WATCOMC__ < 1200

76 
	#COMPILER_ID
 "W©com"

	)

78 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

79 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

80 #ià(
__WATCOMC__
 % 10) > 0

81 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

84 #–ià
defšed
(
__WATCOMC__
)

85 
	#COMPILER_ID
 "O³nW©com"

	)

87 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100è/ 100)

	)

88 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

89 #ià(
__WATCOMC__
 % 10) > 0

90 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

93 #–ià
defšed
(
__SUNPRO_CC
)

94 
	#COMPILER_ID
 "SunPro"

	)

95 #ià
__SUNPRO_CC
 >= 0x5100

97 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>12)

	)

98 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xFF)

	)

99 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

102 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>8)

	)

103 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xF)

	)

104 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

107 #–ià
defšed
(
__HP_aCC
)

108 
	#COMPILER_ID
 "HP"

	)

110 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_aCC
/10000)

	)

111 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_aCC
/100 % 100)

	)

112 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_aCC
 % 100)

	)

114 #–ià
defšed
(
__DECCXX
)

115 
	#COMPILER_ID
 "Com·q"

	)

117 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECCXX_VER
/10000000)

	)

118 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECCXX_VER
/100000 % 100)

	)

119 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECCXX_VER
 % 10000)

	)

121 #–ià
defšed
(
__IBMCPP__
è&& defšed(
__COMPILER_VER__
)

122 
	#COMPILER_ID
 "zOS"

	)

124 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

125 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

126 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

128 #–ià
defšed
(
__ibmxl__
è&& defšed(
__þªg__
)

129 
	#COMPILER_ID
 "XLCÏng"

	)

130 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ibmxl_v”siÚ__
)

	)

131 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ibmxl_»Ëa£__
)

	)

132 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ibmxl_modifiÿtiÚ__
)

	)

133 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__ibmxl_±f_fix_Ëv–__
)

	)

136 #–ià
defšed
(
__IBMCPP__
è&& !defšed(
__COMPILER_VER__
) && __IBMCPP__ >= 800

137 
	#COMPILER_ID
 "XL"

	)

139 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

140 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

141 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

143 #–ià
defšed
(
__IBMCPP__
è&& !defšed(
__COMPILER_VER__
) && __IBMCPP__ < 800

144 
	#COMPILER_ID
 "Visu®Age"

	)

146 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

147 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

148 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

150 #–ià
defšed
(
__PGI
)

151 
	#COMPILER_ID
 "PGI"

	)

152 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

153 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

154 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

155 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

158 #–ià
defšed
(
_CRAYC
)

159 
	#COMPILER_ID
 "C¿y"

	)

160 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

161 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

163 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

164 
	#COMPILER_ID
 "TI"

	)

166 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

167 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

168 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

170 #–ià
defšed
(
__FUJITSU
è|| defšed(
__FCC_VERSION
è|| defšed(
__fcc_v”siÚ
)

171 
	#COMPILER_ID
 "Fuj™su"

	)

173 #–ià
defšed
(
__ghs__
)

174 
	#COMPILER_ID
 "GHS"

	)

176 #ifdeà
__GHS_VERSION_NUMBER


177 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 100)

	)

178 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 10 % 10)

	)

179 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GHS_VERSION_NUMBER
 % 10)

	)

182 #–ià
defšed
(
__SCO_VERSION__
)

183 
	#COMPILER_ID
 "SCO"

	)

185 #–ià
defšed
(
__ARMCC_VERSION
è&& !defšed(
__þªg__
)

186 
	#COMPILER_ID
 "ARMCC"

	)

187 #ià
__ARMCC_VERSION
 >= 1000000

189 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

190 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

191 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

194 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

195 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

196 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

200 #–ià
defšed
(
__þªg__
è&& defšed(
__­¶e_bužd_v”siÚ__
)

201 
	#COMPILER_ID
 "AµËCÏng"

	)

202 #ià
defšed
(
_MSC_VER
)

203 
	#SIMULATE_ID
 "MSVC"

	)

205 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__þªg_majÜ__
)

	)

206 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__þªg_mšÜ__
)

	)

207 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__þªg_·tchËv–__
)

	)

208 #ià
defšed
(
_MSC_VER
)

210 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

211 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

213 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__­¶e_bužd_v”siÚ__
)

	)

215 #–ià
defšed
(
__þªg__
è&& defšed(
__ARMCOMPILER_VERSION
)

216 
	#COMPILER_ID
 "ARMCÏng"

	)

217 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/1000000)

	)

218 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/10000 % 100)

	)

219 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCOMPILER_VERSION
 % 10000)

	)

220 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__ARMCOMPILER_VERSION
)

	)

222 #–ià
defšed
(
__þªg__
)

223 
	#COMPILER_ID
 "CÏng"

	)

224 #ià
defšed
(
_MSC_VER
)

225 
	#SIMULATE_ID
 "MSVC"

	)

227 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__þªg_majÜ__
)

	)

228 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__þªg_mšÜ__
)

	)

229 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__þªg_·tchËv–__
)

	)

230 #ià
defšed
(
_MSC_VER
)

232 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

233 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

236 #–ià
defšed
(
__GNUC__
è|| defšed(
__GNUG__
)

237 
	#COMPILER_ID
 "GNU"

	)

238 #ià
defšed
(
__GNUC__
)

239 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

241 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

243 #ià
defšed
(
__GNUC_MINOR__
)

244 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

246 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

247 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

250 #–ià
defšed
(
_MSC_VER
)

251 
	#COMPILER_ID
 "MSVC"

	)

253 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

254 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

255 #ià
defšed
(
_MSC_FULL_VER
)

256 #ià
_MSC_VER
 >= 1400

258 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

261 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

264 #ià
defšed
(
_MSC_BUILD
)

265 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

268 #–ià
defšed
(
__VISUALDSPVERSION__
è|| defšed(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

269 
	#COMPILER_ID
 "ADSP"

	)

270 #ià
defšed
(
__VISUALDSPVERSION__
)

272 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

273 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

274 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

277 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

278 
	#COMPILER_ID
 "IAR"

	)

279 #ià
defšed
(
__VER__
è&& defšed(
__ICCARM__
)

280 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 1000000)

	)

281 
	#COMPILER_VERSION_MINOR
 
	`DEC
(((
__VER__
è/ 1000è% 1000)

	)

282 
	#COMPILER_VERSION_PATCH
 
	`DEC
((
__VER__
è% 1000)

	)

283 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

284 #–ià
defšed
(
__VER__
è&& (defšed(
__ICCAVR__
è|| defšed(
__ICCRX__
è|| defšed(
__ICCRH850__
è|| defšed(
__ICCRL78__
è|| defšed(
__ICC430__
è|| defšed(
__ICCRISCV__
è|| defšed(
__ICCV850__
è|| defšed(
__ICC8051__
))

285 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 100)

	)

286 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__VER__
è- (((__VER__è/ 100)*100))

	)

287 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SUBVERSION__
)

	)

288 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

295 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

296 
	#COMPILER_ID
 "HP"

	)

299 
	#COMPILER_ID
 ""

	)

306 cÚ¡* 
	gšfo_compž”
 = "INFO" ":" "compž”[" 
COMPILER_ID
 "]";

307 #ifdeà
SIMULATE_ID


308 cÚ¡* 
	gšfo_simuÏ‹
 = "INFO" ":" "simuÏ‹[" 
SIMULATE_ID
 "]";

311 #ifdeà
__QNXNTO__


312 cÚ¡* 
	gqnxÁo
 = "INFO" ":" "qnxnto[]";

315 #ià
defšed
(
__CRAYXE
è|| defšed(
__CRAYXC
)

316 cÚ¡ *
	gšfo_üay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

319 
	#STRINGIFY_HELPER
(
X
è#X

	)

320 
	#STRINGIFY
(
X
è
	`STRINGIFY_HELPER
(X)

	)

323 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

324 
	#PLATFORM_ID
 "Lšux"

	)

326 #–ià
defšed
(
__CYGWIN__
)

327 
	#PLATFORM_ID
 "Cygwš"

	)

329 #–ià
defšed
(
__MINGW32__
)

330 
	#PLATFORM_ID
 "MšGW"

	)

332 #–ià
defšed
(
__APPLE__
)

333 
	#PLATFORM_ID
 "D¬wš"

	)

335 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

336 
	#PLATFORM_ID
 "Wšdows"

	)

338 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

339 
	#PLATFORM_ID
 "F»eBSD"

	)

341 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

342 
	#PLATFORM_ID
 "N‘BSD"

	)

344 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

345 
	#PLATFORM_ID
 "O³nBSD"

	)

347 #–ià
defšed
(
__sun
è|| defšed(
sun
)

348 
	#PLATFORM_ID
 "SunOS"

	)

350 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

351 
	#PLATFORM_ID
 "AIX"

	)

353 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

354 
	#PLATFORM_ID
 "HP-UX"

	)

356 #–ià
defšed
(
__HAIKU__
)

357 
	#PLATFORM_ID
 "Haiku"

	)

359 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

360 
	#PLATFORM_ID
 "BeOS"

	)

362 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

363 
	#PLATFORM_ID
 "QNX"

	)

365 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

366 
	#PLATFORM_ID
 "Tru64"

	)

368 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

369 
	#PLATFORM_ID
 "RISCos"

	)

371 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

372 
	#PLATFORM_ID
 "SINIX"

	)

374 #–ià
defšed
(
__UNIX_SV__
)

375 
	#PLATFORM_ID
 "UNIX_SV"

	)

377 #–ià
defšed
(
__bsdos__
)

378 
	#PLATFORM_ID
 "BSDOS"

	)

380 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

381 
	#PLATFORM_ID
 "MP-RAS"

	)

383 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

384 
	#PLATFORM_ID
 "OSF1"

	)

386 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

387 
	#PLATFORM_ID
 "SCO_SV"

	)

389 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

390 
	#PLATFORM_ID
 "ULTRIX"

	)

392 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

393 
	#PLATFORM_ID
 "X’ix"

	)

395 #–ià
defšed
(
__WATCOMC__
)

396 #ià
defšed
(
__LINUX__
)

397 
	#PLATFORM_ID
 "Lšux"

	)

399 #–ià
defšed
(
__DOS__
)

400 
	#PLATFORM_ID
 "DOS"

	)

402 #–ià
defšed
(
__OS2__
)

403 
	#PLATFORM_ID
 "OS2"

	)

405 #–ià
defšed
(
__WINDOWS__
)

406 
	#PLATFORM_ID
 "Wšdows3x"

	)

408 #–ià
defšed
(
__VXWORKS__
)

409 
	#PLATFORM_ID
 "VxWÜks"

	)

412 
	#PLATFORM_ID


	)

415 #–ià
defšed
(
__INTEGRITY
)

416 #ià
defšed
(
INT_178B
)

417 
	#PLATFORM_ID
 "IÁegr™y178"

	)

420 
	#PLATFORM_ID
 "IÁegr™y"

	)

424 
	#PLATFORM_ID


	)

433 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

434 #ià
defšed
(
_M_IA64
)

435 
	#ARCHITECTURE_ID
 "IA64"

	)

437 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

438 
	#ARCHITECTURE_ID
 "x64"

	)

440 #–ià
defšed
(
_M_IX86
)

441 
	#ARCHITECTURE_ID
 "X86"

	)

443 #–ià
defšed
(
_M_ARM64
)

444 
	#ARCHITECTURE_ID
 "ARM64"

	)

446 #–ià
defšed
(
_M_ARM
)

447 #ià
_M_ARM
 == 4

448 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

449 #–ià
_M_ARM
 == 5

450 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

452 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

455 #–ià
defšed
(
_M_MIPS
)

456 
	#ARCHITECTURE_ID
 "MIPS"

	)

458 #–ià
defšed
(
_M_SH
)

459 
	#ARCHITECTURE_ID
 "SHx"

	)

462 
	#ARCHITECTURE_ID
 ""

	)

465 #–ià
defšed
(
__WATCOMC__
)

466 #ià
defšed
(
_M_I86
)

467 
	#ARCHITECTURE_ID
 "I86"

	)

469 #–ià
defšed
(
_M_IX86
)

470 
	#ARCHITECTURE_ID
 "X86"

	)

473 
	#ARCHITECTURE_ID
 ""

	)

476 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

477 #ià
defšed
(
__ICCARM__
)

478 
	#ARCHITECTURE_ID
 "ARM"

	)

480 #–ià
defšed
(
__ICCRX__
)

481 
	#ARCHITECTURE_ID
 "RX"

	)

483 #–ià
defšed
(
__ICCRH850__
)

484 
	#ARCHITECTURE_ID
 "RH850"

	)

486 #–ià
defšed
(
__ICCRL78__
)

487 
	#ARCHITECTURE_ID
 "RL78"

	)

489 #–ià
defšed
(
__ICCRISCV__
)

490 
	#ARCHITECTURE_ID
 "RISCV"

	)

492 #–ià
defšed
(
__ICCAVR__
)

493 
	#ARCHITECTURE_ID
 "AVR"

	)

495 #–ià
defšed
(
__ICC430__
)

496 
	#ARCHITECTURE_ID
 "MSP430"

	)

498 #–ià
defšed
(
__ICCV850__
)

499 
	#ARCHITECTURE_ID
 "V850"

	)

501 #–ià
defšed
(
__ICC8051__
)

502 
	#ARCHITECTURE_ID
 "8051"

	)

505 
	#ARCHITECTURE_ID
 ""

	)

508 #–ià
defšed
(
__ghs__
)

509 #ià
defšed
(
__PPC64__
)

510 
	#ARCHITECTURE_ID
 "PPC64"

	)

512 #–ià
defšed
(
__µc__
)

513 
	#ARCHITECTURE_ID
 "PPC"

	)

515 #–ià
defšed
(
__ARM__
)

516 
	#ARCHITECTURE_ID
 "ARM"

	)

518 #–ià
defšed
(
__x86_64__
)

519 
	#ARCHITECTURE_ID
 "x64"

	)

521 #–ià
defšed
(
__i386__
)

522 
	#ARCHITECTURE_ID
 "X86"

	)

525 
	#ARCHITECTURE_ID
 ""

	)

528 
	#ARCHITECTURE_ID


	)

532 
	#DEC
(
n
) \

533 ('0' + (((
n
) / 10000000)%10)), \

534 ('0' + (((
n
) / 1000000)%10)), \

535 ('0' + (((
n
) / 100000)%10)), \

536 ('0' + (((
n
) / 10000)%10)), \

537 ('0' + (((
n
) / 1000)%10)), \

538 ('0' + (((
n
) / 100)%10)), \

539 ('0' + (((
n
) / 10)%10)), \

540 ('0' + ((
n
è% 10))

	)

543 
	#HEX
(
n
) \

544 ('0' + ((
n
)>>28 & 0xF)), \

545 ('0' + ((
n
)>>24 & 0xF)), \

546 ('0' + ((
n
)>>20 & 0xF)), \

547 ('0' + ((
n
)>>16 & 0xF)), \

548 ('0' + ((
n
)>>12 & 0xF)), \

549 ('0' + ((
n
)>>8 & 0xF)), \

550 ('0' + ((
n
)>>4 & 0xF)), \

551 ('0' + ((
n
è& 0xF))

	)

554 #ifdeà
COMPILER_VERSION_MAJOR


555 cÚ¡ 
	gšfo_v”siÚ
[] = {

558 
COMPILER_VERSION_MAJOR
,

559 #ifdeà
COMPILER_VERSION_MINOR


560 '.', 
COMPILER_VERSION_MINOR
,

561 #ifdeà
COMPILER_VERSION_PATCH


562 '.', 
COMPILER_VERSION_PATCH
,

563 #ifdeà
COMPILER_VERSION_TWEAK


564 '.', 
COMPILER_VERSION_TWEAK
,

572 #ifdeà
COMPILER_VERSION_INTERNAL


573 cÚ¡ 
	gšfo_v”siÚ_š‹º®
[] = {

577 
COMPILER_VERSION_INTERNAL
,']','\0'};

581 #ifdeà
SIMULATE_VERSION_MAJOR


582 cÚ¡ 
	gšfo_simuÏ‹_v”siÚ
[] = {

585 
SIMULATE_VERSION_MAJOR
,

586 #ifdeà
SIMULATE_VERSION_MINOR


587 '.', 
SIMULATE_VERSION_MINOR
,

588 #ifdeà
SIMULATE_VERSION_PATCH


589 '.', 
SIMULATE_VERSION_PATCH
,

590 #ifdeà
SIMULATE_VERSION_TWEAK


591 '.', 
SIMULATE_VERSION_TWEAK
,

602 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

603 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

608 #ià
defšed
(
__INTEL_COMPILER
è&& defšed(
_MSVC_LANG
) && _MSVC_LANG < 201403L

609 #ià
defšed
(
__INTEL_CXX11_MODE__
)

610 #ià
defšed
(
__ýp_agg»g©e_nsdmi
)

611 
	#CXX_STD
 201402L

	)

613 
	#CXX_STD
 201103L

	)

616 
	#CXX_STD
 199711L

	)

618 #–ià
defšed
(
_MSC_VER
è&& defšed(
_MSVC_LANG
)

619 
	#CXX_STD
 
_MSVC_LANG


	)

621 
	#CXX_STD
 
__ýlu¥lus


	)

624 cÚ¡ * 
	gšfo_Ïnguage_dŸËù_deçuÉ
 = "INFO" ":" "dialect_default["

625 #ià
CXX_STD
 > 201703L

627 #–ià
CXX_STD
 >= 201703L

629 #–ià
CXX_STD
 >= 201402L

631 #–ià
CXX_STD
 >= 201103L

640 
	$maš
(
¬gc
, * 
¬gv
[])

642 
»quœe
 = 0;

643 
»quœe
 +ð
šfo_compž”
[
¬gc
];

644 
»quœe
 +ð
šfo_¶©fÜm
[
¬gc
];

645 #ifdeà
COMPILER_VERSION_MAJOR


646 
»quœe
 +ð
šfo_v”siÚ
[
¬gc
];

648 #ifdeà
COMPILER_VERSION_INTERNAL


649 
»quœe
 +ð
šfo_v”siÚ_š‹º®
[
¬gc
];

651 #ifdeà
SIMULATE_ID


652 
»quœe
 +ð
šfo_simuÏ‹
[
¬gc
];

654 #ifdeà
SIMULATE_VERSION_MAJOR


655 
»quœe
 +ð
šfo_simuÏ‹_v”siÚ
[
¬gc
];

657 #ià
	`defšed
(
__CRAYXE
è|| defšed(
__CRAYXC
)

658 
»quœe
 +ð
šfo_üay
[
¬gc
];

660 
»quœe
 +ð
šfo_Ïnguage_dŸËù_deçuÉ
[
¬gc
];

661 ()
¬gv
;

662  
»quœe
;

663 
	}
}

	@build/CMakeFiles/FindOpenMP/OpenMPCheckVersion.c

2 
	~<¡dio.h
>

3 
	~<omp.h
>

4 cÚ¡ 
	gompv”_¡r
[] = { 'I', 'N', 'F', 'O', ':', 'O', 'p', 'e', 'n', 'M',

6 ('0' + ((
_OPENMP
/100000)%10)),

7 ('0' + ((
_OPENMP
/10000)%10)),

8 ('0' + ((
_OPENMP
/1000)%10)),

9 ('0' + ((
_OPENMP
/100)%10)),

10 ('0' + ((
_OPENMP
/10)%10)),

11 ('0' + ((
_OPENMP
/1)%10)),

13 
	$maš
()

15 
	`puts
(
ompv”_¡r
);

17 
	}
}

	@build/CMakeFiles/FindOpenMP/OpenMPCheckVersion.cpp

2 
	~<¡dio.h
>

3 
	~<omp.h
>

4 cÚ¡ 
	gompv”_¡r
[] = { 'I', 'N', 'F', 'O', ':', 'O', 'p', 'e', 'n', 'M',

6 ('0' + ((
_OPENMP
/100000)%10)),

7 ('0' + ((
_OPENMP
/10000)%10)),

8 ('0' + ((
_OPENMP
/1000)%10)),

9 ('0' + ((
_OPENMP
/100)%10)),

10 ('0' + ((
_OPENMP
/10)%10)),

11 ('0' + ((
_OPENMP
/1)%10)),

13 
	$maš
()

15 
	`puts
(
ompv”_¡r
);

17 
	}
}

	@build/CMakeFiles/FindOpenMP/OpenMPTryFlag.c

2 
	~<omp.h
>

3 
	$maš
() {

4 #ifdeà
_OPENMP


5 
	`omp_g‘_max_th»ads
();

7 #–ià
	`defšed
(
__HIP_DEVICE_COMPILE__
)

10 
b»aks_Ú_pu½o£


12 
	}
}

	@build/CMakeFiles/FindOpenMP/OpenMPTryFlag.cpp

2 
	~<omp.h
>

3 
	$maš
() {

4 #ifdeà
_OPENMP


5 
	`omp_g‘_max_th»ads
();

7 #–ià
	`defšed
(
__HIP_DEVICE_COMPILE__
)

10 
b»aks_Ú_pu½o£


12 
	}
}

	@build/CMakeFiles/feature_tests.cxx

2 cÚ¡ 
	gã©u»s
[] = {"\n"

4 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && 
__ýlu¥lus


11 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

18 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð408 && 
__ýlu¥lus
 >= 201103L

25 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð408 && 
__ýlu¥lus
 >= 201103L

32 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð408 && 
__ýlu¥lus
 >= 201103L

39 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

46 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

53 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

60 #ià((
__GNUC__
 * 10000 + 
__GNUC_MINOR__
 * 100 + 
__GNUC_PATCHLEVEL__
è>ð40801è&& 
__ýlu¥lus
 >= 201103L

67 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

74 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

81 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

88 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

95 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

102 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

109 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð405 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

116 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

123 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

130 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

137 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

144 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

151 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð408 && 
__ýlu¥lus
 >= 201103L

158 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

165 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð405 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

172 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð405 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

179 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

186 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

193 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

200 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

207 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

214 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

221 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð405 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

228 #ià((
__GNUC__
 * 10000 + 
__GNUC_MINOR__
 * 100 + 
__GNUC_PATCHLEVEL__
è>ð40801è&& 
__ýlu¥lus
 >= 201103L

235 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

242 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

249 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

256 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

263 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

270 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð408 && 
__ýlu¥lus
 >= 201103L

277 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

284 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

291 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

298 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð406 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

305 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð407 && 
__ýlu¥lus
 >= 201103L

312 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

319 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð404 && (
__ýlu¥lus
 >ð201103L || (
defšed
(
__GXX_EXPERIMENTAL_CXX0X__
) && __GXX_EXPERIMENTAL_CXX0X__))

326 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð500 && 
__ýlu¥lus
 >= 201402L

333 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

340 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

347 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

354 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

361 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

368 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

375 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

382 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð500 && 
__ýlu¥lus
 >= 201402L

389 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð409 && 
__ýlu¥lus
 > 201103L

396 #ià(
__GNUC__
 * 100 + 
__GNUC_MINOR__
è>ð500 && 
__ýlu¥lus
 >= 201402L

405 
	$maš
(
¬gc
, ** 
¬gv
è{ (ïrgv;  
ã©u»s
[¬gc]; 
	}
}

	@compat/msvc/stdint.h

1 #´agm¨
Úû


2 #iâdeà
_MSC_VER


3 #”rÜ 
loÿl
 
C99
 
ty³
 
defš™iÚ
 
should
 
Úly
 
be
 
u£d
 
š
 
Visu®
 
C
++ 
befÜe
 2010

5 #ià
_MSC_VER
 > 1500

6 #”rÜ 
loÿl
 
C99
 
ty³
 
defš™iÚ
 
should
 
Úly
 
be
 
u£d
 
š
 
Visu®
 
C
++ 
befÜe
 2010

11 sigÃd 
	tšt8_t
;

12 
	tšt16_t
;

13 
	tšt32_t
;

14 
__št64
 
	tšt64_t
;

16 
	tušt8_t
;

17 
	tušt16_t
;

18 
	tušt32_t
;

19 
	t__št64
 
	tušt64_t
;

	@doc/mainpage.h

1 
	~"TLibCommÚ/CommÚDef.h
"

	@source/App/Parcat/parcat.cpp

34 
	~<¡dšt.h
>

35 
	~<veùÜ
>

36 
	~<c¡dlib
>

37 
	~<c¡dio
>

38 
	~<ÿs£¹
>

40 
	#PRINT_NALUS
 0

	)

42 
	eN®Un™Ty³


44 
	mTRAIL_N
 = 0,

45 
	mTRAIL_R
,

47 
	mTSA_N
,

48 
	mTSA_R
,

50 
	mSTSA_N
,

51 
	mSTSA_R
,

53 
	mRADL_N
,

54 
	mRADL_R
,

56 
	mRASL_N
,

57 
	mRASL_R
,

59 
	mRESERVED_VCL_N10
,

60 
	mRESERVED_VCL_R11
,

61 
	mRESERVED_VCL_N12
,

62 
	mRESERVED_VCL_R13
,

63 
	mRESERVED_VCL_N14
,

64 
	mRESERVED_VCL_R15
,

66 
	mBLA_W_LP
,

67 
	mBLA_W_RADL
,

68 
	mBLA_N_LP
,

69 
	mIDR_W_RADL
,

70 
	mIDR_N_LP
,

71 
	mCRA
,

72 
	mRESERVED_IRAP_VCL22
,

73 
	mRESERVED_IRAP_VCL23
,

75 
	mRESERVED_VCL24
,

76 
	mRESERVED_VCL25
,

77 
	mRESERVED_VCL26
,

78 
	mRESERVED_VCL27
,

79 
	mRESERVED_VCL28
,

80 
	mRESERVED_VCL29
,

81 
	mRESERVED_VCL30
,

82 
	mRESERVED_VCL31
,

84 
	mVPS
,

85 
	mSPS
,

86 
	mPPS
,

87 
	mACCESS_UNIT_DELIMITER
,

88 
	mEOS
,

89 
	mEOB
,

90 
	mFILLER_DATA
,

91 
	mPREFIX_SEI
,

92 
	mSUFFIX_SEI
,

94 
	mRESERVED_NVCL41
,

95 
	mRESERVED_NVCL42
,

96 
	mRESERVED_NVCL43
,

97 
	mRESERVED_NVCL44
,

98 
	mRESERVED_NVCL45
,

99 
	mRESERVED_NVCL46
,

100 
	mRESERVED_NVCL47
,

101 
	mUNSPECIFIED_48
,

102 
	mUNSPECIFIED_49
,

103 
	mUNSPECIFIED_50
,

104 
	mUNSPECIFIED_51
,

105 
	mUNSPECIFIED_52
,

106 
	mUNSPECIFIED_53
,

107 
	mUNSPECIFIED_54
,

108 
	mUNSPECIFIED_55
,

109 
	mUNSPECIFIED_56
,

110 
	mUNSPECIFIED_57
,

111 
	mUNSPECIFIED_58
,

112 
	mUNSPECIFIED_59
,

113 
	mUNSPECIFIED_60
,

114 
	mUNSPECIFIED_61
,

115 
	mUNSPECIFIED_62
,

116 
	mUNSPECIFIED_63
,

117 
	mINVALID
,

129 
	$fšd_Çl_un™
(cÚ¡ 
ušt8_t
* 
buf
, 
size
, * 
Çl_¡¬t
, * 
Çl_’d
)

131 
i
;

133 *
Çl_¡¬t
 = 0;

134 *
Çl_’d
 = 0;

136 
i
 = 0;

138 (
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) &&

139 (
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0 || buf[i+3] != 0x01)

142 
i
++;

143 ià(
i
+4 >ð
size
) {  0; }

146 ià(
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01)

148 
i
++;

151 ià(
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) {  0; }

152 
i
+= 3;

153 *
Çl_¡¬t
 = 
i
;

156 
i
+3 < 
size
 &&

157 (
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0) &&

158 (
buf
[
i
] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01)

161 
i
++;

165 ià(
i
+3 =ð
size
)

167 *
Çl_’d
 = 
size
;

171 *
Çl_’d
 = 
i
;

174  (*
Çl_’d
 - *
Çl_¡¬t
);

175 
	}
}

177 cÚ¡ 
boÞ
 
	gv”bo£
 = 
çl£
;

179 cÚ¡ * 
	gNALU_TYPE
[] =

224 
	$ÿlc_poc
(
iPOClsb
, 
´evTid0POC
, 
g‘B™sFÜPOC
, 
Çlu_ty³
)

226 
iP»vPOC
 = 
´evTid0POC
;

227 
iMaxPOClsb
 = 1<< 
g‘B™sFÜPOC
;

228 
iP»vPOClsb
 = 
iP»vPOC
 & (
iMaxPOClsb
 - 1);

229 
iP»vPOCmsb
 = 
iP»vPOC
-
iP»vPOClsb
;

230 
iPOCmsb
;

231 ifÐÐ
iPOClsb
 < 
iP»vPOClsb
 ) && ( ( iP»vPOClsb - iPOClsb ) >ðÐ
iMaxPOClsb
 / 2 ) ) )

233 
iPOCmsb
 = 
iP»vPOCmsb
 + 
iMaxPOClsb
;

235 ifÐ(
iPOClsb
 > 
iP»vPOClsb
 ) && ( (iPOClsb - iP»vPOClsb ) > ( 
iMaxPOClsb
 / 2 ) ) )

237 
iPOCmsb
 = 
iP»vPOCmsb
 - 
iMaxPOClsb
;

241 
iPOCmsb
 = 
iP»vPOCmsb
;

243 iàÐ
Çlu_ty³
 =ð
BLA_W_LP


244 || 
Çlu_ty³
 =ð
BLA_W_RADL


245 || 
Çlu_ty³
 =ð
BLA_N_LP
 )

248 
iPOCmsb
 = 0;

251  
iPOCmsb
 + 
iPOClsb
;

252 
	}
}

254 
	g¡d
::
veùÜ
<
ušt8_t
> 
fž‹r_£gm’t
(cÚ¡ 
¡d
::veùÜ<ušt8_t> & 
v
, 
idx
, * 
poc_ba£
, * 
Ï¡_idr_poc
)

256 cÚ¡ 
ušt8_t
 * 
	gp
 = 
v
.
d©a
();

257 cÚ¡ 
ušt8_t
 * 
	gbuf
 = 
v
.
d©a
();

258 
	gsz
 = (è
v
.
size
();

259 
	gÇl_¡¬t
, 
	gÇl_’d
;

260 
	goff
 = 0;

261 
	gút
 = 0;

262 
boÞ
 
	gidr_found
 = 
çl£
;

264 
	g¡d
::
veùÜ
<
ušt8_t
> 
out
;

265 
	gout
.
»£rve
(
v
.
size
());

267 
	gb™s_fÜ_poc
 = 8;

268 
boÞ
 
	gsk_Ãxt_£i
 = 
çl£
;

270 
fšd_Çl_un™
(
p
, 
sz
, &
Çl_¡¬t
, &
Çl_’d
) > 0)

272 if(
	gv”bo£
)

274 
´štf
( "!! Found NAL‡t offset %lld (0x%04llX), size %lld (0x%04llX) \n",

275 ()(
off
 + (
p
 - 
buf
)),

276 ()(
off
 + (
p
 - 
buf
)),

277 ()(
Çl_’d
 - 
Çl_¡¬t
),

278 ()(
Çl_’d
 - 
Çl_¡¬t
) );

281 
	gp
 +ð
Çl_¡¬t
;

283 
	g¡d
::
veùÜ
<
ušt8_t
> 
Çlu
(
p
,… + 
Çl_’d
 - 
Çl_¡¬t
);

284 
	gÇlu_ty³
 = 
Çlu
[0] >> 1;

285 
	gpoc
 = -1;

286 
	gpoc_lsb
 = -1;

287 
	gÃw_poc
 = -1;

289 if(
	gÇlu_ty³
 =ð
IDR_W_RADL
 || 
Çlu_ty³
 =ð
IDR_N_LP
)

291 
poc
 = 0;

292 
	gÃw_poc
 = *
poc_ba£
 + 
poc
;

295 if(
	gÇlu_ty³
 < 32 &&‚®u_ty³ !ð
IDR_W_RADL
 && 
Çlu_ty³
 !ð
IDR_N_LP
)

297 
off£t
 = 16;

299 
	goff£t
 += 1;

300 ià(
	gÇlu_ty³
 >ð
BLA_W_LP
 && 
Çlu_ty³
 <ð
RESERVED_IRAP_VCL23
)

302 
off£t
 += 1;

306 
	gby‹_off£t2
 = 
off£t
 / 8;

307 
	ghi_b™s2
 = 
off£t
 % 8;

308 
ušt16_t
 
	gd©a2
 = (
Çlu
[
by‹_off£t2
] << 8) |‚alu[byte_offset2 + 1];

309 
	glow_b™s2
 = 16 - 
hi_b™s2
 - 1;

310 if(((
	gd©a2
 >> 
	glow_b™s2
) % 2))

311 
	goff£t
 += 1;

313 
	goff£t
 += 3;

314 
	goff£t
 += 1;

316 ià(
	gÇlu_ty³
 =ð
CRA
)

318 
off£t
 += 2;

320 
	gby‹_off£t
 = 
off£t
 / 8;

321 
	ghi_b™s
 = 
off£t
 % 8;

322 
ušt16_t
 
	gd©a
 = (
Çlu
[
by‹_off£t
] << 8) |‚alu[byte_offset + 1];

323 
	glow_b™s
 = 16 - 
hi_b™s
 - 
b™s_fÜ_poc
;

324 
	gpoc_lsb
 = (
d©a
 >> 
low_b™s
) & 0xff;

325 
	gpoc
 = 
poc_lsb
;

327 
	gÃw_poc
 = 
poc
 + *
poc_ba£
;

329 
	gpicOrd”CÁLSB
 = (
Ãw_poc
 - *
Ï¡_idr_poc
 +(1 << 
b™s_fÜ_poc
)) & ((1<<bits_for_poc)-1);

331 
	glow
 = 
d©a
 & ((1 << (
low_b™s
 + 1)) - 1);

332 
	ghi
 = 
d©a
 >> (16 - 
hi_b™s
);

333 
	gd©a
 = (
hi
 << (16 - 
hi_b™s
)è| (
picOrd”CÁLSB
 << 
low_b™s
è| 
low
;

335 
	gÇlu
[
by‹_off£t
] = 
d©a
 >> 8;

336 
	gÇlu
[
by‹_off£t
 + 1] = 
d©a
 & 0xff;

338 ++
	gút
;

341 if(
	gidx
 > 1 && (
	gÇlu_ty³
 =ð
IDR_W_RADL
 || 
Çlu_ty³
 =ð
IDR_N_LP
))

343 
sk_Ãxt_£i
 = 
Œue
;

344 
	gidr_found
 = 
Œue
;

347 if((
	gidx
 > 1 && (
	gÇlu_ty³
 =ð
IDR_W_RADL
 || 
Çlu_ty³
 =ð
IDR_N_LP
 )è|| ((
idx
>1 && !
idr_found
è&& (‚®u_ty³ =ð
VPS
 ||‚®u_ty³ =ð
SPS
 ||‚®u_ty³ =ð
PPS
))

348 || (
Çlu_ty³
 =ð
SUFFIX_SEI
 && 
sk_Ãxt_£i
))

353 
out
.
š£¹
(out.
’d
(), 
p
 - 
Çl_¡¬t
,…);

354 
	gout
.
š£¹
(
out
.
’d
(), 
Çlu
.
begš
(),‚alu.end());

357 if(
	gÇlu_ty³
 =ð
SUFFIX_SEI
 && 
sk_Ãxt_£i
)

359 
sk_Ãxt_£i
 = 
çl£
;

363 
	gp
 +ð(
Çl_’d
 - 
Çl_¡¬t
);

364 
	gsz
 -ð
Çl_’d
;

367 *
	gpoc_ba£
 +ð
út
;

368  
	gout
;

371 
	g¡d
::
veùÜ
<
ušt8_t
> 
	$´oûss_£gm’t
(cÚ¡ * 
·th
, 
idx
, * 
poc_ba£
, * 
Ï¡_idr_poc
)

373 
FILE
 * 
fdi
 = 
	`fÝ’
(
·th
, "rb");

375 ià(
fdi
 =ð
NULL
)

377 
	`årštf
(
¡d”r
, "E¼Ü: could‚Ù o³Àšpuˆfže: %s", 
·th
);

378 
	`ex™
(1);

381 
	`f£ek
(
fdi
, 0, 
SEEK_END
);

382 
fuÎ_sz
 = 
	`á–l
(
fdi
);

383 
	`f£ek
(
fdi
, 0, 
SEEK_SET
);

385 
¡d
::
veùÜ
<
ušt8_t
> 
	`v
(
fuÎ_sz
);

387 
size_t
 
sz
 = 
	`ä—d
((*è
v
.
	`d©a
(), 1, 
fuÎ_sz
, 
fdi
);

388 
	`fþo£
(
fdi
);

390 if(
sz
 !ð
fuÎ_sz
)

392 
	`årštf
(
¡d”r
, "Error: input file was‚ot„ead completely.");

393 
	`ex™
(1);

396  
	`fž‹r_£gm’t
(
v
, 
idx
, 
poc_ba£
, 
Ï¡_idr_poc
);

397 
	}
}

399 
	$maš
(
¬gc
, * 
¬gv
[])

401 if(
¬gc
 < 3)

403 
	`´štf
("u§ge: % <b™¡»am1> [<b™¡»am2> ...] <outfže>\n", 
¬gv
[0]);

407 
FILE
 * 
fdo
 = 
	`fÝ’
(
¬gv
[
¬gc
 - 1], "wb");

408 ià(
fdo
==
NULL
)

410 
	`årštf
(
¡d”r
, "E¼Ü: could‚Ù o³Àouuˆfže: %s", 
¬gv
[
¬gc
 - 1]);

411 
	`ex™
(1);

413 
poc_ba£
 = 0;

414 
Ï¡_idr_poc
 = 0;

416 
i
 = 1; i < 
¬gc
 - 1; ++i)

418 
¡d
::
veùÜ
<
ušt8_t
> 
v
 = 
	`´oûss_£gm’t
(
¬gv
[
i
], i, &
poc_ba£
, &
Ï¡_idr_poc
);

420 
	`fwr™e
(
v
.
	`d©a
(), 1, v.
	`size
(), 
fdo
);

423 
	`fþo£
(
fdo
);

424 
	}
}

	@source/App/SEIRemovalApp/SEIRemovalApp.cpp

38 
	~<li¡
>

39 
	~<veùÜ
>

40 
	~<¡dio.h
>

41 
	~<fúŽ.h
>

43 
	~"SEIRemov®Aµ.h
"

44 
	~"TLibDecod”/AÂexB»ad.h
"

45 
	~"TLibDecod”/NAL»ad.h
"

54 
	gSEIRemov®Aµ
::
	$SEIRemov®Aµ
()

56 
	}
}

71 
Void
 
	$»ad2
(
IÅutNALUn™
& 
Çlu
)

73 
TComIÅutB™¡»am
& 
bs
 = 
Çlu
.
	`g‘B™¡»am
();

75 
BoÞ
 
fÜbidd’_z”o_b™
 = 
bs
.
	`»ad
(1);

76 ià(
fÜbidd’_z”o_b™
 != 0)

78 
¡d
::
û¼
 << "FÜbidd’ z”o-b™‚Ù '0'" << std::
’dl
;

79 
	`ex™
(1);

81 
Çlu
.
m_ÇlUn™Ty³
 = (
N®Un™Ty³
è
bs
.
	`»ad
(6);

82 
Çlu
.
m_nuhLay”Id
 = 
bs
.
	`»ad
(6);

83 
Çlu
.
m_‹mpÜ®Id
 = 
bs
.
	`»ad
(3) - 1;

84 
	}
}

86 
UIÁ
 
	gSEIRemov®Aµ
::
	$decode
()

91 
if¡»am
 
	`b™¡»amFžeIn
(
m_b™¡»amFžeNameIn
.
	`c_¡r
(), if¡»am::
š
 | if¡»am::
bš¬y
);

92 ià(!
b™¡»amFžeIn
)

94 
¡d
::
û¼
 << "çžedØÝ’ b™¡»am fž" << 
m_b™¡»amFžeNameIn
.
	`c_¡r
() << " for„eading";

95 
	`ex™
(1);

98 
of¡»am
 
	`b™¡»amFžeOut
(
m_b™¡»amFžeNameOut
.
	`c_¡r
(), 
if¡»am
::
out
 | if¡»am::
bš¬y
);

100 
IÅutBy‹SŒ—m
 
	`by‹¡»am
(
b™¡»amFžeIn
);

102 
b™¡»amFžeIn
.
	`þ—r
();

103 
b™¡»amFžeIn
.
	`£ekg
Ð0, 
ios
::
beg
 );

105 
un™CÁ
 = 0;

107 !!
b™¡»amFžeIn
)

113 
AÂexBSts
 
¡©s
 = 
	`AÂexBSts
();

115 
IÅutNALUn™
 
Çlu
;

116 
	`by‹SŒ—mNALUn™
(
by‹¡»am
, 
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
(), 
¡©s
);

119 ià(
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`em±y
())

126 
¡d
::
û¼
 << "W¬nšg: A‰em±Ødecodªƒm±y NAL un™" << std::
’dl
;

130 
	`»ad2
Ð
Çlu
 );

131 
un™CÁ
++;

133 
boÞ
 
bWr™e
 = 
Œue
;

135 
bWr™e
 &ð(Ð!
m_disÿrdSuffixSEIs
 || 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_SUFFIX_SEI
 ) && ( !
m_disÿrdP»fixSEIs
 ||‚®u.m_ÇlUn™Ty³ !ð
NAL_UNIT_PREFIX_SEI
 ));

136 
bWr™e
 &ð
un™CÁ
 >ð
m_numNALUn™sToSk
;

137 
bWr™e
 &ð
m_numNALUn™sToWr™e
 < 0 || 
un™CÁ
 <= m_numNALUnitsToWrite;

139 ifÐ
bWr™e
 )

141 
iNumZ”os
 = 
¡©s
.
m_numL—dšgZ”o8B™sBy‹s
 + sts.
m_numZ”oBy‹By‹s
 + sts.
m_numS¹CodeP»fixBy‹s
 -1;

142 
ch
 = 0;

143  
i
 = 0 ; i < 
iNumZ”os
; i++ ) { 
b™¡»amFžeOut
.
	`wr™e
Ð&
ch
, 1 ); }

144 
ch
 = 1; 
b™¡»amFžeOut
.
	`wr™e
( &ch, 1 );

145 
b™¡»amFžeOut
.
	`wr™e
Ð(cÚ¡ *)
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`d©a
(),‚®u.g‘B™¡»am().g‘Fifo().
	`size
() );

151 
	}
}

	@source/App/SEIRemovalApp/SEIRemovalApp.h

38 #iâdeà
__SEIREMOVALAPP__


39 
	#__SEIREMOVALAPP__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~<¡dio.h
>

46 
	~<f¡»am
>

47 
	~<io¡»am
>

48 
	~"TLibCommÚ/CommÚDef.h
"

50 
	~"SEIRemov®AµCfg.h
"

52 
usšg
 
Çme¥aû
 
	g¡d
;

59 þas 
	cSEIRemov®Aµ
 : 
public
 
SEIRemov®AµCfg


62 
public
:

63 
SEIRemov®Aµ
();

64 
	mvœtu®
 ~
	$SEIRemov®Aµ
 () {}

66 
UIÁ
 
	`decode
 ();

67 
	}
};

	@source/App/SEIRemovalApp/SEIRemovalAppCfg.cpp

38 
	~<c¡dio
>

39 
	~<c¡ršg
>

40 
	~<¡ršg
>

41 
	~"SEIRemov®AµCfg.h
"

42 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

44 
usšg
 
Çme¥aû
 
	g¡d
;

45 
Çme¥aû
 
	gpo
 = 
df
::
´og¿m_ÝtiÚs_l™e
;

57 
BoÞ
 
	gSEIRemov®AµCfg
::
	$·r£Cfg
Ð
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] )

59 
BoÞ
 
do_h–p
 = 
çl£
;

60 
IÁ
 
w¬nUnknowP¬am‘”
 = 0;

61 
po
::
O±iÚs
 
Ýts
;

62 
Ýts
.
	`addO±iÚs
()

64 ("h–p", 
do_h–p
, 
çl£
, "this helpext")

65 ("B™¡»amFžeIn,b", 
m_b™¡»amFžeNameIn
, 
	`¡ršg
(""), "bitstream input file‚ame")

66 ("B™¡»amFžeOut,o", 
m_b™¡»amFžeNameOut
, 
	`¡ršg
(""), "bitstream output file‚ame")

67 ("DisÿrdP»fixSEI,p", 
m_disÿrdP»fixSEIs
, 
çl£
, "remove‡ll…refix SEIs (default: 0)")

68 ("DisÿrdSuffixSEI,s", 
m_disÿrdSuffixSEIs
, 
Œue
, "remove‡ll suffix SEIs (default: 1)")

69 ("NumSk", 
m_numNALUn™sToSk
, 0, "number of NAL unitso skip (counted inclusivehe units skipped with -p/-s options)" )

70 ("NumWr™e", 
m_numNALUn™sToWr™e
, -1, "number of NAL unitso write (counted inclusivehe units skipped with -p/-s/--NumSkip options), -1o disable" )

72 ("W¬nUnknowP¬am‘”,w", 
w¬nUnknowP¬am‘”
, 0, "warn for unknown configuration…arameters instead of failing")

75 
po
::
	`£tDeçuÉs
(
Ýts
);

76 
po
::
E¼ÜR•Ü‹r
 
”r
;

77 cÚ¡ 
li¡
<cÚ¡ 
TCh¬
*>& 
¬gv_unhªdËd
 = 
po
::
	`sÿnArgv
(
Ýts
, 
¬gc
, (cÚ¡ TCh¬**è
¬gv
, 
”r
);

79 
li¡
<cÚ¡ 
TCh¬
*>::
cÚ¡_™”©Ü
 
™
 = 
¬gv_unhªdËd
.
	`begš
(); iˆ!ð¬gv_unhªdËd.
	`’d
(); it++)

81 
¡d
::
û¼
 << "UnhªdËd‡rgum’ˆignÜed: "<< *
™
 << std::
’dl
;

84 ià(
¬gc
 =ð1 || 
do_h–p
)

86 
po
::
	`doH–p
(
cout
, 
Ýts
);

87  
çl£
;

90 ià(
”r
.
is_”rÜed
)

92 ià(!
w¬nUnknowP¬am‘”
)

95  
çl£
;

100 ià(
m_b™¡»amFžeNameIn
.
	`em±y
())

102 
¡d
::
û¼
 << "NØšpuˆfž¥ecif›d,‡bÜtšg" << std::
’dl
;

103  
çl£
;

105 ià(
m_b™¡»amFžeNameOut
.
	`em±y
())

107 
¡d
::
û¼
 << "NØouuˆfž¥ecif›d,‡bÜtšg" << std::
’dl
;

108  
çl£
;

112  
Œue
;

113 
	}
}

115 
	gSEIRemov®AµCfg
::
	$SEIRemov®AµCfg
()

116 : 
	`m_b™¡»amFžeNameIn
()

117 , 
	`m_b™¡»amFžeNameOut
()

118 , 
	`m_disÿrdP»fixSEIs
Ð
çl£
 )

119 , 
	$m_disÿrdSuffixSEIs
Ð
çl£
 )

121 
	}
}

123 
	gSEIRemov®AµCfg
::~
	$SEIRemov®AµCfg
()

125 
	}
}

	@source/App/SEIRemovalApp/SEIRemovalAppCfg.h

38 #iâdeà
__SEIREMOVALAPPCFG__


39 
	#__SEIREMOVALAPPCFG__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~<veùÜ
>

56 þas 
	cSEIRemov®AµCfg


58 
	m´Ùeùed
:

59 
¡d
::
¡ršg
 
m_b™¡»amFžeNameIn
;

60 
	m¡d
::
¡ršg
 
m_b™¡»amFžeNameOut
;

61 
boÞ
 
	mm_disÿrdP»fixSEIs
;

62 
boÞ
 
	mm_disÿrdSuffixSEIs
;

63 
	mm_numNALUn™sToSk
;

64 
	mm_numNALUn™sToWr™e
;

66 
	mpublic
:

67 
SEIRemov®AµCfg
();

68 
	mvœtu®
 ~
SEIRemov®AµCfg
();

70 
BoÞ
 
·r£Cfg
 ( 
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] );

	@source/App/SEIRemovalApp/seiremovalmain.cpp

38 
	~<¡dlib.h
>

39 
	~<¡dio.h
>

40 
	~<time.h
>

41 
	~"SEIRemov®Aµ.h
"

42 
	~"´og¿m_ÝtiÚs_l™e.h
"

51 
	$maš
(
¬gc
, * 
¬gv
[])

53 
IÁ
 
»tuºCode
 = 
EXIT_SUCCESS
;

56 
	`årštf
Ð
¡dout
, "\n" );

57 
	`årštf
Ð
¡dout
, "HM: SEIRemov®Aµ V”siÚ % ", 
NV_VERSION
 );

58 
	`årštf
Ð
¡dout
, 
NVM_ONOS
 );

59 
	`årštf
Ð
¡dout
, 
NVM_COMPILEDBY
 );

60 
	`årštf
Ð
¡dout
, 
NVM_BITS
 );

61 #ià
HHI_SIMD_OPT


62 
¡d
::
¡ršg
 
SIMD
;

63 
df
::
´og¿m_ÝtiÚs_l™e
::
O±iÚs
 
ÝtsSimd
;

64 
ÝtsSimd
.
	`addO±iÚs
()Ð"SIMD", 
SIMD
, 
	`¡ršg
( "" ), "" );

65 
df
::
´og¿m_ÝtiÚs_l™e
::
Sž’tR•Ü‹r
 
”r
;

66 
df
::
´og¿m_ÝtiÚs_l™e
::
	`sÿnArgv
Ð
ÝtsSimd
, 
¬gc
, ( cÚ¡ 
TCh¬
** ) 
¬gv
, 
”r
 );

67 
	`årštf
Ð
¡dout
, "[SIMD=%s] ", 
	`»ad_x86_ex‹nsiÚ
Ð
SIMD
 ) );

69 #ià
ENABLE_TRACING


70 
	`årštf
Ð
¡dout
, "[ENABLE_TRACING] " );

72 
	`årštf
Ð
¡dout
, "\n" );

74 
SEIRemov®Aµ
 *
pcDecAµ
 = 
Ãw
 SEIRemovalApp;

76 if(!
pcDecAµ
->
	`·r£Cfg
Ð
¬gc
, 
¬gv
 ))

78 
»tuºCode
 = 
EXIT_FAILURE
;

79  
»tuºCode
;

83 
DoubË
 
dResuÉ
;

84 
þock_t
 
lBefÜe
 = 
	`þock
();

87 ifÐ0 !ð
pcDecAµ
->
	`decode
() )

89 
	`´štf
( "\n\n***ERROR*** A decoding mismatch occured: signalled md5sum does‚ot match\n" );

90 
»tuºCode
 = 
EXIT_FAILURE
;

94 
dResuÉ
 = (
DoubË
)(
	`þock
()-
lBefÜe
è/ 
CLOCKS_PER_SEC
;

95 
	`´štf
("\ÀTÙ® Time: %12.3à£c.\n", 
dResuÉ
);

97 
d–‘e
 
pcDecAµ
;

99  
»tuºCode
;

100 
	}
}

	@source/App/TAppDecoder/TAppDecCfg.cpp

38 
	~<c¡dio
>

39 
	~<c¡ršg
>

40 
	~<¡ršg
>

41 
	~"TAµDecCfg.h
"

42 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

43 
	~"TLibCommÚ/TComChromaFÜm©.h
"

44 #ifdeà
WIN32


45 
	#¡rdup
 
_¡rdup


	)

48 
usšg
 
Çme¥aû
 
	g¡d
;

49 
Çme¥aû
 
	gpo
 = 
df
::
´og¿m_ÝtiÚs_l™e
;

61 
BoÞ
 
	gTAµDecCfg
::
	$·r£Cfg
Ð
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] )

63 
BoÞ
 
do_h–p
 = 
çl£
;

64 
¡ršg
 
cfg_T¬g‘DecLay”IdS‘Fže
;

65 
¡ršg
 
ouutCÞourS·ûCÚv”t
;

66 
IÁ
 
w¬nUnknowP¬am‘”
 = 0;

68 
po
::
O±iÚs
 
Ýts
;

69 
Ýts
.
	`addO±iÚs
()

72 ("h–p", 
do_h–p
, 
çl£
, "this helpext")

73 ("B™¡»amFže,b", 
m_b™¡»amFžeName
, 
	`¡ršg
(""), "bitstream input file‚ame")

74 ("RecÚFže,o", 
m_»cÚFžeName
, 
	`¡ršg
(""), "reconstructed YUV output file‚ame\n"

76 ("W¬nUnknowP¬am‘”,w", 
w¬nUnknowP¬am‘”
, 0, "warn for unknown configuration…arameters instead of failing")

77 ("SkF¿mes,s", 
m_iSkF¿me
, 0, "number of frameso skip before„andom‡ccess")

78 ("OuutB™D•th,d", 
m_ouutB™D•th
[
CHANNEL_TYPE_LUMA
], 0, "bit depth of YUV output†uma component (default: use 0 for‚ative depth)")

79 ("OuutB™D•thC,d", 
m_ouutB™D•th
[
CHANNEL_TYPE_CHROMA
], 0, "bit depth of YUV output chroma component (default: use 0 for‚ative depth)")

80 ("OuutCÞourS·ûCÚv”t", 
ouutCÞourS·ûCÚv”t
, 
	`¡ršg
(""), "CÞou¸¥aû cÚv”siÚØ­¶yØšpuˆ444 video. P”m™‹d v®ue ¬Óm±y sŒšg=UNCHANGEDè" + 
	`g‘Li¡OfCÞourS·ûCÚv”ts
(
çl£
))

81 ("MaxTempÜ®Lay”,t", 
m_iMaxTempÜ®Lay”
, -1, "Maximum Temporal Layero be decoded. -1o decode‡ll†ayers")

82 ("SEIDecodedPiùu»Hash", 
m_decodedPiùu»HashSEIEÇbËd
, 1, "Control handling of decoded…icture hash SEI messages\n"

85 ("SEINoDi¥Ïy", 
m_decodedNoDi¥ÏySEIEÇbËd
, 
Œue
, "Control handling of decoded‚o display SEI messages")

86 ("T¬DecLay”IdS‘Fže,l", 
cfg_T¬g‘DecLay”IdS‘Fže
, 
	`¡ršg
(""), "targetDecLayerIdSet file‚ame. The file should include white space separated LayerId valueso be decoded. Omittinghe option or‡ value of -1 inhe file decodes‡ll†ayers.")

87 ("Re¥eùDefDi¥Wšdow,w", 
m_»¥eùDefDi¥Wšdow
, 0, "Only output content insidehe default display window\n")

88 ("SEICÞourRem­pšgInfoFž’ame", 
m_cÞourRem­SEIFžeName
, 
	`¡ršg
(""), "Colour Remapping YUV output file‚ame. Ifƒmpty,‚o„emapping is‡pplied (ignore SEI message)\n")

89 #ià
FGS_RDD5_ENABLE


90 ("SEIFGSFž’ame", 
m_SEIFGSFžeName
, 
	`¡ršg
(""), "FGS YUV output file‚ame. Ifƒmpty,‚o film grain is‡pplied (ignore SEI message)\n")

92 ("SEIAÂÙ©edRegiÚsInfoFž’ame", 
m_ªnÙ©edRegiÚsSEIFžeName
, 
	`¡ršg
(""), "Annotated„egions output file‚ame. Ifƒmpty,‚o object information will be saved (ignore SEI message)\n")

93 #ià
O0043_BEST_EFFORT_DECODING


94 ("FÜûDecodeB™D•th", 
m_fÜûDecodeB™D•th
, 0U, "Forcehe decodero operate‡t‡…articular bit-depth (bestƒffort decoding)")

96 ("OuutDecodedSEIMes§gesFž’ame", 
m_ouutDecodedSEIMes§gesFž’ame
, 
	`¡ršg
(""), "When‚onƒmpty, output decoded SEI messagesohe indicated file. If file is '-',hen outputo stdout\n")

97 ("ClOuutVideoToRec709Rªge", 
m_bClOuutVideoToRec709Rªge
, 
çl£
, "Ifruehen clip output videoohe Rec. 709 Range on saving")

98 #ià
MCTS_ENC_CHECK


99 ("TMCTSCheck", 
m_tmùsCheck
, 
çl£
, "Ifƒnabled,he decoder checks for violations of mc_exact_sample_value_match_flag in Temporal MCTS ")

103 
po
::
	`£tDeçuÉs
(
Ýts
);

104 
po
::
E¼ÜR•Ü‹r
 
”r
;

105 cÚ¡ 
li¡
<cÚ¡ 
TCh¬
*>& 
¬gv_unhªdËd
 = 
po
::
	`sÿnArgv
(
Ýts
, 
¬gc
, (cÚ¡ TCh¬**è
¬gv
, 
”r
);

107 
li¡
<cÚ¡ 
TCh¬
*>::
cÚ¡_™”©Ü
 
™
 = 
¬gv_unhªdËd
.
	`begš
(); iˆ!ð¬gv_unhªdËd.
	`’d
(); it++)

109 
	`årštf
(
¡d”r
, "UnhªdËd‡rgum’ˆignÜed: `%s'\n", *
™
);

112 ià(
¬gc
 =ð1 || 
do_h–p
)

114 
po
::
	`doH–p
(
cout
, 
Ýts
);

115  
çl£
;

118 ià(
”r
.
is_”rÜed
)

120 ià(!
w¬nUnknowP¬am‘”
)

123  
çl£
;

127 
m_ouutCÞourS·ûCÚv”t
 = 
	`¡ršgToIÅutCÞourS·ûCÚv”t
(
ouutCÞourS·ûCÚv”t
, 
çl£
);

128 ià(
m_ouutCÞourS·ûCÚv”t
>=
NUMBER_INPUT_COLOUR_SPACE_CONVERSIONS
)

130 
	`årštf
(
¡d”r
, "Bad output colour space conversion string\n");

131  
çl£
;

134 ià(
m_b™¡»amFžeName
.
	`em±y
())

136 
	`årštf
(
¡d”r
, "No input file specified,‡borting\n");

137  
çl£
;

140 iàÐ!
cfg_T¬g‘DecLay”IdS‘Fže
.
	`em±y
() )

142 
FILE
* 
rg‘DecLay”IdS‘Fže
 = 
	`fÝ’
 ( 
cfg_T¬g‘DecLay”IdS‘Fže
.
	`c_¡r
(), "r" );

143 iàÐ
rg‘DecLay”IdS‘Fže
 )

145 
BoÞ
 
isLay”IdZ”oInþuded
 = 
çl£
;

146  !
	`ãof
(
rg‘DecLay”IdS‘Fže
) )

148 
IÁ
 
Ïy”IdP¬£d
 = 0;

149 iàÐ
	`fsÿnf
Ð
rg‘DecLay”IdS‘Fže
, "%d ", &
Ïy”IdP¬£d
 ) != 1 )

151 iàÐ
m_rg‘DecLay”IdS‘
.
	`size
() == 0 )

153 
	`årštf
(
¡d”r
, "NØLay”Id could b·r£d iÀfž%s. Decodšg‡Î Lay”Id a deçuÉ.\n", 
cfg_T¬g‘DecLay”IdS‘Fže
.
	`c_¡r
() );

157 iàÐ
Ïy”IdP¬£d
 == -1 )

159 
m_rg‘DecLay”IdS‘
.
	`þ—r
();

162 iàÐ
Ïy”IdP¬£d
 < 0 ||†ay”IdP¬£d >ð
MAX_NUM_LAYER_IDS
 )

164 
	`årštf
(
¡d”r
, "W¬nšg! P¬£d Lay”Id %d i nÙ w™hš‡Îowed„ªg[0,%d]. IgnÜšghi v®ue.\n", 
Ïy”IdP¬£d
, 
MAX_NUM_LAYER_IDS
-1 );

168 
isLay”IdZ”oInþuded
 = 
Ïy”IdP¬£d
 =ð0 ? 
Œue
 : isLayerIdZeroIncluded;

169 
m_rg‘DecLay”IdS‘
.
	`push_back
 ( 
Ïy”IdP¬£d
 );

172 
	`fþo£
 (
rg‘DecLay”IdS‘Fže
);

173 iàÐ
m_rg‘DecLay”IdS‘
.
	`size
(è> 0 && !
isLay”IdZ”oInþuded
 )

175 
	`årštf
(
¡d”r
, "TargetDecLayerIdSet must contain LayerId=0,‡borting" );

176  
çl£
;

181 
	`årštf
(
¡d”r
, "Fž% could‚Ù bÝ’ed. Usšg‡Î Lay”Id a deçuÉ.\n", 
cfg_T¬g‘DecLay”IdS‘Fže
.
	`c_¡r
() );

185  
Œue
;

186 
	}
}

	@source/App/TAppDecoder/TAppDecCfg.h

38 #iâdeà
__TAPPDECCFG__


39 
	#__TAPPDECCFG__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~<veùÜ
>

56 þas 
	cTAµDecCfg


58 
	m´Ùeùed
:

59 
¡d
::
¡ršg
 
m_b™¡»amFžeName
;

60 
	m¡d
::
¡ršg
 
m_»cÚFžeName
;

61 
IÁ
 
	mm_iSkF¿me
;

62 
IÁ
 
	mm_ouutB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

63 
IÅutCÞourS·ûCÚv”siÚ
 
	mm_ouutCÞourS·ûCÚv”t
;

65 
IÁ
 
	mm_iMaxTempÜ®Lay”
;

66 
IÁ
 
	mm_decodedPiùu»HashSEIEÇbËd
;

67 
BoÞ
 
	mm_decodedNoDi¥ÏySEIEÇbËd
;

68 
	m¡d
::
¡ršg
 
m_cÞourRem­SEIFžeName
;

69 #ià
FGS_RDD5_ENABLE


70 
	m¡d
::
¡ršg
 
m_SEIFGSFžeName
;

72 
	m¡d
::
¡ršg
 
m_ªnÙ©edRegiÚsSEIFžeName
;

73 
	m¡d
::
veùÜ
<
IÁ
> 
m_rg‘DecLay”IdS‘
;

74 
IÁ
 
	mm_»¥eùDefDi¥Wšdow
;

75 #ià
O0043_BEST_EFFORT_DECODING


76 
UIÁ
 
	mm_fÜûDecodeB™D•th
;

78 
	m¡d
::
¡ršg
 
m_ouutDecodedSEIMes§gesFž’ame
;

79 
BoÞ
 
	mm_bClOuutVideoToRec709Rªge
;

80 #ià
MCTS_ENC_CHECK


81 
BoÞ
 
	mm_tmùsCheck
;

84 
	mpublic
:

85 
	$TAµDecCfg
()

86 : 
	`m_b™¡»amFžeName
()

87 , 
	`m_»cÚFžeName
()

88 , 
	`m_iSkF¿me
(0)

90 , 
	`m_ouutCÞourS·ûCÚv”t
(
IPCOLOURSPACE_UNCHANGED
)

91 , 
	`m_iMaxTempÜ®Lay”
(-1)

92 , 
	`m_decodedPiùu»HashSEIEÇbËd
(0)

93 , 
	`m_decodedNoDi¥ÏySEIEÇbËd
(
çl£
)

94 , 
	$m_cÞourRem­SEIFžeName
()

95 #ià
FGS_RDD5_ENABLE


96 , 
	$m_SEIFGSFžeName
()

98 , 
	`m_ªnÙ©edRegiÚsSEIFžeName
()

99 , 
	`m_rg‘DecLay”IdS‘
()

100 , 
	$m_»¥eùDefDi¥Wšdow
(0)

101 #ià
O0043_BEST_EFFORT_DECODING


102 , 
	$m_fÜûDecodeB™D•th
(0)

104 , 
	`m_ouutDecodedSEIMes§gesFž’ame
()

105 , 
	$m_bClOuutVideoToRec709Rªge
(
çl£
)

106 #ià
MCTS_ENC_CHECK


107 , 
	$m_tmùsCheck
(
çl£
)

110 
UIÁ
 
chªÃlTy³Index
 = 0; chªÃlTy³Index < 
MAX_NUM_CHANNEL_TYPE
; channelTypeIndex++)

112 
m_ouutB™D•th
[
chªÃlTy³Index
] = 0;

116 
vœtu®
 ~
	$TAµDecCfg
(è{
	}
}

118 
BoÞ
 
·r£Cfg
 ( 
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] );

	@source/App/TAppDecoder/TAppDecTop.cpp

38 
	~<li¡
>

39 
	~<veùÜ
>

40 
	~<¡dio.h
>

41 
	~<fúŽ.h
>

42 
	~<as£¹.h
>

44 
	~"TAµDecTÝ.h
"

45 
	~"TLibDecod”/AÂexB»ad.h
"

46 
	~"TLibDecod”/NAL»ad.h
"

47 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


48 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

58 
	gTAµDecTÝ
::
	$TAµDecTÝ
()

59 : 
	`m_iPOCLa¡Di¥Ïy
(-
MAX_INT
)

60 ,
	$m_pcSeiCÞourRem­pšgInfoP»vious
(
NULL
)

62 
	}
}

64 
Void
 
	gTAµDecTÝ
::
	$ü—‹
()

66 
	}
}

68 
Void
 
TAµDecTÝ
::
	$de¡roy
()

70 
m_b™¡»amFžeName
.
	`þ—r
();

71 
m_»cÚFžeName
.
	`þ—r
();

72 #ià
FGS_RDD5_ENABLE


73 
m_SEIFGSFžeName
.
	`þ—r
();

75 
	}
}

89 
Void
 
	gTAµDecTÝ
::
	$decode
()

91 
IÁ
 
poc
;

92 
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
 = 
NULL
;

94 
if¡»am
 
	`b™¡»amFže
(
m_b™¡»amFžeName
.
	`c_¡r
(), if¡»am::
š
 | if¡»am::
bš¬y
);

95 ià(!
b™¡»amFže
)

97 
	`årštf
(
¡d”r
, "\nçžedØÝ’ b™¡»am fž`%s' fÜ„—dšg\n", 
m_b™¡»amFžeName
.
	`c_¡r
());

98 
	`ex™
(
EXIT_FAILURE
);

101 
IÅutBy‹SŒ—m
 
	`by‹¡»am
(
b™¡»amFže
);

103 ià(!
m_ouutDecodedSEIMes§gesFž’ame
.
	`em±y
() && m_outputDecodedSEIMessagesFilename!="-")

105 
m_£iMes§geFžeSŒ—m
.
	`Ý’
(
m_ouutDecodedSEIMes§gesFž’ame
.
	`c_¡r
(), 
¡d
::
ios
::
out
);

106 ià(!
m_£iMes§geFžeSŒ—m
.
	`is_Ý’
(è|| !m_£iMes§geFžeSŒ—m.
	`good
())

108 
	`årštf
(
¡d”r
, "\nUÇbËØÝ’ fž`%s' fÜ wr™šg decoded SEI mes§ges\n", 
m_ouutDecodedSEIMes§gesFž’ame
.
	`c_¡r
());

109 
	`ex™
(
EXIT_FAILURE
);

114 
	`xC»©eDecLib
();

115 
	`xIn™DecLib
 ();

116 
m_iPOCLa¡Di¥Ïy
 +ð
m_iSkF¿me
;

119 ià(!
m_cÞourRem­SEIFžeName
.
	`em±y
())

121 
¡d
::
of¡»am
 
	`ofže
(
m_cÞourRem­SEIFžeName
.
	`c_¡r
());

122 ià(!
ofže
.
	`good
(è|| !ofže.
	`is_Ý’
())

124 
	`årštf
(
¡d”r
, "\nUÇbËØÝ’ fž'%s' fÜ wr™šg cÞour-»m­-šfÜm©iÚ-SEI video\n", 
m_cÞourRem­SEIFžeName
.
	`c_¡r
());

125 
	`ex™
(
EXIT_FAILURE
);

130 ià(!
m_ªnÙ©edRegiÚsSEIFžeName
.
	`em±y
())

132 
¡d
::
of¡»am
 
	`ofže
(
m_ªnÙ©edRegiÚsSEIFžeName
.
	`c_¡r
());

133 ià(!
ofže
.
	`good
(è|| !ofže.
	`is_Ý’
())

135 
	`årštf
(
¡d”r
, "\nUÇbËØÝ’ fž'%s' fÜ wr™šg‡ÂÙ©ed-RegiÚs-SEI\n", 
m_ªnÙ©edRegiÚsSEIFžeName
.
	`c_¡r
());

136 
	`ex™
(
EXIT_FAILURE
);

141 
BoÞ
 
Ý’edRecÚFže
 = 
çl£
;

142 #ià
FGS_RDD5_ENABLE


143 
BoÞ
 
Ý’edSEIFGSFže
 = 
çl£
;

145 
BoÞ
 
loÝFž‹»d
 = 
çl£
;

147 !!
b™¡»amFže
)

153 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


154 
TComCodšgSti¡ics
::
TComCodšgSti¡icsD©a
 
	`backupSts
(TComCodšgSti¡ics::
	`G‘Sti¡ics
());

155 
¡»ampos
 
loÿtiÚ
 = 
b™¡»amFže
.
	`‹Îg
(è- 
	`¡»ampos
(
by‹¡»am
.
	`G‘NumBufã»dBy‹s
());

157 
¡»ampos
 
loÿtiÚ
 = 
b™¡»amFže
.
	`‹Îg
();

159 
AÂexBSts
 
¡©s
 = 
	`AÂexBSts
();

161 
IÅutNALUn™
 
Çlu
;

162 
	`by‹SŒ—mNALUn™
(
by‹¡»am
, 
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
(), 
¡©s
);

165 
BoÞ
 
bNewPiùu»
 = 
çl£
;

166 ià(
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`em±y
())

173 
	`årštf
(
¡d”r
, "Warning: Attempto decode‡nƒmpty NAL unit\n");

177 
	`»ad
(
Çlu
);

178 ifÐ(
m_iMaxTempÜ®Lay”
 >ð0 && 
Çlu
.
m_‹mpÜ®Id
 > m_iMaxTempÜ®Lay”è|| !
	`isN®uW™hšT¬g‘DecLay”IdS‘
(&nalu) )

180 
bNewPiùu»
 = 
çl£
;

184 
bNewPiùu»
 = 
m_cTDecTÝ
.
	`decode
(
Çlu
, 
m_iSkF¿me
, 
m_iPOCLa¡Di¥Ïy
);

185 ià(
bNewPiùu»
)

187 
b™¡»amFže
.
	`þ—r
();

192 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


193 
b™¡»amFže
.
	`£ekg
(
loÿtiÚ
);

194 
by‹¡»am
.
	`»£t
();

195 
TComCodšgSti¡ics
::
	`S‘Sti¡ics
(
backupSts
);

197 
b™¡»amFže
.
	`£ekg
(
loÿtiÚ
-
	`¡»amoff
(3));

198 
by‹¡»am
.
	`»£t
();

204 iàÐ(
bNewPiùu»
 || !
b™¡»amFže
 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
) &&

205 !
m_cTDecTÝ
.
	`g‘Fœ¡SliûInSequ’û
 () )

207 ià(!
loÝFž‹»d
 || 
b™¡»amFže
)

209 
m_cTDecTÝ
.
	`execu‹LoÝFž‹rs
(
poc
, 
pcLi¡Pic
);

211 
loÝFž‹»d
 = (
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
);

212 ià(
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
)

214 
m_cTDecTÝ
.
	`£tFœ¡SliûInSequ’û
(
Œue
);

217 iàÐ(
bNewPiùu»
 || !
b™¡»amFže
 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
 ) &&

218 
m_cTDecTÝ
.
	`g‘Fœ¡SliûInSequ’û
 () )

220 
m_cTDecTÝ
.
	`£tFœ¡SliûInPiùu»
 (
Œue
);

223 ifÐ
pcLi¡Pic
 )

225 iàÐ(!
m_»cÚFžeName
.
	`em±y
()è&& (!
Ý’edRecÚFže
) )

227 cÚ¡ 
B™D•ths
 &
b™D•ths
=
pcLi¡Pic
->
	`äÚt
()->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
();

228 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

230 ià(
m_ouutB™D•th
[
chªÃlTy³
] == 0)

232 
m_ouutB™D•th
[
chªÃlTy³
] = 
b™D•ths
.
»cÚ
[channelType];

236 
m_cTVideoIOYuvRecÚFže
.
	`Ý’
Ð
m_»cÚFžeName
, 
Œue
, 
m_ouutB™D•th
, m_ouutB™D•th, 
b™D•ths
.
»cÚ
 );

237 
Ý’edRecÚFže
 = 
Œue
;

239 #ià
FGS_RDD5_ENABLE


241 ià((!
m_SEIFGSFžeName
.
	`em±y
()è&& (!
Ý’edSEIFGSFže
))

243 cÚ¡ 
B™D•ths
 &
b™D•ths
 = 
pcLi¡Pic
->
	`äÚt
()->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
();

244 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

246 ià(
m_ouutB™D•th
[
chªÃlTy³
] == 0)

248 
m_ouutB™D•th
[
chªÃlTy³
] = 
b™D•ths
.
»cÚ
[channelType];

252 
m_cTVideoIOYuvSEIFGSFže
.
	`Ý’
(
m_SEIFGSFžeName
, 
Œue
, 
m_ouutB™D•th
, m_ouutB™D•th, 
b™D•ths
.
»cÚ
);

253 
Ý’edSEIFGSFže
 = 
Œue
;

257 ifÐ
bNewPiùu»
 )

259 
	`xWr™eOuut
Ð
pcLi¡Pic
, 
Çlu
.
m_‹mpÜ®Id
 );

261 iàÐ(
bNewPiùu»
 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_CRA
è&& 
m_cTDecTÝ
.
	`g‘NoOuutPriÜPicsFÏg
() )

263 
m_cTDecTÝ
.
	`checkNoOuutPriÜPics
Ð
pcLi¡Pic
 );

264 
m_cTDecTÝ
.
	`£tNoOuutPriÜPicsFÏg
 (
çl£
);

266 iàÐ
bNewPiùu»
 &&

267 Ð
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


268 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


269 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


270 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


271 || 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 ) )

273 
	`xFlushOuut
Ð
pcLi¡Pic
 );

275 ià(
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
)

277 
	`xWr™eOuut
Ð
pcLi¡Pic
, 
Çlu
.
m_‹mpÜ®Id
 );

278 
m_cTDecTÝ
.
	`£tFœ¡SliûInPiùu»
 (
çl£
);

281 if(!
bNewPiùu»
 && 
Çlu
.
m_ÇlUn™Ty³
 >ð
NAL_UNIT_CODED_SLICE_TRAIL_N
 &&‚®u.m_ÇlUn™Ty³ <ð
NAL_UNIT_RESERVED_VCL31
)

283 
	`xWr™eOuut
Ð
pcLi¡Pic
, 
Çlu
.
m_‹mpÜ®Id
 );

288 
	`xFlushOuut
Ð
pcLi¡Pic
 );

290 
m_cTDecTÝ
.
	`d–‘ePicBufãr
();

293 
	`xDe¡royDecLib
();

294 
	}
}

300 
Void
 
	gTAµDecTÝ
::
	$xC»©eDecLib
()

303 
m_cTDecTÝ
.
	`ü—‹
();

304 
	}
}

306 
Void
 
	gTAµDecTÝ
::
	$xDe¡royDecLib
()

308 iàÐ!
m_»cÚFžeName
.
	`em±y
() )

310 
m_cTVideoIOYuvRecÚFže
.
	`þo£
();

312 #ià
FGS_RDD5_ENABLE


313 ià(!
m_SEIFGSFžeName
.
	`em±y
())

315 
m_cTVideoIOYuvSEIFGSFže
.
	`þo£
();

320 
m_cTDecTÝ
.
	`de¡roy
();

322 ià(
m_pcSeiCÞourRem­pšgInfoP»vious
 !ð
NULL
)

324 
d–‘e
 
m_pcSeiCÞourRem­pšgInfoP»vious
;

325 
m_pcSeiCÞourRem­pšgInfoP»vious
 = 
NULL
;

327 
m_¬Objeùs
.
	`þ—r
();

328 
m_¬Lab–s
.
	`þ—r
();

329 
	}
}

331 
Void
 
	gTAµDecTÝ
::
	$xIn™DecLib
()

334 
m_cTDecTÝ
.
	`š™
();

335 
m_cTDecTÝ
.
	`£tDecodedPiùu»HashSEIEÇbËd
(
m_decodedPiùu»HashSEIEÇbËd
);

336 #ià
MCTS_ENC_CHECK


337 
m_cTDecTÝ
.
	`£tTMùsCheckEÇbËd
(
m_tmùsCheck
);

339 #ià
O0043_BEST_EFFORT_DECODING


340 
m_cTDecTÝ
.
	`£tFÜûDecodeB™D•th
(
m_fÜûDecodeB™D•th
);

342 ià(!
m_ouutDecodedSEIMes§gesFž’ame
.
	`em±y
())

344 
¡d
::
o¡»am
 &
os
=
m_£iMes§geFžeSŒ—m
.
	`is_Ý’
(è? m_£iMes§geFžeSŒ—m : std::
cout
;

345 
m_cTDecTÝ
.
	`£tDecodedSEIMes§geOuutSŒ—m
(&
os
);

347 ià(
m_pcSeiCÞourRem­pšgInfoP»vious
 !ð
NULL
)

349 
d–‘e
 
m_pcSeiCÞourRem­pšgInfoP»vious
;

350 
m_pcSeiCÞourRem­pšgInfoP»vious
 = 
NULL
;

352 
m_¬Objeùs
.
	`þ—r
();

353 
m_¬Lab–s
.
	`þ—r
();

354 
	}
}

359 
Void
 
	gTAµDecTÝ
::
xWr™eOuut
Ð
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
, 
UIÁ
 
tId
 )

361 ià(
	gpcLi¡Pic
->
em±y
())

366 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
pcLi¡Pic
->
begš
();

367 
IÁ
 
	gnumPicsNÙY‘Di¥Ïyed
 = 0;

368 
IÁ
 
	gdpbFuÎÃss
 = 0;

369 cÚ¡ 
TComSPS
* 
	gaùiveSPS
 = &(
pcLi¡Pic
->
äÚt
()->
g‘PicSym
()->
g‘SPS
());

370 
UIÁ
 
	gnumReÜd”PicsHighe¡Tid
;

371 
UIÁ
 
	gmaxDecPicBufãršgHighe¡Tid
;

372 
UIÁ
 
	gmaxNrSubÏy”s
 = 
aùiveSPS
->
g‘MaxTLay”s
();

374 if(
	gm_iMaxTempÜ®Lay”
 =ð-1 || 
m_iMaxTempÜ®Lay”
 >ð
maxNrSubÏy”s
)

376 
numReÜd”PicsHighe¡Tid
 = 
aùiveSPS
->
g‘NumReÜd”Pics
(
maxNrSubÏy”s
-1);

377 
	gmaxDecPicBufãršgHighe¡Tid
 = 
aùiveSPS
->
g‘MaxDecPicBufãršg
(
maxNrSubÏy”s
-1);

381 
	gnumReÜd”PicsHighe¡Tid
 = 
aùiveSPS
->
g‘NumReÜd”Pics
(
m_iMaxTempÜ®Lay”
);

382 
	gmaxDecPicBufãršgHighe¡Tid
 = 
aùiveSPS
->
g‘MaxDecPicBufãršg
(
m_iMaxTempÜ®Lay”
);

385 
	g™”Pic
 !ð
pcLi¡Pic
->
’d
())

387 
TComPic
* 
pcPic
 = *(
™”Pic
);

388 if(
	gpcPic
->
g‘OuutM¬k
(è&&…cPic->
g‘POC
(è> 
	gm_iPOCLa¡Di¥Ïy
)

390 
	gnumPicsNÙY‘Di¥Ïyed
++;

391 
	gdpbFuÎÃss
++;

393 if(
	gpcPic
->
g‘Sliû
Ð0 )->
isReã»nûd
())

395 
	gdpbFuÎÃss
++;

397 
	g™”Pic
++;

400 
	g™”Pic
 = 
pcLi¡Pic
->
begš
();

402 ià(
	gnumPicsNÙY‘Di¥Ïyed
>2)

404 
	g™”Pic
++;

407 
TComPic
* 
	gpcPic
 = *(
™”Pic
);

408 ià(
	gnumPicsNÙY‘Di¥Ïyed
>2 && 
	gpcPic
->
isF›ld
())

410 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
’dPic
 = 
pcLi¡Pic
->
’d
();

411 
	g’dPic
--;

412 
	g™”Pic
 = 
pcLi¡Pic
->
begš
();

413 
	g™”Pic
 !ð
’dPic
)

415 
TComPic
* 
pcPicTÝ
 = *(
™”Pic
);

416 
	g™”Pic
++;

417 
TComPic
* 
	gpcPicBÙtom
 = *(
™”Pic
);

419 iàÐ
	gpcPicTÝ
->
g‘OuutM¬k
(è&& 
	gpcPicBÙtom
->getOutputMark() &&

420 (
	gnumPicsNÙY‘Di¥Ïyed
 > 
	gnumReÜd”PicsHighe¡Tid
 || 
	gdpbFuÎÃss
 > 
	gmaxDecPicBufãršgHighe¡Tid
) &&

421 (!(
	gpcPicTÝ
->
g‘POC
()%2è&& 
	gpcPicBÙtom
->g‘POC(è=ð
pcPicTÝ
->getPOC()+1) &&

422 (
pcPicTÝ
->
g‘POC
(è=ð
m_iPOCLa¡Di¥Ïy
+1 || m_iPOCLastDisplay < 0))

425 
numPicsNÙY‘Di¥Ïyed
 =‚umPicsNotYetDisplayed-2;

426 iàÐ!
	gm_»cÚFžeName
.
em±y
() )

428 cÚ¡ 
	gWšdow
 &
	gcÚf
 = 
pcPicTÝ
->
g‘CÚfÜmªûWšdow
();

429 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPicTÝ
->
g‘DefDi¥ÏyWšdow
() : Window();

430 cÚ¡ 
BoÞ
 
	gisTff
 = 
pcPicTÝ
->
isTÝF›ld
();

432 
BoÞ
 
	gdi¥Ïy
 = 
Œue
;

433 ifÐ
	gm_decodedNoDi¥ÏySEIEÇbËd
 )

435 
SEIMes§ges
 
	gnoDi¥Ïy
 = 
g‘SeisByTy³
(
pcPic
->
g‘SEIs
(), 
SEI
::
NO_DISPLAY
 );

436 cÚ¡ 
SEINoDi¥Ïy
 *
	gnd
 = ( 
noDi¥Ïy
.
size
(è> 0 ) ? (SEINoDi¥Ïy*è*ÒoDi¥Ïy.
begš
()è: 
NULL
;

437 ifÐ(
	gnd
 !ð
NULL
è&& 
nd
->
m_noDi¥Ïy
 )

439 
di¥Ïy
 = 
çl£
;

443 ià(
	gdi¥Ïy
)

445 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPicTÝ
->
g‘PicYuvRec
(), 
pcPicBÙtom
->getPicYuvRec(),

446 
m_ouutCÞourS·ûCÚv”t
,

447 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

448 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

449 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

450 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.g‘WšdowBÙtomOff£t(), 
NUM_CHROMA_FORMAT
, 
isTff
 );

455 
	gm_iPOCLa¡Di¥Ïy
 = 
pcPicBÙtom
->
g‘POC
();

458 iàÐ!
	gpcPicTÝ
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPicTÝ->
g‘RecÚM¬k
(è=ð
Œue
 )

460 
pcPicTÝ
->
£tRecÚM¬k
(
çl£
);

463 
	gpcPicTÝ
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

465 iàÐ!
	gpcPicBÙtom
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPicBÙtom->
g‘RecÚM¬k
(è=ð
Œue
 )

467 
pcPicBÙtom
->
£tRecÚM¬k
(
çl£
);

470 
	gpcPicBÙtom
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

472 
	gpcPicTÝ
->
£tOuutM¬k
(
çl£
);

473 
	gpcPicBÙtom
->
£tOuutM¬k
(
çl£
);

477 ià(!
	gpcPic
->
isF›ld
())

479 
	g™”Pic
 = 
pcLi¡Pic
->
begš
();

481 
	g™”Pic
 !ð
pcLi¡Pic
->
’d
())

483 
pcPic
 = *(
™”Pic
);

485 if(
	gpcPic
->
g‘OuutM¬k
(è&&…cPic->
g‘POC
(è> 
	gm_iPOCLa¡Di¥Ïy
 &&

486 (
	gnumPicsNÙY‘Di¥Ïyed
 > 
	gnumReÜd”PicsHighe¡Tid
 || 
	gdpbFuÎÃss
 > 
	gmaxDecPicBufãršgHighe¡Tid
))

489 
	gnumPicsNÙY‘Di¥Ïyed
--;

490 if(
	gpcPic
->
g‘Sliû
(0)->
isReã»nûd
(è=ð
çl£
)

492 
dpbFuÎÃss
--;

495 iàÐ!
	gm_»cÚFžeName
.
em±y
() )

497 cÚ¡ 
	gWšdow
 &
	gcÚf
 = 
pcPic
->
g‘CÚfÜmªûWšdow
();

498 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPic
->
g‘DefDi¥ÏyWšdow
() : Window();

500 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPic
->
g‘PicYuvRec
(),

501 
m_ouutCÞourS·ûCÚv”t
,

502 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

503 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

504 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

505 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.getWindowBottomOffset(),

506 
NUM_CHROMA_FORMAT
, 
m_bClOuutVideoToRec709Rªge
 );

509 #ià
FGS_RDD5_ENABLE


511 ià(!
	gm_SEIFGSFžeName
.
em±y
())

513 cÚ¡ 
	gWšdow
 &
	gcÚf
 = 
pcPic
->
g‘CÚfÜmªûWšdow
();

514 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPic
->
g‘DefDi¥ÏyWšdow
() : Window();

515 
	gm_cTVideoIOYuvSEIFGSFže
.
wr™e
(
pcPic
->
g‘PicYuvDi¥
(),

516 
m_ouutCÞourS·ûCÚv”t
,

517 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

518 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

519 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

520 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.getWindowBottomOffset(),

521 
NUM_CHROMA_FORMAT
, 
m_bClOuutVideoToRec709Rªge
);

524 ià(!
	gm_ªnÙ©edRegiÚsSEIFžeName
.
em±y
())

526 
xOuutAÂÙ©edRegiÚs
(
pcPic
);

529 ià(!
	gm_cÞourRem­SEIFžeName
.
em±y
())

531 
xOuutCÞourRem­Pic
(
pcPic
);

535 
	gm_iPOCLa¡Di¥Ïy
 = 
pcPic
->
g‘POC
();

538 iàÐ!
	gpcPic
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPic->
g‘RecÚM¬k
(è=ð
Œue
 )

540 
pcPic
->
£tRecÚM¬k
(
çl£
);

543 
	gpcPic
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

545 
	gpcPic
->
£tOuutM¬k
(
çl£
);

548 
	g™”Pic
++;

555 
Void
 
	gTAµDecTÝ
::
xFlushOuut
Ð
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
 )

557 if(!
pcLi¡Pic
 ||…cLi¡Pic->
em±y
())

561 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
pcLi¡Pic
->
begš
();

563 
	g™”Pic
 = 
pcLi¡Pic
->
begš
();

564 
TComPic
* 
	gpcPic
 = *(
™”Pic
);

566 ià(
	gpcPic
->
isF›ld
())

568 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
’dPic
 = 
pcLi¡Pic
->
’d
();

569 
	g’dPic
--;

570 
TComPic
 *
	gpcPicTÝ
, *
	gpcPicBÙtom
 = 
NULL
;

571 
	g™”Pic
 !ð
’dPic
)

573 
pcPicTÝ
 = *(
™”Pic
);

574 
	g™”Pic
++;

575 
	gpcPicBÙtom
 = *(
™”Pic
);

577 iàÐ
	gpcPicTÝ
->
g‘OuutM¬k
(è&& 
	gpcPicBÙtom
->g‘OuutM¬k(è&& !ÕcPicTÝ->
g‘POC
()%2è&& (pcPicBÙtom->g‘POC(è=ð
pcPicTÝ
->getPOC()+1) )

580 iàÐ!
m_»cÚFžeName
.
em±y
() )

582 cÚ¡ 
Wšdow
 &
cÚf
 = 
pcPicTÝ
->
g‘CÚfÜmªûWšdow
();

583 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPicTÝ
->
g‘DefDi¥ÏyWšdow
() : Window();

584 cÚ¡ 
BoÞ
 
	gisTff
 = 
pcPicTÝ
->
isTÝF›ld
();

585 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPicTÝ
->
g‘PicYuvRec
(), 
pcPicBÙtom
->getPicYuvRec(),

586 
m_ouutCÞourS·ûCÚv”t
,

587 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

588 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

589 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

590 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.g‘WšdowBÙtomOff£t(), 
NUM_CHROMA_FORMAT
, 
isTff
 );

594 
	gm_iPOCLa¡Di¥Ïy
 = 
pcPicBÙtom
->
g‘POC
();

597 iàÐ!
	gpcPicTÝ
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPicTÝ->
g‘RecÚM¬k
(è=ð
Œue
 )

599 
pcPicTÝ
->
£tRecÚM¬k
(
çl£
);

602 
	gpcPicTÝ
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

604 iàÐ!
	gpcPicBÙtom
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPicBÙtom->
g‘RecÚM¬k
(è=ð
Œue
 )

606 
pcPicBÙtom
->
£tRecÚM¬k
(
çl£
);

609 
	gpcPicBÙtom
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

611 
	gpcPicTÝ
->
£tOuutM¬k
(
çl£
);

612 
	gpcPicBÙtom
->
£tOuutM¬k
(
çl£
);

614 if(
	gpcPicTÝ
)

616 
	gpcPicTÝ
->
de¡roy
();

617 
d–‘e
 
	gpcPicTÝ
;

618 
	gpcPicTÝ
 = 
NULL
;

622 if(
	gpcPicBÙtom
)

624 
	gpcPicBÙtom
->
de¡roy
();

625 
d–‘e
 
	gpcPicBÙtom
;

626 
	gpcPicBÙtom
 = 
NULL
;

631 
	g™”Pic
 !ð
pcLi¡Pic
->
’d
())

633 
pcPic
 = *(
™”Pic
);

635 iàÐ
	gpcPic
->
g‘OuutM¬k
() )

638 iàÐ!
	gm_»cÚFžeName
.
em±y
() )

640 cÚ¡ 
	gWšdow
 &
	gcÚf
 = 
pcPic
->
g‘CÚfÜmªûWšdow
();

641 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPic
->
g‘DefDi¥ÏyWšdow
() : Window();

643 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPic
->
g‘PicYuvRec
(),

644 
m_ouutCÞourS·ûCÚv”t
,

645 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

646 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

647 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

648 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.getWindowBottomOffset(),

649 
NUM_CHROMA_FORMAT
, 
m_bClOuutVideoToRec709Rªge
 );

652 #ià
FGS_RDD5_ENABLE


654 ià(!
	gm_SEIFGSFžeName
.
em±y
())

656 cÚ¡ 
	gWšdow
 &
	gcÚf
 = 
pcPic
->
g‘CÚfÜmªûWšdow
();

657 cÚ¡ 
Wšdow
 
	gdefDi¥
 = 
m_»¥eùDefDi¥Wšdow
 ? 
pcPic
->
g‘DefDi¥ÏyWšdow
() : Window();

658 
	gm_cTVideoIOYuvSEIFGSFže
.
wr™e
(
pcPic
->
g‘PicYuvDi¥
(),

659 
m_ouutCÞourS·ûCÚv”t
,

660 
cÚf
.
g‘WšdowLeáOff£t
(è+ 
defDi¥
.getWindowLeftOffset(),

661 
cÚf
.
g‘WšdowRightOff£t
(è+ 
defDi¥
.getWindowRightOffset(),

662 
cÚf
.
g‘WšdowTÝOff£t
(è+ 
defDi¥
.getWindowTopOffset(),

663 
cÚf
.
g‘WšdowBÙtomOff£t
(è+ 
defDi¥
.getWindowBottomOffset(),

664 
NUM_CHROMA_FORMAT
, 
m_bClOuutVideoToRec709Rªge
);

667 ià(!
	gm_cÞourRem­SEIFžeName
.
em±y
())

669 
xOuutCÞourRem­Pic
(
pcPic
);

672 ià(!
	gm_ªnÙ©edRegiÚsSEIFžeName
.
em±y
())

674 
xOuutAÂÙ©edRegiÚs
(
pcPic
);

678 
	gm_iPOCLa¡Di¥Ïy
 = 
pcPic
->
g‘POC
();

681 iàÐ!
	gpcPic
->
g‘Sliû
(0)->
isReã»nûd
(è&&…cPic->
g‘RecÚM¬k
(è=ð
Œue
 )

683 
pcPic
->
£tRecÚM¬k
(
çl£
);

686 
	gpcPic
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

688 
	gpcPic
->
£tOuutM¬k
(
çl£
);

690 if(
	gpcPic
 !ð
NULL
)

692 
pcPic
->
de¡roy
();

693 
d–‘e
 
	gpcPic
;

694 
	gpcPic
 = 
NULL
;

696 
	g™”Pic
++;

699 
	gpcLi¡Pic
->
þ—r
();

700 
	gm_iPOCLa¡Di¥Ïy
 = -
MAX_INT
;

705 
BoÞ
 
	gTAµDecTÝ
::
	$isN®uW™hšT¬g‘DecLay”IdS‘
Ð
IÅutNALUn™
* 
Çlu
 )

707 iàÐ
m_rg‘DecLay”IdS‘
.
	`size
() == 0 )

709  
Œue
;

711 
¡d
::
veùÜ
<
IÁ
>::
™”©Ü
 
™
 = 
m_rg‘DecLay”IdS‘
.
	`begš
(); iˆ!ðm_rg‘DecLay”IdS‘.
	`’d
(); it++)

713 iàÐ
Çlu
->
m_nuhLay”Id
 =ð(*
™
) )

715  
Œue
;

718  
çl£
;

719 
	}
}

721 
Void
 
	gTAµDecTÝ
::
	$xOuutCÞourRem­Pic
(
TComPic
* 
pcPic
)

723 cÚ¡ 
TComSPS
 &
¥s
=
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
();

724 
SEIMes§ges
 
cÞourRem­pšgInfo
 = 
	`g‘SeisByTy³
(
pcPic
->
	`g‘SEIs
(), 
SEI
::
COLOUR_REMAPPING_INFO
 );

725 
SEICÞourRem­pšgInfo
 *
£iCÞourRem­pšgInfo
 = ( 
cÞourRem­pšgInfo
.
	`size
(è> 0 ) ? (SEICÞourRem­pšgInfo*è*(cÞourRem­pšgInfo.
	`begš
()è: 
NULL
;

727 ià(
cÞourRem­pšgInfo
.
	`size
() > 1)

729 
	`´štf
 ("Warning: Got multiple Colour Remapping Information SEI messages. Using first.");

731 ià(
£iCÞourRem­pšgInfo
)

733 
	`­¶yCÞourRem­pšg
(*
pcPic
->
	`g‘PicYuvRec
(), *
£iCÞourRem­pšgInfo
, 
¥s
);

736 ià(
m_pcSeiCÞourRem­pšgInfoP»vious
 =ð
NULL
)

738 
m_pcSeiCÞourRem­pšgInfoP»vious
 = 
Ãw
 
	`SEICÞourRem­pšgInfo
();

740 
m_pcSeiCÞourRem­pšgInfoP»vious
->
	`cÝyFrom
(*
£iCÞourRem­pšgInfo
);

745 ià(
m_pcSeiCÞourRem­pšgInfoP»vious
 !ð
NULL
)

747 ià(
m_pcSeiCÞourRem­pšgInfoP»vious
->
m_cÞourRem­P”si¡’ûFÏg
 =ð
çl£
)

749 
	`´štf
("Warning No SEI-CRI message is…resent forhe current…icture,…ersistence ofhe CRI is‚ot managed\n");

751 
	`­¶yCÞourRem­pšg
(*
pcPic
->
	`g‘PicYuvRec
(), *
m_pcSeiCÞourRem­pšgInfoP»vious
, 
¥s
);

754 
	}
}

756 
Void
 
	gTAµDecTÝ
::
	$xOuutAÂÙ©edRegiÚs
(
TComPic
* 
pcPic
)

760 
SEIMes§ges
 
ªnÙ©edRegiÚSEIs
 = 
	`g‘SeisByTy³
(
pcPic
->
	`g‘SEIs
(), 
SEI
::
ANNOTATED_REGIONS
);

761 autØ
™
=
ªnÙ©edRegiÚSEIs
.
	`begš
(); it!÷ÂÙ©edRegiÚSEIs.
	`’d
(); it++)

763 cÚ¡ 
SEIAÂÙ©edRegiÚs
 &
£iAÂÙ©edRegiÚs
 = *(SEIAÂÙ©edRegiÚs*)(*
™
);

765 ià(
£iAÂÙ©edRegiÚs
.
m_hdr
.
m_ÿnûlFÏg
)

767 
m_¬Objeùs
.
	`þ—r
();

768 
m_¬Lab–s
.
	`þ—r
();

772 ià(
m_¬H—d”
.
m_»ûivedS‘tšgsOnû
)

775 
	`as£¹
(
m_¬H—d”
.
m_ocþudedObjeùFÏg
 =ð
£iAÂÙ©edRegiÚs
.
m_hdr
.m_occludedObjectFlag);

776 
	`as£¹
(
m_¬H—d”
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
 =ð
£iAÂÙ©edRegiÚs
.
m_hdr
.m_partialObjectFlagPresentFlag);

777 
	`as£¹
(
m_¬H—d”
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
 =ð
£iAÂÙ©edRegiÚs
.
m_hdr
.m_objectConfidenceInfoPresentFlag);

778 
	`as£¹
((!
m_¬H—d”
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
è|| m_¬H—d”.
m_objeùCÚfid’ûL’gth
 =ð
£iAÂÙ©edRegiÚs
.
m_hdr
.m_objectConfidenceLength);

782 
m_¬H—d”
.
m_»ûivedS‘tšgsOnû
=
Œue
;

783 
m_¬H—d”
=
£iAÂÙ©edRegiÚs
.
m_hdr
;

786 ià(
£iAÂÙ©edRegiÚs
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

788 autØ
¤cIt
=
£iAÂÙ©edRegiÚs
.
m_ªnÙ©edLab–s
.
	`begš
(); srcIt!=£iAÂÙ©edRegiÚs.m_ªnÙ©edLab–s.
	`’d
(); srcIt++)

790 cÚ¡ 
UIÁ
 
ÏbIdx
 = 
¤cIt
->
fœ¡
;

791 ià(
¤cIt
->
£cÚd
.
Ïb–V®id
)

793 
m_¬Lab–s
[
ÏbIdx
] = 
¤cIt
->
£cÚd
.
Ïb–
;

797 
m_¬Lab–s
.
	`”a£
(
ÏbIdx
);

803 autØ
¤cIt
=
£iAÂÙ©edRegiÚs
.
m_ªnÙ©edRegiÚs
.
	`begš
(); srcIt!=£iAÂÙ©edRegiÚs.m_ªnÙ©edRegiÚs.
	`’d
(); srcIt++)

805 
UIÁ
 
objIdx
 = 
¤cIt
->
fœ¡
;

806 cÚ¡ 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
 &
¤c
 =
¤cIt
->
£cÚd
;

808 ià(
¤c
.
objeùCªûlFÏg
)

810 
m_¬Objeùs
.
	`”a£
(
objIdx
);

814 autØ
de¡It
 = 
m_¬Objeùs
.
	`fšd
(
objIdx
);

816 ià(
de¡It
 =ð
m_¬Objeùs
.
	`’d
())

819 
m_¬Objeùs
[
objIdx
] = 
¤c
;

823 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
 &
d¡
=
de¡It
->
£cÚd
;

825 ià(
£iAÂÙ©edRegiÚs
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
 && 
¤c
.
objeùLab–V®id
)

827 
d¡
.
objeùLab–V®id
=
Œue
;

828 
d¡
.
objLab–Idx
 = 
¤c
.objLabelIdx;

830 ià(
¤c
.
boundšgBoxV®id
)

832 
d¡
.
boundšgBoxTÝ
 = 
¤c
.boundingBoxTop ;

833 
d¡
.
boundšgBoxLeá
 = 
¤c
.boundingBoxLeft ;

834 
d¡
.
boundšgBoxWidth
 = 
¤c
.boundingBoxWidth ;

835 
d¡
.
boundšgBoxHeight
 = 
¤c
.boundingBoxHeight;

836 ià(
£iAÂÙ©edRegiÚs
.
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
)

838 
d¡
.
·¹ŸlObjeùFÏg
 = 
¤c
.partialObjectFlag;

840 ià(
£iAÂÙ©edRegiÚs
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

842 
d¡
.
objeùCÚfid’û
 = 
¤c
.objectConfidence;

851 ià(!
m_¬Objeùs
.
	`em±y
())

853 
FILE
 *
å_³rsi¡
 = 
	`fÝ’
(
m_ªnÙ©edRegiÚsSEIFžeName
.
	`c_¡r
(), "ab");

854 ià(
å_³rsi¡
 =ð
NULL
)

856 
¡d
::
cout
 << "NÙ‡bËØÝ’ fžfÜ wr™šg…”si¡ SEI mes§ges" << std::
’dl
;

860 
	`årštf
(
å_³rsi¡
, "\n");

861 
	`årštf
(
å_³rsi¡
, "Numb” oàobjeù ð%d\n", (
IÁ
)
m_¬Objeùs
.
	`size
());

862 autØ
™
 = 
m_¬Objeùs
.
	`begš
(); iˆ!ðm_¬Objeùs.
	`’d
(); ++it)

864 
	`årštf
(
å_³rsi¡
, "Objeù Idx = %d\n", 
™
->
fœ¡
);

865 
	`årštf
(
å_³rsi¡
, "Objeù TÝ = %d\n", 
™
->
£cÚd
.
boundšgBoxTÝ
);

866 
	`årštf
(
å_³rsi¡
, "Objeù Leá = %d\n", 
™
->
£cÚd
.
boundšgBoxLeá
);

867 
	`årštf
(
å_³rsi¡
, "Objeù Width = %d\n", 
™
->
£cÚd
.
boundšgBoxWidth
);

868 
	`årštf
(
å_³rsi¡
, "Objeù Heighˆð%d\n", 
™
->
£cÚd
.
boundšgBoxHeight
);

869 ià(
™
->
£cÚd
.
objeùLab–V®id
)

871 autØ
Ïb–It
=
m_¬Lab–s
.
	`fšd
(
™
->
£cÚd
.
objLab–Idx
);

872 
	`årštf
(
å_³rsi¡
, "Objeù Lab– = %s\n", 
Ïb–It
!=
m_¬Lab–s
.
	`’d
(è? (Ïb–It->
£cÚd
.
	`c_¡r
()) : "<UNKNOWN>");

874 ià(
m_¬H—d”
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
)

876 
	`årštf
(
å_³rsi¡
, "Objeù P¬tŸÈð%d\n", 
™
->
£cÚd
.
·¹ŸlObjeùFÏg
?1:0);

878 ià(
m_¬H—d”
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

880 
	`årštf
(
å_³rsi¡
, "Objeù CÚàð%d\n", 
™
->
£cÚd
.
objeùCÚfid’û
);

883 
	`fþo£
(
å_³rsi¡
);

886 
	}
}

892 
	g¡d
::
veùÜ
<
IÁ
>

893 
š™CÞourRem­pšgInfoLut
(cÚ¡ 
IÁ
 
b™D•th_š
,

894 cÚ¡ 
IÁ
 
nbDecim®V®ues
,

895 cÚ¡ 
¡d
::
veùÜ
<
SEICÞourRem­pšgInfo
::
CRIlut
> &
lut
,

896 cÚ¡ 
IÁ
 
maxV®ue
,

897 cÚ¡ 
IÁ
 
lutOff£t
)

899 cÚ¡ 
IÁ
 
	glutPošts
 = (1 << 
b™D•th_š
) + 1 ;

900 
	g¡d
::
veùÜ
<
IÁ
> 
»tLut
(
lutPošts
);

903 
IÁ
 
	giT¬g‘P»v
 = (
lut
.
size
(è&&†ut[0].
codedV®ue
 =ð0è?†ut[0].
rg‘V®ue
: 0;

904 
IÁ
 
	g¡¬tPivÙ
 = (
lut
.
size
())? (Öut[0].
codedV®ue
 == 0)? 1: 0): 1;

905 
IÁ
 
	giCodedP»v
 = 0;

908 cÚ¡ 
IÁ
 
	gmaxV®ueFixedPošt
 = (
maxV®ue
 << 
nbDecim®V®ues
) + ((1 <<‚bDecimalValues) - 1);

910 
IÁ
 
	giV®ue
 = 0;

912  
IÁ
 
	giPivÙ
=
¡¬tPivÙ
 ; iPivÙ < (
	gIÁ
)
	glut
.
size
(); iPivot++ )

914 
IÁ
 
	giCodedNext
 = 
lut
[
iPivÙ
].
codedV®ue
;

915 
IÁ
 
	giT¬g‘Next
 = 
lut
[
iPivÙ
].
rg‘V®ue
;

918 
IÁ
 
	giCodedNext_b™D•th
 = 
¡d
::
mš
(
iCodedNext
, (1 << 
b™D•th_š
));

920 cÚ¡ 
IÁ
 
	gdivV®ue
 = (
iCodedNext
 - 
iCodedP»v
 > 0)? (iCodedNext - iCodedPrev): 1;

921 cÚ¡ 
IÁ
 
	glutV®In™
 = (
lutOff£t
 + 
iT¬g‘P»v
è<< 
nbDecim®V®ues
;

922 cÚ¡ 
IÁ
 
	groundV®ue
 = 
divV®ue
 / 2;

923  ; 
	giV®ue
<
	giCodedNext_b™D•th
; iValue++ )

925 
IÁ
 
	gv®ue
 = 
iV®ue
;

926 
IÁ
 
	gš‹½Þ
 = ((((
v®ue
-
iCodedP»v
è* (
iT¬g‘Next
 - 
iT¬g‘P»v
)è<< 
nbDecim®V®ues
è+ 
roundV®ue
è/ 
divV®ue
;

927 
	g»tLut
[
iV®ue
] = 
¡d
::
mš
(
lutV®In™
 + 
š‹½Þ
 , 
maxV®ueFixedPošt
);

929 
	giCodedP»v
 = 
iCodedNext
;

930 
	giT¬g‘P»v
 = 
iT¬g‘Next
;

933 if(
	giCodedP»v
 < (1 << 
	gb™D•th_š
)+1)

935 
IÁ
 
	giCodedNext
 = (1 << 
b™D•th_š
);

936 
IÁ
 
	giT¬g‘Next
 = (1 << 
b™D•th_š
) - 1;

938 cÚ¡ 
IÁ
 
	gdivV®ue
 = (
iCodedNext
 - 
iCodedP»v
 > 0)? (iCodedNext - iCodedPrev): 1;

939 cÚ¡ 
IÁ
 
	glutV®In™
 = (
lutOff£t
 + 
iT¬g‘P»v
è<< 
nbDecim®V®ues
;

940 cÚ¡ 
IÁ
 
	groundV®ue
 = 
divV®ue
 / 2;

942  ; 
	giV®ue
<=
iCodedNext
; iValue++ )

944 
IÁ
 
	gv®ue
 = 
iV®ue
;

945 
IÁ
 
	gš‹½Þ
 = ((((
v®ue
-
iCodedP»v
è* (
iT¬g‘Next
 - 
iT¬g‘P»v
)è<< 
nbDecim®V®ues
è+ 
roundV®ue
è/ 
divV®ue
;

946 
	g»tLut
[
iV®ue
] = 
¡d
::
mš
(
lutV®In™
 + 
š‹½Þ
 , 
maxV®ueFixedPošt
);

949  
	g»tLut
;

952 
Void


953 
š™CÞourRem­pšgInfoLuts
(
¡d
::
veùÜ
<
IÁ
> (&
´eLut
)[3],

954 
¡d
::
veùÜ
<
IÁ
> (&
po¡Lut
)[3],

955 
SEICÞourRem­pšgInfo
 &
pCriSEI
,

956 cÚ¡ 
IÁ
 
maxB™D•th
)

958 
IÁ
 
	gš‹º®B™D•th
 = 
pCriSEI
.
m_cÞourRem­B™D•th
;

959  
IÁ
 
	gc
=0 ; c<3 ; c++ )

961 
	g¡d
::
sÜt
(
pCriSEI
.
m_´eLut
[
c
].
begš
(),…CriSEI.m_´eLut[c].
’d
());

962 
	g´eLut
[
c
] = 
š™CÞourRem­pšgInfoLut
(
pCriSEI
.
m_cÞourRem­IÅutB™D•th
, 
maxB™D•th
 -…CriSEI.m_cÞourRem­IÅutB™D•th,…CriSEI.
m_´eLut
[c], ((1 << 
š‹º®B™D•th
) - 1), 0);

964 
	g¡d
::
sÜt
(
pCriSEI
.
m_po¡Lut
[
c
].
begš
(),…CriSEI.m_po¡Lut[c].
’d
());

965 
	gpo¡Lut
[
c
] = 
š™CÞourRem­pšgInfoLut
(
pCriSEI
.
m_cÞourRem­B™D•th
, 
maxB™D•th
 -…CriSEI.m_cÞourRem­B™D•th,…CriSEI.
m_po¡Lut
[c], (1 << 
š‹º®B™D•th
) - 1, 0);

971 
IÁ


972 
­¶yCÞourRem­pšgInfoLut1D
(
IÁ
 
šV®
, cÚ¡ 
¡d
::
veùÜ
<IÁ> &
lut
, cÚ¡ IÁ 
šV®P»cisiÚB™s
)

974 cÚ¡ 
IÁ
 
	groundV®ue
 = (
šV®P»cisiÚB™s
)? 1 << (inValPrecisionBits - 1): 0;

975 
	gšV®
 = 
¡d
::
mš
(¡d::
max
(0, 
šV®
), (
IÁ
)(((
lut
.
size
()-1è<< 
šV®P»cisiÚB™s
)));

976 
IÁ
 
	gšdex
 = (IÁè
¡d
::
mš
((
šV®
 >> 
šV®P»cisiÚB™s
), (IÁ)(
lut
.
size
()-2));

977 
IÁ
 
	goutV®
 = (Ð
šV®
 - (
šdex
<<
šV®P»cisiÚB™s
èè* (
lut
[šdex+1] -†ut[šdex]è+ 
roundV®ue
) >> inValPrecisionBits;

978 
	goutV®
 +ð
lut
[
šdex
] ;

980  
	goutV®
;

983 
IÁ


984 
­¶yCÞourRem­pšgInfoM©rix
(cÚ¡ 
IÁ
 (&
cÞourRem­CÛffs
)[3], cÚ¡ IÁ 
po¡Off£tShiá
, cÚ¡ IÁ 
p0
, cÚ¡ IÁ 
p1
, cÚ¡ IÁ 
p2
, cÚ¡ IÁ 
off£t
)

986 
IÁ
 
	gYUVM©
 = (
cÞourRem­CÛffs
[0]* 
p0
 + cÞourRem­CÛffs[1]* 
p1
 + cÞourRem­CÛffs[2]* 
p2
 + 
off£t
è>> 
po¡Off£tShiá
;

987  
	gYUVM©
;

990 
Void


991 
£tCÞourRem­pšgInfoM©rixOff£t
(
IÁ
 (&
m©rixOff£t
)[3], IÁ 
off£t0
, IÁ 
off£t1
, IÁ 
off£t2
)

993 
	gm©rixOff£t
[0] = 
off£t0
;

994 
	gm©rixOff£t
[1] = 
off£t1
;

995 
	gm©rixOff£t
[2] = 
off£t2
;

998 
Void


999 
£tCÞourRem­pšgInfoM©rixOff£ts
Ð
IÁ
 (&
m©rixIÅutOff£t
)[3],

1000 
IÁ
 (&
m©rixOuutOff£t
)[3],

1001 cÚ¡ 
IÁ
 
b™D•th
,

1002 cÚ¡ 
BoÞ
 
üIÅutFuÎRªgeFÏg
,

1003 cÚ¡ 
IÁ
 
üIÅutM©rixCÛffic›Ás
,

1004 cÚ¡ 
BoÞ
 
üFuÎRªgeFÏg
,

1005 cÚ¡ 
IÁ
 
üM©rixCÛffic›Ás
)

1008 
IÁ
 
	güIÅutOff£tLuma
 = (
üIÅutFuÎRªgeFÏg
)? 0:-(16 << (
b™D•th
-8));

1009 
IÁ
 
	güOff£tLuma
 = (
üFuÎRªgeFÏg
)? 0:(16 << (
b™D•th
-8));

1010 
IÁ
 
	güIÅutOff£tChroma
 = 0;

1011 
IÁ
 
	güOff£tChroma
 = 0;

1013 
	güIÅutM©rixCÛffic›Ás
)

1015 
	gMATRIX_COEFFICIENTS_RGB
:

1016 
üIÅutOff£tChroma
 = 0;

1017 if(!
	güIÅutFuÎRªgeFÏg
)

1019 
årštf
(
¡d”r
, "WARNING: crInputMatrixCoefficients seto MATRIX_COEFFICIENTS_RGB‡nd crInputFullRangeFlag‚ot set\n");

1020 
	güIÅutOff£tLuma
 = 0;

1023 
	gMATRIX_COEFFICIENTS_UNSPECIFIED
:

1024 
MATRIX_COEFFICIENTS_BT709
:

1025 
MATRIX_COEFFICIENTS_BT2020_NON_CONSTANT_LUMINANCE
:

1026 
üIÅutOff£tChroma
 = -(1 << (
b™D•th
-1));

1029 
årštf
(
¡d”r
, "WARNING: crIÅutM©rixCÛffic›Á £ˆtØundefšed v®ue: %d\n", 
üIÅutM©rixCÛffic›Ás
);

1032 
	güM©rixCÛffic›Ás
)

1034 
	gMATRIX_COEFFICIENTS_RGB
:

1035 
üOff£tChroma
 = 0;

1036 if(!
	güFuÎRªgeFÏg
)

1038 
årštf
(
¡d”r
, "WARNING: crMatrixCoefficients seto MATRIX_COEFFICIENTS_RGB‡nd crInputFullRangeFlag‚ot set\n");

1039 
	güOff£tLuma
 = 0;

1042 
	gMATRIX_COEFFICIENTS_UNSPECIFIED
:

1043 
MATRIX_COEFFICIENTS_BT709
:

1044 
MATRIX_COEFFICIENTS_BT2020_NON_CONSTANT_LUMINANCE
:

1045 
üOff£tChroma
 = (1 << (
b™D•th
-1));

1048 
årštf
(
¡d”r
, "WARNING: crM©rixCÛffic›Á £ˆtØundefšed v®ue: %d\n", 
üM©rixCÛffic›Ás
);

1051 
£tCÞourRem­pšgInfoM©rixOff£t
(
m©rixIÅutOff£t
, 
üIÅutOff£tLuma
, 
üIÅutOff£tChroma
, crInputOffsetChroma);

1052 
£tCÞourRem­pšgInfoM©rixOff£t
(
m©rixOuutOff£t
, 
üOff£tLuma
, 
üOff£tChroma
, crOffsetChroma);

1055 
Void
 
	gTAµDecTÝ
::
	$­¶yCÞourRem­pšg
(cÚ¡ 
TComPicYuv
& 
pic
, 
SEICÞourRem­pšgInfo
& 
üiSEI
, cÚ¡ 
TComSPS
 &
aùiveSPS
)

1057 cÚ¡ 
IÁ
 
maxB™D•th
 = 16;

1060 ifÐ!
üiSEI
.
m_cÞourRem­CªûlFÏg
 && 
pic
.
	`g‘ChromaFÜm©
()!=
CHROMA_400
)

1062 cÚ¡ 
IÁ
 
iHeight
 = 
pic
.
	`g‘Height
(
COMPONENT_Y
);

1063 cÚ¡ 
IÁ
 
iWidth
 = 
pic
.
	`g‘Width
(
COMPONENT_Y
);

1064 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
pic
.
	`g‘ChromaFÜm©
();

1066 
TComPicYuv
 
picYuvCÞourRem­³d
;

1067 
picYuvCÞourRem­³d
.
	`ü—‹W™houtCUInfo
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
 );

1069 cÚ¡ 
IÁ
 
iSŒideIn
 = 
pic
.
	`g‘SŒide
(
COMPONENT_Y
);

1070 cÚ¡ 
IÁ
 
iCSŒideIn
 = 
pic
.
	`g‘SŒide
(
COMPONENT_Cb
);

1071 cÚ¡ 
IÁ
 
iSŒideOut
 = 
picYuvCÞourRem­³d
.
	`g‘SŒide
(
COMPONENT_Y
);

1072 cÚ¡ 
IÁ
 
iCSŒideOut
 = 
picYuvCÞourRem­³d
.
	`g‘SŒide
(
COMPONENT_Cb
);

1073 cÚ¡ 
BoÞ
 
b444
 = ( 
pic
.
	`g‘ChromaFÜm©
(è=ð
CHROMA_444
 );

1074 cÚ¡ 
BoÞ
 
b422
 = ( 
pic
.
	`g‘ChromaFÜm©
(è=ð
CHROMA_422
 );

1075 cÚ¡ 
BoÞ
 
b420
 = ( 
pic
.
	`g‘ChromaFÜm©
(è=ð
CHROMA_420
 );

1077 
¡d
::
veùÜ
<
IÁ
> 
´eLut
[3];

1078 
¡d
::
veùÜ
<
IÁ
> 
po¡Lut
[3];

1079 
IÁ
 
m©rixIÅutOff£t
[3];

1080 
IÁ
 
m©rixOuutOff£t
[3];

1081 cÚ¡ 
P–
 *
YUVIn
[
MAX_NUM_COMPONENT
];

1082 
P–
 *
YUVOut
[
MAX_NUM_COMPONENT
];

1083 
YUVIn
[
COMPONENT_Y
] = 
pic
.
	`g‘Addr
(COMPONENT_Y);

1084 
YUVIn
[
COMPONENT_Cb
] = 
pic
.
	`g‘Addr
(COMPONENT_Cb);

1085 
YUVIn
[
COMPONENT_Cr
] = 
pic
.
	`g‘Addr
(COMPONENT_Cr);

1086 
YUVOut
[
COMPONENT_Y
] = 
picYuvCÞourRem­³d
.
	`g‘Addr
(COMPONENT_Y);

1087 
YUVOut
[
COMPONENT_Cb
] = 
picYuvCÞourRem­³d
.
	`g‘Addr
(COMPONENT_Cb);

1088 
YUVOut
[
COMPONENT_Cr
] = 
picYuvCÞourRem­³d
.
	`g‘Addr
(COMPONENT_Cr);

1090 cÚ¡ 
IÁ
 
b™D•th
 = 
üiSEI
.
m_cÞourRem­B™D•th
;

1091 
B™D•ths
 
b™D•thsCriFže
;

1092 
b™D•thsCriFže
.
»cÚ
[
CHANNEL_TYPE_LUMA
] = 
b™D•th
;

1093 
b™D•thsCriFže
.
»cÚ
[
CHANNEL_TYPE_CHROMA
] = 
b™D•th
;

1095 cÚ¡ 
IÁ
 
po¡Off£tShiá
 = 
üiSEI
.
m_log2M©rixD’om
;

1096 cÚ¡ 
IÁ
 
m©rixRound
 = 1 << (
po¡Off£tShiá
 - 1);

1097 cÚ¡ 
IÁ
 
po¡LutIÅutP»cisiÚ
 = (
maxB™D•th
 - 
üiSEI
.
m_cÞourRem­B™D•th
);

1099 iàÐ! 
üiSEI
.
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
 )

1101 
	`£tCÞourRem­pšgInfoM©rixOff£ts
(
m©rixIÅutOff£t
, 
m©rixOuutOff£t
, 
maxB™D•th
,

1102 
aùiveSPS
.
	`g‘VuiP¬am‘”s
()->
	`g‘VideoFuÎRªgeFÏg
(),‡ùiveSPS.g‘VuiP¬am‘”s()->
	`g‘M©rixCÛffic›Ás
(),

1103 
aùiveSPS
.
	`g‘VuiP¬am‘”s
()->
	`g‘VideoFuÎRªgeFÏg
(),‡ùiveSPS.g‘VuiP¬am‘”s()->
	`g‘M©rixCÛffic›Ás
());

1107 
	`£tCÞourRem­pšgInfoM©rixOff£ts
(
m©rixIÅutOff£t
, 
m©rixOuutOff£t
, 
maxB™D•th
,

1108 
aùiveSPS
.
	`g‘VuiP¬am‘”s
()->
	`g‘VideoFuÎRªgeFÏg
(),‡ùiveSPS.g‘VuiP¬am‘”s()->
	`g‘M©rixCÛffic›Ás
(),

1109 
üiSEI
.
m_cÞourRem­FuÎRªgeFÏg
, criSEI.
m_cÞourRem­M©rixCÛffic›Ás
);

1113 
m©rixOuutOff£t
[0] = (m©rixOuutOff£t[0] << 
po¡Off£tShiá
è+ 
m©rixRound
;

1114 
m©rixOuutOff£t
[1] = (m©rixOuutOff£t[1] << 
po¡Off£tShiá
è+ 
m©rixRound
;

1115 
m©rixOuutOff£t
[2] = (m©rixOuutOff£t[2] << 
po¡Off£tShiá
è+ 
m©rixRound
;

1118 
m©rixOuutOff£t
[0] +ð
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[0], 0, 
m©rixIÅutOff£t
[0], matrixInputOffset[1], matrixInputOffset[2], 0);

1119 
m©rixOuutOff£t
[1] +ð
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[1], 0, 
m©rixIÅutOff£t
[0], matrixInputOffset[1], matrixInputOffset[2], 0);

1120 
m©rixOuutOff£t
[2] +ð
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[2], 0, 
m©rixIÅutOff£t
[0], matrixInputOffset[1], matrixInputOffset[2], 0);

1123 cÚ¡ 
IÁ
 
sÿËShiáOut_Ãg
 = 
	`abs
(
b™D•th
 - 
maxB™D•th
);

1124 cÚ¡ 
IÁ
 
sÿËOut_round
 = 1 << (
sÿËShiáOut_Ãg
-1);

1126 
	`š™CÞourRem­pšgInfoLuts
(
´eLut
, 
po¡Lut
, 
üiSEI
, 
maxB™D•th
);

1128 
	`as£¹
(
pic
.
	`g‘ChromaFÜm©
(è!ð
CHROMA_400
);

1129 cÚ¡ 
IÁ
 
hs
 = 
pic
.
	`g‘CompÚ’tSÿËX
(
	`CompÚ’tID
(
COMPONENT_Cb
));

1130 cÚ¡ 
IÁ
 
maxOuutV®ue
 = (1 << 
b™D•th
) - 1;

1132  
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

1134  
IÁ
 
x
 = 0; x < 
iWidth
; x++ )

1136 cÚ¡ 
IÁ
 
xc
 = (
x
>>
hs
);

1137 
BoÞ
 
compu‹Chroma
 = 
b444
 || ((
b422
 || !(
y
&1)è&& !(
x
&1));

1139 
IÁ
 
YUVP»_0
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVIn
[
COMPONENT_Y
][
x
], 
´eLut
[0], 0);

1140 
IÁ
 
YUVP»_1
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVIn
[
COMPONENT_Cb
][
xc
], 
´eLut
[1], 0);

1141 
IÁ
 
YUVP»_2
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVIn
[
COMPONENT_Cr
][
xc
], 
´eLut
[2], 0);

1143 
IÁ
 
YUVM©_0
 = 
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[0], 
po¡Off£tShiá
, 
YUVP»_0
, 
YUVP»_1
, 
YUVP»_2
, 
m©rixOuutOff£t
[0]);

1144 
IÁ
 
YUVLutB_0
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVM©_0
, 
po¡Lut
[0], 
po¡LutIÅutP»cisiÚ
);

1145 
YUVOut
[
COMPONENT_Y
][
x
] = 
¡d
::
	`mš
(
maxOuutV®ue
, (
YUVLutB_0
 + 
sÿËOut_round
è>> 
sÿËShiáOut_Ãg
);

1147 ifÐ
compu‹Chroma
 )

1149 
IÁ
 
YUVM©_1
 = 
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[1], 
po¡Off£tShiá
, 
YUVP»_0
, 
YUVP»_1
, 
YUVP»_2
, 
m©rixOuutOff£t
[1]);

1150 
IÁ
 
YUVLutB_1
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVM©_1
, 
po¡Lut
[1], 
po¡LutIÅutP»cisiÚ
);

1151 
YUVOut
[
COMPONENT_Cb
][
xc
] = 
¡d
::
	`mš
(
maxOuutV®ue
, (
YUVLutB_1
 + 
sÿËOut_round
è>> 
sÿËShiáOut_Ãg
);

1153 
IÁ
 
YUVM©_2
 = 
	`­¶yCÞourRem­pšgInfoM©rix
(
üiSEI
.
m_cÞourRem­CÛffs
[2], 
po¡Off£tShiá
, 
YUVP»_0
, 
YUVP»_1
, 
YUVP»_2
, 
m©rixOuutOff£t
[2]);

1154 
IÁ
 
YUVLutB_2
 = 
	`­¶yCÞourRem­pšgInfoLut1D
(
YUVM©_2
, 
po¡Lut
[2], 
po¡LutIÅutP»cisiÚ
);

1155 
YUVOut
[
COMPONENT_Cr
][
xc
] = 
¡d
::
	`mš
(
maxOuutV®ue
, (
YUVLutB_2
 + 
sÿËOut_round
è>> 
sÿËShiáOut_Ãg
);

1159 
YUVIn
[
COMPONENT_Y
] +ð
iSŒideIn
;

1160 
YUVOut
[
COMPONENT_Y
] +ð
iSŒideOut
;

1161 ifÐ!(
b420
 && !(
y
&1)) )

1163 
YUVIn
[
COMPONENT_Cb
] +ð
iCSŒideIn
;

1164 
YUVIn
[
COMPONENT_Cr
] +ð
iCSŒideIn
;

1165 
YUVOut
[
COMPONENT_Cb
] +ð
iCSŒideOut
;

1166 
YUVOut
[
COMPONENT_Cr
] +ð
iCSŒideOut
;

1170 
picYuvCÞourRem­³d
.
	`dump
Ð
m_cÞourRem­SEIFžeName
, 
b™D•thsCriFže
, 
Œue
 );

1171 
picYuvCÞourRem­³d
.
	`de¡roy
();

1173 
	}
}

	@source/App/TAppDecoder/TAppDecTop.h

38 #iâdeà
__TAPPDECTOP__


39 
	#__TAPPDECTOP__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"Utž™›s/TVideoIOYuv.h
"

46 
	~"TLibCommÚ/TComLi¡.h
"

47 
	~"TLibCommÚ/TComPicYuv.h
"

48 
	~"TLibDecod”/TDecTÝ.h
"

49 
	~"TAµDecCfg.h
"

59 þas 
	cTAµDecTÝ
 : 
public
 
TAµDecCfg


61 
´iv©e
:

63 
TDecTÝ
 
m_cTDecTÝ
;

64 
TVideoIOYuv
 
	mm_cTVideoIOYuvRecÚFže
;

65 #ià
FGS_RDD5_ENABLE


66 
TVideoIOYuv
 
	mm_cTVideoIOYuvSEIFGSFže
;

69 
IÁ
 
	mm_iPOCLa¡Di¥Ïy
;

70 
	m¡d
::
of¡»am
 
m_£iMes§geFžeSŒ—m
;

72 
SEICÞourRem­pšgInfo
* 
	mm_pcSeiCÞourRem­pšgInfoP»vious
;

74 
	mSEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚH—d”
 
m_¬H—d”
;

75 
	m¡d
::
m­
<
UIÁ
, 
	mSEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
> 
m_¬Objeùs
;

76 
	m¡d
::
m­
<
UIÁ
, std::
¡ršg
> 
m_¬Lab–s
;

78 
	mpublic
:

79 
TAµDecTÝ
();

80 
	mvœtu®
 ~
	$TAµDecTÝ
() {}

82 
Void
 
	`ü—‹
 ();

83 
Void
 
	`de¡roy
 ();

84 
Void
 
	`decode
 ();

85 
UIÁ
 
	$g‘Numb”OfChecksumE¼ÜsD‘eùed
(ècÚ¡ {  
m_cTDecTÝ
.
	`g‘Numb”OfChecksumE¼ÜsD‘eùed
(); 
	}
}

87 
	g´Ùeùed
:

88 
Void
 
xC»©eDecLib
 ();

89 
Void
 
xDe¡royDecLib
 ();

90 
Void
 
xIn™DecLib
 ();

92 
Void
 
xWr™eOuut
 ( 
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
 , 
UIÁ
 
tId
);

93 
Void
 
xFlushOuut
 ( 
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
 );

94 
BoÞ
 
isN®uW™hšT¬g‘DecLay”IdS‘
 ( 
IÅutNALUn™
* 
Çlu
 );

96 
	g´iv©e
:

97 
Void
 
­¶yCÞourRem­pšg
(cÚ¡ 
TComPicYuv
& 
pic
, 
SEICÞourRem­pšgInfo
& 
pCriSEI
, cÚ¡ 
TComSPS
 &
aùiveSPS
);

98 
Void
 
xOuutCÞourRem­Pic
(
TComPic
* 
pcPic
);

99 
Void
 
xOuutAÂÙ©edRegiÚs
(
TComPic
* 
pcPic
);

	@source/App/TAppDecoder/decmain.cpp

38 
	~<¡dlib.h
>

39 
	~<¡dio.h
>

40 
	~<time.h
>

41 
	~"TAµDecTÝ.h
"

50 
	$maš
(
¬gc
, * 
¬gv
[])

52 
IÁ
 
»tuºCode
 = 
EXIT_SUCCESS
;

53 
TAµDecTÝ
 
cTAµDecTÝ
;

56 
	`årštf
Ð
¡dout
, "\n" );

57 
	`årštf
Ð
¡dout
, "HM soáw¬e: Decod” V”siÚ [%s] (šþudšg RExt)", 
NV_VERSION
 );

58 
	`årštf
Ð
¡dout
, 
NVM_ONOS
 );

59 
	`årštf
Ð
¡dout
, 
NVM_COMPILEDBY
 );

60 
	`årštf
Ð
¡dout
, 
NVM_BITS
 );

61 
	`årštf
Ð
¡dout
, "\n" );

64 
cTAµDecTÝ
.
	`ü—‹
();

67 if(!
cTAµDecTÝ
.
	`·r£Cfg
Ð
¬gc
, 
¬gv
 ))

69 
cTAµDecTÝ
.
	`de¡roy
();

70 
»tuºCode
 = 
EXIT_FAILURE
;

71  
»tuºCode
;

75 
DoubË
 
dResuÉ
;

76 
þock_t
 
lBefÜe
 = 
	`þock
();

79 
cTAµDecTÝ
.
	`decode
();

81 ià(
cTAµDecTÝ
.
	`g‘Numb”OfChecksumE¼ÜsD‘eùed
() != 0)

83 
	`´štf
("\n\n***ERROR*** A decoding mismatch occured: signalled md5sum does‚ot match\n");

84 
»tuºCode
 = 
EXIT_FAILURE
;

88 
dResuÉ
 = (
DoubË
)(
	`þock
()-
lBefÜe
è/ 
CLOCKS_PER_SEC
;

89 
	`´štf
("\ÀTÙ® Time: %12.3à£c.\n", 
dResuÉ
);

92 
cTAµDecTÝ
.
	`de¡roy
();

94  
»tuºCode
;

95 
	}
}

	@source/App/TAppEncoder/TAppEncCfg.cpp

38 
	~<¡dio.h
>

40 
	~<¡dlib.h
>

41 
	~<ÿs£¹
>

42 
	~<c¡ršg
>

43 
	~<¡ršg
>

44 
	~<lim™s
>

45 
	~<m­
>

47 
	~"TLibCommÚ/TComRom.h
"

48 #ià
DPB_ENCODER_USAGE_CHECK


49 
	~"TLibCommÚ/ProfžeLev–T›rF—tu»s.h
"

52 
	g‹m¶©e
 <
þass
 
	gT1
, cÏs 
	gT2
>

53 
šlše
 
	g¡d
::
i¡»am
& 
Ý”©Ü
 >> (
¡d
::i¡»am &
š
, std::
m­
<
T1
, 
	gT2
> &
	gm­
);

55 
	~"TAµEncCfg.h
"

56 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

57 
	~"TLibEncod”/TEncR©eCŒl.h
"

58 #ifdeà
WIN32


59 
	#¡rdup
 
_¡rdup


	)

62 
	#MACRO_TO_STRING_HELPER
(
v®
è#v®

	)

63 
	#MACRO_TO_STRING
(
v®
è
	`MACRO_TO_STRING_HELPER
(v®)

	)

65 
usšg
 
Çme¥aû
 
	g¡d
;

67 
	eUIProfžeName


69 
	mUI_NONE
 = 0,

70 
	mUI_MAIN
 = 1,

71 
	mUI_MAIN10
 = 2,

72 
	mUI_MAIN10_STILL_PICTURE
=10002,

73 
	mUI_MAINSTILLPICTURE
 = 3,

74 
	mUI_MAINREXT
 = 4,

75 
	mUI_HIGHTHROUGHPUTREXT
 = 5,

81 
	mUI_MONOCHROME_8
 = 1008,

82 
	mUI_MONOCHROME_12
 = 1012,

83 
	mUI_MONOCHROME_16
 = 1016,

84 
	mUI_MAIN_12
 = 1112,

85 
	mUI_MAIN_422_10
 = 1210,

86 
	mUI_MAIN_422_12
 = 1212,

87 
	mUI_MAIN_444
 = 1308,

88 
	mUI_MAIN_444_10
 = 1310,

89 
	mUI_MAIN_444_12
 = 1312,

90 
	mUI_MAIN_444_16
 = 1316,

91 
	mUI_MAIN_INTRA
 = 2108,

92 
	mUI_MAIN_10_INTRA
 = 2110,

93 
	mUI_MAIN_12_INTRA
 = 2112,

94 
	mUI_MAIN_422_10_INTRA
 = 2210,

95 
	mUI_MAIN_422_12_INTRA
 = 2212,

96 
	mUI_MAIN_444_INTRA
 = 2308,

97 
	mUI_MAIN_444_10_INTRA
 = 2310,

98 
	mUI_MAIN_444_12_INTRA
 = 2312,

99 
	mUI_MAIN_444_16_INTRA
 = 2316,

100 
	mUI_MAIN_444_STILL_PICTURE
 = 11308,

101 
	mUI_MAIN_444_16_STILL_PICTURE
 = 12316,

108 
	mUI_HIGHTHROUGHPUT_444
 = 21308,

109 
	mUI_HIGHTHROUGHPUT_444_10
 = 21310,

110 
	mUI_HIGHTHROUGHPUT_444_14
 = 21314,

111 
	mUI_HIGHTHROUGHPUT_444_16_INTRA
 = 22316

122 
	gTAµEncCfg
::
	$TAµEncCfg
()

123 : 
	`m_šputCÞourS·ûCÚv”t
(
IPCOLOURSPACE_UNCHANGED
)

124 , 
	`m_¢rIÁ”ÇlCÞourS·û
(
çl£
)

125 , 
	$m_ouutIÁ”ÇlCÞourS·û
(
çl£
)

126 #ià
EXTENSION_360_VIDEO


127 , 
	$m_ext360
(*
this
)

130 
m_aidQP
 = 
NULL
;

131 
m_¡¬tOfCodedIÁ”v®
 = 
NULL
;

132 
m_codedPivÙV®ue
 = 
NULL
;

133 
m_rg‘PivÙV®ue
 = 
NULL
;

134 
	}
}

136 
	gTAµEncCfg
::~
	$TAµEncCfg
()

138 iàÐ
m_aidQP
 )

140 
d–‘e
[] 
m_aidQP
;

142 iàÐ
m_¡¬tOfCodedIÁ”v®
 )

144 
d–‘e
[] 
m_¡¬tOfCodedIÁ”v®
;

145 
m_¡¬tOfCodedIÁ”v®
 = 
NULL
;

147 iàÐ
m_codedPivÙV®ue
 )

149 
d–‘e
[] 
m_codedPivÙV®ue
;

150 
m_codedPivÙV®ue
 = 
NULL
;

152 iàÐ
m_rg‘PivÙV®ue
 )

154 
d–‘e
[] 
m_rg‘PivÙV®ue
;

155 
m_rg‘PivÙV®ue
 = 
NULL
;

157 
	}
}

159 
Void
 
	gTAµEncCfg
::
	$ü—‹
()

161 
	}
}

163 
Void
 
TAµEncCfg
::
	$de¡roy
()

165 
	}
}

167 
¡d
::
i¡ršg¡»am
 &
Ý”©Ü
>>(¡d::i¡ršg¡»am &
š
, 
	gGOPEÁry
 &
	g’Œy
)

169 
	gš
>>
	g’Œy
.
	gm_¦iûTy³
;

170 
	gš
>>
	g’Œy
.
	gm_POC
;

171 
	gš
>>
	g’Œy
.
	gm_QPOff£t
;

172 
	gš
>>
	g’Œy
.
	gm_QPOff£tMod–Off£t
;

173 
	gš
>>
	g’Œy
.
	gm_QPOff£tMod–SÿË
;

174 
	gš
>>
	g’Œy
.
	gm_CbQPoff£t
;

175 
	gš
>>
	g’Œy
.
	gm_CrQPoff£t
;

176 
	gš
>>
	g’Œy
.
	gm_QPFaùÜ
;

177 
	gš
>>
	g’Œy
.
	gm_tcOff£tDiv2
;

178 
	gš
>>
	g’Œy
.
	gm_b‘aOff£tDiv2
;

179 
	gš
>>
	g’Œy
.
	gm_‹mpÜ®Id
;

180 
	gš
>>
	g’Œy
.
	gm_numRefPicsAùive
;

181 
	gš
>>
	g’Œy
.
	gm_numRefPics
;

182  
IÁ
 
	gi
 = 0; i < 
	g’Œy
.
	gm_numRefPics
; i++ )

184 
	gš
>>
	g’Œy
.
	gm_»ã»nûPics
[
i
];

186 
	gš
>>
	g’Œy
.
	gm_š‹rRPSP»diùiÚ
;

187 ià(
	g’Œy
.
	gm_š‹rRPSP»diùiÚ
==1)

189 
š
>>
’Œy
.
m_d–RPS
;

190 
	gš
>>
	g’Œy
.
	gm_numRefIdc
;

191  
IÁ
 
	gi
 = 0; i < 
	g’Œy
.
	gm_numRefIdc
; i++ )

193 
	gš
>>
	g’Œy
.
	gm_»fIdc
[
i
];

196 ià(
	g’Œy
.
	gm_š‹rRPSP»diùiÚ
==2)

198 
š
>>
’Œy
.
m_d–RPS
;

200  
	gš
;

203 
BoÞ
 
cÚfœmP¬a
(BoÞ 
bæag
, cÚ¡ 
TCh¬
* 
mes§ge
);

205 
šlše
 
ChromaFÜm©
 
	$numb”ToChromaFÜm©
(cÚ¡ 
IÁ
 
v®
)

207 
v®
)

209 400:  
CHROMA_400
; ;

210 420:  
CHROMA_420
; ;

211 422:  
CHROMA_422
; ;

212 444:  
CHROMA_444
; ;

213 :  
NUM_CHROMA_FORMAT
;

215 
	}
}

217 cÚ¡ 
	sM­SŒToProfže


219 cÚ¡ 
TCh¬
* 
	m¡r
;

220 
	mProfže
::
Name
 
v®ue
;

222 
	g¡rToProfže
[] =

224 {"nÚe", 
Profže
::
NONE
 },

225 {"maš", 
Profže
::
MAIN
 },

226 {"maš10", 
Profže
::
MAIN10
 },

227 {"maš-¡žl-piùu»", 
Profže
::
MAINSTILLPICTURE
 },

228 {"maš10-¡žl-piùu»", 
Profže
::
MAIN10
 },

229 {"maš-RExt", 
Profže
::
MAINREXT
 },

230 {"high-throughput-RExt", 
Profže
::
HIGHTHROUGHPUTREXT
 }

233 cÚ¡ 
	sM­SŒToUIProfžeName


235 cÚ¡ 
TCh¬
* 
	m¡r
;

236 
UIProfžeName
 
	mv®ue
;

238 
	g¡rToUIProfžeName
[] =

240 {"nÚe", 
UI_NONE
 },

241 {"maš", 
UI_MAIN
 },

242 {"maš10", 
UI_MAIN10
 },

243 {"maš10_¡žl_piùu»", 
UI_MAIN10_STILL_PICTURE
 },

244 {"maš10-¡žl-piùu»", 
UI_MAIN10_STILL_PICTURE
 },

245 {"maš_¡žl_piùu»", 
UI_MAINSTILLPICTURE
 },

246 {"maš-¡žl-piùu»", 
UI_MAINSTILLPICTURE
 },

247 {"maš_RExt", 
UI_MAINREXT
 },

248 {"maš-RExt", 
UI_MAINREXT
 },

249 {"maš_»xt", 
UI_MAINREXT
 },

250 {"maš-»xt", 
UI_MAINREXT
 },

251 {"high_throughput_RExt", 
UI_HIGHTHROUGHPUTREXT
 },

252 {"high-throughput-RExt", 
UI_HIGHTHROUGHPUTREXT
 },

253 {"high_throughput_»xt", 
UI_HIGHTHROUGHPUTREXT
 },

254 {"high-throughput-»xt", 
UI_HIGHTHROUGHPUTREXT
 },

255 {"mÚochrome", 
UI_MONOCHROME_8
 },

256 {"mÚochrome12", 
UI_MONOCHROME_12
 },

257 {"mÚochrome16", 
UI_MONOCHROME_16
 },

258 {"maš12", 
UI_MAIN_12
 },

259 {"maš_422_10", 
UI_MAIN_422_10
 },

260 {"maš_422_12", 
UI_MAIN_422_12
 },

261 {"maš_444", 
UI_MAIN_444
 },

262 {"maš_444_10", 
UI_MAIN_444_10
 },

263 {"maš_444_12", 
UI_MAIN_444_12
 },

264 {"maš_444_16", 
UI_MAIN_444_16
 },

265 {"maš_šŒa", 
UI_MAIN_INTRA
 },

266 {"maš_10_šŒa", 
UI_MAIN_10_INTRA
 },

267 {"maš_12_šŒa", 
UI_MAIN_12_INTRA
 },

268 {"maš_422_10_šŒa", 
UI_MAIN_422_10_INTRA
},

269 {"maš_422_12_šŒa", 
UI_MAIN_422_12_INTRA
},

270 {"maš_444_šŒa", 
UI_MAIN_444_INTRA
 },

271 {"maš_444_¡žl_piùu»", 
UI_MAIN_444_STILL_PICTURE
 },

272 {"maš_444_10_šŒa", 
UI_MAIN_444_10_INTRA
},

273 {"maš_444_12_šŒa", 
UI_MAIN_444_12_INTRA
},

274 {"maš_444_16_šŒa", 
UI_MAIN_444_16_INTRA
},

275 {"maš_444_16_¡žl_piùu»", 
UI_MAIN_444_16_STILL_PICTURE
 },

276 {"high_throughput_444", 
UI_HIGHTHROUGHPUT_444
 },

277 {"high_throughput_444_10", 
UI_HIGHTHROUGHPUT_444_10
 },

278 {"high_throughput_444_14", 
UI_HIGHTHROUGHPUT_444_14
 },

279 {"high_throughput_444_16_šŒa", 
UI_HIGHTHROUGHPUT_444_16_INTRA
 }

282 cÚ¡ 
UIProfžeName
 
	gv®idRExtHighThroughPutProfžeNames
[2 ][4 ]=

284 { 
UI_HIGHTHROUGHPUT_444
, 
UI_HIGHTHROUGHPUT_444_10
, 
UI_HIGHTHROUGHPUT_444_14
, 
UI_NONE
 },

285 { 
UI_NONE
, UI_NONE, UI_NONE, 
UI_HIGHTHROUGHPUT_444_16_INTRA
 }

288 cÚ¡ 
UIProfžeName
 
	gv®idRExtProfžeNames
[2 ][4 ][4 ]=

291 { 
UI_MONOCHROME_8
, 
UI_NONE
, UI_NONE, 
UI_MAIN_444
 },

292 { 
UI_NONE
, UI_NONE, 
UI_MAIN_422_10
, 
UI_MAIN_444_10
 },

293 { 
UI_MONOCHROME_12
, 
UI_MAIN_12
, 
UI_MAIN_422_12
, 
UI_MAIN_444_12
 },

294 { 
UI_MONOCHROME_16
, 
UI_NONE
, UI_NONE, 
UI_MAIN_444_16
 }

297 { 
UI_NONE
, 
UI_MAIN_INTRA
, UI_NONE, 
UI_MAIN_444_INTRA
 },

298 { 
UI_NONE
, 
UI_MAIN_10_INTRA
, 
UI_MAIN_422_10_INTRA
, 
UI_MAIN_444_10_INTRA
 },

299 { 
UI_NONE
, 
UI_MAIN_12_INTRA
, 
UI_MAIN_422_12_INTRA
, 
UI_MAIN_444_12_INTRA
 },

300 { 
UI_NONE
, UI_NONE, UI_NONE, 
UI_MAIN_444_16_INTRA
 }

304 cÚ¡ 
	sM­SŒToT›r


306 cÚ¡ 
TCh¬
* 
	m¡r
;

307 
	mLev–
::
T›r
 
v®ue
;

309 
	g¡rToT›r
[] =

311 {"maš", 
Lev–
::
MAIN
},

312 {"high", 
Lev–
::
HIGH
},

315 cÚ¡ 
	sM­SŒToLev–


317 cÚ¡ 
TCh¬
* 
	m¡r
;

318 
	mLev–
::
Name
 
v®ue
;

320 
	g¡rToLev–
[] =

322 {"nÚe",
Lev–
::
NONE
},

323 {"1", 
Lev–
::
LEVEL1
},

324 {"2", 
Lev–
::
LEVEL2
},

325 {"2.1", 
Lev–
::
LEVEL2_1
},

326 {"3", 
Lev–
::
LEVEL3
},

327 {"3.1", 
Lev–
::
LEVEL3_1
},

328 {"4", 
Lev–
::
LEVEL4
},

329 {"4.1", 
Lev–
::
LEVEL4_1
},

330 {"5", 
Lev–
::
LEVEL5
},

331 {"5.1", 
Lev–
::
LEVEL5_1
},

332 {"5.2", 
Lev–
::
LEVEL5_2
},

333 {"6", 
Lev–
::
LEVEL6
},

334 {"6.1", 
Lev–
::
LEVEL6_1
},

335 {"6.2", 
Lev–
::
LEVEL6_2
},

336 {"8.5", 
Lev–
::
LEVEL8_5
},

339 #ià!
DPB_ENCODER_USAGE_CHECK


340 
UIÁ
 
	gg_uiMaxCpbSize
[2][21] =

348 cÚ¡ 
	sM­SŒToCo¡Mode


350 cÚ¡ 
TCh¬
* 
	m¡r
;

351 
Co¡Mode
 
	mv®ue
;

353 
	g¡rToCo¡Mode
[] =

355 {"lossy", 
COST_STANDARD_LOSSY
},

356 {"£qu’û_Ëv–_los¦ess", 
COST_SEQUENCE_LEVEL_LOSSLESS
},

357 {"los¦ess", 
COST_LOSSLESS_CODING
},

358 {"mixed_los¦ess_lossy", 
COST_MIXED_LOSSLESS_LOSSY_CODING
}

361 cÚ¡ 
	sM­SŒToSÿlšgLi¡Mode


363 cÚ¡ 
TCh¬
* 
	m¡r
;

364 
SÿlšgLi¡Mode
 
	mv®ue
;

366 
	g¡rToSÿlšgLi¡Mode
[] =

368 {"0", 
SCALING_LIST_OFF
},

369 {"1", 
SCALING_LIST_DEFAULT
},

370 {"2", 
SCALING_LIST_FILE_READ
},

371 {"off", 
SCALING_LIST_OFF
},

372 {"deçuÉ", 
SCALING_LIST_DEFAULT
},

373 {"fže", 
SCALING_LIST_FILE_READ
}

376 
	g‹m¶©e
<
ty³Çme
 
	gT
,y³Çm
	gP
>

377 
	g¡d
::
¡ršg
 
	$’umToSŒšg
(
P
 
m­
[], 
UIÁ
 
m­L’
, cÚ¡ 
T
 
v®
)

379 
UIÁ
 
i
 = 0; i < 
m­L’
; i++)

381 ià(
v®
 =ð
m­
[
i
].
v®ue
)

383  
m­
[
i
].
¡r
;

386  
¡d
::
	`¡ršg
();

387 
	}
}

389 
	g‹m¶©e
<
ty³Çme
 
	gT
,y³Çm
	gP
>

390 
	gi¡»am
& 
	$»adSŒToEnum
(
P
 
m­
[], 
UIÁ
 
m­L’
, 
i¡»am
 &
š
, 
T
 &
v®
)

392 
¡ršg
 
¡r
;

393 
š
 >> 
¡r
;

395 
UIÁ
 
i
=0;

396 ; 
i
 < 
m­L’
 && 
¡r
!=
m­
[i].str; i++);

398 ià(
i
 < 
m­L’
)

400 
v®
 = 
m­
[
i
].
v®ue
;

404 
š
.
	`£t¡©e
(
ios
::
çžb™
);

406  
š
;

407 
	}
}

411 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (i¡»am &
	gš
, 
	gUIProfžeName
 &
	g´ofže
)

413  
»adSŒToEnum
(
¡rToUIProfžeName
, (¡rToUIProfžeName)/(*¡rToUIProfžeName), 
š
, 
´ofže
);

416 
Çme¥aû
 
	gLev–


418 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (i¡»am &
	gš
, 
	gT›r
 &
	gt›r
)

420  
»adSŒToEnum
(
¡rToT›r
, (¡rToT›r)/(*¡rToT›r), 
š
, 
t›r
);

423 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (i¡»am &
	gš
, 
	gName
 &
	gËv–
)

425  
»adSŒToEnum
(
¡rToLev–
, (¡rToLev–)/(*¡rToLev–), 
š
, 
Ëv–
);

429 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (i¡»am &
	gš
, 
	gCo¡Mode
 &
	gmode
)

431  
»adSŒToEnum
(
¡rToCo¡Mode
, (¡rToCo¡Mode)/(*¡rToCo¡Mode), 
š
, 
mode
);

434 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (i¡»am &
	gš
, 
	gSÿlšgLi¡Mode
 &
	gmode
)

436  
»adSŒToEnum
(
¡rToSÿlšgLi¡Mode
, (¡rToSÿlšgLi¡Mode)/(*¡rToSÿlšgLi¡Mode), 
š
, 
mode
);

439 
	g‹m¶©e
 <
þass
 
	gT
>

440 
	sSMuÉiV®ueIÅut


442 cÚ¡ 
T
 
	mmšV®Inþ
;

443 cÚ¡ 
T
 
	mmaxV®Inþ
;

444 cÚ¡ 
	m¡d
::
size_t
 
mšNumV®uesInþ
;

445 cÚ¡ 
	m¡d
::
size_t
 
maxNumV®uesInþ
;

446 
	m¡d
::
veùÜ
<
T
> 
v®ues
;

447 
SMuÉiV®ueIÅut
(è: 
mšV®Inþ
(0), 
maxV®Inþ
(0), 
mšNumV®uesInþ
(0), 
maxNumV®uesInþ
(0), 
v®ues
() { }

448 
SMuÉiV®ueIÅut
(
¡d
::
veùÜ
<
T
> &
deçuÉs
è: 
mšV®Inþ
(0), 
maxV®Inþ
(0), 
mšNumV®uesInþ
(0), 
maxNumV®uesInþ
(0), 
v®ues
(defaults) { }

449 
SMuÉiV®ueIÅut
(cÚ¡ 
T
 &
mšV®ue
, cÚ¡ T &
maxV®ue
, 
¡d
::
size_t
 
mšNumb”V®ues
=0, std::size_ˆ
maxNumb”V®ues
=0)

450 : 
mšV®Inþ
(
mšV®ue
), 
maxV®Inþ
(
maxV®ue
), 
mšNumV®uesInþ
(
mšNumb”V®ues
), 
maxNumV®uesInþ
(
maxNumb”V®ues
), 
v®ues
() { }

451 
SMuÉiV®ueIÅut
(cÚ¡ 
T
 &
mšV®ue
, cÚ¡ T &
maxV®ue
, 
¡d
::
size_t
 
mšNumb”V®ues
, std::size_ˆ
maxNumb”V®ues
, cÚ¡ T* 
defV®ues
, cÚ¡ 
UIÁ
 
numDefV®ues
)

452 : 
mšV®Inþ
(
mšV®ue
), 
maxV®Inþ
(
maxV®ue
), 
mšNumV®uesInþ
(
mšNumb”V®ues
), 
maxNumV®uesInþ
(
maxNumb”V®ues
), 
v®ues
(
defV®ues
, defV®ues+
numDefV®ues
) { }

453 
	mSMuÉiV®ueIÅut
<
	mT
> &
	mÝ”©Ü
=(cÚ¡ 
¡d
::
veùÜ
<
T
> &
u£rV®ues
è{ 
v®ues
=u£rV®ues;  *
	mthis
; }

454 
	mSMuÉiV®ueIÅut
<
	mT
> &
	mÝ”©Ü
=(cÚ¡ 
SMuÉiV®ueIÅut
<
T
> &
u£rV®ues
è{ 
v®ues
=u£rV®ues.v®ues;  *
	mthis
; }

456 
T
 
»adV®ue
(cÚ¡ 
TCh¬
 *&
pSŒ
, 
BoÞ
 &
bSucûss
);

458 
	mi¡»am
& 
»adV®ues
(
¡d
::
i¡»am
 &
š
);

461 
	g‹m¶©e
 <
þass
 
	gT
>

462 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (
	g¡d
::
i¡»am
 &
š
, 
	gSMuÉiV®ueIÅut
<
	gT
> &
	gv®ues
)

464  
	gv®ues
.
»adV®ues
(
š
);

467 
	g‹m¶©e
<>

468 
UIÁ
 
	gSMuÉiV®ueIÅut
<
	gUIÁ
>::
	$»adV®ue
(cÚ¡ 
TCh¬
 *&
pSŒ
, 
BoÞ
 &
bSucûss
)

470 
TCh¬
 *
•Œ
;

471 
UIÁ
 
v®
=
	`¡¹oul
(
pSŒ
, &
•Œ
, 0);

472 
pSŒ
=
•Œ
;

473 
bSucûss
=!(*
•Œ
!=0 && !
	`is¥aû
(*•Œè&& *•Œ!=','è&& !(
v®
<
mšV®Inþ
 || v®>
maxV®Inþ
);

474  
v®
;

475 
	}
}

477 
	g‹m¶©e
<>

478 
IÁ
 
	gSMuÉiV®ueIÅut
<
	gIÁ
>::
	$»adV®ue
(cÚ¡ 
TCh¬
 *&
pSŒ
, 
BoÞ
 &
bSucûss
)

480 
TCh¬
 *
•Œ
;

481 
IÁ
 
v®
=
	`¡¹Þ
(
pSŒ
, &
•Œ
, 0);

482 
pSŒ
=
•Œ
;

483 
bSucûss
=!(*
•Œ
!=0 && !
	`is¥aû
(*•Œè&& *•Œ!=','è&& !(
v®
<
mšV®Inþ
 || v®>
maxV®Inþ
);

484  
v®
;

485 
	}
}

487 
	g‹m¶©e
<>

488 
DoubË
 
	gSMuÉiV®ueIÅut
<
	gDoubË
>::
	$»adV®ue
(cÚ¡ 
TCh¬
 *&
pSŒ
, 
BoÞ
 &
bSucûss
)

490 
TCh¬
 *
•Œ
;

491 
DoubË
 
v®
=
	`¡¹od
(
pSŒ
, &
•Œ
);

492 
pSŒ
=
•Œ
;

493 
bSucûss
=!(*
•Œ
!=0 && !
	`is¥aû
(*•Œè&& *•Œ!=','è&& !(
v®
<
mšV®Inþ
 || v®>
maxV®Inþ
);

494  
v®
;

495 
	}
}

497 
	g‹m¶©e
<>

498 
BoÞ
 
	gSMuÉiV®ueIÅut
<
	gBoÞ
>::
	$»adV®ue
(cÚ¡ 
TCh¬
 *&
pSŒ
, 
BoÞ
 &
bSucûss
)

500 
TCh¬
 *
•Œ
;

501 
IÁ
 
v®
=
	`¡¹Þ
(
pSŒ
, &
•Œ
, 0);

502 
pSŒ
=
•Œ
;

503 
bSucûss
=!(*
•Œ
!=0 && !
	`is¥aû
(*•Œè&& *•Œ!=','è&& !(
v®
<
	`IÁ
(
mšV®Inþ
è|| v®>IÁ(
maxV®Inþ
));

504  
v®
!=0;

505 
	}
}

507 
	g‹m¶©e
 <
þass
 
	gT
>

508 
	gi¡»am
& 
	gSMuÉiV®ueIÅut
<
	gT
>::
	$»adV®ues
(
¡d
::
i¡»am
 &
š
)

510 
v®ues
.
	`þ—r
();

511 
¡ršg
 
¡r
;

512 !
š
.
	`eof
())

514 
¡ršg
 
tmp
; 
š
 >>mp; 
¡r
+=" " +mp;

516 ià(!
¡r
.
	`em±y
())

518 cÚ¡ 
TCh¬
 *
pSŒ
=
¡r
.
	`c_¡r
();

520 ;
	`is¥aû
(*
pSŒ
);pStr++);

522 *
pSŒ
 != 0)

524 
BoÞ
 
bSucûss
=
Œue
;

525 
T
 
v®
=
	`»adV®ue
(
pSŒ
, 
bSucûss
);

526 ià(!
bSucûss
)

528 
š
.
	`£t¡©e
(
ios
::
çžb™
);

532 ià(
maxNumV®uesInþ
 !ð0 && 
v®ues
.
	`size
() >= maxNumValuesIncl)

534 
š
.
	`£t¡©e
(
ios
::
çžb™
);

537 
v®ues
.
	`push_back
(
v®
);

539 ;
	`is¥aû
(*
pSŒ
);pStr++);

540 ià(*
pSŒ
 == ',')

542 
pSŒ
++;

544 ;
	`is¥aû
(*
pSŒ
);pStr++);

547 ià(
v®ues
.
	`size
(è< 
mšNumV®uesInþ
)

549 
š
.
	`£t¡©e
(
ios
::
çžb™
);

551  
š
;

552 
	}
}

554 
	g‹m¶©e
 <
þass
 
	gT
>

555 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (
	g¡d
::
i¡»am
 &
š
, 
	gTAµEncCfg
::
O±iÚ®V®ue
<
T
> &
v®ue
)

557 
š
 >> 
¡d
::
ws
;

558 ià(
	gš
.
eof
())

560 
	gv®ue
.
	gbP»£Á
=
çl£
;

564 
	gš
 >> 
	gv®ue
.value;

565 
	gv®ue
.
	gbP»£Á
=
Œue
;

567  
	gš
;

570 
	g‹m¶©e
 <
þass
 
	gT1
, cÏs 
	gT2
>

571 
šlše
 
	gi¡»am
& 
	gÝ”©Ü
 >> (
	g¡d
::
i¡»am
 &
š
, std::
m­
<
T1
, 
	gT2
> &
	gm­
)

573 
T1
 
	gkey
;

574 
T2
 
	gv®ue
;

575 
	gŒy


577 
	gš
 >> 
	gkey
;

578 
	gš
 >> 
	gv®ue
;

580 
ÿtch
 (...)

582 
	gš
.
£t¡©e
(
ios
::
çžb™
);

585 
	gm­
[
key
] = 
v®ue
;

586  
	gš
;

589 
Void


590 
	$autom©iÿÎyS–eùRExtProfže
(cÚ¡ 
BoÞ
 
bUsšgG’”®RExtToÞs
,

591 cÚ¡ 
BoÞ
 
bUsšgChromaQPAdju¡m’t
,

592 cÚ¡ 
BoÞ
 
bUsšgEx‹ndedP»cisiÚ
,

593 cÚ¡ 
BoÞ
 
bIÁ¿CÚ¡¿štFÏg
,

594 
UIÁ
 &
b™D•thCÚ¡¿št
,

595 
ChromaFÜm©
 &
chromaFÜm©CÚ¡¿št
,

596 cÚ¡ 
IÁ
 
maxB™D•th
,

597 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©
)

600 
UIÁ
 
ŒŸlB™D•thCÚ¡¿št
=
maxB™D•th
;

601 ià(
ŒŸlB™D•thCÚ¡¿št
<8)

603 
ŒŸlB™D•thCÚ¡¿št
=8;

605 ià(
ŒŸlB™D•thCÚ¡¿št
==9 ||rialBitDepthConstraint==11)

607 
ŒŸlB™D•thCÚ¡¿št
++;

609 ià(
ŒŸlB™D•thCÚ¡¿št
>12)

611 
ŒŸlB™D•thCÚ¡¿št
=16;

615 ià(
bUsšgEx‹ndedP»cisiÚ
 || 
ŒŸlB™D•thCÚ¡¿št
==16)

617 
b™D•thCÚ¡¿št
 = 16;

618 
chromaFÜm©CÚ¡¿št
 = (!
bIÁ¿CÚ¡¿štFÏg
 && 
chromaFÜm©
==
CHROMA_400
è? CHROMA_400 : 
CHROMA_444
;

620 ià(
bUsšgG’”®RExtToÞs
)

622 ià(
chromaFÜm©
 =ð
CHROMA_400
 && !
bIÁ¿CÚ¡¿štFÏg
)

624 
b™D•thCÚ¡¿št
 = 16;

625 
chromaFÜm©CÚ¡¿št
 = 
CHROMA_400
;

629 
b™D•thCÚ¡¿št
 = 
ŒŸlB™D•thCÚ¡¿št
;

630 
chromaFÜm©CÚ¡¿št
 = 
CHROMA_444
;

633 ià(
chromaFÜm©
 =ð
CHROMA_400
)

635 ià(
bIÁ¿CÚ¡¿štFÏg
)

637 
chromaFÜm©CÚ¡¿št
 = 
CHROMA_420
;

638 
b™D•thCÚ¡¿št
 = 
ŒŸlB™D•thCÚ¡¿št
;

642 
chromaFÜm©CÚ¡¿št
 = 
CHROMA_400
;

643 
b™D•thCÚ¡¿št
 = 
ŒŸlB™D•thCÚ¡¿št
 == 8 ? 8 : 12;

648 
b™D•thCÚ¡¿št
 = 
ŒŸlB™D•thCÚ¡¿št
;

649 
chromaFÜm©CÚ¡¿št
 = 
chromaFÜm©
;

650 ià(
bUsšgChromaQPAdju¡m’t
 && 
chromaFÜm©
 =ð
CHROMA_420
)

652 
chromaFÜm©CÚ¡¿št
 = 
CHROMA_422
;

654 ià(
chromaFÜm©CÚ¡¿št
 =ð
CHROMA_422
 && 
b™D•thCÚ¡¿št
 == 8)

656 
b™D•thCÚ¡¿št
 = 10;

658 ià(
chromaFÜm©CÚ¡¿št
 =ð
CHROMA_420
 && !
bIÁ¿CÚ¡¿štFÏg
)

660 
b™D•thCÚ¡¿št
 = 12;

663 
	}
}

672 
BoÞ
 
	gTAµEncCfg
::
	$·r£Cfg
Ð
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] )

674 
BoÞ
 
do_h–p
 = 
çl£
;

676 
IÁ
 
tmpChromaFÜm©
;

677 
IÁ
 
tmpIÅutChromaFÜm©
;

678 
IÁ
 
tmpCÚ¡¿štChromaFÜm©
;

679 
IÁ
 
tmpWeigh‹dP»diùiÚM‘hod
;

680 
IÁ
 
tmpFa¡IÁ”S—rchMode
;

681 
IÁ
 
tmpMÙiÚE¡im©iÚS—rchM‘hod
;

682 
IÁ
 
tmpSliûMode
;

683 
IÁ
 
tmpSliûSegm’tMode
;

684 
IÁ
 
tmpDecodedPiùu»HashSEIM­³dTy³
;

685 
¡ršg
 
šputCÞourS·ûCÚv”t
;

686 
¡ršg
 
šputP©hP»fix
;

687 
UIProfžeName
 
UIProfže
;

688 
IÁ
 
§oOff£tB™Shiá
[
MAX_NUM_CHANNEL_TYPE
];

691 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_CÞumnWidth
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::numeric_limits<UInt>::max());

692 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_RowHeight
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::numeric_limits<UInt>::max());

693 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_¡¬tOfCodedIÁ”v®
 (
¡d
::
num”ic_lim™s
<IÁ>::
	`mš
(), std::num”ic_lim™s<IÁ>::
	`max
(), 0, 1<<16);

694 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_codedPivÙV®ue
 (
¡d
::
num”ic_lim™s
<IÁ>::
	`mš
(), std::num”ic_lim™s<IÁ>::
	`max
(), 0, 1<<16);

695 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_rg‘PivÙV®ue
 (
¡d
::
num”ic_lim™s
<IÁ>::
	`mš
(), std::num”ic_lim™s<IÁ>::
	`max
(), 0, 1<<16);

697 
SMuÉiV®ueIÅut
<
DoubË
> 
	`cfg_adIÁ¿LambdaModif›r
 (0, 
¡d
::
num”ic_lim™s
<DoubË>::
	`max
(), 0, 
MAX_TLAYER
);

699 cÚ¡ 
IÁ
 
deçuÉLumaLev–TodQp_QpChªgePošts
[] = {-3, -2, -1, 0, 1, 2, 3, 4, 5, 6};

700 cÚ¡ 
IÁ
 
deçuÉLumaLev–TodQp_LumaChªgePošts
[] = { 0, 301, 367, 434, 501, 567, 634, 701, 767, 834};

701 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_lumaLev–toDQPM­pšgQP
 (-
MAX_QP
, MAX_QP, 0, 
LUMA_LEVEL_TO_DQP_LUT_MAXSIZE
, 
deçuÉLumaLev–TodQp_QpChªgePošts
, (defaultLumaLevelTodQp_QpChangePoints )/(Int));

702 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_lumaLev–toDQPM­pšgLuma
 (0, 
¡d
::
num”ic_lim™s
<IÁ>::
	`max
(), 0, 
LUMA_LEVEL_TO_DQP_LUT_MAXSIZE
, 
deçuÉLumaLev–TodQp_LumaChªgePošts
, (defaultLumaLevelTodQp_LumaChangePoints)/(Int));

703 
UIÁ
 
lumaLev–ToD–QPMode
;

705 cÚ¡ 
UIÁ
 
deçuÉIÅutKÃeCodes
[3] = { 600, 800, 900 };

706 cÚ¡ 
UIÁ
 
deçuÉOuutKÃeCodes
[3] = { 100, 250, 450 };

707 
IÁ
 
cfg_kÃeSEINumKÃePoštsMšus1
=0;

708 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_kÃeSEIIÅutKÃePoštV®ue
 (1, 999, 0, 999, 
deçuÉIÅutKÃeCodes
, (defaultInputKneeCodes )/(UInt));

709 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_kÃeSEIOuutKÃePoštV®ue
 (0, 1000, 0, 999, 
deçuÉOuutKÃeCodes
, (defaultOutputKneeCodes)/(UInt));

710 cÚ¡ 
IÁ
 
deçuÉPrim¬yCodes
[6] = { 0,50000, 0,0, 50000,0 };

711 cÚ¡ 
IÁ
 
deçuÉWh™ePoštCode
[2] = { 16667, 16667 };

712 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_Di¥ÏyPrim¬›sCode
 (0, 50000, 6, 6, 
deçuÉPrim¬yCodes
, (defaultPrimaryCodes )/(Int));

713 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_Di¥ÏyWh™ePoštCode
 (0, 50000, 2, 2, 
deçuÉWh™ePoštCode
, (defaultWhitePointCode)/(Int));

715 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiTimeSmpFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

716 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiNumUn™F›ldBa£dFÏg
(0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

717 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiCouÁšgTy³
 (0, 6, 0, 
MAX_TIMECODE_SEI_SETS
);

718 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiFuÎTimeSmpFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

719 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiDiscÚtšu™yFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

720 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiCÁDrÝ³dFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

721 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiNumb”OfF¿mes
 (0,511, 0, 
MAX_TIMECODE_SEI_SETS
);

722 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiSecÚdsV®ue
 (0, 59, 0, 
MAX_TIMECODE_SEI_SETS
);

723 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiMšu‹sV®ue
 (0, 59, 0, 
MAX_TIMECODE_SEI_SETS
);

724 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiHoursV®ue
 (0, 23, 0, 
MAX_TIMECODE_SEI_SETS
);

725 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiSecÚdsFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

726 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiMšu‹sFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

727 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_timeCodeSeiHoursFÏg
 (0, 1, 0, 
MAX_TIMECODE_SEI_SETS
);

728 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiTimeOff£tL’gth
 (0, 31, 0, 
MAX_TIMECODE_SEI_SETS
);

729 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_timeCodeSeiTimeOff£tV®ue
 (
¡d
::
num”ic_lim™s
<IÁ>::
	`mš
(), std::num”ic_lim™s<IÁ>::
	`max
(), 0, 
MAX_TIMECODE_SEI_SETS
);

730 #ià
FGS_RDD5_ENABLE


732 
SMuÉiV®ueIÅut
<
UIÁ
> 
cfg_FgcSEIIÁ’s™yIÁ”v®Low”BoundComp
[3]={SMultiValueInput<UInt> (0, 255, 0, 256), SMultiValueInput<UInt> (0, 255, 0, 256), SMultiValueInput<UInt> (0, 255, 0, 256)};

733 
SMuÉiV®ueIÅut
<
UIÁ
> 
cfg_FgcSEIIÁ’s™yIÁ”v®Uµ”BoundComp
[3]={SMultiValueInput<UInt> (0, 255, 0, 256), SMultiValueInput<UInt> (0, 255, 0, 256), SMultiValueInput<UInt> (0, 255, 0, 256)};

734 
SMuÉiV®ueIÅut
<
UIÁ
> 
cfg_FgcSEICompMod–V®ueComp
[3]={SMultiValueInput<UInt> (0, 65535, 0, 256 * 6), SMultiValueInput<UInt> (0, 65535, 0, 256 * 6), SMultiValueInput<UInt> (0, 65535, 0, 256 * 6)};

736 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_omniV›wpÜtSEIAzimuthC’Œe
 (-11796480, 11796479, 0, 15);

737 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_omniV›wpÜtSEIEËv©iÚC’Œe
 ( -5898240, 5898240, 0, 15);

738 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_omniV›wpÜtSEITžtC’Œe
 (-11796480, 11796479, 0, 15);

739 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_omniV›wpÜtSEIHÜRªge
 ( 1, 23592960, 0, 15);

740 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_omniV›wpÜtSEIV”Rªge
 ( 1, 11796480, 0, 15);

741 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpT¿nsfÜmTy³
 (0, 7, 0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
());

742 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_rwpSEIRwpGu¬dBªdFÏg
 (0, 1, 0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
());

743 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIProjRegiÚWidth
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

744 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIProjRegiÚHeight
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

745 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpSEIProjRegiÚTÝ
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

746 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIProjRegiÚLeá
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

747 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIPackedRegiÚWidth
 (0, 
¡d
::
num”ic_lim™s
<
UShÜt
>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

748 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIPackedRegiÚHeight
 (0, 
¡d
::
num”ic_lim™s
<
UShÜt
>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

749 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIPackedRegiÚTÝ
 (0, 
¡d
::
num”ic_lim™s
<
UShÜt
>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

750 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIPackedRegiÚLeá
 (0, 
¡d
::
num”ic_lim™s
<
UShÜt
>::
	`max
(), 0, std::num”ic_lim™s<
UCh¬
>::max());

751 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpLeáGu¬dBªdWidth
 (0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
(), 0, std::numeric_limits<UChar>::max());

752 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpRightGu¬dBªdWidth
 (0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
(), 0, std::numeric_limits<UChar>::max());

753 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpTÝGu¬dBªdHeight
 (0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
(), 0, std::numeric_limits<UChar>::max());

754 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpBÙtomGu¬dBªdHeight
 (0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
(), 0, std::numeric_limits<UChar>::max());

755 
SMuÉiV®ueIÅut
<
BoÞ
> 
	`cfg_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
 (0, 1, 0, 
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
());

756 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_rwpSEIRwpGu¬dBªdTy³
 (0, 7, 0, 4*
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
());

757 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeX
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

758 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeY
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

759 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeReùRegiÚTÝ
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

760 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeReùRegiÚLeá
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

761 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeReùRegiÚWidth
 (1, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

762 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeReùRegiÚHeight
 (1, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

763 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCœcuÏrRegiÚRadius
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

764 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeSûÃRadius
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

765 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeAzimuth
 (-180*65536, 180*65536-1, 0, 4);

766 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeEËv©iÚ
 ( -90*65536, 90*65536 , 0, 4);

767 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeTžt
 (-180*65536, 180*65536-1, 0, 4);

768 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeOff£tX
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

769 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeOff£tY
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

770 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeCam”aC’ŒeOff£tZ
 (0, 
¡d
::
num”ic_lim™s
<UIÁ>::
	`max
(), 0, 4);

771 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeF›ldOfV›w
 (0, 360*65536, 0, 4);

772 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_fviSEIFisheyeNumPÞynomŸlCÛffs
 (0, 8, 0, 4);

773 
SMuÉiV®ueIÅut
<
IÁ
> 
	`cfg_fviSEIFisheyePÞynomŸlCÛff
 (
¡d
::
num”ic_lim™s
<IÁ>::
	`mš
(), std::num”ic_lim™s<IÁ>::
	`max
(), 0, 4*8);

774 
UIÁ
 
cfg_fviSEIFisheyeNumAùiveA»asMšus1
=0;

775 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


776 
SMuÉiV®ueIÅut
<
UIÁ
> 
	`cfg_siiSEIIÅutNumUn™sInSI
 (0, 
MAX_UINT
, 0, 7);

778 
IÁ
 
w¬nUnknowP¬am‘”
 = 0;

779 
po
::
O±iÚs
 
Ýts
;

780 
Ýts
.
	`addO±iÚs
()

781 ("h–p", 
do_h–p
, 
çl£
, "this helpext")

782 ("c", 
po
::
·r£CÚfigFže
, "configuration file‚ame")

783 ("W¬nUnknowP¬am‘”,w", 
w¬nUnknowP¬am‘”
, 0, "warn for unknown configuration…arameters instead of failing")

786 ("IÅutFže,i", 
m_šputFžeName
, 
	`¡ršg
(""), "Original YUV input file‚ame")

787 ("IÅutP©hP»fix,-p", 
šputP©hP»fix
, 
	`¡ršg
(""), "pathnameo…rependo input filename")

788 ("B™¡»amFže,b", 
m_b™¡»amFžeName
, 
	`¡ršg
(""), "Bitstream output file‚ame")

789 ("RecÚFže,o", 
m_»cÚFžeName
, 
	`¡ršg
(""), "Reconstructed YUV output file‚ame")

790 ("SourûWidth,-wdt", 
m_iSourûWidth
, 0, "Source…icture width")

791 ("SourûHeight,-hgt", 
m_iSourûHeight
, 0, "Source…icture height")

792 ("IÅutB™D•th", 
m_šputB™D•th
[
CHANNEL_TYPE_LUMA
], 8, "Bit-depth of input file")

793 ("OuutB™D•th", 
m_ouutB™D•th
[
CHANNEL_TYPE_LUMA
], 0, "Bit-depth of output file (default:InternalBitDepth)")

794 ("MSBEx‹ndedB™D•th", 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
], 0, "bit depth of†uma component‡fter‡ddition of MSBs of value 0 (used for synthesising High Dynamic Range source material). (default:InputBitDepth)")

795 ("IÁ”ÇlB™D•th", 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
], 0, "Bit-depthhe codec operates‡t. (default:MSBExtendedBitDepth). If differento MSBExtendedBitDepth, source data will be converted")

796 ("IÅutB™D•thC", 
m_šputB™D•th
[
CHANNEL_TYPE_CHROMA
], 0, "As…er InputBitDepth but for chroma component. (default:InputBitDepth)")

797 ("OuutB™D•thC", 
m_ouutB™D•th
[
CHANNEL_TYPE_CHROMA
], 0, "As…er OutputBitDepth but for chroma component. (default:InternalBitDepthC)")

798 ("MSBEx‹ndedB™D•thC", 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_CHROMA
], 0, "As…er MSBExtendedBitDepth but for chroma component. (default:MSBExtendedBitDepth)")

799 ("IÁ”ÇlB™D•thC", 
m_š‹º®B™D•th
[
CHANNEL_TYPE_CHROMA
], 0, "As…er InternalBitDepth but for chroma component. (default:InternalBitDepth)")

800 ("Ex‹ndedP»cisiÚ", 
m_ex‹ndedP»cisiÚProûssšgFÏg
, 
çl£
, "Increased internal‡ccuracieso support high bit depths (not valid in V1…rofiles)")

801 ("HighP»cisiÚP»diùiÚWeightšg", 
m_highP»cisiÚOff£tsEÇbËdFÏg
, 
çl£
, "Use high…recision option for weighted…rediction (not valid in V1…rofiles)")

802 ("IÅutCÞourS·ûCÚv”t", 
šputCÞourS·ûCÚv”t
, 
	`¡ršg
(""), "CÞou¸¥aû cÚv”siÚØ­¶yØšpuˆvideo. P”m™‹d v®ue ¬Óm±y sŒšg=UNCHANGEDè" + 
	`g‘Li¡OfCÞourS·ûCÚv”ts
(
Œue
))

803 ("SNRIÁ”ÇlCÞourS·û", 
m_¢rIÁ”ÇlCÞourS·û
, 
çl£
, "Ifrue,hen‚o colour space conversion is‡pplied…rioro SNR, otherwise inverse of input is‡pplied.")

804 ("OuutIÁ”ÇlCÞourS·û", 
m_ouutIÁ”ÇlCÞourS·û
, 
çl£
, "Ifrue,hen‚o colour space conversion is‡pplied for„econstructed video, otherwise inverse of input is‡pplied.")

805 ("IÅutChromaFÜm©", 
tmpIÅutChromaFÜm©
, 420, "InputChromaFormatIDC")

806 ("MSEBa£dSequ’ûPSNR", 
m_´štMSEBa£dSequ’ûPSNR
, 
çl£
, "0 (default)ƒmit sequence PSNR only‡s‡†inear‡verage ofhe frame PSNRs, 1 =‡lsoƒmit‡ sequence PSNR based on‡n‡verage ofhe frame MSEs")

807 ("PrštHexPSNR", 
m_´štHexP¢r
, 
çl£
, "0 (default) don'tƒmit hexadecimal PSNR forƒach frame, 1 =‡lsoƒmit hexadecimal PSNR values")

808 ("PrštF¿meMSE", 
m_´štF¿meMSE
, 
çl£
, "0 (default)ƒmit only bit count‡nd PSNRs forƒach frame, 1 =‡lsoƒmit MSE values")

809 ("PrštSequ’ûMSE", 
m_´štSequ’ûMSE
, 
çl£
, "0 (default)ƒmit only bit„ate‡nd PSNRs forhe whole sequence, 1 =‡lsoƒmit MSE values")

810 ("PrštMSSSIM", 
m_´štMSSSIM
, 
çl£
, "0 (default) do‚ot…rint MS-SSIM scores, 1 =…rint MS-SSIM scores forƒach frame‡nd forhe whole sequence")

811 ("xPSNREÇbËFÏg,-xPS", 
m_bXPSNREÇbËFÏg
, 
çl£
, "Cross-Component xPSNR computation")

812 ("xPSNRYWeight,-xPS0", 
m_dXPSNRWeight
[
COMPONENT_Y
], ( 
DoubË
 )1.0, "xPSNR weighting factor for Y (default: 1.0)")

813 ("xPSNRCbWeight,-xPS1", 
m_dXPSNRWeight
[
COMPONENT_Cb
], ( 
DoubË
 )1.0, "xPSNR weighting factor for Cb (default: 1.0)")

814 ("xPSNRCrWeight,-xPS2", 
m_dXPSNRWeight
[
COMPONENT_Cr
], ( 
DoubË
 )1.0, "xPSNR weighting factor for Cr (default: 1.0)")

815 ("CabacZ”oWÜdPaddšgEÇbËd", 
m_ÿbacZ”oWÜdPaddšgEÇbËd
, 
Œue
, "0 do‚ot‡dd conforming cabac-zero-wordso bit streams, 1 (default) =‡dd cabac-zero-words‡s„equired")

816 ("ChromaFÜm©IDC,-cf", 
tmpChromaFÜm©
, 0, "ChromaFormatIDC (400|420|422|444 or set 0 (default) for same‡s InputChromaFormat)")

817 ("CÚfÜmªûMode", 
m_cÚfÜmªûWšdowMode
, 0, "Deprecated‡lias of ConformanceWindowMode")

818 ("CÚfÜmªûWšdowMode", 
m_cÚfÜmªûWšdowMode
, 0, "Window conformance mode (0:‚o window, 1:automatic…adding, 2:padding, 3:conformance")

819 ("HÜizÚlPaddšg,-pdx", 
m_aiPad
[0], 0, "Horizontal source…adding for conformance window mode 2")

820 ("V”tiÿlPaddšg,-pdy", 
m_aiPad
[1], 0, "Vertical source…adding for conformance window mode 2")

821 ("CÚfLeá", 
m_cÚfWšLeá
, 0, "Deprecated‡lias of ConfWinLeft")

822 ("CÚfRight", 
m_cÚfWšRight
, 0, "Deprecated‡lias of ConfWinRight")

823 ("CÚfTÝ", 
m_cÚfWšTÝ
, 0, "Deprecated‡lias of ConfWinTop")

824 ("CÚfBÙtom", 
m_cÚfWšBÙtom
, 0, "Deprecated‡lias of ConfWinBottom")

825 ("CÚfWšLeá", 
m_cÚfWšLeá
, 0, "Left offset for window conformance mode 3")

826 ("CÚfWšRight", 
m_cÚfWšRight
, 0, "Right offset for window conformance mode 3")

827 ("CÚfWšTÝ", 
m_cÚfWšTÝ
, 0, "Top offset for window conformance mode 3")

828 ("CÚfWšBÙtom", 
m_cÚfWšBÙtom
, 0, "Bottom offset for window conformance mode 3")

829 ("AcûssUn™D–im™”", 
m_AcûssUn™D–im™”
, 
çl£
, "Enable Access Unit Delimiter NALUs")

830 ("F¿meR©e,-ä", 
m_iF¿meR©e
, 0, "Frame„ate")

831 ("F¿meSk,-fs", 
m_F¿meSk
, 0u, "Number of frameso skip‡t start of input YUV")

832 ("TempÜ®Sub§m¶eR©io,-ts", 
m_‹mpÜ®Sub§m¶eR©io
, 1u, "Temporal sub-sample„atio when„eading input YUV")

833 ("F¿mesToBeEncoded,f", 
m_äamesToBeEncoded
, 0, "Number of frameso beƒncoded (default=all)")

834 ("ClIÅutVideoToRec709Rªge", 
m_bClIÅutVideoToRec709Rªge
, 
çl£
, "Ifruehen clip input videoohe Rec. 709 Range on†oading when InternalBitDepth is†esshan MSBExtendedBitDepth")

835 ("ClOuutVideoToRec709Rªge", 
m_bClOuutVideoToRec709Rªge
, 
çl£
, "Ifruehen clip output videoohe Rec. 709 Range on saving when OutputBitDepth is†esshan InternalBitDepth")

836 ("Summ¬yOutFž’ame", 
m_summ¬yOutFž’ame
, 
	`¡ršg
(), "Filenameo use for…roducing summary output file. Ifƒmpty, do‚ot…roduce‡ file.")

837 ("Summ¬yPicFž’ameBa£", 
m_summ¬yPicFž’ameBa£
, 
	`¡ršg
(), "Base filenameo use for…roducing summary…icture output files. The‡ctual filenames used will have I.txt, P.txt‡nd B.txt‡ppended. Ifƒmpty, do‚ot…roduce‡ file.")

838 ("Summ¬yV”bo£Ãss", 
m_summ¬yV”bo£Ãss
, 0u, "Specifieshe†evel ofhe verboseness ofheext output")

841 ("F›ldCodšg", 
m_isF›ld
, 
çl£
, "Signals if it's‡ field based coding")

842 ("TÝF›ldFœ¡, Tff", 
m_isTÝF›ldFœ¡
, 
çl£
, "In case of field based coding, signals whether if it's‡op field first or‚ot")

843 ("Effic›ÁF›ldIRAPEÇbËd", 
m_bEffic›ÁF›ldIRAPEÇbËd
, 
Œue
, "Enableo code fields in‡ specific,…otentially moreƒfficient, order.")

844 ("H¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd", 
m_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
, 
Œue
, "Enables harmonization of Gop first field couple")

847 ("Profže", 
UIProfže
, 
UI_NONE
, "Profile‚ameo use forƒncoding. Use main (for main), main10 (for main10), main-still-picture, main-RExt (for Range Extensions…rofile),‡ny ofhe RExt specific…rofile‚ames, or‚one")

848 ("Lev–", 
m_Ëv–
, 
Lev–
::
NONE
, "Level†imito be used,ƒg 5.1, or‚one")

849 ("T›r", 
m_Ëv–T›r
, 
Lev–
::
MAIN
, "Tiero use for interpretation of --Level (main or high only)")

850 ("MaxB™D•thCÚ¡¿št", 
m_b™D•thCÚ¡¿št
, 0u, "Bit deptho use for…rofile-constraint for RExt…rofiles. 0=automatically choose based upon other…arameters")

851 ("MaxChromaFÜm©CÚ¡¿št", 
tmpCÚ¡¿štChromaFÜm©
, 0, "Chroma-formato use forhe…rofile-constraint for RExt…rofiles. 0=automatically choose based upon other…arameters")

852 ("IÁ¿CÚ¡¿štFÏg", 
m_šŒaCÚ¡¿štFÏg
, 
çl£
, "Value of general_intra_constraint_flago use for RExt…rofiles (not used if‡nƒxplicit RExt sub-profile is specified)")

853 ("OÃPiùu»OÆyCÚ¡¿štFÏg", 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
, 
çl£
, "Value of general_one_picture_only_constraint_flago use for RExt…rofiles (not used if‡nƒxplicit RExt sub-profile is specified)")

854 ("Low”B™R©eCÚ¡¿štFÏg", 
m_low”B™R©eCÚ¡¿štFÏg
, 
Œue
, "Value of general_lower_bit_rate_constraint_flago use for RExt…rofiles")

856 ("Prog»ssiveSourû", 
m_´og»ssiveSourûFÏg
, 
çl£
, "Indicatehat source is…rogressive")

857 ("IÁ”ÏûdSourû", 
m_š‹¾aûdSourûFÏg
, 
çl£
, "Indicatehat source is interlaced")

858 ("NÚPackedSourû", 
m_nÚPackedCÚ¡¿štFÏg
, 
çl£
, "Indicatehat source does‚ot contain frame…acking")

859 ("F¿meOÆy", 
m_äameOÆyCÚ¡¿štFÏg
, 
çl£
, "Indicatehathe bitstream contains only frames")

862 ("MaxCUWidth", 
m_uiMaxCUWidth
, 64u)

863 ("MaxCUHeight", 
m_uiMaxCUHeight
, 64u)

865 ("MaxCUSize,s", 
m_uiMaxCUWidth
, 64u, "Maximum CU size")

866 ("MaxCUSize,s", 
m_uiMaxCUHeight
, 64u, "Maximum CU size")

867 ("MaxP¬t™iÚD•th,h", 
m_uiMaxCUD•th
, 4u, "CU depth")

869 ("QuadŒ“TULog2MaxSize", 
m_uiQuadŒ“TULog2MaxSize
, 6u, "Maximum TU size in†ogarithm base 2")

870 ("QuadŒ“TULog2MšSize", 
m_uiQuadŒ“TULog2MšSize
, 2u, "Minimum TU size in†ogarithm base 2")

872 ("QuadŒ“TUMaxD•thIÁ¿", 
m_uiQuadŒ“TUMaxD•thIÁ¿
, 1u, "Depth of TUree for intra CUs")

873 ("QuadŒ“TUMaxD•thIÁ”", 
m_uiQuadŒ“TUMaxD•thIÁ”
, 2u, "Depth of TUree for inter CUs")

876 ("IÁ¿P”iod,-", 
m_iIÁ¿P”iod
, -1, "Intra…eriod in frames, (-1: only first frame)")

877 ("DecodšgReäeshTy³,-dr", 
m_iDecodšgReäeshTy³
, 0, "Intra„efreshype (0:none 1:CRA 2:IDR 3:RecPointSEI)")

878 ("GOPSize,g", 
m_iGOPSize
, 1, "GOP size ofemporal structure")

879 ("ReWr™eP¬amS‘sFÏg", 
m_bReWr™eP¬amS‘sFÏg
, 
Œue
, "Enable„ewriting of Parameter sets beforeƒvery (intra)„andom‡ccess…oint")

882 ("Di§bËIÁ¿InIÁ”", 
m_bDi§bËIÁ¿PUsInIÁ”Sliûs
, 
çl£
, "Flago disable intra PUs in inter slices")

883 ("Fa¡S—rch", 
tmpMÙiÚE¡im©iÚS—rchM‘hod
, 
	`IÁ
(
MESEARCH_DIAMOND
), "0:Full search 1:Diamond 2:Selective 3:Enhanced Diamond")

884 ("S—rchRªge,-¤", 
m_iS—rchRªge
, 96, "Motion search„ange")

885 ("B»dS—rchRªge", 
m_b»dS—rchRªge
, 4, "Motion search„ange for bipred„efinement")

886 ("MšS—rchWšdow", 
m_mšS—rchWšdow
, 8, "Minimum motion search window size forhe‡daptive window ME")

887 ("Re¡riùMESam¶šg", 
m_bRe¡riùMESam¶šg
, 
çl£
, "Restrict ME Sampling for selective inter motion search")

888 ("ClFÜBiP»dMEEÇbËd", 
m_bClFÜBiP»dMeEÇbËd
, 
çl£
, "Enables clipping inhe Bi-Pred ME. It is disabledo„educeƒncoder„un-time")

889 ("Fa¡MEAssumšgSmoÙh”MVEÇbËd", 
m_bFa¡MEAssumšgSmoÙh”MVEÇbËd
, 
Œue
, "Enables fast ME‡ssuming‡ smoother MV.")

891 ("Hadam¬dME", 
m_bU£HADME
, 
Œue
, "Hadamard ME for fractional-pel")

892 ("ASR", 
m_bU£ASR
, 
çl£
, "Adaptive motion search„ange");

893 
Ýts
.
	`addO±iÚs
()

896 ("LambdaModif›r0,-LM0", 
m_adLambdaModif›r
[ 0 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 0. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

897 ("LambdaModif›r1,-LM1", 
m_adLambdaModif›r
[ 1 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 1. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

898 ("LambdaModif›r2,-LM2", 
m_adLambdaModif›r
[ 2 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 2. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

899 ("LambdaModif›r3,-LM3", 
m_adLambdaModif›r
[ 3 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 3. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

900 ("LambdaModif›r4,-LM4", 
m_adLambdaModif›r
[ 4 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 4. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

901 ("LambdaModif›r5,-LM5", 
m_adLambdaModif›r
[ 5 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 5. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

902 ("LambdaModif›r6,-LM6", 
m_adLambdaModif›r
[ 6 ], ( 
DoubË
 )1.0, "Lambda modifier foremporal†ayer 6. If LambdaModifierI is used,his will‚ot‡ffect intra…ictures")

903 ("LambdaModif›rI,-LMI", 
cfg_adIÁ¿LambdaModif›r
, cfg_adIntraLambdaModifier, "Lambda modifiers for Intra…ictures, comma separated, upo onehe‚umber ofemporal†ayer. Ifƒntry foremporalLayerƒxists,hen use it,ƒlse if some‡re specified, usehe†ast,ƒlse usehe standard LambdaModifiers.")

904 ("IQPFaùÜ,-IQF", 
m_dIÁ¿QpFaùÜ
, -1.0, "Intra QP Factor for Lambda Computation. If‚egative,he default will scale†ambda based on GOP size (unless LambdaFromQpEnablehen IntraQPOffset is used instead)")

907 ("QP,q", 
m_iQP
, 30, "Qp value")

908 ("QPInüem’tF¿me,-qpif", 
m_qpInüem’tAtSourûF¿me
, 
O±iÚ®V®ue
<
UIÁ
>(), "If‡ source file frame‚umber is specified,he internal QP will be incremented for‡ll POCs‡ssociated with source frames >= frame‚umber. Ifƒmpty, do‚ot increment.")

909 ("IÁ¿QPOff£t", 
m_šŒaQPOff£t
, 0, "Qp offset value for intra slice,ypically determined based on GOP size")

910 ("LambdaFromQpEÇbË", 
m_ÏmbdaFromQPEÇbË
, 
çl£
, "Enable flag for derivation of†ambda from QP")

911 ("D–QpRD,-dqr", 
m_uiD–QpRD
, 0u, "max dQp offset for slice")

912 ("MaxD–QP,d", 
m_iMaxD–QP
, 0, "max dQp offset for block")

913 ("MaxCuDQPD•th,-dqd", 
m_iMaxCuDQPD•th
, 0, "max depth for‡ minimum CuDQP")

914 ("MaxCUChromaQpAdju¡m’tD•th", 
m_diffCuChromaQpOff£tD•th
, -1, "Maximum depth for CU chroma Qp‡djustment - set†esshan 0o disable")

915 ("Fa¡D–QP", 
m_bFa¡D–QP
, 
çl£
, "Fast Delta QP Algorithm")

916 ("LumaLev–ToD–QPMode", 
lumaLev–ToD–QPMode
, 0u, "Luma based Delta QP 0(default):‚ot used. 1: Based on CTU‡verage, 2: Based on Max†uma in CTU")

917 ("LumaLev–ToD–QPMaxV®Weight", 
m_lumaLev–ToD–QPM­pšg
.
maxM‘hodWeight
, 1.0, "Weight of block max†uma val when LumaLevelToDeltaQPMode = 2")

918 ("LumaLev–ToD–QPM­pšgLuma", 
cfg_lumaLev–toDQPM­pšgLuma
, cfg_lumaLeveltoDQPMappingLuma, "Lumao Delta QP Mapping -†umahresholds")

919 ("LumaLev–ToD–QPM­pšgDQP", 
cfg_lumaLev–toDQPM­pšgQP
, cfg_lumaLeveltoDQPMappingQP, "Lumao Delta QP Mapping - DQP values")

920 ("CbQpOff£t,-cbqpofs", 
m_cbQpOff£t
, 0, "Chroma Cb QP Offset")

921 ("CrQpOff£t,-üqpofs", 
m_üQpOff£t
, 0, "Chroma Cr QP Offset")

922 ("WCGPPSEÇbË", 
m_wcgChromaQpCÚŒÞ
.
’abËd
, 
çl£
, "1: Enablehe WCG PPS chroma modulation scheme. 0 (default) disabled")

923 ("WCGPPSCbQpSÿË", 
m_wcgChromaQpCÚŒÞ
.
chromaCbQpSÿË
, 1.0, "WCG PPS Chroma Cb QP Scale")

924 ("WCGPPSCrQpSÿË", 
m_wcgChromaQpCÚŒÞ
.
chromaCrQpSÿË
, 1.0, "WCG PPS Chroma Cr QP Scale")

925 ("WCGPPSChromaQpSÿË", 
m_wcgChromaQpCÚŒÞ
.
chromaQpSÿË
, 0.0, "WCG PPS Chroma QP Scale")

926 ("WCGPPSChromaQpOff£t", 
m_wcgChromaQpCÚŒÞ
.
chromaQpOff£t
, 0.0, "WCG PPS Chroma QP Offset")

927 ("SliûChromaQPOff£tP”iodic™y", 
m_¦iûChromaQpOff£tP”iodic™y
, 0u, "Used in conjunction with Slice Cb/Cr QpOffsetIntraOrPeriodic. Use 0 (default)o disable…eriodic‚ature.")

928 ("SliûCbQpOff£tIÁ¿OrP”iodic", 
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[0], 0, "Chroma Cb QP Offset‡t slice†evel for I slice or for…eriodic inter slices‡s defined by SliceChromaQPOffsetPeriodicity. Replaces offset inhe GOPable.")

929 ("SliûCrQpOff£tIÁ¿OrP”iodic", 
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[1], 0, "Chroma Cr QP Offset‡t slice†evel for I slice or for…eriodic inter slices‡s defined by SliceChromaQPOffsetPeriodicity. Replaces offset inhe GOPable.")

930 #ià
ADAPTIVE_QP_SELECTION


931 ("Ad­tiveQpS–eùiÚ,-aqps", 
m_bU£Ad­tQpS–eù
, 
çl£
, "AdaptiveQpSelection")

934 ("Ad­tiveQP,-aq", 
m_bU£Ad­tiveQP
, 
çl£
, "QP‡daptation based on‡…sycho-visual model")

935 ("MaxQPAd­tiÚRªge,-aqr", 
m_iQPAd­tiÚRªge
, 6, "QP‡daptation„ange")

936 ("dQPFže,m", 
m_dQPFžeName
, 
	`¡ršg
(""), "dQP file‚ame")

937 ("RDOQ", 
m_u£RDOQ
, 
Œue
)

938 ("RDOQTS", 
m_u£RDOQTS
, 
Œue
)

939 ("S–eùiveRDOQ", 
m_u£S–eùiveRDOQ
, 
çl£
, "Enable selective RDOQ")

940 ("RD³ÇÉy", 
m_rdP’®ty
, 0, "RD-penalty for 32x32 TU for intra in‚on-intra slices. 0:disabled 1:RD-penalty 2:maximum RD-penalty")

943 ("LoÝFž‹rDi§bË", 
m_bLoÝFž‹rDi§bË
, 
çl£
)

944 ("LoÝFž‹rOff£tInPPS", 
m_loÝFž‹rOff£tInPPS
, 
Œue
)

945 ("LoÝFž‹rB‘aOff£t_div2", 
m_loÝFž‹rB‘aOff£tDiv2
, 0)

946 ("LoÝFž‹rTcOff£t_div2", 
m_loÝFž‹rTcOff£tDiv2
, 0)

947 ("DeblockšgFž‹rM‘ric", 
m_deblockšgFž‹rM‘ric
, 0)

949 ("AMP", 
m_’abËAMP
, 
Œue
, "Enable‡symmetric motion…artitions")

950 ("CrossCompÚ’tP»diùiÚ", 
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
, 
çl£
, "Enablehe use of cross-component…rediction (not valid in V1…rofiles)")

951 ("RecÚBa£dCrossCP»diùiÚE¡im©e", 
m_»cÚBa£dCrossCP»diùiÚE¡im©e
, 
çl£
, "When determininghe‡lpha value for cross-component…rediction, usehe decoded„esidual„atherhanhe…re-transformƒncoder-side„esidual")

952 ("SaoLumaOff£tB™Shiá", 
§oOff£tB™Shiá
[
CHANNEL_TYPE_LUMA
], 0, "Specifyhe†uma SAO bit-shift. If‚egative,‡utomatically calculate‡ suitable value based upon bit depth‡nd initial QP")

953 ("SaoChromaOff£tB™Shiá", 
§oOff£tB™Shiá
[
CHANNEL_TYPE_CHROMA
], 0, "Specifyhe chroma SAO bit-shift. If‚egative,‡utomatically calculate‡ suitable value based upon bit depth‡nd initial QP")

954 ("T¿nsfÜmSk", 
m_u£T¿nsfÜmSk
, 
çl£
, "Intraransform skipping")

955 ("T¿nsfÜmSkFa¡", 
m_u£T¿nsfÜmSkFa¡
, 
çl£
, "Fast intraransform skipping")

956 ("T¿nsfÜmSkLog2MaxSize", 
m_log2MaxT¿nsfÜmSkBlockSize
, 2U, "Specifyransform-skip maximum size. Minimum 2. (not valid in V1…rofiles)")

957 ("Im¶ic™Residu®DPCM", 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_IMPLICIT
], 
çl£
, "Enable implicitly signalled„esidual DPCM for intra (also known‡s sample-adaptive intra…redict) (not valid in V1…rofiles)")

958 ("Ex¶ic™Residu®DPCM", 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_EXPLICIT
], 
çl£
, "Enableƒxplicitly signalled„esidual DPCM for inter (not valid in V1…rofiles)")

959 ("Residu®RÙ©iÚ", 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
, 
çl£
, "Enable„otation ofransform-skipped‡ndransquant-bypassed TUshrough 180 degrees…rioroƒntropy coding (not valid in V1…rofiles)")

960 ("SšgËSignifiÿnûM­CÚ‹xt", 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
, 
çl£
, "Enable, forransform-skipped‡ndransquant-bypassed TUs,he selection of‡ single significance map context variable for‡ll coefficients (not valid in V1…rofiles)")

961 ("GÞombRiûP¬am‘”Ad­tiÚ", 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
, 
çl£
, "Enablehe‡daptation ofhe Golomb-Rice…arameter overhe course ofƒach slice")

962 ("AlignCABACBefÜeBy·ss", 
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
, 
çl£
, "Alignhe CABACƒngineo‡ defined fraction of‡ bit…rioro coding bypass data. Must be 1 in high bit„ate…rofile, 0 otherwise" )

963 ("SAO", 
m_bU£SAO
, 
Œue
, "Enable Sample Adaptive Offset")

964 ("Te¡SAODi§bËAtPiùu»Lev–", 
m_bTe¡SAODi§bËAtPiùu»Lev–
, 
çl£
, "Enablesheesting of disabling SAO‡the…icture†evel‡fter having‡nalysed‡ll blocks")

965 ("SaoEncodšgR©e", 
m_§oEncodšgR©e
, 0.75, "When >0 SAOƒarly…ictureermination isƒnabled for†uma‡nd chroma")

966 ("SaoEncodšgR©eChroma", 
m_§oEncodšgR©eChroma
, 0.5, "The SAOƒarly…ictureermination„ateo use for chroma (when m_SaoEncodingRate is >0). If <=0, use„esults for†uma")

967 ("MaxNumOff£tsP”Pic", 
m_maxNumOff£tsP”Pic
, 2048, "Max‚umber of SAO offset…er…icture (Default: 2048)")

968 ("SAOLcuBound¬y", 
m_§oCtuBound¬y
, 
çl£
, "0:„ight/bottom CTU boundary‡reas skipped from SAO…arameterƒstimation, 1:‚on-deblocked…ixels‡re used forhose‡reas")

969 ("Re£tEncod”S‹Aá”IRAP", 
m_»£tEncod”S‹Aá”IRAP
, 
Œue
, "Whenrue,„esetsheƒncoder's decisions‡fter‡n IRAP (POC order). Enabled by default.")

970 ("SliûMode", 
tmpSliûMode
, 
	`IÁ
(
NO_SLICES
), "0: Disable‡ll Recon slice†imits, 1: Enforce max # of CTUs, 2: Enforce max # of bytes, 3:specifyiles…er dependent slice")

971 ("SliûArgum’t", 
m_¦iûArgum’t
, 0, "Depending on SliceMode being:"

975 ("SliûSegm’tMode", 
tmpSliûSegm’tMode
, 
	`IÁ
(
NO_SLICES
), "0: Disable‡ll slice segment†imits, 1: Enforce max # of CTUs, 2: Enforce max # of bytes, 3:specifyiles…er dependent slice")

976 ("SliûSegm’tArgum’t", 
m_¦iûSegm’tArgum’t
, 0, "Depending on SliceSegmentMode being:"

980 ("LFCrossSliûBound¬yFÏg", 
m_bLFCrossSliûBound¬yFÏg
, 
Œue
)

982 ("CÚ¡¿šedIÁ¿P»d", 
m_bU£CÚ¡¿šedIÁ¿P»d
, 
çl£
, "Constrained Intra Prediction")

983 ("Fa¡UDIU£MPMEÇbËd", 
m_bFa¡UDIU£MPMEÇbËd
, 
Œue
, "Ifƒnabled,‡dapt intra direction search,‡ccounting for MPM")

984 ("Fa¡MEFÜG’BLowD–ayEÇbËd", 
m_bFa¡MEFÜG’BLowD–ayEÇbËd
, 
Œue
, "Ifƒnabled use‡ fast ME for generalised B Low Delay slices")

985 ("U£BLambdaFÜNÚKeyLowD–ayPiùu»s", 
m_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
, 
Œue
, "Enables use of B-Lambda for‚on-key†ow-delay…ictures")

986 ("PCMEÇbËdFÏg", 
m_u£PCM
, 
çl£
)

987 ("PCMLog2MaxSize", 
m_pcmLog2MaxSize
, 5u)

988 ("PCMLog2MšSize", 
m_uiPCMLog2MšSize
, 3u)

990 ("PCMIÅutB™D•thFÏg", 
m_bPCMIÅutB™D•thFÏg
, 
Œue
)

991 ("PCMFž‹rDi§bËFÏg", 
m_bPCMFž‹rDi§bËFÏg
, 
çl£
)

992 ("IÁ¿Reã»nûSmoÙhšg", 
m_’abËIÁ¿Reã»nûSmoÙhšg
, 
Œue
, "0: Disable use of intra„eference smoothing (not valid in V1…rofiles). 1: Enable use of intra„eference smoothing (same‡s V1)")

993 ("Weigh‹dP»dP,-wpP", 
m_u£Weigh‹dP»d
, 
çl£
, "Use weighted…rediction in P slices")

994 ("Weigh‹dP»dB,-wpB", 
m_u£Weigh‹dBiP»d
, 
çl£
, "Use weighted (bidirectional)…rediction in B slices")

995 ("Weigh‹dP»dM‘hod,-wpM", 
tmpWeigh‹dP»diùiÚM‘hod
, 
	`IÁ
(
WP_PER_PICTURE_WITH_SIMPLE_DC_COMBINED_COMPONENT
), "Weighted…rediction method")

996 ("Log2P¬®ËlM”geLev–", 
m_log2P¬®ËlM”geLev–
, 2u, "Parallel mergeƒstimation„egion")

998 ("UnifÜmS·cšgIdc", 
m_tžeUnifÜmS·cšgFÏg
, 
çl£
, "deprecated‡lias of TileUniformSpacing")

999 ("CÞumnWidthA¼ay", 
cfg_CÞumnWidth
, cfg_ColumnWidth, "deprecated‡lias of TileColumnWidthArray")

1000 ("RowHeightA¼ay", 
cfg_RowHeight
, cfg_RowHeight, "deprecated‡lias of TileRowHeightArray")

1002 ("TžeUnifÜmS·cšg", 
m_tžeUnifÜmS·cšgFÏg
, 
çl£
, "Indicateshatile columns‡nd„ows‡re distributed uniformly")

1003 ("NumTžeCÞumnsMšus1", 
m_numTžeCÞumnsMšus1
, 0, "Number ofile columns in‡…icture minus 1")

1004 ("NumTžeRowsMšus1", 
m_numTžeRowsMšus1
, 0, "Number of„ows in‡…icture minus 1")

1005 ("TžeCÞumnWidthA¼ay", 
cfg_CÞumnWidth
, cfg_ColumnWidth, "Array containingile column width values in units of CTU")

1006 ("TžeRowHeightA¼ay", 
cfg_RowHeight
, cfg_RowHeight, "Array containingile„ow height values in units of CTU")

1007 ("LFCrossTžeBound¬yFÏg", 
m_bLFCrossTžeBound¬yFÏg
, 
Œue
, "1: cross-tile-boundary†oop filtering. 0:non-cross-tile-boundary†oop filtering")

1008 ("WaveFrÚtSynchro", 
m_’ŒÝyCodšgSyncEÇbËdFÏg
, 
çl£
, "0:ƒntropy coding sync disabled; 1ƒntropy coding syncƒnabled")

1009 ("SÿlšgLi¡", 
m_u£SÿlšgLi¡Id
, 
SCALING_LIST_OFF
, "0/off:‚o scaling†ist, 1/default: default scaling†ists, 2/file: scaling†ists specified in ScalingListFile")

1010 ("SÿlšgLi¡Fže", 
m_sÿlšgLi¡FžeName
, 
	`¡ršg
(""), "Scaling†ist file‚ame. Use‡nƒmpty stringo…roduce help.")

1011 ("SignHideFÏg,-SBH", 
m_signD©aHidšgEÇbËdFÏg
, 
Œue
)

1012 ("MaxNumM”geCªd", 
m_maxNumM”geCªd
, 5u, "Maximum‚umber of merge candidates")

1014 ("SEIDecodedPiùu»Hash", 
tmpDecodedPiùu»HashSEIM­³dTy³
, 0, "Control generation of decode…icture hash SEI messages\n"

1019 ("TMVPMode", 
m_TMVPModeId
, 1, "TMVP mode 0: TMVP disable for‡ll slices. 1: TMVPƒnable for‡ll slices (default) 2: TMVPƒnable for certain slices only")

1020 ("FEN", 
tmpFa¡IÁ”S—rchMode
, 
	`IÁ
(
FASTINTERSEARCH_DISABLED
), "fastƒncoder setting")

1021 ("ECU", 
m_bU£E¬lyCU
, 
çl£
, "Early CU setting")

1022 ("FDM", 
m_u£Fa¡DecisiÚFÜM”ge
, 
Œue
, "Fast decision for Merge RD Cost")

1023 ("CFM", 
m_bU£CbfFa¡Mode
, 
çl£
, "Cbf fast mode setting")

1024 ("ESD", 
m_u£E¬lySkD‘eùiÚ
, 
çl£
, "Early SKIP detection setting")

1025 Ð"R©eCÚŒÞ", 
m_RCEÇbËR©eCÚŒÞ
, 
çl£
, "Rate control:ƒnable„ate control" )

1026 Ð"T¬g‘B™¿‹", 
m_RCT¬g‘B™¿‹
, 0, "Rate control:arget bit-rate" )

1027 Ð"K“pH›¿rchiÿlB™", 
m_RCK“pH›¿rchiÿlB™
, 0, "Rate control: 0:ƒqual bit‡llocation; 1: fixed„atio bit‡llocation; 2:‡daptive„atio bit‡llocation" )

1028 Ð"LCULev–R©eCÚŒÞ", 
m_RCLCULev–RC
, 
Œue
, "Rate control:rue: CTU†evel RC; false:…icture†evel RC" )

1029 Ð"RCLCUS•¬©eMod–", 
m_RCU£LCUS•¬©eMod–
, 
Œue
, "Rate control: use CTU†evel separate R-lambda model" )

1030 Ð"In™ŸlQP", 
m_RCIn™ŸlQP
, 0, "Rate control: initial QP" )

1031 Ð"RCFÜûIÁ¿QP", 
m_RCFÜûIÁ¿QP
, 
çl£
, "Rate control: force intra QPo beƒqualo initial QP" )

1032 Ð"RCCpbS©u¿tiÚ", 
m_RCCpbS©u¿tiÚEÇbËd
, 
çl£
, "Rate control:ƒnablearget bits saturationo‡void CPB overflow‡nd underflow" )

1033 Ð"RCCpbSize", 
m_RCCpbSize
, 0u, "Rate control: CPB size" )

1034 Ð"RCIn™ŸlCpbFuÎÃss", 
m_RCIn™ŸlCpbFuÎÃss
, 0.9, "Rate control: initial CPB fullness" )

1035 ("T¿nsquªtBy·ssEÇbË", 
m_T¿nsquªtBy·ssEÇbËdFÏg
, 
çl£
, "transquant_bypass_enabled_flag indicator in PPS")

1036 ("T¿nsquªtBy·ssEÇbËFÏg", 
m_T¿nsquªtBy·ssEÇbËdFÏg
, 
çl£
, "deprecated‡lias for TransquantBypassEnable")

1037 ("CUT¿nsquªtBy·ssFÏgFÜû", 
m_CUT¿nsquªtBy·ssFÏgFÜû
, 
çl£
, "Forceransquant bypass mode, whenransquant_bypass_enabled_flag isƒnabled")

1038 ("Co¡Mode", 
m_co¡Mode
, 
COST_STANDARD_LOSSY
, "U£‡É”Çtivco¡ funùiÚs: choo£ b‘w“À'lossy', '£qu’û_Ëv–_los¦ess', 'los¦ess' (which fÜû QPØ" 
	`MACRO_TO_STRING
(
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP
è"èªd 'mixed_los¦ess_lossy' (which u£d QP'=" MACRO_TO_STRING(
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
) " for…re-estimates ofransquant-bypass blocks).")

1039 ("ReÿlcuÏ‹QPAccÜdšgToLambda", 
m_»ÿlcuÏ‹QPAccÜdšgToLambda
, 
çl£
, "Recalculate QP values‡ccordingo†ambda values. Do‚ot suggesto beƒnabled in‡ll intra case")

1040 ("SŒÚgIÁ¿SmoÙhšg,-sis", 
m_u£SŒÚgIÁ¿SmoÙhšg
, 
Œue
, "Enable strong intra smoothing for 32x32 blocks")

1041 ("SEIAùiveP¬am‘”S‘s", 
m_aùiveP¬am‘”S‘sSEIEÇbËd
, 0, "Enable generation of‡ctive…arameter sets SEI messages");

1042 
Ýts
.
	`addO±iÚs
()

1043 ("VuiP¬am‘”sP»£Á,-vui", 
m_vuiP¬am‘”sP»£ÁFÏg
, 
çl£
, "Enable generation of vui_parameters()")

1044 ("A¥eùR©ioInfoP»£Á", 
m_a¥eùR©ioInfoP»£ÁFÏg
, 
çl£
, "Signals whether‡spect_ratio_idc is…resent")

1045 ("A¥eùR©ioIdc", 
m_a¥eùR©ioIdc
, 0, "aspect_ratio_idc")

1046 ("S¬Width", 
m_§rWidth
, 0, "horizontal size ofhe sample‡spect„atio")

1047 ("S¬Height", 
m_§rHeight
, 0, "vertical size ofhe sample‡spect„atio")

1048 ("Ov”sÿnInfoP»£Á", 
m_ov”sÿnInfoP»£ÁFÏg
, 
çl£
, "Indicates whether conformant decoded…ictures‡re suitable for display using overscan\n")

1049 ("Ov”sÿnAµrÝrŸ‹", 
m_ov”sÿnAµrÝrŸ‹FÏg
, 
çl£
, "Indicates whether conformant decoded…ictures‡re suitable for display using overscan\n")

1050 ("VideoSigÇlTy³P»£Á", 
m_videoSigÇlTy³P»£ÁFÏg
, 
çl£
, "Signals whether video_format, video_full_range_flag,‡nd colour_description_present_flag‡re…resent")

1051 ("VideoFÜm©", 
m_videoFÜm©
, 5, "Indicates„epresentation of…ictures")

1052 ("VideoFuÎRªge", 
m_videoFuÎRªgeFÏg
, 
çl£
, "Indicateshe black†evel‡nd„ange of†uma‡nd chroma signals")

1053 ("CÞourDesütiÚP»£Á", 
m_cÞourDesütiÚP»£ÁFÏg
, 
çl£
, "Signals whether colour_primaries,ransfer_characteristics‡nd matrix_coefficients‡re…resent")

1054 ("CÞourPrim¬›s", 
m_cÞourPrim¬›s
, 2, "Indicates chromaticity coordinates ofhe source…rimaries")

1055 ("T¿nsãrCh¬aù”i¡ics", 
m_ŒªsãrCh¬aù”i¡ics
, 2, "Indicateshe opto-electronicransfer characteristics ofhe source")

1056 ("M©rixCÛffic›Ás", 
m_m©rixCÛffic›Ás
, 2, "Describeshe matrix coefficients used in deriving†uma‡nd chroma from RGB…rimaries")

1057 ("ChromaLocInfoP»£Á", 
m_chromaLocInfoP»£ÁFÏg
, 
çl£
, "Signals whether chroma_sample_loc_type_top_field‡nd chroma_sample_loc_type_bottom_field‡re…resent")

1058 ("ChromaSam¶eLocTy³TÝF›ld", 
m_chromaSam¶eLocTy³TÝF›ld
, 0, "Specifieshe†ocation of chroma samples forop field")

1059 ("ChromaSam¶eLocTy³BÙtomF›ld", 
m_chromaSam¶eLocTy³BÙtomF›ld
, 0, "Specifieshe†ocation of chroma samples for bottom field")

1060 ("NeuŒ®ChromaIndiÿtiÚ", 
m_ÃuŒ®ChromaIndiÿtiÚFÏg
, 
çl£
, "Indicateshathe value of‡ll decoded chroma samples isƒqualo 1<<(BitDepthCr-1)")

1061 ("DeçuÉDi¥ÏyWšdowFÏg", 
m_deçuÉDi¥ÏyWšdowFÏg
, 
çl£
, "Indicateshe…resence ofhe Default Window…arameters")

1062 ("DefDi¥WšLeáOff£t", 
m_defDi¥WšLeáOff£t
, 0, "Specifieshe†eft offset ofhe default display window fromhe conformance window")

1063 ("DefDi¥WšRightOff£t", 
m_defDi¥WšRightOff£t
, 0, "Specifieshe„ight offset ofhe default display window fromhe conformance window")

1064 ("DefDi¥WšTÝOff£t", 
m_defDi¥WšTÝOff£t
, 0, "Specifiesheop offset ofhe default display window fromhe conformance window")

1065 ("DefDi¥WšBÙtomOff£t", 
m_defDi¥WšBÙtomOff£t
, 0, "Specifieshe bottom offset ofhe default display window fromhe conformance window")

1066 ("F¿meF›ldInfoP»£ÁFÏg", 
m_äameF›ldInfoP»£ÁFÏg
, 
çl£
, "Indicateshat…ic_struct‡nd field coding„elated values‡re…resent in…ictureiming SEI messages")

1067 ("PocPrÝÜtiÚ®ToTimšgFÏg", 
m_pocPrÝÜtiÚ®ToTimšgFÏg
, 
çl£
, "Indicateshathe POC value is…roportionalohe outputime w.r.t. first…icture in CVS")

1068 ("NumTicksPocDiffOÃMšus1", 
m_numTicksPocDiffOÃMšus1
, 0, "Number oficks minus 1hat for‡ POC difference of one")

1069 ("B™¡»amRe¡riùiÚ", 
m_b™¡»amRe¡riùiÚFÏg
, 
çl£
, "Signals whether bitstream„estriction…arameters‡re…resent")

1070 ("TžesFixedSŒuùu»", 
m_tžesFixedSŒuùu»FÏg
, 
çl£
, "Indicateshatƒach‡ctive…icture…arameter set hashe same values ofhe syntaxƒlements„elatedoiles")

1071 ("MÙiÚVeùÜsOv”PicBound¬›s", 
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
, 
çl£
, "Indicateshat‚o samples outsidehe…icture boundaries‡re used for inter…rediction")

1072 ("MaxBy‹sP”PicD’om", 
m_maxBy‹sP”PicD’om
, 2, "Indicates‡‚umber of bytes‚otƒxceeded byhe sum ofhe sizes ofhe VCL NAL units‡ssociated with‡ny coded…icture")

1073 ("MaxB™sP”MšCuD’om", 
m_maxB™sP”MšCuD’om
, 1, "Indicates‡n upper bound forhe‚umber of bits of coding_unit() data")

1074 ("Log2MaxMvL’gthHÜizÚl", 
m_log2MaxMvL’gthHÜizÚl
, 15, "Indicatehe maximum‡bsolute value of‡ decoded horizontal MV component in quarter-pel†uma units")

1075 ("Log2MaxMvL’gthV”tiÿl", 
m_log2MaxMvL’gthV”tiÿl
, 15, "Indicatehe maximum‡bsolute value of‡ decoded vertical MV component in quarter-pel†uma units");

1076 
Ýts
.
	`addO±iÚs
()

1077 ("SEICÞourRem­pšgInfoFžeRoÙ,-üi", 
m_cÞourRem­SEIFžeRoÙ
, 
	`¡ršg
(""), "Colour Remapping Information SEI…arameters„oot file‚ame (wo‚umƒxt); onlyhe file‚ame base iso be‡dded. Underscore‡nd POC would be‡utomatically‡dddedo . E.g. \"-cri cri\" will search for files cri_0.txt, cri_1.txt, ...")

1078 ("SEIRecov”yPošt", 
m_»cov”yPoštSEIEÇbËd
, 
çl£
, "Control generation of„ecovery…oint SEI messages")

1079 ("SEIBufãršgP”iod", 
m_bufãršgP”iodSEIEÇbËd
, 
çl£
, "Control generation of buffering…eriod SEI messages")

1080 ("SEIPiùu»Timšg", 
m_piùu»TimšgSEIEÇbËd
, 
çl£
, "Control generation of…ictureiming SEI messages")

1081 ("SEITÚeM­pšgInfo", 
m_tÚeM­pšgInfoSEIEÇbËd
, 
çl£
, "Control generation of Tone Mapping SEI messages")

1082 ("SEITÚeM­Id", 
m_tÚeM­Id
, 0, "Specifies Id of Tone Mapping SEI message for‡ given session")

1083 ("SEITÚeM­CªûlFÏg", 
m_tÚeM­CªûlFÏg
, 
çl£
, "Indicateshat Tone Mapping SEI message cancelshe…ersistence or follows")

1084 ("SEITÚeM­P”si¡’ûFÏg", 
m_tÚeM­P”si¡’ûFÏg
, 
Œue
, "Specifieshe…ersistence ofhe Tone Mapping SEI message")

1085 ("SEITÚeM­CodedD©aB™D•th", 
m_tÚeM­CodedD©aB™D•th
, 8, "Specifies Coded Data BitDepth of Tone Mapping SEI messages")

1086 ("SEITÚeM­T¬g‘B™D•th", 
m_tÚeM­T¬g‘B™D•th
, 8, "Specifies Output BitDepth of Tone mapping function")

1087 ("SEITÚeM­Mod–Id", 
m_tÚeM­Mod–Id
, 0, "Specifies Model utilized for mapping coded data intoarget_bit_depth„ange\n"

1093 ("SEITÚeM­MšV®ue", 
m_tÚeM­MšV®ue
, 0, "Specifieshe minimum value in mode 0")

1094 ("SEITÚeM­MaxV®ue", 
m_tÚeM­MaxV®ue
, 1023, "Specifieshe maximum value in mode 0")

1095 ("SEITÚeM­SigmoidMidpošt", 
m_sigmoidMidpošt
, 512, "Specifieshe centre…oint in mode 1")

1096 ("SEITÚeM­SigmoidWidth", 
m_sigmoidWidth
, 960, "Specifieshe distance between 5%‡nd 95% values ofhearget_bit_depth in mode 1")

1097 ("SEITÚeM­S¹OfCodedIÁ”v®", 
cfg_¡¬tOfCodedIÁ”v®
, cfg_startOfCodedInterval, "Array of user-defined mappingable")

1098 ("SEITÚeM­NumPivÙs", 
m_numPivÙs
, 0, "Specifieshe‚umber of…ivot…oints in mode 3")

1099 ("SEITÚeM­CodedPivÙV®ue", 
cfg_codedPivÙV®ue
, cfg_codedPivotValue, "Array of…ivot…oint")

1100 ("SEITÚeM­T¬g‘PivÙV®ue", 
cfg_rg‘PivÙV®ue
, cfg_targetPivotValue, "Array of…ivot…oint")

1101 ("SEITÚeM­Cam”aIsoS³edIdc", 
m_ÿm”aIsoS³edIdc
, 0, "Indicateshe camera ISO speed for daylight illumination")

1102 ("SEITÚeM­Cam”aIsoS³edV®ue", 
m_ÿm”aIsoS³edV®ue
, 400, "Specifieshe camera ISO speed for daylight illumination of Extended_ISO")

1103 ("SEITÚeM­Exposu»IndexIdc", 
m_exposu»IndexIdc
, 0, "Indicatesheƒxposure index setting ofhe camera")

1104 ("SEITÚeM­Exposu»IndexV®ue", 
m_exposu»IndexV®ue
, 400, "Specifiesheƒxposure index setting ofhe camera of Extended_ISO")

1105 ("SEITÚeM­Exposu»Com³n§tiÚV®ueSignFÏg", 
m_exposu»Com³n§tiÚV®ueSignFÏg
, 
çl£
, "Specifieshe sign of ExposureCompensationValue")

1106 ("SEITÚeM­Exposu»Com³n§tiÚV®ueNum”©Ü", 
m_exposu»Com³n§tiÚV®ueNum”©Ü
, 0, "Specifieshe‚umerator of ExposureCompensationValue")

1107 ("SEITÚeM­Exposu»Com³n§tiÚV®ueD’omIdc", 
m_exposu»Com³n§tiÚV®ueD’omIdc
, 2, "Specifieshe denominator of ExposureCompensationValue")

1108 ("SEITÚeM­RefSü“nLumšªûWh™e", 
m_»fSü“nLumšªûWh™e
, 350, "Specifies„eference screen brightness setting in units of candela…er square metre")

1109 ("SEITÚeM­Ex‹ndedRªgeWh™eLev–", 
m_ex‹ndedRªgeWh™eLev–
, 800, "Indicateshe†uminance dynamic„ange")

1110 ("SEITÚeM­Nomš®BÏckLev–LumaCodeV®ue", 
m_nomš®BÏckLev–LumaCodeV®ue
, 16, "Specifies†uma sample value ofhe‚ominal black†evel‡ssigned decoded…ictures")

1111 ("SEITÚeM­Nomš®Wh™eLev–LumaCodeV®ue", 
m_nomš®Wh™eLev–LumaCodeV®ue
, 235, "Specifies†uma sample value ofhe‚ominal white†evel‡ssigned decoded…ictures")

1112 ("SEITÚeM­Ex‹ndedWh™eLev–LumaCodeV®ue", 
m_ex‹ndedWh™eLev–LumaCodeV®ue
, 300, "Specifies†uma sample value ofheƒxtended dynamic„ange‡ssigned decoded…ictures")

1113 ("SEIChromaRe§m¶šgFž‹rHšt", 
m_chromaRe§m¶šgFž‹rSEI’abËd
, 
çl£
, "Control generation ofhe chroma sampling filter hint SEI message")

1114 ("SEIChromaRe§m¶šgHÜizÚlFž‹rTy³", 
m_chromaRe§m¶šgHÜFž‹rIdc
, 2, "Defineshe Index ofhe chroma sampling horizontal filter\n"

1118 ("SEIChromaRe§m¶šgV”tiÿlFž‹rTy³", 
m_chromaRe§m¶šgV”Fž‹rIdc
, 2, "Defineshe Index ofhe chroma sampling vertical filter\n"

1122 ("SEIF¿mePackšg", 
m_äamePackšgSEIEÇbËd
, 
çl£
, "Control generation of frame…acking SEI messages")

1123 ("SEIF¿mePackšgTy³", 
m_äamePackšgSEITy³
, 0, "Define frame…acking‡rrangement\n"

1127 ("SEIF¿mePackšgId", 
m_äamePackšgSEIId
, 0, "Id of frame…acking SEI message for‡ given session")

1128 ("SEIF¿mePackšgQušcunx", 
m_äamePackšgSEIQušcunx
, 0, "Indicatehe…resence of‡ Quincunxype video frame")

1129 ("SEIF¿mePackšgIÁ”´‘©iÚ", 
m_äamePackšgSEIIÁ”´‘©iÚ
, 0, "Indicatehe interpretation ofhe frame…air\n"

1133 ("SEISegm’‹dReùF¿mePackšg", 
m_£gm’‹dReùF¿mePackšgSEIEÇbËd
, 
çl£
, "Controls generation of segmented„ectangular frame…acking SEI messages")

1134 ("SEISegm’‹dReùF¿mePackšgCªûl", 
m_£gm’‹dReùF¿mePackšgSEICªûl
, 
çl£
, "Ifƒqualo 1, cancelshe…ersistence of‡ny…revious SRFPA SEI message")

1135 ("SEISegm’‹dReùF¿mePackšgTy³", 
m_£gm’‹dReùF¿mePackšgSEITy³
, 0, "Specifieshe‡rrangement ofhe frames inhe„econstructed…icture")

1136 ("SEISegm’‹dReùF¿mePackšgP”si¡’û", 
m_£gm’‹dReùF¿mePackšgSEIP”si¡’û
, 
çl£
, "Ifƒqualo 0,he SEI‡ppliesohe current frame only")

1137 ("SEIDi¥ÏyOr›Á©iÚ", 
m_di¥ÏyOr›Á©iÚSEIAngË
, 0, "Control generation of display orientation SEI messages\n"

1140 ("SEITempÜ®Lev–0Index", 
m_‹mpÜ®Lev–0IndexSEIEÇbËd
, 
çl£
, "Control generation ofemporal†evel 0 index SEI messages")

1141 ("SEIG¿du®DecodšgReäeshInfo", 
m_g¿du®DecodšgReäeshInfoEÇbËd
, 
çl£
, "Control generation of gradual decoding„efresh information SEI message")

1142 ("SEINoDi¥Ïy", 
m_noDi¥ÏySEITLay”
, 0, "Control generation of‚o display SEI message\n"

1145 ("SEIDecodšgUn™Info", 
m_decodšgUn™InfoSEIEÇbËd
, 
çl£
, "Control generation of decoding unit information SEI message.")

1146 ("SEISOPDesütiÚ", 
m_SOPDesütiÚSEIEÇbËd
, 
çl£
, "Control generation of SOP description SEI messages")

1147 ("SEISÿÏbËNe¡šg", 
m_sÿÏbËNe¡šgSEIEÇbËd
, 
çl£
, "Control generation of scalable‚esting SEI messages")

1148 ("SEITempMÙiÚCÚ¡¿šedTžeS‘s", 
m_tmùsSEIEÇbËd
, 
çl£
, "Control generation ofemporal motion constrainedile sets SEI message")

1149 #ià
MCTS_ENC_CHECK


1150 ("SEITMCTSTžeCÚ¡¿št", 
m_tmùsSEITžeCÚ¡¿št
, 
çl£
, "Constrain motion vectors‡tile boundaries")

1152 #ià
MCTS_EXTRACTION


1153 ("SEITMCTSExŒaùiÚInfo", 
m_tmùsExŒaùiÚSEIEÇbËd
, 
çl£
, "Control generation of MCTSƒxtraction info SEI messages")

1155 ("SEITimeCodeEÇbËd", 
m_timeCodeSEIEÇbËd
, 
çl£
, "Control generation ofime code information SEI message")

1156 ("SEITimeCodeNumClockTs", 
m_timeCodeSEINumTs
, 0, "Number of clockime sets [0..3]")

1157 ("SEITimeCodeTimeSmpFÏg", 
cfg_timeCodeSeiTimeSmpFÏg
, cfg_timeCodeSeiTimeStampFlag, "Time stamp flag‡ssociatedoƒachime set")

1158 ("SEITimeCodeF›ldBa£dFÏg", 
cfg_timeCodeSeiNumUn™F›ldBa£dFÏg
, cfg_timeCodeSeiNumUnitFieldBasedFlag, "Field based flag‡ssociatedoƒachime set")

1159 ("SEITimeCodeCouÁšgTy³", 
cfg_timeCodeSeiCouÁšgTy³
, cfg_timeCodeSeiCountingType, "Countingype‡ssociatedoƒachime set")

1160 ("SEITimeCodeFuÎTsFÏg", 
cfg_timeCodeSeiFuÎTimeSmpFÏg
, cfg_timeCodeSeiFullTimeStampFlag, "Fullime stamp flag‡ssociatedoƒachime set")

1161 ("SEITimeCodeDiscÚtšu™yFÏg", 
cfg_timeCodeSeiDiscÚtšu™yFÏg
, cfg_timeCodeSeiDiscontinuityFlag, "Discontinuity flag‡ssociatedoƒachime set")

1162 ("SEITimeCodeCÁDrÝ³dFÏg", 
cfg_timeCodeSeiCÁDrÝ³dFÏg
, cfg_timeCodeSeiCntDroppedFlag, "Counter dropped flag‡ssociatedoƒachime set")

1163 ("SEITimeCodeNumF¿mes", 
cfg_timeCodeSeiNumb”OfF¿mes
, cfg_timeCodeSeiNumberOfFrames, "Number of frames‡ssociatedoƒachime set")

1164 ("SEITimeCodeSecÚdsV®ue", 
cfg_timeCodeSeiSecÚdsV®ue
, cfg_timeCodeSeiSecondsValue, "Seconds value forƒachime set")

1165 ("SEITimeCodeMšu‹sV®ue", 
cfg_timeCodeSeiMšu‹sV®ue
, cfg_timeCodeSeiMinutesValue, "Minutes value forƒachime set")

1166 ("SEITimeCodeHoursV®ue", 
cfg_timeCodeSeiHoursV®ue
, cfg_timeCodeSeiHoursValue, "Hours value forƒachime set")

1167 ("SEITimeCodeSecÚdsFÏg", 
cfg_timeCodeSeiSecÚdsFÏg
, cfg_timeCodeSeiSecondsFlag, "Flago signal seconds value…resence inƒachime set")

1168 ("SEITimeCodeMšu‹sFÏg", 
cfg_timeCodeSeiMšu‹sFÏg
, cfg_timeCodeSeiMinutesFlag, "Flago signal minutes value…resence inƒachime set")

1169 ("SEITimeCodeHoursFÏg", 
cfg_timeCodeSeiHoursFÏg
, cfg_timeCodeSeiHoursFlag, "Flago signal hours value…resence inƒachime set")

1170 ("SEITimeCodeOff£tL’gth", 
cfg_timeCodeSeiTimeOff£tL’gth
, cfg_timeCodeSeiTimeOffsetLength, "Time offset†ength‡ssociatedoƒachime set")

1171 ("SEITimeCodeTimeOff£t", 
cfg_timeCodeSeiTimeOff£tV®ue
, cfg_timeCodeSeiTimeOffsetValue, "Time offset‡ssociatedoƒachime set")

1172 ("SEIKÃeFunùiÚInfo", 
m_kÃeSEIEÇbËd
, 
çl£
, "Control generation of Knee function SEI messages")

1173 ("SEIKÃeFunùiÚId", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeFunùiÚId
, 0, "Specifies Id of Knee function SEI message for‡ given session")

1174 ("SEIKÃeFunùiÚCªûlFÏg", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeFunùiÚCªûlFÏg
, 
çl£
, "Indicateshat Knee function SEI message cancelshe…ersistence or follows")

1175 ("SEIKÃeFunùiÚP”si¡’ûFÏg", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeFunùiÚP”si¡’ûFÏg
, 
Œue
, "Specifieshe…ersistence ofhe Knee function SEI message")

1176 ("SEIKÃeFunùiÚIÅutD¿nge", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_šputDRªge
, 1000, "Specifieshe…eak†uminance†evel forhe input…icture of Knee function SEI messages")

1177 ("SEIKÃeFunùiÚIÅutDi¥Lumšªû", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_šputDi¥Lumšªû
, 100, "Specifiesheƒxpected display brightness forhe input…icture of Knee function SEI messages")

1178 ("SEIKÃeFunùiÚOuutD¿nge", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_ouutDRªge
, 4000, "Specifieshe…eak†uminance†evel forhe output…icture of Knee function SEI messages")

1179 ("SEIKÃeFunùiÚOuutDi¥Lumšªû", 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_ouutDi¥Lumšªû
, 800, "Specifiesheƒxpected display brightness forhe output…icture of Knee function SEI messages")

1180 ("SEIKÃeFunùiÚNumKÃePoštsMšus1", 
cfg_kÃeSEINumKÃePoštsMšus1
, 2, "Specifieshe‚umber of knee…oints - 1")

1181 ("SEIKÃeFunùiÚIÅutKÃePoštV®ue", 
cfg_kÃeSEIIÅutKÃePoštV®ue
, cfg_kneeSEIInputKneePointValue, "Array of input knee…oint")

1182 ("SEIKÃeFunùiÚOuutKÃePoštV®ue", 
cfg_kÃeSEIOuutKÃePoštV®ue
, cfg_kneeSEIOutputKneePointValue, "Array of output knee…oint")

1183 ("SEIMa¡”šgDi¥ÏyCÞourVÞume", 
m_ma¡”šgDi¥Ïy
.
cÞourVÞumeSEIEÇbËd
, 
çl£
, "Control generation of mastering display colour volume SEI messages")

1184 ("SEIMa¡”šgDi¥ÏyMaxLumšªû", 
m_ma¡”šgDi¥Ïy
.
maxLumšªû
, 10000u, "Specifieshe mastering display maximum†uminance value in units of 1/10000 candela…er square metre (32-bit code value)")

1185 ("SEIMa¡”šgDi¥ÏyMšLumšªû", 
m_ma¡”šgDi¥Ïy
.
mšLumšªû
, 0u, "Specifieshe mastering display minimum†uminance value in units of 1/10000 candela…er square metre (32-bit code value)")

1186 ("SEIMa¡”šgDi¥ÏyPrim¬›s", 
cfg_Di¥ÏyPrim¬›sCode
, cfg_DisplayPrimariesCode, "Mastering display…rimaries for‡llhree colour…lanes in CIE xy coordinates in increments of 1/50000 (results inhe„anges 0o 50000 inclusive)")

1187 ("SEIMa¡”šgDi¥ÏyWh™ePošt", 
cfg_Di¥ÏyWh™ePoštCode
, cfg_DisplayWhitePointCode, "Mastering display white…oint CIE xy coordinates in‚ormalised increments of 1/50000 (e.g. 0.333 = 16667)")

1188 ("SEIP»ã¼edT¿nsãrCh¬aù”i¡ics", 
m_´eã¼edT¿nsãrCh¬aù”i¡ics
, -1, "Value forhe…referred_transfer_characteristics field ofhe Alternativeransfer characteristics SEI which will overridehe correspondingƒntry inhe VUI. If‚egative, do‚ot…roducehe„espective SEI message")

1189 ("SEIG»’M‘ad©aTy³", 
m_g»’M‘ad©aTy³
, 0u, "Value forhe green_metadata_type specifiesheype of metadatahat is…resent inhe SEI message. If green_metadata_type is 1,hen metadataƒnabling quality„ecovery‡fter†ow-powerƒncoding is…resent")

1190 ("SEIXSDM‘ricTy³", 
m_xsdM‘ricTy³
, 0u, "Value forhe xsd_metric_type indicatesheype ofhe objective quality metric. PSNR ishe onlyype currently supported")

1191 ("SEICCVEÇbËd", 
m_ccvSEIEÇbËd
, 
çl£
, "Enableshe Content Colour Volume SEI message")

1192 ("SEICCVCªûlFÏg", 
m_ccvSEICªûlFÏg
, 
Œue
, "Specifieshe…ersistence of‡ny…revious content colour volume SEI message in output order.")

1193 ("SEICCVP”si¡’ûFÏg", 
m_ccvSEIP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe content colour volume SEI message forhe current†ayer.")

1194 ("SEICCVPrim¬›sP»£Á", 
m_ccvSEIPrim¬›sP»£ÁFÏg
, 
Œue
, "Specifies whetherhe CCV…rimaries‡re…resent inhe content colour volume SEI message.")

1195 ("m_ccvSEIPrim¬›sX0", 
m_ccvSEIPrim¬›sX
[0], 0.300, "Specifieshe x coordinate ofhe first (green)…rimary forhe content colour volume SEI message")

1196 ("m_ccvSEIPrim¬›sY0", 
m_ccvSEIPrim¬›sY
[0], 0.600, "Specifieshe y coordinate ofhe first (green)…rimary forhe content colour volume SEI message")

1197 ("m_ccvSEIPrim¬›sX1", 
m_ccvSEIPrim¬›sX
[1], 0.150, "Specifieshe x coordinate ofhe second (blue)…rimary forhe content colour volume SEI message")

1198 ("m_ccvSEIPrim¬›sY1", 
m_ccvSEIPrim¬›sY
[1], 0.060, "Specifieshe y coordinate ofhe second (blue)…rimary forhe content colour volume SEI message")

1199 ("m_ccvSEIPrim¬›sX2", 
m_ccvSEIPrim¬›sX
[2], 0.640, "Specifieshe x coordinate ofhehird (red)…rimary forhe content colour volume SEI message")

1200 ("m_ccvSEIPrim¬›sY2", 
m_ccvSEIPrim¬›sY
[2], 0.330, "Specifieshe y coordinate ofhehird (red)…rimary forhe content colour volume SEI message")

1201 ("SEICCVMšLumšªûV®ueP»£Á", 
m_ccvSEIMšLumšªûV®ueP»£ÁFÏg
, 
Œue
, "Specifies whetherhe CCV min†uminance value is…resent inhe content colour volume SEI message")

1202 ("SEICCVMšLumšªûV®ue", 
m_ccvSEIMšLumšªûV®ue
, 0.0, "specifieshe CCV min†uminance value inhe content colour volume SEI message")

1203 ("SEICCVMaxLumšªûV®ueP»£Á", 
m_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
, 
Œue
, "Specifies whetherhe CCV max†uminance value is…resent inhe content colour volume SEI message")

1204 ("SEICCVMaxLumšªûV®ue", 
m_ccvSEIMaxLumšªûV®ue
, 0.1, "specifieshe CCV max†uminance value inhe content colour volume SEI message")

1205 ("SEICCVAvgLumšªûV®ueP»£Á", 
m_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
, 
Œue
, "Specifies whetherhe CCV‡vg†uminance value is…resent inhe content colour volume SEI message")

1206 ("SEICCVAvgLumšªûV®ue", 
m_ccvSEIAvgLumšªûV®ue
, 0.01, "specifieshe CCV‡vg†uminance value inhe content colour volume SEI message")

1207 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


1208 ("SEIShu‰”IÁ”v®EÇbËd", 
m_siiSEIEÇbËd
, 
çl£
, "Controls if shutter interval information SEI message isƒnabled")

1209 ("SEISiiTimeSÿË", 
m_siiSEITimeSÿË
, 27000000u, "Specifies sii_time_scale")

1210 ("SEISiiIÅutNumUn™sInShu‰”IÁ”v®", 
cfg_siiSEIIÅutNumUn™sInSI
, cfg_siiSEIInputNumUnitsInSI, "Specifies sub_layer_num_units_in_shutter_interval")

1212 #ià
SEI_ENCODER_CONTROL


1214 ("SEIFGCEÇbËd", 
m_fgcSEIEÇbËd
, 
çl£
, "Control generation ofhe film grain characteristics SEI message")

1215 ("SEIFGCCªûlFÏg", 
m_fgcSEICªûlFÏg
, 
Œue
, "Specifieshe…ersistence of‡ny…revious film grain characteristics SEI message in output order.")

1216 ("SEIFGCP”si¡’ûFÏg", 
m_fgcSEIP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe film grain characteristics SEI message forhe current†ayer.")

1217 ("SEIFGCMod–ID", 
m_fgcSEIMod–ID
, 0u, "Specifieshe film grain simulation model. 0: frequency filtering; 1:‡uto-regression.")

1218 ("SEIFGCS•CÞourDescP»£ÁFÏg", 
m_fgcSEIS•CÞourDescP»£ÁFÏg
, 
çl£
, "Specifieshe…resense of‡ distinct colour space description forhe film grain charactersitics specified inhe SEI message.")

1219 ("SEIFGCBËndšgModeID", 
m_fgcSEIBËndšgModeID
, 0u, "Specifieshe blending mode usedo blendhe simulated film grain withhe decoded images. 0:‡dditive; 1: multiplicative.")

1220 ("SEIFGCLog2SÿËFaùÜ", 
m_fgcSEILog2SÿËFaùÜ
, 0u, "Specifies‡ scale factor used inhe film grain characterizationƒquations.")

1221 ("SEIFGCCompMod–P»£ÁComp0", 
m_fgcSEICompMod–P»£Á
[0], 
çl£
, "Specifieshe…resense of film grain modelling on colour component 0.")

1222 ("SEIFGCCompMod–P»£ÁComp1", 
m_fgcSEICompMod–P»£Á
[1], 
çl£
, "Specifieshe…resense of film grain modelling on colour component 1.")

1223 ("SEIFGCCompMod–P»£ÁComp2", 
m_fgcSEICompMod–P»£Á
[2], 
çl£
, "Specifieshe…resense of film grain modelling on colour component 2.")

1224 #ià
FGS_RDD5_ENABLE


1225 ("SEIFGCNumIÁ’s™yIÁ”v®Mšus1Comp0", 
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[0], 0u, "Specifieshe‚umber of intensity intervals minus1 on colour component 0.")

1226 ("SEIFGCNumIÁ’s™yIÁ”v®Mšus1Comp1", 
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[1], 0u, "Specifieshe‚umber of intensity intervals minus1 on colour component 1.")

1227 ("SEIFGCNumIÁ’s™yIÁ”v®Mšus1Comp2", 
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[2], 0u, "Specifieshe‚umber of intensity intervals minus1 on colour component 2.")

1228 ("SEIFGCNumMod–V®uesMšus1Comp0", 
m_fgcSEINumMod–V®uesMšus1
[0], 0u, "Specifieshe‚umber of component model values minus1 on colour component 0.")

1229 ("SEIFGCNumMod–V®uesMšus1Comp1", 
m_fgcSEINumMod–V®uesMšus1
[1], 0u, "Specifieshe‚umber of component model values minus1 on colour component 1.")

1230 ("SEIFGCNumMod–V®uesMšus1Comp2", 
m_fgcSEINumMod–V®uesMšus1
[2], 0u, "Specifieshe‚umber of component model values minus1 on colour component 2.")

1231 ("SEIFGCIÁ’s™yIÁ”v®Low”BoundComp0", 
cfg_FgcSEIIÁ’s™yIÁ”v®Low”BoundComp
[0], cfg_FgcSEIIntensityIntervalLowerBoundComp[0], "Specifieshe†ower bound forhe intensity intervals on colour component 0.")

1232 ("SEIFGCIÁ’s™yIÁ”v®Low”BoundComp1", 
cfg_FgcSEIIÁ’s™yIÁ”v®Low”BoundComp
[1], cfg_FgcSEIIntensityIntervalLowerBoundComp[1], "Specifieshe†ower bound forhe intensity intervals on colour component 1.")

1233 ("SEIFGCIÁ’s™yIÁ”v®Low”BoundComp2", 
cfg_FgcSEIIÁ’s™yIÁ”v®Low”BoundComp
[2], cfg_FgcSEIIntensityIntervalLowerBoundComp[2], "Specifieshe†ower bound forhe intensity intervals on colour component 2.")

1234 ("SEIFGCIÁ’s™yIÁ”v®Uµ”BoundComp0", 
cfg_FgcSEIIÁ’s™yIÁ”v®Uµ”BoundComp
[0], cfg_FgcSEIIntensityIntervalUpperBoundComp[0], "Specifieshe upper bound forhe intensity intervals on colour component 0.")

1235 ("SEIFGCIÁ’s™yIÁ”v®Uµ”BoundComp1", 
cfg_FgcSEIIÁ’s™yIÁ”v®Uµ”BoundComp
[1], cfg_FgcSEIIntensityIntervalUpperBoundComp[1], "Specifieshe upper bound forhe intensity intervals on colour component 1.")

1236 ("SEIFGCIÁ’s™yIÁ”v®Uµ”BoundComp2", 
cfg_FgcSEIIÁ’s™yIÁ”v®Uµ”BoundComp
[2], cfg_FgcSEIIntensityIntervalUpperBoundComp[2], "Specifieshe upper bound forhe intensity intervals on colour component 2.")

1237 ("SEIFGCCompMod–V®uesComp0", 
cfg_FgcSEICompMod–V®ueComp
[0], cfg_FgcSEICompModelValueComp[0], "Specifieshe component model values on colour component 0.")

1238 ("SEIFGCCompMod–V®uesComp1", 
cfg_FgcSEICompMod–V®ueComp
[1], cfg_FgcSEICompModelValueComp[1], "Specifieshe component model values on colour component 1.")

1239 ("SEIFGCCompMod–V®uesComp2", 
cfg_FgcSEICompMod–V®ueComp
[2], cfg_FgcSEICompModelValueComp[2], "Specifieshe component model values on colour component 2.")

1242 ("SEICLLEÇbËd", 
m_þlSEIEÇbËd
, 
çl£
, "Control generation ofhe content†ight†evel SEI message")

1243 ("SEICLLMaxCÚ‹ÁLightLev–", 
m_þlSEIMaxCÚ‹ÁLev–
, 0u, "When‚otƒqualo 0, specifies‡n upper bound onhe maximum†ight†evel‡mong‡ll individual samples in‡ 4:4:4„epresentation "

1246 ("SEICLLMaxPicAvgLightLev–", 
m_þlSEIMaxPicAvgLev–
, 0u, "When‚otƒqualo 0, specifies‡n upper bound onhe maximum‡verage†ight†evel‡monghe samples in‡ 4:4:4„epresentation "

1250 ("SEIAVEEÇbËd", 
m_aveSEIEÇbËd
, 
çl£
, "Control generation ofhe‡mbient viewingƒnvironment SEI message")

1251 ("SEIAVEAmb›ÁIÎumšªû", 
m_aveSEIAmb›ÁIÎumšªû
, 100000u, "Specifiesheƒnvironmental illluminance ofhe‡mbient viewingƒnvironment in units of 1/10000†ux forhe‡mbient viewingƒnviornment SEI message")

1252 ("SEIAVEAmb›ÁLightX", 
m_aveSEIAmb›ÁLightX
, 15635u, "Specifieshe‚ormalized x chromaticity coordinate ofheƒnvironmental‡mbient†ight inhe‚ominal viewingƒnviornment‡ccordingohe CIE 1931 defination in units of 1/50000†ux forhe‡mbient viewingƒnviornment SEI message")

1253 ("SEIAVEAmb›ÁLightY", 
m_aveSEIAmb›ÁLightY
, 16450u, "Specifieshe‚ormalized y chromaticity coordinate ofheƒnvironmental‡mbient†ight inhe‚ominal viewingƒnviornment‡ccordingohe CIE 1931 defination in units of 1/50000†ux forhe‡mbient viewingƒnviornment SEI message")

1255 ("SEIE½EÇbËd", 
m_”pSEIEÇbËd
, 
çl£
, "Control generation ofƒquirectangular…rojection SEI messages")

1256 ("SEIE½CªûlFÏg", 
m_”pSEICªûlFÏg
, 
Œue
, "Indicatehatƒquirectangular…rojection SEI message cancelshe…ersistence or follows")

1257 ("SEIE½P”si¡’ûFÏg", 
m_”pSEIP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofheƒquirectangular…rojection SEI messages")

1258 ("SEIE½Gu¬dBªdFÏg", 
m_”pSEIGu¬dBªdFÏg
, 
çl£
, "Indicateheƒxistence of guard band‡reas inhe constituent…icture")

1259 ("SEIE½Gu¬dBªdTy³", 
m_”pSEIGu¬dBªdTy³
, 0u, "Indicateheype ofhe guard band")

1260 ("SEIE½LeáGu¬dBªdWidth", 
m_”pSEILeáGu¬dBªdWidth
, 0u, "Indicatehe width ofhe guard band onhe†eft side ofhe constituent…icture")

1261 ("SEIE½RightGu¬dBªdWidth", 
m_”pSEIRightGu¬dBªdWidth
, 0u, "Indicatehe width ofhe guard band onhe„ight side ofhe constituent…icture")

1262 ("SEISph”eRÙ©iÚEÇbËd", 
m_¥h”eRÙ©iÚSEIEÇbËd
, 
çl£
, "Control generation of sphere„otation SEI messages")

1263 ("SEISph”eRÙ©iÚCªûlFÏg", 
m_¥h”eRÙ©iÚSEICªûlFÏg
, 
Œue
, "Indicatehat sphere„otation SEI message cancelshe…ersistence or follows")

1264 ("SEISph”eRÙ©iÚP”si¡’ûFÏg", 
m_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe sphere„otation SEI messages")

1265 ("SEISph”eRÙ©iÚYaw", 
m_¥h”eRÙ©iÚSEIYaw
, 0, "Specifieshe value ofhe yaw„otation‡ngle")

1266 ("SEISph”eRÙ©iÚP™ch", 
m_¥h”eRÙ©iÚSEIP™ch
, 0, "Specifieshe value ofhe…itch„otation‡ngle")

1267 ("SEISph”eRÙ©iÚRÞl", 
m_¥h”eRÙ©iÚSEIRÞl
, 0, "Specifieshe value ofhe„oll„otation‡ngle")

1268 ("SEIOmniV›wpÜtEÇbËd", 
m_omniV›wpÜtSEIEÇbËd
, 
çl£
, "Control generation of omni viewport SEI messages")

1269 ("SEIOmniV›wpÜtId", 
m_omniV›wpÜtSEIId
, 0u, "An identifying‚umberhat may be usedo identifyhe…urpose ofhe one or more„ecommended viewport„egions")

1270 ("SEIOmniV›wpÜtCªûlFÏg", 
m_omniV›wpÜtSEICªûlFÏg
, 
Œue
, "Indicatehat omni viewport SEI message cancelshe…ersistence or follows")

1271 ("SEIOmniV›wpÜtP”si¡’ûFÏg", 
m_omniV›wpÜtSEIP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe omni viewport SEI messages")

1272 ("SEIOmniV›wpÜtCÁMšus1", 
m_omniV›wpÜtSEICÁMšus1
, 0u, "specifieshe‚umber of„ecommended viewport„egions minus 1")

1273 ("SEIOmniV›wpÜtAzimuthC’Œe", 
cfg_omniV›wpÜtSEIAzimuthC’Œe
, cfg_omniViewportSEIAzimuthCentre, "Indicatehe centre ofhe i-th„ecommended viewport„egion")

1274 ("SEIOmniV›wpÜtEËv©iÚC’Œe", 
cfg_omniV›wpÜtSEIEËv©iÚC’Œe
, cfg_omniViewportSEIElevationCentre, "Indicatehe centre ofhe i-th„ecommended viewport„egion")

1275 ("SEIOmniV›wpÜtTžtC’Œe", 
cfg_omniV›wpÜtSEITžtC’Œe
, cfg_omniViewportSEITiltCentre, "Indicatesheilt‡ngle ofhe i-th„ecommended viewport„egion")

1276 ("SEIOmniV›wpÜtHÜRªge", 
cfg_omniV›wpÜtSEIHÜRªge
, cfg_omniViewportSEIHorRange, "Indicateshe‡zimuth„ange ofhe i-th„ecommended viewport„egion")

1277 ("SEIOmniV›wpÜtV”Rªge", 
cfg_omniV›wpÜtSEIV”Rªge
, cfg_omniViewportSEIVerRange, "Indicatesheƒlevation„ange ofhe i-th„ecommended viewport„egion")

1278 ("SEICmpEÇbËd", 
m_cmpSEIEÇbËd
, 
çl£
, "Controls generation of cubemap…rojection SEI message")

1279 ("SEICmpCªûlFÏg", 
m_cmpSEICmpCªûlFÏg
, 
Œue
, "Specifieshe…ersistence of‡ny…revious cubemap…rojection SEI message in output order.")

1280 ("SEICmpP”si¡’ûFÏg", 
m_cmpSEICmpP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe cubemap…rojection SEI message forhe current†ayer.")

1281 ("SEIRwpEÇbËd", 
m_rwpSEIEÇbËd
, 
çl£
, "Controls if„egion-wise…acking SEI messageƒnabled")

1282 ("SEIRwpCªûlFÏg", 
m_rwpSEIRwpCªûlFÏg
, 
Œue
, "Specifieshe…ersistence of‡ny…revious„egion-wise…acking SEI message in output order.")

1283 ("SEIRwpP”si¡’ûFÏg", 
m_rwpSEIRwpP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe„egion-wise…acking SEI message forhe current†ayer.")

1284 ("SEIRwpCÚ¡™u’tPiùu»M©chšgFÏg", 
m_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
, 
çl£
, "Specifieshe information inhe SEI message‡pply individuallyoƒach constituent…icture orohe…rojected…icture.")

1285 ("SEIRwpNumPackedRegiÚs", 
m_rwpSEINumPackedRegiÚs
, 0, "specifieshe‚umber of…acked„egions when constituent…icture matching flag isƒqualo 0.")

1286 ("SEIRwpProjPiùu»Width", 
m_rwpSEIProjPiùu»Width
, 0, "Specifieshe width ofhe…rojected…icture.")

1287 ("SEIRwpProjPiùu»Height", 
m_rwpSEIProjPiùu»Height
, 0, "Specifieshe height ofhe…rojected…icture.")

1288 ("SEIRwpPackedPiùu»Width", 
m_rwpSEIPackedPiùu»Width
, 0, "specifieshe width ofhe…acked…icture.")

1289 ("SEIRwpPackedPiùu»Height", 
m_rwpSEIPackedPiùu»Height
, 0, "Specifieshe height ofhe…acked…icture.")

1290 ("SEIRwpT¿nsfÜmTy³", 
cfg_rwpSEIRwpT¿nsfÜmTy³
, cfg_rwpSEIRwpTransformType, "specifieshe„otation‡nd mirroringo be‡ppliedohe i-th…acked„egion.")

1291 ("SEIRwpGu¬dBªdFÏg", 
cfg_rwpSEIRwpGu¬dBªdFÏg
, cfg_rwpSEIRwpGuardBandFlag, "specifiesheƒxistence of guard band inhe i-th…acked„egion.")

1292 ("SEIRwpProjRegiÚWidth", 
cfg_rwpSEIProjRegiÚWidth
, cfg_rwpSEIProjRegionWidth, "specifieshe width ofhe i-th…rojected„egion.")

1293 ("SEIRwpProjRegiÚHeight", 
cfg_rwpSEIProjRegiÚHeight
, cfg_rwpSEIProjRegionHeight, "specifieshe height ofhe i-th…rojected„egion.")

1294 ("SEIRwpProjRegiÚTÝ", 
cfg_rwpSEIRwpSEIProjRegiÚTÝ
, cfg_rwpSEIRwpSEIProjRegionTop, "specifiesheop sample„ow ofhe i-th…rojected„egion.")

1295 ("SEIRwpProjRegiÚLeá", 
cfg_rwpSEIProjRegiÚLeá
, cfg_rwpSEIProjRegionLeft, "specifieshe†eft-most sample column ofhe i-th…rojected„egion.")

1296 ("SEIRwpPackedRegiÚWidth", 
cfg_rwpSEIPackedRegiÚWidth
, cfg_rwpSEIPackedRegionWidth, "specifieshe width ofhe i-th…acked„egion.")

1297 ("SEIRwpPackedRegiÚHeight", 
cfg_rwpSEIPackedRegiÚHeight
, cfg_rwpSEIPackedRegionHeight, "specifieshe height ofhe i-th…acked„egion.")

1298 ("SEIRwpPackedRegiÚTÝ", 
cfg_rwpSEIPackedRegiÚTÝ
, cfg_rwpSEIPackedRegionTop, "specifiesheop†uma sample„ow ofhe i-th…acked„egion.")

1299 ("SEIRwpPackedRegiÚLeá", 
cfg_rwpSEIPackedRegiÚLeá
, cfg_rwpSEIPackedRegionLeft, "specifieshe†eft-most†uma sample column ofhe i-th…acked„egion.")

1300 ("SEIRwpLeáGu¬dBªdWidth", 
cfg_rwpSEIRwpLeáGu¬dBªdWidth
, cfg_rwpSEIRwpLeftGuardBandWidth, "specifieshe width ofhe guard band onhe†eft side ofhe i-th…acked„egion.")

1301 ("SEIRwpRightGu¬dBªdWidth", 
cfg_rwpSEIRwpRightGu¬dBªdWidth
, cfg_rwpSEIRwpRightGuardBandWidth, "specifieshe width ofhe guard band onhe„ight side ofhe i-th…acked„egion.")

1302 ("SEIRwpTÝGu¬dBªdHeight", 
cfg_rwpSEIRwpTÝGu¬dBªdHeight
, cfg_rwpSEIRwpTopGuardBandHeight, "specifieshe height ofhe guard band‡bovehe i-th…acked„egion.")

1303 ("SEIRwpBÙtomGu¬dBªdHeight", 
cfg_rwpSEIRwpBÙtomGu¬dBªdHeight
, cfg_rwpSEIRwpBottomGuardBandHeight, "specifieshe height ofhe guard band belowhe i-th…acked„egion.")

1304 ("SEIRwpGu¬dBªdNÙU£dFÜP»dFÏg", 
cfg_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
, cfg_rwpSEIRwpGuardBandNotUsedForPredFlag, "Specifies ifhe guard bands is used inhe inter…rediction…rocess.")

1305 ("SEIRwpGu¬dBªdTy³", 
cfg_rwpSEIRwpGu¬dBªdTy³
, cfg_rwpSEIRwpGuardBandType, "Specifiesheype ofhe guard bands forhe i-th…acked„egion.")

1306 ("SEIFviEÇbËd", 
m_fisheyeVIdeoInfoSEIEÇbËd
, 
çl£
, "Controls if fisheye video information SEI messageƒnabled")

1307 ("SEIFviCªûlFÏg", 
m_fisheyeVideoInfoSEI
.
m_fisheyeCªûlFÏg
, 
Œue
, "Specifieshe…ersistence of‡ny…revious fisheye video information SEI message in output order.")

1308 ("SEIFviP”si¡’ûFÏg", 
m_fisheyeVideoInfoSEI
.
m_fisheyeP”si¡’ûFÏg
, 
çl£
, "Specifieshe…ersistence ofhe fisheye video information SEI message forhe current†ayer.")

1309 ("SEIFviV›wDim’siÚIdc", 
m_fisheyeVideoInfoSEI
.
m_fisheyeV›wDim’siÚIdc
, 0u, "Specifieshe‡lignment‡nd viewing direction of‡ fisheye†ens")

1310 ("SEIFviNumAùiveA»asMšus1", 
cfg_fviSEIFisheyeNumAùiveA»asMšus1
, 0u, "Specifieshe‚umber of‡ctive‡reas inhe coded…icture minus 1")

1311 ("SEIFviCœcuÏrRegiÚC’ŒeX", 
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeX
, cfg_fviSEIFisheyeCircularRegionCentreX, "Specifieshe horizontal coordinates ofhe centre ofhe circular„egionhat containshe i-th‡ctive‡rea inhe coded…icture")

1312 ("SEIFviCœcuÏrRegiÚC’ŒeY", 
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeY
, cfg_fviSEIFisheyeCircularRegionCentreY, "Specifieshe vertical coordinates ofhe centre ofhe circular„egionhat containshe i-th‡ctive‡rea inhe coded…icture")

1313 ("SEIFviReùRegiÚTÝ", 
cfg_fviSEIFisheyeReùRegiÚTÝ
, cfg_fviSEIFisheyeRectRegionTop, "Specifieshe vertical coordinates ofheop-left corner ofhe i-th„ectangular„egionhat containshe i-th‡ctive‡rea")

1314 ("SEIFviReùRegiÚLeá", 
cfg_fviSEIFisheyeReùRegiÚLeá
, cfg_fviSEIFisheyeRectRegionLeft, "Specifieshe horizontal coordinates ofheop-left corner ofhe i-th„ectangular„egionhat containshe i-th‡ctive‡rea")

1315 ("SEIFviReùRegiÚWidth", 
cfg_fviSEIFisheyeReùRegiÚWidth
, cfg_fviSEIFisheyeRectRegionWidth, "Specifieshe width ofhe i-th„ectangular„egionhat containshe i-th‡ctive‡rea")

1316 ("SEIFviReùRegiÚHeight", 
cfg_fviSEIFisheyeReùRegiÚHeight
, cfg_fviSEIFisheyeRectRegionHeight, "Specifieshe height ofhe i-th„ectangular„egionhat containshe i-th‡ctive‡rea")

1317 ("SEIFviCœcuÏrRegiÚRadius", 
cfg_fviSEIFisheyeCœcuÏrRegiÚRadius
, cfg_fviSEIFisheyeCircularRegionRadius, "Specifieshe„adius ofhe circular„egionhat containshe i-th‡ctive‡reahat is defined‡s‡†ength fromhe centre ofhe circular„egionohe outermost…ixel boundary ofhe circular„egion,hat correspondsohe maximum field of view ofhe i-th fisheye†ens")

1318 ("SEIFviSûÃRadius", 
cfg_fviSEIFisheyeSûÃRadius
, cfg_fviSEIFisheyeSceneRadius, "Specifieshe„adius of‡ circular„egion withinhe i-th‡ctive‡rea wherehe obstruction is‚ot included inhe„egion")

1319 ("SEIFviCam”aC’ŒeAzimuth", 
cfg_fviSEIFisheyeCam”aC’ŒeAzimuth
, cfg_fviSEIFisheyeCameraCentreAzimuth, "Indicateshe spherical coordinateshat correspondohe centre ofhe circular„egionhat containshe i-th‡ctive‡rea")

1320 ("SEIFviCam”aC’ŒeEËv©iÚ", 
cfg_fviSEIFisheyeCam”aC’ŒeEËv©iÚ
, cfg_fviSEIFisheyeCameraCentreElevation, "Indicateshe spherical coordinateshat correspondohe centre ofhe circular„egionhat containshe i-th‡ctive‡rea")

1321 ("SEIFviCam”aC’ŒeTžt", 
cfg_fviSEIFisheyeCam”aC’ŒeTžt
, cfg_fviSEIFisheyeCameraCentreTilt, "Indicateshe spherical coordinateshat correspondohe centre ofhe circular„egionhat containshe i-th‡ctive‡rea")

1322 ("SEIFviCam”aC’ŒeOff£tX", 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tX
, cfg_fviSEIFisheyeCameraCentreOffsetX, "Indicateshe XYZ offset values ofhe focal centre ofhe fisheye camera†ens correspondingohe i-th‡ctive‡rea fromhe focal centre origin ofhe overall fisheye camera configuration.")

1323 ("SEIFviCam”aC’ŒeOff£tY", 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tY
, cfg_fviSEIFisheyeCameraCentreOffsetY, "Indicateshe XYZ offset values ofhe focal centre ofhe fisheye camera†ens correspondingohe i-th‡ctive‡rea fromhe focal centre origin ofhe overall fisheye camera configuration.")

1324 ("SEIFviCam”aC’‹rOff£tZ", 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tZ
, cfg_fviSEIFisheyeCameraCentreOffsetZ, "Indicateshe XYZ offset values ofhe focal centre ofhe fisheye camera†ens correspondingohe i-th‡ctive‡rea fromhe focal centre origin ofhe overall fisheye camera configuration.")

1325 ("SEIFviF›ldOfV›w", 
cfg_fviSEIFisheyeF›ldOfV›w
, cfg_fviSEIFisheyeFieldOfView, "Specifieshe field of view ofhe†enshat correspondsohe i-th‡ctive‡rea")

1326 ("SEIFviNumPÞynomŸlCÛffs", 
cfg_fviSEIFisheyeNumPÞynomŸlCÛffs
, cfg_fviSEIFisheyeNumPolynomialCoeffs, "Specifieshe‚umber of…olynomial coefficients forhe circular„egion")

1327 ("SEIFviPÞynomŸlCÛff", 
cfg_fviSEIFisheyePÞynomŸlCÛff
, cfg_fviSEIFisheyePolynomialCoeff, "Specifieshe j-th…olynomial coefficient value ofhe curve functionhat mapshe‚ormalized distance of‡†uma sample fromhe centre ofhe circular„egion correspondingohe i-th‡ctive‡reaohe‡ngular value of‡ sphere coordinate fromhe‚ormal vector of‡‚ominal imaging…lanehat…asseshroughhe centre ofhe sphere coordinate system forhe i-th‡ctive„egion.")

1328 ("SEIRegiÚ®Ne¡šgFžeRoÙ,-ºs", 
m_»giÚ®Ne¡šgSEIFžeRoÙ
, 
	`¡ršg
(""), "Regional‚esting SEI…arameters„oot file‚ame (wo‚umƒxt); onlyhe file‚ame base iso be‡dded. Underscore‡nd POC would be‡utomatically‡dddedo . E.g. \"-rns„ns\" will search for files„ns_0.txt,„ns_1.txt, ...")

1329 ("SEIAÂÙ©edRegiÚsFžeRoÙ,-¬", 
m_¬SEIFžeRoÙ
, 
	`¡ršg
(""), "Annotated„egion SEI…arameters„oot file‚ame (wo‚umƒxt); onlyhe file‚ame base iso be‡dded. Underscore‡nd POC would be‡utomatically‡dddedo . E.g. \"-ar‡r\" will search for files‡r_0.txt,‡r_1.txt, ...")

1332 
Ýts
.
	`addO±iÚs
()

1333 ("TempÜ®Fž‹r", 
m_gÝBa£dTempÜ®Fž‹rEÇbËd
, 
çl£
, "Enable GOP basedemporal filter. Disabled…er default")

1334 ("TempÜ®Fž‹rFutu»Reã»nû", 
m_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
, 
Œue
, "Enable„eferencing of future frames inhe GOP basedemporal filter. This isypically disabled for Low Delay configurations.")

1335 ("TempÜ®Fž‹rSŒ’gthF¿me*", 
m_gÝBa£dTempÜ®Fž‹rSŒ’gths
, 
¡d
::
m­
<
IÁ
, 
DoubË
>(), "Strength forƒvery * frame in GOP basedemporal filter, where * is‡n integer."

1338 #ià
EXTENSION_360_VIDEO


1339 
TExt360AµEncCfg
::
TExt360AµEncCfgCÚ‹xt
 
ext360CfgCÚ‹xt
;

1340 
m_ext360
.
	`addO±iÚs
(
Ýts
, 
ext360CfgCÚ‹xt
);

1343 
IÁ
 
i
=1; i<
MAX_GOP
+1; i++)

1345 
¡d
::
o¡ršg¡»am
 
cOSS
;

1346 
cOSS
<<"F¿me"<<
i
;

1347 
Ýts
.
	`addO±iÚs
()(
cOSS
.
	`¡r
(), 
m_GOPLi¡
[
i
-1], 
	`GOPEÁry
());

1349 
po
::
	`£tDeçuÉs
(
Ýts
);

1350 
po
::
E¼ÜR•Ü‹r
 
”r
;

1351 cÚ¡ 
li¡
<cÚ¡ 
TCh¬
*>& 
¬gv_unhªdËd
 = 
po
::
	`sÿnArgv
(
Ýts
, 
¬gc
, (cÚ¡ TCh¬**è
¬gv
, 
”r
);

1353 
li¡
<cÚ¡ 
TCh¬
*>::
cÚ¡_™”©Ü
 
™
 = 
¬gv_unhªdËd
.
	`begš
(); iˆ!ð¬gv_unhªdËd.
	`’d
(); it++)

1355 
	`årštf
(
¡d”r
, "UnhªdËd‡rgum’ˆignÜed: `%s'\n", *
™
);

1358 ià(
¬gc
 =ð1 || 
do_h–p
)

1361 
po
::
	`doH–p
(
cout
, 
Ýts
);

1362  
çl£
;

1365 ià(
”r
.
is_”rÜed
)

1367 ià(!
w¬nUnknowP¬am‘”
)

1370  
çl£
;

1377 
m_šputFžeWidth
 = 
m_iSourûWidth
;

1378 
m_šputFžeHeight
 = 
m_iSourûHeight
;

1380 ià(!
šputP©hP»fix
.
	`em±y
(è&& iÅutP©hP»fix.
	`back
() != '/' && inputPathPrefix.back() != '\\' )

1382 
šputP©hP»fix
 += "/";

1384 
m_šputFžeName
 = 
šputP©hP»fix
 + m_inputFileName;

1386 
m_äamesToBeEncoded
 = ( m_äamesToBeEncoded + 
m_‹mpÜ®Sub§m¶eR©io
 - 1 ) / m_temporalSubsampleRatio;

1387 
m_adIÁ¿LambdaModif›r
 = 
cfg_adIÁ¿LambdaModif›r
.
v®ues
;

1388 if(
m_isF›ld
)

1391 
m_iSourûHeightOrg
 = 
m_iSourûHeight
;

1393 
m_iSourûHeight
 = m_iSourceHeight >> 1;

1395 
m_äamesToBeEncoded
 *= 2;

1398 ifÐ!
m_tžeUnifÜmS·cšgFÏg
 && 
m_numTžeCÞumnsMšus1
 > 0 )

1400 ià(
cfg_CÞumnWidth
.
v®ues
.
	`size
(è> 
m_numTžeCÞumnsMšus1
)

1402 
	`´štf
( "The‚umber of columns whose width‡re defined is†argerhanhe‡llowed‚umber of columns.\n" );

1403 
	`ex™
Ð
EXIT_FAILURE
 );

1405 ià(
cfg_CÞumnWidth
.
v®ues
.
	`size
(è< 
m_numTžeCÞumnsMšus1
)

1407 
	`´štf
( "The width of some columns is‚ot defined.\n" );

1408 
	`ex™
Ð
EXIT_FAILURE
 );

1412 
m_tžeCÞumnWidth
.
	`»size
(
m_numTžeCÞumnsMšus1
);

1413 
UIÁ
 
i
=0; i<
cfg_CÞumnWidth
.
v®ues
.
	`size
(); i++)

1415 
m_tžeCÞumnWidth
[
i
]=
cfg_CÞumnWidth
.
v®ues
[i];

1421 
m_tžeCÞumnWidth
.
	`þ—r
();

1424 ifÐ!
m_tžeUnifÜmS·cšgFÏg
 && 
m_numTžeRowsMšus1
 > 0 )

1426 ià(
cfg_RowHeight
.
v®ues
.
	`size
(è> 
m_numTžeRowsMšus1
)

1428 
	`´štf
( "The‚umber of„ows whose height‡re defined is†argerhanhe‡llowed‚umber of„ows.\n" );

1429 
	`ex™
Ð
EXIT_FAILURE
 );

1431 ià(
cfg_RowHeight
.
v®ues
.
	`size
(è< 
m_numTžeRowsMšus1
)

1433 
	`´štf
( "The height of some„ows is‚ot defined.\n" );

1434 
	`ex™
Ð
EXIT_FAILURE
 );

1438 
m_tžeRowHeight
.
	`»size
(
m_numTžeRowsMšus1
);

1439 
UIÁ
 
i
=0; i<
cfg_RowHeight
.
v®ues
.
	`size
(); i++)

1441 
m_tžeRowHeight
[
i
]=
cfg_RowHeight
.
v®ues
[i];

1447 
m_tžeRowHeight
.
	`þ—r
();

1451 ià(
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
 ] == 0)

1453 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
 ] = 
m_šputB™D•th
 [CHANNEL_TYPE_LUMA ];

1455 ià(
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_CHROMA
] == 0)

1457 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_CHROMA
] = m_MSBEx‹ndedB™D•th[
CHANNEL_TYPE_LUMA
 ];

1459 ià(
m_š‹º®B™D•th
 [
CHANNEL_TYPE_LUMA
 ] == 0)

1461 
m_š‹º®B™D•th
 [
CHANNEL_TYPE_LUMA
 ] = 
m_MSBEx‹ndedB™D•th
[CHANNEL_TYPE_LUMA ];

1463 ià(
m_š‹º®B™D•th
 [
CHANNEL_TYPE_CHROMA
] == 0)

1465 
m_š‹º®B™D•th
 [
CHANNEL_TYPE_CHROMA
] = m_š‹º®B™D•th [
CHANNEL_TYPE_LUMA
 ];

1467 ià(
m_šputB™D•th
 [
CHANNEL_TYPE_CHROMA
] == 0)

1469 
m_šputB™D•th
 [
CHANNEL_TYPE_CHROMA
] = m_šputB™D•th [
CHANNEL_TYPE_LUMA
 ];

1471 ià(
m_ouutB™D•th
 [
CHANNEL_TYPE_LUMA
 ] == 0)

1473 
m_ouutB™D•th
 [
CHANNEL_TYPE_LUMA
 ] = 
m_š‹º®B™D•th
 [CHANNEL_TYPE_LUMA ];

1475 ià(
m_ouutB™D•th
 [
CHANNEL_TYPE_CHROMA
] == 0)

1477 
m_ouutB™D•th
 [
CHANNEL_TYPE_CHROMA
] = 
m_š‹º®B™D•th
 [CHANNEL_TYPE_CHROMA];

1480 
m_IÅutChromaFÜm©IDC
 = 
	`numb”ToChromaFÜm©
(
tmpIÅutChromaFÜm©
);

1481 
m_chromaFÜm©IDC
 = ((
tmpChromaFÜm©
 =ð0è? (
m_IÅutChromaFÜm©IDC
è: (
	`numb”ToChromaFÜm©
(tmpChromaFormat)));

1483 #ià
EXTENSION_360_VIDEO


1484 
m_ext360
.
	`´oûssO±iÚs
(
ext360CfgCÚ‹xt
);

1487 
	`as£¹
(
tmpWeigh‹dP»diùiÚM‘hod
>=0 &&mpWeigh‹dP»diùiÚM‘hod<=
WP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING_AND_EXTENSION
);

1488 ià(!(
tmpWeigh‹dP»diùiÚM‘hod
>=0 &&mpWeigh‹dP»diùiÚM‘hod<=
WP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING_AND_EXTENSION
))

1490 
	`ex™
(
EXIT_FAILURE
);

1492 
m_weigh‹dP»diùiÚM‘hod
 = 
	`Weigh‹dP»diùiÚM‘hod
(
tmpWeigh‹dP»diùiÚM‘hod
);

1494 
	`as£¹
(
tmpFa¡IÁ”S—rchMode
>=0 &&mpFa¡IÁ”S—rchMode<=
FASTINTERSEARCH_MODE3
);

1495 ià(
tmpFa¡IÁ”S—rchMode
<0 ||mpFa¡IÁ”S—rchMode>
FASTINTERSEARCH_MODE3
)

1497 
	`ex™
(
EXIT_FAILURE
);

1499 
m_ç¡IÁ”S—rchMode
 = 
	`Fa¡IÁ”S—rchMode
(
tmpFa¡IÁ”S—rchMode
);

1501 
	`as£¹
(
tmpMÙiÚE¡im©iÚS—rchM‘hod
>=0 &&mpMÙiÚE¡im©iÚS—rchM‘hod<
MESEARCH_NUMBER_OF_METHODS
);

1502 ià(
tmpMÙiÚE¡im©iÚS—rchM‘hod
<0 ||mpMÙiÚE¡im©iÚS—rchM‘hod>=
MESEARCH_NUMBER_OF_METHODS
)

1504 
	`ex™
(
EXIT_FAILURE
);

1506 
m_mÙiÚE¡im©iÚS—rchM‘hod
=
	`MES—rchM‘hod
(
tmpMÙiÚE¡im©iÚS—rchM‘hod
);

1508 
UIProfže
)

1510 
UI_NONE
:

1511 
m_´ofže
 = 
Profže
::
NONE
;

1512 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1514 
UI_MAIN
:

1515 
m_´ofže
 = 
Profže
::
MAIN
;

1516 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1518 
UI_MAIN10
:

1519 
m_´ofže
 = 
Profže
::
MAIN10
;

1520 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1522 
UI_MAINSTILLPICTURE
:

1523 
m_´ofže
 = 
Profže
::
MAINSTILLPICTURE
;

1524 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1526 
UI_MAIN10_STILL_PICTURE
:

1527 
m_´ofže
 = 
Profže
::
MAIN10
;

1528 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
Œue
;

1530 
UI_MAINREXT
:

1531 
m_´ofže
 = 
Profže
::
MAINREXT
;

1532 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1534 
UI_HIGHTHROUGHPUTREXT
:

1535 
m_´ofže
 = 
Profže
::
HIGHTHROUGHPUTREXT
;

1536 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 
çl£
;

1539 ià(
UIProfže
 >= 1000 && UIProfile <= 12316)

1541 
m_´ofže
 = 
Profže
::
MAINREXT
;

1542 ià(
m_b™D•thCÚ¡¿št
 !ð0 || 
tmpCÚ¡¿štChromaFÜm©
 != 0)

1544 
	`årštf
(
¡d”r
, "Error: The bit depth‡nd chroma format constraints‡re‚ot used when‡nƒxplicit RExt…rofile is specified\n");

1545 
	`ex™
(
EXIT_FAILURE
);

1547 
m_b™D•thCÚ¡¿št
 = (
UIProfže
%100);

1548 
m_šŒaCÚ¡¿štFÏg
 = ((
UIProfže
%10000)>=2000);

1549 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = (
UIProfže
 >= 10000);

1550 (
UIProfže
/100)%10)

1552 0: 
tmpCÚ¡¿štChromaFÜm©
=400; ;

1553 1: 
tmpCÚ¡¿štChromaFÜm©
=420; ;

1554 2: 
tmpCÚ¡¿štChromaFÜm©
=422; ;

1555 : 
tmpCÚ¡¿štChromaFÜm©
=444; ;

1558 ià(
UIProfže
 >= 21308 && UIProfile <= 22316)

1560 
m_´ofže
 = 
Profže
::
HIGHTHROUGHPUTREXT
;

1561 ià(
m_b™D•thCÚ¡¿št
 !ð0 || 
tmpCÚ¡¿štChromaFÜm©
 != 0)

1563 
	`årštf
(
¡d”r
, "Error: The bit depth‡nd chroma format constraints‡re‚ot used when‡nƒxplicit RExt…rofile is specified\n");

1564 
	`ex™
(
EXIT_FAILURE
);

1566 
m_b™D•thCÚ¡¿št
 = (
UIProfže
%100);

1567 
m_šŒaCÚ¡¿štFÏg
 = ((
UIProfže
%10000)>=2000);

1568 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = 0;

1569 if((
UIProfže
 =ð
UI_HIGHTHROUGHPUT_444
è|| (UIProfž=ð
UI_HIGHTHROUGHPUT_444_10
) )

1571 
	`as£¹
(
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
==0);

1573 (
UIProfže
/100)%10)

1575 0: 
tmpCÚ¡¿štChromaFÜm©
=400; ;

1576 1: 
tmpCÚ¡¿štChromaFÜm©
=420; ;

1577 2: 
tmpCÚ¡¿štChromaFÜm©
=422; ;

1578 : 
tmpCÚ¡¿štChromaFÜm©
=444; ;

1583 
	`årštf
(
¡d”r
, "Error: Unprocessed UI…rofile\n");

1584 
	`as£¹
(0);

1585 
	`ex™
(
EXIT_FAILURE
);

1590 
m_´ofže
)

1592 
Profže
::
HIGHTHROUGHPUTREXT
:

1594 ià(
m_b™D•thCÚ¡¿št
 == 0)

1596 
m_b™D•thCÚ¡¿št
 = 16;

1598 
m_chromaFÜm©CÚ¡¿št
 = (
tmpCÚ¡¿štChromaFÜm©
 =ð0è? 
CHROMA_444
 : 
	`numb”ToChromaFÜm©
(tmpConstraintChromaFormat);

1601 
Profže
::
MAINREXT
:

1603 ià(
m_b™D•thCÚ¡¿št
 =ð0 && 
tmpCÚ¡¿štChromaFÜm©
 == 0)

1606 cÚ¡ 
BoÞ
 
bUsšgG’”®RExtToÞs
 = 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 ||

1607 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 ||

1608 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_IMPLICIT
] ||

1609 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_EXPLICIT
] ||

1610 !
m_’abËIÁ¿Reã»nûSmoÙhšg
 ||

1611 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 ||

1612 
m_log2MaxT¿nsfÜmSkBlockSize
!=2;

1613 cÚ¡ 
BoÞ
 
bUsšgChromaQPAdju¡m’t
ð
m_diffCuChromaQpOff£tD•th
 >= 0;

1614 cÚ¡ 
BoÞ
 
bUsšgEx‹ndedP»cisiÚ
 = 
m_ex‹ndedP»cisiÚProûssšgFÏg
;

1615 ià(
m_ÚePiùu»OÆyCÚ¡¿štFÏg
)

1617 
m_chromaFÜm©CÚ¡¿št
 = 
CHROMA_444
;

1618 ià(
m_šŒaCÚ¡¿štFÏg
 !ð
Œue
)

1620 
	`årštf
(
¡d”r
, "Error: Intra constraint flag must berue when one_picture_only_constraint_flag isrue\n");

1621 
	`ex™
(
EXIT_FAILURE
);

1623 cÚ¡ 
IÁ
 
maxB™D•th
 = 
m_chromaFÜm©IDC
==
CHROMA_400
 ? 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] : 
¡d
::
	`max
(m_š‹º®B™D•th[CHANNEL_TYPE_LUMA], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
]);

1624 
m_b™D•thCÚ¡¿št
 = 
maxB™D•th
>8 ? 16:8;

1628 
m_chromaFÜm©CÚ¡¿št
 = 
NUM_CHROMA_FORMAT
;

1629 
	`autom©iÿÎyS–eùRExtProfže
(
bUsšgG’”®RExtToÞs
,

1630 
bUsšgChromaQPAdju¡m’t
,

1631 
bUsšgEx‹ndedP»cisiÚ
,

1632 
m_šŒaCÚ¡¿štFÏg
,

1633 
m_b™D•thCÚ¡¿št
,

1634 
m_chromaFÜm©CÚ¡¿št
,

1635 
m_chromaFÜm©IDC
==
CHROMA_400
 ? 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] : 
¡d
::
	`max
(m_š‹º®B™D•th[CHANNEL_TYPE_LUMA], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
]),

1636 
m_chromaFÜm©IDC
);

1639 ià(
m_b™D•thCÚ¡¿št
 =ð0 || 
tmpCÚ¡¿štChromaFÜm©
 == 0)

1641 
	`årštf
(
¡d”r
, "Error: The bit depth‡nd chroma format constraints mustƒither both be specified or both be configured‡utomatically\n");

1642 
	`ex™
(
EXIT_FAILURE
);

1646 
m_chromaFÜm©CÚ¡¿št
 = 
	`numb”ToChromaFÜm©
(
tmpCÚ¡¿štChromaFÜm©
);

1650 
Profže
::
MAIN
:

1651 
Profže
::
MAIN10
:

1652 
Profže
::
MAINSTILLPICTURE
:

1653 
m_chromaFÜm©CÚ¡¿št
 = (
tmpCÚ¡¿štChromaFÜm©
 =ð0è? 
m_chromaFÜm©IDC
 : 
	`numb”ToChromaFÜm©
(tmpConstraintChromaFormat);

1654 
m_b™D•thCÚ¡¿št
 = (
m_´ofže
 =ð
Profže
::
MAIN10
?10:8);

1656 
Profže
::
NONE
:

1657 
m_chromaFÜm©CÚ¡¿št
 = 
m_chromaFÜm©IDC
;

1658 
m_b™D•thCÚ¡¿št
 = 
m_chromaFÜm©IDC
==
CHROMA_400
 ? 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] : 
¡d
::
	`max
(m_š‹º®B™D•th[CHANNEL_TYPE_LUMA], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
]);

1661 
	`årštf
(
¡d”r
, "Unknown…rofile selected\n");

1662 
	`ex™
(
EXIT_FAILURE
);

1667 
m_šputCÞourS·ûCÚv”t
 = 
	`¡ršgToIÅutCÞourS·ûCÚv”t
(
šputCÞourS·ûCÚv”t
, 
Œue
);

1669 
m_cÚfÜmªûWšdowMode
)

1674 
m_cÚfWšLeá
 = 
m_cÚfWšRight
 = 
m_cÚfWšTÝ
 = 
m_cÚfWšBÙtom
 = 0;

1675 
m_aiPad
[1] = m_aiPad[0] = 0;

1681 
IÁ
 
mšCuSize
 = 
m_uiMaxCUHeight
 >> (
m_uiMaxCUD•th
 - 1);

1682 ià(
m_iSourûWidth
 % 
mšCuSize
)

1684 
m_aiPad
[0] = 
m_cÚfWšRight
 = ((
m_iSourûWidth
 / 
mšCuSize
) + 1) * minCuSize - m_iSourceWidth;

1685 
m_iSourûWidth
 +ð
m_cÚfWšRight
;

1687 ià(
m_iSourûHeight
 % 
mšCuSize
)

1689 
m_aiPad
[1] = 
m_cÚfWšBÙtom
 = ((
m_iSourûHeight
 / 
mšCuSize
) + 1) * minCuSize - m_iSourceHeight;

1690 
m_iSourûHeight
 +ð
m_cÚfWšBÙtom
;

1691 iàÐ
m_isF›ld
 )

1693 
m_iSourûHeightOrg
 +ð
m_cÚfWšBÙtom
 << 1;

1694 
m_aiPad
[1] = 
m_cÚfWšBÙtom
 << 1;

1697 ià(
m_aiPad
[0] % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0)

1699 
	`årštf
(
¡d”r
, "Error:…icture width is‚ot‡n integer multiple ofhe specified chroma subsampling\n");

1700 
	`ex™
(
EXIT_FAILURE
);

1702 ià(
m_aiPad
[1] % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0)

1704 
	`årštf
(
¡d”r
, "Error:…icture height is‚ot‡n integer multiple ofhe specified chroma subsampling\n");

1705 
	`ex™
(
EXIT_FAILURE
);

1712 
m_iSourûWidth
 +ð
m_aiPad
[0];

1713 
m_iSourûHeight
 +ð
m_aiPad
[1];

1714 
m_cÚfWšRight
 = 
m_aiPad
[0];

1715 
m_cÚfWšBÙtom
 = 
m_aiPad
[1];

1721 ià((
m_cÚfWšLeá
 =ð0è&& (
m_cÚfWšRight
 =ð0è&& (
m_cÚfWšTÝ
 =ð0è&& (
m_cÚfWšBÙtom
 == 0))

1723 
	`årštf
(
¡d”r
, "Warning: Conformance windowƒnabled, but‡ll conformance window…arameters seto zero\n");

1725 ià((
m_aiPad
[1] != 0) || (m_aiPad[0]!=0))

1727 
	`årštf
(
¡d”r
, "Warning: Conformance windowƒnabled,…adding…arameters will be ignored\n");

1729 
m_aiPad
[1] = m_aiPad[0] = 0;

1734 ià(
tmpSliûMode
<0 ||mpSliûMode>=
	`IÁ
(
NUMBER_OF_SLICE_CONSTRAINT_MODES
))

1736 
	`årštf
(
¡d”r
, "Error: bad slice mode\n");

1737 
	`ex™
(
EXIT_FAILURE
);

1739 
m_¦iûMode
 = 
	`SliûCÚ¡¿št
(
tmpSliûMode
);

1740 ià(
tmpSliûSegm’tMode
<0 ||mpSliûSegm’tMode>=
	`IÁ
(
NUMBER_OF_SLICE_CONSTRAINT_MODES
))

1742 
	`årštf
(
¡d”r
, "Error: bad slice segment mode\n");

1743 
	`ex™
(
EXIT_FAILURE
);

1745 
m_¦iûSegm’tMode
 = 
	`SliûCÚ¡¿št
(
tmpSliûSegm’tMode
);

1747 ià(
tmpDecodedPiùu»HashSEIM­³dTy³
<0 ||mpDecodedPiùu»HashSEIM­³dTy³>=
	`IÁ
(
NUMBER_OF_HASHTYPES
))

1749 
	`årštf
(
¡d”r
, "Error: bad checksum mode\n");

1750 
	`ex™
(
EXIT_FAILURE
);

1753 ià(
tmpDecodedPiùu»HashSEIM­³dTy³
==0)

1755 
m_decodedPiùu»HashSEITy³
=
HASHTYPE_NONE
;

1759 
m_decodedPiùu»HashSEITy³
=
	`HashTy³
(
tmpDecodedPiùu»HashSEIM­³dTy³
-1);

1763 
m_aidQP
 = 
Ãw
 
IÁ
[ 
m_äamesToBeEncoded
 + 
m_iGOPSize
 + 1 ];

1764 ::
	`mem£t
Ð
m_aidQP
, 0, (
IÁ
)*Ð
m_äamesToBeEncoded
 + 
m_iGOPSize
 + 1 ) );

1766 ià(
m_qpInüem’tAtSourûF¿me
.
bP»£Á
)

1768 
UIÁ
 
sw™chšgPOC
=0;

1769 ià(
m_qpInüem’tAtSourûF¿me
.
v®ue
 > 
m_F¿meSk
)

1774 
sw™chšgPOC
 = (
m_qpInüem’tAtSourûF¿me
.
v®ue
 - 
m_F¿meSk
è/ 
m_‹mpÜ®Sub§m¶eR©io
;

1776 
UIÁ
 
i
=
sw™chšgPOC
; i<Ð
m_äamesToBeEncoded
 + 
m_iGOPSize
 + 1 ); i++)

1778 
m_aidQP
[
i
]=1;

1782 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

1784 ià(
§oOff£tB™Shiá
[
ch
]<0)

1786 ià(
m_š‹º®B™D•th
[
ch
]>10)

1788 
m_log2SaoOff£tSÿË
[
ch
]=
	`UIÁ
(
Cl3
<
IÁ
>(0, 
m_š‹º®B™D•th
[ch]-10, 
	`IÁ
(m_š‹º®B™D•th[ch]-10 + 0.165*
m_iQP
 - 3.22 + 0.5) ) );

1792 
m_log2SaoOff£tSÿË
[
ch
]=0;

1797 
m_log2SaoOff£tSÿË
[
ch
]=
	`UIÁ
(
§oOff£tB™Shiá
[ch]);

1801 
	`as£¹
(
lumaLev–ToD–QPMode
<
LUMALVL_TO_DQP_NUM_MODES
);

1802 ià(
lumaLev–ToD–QPMode
>=
LUMALVL_TO_DQP_NUM_MODES
)

1804 
	`ex™
(
EXIT_FAILURE
);

1806 
m_lumaLev–ToD–QPM­pšg
.
mode
=
	`LumaLev–ToDQPMode
(
lumaLev–ToD–QPMode
);

1808 ià(
m_lumaLev–ToD–QPM­pšg
.
mode
)

1810 
	`as£¹
Ð
cfg_lumaLev–toDQPM­pšgLuma
.
v®ues
.
	`size
(è=ð
cfg_lumaLev–toDQPM­pšgQP
.values.size() );

1811 
m_lumaLev–ToD–QPM­pšg
.
m­pšg
.
	`»size
(
cfg_lumaLev–toDQPM­pšgLuma
.
v®ues
.
	`size
());

1812 
UIÁ
 
i
=0; i<
cfg_lumaLev–toDQPM­pšgLuma
.
v®ues
.
	`size
(); i++)

1814 
m_lumaLev–ToD–QPM­pšg
.
m­pšg
[
i
]=
¡d
::
·œ
<
IÁ
,IÁ>(
cfg_lumaLev–toDQPM­pšgLuma
.
v®ues
[i], 
cfg_lumaLev–toDQPM­pšgQP
.values[i]);

1819 iàÐ!
m_dQPFžeName
.
	`em±y
() )

1821 
FILE
* 
åt
=
	`fÝ’
Ð
m_dQPFžeName
.
	`c_¡r
(), "r" );

1822 iàÐ
åt
 )

1824 
IÁ
 
iV®ue
;

1825 
IÁ
 
iPOC
 = 0;

1826  
iPOC
 < 
m_äamesToBeEncoded
 )

1828 iàÐ
	`fsÿnf
(
åt
, "%d", &
iV®ue
 ) =ð
EOF
 )

1832 
m_aidQP
[ 
iPOC
 ] = 
iV®ue
;

1833 
iPOC
++;

1835 
	`fþo£
(
åt
);

1839 ifÐ
m_ma¡”šgDi¥Ïy
.
cÞourVÞumeSEIEÇbËd
 )

1841 
UIÁ
 
idx
=0; idx<6; idx++)

1843 
m_ma¡”šgDi¥Ïy
.
´im¬›s
[
idx
/2][idx%2] = 
	`UShÜt
((
cfg_Di¥ÏyPrim¬›sCode
.
v®ues
.
	`size
() > idx) ? cfg_DisplayPrimariesCode.values[idx] : 0);

1845 
UIÁ
 
idx
=0; idx<2; idx++)

1847 
m_ma¡”šgDi¥Ïy
.
wh™ePošt
[
idx
] = 
	`UShÜt
((
cfg_Di¥ÏyWh™ePoštCode
.
v®ues
.
	`size
() > idx) ? cfg_DisplayWhitePointCode.values[idx] : 0);

1851 ifÐ
m_tÚeM­pšgInfoSEIEÇbËd
 && !
m_tÚeM­CªûlFÏg
 )

1853 ifÐ
m_tÚeM­Mod–Id
 =ð2 && !
cfg_¡¬tOfCodedIÁ”v®
.
v®ues
.
	`em±y
() )

1855 cÚ¡ 
UIÁ
 
num
 = 1u<< 
m_tÚeM­T¬g‘B™D•th
;

1856 
m_¡¬tOfCodedIÁ”v®
 = 
Ãw
 
IÁ
[
num
];

1857 
UIÁ
 
i
=0; i<
num
; i++)

1859 
m_¡¬tOfCodedIÁ”v®
[
i
] = 
cfg_¡¬tOfCodedIÁ”v®
.
v®ues
.
	`size
() > i ? cfg_startOfCodedInterval.values[i] : 0;

1864 
m_¡¬tOfCodedIÁ”v®
 = 
NULL
;

1866 ifÐÐ
m_tÚeM­Mod–Id
 =ð3 ) && ( 
m_numPivÙs
 > 0 ) )

1868 ifÐ!
cfg_codedPivÙV®ue
.
v®ues
.
	`em±y
(è&& !
cfg_rg‘PivÙV®ue
.values.empty() )

1870 
m_codedPivÙV®ue
 = 
Ãw
 
IÁ
[
m_numPivÙs
];

1871 
m_rg‘PivÙV®ue
 = 
Ãw
 
IÁ
[
m_numPivÙs
];

1872 
UIÁ
 
i
=0; i<
m_numPivÙs
; i++)

1874 
m_codedPivÙV®ue
[
i
] = 
cfg_codedPivÙV®ue
.
v®ues
.
	`size
() > i ? cfg_codedPivotValue.values [i] : 0;

1875 
m_rg‘PivÙV®ue
[
i
] = 
cfg_rg‘PivÙV®ue
.
v®ues
.
	`size
() > i ? cfg_targetPivotValue.values[i] : 0;

1881 
m_codedPivÙV®ue
 = 
NULL
;

1882 
m_rg‘PivÙV®ue
 = 
NULL
;

1886 ifÐ
m_kÃeSEIEÇbËd
 && !
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeFunùiÚCªûlFÏg
 )

1888 
	`as£¹
 ( 
cfg_kÃeSEINumKÃePoštsMšus1
 >= 0 && cfg_kneeSEINumKneePointsMinus1 < 999 );

1889 
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeSEIKÃePoštPaœs
.
	`»size
(
cfg_kÃeSEINumKÃePoštsMšus1
+1);

1890 
IÁ
 
i
=0; i<(
cfg_kÃeSEINumKÃePoštsMšus1
+1); i++)

1892 
TEncCfg
::
TEncSEIKÃeFunùiÚInfÜm©iÚ
::
KÃePoštPaœ
 &
kµ
=
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeSEIKÃePoštPaœs
[
i
];

1893 
kµ
.
šputKÃePošt
 = 
cfg_kÃeSEIIÅutKÃePoštV®ue
.
v®ues
.
	`size
(è> 
i
 ? cfg_kneeSEIInputKneePointValue.values[i] : 1;

1894 
kµ
.
ouutKÃePošt
 = 
cfg_kÃeSEIOuutKÃePoštV®ue
.
v®ues
.
	`size
(è> 
i
 ? cfg_kneeSEIOutputKneePointValue.values[i] : 0;

1898 iàÐ
m_omniV›wpÜtSEIEÇbËd
 && !
m_omniV›wpÜtSEICªûlFÏg
 )

1900 
	`as£¹
 ( 
m_omniV›wpÜtSEICÁMšus1
 >= 0 && m_omniViewportSEICntMinus1 < 16 );

1901 
m_omniV›wpÜtSEIAzimuthC’Œe
.
	`»size
 (
m_omniV›wpÜtSEICÁMšus1
+1);

1902 
m_omniV›wpÜtSEIEËv©iÚC’Œe
.
	`»size
(
m_omniV›wpÜtSEICÁMšus1
+1);

1903 
m_omniV›wpÜtSEITžtC’Œe
.
	`»size
 (
m_omniV›wpÜtSEICÁMšus1
+1);

1904 
m_omniV›wpÜtSEIHÜRªge
.
	`»size
 (
m_omniV›wpÜtSEICÁMšus1
+1);

1905 
m_omniV›wpÜtSEIV”Rªge
.
	`»size
 (
m_omniV›wpÜtSEICÁMšus1
+1);

1906 
IÁ
 
i
=0; i<(
m_omniV›wpÜtSEICÁMšus1
+1); i++)

1908 
m_omniV›wpÜtSEIAzimuthC’Œe
[
i
] = 
cfg_omniV›wpÜtSEIAzimuthC’Œe
 .
v®ues
.
	`size
() > i ? cfg_omniViewportSEIAzimuthCentre .values[i] : 0;

1909 
m_omniV›wpÜtSEIEËv©iÚC’Œe
[
i
] = 
cfg_omniV›wpÜtSEIEËv©iÚC’Œe
.
v®ues
.
	`size
() > i ? cfg_omniViewportSEIElevationCentre.values[i] : 0;

1910 
m_omniV›wpÜtSEITžtC’Œe
[
i
] = 
cfg_omniV›wpÜtSEITžtC’Œe
 .
v®ues
.
	`size
() > i ? cfg_omniViewportSEITiltCentre .values[i] : 0;

1911 
m_omniV›wpÜtSEIHÜRªge
[
i
] = 
cfg_omniV›wpÜtSEIHÜRªge
 .
v®ues
.
	`size
() > i ? cfg_omniViewportSEIHorRange .values[i] : 0;

1912 
m_omniV›wpÜtSEIV”Rªge
[
i
] = 
cfg_omniV›wpÜtSEIV”Rªge
 .
v®ues
.
	`size
() > i ? cfg_omniViewportSEIVerRange .values[i] : 0;

1916 if(!
m_rwpSEIRwpCªûlFÏg
 && 
m_rwpSEIEÇbËd
)

1918 
	`as£¹
 ( 
m_rwpSEINumPackedRegiÚs
 > 0 && m_rwpSEINumPackedRegiÚ <ð
¡d
::
num”ic_lim™s
<
UCh¬
>::
	`max
() );

1919 
	`as£¹
 (
cfg_rwpSEIRwpT¿nsfÜmTy³
.
v®ues
.
	`size
(è=ð
m_rwpSEINumPackedRegiÚs
 && 
cfg_rwpSEIRwpGu¬dBªdFÏg
.v®ues.size(è=ðm_rwpSEINumPackedRegiÚ && 
cfg_rwpSEIProjRegiÚWidth
.values.size() == m_rwpSEINumPackedRegions &&

1920 
cfg_rwpSEIProjRegiÚHeight
.
v®ues
.
	`size
(è=ð
m_rwpSEINumPackedRegiÚs
 && 
cfg_rwpSEIRwpSEIProjRegiÚTÝ
.v®ues.size(è=ðm_rwpSEINumPackedRegiÚ && 
cfg_rwpSEIProjRegiÚLeá
.values.size() == m_rwpSEINumPackedRegions &&

1921 
cfg_rwpSEIPackedRegiÚWidth
.
v®ues
.
	`size
(è=ð
m_rwpSEINumPackedRegiÚs
 && 
cfg_rwpSEIPackedRegiÚHeight
.v®ues.size(è=ðm_rwpSEINumPackedRegiÚ && 
cfg_rwpSEIPackedRegiÚTÝ
.values.size() == m_rwpSEINumPackedRegions &&

1922 
cfg_rwpSEIPackedRegiÚLeá
.
v®ues
.
	`size
(è=ð
m_rwpSEINumPackedRegiÚs
);

1923 
m_rwpSEIRwpT¿nsfÜmTy³
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1924 
m_rwpSEIRwpGu¬dBªdFÏg
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1925 
m_rwpSEIProjRegiÚWidth
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1926 
m_rwpSEIProjRegiÚHeight
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1927 
m_rwpSEIRwpSEIProjRegiÚTÝ
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1928 
m_rwpSEIProjRegiÚLeá
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1929 
m_rwpSEIPackedRegiÚWidth
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1930 
m_rwpSEIPackedRegiÚHeight
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1931 
m_rwpSEIPackedRegiÚTÝ
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1932 
m_rwpSEIPackedRegiÚLeá
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1933 
m_rwpSEIRwpLeáGu¬dBªdWidth
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1934 
m_rwpSEIRwpRightGu¬dBªdWidth
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1935 
m_rwpSEIRwpTÝGu¬dBªdHeight
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1936 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1937 
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
.
	`»size
(
m_rwpSEINumPackedRegiÚs
);

1938 
m_rwpSEIRwpGu¬dBªdTy³
.
	`»size
(4*
m_rwpSEINumPackedRegiÚs
);

1939  
IÁ
 
i
=0; i < 
m_rwpSEINumPackedRegiÚs
; i++ )

1941 
m_rwpSEIRwpT¿nsfÜmTy³
[
i
] = 
cfg_rwpSEIRwpT¿nsfÜmTy³
.
v®ues
[i];

1942 
	`as£¹
 ( 
m_rwpSEIRwpT¿nsfÜmTy³
[
i
] >= 0 && m_rwpSEIRwpTransformType[i] <= 7 );

1943 
m_rwpSEIRwpGu¬dBªdFÏg
[
i
] = 
cfg_rwpSEIRwpGu¬dBªdFÏg
.
v®ues
[i];

1944 
m_rwpSEIProjRegiÚWidth
[
i
] = 
cfg_rwpSEIProjRegiÚWidth
.
v®ues
[i];

1945 
m_rwpSEIProjRegiÚHeight
[
i
] = 
cfg_rwpSEIProjRegiÚHeight
.
v®ues
[i];

1946 
m_rwpSEIRwpSEIProjRegiÚTÝ
[
i
] = 
cfg_rwpSEIRwpSEIProjRegiÚTÝ
.
v®ues
[i];

1947 
m_rwpSEIProjRegiÚLeá
[
i
] = 
cfg_rwpSEIProjRegiÚLeá
.
v®ues
[i];

1948 
m_rwpSEIPackedRegiÚWidth
[
i
] = 
cfg_rwpSEIPackedRegiÚWidth
.
v®ues
[i];

1949 
m_rwpSEIPackedRegiÚHeight
[
i
] = 
cfg_rwpSEIPackedRegiÚHeight
.
v®ues
[i];

1950 
m_rwpSEIPackedRegiÚTÝ
[
i
] = 
cfg_rwpSEIPackedRegiÚTÝ
.
v®ues
[i];

1951 
m_rwpSEIPackedRegiÚLeá
[
i
] = 
cfg_rwpSEIPackedRegiÚLeá
.
v®ues
[i];

1952 ifÐ
m_rwpSEIRwpGu¬dBªdFÏg
[
i
] )

1954 
m_rwpSEIRwpLeáGu¬dBªdWidth
[
i
] = 
cfg_rwpSEIRwpLeáGu¬dBªdWidth
.
v®ues
[i];

1955 
m_rwpSEIRwpRightGu¬dBªdWidth
[
i
] = 
cfg_rwpSEIRwpRightGu¬dBªdWidth
.
v®ues
[i];

1956 
m_rwpSEIRwpTÝGu¬dBªdHeight
[
i
] = 
cfg_rwpSEIRwpTÝGu¬dBªdHeight
.
v®ues
[i];

1957 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
[
i
] = 
cfg_rwpSEIRwpBÙtomGu¬dBªdHeight
.
v®ues
[i];

1958 
	`as£¹
 ( 
m_rwpSEIRwpLeáGu¬dBªdWidth
[
i
] > 0 || 
m_rwpSEIRwpRightGu¬dBªdWidth
[i] > 0 || 
m_rwpSEIRwpTÝGu¬dBªdHeight
[i] >0 || 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
[i] >0 );

1959 
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
[
i
] = 
cfg_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
.
v®ues
[i];

1960  
IÁ
 
j
=0; j < 4; j++ )

1962 
m_rwpSEIRwpGu¬dBªdTy³
[
i
*4 + 
j
] = 
cfg_rwpSEIRwpGu¬dBªdTy³
.
v®ues
[i*4 + j];

1968 ià(!
m_fisheyeVideoInfoSEI
.
m_fisheyeCªûlFÏg
 && 
m_fisheyeVIdeoInfoSEIEÇbËd
)

1970 ià(
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 < 0 || cfg_fviSEIFisheyeNumAùiveA»asMšus1 > 3è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI‡ùiv¬—s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1971 ià(
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeX
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cœcuÏ¸»giÚ c’ŒXƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1972 ià(
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeY
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cœcuÏ¸»giÚ c’ŒYƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1973 ià(
cfg_fviSEIFisheyeReùRegiÚTÝ
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI„eù„egiÚÝƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1974 ià(
cfg_fviSEIFisheyeReùRegiÚLeá
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI„eù„egiÚ†eáƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1975 ià(
cfg_fviSEIFisheyeReùRegiÚWidth
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI„eù„egiÚ widthƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1976 ià(
cfg_fviSEIFisheyeReùRegiÚHeight
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI„eù„egiÚ heighˆ’Œ›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1977 ià(
cfg_fviSEIFisheyeCœcuÏrRegiÚRadius
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cœcuÏ¸»giÚ„adiu ’Œ›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1978 ià(
cfg_fviSEIFisheyeSûÃRadius
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI sûÃ„adiu ’Œ›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1980 ià(
cfg_fviSEIFisheyeCam”aC’ŒeAzimuth
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ»‡zimuthƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1981 ià(
cfg_fviSEIFisheyeCam”aC’ŒeEËv©iÚ
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ»ƒËv©iÚƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1982 ià(
cfg_fviSEIFisheyeCam”aC’ŒeTžt
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ»žˆ’Œ›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1983 ià(
cfg_fviSEIFisheyeCam”aC’ŒeOff£tX
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ» off£tXƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1984 ià(
cfg_fviSEIFisheyeCam”aC’ŒeOff£tY
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ» off£tYƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1985 ià(
cfg_fviSEIFisheyeCam”aC’ŒeOff£tZ
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI cam”¨ûÁ» off£tZƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1986 ià(
cfg_fviSEIFisheyeF›ldOfV›w
.
v®ues
.
	`size
(è!ð
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1è{ 
	`årštf
(
¡d”r
, "Bad‚umb” oàFVI f›ld oàv›wƒÁr›s\n"); 
	`ex™
(
EXIT_FAILURE
); }

1988 
m_fisheyeVideoInfoSEI
.
m_fisheyeAùiveA»as
.
	`»size
(
cfg_fviSEIFisheyeNumAùiveA»asMšus1
 + 1);

1990 
¡d
::
size_t
 
i
 = 0, 
exŒaùPÞynomŸlIdx
 = 0; i < 
m_fisheyeVideoInfoSEI
.
m_fisheyeAùiveA»as
.
	`size
(); i++)

1992 
TComSEIFisheyeVideoInfo
::
AùiveA»aInfo
 &
šfo
=
m_fisheyeVideoInfoSEI
.
m_fisheyeAùiveA»as
[
i
];

1993 
šfo
.
m_fisheyeCœcuÏrRegiÚC’ŒeX
 = 
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeX
.
v®ues
[
i
];

1994 
šfo
.
m_fisheyeCœcuÏrRegiÚC’ŒeY
 = 
cfg_fviSEIFisheyeCœcuÏrRegiÚC’ŒeY
.
v®ues
[
i
];

1995 
šfo
.
m_fisheyeReùRegiÚTÝ
 = 
cfg_fviSEIFisheyeReùRegiÚTÝ
.
v®ues
[
i
];

1996 
šfo
.
m_fisheyeReùRegiÚLeá
 = 
cfg_fviSEIFisheyeReùRegiÚLeá
.
v®ues
[
i
];

1997 
šfo
.
m_fisheyeReùRegiÚWidth
 = 
cfg_fviSEIFisheyeReùRegiÚWidth
.
v®ues
[
i
];

1998 
šfo
.
m_fisheyeReùRegiÚHeight
 = 
cfg_fviSEIFisheyeReùRegiÚHeight
.
v®ues
[
i
];

1999 
šfo
.
m_fisheyeCœcuÏrRegiÚRadius
 = 
cfg_fviSEIFisheyeCœcuÏrRegiÚRadius
.
v®ues
[
i
];

2000 
šfo
.
m_fisheyeSûÃRadius
 = 
cfg_fviSEIFisheyeSûÃRadius
.
v®ues
[
i
];

2003 iàÐ(!Ð
šfo
.
m_fisheyeReùRegiÚHeight
 >ð1 && 
m_cÚfWšTÝ
 <ðšfo.
m_fisheyeReùRegiÚTÝ
 && info.m_fisheyeReùRegiÚTÝ + info.m_fisheyeReùRegiÚHeighˆ< 
m_iSourûHeight
 -
m_cÚfWšBÙtom
 ) ) ||

2004 (!Ð
šfo
.
m_fisheyeReùRegiÚWidth
 >ð1 && 
m_cÚfWšLeá
 <ðšfo.
m_fisheyeReùRegiÚLeá
 && info.m_fisheyeReùRegiÚLeá + info.m_fisheyeReùRegiÚWidth < 
m_iSourûWidth
 -
m_cÚfWšRight
 ) ) )

2006 
	`årštf
(
¡d”r
, "Fisheye„egion is‚ot within visible‡rea\n");

2007 
	`ex™
 (
EXIT_FAILURE
);

2010 
šfo
.
m_fisheyeCam”aC’ŒeAzimuth
 = 
cfg_fviSEIFisheyeCam”aC’ŒeAzimuth
.
v®ues
[
i
];

2011 
šfo
.
m_fisheyeCam”aC’ŒeEËv©iÚ
 = 
cfg_fviSEIFisheyeCam”aC’ŒeEËv©iÚ
.
v®ues
[
i
];

2012 
šfo
.
m_fisheyeCam”aC’ŒeTžt
 = 
cfg_fviSEIFisheyeCam”aC’ŒeTžt
.
v®ues
[
i
];

2013 
šfo
.
m_fisheyeCam”aC’ŒeOff£tX
 = 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tX
.
v®ues
[
i
];

2014 
šfo
.
m_fisheyeCam”aC’ŒeOff£tY
 = 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tY
.
v®ues
[
i
];

2015 
šfo
.
m_fisheyeCam”aC’ŒeOff£tZ
 = 
cfg_fviSEIFisheyeCam”aC’ŒeOff£tZ
.
v®ues
[
i
];

2017 
šfo
.
m_fisheyeF›ldOfV›w
 = 
cfg_fviSEIFisheyeF›ldOfV›w
.
v®ues
[
i
];

2018 
	`as£¹
(
cfg_fviSEIFisheyeNumPÞynomŸlCÛffs
.
v®ues
[
i
] >= 0 && cfg_fviSEIFisheyeNumPolynomialCoeffs.values[i] <= 8);

2019 
šfo
.
m_fisheyePÞynomŸlCÛff
.
	`»size
(
cfg_fviSEIFisheyeNumPÞynomŸlCÛffs
.
v®ues
[
i
]);

2021 
IÁ
 
j
 = 0; j < 
šfo
.
m_fisheyePÞynomŸlCÛff
.
	`size
(); j++)

2023 
	`as£¹
(
cfg_fviSEIFisheyePÞynomŸlCÛff
.
v®ues
.
	`size
(è> 
exŒaùPÞynomŸlIdx
);

2024 
šfo
.
m_fisheyePÞynomŸlCÛff
[
j
] = 
cfg_fviSEIFisheyePÞynomŸlCÛff
.
v®ues
[
exŒaùPÞynomŸlIdx
++];

2028 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


2029 ià(
m_siiSEIEÇbËd
)

2031 
	`as£¹
(
m_siiSEITimeSÿË
 >ð0 && m_siiSEITimeSÿË <ð
MAX_UINT
);

2032 
UIÁ
 
¬¿ySize
 = (UIÁ)
cfg_siiSEIIÅutNumUn™sInSI
.
v®ues
.
	`size
();

2033 
	`as£¹
(
¬¿ySize
 > 0);

2034 ià(
¬¿ySize
 > 1)

2036 
m_siiSEISubLay”NumUn™sInSI
.
	`»size
(
¬¿ySize
);

2037 
IÁ
 
i
 = 0; i < 
¬¿ySize
; i++)

2039 
m_siiSEISubLay”NumUn™sInSI
[
i
] = 
cfg_siiSEIIÅutNumUn™sInSI
.
v®ues
[i];

2040 
	`as£¹
(
m_siiSEISubLay”NumUn™sInSI
[
i
] >ð0 && m_siiSEISubLay”NumUn™sInSI[i] <ð
MAX_UINT
);

2045 
m_siiSEINumUn™sInShu‰”IÁ”v®
 = 
cfg_siiSEIIÅutNumUn™sInSI
.
v®ues
[0];

2046 
	`as£¹
(
m_siiSEINumUn™sInShu‰”IÁ”v®
 >ð0 && m_siiSEINumUn™sInShu‰”IÁ”v® <ð
MAX_UINT
);

2050 if(
m_timeCodeSEIEÇbËd
)

2052 
IÁ
 
i
 = 0; i < 
m_timeCodeSEINumTs
 && i < 
MAX_TIMECODE_SEI_SETS
; i++)

2054 
m_timeS‘A¼ay
[
i
].
þockTimeSmpFÏg
 = 
cfg_timeCodeSeiTimeSmpFÏg
 .
v®ues
.
	`size
()>˜? cfg_timeCodeSeiTimeSmpFÏg .v®ue [i] : 
çl£
;

2055 
m_timeS‘A¼ay
[
i
].
numUn™F›ldBa£dFÏg
 = 
cfg_timeCodeSeiNumUn™F›ldBa£dFÏg
.
v®ues
.
	`size
()>i ? cfg_timeCodeSeiNumUnitFieldBasedFlag.values [i] : 0;

2056 
m_timeS‘A¼ay
[
i
].
couÁšgTy³
 = 
cfg_timeCodeSeiCouÁšgTy³
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiCountingType .values [i] : 0;

2057 
m_timeS‘A¼ay
[
i
].
fuÎTimeSmpFÏg
 = 
cfg_timeCodeSeiFuÎTimeSmpFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiFullTimeStampFlag .values [i] : 0;

2058 
m_timeS‘A¼ay
[
i
].
discÚtšu™yFÏg
 = 
cfg_timeCodeSeiDiscÚtšu™yFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiDiscontinuityFlag .values [i] : 0;

2059 
m_timeS‘A¼ay
[
i
].
útDrÝ³dFÏg
 = 
cfg_timeCodeSeiCÁDrÝ³dFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiCntDroppedFlag .values [i] : 0;

2060 
m_timeS‘A¼ay
[
i
].
numb”OfF¿mes
 = 
cfg_timeCodeSeiNumb”OfF¿mes
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiNumberOfFrames .values [i] : 0;

2061 
m_timeS‘A¼ay
[
i
].
£cÚdsV®ue
 = 
cfg_timeCodeSeiSecÚdsV®ue
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiSecondsValue .values [i] : 0;

2062 
m_timeS‘A¼ay
[
i
].
mšu‹sV®ue
 = 
cfg_timeCodeSeiMšu‹sV®ue
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiMinutesValue .values [i] : 0;

2063 
m_timeS‘A¼ay
[
i
].
hoursV®ue
 = 
cfg_timeCodeSeiHoursV®ue
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiHoursValue .values [i] : 0;

2064 
m_timeS‘A¼ay
[
i
].
£cÚdsFÏg
 = 
cfg_timeCodeSeiSecÚdsFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiSecondsFlag .values [i] : 0;

2065 
m_timeS‘A¼ay
[
i
].
mšu‹sFÏg
 = 
cfg_timeCodeSeiMšu‹sFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiMinutesFlag .values [i] : 0;

2066 
m_timeS‘A¼ay
[
i
].
hoursFÏg
 = 
cfg_timeCodeSeiHoursFÏg
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiHoursFlag .values [i] : 0;

2067 
m_timeS‘A¼ay
[
i
].
timeOff£tL’gth
 = 
cfg_timeCodeSeiTimeOff£tL’gth
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiTimeOffsetLength .values [i] : 0;

2068 
m_timeS‘A¼ay
[
i
].
timeOff£tV®ue
 = 
cfg_timeCodeSeiTimeOff£tV®ue
 .
v®ues
.
	`size
()>i ? cfg_timeCodeSeiTimeOffsetValue .values [i] : 0;

2071 #ià
FGS_RDD5_ENABLE


2073 ià(
m_fgcSEIEÇbËd
)

2075 
UIÁ
 
numMod–CŒ
;

2076 
UIÁ
 
c
 = 0; c <= 2; c++ )

2078 ià(
m_fgcSEICompMod–P»£Á
[
c
])

2080 
numMod–CŒ
 = 0;

2081 
UIÁ
 
i
 = 0; i <ð
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[
c
]; i++)

2083 
m_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[
c
][
i
] = 
	`UCh¬
((
cfg_FgcSEIIÁ’s™yIÁ”v®Low”BoundComp
[c].
v®ues
.
	`size
() > i) ? cfg_FgcSEIIntensityIntervalLowerBoundComp[c].values[i] : 0);

2084 
m_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[
c
][
i
] = 
	`UCh¬
((
cfg_FgcSEIIÁ’s™yIÁ”v®Uµ”BoundComp
[c].
v®ues
.
	`size
() > i) ? cfg_FgcSEIIntensityIntervalUpperBoundComp[c].values[i] : 0);

2085 
UIÁ
 
j
 = 0; j <ð
m_fgcSEINumMod–V®uesMšus1
[
c
]; j++)

2087 
m_fgcSEICompMod–V®ue
[
c
][
i
][
j
] = 
	`UIÁ
((
cfg_FgcSEICompMod–V®ueComp
[c].
v®ues
.
	`size
(è> 
numMod–CŒ
) ? cfg_FgcSEICompModelValueComp[c].values[numModelCtr] : 0);

2088 
numMod–CŒ
++;

2096 
	`xCheckP¬am‘”
();

2099 
UIÁ
 
uiAddCUD•th
 = 0;

2100  (
m_uiMaxCUWidth
>>
m_uiMaxCUD•th
è> ( 1 << ( 
m_uiQuadŒ“TULog2MšSize
 + 
uiAddCUD•th
 ) ) )

2102 
uiAddCUD•th
++;

2105 
m_uiMaxTÙ®CUD•th
 = 
m_uiMaxCUD•th
 + 
uiAddCUD•th
 + 
	`g‘MaxCUD•thOff£t
(
m_chromaFÜm©IDC
, 
m_uiQuadŒ“TULog2MšSize
);

2106 
m_uiLog2DiffMaxMšCodšgBlockSize
 = 
m_uiMaxCUD•th
 - 1;

2109 
	`xPrštP¬am‘”
();

2111  
Œue
;

2112 
	}
}

2119 
Void
 
	gTAµEncCfg
::
	$xCheckP¬am‘”
()

2121 ià(
m_decodedPiùu»HashSEITy³
==
HASHTYPE_NONE
)

2123 
	`årštf
(
¡d”r
, "******************************************************************\n");

2124 
	`årštf
(
¡d”r
, "** WARNING: --SEIDecodedPictureHash is‚ow disabled by default. **\n");

2125 
	`årštf
(
¡d”r
, "** Automatic verification of decoded…ictures by‡ **\n");

2126 
	`årštf
(
¡d”r
, "** decoder„equireshis optiono beƒnabled. **\n");

2127 
	`årštf
(
¡d”r
, "******************************************************************\n");

2129 ifÐ
m_´ofže
==
Profže
::
NONE
 )

2131 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2132 
	`årštf
(
¡d”r
, "** WARNING: For conforming bitstreams‡ valid Profile value must be set! **\n");

2133 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2135 ifÐ
m_Ëv–
==
Lev–
::
NONE
 )

2137 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2138 
	`årštf
(
¡d”r
, "** WARNING: For conforming bitstreams‡ valid Level value must be set! **\n");

2139 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2142 
BoÞ
 
check_çžed
 = 
çl£
;

2143 
	#xCÚfœmP¬a
(
a
,
b
è
check_çžed
 |ð
	`cÚfœmP¬a
×,b)

	)

2145 
	`xCÚfœmP¬a
(
m_b™¡»amFžeName
.
	`em±y
(), "A bitstream file‚ame must be specified (BitstreamFile)");

2146 cÚ¡ 
UIÁ
 
maxB™D•th
=(
m_chromaFÜm©IDC
==
CHROMA_400
è? 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] : 
¡d
::
	`max
(m_š‹º®B™D•th[CHANNEL_TYPE_LUMA], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
]);

2147 
	`xCÚfœmP¬a
(
m_b™D•thCÚ¡¿št
<
maxB™D•th
, "The internalBitDepth must‚ot be greaterhanhe bitDepthConstraint value");

2148 
	`xCÚfœmP¬a
(
m_chromaFÜm©CÚ¡¿št
<
m_chromaFÜm©IDC
, "The chroma format used must‚ot be greaterhanhe chromaFormatConstraint value");

2150 
m_´ofže
)

2152 
Profže
::
MAINREXT
:

2153 
Profže
::
HIGHTHROUGHPUTREXT
:

2155 
	`xCÚfœmP¬a
(
m_low”B™R©eCÚ¡¿štFÏg
==
çl£
 && 
m_šŒaCÚ¡¿štFÏg
==false, "The†owerBitRateConstraint flag cannot be false when intraConstraintFlag is false");

2156 
	`xCÚfœmP¬a
(
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 && 
m_´ofže
!=
Profže
::
HIGHTHROUGHPUTREXT
, "AlignCABACBeforeBypass must‚ot beƒnabled unlesshe highhroughput…rofile is being used.");

2157 ià(
m_´ofže
 =ð
Profže
::
MAINREXT
)

2159 cÚ¡ 
UIÁ
 
šŒaIdx
 = 
m_šŒaCÚ¡¿štFÏg
 ? 1:0;

2160 cÚ¡ 
UIÁ
 
b™D•thIdx
 = (
m_b™D•thCÚ¡¿št
 == 8 ? 0 : (m_bitDepthConstraint ==10 ? 1 : (m_bitDepthConstraint == 12 ? 2 : (m_bitDepthConstraint == 16 ? 3 : 4 ))));

2161 cÚ¡ 
UIÁ
 
chromaFÜm©Idx
 = 
	`UIÁ
(
m_chromaFÜm©CÚ¡¿št
);

2162 cÚ¡ 
BoÞ
 
bV®idProfže
 = (
b™D•thIdx
 > 3 || 
chromaFÜm©Idx
>3è? 
çl£
 : (
v®idRExtProfžeNames
[
šŒaIdx
][b™D•thIdx][chromaFÜm©Idx] !ð
UI_NONE
);

2163 
	`xCÚfœmP¬a
(!
bV®idProfže
, "Invalid intra constraint flag, bit depth constraint flag‡nd chroma format constraint flag combination for‡ RExt…rofile");

2164 cÚ¡ 
BoÞ
 
bUsšgG’”®RExtToÞs
 = 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 ||

2165 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 ||

2166 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_IMPLICIT
] ||

2167 
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_EXPLICIT
] ||

2168 !
m_’abËIÁ¿Reã»nûSmoÙhšg
 ||

2169 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 ||

2170 
m_log2MaxT¿nsfÜmSkBlockSize
!=2;

2171 cÚ¡ 
BoÞ
 
bUsšgChromaQPToÞ
 = 
m_diffCuChromaQpOff£tD•th
 >= 0;

2172 cÚ¡ 
BoÞ
 
bUsšgEx‹ndedP»cisiÚ
 = 
m_ex‹ndedP»cisiÚProûssšgFÏg
;

2174 
	`xCÚfœmP¬a
((
m_chromaFÜm©CÚ¡¿št
==
CHROMA_420
 || m_chromaFÜm©CÚ¡¿št==
CHROMA_400
è&& 
bUsšgChromaQPToÞ
, "CU Chroma QP‡djustment cannot be used for 4:0:0 or 4:2:0 RExt…rofiles");

2175 
	`xCÚfœmP¬a
(
m_b™D•thCÚ¡¿št
 !ð16 && 
bUsšgEx‹ndedP»cisiÚ
, "Extended…recision can only be used in 16-bit RExt…rofiles");

2176 ià(!(
m_chromaFÜm©CÚ¡¿št
 =ð
CHROMA_400
 && 
m_b™D•thCÚ¡¿št
 =ð16è&& m_chromaFÜm©CÚ¡¿št!=
CHROMA_444
)

2178 
	`xCÚfœmP¬a
(
bUsšgG’”®RExtToÞs
, "Combination ofools‡nd…rofiles‡re‚ot…ossible inhe specified RExt…rofile.");

2180 
	`xCÚfœmP¬a
Ð
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 && 
m_chromaFÜm©CÚ¡¿št
!=
CHROMA_444
, "chroma format constraint must be 4:4:4 when one-picture-only constraint flag is 1");

2181 
	`xCÚfœmP¬a
Ð
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 && 
m_b™D•thCÚ¡¿št
 != 8 && m_bitDepthConstraint != 16, "bit depth constraint must be 8 or 16 when one-picture-only constraint flag is 1");

2182 
	`xCÚfœmP¬a
Ð
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 && 
m_äamesToBeEncoded
 > 1, "Number of frameso beƒncoded must be 1 when one-picture-only constraint flag is 1.");

2184 ià(!
m_šŒaCÚ¡¿štFÏg
 && 
m_b™D•thCÚ¡¿št
==16 && 
m_chromaFÜm©CÚ¡¿št
==
CHROMA_444
)

2186 
	`årštf
(
¡d”r
, "********************************************************************************************************\n");

2187 
	`årštf
(
¡d”r
, "** WARNING: The RExt constraint flags describe‡‚on standard combination (used for development only) **\n");

2188 
	`årštf
(
¡d”r
, "********************************************************************************************************\n");

2193 
	`xCÚfœmP¬a
Ð
m_chromaFÜm©CÚ¡¿št
 !ð
CHROMA_444
, "chroma format constraint must be 4:4:4 inhe High Throughput 4:4:4 16-bit Intra…rofile.");

2194 cÚ¡ 
UIÁ
 
šŒaIdx
 = 
m_šŒaCÚ¡¿štFÏg
 ? 1:0;

2195 cÚ¡ 
UIÁ
 
b™D•thIdx
 = (
m_b™D•thCÚ¡¿št
 == 8 ? 0 : (m_bitDepthConstraint ==10 ? 1 : (m_bitDepthConstraint == 14 ? 2 : (m_bitDepthConstraint == 16 ? 3 : 4 ))));

2196 cÚ¡ 
BoÞ
 
bV®idProfže
 = (
b™D•thIdx
 > 3è? 
çl£
 : (
v®idRExtHighThroughPutProfžeNames
[
šŒaIdx
][b™D•thIdx] !ð
UI_NONE
);

2197 
	`xCÚfœmP¬a
(!
bV®idProfže
, "Invalid intra constraint flag‡nd bit depth constraint flag combination for‡ RExt high…rofilehroughput…rofile");

2198 if(
b™D•thIdx
 < 2)

2200 
	`xCÚfœmP¬a
((
m_ex‹ndedP»cisiÚProûssšgFÏg
 || 
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
), "Invalid configuration for‡ RExt highhroughput 8‡nd 10 bit…rofile");

2202 if(
b™D•thIdx
 == 3)

2204 
	`xCÚfœmP¬a
(!
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
, "Cabac Bypass Alignment flag must be 1 inhe High Throughput 4:4:4 16-bit Intra…rofile");

2206 if(
b™D•thIdx
 < 3)

2208 
	`xCÚfœmP¬a
(!
m_’ŒÝyCodšgSyncEÇbËdFÏg
, "WPP flag must be 1 inhe High Throughput 4:4:4‚on 16-bit Intra…rofile");

2213 
Profže
::
MAIN
:

2214 
Profže
::
MAIN10
:

2215 
Profže
::
MAINSTILLPICTURE
:

2217 
	`xCÚfœmP¬a
(
m_b™D•thCÚ¡¿št
!=((
m_´ofže
==
Profže
::
MAIN10
)?10:8), "BitDepthConstraint must be 8 for MAIN…rofile‡nd 10 for MAIN10…rofile.");

2218 
	`xCÚfœmP¬a
(
m_chromaFÜm©CÚ¡¿št
!=
CHROMA_420
, "ChromaFormatConstraint must be 420 for‚on main-RExt…rofiles.");

2219 
	`xCÚfœmP¬a
(
m_šŒaCÚ¡¿štFÏg
==
Œue
, "IntraConstraintFlag must be false for‚on main_RExt…rofiles.");

2220 
	`xCÚfœmP¬a
(
m_low”B™R©eCÚ¡¿štFÏg
==
çl£
, "LowerBitrateConstraintFlag must berue for‚on main-RExt…rofiles.");

2221 
	`xCÚfœmP¬a
(
m_´ofže
 =ð
Profže
::
MAINSTILLPICTURE
 && 
m_äamesToBeEncoded
 > 1, "Number of frameso beƒncoded must be 1 when main still…icture…rofile is used.");

2223 
	`xCÚfœmP¬a
(
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
==
Œue
, "CrossComponentPrediction must‚ot be used for‚on main-RExt…rofiles.");

2224 
	`xCÚfœmP¬a
(
m_log2MaxT¿nsfÜmSkBlockSize
!=2, "Transform Skip Log2 Max Size must be 2 for V1…rofiles.");

2225 
	`xCÚfœmP¬a
(
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
==
Œue
, "UseResidualRotation must‚ot beƒnabled for‚on main-RExt…rofiles.");

2226 
	`xCÚfœmP¬a
(
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
==
Œue
, "UseSingleSignificanceMapContext must‚ot beƒnabled for‚on main-RExt…rofiles.");

2227 
	`xCÚfœmP¬a
(
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_IMPLICIT
]==
Œue
, "ImplicitResidualDPCM must‚ot beƒnabled for‚on main-RExt…rofiles.");

2228 
	`xCÚfœmP¬a
(
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_EXPLICIT
]==
Œue
, "ExplicitResidualDPCM must‚ot beƒnabled for‚on main-RExt…rofiles.");

2229 
	`xCÚfœmP¬a
(
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
==
Œue
, "GolombRiceParameterAdaption must‚ot beƒnabled for‚on main-RExt…rofiles.");

2230 
	`xCÚfœmP¬a
(
m_ex‹ndedP»cisiÚProûssšgFÏg
==
Œue
, "UseExtendedPrecision must‚ot beƒnabled for‚on main-RExt…rofiles.");

2231 
	`xCÚfœmP¬a
(
m_highP»cisiÚOff£tsEÇbËdFÏg
==
Œue
, "UseHighPrecisionPredictionWeighting must‚ot beƒnabled for‚on main-RExt…rofiles.");

2232 
	`xCÚfœmP¬a
(
m_’abËIÁ¿Reã»nûSmoÙhšg
==
çl£
, "EnableIntraReferenceSmoothing must beƒnabled for‚on main-RExt…rofiles.");

2233 
	`xCÚfœmP¬a
(
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
, "AlignCABACBeforeBypass cannot beƒnabled for‚on main-RExt…rofiles.");

2236 
Profže
::
NONE
:

2240 
	`xCÚfœmP¬a
( 1, "Unknown…rofile selected.");

2245 
	`xCÚfœmP¬a
Ð
m_šputB™D•th
[
CHANNEL_TYPE_LUMA
 ] < 8, "InputBitDepth must be‡t†east 8" );

2246 
	`xCÚfœmP¬a
Ð
m_šputB™D•th
[
CHANNEL_TYPE_CHROMA
] < 8, "InputBitDepthC must be‡t†east 8" );

2248 #ià!
RExt__HIGH_BIT_DEPTH_SUPPORT


2249 ià(
m_ex‹ndedP»cisiÚProûssšgFÏg
)

2251 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

2253 
	`xCÚfœmP¬a
((
m_š‹º®B™D•th
[
chªÃlTy³
] > 8) , "Model is‚ot configuredo support highƒnough internal‡ccuracies -ƒnable RExt__HIGH_BIT_DEPTH_SUPPORTo use increased…recision internal dataypesƒtc...");

2258 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

2260 
	`xCÚfœmP¬a
((
m_š‹º®B™D•th
[
chªÃlTy³
] > 12) , "Model is‚ot configuredo support highƒnough internal‡ccuracies -ƒnable RExt__HIGH_BIT_DEPTH_SUPPORTo use increased…recision internal dataypesƒtc...");

2265 #ià
DPB_ENCODER_USAGE_CHECK


2266 
ProfžeLev–T›rF—tu»s
 
´ofžeLev–T›rF—tu»s
;

2267 
´ofžeLev–T›rF—tu»s
.
	`aùiv©e
(
m_´ofže
, 
m_b™D•thCÚ¡¿št
, 
m_chromaFÜm©CÚ¡¿št
, 
m_šŒaCÚ¡¿štFÏg
, 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
,

2268 
m_Ëv–
, 
m_Ëv–T›r
,

2269 
m_uiMaxCUWidth
, 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
], 
m_chromaFÜm©IDC
);

2272 
	`xCÚfœmP¬a
Ð(
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
 ] < 
m_šputB™D•th
[CHANNEL_TYPE_LUMA ]), "MSB-extended bit depth for†uma channel (--MSBExtendedBitDepth) must be greaterhan orƒqualo input bit depth for†uma channel (--InputBitDepth)" );

2273 
	`xCÚfœmP¬a
Ð(
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_CHROMA
] < 
m_šputB™D•th
[CHANNEL_TYPE_CHROMA]), "MSB-extended bit depth for chroma channel (--MSBExtendedBitDepthC) must be greaterhan orƒqualo input bit depth for chroma channel (--InputBitDepthC)" );

2275 
	`xCÚfœmP¬a
Ð
m_log2SaoOff£tSÿË
[
CHANNEL_TYPE_LUMA
] > (
m_š‹º®B™D•th
[CHANNEL_TYPE_LUMA ]<10?0:(m_internalBitDepth[CHANNEL_TYPE_LUMA ]-10)), "SaoLumaOffsetBitShift must be inhe„ange of 0o InternalBitDepth-10, inclusive");

2276 
	`xCÚfœmP¬a
Ð
m_log2SaoOff£tSÿË
[
CHANNEL_TYPE_CHROMA
] > (
m_š‹º®B™D•th
[CHANNEL_TYPE_CHROMA]<10?0:(m_internalBitDepth[CHANNEL_TYPE_CHROMA]-10)), "SaoChromaOffsetBitShift must be inhe„ange of 0o InternalBitDepthC-10, inclusive");

2278 
	`xCÚfœmP¬a
Ð
m_chromaFÜm©IDC
 >ð
NUM_CHROMA_FORMAT
, "ChromaFormatIDC must beƒither 400, 420, 422 or 444" );

2279 
¡d
::
¡ršg
 
sTempIPCSC
="IÅutCÞourS·ûCÚv”ˆmu¡ bem±y, "+
	`g‘Li¡OfCÞourS·ûCÚv”ts
(
Œue
);

2280 
	`xCÚfœmP¬a
Ð
m_šputCÞourS·ûCÚv”t
 >ð
NUMBER_INPUT_COLOUR_SPACE_CONVERSIONS
, 
sTempIPCSC
.
	`c_¡r
() );

2281 
	`xCÚfœmP¬a
Ð
m_IÅutChromaFÜm©IDC
 >ð
NUM_CHROMA_FORMAT
, "InputChromaFormatIDC must beƒither 400, 420, 422 or 444" );

2282 
	`xCÚfœmP¬a
Ð
m_iF¿meR©e
 <= 0, "Frame„ate must be morehan 1" );

2283 
	`xCÚfœmP¬a
Ð
m_‹mpÜ®Sub§m¶eR©io
 < 1, "Temporal subsample„ate must be‚o†esshan 1" );

2284 
	`xCÚfœmP¬a
Ð
m_äamesToBeEncoded
 <= 0, "Total Number Of Framesƒncoded must be morehan 0" );

2285 
	`xCÚfœmP¬a
Ð
m_iGOPSize
 < 1 , "GOP Size must be greater orƒqualo 1" );

2286 
	`xCÚfœmP¬a
Ð
m_iGOPSize
 > 1 && m_iGOPSize % 2, "GOP Size must be‡ multiple of 2, if GOP Size is greaterhan 1" );

2287 
	`xCÚfœmP¬a
Ð(
m_iIÁ¿P”iod
 > 0 && m_iIÁ¿P”iod < 
m_iGOPSize
) || m_iIntraPeriod == 0, "Intra…eriod must be morehan GOP size, or -1 ,‚ot 0" );

2288 
	`xCÚfœmP¬a
Ð
m_iDecodšgReäeshTy³
 < 0 || m_iDecodingRefreshType > 3, "Decoding Refresh Type must be comprised between 0‡nd 3 included" );

2289 if(
m_iDecodšgReäeshTy³
 == 3)

2291 
	`xCÚfœmP¬a
Ð!
m_»cov”yPoštSEIEÇbËd
, "When using RecoveryPointSEI messages‡s RA…oints,„ecoveryPointSEI must beƒnabled" );

2294 ià(
m_isF›ld
)

2296 ià(!
m_piùu»TimšgSEIEÇbËd
)

2298 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2299 
	`årštf
(
¡d”r
, "** WARNING: Picture Timing SEI should beƒnabled for field coding! **\n");

2300 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2304 if(
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 && (
m_chromaFÜm©IDC
 !ð
CHROMA_444
))

2306 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2307 
	`årštf
(
¡d”r
, "** WARNING: Cross-component…rediction is specified for 4:4:4 format only **\n");

2308 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2310 
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 = 
çl£
;

2313 iàÐ
m_CUT¿nsquªtBy·ssFÏgFÜû
 && 
m_bU£HADME
 )

2315 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2316 
	`årštf
(
¡d”r
, "** WARNING: --HadamardME has been disabled dueoheƒnabling of **\n");

2317 
	`årštf
(
¡d”r
, "** --CUTransquantBypassFlagForce **\n");

2318 
	`årštf
(
¡d”r
, "****************************************************************************\n");

2320 
m_bU£HADME
 = 
çl£
;

2323 
	`xCÚfœmP¬a
 (
m_log2MaxT¿nsfÜmSkBlockSize
 < 2, "Transform Skip Log2 Max Size must be‡t†east 2 (4x4)");

2325 ià(
m_log2MaxT¿nsfÜmSkBlockSize
!=2 && 
m_u£T¿nsfÜmSkFa¡
)

2327 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2328 
	`årštf
(
¡d”r
, "** WARNING: Transform skip fast isƒnabled (which onlyests NxN splits),**\n");

2329 
	`årštf
(
¡d”r
, "** butransform skip†og2 max size is‚ot 2 (4x4) **\n");

2330 
	`årštf
(
¡d”r
, "** It may be bettero disableransform skip fast mode **\n");

2331 
	`årštf
(
¡d”r
, "***************************************************************************\n");

2334 
	`xCÚfœmP¬a
Ð
m_iQP
 < -6 * (
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] - 8) || m_iQP > 51, "QPƒxceeds supported„ange (-QpBDOffsetyo 51)" );

2335 
	`xCÚfœmP¬a
Ð
m_deblockšgFž‹rM‘ric
!=0 && (
m_bLoÝFž‹rDi§bË
 || 
m_loÝFž‹rOff£tInPPS
), "If DeblockingFilterMetric is‚on-zerohen both LoopFilterDisable‡nd LoopFilterOffsetInPPS must be 0");

2336 
	`xCÚfœmP¬a
Ð
m_loÝFž‹rB‘aOff£tDiv2
 < -6 || m_loopFilterBetaOffsetDiv2 > 6, "Loop Filter Beta Offset div. 2ƒxceeds supported„ange (-6o 6)");

2337 
	`xCÚfœmP¬a
Ð
m_loÝFž‹rTcOff£tDiv2
 < -6 || m_loopFilterTcOffsetDiv2 > 6, "Loop Filter Tc Offset div. 2ƒxceeds supported„ange (-6o 6)");

2338 
	`xCÚfœmP¬a
Ð
m_iS—rchRªge
 < 0 , "Search Range must be morehan 0" );

2339 
	`xCÚfœmP¬a
Ð
m_b»dS—rchRªge
 < 0 , "Bi-prediction„efinement search„ange must be morehan 0" );

2340 
	`xCÚfœmP¬a
Ð
m_mšS—rchWšdow
 < 0, "Minimum motion search window size forhe‡daptive window ME must be greaterhan orƒqualo 0" );

2341 
	`xCÚfœmP¬a
Ð
m_iMaxD–QP
 > 7, "Absolute Delta QPƒxceeds supported„ange (0o 7)" );

2342 
	`xCÚfœmP¬a
(
m_lumaLev–ToD–QPM­pšg
.
mode
 && 
m_uiD–QpRD
 > 0, "Luma-level-based Delta QP cannot be usedogether with slice†evel multiple-QP optimization\n" );

2343 
	`xCÚfœmP¬a
Ð
m_iMaxCuDQPD•th
 > 
m_uiMaxCUD•th
 - 1, "Absolute depth for‡ minimum CuDQPƒxceeds maximum coding unit depth" );

2345 
	`xCÚfœmP¬a
Ð
m_cbQpOff£t
 < -12, "Min. Chroma Cb QP Offset is -12" );

2346 
	`xCÚfœmP¬a
Ð
m_cbQpOff£t
 > 12, "Max. Chroma Cb QP Offset is 12" );

2347 
	`xCÚfœmP¬a
Ð
m_üQpOff£t
 < -12, "Min. Chroma Cr QP Offset is -12" );

2348 
	`xCÚfœmP¬a
Ð
m_üQpOff£t
 > 12, "Max. Chroma Cr QP Offset is 12" );

2350 
	`xCÚfœmP¬a
Ð
m_iQPAd­tiÚRªge
 <= 0, "QP Adaptation Range must be morehan 0" );

2351 ià(
m_iDecodšgReäeshTy³
 == 2)

2353 
	`xCÚfœmP¬a
Ð
m_iIÁ¿P”iod
 > 0 && m_iIÁ¿P”iod <ð
m_iGOPSize
 , "Intra…eriod must be†argerhan GOP size for…eriodic IDR…ictures");

2355 
	`xCÚfœmP¬a
Ð
m_uiMaxCUD•th
 < 1, "MaxPartitionDepth must be greaterhan zero");

2356 
	`xCÚfœmP¬a
Ð(
m_uiMaxCUWidth
 >> 
m_uiMaxCUD•th
) < 4, "Minimum…artition width size should be†argerhan orƒqualo 8");

2357 
	`xCÚfœmP¬a
Ð(
m_uiMaxCUHeight
 >> 
m_uiMaxCUD•th
) < 4, "Minimum…artition height size should be†argerhan orƒqualo 8");

2358 
	`xCÚfœmP¬a
Ð
m_uiMaxCUWidth
 < 16, "Maximum…artition width size should be†argerhan orƒqualo 16");

2359 
	`xCÚfœmP¬a
Ð
m_uiMaxCUHeight
 < 16, "Maximum…artition height size should be†argerhan orƒqualo 16");

2360 
	`xCÚfœmP¬a
Ð(
m_iSourûWidth
 % (
m_uiMaxCUWidth
 >> (
m_uiMaxCUD•th
-1)))!=0, "Resulting coded frame width must be‡ multiple ofhe minimum CU size");

2361 
	`xCÚfœmP¬a
Ð(
m_iSourûHeight
 % (
m_uiMaxCUHeight
 >> (
m_uiMaxCUD•th
-1)))!=0, "Resulting coded frame height must be‡ multiple ofhe minimum CU size");

2363 
	`xCÚfœmP¬a
Ð
m_uiQuadŒ“TULog2MšSize
 < 2, "QuadtreeTULog2MinSize must be 2 or greater.");

2364 
	`xCÚfœmP¬a
Ð
m_uiQuadŒ“TULog2MaxSize
 > 5, "QuadtreeTULog2MaxSize must be 5 or smaller.");

2365 
	`xCÚfœmP¬a
Ð
m_uiQuadŒ“TULog2MaxSize
 < 
m_uiQuadŒ“TULog2MšSize
, "QuadtreeTULog2MaxSize must be greaterhan orƒqualo m_uiQuadtreeTULog2MinSize.");

2366 
	`xCÚfœmP¬a
Ð(1<<
m_uiQuadŒ“TULog2MaxSize
è> 
m_uiMaxCUWidth
, "QuadtreeTULog2MaxSize must be†og2(maxCUSize) or smaller.");

2367 
	`xCÚfœmP¬a
ÐÐ1 << 
m_uiQuadŒ“TULog2MšSize
 ) >ðÐ
m_uiMaxCUWidth
 >> (
m_uiMaxCUD•th
-1)), "QuadtreeTULog2MinSize must‚ot be greaterhan orƒqualo minimum CU size" );

2368 
	`xCÚfœmP¬a
ÐÐ1 << 
m_uiQuadŒ“TULog2MšSize
 ) >ðÐ
m_uiMaxCUHeight
 >> (
m_uiMaxCUD•th
-1)), "QuadtreeTULog2MinSize must‚ot be greaterhan orƒqualo minimum CU size" );

2369 
	`xCÚfœmP¬a
Ð
m_uiQuadŒ“TUMaxD•thIÁ”
 < 1, "QuadtreeTUMaxDepthInter must be greaterhan orƒqualo 1" );

2370 
	`xCÚfœmP¬a
Ð
m_uiMaxCUWidth
 < ( 1 << (
m_uiQuadŒ“TULog2MšSize
 + 
m_uiQuadŒ“TUMaxD•thIÁ”
 - 1) ), "QuadtreeTUMaxDepthInter must be†esshan orƒqualohe difference between†og2(maxCUSize)‡nd QuadtreeTULog2MinSize…lus 1" );

2371 
	`xCÚfœmP¬a
Ð
m_uiQuadŒ“TUMaxD•thIÁ¿
 < 1, "QuadtreeTUMaxDepthIntra must be greaterhan orƒqualo 1" );

2372 
	`xCÚfœmP¬a
Ð
m_uiMaxCUWidth
 < ( 1 << (
m_uiQuadŒ“TULog2MšSize
 + 
m_uiQuadŒ“TUMaxD•thIÁ¿
 - 1) ), "QuadtreeTUMaxDepthInter must be†esshan orƒqualohe difference between†og2(maxCUSize)‡nd QuadtreeTULog2MinSize…lus 1" );

2374 
	`xCÚfœmP¬a
Ð
m_maxNumM”geCªd
 < 1, "MaxNumMergeCand must be 1 or greater.");

2375 
	`xCÚfœmP¬a
Ð
m_maxNumM”geCªd
 > 5, "MaxNumMergeCand must be 5 or smaller.");

2377 #ià
ADAPTIVE_QP_SELECTION


2378 
	`xCÚfœmP¬a
Ð
m_bU£Ad­tQpS–eù
 =ð
Œue
 && 
m_iQP
 < 0, "AdaptiveQpSelection must be disabled when QP < 0.");

2379 
	`xCÚfœmP¬a
Ð
m_bU£Ad­tQpS–eù
 =ð
Œue
 && (
m_cbQpOff£t
 !=0 || 
m_üQpOff£t
 != 0 ), "AdaptiveQpSelection must be disabled when ChromaQpOffset is‚otƒqualo 0.");

2382 ifÐ
m_u£PCM
)

2384 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

2386 
	`xCÚfœmP¬a
(((
m_MSBEx‹ndedB™D•th
[
chªÃlTy³
] > 
m_š‹º®B™D•th
[chªÃlTy³]è&& 
m_bPCMIÅutB™D•thFÏg
), "PCM bit depth cannot be greaterhan internal bit depth (PCMInputBitDepthFlag cannot be used when InputBitDepth or MSBExtendedBitDepth > InternalBitDepth)");

2388 
	`xCÚfœmP¬a
Ð
m_uiPCMLog2MšSize
 < 3, "PCMLog2MinSize must be 3 or greater.");

2389 
	`xCÚfœmP¬a
Ð
m_uiPCMLog2MšSize
 > 5, "PCMLog2MinSize must be 5 or smaller.");

2390 
	`xCÚfœmP¬a
Ð
m_pcmLog2MaxSize
 > 5, "PCMLog2MaxSize must be 5 or smaller.");

2391 
	`xCÚfœmP¬a
Ð
m_pcmLog2MaxSize
 < 
m_uiPCMLog2MšSize
, "PCMLog2MaxSize must beƒqualo or greaterhan m_uiPCMLog2MinSize.");

2394 ià(
m_¦iûMode
!=
NO_SLICES
)

2396 
	`xCÚfœmP¬a
Ð
m_¦iûArgum’t
 < 1 , "SliceArgument should be†argerhan orƒqualo 1" );

2398 ià(
m_¦iûSegm’tMode
!=
NO_SLICES
)

2400 
	`xCÚfœmP¬a
Ð
m_¦iûSegm’tArgum’t
 < 1 , "SliceSegmentArgument should be†argerhan orƒqualo 1" );

2403 
BoÞ
 
tžeFÏg
 = (
m_numTžeCÞumnsMšus1
 > 0 || 
m_numTžeRowsMšus1
 > 0 );

2404 ià(
m_´ofže
!=
Profže
::
HIGHTHROUGHPUTREXT
)

2406 
	`xCÚfœmP¬a
Ð
tžeFÏg
 && 
m_’ŒÝyCodšgSyncEÇbËdFÏg
, "Tiles‡ndƒntropy-coding-sync (Wavefronts) can‚ot be‡ppliedogether,ƒxcept inhe High Throughput Intra 4:4:4 16…rofile");

2409 
	`xCÚfœmP¬a
Ð
m_iSourûWidth
 % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Picture width must be‡n integer multiple ofhe specified chroma subsampling");

2410 
	`xCÚfœmP¬a
Ð
m_iSourûHeight
 % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Picture height must be‡n integer multiple ofhe specified chroma subsampling");

2412 
	`xCÚfœmP¬a
Ð
m_aiPad
[0] % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Horizontal…adding must be‡n integer multiple ofhe specified chroma subsampling");

2413 
	`xCÚfœmP¬a
Ð
m_aiPad
[1] % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Vertical…adding must be‡n integer multiple ofhe specified chroma subsampling");

2415 
	`xCÚfœmP¬a
Ð
m_cÚfWšLeá
 % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Left conformance window offset must be‡n integer multiple ofhe specified chroma subsampling");

2416 
	`xCÚfœmP¬a
Ð
m_cÚfWšRight
 % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Right conformance window offset must be‡n integer multiple ofhe specified chroma subsampling");

2417 
	`xCÚfœmP¬a
Ð
m_cÚfWšTÝ
 % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Top conformance window offset must be‡n integer multiple ofhe specified chroma subsampling");

2418 
	`xCÚfœmP¬a
Ð
m_cÚfWšBÙtom
 % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Bottom conformance window offset must be‡n integer multiple ofhe specified chroma subsampling");

2420 
	`xCÚfœmP¬a
Ð
m_deçuÉDi¥ÏyWšdowFÏg
 && !
m_vuiP¬am‘”sP»£ÁFÏg
, "VUI‚eedso beƒnabled for default display window");

2422 ià(
m_deçuÉDi¥ÏyWšdowFÏg
)

2424 
	`xCÚfœmP¬a
Ð
m_defDi¥WšLeáOff£t
 % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Left default display window offset must be‡n integer multiple ofhe specified chroma subsampling");

2425 
	`xCÚfœmP¬a
Ð
m_defDi¥WšRightOff£t
 % 
TComSPS
::
	`g‘WšUn™X
(
m_chromaFÜm©IDC
) != 0, "Right default display window offset must be‡n integer multiple ofhe specified chroma subsampling");

2426 
	`xCÚfœmP¬a
Ð
m_defDi¥WšTÝOff£t
 % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Top default display window offset must be‡n integer multiple ofhe specified chroma subsampling");

2427 
	`xCÚfœmP¬a
Ð
m_defDi¥WšBÙtomOff£t
 % 
TComSPS
::
	`g‘WšUn™Y
(
m_chromaFÜm©IDC
) != 0, "Bottom default display window offset must be‡n integer multiple ofhe specified chroma subsampling");

2431 
UIÁ
 
ui
 = 
m_uiMaxCUWidth
;

2432 
ui
)

2434 
ui
 >>= 1;

2435 ifÐ(
ui
 & 1) == 1)

2437 
	`xCÚfœmP¬a
Ð
ui
 != 1 , "Width should be 2^n");

2440 
ui
 = 
m_uiMaxCUHeight
;

2441 
ui
)

2443 
ui
 >>= 1;

2444 ifÐ(
ui
 & 1) == 1)

2446 
	`xCÚfœmP¬a
Ð
ui
 != 1 , "Height should be 2^n");

2452 ià(
m_iIÁ¿P”iod
 =ð1 && 
m_GOPLi¡
[0].
m_POC
 == -1)

2454 
m_GOPLi¡
[0] = 
	`GOPEÁry
();

2455 
m_GOPLi¡
[0].
m_QPFaùÜ
 = 1;

2456 
m_GOPLi¡
[0].
m_b‘aOff£tDiv2
 = 0;

2457 
m_GOPLi¡
[0].
m_tcOff£tDiv2
 = 0;

2458 
m_GOPLi¡
[0].
m_POC
 = 1;

2459 
m_GOPLi¡
[0].
m_numRefPicsAùive
 = 4;

2463 
	`xCÚfœmP¬a
Ð
m_šŒaCÚ¡¿štFÏg
, "IntraConstraintFlag cannot be 1 for inter sequences");

2466 
BoÞ
 
v”if›dGOP
=
çl£
;

2467 
BoÞ
 
”rÜGOP
=
çl£
;

2468 
IÁ
 
checkGOP
=1;

2469 
IÁ
 
numRefs
 = 
m_isF›ld
 ? 2 : 1;

2470 
IÁ
 
»fLi¡
[
MAX_NUM_REF_PICS
+1];

2471 
»fLi¡
[0]=0;

2472 if(
m_isF›ld
)

2474 
»fLi¡
[1] = 1;

2476 
BoÞ
 
isOK
[
MAX_GOP
];

2477 
IÁ
 
i
=0; i<
MAX_GOP
; i++)

2479 
isOK
[
i
]=
çl£
;

2481 
IÁ
 
numOK
=0;

2482 
	`xCÚfœmP¬a
Ð
m_iIÁ¿P”iod
 >=0&&(m_iIÁ¿P”iod%
m_iGOPSize
!=0), "Intra…eriod must be‡ multiple of GOPSize, or -1" );

2484 
IÁ
 
i
=0; i<
m_iGOPSize
; i++)

2486 if(
m_GOPLi¡
[
i
].
m_POC
==
m_iGOPSize
)

2488 
	`xCÚfœmP¬a
Ð
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
!=0 , "The†ast frame inƒach GOP must haveemporal ID = 0 " );

2492 iàÐ(
m_iIÁ¿P”iod
 !ð1è&& !
m_loÝFž‹rOff£tInPPS
 && (!
m_bLoÝFž‹rDi§bË
) )

2494 
IÁ
 
i
=0; i<
m_iGOPSize
; i++)

2496 
	`xCÚfœmP¬a
Ð(
m_GOPLi¡
[
i
].
m_b‘aOff£tDiv2
 + 
m_loÝFž‹rB‘aOff£tDiv2
) < -6 || (m_GOPList[i].m_betaOffsetDiv2 + m_loopFilterBetaOffsetDiv2) > 6, "Loop Filter Beta Offset div. 2 for one ofhe GOPƒntriesƒxceeds supported„ange (-6o 6)" );

2497 
	`xCÚfœmP¬a
Ð(
m_GOPLi¡
[
i
].
m_tcOff£tDiv2
 + 
m_loÝFž‹rTcOff£tDiv2
) < -6 || (m_GOPList[i].m_tcOffsetDiv2 + m_loopFilterTcOffsetDiv2) > 6, "Loop Filter Tc Offset div. 2 for one ofhe GOPƒntriesƒxceeds supported„ange (-6o 6)" );

2501 
IÁ
 
i
=0; i<
m_iGOPSize
; i++)

2503 
	`xCÚfœmP¬a
Ð
	`abs
(
m_GOPLi¡
[
i
].
m_CbQPoff£t
 ) > 12, "Cb QP Offset for one ofhe GOPƒntriesƒxceeds supported„ange (-12o 12)" );

2504 
	`xCÚfœmP¬a
Ð
	`abs
(
m_GOPLi¡
[
i
].
m_CbQPoff£t
 + 
m_cbQpOff£t
) > 12, "Cb QP Offset for one ofhe GOPƒntries, when combined withhe PPS Cb offset,ƒxceeds supported„ange (-12o 12)" );

2505 
	`xCÚfœmP¬a
Ð
	`abs
(
m_GOPLi¡
[
i
].
m_CrQPoff£t
 ) > 12, "Cr QP Offset for one ofhe GOPƒntriesƒxceeds supported„ange (-12o 12)" );

2506 
	`xCÚfœmP¬a
Ð
	`abs
(
m_GOPLi¡
[
i
].
m_CrQPoff£t
 + 
m_üQpOff£t
) > 12, "Cr QP Offset for one ofhe GOPƒntries, when combined withhe PPS Cr offset,ƒxceeds supported„ange (-12o 12)" );

2508 
	`xCÚfœmP¬a
Ð
	`abs
(
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[0] ) > 12, "Intra/periodic Cb QP Offsetƒxceeds supported„ange (-12o 12)" );

2509 
	`xCÚfœmP¬a
Ð
	`abs
(
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[0] + 
m_cbQpOff£t
 ) > 12, "Intra/periodic Cb QP Offset, when combined withhe PPS Cb offset,ƒxceeds supported„ange (-12o 12)" );

2510 
	`xCÚfœmP¬a
Ð
	`abs
(
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[1] ) > 12, "Intra/periodic Cr QP Offsetƒxceeds supported„ange (-12o 12)" );

2511 
	`xCÚfœmP¬a
Ð
	`abs
(
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[1] + 
m_üQpOff£t
 ) > 12, "Intra/periodic Cr QP Offset, when combined withhe PPS Cr offset,ƒxceeds supported„ange (-12o 12)" );

2513 
m_exŒaRPSs
=0;

2515 !
v”if›dGOP
&&!
”rÜGOP
)

2517 
IÁ
 
curGOP
 = (
checkGOP
-1)%
m_iGOPSize
;

2518 
IÁ
 
curPOC
 = ((
checkGOP
-1)/
m_iGOPSize
)*m_iGOPSiz+ 
m_GOPLi¡
[
curGOP
].
m_POC
;

2519 if(
m_GOPLi¡
[
curGOP
].
m_POC
<0)

2521 
	`´štf
("\nError: found fewer Reference Picture Setshan GOPSize\n");

2522 
”rÜGOP
=
Œue
;

2527 
BoÞ
 
befÜeI
 = 
çl£
;

2528 
IÁ
 
i
 = 0; i< 
m_GOPLi¡
[
curGOP
].
m_numRefPics
; i++)

2530 
IÁ
 
absPOC
 = 
curPOC
+
m_GOPLi¡
[
curGOP
].
m_»ã»nûPics
[
i
];

2531 if(
absPOC
 < 0)

2533 
befÜeI
=
Œue
;

2537 
BoÞ
 
found
=
çl£
;

2538 
IÁ
 
j
=0; j<
numRefs
; j++)

2540 if(
»fLi¡
[
j
]==
absPOC
)

2542 
found
=
Œue
;

2543 
IÁ
 
k
=0; k<
m_iGOPSize
; k++)

2545 if(
absPOC
%
m_iGOPSize
 =ð
m_GOPLi¡
[
k
].
m_POC
%m_iGOPSize)

2547 if(
m_GOPLi¡
[
k
].
m_‹mpÜ®Id
==m_GOPLi¡[
curGOP
].m_temporalId)

2549 
m_GOPLi¡
[
k
].
m_»fPic
 = 
Œue
;

2551 
m_GOPLi¡
[
curGOP
].
m_u£dByCu¼Pic
[
i
]=m_GOPLi¡[
k
].
m_‹mpÜ®Id
<=m_GOPList[curGOP].m_temporalId;

2556 if(!
found
)

2558 
	`´štf
("\nE¼Ü:„eàpiø%d i nÙ‡važabË fÜ GOP f¿m%d\n",
m_GOPLi¡
[
curGOP
].
m_»ã»nûPics
[
i
],curGOP+1);

2559 
”rÜGOP
=
Œue
;

2563 if(!
befÜeI
&&!
”rÜGOP
)

2566 if(!
isOK
[
curGOP
])

2568 
numOK
++;

2569 
isOK
[
curGOP
]=
Œue
;

2570 if(
numOK
==
m_iGOPSize
)

2572 
v”if›dGOP
=
Œue
;

2579 #ià
DPB_ENCODER_USAGE_CHECK


2580 
	`as£¹
(
m_iGOPSize
+
m_exŒaRPSs
 < 
MAX_GOP
);

2582 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
]=m_GOPLi¡[
curGOP
];

2583 
IÁ
 
ÃwRefs
=0;

2584 
IÁ
 
i
 = 0; i< 
m_GOPLi¡
[
curGOP
].
m_numRefPics
; i++)

2586 
IÁ
 
absPOC
 = 
curPOC
+
m_GOPLi¡
[
curGOP
].
m_»ã»nûPics
[
i
];

2587 if(
absPOC
>=0)

2589 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
ÃwRefs
]=m_GOPLi¡[
curGOP
].m_»ã»nûPics[
i
];

2590 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_u£dByCu¼Pic
[
ÃwRefs
]=m_GOPLi¡[
curGOP
].m_u£dByCu¼Pic[
i
];

2591 
ÃwRefs
++;

2594 
IÁ
 
numP»fRefs
 = 
m_GOPLi¡
[
curGOP
].
m_numRefPicsAùive
;

2596 
IÁ
 
off£t
 = -1; off£t>-
checkGOP
; offset--)

2599 
IÁ
 
offGOP
 = (
checkGOP
-1+
off£t
)%
m_iGOPSize
;

2600 
IÁ
 
offPOC
 = ((
checkGOP
-1+
off£t
)/
m_iGOPSize
)*m_iGOPSiz+ 
m_GOPLi¡
[
offGOP
].
m_POC
;

2601 if(
offPOC
>=0&&
m_GOPLi¡
[
offGOP
].
m_‹mpÜ®Id
<=m_GOPLi¡[
curGOP
].m_temporalId)

2603 
BoÞ
 
ÃwRef
=
çl£
;

2604 
IÁ
 
i
=0; i<
numRefs
; i++)

2606 if(
»fLi¡
[
i
]==
offPOC
)

2608 
ÃwRef
=
Œue
;

2611 
IÁ
 
i
=0; i<
ÃwRefs
; i++)

2613 if(
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
i
]==
offPOC
-
curPOC
)

2615 
ÃwRef
=
çl£
;

2618 if(
ÃwRef
)

2620 
IÁ
 
š£¹Pošt
=
ÃwRefs
;

2622 if(
m_GOPLi¡
[
offGOP
].
m_‹mpÜ®Id
==m_GOPLi¡[
curGOP
].m_temporalId)

2624 
m_GOPLi¡
[
offGOP
].
m_»fPic
 = 
Œue
;

2626 
IÁ
 
j
=0; j<
ÃwRefs
; j++)

2628 if(
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
j
]<
offPOC
-
curPOC
||m_GOPList[m_iGOPSize+m_extraRPSs].m_referencePics[j]>0)

2630 
š£¹Pošt
 = 
j
;

2634 
IÁ
 
´ev
 = 
offPOC
-
curPOC
;

2635 
IÁ
 
´evU£d
 = 
m_GOPLi¡
[
offGOP
].
m_‹mpÜ®Id
<=m_GOPLi¡[
curGOP
].m_temporalId;

2636 
IÁ
 
j
=
š£¹Pošt
; j<
ÃwRefs
+1; j++)

2638 
IÁ
 
ÃwP»v
 = 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
j
];

2639 
IÁ
 
ÃwU£d
 = 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_u£dByCu¼Pic
[
j
];

2640 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
j
]=
´ev
;

2641 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_u£dByCu¼Pic
[
j
]=
´evU£d
;

2642 
´evU£d
=
ÃwU£d
;

2643 
´ev
=
ÃwP»v
;

2645 
ÃwRefs
++;

2648 if(
ÃwRefs
>=
numP»fRefs
)

2653 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_numRefPics
=
ÃwRefs
;

2654 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_POC
 = 
curPOC
;

2655 ià(
m_exŒaRPSs
 == 0)

2657 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_š‹rRPSP»diùiÚ
 = 0;

2658 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_numRefIdc
 = 0;

2662 
IÁ
 
rIdx
 = 
m_iGOPSize
 + 
m_exŒaRPSs
 - 1;

2663 
IÁ
 
»fPOC
 = 
m_GOPLi¡
[
rIdx
].
m_POC
;

2664 
IÁ
 
»fPics
 = 
m_GOPLi¡
[
rIdx
].
m_numRefPics
;

2665 
IÁ
 
ÃwIdc
=0;

2666 
IÁ
 
i
 = 0; i<ð
»fPics
; i++)

2668 
IÁ
 
d–POC
 = ((
i
 !ð
»fPics
)? 
m_GOPLi¡
[
rIdx
].
m_»ã»nûPics
[i] : 0);

2669 
IÁ
 
absPOC»f
 = 
»fPOC
+
d–POC
;

2670 
IÁ
 
»fIdc
 = 0;

2671 
IÁ
 
j
 = 0; j < 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_numRefPics
; j++)

2673 iàÐ(
absPOC»f
 - 
curPOC
è=ð
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»ã»nûPics
[
j
])

2675 ià(
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_u£dByCu¼Pic
[
j
])

2677 
»fIdc
 = 1;

2681 
»fIdc
 = 2;

2685 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_»fIdc
[
ÃwIdc
]=
»fIdc
;

2686 
ÃwIdc
++;

2688 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_š‹rRPSP»diùiÚ
 = 1;

2689 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_numRefIdc
 = 
ÃwIdc
;

2690 
m_GOPLi¡
[
m_iGOPSize
+
m_exŒaRPSs
].
m_d–RPS
 = 
»fPOC
 - m_GOPLi¡[m_iGOPSize+m_exŒaRPSs].
m_POC
;

2692 
curGOP
=
m_iGOPSize
+
m_exŒaRPSs
;

2693 
m_exŒaRPSs
++;

2695 
numRefs
=0;

2696 
IÁ
 
i
 = 0; i< 
m_GOPLi¡
[
curGOP
].
m_numRefPics
; i++)

2698 
IÁ
 
absPOC
 = 
curPOC
+
m_GOPLi¡
[
curGOP
].
m_»ã»nûPics
[
i
];

2699 if(
absPOC
 >= 0)

2701 
»fLi¡
[
numRefs
]=
absPOC
;

2702 
numRefs
++;

2705 
»fLi¡
[
numRefs
]=
curPOC
;

2706 
numRefs
++;

2708 
checkGOP
++;

2710 
	`xCÚfœmP¬a
(
”rÜGOP
,"Invalid GOP structure given");

2711 
m_maxTempLay”
 = 1;

2712 
IÁ
 
i
=0; i<
m_iGOPSize
; i++)

2714 if(
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
 >ð
m_maxTempLay”
)

2716 
m_maxTempLay”
 = 
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
+1;

2718 
	`xCÚfœmP¬a
(
m_GOPLi¡
[
i
].
m_¦iûTy³
!='B' && m_GOPList[i].m_sliceType!='P' && m_GOPList[i].m_sliceType!='I', "Sliceype must beƒqualo B or P or I");

2720 
IÁ
 
i
=0; i<
MAX_TLAYER
; i++)

2722 
m_numReÜd”Pics
[
i
] = 0;

2723 
m_maxDecPicBufãršg
[
i
] = 1;

2725 
IÁ
 
i
=0; i<
m_iGOPSize
; i++)

2727 if(
m_GOPLi¡
[
i
].
m_numRefPics
+1 > 
m_maxDecPicBufãršg
[m_GOPLi¡[i].
m_‹mpÜ®Id
])

2729 
m_maxDecPicBufãršg
[
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
] = m_GOPLi¡[i].
m_numRefPics
 + 1;

2731 
IÁ
 
highe¡DecodšgNumb”W™hLow”POC
 = 0;

2732 
IÁ
 
j
=0; j<
m_iGOPSize
; j++)

2734 if(
m_GOPLi¡
[
j
].
m_POC
 <ðm_GOPLi¡[
i
].m_POC)

2736 
highe¡DecodšgNumb”W™hLow”POC
 = 
j
;

2739 
IÁ
 
numReÜd”
 = 0;

2740 
IÁ
 
j
=0; j<
highe¡DecodšgNumb”W™hLow”POC
; j++)

2742 if(
m_GOPLi¡
[
j
].
m_‹mpÜ®Id
 <ðm_GOPLi¡[
i
].m_temporalId &&

2743 
m_GOPLi¡
[
j
].
m_POC
 > m_GOPLi¡[
i
].m_POC)

2745 
numReÜd”
++;

2748 if(
numReÜd”
 > 
m_numReÜd”Pics
[
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
])

2750 
m_numReÜd”Pics
[
m_GOPLi¡
[
i
].
m_‹mpÜ®Id
] = 
numReÜd”
;

2753 
IÁ
 
i
=0; i<
MAX_TLAYER
-1; i++)

2756 if(
m_numReÜd”Pics
[
i
+1] < m_numReorderPics[i])

2758 
m_numReÜd”Pics
[
i
+1] = m_numReorderPics[i];

2761 if(
m_numReÜd”Pics
[
i
] > 
m_maxDecPicBufãršg
[i] - 1)

2763 
m_maxDecPicBufãršg
[
i
] = 
m_numReÜd”Pics
[i] + 1;

2766 if(
m_maxDecPicBufãršg
[
i
+1] < m_maxDecPicBuffering[i])

2768 
m_maxDecPicBufãršg
[
i
+1] = m_maxDecPicBuffering[i];

2773 if(
m_numReÜd”Pics
[
MAX_TLAYER
-1] > 
m_maxDecPicBufãršg
[MAX_TLAYER-1] - 1)

2775 
m_maxDecPicBufãršg
[
MAX_TLAYER
-1] = 
m_numReÜd”Pics
[MAX_TLAYER-1] + 1;

2778 #ià
DPB_ENCODER_USAGE_CHECK


2780 
IÁ
 
dpbSize
=
´ofžeLev–T›rF—tu»s
.
	`g‘MaxDPBNumF¿mes
(
m_iSourûWidth
*
m_iSourûHeight
);

2781 ià(
dpbSize
!=-1)

2783 
IÁ
 
dpbU§ge
=
	`xDPBU§ge
(0);

2785 ià(
dpbU§ge
 > 
dpbSize
)

2787 
¡d
::
cout
 << "WARNING - DPB SIZE (" << 
dpbSize
 << "…ictures) IS LIKELY TO HAVE BEEN EXCEEDED:\n";

2788 
	`xDPBU§ge
(&(
¡d
::
cout
));

2793 if(
m_vuiP¬am‘”sP»£ÁFÏg
 && 
m_b™¡»amRe¡riùiÚFÏg
)

2795 
IÁ
 
PicSizeInSam¶esY
 = 
m_iSourûWidth
 * 
m_iSourûHeight
;

2796 if(
tžeFÏg
)

2798 
IÁ
 
maxTžeWidth
 = 0;

2799 
IÁ
 
maxTžeHeight
 = 0;

2800 
IÁ
 
widthInCU
 = (
m_iSourûWidth
 % 
m_uiMaxCUWidth
) ? m_iSourceWidth/m_uiMaxCUWidth + 1: m_iSourceWidth/m_uiMaxCUWidth;

2801 
IÁ
 
heightInCU
 = (
m_iSourûHeight
 % 
m_uiMaxCUHeight
) ? m_iSourceHeight/m_uiMaxCUHeight + 1: m_iSourceHeight/m_uiMaxCUHeight;

2802 if(
m_tžeUnifÜmS·cšgFÏg
)

2804 
maxTžeWidth
 = 
m_uiMaxCUWidth
*((
widthInCU
+
m_numTžeCÞumnsMšus1
)/(m_numTileColumnsMinus1+1));

2805 
maxTžeHeight
 = 
m_uiMaxCUHeight
*((
heightInCU
+
m_numTžeRowsMšus1
)/(m_numTileRowsMinus1+1));

2808 if(!((
heightInCU
-1)%(
m_numTžeRowsMšus1
+1)))

2810 
maxTžeHeight
 = maxTžeHeighˆ- 
m_uiMaxCUHeight
 + (
m_iSourûHeight
 % m_uiMaxCUHeight);

2814 if(!((
widthInCU
-1)%(
m_numTžeCÞumnsMšus1
+1)))

2816 
maxTžeWidth
 = maxTžeWidth - 
m_uiMaxCUWidth
 + (
m_iSourûWidth
 % m_uiMaxCUWidth);

2821 if(
m_numTžeCÞumnsMšus1
<1)

2823 
maxTžeWidth
 = 
m_iSourûWidth
;

2827 
IÁ
 
accCÞumnWidth
 = 0;

2828 
IÁ
 
cÞ
=0; cÞ<(
m_numTžeCÞumnsMšus1
); col++)

2830 
maxTžeWidth
 = 
m_tžeCÞumnWidth
[
cÞ
]>maxTileWidth ? m_tileColumnWidth[col]:maxTileWidth;

2831 
accCÞumnWidth
 +ð
m_tžeCÞumnWidth
[
cÞ
];

2833 
maxTžeWidth
 = (
widthInCU
-
accCÞumnWidth
)>maxTžeWidth ? 
m_uiMaxCUWidth
*(widthInCU-accColumnWidth):m_uiMaxCUWidth*maxTileWidth;

2835 if(
m_numTžeRowsMšus1
<1)

2837 
maxTžeHeight
 = 
m_iSourûHeight
;

2841 
IÁ
 
accRowHeight
 = 0;

2842 
IÁ
 
row
=0;„ow<(
m_numTžeRowsMšus1
);„ow++)

2844 
maxTžeHeight
 = 
m_tžeRowHeight
[
row
]>maxTileHeight ? m_tileRowHeight[row]:maxTileHeight;

2845 
accRowHeight
 +ð
m_tžeRowHeight
[
row
];

2847 
maxTžeHeight
 = (
heightInCU
-
accRowHeight
)>maxTžeHeighˆ? 
m_uiMaxCUHeight
*(heightInCU-accRowHeight):m_uiMaxCUHeight*maxTileHeight;

2850 
IÁ
 
maxSizeInSam¶esY
 = 
maxTžeWidth
*
maxTžeHeight
;

2851 
m_mšS·tŸlSegm’tiÚIdc
 = 4*
PicSizeInSam¶esY
/
maxSizeInSam¶esY
-4;

2853 if(
m_’ŒÝyCodšgSyncEÇbËdFÏg
)

2855 
m_mšS·tŸlSegm’tiÚIdc
 = 4*
PicSizeInSam¶esY
/((2*
m_iSourûHeight
+
m_iSourûWidth
)*
m_uiMaxCUHeight
)-4;

2857 if(
m_¦iûMode
 =ð
FIXED_NUMBER_OF_CTU
)

2859 
m_mšS·tŸlSegm’tiÚIdc
 = 4*
PicSizeInSam¶esY
/(
m_¦iûArgum’t
*
m_uiMaxCUWidth
*
m_uiMaxCUHeight
)-4;

2863 
m_mšS·tŸlSegm’tiÚIdc
 = 0;

2867 ià(
m_tÚeM­pšgInfoSEIEÇbËd
)

2869 
	`xCÚfœmP¬a
Ð
m_tÚeM­CodedD©aB™D•th
 < 8 || m_toneMapCodedDataBitDepth > 14 , "SEIToneMapCodedDataBitDepth must be in„age 8o 14");

2870 
	`xCÚfœmP¬a
Ð
m_tÚeM­T¬g‘B™D•th
 < 1 || (m_toneMapTargetBitDepth > 16 && m_toneMapTargetBitDepth < 255) , "SEIToneMapTargetBitDepth must be in„age 1o 16 orƒqualo 255");

2871 
	`xCÚfœmP¬a
Ð
m_tÚeM­Mod–Id
 < 0 || m_toneMapModelId > 4 , "SEIToneMapModelId must be in„age 0o 4");

2872 
	`xCÚfœmP¬a
Ð
m_ÿm”aIsoS³edV®ue
 == 0, "SEIToneMapCameraIsoSpeedValue shall‚ot beƒqualo 0");

2873 
	`xCÚfœmP¬a
Ð
m_exposu»IndexV®ue
 == 0, "SEIToneMapExposureIndexValue shall‚ot beƒqualo 0");

2874 
	`xCÚfœmP¬a
Ð
m_ex‹ndedRªgeWh™eLev–
 < 100, "SEIToneMapExtendedRangeWhiteLevel should be greaterhan orƒqualo 100");

2875 
	`xCÚfœmP¬a
Ð
m_nomš®BÏckLev–LumaCodeV®ue
 >ð
m_nomš®Wh™eLev–LumaCodeV®ue
, "SEIToneMapNominalWhiteLevelLumaCodeValue shall be greaterhan SEIToneMapNominalBlackLevelLumaCodeValue");

2876 
	`xCÚfœmP¬a
Ð
m_ex‹ndedWh™eLev–LumaCodeV®ue
 < 
m_nomš®Wh™eLev–LumaCodeV®ue
, "SEIToneMapExtendedWhiteLevelLumaCodeValue shall be greaterhan orƒqualo SEIToneMapNominalWhiteLevelLumaCodeValue");

2879 ià(
m_kÃeSEIEÇbËd
 && !
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeFunùiÚCªûlFÏg
)

2881 
IÁ
 
kÃeSEINumKÃePoštsMšus1
=
	`IÁ
(
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeSEIKÃePoštPaœs
.
	`size
())-1;

2882 
	`xCÚfœmP¬a
Ð
kÃeSEINumKÃePoštsMšus1
 < 0 || kneeSEINumKneePointsMinus1 > 998, "SEIKneeFunctionNumKneePointsMinus1 must be inhe„ange of 0o 998");

2883  
UIÁ
 
i
=0; i<=
kÃeSEINumKÃePoštsMšus1
; i++ )

2885 
TEncCfg
::
TEncSEIKÃeFunùiÚInfÜm©iÚ
::
KÃePoštPaœ
 &
kµ
=
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeSEIKÃePoštPaœs
[
i
];

2886 
	`xCÚfœmP¬a
Ð
kµ
.
šputKÃePošt
 < 1 || kpp.inputKneePoint > 999, "SEIKneeFunctionInputKneePointValue must be inhe„ange of 1o 999");

2887 
	`xCÚfœmP¬a
Ð
kµ
.
ouutKÃePošt
 < 0 || kpp.outputKneePoint > 1000, "SEIKneeFunctionOutputKneePointValue must be inhe„ange of 0o 1000");

2888 iàÐ
i
 > 0 )

2890 
TEncCfg
::
TEncSEIKÃeFunùiÚInfÜm©iÚ
::
KÃePoštPaœ
 &
kµP»v
=
m_kÃeFunùiÚInfÜm©iÚSEI
.
m_kÃeSEIKÃePoštPaœs
[
i
-1];

2891 
	`xCÚfœmP¬a
Ð
kµP»v
.
šputKÃePošt
 >ð
kµ
.inputKneePoint, "The i-th SEIKneeFunctionInputKneePointValue must be greaterhanhe (i-1)-th value");

2892 
	`xCÚfœmP¬a
Ð
kµP»v
.
ouutKÃePošt
 >ð
kµ
.outputKneePoint, "The i-th SEIKneeFunctionOutputKneePointValue must be greaterhan orƒqualohe (i-1)-th value");

2897 ià(
m_chromaRe§m¶šgFž‹rSEI’abËd
)

2899 
	`xCÚfœmP¬a
Ð(
m_chromaFÜm©IDC
 =ð
CHROMA_400
 ), "chromaResamplingFilterSEI is‚ot‡llowedo be…resent when ChromaFormatIDC isƒqualo zero (4:0:0)" );

2900 
	`xCÚfœmP¬a
(
m_vuiP¬am‘”sP»£ÁFÏg
 && 
m_chromaLocInfoP»£ÁFÏg
 && (
m_chromaSam¶eLocTy³TÝF›ld
 !ð
m_chromaSam¶eLocTy³BÙtomF›ld
 ), "When chromaResamplingFilterSEI isƒnabled, ChromaSampleLocTypeTopField haso beƒqualo ChromaSampleLocTypeBottomField" );

2903 iàÐ
m_RCEÇbËR©eCÚŒÞ
 )

2905 iàÐ
m_RCFÜûIÁ¿QP
 )

2907 iàÐ
m_RCIn™ŸlQP
 == 0 )

2909 
	`´štf
( "\nInitial QP for„ate control is‚ot specified. Reset‚oto use force intra QP!" );

2910 
m_RCFÜûIÁ¿QP
 = 
çl£
;

2913 
	`xCÚfœmP¬a
Ð
m_uiD–QpRD
 > 0, "Rate control cannot be usedogether with slice†evel multiple-QP optimization!\n" );

2914 #ià
DPB_ENCODER_USAGE_CHECK


2915 ià((
m_RCCpbS©u¿tiÚEÇbËd
è&& 
´ofžeLev–T›rF—tu»s
.
	`g‘CpbSizeInB™s
()!=0)

2917 
	`xCÚfœmP¬a
(
m_RCCpbSize
 > 
´ofžeLev–T›rF—tu»s
.
	`g‘CpbSizeInB™s
(), "RCCpbSize should be smallerhan orƒqualo Max CPB size‡ccordingoier‡nd†evel");

2919 ià((
m_RCCpbS©u¿tiÚEÇbËd
è&& (
m_Ëv–
!=
Lev–
::
NONE
è&& (
m_´ofže
!=
Profže
::NONE))

2921 
UIÁ
 
uiLev–Idx
 = (
m_Ëv–
 / 10) + (UInt)((m_level % 10) / 3);

2922 
	`xCÚfœmP¬a
(
m_RCCpbSize
 > 
g_uiMaxCpbSize
[
m_Ëv–T›r
][
uiLev–Idx
], "RCCpbSize should be smallerhan orƒqualo Max CPB size‡ccordingoier‡nd†evel");

2924 
	`xCÚfœmP¬a
(
m_RCIn™ŸlCpbFuÎÃss
 > 1, "RCInitialCpbFullness should be smallerhan orƒqualo 1");

2929 
	`xCÚfœmP¬a
Ð
m_RCCpbS©u¿tiÚEÇbËd
 != 0, "Target bits saturation cannot be…rocessed without Rate control" );

2931 ià(
m_vuiP¬am‘”sP»£ÁFÏg
)

2933 
	`xCÚfœmP¬a
(
m_RCT¬g‘B™¿‹
 == 0, "Aarget bit„ate is„equiredo be set for VUI/HRD…arameters.");

2934 ià(
m_RCCpbSize
 == 0)

2936 
	`´štf
 ("Warning: CPB size is setƒqualo zero. Adjusting valueo beƒqualo TargetBitrate!\n");

2937 
m_RCCpbSize
 = 
m_RCT¬g‘B™¿‹
;

2941 
	`xCÚfœmP¬a
(!
m_T¿nsquªtBy·ssEÇbËdFÏg
 && 
m_CUT¿nsquªtBy·ssFÏgFÜû
, "CUTransquantBypassFlagForce cannot be 1 when TransquantBypassEnableFlag is 0");

2943 
	`xCÚfœmP¬a
(
m_log2P¬®ËlM”geLev–
 < 2, "Log2ParallelMergeLevel should be†argerhan orƒqualo 2");

2945 ià(
m_äamePackšgSEIEÇbËd
)

2947 
	`xCÚfœmP¬a
(
m_äamePackšgSEITy³
 < 3 || m_framePackingSEIType > 5 , "SEIFramePackingType must be in„age 3o 5");

2950 ià(
m_£gm’‹dReùF¿mePackšgSEIEÇbËd
)

2952 
	`xCÚfœmP¬a
(
m_äamePackšgSEIEÇbËd
 , "SEISegmentedRectFramePacking must be 0 when SEIFramePacking is 1");

2955 if((
m_numTžeCÞumnsMšus1
 <ð0è&& (
m_numTžeRowsMšus1
 <ð0è&& 
m_tmùsSEIEÇbËd
)

2957 
	`´štf
("Warning: SEITempMotionConstrainedTileSets is seto falseo disableemporal motion-constrainedile sets SEI message becausehere‡re‚oilesƒnabled.\n");

2958 
m_tmùsSEIEÇbËd
 = 
çl£
;

2961 #ià
MCTS_ENC_CHECK


2962 ià((
m_tmùsSEIEÇbËd
è&& (
m_tmùsSEITžeCÚ¡¿št
è&& (
m_bLFCrossTžeBound¬yFÏg
) )

2964 
	`´štf
("Warning: Constrained Encoding for Temporal Motion Constrained Tile Sets isƒnabled. Disabling filtering‡crossile boundaries!\n");

2965 
m_bLFCrossTžeBound¬yFÏg
 = 
çl£
;

2969 #ià
MCTS_EXTRACTION


2970 ià((
m_tmùsSEIEÇbËd
è&& (
m_tmùsSEITžeCÚ¡¿št
è&& (
m_tmùsExŒaùiÚSEIEÇbËd
è&& (
m_¦iûSegm’tMode
 !ð3è&& (
m_¦iûSegm’tArgum’t
 != 1) )

2972 
	`´štf
("Warning: SEITMCTSExtractionInfo isƒnabled. Enabling segmentation with one slice…erile.");

2973 
m_¦iûMode
 = 
FIXED_NUMBER_OF_TILES
;

2974 
m_¦iûArgum’t
 = 1;

2978 if(
m_timeCodeSEIEÇbËd
)

2980 
	`xCÚfœmP¬a
(
m_timeCodeSEINumTs
 > 
MAX_TIMECODE_SEI_SETS
, "Number ofime sets cannotƒxceed 3");

2983 
	`xCÚfœmP¬a
(
m_´eã¼edT¿nsãrCh¬aù”i¡ics
 > 255, "transfer_characteristics_idc should‚ot be greaterhan 255.");

2985 ifÐ
m_”pSEIEÇbËd
 && !
m_”pSEICªûlFÏg
 )

2987 
	`xCÚfœmP¬a
Ð
m_”pSEIGu¬dBªdTy³
 < 0 || m_erpSEIGuardBandType > 8, "SEIEquirectangularprojectionGuardBandType must be inhe„ange of 0o 7");

2988 
	`xCÚfœmP¬a
Ð(
m_chromaFÜm©IDC
 =ð
CHROMA_420
 || m_chromaFÜm©IDC =ð
CHROMA_422
è&& (
m_”pSEILeáGu¬dBªdWidth
%2 == 1), "SEIEquirectangularprojectionLeftGuardBandWidth must be‡nƒven‚umber for 4:2:0 or 4:2:2 chroma format");

2989 
	`xCÚfœmP¬a
Ð(
m_chromaFÜm©IDC
 =ð
CHROMA_420
 || m_chromaFÜm©IDC =ð
CHROMA_422
è&& (
m_”pSEIRightGu¬dBªdWidth
%2 == 1), "SEIEquirectangularprojectionRightGuardBandWidth must be‡nƒven‚umber for 4:2:0 or 4:2:2 chroma format");

2992 ifÐ
m_¥h”eRÙ©iÚSEIEÇbËd
 && !
m_¥h”eRÙ©iÚSEICªûlFÏg
 )

2994 
	`xCÚfœmP¬a
Ð
m_¥h”eRÙ©iÚSEIYaw
 < -(180<<16) || m_sphereRotationSEIYaw > (180<<16)-1, "SEISphereRotationYaw must be inhe„ange of -11 796 480o 11 796 479");

2995 
	`xCÚfœmP¬a
Ð
m_¥h”eRÙ©iÚSEIP™ch
 < -(90<<16è|| 
m_¥h”eRÙ©iÚSEIYaw
 > (90<<16), "SEISphereRotationPitch must be inhe„ange of -5 898 240o 5 898 240");

2996 
	`xCÚfœmP¬a
Ð
m_¥h”eRÙ©iÚSEIRÞl
 < -(180<<16è|| 
m_¥h”eRÙ©iÚSEIYaw
 > (180<<16)-1, "SEISphereRotationRoll must be inhe„ange of -11 796 480o 11 796 479");

2997 
	`xCÚfœmP¬a
Ð
m_”pSEICªûlFÏg
 =ð1 && 
m_cmpSEICmpCªûlFÏg
 == 1, "erp_cancel_flagƒqualo 0 or cmp_cancel_flagƒqualo 0 must be…resent");

3000 iàÐ
m_omniV›wpÜtSEIEÇbËd
 && !
m_omniV›wpÜtSEICªûlFÏg
 )

3002 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEIId
 < 0 || m_omniViewportSEIId > 1023, "SEIomniViewportId must be inhe„ange of 0o 1023");

3003 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEICÁMšus1
 < 0 || m_omniViewportSEICntMinus1 > 15, "SEIomniViewportCntMinus1 must be inhe„ange of 0o 15");

3004  
UIÁ
 
i
=0; i<=
m_omniV›wpÜtSEICÁMšus1
; i++ )

3006 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEIAzimuthC’Œe
[
i
] < -(180<<16) || m_omniViewportSEIAzimuthCentre[i] > (180<<16)-1, "SEIOmniViewportAzimuthCentre must be inhe„ange of -11 796 480o 11 796 479");

3007 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEIEËv©iÚC’Œe
[
i
] < -(90<<16) || m_omniViewportSEIElevationCentre[i] > (90<<16), "SEIOmniViewportSEIElevationCentre must be inhe„ange of -5 898 240o 5 898 240");

3008 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEITžtC’Œe
[
i
] < -(180<<16) || m_omniViewportSEITiltCentre[i] > (180<<16)-1, "SEIOmniViewportTiltCentre must be inhe„ange of -11 796 480o 11 796 479");

3009 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEIHÜRªge
[
i
] < 1 || m_omniViewportSEIHorRange[i] > (360<<16), "SEIOmniViewportHorRange must be inhe„ange of 1o 360*2^16");

3010 
	`xCÚfœmP¬a
Ð
m_omniV›wpÜtSEIV”Rªge
[
i
] < 1 || m_omniViewportSEIVerRange[i] > (180<<16), "SEIOmniViewportVerRange must be inhe„ange of 1o 180*2^16");

3014 ià(
m_gÝBa£dTempÜ®Fž‹rEÇbËd
)

3016 
	`xCÚfœmP¬a
(
m_‹mpÜ®Sub§m¶eR©io
 != 1, "GOP Based Temporal Filter only support Temporal sub-sample„atio 1");

3019 #ià
EXTENSION_360_VIDEO


3020 
check_çžed
 |ð
m_ext360
.
	`v”ifyP¬am‘”s
();

3023 #undeà
xCÚfœmP¬a


3024 ià(
check_çžed
)

3026 
	`ex™
(
EXIT_FAILURE
);

3028 
	}
}

3030 cÚ¡ 
TCh¬
 *
	$´ofžeToSŒšg
(cÚ¡ 
Profže
::
Name
 
´ofže
)

3032 cÚ¡ 
UIÁ
 
numb”OfProfžes
 = (
¡rToProfže
)/(*strToProfile);

3034 
UIÁ
 
´ofžeIndex
 = 0;…rofžeIndex < 
numb”OfProfžes
;…rofileIndex++)

3036 ià(
¡rToProfže
[
´ofžeIndex
].
v®ue
 =ð
´ofže
)

3038  
¡rToProfže
[
´ofžeIndex
].
¡r
;

3043 
¡d
::
û¼
 << "ERROR: UnknowÀ´ofž\"" << 
´ofže
 << "\" iÀ´ofžeToSŒšg" << std::
’dl
;

3044 
	`as£¹
(
çl£
);

3045 
	`ex™
(1);

3047 
	}
}

3049 #ià
DPB_ENCODER_USAGE_CHECK


3051 
IÁ
 
	gTAµEncCfg
::
	$xDPBU§ge
(
¡d
::
o¡»am
 *
pOs
)

3053 
IÁ
 
mšimumOff£t
=0;

3057 
IÁ
 
gÝEÁry
=0; gÝEÁry<
m_iGOPSize
; gopEntry++)

3059 
IÁ
 
poc
=
m_GOPLi¡
[
gÝEÁry
].
m_POC
;

3060 
mšimumOff£t
=
¡d
::
max
<
IÁ
>(mšimumOff£t, 
gÝEÁry
-
poc
);

3063 ià(
pOs
)

3065 (*
pOs
) << "POCs marked with 'r'‡re„eference frames. '!'‡re‡waiting output.\n";

3068 
IÁ
 
maxNumInDPB
=0;

3069 
IÁ
 
gÝEÁry
=0; gÝEÁry<
m_iGOPSize
; gopEntry++)

3071 ià(
pOs
)

3073 (*
pOs
è<< "DPB U§gfÜ GOP#" << 
¡d
::
	`£tw
(3è<< 
gÝEÁry
+1 << ": POC="

3074 << 
¡d
::
	`£tw
(3è<< 
m_GOPLi¡
[
gÝEÁry
].
m_POC
 << " Decod” ouuˆPOC=" << std::£tw(4è<< gÝEÁry-
mšimumOff£t
 << " frames= ";

3075 
IÁ
 
i
=0; i<
m_GOPLi¡
[
gÝEÁry
].
m_numRefPics
; i++)

3077 
IÁ
 
½lPoc
=
m_GOPLi¡
[
gÝEÁry
].
m_»ã»nûPics
[
i
]+m_GOPLi¡[gÝEÁry].
m_POC
;

3078 (*
pOs
è<< "„" << 
¡d
::
	`£tw
(3è<< 
½lPoc
;

3081 
IÁ
 
numInDPB
=
m_GOPLi¡
[
gÝEÁry
].
m_numRefPics
 + 1;

3084 
IÁ
 
n
=
gÝEÁry
-
mšimumOff£t
;‚<=gopEntry;‚++)

3087 
BoÞ
 
bN“ded
=
Œue
;

3088 
IÁ
 
i
=0; i<
m_GOPLi¡
[
gÝEÁry
].
m_numRefPics
 && 
bN“ded
; i++)

3090 
IÁ
 
½lPoc
=
m_GOPLi¡
[
gÝEÁry
].
m_»ã»nûPics
[
i
]+m_GOPLi¡[gÝEÁry].
m_POC
;

3091 
bN“ded
=(
½lPoc
!=
n
);

3093 ià(
bN“ded
 && 
n
>=0)

3096 
bN“ded
=
çl£
;

3097 
IÁ
 
i
=0; i<
gÝEÁry
 && !
bN“ded
; i++)

3099 
bN“ded
=
m_GOPLi¡
[
i
].
m_POC
 =ð
n
;

3103 ià(
bN“ded
)

3105 
numInDPB
++;

3106 ià(
pOs
)

3108 (*
pOs
è<< " !" << 
¡d
::
	`£tw
(3)<< 
n
;

3112 
maxNumInDPB
=
¡d
::
	`max
(maxNumInDPB, 
numInDPB
);

3113 ià(
pOs
)

3115 (*
pOs
è<< 
¡d
::
’dl
;

3118 ià(
pOs
)

3120 (*
pOs
è<< "Maximum‚umb” oàpiùu» »quœed iÀDPB:" << 
maxNumInDPB
 << 
¡d
::
’dl
;

3123  
maxNumInDPB
;

3124 
	}
}

3127 
Void
 
	gTAµEncCfg
::
	$xPrštP¬am‘”
()

3129 
	`´štf
("\n");

3130 
	`´štf
("IÅuˆ Fž : %s\n", 
m_šputFžeName
.
	`c_¡r
() );

3131 
	`´štf
("B™¡»am Fž : %s\n", 
m_b™¡»amFžeName
.
	`c_¡r
() );

3132 
	`´štf
("RecÚ¡ruùiÚ Fž : %s\n", 
m_»cÚFžeName
.
	`c_¡r
() );

3133 
	`´štf
("R—È FÜm© : %dx%d %gHz\n", 
m_iSourûWidth
 - 
m_cÚfWšLeá
 - 
m_cÚfWšRight
, 
m_iSourûHeight
 - 
m_cÚfWšTÝ
 - 
m_cÚfWšBÙtom
, (
DoubË
)
m_iF¿meR©e
/
m_‹mpÜ®Sub§m¶eR©io
 );

3134 
	`´štf
("IÁ”ÇÈFÜm© : %dx%d %gHz\n", 
m_iSourûWidth
, 
m_iSourûHeight
, (
DoubË
)
m_iF¿meR©e
/
m_‹mpÜ®Sub§m¶eR©io
 );

3135 
	`´štf
("Sequ’û PSNR ouuˆ : %s\n", (
m_´štMSEBa£dSequ’ûPSNR
 ? "Linear‡verage, MSE-based" : "Linear‡verage only") );

3136 
	`´štf
("Sequ’û MSE ouuˆ : %s\n", (
m_´štSequ’ûMSE
 ? "Enabled" : "Disabled") );

3137 
	`´štf
("F¿mMSE ouuˆ : %s\n", (
m_´štF¿meMSE
 ? "Enabled" : "Disabled") );

3138 
	`´štf
("MS-SSIM ouuˆ : %s\n", (
m_´štMSSSIM
 ? "Enabled" : "Disabled") );

3139 
	`´štf
("xPSNR c®cuÏtiÚ : %s\n", (
m_bXPSNREÇbËFÏg
 ? "Enabled" : "Disabled"));

3140 ià(
m_bXPSNREÇbËFÏg
)

3142 
	`´štf
("xPSNR Weight  : (%8.3f, %8.3f, %8.3f)\n", 
m_dXPSNRWeight
[
COMPONENT_Y
], m_dXPSNRWeight[
COMPONENT_Cb
], m_dXPSNRWeight[
COMPONENT_Cr
]);

3144 
	`´štf
("Cabac-z”o-wÜd-·ddšg : %s\n", (
m_ÿbacZ”oWÜdPaddšgEÇbËd
? "Enabled" : "Disabled") );

3145 ià(
m_isF›ld
)

3147 
	`´štf
("Frame/Field : Field based coding\n");

3148 
	`´štf
("F›ld index : %u - %d (%d f›lds)\n", 
m_F¿meSk
, m_F¿meSk+
m_äamesToBeEncoded
-1, m_framesToBeEncoded );

3149 
	`´štf
("F›ld Ord” : % f›ld fœ¡\n", 
m_isTÝF›ldFœ¡
?"Top":"Bottom");

3154 
	`´štf
("Frame/Field : Frame based coding\n");

3155 
	`´štf
("F¿mšdex : %u - %d (%d f¿mes)\n", 
m_F¿meSk
, m_F¿meSk+
m_äamesToBeEncoded
-1, m_framesToBeEncoded );

3157 ià(
m_´ofže
 =ð
Profže
::
MAINREXT
)

3159 
UIProfžeName
 
v®idProfžeName
;

3160 ià(
m_ÚePiùu»OÆyCÚ¡¿štFÏg
)

3162 
v®idProfžeName
 = 
m_b™D•thCÚ¡¿št
 =ð8 ? 
UI_MAIN_444_STILL_PICTURE
 : (m_b™D•thCÚ¡¿šˆ=ð16 ? 
UI_MAIN_444_16_STILL_PICTURE
 : 
UI_NONE
);

3166 cÚ¡ 
UIÁ
 
šŒaIdx
 = 
m_šŒaCÚ¡¿štFÏg
 ? 1:0;

3167 cÚ¡ 
UIÁ
 
b™D•thIdx
 = (
m_b™D•thCÚ¡¿št
 == 8 ? 0 : (m_bitDepthConstraint ==10 ? 1 : (m_bitDepthConstraint == 12 ? 2 : (m_bitDepthConstraint == 16 ? 3 : 4 ))));

3168 cÚ¡ 
UIÁ
 
chromaFÜm©Idx
 = 
	`UIÁ
(
m_chromaFÜm©CÚ¡¿št
);

3169 
v®idProfžeName
 = (
b™D•thIdx
 > 3 || 
chromaFÜm©Idx
>3è? 
UI_NONE
 : 
v®idRExtProfžeNames
[
šŒaIdx
][bitDepthIdx][chromaFormatIdx];

3171 
¡d
::
¡ršg
 
»xtSubProfže
;

3172 ià(
v®idProfžeName
!=
UI_NONE
)

3174 
»xtSubProfže
=
	`’umToSŒšg
(
¡rToUIProfžeName
, (¡rToUIProfžeName)/(*¡rToUIProfžeName), 
v®idProfžeName
);

3176 ià(
»xtSubProfže
 == "main_444_16")

3178 
»xtSubProfže
="main_444_16 [NON STANDARD]";

3180 
	`´štf
("Profž : % (%s)\n", 
	`´ofžeToSŒšg
(
m_´ofže
), (
»xtSubProfže
.
	`em±y
())?"INVALID REXT PROFILE":»xtSubProfže.
	`c_¡r
() );

3182 ià(
m_´ofže
 =ð
Profže
::
HIGHTHROUGHPUTREXT
)

3184 
UIProfžeName
 
v®idProfžeName
;

3185 cÚ¡ 
UIÁ
 
šŒaIdx
 = 
m_šŒaCÚ¡¿štFÏg
 ? 1:0;

3186 cÚ¡ 
UIÁ
 
b™D•thIdx
 = (
m_b™D•thCÚ¡¿št
 == 8 ? 0 : (m_bitDepthConstraint ==10 ? 1 : (m_bitDepthConstraint == 12 ? 2 : (m_bitDepthConstraint == 16 ? 3 : 4 ))));

3187 
v®idProfžeName
 = (
b™D•thIdx
 > 3è? 
UI_NONE
 : 
v®idRExtHighThroughPutProfžeNames
[
šŒaIdx
][bitDepthIdx];

3188 
¡d
::
¡ršg
 
subProfže
;

3189 ià(
v®idProfžeName
!=
UI_NONE
)

3191 
subProfže
=
	`’umToSŒšg
(
¡rToUIProfžeName
, (¡rToUIProfžeName)/(*¡rToUIProfžeName), 
v®idProfžeName
);

3193 
	`´štf
("Profž : % (%s)\n", 
	`´ofžeToSŒšg
(
m_´ofže
), (
subProfže
.
	`em±y
())?"INVALID HIGH THROUGHPUT REXT PROFILE":subProfže.
	`c_¡r
() );

3195 ià(
m_´ofže
 =ð
Profže
::
MAIN10
 && 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
)

3197 
	`´štf
("Profž : % (maš10-¡žl-piùu»)\n", 
	`´ofžeToSŒšg
(
m_´ofže
) );

3201 
	`´štf
("Profž : %s\n", 
	`´ofžeToSŒšg
(
m_´ofže
) );

3203 
	`´štf
("CU siz/ d•th /Ù®-d•th : %d / %d / %d\n", 
m_uiMaxCUWidth
, 
m_uiMaxCUD•th
, 
m_uiMaxTÙ®CUD•th
 );

3204 
	`´štf
("RQT¿ns. siz(mš / maxè : %d / %d\n", 1 << 
m_uiQuadŒ“TULog2MšSize
, 1 << 
m_uiQuadŒ“TULog2MaxSize
 );

3205 
	`´štf
("Max RQT d•th iÁ” : %d\n", 
m_uiQuadŒ“TUMaxD•thIÁ”
);

3206 
	`´štf
("Max RQT d•th iÁ¿ : %d\n", 
m_uiQuadŒ“TUMaxD•thIÁ¿
);

3207 
	`´štf
("Mš PCM siz : %d\n", 1 << 
m_uiPCMLog2MšSize
);

3208 
	`´štf
("MÙiÚ s—rch„ªg : %d\n", 
m_iS—rchRªge
 );

3209 
	`´štf
("IÁ¿…”iod : %d\n", 
m_iIÁ¿P”iod
 );

3210 
	`´štf
("Decodšg„eäeshy³ : %d\n", 
m_iDecodšgReäeshTy³
 );

3211 ià(
m_qpInüem’tAtSourûF¿me
.
bP»£Á
)

3213 
	`´štf
("QP : %d (šüem’tšg iÁ”ÇÈQP‡ˆsourû f¿m%d)\n", 
m_iQP
, 
m_qpInüem’tAtSourûF¿me
.
v®ue
 );

3217 
	`´štf
("QP : %d\n", 
m_iQP
 );

3219 
	`´štf
("Max dQP sigÇlšg d•th : %d\n", 
m_iMaxCuDQPD•th
);

3221 
	`´štf
("Cb QP Off£ˆ : %d\n", 
m_cbQpOff£t
 );

3222 
	`´štf
("C¸QP Off£ˆ : %d\n", 
m_üQpOff£t
);

3223 
	`´štf
("QP‡d­tiÚ : %d (¿nge=%d)\n", 
m_bU£Ad­tiveQP
, (m_bU£Ad­tiveQP ? 
m_iQPAd­tiÚRªge
 : 0) );

3224 
	`´štf
("GOP siz : %d\n", 
m_iGOPSize
 );

3225 
	`´štf
("IÅuˆb™ d•th : (Y:%d, C:%d)\n", 
m_šputB™D•th
[
CHANNEL_TYPE_LUMA
], m_šputB™D•th[
CHANNEL_TYPE_CHROMA
] );

3226 
	`´štf
("MSB-ex‹nded b™ d•th : (Y:%d, C:%d)\n", 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
], m_MSBEx‹ndedB™D•th[
CHANNEL_TYPE_CHROMA
] );

3227 
	`´štf
("IÁ”ÇÈb™ d•th : (Y:%d, C:%d)\n", 
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
], m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
] );

3228 
	`´štf
("PCM sam¶b™ d•th : (Y:%d, C:%d)\n", 
m_bPCMIÅutB™D•thFÏg
 ? 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_LUMA
] : 
m_š‹º®B™D•th
[CHANNEL_TYPE_LUMA],

3229 
m_bPCMIÅutB™D•thFÏg
 ? 
m_MSBEx‹ndedB™D•th
[
CHANNEL_TYPE_CHROMA
] : 
m_š‹º®B™D•th
[CHANNEL_TYPE_CHROMA] );

3230 
	`´štf
("IÁ¿„eã»nû smoÙhšg : %s\n", (
m_’abËIÁ¿Reã»nûSmoÙhšg
 ? "Enabled" : "Disabled") );

3231 
	`´štf
("diff_cu_chroma_qp_off£t_d•th : %d\n", 
m_diffCuChromaQpOff£tD•th
);

3232 
	`´štf
("ex‹nded_´ecisiÚ_´oûssšg_æag : %s\n", (
m_ex‹ndedP»cisiÚProûssšgFÏg
 ? "Enabled" : "Disabled") );

3233 
	`´štf
("im¶ic™_rdpcm_’abËd_æag : %s\n", (
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_IMPLICIT
] ? "Enabled" : "Disabled") );

3234 
	`´štf
("ex¶ic™_rdpcm_’abËd_æag : %s\n", (
m_rdpcmEÇbËdFÏg
[
RDPCM_SIGNAL_EXPLICIT
] ? "Enabled" : "Disabled") );

3235 
	`´štf
("ŒªsfÜm_sk_rÙ©iÚ_’abËd_æag : %s\n", (
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 ? "Enabled" : "Disabled") );

3236 
	`´štf
("ŒªsfÜm_sk_cÚ‹xt_’abËd_æag : %s\n", (
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 ? "Enabled" : "Disabled") );

3237 
	`´štf
("üoss_compÚ’t_´ediùiÚ_’abËd_æag: %s\n", (
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 ? (
m_»cÚBa£dCrossCP»diùiÚE¡im©e
 ? "Enabled (reconstructed-residual-basedƒstimate)" : "Enabled (encoder-side-residual-basedƒstimate)") : "Disabled") );

3238 
	`´štf
("high_´ecisiÚ_off£ts_’abËd_æag : %s\n", (
m_highP»cisiÚOff£tsEÇbËdFÏg
 ? "Enabled" : "Disabled") );

3239 
	`´štf
("³rsi¡’t_riû_ad­tiÚ_’abËd_æag: %s\n", (
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 ? "Enabled" : "Disabled") );

3240 
	`´štf
("ÿbac_by·ss_®ignm’t_’abËd_æag : %s\n", (
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 ? "Enabled" : "Disabled") );

3241 ià(
m_bU£SAO
)

3243 
	`´štf
("log2_§o_off£t_sÿË_lum¨ : %d\n", 
m_log2SaoOff£tSÿË
[
CHANNEL_TYPE_LUMA
]);

3244 
	`´štf
("log2_§o_off£t_sÿË_chrom¨ : %d\n", 
m_log2SaoOff£tSÿË
[
CHANNEL_TYPE_CHROMA
]);

3247 
m_co¡Mode
)

3249 
COST_STANDARD_LOSSY
: 
	`´štf
("Cost function: : Lossy coding (default)\n"); ;

3250 
COST_SEQUENCE_LEVEL_LOSSLESS
: 
	`´štf
("Cost function: : Sequence_level_lossless coding\n"); ;

3251 
COST_LOSSLESS_CODING
: 
	`´štf
("Co¡ funùiÚ: : Los¦es codšg w™h fixed QP oà%d\n", 
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP
); ;

3252 
COST_MIXED_LOSSLESS_LOSSY_CODING
: 
	`´štf
("Co¡ funùiÚ: : Mixed_los¦ess_lossy codšg w™h QP'=%d fÜ†os¦es ev®u©iÚ\n", 
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
); ;

3253 : 
	`´štf
("Cost function: : Unknown\n"); ;

3256 
	`´štf
("R©eCÚŒÞ : %d\n", 
m_RCEÇbËR©eCÚŒÞ
 );

3257 
	`´štf
("WPM‘hod : %d\n", 
	`IÁ
(
m_weigh‹dP»diùiÚM‘hod
));

3259 if(
m_RCEÇbËR©eCÚŒÞ
)

3261 
	`´štf
("T¬g‘B™¿‹ : %d\n", 
m_RCT¬g‘B™¿‹
 );

3262 
	`´štf
("K“pH›¿rchiÿlB™ : %d\n", 
m_RCK“pH›¿rchiÿlB™
 );

3263 
	`´štf
("LCULev–RC : %d\n", 
m_RCLCULev–RC
 );

3264 
	`´štf
("U£LCUS•¬©eMod– : %d\n", 
m_RCU£LCUS•¬©eMod–
 );

3265 
	`´štf
("In™ŸlQP : %d\n", 
m_RCIn™ŸlQP
 );

3266 
	`´štf
("FÜûIÁ¿QP : %d\n", 
m_RCFÜûIÁ¿QP
 );

3267 
	`´štf
("CpbS©u¿tiÚ : %d\n", 
m_RCCpbS©u¿tiÚEÇbËd
 );

3268 ià(
m_RCCpbS©u¿tiÚEÇbËd
)

3270 
	`´štf
("CpbSiz : %d\n", 
m_RCCpbSize
);

3271 
	`´štf
("In™®CpbFuÎÃs  : %.2f\n", 
m_RCIn™ŸlCpbFuÎÃss
);

3275 
	`´štf
("Max Num M”gCªdid©e  : %d\n", 
m_maxNumM”geCªd
);

3276 
	`´štf
("\n");

3278 
	`´štf
("TOOL CFG: ");

3279 
	`´štf
("IBD:%d ", ((
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
] > 
m_MSBEx‹ndedB™D•th
[CHANNEL_TYPE_LUMA]è|| (m_š‹º®B™D•th[
CHANNEL_TYPE_CHROMA
] > m_MSBExtendedBitDepth[CHANNEL_TYPE_CHROMA])));

3280 
	`´štf
("HAD:%d ", 
m_bU£HADME
 );

3281 
	`´štf
("RDQ:%d ", 
m_u£RDOQ
 );

3282 
	`´štf
("RDQTS:%d ", 
m_u£RDOQTS
 );

3283 
	`´štf
("RD³ÇÉy:%d ", 
m_rdP’®ty
 );

3284 
	`´štf
("LQP:%d ", 
m_lumaLev–ToD–QPM­pšg
.
mode
 );

3285 
	`´štf
("SQP:%d ", 
m_uiD–QpRD
 );

3286 
	`´štf
("ASR:%d ", 
m_bU£ASR
 );

3287 
	`´štf
("MšS—rchWšdow:%d ", 
m_mšS—rchWšdow
 );

3288 
	`´štf
("Re¡riùMESam¶šg:%d ", 
m_bRe¡riùMESam¶šg
 );

3289 
	`´štf
("FEN:%d ", 
	`IÁ
(
m_ç¡IÁ”S—rchMode
) );

3290 
	`´štf
("ECU:%d ", 
m_bU£E¬lyCU
 );

3291 
	`´štf
("FDM:%d ", 
m_u£Fa¡DecisiÚFÜM”ge
 );

3292 
	`´štf
("CFM:%d ", 
m_bU£CbfFa¡Mode
 );

3293 
	`´štf
("ESD:%d ", 
m_u£E¬lySkD‘eùiÚ
 );

3294 
	`´štf
("RQT:%d ", 1 );

3295 
	`´štf
("T¿nsfÜmSk:%d ", 
m_u£T¿nsfÜmSk
 );

3296 
	`´štf
("T¿nsfÜmSkFa¡:%d ", 
m_u£T¿nsfÜmSkFa¡
 );

3297 
	`´štf
("T¿nsfÜmSkLog2MaxSize:%d ", 
m_log2MaxT¿nsfÜmSkBlockSize
);

3298 
	`´štf
("Sliû: M=%d ", 
	`IÁ
(
m_¦iûMode
));

3299 ià(
m_¦iûMode
!=
NO_SLICES
)

3301 
	`´štf
("A=%d ", 
m_¦iûArgum’t
);

3303 
	`´štf
("SliûSegm’t: M=%d ",
m_¦iûSegm’tMode
);

3304 ià(
m_¦iûSegm’tMode
!=
NO_SLICES
)

3306 
	`´štf
("A=%d ", 
m_¦iûSegm’tArgum’t
);

3308 
	`´štf
("CIP:%d ", 
m_bU£CÚ¡¿šedIÁ¿P»d
);

3309 
	`´štf
("SAO:%d ", (
m_bU£SAO
)?(1):(0));

3310 
	`´štf
("PCM:%d ", (
m_u£PCM
 && (1<<
m_uiPCMLog2MšSize
è<ð
m_uiMaxCUWidth
)? 1 : 0);

3312 ià(
m_T¿nsquªtBy·ssEÇbËdFÏg
 && 
m_CUT¿nsquªtBy·ssFÏgFÜû
)

3314 
	`´štf
("TransQuantBypassEnabled: =1");

3318 
	`´štf
("T¿nsQuªtBy·ssEÇbËd:%d ", (
m_T¿nsquªtBy·ssEÇbËdFÏg
)? 1:0 );

3321 
	`´štf
("WPP:%d ", (
IÁ
)
m_u£Weigh‹dP»d
);

3322 
	`´štf
("WPB:%d ", (
IÁ
)
m_u£Weigh‹dBiP»d
);

3323 
	`´štf
("PME:%d ", 
m_log2P¬®ËlM”geLev–
);

3324 cÚ¡ 
IÁ
 
iWaveFrÚtSub¡»ams
 = 
m_’ŒÝyCodšgSyncEÇbËdFÏg
 ? (
m_iSourûHeight
 + 
m_uiMaxCUHeight
 - 1) / m_uiMaxCUHeight : 1;

3325 
	`´štf
(" WaveFrÚtSynchro:%d WaveFrÚtSub¡»ams:%d", 
m_’ŒÝyCodšgSyncEÇbËdFÏg
?1:0, 
iWaveFrÚtSub¡»ams
);

3326 
	`´štf
(" SÿlšgLi¡:%d ", 
m_u£SÿlšgLi¡Id
 );

3327 
	`´štf
("TMVPMode:%d ", 
m_TMVPModeId
 );

3328 #ià
ADAPTIVE_QP_SELECTION


3329 
	`´štf
("AQpS:%d", 
m_bU£Ad­tQpS–eù
 );

3332 
	`´štf
(" SignB™HidšgFÏg:%d ", 
m_signD©aHidšgEÇbËdFÏg
);

3333 
	`´štf
("ReÿlQP:%d", 
m_»ÿlcuÏ‹QPAccÜdšgToLambda
 ? 1 : 0 );

3335 #ià
EXTENSION_360_VIDEO


3336 
m_ext360
.
	`ouutCÚfigu¿tiÚSumm¬y
();

3339 
	`´štf
("\n\n");

3341 
	`fæush
(
¡dout
);

3342 
	}
}

3344 
BoÞ
 
	$cÚfœmP¬a
(
BoÞ
 
bæag
, cÚ¡ 
TCh¬
* 
mes§ge
)

3346 ià(!
bæag
)

3348  
çl£
;

3351 
	`´štf
("E¼Ü: %s\n",
mes§ge
);

3352  
Œue
;

3353 
	}
}

	@source/App/TAppEncoder/TAppEncCfg.h

38 #iâdeà
__TAPPENCCFG__


39 
	#__TAPPENCCFG__


	)

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

44 
	~"TLibEncod”/TEncCfg.h
"

45 #ià
EXTENSION_360_VIDEO


46 
	~"TAµEncH–³r360/TExt360AµEncCfg.h
"

48 
	~<s¡»am
>

49 
	~<veùÜ
>

51 
Çme¥aû
 
	gpo
 = 
df
::
´og¿m_ÝtiÚs_l™e
;

61 þas 
	cTAµEncCfg


63 
	mpublic
:

64 
‹m¶©e
 <
þass
 
T
>

65 
	sO±iÚ®V®ue


67 
BoÞ
 
bP»£Á
;

68 
T
 
	mv®ue
;

69 
O±iÚ®V®ue
(è: 
bP»£Á
(
çl£
), 
v®ue
() { }

72 
	g´Ùeùed
:

74 
¡d
::
¡ršg
 
m_šputFžeName
;

75 
	g¡d
::
¡ršg
 
m_b™¡»amFžeName
;

76 
	g¡d
::
¡ršg
 
m_»cÚFžeName
;

79 
DoubË
 
	gm_adLambdaModif›r
[ 
MAX_TLAYER
 ];

80 
	g¡d
::
veùÜ
<
DoubË
> 
m_adIÁ¿LambdaModif›r
;

81 
DoubË
 
	gm_dIÁ¿QpFaùÜ
;

84 
IÁ
 
	gm_iF¿meR©e
;

85 
UIÁ
 
	gm_F¿meSk
;

86 
UIÁ
 
	gm_‹mpÜ®Sub§m¶eR©io
;

87 
IÁ
 
	gm_iSourûWidth
;

88 
IÁ
 
	gm_iSourûHeight
;

89 
IÁ
 
	gm_šputFžeWidth
;

90 
IÁ
 
	gm_šputFžeHeight
;

92 
IÁ
 
	gm_iSourûHeightOrg
;

94 
BoÞ
 
	gm_isF›ld
;

95 
BoÞ
 
	gm_isTÝF›ldFœ¡
;

96 
BoÞ
 
	gm_bEffic›ÁF›ldIRAPEÇbËd
;

97 
BoÞ
 
	gm_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
;

99 
IÁ
 
	gm_cÚfÜmªûWšdowMode
;

100 
IÁ
 
	gm_cÚfWšLeá
;

101 
IÁ
 
	gm_cÚfWšRight
;

102 
IÁ
 
	gm_cÚfWšTÝ
;

103 
IÁ
 
	gm_cÚfWšBÙtom
;

104 
IÁ
 
	gm_äamesToBeEncoded
;

105 
IÁ
 
	gm_aiPad
[2];

106 
BoÞ
 
	gm_AcûssUn™D–im™”
;

107 
IÅutCÞourS·ûCÚv”siÚ
 
	gm_šputCÞourS·ûCÚv”t
;

108 
BoÞ
 
	gm_¢rIÁ”ÇlCÞourS·û
;

109 
BoÞ
 
	gm_ouutIÁ”ÇlCÞourS·û
;

110 
ChromaFÜm©
 
	gm_IÅutChromaFÜm©IDC
;

112 
BoÞ
 
	gm_´štMSEBa£dSequ’ûPSNR
;

113 
BoÞ
 
	gm_´štHexP¢r
;

114 
BoÞ
 
	gm_´štF¿meMSE
;

115 
BoÞ
 
	gm_´štSequ’ûMSE
;

116 
BoÞ
 
	gm_´štMSSSIM
;

118 
BoÞ
 
	gm_bXPSNREÇbËFÏg
;

119 
DoubË
 
	gm_dXPSNRWeight
[
MAX_NUM_COMPONENT
];

121 
BoÞ
 
	gm_ÿbacZ”oWÜdPaddšgEÇbËd
;

122 
BoÞ
 
	gm_bClIÅutVideoToRec709Rªge
;

123 
BoÞ
 
	gm_bClOuutVideoToRec709Rªge
;

126 
	gProfže
::
Name
 
m_´ofže
;

127 
	gLev–
::
T›r
 
m_Ëv–T›r
;

128 
	gLev–
::
Name
 
m_Ëv–
;

129 
UIÁ
 
	gm_b™D•thCÚ¡¿št
;

130 
ChromaFÜm©
 
	gm_chromaFÜm©CÚ¡¿št
;

131 
BoÞ
 
	gm_šŒaCÚ¡¿štFÏg
;

132 
BoÞ
 
	gm_ÚePiùu»OÆyCÚ¡¿štFÏg
;

133 
BoÞ
 
	gm_low”B™R©eCÚ¡¿štFÏg
;

134 
BoÞ
 
	gm_´og»ssiveSourûFÏg
;

135 
BoÞ
 
	gm_š‹¾aûdSourûFÏg
;

136 
BoÞ
 
	gm_nÚPackedCÚ¡¿štFÏg
;

137 
BoÞ
 
	gm_äameOÆyCÚ¡¿štFÏg
;

140 
IÁ
 
	gm_iIÁ¿P”iod
;

141 
IÁ
 
	gm_iDecodšgReäeshTy³
;

142 
IÁ
 
	gm_iGOPSize
;

143 
BoÞ
 
	gm_bReWr™eP¬amS‘sFÏg
;

144 
IÁ
 
	gm_exŒaRPSs
;

145 
GOPEÁry
 
	gm_GOPLi¡
[
MAX_GOP
];

146 
IÁ
 
	gm_numReÜd”Pics
[
MAX_TLAYER
];

147 
IÁ
 
	gm_maxDecPicBufãršg
[
MAX_TLAYER
];

148 
BoÞ
 
	gm_üossCompÚ’tP»diùiÚEÇbËdFÏg
;

149 
BoÞ
 
	gm_»cÚBa£dCrossCP»diùiÚE¡im©e
;

150 
UIÁ
 
	gm_log2SaoOff£tSÿË
[
MAX_NUM_CHANNEL_TYPE
];

151 
BoÞ
 
	gm_u£T¿nsfÜmSk
;

152 
BoÞ
 
	gm_u£T¿nsfÜmSkFa¡
;

153 
UIÁ
 
	gm_log2MaxT¿nsfÜmSkBlockSize
;

154 
BoÞ
 
	gm_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
;

155 
BoÞ
 
	gm_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
;

156 
BoÞ
 
	gm_rdpcmEÇbËdFÏg
[
NUMBER_OF_RDPCM_SIGNALLING_MODES
];

157 
BoÞ
 
	gm_’abËAMP
;

158 
BoÞ
 
	gm_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
;

159 
BoÞ
 
	gm_ÿbacBy·ssAlignm’tEÇbËdFÏg
;

162 
	gO±iÚ®V®ue
<
	gUIÁ
> 
	gm_qpInüem’tAtSourûF¿me
;

163 
IÁ
 
	gm_iQP
;

164 
IÁ
 
	gm_šŒaQPOff£t
;

165 
BoÞ
 
	gm_ÏmbdaFromQPEÇbË
;

166 
	g¡d
::
¡ršg
 
m_dQPFžeName
;

167 
IÁ
* 
	gm_aidQP
;

168 
IÁ
 
	gm_iMaxD–QP
;

169 
UIÁ
 
	gm_uiD–QpRD
;

170 
IÁ
 
	gm_iMaxCuDQPD•th
;

171 
IÁ
 
	gm_diffCuChromaQpOff£tD•th
;

172 
BoÞ
 
	gm_bFa¡D–QP
;

174 
IÁ
 
	gm_cbQpOff£t
;

175 
IÁ
 
	gm_üQpOff£t
;

176 
WCGChromaQPCÚŒÞ
 
	gm_wcgChromaQpCÚŒÞ
;

177 
UIÁ
 
	gm_¦iûChromaQpOff£tP”iodic™y
;

178 
IÁ
 
	gm_¦iûChromaQpOff£tIÁ¿OrP”iodic
[2 ];

179 
LumaLev–ToD–QPM­pšg
 
	gm_lumaLev–ToD–QPM­pšg
;

180 #ià
ADAPTIVE_QP_SELECTION


181 
BoÞ
 
	gm_bU£Ad­tQpS–eù
;

183 
TComSEIMa¡”šgDi¥Ïy
 
	gm_ma¡”šgDi¥Ïy
;

185 
BoÞ
 
	gm_bU£Ad­tiveQP
;

186 
IÁ
 
	gm_iQPAd­tiÚRªge
;

188 
IÁ
 
	gm_maxTempLay”
;

192 
UIÁ
 
	gm_uiMaxCUWidth
;

193 
UIÁ
 
	gm_uiMaxCUHeight
;

194 
UIÁ
 
	gm_uiMaxCUD•th
;

195 
UIÁ
 
	gm_uiMaxTÙ®CUD•th
;

196 
UIÁ
 
	gm_uiLog2DiffMaxMšCodšgBlockSize
;

199 
UIÁ
 
	gm_uiQuadŒ“TULog2MaxSize
;

200 
UIÁ
 
	gm_uiQuadŒ“TULog2MšSize
;

202 
UIÁ
 
	gm_uiQuadŒ“TUMaxD•thIÁ”
;

203 
UIÁ
 
	gm_uiQuadŒ“TUMaxD•thIÁ¿
;

206 
IÁ
 
	gm_šputB™D•th
 [
MAX_NUM_CHANNEL_TYPE
];

207 
IÁ
 
	gm_ouutB™D•th
 [
MAX_NUM_CHANNEL_TYPE
];

208 
IÁ
 
	gm_MSBEx‹ndedB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

209 
IÁ
 
	gm_š‹º®B™D•th
[
MAX_NUM_CHANNEL_TYPE
];

210 
BoÞ
 
	gm_ex‹ndedP»cisiÚProûssšgFÏg
;

211 
BoÞ
 
	gm_highP»cisiÚOff£tsEÇbËdFÏg
;

214 
ChromaFÜm©
 
	gm_chromaFÜm©IDC
;

217 
BoÞ
 
	gm_bPCMIÅutB™D•thFÏg
;

220 
BoÞ
 
	gm_bU£SAO
;

221 
BoÞ
 
	gm_bTe¡SAODi§bËAtPiùu»Lev–
;

222 
DoubË
 
	gm_§oEncodšgR©e
;

223 
DoubË
 
	gm_§oEncodšgR©eChroma
;

224 
IÁ
 
	gm_maxNumOff£tsP”Pic
;

225 
BoÞ
 
	gm_§oCtuBound¬y
;

226 
BoÞ
 
	gm_»£tEncod”S‹Aá”IRAP
;

228 
BoÞ
 
	gm_bLoÝFž‹rDi§bË
;

229 
BoÞ
 
	gm_loÝFž‹rOff£tInPPS
;

230 
IÁ
 
	gm_loÝFž‹rB‘aOff£tDiv2
;

231 
IÁ
 
	gm_loÝFž‹rTcOff£tDiv2
;

232 
IÁ
 
	gm_deblockšgFž‹rM‘ric
;

234 
BoÞ
 
	gm_u£PCM
;

235 
UIÁ
 
	gm_pcmLog2MaxSize
;

236 
UIÁ
 
	gm_uiPCMLog2MšSize
;

237 
BoÞ
 
	gm_bPCMFž‹rDi§bËFÏg
;

238 
BoÞ
 
	gm_’abËIÁ¿Reã»nûSmoÙhšg
;

241 
BoÞ
 
	gm_bU£ASR
;

242 
BoÞ
 
	gm_bU£HADME
;

243 
BoÞ
 
	gm_u£RDOQ
;

244 
BoÞ
 
	gm_u£RDOQTS
;

245 
BoÞ
 
	gm_u£S–eùiveRDOQ
;

246 
IÁ
 
	gm_rdP’®ty
;

247 
BoÞ
 
	gm_bDi§bËIÁ¿PUsInIÁ”Sliûs
;

248 
MES—rchM‘hod
 
	gm_mÙiÚE¡im©iÚS—rchM‘hod
;

249 
BoÞ
 
	gm_bRe¡riùMESam¶šg
;

250 
IÁ
 
	gm_iS—rchRªge
;

251 
IÁ
 
	gm_b»dS—rchRªge
;

252 
IÁ
 
	gm_mšS—rchWšdow
;

253 
BoÞ
 
	gm_bClFÜBiP»dMeEÇbËd
;

254 
BoÞ
 
	gm_bFa¡MEAssumšgSmoÙh”MVEÇbËd
;

255 
Fa¡IÁ”S—rchMode
 
	gm_ç¡IÁ”S—rchMode
;

256 
BoÞ
 
	gm_bU£E¬lyCU
;

257 
BoÞ
 
	gm_u£Fa¡DecisiÚFÜM”ge
;

258 
BoÞ
 
	gm_bU£CbfFa¡Mode
;

259 
BoÞ
 
	gm_u£E¬lySkD‘eùiÚ
;

260 
SliûCÚ¡¿št
 
	gm_¦iûMode
;

261 
IÁ
 
	gm_¦iûArgum’t
;

262 
SliûCÚ¡¿št
 
	gm_¦iûSegm’tMode
;

263 
IÁ
 
	gm_¦iûSegm’tArgum’t
;

265 
BoÞ
 
	gm_bLFCrossSliûBound¬yFÏg
;

266 
BoÞ
 
	gm_bLFCrossTžeBound¬yFÏg
;

267 
BoÞ
 
	gm_tžeUnifÜmS·cšgFÏg
;

268 
IÁ
 
	gm_numTžeCÞumnsMšus1
;

269 
IÁ
 
	gm_numTžeRowsMšus1
;

270 
	g¡d
::
veùÜ
<
IÁ
> 
m_tžeCÞumnWidth
;

271 
	g¡d
::
veùÜ
<
IÁ
> 
m_tžeRowHeight
;

272 
BoÞ
 
	gm_’ŒÝyCodšgSyncEÇbËdFÏg
;

274 
BoÞ
 
	gm_bU£CÚ¡¿šedIÁ¿P»d
;

275 
BoÞ
 
	gm_bFa¡UDIU£MPMEÇbËd
;

276 
BoÞ
 
	gm_bFa¡MEFÜG’BLowD–ayEÇbËd
;

277 
BoÞ
 
	gm_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
;

279 
HashTy³
 
	gm_decodedPiùu»HashSEITy³
;

280 
BoÞ
 
	gm_»cov”yPoštSEIEÇbËd
;

281 
BoÞ
 
	gm_bufãršgP”iodSEIEÇbËd
;

282 
BoÞ
 
	gm_piùu»TimšgSEIEÇbËd
;

283 
BoÞ
 
	gm_tÚeM­pšgInfoSEIEÇbËd
;

284 
BoÞ
 
	gm_chromaRe§m¶šgFž‹rSEI’abËd
;

285 
IÁ
 
	gm_chromaRe§m¶šgHÜFž‹rIdc
;

286 
IÁ
 
	gm_chromaRe§m¶šgV”Fž‹rIdc
;

287 
IÁ
 
	gm_tÚeM­Id
;

288 
BoÞ
 
	gm_tÚeM­CªûlFÏg
;

289 
BoÞ
 
	gm_tÚeM­P”si¡’ûFÏg
;

290 
IÁ
 
	gm_tÚeM­CodedD©aB™D•th
;

291 
IÁ
 
	gm_tÚeM­T¬g‘B™D•th
;

292 
IÁ
 
	gm_tÚeM­Mod–Id
;

293 
IÁ
 
	gm_tÚeM­MšV®ue
;

294 
IÁ
 
	gm_tÚeM­MaxV®ue
;

295 
IÁ
 
	gm_sigmoidMidpošt
;

296 
IÁ
 
	gm_sigmoidWidth
;

297 
IÁ
 
	gm_numPivÙs
;

298 
IÁ
 
	gm_ÿm”aIsoS³edIdc
;

299 
IÁ
 
	gm_ÿm”aIsoS³edV®ue
;

300 
IÁ
 
	gm_exposu»IndexIdc
;

301 
IÁ
 
	gm_exposu»IndexV®ue
;

302 
BoÞ
 
	gm_exposu»Com³n§tiÚV®ueSignFÏg
;

303 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueNum”©Ü
;

304 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueD’omIdc
;

305 
IÁ
 
	gm_»fSü“nLumšªûWh™e
;

306 
IÁ
 
	gm_ex‹ndedRªgeWh™eLev–
;

307 
IÁ
 
	gm_nomš®BÏckLev–LumaCodeV®ue
;

308 
IÁ
 
	gm_nomš®Wh™eLev–LumaCodeV®ue
;

309 
IÁ
 
	gm_ex‹ndedWh™eLev–LumaCodeV®ue
;

310 
IÁ
* 
	gm_¡¬tOfCodedIÁ”v®
;

311 
IÁ
* 
	gm_codedPivÙV®ue
;

312 
IÁ
* 
	gm_rg‘PivÙV®ue
;

313 
BoÞ
 
	gm_äamePackšgSEIEÇbËd
;

314 
IÁ
 
	gm_äamePackšgSEITy³
;

315 
IÁ
 
	gm_äamePackšgSEIId
;

316 
IÁ
 
	gm_äamePackšgSEIQušcunx
;

317 
IÁ
 
	gm_äamePackšgSEIIÁ”´‘©iÚ
;

318 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEIEÇbËd
;

319 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEICªûl
;

320 
IÁ
 
	gm_£gm’‹dReùF¿mePackšgSEITy³
;

321 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEIP”si¡’û
;

322 
IÁ
 
	gm_di¥ÏyOr›Á©iÚSEIAngË
;

323 
BoÞ
 
	gm_‹mpÜ®Lev–0IndexSEIEÇbËd
;

324 
BoÞ
 
	gm_g¿du®DecodšgReäeshInfoEÇbËd
;

325 
IÁ
 
	gm_noDi¥ÏySEITLay”
;

326 
BoÞ
 
	gm_decodšgUn™InfoSEIEÇbËd
;

327 
BoÞ
 
	gm_SOPDesütiÚSEIEÇbËd
;

328 
BoÞ
 
	gm_sÿÏbËNe¡šgSEIEÇbËd
;

329 
BoÞ
 
	gm_tmùsSEIEÇbËd
;

330 #ià
MCTS_ENC_CHECK


331 
BoÞ
 
	gm_tmùsSEITžeCÚ¡¿št
;

333 #ià
MCTS_EXTRACTION


334 
BoÞ
 
	gm_tmùsExŒaùiÚSEIEÇbËd
;

336 
BoÞ
 
	gm_timeCodeSEIEÇbËd
;

337 
IÁ
 
	gm_timeCodeSEINumTs
;

338 
TComSEITimeS‘
 
	gm_timeS‘A¼ay
[
MAX_TIMECODE_SEI_SETS
];

339 
BoÞ
 
	gm_kÃeSEIEÇbËd
;

340 
	gTEncCfg
::
TEncSEIKÃeFunùiÚInfÜm©iÚ
 
m_kÃeFunùiÚInfÜm©iÚSEI
;

341 
IÁ
 
	gm_´eã¼edT¿nsãrCh¬aù”i¡ics
;

342 
UIÁ
 
	gm_g»’M‘ad©aTy³
;

343 
UIÁ
 
	gm_xsdM‘ricTy³
;

344 
BoÞ
 
	gm_ccvSEIEÇbËd
;

345 
BoÞ
 
	gm_ccvSEICªûlFÏg
;

346 
BoÞ
 
	gm_ccvSEIP”si¡’ûFÏg
;

347 
BoÞ
 
	gm_ccvSEIPrim¬›sP»£ÁFÏg
;

348 
BoÞ
 
	gm_ccvSEIMšLumšªûV®ueP»£ÁFÏg
;

349 
BoÞ
 
	gm_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
;

350 
BoÞ
 
	gm_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
;

351 
DoubË
 
	gm_ccvSEIPrim¬›sX
[
MAX_NUM_COMPONENT
];

352 
DoubË
 
	gm_ccvSEIPrim¬›sY
[
MAX_NUM_COMPONENT
];

353 
DoubË
 
	gm_ccvSEIMšLumšªûV®ue
;

354 
DoubË
 
	gm_ccvSEIMaxLumšªûV®ue
;

355 
DoubË
 
	gm_ccvSEIAvgLumšªûV®ue
;

356 
BoÞ
 
	gm_”pSEIEÇbËd
;

357 
BoÞ
 
	gm_”pSEICªûlFÏg
;

358 
BoÞ
 
	gm_”pSEIP”si¡’ûFÏg
;

359 
BoÞ
 
	gm_”pSEIGu¬dBªdFÏg
;

360 
UIÁ
 
	gm_”pSEIGu¬dBªdTy³
;

361 
UIÁ
 
	gm_”pSEILeáGu¬dBªdWidth
;

362 
UIÁ
 
	gm_”pSEIRightGu¬dBªdWidth
;

364 
BoÞ
 
	gm_¥h”eRÙ©iÚSEIEÇbËd
;

365 
BoÞ
 
	gm_¥h”eRÙ©iÚSEICªûlFÏg
;

366 
BoÞ
 
	gm_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
;

367 
IÁ
 
	gm_¥h”eRÙ©iÚSEIYaw
;

368 
IÁ
 
	gm_¥h”eRÙ©iÚSEIP™ch
;

369 
IÁ
 
	gm_¥h”eRÙ©iÚSEIRÞl
;

371 
BoÞ
 
	gm_omniV›wpÜtSEIEÇbËd
;

372 
UIÁ
 
	gm_omniV›wpÜtSEIId
;

373 
BoÞ
 
	gm_omniV›wpÜtSEICªûlFÏg
;

374 
BoÞ
 
	gm_omniV›wpÜtSEIP”si¡’ûFÏg
;

375 
UIÁ
 
	gm_omniV›wpÜtSEICÁMšus1
;

376 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEIAzimuthC’Œe
;

377 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEIEËv©iÚC’Œe
;

378 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEITžtC’Œe
;

379 
	g¡d
::
veùÜ
<
UIÁ
> 
m_omniV›wpÜtSEIHÜRªge
;

380 
	g¡d
::
veùÜ
<
UIÁ
> 
m_omniV›wpÜtSEIV”Rªge
;

381 
BoÞ
 
	gm_cmpSEIEÇbËd
;

382 
BoÞ
 
	gm_cmpSEICmpCªûlFÏg
;

383 
BoÞ
 
	gm_cmpSEICmpP”si¡’ûFÏg
;

384 
BoÞ
 
	gm_rwpSEIEÇbËd
;

385 
BoÞ
 
	gm_rwpSEIRwpCªûlFÏg
;

386 
BoÞ
 
	gm_rwpSEIRwpP”si¡’ûFÏg
;

387 
BoÞ
 
	gm_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
;

388 
IÁ
 
	gm_rwpSEINumPackedRegiÚs
;

389 
IÁ
 
	gm_rwpSEIProjPiùu»Width
;

390 
IÁ
 
	gm_rwpSEIProjPiùu»Height
;

391 
IÁ
 
	gm_rwpSEIPackedPiùu»Width
;

392 
IÁ
 
	gm_rwpSEIPackedPiùu»Height
;

393 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpT¿nsfÜmTy³
;

394 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpSEIRwpGu¬dBªdFÏg
;

395 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚWidth
;

396 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚHeight
;

397 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIRwpSEIProjRegiÚTÝ
;

398 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚLeá
;

399 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚWidth
;

400 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚHeight
;

401 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚTÝ
;

402 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚLeá
;

403 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpLeáGu¬dBªdWidth
;

404 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpRightGu¬dBªdWidth
;

405 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpTÝGu¬dBªdHeight
;

406 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
;

407 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
;

408 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpGu¬dBªdTy³
;

409 
BoÞ
 
	gm_gÝBa£dTempÜ®Fž‹rEÇbËd
;

410 
BoÞ
 
	gm_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
;

411 
	g¡d
::
m­
<
IÁ
, 
	gDoubË
> 
	gm_gÝBa£dTempÜ®Fž‹rSŒ’gths
;

413 
	g¡d
::
¡ršg
 
m_¬SEIFžeRoÙ
;

414 
BoÞ
 
	gm_fisheyeVIdeoInfoSEIEÇbËd
;

415 
TComSEIFisheyeVideoInfo
 
	gm_fisheyeVideoInfoSEI
;

417 
BoÞ
 
	gm_u£Weigh‹dP»d
;

418 
BoÞ
 
	gm_u£Weigh‹dBiP»d
;

419 
Weigh‹dP»diùiÚM‘hod
 
	gm_weigh‹dP»diùiÚM‘hod
;

421 
UIÁ
 
	gm_log2P¬®ËlM”geLev–
;

422 
UIÁ
 
	gm_maxNumM”geCªd
;

424 
IÁ
 
	gm_TMVPModeId
;

425 
BoÞ
 
	gm_signD©aHidšgEÇbËdFÏg
;

426 
BoÞ
 
	gm_RCEÇbËR©eCÚŒÞ
;

427 
IÁ
 
	gm_RCT¬g‘B™¿‹
;

428 
IÁ
 
	gm_RCK“pH›¿rchiÿlB™
;

429 
BoÞ
 
	gm_RCLCULev–RC
;

430 
BoÞ
 
	gm_RCU£LCUS•¬©eMod–
;

431 
IÁ
 
	gm_RCIn™ŸlQP
;

432 
BoÞ
 
	gm_RCFÜûIÁ¿QP
;

433 
BoÞ
 
	gm_RCCpbS©u¿tiÚEÇbËd
;

434 
UIÁ
 
	gm_RCCpbSize
;

435 
DoubË
 
	gm_RCIn™ŸlCpbFuÎÃss
;

436 
SÿlšgLi¡Mode
 
	gm_u£SÿlšgLi¡Id
;

437 
	g¡d
::
¡ršg
 
m_sÿlšgLi¡FžeName
;

439 
BoÞ
 
	gm_T¿nsquªtBy·ssEÇbËdFÏg
;

440 
BoÞ
 
	gm_CUT¿nsquªtBy·ssFÏgFÜû
;

441 
Co¡Mode
 
	gm_co¡Mode
;

443 
BoÞ
 
	gm_»ÿlcuÏ‹QPAccÜdšgToLambda
;

444 
BoÞ
 
	gm_u£SŒÚgIÁ¿SmoÙhšg
;

445 
IÁ
 
	gm_aùiveP¬am‘”S‘sSEIEÇbËd
;

447 
BoÞ
 
	gm_vuiP¬am‘”sP»£ÁFÏg
;

448 
BoÞ
 
	gm_a¥eùR©ioInfoP»£ÁFÏg
;

449 
IÁ
 
	gm_a¥eùR©ioIdc
;

450 
IÁ
 
	gm_§rWidth
;

451 
IÁ
 
	gm_§rHeight
;

452 
BoÞ
 
	gm_ov”sÿnInfoP»£ÁFÏg
;

453 
BoÞ
 
	gm_ov”sÿnAµrÝrŸ‹FÏg
;

454 
BoÞ
 
	gm_videoSigÇlTy³P»£ÁFÏg
;

455 
IÁ
 
	gm_videoFÜm©
;

456 
BoÞ
 
	gm_videoFuÎRªgeFÏg
;

457 
BoÞ
 
	gm_cÞourDesütiÚP»£ÁFÏg
;

458 
IÁ
 
	gm_cÞourPrim¬›s
;

459 
IÁ
 
	gm_ŒªsãrCh¬aù”i¡ics
;

460 
IÁ
 
	gm_m©rixCÛffic›Ás
;

461 
BoÞ
 
	gm_chromaLocInfoP»£ÁFÏg
;

462 
IÁ
 
	gm_chromaSam¶eLocTy³TÝF›ld
;

463 
IÁ
 
	gm_chromaSam¶eLocTy³BÙtomF›ld
;

464 
BoÞ
 
	gm_ÃuŒ®ChromaIndiÿtiÚFÏg
;

465 
BoÞ
 
	gm_deçuÉDi¥ÏyWšdowFÏg
;

466 
IÁ
 
	gm_defDi¥WšLeáOff£t
;

467 
IÁ
 
	gm_defDi¥WšRightOff£t
;

468 
IÁ
 
	gm_defDi¥WšTÝOff£t
;

469 
IÁ
 
	gm_defDi¥WšBÙtomOff£t
;

470 
BoÞ
 
	gm_äameF›ldInfoP»£ÁFÏg
;

471 
BoÞ
 
	gm_pocPrÝÜtiÚ®ToTimšgFÏg
;

472 
IÁ
 
	gm_numTicksPocDiffOÃMšus1
;

473 
BoÞ
 
	gm_b™¡»amRe¡riùiÚFÏg
;

474 
BoÞ
 
	gm_tžesFixedSŒuùu»FÏg
;

475 
BoÞ
 
	gm_mÙiÚVeùÜsOv”PicBound¬›sFÏg
;

476 
IÁ
 
	gm_mšS·tŸlSegm’tiÚIdc
;

477 
IÁ
 
	gm_maxBy‹sP”PicD’om
;

478 
IÁ
 
	gm_maxB™sP”MšCuD’om
;

479 
IÁ
 
	gm_log2MaxMvL’gthHÜizÚl
;

480 
IÁ
 
	gm_log2MaxMvL’gthV”tiÿl
;

481 
	g¡d
::
¡ršg
 
m_cÞourRem­SEIFžeRoÙ
;

482 
	g¡d
::
¡ršg
 
m_»giÚ®Ne¡šgSEIFžeRoÙ
;

483 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


484 
BoÞ
 
	gm_siiSEIEÇbËd
;

485 
UIÁ
 
	gm_siiSEINumUn™sInShu‰”IÁ”v®
;

486 
UIÁ
 
	gm_siiSEITimeSÿË
;

487 
	g¡d
::
veùÜ
<
UIÁ
> 
m_siiSEISubLay”NumUn™sInSI
;

489 #ià
SEI_ENCODER_CONTROL


491 
BoÞ
 
	gm_fgcSEIEÇbËd
;

492 
BoÞ
 
	gm_fgcSEICªûlFÏg
;

493 
BoÞ
 
	gm_fgcSEIP”si¡’ûFÏg
;

494 
UIÁ
 
	gm_fgcSEIMod–ID
;

495 
BoÞ
 
	gm_fgcSEIS•CÞourDescP»£ÁFÏg
;

496 
UIÁ
 
	gm_fgcSEIBËndšgModeID
;

497 
UIÁ
 
	gm_fgcSEILog2SÿËFaùÜ
;

498 
BoÞ
 
	gm_fgcSEICompMod–P»£Á
[
MAX_NUM_COMPONENT
];

499 #ià
FGS_RDD5_ENABLE


500 
UIÁ
 
	gm_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[
MAX_NUM_COMPONENT
];

501 
UIÁ
 
	gm_fgcSEINumMod–V®uesMšus1
[
MAX_NUM_COMPONENT
];

502 
UIÁ
 
	gm_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
];

503 
UIÁ
 
	gm_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
];

504 
UIÁ
 
	gm_fgcSEICompMod–V®ue
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
][
MAX_NUM_MODEL_VALUES
];

507 
BoÞ
 
	gm_þlSEIEÇbËd
;

508 
UIÁ
 
	gm_þlSEIMaxCÚ‹ÁLev–
;

509 
UIÁ
 
	gm_þlSEIMaxPicAvgLev–
;

511 
BoÞ
 
	gm_aveSEIEÇbËd
;

512 
UIÁ
 
	gm_aveSEIAmb›ÁIÎumšªû
;

513 
UIÁ
 
	gm_aveSEIAmb›ÁLightX
;

514 
UIÁ
 
	gm_aveSEIAmb›ÁLightY
;

516 
	g¡d
::
¡ršg
 
m_summ¬yOutFž’ame
;

517 
	g¡d
::
¡ršg
 
m_summ¬yPicFž’ameBa£
;

518 
UIÁ
 
	gm_summ¬yV”bo£Ãss
;

520 #ià
EXTENSION_360_VIDEO


521 
TExt360AµEncCfg
 
	gm_ext360
;

522 
ä›nd
 
þass
 
	gTExt360AµEncCfg
;

523 
ä›nd
 
þass
 
	gTExt360AµEncTÝ
;

527 
Void
 
xCheckP¬am‘”
 ();

528 
Void
 
xPrštP¬am‘”
 ();

529 
Void
 
xPrštU§ge
 ();

530 #ià
DPB_ENCODER_USAGE_CHECK


531 
IÁ
 
xDPBU§ge
(
¡d
::
o¡»am
 *
pOs
);

533 
	gpublic
:

534 
TAµEncCfg
();

535 
	gvœtu®
 ~
TAµEncCfg
();

537 
	gpublic
:

538 
Void
 
ü—‹
 ();

539 
Void
 
de¡roy
 ();

540 
BoÞ
 
·r£Cfg
 ( 
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[] );

	@source/App/TAppEncoder/TAppEncTop.cpp

38 
	~<li¡
>

39 
	~<f¡»am
>

40 
	~<¡dlib.h
>

41 
	~<¡dio.h
>

42 
	~<fúŽ.h
>

43 
	~<as£¹.h
>

44 
	~<iomª
>

46 
	~"TAµEncTÝ.h
"

47 
	~"TLibEncod”/TEncTempÜ®Fž‹r.h
"

48 
	~"TLibEncod”/AÂexBwr™e.h
"

50 #ià
EXTENSION_360_VIDEO


51 
	~"TAµEncH–³r360/TExt360AµEncTÝ.h
"

54 
usšg
 
Çme¥aû
 
	g¡d
;

63 
	gTAµEncTÝ
::
	$TAµEncTÝ
()

65 
m_iF¿meRcvd
 = 0;

66 
m_tÙ®By‹s
 = 0;

67 
m_es£ÁŸlBy‹s
 = 0;

68 
	}
}

70 
	gTAµEncTÝ
::~
	$TAµEncTÝ
()

72 
	}
}

74 
Void
 
TAµEncTÝ
::
	$xIn™LibCfg
()

76 
TComVPS
 
vps
;

78 
vps
.
	`£tMaxTLay”s
 ( 
m_maxTempLay”
 );

79 ià(
m_maxTempLay”
 == 1)

81 
vps
.
	`£tTempÜ®Ne¡šgFÏg
(
Œue
);

83 
vps
.
	`£tMaxLay”s
 ( 1 );

84 
IÁ
 
i
 = 0; i < 
MAX_TLAYER
; i++)

86 
vps
.
	`£tNumReÜd”Pics
 ( 
m_numReÜd”Pics
[
i
], i );

87 
vps
.
	`£tMaxDecPicBufãršg
 ( 
m_maxDecPicBufãršg
[
i
], i );

89 
m_cTEncTÝ
.
	`£tVPS
(&
vps
);

91 
m_cTEncTÝ
.
	`£tProfže
 ( 
m_´ofže
);

92 
m_cTEncTÝ
.
	`£tLev–
 ( 
m_Ëv–T›r
, 
m_Ëv–
);

93 
m_cTEncTÝ
.
	`£tProg»ssiveSourûFÏg
 ( 
m_´og»ssiveSourûFÏg
);

94 
m_cTEncTÝ
.
	`£tIÁ”ÏûdSourûFÏg
 ( 
m_š‹¾aûdSourûFÏg
);

95 
m_cTEncTÝ
.
	`£tNÚPackedCÚ¡¿štFÏg
 ( 
m_nÚPackedCÚ¡¿štFÏg
);

96 
m_cTEncTÝ
.
	`£tF¿meOÆyCÚ¡¿štFÏg
 ( 
m_äameOÆyCÚ¡¿štFÏg
);

97 
m_cTEncTÝ
.
	`£tB™D•thCÚ¡¿štV®ue
 ( 
m_b™D•thCÚ¡¿št
 );

98 
m_cTEncTÝ
.
	`£tChromaFÜm©CÚ¡¿štV®ue
 ( 
m_chromaFÜm©CÚ¡¿št
 );

99 
m_cTEncTÝ
.
	`£tIÁ¿CÚ¡¿štFÏg
 ( 
m_šŒaCÚ¡¿štFÏg
 );

100 
m_cTEncTÝ
.
	`£tOÃPiùu»OÆyCÚ¡¿štFÏg
 ( 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 );

101 
m_cTEncTÝ
.
	`£tLow”B™R©eCÚ¡¿štFÏg
 ( 
m_low”B™R©eCÚ¡¿štFÏg
 );

103 
m_cTEncTÝ
.
	`£tPrštMSEBa£dSequ’ûPSNR
 ( 
m_´štMSEBa£dSequ’ûPSNR
);

104 
m_cTEncTÝ
.
	`£tPrštHexP¢r
 ( 
m_´štHexP¢r
);

105 
m_cTEncTÝ
.
	`£tPrštF¿meMSE
 ( 
m_´štF¿meMSE
);

106 
m_cTEncTÝ
.
	`£tPrštSequ’ûMSE
 ( 
m_´štSequ’ûMSE
);

107 
m_cTEncTÝ
.
	`£tPrštMSSSIM
 ( 
m_´štMSSSIM
 );

109 
m_cTEncTÝ
.
	`£tXPSNREÇbËFÏg
 ( 
m_bXPSNREÇbËFÏg
);

110 
IÁ
 
id
 = 0 ; id < 
MAX_NUM_COMPONENT
; id++)

112 
m_cTEncTÝ
.
	`£tXPSNRWeight
 ( 
m_dXPSNRWeight
[
id
], 
	`CompÚ’tID
(id));

115 
m_cTEncTÝ
.
	`£tCabacZ”oWÜdPaddšgEÇbËd
 ( 
m_ÿbacZ”oWÜdPaddšgEÇbËd
 );

117 
m_cTEncTÝ
.
	`£tF¿meR©e
 ( 
m_iF¿meR©e
 );

118 
m_cTEncTÝ
.
	`£tF¿meSk
 ( 
m_F¿meSk
 );

119 
m_cTEncTÝ
.
	`£tTempÜ®Sub§m¶eR©io
 ( 
m_‹mpÜ®Sub§m¶eR©io
 );

120 
m_cTEncTÝ
.
	`£tSourûWidth
 ( 
m_iSourûWidth
 );

121 
m_cTEncTÝ
.
	`£tSourûHeight
 ( 
m_iSourûHeight
 );

122 
m_cTEncTÝ
.
	`£tCÚfÜmªûWšdow
 ( 
m_cÚfWšLeá
, 
m_cÚfWšRight
, 
m_cÚfWšTÝ
, 
m_cÚfWšBÙtom
 );

123 
m_cTEncTÝ
.
	`£tF¿mesToBeEncoded
 ( 
m_äamesToBeEncoded
 );

126 
m_cTEncTÝ
.
	`£tIÁ¿P”iod
 ( 
m_iIÁ¿P”iod
 );

127 
m_cTEncTÝ
.
	`£tDecodšgReäeshTy³
 ( 
m_iDecodšgReäeshTy³
 );

128 
m_cTEncTÝ
.
	`£tGOPSize
 ( 
m_iGOPSize
 );

129 
m_cTEncTÝ
.
	`£tReWr™eP¬amS‘sFÏg
 ( 
m_bReWr™eP¬amS‘sFÏg
 );

130 
m_cTEncTÝ
.
	`£tGÝLi¡
 ( 
m_GOPLi¡
 );

131 
m_cTEncTÝ
.
	`£tExŒaRPSs
 ( 
m_exŒaRPSs
 );

132 
IÁ
 
i
 = 0; i < 
MAX_TLAYER
; i++)

134 
m_cTEncTÝ
.
	`£tNumReÜd”Pics
 ( 
m_numReÜd”Pics
[
i
], i );

135 
m_cTEncTÝ
.
	`£tMaxDecPicBufãršg
 ( 
m_maxDecPicBufãršg
[
i
], i );

137  
UIÁ
 
uiLoÝ
 = 0; uiLoÝ < 
MAX_TLAYER
; ++uiLoop )

139 
m_cTEncTÝ
.
	`£tLambdaModif›r
 ( 
uiLoÝ
, 
m_adLambdaModif›r
[ uiLoop ] );

141 
m_cTEncTÝ
.
	`£tIÁ¿LambdaModif›r
 ( 
m_adIÁ¿LambdaModif›r
 );

142 
m_cTEncTÝ
.
	`£tIÁ¿QpFaùÜ
 ( 
m_dIÁ¿QpFaùÜ
 );

144 
m_cTEncTÝ
.
	`£tQP
 ( 
m_iQP
 );

146 
m_cTEncTÝ
.
	`£tIÁ¿QPOff£t
 ( 
m_šŒaQPOff£t
 );

147 
m_cTEncTÝ
.
	`£tLambdaFromQPEÇbË
 ( 
m_ÏmbdaFromQPEÇbË
 );

148 
m_cTEncTÝ
.
	`£tPad
 ( 
m_aiPad
 );

150 
m_cTEncTÝ
.
	`£tAcûssUn™D–im™”
 ( 
m_AcûssUn™D–im™”
 );

152 
m_cTEncTÝ
.
	`£tMaxTempLay”
 ( 
m_maxTempLay”
 );

153 
m_cTEncTÝ
.
	`£tU£AMP
Ð
m_’abËAMP
 );

158 
m_cTEncTÝ
.
	`£tLoÝFž‹rDi§bË
 ( 
m_bLoÝFž‹rDi§bË
 );

159 
m_cTEncTÝ
.
	`£tLoÝFž‹rOff£tInPPS
 ( 
m_loÝFž‹rOff£tInPPS
 );

160 
m_cTEncTÝ
.
	`£tLoÝFž‹rB‘aOff£t
 ( 
m_loÝFž‹rB‘aOff£tDiv2
 );

161 
m_cTEncTÝ
.
	`£tLoÝFž‹rTcOff£t
 ( 
m_loÝFž‹rTcOff£tDiv2
 );

162 
m_cTEncTÝ
.
	`£tDeblockšgFž‹rM‘ric
 ( 
m_deblockšgFž‹rM‘ric
 );

165 
m_cTEncTÝ
.
	`£tDi§bËIÁ¿PUsInIÁ”Sliûs
 ( 
m_bDi§bËIÁ¿PUsInIÁ”Sliûs
 );

166 
m_cTEncTÝ
.
	`£tMÙiÚE¡im©iÚS—rchM‘hod
 ( 
m_mÙiÚE¡im©iÚS—rchM‘hod
 );

167 
m_cTEncTÝ
.
	`£tS—rchRªge
 ( 
m_iS—rchRªge
 );

168 
m_cTEncTÝ
.
	`£tB»dS—rchRªge
 ( 
m_b»dS—rchRªge
 );

169 
m_cTEncTÝ
.
	`£tClFÜBiP»dMeEÇbËd
 ( 
m_bClFÜBiP»dMeEÇbËd
 );

170 
m_cTEncTÝ
.
	`£tFa¡MEAssumšgSmoÙh”MVEÇbËd
 ( 
m_bFa¡MEAssumšgSmoÙh”MVEÇbËd
 );

171 
m_cTEncTÝ
.
	`£tMšS—rchWšdow
 ( 
m_mšS—rchWšdow
 );

172 
m_cTEncTÝ
.
	`£tRe¡riùMESam¶šg
 ( 
m_bRe¡riùMESam¶šg
 );

175 
m_cTEncTÝ
.
	`£tMaxD–QP
 ( 
m_iMaxD–QP
 );

176 
m_cTEncTÝ
.
	`£tMaxCuDQPD•th
 ( 
m_iMaxCuDQPD•th
 );

177 
m_cTEncTÝ
.
	`£tDiffCuChromaQpOff£tD•th
 ( 
m_diffCuChromaQpOff£tD•th
 );

178 
m_cTEncTÝ
.
	`£tChromaCbQpOff£t
 ( 
m_cbQpOff£t
 );

179 
m_cTEncTÝ
.
	`£tChromaCrQpOff£t
 ( 
m_üQpOff£t
 );

180 
m_cTEncTÝ
.
	`£tWCGChromaQpCÚŒÞ
 ( 
m_wcgChromaQpCÚŒÞ
 );

181 
m_cTEncTÝ
.
	`£tSliûChromaOff£tQpIÁ¿OrP”iodic
 ( 
m_¦iûChromaQpOff£tP”iodic™y
, 
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
 );

182 
m_cTEncTÝ
.
	`£tChromaFÜm©Idc
 ( 
m_chromaFÜm©IDC
 );

184 #ià
ADAPTIVE_QP_SELECTION


185 
m_cTEncTÝ
.
	`£tU£Ad­tQpS–eù
 ( 
m_bU£Ad­tQpS–eù
 );

188 
m_cTEncTÝ
.
	`£tU£Ad­tiveQP
 ( 
m_bU£Ad­tiveQP
 );

189 
m_cTEncTÝ
.
	`£tQPAd­tiÚRªge
 ( 
m_iQPAd­tiÚRªge
 );

190 
m_cTEncTÝ
.
	`£tEx‹ndedP»cisiÚProûssšgFÏg
 ( 
m_ex‹ndedP»cisiÚProûssšgFÏg
 );

191 
m_cTEncTÝ
.
	`£tHighP»cisiÚOff£tsEÇbËdFÏg
 ( 
m_highP»cisiÚOff£tsEÇbËdFÏg
 );

193 
m_cTEncTÝ
.
	`£tWeigh‹dP»diùiÚM‘hod
Ð
m_weigh‹dP»diùiÚM‘hod
 );

196 
m_cTEncTÝ
.
	`£tLumaLev–ToD–QPCÚŒÞs
 ( 
m_lumaLev–ToD–QPM­pšg
 );

197 
m_cTEncTÝ
.
	`£tD–QpRD
Ð(
m_co¡Mode
==
COST_LOSSLESS_CODING
è? 0 : 
m_uiD–QpRD
 );

198 
m_cTEncTÝ
.
	`£tFa¡D–Qp
 ( 
m_bFa¡D–QP
 );

199 
m_cTEncTÝ
.
	`£tU£ASR
 ( 
m_bU£ASR
 );

200 
m_cTEncTÝ
.
	`£tU£HADME
 ( 
m_bU£HADME
 );

201 
m_cTEncTÝ
.
	`£tdQPs
 ( 
m_aidQP
 );

202 
m_cTEncTÝ
.
	`£tU£RDOQ
 ( 
m_u£RDOQ
 );

203 
m_cTEncTÝ
.
	`£tU£RDOQTS
 ( 
m_u£RDOQTS
 );

204 
m_cTEncTÝ
.
	`£tU£S–eùiveRDOQ
 ( 
m_u£S–eùiveRDOQ
 );

205 
m_cTEncTÝ
.
	`£tRD³ÇÉy
 ( 
m_rdP’®ty
 );

206 
m_cTEncTÝ
.
	`£tMaxCUWidth
 ( 
m_uiMaxCUWidth
 );

207 
m_cTEncTÝ
.
	`£tMaxCUHeight
 ( 
m_uiMaxCUHeight
 );

208 
m_cTEncTÝ
.
	`£tMaxTÙ®CUD•th
 ( 
m_uiMaxTÙ®CUD•th
 );

209 
m_cTEncTÝ
.
	`£tLog2DiffMaxMšCodšgBlockSize
 ( 
m_uiLog2DiffMaxMšCodšgBlockSize
 );

210 
m_cTEncTÝ
.
	`£tQuadŒ“TULog2MaxSize
 ( 
m_uiQuadŒ“TULog2MaxSize
 );

211 
m_cTEncTÝ
.
	`£tQuadŒ“TULog2MšSize
 ( 
m_uiQuadŒ“TULog2MšSize
 );

212 
m_cTEncTÝ
.
	`£tQuadŒ“TUMaxD•thIÁ”
 ( 
m_uiQuadŒ“TUMaxD•thIÁ”
 );

213 
m_cTEncTÝ
.
	`£tQuadŒ“TUMaxD•thIÁ¿
 ( 
m_uiQuadŒ“TUMaxD•thIÁ¿
 );

214 
m_cTEncTÝ
.
	`£tFa¡IÁ”S—rchMode
 ( 
m_ç¡IÁ”S—rchMode
 );

215 
m_cTEncTÝ
.
	`£tU£E¬lyCU
 ( 
m_bU£E¬lyCU
 );

216 
m_cTEncTÝ
.
	`£tU£Fa¡DecisiÚFÜM”ge
 ( 
m_u£Fa¡DecisiÚFÜM”ge
 );

217 
m_cTEncTÝ
.
	`£tU£CbfFa¡Mode
 ( 
m_bU£CbfFa¡Mode
 );

218 
m_cTEncTÝ
.
	`£tU£E¬lySkD‘eùiÚ
 ( 
m_u£E¬lySkD‘eùiÚ
 );

219 
m_cTEncTÝ
.
	`£tCrossCompÚ’tP»diùiÚEÇbËdFÏg
 ( 
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 );

220 
m_cTEncTÝ
.
	`£tU£RecÚBa£dCrossCP»diùiÚE¡im©e
 ( 
m_»cÚBa£dCrossCP»diùiÚE¡im©e
 );

221 
m_cTEncTÝ
.
	`£tLog2SaoOff£tSÿË
 ( 
CHANNEL_TYPE_LUMA
 , 
m_log2SaoOff£tSÿË
[CHANNEL_TYPE_LUMA] );

222 
m_cTEncTÝ
.
	`£tLog2SaoOff£tSÿË
 ( 
CHANNEL_TYPE_CHROMA
, 
m_log2SaoOff£tSÿË
[CHANNEL_TYPE_CHROMA] );

223 
m_cTEncTÝ
.
	`£tU£T¿nsfÜmSk
 ( 
m_u£T¿nsfÜmSk
 );

224 
m_cTEncTÝ
.
	`£tU£T¿nsfÜmSkFa¡
 ( 
m_u£T¿nsfÜmSkFa¡
 );

225 
m_cTEncTÝ
.
	`£tT¿nsfÜmSkRÙ©iÚEÇbËdFÏg
 ( 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 );

226 
m_cTEncTÝ
.
	`£tT¿nsfÜmSkCÚ‹xtEÇbËdFÏg
 ( 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 );

227 
m_cTEncTÝ
.
	`£tP”si¡’tRiûAd­tiÚEÇbËdFÏg
 ( 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 );

228 
m_cTEncTÝ
.
	`£tCabacBy·ssAlignm’tEÇbËdFÏg
 ( 
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 );

229 
m_cTEncTÝ
.
	`£tLog2MaxT¿nsfÜmSkBlockSize
 ( 
m_log2MaxT¿nsfÜmSkBlockSize
 );

230 
UIÁ
 
sigÇÎšgModeIndex
 = 0; sigÇÎšgModeIndex < 
NUMBER_OF_RDPCM_SIGNALLING_MODES
; signallingModeIndex++)

232 
m_cTEncTÝ
.
	`£tRdpcmEÇbËdFÏg
 ( 
	`RDPCMSigÇÎšgMode
(
sigÇÎšgModeIndex
), 
m_rdpcmEÇbËdFÏg
[signallingModeIndex]);

234 
m_cTEncTÝ
.
	`£tU£CÚ¡¿šedIÁ¿P»d
 ( 
m_bU£CÚ¡¿šedIÁ¿P»d
 );

235 
m_cTEncTÝ
.
	`£tFa¡UDIU£MPMEÇbËd
 ( 
m_bFa¡UDIU£MPMEÇbËd
 );

236 
m_cTEncTÝ
.
	`£tFa¡MEFÜG’BLowD–ayEÇbËd
 ( 
m_bFa¡MEFÜG’BLowD–ayEÇbËd
 );

237 
m_cTEncTÝ
.
	`£tU£BLambdaFÜNÚKeyLowD–ayPiùu»s
 ( 
m_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
 );

238 
m_cTEncTÝ
.
	`£tPCMLog2MšSize
 ( 
m_uiPCMLog2MšSize
);

239 
m_cTEncTÝ
.
	`£tU£PCM
 ( 
m_u£PCM
 );

242 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

244 
m_cTEncTÝ
.
	`£tB™D•th
((
ChªÃlTy³
)
chªÃlTy³
, 
m_š‹º®B™D•th
[channelType]);

245 
m_cTEncTÝ
.
	`£tPCMB™D•th
((
ChªÃlTy³
)
chªÃlTy³
, 
m_bPCMIÅutB™D•thFÏg
 ? 
m_MSBEx‹ndedB™D•th
[chªÃlTy³] : 
m_š‹º®B™D•th
[channelType]);

248 
m_cTEncTÝ
.
	`£tPCMLog2MaxSize
 ( 
m_pcmLog2MaxSize
);

249 
m_cTEncTÝ
.
	`£tMaxNumM”geCªd
 ( 
m_maxNumM”geCªd
 );

253 
m_cTEncTÝ
.
	`£tU£WP
 ( 
m_u£Weigh‹dP»d
 );

254 
m_cTEncTÝ
.
	`£tWPBiP»d
 ( 
m_u£Weigh‹dBiP»d
 );

257 
m_cTEncTÝ
.
	`£tLog2P¬®ËlM”geLev–Mšus2
 ( 
m_log2P¬®ËlM”geLev–
 - 2 );

260 
m_cTEncTÝ
.
	`£tSliûMode
 ( 
m_¦iûMode
 );

261 
m_cTEncTÝ
.
	`£tSliûArgum’t
 ( 
m_¦iûArgum’t
 );

264 
m_cTEncTÝ
.
	`£tSliûSegm’tMode
 ( 
m_¦iûSegm’tMode
 );

265 
m_cTEncTÝ
.
	`£tSliûSegm’tArgum’t
 ( 
m_¦iûSegm’tArgum’t
 );

267 if(
m_¦iûMode
 =ð
NO_SLICES
 )

269 
m_bLFCrossSliûBound¬yFÏg
 = 
Œue
;

271 
m_cTEncTÝ
.
	`£tLFCrossSliûBound¬yFÏg
 ( 
m_bLFCrossSliûBound¬yFÏg
 );

272 
m_cTEncTÝ
.
	`£tU£SAO
 ( 
m_bU£SAO
 );

273 
m_cTEncTÝ
.
	`£tTe¡SAODi§bËAtPiùu»Lev–
 ( 
m_bTe¡SAODi§bËAtPiùu»Lev–
 );

274 
m_cTEncTÝ
.
	`£tSaoEncodšgR©e
 ( 
m_§oEncodšgR©e
 );

275 
m_cTEncTÝ
.
	`£tSaoEncodšgR©eChroma
 ( 
m_§oEncodšgR©eChroma
 );

276 
m_cTEncTÝ
.
	`£tMaxNumOff£tsP”Pic
 ( 
m_maxNumOff£tsP”Pic
);

278 
m_cTEncTÝ
.
	`£tSaoCtuBound¬y
 ( 
m_§oCtuBound¬y
);

279 
m_cTEncTÝ
.
	`£tRe£tEncod”S‹Aá”IRAP
 ( 
m_»£tEncod”S‹Aá”IRAP
 );

280 
m_cTEncTÝ
.
	`£tPCMIÅutB™D•thFÏg
 ( 
m_bPCMIÅutB™D•thFÏg
);

281 
m_cTEncTÝ
.
	`£tPCMFž‹rDi§bËFÏg
 ( 
m_bPCMFž‹rDi§bËFÏg
);

283 
m_cTEncTÝ
.
	`£tIÁ¿SmoÙhšgDi§bËdFÏg
 (!
m_’abËIÁ¿Reã»nûSmoÙhšg
 );

284 
m_cTEncTÝ
.
	`£tDecodedPiùu»HashSEITy³
 ( 
m_decodedPiùu»HashSEITy³
 );

285 
m_cTEncTÝ
.
	`£tRecov”yPoštSEIEÇbËd
 ( 
m_»cov”yPoštSEIEÇbËd
 );

286 
m_cTEncTÝ
.
	`£tBufãršgP”iodSEIEÇbËd
 ( 
m_bufãršgP”iodSEIEÇbËd
 );

287 
m_cTEncTÝ
.
	`£tPiùu»TimšgSEIEÇbËd
 ( 
m_piùu»TimšgSEIEÇbËd
 );

288 
m_cTEncTÝ
.
	`£tTÚeM­pšgInfoSEIEÇbËd
 ( 
m_tÚeM­pšgInfoSEIEÇbËd
 );

289 
m_cTEncTÝ
.
	`£tTMISEITÚeM­Id
 ( 
m_tÚeM­Id
 );

290 
m_cTEncTÝ
.
	`£tTMISEITÚeM­CªûlFÏg
 ( 
m_tÚeM­CªûlFÏg
 );

291 
m_cTEncTÝ
.
	`£tTMISEITÚeM­P”si¡’ûFÏg
 ( 
m_tÚeM­P”si¡’ûFÏg
 );

292 
m_cTEncTÝ
.
	`£tTMISEICodedD©aB™D•th
 ( 
m_tÚeM­CodedD©aB™D•th
 );

293 
m_cTEncTÝ
.
	`£tTMISEIT¬g‘B™D•th
 ( 
m_tÚeM­T¬g‘B™D•th
 );

294 
m_cTEncTÝ
.
	`£tTMISEIMod–ID
 ( 
m_tÚeM­Mod–Id
 );

295 
m_cTEncTÝ
.
	`£tTMISEIMšV®ue
 ( 
m_tÚeM­MšV®ue
 );

296 
m_cTEncTÝ
.
	`£tTMISEIMaxV®ue
 ( 
m_tÚeM­MaxV®ue
 );

297 
m_cTEncTÝ
.
	`£tTMISEISigmoidMidpošt
 ( 
m_sigmoidMidpošt
 );

298 
m_cTEncTÝ
.
	`£tTMISEISigmoidWidth
 ( 
m_sigmoidWidth
 );

299 
m_cTEncTÝ
.
	`£tTMISEIS¹OfCodedIÁ”va
 ( 
m_¡¬tOfCodedIÁ”v®
 );

300 
m_cTEncTÝ
.
	`£tTMISEINumPivÙs
 ( 
m_numPivÙs
 );

301 
m_cTEncTÝ
.
	`£tTMISEICodedPivÙV®ue
 ( 
m_codedPivÙV®ue
 );

302 
m_cTEncTÝ
.
	`£tTMISEIT¬g‘PivÙV®ue
 ( 
m_rg‘PivÙV®ue
 );

303 
m_cTEncTÝ
.
	`£tTMISEICam”aIsoS³edIdc
 ( 
m_ÿm”aIsoS³edIdc
 );

304 
m_cTEncTÝ
.
	`£tTMISEICam”aIsoS³edV®ue
 ( 
m_ÿm”aIsoS³edV®ue
 );

305 
m_cTEncTÝ
.
	`£tTMISEIExposu»IndexIdc
 ( 
m_exposu»IndexIdc
 );

306 
m_cTEncTÝ
.
	`£tTMISEIExposu»IndexV®ue
 ( 
m_exposu»IndexV®ue
 );

307 
m_cTEncTÝ
.
	`£tTMISEIExposu»Com³n§tiÚV®ueSignFÏg
 ( 
m_exposu»Com³n§tiÚV®ueSignFÏg
 );

308 
m_cTEncTÝ
.
	`£tTMISEIExposu»Com³n§tiÚV®ueNum”©Ü
 ( 
m_exposu»Com³n§tiÚV®ueNum”©Ü
 );

309 
m_cTEncTÝ
.
	`£tTMISEIExposu»Com³n§tiÚV®ueD’omIdc
 ( 
m_exposu»Com³n§tiÚV®ueD’omIdc
 );

310 
m_cTEncTÝ
.
	`£tTMISEIRefSü“nLumšªûWh™e
 ( 
m_»fSü“nLumšªûWh™e
 );

311 
m_cTEncTÝ
.
	`£tTMISEIEx‹ndedRªgeWh™eLev–
 ( 
m_ex‹ndedRªgeWh™eLev–
 );

312 
m_cTEncTÝ
.
	`£tTMISEINomš®BÏckLev–LumaCodeV®ue
 ( 
m_nomš®BÏckLev–LumaCodeV®ue
 );

313 
m_cTEncTÝ
.
	`£tTMISEINomš®Wh™eLev–LumaCodeV®ue
 ( 
m_nomš®Wh™eLev–LumaCodeV®ue
 );

314 
m_cTEncTÝ
.
	`£tTMISEIEx‹ndedWh™eLev–LumaCodeV®ue
 ( 
m_ex‹ndedWh™eLev–LumaCodeV®ue
 );

315 
m_cTEncTÝ
.
	`£tChromaRe§m¶šgFž‹rHštEÇbËd
 ( 
m_chromaRe§m¶šgFž‹rSEI’abËd
 );

316 
m_cTEncTÝ
.
	`£tChromaRe§m¶šgHÜFž‹rIdc
 ( 
m_chromaRe§m¶šgHÜFž‹rIdc
 );

317 
m_cTEncTÝ
.
	`£tChromaRe§m¶šgV”Fž‹rIdc
 ( 
m_chromaRe§m¶šgV”Fž‹rIdc
 );

318 
m_cTEncTÝ
.
	`£tF¿mePackšgA¼ªgem’tSEIEÇbËd
 ( 
m_äamePackšgSEIEÇbËd
 );

319 
m_cTEncTÝ
.
	`£tF¿mePackšgA¼ªgem’tSEITy³
 ( 
m_äamePackšgSEITy³
 );

320 
m_cTEncTÝ
.
	`£tF¿mePackšgA¼ªgem’tSEIId
 ( 
m_äamePackšgSEIId
 );

321 
m_cTEncTÝ
.
	`£tF¿mePackšgA¼ªgem’tSEIQušcunx
 ( 
m_äamePackšgSEIQušcunx
 );

322 
m_cTEncTÝ
.
	`£tF¿mePackšgA¼ªgem’tSEIIÁ”´‘©iÚ
 ( 
m_äamePackšgSEIIÁ”´‘©iÚ
 );

323 
m_cTEncTÝ
.
	`£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEIEÇbËd
 ( 
m_£gm’‹dReùF¿mePackšgSEIEÇbËd
 );

324 
m_cTEncTÝ
.
	`£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEICªûl
 ( 
m_£gm’‹dReùF¿mePackšgSEICªûl
 );

325 
m_cTEncTÝ
.
	`£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEITy³
 ( 
m_£gm’‹dReùF¿mePackšgSEITy³
 );

326 
m_cTEncTÝ
.
	`£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEIP”si¡’û
Ð
m_£gm’‹dReùF¿mePackšgSEIP”si¡’û
 );

327 
m_cTEncTÝ
.
	`£tDi¥ÏyOr›Á©iÚSEIAngË
 ( 
m_di¥ÏyOr›Á©iÚSEIAngË
 );

328 
m_cTEncTÝ
.
	`£tTempÜ®Lev–0IndexSEIEÇbËd
 ( 
m_‹mpÜ®Lev–0IndexSEIEÇbËd
 );

329 
m_cTEncTÝ
.
	`£tG¿du®DecodšgReäeshInfoEÇbËd
 ( 
m_g¿du®DecodšgReäeshInfoEÇbËd
 );

330 
m_cTEncTÝ
.
	`£tNoDi¥ÏySEITLay”
 ( 
m_noDi¥ÏySEITLay”
 );

331 
m_cTEncTÝ
.
	`£tDecodšgUn™InfoSEIEÇbËd
 ( 
m_decodšgUn™InfoSEIEÇbËd
 );

332 
m_cTEncTÝ
.
	`£tSOPDesütiÚSEIEÇbËd
 ( 
m_SOPDesütiÚSEIEÇbËd
 );

333 
m_cTEncTÝ
.
	`£tSÿÏbËNe¡šgSEIEÇbËd
 ( 
m_sÿÏbËNe¡šgSEIEÇbËd
 );

334 
m_cTEncTÝ
.
	`£tTMCTSSEIEÇbËd
 ( 
m_tmùsSEIEÇbËd
 );

335 #ià
MCTS_ENC_CHECK


336 
m_cTEncTÝ
.
	`£tTMCTSSEITžeCÚ¡¿št
 ( 
m_tmùsSEITžeCÚ¡¿št
 );

338 #ià
MCTS_EXTRACTION


339 
m_cTEncTÝ
.
	`£tTMCTSExŒaùiÚSEIEÇbËd
 ( 
m_tmùsExŒaùiÚSEIEÇbËd
);

341 
m_cTEncTÝ
.
	`£tTimeCodeSEIEÇbËd
 ( 
m_timeCodeSEIEÇbËd
 );

342 
m_cTEncTÝ
.
	`£tNumb”OfTimeS‘s
 ( 
m_timeCodeSEINumTs
 );

343 
IÁ
 
i
 = 0; i < 
m_timeCodeSEINumTs
; i++)

345 
m_cTEncTÝ
.
	`£tTimeS‘
(
m_timeS‘A¼ay
[
i
], i);

347 
m_cTEncTÝ
.
	`£tKÃeSEIEÇbËd
 ( 
m_kÃeSEIEÇbËd
 );

348 
m_cTEncTÝ
.
	`£tKÃeFunùiÚInfÜm©iÚSEI
 ( 
m_kÃeFunùiÚInfÜm©iÚSEI
 );

349 
m_cTEncTÝ
.
	`£tCcvSEIEÇbËd
 (
m_ccvSEIEÇbËd
);

350 
m_cTEncTÝ
.
	`£tCcvSEICªûlFÏg
 (
m_ccvSEICªûlFÏg
);

351 
m_cTEncTÝ
.
	`£tCcvSEIP”si¡’ûFÏg
 (
m_ccvSEIP”si¡’ûFÏg
);

353 
m_cTEncTÝ
.
	`£tCcvSEIEÇbËd
 (
m_ccvSEIEÇbËd
);

354 
m_cTEncTÝ
.
	`£tCcvSEICªûlFÏg
 (
m_ccvSEICªûlFÏg
);

355 
m_cTEncTÝ
.
	`£tCcvSEIP”si¡’ûFÏg
 (
m_ccvSEIP”si¡’ûFÏg
);

356 
m_cTEncTÝ
.
	`£tCcvSEIPrim¬›sP»£ÁFÏg
 (
m_ccvSEIPrim¬›sP»£ÁFÏg
);

357 
m_cTEncTÝ
.
	`£tCcvSEIMšLumšªûV®ueP»£ÁFÏg
 (
m_ccvSEIMšLumšªûV®ueP»£ÁFÏg
);

358 
m_cTEncTÝ
.
	`£tCcvSEIMaxLumšªûV®ueP»£ÁFÏg
 (
m_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
);

359 
m_cTEncTÝ
.
	`£tCcvSEIAvgLumšªûV®ueP»£ÁFÏg
 (
m_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
);

360 
IÁ
 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++) {

361 
m_cTEncTÝ
.
	`£tCcvSEIPrim¬›sX
 (
m_ccvSEIPrim¬›sX
[
i
], i);

362 
m_cTEncTÝ
.
	`£tCcvSEIPrim¬›sY
 (
m_ccvSEIPrim¬›sY
[
i
], i);

364 
m_cTEncTÝ
.
	`£tCcvSEIMšLumšªûV®ue
 (
m_ccvSEIMšLumšªûV®ue
);

365 
m_cTEncTÝ
.
	`£tCcvSEIMaxLumšªûV®ue
 (
m_ccvSEIMaxLumšªûV®ue
);

366 
m_cTEncTÝ
.
	`£tCcvSEIAvgLumšªûV®ue
 (
m_ccvSEIAvgLumšªûV®ue
);

367 
m_cTEncTÝ
.
	`£tE½SEIEÇbËd
 ( 
m_”pSEIEÇbËd
 );

368 
m_cTEncTÝ
.
	`£tE½SEICªûlFÏg
 ( 
m_”pSEICªûlFÏg
 );

369 
m_cTEncTÝ
.
	`£tE½SEIP”si¡’ûFÏg
 ( 
m_”pSEIP”si¡’ûFÏg
 );

370 
m_cTEncTÝ
.
	`£tE½SEIGu¬dBªdFÏg
 ( 
m_”pSEIGu¬dBªdFÏg
 );

371 
m_cTEncTÝ
.
	`£tE½SEIGu¬dBªdTy³
 ( 
m_”pSEIGu¬dBªdTy³
 );

372 
m_cTEncTÝ
.
	`£tE½SEILeáGu¬dBªdWidth
 ( 
m_”pSEILeáGu¬dBªdWidth
 );

373 
m_cTEncTÝ
.
	`£tE½SEIRightGu¬dBªdWidth
 ( 
m_”pSEIRightGu¬dBªdWidth
 );

374 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEIEÇbËd
 ( 
m_¥h”eRÙ©iÚSEIEÇbËd
 );

375 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEICªûlFÏg
 ( 
m_¥h”eRÙ©iÚSEICªûlFÏg
 );

376 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEIP”si¡’ûFÏg
 ( 
m_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
 );

377 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEIYaw
 ( 
m_¥h”eRÙ©iÚSEIYaw
 );

378 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEIP™ch
 ( 
m_¥h”eRÙ©iÚSEIP™ch
 );

379 
m_cTEncTÝ
.
	`£tSph”eRÙ©iÚSEIRÞl
 ( 
m_¥h”eRÙ©iÚSEIRÞl
 );

380 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIEÇbËd
 ( 
m_omniV›wpÜtSEIEÇbËd
 );

381 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIId
 ( 
m_omniV›wpÜtSEIId
 );

382 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEICªûlFÏg
 ( 
m_omniV›wpÜtSEICªûlFÏg
 );

383 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIP”si¡’ûFÏg
 ( 
m_omniV›wpÜtSEIP”si¡’ûFÏg
 );

384 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEICÁMšus1
 ( 
m_omniV›wpÜtSEICÁMšus1
 );

385 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIAzimuthC’Œe
 ( 
m_omniV›wpÜtSEIAzimuthC’Œe
 );

386 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIEËv©iÚC’Œe
 ( 
m_omniV›wpÜtSEIEËv©iÚC’Œe
 );

387 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEITžtC’Œe
 ( 
m_omniV›wpÜtSEITžtC’Œe
 );

388 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIHÜRªge
 ( 
m_omniV›wpÜtSEIHÜRªge
 );

389 
m_cTEncTÝ
.
	`£tOmniV›wpÜtSEIV”Rªge
 ( 
m_omniV›wpÜtSEIV”Rªge
 );

390 
m_cTEncTÝ
.
	`£tGÝBa£dTempÜ®Fž‹rEÇbËd
 ( 
m_gÝBa£dTempÜ®Fž‹rEÇbËd
 );

391 
m_cTEncTÝ
.
	`£tCmpSEIEÇbËd
 (
m_cmpSEIEÇbËd
);

392 
m_cTEncTÝ
.
	`£tCmpSEICmpCªûlFÏg
 (
m_cmpSEICmpCªûlFÏg
);

393 
m_cTEncTÝ
.
	`£tCmpSEICmpP”si¡’ûFÏg
 (
m_cmpSEICmpP”si¡’ûFÏg
);

394 
m_cTEncTÝ
.
	`£tRwpSEIEÇbËd
 (
m_rwpSEIEÇbËd
);

395 
m_cTEncTÝ
.
	`£tRwpSEIRwpCªûlFÏg
 (
m_rwpSEIRwpCªûlFÏg
);

396 
m_cTEncTÝ
.
	`£tRwpSEIRwpP”si¡’ûFÏg
 (
m_rwpSEIRwpP”si¡’ûFÏg
);

397 
m_cTEncTÝ
.
	`£tRwpSEICÚ¡™u’tPiùu»M©chšgFÏg
 (
m_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
);

398 
m_cTEncTÝ
.
	`£tRwpSEINumPackedRegiÚs
 (
m_rwpSEINumPackedRegiÚs
);

399 
m_cTEncTÝ
.
	`£tRwpSEIProjPiùu»Width
 (
m_rwpSEIProjPiùu»Width
);

400 
m_cTEncTÝ
.
	`£tRwpSEIProjPiùu»Height
 (
m_rwpSEIProjPiùu»Height
);

401 
m_cTEncTÝ
.
	`£tRwpSEIPackedPiùu»Width
 (
m_rwpSEIPackedPiùu»Width
);

402 
m_cTEncTÝ
.
	`£tRwpSEIPackedPiùu»Height
 (
m_rwpSEIPackedPiùu»Height
);

403 
m_cTEncTÝ
.
	`£tRwpSEIRwpT¿nsfÜmTy³
 (
m_rwpSEIRwpT¿nsfÜmTy³
);

404 
m_cTEncTÝ
.
	`£tRwpSEIRwpGu¬dBªdFÏg
 (
m_rwpSEIRwpGu¬dBªdFÏg
);

405 
m_cTEncTÝ
.
	`£tRwpSEIProjRegiÚWidth
 (
m_rwpSEIProjRegiÚWidth
);

406 
m_cTEncTÝ
.
	`£tRwpSEIProjRegiÚHeight
 (
m_rwpSEIProjRegiÚHeight
);

407 
m_cTEncTÝ
.
	`£tRwpSEIRwpSEIProjRegiÚTÝ
 (
m_rwpSEIRwpSEIProjRegiÚTÝ
);

408 
m_cTEncTÝ
.
	`£tRwpSEIProjRegiÚLeá
 (
m_rwpSEIProjRegiÚLeá
);

409 
m_cTEncTÝ
.
	`£tRwpSEIPackedRegiÚWidth
 (
m_rwpSEIPackedRegiÚWidth
);

410 
m_cTEncTÝ
.
	`£tRwpSEIPackedRegiÚHeight
 (
m_rwpSEIPackedRegiÚHeight
);

411 
m_cTEncTÝ
.
	`£tRwpSEIPackedRegiÚTÝ
 (
m_rwpSEIPackedRegiÚTÝ
);

412 
m_cTEncTÝ
.
	`£tRwpSEIPackedRegiÚLeá
 (
m_rwpSEIPackedRegiÚLeá
);

413 
m_cTEncTÝ
.
	`£tRwpSEIRwpLeáGu¬dBªdWidth
 (
m_rwpSEIRwpLeáGu¬dBªdWidth
);

414 
m_cTEncTÝ
.
	`£tRwpSEIRwpRightGu¬dBªdWidth
 (
m_rwpSEIRwpRightGu¬dBªdWidth
);

415 
m_cTEncTÝ
.
	`£tRwpSEIRwpTÝGu¬dBªdHeight
 (
m_rwpSEIRwpTÝGu¬dBªdHeight
);

416 
m_cTEncTÝ
.
	`£tRwpSEIRwpBÙtomGu¬dBªdHeight
 (
m_rwpSEIRwpBÙtomGu¬dBªdHeight
);

417 
m_cTEncTÝ
.
	`£tRwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
 (
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
);

418 
m_cTEncTÝ
.
	`£tRwpSEIRwpGu¬dBªdTy³
 (
m_rwpSEIRwpGu¬dBªdTy³
);

419 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


420 
m_cTEncTÝ
.
	`£tSiiSEIEÇbËd
 (
m_siiSEIEÇbËd
);

421 
m_cTEncTÝ
.
	`£tSiiSEINumUn™sInShu‰”IÁ”v®
 (
m_siiSEINumUn™sInShu‰”IÁ”v®
);

422 
m_cTEncTÝ
.
	`£tSiiSEITimeSÿË
 (
m_siiSEITimeSÿË
);

423 
m_cTEncTÝ
.
	`£tSiiSEISubLay”NumUn™sInSI
 (
m_siiSEISubLay”NumUn™sInSI
);

425 #ià
SEI_ENCODER_CONTROL


427 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEIEÇbËd
 (
m_fgcSEIEÇbËd
);

428 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEICªûlFÏg
 (
m_fgcSEICªûlFÏg
);

429 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEIP”si¡’ûFÏg
 (
m_fgcSEIP”si¡’ûFÏg
);

430 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEIMod–ID
 ((
UCh¬
)
m_fgcSEIMod–ID
);

431 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEIS•CÞourDescP»£Á
 (
m_fgcSEIS•CÞourDescP»£ÁFÏg
);

432 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEIBËndšgModeID
 ((
UCh¬
)
m_fgcSEIBËndšgModeID
);

433 
m_cTEncTÝ
.
	`£tFžmG¿šCh¬aù”¡icsSEILog2SÿËFaùÜ
 ((
UCh¬
)
m_fgcSEILog2SÿËFaùÜ
);

434 
IÁ
 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++) {

435 
m_cTEncTÝ
.
	`£tFGCSEICompMod–P»£Á
 (
m_fgcSEICompMod–P»£Á
[
i
], i);

436 #ià
FGS_RDD5_ENABLE


437 ià(
m_fgcSEICompMod–P»£Á
[
i
]) {

438 
m_cTEncTÝ
.
	`£tFGCSEINumIÁ’s™yIÁ”v®Mšus1
((
UCh¬
)
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[
i
], i);

439 
m_cTEncTÝ
.
	`£tFGCSEINumMod–V®uesMšus1
((
UCh¬
)
m_fgcSEINumMod–V®uesMšus1
[
i
], i);

440 
UIÁ
 
j
 = 0; j <ð
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[
i
]; j++) {

441 
m_cTEncTÝ
.
	`£tFGCSEIIÁ’s™yIÁ”v®Low”Bound
((
UCh¬
)
m_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[
i
][
j
], i, j);

442 
m_cTEncTÝ
.
	`£tFGCSEIIÁ’s™yIÁ”v®Uµ”Bound
((
UCh¬
)
m_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[
i
][
j
], i, j);

443 
UIÁ
 
k
 = 0; k <ð
m_fgcSEINumMod–V®uesMšus1
[
i
]; k++) {

444 
m_cTEncTÝ
.
	`£tFGCSEICompMod–V®ue
(
m_fgcSEICompMod–V®ue
[
i
][
j
][
k
], i, j, k);

451 
m_cTEncTÝ
.
	`£tCLLSEIEÇbËd
 (
m_þlSEIEÇbËd
);

452 
m_cTEncTÝ
.
	`£tCLLSEIMaxCÚ‹ÁLightLev–
 ((
UShÜt
)
m_þlSEIMaxCÚ‹ÁLev–
);

453 
m_cTEncTÝ
.
	`£tCLLSEIMaxPicAvgLightLev–
 ((
UShÜt
)
m_þlSEIMaxPicAvgLev–
);

455 
m_cTEncTÝ
.
	`£tAmb›ÁV›wšgEnvœÚm’tSEIEÇbËd
 (
m_aveSEIEÇbËd
);

456 
m_cTEncTÝ
.
	`£tAmb›ÁV›wšgEnvœÚm’tSEIIÎumšªû
 (
m_aveSEIAmb›ÁIÎumšªû
);

457 
m_cTEncTÝ
.
	`£tAmb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightX
 ((
UShÜt
)
m_aveSEIAmb›ÁLightX
);

458 
m_cTEncTÝ
.
	`£tAmb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightY
 ((
UShÜt
)
m_aveSEIAmb›ÁLightY
);

460 ià(
m_fisheyeVIdeoInfoSEIEÇbËd
)

462 
m_cTEncTÝ
.
	`£tFviSEIEÇbËd
(
m_fisheyeVideoInfoSEI
);

466 
m_cTEncTÝ
.
	`£tFviSEIDi§bËd
();

468 
m_cTEncTÝ
.
	`£tCÞourRem­InfoSEIFžeRoÙ
 ( 
m_cÞourRem­SEIFžeRoÙ
 );

469 
m_cTEncTÝ
.
	`£tMa¡”šgDi¥ÏySEI
 ( 
m_ma¡”šgDi¥Ïy
 );

470 
m_cTEncTÝ
.
	`£tSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡icsSEIEÇbË
 ( 
m_´eã¼edT¿nsãrCh¬aù”i¡ics
>=0 );

471 
m_cTEncTÝ
.
	`£tSEIP»ã¼edT¿nsãrCh¬aù”i¡ics
 ( 
	`UCh¬
(
m_´eã¼edT¿nsãrCh¬aù”i¡ics
) );

472 
m_cTEncTÝ
.
	`£tSEIG»’M‘ad©aInfoSEIEÇbË
 ( 
m_g»’M‘ad©aTy³
 > 0 );

473 
m_cTEncTÝ
.
	`£tSEIG»’M‘ad©aTy³
 ( 
	`UCh¬
(
m_g»’M‘ad©aTy³
) );

474 
m_cTEncTÝ
.
	`£tSEIXSDM‘ricTy³
 ( 
	`UCh¬
(
m_xsdM‘ricTy³
) );

475 
m_cTEncTÝ
.
	`£tRegiÚ®Ne¡šgSEIFžeRoÙ
 ( 
m_»giÚ®Ne¡šgSEIFžeRoÙ
 );

476 
m_cTEncTÝ
.
	`£tAÂÙ©edRegiÚSEIFžeRoÙ
 (
m_¬SEIFžeRoÙ
);

477 
m_cTEncTÝ
.
	`£tTžeUnifÜmS·cšgFÏg
 ( 
m_tžeUnifÜmS·cšgFÏg
 );

478 
m_cTEncTÝ
.
	`£tNumCÞumnsMšus1
 ( 
m_numTžeCÞumnsMšus1
 );

479 
m_cTEncTÝ
.
	`£tNumRowsMšus1
 ( 
m_numTžeRowsMšus1
 );

480 if(!
m_tžeUnifÜmS·cšgFÏg
)

482 
m_cTEncTÝ
.
	`£tCÞumnWidth
 ( 
m_tžeCÞumnWidth
 );

483 
m_cTEncTÝ
.
	`£tRowHeight
 ( 
m_tžeRowHeight
 );

485 
m_cTEncTÝ
.
	`xCheckGSP¬am‘”s
();

486 
IÁ
 
uiTžesCouÁ
 = (
m_numTžeRowsMšus1
+1è* (
m_numTžeCÞumnsMšus1
+1);

487 if(
uiTžesCouÁ
 == 1)

489 
m_bLFCrossTžeBound¬yFÏg
 = 
Œue
;

491 
m_cTEncTÝ
.
	`£tLFCrossTžeBound¬yFÏg
 ( 
m_bLFCrossTžeBound¬yFÏg
 );

492 
m_cTEncTÝ
.
	`£tEÁrÝyCodšgSyncEÇbËdFÏg
 ( 
m_’ŒÝyCodšgSyncEÇbËdFÏg
 );

493 
m_cTEncTÝ
.
	`£tTMVPModeId
 ( 
m_TMVPModeId
 );

494 
m_cTEncTÝ
.
	`£tU£SÿlšgLi¡Id
 ( 
m_u£SÿlšgLi¡Id
 );

495 
m_cTEncTÝ
.
	`£tSÿlšgLi¡FžeName
 ( 
m_sÿlšgLi¡FžeName
 );

496 
m_cTEncTÝ
.
	`£tSignD©aHidšgEÇbËdFÏg
 ( 
m_signD©aHidšgEÇbËdFÏg
);

497 
m_cTEncTÝ
.
	`£tU£R©eCŒl
 ( 
m_RCEÇbËR©eCÚŒÞ
 );

498 
m_cTEncTÝ
.
	`£tT¬g‘B™¿‹
 ( 
m_RCT¬g‘B™¿‹
 );

499 
m_cTEncTÝ
.
	`£tK“pH›rB™
 ( 
m_RCK“pH›¿rchiÿlB™
 );

500 
m_cTEncTÝ
.
	`£tLCULev–RC
 ( 
m_RCLCULev–RC
 );

501 
m_cTEncTÝ
.
	`£tU£LCUS•¬©eMod–
 ( 
m_RCU£LCUS•¬©eMod–
 );

502 
m_cTEncTÝ
.
	`£tIn™ŸlQP
 ( 
m_RCIn™ŸlQP
 );

503 
m_cTEncTÝ
.
	`£tFÜûIÁ¿QP
 ( 
m_RCFÜûIÁ¿QP
 );

504 
m_cTEncTÝ
.
	`£tCpbS©u¿tiÚEÇbËd
 ( 
m_RCCpbS©u¿tiÚEÇbËd
 );

505 
m_cTEncTÝ
.
	`£tCpbSize
 ( 
m_RCCpbSize
 );

506 
m_cTEncTÝ
.
	`£tIn™ŸlCpbFuÎÃss
 ( 
m_RCIn™ŸlCpbFuÎÃss
 );

507 
m_cTEncTÝ
.
	`£tT¿nsquªtBy·ssEÇbËdFÏg
 ( 
m_T¿nsquªtBy·ssEÇbËdFÏg
 );

508 
m_cTEncTÝ
.
	`£tCUT¿nsquªtBy·ssFÏgFÜûV®ue
 ( 
m_CUT¿nsquªtBy·ssFÏgFÜû
 );

509 
m_cTEncTÝ
.
	`£tCo¡Mode
 ( 
m_co¡Mode
 );

510 
m_cTEncTÝ
.
	`£tU£ReÿlcuÏ‹QPAccÜdšgToLambda
 ( 
m_»ÿlcuÏ‹QPAccÜdšgToLambda
 );

511 
m_cTEncTÝ
.
	`£tU£SŒÚgIÁ¿SmoÙhšg
 ( 
m_u£SŒÚgIÁ¿SmoÙhšg
 );

512 
m_cTEncTÝ
.
	`£tAùiveP¬am‘”S‘sSEIEÇbËd
 ( 
m_aùiveP¬am‘”S‘sSEIEÇbËd
 );

513 
m_cTEncTÝ
.
	`£tVuiP¬am‘”sP»£ÁFÏg
 ( 
m_vuiP¬am‘”sP»£ÁFÏg
 );

514 
m_cTEncTÝ
.
	`£tA¥eùR©ioInfoP»£ÁFÏg
 ( 
m_a¥eùR©ioInfoP»£ÁFÏg
);

515 
m_cTEncTÝ
.
	`£tA¥eùR©ioIdc
 ( 
m_a¥eùR©ioIdc
 );

516 
m_cTEncTÝ
.
	`£tS¬Width
 ( 
m_§rWidth
 );

517 
m_cTEncTÝ
.
	`£tS¬Height
 ( 
m_§rHeight
 );

518 
m_cTEncTÝ
.
	`£tOv”sÿnInfoP»£ÁFÏg
 ( 
m_ov”sÿnInfoP»£ÁFÏg
 );

519 
m_cTEncTÝ
.
	`£tOv”sÿnAµrÝrŸ‹FÏg
 ( 
m_ov”sÿnAµrÝrŸ‹FÏg
 );

520 
m_cTEncTÝ
.
	`£tVideoSigÇlTy³P»£ÁFÏg
 ( 
m_videoSigÇlTy³P»£ÁFÏg
 );

521 
m_cTEncTÝ
.
	`£tVideoFÜm©
 ( 
m_videoFÜm©
 );

522 
m_cTEncTÝ
.
	`£tVideoFuÎRªgeFÏg
 ( 
m_videoFuÎRªgeFÏg
 );

523 
m_cTEncTÝ
.
	`£tCÞourDesütiÚP»£ÁFÏg
 ( 
m_cÞourDesütiÚP»£ÁFÏg
 );

524 
m_cTEncTÝ
.
	`£tCÞourPrim¬›s
 ( 
m_cÞourPrim¬›s
 );

525 
m_cTEncTÝ
.
	`£tT¿nsãrCh¬aù”i¡ics
 ( 
m_ŒªsãrCh¬aù”i¡ics
 );

526 
m_cTEncTÝ
.
	`£tM©rixCÛffic›Ás
 ( 
m_m©rixCÛffic›Ás
 );

527 
m_cTEncTÝ
.
	`£tChromaLocInfoP»£ÁFÏg
 ( 
m_chromaLocInfoP»£ÁFÏg
 );

528 
m_cTEncTÝ
.
	`£tChromaSam¶eLocTy³TÝF›ld
 ( 
m_chromaSam¶eLocTy³TÝF›ld
 );

529 
m_cTEncTÝ
.
	`£tChromaSam¶eLocTy³BÙtomF›ld
 ( 
m_chromaSam¶eLocTy³BÙtomF›ld
 );

530 
m_cTEncTÝ
.
	`£tNeuŒ®ChromaIndiÿtiÚFÏg
 ( 
m_ÃuŒ®ChromaIndiÿtiÚFÏg
 );

531 
m_cTEncTÝ
.
	`£tDeçuÉDi¥ÏyWšdow
 ( 
m_defDi¥WšLeáOff£t
, 
m_defDi¥WšRightOff£t
, 
m_defDi¥WšTÝOff£t
, 
m_defDi¥WšBÙtomOff£t
 );

532 
m_cTEncTÝ
.
	`£tF¿meF›ldInfoP»£ÁFÏg
 ( 
m_äameF›ldInfoP»£ÁFÏg
 );

533 
m_cTEncTÝ
.
	`£tPocPrÝÜtiÚ®ToTimšgFÏg
 ( 
m_pocPrÝÜtiÚ®ToTimšgFÏg
 );

534 
m_cTEncTÝ
.
	`£tNumTicksPocDiffOÃMšus1
 ( 
m_numTicksPocDiffOÃMšus1
 );

535 
m_cTEncTÝ
.
	`£tB™¡»amRe¡riùiÚFÏg
 ( 
m_b™¡»amRe¡riùiÚFÏg
 );

536 
m_cTEncTÝ
.
	`£tTžesFixedSŒuùu»FÏg
 ( 
m_tžesFixedSŒuùu»FÏg
 );

537 
m_cTEncTÝ
.
	`£tMÙiÚVeùÜsOv”PicBound¬›sFÏg
 ( 
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
 );

538 
m_cTEncTÝ
.
	`£tMšS·tŸlSegm’tiÚIdc
 ( 
m_mšS·tŸlSegm’tiÚIdc
 );

539 
m_cTEncTÝ
.
	`£tMaxBy‹sP”PicD’om
 ( 
m_maxBy‹sP”PicD’om
 );

540 
m_cTEncTÝ
.
	`£tMaxB™sP”MšCuD’om
 ( 
m_maxB™sP”MšCuD’om
 );

541 
m_cTEncTÝ
.
	`£tLog2MaxMvL’gthHÜizÚl
 ( 
m_log2MaxMvL’gthHÜizÚl
 );

542 
m_cTEncTÝ
.
	`£tLog2MaxMvL’gthV”tiÿl
 ( 
m_log2MaxMvL’gthV”tiÿl
 );

543 
m_cTEncTÝ
.
	`£tEffic›ÁF›ldIRAPEÇbËd
 ( 
m_bEffic›ÁF›ldIRAPEÇbËd
 );

544 
m_cTEncTÝ
.
	`£tH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
 ( 
m_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
 );

546 
m_cTEncTÝ
.
	`£tSumm¬yOutFž’ame
 ( 
m_summ¬yOutFž’ame
 );

547 
m_cTEncTÝ
.
	`£tSumm¬yPicFž’ameBa£
 ( 
m_summ¬yPicFž’ameBa£
 );

548 
m_cTEncTÝ
.
	`£tSumm¬yV”bo£Ãss
 ( 
m_summ¬yV”bo£Ãss
 );

549 
	}
}

551 
Void
 
	gTAµEncTÝ
::
	$xC»©eLib
()

554 
m_cTVideoIOYuvIÅutFže
.
	`Ý’
Ð
m_šputFžeName
, 
çl£
, 
m_šputB™D•th
, 
m_MSBEx‹ndedB™D•th
, 
m_š‹º®B™D•th
 );

555 
m_cTVideoIOYuvIÅutFže
.
	`skF¿mes
(
m_F¿meSk
, 
m_šputFžeWidth
, 
m_šputFžeHeight
, 
m_IÅutChromaFÜm©IDC
);

557 ià(!
m_»cÚFžeName
.
	`em±y
())

559 
m_cTVideoIOYuvRecÚFže
.
	`Ý’
(
m_»cÚFžeName
, 
Œue
, 
m_ouutB™D•th
, m_ouutB™D•th, 
m_š‹º®B™D•th
);

563 
m_cTEncTÝ
.
	`ü—‹
();

564 
	}
}

566 
Void
 
	gTAµEncTÝ
::
	$xDe¡royLib
()

569 
m_cTVideoIOYuvIÅutFže
.
	`þo£
();

570 
m_cTVideoIOYuvRecÚFže
.
	`þo£
();

573 
m_cTEncTÝ
.
	`de¡roy
();

574 
	}
}

576 
Void
 
	gTAµEncTÝ
::
	$xIn™Lib
(
BoÞ
 
isF›ldCodšg
)

578 
m_cTEncTÝ
.
	`š™
(
isF›ldCodšg
);

579 
	}
}

593 
Void
 
	gTAµEncTÝ
::
	$’code
()

595 
f¡»am
 
	`b™¡»amFže
(
m_b™¡»amFžeName
.
	`c_¡r
(), f¡»am::
bš¬y
 | f¡»am::
out
);

596 ià(!
b™¡»amFže
)

598 
	`årštf
(
¡d”r
, "\nçžedØÝ’ b™¡»am fž`%s' fÜ wr™šg\n", 
m_b™¡»amFžeName
.
	`c_¡r
());

599 
	`ex™
(
EXIT_FAILURE
);

602 
TComPicYuv
* 
pcPicYuvOrg
 = 
Ãw
 TComPicYuv;

603 
TComPicYuv
* 
pcPicYuvRec
 = 
NULL
;

606 
	`xIn™LibCfg
();

607 
	`xC»©eLib
();

608 
	`xIn™Lib
(
m_isF›ld
);

610 
	`´štChromaFÜm©
();

613 
IÁ
 
iNumEncoded
 = 0;

614 
BoÞ
 
bEos
 = 
çl£
;

616 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
 = 
m_šputCÞourS·ûCÚv”t
;

617 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
¢rCSC
 = (!
m_¢rIÁ”ÇlCÞourS·û
è? 
m_šputCÞourS·ûCÚv”t
 : 
IPCOLOURSPACE_UNCHANGED
;

619 
li¡
<
AcûssUn™
> 
ouutAcûssUn™s
;

621 
TComPicYuv
 
cPicYuvTrueOrg
;

624 ifÐ
m_isF›ld
 )

626 
pcPicYuvOrg
->
	`ü—‹
 ( 
m_iSourûWidth
, 
m_iSourûHeightOrg
, 
m_chromaFÜm©IDC
, 
m_uiMaxCUWidth
, 
m_uiMaxCUHeight
, 
m_uiMaxTÙ®CUD•th
, 
Œue
 );

627 
cPicYuvTrueOrg
.
	`ü—‹
(
m_iSourûWidth
, 
m_iSourûHeightOrg
, 
m_chromaFÜm©IDC
, 
m_uiMaxCUWidth
, 
m_uiMaxCUHeight
, 
m_uiMaxTÙ®CUD•th
, 
Œue
);

631 
pcPicYuvOrg
->
	`ü—‹
 ( 
m_iSourûWidth
, 
m_iSourûHeight
, 
m_chromaFÜm©IDC
, 
m_uiMaxCUWidth
, 
m_uiMaxCUHeight
, 
m_uiMaxTÙ®CUD•th
, 
Œue
 );

632 
cPicYuvTrueOrg
.
	`ü—‹
(
m_iSourûWidth
, 
m_iSourûHeight
, 
m_chromaFÜm©IDC
, 
m_uiMaxCUWidth
, 
m_uiMaxCUHeight
, 
m_uiMaxTÙ®CUD•th
, 
Œue
 );

635 #ià
EXTENSION_360_VIDEO


636 
TExt360AµEncTÝ
 
	`ext360
(*
this
, 
m_cTEncTÝ
.
	`g‘GOPEncod”
()->
	`g‘Ext360D©a
(), *(m_cTEncTÝ.g‘GOPEncod”()), *
pcPicYuvOrg
);

638 
TEncTempÜ®Fž‹r
 
‹mpÜ®Fž‹r
;

639 ià(
m_gÝBa£dTempÜ®Fž‹rEÇbËd
)

641 
‹mpÜ®Fž‹r
.
	`š™
(
m_F¿meSk
, 
m_šputB™D•th
, 
m_MSBEx‹ndedB™D•th
, 
m_š‹º®B™D•th
, 
m_iSourûWidth
, 
m_iSourûHeight
,

642 
m_aiPad
, 
m_äamesToBeEncoded
, 
m_bClIÅutVideoToRec709Rªge
, 
m_šputFžeName
, 
m_chromaFÜm©IDC
,

643 
m_šputCÞourS·ûCÚv”t
, 
m_iQP
, 
m_iGOPSize
, 
m_gÝBa£dTempÜ®Fž‹rSŒ’gths
,

644 
m_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
);

646  !
bEos
 )

649 
	`xG‘Bufãr
(
pcPicYuvRec
);

652 #ià
EXTENSION_360_VIDEO


653 ià(
ext360
.
	`isEÇbËd
())

655 
ext360
.
	`»ad
(
m_cTVideoIOYuvIÅutFže
, *
pcPicYuvOrg
, 
cPicYuvTrueOrg
, 
CSC
);

659 
m_cTVideoIOYuvIÅutFže
.
	`»ad
Ð
pcPicYuvOrg
, &
cPicYuvTrueOrg
, 
CSC
, 
m_aiPad
, 
m_IÅutChromaFÜm©IDC
, 
m_bClIÅutVideoToRec709Rªge
 );

662 
m_cTVideoIOYuvIÅutFže
.
	`»ad
Ð
pcPicYuvOrg
, &
cPicYuvTrueOrg
, 
CSC
, 
m_aiPad
, 
m_IÅutChromaFÜm©IDC
, 
m_bClIÅutVideoToRec709Rªge
 );

665 ià(
m_gÝBa£dTempÜ®Fž‹rEÇbËd
)

667 
‹mpÜ®Fž‹r
.
	`fž‹r
(
pcPicYuvOrg
, 
m_iF¿meRcvd
);

671 
m_iF¿meRcvd
++;

673 
bEos
 = (
m_isF›ld
 && (
m_iF¿meRcvd
 =ð(
m_äamesToBeEncoded
 >> 1) )) || ( !m_isField && (m_iFrameRcvd == m_framesToBeEncoded) );

675 
BoÞ
 
æush
 = 0;

677 ià(
m_cTVideoIOYuvIÅutFže
.
	`isEof
())

679 
æush
 = 
Œue
;

680 
bEos
 = 
Œue
;

681 
m_iF¿meRcvd
--;

682 
m_cTEncTÝ
.
	`£tF¿mesToBeEncoded
(
m_iF¿meRcvd
);

686 iàÐ
m_isF›ld
 )

688 
m_cTEncTÝ
.
	`’code
Ð
bEos
, 
æush
 ? 0 : 
pcPicYuvOrg
, flush ? 0 : &
cPicYuvTrueOrg
, 
CSC
, 
¢rCSC
, 
m_cLi¡PicYuvRec
, 
ouutAcûssUn™s
, 
iNumEncoded
, 
m_isTÝF›ldFœ¡
 );

692 
m_cTEncTÝ
.
	`’code
Ð
bEos
, 
æush
 ? 0 : 
pcPicYuvOrg
, flush ? 0 : &
cPicYuvTrueOrg
, 
CSC
, 
¢rCSC
, 
m_cLi¡PicYuvRec
, 
ouutAcûssUn™s
, 
iNumEncoded
 );

696 iàÐ
iNumEncoded
 > 0 )

698 
	`xWr™eOuut
(
b™¡»amFže
, 
iNumEncoded
, 
ouutAcûssUn™s
);

699 
ouutAcûssUn™s
.
	`þ—r
();

702 ifÐ
m_‹mpÜ®Sub§m¶eR©io
 > 1 )

704 
m_cTVideoIOYuvIÅutFže
.
	`skF¿mes
(
m_‹mpÜ®Sub§m¶eR©io
-1, 
m_šputFžeWidth
, 
m_šputFžeHeight
, 
m_IÅutChromaFÜm©IDC
);

708 
m_cTEncTÝ
.
	`´štSumm¬y
(
m_isF›ld
);

711 
pcPicYuvOrg
->
	`de¡roy
();

712 
d–‘e
 
pcPicYuvOrg
;

713 
pcPicYuvOrg
 = 
NULL
;

716 
m_cTEncTÝ
.
	`d–‘ePicBufãr
();

717 
cPicYuvTrueOrg
.
	`de¡roy
();

720 
	`xD–‘eBufãr
();

721 
	`xDe¡royLib
();

723 
	`´štR©eSumm¬y
();

726 
	}
}

738 
Void
 
	gTAµEncTÝ
::
	$xG‘Bufãr
Ð
TComPicYuv
*& 
½cPicYuvRec
)

740 
	`as£¹
Ð
m_iGOPSize
 > 0 );

743 iàÐ
m_cLi¡PicYuvRec
.
	`size
(è>ð(
UIÁ
)
m_iGOPSize
 )

745 
½cPicYuvRec
 = 
m_cLi¡PicYuvRec
.
	`pÝFrÚt
();

750 
½cPicYuvRec
 = 
Ãw
 
TComPicYuv
;

752 
½cPicYuvRec
->
	`ü—‹
Ð
m_iSourûWidth
, 
m_iSourûHeight
, 
m_chromaFÜm©IDC
, 
m_uiMaxCUWidth
, 
m_uiMaxCUHeight
, 
m_uiMaxTÙ®CUD•th
, 
Œue
 );

755 
m_cLi¡PicYuvRec
.
	`pushBack
Ð
½cPicYuvRec
 );

756 
	}
}

758 
Void
 
	gTAµEncTÝ
::
	$xD–‘eBufãr
( )

760 
TComLi¡
<
TComPicYuv
*>::
™”©Ü
 
™”PicYuvRec
 = 
m_cLi¡PicYuvRec
.
	`begš
();

762 
IÁ
 
iSize
 = 
	`IÁ
Ð
m_cLi¡PicYuvRec
.
	`size
() );

764  
IÁ
 
i
 = 0; i < 
iSize
; i++ )

766 
TComPicYuv
* 
pcPicYuvRec
 = *(
™”PicYuvRec
++);

767 
pcPicYuvRec
->
	`de¡roy
();

768 
d–‘e
 
pcPicYuvRec
;…cPicYuvReøð
NULL
;

771 
	}
}

779 
Void
 
	gTAµEncTÝ
::
xWr™eOuut
(
¡d
::
o¡»am
& 
b™¡»amFže
, 
IÁ
 
iNumEncoded
, cÚ¡ std::
li¡
<
AcûssUn™
>& 
acûssUn™s
)

781 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
 = (!
m_ouutIÁ”ÇlCÞourS·û
è? 
m_šputCÞourS·ûCÚv”t
 : 
IPCOLOURSPACE_UNCHANGED
;

783 ià(
	gm_isF›ld
)

786 
IÁ
 
	gi
;

787 
	gTComLi¡
<
	gTComPicYuv
*>::
™”©Ü
 
™”PicYuvRec
 = 
m_cLi¡PicYuvRec
.
’d
();

788 
	gli¡
<
	gAcûssUn™
>::
cÚ¡_™”©Ü
 
™”B™¡»am
 = 
acûssUn™s
.
begš
();

790  
	gi
 = 0; i < 
	giNumEncoded
; i++ )

792 --
	g™”PicYuvRec
;

795  
	gi
 = 0; i < 
	giNumEncoded
/2; i++ )

797 
TComPicYuv
* 
	gpcPicYuvRecTÝ
 = *(
™”PicYuvRec
++);

798 
TComPicYuv
* 
	gpcPicYuvRecBÙtom
 = *(
™”PicYuvRec
++);

800 ià(!
	gm_»cÚFžeName
.
em±y
())

802 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPicYuvRecTÝ
, 
pcPicYuvRecBÙtom
, 
CSC
, 
m_cÚfWšLeá
, 
m_cÚfWšRight
, 
m_cÚfWšTÝ
, 
m_cÚfWšBÙtom
, 
NUM_CHROMA_FORMAT
, 
m_isTÝF›ldFœ¡
 );

805 cÚ¡ 
	gAcûssUn™
& 
	gauTÝ
 = *(
™”B™¡»am
++);

806 cÚ¡ 
	gveùÜ
<
	gUIÁ
>& 
	g¡©sTÝ
 = 
wr™eAÂexB
(
b™¡»amFže
, 
auTÝ
);

807 
¿‹StsAccum
(
auTÝ
, 
¡©sTÝ
);

809 cÚ¡ 
	gAcûssUn™
& 
	gauBÙtom
 = *(
™”B™¡»am
++);

810 cÚ¡ 
	gveùÜ
<
	gUIÁ
>& 
	g¡©sBÙtom
 = 
wr™eAÂexB
(
b™¡»amFže
, 
auBÙtom
);

811 
¿‹StsAccum
(
auBÙtom
, 
¡©sBÙtom
);

816 
IÁ
 
	gi
;

818 
	gTComLi¡
<
	gTComPicYuv
*>::
™”©Ü
 
™”PicYuvRec
 = 
m_cLi¡PicYuvRec
.
’d
();

819 
	gli¡
<
	gAcûssUn™
>::
cÚ¡_™”©Ü
 
™”B™¡»am
 = 
acûssUn™s
.
begš
();

821  
	gi
 = 0; i < 
	giNumEncoded
; i++ )

823 --
	g™”PicYuvRec
;

826  
	gi
 = 0; i < 
	giNumEncoded
; i++ )

828 
TComPicYuv
* 
	gpcPicYuvRec
 = *(
™”PicYuvRec
++);

829 ià(!
	gm_»cÚFžeName
.
em±y
())

831 
	gm_cTVideoIOYuvRecÚFže
.
wr™e
Ð
pcPicYuvRec
, 
CSC
, 
m_cÚfWšLeá
, 
m_cÚfWšRight
, 
m_cÚfWšTÝ
, 
m_cÚfWšBÙtom
,

832 
NUM_CHROMA_FORMAT
, 
m_bClOuutVideoToRec709Rªge
 );

835 cÚ¡ 
	gAcûssUn™
& 
	gau
 = *(
™”B™¡»am
++);

836 cÚ¡ 
	gveùÜ
<
	gUIÁ
>& 
	g¡©s
 = 
wr™eAÂexB
(
b™¡»amFže
, 
au
);

837 
¿‹StsAccum
(
au
, 
¡©s
);

845 
Void
 
	gTAµEncTÝ
::
¿‹StsAccum
(cÚ¡ 
AcûssUn™
& 
au
, cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
ªÃxBsizes
)

847 
AcûssUn™
::
cÚ¡_™”©Ü
 
™_au
 = 
au
.
begš
();

848 
	gveùÜ
<
	gUIÁ
>::
cÚ¡_™”©Ü
 
™_¡©s
 = 
ªÃxBsizes
.
begš
();

850 ; 
	g™_au
 !ð
au
.
’d
(); it_au++, 
	g™_¡©s
++)

852 (*
	g™_au
)->
	gm_ÇlUn™Ty³
)

854 
	gNAL_UNIT_CODED_SLICE_TRAIL_R
:

855 
NAL_UNIT_CODED_SLICE_TRAIL_N
:

856 
NAL_UNIT_CODED_SLICE_TSA_R
:

857 
NAL_UNIT_CODED_SLICE_TSA_N
:

858 
NAL_UNIT_CODED_SLICE_STSA_R
:

859 
NAL_UNIT_CODED_SLICE_STSA_N
:

860 
NAL_UNIT_CODED_SLICE_BLA_W_LP
:

861 
NAL_UNIT_CODED_SLICE_BLA_W_RADL
:

862 
NAL_UNIT_CODED_SLICE_BLA_N_LP
:

863 
NAL_UNIT_CODED_SLICE_IDR_W_RADL
:

864 
NAL_UNIT_CODED_SLICE_IDR_N_LP
:

865 
NAL_UNIT_CODED_SLICE_CRA
:

866 
NAL_UNIT_CODED_SLICE_RADL_N
:

867 
NAL_UNIT_CODED_SLICE_RADL_R
:

868 
NAL_UNIT_CODED_SLICE_RASL_N
:

869 
NAL_UNIT_CODED_SLICE_RASL_R
:

870 
NAL_UNIT_VPS
:

871 
NAL_UNIT_SPS
:

872 
NAL_UNIT_PPS
:

873 
m_es£ÁŸlBy‹s
 +ð*
™_¡©s
;

879 
	gm_tÙ®By‹s
 +ð*
™_¡©s
;

883 
Void
 
	gTAµEncTÝ
::
	$´štR©eSumm¬y
()

885 
DoubË
 
time
 = (DoubËè
m_iF¿meRcvd
 / 
m_iF¿meR©e
 * 
m_‹mpÜ®Sub§m¶eR©io
;

886 
	`´štf
("By‹ wr™‹ÀtØfže: %u (%.3àkbps)\n", 
m_tÙ®By‹s
, 0.008 * m_tÙ®By‹ / 
time
);

887 ià(
m_summ¬yV”bo£Ãss
 > 0)

889 
	`´štf
("By‹ fÜ SPS/PPS/Sliû (Inþ. AÂex B): %u (%.3àkbps)\n", 
m_es£ÁŸlBy‹s
, 0.008 * m_es£ÁŸlBy‹ / 
time
);

891 
	}
}

893 
Void
 
	gTAµEncTÝ
::
	$´štChromaFÜm©
()

895 
¡d
::
cout
 << std::
	`£tw
(43) << "Input ChromaFormatIDC = ";

896 
m_IÅutChromaFÜm©IDC
)

898 
CHROMA_400
: 
¡d
::
cout
 << " 4:0:0"; ;

899 
CHROMA_420
: 
¡d
::
cout
 << " 4:2:0"; ;

900 
CHROMA_422
: 
¡d
::
cout
 << " 4:2:2"; ;

901 
CHROMA_444
: 
¡d
::
cout
 << " 4:4:4"; ;

903 
¡d
::
û¼
 << "Invalid";

904 
	`ex™
(1);

906 
¡d
::
cout
 << std::
’dl
;

908 
¡d
::
cout
 << std::
	`£tw
(43) << "Output (internal) ChromaFormatIDC = ";

909 
m_cTEncTÝ
.
	`g‘ChromaFÜm©Idc
())

911 
CHROMA_400
: 
¡d
::
cout
 << " 4:0:0"; ;

912 
CHROMA_420
: 
¡d
::
cout
 << " 4:2:0"; ;

913 
CHROMA_422
: 
¡d
::
cout
 << " 4:2:2"; ;

914 
CHROMA_444
: 
¡d
::
cout
 << " 4:4:4"; ;

916 
¡d
::
û¼
 << "Invalid";

917 
	`ex™
(1);

919 
¡d
::
cout
 << "\n" << std::
’dl
;

920 
	}
}

	@source/App/TAppEncoder/TAppEncTop.h

38 #iâdeà
__TAPPENCTOP__


39 
	#__TAPPENCTOP__


	)

41 
	~<li¡
>

42 
	~<o¡»am
>

44 
	~"TLibEncod”/TEncTÝ.h
"

45 
	~"Utž™›s/TVideoIOYuv.h
"

46 
	~"TLibCommÚ/AcûssUn™.h
"

47 
	~"TAµEncCfg.h
"

57 þas 
	cTAµEncTÝ
 : 
public
 
TAµEncCfg


59 
´iv©e
:

61 
TEncTÝ
 
m_cTEncTÝ
;

62 
TVideoIOYuv
 
	mm_cTVideoIOYuvIÅutFže
;

63 
TVideoIOYuv
 
	mm_cTVideoIOYuvRecÚFže
;

65 
	mTComLi¡
<
	mTComPicYuv
*> 
	mm_cLi¡PicYuvRec
;

67 
IÁ
 
	mm_iF¿meRcvd
;

69 
UIÁ
 
	mm_es£ÁŸlBy‹s
;

70 
UIÁ
 
	mm_tÙ®By‹s
;

72 
	m´Ùeùed
:

74 
Void
 
xC»©eLib
 ();

75 
Void
 
xIn™LibCfg
 ();

76 
Void
 
xIn™Lib
 (
BoÞ
 
isF›ldCodšg
);

77 
Void
 
xDe¡royLib
 ();

80 
Void
 
xG‘Bufãr
(
TComPicYuv
*& 
½cPicYuvRec
);

83 
Void
 
xD–‘eBufãr
 ();

86 
Void
 
xWr™eOuut
(
¡d
::
o¡»am
& 
b™¡»amFže
, 
IÁ
 
iNumEncoded
, cÚ¡ std::
li¡
<
AcûssUn™
>& 
acûssUn™s
);

87 
Void
 
¿‹StsAccum
(cÚ¡ 
AcûssUn™
& 
au
, cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
¡©s
);

88 
Void
 
´štR©eSumm¬y
();

89 
Void
 
´štChromaFÜm©
();

91 
	mpublic
:

92 
TAµEncTÝ
();

93 
	mvœtu®
 ~
TAµEncTÝ
();

95 
Void
 
’code
 ();

96 
	mTEncTÝ
& 
	$g‘TEncTÝ
 (è{  
m_cTEncTÝ
; }

98 
	}
};

	@source/App/TAppEncoder/encmain.cpp

38 
	~<time.h
>

39 
	~<io¡»am
>

40 
	~"TAµEncTÝ.h
"

41 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

46 
	~"../Lib/TLibCommÚ/Debug.h
"

52 
	$maš
(
¬gc
, * 
¬gv
[])

54 
TAµEncTÝ
 
cTAµEncTÝ
;

57 
	`årštf
Ð
¡dout
, "\n" );

58 
	`årštf
Ð
¡dout
, "HM soáw¬e: Encod” V”siÚ [%s] (šþudšg RExt)", 
NV_VERSION
 );

59 
	`årštf
Ð
¡dout
, 
NVM_ONOS
 );

60 
	`årštf
Ð
¡dout
, 
NVM_COMPILEDBY
 );

61 
	`årštf
Ð
¡dout
, 
NVM_BITS
 );

62 
	`årštf
Ð
¡dout
, "\n\n" );

65 
cTAµEncTÝ
.
	`ü—‹
();

68 
Œy


70 if(!
cTAµEncTÝ
.
	`·r£Cfg
Ð
¬gc
, 
¬gv
 ))

72 
cTAµEncTÝ
.
	`de¡roy
();

73 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


74 
EnvV¬
::
	`´štEnvV¬
();

79 
	`ÿtch
 (
df
::
´og¿m_ÝtiÚs_l™e
::
P¬£Fažu»
 &
e
)

81 
¡d
::
û¼
 << "E¼Ü…¬sšg o±iÚ \""<< 
e
.
¬g
 <<"\" w™h‡rgum’ˆ\""<<ƒ.
v®
 <<"\"." << std::
’dl
;

85 #ià
PRINT_MACRO_VALUES


86 
	`´štMaüoS‘tšgs
();

89 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


90 
EnvV¬
::
	`´štEnvV¬InU£
();

94 
DoubË
 
dResuÉ
;

95 
þock_t
 
lBefÜe
 = 
	`þock
();

98 
cTAµEncTÝ
.
	`’code
();

101 
dResuÉ
 = (
DoubË
)(
	`þock
()-
lBefÜe
è/ 
CLOCKS_PER_SEC
;

102 
	`´štf
("\ÀTÙ® Time: %12.3à£c.\n", 
dResuÉ
);

105 
cTAµEncTÝ
.
	`de¡roy
();

108 
	}
}

	@source/App/TAppMCTSExtractor/TAppMctsExtCfg.cpp

37 
	~<c¡dio
>

38 
	~<c¡ršg
>

39 
	~<¡ršg
>

40 
	~"TAµMùsExtCfg.h
"

41 
	~"Utž™›s/´og¿m_ÝtiÚs_l™e.h
"

43 #ifdeà
WIN32


44 
	#¡rdup
 
_¡rdup


	)

47 
usšg
 
Çme¥aû
 
	g¡d
;

48 
Çme¥aû
 
	gpo
 = 
df
::
´og¿m_ÝtiÚs_l™e
;

50 #ià
MCTS_EXTRACTION


61 
BoÞ
 
	gTAµMùsExtCfg
::
	$·r£Cfg
(
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[])

63 
BoÞ
 
do_h–p
 = 
çl£
;

65 
po
::
O±iÚs
 
Ýts
;

66 
Ýts
.
	`addO±iÚs
()

67 ("h–p", 
do_h–p
, 
çl£
, "this helpext")

68 ("c", 
po
::
·r£CÚfigFže
, "configuration file‚ame")

69 ("IÅutB™¡»amFže,i", 
m_šputB™¡»amFžeName
, 
	`¡ršg
(""), "Input bitstream file‚ame")

70 ("OuutB™¡»amFže,b", 
m_ouutB™¡»amFžeName
, 
	`¡ršg
(""), "Output subbitstream file‚ame")

71 ("T¬g‘MCTSIdx,d", 
m_rg‘MùsIdx
, 0, "Target MCTS idxo beƒxtracted. TargetMCTSIdx = 0…er default.")

74 
po
::
	`£tDeçuÉs
(
Ýts
);

75 
po
::
E¼ÜR•Ü‹r
 
”r
;

76 cÚ¡ 
li¡
<cÚ¡ 
TCh¬
*>& 
¬gv_unhªdËd
 = 
po
::
	`sÿnArgv
(
Ýts
, 
¬gc
, (cÚ¡ TCh¬**)
¬gv
, 
”r
);

78 
li¡
<cÚ¡ 
TCh¬
*>::
cÚ¡_™”©Ü
 
™
 = 
¬gv_unhªdËd
.
	`begš
(); iˆ!ð¬gv_unhªdËd.
	`’d
(); it++)

80 
	`årštf
(
¡d”r
, "UnhªdËd‡rgum’ˆignÜed: `%s'\n", *
™
);

83 ià(
¬gc
 =ð1 || 
do_h–p
)

85 
po
::
	`doH–p
(
cout
, 
Ýts
);

86  
çl£
;

89 ià(
m_šputB™¡»amFžeName
.
	`em±y
())

91 
	`årštf
(
¡d”r
, "No input file specified,‡borting\n");

92  
çl£
;

95  
Œue
;

96 
	}
}

	@source/App/TAppMCTSExtractor/TAppMctsExtCfg.h

37 #iâdeà
__TAPPMCTSEXTCFG__


38 
	#__TAPPMCTSEXTCFG__


	)

40 #ià
_MSC_VER
 > 1000

41 #´agm¨
Úû


44 
	~"TLibCommÚ/CommÚDef.h
"

45 
	~<veùÜ
>

47 #ià
MCTS_EXTRACTION


57 þas 
	cTAµMùsExtCfg


59 
	m´Ùeùed
:

60 
¡d
::
¡ršg
 
m_šputB™¡»amFžeName
;

61 
	m¡d
::
¡ršg
 
m_ouutB™¡»amFžeName
;

62 
IÁ
 
	mm_rg‘MùsIdx
;

64 
	mpublic
:

65 
	$TAµMùsExtCfg
()

66 : 
	`m_šputB™¡»amFžeName
()

67 , 
	`m_ouutB™¡»amFžeName
()

68 , 
	`m_rg‘MùsIdx
(-1)

73 
vœtu®
 ~
	$TAµMùsExtCfg
(è{
	}
}

75 
BoÞ
 
·r£Cfg
(
IÁ
 
¬gc
, 
TCh¬
* 
¬gv
[]);

	@source/App/TAppMCTSExtractor/TAppMctsExtTop.cpp

38 
	~<li¡
>

39 
	~<veùÜ
>

40 
	~<¡dio.h
>

41 
	~<fúŽ.h
>

42 
	~<as£¹.h
>

43 
	~<f¡»am
>

45 
	~"TAµMùsExtTÝ.h
"

46 
	~"TLibDecod”/AÂexB»ad.h
"

47 
	~"TLibDecod”/NAL»ad.h
"

48 
	~"TLibEncod”/NALwr™e.h
"

49 
	~"TLibCommÚ/SEI.h
"

51 #ià
MCTS_EXTRACTION


59 
	gTAµMùsExtTÝ
::
	$TAµMùsExtTÝ
()

61 
	}
}

64 
Void
 
TAµMùsExtTÝ
::
	$ü—‹
()

66 
m_mùsExŒaùiÚInfoP»£Á
 = 
çl£
;

67 
	}
}

69 
Void
 
	gTAµMùsExtTÝ
::
	$de¡roy
()

71 
m_šputB™¡»amFžeName
.
	`þ—r
();

72 
m_ouutB™¡»amFžeName
.
	`þ—r
();

73 
	}
}

87 
Void
 
	gTAµMùsExtTÝ
::
	$exŒaù
()

89 
if¡»am
 
	`b™¡»amFže
(
m_šputB™¡»amFžeName
.
	`c_¡r
(), if¡»am::
š
 | if¡»am::
bš¬y
);

90 ià(!
b™¡»amFže
)

92 
	`årštf
(
¡d”r
, "\nçžedØÝ’ iÅuˆb™¡»am fž`%s' fÜ„—dšg\n", 
m_šputB™¡»amFžeName
.
	`c_¡r
());

93 
	`ex™
(
EXIT_FAILURE
);

96 
IÅutBy‹SŒ—m
 
	`by‹¡»am
(
b™¡»amFže
);

99 
	`xC»©eMùsExtLib
();

100 
	`xIn™MùsExtLib
();

102 
IÁ
 
iSkF¿me
 = 0;

103 
IÁ
 
iPOCLa¡Di¥Ïy
 = 0;

105 
f¡»am
 
	`b™¡»amFžeOut
(
m_ouutB™¡»amFžeName
.
	`c_¡r
(), f¡»am::
bš¬y
 | f¡»am::
out
);

106 ià(!
b™¡»amFžeOut
)

108 
	`årštf
(
¡d”r
, "\nçžedØÝ’ ouuˆb™¡»am fž`%s' fÜ wr™šg\n", 
m_ouutB™¡»amFžeName
.
	`c_¡r
());

109 
	`ex™
(
EXIT_FAILURE
);

112 
AcûssUn™
 
outAcûssUn™
;

113 !!
b™¡»amFže
)

115 
¡»ampos
 
loÿtiÚ
 = 
b™¡»amFže
.
	`‹Îg
();

116 
AÂexBSts
 
¡©s
 = 
	`AÂexBSts
();

117 
IÅutNALUn™
 
šN®u
;

119 
	`by‹SŒ—mNALUn™
(
by‹¡»am
, 
šN®u
.
	`g‘B™¡»am
().
	`g‘Fifo
(), 
¡©s
);

121 
BoÞ
 
bNewPiùu»
 = 
çl£
;

122 ià(
šN®u
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`em±y
())

124 
	`årštf
(
¡d”r
, "Warning: Attemptoƒxtract‡nƒmpty NAL unit\n");

128 
	`»ad
(
šN®u
);

129 
m_pcSliû
 = 
m_cTDecTÝ
.
	`g‘ApcSliûPžÙ
();

131 
bNewPiùu»
 = 
m_cTDecTÝ
.
	`decode
(
šN®u
, 
iSkF¿me
, 
iPOCLa¡Di¥Ïy
, 
Œue
);

133 ià(
bNewPiùu»
)

135 
b™¡»amFže
.
	`þ—r
();

136 
b™¡»amFže
.
	`£ekg
(
loÿtiÚ
 - 
	`¡»amoff
(3));

137 
by‹¡»am
.
	`»£t
();

141 ià((
bNewPiùu»
 || !
b™¡»amFže
 || 
šN®u
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
) &&

142 !
m_cTDecTÝ
.
	`g‘Fœ¡SliûInSequ’û
())

144 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`£tRecÚM¬k
(
Œue
);

145 ià(
b™¡»amFže
 || 
šN®u
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_EOS
)

147 
m_cTDecTÝ
.
	`£tFœ¡SliûInPiùu»
(
Œue
);

151 ià((
šN®u
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_VPS
 || inN®u.m_ÇlUn™Ty³ =ð
NAL_UNIT_SPS
 ||

152 
šN®u
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_PPS
))

156 ià(!
m_mùsExŒaùiÚInfoP»£Á
 && 
šN®u
.
	`isSei
())

159 
m_cTDecTÝ
.
	`xP¬£P»fixSEImes§ges
();

160 ià(!
m_cTDecTÝ
.
	`g‘SEIs
().
	`em±y
())

162 
	`xExŒaùSu™abËP¬am‘”S‘s
(

163 
	`g‘SeisByTy³
(
m_cTDecTÝ
.
	`g‘SEIs
(), 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
),

164 
	`g‘SeisByTy³
(
m_cTDecTÝ
.
	`g‘SEIs
(), 
SEI
::
MCTS_EXTRACTION_INFO_SET
),

165 
outAcûssUn™
);

168 ià(!
bNewPiùu»
 && 
m_mùsExŒaùiÚInfoP»£Á
 && 
šN®u
.
	`isSliû
(è&& 
	`xIsN®uW™hšMCTSS‘
(
m_rg‘MùsIdx
))

173 
UIÁ
 
numCtusInOuutPiùu»s
 = 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
()->
	`g‘TComTže
(
m_rg‘MùsIdx
)->
	`g‘TžeHeightInCtus
(è* m_cTDecTÝ.g‘PcPic()->g‘PicSym()->g‘TComTže(m_rg‘MùsIdx)->
	`g‘TžeWidthInCtus
();

174 
UIÁ
 
numCtusInIÅutPiùu»s
 = 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘Numb”OfCtusInF¿me
();

176 
m_cSliûPicSym
.
	`£tNumb”OfCtusInF¿me
(
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
(), 
numCtusInOuutPiùu»s
);

177 
m_pcSliû
->
	`£tPic
(
m_cTDecTÝ
.
	`g‘PcPic
());

178 
m_pcSliû
->
	`£tSliûSegm’tCurS¹CtuTsAddr
(0);

179 
OuutNALUn™
 
	`outN®u
(
m_pcSliû
->
	`g‘N®Un™Ty³
(), m_pcSliû->
	`g‘TLay”
());

180 
m_cEÁrÝyCod”
.
	`£tEÁrÝyCod”
(&
m_cCavlcCod”
);

181 
m_cEÁrÝyCod”
.
	`£tB™¡»am
(&
outN®u
.
m_B™¡»am
);

182 
m_cEÁrÝyCod”
.
	`’codeSliûH—d”
(
m_pcSliû
);

185 
	`xIÅutToOuutSliûN®uCÚv”siÚ
(
šN®u
, 
outN®u
, 
m_pcSliû
);

188 
outAcûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
outN®u
));

189 
	`xWr™eOuut
(
b™¡»amFžeOut
, 
outAcûssUn™
);

190 
outAcûssUn™
.
	`þ—r
();

193 
m_cSliûPicSym
.
	`£tNumb”OfCtusInF¿me
(
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
(), 
numCtusInIÅutPiùu»s
);

196 
TCh¬
 
c
 = (
m_pcSliû
->
	`isIÁ¿
(è? 'I' : m_pcSliû->
	`isIÁ”P
() ? 'P' : 'B');

197 ià(!
m_pcSliû
->
	`isReã»nûd
())

199 
c
 += 32;

201 
	`´štf
("POC %4d TId: %1d ( %c-SLICE, QP%3d ) ", 
m_pcSliû
->
	`g‘POC
(),

202 
m_pcSliû
->
	`g‘TLay”
(),

203 
c
,

204 
m_pcSliû
->
	`g‘SliûQp
());

205 
	`´štf
(" %10d b™s\n", ()
šN®u
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`size
());

209 ià(!
m_mùsExŒaùiÚInfoP»£Á
)

211 
	`årštf
(
¡d”r
, "\nIÅuˆb™¡»am fž`%s' dÛ nÙ cÚš MCTSƒxŒaùiÚ infÜm©iÚ fÜ¬g‘ MCTS index %d\n", 
m_šputB™¡»amFžeName
.
	`c_¡r
(), 
m_rg‘MùsIdx
);

215 
m_cTDecTÝ
.
	`d–‘ePicBufãr
();

218 
	`xDe¡royMùsExtLib
();

220 
	}
}

227 
Void
 
	gTAµMùsExtTÝ
::
	$xC»©eMùsExtLib
()

230 
m_cTDecTÝ
.
	`ü—‹
();

231 
	}
}

233 
Void
 
	gTAµMùsExtTÝ
::
	$xDe¡royMùsExtLib
()

236 
m_cTDecTÝ
.
	`de¡roy
();

237 
	}
}

239 
Void
 
	gTAµMùsExtTÝ
::
	$xIn™MùsExtLib
()

242 
m_cTDecTÝ
.
	`š™
();

243 
	}
}

246 
Void
 
	gTAµMùsExtTÝ
::
	$xExŒaùSu™abËP¬am‘”S‘s
(
SEIMes§ges
 
SEIMùsSEIs
, SEIMes§ge 
SEIMùsEisSEIs
, 
AcûssUn™
 &
acûssUn™
)

248 ià(
SEIMùsSEIs
.
	`size
(è&& 
SEIMùsEisSEIs
.size())

250 
SEIMCTSExŒaùiÚInfoS‘
* 
SEIMCTSExŒaùiÚInfoS‘SEI
 = (SEIMCTSExŒaùiÚInfoS‘*è*(
SEIMùsEisSEIs
.
	`begš
());

251 
¡d
::
veùÜ
<
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
>::
™”©Ü
 
EisI‹r
 = 
SEIMCTSExŒaùiÚInfoS‘SEI
->
m_MCTSExŒaùiÚInfoS‘s
.
	`begš
(); EisI‹¸!ðSEIMCTSExŒaùiÚInfoS‘SEI->m_MCTSExŒaùiÚInfoS‘s.
	`’d
(); EisIter++)

253 
j
 = 0; j < 
EisI‹r
->
m_idxOfMùsInS‘
.
	`size
(è&& !
m_mùsExŒaùiÚInfoP»£Á
; j++)

255 
k
 = 0; k < 
EisI‹r
->
m_idxOfMùsInS‘
[
j
].
	`size
(è&& !
m_mùsExŒaùiÚInfoP»£Á
; k++)

257 ià(
EisI‹r
->
m_idxOfMùsInS‘
[
j
][
k
] =ð
m_rg‘MùsIdx
)

259 
¡d
::
veùÜ
<
TComIÅutB™¡»am
> 
vps_rb¥s
;

260 
vps_rb¥s
.
	`»size
(
EisI‹r
->
m_vpsRb¥D©a
.
	`size
());

261 
jj
 = 0; jj < 
EisI‹r
->
m_vpsRb¥D©a
.
	`size
(); jj++)

263 
kk
 = 0; kk < 
EisI‹r
->
m_vpsRb¥D©aL’gth
[
jj
]; kk++)

265 
vps_rb¥s
[
jj
].
	`g‘Fifo
().
	`push_back
(
EisI‹r
->
m_vpsRb¥D©a
[jj][
kk
]);

267 
OuutNALUn™
 
	`vpsout
(
NAL_UNIT_VPS
, 0, 0);

268 
vpsout
.
m_B™¡»am
.
	`g‘FIFO
(èð
vps_rb¥s
[
jj
].
	`g‘Fifo
();

269 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
vpsout
));

272 
¡d
::
veùÜ
<
TComIÅutB™¡»am
> 
¥s_rb¥s
;

273 
¥s_rb¥s
.
	`»size
(
EisI‹r
->
m_¥sRb¥D©a
.
	`size
());

274 
jj
 = 0; jj < 
EisI‹r
->
m_¥sRb¥D©a
.
	`size
(); jj++)

276 
kk
 = 0; kk < 
EisI‹r
->
m_¥sRb¥D©aL’gth
[
jj
]; kk++)

278 
¥s_rb¥s
[
jj
].
	`g‘Fifo
().
	`push_back
(
EisI‹r
->
m_¥sRb¥D©a
[jj][
kk
]);

280 
OuutNALUn™
 
	`¥sout
(
NAL_UNIT_SPS
, 0, 0);

281 
¥sout
.
m_B™¡»am
.
	`g‘FIFO
(èð
¥s_rb¥s
[
jj
].
	`g‘Fifo
();

282 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
¥sout
));

285 
¡d
::
veùÜ
<
TComIÅutB™¡»am
> 
µs_rb¥s
;

286 
µs_rb¥s
.
	`»size
(
EisI‹r
->
m_µsRb¥D©a
.
	`size
());

287 
jj
 = 0; jj < 
EisI‹r
->
m_µsRb¥D©a
.
	`size
(); jj++)

289 
kk
 = 0; kk < 
EisI‹r
->
m_µsRb¥D©aL’gth
[
jj
]; kk++)

291 
µs_rb¥s
[
jj
].
	`g‘Fifo
().
	`push_back
(
EisI‹r
->
m_µsRb¥D©a
[jj][
kk
]);

293 
OuutNALUn™
 
	`µsout
(
NAL_UNIT_PPS
, 0, 0);

294 
µsout
.
m_B™¡»am
.
	`g‘FIFO
(èð
µs_rb¥s
[
jj
].
	`g‘Fifo
();

295 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
µsout
));

297 
TComSPS
* 
Ã¡edSps
 = 
Ãw
 
	`TComSPS
();

298 
m_cEÁrÝyDecod”
.
	`£tEÁrÝyDecod”
(&
m_cCavlcDecod”
);

299 
m_cEÁrÝyDecod”
.
	`£tB™¡»am
(&
¥s_rb¥s
[0]);

300 
m_cEÁrÝyDecod”
.
	`decodeSPS
(
Ã¡edSps
);

302 
	`´štf
("MCTSƒxŒaùiÚ infØfÜ¬g‘ MCTS index %d found\n", 
m_rg‘MùsIdx
);

303 
	`´štf
("Ouuˆb™¡»am„esÞutiÚ: %dx%d\n\n", 
Ã¡edSps
->
	`g‘PicWidthInLumaSam¶es
(),‚e¡edSps->
	`g‘PicHeightInLumaSam¶es
());

305 
m_mùsExŒaùiÚInfoP»£Á
 = 
Œue
;

311 
	}
}

314 
BoÞ
 
	gTAµMùsExtTÝ
::
	$xIsN®uW™hšMCTSS‘
(
IÁ
 
mùs_id
)

316 
UIÁ
 
cu¼N®uTSSliûSegAddr
 = 
m_pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
();

317 
UIÁ
 
fœ¡CtuAddrTSInMùs
 = 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
(m_cTDecTÝ.g‘PcPic()->g‘PicSym()->
	`g‘TComTže
(
m_rg‘MùsIdx
)->
	`g‘Fœ¡CtuRsAddr
());

318 
UIÁ
 
Ï¡CtuAddrTSInMùs
 = -1;

320 ià(
mùs_id
 < (
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
()->
	`g‘NumTžes
() - 1))

322 
Ï¡CtuAddrTSInMùs
 = 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
(m_cTDecTÝ.g‘PcPic()->g‘PicSym()->
	`g‘TComTže
(
m_rg‘MùsIdx
 + 1)->
	`g‘Fœ¡CtuRsAddr
()) - 1;

326 
Ï¡CtuAddrTSInMùs
 = 
m_cTDecTÝ
.
	`g‘PcPic
()->
	`g‘Numb”OfCtusInF¿me
() - 1;

329  (
cu¼N®uTSSliûSegAddr
 >ð
fœ¡CtuAddrTSInMùs
 && cu¼N®uTSSliûSegAdd¸<ð
Ï¡CtuAddrTSInMùs
);

330 
	}
}

333 
Void
 
	gTAµMùsExtTÝ
::
	$xIÅutToOuutSliûN®uCÚv”siÚ
(
IÅutNALUn™
 &
šN®u
, 
OuutNALUn™
 &
outN®u
, 
TComSliû
* 
curSliû
)

335 cÚ¡ 
UIÁ
 
uiNumSub¡»ams
 = 
curSliû
->
	`g‘Numb”OfSub¡»amSizes
() + 1;

337 
TComIÅutB™¡»am
 **
µcSub¡»ams
 = 
NULL
;

338 
µcSub¡»ams
 = 
Ãw
 
TComIÅutB™¡»am
*[
uiNumSub¡»ams
];

339 
UIÁ
 
ui
 = 0; u˜< 
uiNumSub¡»ams
; ui++)

341 
µcSub¡»ams
[
ui
] = 
šN®u
.
	`g‘B™¡»am
().
	`exŒaùSub¡»am
(u˜+ 1 < 
uiNumSub¡»ams
 ? (
curSliû
->
	`g‘Sub¡»amSize
(uiè<< 3è: inN®u.g‘B™¡»am().
	`g‘NumB™sLeá
());

344 
TComOuutB™¡»am
 *
pcB™¡»amRedœeù
;

345 
pcB™¡»amRedœeù
 = 
Ãw
 
TComOuutB™¡»am
;

348 
TComOuutB™¡»am
 *
pcOut
 = 
pcB™¡»amRedœeù
;

349 
¡d
::
veùÜ
<
TComOuutB™¡»am
> 
	`sub¡»amsOut
(
uiNumSub¡»ams
);

351 
UIÁ
 
ui
 = 0; u˜< 
uiNumSub¡»ams
; ui++)

353 
¡d
::
veùÜ
<
ušt8_t
> &
bufIn
 = 
µcSub¡»ams
[
ui
]->
	`g‘Fifo
();

354 
¡d
::
veùÜ
<
ušt8_t
> &
bufOut
 = 
sub¡»amsOut
[
ui
].
	`g‘FIFO
();

355 
bufOut
.
	`»size
(
bufIn
.
	`size
());

356 
bufOut
 = 
bufIn
;

357 
pcOut
->
	`addSub¡»am
(&(
sub¡»amsOut
[
ui
]));

361 
outN®u
.
m_B™¡»am
.
	`wr™eBy‹Alignm’t
();

364 ià(
pcOut
->
	`g‘Numb”OfWr™‹nB™s
() > 0)

366 
outN®u
.
m_B™¡»am
.
	`addSub¡»am
(
pcOut
);

370 
UIÁ
 
ui
 = 0; u˜< 
uiNumSub¡»ams
; ui++)

372 
d–‘e
 
µcSub¡»ams
[
ui
];

374 
d–‘e
[] 
µcSub¡»ams
;

375 
d–‘e
 
pcB™¡»amRedœeù
;

379 
	}
}

381 
Void
 
	gTAµMùsExtTÝ
::
	$xWr™eOuut
(
¡d
::
o¡»am
& 
b™¡»amFže
, cÚ¡ 
AcûssUn™
 
acûssUn™
)

383 
AcûssUn™
::
cÚ¡_™”©Ü
 
™
 = 
acûssUn™
.
	`begš
(); iˆ!ðacûssUn™.
	`’d
(); it++)

385 cÚ¡ 
NALUn™EBSP
& 
Çlu
 = **
™
;

387 cÚ¡ 
UCh¬
 
¡¬t_code_´efix
[] = { 0,0,0,1 };

388 ià(
™
 =ð
acûssUn™
.
	`begš
(è|| 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_VPS
 ||‚®u.m_ÇlUn™Ty³ =ð
NAL_UNIT_SPS
 ||‚®u.m_ÇlUn™Ty³ =ð
NAL_UNIT_PPS
)

398 
b™¡»amFže
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
¡¬t_code_´efix
), 4);

402 
b™¡»amFže
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
¡¬t_code_´efix
 + 1), 3);

404 
b™¡»amFže
 << 
Çlu
.
m_ÇlUn™D©a
.
	`¡r
();

407 
	}
}

	@source/App/TAppMCTSExtractor/TAppMctsExtTop.h

38 #iâdeà
__TAPPMCTSEXTTOP__


39 
	#__TAPPMCTSEXTTOP__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibDecod”/TDecTÝ.h
"

46 
	~"TLibEncod”/TEncTÝ.h
"

47 
	~"TLibCommÚ/AcûssUn™.h
"

49 #ià
MCTS_EXTRACTION


50 
	~"TAµMùsExtCfg.h
"

60 þas 
	cTAµMùsExtTÝ
 : 
public
 
TAµMùsExtCfg


62 
´iv©e
:

64 
TDecTÝ
 
m_cTDecTÝ
;

65 
TComSliû
* 
	mm_pcSliû
;

66 
TDecEÁrÝy
 
	mm_cEÁrÝyDecod”
;

67 
TDecCavlc
 
	mm_cCavlcDecod”
;

68 
TEncEÁrÝy
 
	mm_cEÁrÝyCod”
;

69 
TEncCavlc
 
	mm_cCavlcCod”
;

70 
MùsExŒaùÜTComPicSym
 
	mm_cSliûPicSym
;

72 
BoÞ
 
	mm_mùsExŒaùiÚInfoP»£Á
;

74 
	mpublic
:

75 
TAµMùsExtTÝ
();

76 
	mvœtu®
 ~
	$TAµMùsExtTÝ
() {};

79 
Void
 
	`ü—‹
();

80 
Void
 
	`de¡roy
();

81 
Void
 
	`exŒaù
();

83 
´Ùeùed
:

84 
Void
 
	`xC»©eMùsExtLib
();

85 
Void
 
	`xDe¡royMùsExtLib
();

86 
Void
 
	`xIn™MùsExtLib
();

88 
Void
 
	`xExŒaùSu™abËP¬am‘”S‘s
(
SEIMes§ges
 
SEIMùsSEIs
, SEIMes§ge 
SEIMùsEisSEIs
, 
AcûssUn™
 &
acûssUn™
);

89 
BoÞ
 
	`xIsN®uW™hšMCTSS‘
(
IÁ
 
MCTS_id
);

90 
Void
 
	`xIÅutToOuutSliûN®uCÚv”siÚ
(
IÅutNALUn™
 &
šN®u
, 
OuutNALUn™
 &
outN®u
, 
TComSliû
* 
curSliû
);

91 
Void
 
	`xWr™eOuut
(
¡d
::
o¡»am
& 
b™¡»amFže
, cÚ¡ 
AcûssUn™
 
acûssUn™
);

92 
	}
};

	@source/App/TAppMCTSExtractor/mctsExtmain.cpp

38 
	~<¡dlib.h
>

39 
	~<¡dio.h
>

40 
	~<time.h
>

41 
	~"TAµMùsExtTÝ.h
"

50 
	$maš
(
¬gc
, * 
¬gv
[])

52 
IÁ
 
»tuºCode
 = 
EXIT_SUCCESS
;

54 #ià
MCTS_EXTRACTION


55 
TAµMùsExtTÝ
 
cTAµMùsExtTÝ
;

58 
	`årštf
(
¡dout
, "\n");

59 
	`årštf
(
¡dout
, "HM soáw¬e: MCTS ExŒaùÜ V”siÚ [%s] ", 
NV_VERSION
);

60 
	`årštf
(
¡dout
, 
NVM_ONOS
);

61 
	`årštf
(
¡dout
, 
NVM_COMPILEDBY
);

62 
	`årštf
(
¡dout
, 
NVM_BITS
);

63 
	`årštf
(
¡dout
, "\n");

66 
cTAµMùsExtTÝ
.
	`ü—‹
();

69 ià(!
cTAµMùsExtTÝ
.
	`·r£Cfg
(
¬gc
, 
¬gv
))

71 
cTAµMùsExtTÝ
.
	`de¡roy
();

72 
»tuºCode
 = 
EXIT_FAILURE
;

73  
»tuºCode
;

77 
DoubË
 
dResuÉ
;

78 
þock_t
 
lBefÜe
 = 
	`þock
();

81 
cTAµMùsExtTÝ
.
	`exŒaù
();

84 
dResuÉ
 = (
DoubË
)(
	`þock
(è- 
lBefÜe
è/ 
CLOCKS_PER_SEC
;

85 
	`´štf
("\ÀTÙ® Time: %12.3à£c.\n", 
dResuÉ
);

88 
cTAµMùsExtTÝ
.
	`de¡roy
();

90  
»tuºCode
;

91 
	}
}

	@source/App/utils/BitrateTargeting/ExtractBitrates.cpp

34 
	~"ExŒaùB™¿‹s.h
"

35 
	~<¡ršg
>

36 
	~<s¡»am
>

37 
	~<ÿs£¹
>

38 
	~<lim™s
>

39 
	~<m­
>

41 
	gÇme¥aû


44 þas 
	cT®ly


46 
	gpublic
:

49 
T®ly
Ð): 
m_sum
Ð0.0 ), 
m_numSliûs
( 0 ) { }

52 
add
Ð
š
 ) { ++
	gm_numSliûs
; 
	gm_sum
 += in; }

55 
av”age
ÐècÚ¡ {  
	gm_sum
 / ( )
	gm_numSliûs
; }

57 
	g´iv©e
:

58 
m_sum
;

59 
	gm_numSliûs
;

67 
	$ignÜeUpTo
ÐcÚ¡ 
¡d
::
¡ršg
& 
lše
, std::
i¡»am
& 
iLše
, 
ch¬aù”
 )

69  
iLše
.
	`good
Ðè&& 
ch¬aù”
 !ðiLše.
	`g‘
( ) )

71 ifÐ!
iLše
.
	`good
( ) )

73 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

75 
	}
}

81 
	g¡d
::
m­
< , > 
	$exŒaùB™¿‹sFÜQPs
Ð
¡d
::
i¡»am
& 
i
 )

83 
¡d
::
m­
< , 
T®ly
 > 
ÎyM­
;

85  
i
.
	`good
( ) )

88 
¡d
::
¡ršg
 
lše
;

89 
¡d
::
	`g‘lše
Ð
i
, 
lše
 );

90 
¡d
::
i¡ršg¡»am
 
	`iLše
Ð
lše
 );

91 ifÐ!
iLše
.
	`good
( ) )

97 ifÐ
iLše
.
	`g‘
( ) != 'P' )

101 ifÐ!
iLše
.
	`good
( ) )

105 ifÐ
iLše
.
	`g‘
( ) != 'O' )

109 ifÐ!
iLše
.
	`good
( ) )

113 ifÐ
iLše
.
	`g‘
( ) != 'C' )

117 ifÐ!
iLše
.
	`good
( ) )

119 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

122 
	`ignÜeUpTo
Ð
lše
, 
iLše
, '(' );

124 ifÐ
iLše
.
	`g‘
( ) != ' ' )

126 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

128 ifÐ!
iLše
.
	`good
( ) )

130 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

133 ifÐ'I' =ð
iLše
.
	`g‘
( ) )

137 ifÐ!
iLše
.
	`good
( ) )

139 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

142 
	`ignÜeUpTo
Ð
lše
, 
iLše
, ' ' );

143 
	`ignÜeUpTo
Ð
lše
, 
iLše
, ' ' );

146 
qpIndexLÚg
;

147 
iLše
 >> 
qpIndexLÚg
;

148 ifÐÐ)
¡d
::
num”ic_lim™s
< >::
	`max
Ðè< 
qpIndexLÚg
 )

150 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

152 
	`qpIndex
ÐÐ)
qpIndexLÚg
 );

153 ifÐ!
iLše
.
	`good
( ) )

155 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

158 
	`ignÜeUpTo
Ð
lše
, 
iLše
, ')' );

159 
	`ignÜeUpTo
Ð
lše
, 
iLše
, ' ' );

162 
b™sULÚg
;

163 
iLše
 >> 
b™sULÚg
;

164 ifÐ!
iLše
.
	`good
( ) )

166 
throw
 
	`POCP¬£Exû±iÚ
Ð
lše
 );

170 
¡d
::
m­
< , 
T®ly
 >::
™”©Ü
 
	`™”
Ð
ÎyM­
.
	`fšd
Ð
qpIndex
 ) );

171 ifÐ
ÎyM­
.
	`’d
Ðè=ð
™”
 )

173 
ÎyM­
[ 
qpIndex
 ] = 
	`T®ly
( );

174 
™”
 = 
ÎyM­
.
	`fšd
Ð
qpIndex
 );

176 
	`as£¹
Ð
™”
 !ð
ÎyM­
.
	`’d
( ) );

178 
™”
->
£cÚd
.
	`add
ÐÐ)
b™sULÚg
 );

182 
¡d
::
m­
< , > 
»suÉ
;

183  
¡d
::
m­
< , 
T®ly
 >::
cÚ¡_™”©Ü
 
	`™”
Ð
ÎyM­
.
	`begš
Ðè); 
™”
 !ðÎyM­.
	`’d
( ); ++iter )

185 
»suÉ
[ 
™”
->
fœ¡
 ] = i‹r->
£cÚd
.
	`av”age
( );

187  
»suÉ
;

188 
	}
}

191 
	g¡d
::
veùÜ
< > 
	$exŒaùB™¿‹sFÜTempÜ®Lay”s
Ð
¡d
::
i¡»am
& 
i
 )

193 
¡d
::
veùÜ
< > 
»suÉ
;

195 
¡d
::
m­
< , > 
	`b™¿‹sFÜQPsM­
Ð
	`exŒaùB™¿‹sFÜQPs
Ð
i
 ) );

196 ifÐ!
b™¿‹sFÜQPsM­
.
	`em±y
( ) )

198 
	`ex³ùedNextQPIndex
Ð
b™¿‹sFÜQPsM­
.
	`begš
Ð)->
fœ¡
 );

200  
¡d
::
m­
< , >::
cÚ¡_™”©Ü
 
	`i
Ð
b™¿‹sFÜQPsM­
.
	`begš
Ðè); 
i
 !ðb™¿‹sFÜQPsM­.
	`’d
( ); ++i )

202 ifÐ
i
->
fœ¡
 !ð
ex³ùedNextQPIndex
 )

204 
throw
 
	`NÚCÚtiguousQPS‘Exû±iÚ
( );

206 ++
ex³ùedNextQPIndex
;

207 
»suÉ
.
	`push_back
Ð
i
->
£cÚd
 );

211  
»suÉ
;

212 
	}
}

	@source/App/utils/BitrateTargeting/ExtractBitrates.h

34 #iâdeà
__EXTRACTBITRATES__


35 
	#__EXTRACTBITRATES__


	)

37 
	~"RuÁimeE¼Ü.h
"

38 
	~<veùÜ
>

41 þas 
	cPOCP¬£Exû±iÚ
: 
public
 
RuÁimeE¼Ü


43 
public
:

44 
	$POCP¬£Exû±iÚ
ÐcÚ¡ 
¡d
::
¡ršg
& 
pocLše
 ): 
	$m_pocLše
Ð
pocLše
 ) { }

45 
vœtu®
 ~
	$POCP¬£Exû±iÚ
Ðè
	$throw
 ( ) { 
	}
}

47 
´Ùeùed
:

48 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "POC…¬£ƒxû±iÚ: " << 
m_pocLše
; 
	}
}

50 
	g´iv©e
:

51 
¡d
::
¡ršg
 
m_pocLše
;

55 þas 
	cNÚCÚtiguousQPS‘Exû±iÚ
: 
public
 
RuÁimeE¼Ü


57 
public
:

58 
vœtu®
 ~
	$NÚCÚtiguousQPS‘Exû±iÚ
Ðè
	$throw
( ) { }

60 
´Ùeùed
:

61 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "NÚ-cÚtiguou QP s‘ƒxû±iÚ"; 
	}
}

69 
	g¡d
::
veùÜ
< > 
exŒaùB™¿‹sFÜTempÜ®Lay”s
Ð
¡d
::
i¡»am
& 
i
 );

	@source/App/utils/BitrateTargeting/ExtractBitratesMain.cpp

34 
	~<io¡»am
>

35 
	~<ÿs£¹
>

36 
	~"ExŒaùB™¿‹s.h
"

42 
	$»¶aûW™hE
Ð
¡d
::
¡ršg
 &
out
, cÚ¡ std::¡ršg& 
toFšd
 )

44 
	`as£¹
Ð2 =ð
toFšd
.
	`size
( ) );

45 
	`as£¹
Ð'e' =ð
toFšd
[ 0 ] );

47 
¡d
::
¡ršg
::
size_ty³
 
	`pos
Ð
out
.
	`fšd
Ð
toFšd
 ) );

48 
	`as£¹
Ð
pos
 !ð
¡d
::
¡ršg
::
Åos
 );

49 
out
.
	`”a£
Ð
pos
 + 1, 1 );

50 
	}
}

53 
	$ouutDoubË
Ð
¡d
::
o¡»am
& 
Ëá
, 
right
 )

55 
¡d
::
o¡ršg¡»am
 
oss
;

56 
oss
.
	`´ecisiÚ
( 6 );

57 
oss
 << 
¡d
::
sc›Áific
 << 
right
;

58 
¡d
::
¡ršg
 
	`s
Ð
oss
.
	`¡r
( ) );

60 
	`»¶aûW™hE
Ð
s
, "e+" );

61 
	`»¶aûW™hE
Ð
s
, "e0" );

63 
Ëá
 << 
s
;

64 
	}
}

66 
	$maš
( , ** )

68 
Œy


70 
¡d
::
veùÜ
< > 
	`»suÉ
Ð
	`exŒaùB™¿‹sFÜTempÜ®Lay”s
Ð¡d::
cš
 ) );

73 ifÐ0 < 
»suÉ
.
	`size
( ) )

75 
¡d
::
veùÜ
< >::
cÚ¡_™”©Ü
 
	`™”
Ð
»suÉ
.
	`begš
( ) );

76 
	`ouutDoubË
Ð
¡d
::
cout
, *
™”
 );

79 ++
™”
;

80 ifÐ
»suÉ
.
	`’d
Ðè=ð
™”
 )

86 
¡d
::
cout
 << " ";

87 
	`ouutDoubË
Ð
¡d
::
cout
, *
™”
 );

94 
	`ÿtch
Ð
¡d
::
exû±iÚ
& 
e
 )

96 
¡d
::
û¼
 << 
e
.
	`wh©
Ðè<< std::
’dl
;

99 
	}
}

	@source/App/utils/BitrateTargeting/GuessLambdaModifiers.cpp

34 
	~"GuessLambdaModif›rs.h
"

35 
	~<lim™s
>

36 
	~<ÿs£¹
>

37 
	~<cm©h
>

39 
	gÇme¥aû


45 
·r£B™¿‹VeùÜ
Ð
¡d
::
i¡»am
& 
Ëá
, std::
veùÜ
< >& 
right
 )

47 
as£¹
Ð
right
.
em±y
( ) );

51 
as£¹
Ð
Ëá
.
good
( ) );

53 
	gb™¿‹
;

54 
	gËá
 >> 
	gb™¿‹
;

55 ifÐ
	gËá
.
çž
( ) )

59 ifÐ
	gb™¿‹
 <= ( )0.0 )

61 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

65 
	gright
.
push_back
Ð
b™¿‹
 );

67 ifÐ!
	gËá
.
good
( ) )

72 ifÐ
	gËá
.
³ek
( ) == ' ' )

74 
Ëá
.
ignÜe
( );

89 
šüem’tLambdaModif›r
(

90 
š™ŸlAdju¡m’tP¬am‘”
,

91 
rg‘B™¿‹
,

92 cÚ¡ 
Pošt
& 
´eviousPošt
 )

94 
as£¹
ÐÐ)0.0 < 
´eviousPošt
.
ÏmbdaModif›r
 );

95 
as£¹
ÐÐ)0.0 < 
´eviousPošt
.
b™¿‹
 );

97 
exŒ­Þ©ed
Ð
´eviousPošt
.
ÏmbdaModif›r
 * 
rg‘B™¿‹
 /…»viousPošt.
b™¿‹
 );

98  
	g´eviousPošt
.
	gÏmbdaModif›r
 + 
	gš™ŸlAdju¡m’tP¬am‘”
 * ( 
	gexŒ­Þ©ed
 -…reviousPoint.lambdaModifier );

102 
	$pÞ©eLambdaModif›r
Ð
rg‘B™¿‹
, cÚ¡ 
Pošt
& 
pošt1
, cÚ¡ Pošt& 
pošt2
 )

104 
	`as£¹
Ð0.0 < 
pošt1
.
ÏmbdaModif›r
 );

105 
	`as£¹
Ð0.0 < 
pošt2
.
ÏmbdaModif›r
 );

106 
	`as£¹
Ð0.0 < 
pošt1
.
b™¿‹
 );

107 
	`as£¹
Ð0.0 < 
pošt2
.
b™¿‹
 );

108 
	`as£¹
Ð
pošt1
.
ÏmbdaModif›r
 !ð
pošt2
.lambdaModifier );

109 
	`as£¹
Ð
pošt1
.
b™¿‹
 !ð
pošt2
.bitrate );

112 
	`d’omš©Ü
Ð
pošt1
.
b™¿‹
 - 
pošt2
.bitrate );

113 
	`»suÉ
Ð
pošt1
.
ÏmbdaModif›r


114 + ( 
pošt1
.
ÏmbdaModif›r
 - 
pošt2
.ÏmbdaModif›¸è/ 
d’omš©Ü
 * ( 
rg‘B™¿‹
 -…ošt1.
b™¿‹
 ) );

115  
»suÉ
;

116 
	}
}

118 
guessLambdaModif›r
(

119 
š™ŸlAdju¡m’tP¬am‘”
,

120 
rg‘B™¿‹
,

121 cÚ¡ 
¡d
::
li¡
< 
Pošt
 >& 
poštLi¡
,

122 
š‹rDam³nšgFaùÜ
 )

124 
as£¹
ÐÐ)0.0 < 
š‹rDam³nšgFaùÜ
 );

125 
as£¹
Ð
š‹rDam³nšgFaùÜ
 <= ( )1.0 );

126 
as£¹
Ð!
poštLi¡
.
em±y
( ) );

128 
	g´–imš¬yResuÉ
;

130 ifÐ1 =ð
poštLi¡
.
size
( ) )

132 
´–imš¬yResuÉ
 = 
šüem’tLambdaModif›r
Ð
š™ŸlAdju¡m’tP¬am‘”
, 
rg‘B™¿‹
, 
poštLi¡
.
back
( ) );

136 
	g¡d
::
li¡
< 
Pošt
 >::
cÚ¡_»v”£_™”©Ü
 
i
Ð
poštLi¡
.
rbegš
( ) );

137 
Pošt
 
	gpošt1
 = *
i
;

138 ++
	gi
;

139 
Pošt
 
	gpošt2
 = *
i
;

142 ifÐ
	gpošt1
.
	gÏmbdaModif›r
 =ð
pošt2
.
ÏmbdaModif›r
 || 
pošt1
.
b™¿‹
 ==…oint2.bitrate )

144 
´–imš¬yResuÉ
 = 
šüem’tLambdaModif›r
Ð
š™ŸlAdju¡m’tP¬am‘”
, 
rg‘B™¿‹
, 
poštLi¡
.
back
( ) );

148 
	g´–imš¬yResuÉ
 = 
pÞ©eLambdaModif›r
Ð
rg‘B™¿‹
, 
pošt1
, 
pošt2
 );

152 
´eviousResuÉ
Ð
poštLi¡
.
back
Ð).
ÏmbdaModif›r
 );

156 
š‹rmedŸ‹
Ð
¡d
::
log
ÐÐ)1.0 + std::
abs
Ð
´–imš¬yResuÉ
 - 
´eviousResuÉ
 ) /…reviousResult ) );

157 
as£¹
ÐÐ)0.0 <ð
š‹rmedŸ‹
 );

158 ifÐÐ
	g´–imš¬yResuÉ
 - 
	g´eviousResuÉ
 ) < 0.0 )

160 
	g´–imš¬yResuÉ
 = 
´eviousResuÉ
 * ( ( )1.0 - 
š‹rmedŸ‹
 );

164 
	g´–imš¬yResuÉ
 = 
´eviousResuÉ
 * ( ( )1.0 + 
š‹rmedŸ‹
 );

169 
	g»suÉ
;

172 
	g»suÉ
 = 
´eviousResuÉ
 + 
š‹rDam³nšgFaùÜ
 * ( 
´–imš¬yResuÉ
 -…reviousResult );

173 
	gš‹rDam³nšgFaùÜ
 /= ( )2.0;

174 }  
	g»suÉ
 <= ( )0.0 );

175  
	g»suÉ
;

178 
	gÇme¥aû


181 
Pošt
 
poštFromFuÎM‘aLogEÁry
Ð
šdex
, cÚ¡ 
M‘aLogEÁry
< 
¡d
::
veùÜ
< > >& 
fuÎEÁry
 )

183 
Pošt
 
»suÉ
;

184 
	g»suÉ
.
	gÏmbdaModif›r
 = 
fuÎEÁry
.
ÏmbdaModif›rs
[ 
šdex
 ];

185 
	g»suÉ
.
	gb™¿‹
 = 
fuÎEÁry
.
b™¿‹VeùÜ
[ 
šdex
 ];

186  
	g»suÉ
;

195 
š‹rDam³nšgFaùÜ
Ð
·¿m‘”
, 
cumuÏtiveD–
 )

197 
as£¹
Ð0.0 <ð
cumuÏtiveD–
 );

198 
as£¹
Ð0.0 <ð
·¿m‘”
 );

199  ( )1.0 / ( 
·¿m‘”
 * 
	gcumuÏtiveD–
 + ( )1.0 );

203 
	g¡d
::
veùÜ
< > 
guessLambdaModif›rs
(

204 
š™ŸlAdju¡m’tP¬am‘”
,

205 cÚ¡ 
¡d
::
veùÜ
< > &
rg‘B™¿‹VeùÜ
,

206 cÚ¡ 
¡d
::
li¡
< 
M‘aLogEÁry
< std::
veùÜ
< > > >& 
m‘aLogEÁryLi¡
 )

208 
as£¹
Ð!
rg‘B™¿‹VeùÜ
.
em±y
( ) );

209 
as£¹
Ð!
m‘aLogEÁryLi¡
.
em±y
( ) );

211 
cumuÏtiveD–
( 0.0 );

212 
	g¡d
::
veùÜ
< > 
»suÉVeùÜ
;

213  
i
Ð0 ); 
	gi
 < 
	grg‘B™¿‹VeùÜ
.
size
( ); ++i )

216 
	g¡d
::
li¡
< 
Pošt
 > 
poštLi¡
;

217 
	g¡d
::
li¡
< 
M‘aLogEÁry
< 
¡d
::
veùÜ
< > > >::
cÚ¡_»v”£_™”©Ü
 
j
Ð
m‘aLogEÁryLi¡
.
rbegš
( ) );

218 
	gpoštLi¡
.
push_äÚt
Ð
poštFromFuÎM‘aLogEÁry
Ð
i
, *
j
 ) );

219 ++
	gj
;

220 ifÐ
	gj
 !ð
m‘aLogEÁryLi¡
.
»nd
( ) )

222 
poštLi¡
.
push_äÚt
Ð
poštFromFuÎM‘aLogEÁry
Ð
i
, *
j
 ) );

226 cÚ¡ 
ÃwLambdaModif›r
Ð
guessLambdaModif›r
(

227 
š™ŸlAdju¡m’tP¬am‘”
,

228 
rg‘B™¿‹VeùÜ
[ 
i
 ],

229 
poštLi¡
,

230 
š‹rDam³nšgFaùÜ
Ð50.0, 
cumuÏtiveD–
 ) ) );

231 
	g»suÉVeùÜ
.
push_back
Ð
ÃwLambdaModif›r
 );

234 cÚ¡ 
ÞdLambdaModif›r
Ð
poštLi¡
.
back
Ð).
ÏmbdaModif›r
 );

235 
	gcumuÏtiveD–
 +ð
¡d
::
abs
Ð
ÃwLambdaModif›r
 - 
ÞdLambdaModif›r
 ) / oldLambdaModifier;

238  
	g»suÉVeùÜ
;

241 
	gÇme¥aû


247 
ignÜeUpTo
Ð
¡d
::
i¡»am
& 
i
, 
ch¬aù”
 )

249  
	gi
.
good
Ðè&& 
	gch¬aù”
 !ð
i
.
g‘
( ) )

251 ifÐ!
	gi
.
good
( ) )

253 
throw
 
M‘aLogP¬£Exû±iÚ
( );

259 
·r£LambdaModif›rM­
Ð
¡d
::
i¡»am
& 
Ëá
, std::
m­
< , >& 
right
 )

263 
as£¹
Ð
Ëá
.
good
( ) );

266 ifÐ'-' !ð
Ëá
.
g‘
( ) )

268 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

270 ifÐ!
	gËá
.
good
( ) )

274 ifÐ'L' !ð
Ëá
.
g‘
( ) )

276 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

278 ifÐ!
	gËá
.
good
( ) )

282 ifÐ'M' !ð
Ëá
.
g‘
( ) )

284 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

286 ifÐ!
	gËá
.
good
( ) )

292 
	gšdexLÚg
;

293 
	gËá
 >> 
	gšdexLÚg
;

294 ifÐ!
	gËá
.
good
( ) )

298 ifÐ
	gšdexLÚg
 < 
	g¡d
::
num”ic_lim™s
< >::
mš
( ) )

300 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

302 ifÐ
	g¡d
::
num”ic_lim™s
< >::
max
Ðè< 
šdexLÚg
 )

304 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

306 ifÐ!
	gËá
.
good
( ) )

310 
šdex
ÐÐ)
šdexLÚg
 );

312 ifÐ' ' !ð
Ëá
.
g‘
( ) )

314 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

316 ifÐ!
	gËá
.
good
( ) )

322 
	gÏmbdaModif›r
;

323 
	gËá
 >> 
	gÏmbdaModif›r
;

324 ifÐ
	gÏmbdaModif›r
 <ðÐ)0.0 || ( !
right
.
em±y
Ðè&& („ight.
couÁ
Ð
šdex
 ) !ð0 || index <ðright.
rbegš
Ð)->
fœ¡
 ) ) )

326 
Ëá
.
£t¡©e
Ð
¡d
::
i¡»am
::
çžb™
 );

330 
	gright
[ 
šdex
 ] = 
ÏmbdaModif›r
;

332 ifÐ!
	gËá
.
good
( ) )

338 ifÐ
	gËá
.
³ek
( ) == ' ' )

340 
Ëá
.
ignÜe
( );

351 
	g¡d
::
£t
< > 
šdexS‘FromM­
ÐcÚ¡ 
¡d
::
m­
< , >& 
š
 )

353 
	g¡d
::
£t
< > 
»suÉ
;

354  
ty³Çme
 
	g¡d
::
m­
< , >::
cÚ¡_™”©Ü
 
i
Ð
š
.
begš
Ðè); 
	gi
 !ðš.
’d
( ); ++i )

356 
	g»suÉ
.
š£¹
Ð
i
->
fœ¡
 );

358  
	g»suÉ
;

362 
	$guessLambdaModif›rs
(

363 
¡d
::
o¡»am
& 
o
,

364 
¡d
::
i¡»am
& 
š™ŸlAdju¡m’tP¬am‘”I¡»am
,

365 
¡d
::
i¡»am
& 
rg‘sI¡»am
,

366 
¡d
::
i¡»am
& 
m‘aLogI¡»am
 )

369 
š™ŸlAdju¡m’tP¬am‘”
;

370 
š™ŸlAdju¡m’tP¬am‘”I¡»am
 >> 
š™ŸlAdju¡m’tP¬am‘”
;

371 ifÐ
š™ŸlAdju¡m’tP¬am‘”I¡»am
.
	`çž
Ðè|| in™ŸlAdju¡m’tP¬am‘”I¡»am.
	`good
( ) )

373 
throw
 
	`In™ŸlAdju¡m’tP¬am‘”P¬£Exû±iÚ
( );

377 
¡d
::
veùÜ
< > 
rg‘VeùÜ
;

378 
	`·r£B™¿‹VeùÜ
Ð
rg‘sI¡»am
, 
rg‘VeùÜ
 );

379 ifÐ
rg‘VeùÜ
.
	`em±y
Ðè|| 
rg‘sI¡»am
.
	`çž
Ðè||¬g‘sI¡»am.
	`good
( ) )

381 
throw
 
	`T¬g‘sP¬£Exû±iÚ
( );

385 
¡d
::
li¡
< 
M‘aLogEÁry
< std::
m­
< , > > > 
m‘aLogEÁryLi¡
;

389 
M‘aLogEÁry
< 
¡d
::
m­
< , > > 
’Œy
;

390 
	`·r£LambdaModif›rM­
Ð
m‘aLogI¡»am
, 
’Œy
.
ÏmbdaModif›rs
 );

391 ifÐ!
m‘aLogI¡»am
.
	`good
( ) )

393 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

397 ifÐ';' !ð
m‘aLogI¡»am
.
	`g‘
( ) )

399 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

401 ifÐ!
m‘aLogI¡»am
.
	`good
( ) )

403 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

407 
	`·r£B™¿‹VeùÜ
Ð
m‘aLogI¡»am
, 
’Œy
.
b™¿‹VeùÜ
 );

408 ifÐ
m‘aLogI¡»am
.
	`çž
( ) )

410 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

412 
m‘aLogEÁryLi¡
.
	`push_back
Ð
’Œy
 );

414 ifÐ!
m‘aLogI¡»am
.
	`good
( ) )

418 ifÐ
m‘aLogI¡»am
.
	`g‘
( ) != '\n' )

420 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

422 
m‘aLogI¡»am
.
	`³ek
( );

423 }  
m‘aLogI¡»am
.
	`good
( ) );

424 ifÐ
m‘aLogEÁryLi¡
.
	`em±y
( ) )

426 
throw
 
	`M‘aLogP¬£Exû±iÚ
( );

430 
¡d
::
£t
< > 
	`fœ¡IndexS‘
Ð
	`šdexS‘FromM­
Ð
m‘aLogEÁryLi¡
.
	`äÚt
Ð).
ÏmbdaModif›rs
 ) );

431 ifÐ
fœ¡IndexS‘
.
	`size
Ðè!ð
rg‘VeùÜ
.size( ) )

433 
throw
 
	`Mism©chedIndexesExû±iÚ
( );

435  
¡d
::
li¡
< 
M‘aLogEÁry
< std::
m­
< , > > >::
cÚ¡_™”©Ü
 
	`i
Ð
m‘aLogEÁryLi¡
.
	`begš
( ) );

436 
i
 !ð
m‘aLogEÁryLi¡
.
	`’d
( );

437 ++
i
 )

439 ifÐ
	`šdexS‘FromM­
Ð
i
->
ÏmbdaModif›rs
 ) !ð
fœ¡IndexS‘
 )

441 
throw
 
	`Mism©chedIndexesExû±iÚ
( );

443 ifÐ
i
->
b™¿‹VeùÜ
.
	`size
Ðè!ð
rg‘VeùÜ
.size( ) )

445 
throw
 
	`Mism©chedIndexesExû±iÚ
( );

450 
¡d
::
li¡
< 
M‘aLogEÁry
< std::
veùÜ
< > > > 
sim¶if›dM‘aLogEÁryLi¡
;

451  
¡d
::
li¡
< 
M‘aLogEÁry
< std::
m­
< , > > >::
cÚ¡_™”©Ü
 
	`i
Ð
m‘aLogEÁryLi¡
.
	`begš
( ) );

452 
i
 !ð
m‘aLogEÁryLi¡
.
	`’d
( );

453 ++
i
 )

455 
sim¶if›dM‘aLogEÁryLi¡
.
	`push_back
Ð
M‘aLogEÁry
< 
¡d
::
veùÜ
< > >( ) );

456  
¡d
::
m­
< , >::
cÚ¡_™”©Ü
 
	`j
Ð
i
->
ÏmbdaModif›rs
.
	`begš
Ðè); 
j
 !ði->ÏmbdaModif›rs.
	`’d
( ); ++j )

458 
sim¶if›dM‘aLogEÁryLi¡
.
	`back
Ð).
ÏmbdaModif›rs
.
	`push_back
Ð
j
->
£cÚd
 );

460 
sim¶if›dM‘aLogEÁryLi¡
.
	`back
Ð).
b™¿‹VeùÜ
 = 
i
->bitrateVector;

464 
¡d
::
veùÜ
< > 
	`»suÉVeùÜ
Ð
	`guessLambdaModif›rs
Ð
š™ŸlAdju¡m’tP¬am‘”
, 
rg‘VeùÜ
, 
sim¶if›dM‘aLogEÁryLi¡
 ) );

467 
¡d
::
£t
< >::
cÚ¡_™”©Ü
 
	`šdexI‹r
Ð
fœ¡IndexS‘
.
	`begš
( ) );

468 
¡d
::
veùÜ
< >::
cÚ¡_™”©Ü
 
	`»suÉI‹r
Ð
»suÉVeùÜ
.
	`begš
( ) );

471 ifÐ
šdexI‹r
 !ð
fœ¡IndexS‘
.
	`begš
( ) )

473 
o
 << " ";

475 
o
 << "-LM" << ( )Ð*
šdexI‹r
 ) << " ";

476 
o
.
	`£tf
Ð
¡d
::
o¡»am
::
fixed
, std::o¡»am::
æßtf›ld
 );

477 
o
.
	`´ecisiÚ
( 7 );

478 
o
 << ( *
»suÉI‹r
 );

480 ++
šdexI‹r
;

481 ++
»suÉI‹r
;

482 }  
šdexI‹r
 !ð
fœ¡IndexS‘
.
	`’d
( ) );

483 
	`as£¹
Ð
»suÉI‹r
 =ð
»suÉVeùÜ
.
	`’d
( ) );

484 
	}
}

	@source/App/utils/BitrateTargeting/GuessLambdaModifiers.h

34 #iâdeà
__GUESSLAMBDAMODIFIERS__


35 
	#__GUESSLAMBDAMODIFIERS__


	)

37 
	~"RuÁimeE¼Ü.h
"

38 
	~<veùÜ
>

39 
	~<m­
>

40 
	~<li¡
>

41 
	~<£t
>

42 
	~<lim™s
>

45 þas 
	cIn™ŸlAdju¡m’tP¬am‘”P¬£Exû±iÚ
: 
public
 
RuÁimeE¼Ü


47 
public
:

48 
vœtu®
 ~
	$In™ŸlAdju¡m’tP¬am‘”P¬£Exû±iÚ
Ðè
	$throw
( ) { }

49 
´Ùeùed
:

50 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "E¼Ü…¬sšghš™Ÿl-adju¡m’ˆ·¿m‘”"; 
	}
}

54 þas 
	cT¬g‘sP¬£Exû±iÚ
: 
public
 
RuÁimeE¼Ü


56 
public
:

57 
vœtu®
 ~
	$T¬g‘sP¬£Exû±iÚ
Ðè
	$throw
( ) { }

58 
´Ùeùed
:

59 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "E¼Ü…¬sšg¬g‘s"; 
	}
}

63 þas 
	cM‘aLogP¬£Exû±iÚ
: 
public
 
RuÁimeE¼Ü


65 
public
:

66 
vœtu®
 ~
	$M‘aLogP¬£Exû±iÚ
Ðè
	$throw
( ) { }

67 
´Ùeùed
:

68 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "E¼Ü…¬sšg m‘¨log"; 
	}
}

72 þas 
	cMism©chedIndexesExû±iÚ
: 
public
 
RuÁimeE¼Ü


74 
public
:

75 
vœtu®
 ~
	$Mism©chedIndexesExû±iÚ
Ðè
	$throw
( ) { }

76 
´Ùeùed
:

77 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "Mism©ched veùÜ size Ü†ambd¨modif›¸šdexes"; 
	}
}

81 
	g‹m¶©e
< 
ty³Çme
 
	gTLambdaModif›r
 >

82 
	sM‘aLogEÁry


84 
TLambdaModif›r
 
	mÏmbdaModif›rs
;

85 
	m¡d
::
veùÜ
< > 
b™¿‹VeùÜ
;

89 
	sPošt


91 
	mÏmbdaModif›r
;

92 
	mb™¿‹
;

102 
pÞ©eLambdaModif›r
Ð
rg‘B™¿‹
, cÚ¡ 
Pošt
& 
pošt1
, cÚ¡ Pošt& 
pošt2
 );

112 
guessLambdaModif›r
(

113 
š™ŸlAdju¡m’tP¬am‘”
,

114 
rg‘B™¿‹
,

115 cÚ¡ 
¡d
::
li¡
< 
Pošt
 >& 
poštLi¡
,

116 
š‹rDam³nšgFaùÜ
 );

127 
	g¡d
::
veùÜ
< > 
guessLambdaModif›rs
(

128 
š™ŸlAdju¡m’tP¬am‘”
,

129 cÚ¡ 
¡d
::
veùÜ
< > &
rg‘B™¿‹VeùÜ
,

130 cÚ¡ 
¡d
::
li¡
< 
M‘aLogEÁry
< std::
veùÜ
< > > >& 
m‘aLogEÁryLi¡
 );

142 
guessLambdaModif›rs
(

143 
¡d
::
o¡»am
& 
o
,

144 
¡d
::
i¡»am
& 
š™ŸlAdju¡m’tP¬am‘”I¡»am
,

145 
¡d
::
i¡»am
& 
rg‘sI¡»am
,

146 
¡d
::
i¡»am
& 
m‘aLogI¡»am
 );

	@source/App/utils/BitrateTargeting/GuessLambdaModifiersMain.cpp

35 
	~"RuÁimeE¼Ü.h
"

36 
	~"GuessLambdaModif›rs.h
"

37 
	~<io¡»am
>

39 þas 
	cWrÚgNumb”OfArgum’tsExû±iÚ
: 
public
 
RuÁimeE¼Ü


41 
public
:

42 
vœtu®
 ~
	$WrÚgNumb”OfArgum’tsExû±iÚ
Ðè
	$throw
( ) { }

43 
´Ùeùed
:

44 
	$ouutWh©
Ð
¡d
::
o¡»am
& 
o
 ) cÚ¡ { o << "WrÚg‚umb” oà¬gum’ts"; 
	}
}

47 
	$maš
Ð
¬gc
, ** 
µArgv
 )

49 
Œy


51 ifÐ
¬gc
 != 3 )

53 
throw
 
	`WrÚgNumb”OfArgum’tsExû±iÚ
( );

56 
¡d
::
¡ršg
 
	`š™ŸlAdju¡m’tP¬am‘”SŒšg
Ð
µArgv
[ 1 ] );

57 
¡d
::
i¡ršg¡»am
 
	`š™ŸlAdju¡m’tP¬am‘”I¡»am
Ð
š™ŸlAdju¡m’tP¬am‘”SŒšg
 );

59 
¡d
::
¡ršg
 
	`rg‘B™¿‹sSŒšg
Ð
µArgv
[ 2 ] );

60 
¡d
::
i¡ršg¡»am
 
	`rg‘B™¿‹sI¡»am
Ð
rg‘B™¿‹sSŒšg
 );

62 
	`guessLambdaModif›rs
Ð
¡d
::
cout
, 
š™ŸlAdju¡m’tP¬am‘”I¡»am
, 
rg‘B™¿‹sI¡»am
, std::
cš
 );

66 
	`ÿtch
Ð
¡d
::
exû±iÚ
& 
e
 )

68 
¡d
::
û¼
 << 
e
.
	`wh©
Ðè<< std::
’dl
;

70 
	`ÿtch
( ... )

72 
¡d
::
û¼
 << "UnknowÀexû±iÚ" << std::
’dl
;

75 
	}
}

	@source/App/utils/BitrateTargeting/RuntimeError.h

34 #iâdeà
__RUNTIMEERROR__


35 
	#__RUNTIMEERROR__


	)

37 
	~<s¡»am
>

38 
	~<¡dexû±
>

41 þas 
	cRuÁimeE¼Ü
: 
public
 
¡d
::
ruÁime_”rÜ


43 
public
:

44 
	$RuÁimeE¼Ü
Ð): 
¡d
::
	`ruÁime_”rÜ
Ð"" ), 
	$m_fœ¡Wh©
Ð
Œue
 ) { }

45 
vœtu®
 ~
	$RuÁimeE¼Ü
Ðè
	$throw
 ( ) { 
	}
}

48 cÚ¡ * 
	$wh©
ÐècÚ¡ 
	$throw
( )

50 ifÐ
m_fœ¡Wh©
 )

52 
¡d
::
o¡ršg¡»am
 
o
;

53 
	`ouutWh©
Ð
o
 );

54 
m_wh©
 = 
o
.
	`¡r
( );

55 
m_fœ¡Wh©
 = 
çl£
;

57  
m_wh©
.
	`c_¡r
( );

58 
	}
}

60 
	g´Ùeùed
:

63 
vœtu®
 
	$ouutWh©
Ð
¡d
::
o¡»am
 & 
o
 ) const =0;

65 
´iv©e
:

66 
mubË
 
boÞ
 
m_fœ¡Wh©
;

67 
mubË
 
¡d
::
¡ršg
 
m_wh©
;

68 
	}
};

71 
šlše
 
	g¡d
::
o¡»am
& 
Ý”©Ü
<<Ð
¡d
::o¡»am& 
Ëá
, cÚ¡ 
	gRuÁimeE¼Ü
& 
	gright
 )

73  
	gËá
 << 
	gright
.
wh©
( );

	@source/App/utils/annexBbytecount.cpp

34 
	~<¡dšt.h
>

35 
	~<ÿs£¹
>

36 
	~<f¡»am
>

37 
	~<s¡»am
>

38 
	~<io¡»am
>

39 
	~<¡ršg.h
>

41 
	~"TLibDecod”/AÂexB»ad.h
"

43 
usšg
 
Çme¥aû
 
	g¡d
;

46 
AÂexBSts
 
	mex³ùed
;

47 
	md©a_Ën
;

48 cÚ¡ 
	md©a
[10];

49 } 
	g‹¡s
[] = {

70 
	$£láe¡
()

73 
i
 = 0; i < (
‹¡s
)/(*tests); i++)

75 
i¡ršg¡»am
 
	`š
(
	`¡ršg
(
‹¡s
[
i
].
d©a
,e¡s[i].
d©a_Ën
));

76 
IÅutBy‹SŒ—m
 
	`bs
(
š
);

78 
AÂexBSts
 
aùu®
 = 
	`AÂexBSts
();

79 
veùÜ
<
ušt8_t
> 
ÇlUn™
;

81 
	`by‹SŒ—mNALUn™
(
bs
, 
ÇlUn™
, 
aùu®
);

83 
cout
 << "S–f-Te¡: " << 
i
 << ", {";

84 
j
 = 0; j < 
‹¡s
[
i
].
d©a_Ën
; j++)

86 
cout
 << 
hex
 << ()
‹¡s
[
i
].
d©a
[
j
] << 
dec
;

87 ià(
j
 < 
‹¡s
[
i
].
d©a_Ën
-1)

89 
cout
 << ",";

92 
cout
 << "} ";

94 
boÞ
 
ok
 = 
Œue
;

95 
	#VERIFY
(
a
,
b
,
m
) \

96 ià(
a
.
m
 !ð
b
.m) { \

97 
ok
 = 
çl£
; \

98 
cout
 << 
’dl
 << " MISSMATCH " #m << ", E(" << 
b
.
m
 << "è!ð" << 
a
.m; \

99 }

	)

100 
	`VERIFY
(
aùu®
, 
‹¡s
[
i
].
ex³ùed
, 
m_numL—dšgZ”o8B™sBy‹s
);

101 
	`VERIFY
(
aùu®
, 
‹¡s
[
i
].
ex³ùed
, 
m_numZ”oBy‹By‹s
);

102 
	`VERIFY
(
aùu®
, 
‹¡s
[
i
].
ex³ùed
, 
m_numS¹CodeP»fixBy‹s
);

103 
	`VERIFY
(
aùu®
, 
‹¡s
[
i
].
ex³ùed
, 
m_numBy‹sInNALUn™
);

104 
	`VERIFY
(
aùu®
, 
‹¡s
[
i
].
ex³ùed
, 
m_numT¿žšgZ”o8B™sBy‹s
);

105 #undeà
VERIFY


106 ià(
ok
)

108 
cout
 << "OK";

110 
cout
 << 
’dl
;

112 
	}
}

114 
	$maš
(
¬gc
, *
¬gv
[])

116 
	`£láe¡
();

118 ià(
¬gc
 != 2)

123 
if¡»am
 
	`š
(
¬gv
[1], if¡»am::
š
 | if¡»am::
bš¬y
);

124 
IÅutBy‹SŒ—m
 
	`bs
(
š
);

126 
AÂexBSts
 
ªÃxBStsTÙ®
 = 
	`AÂexBSts
();

127 
AÂexBSts
 
ªÃxBStsTÙ®_VCL
 = 
	`AÂexBSts
();

128 
AÂexBSts
 
ªÃxBStsTÙ®_FžËr
 = 
	`AÂexBSts
();

129 
AÂexBSts
 
ªÃxBStsTÙ®_Oth”
 = 
	`AÂexBSts
();

130 
numNALUn™s
 = 0;

132 
cout
 << "NALUn™s:" << 
’dl
;

133 !!
š
)

135 
AÂexBSts
 
ªÃxBStsSšgË
 = 
	`AÂexBSts
();

136 
veùÜ
<
ušt8_t
> 
ÇlUn™
;

138 
	`by‹SŒ—mNALUn™
(
bs
, 
ÇlUn™
, 
ªÃxBStsSšgË
);

140 
Çl_un™_ty³
 = -1;

141 ià(
ªÃxBStsSšgË
.
m_numBy‹sInNALUn™
)

143 
Çl_un™_ty³
 = 
ÇlUn™
[0] & 0x1f;

146 
cout
 << " - NALU: #" << 
numNALUn™s
 << "‚®_un™_ty³:" << 
Çl_un™_ty³
 << 
’dl


147 << "‚um_by‹sÖ—dšg_z”o_8b™s): " << 
ªÃxBStsSšgË
.
m_numL—dšgZ”o8B™sBy‹s
 << 
’dl


148 << "‚um_by‹s(z”o_by‹): " << 
ªÃxBStsSšgË
.
m_numZ”oBy‹By‹s
 << 
’dl


149 << "‚um_by‹s(¡¬t_code_´efix_Úe_3by‹s): " << 
ªÃxBStsSšgË
.
m_numS¹CodeP»fixBy‹s
 << 
’dl


150 << " NumBy‹sInNALun™: " << 
ªÃxBStsSšgË
.
m_numBy‹sInNALUn™
 << 
’dl


151 << "‚um_by‹sÑ¿žšg_z”o_8b™s): " << 
ªÃxBStsSšgË
.
m_numT¿žšgZ”o8B™sBy‹s
 << 
’dl


154 
ªÃxBStsTÙ®
 +ð
ªÃxBStsSšgË
;

155 
numNALUn™s
++;

157 ià(!
ªÃxBStsSšgË
.
m_numBy‹sInNALUn™
)

164 
ÇlUn™
[0] & 0x1f) {

166 
ªÃxBStsTÙ®_VCL
 +ð
ªÃxBStsSšgË
;

169 
ªÃxBStsTÙ®_FžËr
 +ð
ªÃxBStsSšgË
;

172 
ªÃxBStsTÙ®_Oth”
 +ð
ªÃxBStsSšgË
;

176 
cout
 << "Summ¬y: " << 
’dl


177 << "‚um_by‹sÖ—dšg_z”o_8b™s): " << 
ªÃxBStsTÙ®
.
m_numL—dšgZ”o8B™sBy‹s
 << 
’dl


178 << "‚um_by‹s(z”o_by‹): " << 
ªÃxBStsTÙ®
.
m_numZ”oBy‹By‹s
 << 
’dl


179 << "‚um_by‹s(¡¬t_code_´efix_Úe_3by‹s): " << 
ªÃxBStsTÙ®
.
m_numS¹CodeP»fixBy‹s
 << 
’dl


180 << " NumBy‹sInNALun™: " << 
ªÃxBStsTÙ®
.
m_numBy‹sInNALUn™
 << 
’dl


181 << "‚um_by‹sÑ¿žšg_z”o_8b™s): " << 
ªÃxBStsTÙ®
.
m_numT¿žšgZ”o8B™sBy‹s
 << 
’dl


184 
cout
 << "Summ¬y(VCL): " << 
’dl


185 << "‚um_by‹sÖ—dšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_VCL
.
m_numL—dšgZ”o8B™sBy‹s
 << 
’dl


186 << "‚um_by‹s(z”o_by‹): " << 
ªÃxBStsTÙ®_VCL
.
m_numZ”oBy‹By‹s
 << 
’dl


187 << "‚um_by‹s(¡¬t_code_´efix_Úe_3by‹s): " << 
ªÃxBStsTÙ®_VCL
.
m_numS¹CodeP»fixBy‹s
 << 
’dl


188 << " NumBy‹sInNALun™: " << 
ªÃxBStsTÙ®_VCL
.
m_numBy‹sInNALUn™
 << 
’dl


189 << "‚um_by‹sÑ¿žšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_VCL
.
m_numT¿žšgZ”o8B™sBy‹s
 << 
’dl


192 
cout
 << "Summ¬y(FžËr): " << 
’dl


193 << "‚um_by‹sÖ—dšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_FžËr
.
m_numL—dšgZ”o8B™sBy‹s
 << 
’dl


194 << "‚um_by‹s(z”o_by‹): " << 
ªÃxBStsTÙ®_FžËr
.
m_numZ”oBy‹By‹s
 << 
’dl


195 << "‚um_by‹s(¡¬t_code_´efix_Úe_3by‹s): " << 
ªÃxBStsTÙ®_FžËr
.
m_numS¹CodeP»fixBy‹s
 << 
’dl


196 << " NumBy‹sInNALun™: " << 
ªÃxBStsTÙ®_FžËr
.
m_numBy‹sInNALUn™
 << 
’dl


197 << "‚um_by‹sÑ¿žšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_FžËr
.
m_numT¿žšgZ”o8B™sBy‹s
 << 
’dl


200 
cout
 << "Summ¬y(Oth”): " << 
’dl


201 << "‚um_by‹sÖ—dšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_Oth”
.
m_numL—dšgZ”o8B™sBy‹s
 << 
’dl


202 << "‚um_by‹s(z”o_by‹): " << 
ªÃxBStsTÙ®_Oth”
.
m_numZ”oBy‹By‹s
 << 
’dl


203 << "‚um_by‹s(¡¬t_code_´efix_Úe_3by‹s): " << 
ªÃxBStsTÙ®_Oth”
.
m_numS¹CodeP»fixBy‹s
 << 
’dl


204 << " NumBy‹sInNALun™: " << 
ªÃxBStsTÙ®_Oth”
.
m_numBy‹sInNALUn™
 << 
’dl


205 << "‚um_by‹sÑ¿žšg_z”o_8b™s): " << 
ªÃxBStsTÙ®_Oth”
.
m_numT¿žšgZ”o8B™sBy‹s
 << 
’dl


212 
tÙ®By‹s_T1HRD
 = 
ªÃxBStsTÙ®_VCL
.
m_numBy‹sInNALUn™
 + 
ªÃxBStsTÙ®_FžËr
.m_numBytesInNALUnit;

221 
tÙ®By‹s_T2aHRD
 = 
ªÃxBStsTÙ®
.
m_numBy‹sInNALUn™
;

228 
tÙ®By‹s_T2abHRD
 = 0;

229 
tÙ®By‹s_T2abHRD
 +ð
ªÃxBStsTÙ®
.
m_numL—dšgZ”o8B™sBy‹s
;

230 
tÙ®By‹s_T2abHRD
 +ð
ªÃxBStsTÙ®
.
m_numZ”oBy‹By‹s
;

231 
tÙ®By‹s_T2abHRD
 +ð
ªÃxBStsTÙ®
.
m_numS¹CodeP»fixBy‹s
;

232 
tÙ®By‹s_T2abHRD
 +ð
ªÃxBStsTÙ®
.
m_numBy‹sInNALUn™
;

233 
tÙ®By‹s_T2abHRD
 +ð
ªÃxBStsTÙ®
.
m_numT¿žšgZ”o8B™sBy‹s
;

235 
cout
 << "TÙ® (by‹s):" << 
’dl
;

236 
cout
 << " Ty³1 HRD: " << 
tÙ®By‹s_T1HRD
 << 
’dl
;

237 
cout
 << " Ty³2 HRD: " << 
tÙ®By‹s_T2aHRD
 << 
’dl
;

238 
cout
 << " Ty³2b HRD: " << 
tÙ®By‹s_T2abHRD
 << 
’dl
;

241 
	}
}

	@source/App/utils/convert_NtoMbit_YCbCr.cpp

34 
	~<c¡dlib
>

36 
	~"TLibCommÚ/TComPicYuv.h
"

37 
	~"TLibVideoIO/TVideoIOYuv.h
"

38 
	~"TAµCommÚ/´og¿m_ÝtiÚs_l™e.h
"

40 
usšg
 
Çme¥aû
 
	g¡d
;

41 
Çme¥aû
 
	gpo
 = 
df
::
´og¿m_ÝtiÚs_l™e
;

43 
IÁ
 
	$maš
(
IÁ
 
¬gc
, cÚ¡ ** 
¬gv
)

45 
BoÞ
 
do_h–p
;

46 
¡ršg
 
fž’ame_š
, 
fž’ame_out
;

47 
UIÁ
 
width
, 
height
;

48 
UIÁ
 
b™d•th_š
, 
b™d•th_out
, 
chromaFÜm©Raw
;

49 
UIÁ
 
num_äames
;

50 
UIÁ
 
num_äames_sk
;

52 
po
::
O±iÚs
 
Ýts
;

53 
Ýts
.
	`addO±iÚs
()

54 ("h–p", 
do_h–p
, 
çl£
, "this helpext")

55 ("IÅutFže,i", 
fž’ame_š
, 
	`¡ršg
(""), "input fileo convert")

56 ("OuutFže,o", 
fž’ame_out
, 
	`¡ršg
(""), "output file")

57 ("SourûWidth", 
width
, 0u, "source…icture width")

58 ("SourûHeight", 
height
, 0u, "source…icture height")

59 ("IÅutB™D•th", 
b™d•th_š
, 8u, "bit-depth of input file")

60 ("OuutB™D•th", 
b™d•th_out
, 8u, "bit-depth of output file")

61 ("ChromaFÜm©", 
chromaFÜm©Raw
, 420u, "chroma format. 400, 420, 422 or 444 only")

62 ("NumF¿mes", 
num_äames
, 0xffffffffu, "number of frameso…rocess")

63 ("F¿meSk,-fs", 
num_äames_sk
, 0u, "Number of frameso skip‡t start of input YUV")

66 
po
::
	`£tDeçuÉs
(
Ýts
);

67 
po
::
	`sÿnArgv
(
Ýts
, 
¬gc
, 
¬gv
);

70 ià(
¬gc
 =ð1 || 
do_h–p
)

73 
po
::
	`doH–p
(
cout
, 
Ýts
);

74  
EXIT_FAILURE
;

77 
ChromaFÜm©
 
chromaFÜm©IDC
=
CHROMA_420
;

78 
chromaFÜm©Raw
)

80 400: 
chromaFÜm©IDC
=
CHROMA_400
; ;

81 420: 
chromaFÜm©IDC
=
CHROMA_420
; ;

82 422: 
chromaFÜm©IDC
=
CHROMA_422
; ;

83 444: 
chromaFÜm©IDC
=
CHROMA_444
; ;

85 
	`årštf
(
¡d”r
, "Bad chroma format string\n");

86  
EXIT_FAILURE
;

89 
TVideoIOYuv
 
šput
;

90 
TVideoIOYuv
 
ouut
;

92 
IÁ
 
šputB™D•ths
 [
MAX_NUM_CHANNEL_TYPE
];

93 
IÁ
 
ouutB™D•ths
[
MAX_NUM_CHANNEL_TYPE
];

95 
UIÁ
 
chªÃlTy³Index
 = 0; chªÃlTy³Index < 
MAX_NUM_CHANNEL_TYPE
; channelTypeIndex++)

97 
šputB™D•ths
 [
chªÃlTy³Index
] = 
b™d•th_š
;

98 
ouutB™D•ths
[
chªÃlTy³Index
] = 
b™d•th_out
;

101 
šput
.
	`Ý’
((*)
fž’ame_š
.
	`c_¡r
(), 
çl£
, 
šputB™D•ths
, iÅutB™D•ths, 
ouutB™D•ths
);

102 
ouut
.
	`Ý’
((*)
fž’ame_out
.
	`c_¡r
(), 
Œue
, 
ouutB™D•ths
, outputBitDepths, outputBitDepths);

104 
šput
.
	`skF¿mes
(
num_äames_sk
, 
width
, 
height
, 
chromaFÜm©IDC
);

106 
TComPicYuv
 
äame
;

107 
äame
.
	`ü—‹W™houtCUInfo
Ð
width
, 
height
, 
chromaFÜm©IDC
);

109 
IÁ
 
·d
[2] = {0, 0};

111 
TComPicYuv
 
cPicYuvTrueOrg
;

112 
cPicYuvTrueOrg
.
	`ü—‹W™houtCUInfo
Ð
width
, 
height
, 
chromaFÜm©IDC
 );

114 
UIÁ
 
num_äames_´oûs£d
 = 0;

115 !
šput
.
	`isEof
())

117 ià(! 
šput
.
	`»ad
(&
äame
, &
cPicYuvTrueOrg
, 
IPCOLOURSPACE_UNCHANGED
, 
·d
))

122 
P–
* 
img
 = 
äame
.
	`g‘Addr
(
COMPONENT_Y
);

123 
IÁ
 
y
 = 0; y < 
height
; y++)

125 
IÁ
 
x
 = 0; x < 
height
; x++)

127 
img
[
x
] = 0;

129 
img
 +ð
äame
.
	`g‘SŒide
();

131 
img
 = 
äame
.
	`g‘Addr
(
COMPONENT_Y
);

132 
img
[0] = 1;

135 
ouut
.
	`wr™e
(&
äame
, 
IPCOLOURSPACE_UNCHANGED
);

136 
num_äames_´oûs£d
++;

137 ià(
num_äames_´oûs£d
 =ð
num_äames
)

143 
šput
.
	`þo£
();

144 
ouut
.
	`þo£
();

145 
cPicYuvTrueOrg
.
	`de¡roy
();

147  
EXIT_SUCCESS
;

148 
	}
}

	@source/Lib/TLibCommon/AccessUnit.h

39 #´agm¨
Úû


41 #iâdeà
__ACCESSUNIT__


42 
	#__ACCESSUNIT__


	)

44 
	~<li¡
>

45 
	~"NAL.h
"

62 
þass
 
	gAcûssUn™
 : 
public
 
¡d
::
li¡
<
NALUn™EBSP
*>

64 
public
:

65 ~
AcûssUn™
()

67 
AcûssUn™
::
™”©Ü
 
™
 = 
this
->
begš
(); 
	g™
 !ðthis->
’d
(); it++)

69 
d–‘e
 *
	g™
;

	@source/Lib/TLibCommon/CommonDef.h

38 #iâdeà
__COMMONDEF__


39 
	#__COMMONDEF__


	)

41 
	~<®gÜ™hm
>

42 
	~<io¡»am
>

43 #undeà
NDEBUG


44 
	~<as£¹.h
>

45 
	~<lim™s
>

47 #ià
_MSC_VER
 > 1000

49 #´agm¨
w¬nšg
Ð
di§bË
 : 4018 )

51 #´agm¨
w¬nšg
Ð
di§bË
 : 4800 )

53 
	~"Ty³Def.h
"

55 #ifdeà
_MSC_VER


56 #ià
_MSC_VER
 <= 1500

57 
šlše
 
IÁ64
 
	$abs
 (
IÁ64
 
x
è{  
	`_abs64
(x); 
	}
};

68 
	#NV_VERSION
 "16.23"

69 

	)

74 #ifdeà
__GNUC__


75 
	#NVM_COMPILEDBY
 "[GCC %d.%d.%d]", 
__GNUC__
, 
__GNUC_MINOR__
, 
__GNUC_PATCHLEVEL__


	)

76 #ifdeà
__IA64__


77 
	#NVM_ONARCH
 "[Ú 64-b™] "

	)

79 
	#NVM_ONARCH
 "[Ú 32-b™] "

	)

83 #ifdeà
__INTEL_COMPILER


84 
	#NVM_COMPILEDBY
 "[ICC %d]", 
__INTEL_COMPILER


	)

85 #–ià 
_MSC_VER


86 
	#NVM_COMPILEDBY
 "[VS %d]", 
_MSC_VER


	)

89 #iâdeà
NVM_COMPILEDBY


90 
	#NVM_COMPILEDBY
 "[Unk-CXX]"

	)

93 #ifdeà
_WIN32


94 
	#NVM_ONOS
 "[Wšdows]"

	)

95 #–ià 
__lšux


96 
	#NVM_ONOS
 "[Lšux]"

	)

97 #–ià 
__CYGWIN__


98 
	#NVM_ONOS
 "[Cygwš]"

	)

99 #–ià
__APPLE__


100 
	#NVM_ONOS
 "[MaøOS X]"

	)

102 
	#NVM_ONOS
 "[Unk-OS]"

	)

105 
	#NVM_BITS
 "[%d b™] ", ((
Void
*) == 8 ? 64 : 32)

106 

	)

107 #iâdeà
NULL


108 
	#NULL
 0

	)

115 cÚ¡ 
UIÁ
 
	gMAX_UINT
 = 0xFFFFFFFFU;

116 cÚ¡ 
IÁ
 
	gMAX_INT
 = 2147483647;

117 cÚ¡ 
DoubË
 
	gMAX_DOUBLE
 = 1.7e+308;

124 cÚ¡ 
IÁ
 
	gMAX_GOP
 = 64;

125 cÚ¡ 
IÁ
 
	gMAX_NUM_REF_PICS
 = 16;

126 cÚ¡ 
IÁ
 
	gMAX_NUM_REF
 = 16;

127 cÚ¡ 
IÁ
 
	gMAX_QP
 = 51;

128 cÚ¡ 
IÁ
 
	gNOT_VALID
 = -1;

130 cÚ¡ 
IÁ
 
	gAMVP_MAX_NUM_CANDS
 = 2;

131 cÚ¡ 
IÁ
 
	gAMVP_DECIMATION_FACTOR
 = 4;

132 cÚ¡ 
IÁ
 
	gMRG_MAX_NUM_CANDS
 = 5;

135 cÚ¡ 
IÁ
 
	gMAX_TLAYER
 = 7;

137 cÚ¡ 
IÁ
 
	gADAPT_SR_SCALE
 = 1;

139 cÚ¡ 
IÁ
 
	gMAX_NUM_PICS_IN_SOP
 = 1024;

141 cÚ¡ 
IÁ
 
	gMAX_NESTING_NUM_OPS
 = 1024;

142 cÚ¡ 
IÁ
 
	gMAX_NESTING_NUM_LAYER
 = 64;

144 cÚ¡ 
IÁ
 
	gMAX_VPS_NUM_HRD_PARAMETERS
 = 1;

145 cÚ¡ 
IÁ
 
	gMAX_VPS_OP_SETS_PLUS1
 = 1024;

146 cÚ¡ 
IÁ
 
	gMAX_VPS_NUH_RESERVED_ZERO_LAYER_ID_PLUS1
 = 1;

148 cÚ¡ 
IÁ
 
	gMAXIMUM_INTRA_FILTERED_WIDTH
 = 16;

149 cÚ¡ 
IÁ
 
	gMAXIMUM_INTRA_FILTERED_HEIGHT
 = 16;

151 cÚ¡ 
IÁ
 
	gMAX_CPB_CNT
 = 32;

152 cÚ¡ 
IÁ
 
	gMAX_NUM_LAYER_IDS
 = 64;

154 cÚ¡ 
IÁ
 
	gCOEF_REMAIN_BIN_REDUCTION
 = 3;

156 cÚ¡ 
IÁ
 
	gCU_DQP_TU_CMAX
 = 5;

157 cÚ¡ 
IÁ
 
	gCU_DQP_EG_k
 = 0;

159 cÚ¡ 
IÁ
 
	gSBH_THRESHOLD
 = 4;

161 cÚ¡ 
IÁ
 
	gC1FLAG_NUMBER
 = 8;

162 cÚ¡ 
IÁ
 
	gC2FLAG_NUMBER
 = 1;

164 cÚ¡ 
IÁ
 
	gMAX_NUM_VPS
 = 16;

165 cÚ¡ 
IÁ
 
	gMAX_NUM_SPS
 = 16;

166 cÚ¡ 
IÁ
 
	gMAX_NUM_PPS
 = 64;

169 cÚ¡ 
IÁ
 
	gMLS_GRP_NUM
 = 64;

170 cÚ¡ 
IÁ
 
	gMLS_CG_LOG2_WIDTH
 = 2;

171 cÚ¡ 
IÁ
 
	gMLS_CG_LOG2_HEIGHT
 = 2;

172 cÚ¡ 
IÁ
 
	gMLS_CG_SIZE
 = 4;

174 #ià
ADAPTIVE_QP_SELECTION


175 cÚ¡ 
IÁ
 
	gARL_C_PRECISION
 = 7;

176 cÚ¡ 
IÁ
 
	gLEVEL_RANGE
 = 30;

179 cÚ¡ 
IÁ
 
	gRVM_VCEGAM10_M
 = 4;

181 cÚ¡ 
IÁ
 
	gFAST_UDI_MAX_RDMODE_NUM
 = 35;

183 cÚ¡ 
IÁ
 
	gNUM_INTRA_MODE
 = 36;

184 cÚ¡ 
IÁ
 
	gPLANAR_IDX
 = 0;

185 cÚ¡ 
IÁ
 
	gVER_IDX
 = 26;

186 cÚ¡ 
IÁ
 
	gHOR_IDX
 = 10;

187 cÚ¡ 
IÁ
 
	gDC_IDX
 = 1;

188 cÚ¡ 
IÁ
 
	gNUM_CHROMA_MODE
 = 5;

189 cÚ¡ 
IÁ
 
	gDM_CHROMA_IDX
 = 36;

191 cÚ¡ 
IÁ
 
	gMDCS_ANGLE_LIMIT
 = 4;

192 cÚ¡ 
IÁ
 
	gMDCS_MAXIMUM_WIDTH
 = 8;

193 cÚ¡ 
IÁ
 
	gMDCS_MAXIMUM_HEIGHT
 = 8;

196 cÚ¡ 
IÁ
 
	gLOG2_MAX_NUM_COLUMNS_MINUS1
 = 7;

197 cÚ¡ 
IÁ
 
	gLOG2_MAX_NUM_ROWS_MINUS1
 = 7;

199 cÚ¡ 
IÁ
 
	gCABAC_INIT_PRESENT_FLAG
 = 1;

201 cÚ¡ 
IÁ
 
	gLUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
 = 4;

202 cÚ¡ 
IÁ
 
	gCHROMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
 = 8;

204 cÚ¡ 
IÁ
 
	gMAX_NUM_LONG_TERM_REF_PICS
 = 33;

205 cÚ¡ 
IÁ
 
	gNUM_LONG_TERM_REF_PIC_SPS
 = 0;

208 cÚ¡ 
IÁ
 
	gMAX_QP_OFFSET_LIST_SIZE
 = 6;

211 cÚ¡ 
IÁ
 
	gLOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP
 = 0;

212 cÚ¡ 
IÁ
 
	gLOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
 =4;

214 cÚ¡ 
IÁ
 
	gRExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
 = 4;

215 cÚ¡ 
IÁ
 
	gRExt__GOLOMB_RICE_INCREMENT_DIVISOR
 = 4;

217 cÚ¡ 
IÁ
 
	gRExt__PREDICTION_WEIGHTING_ANALYSIS_DC_PRECISION
 = 0;

219 cÚ¡ 
IÁ
 
	gMAX_TIMECODE_SEI_SETS
 = 3;

221 cÚ¡ 
IÁ
 
	gMAX_CU_DEPTH
 = 6;

222 cÚ¡ 
IÁ
 
	gMAX_CU_SIZE
 = 64;

223 cÚ¡ 
IÁ
 
	gMIN_PU_SIZE
 = 4;

224 cÚ¡ 
IÁ
 
	gMIN_TU_SIZE
 = 4;

225 cÚ¡ 
IÁ
 
	gMAX_TU_SIZE
 = 32;

226 cÚ¡ 
IÁ
 
	gMAX_NUM_PART_IDXS_IN_CTU_WIDTH
 = 
MAX_CU_SIZE
/
MIN_PU_SIZE
;

227 cÚ¡ 
IÁ
 
	gSCALING_LIST_REM_NUM
 = 6;

229 cÚ¡ 
IÁ
 
	gQUANT_SHIFT
 = 14;

230 cÚ¡ 
IÁ
 
	gIQUANT_SHIFT
 = 6;

231 cÚ¡ 
IÁ
 
	gSCALE_BITS
 = 15;

233 cÚ¡ 
IÁ
 
	gSCALING_LIST_NUM
 = 
MAX_NUM_COMPONENT
 * 
NUMBER_OF_PREDICTION_MODES
;

235 cÚ¡ 
IÁ
 
	gSCALING_LIST_START_VALUE
 = 8 ;

236 cÚ¡ 
IÁ
 
	gMAX_MATRIX_COEF_NUM
 = 64 ;

237 cÚ¡ 
IÁ
 
	gMAX_MATRIX_SIZE_NUM
 = 8 ;

238 cÚ¡ 
IÁ
 
	gSCALING_LIST_BITS
 = 8 ;

239 cÚ¡ 
IÁ
 
	gLOG2_SCALING_LIST_NEUTRAL_VALUE
 = 4 ;

240 cÚ¡ 
IÁ
 
	gSCALING_LIST_DC
 = 16 ;

242 cÚ¡ 
IÁ
 
	gCONTEXT_STATE_BITS
 = 6 ;

243 cÚ¡ 
IÁ
 
	gLAST_SIGNIFICANT_GROUPS
 = 10 ;

245 cÚ¡ 
IÁ
 
	gMAX_ENCODER_DEBLOCKING_QUALITY_LAYERS
 = 8 ;

247 cÚ¡ 
UIÁ
 
	gLUMA_LEVEL_TO_DQP_LUT_MAXSIZE
 = 1024;

249 #ià
FGS_RDD5_ENABLE


250 cÚ¡ 
IÁ
 
	gMAX_NUM_INTENSITIES
 = 256;

251 cÚ¡ 
IÁ
 
	gMAX_NUM_MODEL_VALUES
 = 6;

257 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše
 
T
 
	$Cl3
 (cÚ¡ 
T
 
mšV®
, cÚ¡ T 
maxV®
, cÚ¡ T 
a
è{  
¡d
::
mš
<T> (¡d::
max
<T> (mšV®,‡è, maxV®); 
	}
}

258 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše
 
T
 
	$ClBD
(cÚ¡ 
T
 
x
, cÚ¡ 
IÁ
 
b™D•th
è{  
	`Cl3
(
	`T
(0), T((1 << b™D•th)-1), x); 
	}
}

260 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše
 
Void
 
	$Check3
Ð
T
 
mšV®
, T 
maxV®
, T 
a
)

262 ià((
a
 > 
maxV®
è|| (¨< 
mšV®
))

264 
¡d
::
û¼
 << "ERROR: Rªgcheck " << 
mšV®
 << " >ð" << 
a
 << " <ð" << 
maxV®
 << " fažed" << std::
’dl
;

265 
	`as£¹
(
çl£
);

266 
	`ex™
(1);

268 
	}
}

270 
	#DATA_ALIGN
 1

271 #ià 
DATA_ALIGN
 && 
_WIN32
 && ( 
_MSC_VER
 > 1300 )

	)

272 
	#xM®loc
Ð
ty³
, 
Ën
 ) 
	`_®igÃd_m®loc
ÐÑy³)*Ö’), 32 )

	)

273 
	#xF»e
Ð
±r
 ) 
	`_®igÃd_ä“
 (…Œ )

	)

275 
	#xM®loc
Ð
ty³
, 
Ën
 ) 
	`m®loc
 ( Ñy³)*Ö’è)

	)

276 
	#xF»e
Ð
±r
 ) 
	`ä“
 (…Œ )

	)

279 
	#FATAL_ERROR_0
(
MESSAGE
, 
EXITCODE
) \

281 
	`´štf
(
MESSAGE
); \

282 
	`ex™
(
EXITCODE
); \

283 }

	)

285 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
V®ueTy³
 
	$ËáShiá
 (cÚ¡ 
V®ueTy³
 
v®ue
, cÚ¡ 
IÁ
 
shiá
è{  (shiá >ð0è? ( v®u<< shiáè: ( v®u>> -shiá); 
	}
}

286 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
V®ueTy³
 
	$rightShiá
 (cÚ¡ 
V®ueTy³
 
v®ue
, cÚ¡ 
IÁ
 
shiá
è{  (shiá >ð0è? ( v®u>> shiáè: ( v®u<< -shiá); 
	}
}

287 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
V®ueTy³
 
	$ËáShiá_round
 (cÚ¡ 
V®ueTy³
 
v®ue
, cÚ¡ 
IÁ
 
shiá
è{  (shiá >ð0è? ( v®u<< shiáè: ((v®u+ (
	`V®ueTy³
(1è<< (-shiá - 1))è>> -shiá); 
	}
}

288 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
V®ueTy³
 
	$rightShiá_round
(cÚ¡ 
V®ueTy³
 
v®ue
, cÚ¡ 
IÁ
 
shiá
è{  (shiá >ð0è? ((v®u+ (
	`V®ueTy³
(1è<< (shiá - 1))è>> shiáè: ( v®u<< -shiá); 
	}
}

289 #ià
O0043_BEST_EFFORT_DECODING


294 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
V®ueTy³
 
	$rightShiáEv’Roundšg
(cÚ¡ 
V®ueTy³
 
v®ue
, cÚ¡ 
UIÁ
 
shiá
è{  (shiá =ð0è? v®u: ((v®u+ (1<<(shiá-1))-1 + ((v®ue>>shiá)&1)è>> shiáè; 
	}
}

	@source/Lib/TLibCommon/ContextModel.cpp

38 
	~<®gÜ™hm
>

40 
	~"CÚ‹xtMod–.h
"

42 
usšg
 
Çme¥aû
 
	g¡d
;

56 
Void
 
	gCÚ‹xtMod–
::
	$š™
Ð
IÁ
 
qp
, IÁ 
š™V®ue
 )

58 
qp
 = 
	`Cl3
(0, 51, qp);

60 
IÁ
 
¦Ýe
 = (
š™V®ue
>>4)*5 - 45;

61 
IÁ
 
off£t
 = ((
š™V®ue
&15)<<3)-16;

62 
IÁ
 
š™S‹
 = 
	`mš
Ð
	`max
Ð1, ( ( ( 
¦Ýe
 * 
qp
 ) >> 4 ) + 
off£t
 ) ), 126 );

63 
UIÁ
 
mpS‹
 = (
š™S‹
 >= 64 );

64 
m_ucS‹
 = ( (
mpS‹
? (
š™S‹
 - 64):(63 - initState)) <<1) + mpState;

65 
	}
}

67 cÚ¡ 
UCh¬
 
	gCÚ‹xtMod–
::
m_aucNextS‹MPS
[ 
CÚ‹xtMod–
::
m_tÙ®S‹s
 ] =

79 cÚ¡ 
UCh¬
 
	gCÚ‹xtMod–
::
m_aucNextS‹LPS
[ 
CÚ‹xtMod–
::
m_tÙ®S‹s
 ] =

91 #ià
FAST_BIT_EST


92 
UCh¬
 
	gCÚ‹xtMod–
::
m_ÃxtS‹
[ 
CÚ‹xtMod–
::
m_tÙ®S‹s
 ][2 ];

94 
Void
 
	gCÚ‹xtMod–
::
	$buždNextS‹TabË
()

96 
IÁ
 
i
 = 0; i < 
CÚ‹xtMod–
::
m_tÙ®S‹s
; i++)

98 
IÁ
 
j
 = 0; j < 2; j++)

100 
m_ÃxtS‹
[
i
][
j
] = ((i&1è=ðjè? 
m_aucNextS‹MPS
[i] : 
m_aucNextS‹LPS
[i];

103 
	}
}

106 cÚ¡ 
IÁ
 
	gCÚ‹xtMod–
::
m_’ŒÝyB™s
[ 
CÚ‹xtMod–
::
m_tÙ®S‹s
 ] =

108 #ià
FAST_BIT_EST


	@source/Lib/TLibCommon/ContextModel.h

39 #iâdeà
__CONTEXTMODEL__


40 
	#__CONTEXTMODEL__


	)

42 #ià
_MSC_VER
 > 1000

43 #´agm¨
Úû


46 
	~"CommÚDef.h
"

47 
	~"TComRom.h
"

57 þas 
	cCÚ‹xtMod–


59 
	mpublic
:

60 
	$CÚ‹xtMod–
 (è{ 
m_ucS‹
 = 0; 
m_bšsCoded
 = 0; }

61 ~
	$CÚ‹xtMod–
 (è{
	}
}

63 
UCh¬
 
	$g‘S‹
 (è{  ( 
m_ucS‹
 >> 1 ); 
	}
}

64 
UCh¬
 
	$g‘Mps
 (è{  ( 
m_ucS‹
 & 1 ); 
	}
}

65 
Void
 
	$£tS‹AndMps
Ð
UCh¬
 
ucS‹
, UCh¬ 
ucMPS
è{ 
m_ucS‹
 = (ucS‹ << 1è+ ucMPS; 
	}
}

67 
Void
 
š™
 ( 
IÁ
 
qp
, IÁ 
š™V®ue
 );

69 
Void
 
	$upd©eLPS
 ()

71 
m_ucS‹
 = 
m_aucNextS‹LPS
[ m_ucState ];

72 
	}
}

74 
Void
 
	$upd©eMPS
 ()

76 
m_ucS‹
 = 
m_aucNextS‹MPS
[ m_ucState ];

77 
	}
}

79 
IÁ
 
	$g‘EÁrÝyB™s
(
ShÜt
 
v®
è{  
m_’ŒÝyB™s
[
m_ucS‹
 ^ v®]; 
	}
}

81 #ià
FAST_BIT_EST


82 
Void
 
	$upd©e
Ð
IÁ
 
bšV®
 )

84 
m_ucS‹
 = 
m_ÃxtS‹
[m_ucS‹][
bšV®
];

85 
	}
}

86 
Void
 
buždNextS‹TabË
();

87 
IÁ
 
	$g‘EÁrÝyB™sTrm
Ð
IÁ
 
v®
 ) {  
m_’ŒÝyB™s
[126 ^ v®]; 
	}
}

89 
Void
 
	$£tBšsCoded
(
UIÁ
 
v®
è{ 
m_bšsCoded
 = v®; 
	}
}

90 
UIÁ
 
	$g‘BšsCoded
(è{  
m_bšsCoded
; 
	}
}

92 
	g´iv©e
:

93 
UCh¬
 
m_ucS‹
;

95 cÚ¡ 
UIÁ
 
	gm_tÙ®S‹s
 = (1 << 
CONTEXT_STATE_BITS
) * 2;

96 cÚ¡ 
UCh¬
 
	gm_aucNextS‹MPS
[
m_tÙ®S‹s
];

97 cÚ¡ 
UCh¬
 
	gm_aucNextS‹LPS
[
m_tÙ®S‹s
];

98 cÚ¡ 
IÁ
 
	gm_’ŒÝyB™s
 [
m_tÙ®S‹s
];

99 #ià
FAST_BIT_EST


100 
UCh¬
 
	gm_ÃxtS‹
[
m_tÙ®S‹s
][2 ];

102 
UIÁ
 
	gm_bšsCoded
;

	@source/Lib/TLibCommon/ContextModel3DBuffer.cpp

38 
	~"CÚ‹xtMod–3DBufãr.h
"

47 
	gCÚ‹xtMod–3DBufãr
::
	$CÚ‹xtMod–3DBufãr
Ð
UIÁ
 
uiSizeZ
, UIÁ 
uiSizeY
, UIÁ 
uiSizeX
, 
CÚ‹xtMod–
 *
ba£PŒ
, 
IÁ
 &
couÁ
 )

48 : 
	`m_sizeX
 ( 
uiSizeX
 )

49 , 
	`m_sizeXY
 ( 
uiSizeX
 * 
uiSizeY
 )

50 , 
	$m_sizeXYZ
Ð
uiSizeX
 * 
uiSizeY
 * 
uiSizeZ
 )

53 
m_cÚ‹xtMod–
 = 
ba£PŒ
;

54 
couÁ
 +ð
m_sizeXYZ
;

55 
	}
}

68 
Void
 
	gCÚ‹xtMod–3DBufãr
::
	$š™Bufãr
Ð
SliûTy³
 
¦iûTy³
, 
IÁ
 
qp
, 
UCh¬
* 
ùxMod–
 )

70 
ùxMod–
 +ð
¦iûTy³
 * 
m_sizeXYZ
;

72  
IÁ
 
n
 = 0;‚ < 
m_sizeXYZ
;‚++ )

74 
m_cÚ‹xtMod–
[ 
n
 ].
	`š™
Ð
qp
, 
ùxMod–
[‚ ] );

75 
m_cÚ‹xtMod–
[ 
n
 ].
	`£tBšsCoded
( 0 );

77 
	}
}

86 
UIÁ
 
	gCÚ‹xtMod–3DBufãr
::
	$ÿlcCo¡
Ð
SliûTy³
 
¦iûTy³
, 
IÁ
 
qp
, 
UCh¬
* 
ùxMod–
 )

88 
UIÁ
 
co¡
 = 0;

89 
ùxMod–
 +ð
¦iûTy³
 * 
m_sizeXYZ
;

91  
IÁ
 
n
 = 0;‚ < 
m_sizeXYZ
;‚++ )

93 
CÚ‹xtMod–
 
tmpCÚ‹xtMod–
;

94 
tmpCÚ‹xtMod–
.
	`š™
Ð
qp
, 
ùxMod–
[ 
n
 ] );

97 cÚ¡ 
DoubË
 
aS‹ToProbLPS
[] = {0.50000000, 0.47460857, 0.45050660, 0.42762859, 0.40591239, 0.38529900, 0.36573242, 0.34715948, 0.32952974, 0.31279528, 0.29691064, 0.28183267, 0.26752040, 0.25393496, 0.24103941, 0.22879875, 0.21717969, 0.20615069, 0.19568177, 0.18574449, 0.17631186, 0.16735824, 0.15885931, 0.15079198, 0.14313433, 0.13586556, 0.12896592, 0.12241667, 0.11620000, 0.11029903, 0.10469773, 0.09938088, 0.09433404, 0.08954349, 0.08499621, 0.08067986, 0.07658271, 0.07269362, 0.06900203, 0.06549791, 0.06217174, 0.05901448, 0.05601756, 0.05317283, 0.05047256, 0.04790942, 0.04547644, 0.04316702, 0.04097487, 0.03889405, 0.03691890, 0.03504406, 0.03326442, 0.03157516, 0.02997168, 0.02844963, 0.02700488, 0.02563349, 0.02433175, 0.02309612, 0.02192323, 0.02080991, 0.01975312, 0.01875000};

99 
DoubË
 
´obLPS
 = 
aS‹ToProbLPS
[ 
m_cÚ‹xtMod–
[ 
n
 ].
	`g‘S‹
() ];

100 
DoubË
 
´ob0
, 
´ob1
;

101 ià(
m_cÚ‹xtMod–
[ 
n
 ].
	`g‘Mps
()==1)

103 
´ob0
 = 
´obLPS
;

104 
´ob1
 = 1.0-
´ob0
;

108 
´ob1
 = 
´obLPS
;

109 
´ob0
 = 1.0-
´ob1
;

112 ià(
m_cÚ‹xtMod–
[ 
n
 ].
	`g‘BšsCoded
()>0)

114 
co¡
 +ð(
UIÁ
è(
´ob0
 * 
tmpCÚ‹xtMod–
.
	`g‘EÁrÝyB™s
Ð0 ) + 
´ob1
 *mpContextModel.getEntropyBits( 1 ));

118  
co¡
;

119 
	}
}

	@source/Lib/TLibCommon/ContextModel3DBuffer.h

38 #iâdeà
__CONTEXTMODEL3DBUFFER__


39 
	#__CONTEXTMODEL3DBUFFER__


	)

41 
	~<¡dio.h
>

42 
	~<memÜy.h
>

44 
	~"CommÚDef.h
"

45 
	~"CÚ‹xtMod–.h
"

55 þas 
	cCÚ‹xtMod–3DBufãr


57 
	m´Ùeùed
:

58 
CÚ‹xtMod–
* 
m_cÚ‹xtMod–
;

59 cÚ¡ 
UIÁ
 
	mm_sizeX
;

60 cÚ¡ 
UIÁ
 
	mm_sizeXY
;

61 cÚ¡ 
UIÁ
 
	mm_sizeXYZ
;

63 
	mpublic
:

64 
CÚ‹xtMod–3DBufãr
 ( 
UIÁ
 
uiSizeZ
, UIÁ 
uiSizeY
, UIÁ 
uiSizeX
, 
CÚ‹xtMod–
 *
ba£PŒ
, 
IÁ
 &
couÁ
 );

65 ~
	$CÚ‹xtMod–3DBufãr
 () {}

68 
CÚ‹xtMod–
& 
	$g‘
Ð
UIÁ
 
uiZ
, UIÁ 
uiY
, UIÁ 
uiX
 )

70  
m_cÚ‹xtMod–
[ 
uiZ
 * 
m_sizeXY
 + 
uiY
 * 
m_sizeX
 + 
uiX
 ];

71 
	}
}

72 
CÚ‹xtMod–
* 
	$g‘
Ð
UIÁ
 
uiZ
, UIÁ 
uiY
 )

74  &
m_cÚ‹xtMod–
[ 
uiZ
 * 
m_sizeXY
 + 
uiY
 * 
m_sizeX
 ];

75 
	}
}

76 
CÚ‹xtMod–
* 
	$g‘
Ð
UIÁ
 
uiZ
 )

78  &
m_cÚ‹xtMod–
[ 
uiZ
 * 
m_sizeXY
 ];

79 
	}
}

82 
Void
 
š™Bufãr
Ð
SliûTy³
 
eSliûTy³
, 
IÁ
 
iQp
, 
UCh¬
* 
ùxMod–
 );

84 
UIÁ
 
ÿlcCo¡
Ð
SliûTy³
 
¦iûTy³
, 
IÁ
 
qp
, 
UCh¬
* 
ùxMod–
 );

88 
Void
 
	$cÝyFrom
ÐcÚ¡ 
CÚ‹xtMod–3DBufãr
* 
¤c
 )

90 
	`as£¹
Ð
m_sizeXYZ
 =ð
¤c
->m_sizeXYZ );

91 ::
	`memýy
Ð
m_cÚ‹xtMod–
, 
¤c
->m_cÚ‹xtMod–, (
CÚ‹xtMod–
è* 
m_sizeXYZ
 );

92 
	}
}

	@source/Lib/TLibCommon/ContextTables.h

39 #iâdeà
__CONTEXTTABLES__


40 
	#__CONTEXTTABLES__


	)

49 
	#MAX_NUM_CTX_MOD
 512

50 

	)

51 
	#NUM_SPLIT_FLAG_CTX
 3

52 
	#NUM_SKIP_FLAG_CTX
 3

53 

	)

54 
	#NUM_MERGE_FLAG_EXT_CTX
 1

55 
	#NUM_MERGE_IDX_EXT_CTX
 1

56 

	)

57 
	#NUM_PART_SIZE_CTX
 4

58 
	#NUM_PRED_MODE_CTX
 1

59 

	)

60 
	#NUM_INTRA_PREDICT_CTX
 1

61 

	)

62 
	#NUM_CHROMA_PRED_CTX
 2

63 
	#NUM_INTER_DIR_CTX
 5

64 
	#NUM_MV_RES_CTX
 2

65 
	#NUM_CHROMA_QP_ADJ_FLAG_CTX
 1

66 
	#NUM_CHROMA_QP_ADJ_IDC_CTX
 1

67 

	)

68 
	#NUM_REF_NO_CTX
 2

69 
	#NUM_TRANS_SUBDIV_FLAG_CTX
 3

70 
	#NUM_QT_ROOT_CBF_CTX
 1

71 
	#NUM_DELTA_QP_CTX
 3

72 

	)

73 
	#NUM_SIG_CG_FLAG_CTX
 2

74 
	#NUM_EXPLICIT_RDPCM_FLAG_CTX
 1

75 
	#NUM_EXPLICIT_RDPCM_DIR_CTX
 1

76 

	)

81 
	#NUM_SIG_FLAG_CTX_LUMA
 28

82 
	#NUM_SIG_FLAG_CTX_CHROMA
 16

83 

	)

85 cÚ¡ 
UIÁ
 
	gsignifiÿnûM­CÚ‹xtS‘S¹
 [
MAX_NUM_CHANNEL_TYPE
][
CONTEXT_NUMBER_OF_TYPES
] = { {0, 9, 21, 27}, {0, 9, 12, 15} };

86 cÚ¡ 
UIÁ
 
	gsignifiÿnûM­CÚ‹xtS‘Size
 [
MAX_NUM_CHANNEL_TYPE
][
CONTEXT_NUMBER_OF_TYPES
] = { {9, 12, 6, 1}, {9, 3, 3, 1} };

87 cÚ¡ 
UIÁ
 
	gnÚDŸgÚ®Sÿn8x8CÚ‹xtOff£t
 [
MAX_NUM_CHANNEL_TYPE
] = { 6, 0 };

88 cÚ¡ 
UIÁ
 
	gnÙFœ¡GroupNeighbourhoodCÚ‹xtOff£t
[
MAX_NUM_CHANNEL_TYPE
] = { 3, 0 };

92 
	#NEIGHBOURHOOD_00_CONTEXT_1_THRESHOLD_4x4
 3

	)

93 
	#NEIGHBOURHOOD_00_CONTEXT_2_THRESHOLD_4x4
 1

	)

97 
	#FIRST_SIG_FLAG_CTX_LUMA
 0

	)

98 
	#FIRST_SIG_FLAG_CTX_CHROMA
 (
FIRST_SIG_FLAG_CTX_LUMA
 + 
NUM_SIG_FLAG_CTX_LUMA
)

	)

100 
	#NUM_SIG_FLAG_CTX
 (
NUM_SIG_FLAG_CTX_LUMA
 + 
NUM_SIG_FLAG_CTX_CHROMA
)

101 

	)

106 
	#NUM_CTX_LAST_FLAG_SETS
 2

	)

108 
	#NUM_CTX_LAST_FLAG_XY
 15

109 

	)

114 
	#NUM_ONE_FLAG_CTX_PER_SET
 4

115 
	#NUM_ABS_FLAG_CTX_PER_SET
 1

116 

	)

119 
	#NUM_CTX_SETS_LUMA
 4

120 
	#NUM_CTX_SETS_CHROMA
 2

121 

	)

122 
	#FIRST_CTX_SET_LUMA
 0

123 

	)

126 
	#NUM_ONE_FLAG_CTX_LUMA
 (
NUM_ONE_FLAG_CTX_PER_SET
 * 
NUM_CTX_SETS_LUMA
)

127 
	#NUM_ONE_FLAG_CTX_CHROMA
 (
NUM_ONE_FLAG_CTX_PER_SET
 * 
NUM_CTX_SETS_CHROMA
)

128 

	)

129 
	#NUM_ABS_FLAG_CTX_LUMA
 (
NUM_ABS_FLAG_CTX_PER_SET
 * 
NUM_CTX_SETS_LUMA
)

130 
	#NUM_ABS_FLAG_CTX_CHROMA
 (
NUM_ABS_FLAG_CTX_PER_SET
 * 
NUM_CTX_SETS_CHROMA
)

131 

	)

132 
	#NUM_ONE_FLAG_CTX
 (
NUM_ONE_FLAG_CTX_LUMA
 + 
NUM_ONE_FLAG_CTX_CHROMA
)

133 
	#NUM_ABS_FLAG_CTX
 (
NUM_ABS_FLAG_CTX_LUMA
 + 
NUM_ABS_FLAG_CTX_CHROMA
)

134 

	)

135 
	#FIRST_CTX_SET_CHROMA
 (
FIRST_CTX_SET_LUMA
 + 
NUM_CTX_SETS_LUMA
)

136 

	)

141 
	#NUM_QT_CBF_CTX_SETS
 2

	)

143 
	#NUM_QT_CBF_CTX_PER_SET
 5

144 

	)

145 
	#FIRST_CBF_CTX_LUMA
 0

146 

	)

147 
	#FIRST_CBF_CTX_CHROMA
 (
FIRST_CBF_CTX_LUMA
 + 
NUM_QT_CBF_CTX_PER_SET
)

148 

	)

152 
	#NUM_MVP_IDX_CTX
 1

153 

	)

154 
	#NUM_SAO_MERGE_FLAG_CTX
 1

155 
	#NUM_SAO_TYPE_IDX_CTX
 1

156 

	)

157 
	#NUM_TRANSFORMSKIP_FLAG_CTX
 1

158 

	)

159 
	#NUM_CU_TRANSQUANT_BYPASS_FLAG_CTX
 1

	)

161 
	#NUM_CROSS_COMPONENT_PREDICTION_CTX
 10

	)

163 
	#CNU
 154

164 

	)

171 cÚ¡ 
UCh¬


172 
	gINIT_CU_TRANSQUANT_BYPASS_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_CU_TRANSQUANT_BYPASS_FLAG_CTX
] =

180 cÚ¡ 
UCh¬


181 
	gINIT_SPLIT_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_SPLIT_FLAG_CTX
] =

188 cÚ¡ 
UCh¬


189 
	gINIT_SKIP_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_SKIP_FLAG_CTX
] =

193 { 
CNU
, CNU, CNU, },

196 cÚ¡ 
UCh¬


197 
	gINIT_MERGE_FLAG_EXT
[
NUMBER_OF_SLICE_TYPES
][
NUM_MERGE_FLAG_EXT_CTX
] =

201 { 
CNU
, },

204 cÚ¡ 
UCh¬


205 
	gINIT_MERGE_IDX_EXT
[
NUMBER_OF_SLICE_TYPES
][
NUM_MERGE_IDX_EXT_CTX
] =

209 { 
CNU
, },

212 cÚ¡ 
UCh¬


213 
	gINIT_PART_SIZE
[
NUMBER_OF_SLICE_TYPES
][
NUM_PART_SIZE_CTX
] =

217 { 184, 
CNU
, CNU, CNU },

220 cÚ¡ 
UCh¬


221 
	gINIT_PRED_MODE
[
NUMBER_OF_SLICE_TYPES
][
NUM_PRED_MODE_CTX
] =

225 { 
CNU
, },

228 cÚ¡ 
UCh¬


229 
	gINIT_INTRA_PRED_MODE
[
NUMBER_OF_SLICE_TYPES
][
NUM_INTRA_PREDICT_CTX
] =

236 cÚ¡ 
UCh¬


237 
	gINIT_CHROMA_PRED_MODE
[
NUMBER_OF_SLICE_TYPES
][
NUM_CHROMA_PRED_CTX
] =

244 cÚ¡ 
UCh¬


245 
	gINIT_INTER_DIR
[
NUMBER_OF_SLICE_TYPES
][
NUM_INTER_DIR_CTX
] =

249 { 
CNU
, CNU, CNU, CNU, CNU, },

252 cÚ¡ 
UCh¬


253 
	gINIT_MVD
[
NUMBER_OF_SLICE_TYPES
][
NUM_MV_RES_CTX
] =

257 { 
CNU
, CNU, },

260 cÚ¡ 
UCh¬


261 
	gINIT_REF_PIC
[
NUMBER_OF_SLICE_TYPES
][
NUM_REF_NO_CTX
] =

265 { 
CNU
, CNU },

268 cÚ¡ 
UCh¬


269 
	gINIT_DQP
[
NUMBER_OF_SLICE_TYPES
][
NUM_DELTA_QP_CTX
] =

276 cÚ¡ 
UCh¬


277 
	gINIT_CHROMA_QP_ADJ_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_CHROMA_QP_ADJ_FLAG_CTX
] =

284 cÚ¡ 
UCh¬


285 
	gINIT_CHROMA_QP_ADJ_IDC
[
NUMBER_OF_SLICE_TYPES
][
NUM_CHROMA_QP_ADJ_IDC_CTX
] =

297 
	#BSLICE_LUMA_CBF_CONTEXT
 153, 111, 
CNU
, CNU, 
	)
CNU

298 
	#PSLICE_LUMA_CBF_CONTEXT
 153, 111, 
CNU
, CNU, 
	)
CNU

299 
	#ISLICE_LUMA_CBF_CONTEXT
 111, 141, 
CNU
, CNU, 
	)
CNU

301 
	#BSLICE_CHROMA_CBF_CONTEXT
 149, 92, 167, 154, 154

	)

302 
	#PSLICE_CHROMA_CBF_CONTEXT
 149, 107, 167, 154, 154

	)

303 
	#ISLICE_CHROMA_CBF_CONTEXT
 94, 138, 182, 154, 154

	)

306 cÚ¡ 
UCh¬


307 
	gINIT_QT_CBF
[
NUMBER_OF_SLICE_TYPES
][
NUM_QT_CBF_CTX_SETS
 * 
NUM_QT_CBF_CTX_PER_SET
] =

309 { 
BSLICE_LUMA_CBF_CONTEXT
, 
BSLICE_CHROMA_CBF_CONTEXT
 },

310 { 
PSLICE_LUMA_CBF_CONTEXT
, 
PSLICE_CHROMA_CBF_CONTEXT
 },

311 { 
ISLICE_LUMA_CBF_CONTEXT
, 
ISLICE_CHROMA_CBF_CONTEXT
 },

317 cÚ¡ 
UCh¬


318 
	gINIT_QT_ROOT_CBF
[
NUMBER_OF_SLICE_TYPES
][
NUM_QT_ROOT_CBF_CTX
] =

322 { 
CNU
, },

331 
	#BSLICE_LUMA_LAST_POSITION_CONTEXT
 125, 110, 124, 110, 95, 94, 125, 111, 111, 79, 125, 126, 111, 111, 79

	)

332 
	#PSLICE_LUMA_LAST_POSITION_CONTEXT
 125, 110, 94, 110, 95, 79, 125, 111, 110, 78, 110, 111, 111, 95, 94

	)

333 
	#ISLICE_LUMA_LAST_POSITION_CONTEXT
 110, 110, 124, 125, 140, 153, 125, 127, 140, 109, 111, 143, 127, 111, 79

	)

335 
	#BSLICE_CHROMA_LAST_POSITION_CONTEXT
 108, 123, 93, 
CNU
, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, 
	)
CNU

336 
	#PSLICE_CHROMA_LAST_POSITION_CONTEXT
 108, 123, 108, 
CNU
, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, 
	)
CNU

337 
	#ISLICE_CHROMA_LAST_POSITION_CONTEXT
 108, 123, 63, 
CNU
, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, CNU, 
	)
CNU

340 cÚ¡ 
UCh¬


341 
	gINIT_LAST
[
NUMBER_OF_SLICE_TYPES
][
NUM_CTX_LAST_FLAG_SETS
 * 
NUM_CTX_LAST_FLAG_XY
] =

343 { 
BSLICE_LUMA_LAST_POSITION_CONTEXT
, 
BSLICE_CHROMA_LAST_POSITION_CONTEXT
 },

344 { 
PSLICE_LUMA_LAST_POSITION_CONTEXT
, 
PSLICE_CHROMA_LAST_POSITION_CONTEXT
 },

345 { 
ISLICE_LUMA_LAST_POSITION_CONTEXT
, 
ISLICE_CHROMA_LAST_POSITION_CONTEXT
 },

351 cÚ¡ 
UCh¬


352 
	gINIT_SIG_CG_FLAG
[
NUMBER_OF_SLICE_TYPES
][2 * 
NUM_SIG_CG_FLAG_CTX
] =

372 
	#BSLICE_LUMA_SIGNIFICANCE_CONTEXT
 170, 154, 139, 153, 139, 123, 123, 63, 124, 166, 183, 140, 136, 153, 154, 166, 183, 140, 136, 153, 154, 166, 183, 140, 136, 153, 154, 140

	)

373 
	#PSLICE_LUMA_SIGNIFICANCE_CONTEXT
 155, 154, 139, 153, 139, 123, 123, 63, 153, 166, 183, 140, 136, 153, 154, 166, 183, 140, 136, 153, 154, 166, 183, 140, 136, 153, 154, 140

	)

374 
	#ISLICE_LUMA_SIGNIFICANCE_CONTEXT
 111, 111, 125, 110, 110, 94, 124, 108, 124, 107, 125, 141, 179, 153, 125, 107, 125, 141, 179, 153, 125, 107, 125, 141, 179, 153, 125, 141

	)

377 
	#BSLICE_CHROMA_SIGNIFICANCE_CONTEXT
 170, 153, 138, 138, 122, 121, 122, 121, 167, 151, 183, 140, 151, 183, 140, 140

	)

378 
	#PSLICE_CHROMA_SIGNIFICANCE_CONTEXT
 170, 153, 123, 123, 107, 121, 107, 121, 167, 151, 183, 140, 151, 183, 140, 140

	)

379 
	#ISLICE_CHROMA_SIGNIFICANCE_CONTEXT
 140, 139, 182, 182, 152, 136, 152, 136, 153, 136, 139, 111, 136, 139, 111, 111

	)

383 cÚ¡ 
UCh¬


384 
	gINIT_SIG_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_SIG_FLAG_CTX
] =

386 { 
BSLICE_LUMA_SIGNIFICANCE_CONTEXT
, 
BSLICE_CHROMA_SIGNIFICANCE_CONTEXT
 },

387 { 
PSLICE_LUMA_SIGNIFICANCE_CONTEXT
, 
PSLICE_CHROMA_SIGNIFICANCE_CONTEXT
 },

388 { 
ISLICE_LUMA_SIGNIFICANCE_CONTEXT
, 
ISLICE_CHROMA_SIGNIFICANCE_CONTEXT
 },

397 
	#BSLICE_LUMA_ONE_CONTEXT
 154, 196, 167, 167, 154, 152, 167, 182, 182, 134, 149, 136, 153, 121, 136, 122

	)

398 
	#PSLICE_LUMA_ONE_CONTEXT
 154, 196, 196, 167, 154, 152, 167, 182, 182, 134, 149, 136, 153, 121, 136, 137

	)

399 
	#ISLICE_LUMA_ONE_CONTEXT
 140, 92, 137, 138, 140, 152, 138, 139, 153, 74, 149, 92, 139, 107, 122, 152

	)

401 
	#BSLICE_LUMA_ABS_CONTEXT
 107, 167, 91, 107

	)

402 
	#PSLICE_LUMA_ABS_CONTEXT
 107, 167, 91, 122

	)

403 
	#ISLICE_LUMA_ABS_CONTEXT
 138, 153, 136, 167

	)

406 
	#BSLICE_CHROMA_ONE_CONTEXT
 169, 208, 166, 167, 154, 152, 167, 182

	)

407 
	#PSLICE_CHROMA_ONE_CONTEXT
 169, 194, 166, 167, 154, 167, 137, 182

	)

408 
	#ISLICE_CHROMA_ONE_CONTEXT
 140, 179, 166, 182, 140, 227, 122, 197

	)

410 
	#BSLICE_CHROMA_ABS_CONTEXT
 107, 167

	)

411 
	#PSLICE_CHROMA_ABS_CONTEXT
 107, 167

	)

412 
	#ISLICE_CHROMA_ABS_CONTEXT
 152, 152

	)

417 cÚ¡ 
UCh¬


418 
	gINIT_ONE_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_ONE_FLAG_CTX
] =

420 { 
BSLICE_LUMA_ONE_CONTEXT
, 
BSLICE_CHROMA_ONE_CONTEXT
 },

421 { 
PSLICE_LUMA_ONE_CONTEXT
, 
PSLICE_CHROMA_ONE_CONTEXT
 },

422 { 
ISLICE_LUMA_ONE_CONTEXT
, 
ISLICE_CHROMA_ONE_CONTEXT
 },

425 cÚ¡ 
UCh¬


426 
	gINIT_ABS_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_ABS_FLAG_CTX
] =

428 { 
BSLICE_LUMA_ABS_CONTEXT
, 
BSLICE_CHROMA_ABS_CONTEXT
 },

429 { 
PSLICE_LUMA_ABS_CONTEXT
, 
PSLICE_CHROMA_ABS_CONTEXT
 },

430 { 
ISLICE_LUMA_ABS_CONTEXT
, 
ISLICE_CHROMA_ABS_CONTEXT
 },

436 cÚ¡ 
UCh¬


437 
	gINIT_MVP_IDX
[
NUMBER_OF_SLICE_TYPES
][
NUM_MVP_IDX_CTX
] =

441 { 
CNU
, },

444 cÚ¡ 
UCh¬


445 
	gINIT_SAO_MERGE_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_SAO_MERGE_FLAG_CTX
] =

452 cÚ¡ 
UCh¬


453 
	gINIT_SAO_TYPE_IDX
[
NUMBER_OF_SLICE_TYPES
][
NUM_SAO_TYPE_IDX_CTX
] =

460 cÚ¡ 
UCh¬


461 
	gINIT_TRANS_SUBDIV_FLAG
[
NUMBER_OF_SLICE_TYPES
][
NUM_TRANS_SUBDIV_FLAG_CTX
] =

468 cÚ¡ 
UCh¬


469 
	gINIT_TRANSFORMSKIP_FLAG
[
NUMBER_OF_SLICE_TYPES
][2*
NUM_TRANSFORMSKIP_FLAG_CTX
] =

476 cÚ¡ 
UCh¬


477 
	gINIT_EXPLICIT_RDPCM_FLAG
[
NUMBER_OF_SLICE_TYPES
][2*
NUM_EXPLICIT_RDPCM_FLAG_CTX
] =

481 {
CNU
, CNU}

484 cÚ¡ 
UCh¬


485 
	gINIT_EXPLICIT_RDPCM_DIR
[
NUMBER_OF_SLICE_TYPES
][2*
NUM_EXPLICIT_RDPCM_DIR_CTX
] =

489 {
CNU
, CNU}

492 cÚ¡ 
UCh¬


493 
	gINIT_CROSS_COMPONENT_PREDICTION
[
NUMBER_OF_SLICE_TYPES
][
NUM_CROSS_COMPONENT_PREDICTION_CTX
] =

	@source/Lib/TLibCommon/Debug.cpp

38 
	~"Debug.h
"

39 
	~<®gÜ™hm
>

40 
	~<m©h.h
>

41 
	~"TComD©aCU.h
"

42 
	~"TComPic.h
"

43 
	~"TComYuv.h
"

45 cÚ¡ 
UIÁ
 
	g£‰šgNameWidth
 = 66;

46 cÚ¡ 
UIÁ
 
	g£‰šgH–pWidth
 = 84;

47 cÚ¡ 
UIÁ
 
	g£‰šgV®ueWidth
 = 3;

49 #ià
DEBUG_STRING


51 cÚ¡ 
TCh¬
 *
	gdebug_»Üd”_d©a_š‹r_tok’
[
MAX_NUM_COMPONENT
+1]

53 cÚ¡ 
TCh¬
 *
	g·¹SizeToSŒšg
[
NUMBER_OF_PART_SIZES
]={"2Nx2N(0)", "2NxN(1)", "Nx2N(2)", "NxN(3)", "2Nx(N/2+3N/2)(4)", "2Nx(3N/2+N/2)(5)", "(N/2+3N/2)x2N(6)", "(3N/2+N/2)x2N(7)"};

60 
	g¡d
::
li¡
<
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg> > &
EnvV¬
::
	$g‘EnvV¬Li¡
()

62 
¡d
::
li¡
<¡d::
·œ
<¡d::
¡ršg
, std::¡ršg> > 
v¬InfoLi¡
;

63  
v¬InfoLi¡
;

64 
	}
}

66 
	g¡d
::
li¡
<
EnvV¬
*> &EnvV¬::
	$g‘EnvV¬InU£
()

68 
¡d
::
li¡
<
EnvV¬
*> 
v¬InU£Li¡
;

69  
v¬InU£Li¡
;

70 
	}
}

72 
šlše
 
Void
 
´štPaœ
(cÚ¡ 
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg> &
p
)

74 ià(
p
.
£cÚd
=="")

76 
¡d
::
cout
 << "\n" << std::
£tw
(
£‰šgNameWidth
è<< 
p
.
fœ¡
 << "\n" << std::
’dl
;

80 
	g¡d
::
cout
 << 
¡d
::
£tw
(
£‰šgNameWidth
è<< 
p
.
fœ¡
 << ": " <<….
£cÚd
 << "\n" << std::
’dl
;

84 
šlše
 
Void
 
	$´štV®
(cÚ¡ 
EnvV¬
* 
’v
)

86 
¡d
::
cout
 << std::
	`£tw
(
£‰šgNameWidth
è<< 
’v
->
	`g‘Name
(è<< " = " << std::£tw(
£‰šgV®ueWidth
è<<ƒnv->
	`g‘IÁ
(è<< " (¡ršg = " << std::£tw(15è<<ƒnv->
	`g‘SŒšg
(è<< ")" << std::
’dl
;

87 
	}
}

96 
Void
 
	gEnvV¬
::
	$´štEnvV¬
()

99 ià(
	`g‘EnvV¬Li¡
().
	`size
()!=0)

101 
¡d
::
cout
 << "--- EnvœÚm’ˆv¬ŸbËs:\n" << std::
’dl
;

102 
	`fÜ_—ch
(
	`g‘EnvV¬Li¡
().
	`begš
(), g‘EnvV¬Li¡().
	`’d
(), 
´štPaœ
);

104 
¡d
::
cout
 << std::
’dl
;

105 
	}
}

107 
Void
 
	gEnvV¬
::
	$´štEnvV¬InU£
()

109 ià(
	`g‘EnvV¬InU£
().
	`size
()!=0)

111 
¡d
::
cout
 << "RExˆEnvœÚm’ˆv¬ŸbË £ˆa fÞlows: \n" << std::
’dl
;

112 
	`fÜ_—ch
(
	`g‘EnvV¬InU£
().
	`begš
(), g‘EnvV¬InU£().
	`’d
(), 
´štV®
);

114 
¡d
::
cout
 << std::
’dl
;

115 
	}
}

117 
	gEnvV¬
::
	$EnvV¬
(cÚ¡ 
¡d
::
¡ršg
 &
sName
, cÚ¡ std::¡ršg &
sDeçuÉ
, cÚ¡ std::¡ršg &
sH–p
) :

118 
	`m_sName
(
sName
),

119 
	`m_sH–p
(
sH–p
),

120 
	`m_sV®
(),

121 
	`m_dV®
(0),

122 
	`m_iV®
(0),

123 
	$m_bS‘
(
çl£
)

125 ià(
	`g‘’v
(
m_sName
.
	`c_¡r
()))

127 
m_sV®
 = 
	`g‘’v
(
m_sName
.
	`c_¡r
());

128 
m_bS‘
 = 
Œue
;

129 
	`g‘EnvV¬InU£
().
	`push_back
(
this
);

133 
m_sV®
 = 
sDeçuÉ
;

136 
m_dV®
 = 
	`¡¹od
(
m_sV®
.
	`c_¡r
(), 0);

137 
m_iV®
 = 
	`IÁ
(
m_dV®
);

139 
	`g‘EnvV¬Li¡
().
	`push_back
Ð
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>(
m_sName
, 
	`šd’tNewLšes
(
	`lšeW¿p
(
	`¥l™OnS‘tšgs
(
m_sH–p
), 
£‰šgH–pWidth
), (
£‰šgNameWidth
 + 4))) );

140 
	}
}

147 
EnvV¬
 
Debug
("-- Debugging","","");

149 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSBAC
 ("DEBUG_SBAC", "0", "Output debug data from SBACƒntropy coder (coefficient dataƒtc.)" );

150 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugRQT
 ("DEBUG_RQT", "0", "Output RQT debug data fromƒntropy coder" );

151 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugP»d
 ("DEBUG_PRED", "0", "Output…rediction debug" );

152 
EnvV¬
 
	gDebugO±iÚLi¡
::
FÜûLumaMode
 ("FORCE_LUMA_MODE", "0", "Force‡…articular intra direction for Luma (0-34)" );

153 
EnvV¬
 
	gDebugO±iÚLi¡
::
FÜûChromaMode
 ("FORCE_CHROMA_MODE", "0", "Force‡…articular intra direction for chroma (0-5)" );

155 #ià
DEBUG_STRING


156 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSŒšg_SŒuùu»
 ("DEBUG_STRUCTURE", "0", "Produce output on chosen structure bit0=intra, bit1=inter");

157 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSŒšg_P»d
 ("DEBUG_PRED", "0", "Produce output on…rediction data. bit0=intra, bit1=inter");

158 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSŒšg_Resi
 ("DEBUG_RESI", "0", "Produce output on„esidual data. bit0=intra, bit1=inter");

159 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSŒšg_Reco
 ("DEBUG_RECO", "0", "Produce output on„econstructed data. bit0=intra, bit1=inter");

160 
EnvV¬
 
	gDebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
 ("DEBUG_INV_QT", "0", "Produce output on inverse-quantiser‡ndransform stages. bit0=intra, bit1=inter");

167 
Void
 
	$´štMaüoS‘tšgs
()

169 
¡d
::
cout
 << "NÚ-’vœÚm’t-v¬ŸbË-cÚŒÞËd maüo £ˆa fÞlows: \n" << std::
’dl
;

175 
	`PRINT_CONSTANT
(
RExt__DECODER_DEBUG_BIT_STATISTICS
, 
£‰šgNameWidth
, 
£‰šgV®ueWidth
);

176 
	`PRINT_CONSTANT
(
RExt__HIGH_BIT_DEPTH_SUPPORT
, 
£‰šgNameWidth
, 
£‰šgV®ueWidth
);

177 
	`PRINT_CONSTANT
(
RExt__HIGH_PRECISION_FORWARD_TRANSFORM
, 
£‰šgNameWidth
, 
£‰šgV®ueWidth
);

179 
	`PRINT_CONSTANT
(
O0043_BEST_EFFORT_DECODING
, 
£‰šgNameWidth
, 
£‰šgV®ueWidth
);

181 
	`PRINT_CONSTANT
(
ME_ENABLE_ROUNDING_OF_MVS
, 
£‰šgNameWidth
, 
£‰šgV®ueWidth
);

185 
¡d
::
cout
 << std::
’dl
;

186 
	}
}

193 
UIÁ
 
	gg_debugCouÁ”
 = 0;

195 #ià
DEBUG_ENCODER_SEARCH_BINS


196 cÚ¡ 
UIÁ
 
	gdebugEncod”S—rchBšT¬g‘Lše
 = 0;

197 cÚ¡ 
UIÁ
 
	gdebugEncod”S—rchBšWšdow
 = 1000000;

200 #ià
DEBUG_CABAC_BINS


201 cÚ¡ 
UIÁ
 
	gdebugCabacBšT¬g‘Lše
 = 0;

202 cÚ¡ 
UIÁ
 
	gdebugCabacBšWšdow
 = 1000000;

205 
Void
 
	$´štSBACCÛffD©a
ÐcÚ¡ 
UIÁ
 
Ï¡X
,

206 cÚ¡ 
UIÁ
 
Ï¡Y
,

207 cÚ¡ 
UIÁ
 
width
,

208 cÚ¡ 
UIÁ
 
height
,

209 cÚ¡ 
UIÁ
 
chª
,

210 cÚ¡ 
UIÁ
 
absP¬t
,

211 cÚ¡ 
UIÁ
 
sÿnIdx
,

212 cÚ¡ 
TCÛff
 *cÚ¡ 
pCÛff
,

213 cÚ¡ 
BoÞ
 
fš®Encode


216 ià(
DebugO±iÚLi¡
::
DebugSBAC
.
	`g‘IÁ
()!=0 && 
fš®Encode
)

218 
¡d
::
cout
 << "Size: " << 
width
 << "x" << 
height
 << ", La¡ X/Y: (" << 
Ï¡X
 << ", " << 
Ï¡Y
 << "),‡bsP¬tIdx: " << 
absP¬t
 << ", sÿnIdx: " << 
sÿnIdx
 << ", chª: " << 
chª
 << "\n";

219 
IÁ
 
i
=0; i<
width
*
height
; i++)

221 
¡d
::
cout
 << std::
	`£tw
(3è<< 
pCÛff
[
i
];

222 ià(
i
%
width
 == width-1)

224 
¡d
::
cout
 << "\n";

228 
¡d
::
cout
 << ",";

231 
¡d
::
cout
 << std::
’dl
;

233 
	}
}

235 
Void
 
	$´štCbfA¼ay
Ð
TComD©aCU
* 
pcCU
 )

237 cÚ¡ 
UIÁ
 
CUSizeInP¬ts
 = 
pcCU
->
	`g‘Width
(0)/4;

238 cÚ¡ 
UIÁ
 
numV®idComp
=
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

239 
UIÁ
 
ch
=0; ch<
numV®idComp
; ch++)

241 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

242 
	`´štf
("chªÃl: %d\n", 
ch
);

243 
IÁ
 
y
=0; y<
CUSizeInP¬ts
; y++)

245 
IÁ
 
x
=0; x<
CUSizeInP¬ts
; x++)

247 
	`´štf
(
x
+1==
CUSizeInP¬ts
?"%3d\n":"%3d, ", 
pcCU
->
	`g‘Cbf
(
compID
)[
g_auiRa¡”ToZsÿn
[
y
*CUSizeInParts + x]]);

251 
	}
}

253 
UIÁ
 
	$g‘Decim®Width
(cÚ¡ 
DoubË
 
v®ue
)

255  (
v®ue
 =ð0è? 1 : (
	`UIÁ
(
	`æoÜ
(
	`log10
(
	`çbs
(value)))) + ((value < 0) ? 2 : 1));

257 
	}
}

259 
UIÁ
 
	$g‘ZSÿnIndex
(cÚ¡ 
UIÁ
 
x
, cÚ¡ UIÁ 
y
)

261 
UIÁ
 
»maššgX
 = 
x
;

262 
UIÁ
 
»maššgY
 = 
y
;

263 
UIÁ
 
off£t
 = 0;

264 
UIÁ
 
»suÉ
 = 0;

266 (
»maššgX
 !ð0è|| (
»maššgY
 != 0))

268 
»suÉ
 |ð((
»maššgX
 & 0x1è<< 
off£t
è| ((
»maššgY
 & 0x1) << (offset + 1));

270 
»maššgX
 >>= 1;

271 
»maššgY
 >>= 1;

272 
off£t
 += 2;

275  
»suÉ
;

276 
	}
}

284 
	g¡d
::
¡ršg
 
	$¥l™OnS‘tšgs
(cÚ¡ 
¡d
::
¡ršg
 &
šput
)

286 
¡d
::
¡ršg
 
»suÉ
 = 
šput
;

288 
¡d
::
¡ršg
::
size_ty³
 
£¬chFromPos™iÚ
 = 0;

290 
£¬chFromPos™iÚ
 < 
»suÉ
.
	`Ëngth
())

293 
¡d
::
¡ršg
::
size_ty³
 
equ®sPos™iÚ
 = 
»suÉ
.
	`fšd
(" = ", 
£¬chFromPos™iÚ
);

295 ià(
equ®sPos™iÚ
 =ð
¡d
::
¡ršg
::
Åos
)

301 
¡d
::
¡ršg
::
size_ty³
 
¥l™Pos™iÚ
 = 
»suÉ
.
	`fšd_Ï¡_of
("1234567890", 
equ®sPos™iÚ
);

304 ià(
¥l™Pos™iÚ
 !ð
¡d
::
¡ršg
::
Åos
)

306 
¥l™Pos™iÚ
 = 
»suÉ
.
	`fšd_Ï¡_of
(' ', splitPosition);

310 ià(
¥l™Pos™iÚ
 !ð
¡d
::
¡ršg
::
Åos
)

312 
»suÉ
.
	`»¶aû
(
¥l™Pos™iÚ
, 1, 1, '\n');

316 
£¬chFromPos™iÚ
 = (
equ®sPos™iÚ
 + 3);

319  
»suÉ
;

320 
	}
}

323 
	g¡d
::
¡ršg
 
	$lšeW¿p
(cÚ¡ 
¡d
::
¡ršg
 &
šput
, cÚ¡ 
UIÁ
 
maximumLšeL’gth
)

325 ià(
maximumLšeL’gth
 == 0)

327  
šput
;

329 
¡d
::
¡ršg
 
»suÉ
 = 
šput
;

331 
¡d
::
¡ršg
::
size_ty³
 
lšeS¹Pos™iÚ
 = 
»suÉ
.
	`fšd_fœ¡_nÙ_of
(' ');

333 
lšeS¹Pos™iÚ
 !ð
¡d
::
¡ršg
::
Åos
)

337 cÚ¡ 
¡d
::
¡ršg
::
size_ty³
 
£¬chFromPos™iÚ
 = 
lšeS¹Pos™iÚ
 + 
maximumLšeL’gth
;

339 ià(
£¬chFromPos™iÚ
 >ð
»suÉ
.
	`Ëngth
())

348 
¡d
::
¡ršg
::
size_ty³
 
ÃxtLšeS¹Pos™iÚ
 = std::¡ršg::
Åos
;

349 
¡d
::
¡ršg
::
size_ty³
 
cu¼’tPos™iÚ
 = 
lšeS¹Pos™iÚ
; cu¼’tPos™iÚ <ð
£¬chFromPos™iÚ
; currentPosition++)

351 ià(
»suÉ
[
cu¼’tPos™iÚ
] == '\n')

353 
ÃxtLšeS¹Pos™iÚ
 = 
cu¼’tPos™iÚ
 + 1;

361 ià(
ÃxtLšeS¹Pos™iÚ
 !ð
¡d
::
¡ršg
::
Åos
)

363 
lšeS¹Pos™iÚ
 = 
ÃxtLšeS¹Pos™iÚ
;

367 
¡d
::
¡ršg
::
size_ty³
 
¥aûPos™iÚ
 = std::¡ršg::
Åos
;

370 
IÁ
 
cu¼’tPos™iÚ
 = 
	`IÁ
(
£¬chFromPos™iÚ
); cu¼’tPos™iÚ >ðIÁ(
lšeS¹Pos™iÚ
); currentPosition--)

372 ià(
»suÉ
[
cu¼’tPos™iÚ
] == ' ')

374 
¥aûPos™iÚ
 = 
cu¼’tPos™iÚ
;

380 ià(
¥aûPos™iÚ
 =ð
¡d
::
¡ršg
::
Åos
)

382 
»suÉ
.
	`š£¹
(
£¬chFromPos™iÚ
, "-\n");

383 
lšeS¹Pos™iÚ
 = 
£¬chFromPos™iÚ
 + 2;

387 
»suÉ
.
	`»¶aû
(
¥aûPos™iÚ
, 1, 1, '\n');

388 
lšeS¹Pos™iÚ
 = 
¥aûPos™iÚ
 + 1;

395  
»suÉ
;

396 
	}
}

399 
	g¡d
::
¡ršg
 
	$šd’tNewLšes
(cÚ¡ 
¡d
::
¡ršg
 &
šput
, cÚ¡ 
UIÁ
 
šd’tBy
)

401 
¡d
::
¡ršg
 
»suÉ
 = 
šput
;

403 cÚ¡ 
¡d
::
¡ršg
 
	`šd’tSŒšg
(
šd’tBy
, ' ');

404 
¡d
::
¡ršg
::
size_ty³
 
off£t
 = 0;

406 (
off£t
 = 
»suÉ
.
	`fšd
('\n', off£t)è!ð
¡d
::
¡ršg
::
Åos
)

408 ià((++
off£t
è>ð
»suÉ
.
	`Ëngth
())

412 
»suÉ
.
	`š£¹
(
off£t
, 
šd’tSŒšg
);

415  
»suÉ
;

416 
	}
}

422 
Void
 
	$´štBlockToSŒ—m
Ð
¡d
::
o¡»am
 &
ss
, cÚ¡ 
TCh¬
 *
pLšeP»fix
, 
TComYuv
 &
¤c
, cÚ¡ 
UIÁ
 
numSubBlocksAüoss
, cÚ¡ UIÁ 
numSubBlocksUp
, cÚ¡ UIÁ 
defWidth
 )

424 cÚ¡ 
UIÁ
 
numV®idComp
=
¤c
.
	`g‘Numb”V®idCompÚ’ts
();

426 
UIÁ
 
ch
=0; ch<
numV®idComp
 ; ch++)

428 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

429 cÚ¡ 
UIÁ
 
width
 = 
¤c
.
	`g‘Width
(
compID
);

430 cÚ¡ 
UIÁ
 
height
 = 
¤c
.
	`g‘Height
(
compID
);

431 cÚ¡ 
UIÁ
 
¡ride
 = 
¤c
.
	`g‘SŒide
(
compID
);

432 cÚ¡ 
P–
* 
blkSrc
 = 
¤c
.
	`g‘Addr
(
compID
);

433 cÚ¡ 
UIÁ
 
subBlockWidth
=
width
/
numSubBlocksAüoss
;

434 cÚ¡ 
UIÁ
 
subBlockHeight
=
height
/
numSubBlocksUp
;

436 
ss
 << 
pLšeP»fix
 << " compID: " << 
compID
 << "\n";

437 
UIÁ
 
y
=0; y<
height
; y++)

439 ià((
y
%
subBlockHeight
)==0 && y!=0)

441 
ss
 << 
pLšeP»fix
 << '\n';

444 
ss
 << 
pLšeP»fix
;

445 
UIÁ
 
x
=0; x<
width
; x++)

447 ià((
x
%
subBlockWidth
)==0 && x!=0)

449 
ss
 << 
¡d
::
	`£tw
(
defWidth
+2) << "";

452 
ss
 << 
¡d
::
	`£tw
(
defWidth
è<< 
blkSrc
[
y
*
¡ride
 + 
x
] << ' ';

454 
ss
 << '\n';

456 
ss
 << 
pLšeP»fix
 << " --- \n";

458 
	}
}

460 #ià
DEBUG_STRING


461 
IÁ
 
	$DebugSŒšgG‘P»dModeMask
(
P»dMode
 
mode
)

463  (
mode
==
MODE_INTRA
)?1:2;

464 
	}
}

466 
Void
 
	$DebugIÁ”P»dResiReco
(
¡d
::
¡ršg
 &
sDebug
, 
TComYuv
 &
´ed
, TComYuv &
»si
, TComYuv &
»co
, 
IÁ
 
´edmode_mask
)

468 ià(
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
	`g‘IÁ
()&
´edmode_mask
)

470 
¡d
::
¡ršg¡»am
 
	`ss
(¡d::¡ršg¡»am::
out
);

471 
	`´štBlockToSŒ—m
(
ss
, "###š‹r-´ed: ", 
´ed
);

472 
¡d
::
¡ršg
 
debugTmp
;

473 
debugTmp
=
ss
.
	`¡r
();

474 
sDebug
=
debugTmp
+sDebug;

476 ià(
DebugO±iÚLi¡
::
DebugSŒšg_Resi
.
	`g‘IÁ
()&
´edmode_mask
)

478 
¡d
::
¡ršg¡»am
 
	`ss
(¡d::¡ršg¡»am::
out
);

479 
	`´štBlockToSŒ—m
(
ss
, "###š‹r-»si: ", 
»si
);

480 
sDebug
+=
ss
.
	`¡r
();

482 ià(
DebugO±iÚLi¡
::
DebugSŒšg_Reco
.
	`g‘IÁ
()&
´edmode_mask
)

484 
¡d
::
¡ršg¡»am
 
	`ss
(¡d::¡ršg¡»am::
out
);

485 
	`´štBlockToSŒ—m
(
ss
, "###š‹r-»co: ", 
»co
);

486 
sDebug
+=
ss
.
	`¡r
();

488 
	}
}

	@source/Lib/TLibCommon/Debug.h

38 #iâdeà
__DEBUG__


39 
	#__DEBUG__


	)

41 
	~<io¡»am
>

42 
	~<iomª
>

43 
	~<¡ršg
>

44 
	~<li¡
>

45 
	~<¡dlib.h
>

46 
	~<s¡»am
>

47 
	~<TLibCommÚ/CommÚDef.h
>

49 #ià
DEBUG_STRING


50 cÚ¡ 
TCh¬
 *
debug_»Üd”_d©a_š‹r_tok’
[
MAX_NUM_COMPONENT
+1];

51 cÚ¡ 
TCh¬
 *
·¹SizeToSŒšg
[
NUMBER_OF_PART_SIZES
];

58 
	#PRINT_CONSTANT
(
NAME
, 
NAME_WIDTH
, 
VALUE_WIDTH
è
¡d
::
cout
 << std::
	`£tw
(NAME_WIDTHè<< #NAME << " = " << std::£tw(VALUE_WIDTHè<< NAME << std::
’dl
;

	)

64 þas 
	cEnvV¬


66 
	m´iv©e
:

67 
¡d
::
¡ršg
 
m_sName
;

68 
	m¡d
::
¡ršg
 
m_sH–p
;

69 
	m¡d
::
¡ršg
 
m_sV®
;

70 
DoubË
 
	mm_dV®
;

71 
IÁ
 
	mm_iV®
;

72 
BoÞ
 
	mm_bS‘
;

74 
	mpublic
:

76 
¡d
::
li¡
< std::
·œ
<¡d::
¡ršg
, 
	m¡d
::¡ršg> > &
g‘EnvV¬Li¡
();

77 
	m¡d
::
li¡
<
EnvV¬
*> &
g‘EnvV¬InU£
();

78 
Void
 
´štEnvV¬
();

79 
Void
 
´štEnvV¬InU£
();

81 
EnvV¬
(cÚ¡ 
¡d
::
¡ršg
 &
sName
, cÚ¡ std::¡ršg &
sDeçuÉ
, cÚ¡ std::¡ršg &
sH–p
);

83 
DoubË
 
	$g‘DoubË
(ècÚ¡ {  
m_dV®
; }

84 
IÁ
 
	$g‘IÁ
(ècÚ¡ {  
m_iV®
; 
	}
}

85 cÚ¡ 
	g¡d
::
¡ršg
 &
	$g‘SŒšg
(ècÚ¡ {  
m_sV®
; 
	}
}

86 
BoÞ
 
	$isS‘
(ècÚ¡ {  
m_bS‘
; 
	}
}

87 
BoÞ
 
	$isTrue
(ècÚ¡ {  
m_iV®
!=0; 
	}
}

88 cÚ¡ 
	g¡d
::
¡ršg
 &
	$g‘Name
(ècÚ¡ {  
m_sName
; 
	}
}

97 
Çme¥aû
 
	gDebugO±iÚLi¡


99 
EnvV¬
 
DebugSBAC
;

100 
EnvV¬
 
DebugRQT
;

101 
EnvV¬
 
DebugP»d
;

102 
EnvV¬
 
FÜûLumaMode
;

103 
EnvV¬
 
FÜûChromaMode
;

105 #ià
DEBUG_STRING


106 
EnvV¬
 
DebugSŒšg_SŒuùu»
;

107 
EnvV¬
 
DebugSŒšg_P»d
;

108 
EnvV¬
 
DebugSŒšg_Resi
;

109 
EnvV¬
 
DebugSŒšg_Reco
;

110 
EnvV¬
 
DebugSŒšg_InvT¿n
;

116 
Void
 
´štMaüoS‘tšgs
();

122 
UIÁ
 
g_debugCouÁ”
;

124 #ià
DEBUG_ENCODER_SEARCH_BINS


125 cÚ¡ 
UIÁ
 
debugEncod”S—rchBšT¬g‘Lše
;

126 cÚ¡ 
UIÁ
 
debugEncod”S—rchBšWšdow
;

129 #ià
DEBUG_CABAC_BINS


130 cÚ¡ 
UIÁ
 
debugCabacBšT¬g‘Lše
;

131 cÚ¡ 
UIÁ
 
debugCabacBšWšdow
;

135 
Void
 
´štSBACCÛffD©a
ÐcÚ¡ 
UIÁ
 
Ï¡X
,

136 cÚ¡ 
UIÁ
 
Ï¡Y
,

137 cÚ¡ 
UIÁ
 
width
,

138 cÚ¡ 
UIÁ
 
height
,

139 cÚ¡ 
UIÁ
 
chª
,

140 cÚ¡ 
UIÁ
 
absP¬t
,

141 cÚ¡ 
UIÁ
 
sÿnIdx
,

142 cÚ¡ 
TCÛff
 *cÚ¡ 
pCÛff
,

143 cÚ¡ 
BoÞ
 
fš®Encode
=
Œue


147 
Void
 
´štCbfA¼ay
Ð
þass
 
TComD©aCU
* 
pcCU
 );

149 
UIÁ
 
g‘Decim®Width
(cÚ¡ 
DoubË
 
v®ue
);

150 
UIÁ
 
g‘ZSÿnIndex
(cÚ¡ UIÁ 
x
, cÚ¡ UIÁ 
y
);

153 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
> 
šlše
 
Void
 
	$wr™eV®ueToSŒ—m
 (cÚ¡ 
V®ueTy³
 &
v®ue
, 
¡d
::
o¡»am
 &
¡»am
, cÚ¡ 
UIÁ
 
ouutWidth
è{ sŒ—m << std::
	`£tw
(ouutWidthè<< v®ue; 
	}
}

154 
	g‹m¶©e
 <> 
šlše
 
Void
 
	gwr™eV®ueToSŒ—m
<
	gSCh¬
>(cÚ¡ SCh¬ &
	gv®ue
, 
	g¡d
::
o¡»am
 &
¡»am
, cÚ¡ 
UIÁ
 
	gouutWidth
è{ 
	g¡»am
 << std::
£tw
(
ouutWidth
è<< 
IÁ
(
v®ue
); }

155 
	g‹m¶©e
 <> 
šlše
 
Void
 
	gwr™eV®ueToSŒ—m
<
	gUCh¬
>(cÚ¡ UCh¬ &
	gv®ue
, 
	g¡d
::
o¡»am
 &
¡»am
, cÚ¡ 
UIÁ
 
	gouutWidth
è{ 
	g¡»am
 << std::
£tw
(
ouutWidth
è<< UIÁ(
v®ue
); }

157 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueTy³
>

158 
Void
 
	$´štBlock
(cÚ¡ 
V®ueTy³
 *cÚ¡ 
sourû
,

159 cÚ¡ 
UIÁ
 
width
,

160 cÚ¡ 
UIÁ
 
height
,

161 cÚ¡ 
UIÁ
 
¡ride
,

162 cÚ¡ 
UIÁ
 
ouutV®ueWidth
 = 0,

163 cÚ¡ 
BoÞ
 
ÚlyPrštEdges
 = 
çl£
,

164 cÚ¡ 
BoÞ
 
´štInZSÿn
 = 
çl£
,

165 cÚ¡ 
IÁ
 
shiáLeáBy
 = 0,

166 cÚ¡ 
BoÞ
 
´štAv”age
 = 
çl£
,

167 
¡d
::
o¡»am
 & 
¡»am
 = std::
cout
)

170 
UIÁ
 
ouutWidth
 = 
ouutV®ueWidth
;

172 ià(
ouutWidth
 == 0)

174 
V®ueTy³
 
mšimumV®ue
 = 
	`ËáShiá
(
sourû
[0], 
shiáLeáBy
);

175 
V®ueTy³
 
maximumV®ue
 = 
mšimumV®ue
;

177 
UIÁ
 
y
 = 0; y < 
height
; y++)

179 
UIÁ
 
x
 = 0; x < 
width
; x++)

181 
V®ueTy³
 
v®ue
 = 0;

183 ià(!
ÚlyPrštEdges
 || (
x
 =ð0è|| (
y
 == 0))

185 
v®ue
 = 
	`ËáShiá
(
sourû
[
´štInZSÿn
 ? 
	`g‘ZSÿnIndex
(
x
, 
y
è: ((y * 
¡ride
è+ x)], 
shiáLeáBy
);

188 ià(
v®ue
 < 
mšimumV®ue
)

190 
mšimumV®ue
 = 
v®ue
;

192 ià(
v®ue
 > 
maximumV®ue
)

194 
maximumV®ue
 = 
v®ue
;

199 
ouutWidth
 = 
¡d
::
max
<
UIÁ
>(
	`g‘Decim®Width
(
	`DoubË
(
mšimumV®ue
)), g‘Decim®Width(DoubË(
maximumV®ue
))) + 1;

205 
V®ueTy³
 
v®ueSum
 = 0;

207 
UIÁ
 
y
 = 0; y < 
height
; y++)

209 
UIÁ
 
x
 = 0; x < 
width
; x++)

211 
V®ueTy³
 
v®ue
 = 0;

213 ià(!
ÚlyPrštEdges
 || (
x
 =ð0è|| (
y
 == 0))

215 
v®ue
 = 
	`ËáShiá
(
sourû
[
´štInZSÿn
 ? 
	`g‘ZSÿnIndex
(
x
, 
y
è: ((y * 
¡ride
è+ x)], 
shiáLeáBy
);

216 
v®ueSum
 +ð
v®ue
;

219 
	`wr™eV®ueToSŒ—m
(
v®ue
, 
¡»am
, 
ouutWidth
);

221 
¡»am
 << "\n";

224 cÚ¡ 
IÁ
 
v®ueCouÁ
 = 
ÚlyPrštEdges
 ? 
	`IÁ
((
width
 + 
height
) - 1) : Int(width * height);

225 ià(
´štAv”age
)

227 
¡»am
 << "Av”age: " << (
v®ueSum
 / 
v®ueCouÁ
) << "\n";

229 
¡»am
 << "\n";

230 
	}
}

233 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

234 
Void
 
	$´štBlockToSŒ—m
Ð
¡d
::
o¡»am
 &
ss
, cÚ¡ 
TCh¬
 *
pLšeP»fix
, cÚ¡ 
T
 * 
blkSrc
, cÚ¡ 
UIÁ
 
width
, cÚ¡ UIÁ 
height
, cÚ¡ UIÁ 
¡ride
, cÚ¡ UIÁ 
subBlockWidth
=0, cÚ¡ UIÁ 
subBlockHeight
=0, cÚ¡ UIÁ 
defWidth
=3 )

236 
UIÁ
 
y
=0; y<
height
; y++)

238 ià(
subBlockHeight
!=0 && (
y
%subBlockHeight)==0 && y!=0)

240 
ss
 << 
pLšeP»fix
 << '\n';

243 
ss
 << 
pLšeP»fix
;

244 
UIÁ
 
x
=0; x<
width
; x++)

246 ià(
subBlockWidth
!=0 && (
x
%subBlockWidth)==0 && x!=0)

248 
ss
 << 
¡d
::
	`£tw
(
defWidth
+2) << "";

251 
ss
 << 
¡d
::
	`£tw
(
defWidth
è<< 
blkSrc
[
y
*
¡ride
 + 
x
] << ' ';

253 
ss
 << '\n';

255 
	}
}

257 
þass
 
	gTComYuv
;

258 
Void
 
´štBlockToSŒ—m
Ð
¡d
::
o¡»am
 &
ss
, cÚ¡ 
TCh¬
 *
pLšeP»fix
, 
TComYuv
 &
¤c
, cÚ¡ 
UIÁ
 
numSubBlocksAüoss
=1, cÚ¡ UIÁ 
numSubBlocksUp
=1, cÚ¡ UIÁ 
defWidth
=3 );

264 
	g¡d
::
¡ršg
 
¥l™OnS‘tšgs
(cÚ¡ 
¡d
::¡ršg &
šput
);

266 
	g¡d
::
¡ršg
 
lšeW¿p
(cÚ¡ 
¡d
::¡ršg &
šput
, cÚ¡ 
UIÁ
 
maximumLšeL’gth
);

268 
	g¡d
::
¡ršg
 
šd’tNewLšes
(cÚ¡ 
¡d
::¡ršg &
šput
, cÚ¡ 
UIÁ
 
šd’tBy
);

272 #ià
DEBUG_STRING


273 
IÁ
 
DebugSŒšgG‘P»dModeMask
(
P»dMode
 
mode
);

274 
Void
 
DebugIÁ”P»dResiReco
(
¡d
::
¡ršg
 &
sDebug
, 
TComYuv
 &
´ed
, TComYuv &
»si
, TComYuv &
»co
, 
IÁ
 
´edmode_mask
);

	@source/Lib/TLibCommon/NAL.h

34 #´agm¨
Úû


36 #iâdeà
__NAL__


37 
	#__NAL__


	)

39 
	~<s¡»am
>

40 
	~"CommÚDef.h
"

42 
þass
 
	gTComOuutB™¡»am
;

47 
	sNALUn™


49 
N®Un™Ty³
 
	mm_ÇlUn™Ty³
;

50 
UIÁ
 
	mm_‹mpÜ®Id
;

51 
UIÁ
 
	mm_nuhLay”Id
;

53 
NALUn™
(cÚ¡ NALUn™ &
¤c
)

54 :
m_ÇlUn™Ty³
 (
¤c
.m_nalUnitType)

55 ,
m_‹mpÜ®Id
 (
¤c
.m_temporalId)

56 ,
m_nuhLay”Id
 (
¤c
.m_nuhLayerId)

59 
NALUn™
(

60 
N®Un™Ty³
 
ÇlUn™Ty³
,

61 
IÁ
 
‹mpÜ®Id
 = 0,

62 
IÁ
 
nuhLay”Id
 = 0)

63 :
m_ÇlUn™Ty³
 (
ÇlUn™Ty³
)

64 ,
m_‹mpÜ®Id
 (
‹mpÜ®Id
)

65 ,
m_nuhLay”Id
 (
nuhLay”Id
)

69 
NALUn™
() {}

71 
	mvœtu®
 ~
NALUn™
() { }

74 
BoÞ
 
isSliû
()

76  
	mm_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_TRAIL_R


77 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_TRAIL_N


78 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_TSA_R


79 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_TSA_N


80 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_STSA_R


81 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_STSA_N


82 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


83 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


84 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


85 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


86 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


87 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_CRA


88 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_N


89 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_R


90 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N


91 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
;

93 
BoÞ
 
isSei
()

95  
	mm_ÇlUn™Ty³
 =ð
NAL_UNIT_PREFIX_SEI


96 || 
m_ÇlUn™Ty³
 =ð
NAL_UNIT_SUFFIX_SEI
;

99 
BoÞ
 
isVþ
()

101  ( (
	mUIÁ
)
	mm_ÇlUn™Ty³
 < 32 );

105 
	gOuutNALUn™
;

110 
	gNALUn™EBSP
 : 
public
 
NALUn™


112 
¡d
::
o¡ršg¡»am
 
m_ÇlUn™D©a
;

119 
NALUn™EBSP
(
OuutNALUn™
& 
Çlu
);

	@source/Lib/TLibCommon/ProfileLevelTierFeatures.cpp

38 
	~"TLibCommÚ/TComSliû.h
"

41 
	~<m©h.h
>

42 
	~"ProfžeLev–T›rF—tu»s.h
"

44 
UIÁ


45 
	gLev–T›rF—tu»s
::
	$g‘MaxPicWidthInLumaSam¶es
() const

47  
	`UIÁ
(
	`sq¹
(
maxLumaPs
*8.0));

48 
	}
}

50 
UIÁ


51 
	gLev–T›rF—tu»s
::
	$g‘MaxPicHeightInLumaSam¶es
() const

53  
	`UIÁ
(
	`sq¹
(
maxLumaPs
*8.0));

54 
	}
}

56 cÚ¡ 
UIÁ64
 
	gMAX_CNFUINT64
 = 
¡d
::
num”ic_lim™s
<UIÁ64>::
max
();

58 cÚ¡ 
Lev–T›rF—tu»s
 
	gmašLev–T›rInfo
[] =

60 { 
Lev–
::
LEVEL1
 , 36864, { 350, 0 }, 16, 1, 1, 552960ULL, { 128, 0 }, { 2, 2} },

61 { 
Lev–
::
LEVEL2
 , 122880, { 1500, 0 }, 16, 1, 1, 3686400ULL, { 1500, 0 }, { 2, 2} },

62 { 
Lev–
::
LEVEL2_1
, 245760, { 3000, 0 }, 20, 1, 1, 7372800ULL, { 3000, 0 }, { 2, 2} },

63 { 
Lev–
::
LEVEL3
 , 552960, { 6000, 0 }, 30, 2, 2, 16588800ULL, { 6000, 0 }, { 2, 2} },

64 { 
Lev–
::
LEVEL3_1
, 983040, { 10000, 0 }, 40, 3, 3, 33177600ULL, { 10000, 0 }, { 2, 2} },

65 { 
Lev–
::
LEVEL4
 , 2228224, { 12000, 30000 }, 75, 5, 5, 66846720ULL, { 12000, 30000 }, { 4, 4} },

66 { 
Lev–
::
LEVEL4_1
, 2228224, { 20000, 50000 }, 75, 5, 5, 133693440ULL, { 20000, 50000 }, { 4, 4} },

67 { 
Lev–
::
LEVEL5
 , 8912896, { 25000, 100000 }, 200, 11, 10, 267386880ULL, { 25000, 100000 }, { 6, 4} },

68 { 
Lev–
::
LEVEL5_1
, 8912896, { 40000, 160000 }, 200, 11, 10, 534773760ULL, { 40000, 160000 }, { 8, 4} },

69 { 
Lev–
::
LEVEL5_2
, 8912896, { 60000, 240000 }, 200, 11, 10, 1069547520ULL, { 60000, 240000 }, { 8, 4} },

70 { 
Lev–
::
LEVEL6
 , 35651584, { 60000, 240000 }, 600, 22, 20, 1069547520ULL, { 60000, 240000 }, { 8, 4} },

71 { 
Lev–
::
LEVEL6_1
, 35651584, { 120000, 480000 }, 600, 22, 20, 2139095040ULL, { 120000, 480000 }, { 8, 4} },

72 { 
Lev–
::
LEVEL6_2
, 35651584, { 240000, 800000 }, 600, 22, 20, 4278190080ULL, { 240000, 800000 }, { 6, 4} },

73 { 
Lev–
::
LEVEL8_5
, 
MAX_UINT
, { MAX_UINT, MAX_UINT }, MAX_UINT, MAX_UINT, MAX_UINT, 
MAX_CNFUINT64
, {MAX_UINT, MAX_UINT }, { 0, 0} },

74 { 
Lev–
::
NONE
 }

77 cÚ¡ 
ProfžeF—tu»s
 
	gv®idProfžes
[] =

79 { 
Profže
::
MAIN
, "Maš", 8, 
CHROMA_420
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

80 { 
Profže
::
MAIN10
, "Maš10", 10, 
CHROMA_420
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1
 , f®£, 256, 64, f®£, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

81 { 
Profže
::
MAIN10
, "Maš10 StžÈPiùu»", 10, 
CHROMA_420
, 
çl£
, 
Œue
, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1
 , f®£, 256, 64,ru, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

82 { 
Profže
::
MAINSTILLPICTURE
, "Maš StžÈPiùu»", 8, 
CHROMA_420
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1
 , f®£, 256, 64, 
Œue
 , 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

83 { 
Profže
::
MAINREXT
, "MÚochrome", 8, 
CHROMA_400
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 667, 733, 1000, 10 , 
mašLev–T›rInfo
 },

84 { 
Profže
::
MAINREXT
, "MÚochrom12", 12, 
CHROMA_400
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

85 { 
Profže
::
MAINREXT
, "MÚochrom16", 16, 
CHROMA_400
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1333, 1467, 2000, 10 , 
mašLev–T›rInfo
 },

86 { 
Profže
::
MAINREXT
, "Maš 12", 12, 
CHROMA_420
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1500, 1650, 2250, 10 , 
mašLev–T›rInfo
 },

87 { 
Profže
::
MAINREXT
, "Maš 4:2:2 10", 10, 
CHROMA_422
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1667, 1833, 2500, 5 , 
mašLev–T›rInfo
 },

88 { 
Profže
::
MAINREXT
, "Maš 4:2:2 12", 12, 
CHROMA_422
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

89 { 
Profže
::
MAINREXT
, "Maš 4:4:4", 8, 
CHROMA_444
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

90 { 
Profže
::
MAINREXT
, "Maš 4:4:4 10", 10, 
CHROMA_444
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2500, 2750, 3750, 5 , 
mašLev–T›rInfo
 },

91 { 
Profže
::
MAINREXT
, "Maš 4:4:4 12", 12, 
CHROMA_444
, 
çl£
, f®£, 
ProfžeF—tu»s
::
ENABLED
 , ProfžeF—tu»s::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 3000, 3300, 4500, 5 , 
mašLev–T›rInfo
 },

92 { 
Profže
::
MAINREXT
, "Maš IÁ¿", 8, 
CHROMA_420
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

93 { 
Profže
::
MAINREXT
, "Maš 10 IÁ¿", 10, 
CHROMA_420
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

94 { 
Profže
::
MAINREXT
, "Maš 12 IÁ¿", 12, 
CHROMA_420
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1500, 1650, 2250, 10 , 
mašLev–T›rInfo
 },

95 { 
Profže
::
MAINREXT
, "Maš 4:2:2 10 IÁ¿", 10, 
CHROMA_422
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1667, 1833, 2500, 5 , 
mašLev–T›rInfo
 },

96 { 
Profže
::
MAINREXT
, "Maš 4:2:2 12 IÁ¿", 12, 
CHROMA_422
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::DISABLED, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

97 { 
Profže
::
MAINREXT
, "Maš 4:4:4 IÁ¿", 8, 
CHROMA_444
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

98 { 
Profže
::
MAINREXT
, "Maš 4:4:4 10 IÁ¿", 10, 
CHROMA_444
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2500, 2750, 3750, 5 , 
mašLev–T›rInfo
 },

99 { 
Profže
::
MAINREXT
, "Maš 4:4:4 12 IÁ¿", 12, 
CHROMA_444
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 3000, 3300, 4500, 5 , 
mašLev–T›rInfo
 },

100 { 
Profže
::
MAINREXT
, "Maš 4:4:4 16 IÁ¿", 16, 
CHROMA_444
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

101 { 
Profže
::
MAINREXT
, "Maš 4:4:4 StžÈPiùu»", 8, 
CHROMA_444
, 
Œue
 ,ru, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::DISABLED, 
HBR_1_OR_2
 , 
çl£
, 256, 64,ru, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

102 { 
Profže
::
MAINREXT
, "Maš 4:4:4 16 StžÈPiùu»", 16, 
CHROMA_444
, 
Œue
 ,ru, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
DISABLED
, 
HBR_1_OR_2
 , 
çl£
, 256, 64,ru, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

103 { 
Profže
::
HIGHTHROUGHPUTREXT
, "High Throughpuˆ4:4:4 16 IÁ¿", 16, 
CHROMA_444
, 
Œue
 , 
çl£
, 
ProfžeF—tu»s
::
OPTIONAL
, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::OPTIONAL, ProfžeF—tu»s::
ENABLED
 , 
HBR_12_OR_24
 ,ru, 256, 64, f®£, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

104 { 
Profže
::
NONE
, 0 }

110 
Void


111 
	gProfžeLev–T›rF—tu»s
::
	$aùiv©e
(cÚ¡ 
TComSPS
 &
¥s
)

113 cÚ¡ 
ProfžeT›rLev–
 
±l
=*(
¥s
.
	`g‘PTL
()->
	`g‘G’”®PTL
());

114 
	`aùiv©e
(
±l
.
	`g‘ProfžeIdc
(),

115 
±l
.
	`g‘B™D•thCÚ¡¿št
(),

116 
±l
.
	`g‘ChromaFÜm©CÚ¡¿št
(),

117 
±l
.
	`g‘IÁ¿CÚ¡¿štFÏg
(),

118 
±l
.
	`g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(),

119 
±l
.
	`g‘Lev–Idc
(),

120 
±l
.
	`g‘T›rFÏg
(),

121 
¥s
.
	`g‘MaxCUWidth
(),

122 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
),

123 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
),

124 
¥s
.
	`g‘ChromaFÜm©Idc
());

125 
	}
}

127 
Void


128 
	gProfžeLev–T›rF—tu»s
::
	$aùiv©e
(cÚ¡ 
Profže
::
Name
 
´ofžeIdc
,

129 cÚ¡ 
UIÁ
 
b™D•thCÚ¡¿št
,

130 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©CÚ¡¿št
,

131 cÚ¡ 
BoÞ
 
šŒaCÚ¡¿štFÏg
,

132 cÚ¡ 
BoÞ
 
ÚePiùu»OÆyCÚ¡¿štFÏg
,

133 cÚ¡ 
Lev–
::
Name
 
Ëv–
,

134 cÚ¡ 
Lev–
::
T›r
 
t›r
,

135 cÚ¡ 
UIÁ
 
ùbSizeY
,

136 cÚ¡ 
UIÁ
 
b™D•thY
,

137 cÚ¡ 
UIÁ
 
b™D•thC
,

138 cÚ¡ 
ChromaFÜm©
 
chFÜm©
)

140 
m_t›r
 = 
t›r
;

142 
IÁ
 
i
=0; 
v®idProfžes
[i].
´ofže
 !ð
Profže
::
NONE
; i++)

144 ià(
´ofžeIdc
 =ð
v®idProfžes
[
i
].
´ofže
 &&

145 
b™D•thCÚ¡¿št
 =ð
v®idProfžes
[
i
].
maxB™D•th
 &&

146 
chromaFÜm©CÚ¡¿št
 =ð
v®idProfžes
[
i
].
maxChromaFÜm©
 &&

147 
šŒaCÚ¡¿štFÏg
 =ð
v®idProfžes
[
i
].
g’”®IÁ¿CÚ¡¿štFÏg
 &&

148 
ÚePiùu»OÆyCÚ¡¿štFÏg
 =ð
v®idProfžes
[
i
].
g’”®OÃPiùu»OÆyCÚ¡¿štFÏg
 )

150 
m_pProfže
 = &(
v®idProfžes
[
i
]);

155 ià(
m_pProfže
 != 0)

158 cÚ¡ 
Lev–T›rF—tu»s
 *
pLTF
 = 
m_pProfže
->
pLev–T›rsLi¡Info
;

159 cÚ¡ 
Lev–
::
Name
 
¥sLev–Name
 = 
Ëv–
;

160 ià(
¥sLev–Name
!=
Lev–
::
LEVEL8_5
 || 
m_pProfže
->
bCªU£Lev–8p5
)

162 
IÁ
 
i
=0; 
pLTF
[i].
Ëv–
!=
Lev–
::
NONE
; i++)

164 ià(
pLTF
[
i
].
Ëv–
 =ð
¥sLev–Name
)

166 
m_pLev–T›r
 = &(
pLTF
[
i
]);

173 cÚ¡ 
UIÁ
 
ùbWidthC
 = 
ùbSizeY
 >> 
	`g‘ChªÃlTy³SÿËX
(
CHANNEL_TYPE_CHROMA
, 
chFÜm©
);

174 cÚ¡ 
UIÁ
 
ùbHeightC
 = 
ùbSizeY
 >> 
	`g‘ChªÃlTy³SÿËY
(
CHANNEL_TYPE_CHROMA
, 
chFÜm©
);

176 cÚ¡ 
UIÁ
 
¿wCtuB™s
 = 
ùbSizeY
*ùbSizeY*
b™D•thY
+2*(
ùbWidthC
*
ùbHeightC
)*
b™D•thC
;

177 
m_maxRawCtuB™s
=(
¿wCtuB™s
*5)/3;

180 
	}
}

182 
IÁ
 
	gProfžeLev–T›rF—tu»s
::
	$g‘MaxDPBNumF¿mes
(cÚ¡ 
UIÁ
 
PicSizeInSam¶esY
)

184 
IÁ
 
MaxDpbSize
=-1;

186 ià(
m_pLev–T›r
!=0)

188 
UIÁ
 
MaxLumaPs
=
m_pLev–T›r
->
maxLumaPs
;

189 
IÁ
 
maxDpbPicBuf
=6;

191 ifÐ
PicSizeInSam¶esY
 <ðÐ
MaxLumaPs
 >> 2 ) )

193 
MaxDpbSize
 = 
	`mš
Ð4 * 
maxDpbPicBuf
, 16 );

195 ifÐ
PicSizeInSam¶esY
 <ðÐ
MaxLumaPs
 >> 1 ) )

197 
MaxDpbSize
 = 
	`mš
Ð2 * 
maxDpbPicBuf
, 16 );

199 ifÐ
PicSizeInSam¶esY
 <ðÐÐ3 * 
MaxLumaPs
 ) >> 2 ) )

201 
MaxDpbSize
 = 
	`mš
ÐÐ4 * 
maxDpbPicBuf
 ) / 3, 16 );

205 
MaxDpbSize
 = 
maxDpbPicBuf
;

208  
MaxDpbSize
;

209 
	}
}

	@source/Lib/TLibCommon/ProfileLevelTierFeatures.h

38 #iâdeà
__PROFILELEVELTIERFEATURES__


39 
	#__PROFILELEVELTIERFEATURES__


	)

43 #ià
_MSC_VER
 > 1000

44 #´agm¨
Úû


47 
	~"TLibCommÚ/CommÚDef.h
"

48 
	~<¡dio.h
>

49 
	~<io¡»am
>

53 
þass
 
	gTComSPS
;

54 
þass
 
	gProfžeT›rLev–
;

57 
	eHBRFACTOREQN


59 
	mHBR_1
 = 0,

60 
	mHBR_1_OR_2
 = 1,

61 
	mHBR_12_OR_24
 = 2

62 } 
	tHBRFACTOREQN
;

65 
	sLev–T›rF—tu»s


67 
	mLev–
::
Name
 
Ëv–
;

68 
UIÁ
 
	mmaxLumaPs
;

69 
UIÁ
 
	mmaxCpb
[
Lev–
::
NUMBER_OF_TIERS
];

70 
UIÁ
 
	mmaxSliûSegm’tsP”Piùu»
;

71 
UIÁ
 
	mmaxTžeRows
;

72 
UIÁ
 
	mmaxTžeCÞs
;

73 
UIÁ64
 
	mmaxLumaSr
;

74 
UIÁ
 
	mmaxBr
[
Lev–
::
NUMBER_OF_TIERS
];

75 
UIÁ
 
	mmšCrBa£
[
Lev–
::
NUMBER_OF_TIERS
];

76 
UIÁ
 
g‘MaxPicWidthInLumaSam¶es
() const;

77 
UIÁ
 
g‘MaxPicHeightInLumaSam¶es
() const;

81 
	sProfžeF—tu»s


84 
	eTRISTATE


86 
	mDISABLED
=0,

87 
	mOPTIONAL
=1,

88 
	mENABLED
=2

89 } 
	tTRISTATE
;

91 
	mProfže
::
Name
 
´ofže
;

92 cÚ¡ 
TCh¬
 *
	mpNameSŒšg
;

93 
UIÁ
 
	mmaxB™D•th
;

94 
ChromaFÜm©
 
	mmaxChromaFÜm©
;

95 
BoÞ
 
	mg’”®IÁ¿CÚ¡¿štFÏg
;

96 
BoÞ
 
	mg’”®OÃPiùu»OÆyCÚ¡¿štFÏg
;

97 
TRISTATE
 
	mg’”®Low”B™R©eCÚ¡¿št
;

98 
TRISTATE
 
	mg’”®RExtToÞsEÇbËd
;

99 
TRISTATE
 
	mex‹ndedP»cisiÚProûssšgFÏg
;

100 
TRISTATE
 
	mchromaQpOff£tLi¡EÇbËdFÏg
;

101 
TRISTATE
 
	mÿbacBy·ssAlignm’tEÇbËdFÏg
;

102 
HBRFACTOREQN
 
	mhbrFaùÜEqn
;

103 
BoÞ
 
	mbWaveäÚtsAndTžesCªBeU£dSimuÉªeou¦y
;

105 
UIÁ
 
	mmšTžeCÞumnWidthInLumaSam¶es
;

106 
UIÁ
 
	mmšTžeRowHeightInLumaSam¶es
;

107 
BoÞ
 
	mbCªU£Lev–8p5
;

108 
UIÁ
 
	mýbVþFaùÜ
;

109 
UIÁ
 
	mýbN®FaùÜ
;

110 
UIÁ
 
	mfÜm©C­abž™yFaùÜx1000
;

111 
UIÁ
 
	mmšCrSÿËFaùÜx10
;

112 cÚ¡ 
Lev–T›rF—tu»s
 *
	mpLev–T›rsLi¡Info
;

114 
BoÞ
 
chromaFÜm©V®id
(
ChromaFÜm©
 
chFmt
ècÚ¡ {  (
	m´ofže
 =ð
Profže
::
MAINREXT
 || 
´ofže
 =ðProfže::
HIGHTHROUGHPUTREXT
è? chFmt<=
maxChromaFÜm©
 : (chFmt == maxChromaFormat ); }

115 
BoÞ
 
ÚlyIRAPPiùu»s
(ècÚ¡ {  
	mg’”®IÁ¿CÚ¡¿štFÏg
; }

116 
UIÁ
 
g‘HbrFaùÜ
(
BoÞ
 
bLow”B™R©eCÚ¡¿štFÏg
) const

118  
	mhbrFaùÜEqn
==
HBR_1_OR_2
 ? (2-(
bLow”B™R©eCÚ¡¿štFÏg
?1:0)) :

119 (
hbrFaùÜEqn
==
HBR_12_OR_24
 ? 12*(2-(
bLow”B™R©eCÚ¡¿štFÏg
?1:0)) :

125 þas 
	cProfžeLev–T›rF—tu»s


127 
	m´iv©e
:

128 cÚ¡ 
ProfžeF—tu»s
 *
m_pProfže
;

129 cÚ¡ 
Lev–T›rF—tu»s
 *
	mm_pLev–T›r
;

131 
	mLev–
::
T›r
 
m_t›r
;

132 
UIÁ
 
	mm_maxRawCtuB™s
;

133 
	mpublic
:

134 
	$ProfžeLev–T›rF—tu»s
(è: 
	`m_pProfže
(0), 
	`m_pLev–T›r
(0), 
	`m_t›r
(
Lev–
::
MAIN
), 
	$m_maxRawCtuB™s
(0) { }

136 
Void
 
	`aùiv©e
(cÚ¡ 
Profže
::
Name
 
´ofžeIdc
,

137 cÚ¡ 
UIÁ
 
b™D•thCÚ¡¿št
,

138 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©CÚ¡¿št
,

139 cÚ¡ 
BoÞ
 
šŒaCÚ¡¿štFÏg
,

140 cÚ¡ 
BoÞ
 
ÚePiùu»OÆyCÚ¡¿štFÏg
,

141 cÚ¡ 
Lev–
::
Name
 
Ëv–
,

142 cÚ¡ 
Lev–
::
T›r
 
t›r
,

143 cÚ¡ 
UIÁ
 
ùbSizeY
,

144 cÚ¡ 
UIÁ
 
b™D•thY
,

145 cÚ¡ 
UIÁ
 
b™D•thC
,

146 cÚ¡ 
ChromaFÜm©
 
chFÜm©
);

148 
Void
 
	`aùiv©e
(cÚ¡ 
TComSPS
 &
¥s
);

150 cÚ¡ 
ProfžeF—tu»s
 *
	$g‘ProfžeF—tu»s
(ècÚ¡ {  
m_pProfže
; 
	}
}

151 cÚ¡ 
Lev–T›rF—tu»s
 *
	$g‘Lev–T›rF—tu»s
(ècÚ¡ {  
m_pLev–T›r
; 
	}
}

152 
	gLev–
::
T›r
 
	$g‘T›r
(ècÚ¡ {  
m_t›r
; 
	}
}

153 
UIÁ64
 
	$g‘CpbSizeInB™s
(ècÚ¡ {  (
m_pLev–T›r
!=0 && 
m_pProfže
!=0è? 
	`UIÁ64
(m_pProfže->
ýbVþFaùÜ
è* m_pLev–T›r->
maxCpb
[
m_t›r
?1:0] : UIÁ64(0); 
	}
}

154 
DoubË
 
	$g‘MšCr
(ècÚ¡ {  (
m_pLev–T›r
!=0 && 
m_pProfže
!=0è? (m_pProfže->
mšCrSÿËFaùÜx10
 * m_pLev–T›r->
mšCrBa£
[
m_t›r
?1:0])/10.0 : 0.0 ; 
	}
}

155 
UIÁ
 
	$g‘MaxRawCtuB™s
(ècÚ¡ {  
m_maxRawCtuB™s
; 
	}
}

156 
IÁ
 
g‘MaxDPBNumF¿mes
(cÚ¡ 
UIÁ
 
PicSizeInSam¶esY
);

	@source/Lib/TLibCommon/SEI.cpp

38 
	~"CommÚDef.h
"

39 
	~"SEI.h
"

40 
	~<io¡»am
>

42 cÚ¡ 
	g¡d
::
veùÜ
<
SEI
::
PaylßdTy³
> SEI::
´efix_£i_mes§ges
({

43 
SEI
::
BUFFERING_PERIOD
,

44 
SEI
::
PICTURE_TIMING
,

45 
SEI
::
PAN_SCAN_RECT
,

46 
SEI
::
FILLER_PAYLOAD
,

47 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
,

48 
SEI
::
USER_DATA_UNREGISTERED
,

49 
SEI
::
RECOVERY_POINT
,

50 
SEI
::
SCENE_INFO
,

51 
SEI
::
PICTURE_SNAPSHOT
,

52 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_START
,

53 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_END
,

54 
SEI
::
FILM_GRAIN_CHARACTERISTICS
,

55 
SEI
::
POST_FILTER_HINT
,

56 
SEI
::
TONE_MAPPING_INFO
,

57 
SEI
::
FRAME_PACKING
,

58 
SEI
::
DISPLAY_ORIENTATION
,

59 
SEI
::
GREEN_METADATA
,

60 
SEI
::
SOP_DESCRIPTION
,

61 
SEI
::
ACTIVE_PARAMETER_SETS
,

62 
SEI
::
DECODING_UNIT_INFO
,

63 
SEI
::
TEMPORAL_LEVEL0_INDEX
,

64 
SEI
::
SCALABLE_NESTING
,

65 
SEI
::
REGION_REFRESH_INFO
,

66 
SEI
::
NO_DISPLAY
,

67 
SEI
::
TIME_CODE
,

68 
SEI
::
MASTERING_DISPLAY_COLOUR_VOLUME
,

69 
SEI
::
SEGM_RECT_FRAME_PACKING
,

70 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
,

71 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
,

72 
SEI
::
KNEE_FUNCTION_INFO
,

73 
SEI
::
COLOUR_REMAPPING_INFO
,

74 
SEI
::
DEINTERLACE_FIELD_IDENTIFICATION
,

75 
SEI
::
CONTENT_LIGHT_LEVEL_INFO
,

76 
SEI
::
DEPENDENT_RAP_INDICATION
,

77 
SEI
::
CODED_REGION_COMPLETION
,

78 
SEI
::
ALTERNATIVE_TRANSFER_CHARACTERISTICS
,

79 
SEI
::
AMBIENT_VIEWING_ENVIRONMENT


80 , 
SEI
::
CONTENT_COLOUR_VOLUME


81 , 
SEI
::
EQUIRECTANGULAR_PROJECTION


82 , 
SEI
::
SPHERE_ROTATION


83 , 
SEI
::
OMNI_VIEWPORT


84 , 
SEI
::
CUBEMAP_PROJECTION


85 , 
SEI
::
REGION_WISE_PACKING


86 , 
SEI
::
FISHEYE_VIDEO_INFO


87 , 
SEI
::
REGIONAL_NESTING


88 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


89 , 
SEI
::
SHUTTER_INTERVAL_INFO


93 cÚ¡ 
	g¡d
::
veùÜ
<
SEI
::
PaylßdTy³
> SEI::
suffix_£i_mes§ges
({

94 
SEI
::
FILLER_PAYLOAD
,

95 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
,

96 
SEI
::
USER_DATA_UNREGISTERED
,

97 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_END
,

98 
SEI
::
POST_FILTER_HINT
,

99 
SEI
::
DECODED_PICTURE_HASH
,

100 
SEI
::
CODED_REGION_COMPLETION
,

103 cÚ¡ 
	g¡d
::
veùÜ
<
SEI
::
PaylßdTy³
> SEI::
»giÚ®_Ã¡šg_£i_mes§ges
({

104 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
,

105 
SEI
::
USER_DATA_UNREGISTERED
,

106 
SEI
::
FILM_GRAIN_CHARACTERISTICS
,

107 
SEI
::
POST_FILTER_HINT
,

108 
SEI
::
TONE_MAPPING_INFO
,

109 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
,

110 
SEI
::
KNEE_FUNCTION_INFO
,

111 
SEI
::
COLOUR_REMAPPING_INFO
,

112 
SEI
::
CONTENT_COLOUR_VOLUME
,

115 
SEIMes§ges
 
	$g‘SeisByTy³
(
SEIMes§ges
 &
£iLi¡
, 
SEI
::
PaylßdTy³
 
£iTy³
)

117 
SEIMes§ges
 
»suÉ
;

119 
SEIMes§ges
::
™”©Ü
 
™
=
£iLi¡
.
	`begš
(); it!=£iLi¡.
	`’d
(); it++)

121 ià((*
™
)->
	`·ylßdTy³
(è=ð
£iTy³
)

123 
»suÉ
.
	`push_back
(*
™
);

126  
»suÉ
;

127 
	}
}

129 
SEIMes§ges
 
	$exŒaùSeisByTy³
(
SEIMes§ges
 &
£iLi¡
, 
SEI
::
PaylßdTy³
 
£iTy³
)

131 
SEIMes§ges
 
»suÉ
;

133 
SEIMes§ges
::
™”©Ü
 
™
=
£iLi¡
.
	`begš
();

134  
™
!=
£iLi¡
.
	`’d
() )

136 ià((*
™
)->
	`·ylßdTy³
(è=ð
£iTy³
)

138 
»suÉ
.
	`push_back
(*
™
);

139 
™
 = 
£iLi¡
.
	`”a£
(it);

143 
™
++;

146  
»suÉ
;

147 
	}
}

150 
Void
 
	$d–‘eSEIs
 (
SEIMes§ges
 &
£iLi¡
)

152 
SEIMes§ges
::
™”©Ü
 
™
=
£iLi¡
.
	`begš
(); it!=£iLi¡.
	`’d
(); it++)

154 
	`d–‘e
 (*
™
);

156 
£iLi¡
.
	`þ—r
();

157 
	}
}

159 
	gSEIBufãršgP”iod
::
	$cÝyTo
 (
SEIBufãršgP”iod
& 
rg‘
)

161 
rg‘
.
m_bpSeqP¬am‘”S‘Id
 = m_bpSeqParameterSetId;

162 
rg‘
.
m_¿pCpbP¬amsP»£ÁFÏg
 = m_rapCpbParamsPresentFlag;

163 
rg‘
.
m_ýbD–ayOff£t
 = m_cpbDelayOffset;

164 
rg‘
.
m_dpbD–ayOff£t
 = m_dpbDelayOffset;

165 
rg‘
.
m_cÚÿ‹ÇtiÚFÏg
 = m_concatenationFlag;

166 
rg‘
.
m_auCpbRemov®D–ayD–
 = m_auCpbRemovalDelayDelta;

167 ::
	`memýy
(
rg‘
.
m_š™ŸlCpbRemov®D–ay
, m_initialCpbRemovalDelay, (m_initialCpbRemovalDelay));

168 ::
	`memýy
(
rg‘
.
m_š™ŸlCpbRemov®D–ayOff£t
, m_initialCpbRemovalDelayOffset, (m_initialCpbRemovalDelayOffset));

169 ::
	`memýy
(
rg‘
.
m_š™ŸlAÉCpbRemov®D–ay
, m_initialAltCpbRemovalDelay, (m_initialAltCpbRemovalDelay));

170 ::
	`memýy
(
rg‘
.
m_š™ŸlAÉCpbRemov®D–ayOff£t
, m_initialAltCpbRemovalDelayOffset, (m_initialAltCpbRemovalDelayOffset));

171 
	}
}

173 
	gSEIPiùu»Timšg
::
	$cÝyTo
 (
SEIPiùu»Timšg
& 
rg‘
)

175 
rg‘
.
m_picSŒuù
 = m_picStruct;

176 
rg‘
.
m_sourûSÿnTy³
 = m_sourceScanType;

177 
rg‘
.
m_du¶iÿ‹FÏg
 = m_duplicateFlag;

179 
rg‘
.
m_auCpbRemov®D–ay
 = m_auCpbRemovalDelay;

180 
rg‘
.
m_picDpbOuutD–ay
 = m_picDpbOutputDelay;

181 
rg‘
.
m_picDpbOuutDuD–ay
 = m_picDpbOutputDuDelay;

182 
rg‘
.
m_numDecodšgUn™sMšus1
 = m_numDecodingUnitsMinus1;

183 
rg‘
.
m_duCommÚCpbRemov®D–ayFÏg
 = m_duCommonCpbRemovalDelayFlag;

184 
rg‘
.
m_duCommÚCpbRemov®D–ayMšus1
 = m_duCommonCpbRemovalDelayMinus1;

186 
rg‘
.
m_numN®usInDuMšus1
 = m_numNalusInDuMinus1;

187 
rg‘
.
m_duCpbRemov®D–ayMšus1
 = m_duCpbRemovalDelayMinus1;

188 
	}
}

190 
	g¡d
::
o¡»am
& 
Ý”©Ü
<<(
¡d
::o¡»am &
os
, 
RNSEIWšdow
 cÚ¡ &
	g»giÚ
)

192 
	gos
 << 
	g»giÚ
.
g‘RegiÚId
(è<< " " <<„egiÚ.
g‘WšdowLeáOff£t
() <<

193 
	g»giÚ
.
g‘WšdowRightOff£t
(è<< " " <<„egiÚ.
g‘WšdowTÝOff£t
() << " " <<

194 
	g»giÚ
.
g‘WšdowBÙtomOff£t
() << "\n";

195  
	gos
;

198 
	gSEIRegiÚ®Ne¡šg
::~
	$SEIRegiÚ®Ne¡šg
()

201 
IÁ
 
i
 = 0; i < 
m_ºSeiMes§ges
.
	`size
(); i++)

203 
d–‘e
 
m_ºSeiMes§ges
[
i
].
m_£iMes§ge
;

205 
	}
}

207 
Void
 
	gSEIRegiÚ®Ne¡šg
::
	$addRegiÚ®SEI
(
RegiÚ®SEI
 *
»gSEI
)

210 cÚ¡ 
RNSEIWšdowVec
 
ÃwRegiÚs
 = 
»gSEI
->
	`g‘RegiÚs
();

211 
RNSEIWšdowVec
 
»giÚsToAdd
;

212 
¡d
::
veùÜ
<
UIÁ
> 
li¡OfIndiûs
;

215 
RNSEIWšdowVec
::
cÚ¡_™”©Ü
 
™”New
 = 
ÃwRegiÚs
.
	`begš
();

216 
™”New
 !ð
ÃwRegiÚs
.
	`’d
(); iterNew++)

218 
BoÞ
 
addNewRegiÚ
 = 
m_»giÚs
.
	`em±y
(è? 
Œue
 : 
çl£
;

219 
BoÞ
 
foundRegiÚ
 = 
çl£
;

221 
RNSEIWšdowVec
::
cÚ¡_™”©Ü
 
™”Ref
 = 
m_»giÚs
.
	`begš
();

222 !
foundRegiÚ
 && 
™”Ref
 !ð
m_»giÚs
.
	`’d
(); iterRef++)

224 ifÐ(*
™”New
è=ð(*
™”Ref
) )

226 
li¡OfIndiûs
.
	`push_back
((
UIÁ
)(
™”Ref
 - 
m_»giÚs
.
	`begš
()));

227 
foundRegiÚ
 = 
Œue
;

229 ifÐ
™”Ref
->
	`checkSameID
(*
™”New
) )

232 
¡d
::
cout
 << "Two different„egions havehe same ID;…lease check.\n";

233 
¡d
::
cout
 << "RegiÚ:" << (*
™”New
) << "\n";

234 
¡d
::
cout
 << "RegiÚ:" << (*
™”Ref
) << "\n";

235 
	`ex™
(1);

238 
addNewRegiÚ
 = !
foundRegiÚ
;

240 if(
addNewRegiÚ
)

243 
li¡OfIndiûs
.
	`push_back
((
UIÁ
)
m_»giÚs
.
	`size
());

244 
m_»giÚs
.
	`push_back
((*
™”New
));

247 if(
li¡OfIndiûs
.
	`em±y
())

249 
¡d
::
cout
 << "Unableo‡dd„egionsohe„egional‚esting SEI.\n";

250 
	`ex™
(1);

252 
SEILi¡OfIndiûs
 
	`£iW™hLi¡OfIndiûs
(
li¡OfIndiûs
, 
»gSEI
->
	`dissocŸ‹SEIObjeù
());

253 
	`addRegiÚ®SEI
(
£iW™hLi¡OfIndiûs
);

254 
	}
}

257 cÚ¡ 
TCh¬
 *
	gSEI
::
	$g‘SEIMes§geSŒšg
(
SEI
::
PaylßdTy³
 
·ylßdTy³
)

259 
·ylßdTy³
)

261 
SEI
::
BUFFERING_PERIOD
:  "Buffering…eriod";

262 
SEI
::
PICTURE_TIMING
:  "Pictureiming";

263 
SEI
::
PAN_SCAN_RECT
:  "Pan-scan„ectangle";

264 
SEI
::
FILLER_PAYLOAD
:  "Filler…ayload";

265 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
:  "User data„egistered";

266 
SEI
::
USER_DATA_UNREGISTERED
:  "User data unregistered";

267 
SEI
::
RECOVERY_POINT
:  "Recovery…oint";

268 
SEI
::
SCENE_INFO
:  "Scene information";

269 
SEI
::
PICTURE_SNAPSHOT
:  "Picture snapshot";

270 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_START
:  "Progressive„efinement segment start";

271 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_END
:  "Progressive„efinement segmentƒnd";

272 
SEI
::
FILM_GRAIN_CHARACTERISTICS
:  "Film grain characteristics";

273 
SEI
::
POST_FILTER_HINT
:  "Post filter hint";

274 
SEI
::
TONE_MAPPING_INFO
:  "Tone mapping information";

275 
SEI
::
KNEE_FUNCTION_INFO
:  "Knee function information";

276 
SEI
::
FRAME_PACKING
:  "Frame…acking‡rrangement";

277 
SEI
::
DISPLAY_ORIENTATION
:  "Display orientation";

278 
SEI
::
GREEN_METADATA
:  "Green metadata information";

279 
SEI
::
SOP_DESCRIPTION
:  "Structure of…ictures information";

280 
SEI
::
ACTIVE_PARAMETER_SETS
:  "Active…arameter sets";

281 
SEI
::
DECODING_UNIT_INFO
:  "Decoding unit information";

282 
SEI
::
TEMPORAL_LEVEL0_INDEX
:  "Temporal sub-layer zero index";

283 
SEI
::
DECODED_PICTURE_HASH
:  "Decoded…icture hash";

284 
SEI
::
SCALABLE_NESTING
:  "Scalable‚esting";

285 
SEI
::
REGION_REFRESH_INFO
:  "Region„efresh information";

286 
SEI
::
NO_DISPLAY
:  "No display";

287 
SEI
::
TIME_CODE
:  "Time code";

288 
SEI
::
MASTERING_DISPLAY_COLOUR_VOLUME
:  "Mastering display colour volume";

289 
SEI
::
SEGM_RECT_FRAME_PACKING
:  "Segmented„ectangular frame…acking‡rrangement";

290 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
:  "Temporal motion constrainedile sets";

291 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
:  "Chroma sampling filter hint";

292 
SEI
::
COLOUR_REMAPPING_INFO
:  "Colour„emapping info";

293 
SEI
::
DEINTERLACE_FIELD_IDENTIFICATION
:  "Deinterlace field identification";

294 
SEI
::
CONTENT_LIGHT_LEVEL_INFO
:  "Content†ight†evel info";

295 
SEI
::
DEPENDENT_RAP_INDICATION
:  "Dependent RAP indication";

296 
SEI
::
CODED_REGION_COMPLETION
:  "Coded„egion completion";

297 
SEI
::
ALTERNATIVE_TRANSFER_CHARACTERISTICS
:  "Alternativeransfer characteristics";

298 
SEI
::
AMBIENT_VIEWING_ENVIRONMENT
:  "Ambient viewingƒnvironment";

299 
SEI
::
CONTENT_COLOUR_VOLUME
:  "Content Colour Volume";

300 
SEI
::
EQUIRECTANGULAR_PROJECTION
:  "Equirectangular…rojection";

301 
SEI
::
SPHERE_ROTATION
:  "Sphere„otation";

302 
SEI
::
OMNI_VIEWPORT
:  "Omni viewport";

303 
SEI
::
CUBEMAP_PROJECTION
:  "Cubemap…rojection";

304 
SEI
::
REGION_WISE_PACKING
:  "Region wise…acking information";

305 
SEI
::
FISHEYE_VIDEO_INFO
:  "Fisheye video information";

306 
SEI
::
REGIONAL_NESTING
:  "Regional‚esting";

307 #ià
MCTS_EXTRACTION


308 
SEI
::
MCTS_EXTRACTION_INFO_SET
:  "MCTSƒxtraction information";

310 
SEI
::
ANNOTATED_REGIONS
:  "Annotated Region";

311 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


312 
SEI
::
SHUTTER_INTERVAL_INFO
:  "Shutter interval information";

316 
	}
}

	@source/Lib/TLibCommon/SEI.h

34 #iâdeà
__SEI__


35 
	#__SEI__


	)

37 #´agm¨
Úû


38 
	~<li¡
>

39 
	~<veùÜ
>

40 
	~<c¡ršg
>

41 
	~<m­
>

43 
	~"CommÚDef.h
"

44 
	~"libmd5/MD5.h
"

48 
þass
 
	gTComSPS
;

53 þas 
	cSEI


55 
	mpublic
:

56 
	ePaylßdTy³


58 
BUFFERING_PERIOD
 = 0,

59 
	mPICTURE_TIMING
 = 1,

60 
	mPAN_SCAN_RECT
 = 2,

61 
	mFILLER_PAYLOAD
 = 3,

62 
	mUSER_DATA_REGISTERED_ITU_T_T35
 = 4,

63 
	mUSER_DATA_UNREGISTERED
 = 5,

64 
	mRECOVERY_POINT
 = 6,

65 
	mSCENE_INFO
 = 9,

66 
	mPICTURE_SNAPSHOT
 = 15,

67 
	mPROGRESSIVE_REFINEMENT_SEGMENT_START
 = 16,

68 
	mPROGRESSIVE_REFINEMENT_SEGMENT_END
 = 17,

69 
	mFILM_GRAIN_CHARACTERISTICS
 = 19,

70 
	mPOST_FILTER_HINT
 = 22,

71 
	mTONE_MAPPING_INFO
 = 23,

72 
	mFRAME_PACKING
 = 45,

73 
	mDISPLAY_ORIENTATION
 = 47,

74 
	mGREEN_METADATA
 = 56,

75 
	mSOP_DESCRIPTION
 = 128,

76 
	mACTIVE_PARAMETER_SETS
 = 129,

77 
	mDECODING_UNIT_INFO
 = 130,

78 
	mTEMPORAL_LEVEL0_INDEX
 = 131,

79 
	mDECODED_PICTURE_HASH
 = 132,

80 
	mSCALABLE_NESTING
 = 133,

81 
	mREGION_REFRESH_INFO
 = 134,

82 
	mNO_DISPLAY
 = 135,

83 
	mTIME_CODE
 = 136,

84 
	mMASTERING_DISPLAY_COLOUR_VOLUME
 = 137,

85 
	mSEGM_RECT_FRAME_PACKING
 = 138,

86 
	mTEMP_MOTION_CONSTRAINED_TILE_SETS
 = 139,

87 
	mCHROMA_RESAMPLING_FILTER_HINT
 = 140,

88 
	mKNEE_FUNCTION_INFO
 = 141,

89 
	mCOLOUR_REMAPPING_INFO
 = 142,

90 
	mDEINTERLACE_FIELD_IDENTIFICATION
 = 143,

91 
	mCONTENT_LIGHT_LEVEL_INFO
 = 144,

92 
	mDEPENDENT_RAP_INDICATION
 = 145,

93 
	mCODED_REGION_COMPLETION
 = 146,

94 
	mALTERNATIVE_TRANSFER_CHARACTERISTICS
 = 147,

95 
	mAMBIENT_VIEWING_ENVIRONMENT
 = 148,

96 
	mCONTENT_COLOUR_VOLUME
 = 149,

97 
	mEQUIRECTANGULAR_PROJECTION
 = 150,

98 
	mSPHERE_ROTATION
 = 154,

99 
	mOMNI_VIEWPORT
 = 156,

100 
	mCUBEMAP_PROJECTION
 = 151,

101 
	mFISHEYE_VIDEO_INFO
 = 152,

102 
	mREGION_WISE_PACKING
 = 155,

103 
	mREGIONAL_NESTING
 = 157,

104 #ià
MCTS_EXTRACTION


105 
	mMCTS_EXTRACTION_INFO_SET
 = 158,

107 
	mANNOTATED_REGIONS
 = 202,

108 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


109 
	mSHUTTER_INTERVAL_INFO
 = 203,

113 
	$SEI
(è{
	}
}

114 
	gvœtu®
 ~
	$SEI
(è{
	}
}

116 cÚ¡ 
TCh¬
 *
g‘SEIMes§geSŒšg
(
SEI
::
PaylßdTy³
 
·ylßdTy³
);

118 
vœtu®
 
PaylßdTy³
 
	$·ylßdTy³
() const = 0;

120 cÚ¡ 
¡d
::
veùÜ
 <
SEI
::
PaylßdTy³
> 
´efix_£i_mes§ges
;

121 cÚ¡ 
¡d
::
veùÜ
 <
SEI
::
PaylßdTy³
> 
suffix_£i_mes§ges
;

122 cÚ¡ 
¡d
::
veùÜ
 <
SEI
::
PaylßdTy³
> 
»giÚ®_Ã¡šg_£i_mes§ges
;

123 
	}
};

126 
	g¡d
::
	tli¡
<
	tSEI
*> 
	tSEIMes§ges
;

129 
SEIMes§ges
 
g‘SeisByTy³
(SEIMes§ge &
£iLi¡
, 
SEI
::
PaylßdTy³
 
£iTy³
);

132 
SEIMes§ges
 
exŒaùSeisByTy³
(SEIMes§ge &
£iLi¡
, 
SEI
::
PaylßdTy³
 
£iTy³
);

135 
Void
 
d–‘eSEIs
 (
SEIMes§ges
 &
£iLi¡
);

138 þas 
	cSEIBufãršgP”iod
 : 
public
 
SEI


140 
public
:

141 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
BUFFERING_PERIOD
; }

142 
	`cÝyTo
 (
SEIBufãršgP”iod
& 
rg‘
);

144 
	$SEIBufãršgP”iod
()

145 : 
	`m_bpSeqP¬am‘”S‘Id
 (0)

146 , 
	`m_¿pCpbP¬amsP»£ÁFÏg
 (
çl£
)

147 , 
	`m_ýbD–ayOff£t
 (0)

148 , 
	$m_dpbD–ayOff£t
 (0)

150 ::
	`mem£t
(
m_š™ŸlCpbRemov®D–ay
, 0, (m_initialCpbRemovalDelay));

151 ::
	`mem£t
(
m_š™ŸlCpbRemov®D–ayOff£t
, 0, (m_initialCpbRemovalDelayOffset));

152 ::
	`mem£t
(
m_š™ŸlAÉCpbRemov®D–ay
, 0, (m_initialAltCpbRemovalDelay));

153 ::
	`mem£t
(
m_š™ŸlAÉCpbRemov®D–ayOff£t
, 0, (m_initialAltCpbRemovalDelayOffset));

154 
	}
}

155 
	gvœtu®
 ~
	$SEIBufãršgP”iod
(è{
	}
}

157 
UIÁ
 
	gm_bpSeqP¬am‘”S‘Id
;

158 
BoÞ
 
	gm_¿pCpbP¬amsP»£ÁFÏg
;

159 
UIÁ
 
	gm_ýbD–ayOff£t
;

160 
UIÁ
 
	gm_dpbD–ayOff£t
;

161 
UIÁ
 
	gm_š™ŸlCpbRemov®D–ay
 [
MAX_CPB_CNT
][2];

162 
UIÁ
 
	gm_š™ŸlCpbRemov®D–ayOff£t
 [
MAX_CPB_CNT
][2];

163 
UIÁ
 
	gm_š™ŸlAÉCpbRemov®D–ay
 [
MAX_CPB_CNT
][2];

164 
UIÁ
 
	gm_š™ŸlAÉCpbRemov®D–ayOff£t
[
MAX_CPB_CNT
][2];

165 
BoÞ
 
	gm_cÚÿ‹ÇtiÚFÏg
;

166 
UIÁ
 
	gm_auCpbRemov®D–ayD–
;

170 þas 
	cSEIPiùu»Timšg
 : 
public
 
SEI


172 
public
:

173 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
PICTURE_TIMING
; }

174 
	`cÝyTo
 (
SEIPiùu»Timšg
& 
rg‘
);

176 
	$SEIPiùu»Timšg
()

177 : 
	`m_picSŒuù
 (0)

178 , 
	`m_sourûSÿnTy³
 (0)

179 , 
	`m_du¶iÿ‹FÏg
 (
çl£
)

180 , 
	$m_picDpbOuutDuD–ay
 (0)

181 {
	}
}

182 
	gvœtu®
 ~
	$SEIPiùu»Timšg
()

184 
	}
}

186 
UIÁ
 
	gm_picSŒuù
;

187 
UIÁ
 
	gm_sourûSÿnTy³
;

188 
BoÞ
 
	gm_du¶iÿ‹FÏg
;

190 
UIÁ
 
	gm_auCpbRemov®D–ay
;

191 
UIÁ
 
	gm_picDpbOuutD–ay
;

192 
UIÁ
 
	gm_picDpbOuutDuD–ay
;

193 
UIÁ
 
	gm_numDecodšgUn™sMšus1
;

194 
BoÞ
 
	gm_duCommÚCpbRemov®D–ayFÏg
;

195 
UIÁ
 
	gm_duCommÚCpbRemov®D–ayMšus1
;

196 
	g¡d
::
veùÜ
<
UIÁ
> 
m_numN®usInDuMšus1
;

197 
	g¡d
::
veùÜ
<
UIÁ
> 
m_duCpbRemov®D–ayMšus1
;

201 þas 
	cSEIPªSÿnReù
 : 
public
 
SEI


203 
public
:

204 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
PAN_SCAN_RECT
; }

206 
	$SEIPªSÿnReù
(è{
	}
}

207 
	gvœtu®
 ~
	$SEIPªSÿnReù
(è{
	}
}

209 
	sPªSÿnReù


211 
IÁ
 
	gËáOff£t
;

212 
IÁ
 
	grightOff£t
;

213 
IÁ
 
	gtÝOff£t
;

214 
IÁ
 
	gbÙtomOff£t
;

217 
UIÁ
 
	gm_·nSÿnReùId
;

218 
BoÞ
 
	gm_·nSÿnReùCªûlFÏg
;

219 
	g¡d
::
veùÜ
<
PªSÿnReù
> 
m_·nSÿnReùRegiÚs
;

220 
BoÞ
 
	gm_·nSÿnReùP”si¡’ûFÏg
;

224 þas 
	cSEIFžËrPaylßd
 : 
public
 
SEI


226 
public
:

227 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
FILLER_PAYLOAD
; }

229 
	$SEIFžËrPaylßd
(è{
	}
}

230 
	gvœtu®
 ~
	$SEIFžËrPaylßd
(è{
	}
}

232 
UIÁ
 
	gm_numFžËrFFBy‹s
;

236 þas 
	cSEIU£rD©aRegi¡”ed
 : 
public
 
SEI


238 
public
:

239 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
USER_DATA_REGISTERED_ITU_T_T35
; }

241 
	$SEIU£rD©aRegi¡”ed
(è{
	}
}

242 
	gvœtu®
 ~
	$SEIU£rD©aRegi¡”ed
(è{
	}
}

244 
UShÜt
 
	gm_™uCouÁryCode
;

245 
	g¡d
::
veùÜ
<
UCh¬
> 
m_u£rD©a
;

249 cÚ¡ 
UIÁ
 
	gISO_IEC_11578_LEN
=16;

251 þas 
	cSEIU£rD©aUÄegi¡”ed
 : 
public
 
SEI


253 
public
:

254 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
USER_DATA_UNREGISTERED
; }

256 
	$SEIU£rD©aUÄegi¡”ed
(è{
	}
}

257 
	gvœtu®
 ~
	$SEIU£rD©aUÄegi¡”ed
(è{ 
	}
}

259 
UCh¬
 
	gm_uuid_iso_›c_11578
[
ISO_IEC_11578_LEN
];

260 
	g¡d
::
veùÜ
<
UCh¬
> 
m_u£rD©a
;

264 þas 
	cSEIRecov”yPošt
 : 
public
 
SEI


266 
public
:

267 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
RECOVERY_POINT
; }

269 
	$SEIRecov”yPošt
(è{
	}
}

270 
	gvœtu®
 ~
	$SEIRecov”yPošt
(è{
	}
}

272 
IÁ
 
	gm_»cov”yPocCÁ
;

273 
BoÞ
 
	gm_exaùM©chšgFÏg
;

274 
BoÞ
 
	gm_brok’LškFÏg
;

278 þas 
	cSEISûÃInfo
 : 
public
 
SEI


280 
public
:

281 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SCENE_INFO
; }

283 
	$SEISûÃInfo
(è{
	}
}

284 
	gvœtu®
 ~
	$SEISûÃInfo
(è{
	}
}

286 
BoÞ
 
	gm_bSûÃInfoP»£ÁFÏg
;

287 
BoÞ
 
	gm_bP»vSûÃIdV®idFÏg
;

288 
UIÁ
 
	gm_sûÃId
;

289 
UIÁ
 
	gm_sûÃT¿ns™iÚTy³
;

290 
UIÁ
 
	gm_£cÚdSûÃId
;

294 þas 
	cSEIPiùu»SÇpshÙ
 : 
public
 
SEI


296 
public
:

297 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
PICTURE_SNAPSHOT
; }

299 
	$SEIPiùu»SÇpshÙ
(è{
	}
}

300 
	gvœtu®
 ~
	$SEIPiùu»SÇpshÙ
(è{
	}
}

302 
UIÁ
 
	gm_¢­shÙId
;

306 þas 
	cSEIProg»ssiveRefšem’tSegm’tS¹
 : 
public
 
SEI


308 
public
:

309 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
PROGRESSIVE_REFINEMENT_SEGMENT_START
; }

311 
	$SEIProg»ssiveRefšem’tSegm’tS¹
(è{
	}
}

312 
	gvœtu®
 ~
	$SEIProg»ssiveRefšem’tSegm’tS¹
(è{
	}
}

314 
UIÁ
 
	gm_´og»ssiveRefšem’tId
;

315 
UIÁ
 
	gm_picOrd”CÁD–
;

319 þas 
	cSEIProg»ssiveRefšem’tSegm’tEnd
: 
public
 
SEI


321 
public
:

322 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
PROGRESSIVE_REFINEMENT_SEGMENT_END
; }

324 
	$SEIProg»ssiveRefšem’tSegm’tEnd
(è{
	}
}

325 
	gvœtu®
 ~
	$SEIProg»ssiveRefšem’tSegm’tEnd
(è{
	}
}

327 
UIÁ
 
	gm_´og»ssiveRefšem’tId
;

331 þas 
	cSEIFžmG¿šCh¬aù”i¡ics
: 
public
 
SEI


333 
public
:

334 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
FILM_GRAIN_CHARACTERISTICS
; }

336 
	$SEIFžmG¿šCh¬aù”i¡ics
(è{
	}
}

337 
	gvœtu®
 ~
	$SEIFžmG¿šCh¬aù”i¡ics
(è{
	}
}

339 
BoÞ
 
	gm_fžmG¿šCh¬aù”i¡icsCªûlFÏg
;

340 
UCh¬
 
	gm_fžmG¿šMod–Id
;

341 
BoÞ
 
	gm_£·¿‹CÞourDesütiÚP»£ÁFÏg
;

342 
UCh¬
 
	gm_fžmG¿šB™D•thLumaMšus8
;

343 
UCh¬
 
	gm_fžmG¿šB™D•thChromaMšus8
;

344 
BoÞ
 
	gm_fžmG¿šFuÎRªgeFÏg
;

345 
UCh¬
 
	gm_fžmG¿šCÞourPrim¬›s
;

346 
UCh¬
 
	gm_fžmG¿šT¿nsãrCh¬aù”i¡ics
;

347 
UCh¬
 
	gm_fžmG¿šM©rixCÛffs
;

348 
UCh¬
 
	gm_bËndšgModeId
;

349 
UCh¬
 
	gm_log2SÿËFaùÜ
;

351 
	sCompMod–IÁ’s™yV®ues


353 
UCh¬
 
	gš‹ns™yIÁ”v®Low”Bound
;

354 
UCh¬
 
	gš‹ns™yIÁ”v®Uµ”Bound
;

355 
	g¡d
::
veùÜ
<
IÁ
> 
compMod–V®ue
;

358 
	sCompMod–


360 
BoÞ
 
	gbP»£ÁFÏg
;

361 
UCh¬
 
	gnumMod–V®ues
;

362 
	g¡d
::
veùÜ
<
CompMod–IÁ’s™yV®ues
> 
š‹ns™yV®ues
;

365 
CompMod–
 
	gm_compMod–
[
MAX_NUM_COMPONENT
];

366 
BoÞ
 
	gm_fžmG¿šCh¬aù”i¡icsP”si¡’ûFÏg
;

370 þas 
	cSEIPo¡Fž‹rHšt
: 
public
 
SEI


372 
public
:

373 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
POST_FILTER_HINT
; }

375 
	$SEIPo¡Fž‹rHšt
(è{
	}
}

376 
	gvœtu®
 ~
	$SEIPo¡Fž‹rHšt
(è{
	}
}

378 
UIÁ
 
	gm_fž‹rHštSizeY
;

379 
UIÁ
 
	gm_fž‹rHštSizeX
;

380 
UIÁ
 
	gm_fž‹rHštTy³
;

381 
BoÞ
 
	gm_bIsMÚochrome
;

382 
	g¡d
::
veùÜ
<
IÁ
> 
m_fž‹rHštV®ues
;

386 þas 
	cSEITÚeM­pšgInfo
 : 
public
 
SEI


388 
public
:

389 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
TONE_MAPPING_INFO
; }

390 
	$SEITÚeM­pšgInfo
(è{
	}
}

391 
	gvœtu®
 ~
	$SEITÚeM­pšgInfo
(è{
	}
}

393 
IÁ
 
	gm_tÚeM­Id
;

394 
BoÞ
 
	gm_tÚeM­CªûlFÏg
;

395 
BoÞ
 
	gm_tÚeM­P”si¡’ûFÏg
;

396 
IÁ
 
	gm_codedD©aB™D•th
;

397 
IÁ
 
	gm_rg‘B™D•th
;

398 
IÁ
 
	gm_mod–Id
;

399 
IÁ
 
	gm_mšV®ue
;

400 
IÁ
 
	gm_maxV®ue
;

401 
IÁ
 
	gm_sigmoidMidpošt
;

402 
IÁ
 
	gm_sigmoidWidth
;

403 
	g¡d
::
veùÜ
<
IÁ
> 
m_¡¬tOfCodedIÁ”v®
;

404 
IÁ
 
	gm_numPivÙs
;

405 
	g¡d
::
veùÜ
<
IÁ
> 
m_codedPivÙV®ue
;

406 
	g¡d
::
veùÜ
<
IÁ
> 
m_rg‘PivÙV®ue
;

407 
IÁ
 
	gm_ÿm”aIsoS³edIdc
;

408 
IÁ
 
	gm_ÿm”aIsoS³edV®ue
;

409 
IÁ
 
	gm_exposu»IndexIdc
;

410 
IÁ
 
	gm_exposu»IndexV®ue
;

411 
BoÞ
 
	gm_exposu»Com³n§tiÚV®ueSignFÏg
;

412 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueNum”©Ü
;

413 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueD’omIdc
;

414 
IÁ
 
	gm_»fSü“nLumšªûWh™e
;

415 
IÁ
 
	gm_ex‹ndedRªgeWh™eLev–
;

416 
IÁ
 
	gm_nomš®BÏckLev–LumaCodeV®ue
;

417 
IÁ
 
	gm_nomš®Wh™eLev–LumaCodeV®ue
;

418 
IÁ
 
	gm_ex‹ndedWh™eLev–LumaCodeV®ue
;

422 þas 
	cSEIF¿mePackšg
 : 
public
 
SEI


424 
public
:

425 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
FRAME_PACKING
; }

427 
	$SEIF¿mePackšg
(è{
	}
}

428 
	gvœtu®
 ~
	$SEIF¿mePackšg
(è{
	}
}

430 
IÁ
 
	gm_¬¿ngem’tId
;

431 
BoÞ
 
	gm_¬¿ngem’tCªûlFÏg
;

432 
IÁ
 
	gm_¬¿ngem’tTy³
;

433 
BoÞ
 
	gm_qušcunxSam¶šgFÏg
;

434 
IÁ
 
	gm_cÚ‹ÁIÁ”´‘©iÚTy³
;

435 
BoÞ
 
	gm_¥©ŸlFlpšgFÏg
;

436 
BoÞ
 
	gm_äame0Fl³dFÏg
;

437 
BoÞ
 
	gm_f›ldV›wsFÏg
;

438 
BoÞ
 
	gm_cu¼’tF¿meIsF¿me0FÏg
;

439 
BoÞ
 
	gm_äame0S–fCÚšedFÏg
;

440 
BoÞ
 
	gm_äame1S–fCÚšedFÏg
;

441 
IÁ
 
	gm_äame0GridPos™iÚX
;

442 
IÁ
 
	gm_äame0GridPos™iÚY
;

443 
IÁ
 
	gm_äame1GridPos™iÚX
;

444 
IÁ
 
	gm_äame1GridPos™iÚY
;

445 
IÁ
 
	gm_¬¿ngem’tRe£rvedBy‹
;

446 
BoÞ
 
	gm_¬¿ngem’tP”si¡’ûFÏg
;

447 
BoÞ
 
	gm_up§m¶edA¥eùR©io
;

451 þas 
	cSEIDi¥ÏyOr›Á©iÚ
 : 
public
 
SEI


453 
public
:

454 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
DISPLAY_ORIENTATION
; }

456 
	$SEIDi¥ÏyOr›Á©iÚ
()

457 : 
	`ÿnûlFÏg
(
Œue
)

458 , 
	`³rsi¡’ûFÏg
(0)

459 , 
	$ex‹nsiÚFÏg
(
çl£
)

460 {
	}
}

461 
	gvœtu®
 ~
	$SEIDi¥ÏyOr›Á©iÚ
(è{
	}
}

463 
BoÞ
 
	gÿnûlFÏg
;

464 
BoÞ
 
	ghÜFl
;

465 
BoÞ
 
	gv”Fl
;

467 
UIÁ
 
	gªtiþockwi£RÙ©iÚ
;

468 
BoÞ
 
	g³rsi¡’ûFÏg
;

469 
BoÞ
 
	gex‹nsiÚFÏg
;

473 þas 
	cSEIG»’M‘ad©aInfo
 : 
public
 
SEI


475 
public
:

476 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
GREEN_METADATA
; }

477 
	$SEIG»’M‘ad©aInfo
(è{
	}
}

479 
	gvœtu®
 ~
	$SEIG»’M‘ad©aInfo
(è{
	}
}

481 
UIÁ
 
	gm_g»’M‘ad©aTy³
;

482 
UIÁ
 
	gm_xsdM‘ricTy³
;

483 
UIÁ
 
	gm_xsdM‘ricV®ue
;

487 þas 
	cSEISOPDesütiÚ
 : 
public
 
SEI


489 
public
:

490 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SOP_DESCRIPTION
; }

492 
	$SEISOPDesütiÚ
(è{
	}
}

493 
	gvœtu®
 ~
	$SEISOPDesütiÚ
(è{
	}
}

495 
UIÁ
 
	gm_sÝSeqP¬am‘”S‘Id
;

496 
UIÁ
 
	gm_numPicsInSÝMšus1
;

498 
UIÁ
 
	gm_sÝDescVþN®uTy³
[
MAX_NUM_PICS_IN_SOP
];

499 
UIÁ
 
	gm_sÝDescTempÜ®Id
[
MAX_NUM_PICS_IN_SOP
];

500 
UIÁ
 
	gm_sÝDescStRpsIdx
[
MAX_NUM_PICS_IN_SOP
];

501 
IÁ
 
	gm_sÝDescPocD–
[
MAX_NUM_PICS_IN_SOP
];

505 þas 
	cSEIAùiveP¬am‘”S‘s
 : 
public
 
SEI


507 
public
:

508 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
ACTIVE_PARAMETER_SETS
; }

510 
	$SEIAùiveP¬am‘”S‘s
()

511 : 
	`aùiveVPSId
 (0)

512 , 
	`m_£lfCÚšedCvsFÏg
 (
çl£
)

513 , 
	`m_noP¬am‘”S‘Upd©eFÏg
 (
çl£
)

514 , 
	$numSpsIdsMšus1
 (0)

515 {
	}
}

516 
	gvœtu®
 ~
	$SEIAùiveP¬am‘”S‘s
(è{
	}
}

518 
IÁ
 
	gaùiveVPSId
;

519 
BoÞ
 
	gm_£lfCÚšedCvsFÏg
;

520 
BoÞ
 
	gm_noP¬am‘”S‘Upd©eFÏg
;

521 
IÁ
 
	gnumSpsIdsMšus1
;

522 
	g¡d
::
veùÜ
<
IÁ
> 
aùiveSeqP¬am‘”S‘Id
;

526 þas 
	cSEIDecodšgUn™Info
 : 
public
 
SEI


528 
public
:

529 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
DECODING_UNIT_INFO
; }

531 
	$SEIDecodšgUn™Info
()

532 : 
	`m_decodšgUn™Idx
(0)

533 , 
	`m_duS±CpbRemov®D–ay
(0)

534 , 
	`m_dpbOuutDuD–ayP»£ÁFÏg
(
çl£
)

535 , 
	$m_picS±DpbOuutDuD–ay
(0)

536 {
	}
}

537 
	gvœtu®
 ~
	$SEIDecodšgUn™Info
(è{
	}
}

538 
IÁ
 
	gm_decodšgUn™Idx
;

539 
IÁ
 
	gm_duS±CpbRemov®D–ay
;

540 
BoÞ
 
	gm_dpbOuutDuD–ayP»£ÁFÏg
;

541 
IÁ
 
	gm_picS±DpbOuutDuD–ay
;

545 þas 
	cSEITempÜ®Lev–0Index
 : 
public
 
SEI


547 
public
:

548 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
TEMPORAL_LEVEL0_INDEX
; }

550 
	$SEITempÜ®Lev–0Index
()

551 : 
	`Ž0Idx
(0)

552 , 
	$¿pIdx
(0)

553 {
	}
}

554 
	gvœtu®
 ~
	$SEITempÜ®Lev–0Index
(è{
	}
}

556 
UIÁ
 
	gŽ0Idx
;

557 
UIÁ
 
	g¿pIdx
;

561 þas 
	cSEIDecodedPiùu»Hash
 : 
public
 
SEI


563 
public
:

564 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
DECODED_PICTURE_HASH
; }

566 
	$SEIDecodedPiùu»Hash
(è{
	}
}

567 
	gvœtu®
 ~
	$SEIDecodedPiùu»Hash
(è{
	}
}

569 
HashTy³
 
	gm‘hod
;

571 
TComPiùu»Hash
 
	gm_piùu»Hash
;

575 þas 
	cSEISÿÏbËNe¡šg
 : 
public
 
SEI


577 
public
:

578 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SCALABLE_NESTING
; }

580 
	$SEISÿÏbËNe¡šg
(è{
	}
}

582 
	gvœtu®
 ~
	$SEISÿÏbËNe¡šg
()

584 
	`d–‘eSEIs
(
m_Ã¡edSEIs
);

585 
	}
}

587 
BoÞ
 
	gm_b™SŒ—mSub£tFÏg
;

588 
BoÞ
 
	gm_Ã¡šgOpFÏg
;

589 
BoÞ
 
	gm_deçuÉOpFÏg
;

590 
UIÁ
 
	gm_Ã¡šgNumOpsMšus1
;

591 
UIÁ
 
	gm_Ã¡šgMaxTempÜ®IdPlus1
[
MAX_TLAYER
];

592 
UIÁ
 
	gm_Ã¡šgOpIdx
[
MAX_NESTING_NUM_OPS
];

594 
BoÞ
 
	gm_®lLay”sFÏg
;

595 
UIÁ
 
	gm_Ã¡šgNoOpMaxTempÜ®IdPlus1
;

596 
UIÁ
 
	gm_Ã¡šgNumLay”sMšus1
;

597 
UCh¬
 
	gm_Ã¡šgLay”Id
[
MAX_NESTING_NUM_LAYER
];

599 
SEIMes§ges
 
	gm_Ã¡edSEIs
;

603 þas 
	cSEIRegiÚReäeshInfo
 : 
public
 
SEI


605 
public
:

606 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
REGION_REFRESH_INFO
; }

608 
	$SEIRegiÚReäeshInfo
()

609 : 
	$m_gdrFÜegroundFÏg
(0)

610 {
	}
}

611 
vœtu®
 ~
	$SEIRegiÚReäeshInfo
(è{
	}
}

613 
BoÞ
 
m_gdrFÜegroundFÏg
;

617 þas 
	cSEINoDi¥Ïy
 : 
public
 
SEI


619 
public
:

620 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
NO_DISPLAY
; }

622 
	$SEINoDi¥Ïy
()

623 : 
	$m_noDi¥Ïy
(
çl£
)

624 {
	}
}

625 
vœtu®
 ~
	$SEINoDi¥Ïy
(è{
	}
}

627 
BoÞ
 
m_noDi¥Ïy
;

631 þas 
	cSEITimeCode
 : 
public
 
SEI


633 
public
:

634 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
TIME_CODE
; }

635 
	$SEITimeCode
(è{
	}
}

636 
	gvœtu®
 ~
	$SEITimeCode
(){
	}
}

638 
UIÁ
 
	gnumClockTs
;

639 
TComSEITimeS‘
 
	gtimeS‘A¼ay
[
MAX_TIMECODE_SEI_SETS
];

643 þas 
	cSEIMa¡”šgDi¥ÏyCÞourVÞume
 : 
public
 
SEI


645 
public
:

646 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
MASTERING_DISPLAY_COLOUR_VOLUME
; }

647 
	$SEIMa¡”šgDi¥ÏyCÞourVÞume
(è{
	}
}

648 
	gvœtu®
 ~
	$SEIMa¡”šgDi¥ÏyCÞourVÞume
(){
	}
}

650 
TComSEIMa¡”šgDi¥Ïy
 
	gv®ues
;

654 þas 
	cSEISegm’‹dReùF¿mePackšg
 : 
public
 
SEI


656 
public
:

657 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SEGM_RECT_FRAME_PACKING
; }

659 
	$SEISegm’‹dReùF¿mePackšg
(è{
	}
}

660 
	gvœtu®
 ~
	$SEISegm’‹dReùF¿mePackšg
(è{
	}
}

662 
BoÞ
 
	gm_¬¿ngem’tCªûlFÏg
;

663 
IÁ
 
	gm_cÚ‹ÁIÁ”´‘©iÚTy³
;

664 
BoÞ
 
	gm_¬¿ngem’tP”si¡’ûFÏg
;

669 þas 
	cSEITempMÙiÚCÚ¡¿šedTžeS‘s
: 
public
 
SEI


671 þas 
	cTžeS‘D©a


673 
´Ùeùed
:

674 
¡d
::
veùÜ
<
IÁ
> 
m_tÝ_Ëá_tže_šdex
;

675 
	m¡d
::
veùÜ
<
IÁ
> 
m_bÙtom_right_tže_šdex
;

677 
	mpublic
:

678 
IÁ
 
m_mùs_id
;

679 
BoÞ
 
	mm_di¥Ïy_tže_£t_æag
;

680 
IÁ
 
	mm_num_tže_»ùs_š_£t
;

681 
BoÞ
 
	mm_exaù_§m¶e_v®ue_m©ch_æag
;

682 
BoÞ
 
	mm_mùs_t›r_Ëv–_idc_´e£Á_æag
;

683 
BoÞ
 
	mm_mùs_t›r_æag
;

684 
IÁ
 
	mm_mùs_Ëv–_idc
;

686 
Void
 
£tNumb”OfTžeReùs
(cÚ¡ 
IÁ
 
numb”
)

688 
	mm_tÝ_Ëá_tže_šdex
 .
»size
(
numb”
);

689 
	mm_bÙtom_right_tže_šdex
.
»size
(
numb”
);

692 
IÁ
 
g‘Numb”OfTžeReùs
() const

694 
as£¹
(
m_tÝ_Ëá_tže_šdex
.
size
(è=ð
m_bÙtom_right_tže_šdex
.size());

695  
IÁ
(
m_tÝ_Ëá_tže_šdex
.
size
());

698 
	mIÁ
 &
tÝLeáTžeIndex
 (cÚ¡ 
IÁ
 
tžeReùIndex
è{  
	mm_tÝ_Ëá_tže_šdex
 [tileRectIndex]; }

699 
	mIÁ
 &
bÙtomRightTžeIndex
(cÚ¡ 
IÁ
 
tžeReùIndex
è{  
	mm_bÙtom_right_tže_šdex
[tileRectIndex]; }

700 cÚ¡ 
	mIÁ
 &
tÝLeáTžeIndex
 (cÚ¡ 
IÁ
 
tžeReùIndex
ècÚ¡ {  
	mm_tÝ_Ëá_tže_šdex
 [tileRectIndex]; }

701 cÚ¡ 
	mIÁ
 &
bÙtomRightTžeIndex
(cÚ¡ 
IÁ
 
tžeReùIndex
ècÚ¡ {  
	mm_bÙtom_right_tže_šdex
[tileRectIndex]; }

704 
	g´Ùeùed
:

705 
¡d
::
veùÜ
<
TžeS‘D©a
> 
m_tže_£t_d©a
;

707 
	gpublic
:

709 
BoÞ
 
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
;

710 
BoÞ
 
	gm_—ch_tže_Úe_tže_£t_æag
;

711 
BoÞ
 
	gm_lim™ed_tže_£t_di¥Ïy_æag
;

712 
BoÞ
 
	gm_max_mcs_t›r_Ëv–_idc_´e£Á_æag
;

713 
BoÞ
 
	gm_max_mùs_t›r_æag
;

714 
IÁ
 
	gm_max_mùs_Ëv–_idc
;

716 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
TEMP_MOTION_CONSTRAINED_TILE_SETS
; 
	}
}

717 
	$SEITempMÙiÚCÚ¡¿šedTžeS‘s
(è{ 
	}
}

718 
	gvœtu®
 ~
	$SEITempMÙiÚCÚ¡¿šedTžeS‘s
(è{ 
	}
}

720 
Void
 
	$£tNumb”OfTžeS‘s
(cÚ¡ 
IÁ
 
numb”
è{ 
m_tže_£t_d©a
.
	`»size
Òumb”); 
	}
}

721 
IÁ
 
	$g‘Numb”OfTžeS‘s
(ècÚ¡ {  
	`IÁ
(
m_tže_£t_d©a
.
	`size
()); 
	}
}

723 
	gTžeS‘D©a
 &
	$tžeS‘D©a
 (cÚ¡ 
IÁ
 
šdex
è{  
m_tže_£t_d©a
[šdex]; 
	}
}

724 cÚ¡ 
	gTžeS‘D©a
 &
	$tžeS‘D©a
 (cÚ¡ 
IÁ
 
šdex
ècÚ¡ {  
m_tže_£t_d©a
[šdex]; 
	}
}

729 þas 
	cSEIChromaRe§m¶šgFž‹rHšt
 : 
public
 
SEI


731 
public
:

732 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ { 
CHROMA_RESAMPLING_FILTER_HINT
;}

733 
	$SEIChromaRe§m¶šgFž‹rHšt
(è{
	}
}

734 
	gvœtu®
 ~
	$SEIChromaRe§m¶šgFž‹rHšt
(è{
	}
}

736 
IÁ
 
	gm_v”ChromaFž‹rIdc
;

737 
IÁ
 
	gm_hÜChromaFž‹rIdc
;

738 
BoÞ
 
	gm_v”Fž‹ršgF›ldProûssšgFÏg
;

739 
IÁ
 
	gm_rg‘FÜm©Idc
;

740 
BoÞ
 
	gm_³rãùRecÚ¡ruùiÚFÏg
;

741 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
IÁ
> > 
m_v”Fž‹rCÛff
;

742 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
IÁ
> > 
m_hÜFž‹rCÛff
;

746 þas 
	cSEIKÃeFunùiÚInfo
 : 
public
 
SEI


748 
public
:

749 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
KNEE_FUNCTION_INFO
; }

750 
	$SEIKÃeFunùiÚInfo
(è{
	}
}

751 
	gvœtu®
 ~
	$SEIKÃeFunùiÚInfo
(è{
	}
}

753 
IÁ
 
	gm_kÃeId
;

754 
BoÞ
 
	gm_kÃeCªûlFÏg
;

755 
BoÞ
 
	gm_kÃeP”si¡’ûFÏg
;

756 
IÁ
 
	gm_kÃeIÅutD¿nge
;

757 
IÁ
 
	gm_kÃeIÅutDi¥Lumšªû
;

758 
IÁ
 
	gm_kÃeOuutD¿nge
;

759 
IÁ
 
	gm_kÃeOuutDi¥Lumšªû
;

760 
IÁ
 
	gm_kÃeNumKÃePoštsMšus1
;

761 
	g¡d
::
veùÜ
<
IÁ
> 
m_kÃeIÅutKÃePošt
;

762 
	g¡d
::
veùÜ
<
IÁ
> 
m_kÃeOuutKÃePošt
;

765 þas 
	cSEICÚ‹ÁCÞourVÞume
 : 
public
 
SEI


767 
public
:

768 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
CONTENT_COLOUR_VOLUME
; }

769 
	$SEICÚ‹ÁCÞourVÞume
(è{
	}
}

770 
	gvœtu®
 ~
	$SEICÚ‹ÁCÞourVÞume
(è{
	}
}

772 
BoÞ
 
	gm_ccvCªûlFÏg
;

773 
BoÞ
 
	gm_ccvP”si¡’ûFÏg
;

774 
BoÞ
 
	gm_ccvPrim¬›sP»£ÁFÏg
;

775 
BoÞ
 
	gm_ccvMšLumšªûV®ueP»£ÁFÏg
;

776 
BoÞ
 
	gm_ccvMaxLumšªûV®ueP»£ÁFÏg
;

777 
BoÞ
 
	gm_ccvAvgLumšªûV®ueP»£ÁFÏg
;

778 
IÁ
 
	gm_ccvPrim¬›sX
[
MAX_NUM_COMPONENT
];

779 
IÁ
 
	gm_ccvPrim¬›sY
[
MAX_NUM_COMPONENT
];

780 
UIÁ
 
	gm_ccvMšLumšªûV®ue
;

781 
UIÁ
 
	gm_ccvMaxLumšªûV®ue
;

782 
UIÁ
 
	gm_ccvAvgLumšªûV®ue
;

785 þas 
	cSEIEquœeùªguÏrProjeùiÚ
 : 
public
 
SEI


787 
public
:

788 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
EQUIRECTANGULAR_PROJECTION
; }

790 
	$SEIEquœeùªguÏrProjeùiÚ
(è{
	}
}

791 
	gvœtu®
 ~
	$SEIEquœeùªguÏrProjeùiÚ
(è{
	}
}

793 
BoÞ
 
	gm_”pCªûlFÏg
;

794 
BoÞ
 
	gm_”pP”si¡’ûFÏg
;

795 
BoÞ
 
	gm_”pGu¬dBªdFÏg
;

796 
UCh¬
 
	gm_”pGu¬dBªdTy³
;

797 
UCh¬
 
	gm_”pLeáGu¬dBªdWidth
;

798 
UCh¬
 
	gm_”pRightGu¬dBªdWidth
;

801 þas 
	cSEISph”eRÙ©iÚ
 : 
public
 
SEI


803 
public
:

804 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SPHERE_ROTATION
; }

806 
	$SEISph”eRÙ©iÚ
(è{
	}
}

807 
	gvœtu®
 ~
	$SEISph”eRÙ©iÚ
(è{
	}
}

809 
BoÞ
 
	gm_¥h”eRÙ©iÚCªûlFÏg
;

810 
BoÞ
 
	gm_¥h”eRÙ©iÚP”si¡’ûFÏg
;

811 
IÁ
 
	gm_¥h”eRÙ©iÚYaw
;

812 
IÁ
 
	gm_¥h”eRÙ©iÚP™ch
;

813 
IÁ
 
	gm_¥h”eRÙ©iÚRÞl
;

816 þas 
	cSEIOmniV›wpÜt
 : 
public
 
SEI


818 
public
:

819 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
OMNI_VIEWPORT
; }

821 
	$SEIOmniV›wpÜt
(è{
	}
}

822 
	gvœtu®
 ~
	$SEIOmniV›wpÜt
(è{
	}
}

824 
	sOmniV›wpÜt


826 
IÁ
 
	gazimuthC’Œe
;

827 
IÁ
 
	g–ev©iÚC’Œe
;

828 
IÁ
 
	gtžtC’Œe
;

829 
UIÁ
 
	ghÜRªge
;

830 
UIÁ
 
	gv”Rªge
;

833 
UIÁ
 
	gm_omniV›wpÜtId
;

834 
BoÞ
 
	gm_omniV›wpÜtCªûlFÏg
;

835 
BoÞ
 
	gm_omniV›wpÜtP”si¡’ûFÏg
;

836 
UCh¬
 
	gm_omniV›wpÜtCÁMšus1
;

837 
	g¡d
::
veùÜ
<
OmniV›wpÜt
> 
m_omniV›wpÜtRegiÚs
;

840 þas 
	cSEIAÂÙ©edRegiÚs
 : 
public
 
SEI


842 
public
:

843 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
ANNOTATED_REGIONS
; }

844 
	$SEIAÂÙ©edRegiÚs
(è{
	}
}

845 
	gvœtu®
 ~
	$SEIAÂÙ©edRegiÚs
(è{
	}
}

847 
Void
 
	$cÝyFrom
(cÚ¡ 
SEIAÂÙ©edRegiÚs
 &
£iAÂÙ©edRegiÚs
)

849 (*
this
èð
£iAÂÙ©edRegiÚs
;

850 
	}
}

852 
	sAÂÙ©edRegiÚObjeù


854 
AÂÙ©edRegiÚObjeù
() :

855 
objeùCªûlFÏg
(
çl£
),

856 
objeùLab–V®id
(
çl£
),

857 
boundšgBoxV®id
(
çl£
)

859 
BoÞ
 
	gobjeùCªûlFÏg
;

861 
BoÞ
 
	gobjeùLab–V®id
;

862 
UIÁ
 
	gobjLab–Idx
;

864 
BoÞ
 
	gboundšgBoxV®id
;

865 
UIÁ
 
	gboundšgBoxTÝ
;

866 
UIÁ
 
	gboundšgBoxLeá
;

867 
UIÁ
 
	gboundšgBoxWidth
;

868 
UIÁ
 
	gboundšgBoxHeight
;

870 
BoÞ
 
	g·¹ŸlObjeùFÏg
;

871 
UIÁ
 
	gobjeùCÚfid’û
;

873 
	sAÂÙ©edRegiÚLab–


875 
AÂÙ©edRegiÚLab–
(è: 
Ïb–V®id
(
çl£
) { }

876 
BoÞ
 
Ïb–V®id
;

877 
	g¡d
::
¡ršg
 
Ïb–
;

880 
	sAÂÙ©edRegiÚH—d”


882 
AÂÙ©edRegiÚH—d”
(è: 
m_ÿnûlFÏg
(
Œue
), 
m_»ûivedS‘tšgsOnû
(
çl£
) { }

883 
BoÞ
 
	gm_ÿnûlFÏg
;

884 
BoÞ
 
	gm_»ûivedS‘tšgsOnû
;

886 
BoÞ
 
	gm_nÙO±imizedFÜV›wšgFÏg
;

887 
BoÞ
 
	gm_ŒueMÙiÚFÏg
;

888 
BoÞ
 
	gm_ocþudedObjeùFÏg
;

889 
BoÞ
 
	gm_·¹ŸlObjeùFÏgP»£ÁFÏg
;

890 
BoÞ
 
	gm_objeùLab–P»£ÁFÏg
;

891 
BoÞ
 
	gm_objeùCÚfid’ûInfoP»£ÁFÏg
;

892 
UIÁ
 
	gm_objeùCÚfid’ûL’gth
;

893 
BoÞ
 
	gm_objeùLab–LªguageP»£ÁFÏg
;

894 
	g¡d
::
¡ršg
 
m_ªnÙ©edRegiÚsObjeùLab–Lªg
;

896 
UIÁ
 
	tAÂÙ©edRegiÚObjeùIndex
;

897 
UIÁ
 
	tAÂÙ©edRegiÚLab–Index
;

899 
AÂÙ©edRegiÚH—d”
 
	gm_hdr
;

900 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
AÂÙ©edRegiÚObjeùIndex
, 
	gAÂÙ©edRegiÚObjeù
> > 
	gm_ªnÙ©edRegiÚs
;

901 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
AÂÙ©edRegiÚLab–Index
, 
	gAÂÙ©edRegiÚLab–
> > 
	gm_ªnÙ©edLab–s
;

904 þas 
	cSEICubem­ProjeùiÚ
 : 
public
 
SEI


906 
public
:

907 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
CUBEMAP_PROJECTION
; }

908 
	$SEICubem­ProjeùiÚ
(è{
	}
}

909 
	gvœtu®
 ~
	$SEICubem­ProjeùiÚ
(è{
	}
}

910 
BoÞ
 
	gm_cmpCªûlFÏg
;

911 
BoÞ
 
	gm_cmpP”si¡’ûFÏg
;

914 þas 
	cSEIRegiÚWi£Packšg
 : 
public
 
SEI


916 
public
:

917 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
REGION_WISE_PACKING
; }

918 
	$SEIRegiÚWi£Packšg
(è{
	}
}

919 
	gvœtu®
 ~
	$SEIRegiÚWi£Packšg
(è{
	}
}

920 
BoÞ
 
	gm_rwpCªûlFÏg
;

921 
BoÞ
 
	gm_rwpP”si¡’ûFÏg
;

922 
BoÞ
 
	gm_cÚ¡™u’tPiùu»M©chšgFÏg
;

923 
IÁ
 
	gm_numPackedRegiÚs
;

924 
IÁ
 
	gm_´ojPiùu»Width
;

925 
IÁ
 
	gm_´ojPiùu»Height
;

926 
IÁ
 
	gm_·ckedPiùu»Width
;

927 
IÁ
 
	gm_·ckedPiùu»Height
;

928 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpT¿nsfÜmTy³
;

929 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpGu¬dBªdFÏg
;

930 
	g¡d
::
veùÜ
<
UIÁ
> 
m_´ojRegiÚWidth
;

931 
	g¡d
::
veùÜ
<
UIÁ
> 
m_´ojRegiÚHeight
;

932 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpProjRegiÚTÝ
;

933 
	g¡d
::
veùÜ
<
UIÁ
> 
m_´ojRegiÚLeá
;

934 
	g¡d
::
veùÜ
<
UShÜt
> 
m_·ckedRegiÚWidth
;

935 
	g¡d
::
veùÜ
<
UShÜt
> 
m_·ckedRegiÚHeight
;

936 
	g¡d
::
veùÜ
<
UShÜt
> 
m_·ckedRegiÚTÝ
;

937 
	g¡d
::
veùÜ
<
UShÜt
> 
m_·ckedRegiÚLeá
;

938 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpLeáGu¬dBªdWidth
;

939 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpRightGu¬dBªdWidth
;

940 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpTÝGu¬dBªdHeight
;

941 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpBÙtomGu¬dBªdHeight
;

942 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
;

943 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpGu¬dBªdTy³
;

946 þas 
	cSEIFisheyeVideoInfo
 : 
public
 
SEI


948 
public
:

949 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
FISHEYE_VIDEO_INFO
; }

950 
	$SEIFisheyeVideoInfo
(è{
	}
}

951 
	gvœtu®
 ~
	$SEIFisheyeVideoInfo
(è{
	}
}

952 
TComSEIFisheyeVideoInfo
 
	gv®ues
;

955 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


956 þas 
	cSEIShu‰”IÁ”v®Info
 : 
public
 
SEI


958 
public
:

959 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
SHUTTER_INTERVAL_INFO
; }

960 
	$SEIShu‰”IÁ”v®Info
(è{
	}
}

961 
	gvœtu®
 ~
	$SEIShu‰”IÁ”v®Info
(è{
	}
}

963 
BoÞ
 
	gm_siiEÇbËd
;

964 
UIÁ
 
	gm_siiNumUn™sInShu‰”IÁ”v®
;

965 
UIÁ
 
	gm_siiTimeSÿË
;

966 
UIÁ
 
	gm_siiMaxSubLay”sMšus1
;

967 
BoÞ
 
	gm_siiFixedSIw™hšCLVS
;

968 
	g¡d
::
veùÜ
<
UIÁ
> 
m_siiSubLay”NumUn™sInSI
;

972 þas 
	cSEICÞourRem­pšgInfo
 : 
public
 
SEI


974 
public
:

976 
	sCRIlut


978 
IÁ
 
codedV®ue
;

979 
IÁ
 
	mrg‘V®ue
;

980 
boÞ
 
	mÝ”©Ü
 < (cÚ¡ 
	mCRIlut
& 
	ma
) const

982  
	mcodedV®ue
 < 
	ma
.codedValue;

986 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
COLOUR_REMAPPING_INFO
; 
	}
}

987 
	$SEICÞourRem­pšgInfo
(è{
	}
}

988 ~
	$SEICÞourRem­pšgInfo
(è{
	}
}

990 
Void
 
	$cÝyFrom
ÐcÚ¡ 
SEICÞourRem­pšgInfo
 &
£iCriIÅut
)

992 (*
this
èð
£iCriIÅut
;

993 
	}
}

995 
UIÁ
 
	gm_cÞourRem­Id
;

996 
BoÞ
 
	gm_cÞourRem­CªûlFÏg
;

997 
BoÞ
 
	gm_cÞourRem­P”si¡’ûFÏg
;

998 
BoÞ
 
	gm_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
;

999 
BoÞ
 
	gm_cÞourRem­FuÎRªgeFÏg
;

1000 
IÁ
 
	gm_cÞourRem­Prim¬›s
;

1001 
IÁ
 
	gm_cÞourRem­T¿nsãrFunùiÚ
;

1002 
IÁ
 
	gm_cÞourRem­M©rixCÛffic›Ás
;

1003 
IÁ
 
	gm_cÞourRem­IÅutB™D•th
;

1004 
IÁ
 
	gm_cÞourRem­B™D•th
;

1005 
IÁ
 
	gm_´eLutNumV®Mšus1
[3];

1006 
	g¡d
::
veùÜ
<
CRIlut
> 
m_´eLut
[3];

1007 
BoÞ
 
	gm_cÞourRem­M©rixP»£ÁFÏg
;

1008 
IÁ
 
	gm_log2M©rixD’om
;

1009 
IÁ
 
	gm_cÞourRem­CÛffs
[3][3];

1010 
IÁ
 
	gm_po¡LutNumV®Mšus1
[3];

1011 
	g¡d
::
veùÜ
<
CRIlut
> 
m_po¡Lut
[3];

1015 þas 
	cSEIDeš‹¾aûF›ldId’tifiÿtiÚ
 : 
public
 
SEI


1017 
public
:

1018 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
DEINTERLACE_FIELD_IDENTIFICATION
; }

1019 
	$SEIDeš‹¾aûF›ldId’tifiÿtiÚ
(è{ 
	}
}

1021 
	gvœtu®
 ~
	$SEIDeš‹¾aûF›ldId’tifiÿtiÚ
(è{
	}
}

1023 
BoÞ
 
	gm_deš‹¾aûdPiùu»SourûP¬™yFÏg
;

1027 þas 
	cSEICÚ‹ÁLightLev–Info
 : 
public
 
SEI


1029 
public
:

1030 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
CONTENT_LIGHT_LEVEL_INFO
; }

1031 
	$SEICÚ‹ÁLightLev–Info
(è{ 
	}
}

1033 
	gvœtu®
 ~
	$SEICÚ‹ÁLightLev–Info
(è{ 
	}
}

1035 
UIÁ
 
	gm_maxCÚ‹ÁLightLev–
;

1036 
UIÁ
 
	gm_maxPicAv”ageLightLev–
;

1040 þas 
	cSEID•’d’tRAPIndiÿtiÚ
 : 
public
 
SEI


1042 
public
:

1043 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
DEPENDENT_RAP_INDICATION
; }

1044 
	$SEID•’d’tRAPIndiÿtiÚ
(è{ 
	}
}

1046 
	gvœtu®
 ~
	$SEID•’d’tRAPIndiÿtiÚ
(è{ 
	}
}

1050 þas 
	cSEICodedRegiÚCom¶‘iÚ
 : 
public
 
SEI


1052 
public
:

1053 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
CODED_REGION_COMPLETION
; }

1054 
	$SEICodedRegiÚCom¶‘iÚ
(è{ 
	}
}

1056 
	gvœtu®
 ~
	$SEICodedRegiÚCom¶‘iÚ
(è{ 
	}
}

1058 
UIÁ
 
	gm_ÃxtSegm’tAdd»ss
;

1059 
BoÞ
 
	gm_šd•’d’tSliûSegm’tFÏg
;

1063 þas 
	cSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
 : 
public
 
SEI


1065 
public
:

1066 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
ALTERNATIVE_TRANSFER_CHARACTERISTICS
; }

1068 
	$SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(è: 
	$m_´eã¼edT¿nsãrCh¬aù”i¡ics
(18)

1069 { 
	}
}

1071 
vœtu®
 ~
	$SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(è{
	}
}

1073 
UIÁ
 
m_´eã¼edT¿nsãrCh¬aù”i¡ics
;

1077 þas 
	cSEIAmb›ÁV›wšgEnvœÚm’t
 : 
public
 
SEI


1079 
public
:

1080 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
AMBIENT_VIEWING_ENVIRONMENT
; }

1081 
	$SEIAmb›ÁV›wšgEnvœÚm’t
(è{ 
	}
}

1083 
	gvœtu®
 ~
	$SEIAmb›ÁV›wšgEnvœÚm’t
(è{ 
	}
}

1085 
UIÁ
 
	gm_amb›ÁIÎumšªû
;

1086 
UShÜt
 
	gm_amb›ÁLightX
;

1087 
UShÜt
 
	gm_amb›ÁLightY
;

1089 #ià
MCTS_EXTRACTION


1090 þas 
	cSEIMCTSExŒaùiÚInfoS‘
 : 
public
 
SEI


1092 
public
:

1093 
	sMCTSExŒaùiÚInfo


1095 
¡d
::
veùÜ
< std::veùÜ<
UIÁ
> > 
m_idxOfMùsInS‘
;

1096 
BoÞ
 
	mm_¦iûReÜd”šgEÇbËdFÏg
;

1097 
	m¡d
::
veùÜ
<
UIÁ
> 
m_ouutSliûSegm’tAdd»ss
;

1098 
	m¡d
::
veùÜ
<
UIÁ
> 
m_vpsRb¥D©aL’gth
;

1099 
	m¡d
::
veùÜ
<
UIÁ
> 
m_¥sRb¥D©aL’gth
;

1100 
	m¡d
::
veùÜ
<
UIÁ
> 
m_µsNuhTempÜ®IdPlus1
;

1101 
	m¡d
::
veùÜ
<
UIÁ
> 
m_µsRb¥D©aL’gth
;

1102 
	m¡d
::
veùÜ
< 
¡d
::veùÜ<
ušt8_t
> > 
m_vpsRb¥D©a
;

1103 
	m¡d
::
veùÜ
< 
¡d
::veùÜ<
ušt8_t
> > 
m_¥sRb¥D©a
;

1104 
	m¡d
::
veùÜ
< 
¡d
::veùÜ<
ušt8_t
> > 
m_µsRb¥D©a
;

1105 
UIÁ
 
	mmùsWidth
;

1106 
UIÁ
 
	mmùsHeight
;

1108 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
MCTS_EXTRACTION_INFO_SET
; 
	}
}

1109 
	$SEIMCTSExŒaùiÚInfoS‘
(è{ 
	}
}

1110 
	gvœtu®
 ~
	$SEIMCTSExŒaùiÚInfoS‘
(è{ 
	}
}

1111 
	g¡d
::
veùÜ
<
MCTSExŒaùiÚInfo
> 
m_MCTSExŒaùiÚInfoS‘s
;

1117 þas 
	cRegiÚ®SEI


1119 
	mpublic
:

1120 
	$RegiÚ®SEI
(): 
	$m_£iMes§ge
(
NULL
) {}

1121 
	$RegiÚ®SEI
(
SEI
 *
£i
, 
RNSEIWšdowVec
 &
»giÚs
)

1123 ifÐ
	`checkRegiÚ®Ne¡edSEIPaylßdTy³
(
£i
->
	`·ylßdTy³
()) )

1125 
m_£iMes§ge
 = 
£i
;

1126 
m_»giÚs
 = 
»giÚs
;

1130 
m_£iMes§ge
 = 
£i
;

1132 
	}
}

1133 ~
	$RegiÚ®SEI
()

1135 if(!
m_£iMes§ge
)

1137 
d–‘e
 
m_£iMes§ge
;

1139 
	}
}

1140 
SEI
 *
	$dissocŸ‹SEIObjeù
()

1142 
SEI
 *
‹mp
 = 
m_£iMes§ge
;

1143 
m_£iMes§ge
 = 
NULL
;

1144  
‹mp
;

1145 
	}
}

1146 
UIÁ
 
	$g‘NumRegiÚs
(ècÚ¡ {  (
UIÁ
è
m_»giÚs
.
	`size
(); 
	}
}

1147 cÚ¡ 
	gRNSEIWšdowVec
& 
	$g‘RegiÚs
(è{  
m_»giÚs
; 
	}
}

1148 
Void
 
	$addRegiÚs
(
RNSEIWšdowVec
 cÚ¡ &
»giÚs
è{ 
m_»giÚs
.
	`š£¹
(m_»giÚs.
	`’d
(),„egiÚs.
	`begš
(),„egiÚs.’d()); 
	}
}

1149 
BoÞ
 
	$checkRegiÚ®Ne¡edSEIPaylßdTy³
(
SEI
::
PaylßdTy³
 cÚ¡ 
·ylßdTy³
)

1151 
·ylßdTy³
)

1153 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
:

1154 
SEI
::
USER_DATA_UNREGISTERED
:

1155 
SEI
::
FILM_GRAIN_CHARACTERISTICS
:

1156 
SEI
::
POST_FILTER_HINT
:

1157 
SEI
::
TONE_MAPPING_INFO
:

1158 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
:

1159 
SEI
::
KNEE_FUNCTION_INFO
:

1160 
SEI
::
COLOUR_REMAPPING_INFO
:

1161 
SEI
::
CONTENT_COLOUR_VOLUME
:

1162  
Œue
;

1164  
çl£
;

1166 
	}
}

1167 
	g´iv©e
:

1168 
SEI
 *
m_£iMes§ge
;

1169 
RNSEIWšdowVec
 
	gm_»giÚs
;

1172 þas 
	cSEIRegiÚ®Ne¡šg
 : 
public
 
SEI


1174 
public
:

1175 
	$SEIRegiÚ®Ne¡šg
(): 
	$m_ºId
(0) {}

1176 ~
	`SEIRegiÚ®Ne¡šg
();

1178 
	sSEILi¡OfIndiûs


1180 
¡d
::
veùÜ
<
UIÁ
> 
m_li¡OfIndiûs
;

1181 
SEI
 *
m_£iMes§ge
;

1182 
	`SEILi¡OfIndiûs
(è: 
	`m_£iMes§ge
(
NULL
) {}

1183 
	`SEILi¡OfIndiûs
(
¡d
::
veùÜ
<
UIÁ
> 
li¡OfIndiûs
, 
SEI
* 
£i
è: 
	`m_li¡OfIndiûs
Öi¡OfIndiûs), 
	`m_£iMes§ge
(sei) {}

1184 
	}
};

1186 
PaylßdTy³
 
	$·ylßdTy³
(ècÚ¡ {  
REGIONAL_NESTING
; 
	}
}

1187 
UIÁ
 
	$g‘NumRnSEIMes§ge
(ècÚ¡ {  (
UIÁ
è
m_ºSeiMes§ges
.
	`size
(); 
	}
}

1188 
UIÁ
 
	$g‘NumReùRegiÚs
(ècÚ¡ {  (
UIÁ
è
m_»giÚs
.
	`size
(); 
	}
}

1189 
UIÁ
 
	$g‘RNId
(ècÚ¡ {  
m_ºId
; 
	}
}

1190 
Void
 
	$addRegiÚ
(
RNSEIWšdow
 *
»gn
è{ 
m_»giÚs
.
	`push_back
(*»gn); 
	}
}

1191 
Void
 
	$þ—rRegiÚs
(è{ 
m_»giÚs
.
	`þ—r
(); 
	}
}

1192 
Void
 
	$addRegiÚ®SEI
(
SEILi¡OfIndiûs
 cÚ¡ &
£iW™hLi¡OfRegiÚIndiûs
)

1194 
m_ºSeiMes§ges
.
	`push_back
(
£iW™hLi¡OfRegiÚIndiûs
);

1195 
	}
}

1196 
Void
 
addRegiÚ®SEI
(
RegiÚ®SEI
 *
»gSEI
);

1197 cÚ¡ 
	g¡d
::
veùÜ
< 
SEILi¡OfIndiûs
 >& 
	$g‘RnSEIMes§ges
(ècÚ¡ {  
m_ºSeiMes§ges
; 
	}
}

1198 cÚ¡ 
	g¡d
::
veùÜ
<
RNSEIWšdow
> &
	$g‘RegiÚs
(ècÚ¡ {  
m_»giÚs
; 
	}
}

1199 
	g´iv©e
:

1200 
UIÁ
 
m_ºId
;

1201 
RNSEIWšdowVec
 
	gm_»giÚs
;

1202 
	g¡d
::
veùÜ
< 
SEILi¡OfIndiûs
 > 
m_ºSeiMes§ges
;

	@source/Lib/TLibCommon/SEIFilmGrainSynthesizer.cpp

38 
	~"SEIFžmG¿šSyÁhesiz”.h
"

40 
	~<¡dio.h
>

42 #ià
FGS_RDD5_ENABLE


45 cÚ¡ 
št8_t
 
	ggaussŸnLUT
[2048] =

177 cÚ¡ 
ušt32_t
 
	g£edLUT
[256] = {

211 cÚ¡ 
št8_t
 
	gR64_IDCT
[64][64] =

535 cÚ¡ 
ušt32_t
 
	gdeblockFaùÜ
[13] =

539 
	gSEIFžmG¿šSyÁhesiz”
::
	$SEIFžmG¿šSyÁhesiz”
()

540 : 
	`m_width
(0)

541 , 
	`m_height
(0)

542 , 
	`m_chromaFÜm©
(
NUM_CHROMA_FORMAT
)

543 , 
	`m_b™D•th
(0)

544 , 
	`m_idrPicId
(0)

545 , 
	`m_’abËDeblockšg
(0)

546 , 
	`m_pG¿šSyÁ
(
NULL
)

547 , 
	`m_poc
(0)

548 , 
	`m_”rÜCode
(0)

549 , 
	$m_pFgcP¬am‘”s
(
NULL
)

552 
	}
}

554 
	gSEIFžmG¿šSyÁhesiz”
::
	$ü—‹
(
ušt32_t
 
width
, ušt32_ˆ
height
, 
ChromaFÜm©
 
fmt
,

555 
ušt8_t
 
b™D•th
, 
ušt32_t
 
idrPicId
, ušt8_ˆ
’abËDeblockšg
)

557 
m_width
 = 
width
;

558 
m_height
 = 
height
;

559 
m_chromaFÜm©
 = 
fmt
;

560 
m_b™D•th
 = 
b™D•th
;

561 
m_idrPicId
 = 
idrPicId
;

562 
m_’abËDeblockšg
 = 
’abËDeblockšg
;

563 
m_pG¿šSyÁ
 = 
NULL
;

564 
m_”rÜCode
 = 0;

565 
m_pFgcP¬am‘”s
 = 
NULL
;

566 
	}
}

568 
	gSEIFžmG¿šSyÁhesiz”
::~
	$SEIFžmG¿šSyÁhesiz”
()

571 
	}
}

573 
SEIFžmG¿šSyÁhesiz”
::
	$fgsIn™
()

575 
m_pG¿šSyÁ
 = 
Ãw
 
G¿šSyÁhesisSŒuù
;

576 
	`d©aBa£G’
();

577 
	}
}

579 
	gSEIFžmG¿šSyÁhesiz”
::
	$fgsDeš™
()

581 
d–‘e
 
m_pG¿šSyÁ
;

582 
	}
}

584 
	gSEIFžmG¿šSyÁhesiz”
::
	$g¿šSyÁhesizeAndBËnd
(
TComPicYuv
* 
pG¿šBuf
, 
BoÞ
 
isIdrPic
)

586 
ušt8_t
 
numComp
 = 
MAX_NUM_COMPONENT
, 
compCŒ
, 
blkId
;

587 
ušt8_t
 
log2SÿËFaùÜ
, 
h
, 
v
;

588 
ušt8_t
 
b™D•th
;

589 
ušt8_t
 
cÞÜ_off£t
[
MAX_NUM_COMPONENT
];

590 
ušt32_t
 
widthComp
[
MAX_NUM_COMPONENT
], 
heightComp
[MAX_NUM_COMPONENT], 
¡rideComp
[MAX_NUM_COMPONENT];

591 
P–
 *
decSam¶eBlk16
, *
decSam¶eBlk8
, *
decSam¶eOff£tY
;

592 
P–
 *
decComp
[
MAX_NUM_COMPONENT
];

593 
ušt16_t
 
numSam¶es
;

594 
št16_t
 
sÿËFaùÜ
;

595 
ušt32_t
 
kOff£t
, 
lOff£t
, 
g¿šSŒeOff£t
, 
g¿šSŒeOff£tBlk8
, 
off£tBlk8x8
;

596 
št32_t
 *
g¿šSŒe
;

597 
št32_t
 
yOff£t8x8
, 
xOff£t8x8
;

598 
ušt32_t
 
picOff£t
, 
x
, 
y
, 
š‹ns™yIÁ
;

599 
P–
 
blockAvg
;

600 
ušt32_t
 
p£udoRªdV®Ec
;

601 
ušt32_t
 
picOrd”CÁOff£t
=0;

604 
cÞÜ_off£t
[0] = 
COLOUR_OFFSET_LUMA
;

605 
cÞÜ_off£t
[1] = 
COLOUR_OFFSET_CR
;

606 
cÞÜ_off£t
[2] = 
COLOUR_OFFSET_CB
;

608 
b™D•th
 = 
m_b™D•th
;

609 
log2SÿËFaùÜ
 = 
m_pFgcP¬am‘”s
->
m_log2SÿËFaùÜ
;

611 
widthComp
[0] = 
m_width
;

612 
widthComp
[1] = 
m_width
;

613 
widthComp
[2] = 
m_width
;

614 
heightComp
[0] = 
m_height
;

615 
heightComp
[1] = 
m_height
;

616 
heightComp
[2] = 
m_height
;

617 ià(
CHROMA_420
 =ð
m_chromaFÜm©
)

619 
widthComp
[1] >>= 1;

620 
widthComp
[2] >>= 1;

621 
heightComp
[1] >>= 1;

622 
heightComp
[2] >>= 1;

624 ià(
CHROMA_422
 =ð
m_chromaFÜm©
)

626 
widthComp
[1] >>= 1;

627 
widthComp
[2] >>= 1;

629 ià(
CHROMA_400
 =ð
m_chromaFÜm©
)

631 
numComp
 = 1;

635 
decComp
[0] = 
pG¿šBuf
->
	`g‘Addr
(
COMPONENT_Y
);

636 
decComp
[1] = 
pG¿šBuf
->
	`g‘Addr
(
COMPONENT_Cb
);

637 
decComp
[2] = 
pG¿šBuf
->
	`g‘Addr
(
COMPONENT_Cr
);

640 
¡rideComp
[0] = 
pG¿šBuf
->
	`g‘SŒide
(
COMPONENT_Y
);

641 
¡rideComp
[1] = 
pG¿šBuf
->
	`g‘SŒide
(
COMPONENT_Cb
);

642 
¡rideComp
[2] = 
pG¿šBuf
->
	`g‘SŒide
(
COMPONENT_Cr
);

644 
g¿šSŒe
 = (
št32_t
 *)
	`m®loc
(
¡rideComp
[0] * 
BLK_16
 * (int32_t));

646 ià(
isIdrPic
)

648 
picOrd”CÁOff£t
 = 
m_idrPicId
;

651 ià(
FGS_SUCCESS
 =ð
m_”rÜCode
)

653 ià(0 =ð
m_pFgcP¬am‘”s
->
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
)

655 
compCŒ
 = 0; compCŒ < 
numComp
; compCtr++)

657 ià(1 =ð
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
bP»£ÁFÏg
)

659 
picOff£t
 = (
m_poc
è+ (
picOrd”CÁOff£t
 << 5);

661 
p£udoRªdV®Ec
 = 
£edLUT
[((
picOff£t
 + 
cÞÜ_off£t
[
compCŒ
]) % 256)];

663 
decSam¶eOff£tY
 = 
decComp
[
compCŒ
];

666 
y
 = 0; y < 
heightComp
[
compCŒ
]; y +ð
BLK_16
)

669 
	`mem£t
(
g¿šSŒe
, 0, (
¡rideComp
[0] * 
BLK_16
 * (
št32_t
)));

670 
x
 = 0; x < 
widthComp
[
compCŒ
]; x +ð
BLK_16
)

673 
g¿šSŒeOff£t
 = 
x
;

674 
decSam¶eBlk16
 = 
decSam¶eOff£tY
 + 
x
;

676 
blkId
 = 0; blkId < 
NUM_8x8_BLKS_16x16
; blkId++)

678 
yOff£t8x8
 = (
blkId
 >> 1è* 
BLK_8
;

679 
xOff£t8x8
 = (
blkId
 & 0x1)* 
BLK_8
;

680 
off£tBlk8x8
 = 
xOff£t8x8
 + (
yOff£t8x8
 * 
¡rideComp
[
compCŒ
]);

681 
g¿šSŒeOff£tBlk8
 = 
g¿šSŒeOff£t
 + 
off£tBlk8x8
;

683 
decSam¶eBlk8
 = 
decSam¶eBlk16
 + 
off£tBlk8x8
;

684 
blockAvg
 = 
	`blockAv”age
(
decSam¶eBlk8
, 
¡rideComp
[
compCŒ
], &
numSam¶es
,

685 
	`MIN
(
BLK_8
, (
heightComp
[
compCŒ
] - 
y
 - 
yOff£t8x8
)),

686 
	`MIN
(
BLK_8
, (
widthComp
[
compCŒ
] - 
x
 - 
xOff£t8x8
)),

687 
b™D•th
);

690 ià(
numSam¶es
 > 0)

693 
š‹ns™yIÁ
 = 
m_pG¿šSyÁ
->
š‹ns™yIÁ”v®
[
compCŒ
][
blockAvg
];

695 ià(
INTENSITY_INTERVAL_MATCH_FAIL
 !ð
š‹ns™yIÁ
)

698 
kOff£t
 = (
	`MSB16
(
p£udoRªdV®Ec
) % 52);

699 
kOff£t
 &= 0xFFFC;

700 
kOff£t
 +ð(
x
 + 
xOff£t8x8
) & 0x0008;

701 
lOff£t
 = (
	`LSB16
(
p£udoRªdV®Ec
) % 56);

702 
lOff£t
 &= 0xFFF8;

703 
lOff£t
 +ð(
y
 + 
yOff£t8x8
) & 0x0008;

704 
sÿËFaùÜ
 = 
	`BIT0
(
p£udoRªdV®Ec
) ? -1 : 1;

705 
sÿËFaùÜ
 *=

706 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yIÁ
].
compMod–V®ue
[0];

707 
h
 = 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yIÁ
].
compMod–V®ue
[1] - 2;

708 
v
 = 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yIÁ
].
compMod–V®ue
[2] - 2;

711 
	`simuÏ‹G¿šBlk8x8
(
g¿šSŒe
, 
g¿šSŒeOff£tBlk8
,

712 
m_pG¿šSyÁ
, 
¡rideComp
[
compCŒ
],

713 
log2SÿËFaùÜ
, 
sÿËFaùÜ
, 
kOff£t
, 
lOff£t
, 
h
, 
v
, 
	`MIN
(
BLK_8
, (
widthComp
[
compCŒ
] - 
x
 - 
xOff£t8x8
)));

719 
p£udoRªdV®Ec
 = 
	`´ng
(pseudoRandValEc);

723 ià(
m_’abËDeblockšg
)

725 
	`deblockG¿šSŒe
(
g¿šSŒe
, 
widthComp
[
compCŒ
], 
¡rideComp
[compCtr]);

728 
	`bËndSŒe
(
decSam¶eOff£tY
, 
g¿šSŒe
,

729 
¡rideComp
[
compCŒ
], 
	`MIN
(
BLK_16
, (
heightComp
[compCŒ] - 
y
)), 
b™D•th
);

730 
decSam¶eOff£tY
 +ð
	`MIN
(
BLK_16
, 
heightComp
[
compCŒ
] - 
y
è* 
¡rideComp
[compCtr];

737 ià(
isIdrPic
)

739 
m_idrPicId
++;

741 
	`ä“
(
g¿šSŒe
);

742 
	}
}

744 
	gSEIFžmG¿šSyÁhesiz”
::
	$d©aBa£G’
()

746 
ušt32_t
 
p£udoRªdV®Ehv
;

747 
ušt8_t
 
h
, 
v
;

748 
ušt32_t
 
SÿËCutOffFh
, 
SÿËCutOffFv
, 
l
, 
r
, 
i
, 
j
, 
k
;

749 
št32_t
 
B
[
DATA_BASE_SIZE
][DATA_BASE_SIZE], 
bIDCT
[DATA_BASE_SIZE][DATA_BASE_SIZE];

750 
št32_t
 
bG¿š
[
DATA_BASE_SIZE
][DATA_BASE_SIZE];

751 
št8_t
 
R64_IDCT_TR
[
DATA_BASE_SIZE
][DATA_BASE_SIZE];

753 
l
 = 0;† < 
DATA_BASE_SIZE
;†++)

755 
k
 = 0; k < 
DATA_BASE_SIZE
; k++)

757 
R64_IDCT_TR
[
l
][
k
] = 
R64_IDCT
[k][l];

761 
h
 = 0; h < 
NUM_CUT_OFF_FREQ
; h++)

763 
v
 = 0; v < 
NUM_CUT_OFF_FREQ
; v++)

765 
	`mem£t
(&
B
, 0, 
DATA_BASE_SIZE
*DATA_BASE_SIZE * (
št32_t
));

766 
	`mem£t
(&
bIDCT
, 0, 
DATA_BASE_SIZE
*DATA_BASE_SIZE * (
št32_t
));

767 
	`mem£t
(&
bG¿š
, 0, 
DATA_BASE_SIZE
*DATA_BASE_SIZE * (
št32_t
));

768 
SÿËCutOffFh
 = ((
h
 + 3) << 2) - 1;

769 
SÿËCutOffFv
 = ((
v
 + 3) << 2) - 1;

772 
p£udoRªdV®Ehv
 = 
£edLUT
[
h
 + 
v
 * 13];

774 
l
 = 0, 
r
 = 0;† <ð
SÿËCutOffFv
;†++)

776 
k
 = 0; k <ð
SÿËCutOffFh
; k += 4)

778 
B
[
k
][
l
] = 
gaussŸnLUT
[
p£udoRªdV®Ehv
 % 2048];

779 
B
[
k
 + 1][
l
] = 
gaussŸnLUT
[(
p£udoRªdV®Ehv
 + 1) % 2048];

780 
B
[
k
 + 2][
l
] = 
gaussŸnLUT
[(
p£udoRªdV®Ehv
 + 2) % 2048];

781 
B
[
k
 + 3][
l
] = 
gaussŸnLUT
[(
p£udoRªdV®Ehv
 + 3) % 2048];

782 
r
++;

783 
p£udoRªdV®Ehv
 = 
	`´ng
(pseudoRandValEhv);

786 
B
[0][0] = 0;

788 
i
 = 0; i < 
DATA_BASE_SIZE
; i++)

790 
j
 = 0; j < 
DATA_BASE_SIZE
; j++)

792 
k
 = 0; k < 
DATA_BASE_SIZE
; k++)

794 
bIDCT
[
i
][
j
] +ð
R64_IDCT_TR
[i][
k
] * 
B
[k][j];

796 
bIDCT
[
i
][
j
] += 128;

797 
bIDCT
[
i
][
j
] = bIDCT[i][j] >> 8;

801 
i
 = 0; i < 
DATA_BASE_SIZE
; i++)

803 
j
 = 0; j < 
DATA_BASE_SIZE
; j++)

805 
k
 = 0; k < 
DATA_BASE_SIZE
; k++)

807 
bG¿š
[
i
][
j
] +ð
bIDCT
[i][
k
] * 
R64_IDCT
[k][j];

809 
bG¿š
[
i
][
j
] += 128;

810 
bG¿š
[
i
][
j
] = bGrain[i][j] >> 8;

811 
m_pG¿šSyÁ
->
d©aBa£
[
h
][
v
][
j
][
i
] = 
	`CLIP3
(-127, 127, 
bG¿š
[i][j]);

816 ià(
m_’abËDeblockšg
)

818 
l
 = 0;† < 
DATA_BASE_SIZE
;† += 8)

820 
k
 = 0; k < 
DATA_BASE_SIZE
; k++)

822 
m_pG¿šSyÁ
->
d©aBa£
[
h
][
v
][
l
][
k
] = ((m_pG¿šSyÁ->d©aBa£[h][v][l][k]è* 
deblockFaùÜ
[v]) >> 7;

823 
m_pG¿šSyÁ
->
d©aBa£
[
h
][
v
][
l
 + 7][
k
] = ((m_pG¿šSyÁ->d©aBa£[h][v][È+ 7][k]è* 
deblockFaùÜ
[v]) >> 7;

831 
	}
}

835 
ušt8_t
 
	gSEIFžmG¿šSyÁhesiz”
::
	$g¿šV®id©eP¬ams
()

837 
ušt8_t
 
numComp
 = 
MAX_NUM_COMPONENT
;

838 
ušt8_t
 
compCŒ
, 
š‹ns™yCŒ
, 
muÉiG¿šCheck
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
] = {{ 0 }};

839 
ušt16_t
 
muÉiG¿šCŒ
;

840 
ušt8_t
 
lim™CompMod–V®1
[10] = { 0 }, 
lim™CompMod–V®2
[10] = { 0 };

841 
ušt8_t
 
num_comp_mod–_·œs
 = 0, 
lim™CompMod–CŒ
, 
compPaœM©ch
;

843 
	`mem£t
(
m_pG¿šSyÁ
->
š‹ns™yIÁ”v®
, 
INTENSITY_INTERVAL_MATCH_FAIL
,

844 (
m_pG¿šSyÁ
->
š‹ns™yIÁ”v®
));

846 ià((
m_width
 < 
MIN_WIDTH
è|| (m_width > 
MAX_WIDTH
) || (m_width % 4))

848  
FGS_INVALID_WIDTH
;

850 ià((
m_height
 < 
MIN_HEIGHT
è|| (m_heighˆ> 
MAX_HEIGHT
) || (m_height % 4))

852  
FGS_INVALID_HEIGHT
;

854 ià((
m_chromaFÜm©
 < 
MIN_CHROMA_FORMAT_IDC
è|| (m_chromaFÜm© > 
MAX_CHROMA_FORMAT_IDC
))

856  
FGS_INVALID_CHROMA_FORMAT
;

858 ià(
m_chromaFÜm©
 =ð
MIN_CHROMA_FORMAT_IDC
)

860 
numComp
 = 1;

863 ià((
m_b™D•th
 < 
MIN_BIT_DEPTH
è|| (m_b™D•th > 
MAX_BIT_DEPTH
))

865  
FGS_INVALID_BIT_DEPTH
;

868 ià((0 !ð
m_pFgcP¬am‘”s
->
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
) &&

869 (1 !ð
m_pFgcP¬am‘”s
->
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
))

871  
FGS_INVALID_FGC_CANCEL_FLAG
;

874 ià(
FILM_GRAIN_MODEL_ID_VALUE
 !ð
m_pFgcP¬am‘”s
->
m_fžmG¿šMod–Id
)

876  
FGS_INVALID_GRAIN_MODEL_ID
;

879 ià(0 !ð
m_pFgcP¬am‘”s
->
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
)

881  
FGS_INVALID_SEP_COL_DES_FLAG
;

884 ià(
BLENDING_MODE_VALUE
 !ð
m_pFgcP¬am‘”s
->
m_bËndšgModeId
)

886  
FGS_INVALID_BLEND_MODE
;

889 ià((
m_pFgcP¬am‘”s
->
m_log2SÿËFaùÜ
 < 
MIN_LOG2SCALE_VALUE
) ||

890 (
m_pFgcP¬am‘”s
->
m_log2SÿËFaùÜ
 > 
MAX_LOG2SCALE_VALUE
))

892  
FGS_INVALID_LOG2_SCALE_FACTOR
;

896 
compCŒ
 = 0; compCŒ < 
numComp
; compCtr++)

898 ià((
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
bP»£ÁFÏg
 !ð
Œue
) &&

899 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
bP»£ÁFÏg
 !ð
çl£
))

901  
FGS_INVALID_COMP_MODEL_PRESENT_FLAG
;

903 ià(
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
bP»£ÁFÏg
 &&

904 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
numMod–V®ues
 > 
MAX_ALLOWED_MODEL_VALUES
))

906  
FGS_INVALID_NUM_MODEL_VALUES
;

911 
compCŒ
 = 0; compCŒ < 
numComp
; compCtr++)

913 ià(
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
bP»£ÁFÏg
)

915 
š‹ns™yCŒ
 = 0; iÁ’s™yCŒ < 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
.
	`size
(); intensityCtr++)

918 ià(
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
š‹ns™yIÁ”v®Low”Bound
 >

919 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
š‹ns™yIÁ”v®Uµ”Bound
)

921  
FGS_INVALID_INTENSITY_BOUNDARY_VALUES
;

924 
muÉiG¿šCŒ
 = 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
š‹ns™yIÁ”v®Low”Bound
;

925 
muÉiG¿šCŒ
 <ð
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
š‹ns™yIÁ”v®Uµ”Bound
; multiGrainCtr++)

927 
m_pG¿šSyÁ
->
š‹ns™yIÁ”v®
[
compCŒ
][
muÉiG¿šCŒ
] = 
š‹ns™yCŒ
;

928 ià(
muÉiG¿šCheck
[
compCŒ
][
muÉiG¿šCŒ
])

930  
FGS_INVALID_INTENSITY_BOUNDARY_VALUES
;

934 
muÉiG¿šCheck
[
compCŒ
][
muÉiG¿šCŒ
] = 1;

938 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
.
	`»size
(
MAX_NUM_MODEL_VALUES
);

940 ià(1 =ð
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
numMod–V®ues
)

942 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] = 
DEFAULT_HORZ_CUT_OFF_FREQUENCY
;

943 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] =

944 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1];

946 ià(2 =ð
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
numMod–V®ues
)

948 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] =

949 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1];

953 ià(
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[0] > (
MAX_STANDARD_DEVIATION
 << (
m_b™D•th
 - 
BIT_DEPTH_8
)))

955  
FGS_INVALID_STANDARD_DEVIATION
;

957 ià((
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] < 
MIN_CUT_OFF_FREQUENCY
) ||

958 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] > 
MAX_CUT_OFF_FREQUENCY
))

960  
FGS_INVALID_CUT_OFF_FREQUENCIES
;

962 ià((
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] < 
MIN_CUT_OFF_FREQUENCY
) ||

963 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] > 
MAX_CUT_OFF_FREQUENCY
))

965  
FGS_INVALID_CUT_OFF_FREQUENCIES
;

969 ià((
CHROMA_444
 !ð
m_chromaFÜm©
è&& (
compCŒ
 > 0))

971 ià(
CHROMA_420
 =ð
m_chromaFÜm©
)

973 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[0] >>= 1;

974 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] =

975 
	`CLIP3
(
MIN_CUT_OFF_FREQUENCY
, 
MAX_CUT_OFF_FREQUENCY
,

976 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] << 1));

977 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] =

978 
	`CLIP3
(
MIN_CUT_OFF_FREQUENCY
, 
MAX_CUT_OFF_FREQUENCY
,

979 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2] << 1));

982 ià(
CHROMA_422
 =ð
m_chromaFÜm©
)

984 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[0] =

985 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[0] * 
SCALE_DOWN_422
è>> 
Q_FORMAT_SCALING
;

987 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] =

988 
	`CLIP3
(
MIN_CUT_OFF_FREQUENCY
, 
MAX_CUT_OFF_FREQUENCY
,

989 (
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1] << 1));

994 
compPaœM©ch
 = 0;

995 
lim™CompMod–CŒ
 = 0;†im™CompMod–CŒ <ð
num_comp_mod–_·œs
;†imitCompModelCtr++)

997 ià((
lim™CompMod–V®1
[
lim™CompMod–CŒ
] ==

998 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1]) &&

999 (
lim™CompMod–V®2
[
lim™CompMod–CŒ
] ==

1000 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2]))

1002 
compPaœM©ch
 = 1;

1006 ià(0 =ð
compPaœM©ch
)

1008 
num_comp_mod–_·œs
++;

1010 ià(
num_comp_mod–_·œs
 > 
MAX_ALLOWED_COMP_MODEL_PAIRS
)

1012  
FGS_INVALID_NUM_CUT_OFF_FREQ_PAIRS
;

1014 
lim™CompMod–V®1
[
num_comp_mod–_·œs
 - 1] =

1015 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[1];

1016 
lim™CompMod–V®2
[
num_comp_mod–_·œs
 - 1] =

1017 
m_pFgcP¬am‘”s
->
m_compMod–
[
compCŒ
].
š‹ns™yV®ues
[
š‹ns™yCŒ
].
compMod–V®ue
[2];

1023 ià(0 !ð
m_pFgcP¬am‘”s
->
m_fžmG¿šCh¬aù”i¡icsP”si¡’ûFÏg
)

1025  
FGS_INVALID_FGC_REPETETION_PERIOD
;

1027  
FGS_SUCCESS
;

1028 
	}
}

1030 
ušt32_t
 
	gSEIFžmG¿šSyÁhesiz”
::
	$´ng
(
ušt32_t
 
x_r
)

1032 
ušt32_t
 
addV®
;

1033 
addV®
 = (1 + ((
x_r
 & (
POS_2
)è> 0è+ ((x_¸& (
POS_30
)) > 0)) % 2;

1034 
x_r
 = (x_¸<< 1è+ 
addV®
;

1035  
x_r
;

1036 
	}
}

1039 
P–
 
	gSEIFžmG¿šSyÁhesiz”
::
	$blockAv”age
(
P–
 *
decSam¶eBlk8
,

1040 
ušt32_t
 
widthComp
,

1041 
ušt16_t
 *
pNumSam¶es
,

1042 
ušt8_t
 
ySize
,

1043 
ušt8_t
 
xSize
,

1044 
ušt8_t
 
b™D•th
)

1046 
ušt32_t
 
blockAvg
 = 0;

1047 
ušt8_t
 
k
, 
l
;

1048 
ušt16_t
 
numSam¶es
 = 0;

1050 
k
 = 0; k < 
ySize
; k++)

1052 
l
 = 0;† < 
xSize
;†++)

1054 
blockAvg
 +ð*(
decSam¶eBlk8
 + 
l
 + (
k
*
widthComp
));

1055 
numSam¶es
++;

1058 ià(
numSam¶es
 > 0)

1060 
blockAvg
 /ð
numSam¶es
;

1061 
blockAvg
 >>ð(
b™D•th
 - 
BIT_DEPTH_8
);

1064 
	`as£¹
(
blockAvg
 < (1 << 
BIT_DEPTH_8
));

1065 *
pNumSam¶es
 = 
numSam¶es
;

1067 
blockAvg
 = 
	`CLIP3
(0, (1 << 
BIT_DEPTH_8
) - 1, blockAvg);

1068  
blockAvg
;

1069 
	}
}

1070 
	gSEIFžmG¿šSyÁhesiz”
::
	$deblockG¿šSŒe
(
št32_t
 *
g¿šSŒe
, 
ušt32_t
 
widthComp
, ušt32_ˆ
¡rideComp
)

1072 
št32_t
 
Ëá1
, 
Ëá0
, 
right0
, 
right1
;

1073 
ušt32_t
 
pos8
, 
v”tCŒ
;

1075 
pos8
 = 0;…os8 < (
widthComp
 - 
BLK_8
);…os8 += BLK_8)

1077 
v”tCŒ
 = 0; v”tCŒ < 
BLK_16
; vertCtr++)

1079 
Ëá1
 = *(
g¿šSŒe
 + 
pos8
 + 6 + (
v”tCŒ
*
¡rideComp
));

1080 
Ëá0
 = *(
g¿šSŒe
 + 
pos8
 + 7 + (
v”tCŒ
*
¡rideComp
));

1081 
right0
 = *(
g¿šSŒe
 + 
pos8
 + 
BLK_8
 + 0 + (
v”tCŒ
*
¡rideComp
));

1082 
right1
 = *(
g¿šSŒe
 + 
pos8
 + 
BLK_8
 + 1 + (
v”tCŒ
*
¡rideComp
));

1083 *(
g¿šSŒe
 + 
pos8
 + 
BLK_8
 + 0 + (
v”tCŒ
*
¡rideComp
)èð(
Ëá0
 + (
right0
 << 1è+ 
right1
) >> 2;

1084 *(
g¿šSŒe
 + 
pos8
 + 7 + (
v”tCŒ
*
¡rideComp
)èð(
Ëá1
 + (
Ëá0
 << 1è+ 
right0
) >> 2;

1088 
	}
}

1089 
	gSEIFžmG¿šSyÁhesiz”
::
	$bËndSŒe
(
P–
 *
decSam¶eOff£tY
, 
št32_t
 *
g¿šSŒe
,

1090 
ušt32_t
 
widthComp
, ušt32_ˆ
blockHeight
, 
ušt8_t
 
b™D•th
)

1092 
ušt32_t
 
k
, 
l
;

1093 
št32_t
 
g¿šSam¶e
;

1094 
P–
 
decodeSam¶e
;

1095 
ušt16_t
 
maxRªge
;

1096 
maxRªge
 = (1 << 
b™D•th
) - 1;

1097 
l
 = 0;† < 
blockHeight
;†++)

1099 
k
 = 0; k < 
widthComp
; k++)

1101 
decodeSam¶e
 = *(
decSam¶eOff£tY
 + 
k
 + (
l
*
widthComp
));

1102 
g¿šSam¶e
 = *(
g¿šSŒe
 + 
k
 + (
l
*
widthComp
));

1103 
g¿šSam¶e
 <<ð(
b™D•th
 - 
BIT_DEPTH_8
);

1104 
g¿šSam¶e
 = 
	`CLIP3
(0, 
maxRªge
, g¿šSam¶+ 
decodeSam¶e
);

1105 *(
decSam¶eOff£tY
 + 
k
 + (
l
*
widthComp
)èð(
P–
)
g¿šSam¶e
;

1109 
	}
}

1112 
	gSEIFžmG¿šSyÁhesiz”
::
	$simuÏ‹G¿šBlk8x8
(
št32_t
 *
g¿šSŒe
, 
ušt32_t
 
g¿šSŒeOff£tBlk8
,

1113 
G¿šSyÁhesisSŒuù
 *
pG¿šSyÁ
, 
ušt32_t
 
width
, 
ušt8_t
 
log2SÿËFaùÜ
,

1114 
št16_t
 
sÿËFaùÜ
, 
ušt32_t
 
kOff£t
, ušt32_ˆ
lOff£t
,

1115 
ušt8_t
 
h
, ušt8_ˆ
v
, 
ušt32_t
 
xSize
)

1117 
ušt32_t
 
k
, 
l
;

1118 
l
 = 0;† < 
BLK_8
;†++)

1120 
k
 = 0; k < 
xSize
; k++)

1122 *(
g¿šSŒe
 + 
g¿šSŒeOff£tBlk8
 + 
k
 + (
l
*
width
)) =

1123 ((
sÿËFaùÜ
 *

1124 
pG¿šSyÁ
->
d©aBa£
[
h
][
v
][
l
 + 
lOff£t
][
k
 + 
kOff£t
]è>> (
log2SÿËFaùÜ
 + 
GRAIN_SCALE
));

1128 
	}
}

	@source/Lib/TLibCommon/SEIFilmGrainSynthesizer.h

39 #iâdeà
__SEIFILMGRAINSYNTHESIZER__


40 
	#__SEIFILMGRAINSYNTHESIZER__


	)

42 
	~"SEI.h
"

43 
	~"TComPicYuv.h
"

52 
	#MAX_ALLOWED_MODEL_VALUES
 3

	)

53 
	#MIN_LOG2SCALE_VALUE
 2

	)

54 
	#MAX_LOG2SCALE_VALUE
 7

	)

55 
	#FILM_GRAIN_MODEL_ID_VALUE
 0

	)

56 
	#BLENDING_MODE_VALUE
 0

	)

57 
	#MAX_STANDARD_DEVIATION
 255

	)

58 
	#MIN_CUT_OFF_FREQUENCY
 2

	)

59 
	#MAX_CUT_OFF_FREQUENCY
 14

	)

60 
	#DEFAULT_HORZ_CUT_OFF_FREQUENCY
 8

	)

61 
	#MAX_ALLOWED_COMP_MODEL_PAIRS
 10

	)

63 
	#SCALE_DOWN_422
 181

	)

64 
	#Q_FORMAT_SCALING
 8

	)

65 
	#GRAIN_SCALE
 6

	)

66 
	#MIN_CHROMA_FORMAT_IDC
 0

	)

67 
	#MAX_CHROMA_FORMAT_IDC
 3

	)

68 
	#MIN_BIT_DEPTH
 8

	)

69 
	#MAX_BIT_DEPTH
 16

	)

70 
	#BIT_DEPTH_8
 8

	)

71 
	#NUM_8x8_BLKS_16x16
 4

	)

72 
	#BLK_8
 8

	)

73 
	#BLK_16
 16

	)

74 
	#INTENSITY_INTERVAL_MATCH_FAIL
 -1

	)

75 
	#COLOUR_OFFSET_LUMA
 0

	)

76 
	#COLOUR_OFFSET_CR
 85

	)

77 
	#COLOUR_OFFSET_CB
 170

	)

79 
	#NUM_CUT_OFF_FREQ
 13

	)

80 
	#DATA_BASE_SIZE
 64

	)

82 
	#MIN_WIDTH
 128

	)

83 
	#MAX_WIDTH
 7680

	)

84 
	#MIN_HEIGHT
 128

	)

85 
	#MAX_HEIGHT
 4320

	)

87 
	#MIN_CHROMA_FORMAT_IDC
 0

	)

88 
	#MAX_CHROMA_FORMAT_IDC
 3

	)

89 
	#MIN_BIT_DEPTH
 8

	)

90 
	#MAX_BIT_DEPTH
 16

	)

91 
	#BIT_DEPTH_8
 8

	)

92 
	#NUM_8x8_BLKS_16x16
 4

	)

93 
	#BLK_8
 8

	)

94 
	#BLK_16
 16

	)

95 
	#INTENSITY_INTERVAL_MATCH_FAIL
 -1

	)

96 
	#COLOUR_OFFSET_LUMA
 0

	)

97 
	#COLOUR_OFFSET_CR
 85

	)

98 
	#COLOUR_OFFSET_CB
 170

	)

100 
	#CLIP3
(
mš
, 
max
, 
x
è(((xè> (max)è? (maxè:(((xè< (mš))? (mš):(x)))

	)

101 
	#MIN
(
x
,
y
è(((xè> (y)è? (yè: (x))

	)

102 
	#MSB16
(
x
è((x&0xFFFF0000)>>16)

	)

103 
	#LSB16
(
x
è(x&0x0000FFFF)

	)

104 
	#BIT0
(
x
è(x&0x1)

	)

105 
	#POS_30
 (1<<30)

	)

106 
	#POS_2
 (1<<2)

	)

109 
	#FGS_FILE_IO_ERROR
 0x0010

	)

110 
	#FGS_PARAM_ERROR
 0x0020

	)

116 
	mFGS_SUCCESS
 = 0,

118 
	mFGS_INVALID_WIDTH
 = 
FGS_FILE_IO_ERROR
 + 0x01,

120 
	mFGS_INVALID_HEIGHT
 = 
FGS_FILE_IO_ERROR
 + 0x02,

122 
	mFGS_INVALID_CHROMA_FORMAT
 = 
FGS_FILE_IO_ERROR
 + 0x03,

124 
	mFGS_INVALID_BIT_DEPTH
 = 
FGS_FILE_IO_ERROR
 + 0x04,

127 
	mFGS_INVALID_FGC_CANCEL_FLAG
 = 
FGS_PARAM_ERROR
 + 0x01,

129 
	mFGS_INVALID_GRAIN_MODEL_ID
 = 
FGS_PARAM_ERROR
 + 0x02,

131 
	mFGS_INVALID_SEP_COL_DES_FLAG
 = 
FGS_PARAM_ERROR
 + 0x03,

133 
	mFGS_INVALID_BLEND_MODE
 = 
FGS_PARAM_ERROR
 + 0x04,

135 
	mFGS_INVALID_LOG2_SCALE_FACTOR
 = 
FGS_PARAM_ERROR
 + 0x05,

137 
	mFGS_INVALID_COMP_MODEL_PRESENT_FLAG
 = 
FGS_PARAM_ERROR
 + 0x06,

139 
	mFGS_INVALID_NUM_MODEL_VALUES
 = 
FGS_PARAM_ERROR
 + 0x07,

141 
	mFGS_INVALID_INTENSITY_BOUNDARY_VALUES
 = 
FGS_PARAM_ERROR
 + 0x08,

143 
	mFGS_INVALID_STANDARD_DEVIATION
 = 
FGS_PARAM_ERROR
 + 0x09,

145 
	mFGS_INVALID_CUT_OFF_FREQUENCIES
 = 
FGS_PARAM_ERROR
 + 0x0A,

147 
	mFGS_INVALID_NUM_CUT_OFF_FREQ_PAIRS
 = 
FGS_PARAM_ERROR
 + 0x0B,

149 
	mFGS_INVALID_FGC_REPETETION_PERIOD
 = 
FGS_PARAM_ERROR
 + 0x0C,

152 
	mFGS_FAIL
 = 0xFF

153 }
	tFGS_ERROR_T
;

156 
	sG¿šSyÁhesisSŒuù_t


158 
št8_t
 
	md©aBa£
[
NUM_CUT_OFF_FREQ
][NUM_CUT_OFF_FREQ][
DATA_BASE_SIZE
][DATA_BASE_SIZE];

159 
št16_t
 
	mš‹ns™yIÁ”v®
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
];

160 }
	tG¿šSyÁhesisSŒuù
;

162 þas 
	cSEIFžmG¿šSyÁhesiz”


165 
	m´iv©e
:

166 
ušt32_t
 
m_width
;

167 
ušt32_t
 
	mm_height
;

168 
ChromaFÜm©
 
	mm_chromaFÜm©
;

169 
ušt8_t
 
	mm_b™D•th
;

170 
ušt32_t
 
	mm_idrPicId
;

171 
ušt8_t
 
	mm_’abËDeblockšg
;

173 
G¿šSyÁhesisSŒuù
 *
	mm_pG¿šSyÁ
;

174 
	mpublic
:

175 
ušt32_t
 
m_poc
;

176 
ušt32_t
 
	mm_”rÜCode
;

177 
SEIFžmG¿šCh¬aù”i¡ics
 *
	mm_pFgcP¬am‘”s
;

179 
	mpublic
:

180 
SEIFžmG¿šSyÁhesiz”
();

181 
ü—‹
(
ušt32_t
 
width
, ušt32_ˆ
height
, 
ChromaFÜm©
 
fmt
, 
ušt8_t
 
b™D•th
,

182 
ušt32_t
 
idrPicId
, 
ušt8_t
 
’abËDeblockšg
);

184 
	mvœtu®
 ~
SEIFžmG¿šSyÁhesiz”
();

186 
fgsIn™
();

187 
fgsDeš™
();

188 
g¿šSyÁhesizeAndBËnd
(
TComPicYuv
* 
pG¿šBuf
, 
BoÞ
 
isIdrPic
);

189 
ušt8_t
 
g¿šV®id©eP¬ams
();

191 
	m´iv©e
:

192 
d©aBa£G’
();

193 
ušt32_t
 
´ng
(ušt32_ˆ
x_r
);

194 
P–
 
blockAv”age
(P– *
decSam¶eBlk8
,

195 
ušt32_t
 
widthComp
,

196 
ušt16_t
 *
pNumSam¶es
,

197 
ušt8_t
 
ySize
,

198 
ušt8_t
 
xSize
,

199 
ušt8_t
 
b™D•th
);

200 
deblockG¿šSŒe
(
št32_t
 *
g¿šSŒe
, 
ušt32_t
 
widthComp
, ušt32_ˆ
¡rideComp
);

201 
bËndSŒe
(
P–
 *
decSam¶eOff£tY
, 
št32_t
 *
g¿šSŒe
,

202 
ušt32_t
 
widthComp
, ušt32_ˆ
blockHeight
, 
ušt8_t
 
b™D•th
);

203 
simuÏ‹G¿šBlk8x8
(
št32_t
 *
g¿šSŒe
, 
ušt32_t
 
g¿šSŒeOff£tBlk8
,

204 
G¿šSyÁhesisSŒuù
 *
pG¿šSyÁ
, 
ušt32_t
 
width
, 
ušt8_t
 
log2SÿËFaùÜ
,

205 
št16_t
 
sÿËFaùÜ
, 
ušt32_t
 
kOff£t
, ušt32_ˆ
lOff£t
,

206 
ušt8_t
 
h
, ušt8_ˆ
v
, 
ušt32_t
 
xSize
);

	@source/Lib/TLibCommon/TComBitCounter.h

38 #iâdeà
__TCOMBITCOUNTER__


39 
	#__TCOMBITCOUNTER__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TComB™SŒ—m.h
"

55 þas 
	cTComB™CouÁ”
 : 
public
 
TComB™If


57 
´Ùeùed
:

58 
UIÁ
 
m_uiB™CouÁ”
;

60 
	mpublic
:

61 
	$TComB™CouÁ”
() {}

62 
vœtu®
 ~
	$TComB™CouÁ”
(è{
	}
}

64 
Void
 
	$wr™e
 ( 
UIÁ
 , UIÁ 
uiNumb”OfB™s
 ) { 
m_uiB™CouÁ”
 +ðuiNumb”OfB™s; 
	}
}

65 
Void
 
	$»£tB™s
 (è{ 
m_uiB™CouÁ”
 = 0; 
	}
}

66 
UIÁ
 
	$g‘Numb”OfWr™‹nB™s
(ècÚ¡ {  
m_uiB™CouÁ”
; 
	}
}

67 
IÁ
 
	$g‘NumB™sUÁžBy‹AligÃd
(ècÚ¡ {  (8 - 
m_uiB™CouÁ”
è& 0x7;
	}
}

	@source/Lib/TLibCommon/TComBitStream.cpp

38 
	~<¡dšt.h
>

39 
	~<veùÜ
>

40 
	~"TComB™SŒ—m.h
"

41 
	~<¡ršg.h
>

42 
	~<memÜy.h
>

44 
usšg
 
Çme¥aû
 
	g¡d
;

53 
	gTComOuutB™¡»am
::
	$TComOuutB™¡»am
()

55 
	`þ—r
();

56 
	}
}

58 
	gTComOuutB™¡»am
::~
	$TComOuutB™¡»am
()

60 
	}
}

63 
TComIÅutB™¡»am
::
	$TComIÅutB™¡»am
()

64 : 
	`m_fifo
()

65 , 
	`m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
()

66 , 
	`m_fifo_idx
(0)

67 , 
	`m_num_h–d_b™s
(0)

68 , 
	`m_h–d_b™s
(0)

69 , 
	$m_numB™sR—d
(0)

70 { 
	}
}

72 
	gTComIÅutB™¡»am
::
	$TComIÅutB™¡»am
(cÚ¡ 
TComIÅutB™¡»am
 &
¤c
)

73 : 
	`m_fifo
(
¤c
.
m_fifo
)

74 , 
	`m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
(
¤c
.
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
)

75 , 
	`m_fifo_idx
(
¤c
.
m_fifo_idx
)

76 , 
	`m_num_h–d_b™s
(
¤c
.
m_num_h–d_b™s
)

77 , 
	`m_h–d_b™s
(
¤c
.
m_h–d_b™s
)

78 , 
	$m_numB™sR—d
(
¤c
.
m_numB™sR—d
)

79 { 
	}
}

85 
Void
 
	gTComIÅutB™¡»am
::
	$»£tToS¹
()

87 
m_fifo_idx
=0;

88 
m_num_h–d_b™s
=0;

89 
m_h–d_b™s
=0;

90 
m_numB™sR—d
=0;

91 
	}
}

93 
UCh¬
* 
	gTComOuutB™¡»am
::
	$g‘By‹SŒ—m
() const

95  (
UCh¬
*è&
m_fifo
.
	`äÚt
();

96 
	}
}

98 
UIÁ
 
	gTComOuutB™¡»am
::
	$g‘By‹SŒ—mL’gth
()

100  
	`UIÁ
(
m_fifo
.
	`size
());

101 
	}
}

103 
Void
 
	gTComOuutB™¡»am
::
	$þ—r
()

105 
m_fifo
.
	`þ—r
();

106 
m_h–d_b™s
 = 0;

107 
m_num_h–d_b™s
 = 0;

108 
	}
}

110 
Void
 
	gTComOuutB™¡»am
::
	$wr™e
 ( 
UIÁ
 
uiB™s
, UIÁ 
uiNumb”OfB™s
 )

112 
	`as£¹
Ð
uiNumb”OfB™s
 <= 32 );

113 
	`as£¹
Ð
uiNumb”OfB™s
 =ð32 || (
uiB™s
 & (~0 << uiNumberOfBits)) == 0 );

117 
UIÁ
 
num_tÙ®_b™s
 = 
uiNumb”OfB™s
 + 
m_num_h–d_b™s
;

118 
UIÁ
 
Ãxt_num_h–d_b™s
 = 
num_tÙ®_b™s
 % 8;

126 
UCh¬
 
Ãxt_h–d_b™s
 = 
uiB™s
 << (8 - 
Ãxt_num_h–d_b™s
);

128 ià(!(
num_tÙ®_b™s
 >> 3))

133 
m_h–d_b™s
 |ð
Ãxt_h–d_b™s
;

134 
m_num_h–d_b™s
 = 
Ãxt_num_h–d_b™s
;

139 
UIÁ
 
tÝwÜd
 = (
uiNumb”OfB™s
 - 
Ãxt_num_h–d_b™s
) & ~((1 << 3) -1);

140 
UIÁ
 
wr™e_b™s
 = (
m_h–d_b™s
 << 
tÝwÜd
è| (
uiB™s
 >> 
Ãxt_num_h–d_b™s
);

142 
num_tÙ®_b™s
 >> 3)

144 4: 
m_fifo
.
	`push_back
(
wr™e_b™s
 >> 24);

145 3: 
m_fifo
.
	`push_back
(
wr™e_b™s
 >> 16);

146 2: 
m_fifo
.
	`push_back
(
wr™e_b™s
 >> 8);

147 1: 
m_fifo
.
	`push_back
(
wr™e_b™s
);

150 
m_h–d_b™s
 = 
Ãxt_h–d_b™s
;

151 
m_num_h–d_b™s
 = 
Ãxt_num_h–d_b™s
;

152 
	}
}

154 
Void
 
	gTComOuutB™¡»am
::
	$wr™eAlignOÃ
()

156 
UIÁ
 
num_b™s
 = 
	`g‘NumB™sUÁžBy‹AligÃd
();

157 
	`wr™e
((1 << 
num_b™s
) - 1,‚um_bits);

159 
	}
}

161 
Void
 
	gTComOuutB™¡»am
::
	$wr™eAlignZ”o
()

163 ià(0 =ð
m_num_h–d_b™s
)

167 
m_fifo
.
	`push_back
(
m_h–d_b™s
);

168 
m_h–d_b™s
 = 0;

169 
m_num_h–d_b™s
 = 0;

170 
	}
}

177 
Void
 
	gTComOuutB™¡»am
::
	$addSub¡»am
Ð
TComOuutB™¡»am
* 
pcSub¡»am
 )

179 
UIÁ
 
uiNumB™s
 = 
pcSub¡»am
->
	`g‘Numb”OfWr™‹nB™s
();

181 cÚ¡ 
veùÜ
<
ušt8_t
>& 
rb¥
 = 
pcSub¡»am
->
	`g‘FIFO
();

182 
veùÜ
<
ušt8_t
>::
cÚ¡_™”©Ü
 
™
 = 
rb¥
.
	`begš
(); iˆ!ðrb¥.
	`’d
();)

184 
	`wr™e
(*
™
++, 8);

186 ià(
uiNumB™s
&0x7)

188 
	`wr™e
(
pcSub¡»am
->
	`g‘H–dB™s
()>>(8-(
uiNumB™s
&0x7)), uiNumBits&0x7);

190 
	}
}

192 
Void
 
	gTComOuutB™¡»am
::
	$wr™eBy‹Alignm’t
()

194 
	`wr™e
( 1, 1);

195 
	`wr™eAlignZ”o
();

196 
	}
}

198 
IÁ
 
	gTComOuutB™¡»am
::
	$couÁS¹CodeEmuÏtiÚs
()

200 
UIÁ
 
út
 = 0;

201 
veùÜ
<
ušt8_t
>& 
rb¥
 = 
	`g‘FIFO
();

202 
veùÜ
<
ušt8_t
>::
™”©Ü
 
™
 = 
rb¥
.
	`begš
(); iˆ!ðrb¥.
	`’d
();)

204 
veùÜ
<
ušt8_t
>::
™”©Ü
 
found
 = 
™
;

209 
found
 = 
	`£¬ch_n
(found, 
rb¥
.
	`’d
()-1, 2, 0);

210 
found
++;

212 ià(
found
 =ð
rb¥
.
	`’d
())

216 ià(*(++
found
) <= 3)

220 } 
Œue
);

221 
™
 = 
found
;

222 ià(
found
 !ð
rb¥
.
	`’d
())

224 
út
++;

227  
út
;

228 
	}
}

238 
Void
 
	gTComIÅutB™¡»am
::
	$p£udoR—d
 ( 
UIÁ
 
uiNumb”OfB™s
, UIÁ& 
ruiB™s
 )

240 
UIÁ
 
§ved_num_h–d_b™s
 = 
m_num_h–d_b™s
;

241 
UCh¬
 
§ved_h–d_b™s
 = 
m_h–d_b™s
;

242 
UIÁ
 
§ved_fifo_idx
 = 
m_fifo_idx
;

244 
UIÁ
 
num_b™s_to_»ad
 = 
	`mš
(
uiNumb”OfB™s
, 
	`g‘NumB™sLeá
());

245 
	`»ad
(
num_b™s_to_»ad
, 
ruiB™s
);

246 
ruiB™s
 <<ð(
uiNumb”OfB™s
 - 
num_b™s_to_»ad
);

248 
m_fifo_idx
 = 
§ved_fifo_idx
;

249 
m_h–d_b™s
 = 
§ved_h–d_b™s
;

250 
m_num_h–d_b™s
 = 
§ved_num_h–d_b™s
;

251 
	}
}

254 
Void
 
	gTComIÅutB™¡»am
::
	$»ad
 (
UIÁ
 
uiNumb”OfB™s
, UIÁ& 
ruiB™s
)

256 
	`as£¹
Ð
uiNumb”OfB™s
 <= 32 );

258 
m_numB™sR—d
 +ð
uiNumb”OfB™s
;

261 
UIÁ
 
»tv®
 = 0;

262 ià(
uiNumb”OfB™s
 <ð
m_num_h–d_b™s
)

267 
»tv®
 = 
m_h–d_b™s
 >> (
m_num_h–d_b™s
 - 
uiNumb”OfB™s
);

268 
»tv®
 &ð~(0xfà<< 
uiNumb”OfB™s
);

269 
m_num_h–d_b™s
 -ð
uiNumb”OfB™s
;

270 
ruiB™s
 = 
»tv®
;

279 
uiNumb”OfB™s
 -ð
m_num_h–d_b™s
;

280 
»tv®
 = 
m_h–d_b™s
 & ~(0xfà<< 
m_num_h–d_b™s
);

281 
»tv®
 <<ð
uiNumb”OfB™s
;

291 
UIÁ
 
®igÃd_wÜd
 = 0;

292 
UIÁ
 
num_by‹s_to_lßd
 = (
uiNumb”OfB™s
 - 1) >> 3;

293 
	`as£¹
(
m_fifo_idx
 + 
num_by‹s_to_lßd
 < 
m_fifo
.
	`size
());

295 
num_by‹s_to_lßd
)

297 3: 
®igÃd_wÜd
 = 
m_fifo
[
m_fifo_idx
++] << 24;

298 2: 
®igÃd_wÜd
 |ð
m_fifo
[
m_fifo_idx
++] << 16;

299 1: 
®igÃd_wÜd
 |ð
m_fifo
[
m_fifo_idx
++] << 8;

300 0: 
®igÃd_wÜd
 |ð
m_fifo
[
m_fifo_idx
++];

304 
UIÁ
 
Ãxt_num_h–d_b™s
 = (32 - 
uiNumb”OfB™s
) % 8;

307 
»tv®
 |ð
®igÃd_wÜd
 >> 
Ãxt_num_h–d_b™s
;

310 
m_num_h–d_b™s
 = 
Ãxt_num_h–d_b™s
;

311 
m_h–d_b™s
 = 
®igÃd_wÜd
;

313 
ruiB™s
 = 
»tv®
;

314 
	}
}

320 
Void
 
	gTComOuutB™¡»am
::
	$š£¹At
(cÚ¡ 
TComOuutB™¡»am
& 
¤c
, 
UIÁ
 
pos
)

322 
UIÁ
 
¤c_b™s
 = 
¤c
.
	`g‘Numb”OfWr™‹nB™s
();

323 
	`as£¹
(0 =ð
¤c_b™s
 % 8);

325 
veùÜ
<
ušt8_t
>::
™”©Ü
 
©
 = 
m_fifo
.
	`begš
(è+ 
pos
;

326 
m_fifo
.
	`š£¹
(
©
, 
¤c
.m_fifo.
	`begš
(), src.m_fifo.
	`’d
());

327 
	}
}

329 
UIÁ
 
	gTComIÅutB™¡»am
::
	$»adOutT¿žšgB™s
 ()

331 
UIÁ
 
couÁ
=0;

332 
UIÁ
 
uiB™s
 = 0;

334  ( 
	`g‘NumB™sLeá
(è> 0 ) && (
	`g‘NumB™sUÁžBy‹AligÃd
()!=0) )

336 
couÁ
++;

337 
	`»ad
 ( 1, 
uiB™s
 );

339  
couÁ
;

340 
	}
}

358 
TComIÅutB™¡»am
 *
	gTComIÅutB™¡»am
::
	$exŒaùSub¡»am
Ð
UIÁ
 
uiNumB™s
 )

360 
UIÁ
 
uiNumBy‹s
 = 
uiNumB™s
/8;

361 
TComIÅutB™¡»am
 *
pResuÉ
 = 
Ãw
 TComInputBitstream;

363 
¡d
::
veùÜ
<
ušt8_t
> &
buf
 = 
pResuÉ
->
	`g‘Fifo
();

364 
buf
.
	`»£rve
((
uiNumB™s
+7)>>3);

366 ià(
m_num_h–d_b™s
 == 0)

368 
¡d
::
size_t
 
cu¼’tOuutBufãrSize
=
buf
.
	`size
();

369 cÚ¡ 
UIÁ
 
uiNumBy‹sToR—dFromFifo
 = 
¡d
::
mš
<UIÁ>(
uiNumBy‹s
, (UIÁ)
m_fifo
.
	`size
(è- 
m_fifo_idx
);

370 
buf
.
	`»size
(
cu¼’tOuutBufãrSize
+
uiNumBy‹s
);

371 
	`memýy
(&(
buf
[
cu¼’tOuutBufãrSize
]), &(
m_fifo
[
m_fifo_idx
]), 
uiNumBy‹sToR—dFromFifo
); m_fifo_idx+=uiNumBytesToReadFromFifo;

372 ià(
uiNumBy‹sToR—dFromFifo
 !ð
uiNumBy‹s
)

374 
	`mem£t
(&(
buf
[
cu¼’tOuutBufãrSize
+
uiNumBy‹sToR—dFromFifo
]), 0, 
uiNumBy‹s
 - uiNumBytesToReadFromFifo);

379 
UIÁ
 
ui
 = 0; u˜< 
uiNumBy‹s
; ui++)

381 
UIÁ
 
uiBy‹
;

382 
	`»ad
(8, 
uiBy‹
);

383 
buf
.
	`push_back
(
uiBy‹
);

386 ià(
uiNumB™s
&0x7)

388 
UIÁ
 
uiBy‹
 = 0;

389 
	`»ad
(
uiNumB™s
&0x7, 
uiBy‹
);

390 
uiBy‹
 <<ð8-(
uiNumB™s
&0x7);

391 
buf
.
	`push_back
(
uiBy‹
);

393  
pResuÉ
;

394 
	}
}

396 
UIÁ
 
	gTComIÅutB™¡»am
::
	$»adBy‹Alignm’t
()

398 
UIÁ
 
code
 = 0;

399 
	`»ad
Ð1, 
code
 );

400 
	`as£¹
(
code
 == 1);

402 
UIÁ
 
numB™s
 = 
	`g‘NumB™sUÁžBy‹AligÃd
();

403 if(
numB™s
)

405 
	`as£¹
(
numB™s
 <ð
	`g‘NumB™sLeá
());

406 
	`»ad
Ð
numB™s
, 
code
 );

407 
	`as£¹
(
code
 == 0);

409  
numB™s
+1;

410 
	}
}

	@source/Lib/TLibCommon/TComBitStream.h

38 #iâdeà
__TCOMBITSTREAM__


39 
	#__TCOMBITSTREAM__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~<¡dšt.h
>

46 
	~<veùÜ
>

47 
	~<¡dio.h
>

48 
	~"CommÚDef.h
"

58 þas 
	cTComB™If


60 
	mpublic
:

61 
vœtu®
 
Void
 
	$wr™eAlignOÃ
 () {};

62 
vœtu®
 
Void
 
	$wr™eAlignZ”o
 (è{
	}
};

63 
vœtu®
 
Void
 
wr™e
 ( 
UIÁ
 
uiB™s
, UIÁ 
uiNumb”OfB™s
 ) = 0;

64 
vœtu®
 
Void
 
»£tB™s
 () = 0;

65 
vœtu®
 
UIÁ
 
	$g‘Numb”OfWr™‹nB™s
() const = 0;

66 
vœtu®
 
IÁ
 
	$g‘NumB™sUÁžBy‹AligÃd
() const = 0;

67 
vœtu®
 ~
	$TComB™If
(è{
	}
}

74 þas 
	cTComOuutB™¡»am
 : 
public
 
TComB™If


83 
¡d
::
veùÜ
<
ušt8_t
> 
m_fifo
;

85 
UIÁ
 
	mm_num_h–d_b™s
;

86 
UCh¬
 
	mm_h–d_b™s
;

88 
	mpublic
:

90 
TComOuutB™¡»am
();

91 ~
TComOuutB™¡»am
();

98 
Void
 
wr™e
 ( 
UIÁ
 
uiB™s
, UIÁ 
uiNumb”OfB™s
 );

101 
Void
 
wr™eAlignOÃ
 ();

104 
Void
 
wr™eAlignZ”o
 ();

107 
Void
 
	$»£tB™s
(è{ 
	`as£¹
(0); }

117 
UCh¬
* 
	$g‘By‹SŒ—m
() const;

122 
UIÁ
 
	`g‘By‹SŒ—mL’gth
();

127 
Void
 
	`þ—r
();

133 
IÁ
 
	$g‘NumB™sUÁžBy‹AligÃd
(ècÚ¡ {  (8 - 
m_num_h–d_b™s
è& 0x7; 
	}
}

138 
UIÁ
 
	$g‘Numb”OfWr™‹nB™s
(ècÚ¡ {  
	`UIÁ
(
m_fifo
.
	`size
()è* 8 + 
m_num_h–d_b™s
; 
	}
}

140 
Void
 
š£¹At
(cÚ¡ 
TComOuutB™¡»am
& 
¤c
, 
UIÁ
 
pos
);

145 
	g¡d
::
veùÜ
<
ušt8_t
>& 
	$g‘FIFO
(è{  
m_fifo
; 
	}
}

147 
UCh¬
 
	$g‘H–dB™s
 (è{  
m_h–d_b™s
; 
	}
}

151 cÚ¡ 
	g¡d
::
veùÜ
<
ušt8_t
>& 
	$g‘FIFO
(ècÚ¡ {  
m_fifo
; 
	}
}

153 
Void
 
addSub¡»am
 ( 
TComOuutB™¡»am
* 
pcSub¡»am
 );

154 
Void
 
wr™eBy‹Alignm’t
();

157 
IÁ
 
couÁS¹CodeEmuÏtiÚs
();

164 þas 
	cTComIÅutB™¡»am


166 
	m´Ùeùed
:

167 
¡d
::
veùÜ
<
ušt8_t
> 
m_fifo
;

168 
	m¡d
::
veùÜ
<
UIÁ
> 
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
;

170 
UIÁ
 
	mm_fifo_idx
;

172 
UIÁ
 
	mm_num_h–d_b™s
;

173 
UCh¬
 
	mm_h–d_b™s
;

174 
UIÁ
 
	mm_numB™sR—d
;

176 
	mpublic
:

180 
TComIÅutB™¡»am
();

181 
	mvœtu®
 ~
	$TComIÅutB™¡»am
() { }

182 
	`TComIÅutB™¡»am
(cÚ¡ 
TComIÅutB™¡»am
 &
¤c
);

184 
Void
 
	`»£tToS¹
();

187 
Void
 
	`p£udoR—d
 ( 
UIÁ
 
uiNumb”OfB™s
, UIÁ& 
ruiB™s
 );

188 
Void
 
	`»ad
 ( 
UIÁ
 
uiNumb”OfB™s
, UIÁ& 
ruiB™s
 );

189 
Void
 
	$»adBy‹
 ( 
UIÁ
 &
ruiB™s
 )

191 
	`as£¹
(
m_fifo_idx
 < 
m_fifo
.
	`size
());

192 
ruiB™s
 = 
m_fifo
[
m_fifo_idx
++];

193 
	}
}

195 
Void
 
	$³ekP»viousBy‹
Ð
UIÁ
 &
by‹
 )

197 
	`as£¹
(
m_fifo_idx
 > 0);

198 
by‹
 = 
m_fifo
[
m_fifo_idx
 - 1];

199 
	}
}

201 
UIÁ
 
»adOutT¿žšgB™s
 ();

202 
UCh¬
 
	$g‘H–dB™s
 (è{  
m_h–d_b™s
; 
	}
}

203 
	gTComOuutB™¡»am
& 
	gÝ”©Ü
ð(cÚ¡ 
TComOuutB™¡»am
& 
¤c
);

204 
UIÁ
 
	$g‘By‹LoÿtiÚ
 ( ) {  
m_fifo_idx
 ; 
	}
}

207 
UIÁ
 
	$³ekB™s
 (
UIÁ
 
uiB™s
è{ UIÁ 
tmp
; 
	`p£udoR—d
(uiB™s,mp); mp; 
	}
}

210 
UIÁ
 
	$»ad
(
UIÁ
 
numb”OfB™s
è{ UIÁ 
tmp
; 
	`»ad
Òumb”OfB™s,mp); mp; 
	}
}

211 
UIÁ
 
	$»adBy‹
(è{ 
UIÁ
 
tmp
; 
	`»adBy‹
Ðtm°); mp; 
	}
}

212 
UIÁ
 
	$g‘NumB™sUÁžBy‹AligÃd
(è{  
m_num_h–d_b™s
 & (0x7); 
	}
}

213 
UIÁ
 
	$g‘NumB™sLeá
(è{  8*((
UIÁ
)
m_fifo
.
	`size
(è- 
m_fifo_idx
è+ 
m_num_h–d_b™s
; 
	}
}

214 
TComIÅutB™¡»am
 *
exŒaùSub¡»am
Ð
UIÁ
 
uiNumB™s
 );

215 
UIÁ
 
	$g‘NumB™sR—d
(è{  
m_numB™sR—d
; 
	}
}

216 
UIÁ
 
»adBy‹Alignm’t
();

218 
Void
 
	$pushEmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
 ( 
UIÁ
 
pos
 ) { 
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
.
	`push_back
Ðpo ); 
	}
}

219 
UIÁ
 
	$numEmuÏtiÚP»v’tiÚBy‹sR—d
 (è{  (
UIÁ
è
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
.
	`size
(); 
	}
}

220 cÚ¡ 
	g¡d
::
veùÜ
<
UIÁ
> &
	$g‘EmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
 (ècÚ¡ {  
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
; 
	}
}

221 
UIÁ
 
	$g‘EmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
 ( 
UIÁ
 
idx
 ) {  
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
[ idx ]; 
	}
}

222 
Void
 
	$þ—rEmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
(è{ 
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
.
	`þ—r
(); 
	}
}

223 
Void
 
£tEmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
 ( cÚ¡ 
¡d
::
veùÜ
<
UIÁ
> &
vec
 ) { 
m_emuÏtiÚP»v’tiÚBy‹LoÿtiÚ
 = vec; }

225 cÚ¡ 
	g¡d
::
veùÜ
<
ušt8_t
> &
	$g‘Fifo
(ècÚ¡ {  
m_fifo
; 
	}
}

226 
	g¡d
::
veùÜ
<
ušt8_t
> &
	$g‘Fifo
(è{  
m_fifo
; 
	}
}

	@source/Lib/TLibCommon/TComCABACTables.cpp

38 
	~"TComCABACTabËs.h
"

43 cÚ¡ 
UCh¬
 
	gTComCABACTabËs
::
sm_aucLPSTabË
[1 << 
CONTEXT_STATE_BITS
][4] =

111 cÚ¡ 
UCh¬
 
	gTComCABACTabËs
::
sm_aucR’ÜmTabË
[32] =

	@source/Lib/TLibCommon/TComCABACTables.h

38 #iâdeà
__TCOMCABACTABLES__


39 
	#__TCOMCABACTABLES__


	)

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComRom.h
"

51 þas 
	cTComCABACTabËs


53 
	mpublic
:

54 cÚ¡ 
UCh¬
 
sm_aucLPSTabË
[1 << 
CONTEXT_STATE_BITS
][4];

55 cÚ¡ 
UCh¬
 
	msm_aucR’ÜmTabË
[32];

	@source/Lib/TLibCommon/TComChromaFormat.cpp

35 
	~"TComChromaFÜm©.h
"

36 
	~"TComPic.h
"

37 
	~"TComD©aCU.h
"

38 
	~"TComTrQuªt.h
"

39 
	~"TComTU.h
"

46 
IÅutCÞourS·ûCÚv”siÚ
 
	$¡ršgToIÅutCÞourS·ûCÚv”t
(cÚ¡ 
¡d
::
¡ršg
 &
v®ue
, cÚ¡ 
BoÞ
 
bIsFÜw¬d
)

48 ià(
v®ue
.
	`em±y
() || value=="UNCHANGED")

50  
IPCOLOURSPACE_UNCHANGED
;

52 ià(
bIsFÜw¬d
)

54 ià(
v®ue
=="YCbCrtoYYY")

56  
IPCOLOURSPACE_YCbC¹oYYY
;

58 ià(
v®ue
=="YCbCrtoYCrCb")

60  
IPCOLOURSPACE_YCbC¹oYCrCb
;

62 ià(
v®ue
=="RGBtoGBR")

64  
IPCOLOURSPACE_RGBtoGBR
;

69 ià(
v®ue
=="YCrCbtoYCbCr")

71  
IPCOLOURSPACE_YCbC¹oYCrCb
;

73 ià(
v®ue
=="GBRtoRGB")

75  
IPCOLOURSPACE_RGBtoGBR
;

78  
NUMBER_INPUT_COLOUR_SPACE_CONVERSIONS
;

79 
	}
}

81 
	g¡d
::
¡ršg
 
	$g‘Li¡OfCÞourS·ûCÚv”ts
(cÚ¡ 
BoÞ
 
bIsFÜw¬d
)

83 ià(
bIsFÜw¬d
)

91 
	}
}

96 
Void
 
	$g‘TUEÁrÝyCodšgP¬am‘”s
Ð
TUEÁrÝyCodšgP¬am‘”s
 &
»suÉ
,

97 
TComTU
 &
rTu
,

98 cÚ¡ 
CompÚ’tID
 
compÚ’t
)

104 
TComD©aCU
 *cÚ¡ 
pcCU
 = 
rTu
.
	`g‘CU
();

105 cÚ¡ 
TComReùªgË
 & 
¬—
 = 
rTu
.
	`g‘Reù
(
compÚ’t
);

106 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
(
compÚ’t
);

107 cÚ¡ 
UIÁ
 
log2BlockWidth
 = 
g_aucCÚv”tToB™
[
¬—
.
width
] + 2;

108 cÚ¡ 
UIÁ
 
log2BlockHeight
 = 
g_aucCÚv”tToB™
[
¬—
.
height
] + 2;

109 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = 
	`toChªÃlTy³
(
compÚ’t
);

111 
»suÉ
.
sÿnTy³
 = 
	`COEFF_SCAN_TYPE
(
pcCU
->
	`g‘CÛfSÿnIdx
(
uiAbsP¬tIdx
, 
¬—
.
width
,‡»a.
height
, 
compÚ’t
));

117 
»suÉ
.
widthInGroups
 = 
¬—
.
width
 >> 
MLS_CG_LOG2_WIDTH
;

118 
»suÉ
.
heightInGroups
 = 
¬—
.
height
 >> 
MLS_CG_LOG2_HEIGHT
;

124 cÚ¡ 
UIÁ
 
log2WidthInGroups
 = 
g_aucCÚv”tToB™
[
»suÉ
.
widthInGroups
 * 4];

125 cÚ¡ 
UIÁ
 
log2HeightInGroups
 = 
g_aucCÚv”tToB™
[
»suÉ
.
heightInGroups
 * 4];

127 
»suÉ
.
sÿn
 = 
g_sÿnOrd”
[ 
SCAN_GROUPED_4x4
 ][„esuÉ.
sÿnTy³
 ][ 
log2BlockWidth
 ][ 
log2BlockHeight
 ];

128 
»suÉ
.
sÿnCG
 = 
g_sÿnOrd”
[ 
SCAN_UNGROUPED
 ][„esuÉ.
sÿnTy³
 ][ 
log2WidthInGroups
 ][ 
log2HeightInGroups
 ];

134 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
()

135 && (
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
è|| (pcCU->
	`g‘T¿nsfÜmSk
(uiAbsP¬tIdx, 
compÚ’t
) != 0)))

137 
»suÉ
.
fœ¡SignifiÿnûM­CÚ‹xt
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chªÃlTy³
][
CONTEXT_TYPE_SINGLE
];

141 ià((
¬—
.
width
 =ð4è&& (¬—.
height
 == 4))

143 
»suÉ
.
fœ¡SignifiÿnûM­CÚ‹xt
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chªÃlTy³
][
CONTEXT_TYPE_4x4
];

145 ià((
¬—
.
width
 =ð8è&& (¬—.
height
 == 8))

147 
»suÉ
.
fœ¡SignifiÿnûM­CÚ‹xt
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chªÃlTy³
][
CONTEXT_TYPE_8x8
];

148 ià(
»suÉ
.
sÿnTy³
 !ð
SCAN_DIAG
)

150 
»suÉ
.
fœ¡SignifiÿnûM­CÚ‹xt
 +ð
nÚDŸgÚ®Sÿn8x8CÚ‹xtOff£t
[
chªÃlTy³
];

155 
»suÉ
.
fœ¡SignifiÿnûM­CÚ‹xt
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chªÃlTy³
][
CONTEXT_TYPE_NxN
];

160 
	}
}

	@source/Lib/TLibCommon/TComChromaFormat.h

34 #iâdeà
__TCOMCHROMAFORMAT__


35 
	#__TCOMCHROMAFORMAT__


	)

37 
	~"CommÚDef.h
"

38 
	~"TComReùªgË.h
"

39 
	~"CÚ‹xtTabËs.h
"

40 
	~"TComRom.h
"

41 
	~<io¡»am
>

42 
	~<veùÜ
>

43 
	~<as£¹.h
>

44 
	~"Debug.h
"

50 
þass
 
	gTComD©aCU
;

53 
šlše
 
ChªÃlTy³
 
	$toChªÃlTy³
 (cÚ¡ 
CompÚ’tID
 
id
è{  (id==
COMPONENT_Y
)? 
CHANNEL_TYPE_LUMA
 : 
CHANNEL_TYPE_CHROMA
; 
	}
}

54 
šlše
 
BoÞ
 
	$isLuma
 (cÚ¡ 
CompÚ’tID
 
id
è{  (id==
COMPONENT_Y
); 
	}
}

55 
šlše
 
BoÞ
 
	$isLuma
 (cÚ¡ 
ChªÃlTy³
 
id
è{  (id==
CHANNEL_TYPE_LUMA
); 
	}
}

56 
šlše
 
BoÞ
 
	$isChroma
 (cÚ¡ 
CompÚ’tID
 
id
è{  (id!=
COMPONENT_Y
); 
	}
}

57 
šlše
 
BoÞ
 
	$isChroma
 (cÚ¡ 
ChªÃlTy³
 
id
è{  (id!=
CHANNEL_TYPE_LUMA
); 
	}
}

58 
šlše
 
UIÁ
 
	$g‘ChªÃlTy³SÿËX
 (cÚ¡ 
ChªÃlTy³
 
id
, cÚ¡ 
ChromaFÜm©
 
fmt
è{  (
	`isLuma
(idè|| (fmt==
CHROMA_444
)è? 0 : 1; 
	}
}

59 
šlše
 
UIÁ
 
	$g‘ChªÃlTy³SÿËY
 (cÚ¡ 
ChªÃlTy³
 
id
, cÚ¡ 
ChromaFÜm©
 
fmt
è{  (
	`isLuma
(idè|| (fmt!=
CHROMA_420
)è? 0 : 1; 
	}
}

60 
šlše
 
UIÁ
 
	$g‘CompÚ’tSÿËX
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
ChromaFÜm©
 
fmt
è{  
	`g‘ChªÃlTy³SÿËX
(
	`toChªÃlTy³
(id), fmt); 
	}
}

61 
šlše
 
UIÁ
 
	$g‘CompÚ’tSÿËY
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
ChromaFÜm©
 
fmt
è{  
	`g‘ChªÃlTy³SÿËY
(
	`toChªÃlTy³
(id), fmt); 
	}
}

62 
šlše
 
UIÁ
 
	$g‘Numb”V®idChªÃlTy³s
(cÚ¡ 
ChromaFÜm©
 
fmt
è{  (fmt==
CHROMA_400
è? 1 : 
MAX_NUM_CHANNEL_TYPE
; 
	}
}

63 
šlše
 
UIÁ
 
	$g‘Numb”V®idCompÚ’ts
 (cÚ¡ 
ChromaFÜm©
 
fmt
è{  (fmt==
CHROMA_400
è? 1 : 
MAX_NUM_COMPONENT
; 
	}
}

64 
šlše
 
BoÞ
 
	$isChromaEÇbËd
 (cÚ¡ 
ChromaFÜm©
 
fmt
è{  fmt!=
CHROMA_400
; 
	}
}

65 
šlše
 
CompÚ’tID
 
	$g‘Fœ¡CompÚ’tOfChªÃl
(cÚ¡ 
ChªÃlTy³
 
id
è{  (
	`isLuma
(idè? 
COMPONENT_Y
 : 
COMPONENT_Cb
); 
	}
}

67 
IÅutCÞourS·ûCÚv”siÚ
 
¡ršgToIÅutCÞourS·ûCÚv”t
(cÚ¡ 
¡d
::
¡ršg
 &
v®ue
, cÚ¡ 
BoÞ
 
bIsFÜw¬d
);

68 
	g¡d
::
¡ršg
 
g‘Li¡OfCÞourS·ûCÚv”ts
(cÚ¡ 
BoÞ
 
bIsFÜw¬d
);

72 
šlše
 
UIÁ
 
	$g‘TÙ®Sam¶es
(cÚ¡ 
UIÁ
 
width
, cÚ¡ UIÁ 
height
, cÚ¡ 
ChromaFÜm©
 
fÜm©
)

74 cÚ¡ 
UIÁ
 
§m¶esP”ChªÃl
 = 
width
 * 
height
;

76 
fÜm©
)

78 
CHROMA_400
:  
§m¶esP”ChªÃl
; ;

79 
CHROMA_420
:  (
§m¶esP”ChªÃl
 * 3) >> 1; ;

80 
CHROMA_422
:  
§m¶esP”ChªÃl
 * 2; ;

81 
CHROMA_444
:  
§m¶esP”ChªÃl
 * 3; ;

83 
¡d
::
û¼
 << "ERROR: UÄecogni£d chrom¨fÜm© iÀg‘TÙ®Sam¶es()" << std::
’dl
;

84 
	`ex™
(1);

88  
MAX_UINT
;

89 
	}
}

93 
šlše
 
UIÁ
 
	$g‘TÙ®B™s
(cÚ¡ 
UIÁ
 
width
, cÚ¡ UIÁ 
height
, cÚ¡ 
ChromaFÜm©
 
fÜm©
, cÚ¡ 
IÁ
 
b™D•ths
[
MAX_NUM_CHANNEL_TYPE
])

95 cÚ¡ 
UIÁ
 
§m¶esP”ChªÃl
 = 
width
 * 
height
;

97 
fÜm©
)

99 
CHROMA_400
:  
§m¶esP”ChªÃl
 * 
b™D•ths
[
CHANNEL_TYPE_LUMA
]; ;

100 
CHROMA_420
:  (
§m¶esP”ChªÃl
 * (
b™D•ths
[
CHANNEL_TYPE_LUMA
]*2 + b™D•ths[
CHANNEL_TYPE_CHROMA
]) ) >> 1; ;

101 
CHROMA_422
:  
§m¶esP”ChªÃl
 * (
b™D•ths
[
CHANNEL_TYPE_LUMA
] + b™D•ths[
CHANNEL_TYPE_CHROMA
]); ;

102 
CHROMA_444
:  
§m¶esP”ChªÃl
 * (
b™D•ths
[
CHANNEL_TYPE_LUMA
] + 2*b™D•ths[
CHANNEL_TYPE_CHROMA
]); ;

104 
¡d
::
û¼
 << "ERROR: UÄecogni£d chrom¨fÜm© iÀg‘TÙ®Sam¶es()" << std::
’dl
;

105 
	`ex™
(1);

109  
MAX_UINT
;

110 
	}
}

119 
šlše
 
BoÞ
 
	$’abË4ChromaPUsInIÁ¿NxNCU
(cÚ¡ 
ChromaFÜm©
 
chFmt
)

121  (
chFmt
 =ð
CHROMA_444
);

122 
	}
}

129 
šlše
 
UIÁ


130 
	$g‘ChromasCÜ»¥ÚdšgPULumaIdx
(cÚ¡ 
UIÁ
 
lumaZOrd”IdxInCtu
,

131 cÚ¡ 
ChromaFÜm©
 
chFmt
,

132 cÚ¡ 
IÁ
 
·¹sP”MšCU


135  
	`’abË4ChromaPUsInIÁ¿NxNCU
(
chFmt
è? 
lumaZOrd”IdxInCtu
 :†umaZOrd”IdxInCtu & (~(
·¹sP”MšCU
-1));

136 
	}
}

142 
šlše
 
UIÁ
 
	$g‘MaxCUD•thOff£t
(cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ 
UIÁ
 
quadŒ“TULog2MšSize
)

144  (
chFmt
==
CHROMA_422
 && 
quadŒ“TULog2MšSize
>2) ? 1 : 0;

145 
	}
}

151 
šlše
 
BoÞ
 
	$fž‹rIÁ¿Reã»nûSam¶es
 (cÚ¡ 
ChªÃlTy³
 
chTy³
, cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ 
BoÞ
 
šŒaReã»nûSmoÙhšgDi§bËd
)

153  (!
šŒaReã»nûSmoÙhšgDi§bËd
è&& (
	`isLuma
(
chTy³
è|| (
chFmt
 =ð
CHROMA_444
));

154 
	}
}

161 
šlše
 
BoÞ
 
	$TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(cÚ¡ 
TComReùªgË
 &
»ùSam¶es
, cÚ¡ 
UIÁ
 
ŒªsfÜmSkLog2MaxSize
)

163  (
»ùSam¶es
.
width
 <ð(1<<
ŒªsfÜmSkLog2MaxSize
));

164 
	}
}

169 
šlše
 
IÁ
 
	$g‘T¿nsfÜmShiá
(cÚ¡ 
IÁ
 
chªÃlB™D•th
, cÚ¡ 
UIÁ
 
uiLog2TrSize
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
)

171  
maxLog2TrDyÇmicRªge
 - 
chªÃlB™D•th
 - 
uiLog2TrSize
;

172 
	}
}

177 
šlše
 
IÁ
 
	$g‘SÿËdChromaQP
(
IÁ
 
unsÿËdChromaQP
, cÚ¡ 
ChromaFÜm©
 
chFmt
)

179  
g_aucChromaSÿË
[
chFmt
][
	`Cl3
(0, (
chromaQPM­pšgTabËSize
 - 1), 
unsÿËdChromaQP
)];

180 
	}
}

187 
šlše
 
IÁ
 
	$g‘SÿlšgLi¡Ty³
(cÚ¡ 
P»dMode
 
´edMode
, cÚ¡ 
CompÚ’tID
 
compID
)

189  ((
´edMode
 !ð
MODE_INTER
è? 0 : 
MAX_NUM_COMPONENT
è+ 
compID
;

190 
	}
}

202 cÚ¡ 
UIÁ
 
	gsignifiÿnûM­CÚ‹xtS¹TabË
[
MAX_NUM_CHANNEL_TYPE
] = {
FIRST_SIG_FLAG_CTX_LUMA
, 
FIRST_SIG_FLAG_CTX_CHROMA
};

203 cÚ¡ 
UIÁ
 
	gcÚ‹xtS‘S¹TabË
 [
MAX_NUM_CHANNEL_TYPE
] = {
FIRST_CTX_SET_LUMA
, 
FIRST_CTX_SET_CHROMA
 };

204 cÚ¡ 
UIÁ
 
	gCBFCÚ‹xtS¹TabË
 [
MAX_NUM_CHANNEL_TYPE
] = {
FIRST_CBF_CTX_LUMA
, 
FIRST_CBF_CTX_CHROMA
 };

211 
šlše
 
Void
 
	$g‘La¡SignifiÿÁCÚ‹xtP¬am‘”s
 (cÚ¡ 
CompÚ’tID
 
compÚ’t
,

212 cÚ¡ 
IÁ
 
width
,

213 cÚ¡ 
IÁ
 
height
,

214 
IÁ
 &
»suÉ_off£tX
,

215 
IÁ
 &
»suÉ_off£tY
,

216 
IÁ
 &
»suÉ_shiáX
,

217 
IÁ
 &
»suÉ_shiáY
)

219 cÚ¡ 
UIÁ
 
cÚv”‹dWidth
 = 
g_aucCÚv”tToB™
[
width
];

220 cÚ¡ 
UIÁ
 
cÚv”‹dHeight
 = 
g_aucCÚv”tToB™
[
height
];

222 
»suÉ_off£tX
 = (
	`isChroma
(
compÚ’t
)è? 0 : ((
cÚv”‹dWidth
 * 3) + ((convertedWidth + 1) >> 2));

223 
»suÉ_off£tY
 = (
	`isChroma
(
compÚ’t
)è? 0 : ((
cÚv”‹dHeight
 * 3) + ((convertedHeight + 1) >> 2));

224 
»suÉ_shiáX
 = (
	`isChroma
(
compÚ’t
)è? 
cÚv”‹dWidth
 : ((convertedWidth + 3) >> 2);

225 
»suÉ_shiáY
 = (
	`isChroma
(
compÚ’t
)è? 
cÚv”‹dHeight
 : ((convertedHeight + 3) >> 2);

226 
	}
}

233 
šlše
 
UIÁ
 
	$g‘SignifiÿnûM­CÚ‹xtOff£t
 (cÚ¡ 
CompÚ’tID
 
compÚ’t
)

235  
signifiÿnûM­CÚ‹xtS¹TabË
[
	`toChªÃlTy³
(
compÚ’t
)];

236 
	}
}

243 
šlše
 
UIÁ
 
	$g‘CÚ‹xtS‘Index
 (cÚ¡ 
CompÚ’tID
 
compÚ’t
,

244 cÚ¡ 
UIÁ
 
sub£tIndex
,

245 cÚ¡ 
BoÞ
 
foundACÛffic›ÁG»©”Thª1
)

247 cÚ¡ 
UIÁ
 
nÙFœ¡Sub£tOff£t
 = (
	`isLuma
(
compÚ’t
è&& (
sub£tIndex
 > 0)) ? 2 : 0;

248 cÚ¡ 
UIÁ
 
foundAG»©”Thª1Off£t
 = 
foundACÛffic›ÁG»©”Thª1
 ? 1 : 0;

250  
cÚ‹xtS‘S¹TabË
[
	`toChªÃlTy³
(
compÚ’t
)] + 
nÙFœ¡Sub£tOff£t
 + 
foundAG»©”Thª1Off£t
;

251 
	}
}

258 
šlše
 
UIÁ
 
	$g‘CBFCÚ‹xtOff£t
 (cÚ¡ 
CompÚ’tID
 
compÚ’t
)

260  
CBFCÚ‹xtS¹TabË
[
	`toChªÃlTy³
(
compÚ’t
)];

261 
	}
}

268 
Void
 
g‘TUEÁrÝyCodšgP¬am‘”s
Ð
TUEÁrÝyCodšgP¬am‘”s
 &
»suÉ
,

269 
þass
 
TComTU
 &
rTu
,

270 cÚ¡ 
CompÚ’tID
 
compÚ’t
);

	@source/Lib/TLibCommon/TComCodingStatistics.h

34 #iâdeà
__TCOMCODINGSTATISTICS__


35 
	#__TCOMCODINGSTATISTICS__


	)

37 
	~"CommÚDef.h
"

38 
	~<¡dio.h
>

39 
	~<¡ršg
>

40 
	~<m­
>

41 
	~<m©h.h
>

42 
	~"TComChromaFÜm©.h
"

44 cÚ¡ 
IÁ64
 
	gTCOMCODINGSTATISTICS_ENTROPYSCALE
=32768;

47 
	eTComCodšgSti¡icsTy³


49 
	mSTATS__NAL_UNIT_TOTAL_BODY
,

50 
	mSTATS__NAL_UNIT_PACKING
,

51 
	mSTATS__EMULATION_PREVENTION_3_BYTES
,

52 
	mSTATS__NAL_UNIT_HEADER_BITS
,

53 
	mSTATS__CABAC_INITIALISATION
,

54 
	mSTATS__CABAC_BITS__TQ_BYPASS_FLAG
,

55 
	mSTATS__CABAC_BITS__SKIP_FLAG
,

56 
	mSTATS__CABAC_BITS__MERGE_FLAG
,

57 
	mSTATS__CABAC_BITS__MERGE_INDEX
,

58 
	mSTATS__CABAC_BITS__MVP_IDX
,

59 
	mSTATS__CABAC_BITS__SPLIT_FLAG
,

60 
	mSTATS__CABAC_BITS__PART_SIZE
,

61 
	mSTATS__CABAC_BITS__PRED_MODE
,

62 
	mSTATS__CABAC_BITS__INTRA_DIR_ANG
,

63 
	mSTATS__CABAC_BITS__INTER_DIR
,

64 
	mSTATS__CABAC_BITS__REF_FRM_IDX
,

65 
	mSTATS__CABAC_BITS__MVD
,

66 
	mSTATS__CABAC_BITS__MVD_EP
,

67 
	mSTATS__CABAC_BITS__TRANSFORM_SUBDIV_FLAG
,

68 
	mSTATS__CABAC_BITS__QT_ROOT_CBF
,

69 
	mSTATS__CABAC_BITS__DELTA_QP_EP
,

70 
	mSTATS__CABAC_BITS__CHROMA_QP_ADJUSTMENT
,

71 
	mSTATS__CABAC_BITS__QT_CBF
,

72 
	mSTATS__CABAC_BITS__CROSS_COMPONENT_PREDICTION
,

73 
	mSTATS__CABAC_BITS__TRANSFORM_SKIP_FLAGS
,

75 
	mSTATS__CABAC_BITS__LAST_SIG_X_Y
,

76 
	mSTATS__CABAC_BITS__SIG_COEFF_GROUP_FLAG
,

77 
	mSTATS__CABAC_BITS__SIG_COEFF_MAP_FLAG
,

78 
	mSTATS__CABAC_BITS__GT1_FLAG
,

79 
	mSTATS__CABAC_BITS__GT2_FLAG
,

80 
	mSTATS__CABAC_BITS__SIGN_BIT
,

81 
	mSTATS__CABAC_BITS__ESCAPE_BITS
,

83 
	mSTATS__CABAC_BITS__SAO
,

84 
	mSTATS__CABAC_TRM_BITS
,

85 
	mSTATS__CABAC_FIXED_BITS
,

86 
	mSTATS__CABAC_PCM_ALIGN_BITS
,

87 
	mSTATS__CABAC_PCM_CODE_BITS
,

88 
	mSTATS__BYTE_ALIGNMENT_BITS
,

89 
	mSTATS__TRAILING_BITS
,

90 
	mSTATS__EXPLICIT_RDPCM_BITS
,

91 
	mSTATS__CABAC_EP_BIT_ALIGNMENT
,

92 
	mSTATS__CABAC_BITS__ALIGNED_SIGN_BIT
,

93 
	mSTATS__CABAC_BITS__ALIGNED_ESCAPE_BITS
,

94 
	mSTATS__NUM_STATS


97 
šlše
 cÚ¡ 
TCh¬
* 
	$g‘Name
(
TComCodšgSti¡icsTy³
 
Çme
)

99 cÚ¡ 
TCh¬
 *
¡©Names
[]=

145 
	`as£¹
(
STATS__NUM_STATS
 =ð(
¡©Names
)/(
TCh¬
 *è&& 
Çme
 < STATS__NUM_STATS);

146  
¡©Names
[
Çme
];

147 
	}
}

149 
šlše
 
BoÞ
 
	$isAligÃdBšs
(
TComCodšgSti¡icsTy³
 
¡©T
è{  stT==
STATS__CABAC_BITS__ALIGNED_SIGN_BIT
 || stT==
STATS__CABAC_BITS__ALIGNED_ESCAPE_BITS
; 
	}
}

151 cÚ¡ 
UIÁ
 
	gCODING_STATS_NUM_WIDTHS
=7;

152 cÚ¡ 
UIÁ
 
	gCODING_STATS_NUM_SUBCLASSES
=
CODING_STATS_NUM_WIDTHS
*(1+
MAX_NUM_COMPONENT
+
MAX_NUM_CHANNEL_TYPE
);

154 þas 
	cTComCodšgSti¡icsCÏssTy³


156 
	mpublic
:

158 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
)

159 : 
	`ty³
(
t
), 
	$subCÏss
(0)

161 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
UIÁ
 
log2w
 )

162 : 
	`ty³
(
t
), 
	$subCÏss
(
log2w
)

163 { 
	}
}

164 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
IÁ
 
log2w
 )

165 : 
	`ty³
(
t
), 
	$subCÏss
(
log2w
)

166 { 
	}
}

167 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
CompÚ’tID
 
cid
 )

168 : 
	`ty³
(
t
), 
	`subCÏss
((
cid
+1)*
CODING_STATS_NUM_WIDTHS
)

169 { 
	}
}

170 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
ChªÃlTy³
 
chid
 )

171 : 
	`ty³
(
t
), 
	`subCÏss
((
chid
+
MAX_NUM_COMPONENT
+1)*
CODING_STATS_NUM_WIDTHS
)

172 { 
	}
}

173 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
UIÁ
 
log2w
, cÚ¡ 
CompÚ’tID
 
cid
 )

174 : 
	`ty³
(
t
), 
	`subCÏss
((
cid
+1)*
CODING_STATS_NUM_WIDTHS
 + 
log2w
)

175 { 
	}
}

176 
	$TComCodšgSti¡icsCÏssTy³
(cÚ¡ 
TComCodšgSti¡icsTy³
 
t
, cÚ¡ 
UIÁ
 
log2w
, cÚ¡ 
ChªÃlTy³
 
chid
 )

177 : 
	`ty³
(
t
), 
	`subCÏss
((
chid
+
MAX_NUM_COMPONENT
+1)*
CODING_STATS_NUM_WIDTHS
 + 
log2w
)

178 { 
	}
}

180 
UIÁ
 
	$G‘SubCÏssWidth
(cÚ¡ 
UIÁ
 
subCÏss
)

182  
subCÏss
%
CODING_STATS_NUM_WIDTHS
;

183 
	}
}

185 cÚ¡ 
TCh¬
 *
	$G‘SubCÏssSŒšg
(cÚ¡ 
UIÁ
 
subCÏss
)

187 
	`as£¹
 (
subCÏss
<
CODING_STATS_NUM_SUBCLASSES
);

188 cÚ¡ 
TCh¬
 *
¡ršgs
[1+
MAX_NUM_COMPONENT
+
MAX_NUM_CHANNEL_TYPE
]={"-", "Y", "Cb", "Cr", "Luma", "Chroma"};

189  
¡ršgs
[
subCÏss
/
CODING_STATS_NUM_WIDTHS
];

190 
	}
}

192 
TComCodšgSti¡icsTy³
 
	gty³
;

193 
UIÁ
 
	gsubCÏss
;

198 þas 
	cTComCodšgSti¡ics


200 
	mpublic
:

203 
	sStLogV®ue


205 
UIÁ
 
v®ues
[512+1];

206 
StLogV®ue
()

208 cÚ¡ 
DoubË
 
	mes
=DoubË(
TCOMCODINGSTATISTICS_ENTROPYSCALE
);

209 
	mv®ues
[0]=0;

210 
UIÁ
 
	mi
=1; i<(
	mv®ues
)/(
	mUIÁ
); i++)

212 
	mv®ues
[
i
]=
UIÁ
Ð
log
(
DoubË
(i))*
es
/log(2.0) );

217 
	sSSt


219 
SSt
(è: 
b™s
(0), 
couÁ
(0), 
sum
(0) { }

220 
IÁ64
 
	gb™s
;

221 
IÁ64
 
	gcouÁ
;

222 
IÁ64
 
	gsum
;

223 
Void
 
þ—r
(è{ 
	gb™s
=0; 
	gcouÁ
=0; 
	gsum
=0; }

225 
	gSSt
 &
	gÝ”©Ü
+=(cÚ¡ 
SSt
 &
¤c
)

226 { 
b™s
+=
¤c
.b™s; 
	gcouÁ
+=¤c.
couÁ
; 
	gsum
+=¤c.
sum
;  *
	gthis
; }

229 þas 
	cTComCodšgSti¡icsD©a


231 
	g´iv©e
:

232 
SSt
 
¡©i¡ics
[
STATS__NUM_STATS
+1][
CODING_STATS_NUM_SUBCLASSES
];

233 
SSt
 
	g¡©i¡ics_•
[
STATS__NUM_STATS
+1][
CODING_STATS_NUM_SUBCLASSES
 ];

234 
	g¡d
::
m­
<
¡d
::
¡ršg
, 
	gSSt
> 
	gm­pšgs_•
;

235 
ä›nd
 
þass
 
	gTComCodšgSti¡ics
;

238 
	g´iv©e
:

240 
TComCodšgSti¡icsD©a
 
d©a
;

242 
	$TComCodšgSti¡ics
(è: 
	$d©a
()

243 { 
	}
}

245 
Void
 
	$OuutLše
(cÚ¡ 
TCh¬
 *
pName
, cÚ¡ TCh¬ 
£p
, 
UIÁ
 
width
, cÚ¡ TCh¬ *
pSubCÏssSŒ
, cÚ¡ 
SSt
 &
sCABAC
, cÚ¡ SSˆ&
sEP
)

247 ià(
width
==0)

249 
	`OuutLše
(
pName
, 
£p
, "-", 
pSubCÏssSŒ
, 
sCABAC
, 
sEP
);

253 
	`´štf
("%c%-45s%c %6d %6s %12lld %12lld %12lld %12lld %12lld %12lld %12lld (%12lld)%c\n",

254 
£p
=='~'?'[':' ', 
pName
, s•, 1<<
width
, 
pSubCÏssSŒ
,

255 
sCABAC
.
couÁ
, sCABAC.
sum
, sCABAC.
b™s
, 
sEP
.couÁ, sEP.sum, sEP.b™s, sCABAC.b™s+sEP.b™s, (sCABAC.b™s+sEP.b™s)/8, 
£p
=='~'?']':' ');

257 
	}
}

258 
Void
 
	$OuutLše
(cÚ¡ 
TCh¬
 *
pName
, cÚ¡ TCh¬ 
£p
, cÚ¡ TCh¬ *
pWidthSŒšg
, cÚ¡ TCh¬ *
pSubCÏssSŒ
, cÚ¡ 
SSt
 &
sCABAC
, cÚ¡ SSˆ&
sEP
)

260 
	`´štf
("%c%-45s%c %6s %6s %12lld %12lld %12lld %12lld %12lld %12lld %12lld (%12lld)%c\n",

261 
£p
=='~'?'[':' ', 
pName
, s•, 
pWidthSŒšg
, 
pSubCÏssSŒ
,

262 
sCABAC
.
couÁ
, sCABAC.
sum
, sCABAC.
b™s
, 
sEP
.couÁ, sEP.sum, sEP.b™s, sCABAC.b™s+sEP.b™s, (sCABAC.b™s+sEP.b™s)/8, 
£p
=='~'?']':' ');

263 
	}
}

264 
Void
 
	$OuutLše
(cÚ¡ 
TCh¬
 *
pName
, cÚ¡ TCh¬ 
£p
, cÚ¡ TCh¬ *
pWidthSŒšg
, cÚ¡ TCh¬ *
pSubCÏssSŒ
, cÚ¡ 
SSt
 &
sEP
)

266 
	`´štf
("%c%-45s%c %6s %6s %12s %12s %12s %12lld %12lld %12lld %12lld (%12lld)%c\n",

267 
£p
=='~'?'[':' ', 
pName
, s•, 
pWidthSŒšg
, 
pSubCÏssSŒ
,

268 "", "", "", 
sEP
.
couÁ
, sEP.
sum
, sEP.
b™s
, sEP.b™s, (sEP.b™s)/8, 
£p
=='~'?']':' ');

269 
	}
}

271 
Void
 
	$OuutDashedLše
(cÚ¡ 
TCh¬
 *
pText
)

273 
	`´štf
("--%s",
pText
);

274 
UIÁ
 
tÙ
=0;

275 ;
pText
[
tÙ
]!=0;ot++);

277 
tÙ
+=2;

278 ; 
tÙ
<168;ot++)

280 
	`´štf
("-");

282 
	`´štf
("\n");

283 
	}
}

285 ~
	$TComCodšgSti¡ics
()

287 cÚ¡ 
IÁ64
 
es
=
TCOMCODINGSTATISTICS_ENTROPYSCALE
;

289 
IÁ64
 
ü
=0;

291 
IÁ64
 
tÙ®CABACb™s
=0, 
roundedCABACb™s
=0;

292 
IÁ
 
i
=
STATS__NAL_UNIT_PACKING
; i<
STATS__NUM_STATS
; i++)

294 
UIÁ
 
c
=0; c<
CODING_STATS_NUM_SUBCLASSES
; c++)

296 
tÙ®CABACb™s
+=
d©a
.
¡©i¡ics
[
i
][
c
].
b™s
;

297 
roundedCABACb™s
+=
d©a
.
¡©i¡ics
[
i
][
c
].
b™s
/
es
;

300 
IÁ64
 
»mašd”
=
tÙ®CABACb™s
 - 
roundedCABACb™s
*
es
;

301 
ü
=(
»mašd”
+
es
/2)/es;

304 
	`´štf
("NÙ% wžÈbexþuded fromhtÙ®‡ ™ should bthsum oà®ÈthÙh”ƒÁr› Óxû± fÜ %s)\n", 
	`g‘Name
(
STATS__NAL_UNIT_TOTAL_BODY
), g‘Name(
STATS__NAL_UNIT_PACKING
));

305 
	`´štf
(" %-45s- Width Type CABAC Count CABAC Sum CABAC bits EP Count EP Sum EP bits Total bits ( Total bytes)\n", "Decoder statistics");

307 
	`OuutDashedLše
("");

308 
SSt
 
ÿbacTÙ®B™s
, 
•TÙ®B™s
;

309 
SSt
 
¡©TÙ®s_ÿbac
[
CODING_STATS_NUM_SUBCLASSES
];

310 
SSt
 
¡©TÙ®s_•
[
CODING_STATS_NUM_SUBCLASSES
];

312 
IÁ
 
i
=0; i<
STATS__NUM_STATS
; i++)

314 
SSt
 
ÿbacSubTÙ®
, 
•SubTÙ®
;

315 
BoÞ
 
bHadCÏssif›dEÁry
=
çl£
;

316 cÚ¡ 
TCh¬
 *
pName
=
	`g‘Name
(
	`TComCodšgSti¡icsTy³
(
i
));

318 
UIÁ
 
c
=0; c<
CODING_STATS_NUM_SUBCLASSES
; c++)

320 
SSt
 &
sCABACÜig
=
d©a
.
¡©i¡ics
[
i
][
c
];

321 
SSt
 &
sEP
=
d©a
.
¡©i¡ics_•
[
i
][
c
];

323 ià(
sCABACÜig
.
b™s
==0 && 
sEP
.bits==0)

328 
SSt
 
sCABAC
;

330 
IÁ64
 
thisCABACb™s
=
sCABACÜig
.
b™s
/
es
;

331 ià(
i
==
STATS__CABAC_INITIALISATION
 && 
sCABACÜig
.
b™s
!=0)

333 
thisCABACb™s
+=
ü
;

334 
ü
=0;

336 
sCABAC
.
b™s
=
thisCABACb™s
;

337 
sCABAC
.
couÁ
=
sCABACÜig
.count;

338 
sCABAC
.
sum
=
sCABACÜig
.sum;

340 
UIÁ
 
width
=
TComCodšgSti¡icsCÏssTy³
::
	`G‘SubCÏssWidth
(
c
);

341 
	`OuutLše
(
pName
, ':', 
width
, 
TComCodšgSti¡icsCÏssTy³
::
	`G‘SubCÏssSŒšg
(
c
), 
sCABAC
, 
sEP
);

342 
ÿbacSubTÙ®
+=
sCABAC
;

343 
•SubTÙ®
+=
sEP
;

344 ià(
i
!=
STATS__NAL_UNIT_TOTAL_BODY
)

346 
ÿbacTÙ®B™s
+=
sCABAC
;

347 
•TÙ®B™s
+=
sEP
;

348 
¡©TÙ®s_ÿbac
[
c
]+=
sCABAC
;

349 
¡©TÙ®s_•
[
c
]+=
sEP
;

351 
bHadCÏssif›dEÁry
=bHadCÏssif›dEÁry||(
c
!=0);

353 ià(
bHadCÏssif›dEÁry
)

355 
	`OuutLše
(
pName
, '~', "~~ST~~", "~~ST~~", 
ÿbacSubTÙ®
, 
•SubTÙ®
);

357 ià(
i
==
STATS__NAL_UNIT_TOTAL_BODY
)

359 
	`OuutDashedLše
("");

362 
	`OuutDashedLše
("");

363 
	`OuutLše
("CABAC Sub-tÙ®", '~', "~~ST~~", "~~ST~~", 
ÿbacTÙ®B™s
, 
•TÙ®B™s
);

365 
	`OuutDashedLše
("CAVLC HEADER BITS");

366 
SSt
 
ÿvlcTÙ®B™s
;

367 
¡d
::
m­
<¡d::
¡ršg
, 
SSt
>::
™”©Ü
 
™
=
d©a
.
m­pšgs_•
.
	`begš
(); it!=d©a.m­pšgs_•.
	`’d
(); it++)

369 
SSt
 
s
=
™
->
£cÚd
;

370 
ÿvlcTÙ®B™s
+=
s
;

371 
	`OuutLše
(
™
->
fœ¡
.
	`c_¡r
(), ':', "-", "-", 
s
);

374 
	`OuutDashedLše
("");

375 
	`OuutLše
("CAVLC H—d” Sub-tÙ®", '~', "~~ST~~", "~~ST~~", 
ÿvlcTÙ®B™s
);

378 
	`OuutDashedLše
("CABAC Break down by size");

379 
UIÁ
 
s
=0; s<
CODING_STATS_NUM_WIDTHS
; s++)

381 
SSt
 
subTÙ®Cabac
, 
subTÙ®EP
;

382 
UIÁ
 
c
=0; c<
CODING_STATS_NUM_SUBCLASSES
; c+=
CODING_STATS_NUM_WIDTHS
)

384 
subTÙ®Cabac
+=
¡©TÙ®s_ÿbac
[
c
+
s
];

385 
subTÙ®EP
+=
¡©TÙ®s_•
[
c
+
s
];

387 ià(
subTÙ®Cabac
.
b™s
!=0 || 
subTÙ®EP
.bits!=0)

389 
	`OuutLše
("CABAC by sizSub-tÙ®", '=', 
s
, "AÎ", 
subTÙ®Cabac
, 
subTÙ®EP
);

392 
	`OuutDashedLše
("Break down by component/Channelype");

393 
UIÁ
 
c
=0; c<
CODING_STATS_NUM_SUBCLASSES
; c+=
CODING_STATS_NUM_WIDTHS
)

395 
SSt
 
subTÙ®Cabac
, 
subTÙ®EP
;

396 
UIÁ
 
s
=0; s<
CODING_STATS_NUM_WIDTHS
; s++)

398 
subTÙ®Cabac
+=
¡©TÙ®s_ÿbac
[
c
+
s
];

399 
subTÙ®EP
+=
¡©TÙ®s_•
[
c
+
s
];

401 ià(
subTÙ®Cabac
.
b™s
!=0 || 
subTÙ®EP
.bits!=0)

403 
	`OuutLše
("CABAC byy³ Sub-tÙ®", '=', "-", 
TComCodšgSti¡icsCÏssTy³
::
	`G‘SubCÏssSŒšg
(
c
), 
subTÙ®Cabac
, 
subTÙ®EP
);

406 
	`OuutDashedLše
("Break down by size‡nd component/Channelype");

407 
UIÁ
 
c
=0; c<
CODING_STATS_NUM_SUBCLASSES
; c+=
CODING_STATS_NUM_WIDTHS
)

409 
UIÁ
 
s
=0; s<
CODING_STATS_NUM_WIDTHS
; s++)

411 
SSt
 
subTÙ®Cabac
, 
subTÙ®EP
;

412 
subTÙ®Cabac
+=
¡©TÙ®s_ÿbac
[
c
+
s
];

413 
subTÙ®EP
+=
¡©TÙ®s_•
[
c
+
s
];

414 ià(
subTÙ®Cabac
.
b™s
!=0 || 
subTÙ®EP
.bits!=0)

416 
	`OuutLše
("CABAC by sizªdy³ Sub-tÙ®", '=', 
s
, 
TComCodšgSti¡icsCÏssTy³
::
	`G‘SubCÏssSŒšg
(
c
), 
subTÙ®Cabac
, 
subTÙ®EP
);

421 
	`OuutDashedLše
("");

422 
	`OuutLše
("CABAC Sub-tÙ®", '~', "~~ST~~", "~~ST~~", 
ÿbacTÙ®B™s
, 
•TÙ®B™s
);

423 
	`OuutLše
("CAVLC H—d” Sub-tÙ®", '~', "~~ST~~", "~~ST~~", 
ÿvlcTÙ®B™s
);

424 
	`OuutDashedLše
("GRAND TOTAL");

425 
•TÙ®B™s
+=
ÿvlcTÙ®B™s
;

426 
	`OuutLše
("TOTAL", '~', "~~GT~~", "~~GT~~", 
ÿbacTÙ®B™s
, 
•TÙ®B™s
);

427 
	}
}

430 
	gpublic
:

431 
TComCodšgSti¡ics
& 
	$G‘SšgËtÚIn¡ªû
()

433 
TComCodšgSti¡ics
 
š¡
;

434  
š¡
;

435 
	}
}

437 cÚ¡ 
	gTComCodšgSti¡icsD©a
 &
	$G‘Sti¡ics
(è{  
	`G‘SšgËtÚIn¡ªû
().
d©a
; 
	}
}

438 
Void
 
	$S‘Sti¡ics
(cÚ¡ 
TComCodšgSti¡icsD©a
 &
¤c
è{ 
	`G‘SšgËtÚIn¡ªû
().
d©a
=¤c; 
	}
}

440 
	gSSt
 &
	$G‘Sti¡icEP
(cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
¡©
è{  
	`G‘SšgËtÚIn¡ªû
().
d©a
.
¡©i¡ics_•
[¡©.
ty³
][¡©.
subCÏss
]; 
	}
}

442 
	gSSt
 &
	$G‘Sti¡icEP
(cÚ¡ 
¡d
::
¡ršg
 &
¡r
è{  
	`G‘SšgËtÚIn¡ªû
().
d©a
.
m­pšgs_•
[¡r]; 
	}
}

444 
	gSSt
 &
	$G‘Sti¡icEP
(cÚ¡ 
TCh¬
 *
pKey
è{ 
	`G‘Sti¡icEP
(
¡d
::
	`¡ršg
ÕKey)); 
	}
}

446 
Void
 
	$Inüem’tSti¡icEP
(cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
¡©
, cÚ¡ 
IÁ
 
numB™s
, cÚ¡ IÁ 
v®ue
)

448 
SSt
 &
s
=
	`G‘Sti¡icEP
(
¡©
);

449 
s
.
b™s
+=
numB™s
;

450 
s
.
couÁ
++;

451 
s
.
sum
+=
v®ue
;

452 
	}
}

454 
Void
 
	$Inüem’tSti¡icEP
(cÚ¡ 
¡d
::
¡ršg
 &
¡r
, cÚ¡ 
IÁ
 
numB™s
, cÚ¡ IÁ 
v®ue
)

456 
SSt
 &
s
=
	`G‘Sti¡icEP
(
¡r
);

457 
s
.
b™s
+=
numB™s
;

458 
s
.
couÁ
++;

459 
s
.
sum
+=
v®ue
;

460 
	}
}

462 
Void
 
	$Inüem’tSti¡icEP
(cÚ¡ 
TCh¬
 *
pKey
, cÚ¡ 
IÁ
 
numB™s
, cÚ¡ IÁ 
v®ue
)

464 
SSt
 &
s
=
	`G‘Sti¡icEP
(
pKey
);

465 
s
.
b™s
+=
numB™s
;

466 
s
.
couÁ
++;

467 
s
.
sum
+=
v®ue
;

468 
	}
}

470 
StLogV®ue
 
	gv®ues
;

472 
Void
 
	$Upd©eCABACSt
(cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
¡©
, 
UIÁ
 
uiRªgeBefÜe
, UIÁ 
uiRªgeAá”
, 
IÁ
 
v®
)

474 
TComCodšgSti¡ics
 &
š¡
=
	`G‘SšgËtÚIn¡ªû
();

478 
SSt
 &
s
=
š¡
.
d©a
.
¡©i¡ics
[
¡©
.
ty³
][¡©.
subCÏss
];

479 
s
.
b™s
+=
š¡
.
v®ues
.v®ues[
uiRªgeBefÜe
]-š¡.v®ues.v®ues[
uiRªgeAá”
];

480 
s
.
couÁ
++;

481 
s
.
sum
+=
v®
;

482 
	}
}

	@source/Lib/TLibCommon/TComDataCU.cpp

39 
	~"TComD©aCU.h
"

40 
	~"TComTU.h
"

41 
	~"TComPic.h
"

50 
	gTComD©aCU
::
	$TComD©aCU
()

52 
m_pcPic
 = 
NULL
;

53 
m_pcSliû
 = 
NULL
;

54 
m_puhD•th
 = 
NULL
;

56 
m_skFÏg
 = 
NULL
;

58 
m_³P¬tSize
 = 
NULL
;

59 
m_³P»dMode
 = 
NULL
;

60 
m_CUT¿nsquªtBy·ss
 = 
NULL
;

61 
m_puhWidth
 = 
NULL
;

62 
m_puhHeight
 = 
NULL
;

63 
m_phQP
 = 
NULL
;

64 
m_ChromaQpAdj
 = 
NULL
;

65 
m_pbM”geFÏg
 = 
NULL
;

66 
m_puhM”geIndex
 = 
NULL
;

67 
UIÁ
 
i
=0; i<
MAX_NUM_CHANNEL_TYPE
; i++)

69 
m_puhIÁ¿Dœ
[
i
] = 
NULL
;

71 
m_puhIÁ”Dœ
 = 
NULL
;

72 
m_puhTrIdx
 = 
NULL
;

74 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

76 
m_puhCbf
[
comp
] = 
NULL
;

77 
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] = 
NULL
;

78 
m_puhT¿nsfÜmSk
[
comp
] = 
NULL
;

79 
m_pcTrCÛff
[
comp
] = 
NULL
;

80 #ià
ADAPTIVE_QP_SELECTION


81 
m_pcA¾CÛff
[
comp
] = 
NULL
;

83 
m_pcIPCMSam¶e
[
comp
] = 
NULL
;

84 
m_ex¶ic™RdpcmMode
[
comp
] = 
NULL
;

86 #ià
ADAPTIVE_QP_SELECTION


87 
m_A¾CÛffIsAlŸ£dAÎoÿtiÚ
 = 
çl£
;

89 
m_pbIPCMFÏg
 = 
NULL
;

91 
m_pCtuAboveLeá
 = 
NULL
;

92 
m_pCtuAboveRight
 = 
NULL
;

93 
m_pCtuAbove
 = 
NULL
;

94 
m_pCtuLeá
 = 
NULL
;

96 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

98 
m_­iMVPIdx
[
i
] = 
NULL
;

99 
m_­iMVPNum
[
i
] = 
NULL
;

102 
m_bDecSubCu
 = 
çl£
;

103 
	}
}

105 
	gTComD©aCU
::~
	$TComD©aCU
()

107 
	}
}

109 
Void
 
TComD©aCU
::
ü—‹
Ð
ChromaFÜm©
 
chromaFÜm©IDC
, 
UIÁ
 
uiNumP¬t™iÚ
, UIÁ 
uiWidth
, UIÁ 
uiHeight
, 
BoÞ
 
bDecSubCu
, 
IÁ
 
un™Size


110 #ià
ADAPTIVE_QP_SELECTION


111 , 
TCÛff
 *
pP¬’tARLBufãr


115 
	gm_bDecSubCu
 = 
bDecSubCu
;

117 
	gm_pcPic
 = 
NULL
;

118 
	gm_pcSliû
 = 
NULL
;

119 
	gm_uiNumP¬t™iÚ
 = 
uiNumP¬t™iÚ
;

120 
	gm_un™Size
 = 
un™Size
;

122 iàÐ!
	gbDecSubCu
 )

124 
	gm_phQP
 = (
SCh¬
* )
xM®loc
(SCh¬, 
uiNumP¬t™iÚ
);

125 
	gm_puhD•th
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

126 
	gm_puhWidth
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

127 
	gm_puhHeight
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

129 
	gm_ChromaQpAdj
 = 
Ãw
 
UCh¬
[ 
uiNumP¬t™iÚ
 ];

130 
	gm_skFÏg
 = 
Ãw
 
BoÞ
[ 
uiNumP¬t™iÚ
 ];

131 
	gm_³P¬tSize
 = 
Ãw
 
SCh¬
[ 
uiNumP¬t™iÚ
 ];

132 
mem£t
Ð
m_³P¬tSize
, 
NUMBER_OF_PART_SIZES
,
uiNumP¬t™iÚ
 * ( *m_pePartSize ) );

133 
	gm_³P»dMode
 = 
Ãw
 
SCh¬
[ 
uiNumP¬t™iÚ
 ];

134 
	gm_CUT¿nsquªtBy·ss
 = 
Ãw
 
BoÞ
[ 
uiNumP¬t™iÚ
 ];

136 
	gm_pbM”geFÏg
 = (
BoÞ
* )
xM®loc
(BoÞ, 
uiNumP¬t™iÚ
);

137 
	gm_puhM”geIndex
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

139 
UIÁ
 
	gch
=0; ch<
	gMAX_NUM_CHANNEL_TYPE
; ch++)

141 
	gm_puhIÁ¿Dœ
[
ch
] = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

143 
	gm_puhIÁ”Dœ
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

145 
	gm_puhTrIdx
 = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

147 
UIÁ
 
	gi
=0; i<
	gNUM_REF_PIC_LIST_01
; i++)

149 cÚ¡ 
RefPicLi¡
 
	g½l
=RefPicLi¡(
i
);

150 
	gm_­iMVPIdx
[
½l
] = 
Ãw
 
SCh¬
[ 
uiNumP¬t™iÚ
 ];

151 
	gm_­iMVPNum
[
½l
] = 
Ãw
 
SCh¬
[ 
uiNumP¬t™iÚ
 ];

152 
mem£t
Ð
m_­iMVPIdx
[
½l
], -1,
uiNumP¬t™iÚ
 * Ð
SCh¬
 ) );

155 
UIÁ
 
	gcomp
=0; comp<
	gMAX_NUM_COMPONENT
; comp++)

157 cÚ¡ 
CompÚ’tID
 
	gcompID
 = CompÚ’tID(
comp
);

158 cÚ¡ 
UIÁ
 
	gchromaShiá
 = 
g‘CompÚ’tSÿËX
(
compID
, 
chromaFÜm©IDC
è+ 
g‘CompÚ’tSÿËY
(compID, chromaFormatIDC);

159 cÚ¡ 
UIÁ
 
	gtÙ®Size
 = (
uiWidth
 * 
uiHeight
è>> 
chromaShiá
;

161 
	gm_üossCompÚ’tP»diùiÚAÍha
[
compID
] = (
SCh¬
* )
xM®loc
(SCh¬, 
uiNumP¬t™iÚ
);

162 
	gm_puhT¿nsfÜmSk
[
compID
] = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

163 
	gm_ex¶ic™RdpcmMode
[
compID
] = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

164 
	gm_puhCbf
[
compID
] = (
UCh¬
* )
xM®loc
(UCh¬, 
uiNumP¬t™iÚ
);

165 
	gm_pcTrCÛff
[
compID
] = (
TCÛff
*)
xM®loc
(TCÛff, 
tÙ®Size
);

166 
mem£t
Ð
m_pcTrCÛff
[
compID
], 0, (
tÙ®Size
 * Ð
TCÛff
 )) );

168 #ià
ADAPTIVE_QP_SELECTION


169 ifÐ
	gpP¬’tARLBufãr
 != 0 )

171 
m_pcA¾CÛff
[
compID
] = 
pP¬’tARLBufãr
;

172 
	gm_A¾CÛffIsAlŸ£dAÎoÿtiÚ
 = 
Œue
;

173 
	gpP¬’tARLBufãr
 +ð
tÙ®Size
;

177 
	gm_pcA¾CÛff
[
compID
] = (
TCÛff
*)
xM®loc
(TCÛff, 
tÙ®Size
);

178 
	gm_A¾CÛffIsAlŸ£dAÎoÿtiÚ
 = 
çl£
;

181 
	gm_pcIPCMSam¶e
[
compID
] = (
P–
* )
xM®loc
(P– , 
tÙ®Size
);

184 
	gm_pbIPCMFÏg
 = (
BoÞ
* )
xM®loc
(BoÞ, 
uiNumP¬t™iÚ
);

186 
UIÁ
 
	gi
=0; i<
	gNUM_REF_PIC_LIST_01
; i++)

188 
	gm_acCUMvF›ld
[
i
].
ü—‹
Ð
uiNumP¬t™iÚ
 );

194 
UIÁ
 
	gi
=0; i<
	gNUM_REF_PIC_LIST_01
; i++)

196 
	gm_acCUMvF›ld
[
i
].
£tNumP¬t™iÚ
(
uiNumP¬t™iÚ
 );

202 
	gm_pCtuAboveLeá
 = 
NULL
;

203 
	gm_pCtuAboveRight
 = 
NULL
;

204 
	gm_pCtuAbove
 = 
NULL
;

205 
	gm_pCtuLeá
 = 
NULL
;

208 
Void
 
	gTComD©aCU
::
	$de¡roy
()

211 iàÐ!
m_bDecSubCu
 )

213 iàÐ
m_phQP
 )

215 
	`xF»e
(
m_phQP
);

216 
m_phQP
 = 
NULL
;

218 iàÐ
m_puhD•th
 )

220 
	`xF»e
(
m_puhD•th
);

221 
m_puhD•th
 = 
NULL
;

223 iàÐ
m_puhWidth
 )

225 
	`xF»e
(
m_puhWidth
);

226 
m_puhWidth
 = 
NULL
;

228 iàÐ
m_puhHeight
 )

230 
	`xF»e
(
m_puhHeight
);

231 
m_puhHeight
 = 
NULL
;

234 iàÐ
m_skFÏg
 )

236 
d–‘e
[] 
m_skFÏg
;

237 
m_skFÏg
 = 
NULL
;

240 iàÐ
m_³P¬tSize
 )

242 
d–‘e
[] 
m_³P¬tSize
;

243 
m_³P¬tSize
 = 
NULL
;

245 iàÐ
m_³P»dMode
 )

247 
d–‘e
[] 
m_³P»dMode
;

248 
m_³P»dMode
 = 
NULL
;

250 iàÐ
m_ChromaQpAdj
 )

252 
d–‘e
[] 
m_ChromaQpAdj
;

253 
m_ChromaQpAdj
 = 
NULL
;

255 iàÐ
m_CUT¿nsquªtBy·ss
 )

257 
d–‘e
[] 
m_CUT¿nsquªtBy·ss
;

258 
m_CUT¿nsquªtBy·ss
 = 
NULL
;

260 iàÐ
m_puhIÁ”Dœ
 )

262 
	`xF»e
(
m_puhIÁ”Dœ
);

263 
m_puhIÁ”Dœ
 = 
NULL
;

265 iàÐ
m_pbM”geFÏg
 )

267 
	`xF»e
(
m_pbM”geFÏg
);

268 
m_pbM”geFÏg
 = 
NULL
;

270 iàÐ
m_puhM”geIndex
 )

272 
	`xF»e
(
m_puhM”geIndex
);

273 
m_puhM”geIndex
 = 
NULL
;

276 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

278 
	`xF»e
(
m_puhIÁ¿Dœ
[
ch
]);

279 
m_puhIÁ¿Dœ
[
ch
] = 
NULL
;

282 iàÐ
m_puhTrIdx
 )

284 
	`xF»e
(
m_puhTrIdx
);

285 
m_puhTrIdx
 = 
NULL
;

288 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

290 iàÐ
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] )

292 
	`xF»e
(
m_üossCompÚ’tP»diùiÚAÍha
[
comp
]);

293 
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] = 
NULL
;

295 iàÐ
m_puhT¿nsfÜmSk
[
comp
] )

297 
	`xF»e
(
m_puhT¿nsfÜmSk
[
comp
]);

298 
m_puhT¿nsfÜmSk
[
comp
] = 
NULL
;

300 iàÐ
m_puhCbf
[
comp
] )

302 
	`xF»e
(
m_puhCbf
[
comp
]);

303 
m_puhCbf
[
comp
] = 
NULL
;

305 iàÐ
m_pcTrCÛff
[
comp
] )

307 
	`xF»e
(
m_pcTrCÛff
[
comp
]);

308 
m_pcTrCÛff
[
comp
] = 
NULL
;

310 iàÐ
m_ex¶ic™RdpcmMode
[
comp
] )

312 
	`xF»e
(
m_ex¶ic™RdpcmMode
[
comp
]);

313 
m_ex¶ic™RdpcmMode
[
comp
] = 
NULL
;

316 #ià
ADAPTIVE_QP_SELECTION


317 ià(!
m_A¾CÛffIsAlŸ£dAÎoÿtiÚ
)

319 iàÐ
m_pcA¾CÛff
[
comp
] )

321 
	`xF»e
(
m_pcA¾CÛff
[
comp
]);

322 
m_pcA¾CÛff
[
comp
] = 
NULL
;

327 iàÐ
m_pcIPCMSam¶e
[
comp
] )

329 
	`xF»e
(
m_pcIPCMSam¶e
[
comp
]);

330 
m_pcIPCMSam¶e
[
comp
] = 
NULL
;

333 iàÐ
m_pbIPCMFÏg
 )

335 
	`xF»e
(
m_pbIPCMFÏg
 );

336 
m_pbIPCMFÏg
 = 
NULL
;

339 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

341 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

342 iàÐ
m_­iMVPIdx
[
½l
] )

344 
d–‘e
[] 
m_­iMVPIdx
[
½l
];

345 
m_­iMVPIdx
[
½l
] = 
NULL
;

347 iàÐ
m_­iMVPNum
[
½l
] )

349 
d–‘e
[] 
m_­iMVPNum
[
½l
];

350 
m_­iMVPNum
[
½l
] = 
NULL
;

354 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

356 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

357 
m_acCUMvF›ld
[
½l
].
	`de¡roy
();

361 
m_pcPic
 = 
NULL
;

362 
m_pcSliû
 = 
NULL
;

364 
m_pCtuAboveLeá
 = 
NULL
;

365 
m_pCtuAboveRight
 = 
NULL
;

366 
m_pCtuAbove
 = 
NULL
;

367 
m_pCtuLeá
 = 
NULL
;

369 
	}
}

371 
BoÞ
 
	gTComD©aCU
::
	$CUIsFromSameTže
 ( cÚ¡ 
TComD©aCU
 *
pCU
 ) const

373  
pCU
!=
NULL
 &&

374 
pCU
->
	`g‘Sliû
(è!ð
NULL
 &&

375 
m_pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
Ð
pCU
->
	`g‘CtuRsAddr
() ) == m_pcPic->getPicSym()->getTileIdxMap(getCtuRsAddr());

376 
	}
}

378 
BoÞ
 
	gTComD©aCU
::
	$CUIsFromSameSliûAndTže
 ( cÚ¡ 
TComD©aCU
 *
pCU
 ) const

380  
pCU
!=
NULL
 &&

381 
pCU
->
	`g‘Sliû
(è!ð
NULL
 &&

382 
pCU
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
() == getSlice()->getSliceCurStartCtuTsAddr() &&

383 
m_pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
Ð
pCU
->
	`g‘CtuRsAddr
() ) == m_pcPic->getPicSym()->getTileIdxMap(getCtuRsAddr())

385 
	}
}

387 
BoÞ
 
	gTComD©aCU
::
	$CUIsFromSameSliûTžeAndWaveäÚtRow
ÐcÚ¡ 
TComD©aCU
 *
pCU
 ) const

389  
	`CUIsFromSameSliûAndTže
(
pCU
)

390 && (!
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
(è|| 
	`g‘Pic
()->
	`g‘Ctu
(
	`g‘CtuRsAddr
())->
	`g‘CUP–Y
(è=ðg‘Pic()->g‘Ctu(
pCU
->getCtuRsAddr())->getCUPelY());

391 
	}
}

393 
BoÞ
 
	gTComD©aCU
::
	$isLa¡SubCUOfCtu
(cÚ¡ 
UIÁ
 
absP¬tIdx
) const

395 cÚ¡ 
TComSPS
 &
¥s
=*(
	`g‘Sliû
()->
	`g‘SPS
());

397 cÚ¡ 
UIÁ
 
picWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

398 cÚ¡ 
UIÁ
 
picHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

399 cÚ¡ 
UIÁ
 
g¿nuÏr™yWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

401 cÚ¡ 
UIÁ
 
cuPosX
 = 
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
absP¬tIdx
] ];

402 cÚ¡ 
UIÁ
 
cuPosY
 = 
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
absP¬tIdx
] ];

404  (((
cuPosX
+
	`g‘Width
Ð
absP¬tIdx
))%
g¿nuÏr™yWidth
==0||(cuPosX+g‘WidthÐabsP¬tIdx)==
picWidth
 ))

405 && ((
cuPosY
+
	`g‘Height
(
absP¬tIdx
))%
g¿nuÏr™yWidth
==0||(cuPosY+g‘Height×bsP¬tIdx)==
picHeight
)));

406 
	}
}

422 
Void
 
	gTComD©aCU
::
	$š™Ctu
Ð
TComPic
* 
pcPic
, 
UIÁ
 
ùuRsAddr
 )

425 cÚ¡ 
UIÁ
 
maxCUWidth
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘MaxCUWidth
();

426 cÚ¡ 
UIÁ
 
maxCUHeight
ð
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘MaxCUHeight
();

427 
m_pcPic
 = 
pcPic
;

428 
m_pcSliû
 = 
pcPic
->
	`g‘Sliû
ÕcPic->
	`g‘Cu¼SliûIdx
());

429 
m_ùuRsAddr
 = 
ùuRsAddr
;

430 
m_uiCUP–X
 = ( 
ùuRsAddr
 % 
pcPic
->
	`g‘F¿meWidthInCtus
(èè* 
maxCUWidth
;

431 
m_uiCUP–Y
 = ( 
ùuRsAddr
 / 
pcPic
->
	`g‘F¿meWidthInCtus
(èè* 
maxCUHeight
;

432 
m_absZIdxInCtu
 = 0;

433 
m_dTÙ®Co¡
 = 
MAX_DOUBLE
;

434 
m_uiTÙ®Di¡ÜtiÚ
 = 0;

435 
m_uiTÙ®B™s
 = 0;

436 
m_uiTÙ®Bšs
 = 0;

437 
m_uiNumP¬t™iÚ
 = 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
();

439 
	`mem£t
Ð
m_skFÏg
 , 
çl£
, 
m_uiNumP¬t™iÚ
 * ( *m_skipFlag ) );

441 
	`mem£t
Ð
m_³P¬tSize
 , 
NUMBER_OF_PART_SIZES
, 
m_uiNumP¬t™iÚ
 * ( *m_pePartSize ) );

442 
	`mem£t
Ð
m_³P»dMode
 , 
NUMBER_OF_PREDICTION_MODES
, 
m_uiNumP¬t™iÚ
 * ( *m_pePredMode ) );

443 
	`mem£t
Ð
m_CUT¿nsquªtBy·ss
, 
çl£
, 
m_uiNumP¬t™iÚ
 * ( *m_CUTransquantBypass) );

444 
	`mem£t
Ð
m_puhD•th
 , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhDepth ) );

445 
	`mem£t
Ð
m_puhTrIdx
 , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhTrIdx ) );

446 
	`mem£t
Ð
m_puhWidth
 , 
maxCUWidth
, 
m_uiNumP¬t™iÚ
 * ( *m_puhWidth ) );

447 
	`mem£t
Ð
m_puhHeight
 , 
maxCUHeight
, 
m_uiNumP¬t™iÚ
 * ( *m_puhHeight ) );

448 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

450 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

451 
	`mem£t
Ð
m_­iMVPIdx
[
½l
] , -1, 
m_uiNumP¬t™iÚ
 * ( *m_apiMVPIdx[rpl] ) );

452 
	`mem£t
Ð
m_­iMVPNum
[
½l
] , -1, 
m_uiNumP¬t™iÚ
 * ( *m_apiMVPNum[rpl] ) );

454 
	`mem£t
Ð
m_phQP
 , 
	`g‘Sliû
()->
	`g‘SliûQp
(), 
m_uiNumP¬t™iÚ
 * ( *m_phQP ) );

455 
	`mem£t
Ð
m_ChromaQpAdj
 , 0, 
m_uiNumP¬t™iÚ
 * ( *m_ChromaQpAdj ) );

456 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

458 
	`mem£t
Ð
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] , 0, 
m_uiNumP¬t™iÚ
 * ( *m_crossComponentPredictionAlpha[comp] ) );

459 
	`mem£t
Ð
m_puhT¿nsfÜmSk
[
comp
] , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhTransformSkip[comp]) );

460 
	`mem£t
Ð
m_puhCbf
[
comp
] , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhCbf[comp] ) );

461 
	`mem£t
Ð
m_ex¶ic™RdpcmMode
[
comp
] , 
NUMBER_OF_RDPCM_MODES
, 
m_uiNumP¬t™iÚ
 * ( *m_explicitRdpcmMode[comp] ) );

463 
	`mem£t
Ð
m_pbM”geFÏg
 , 
çl£
, 
m_uiNumP¬t™iÚ
 * ( *m_pbMergeFlag ) );

464 
	`mem£t
Ð
m_puhM”geIndex
 , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhMergeIndex ) );

465 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

467 
	`mem£t
Ð
m_puhIÁ¿Dœ
[
ch
] , ((ch==0è? 
DC_IDX
 : 0), 
m_uiNumP¬t™iÚ
 * ( *(m_puhIntraDir[ch]) ) );

469 
	`mem£t
Ð
m_puhIÁ”Dœ
 , 0, 
m_uiNumP¬t™iÚ
 * ( *m_puhInterDir ) );

470 
	`mem£t
Ð
m_pbIPCMFÏg
 , 
çl£
, 
m_uiNumP¬t™iÚ
 * ( *m_pbIPCMFlag ) );

472 cÚ¡ 
UIÁ
 
numCÛffY
 = 
maxCUWidth
*
maxCUHeight
;

473 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

475 cÚ¡ 
UIÁ
 
compÚ’tShiá
 = 
m_pcPic
->
	`g‘CompÚ’tSÿËX
(
	`CompÚ’tID
(
comp
)è+ m_pcPic->
	`g‘CompÚ’tSÿËY
(ComponentID(comp));

476 
	`mem£t
Ð
m_pcTrCÛff
[
comp
], 0, (
TCÛff
)* 
numCÛffY
>>
compÚ’tShiá
 );

477 #ià
ADAPTIVE_QP_SELECTION


478 
	`mem£t
Ð
m_pcA¾CÛff
[
comp
], 0, (
TCÛff
)* 
numCÛffY
>>
compÚ’tShiá
 );

482 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

484 
m_acCUMvF›ld
[
i
].
	`þ—rMvF›ld
();

488 
m_pCtuLeá
 = 
NULL
;

489 
m_pCtuAbove
 = 
NULL
;

490 
m_pCtuAboveLeá
 = 
NULL
;

491 
m_pCtuAboveRight
 = 
NULL
;

493 
UIÁ
 
äameWidthInCtus
 = 
pcPic
->
	`g‘F¿meWidthInCtus
();

494 iàÐ
m_ùuRsAddr
 % 
äameWidthInCtus
 )

496 
m_pCtuLeá
 = 
pcPic
->
	`g‘Ctu
Ð
m_ùuRsAddr
 - 1 );

499 iàÐ
m_ùuRsAddr
 / 
äameWidthInCtus
 )

501 
m_pCtuAbove
 = 
pcPic
->
	`g‘Ctu
Ð
m_ùuRsAddr
 - 
äameWidthInCtus
 );

504 iàÐ
m_pCtuLeá
 && 
m_pCtuAbove
 )

506 
m_pCtuAboveLeá
 = 
pcPic
->
	`g‘Ctu
Ð
m_ùuRsAddr
 - 
äameWidthInCtus
 - 1 );

509 iàÐ
m_pCtuAbove
 && ( (
m_ùuRsAddr
%
äameWidthInCtus
) < (frameWidthInCtus-1) ) )

511 
m_pCtuAboveRight
 = 
pcPic
->
	`g‘Ctu
Ð
m_ùuRsAddr
 - 
äameWidthInCtus
 + 1 );

513 
	}
}

525 
Void
 
	gTComD©aCU
::
	$š™E¡D©a
ÐcÚ¡ 
UIÁ
 
uiD•th
, cÚ¡ 
IÁ
 
qp
, cÚ¡ 
BoÞ
 
bT¿nsquªtBy·ss
 )

527 
m_dTÙ®Co¡
 = 
MAX_DOUBLE
;

528 
m_uiTÙ®Di¡ÜtiÚ
 = 0;

529 
m_uiTÙ®B™s
 = 0;

530 
m_uiTÙ®Bšs
 = 0;

532 cÚ¡ 
UCh¬
 
uhWidth
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
(è>> 
uiD•th
;

533 cÚ¡ 
UCh¬
 
uhHeight
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
(è>> 
uiD•th
;

535 
UIÁ
 
ui
 = 0; u˜< 
m_uiNumP¬t™iÚ
; ui++)

537 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

539 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

540 
m_­iMVPIdx
[
½l
][
ui
] = -1;

541 
m_­iMVPNum
[
½l
][
ui
] = -1;

543 
m_puhD•th
 [
ui
] = 
uiD•th
;

544 
m_puhWidth
 [
ui
] = 
uhWidth
;

545 
m_puhHeight
 [
ui
] = 
uhHeight
;

546 
m_puhTrIdx
 [
ui
] = 0;

547 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

549 
m_üossCompÚ’tP»diùiÚAÍha
[
comp
][
ui
] = 0;

550 
m_puhT¿nsfÜmSk
 [
comp
][
ui
] = 0;

551 
m_ex¶ic™RdpcmMode
 [
comp
][
ui
] = 
NUMBER_OF_RDPCM_MODES
;

553 
m_skFÏg
[
ui
] = 
çl£
;

554 
m_³P¬tSize
[
ui
] = 
NUMBER_OF_PART_SIZES
;

555 
m_³P»dMode
[
ui
] = 
NUMBER_OF_PREDICTION_MODES
;

556 
m_CUT¿nsquªtBy·ss
[
ui
] = 
bT¿nsquªtBy·ss
;

557 
m_pbIPCMFÏg
[
ui
] = 0;

558 
m_phQP
[
ui
] = 
qp
;

559 
m_ChromaQpAdj
[
ui
] = 0;

560 
m_pbM”geFÏg
[
ui
] = 0;

561 
m_puhM”geIndex
[
ui
] = 0;

563 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

565 
m_puhIÁ¿Dœ
[
ch
][
ui
] = ((ch==0è? 
DC_IDX
 : 0);

568 
m_puhIÁ”Dœ
[
ui
] = 0;

569 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

571 
m_puhCbf
[
comp
][
ui
] = 0;

575 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

577 
m_acCUMvF›ld
[
i
].
	`þ—rMvF›ld
();

580 cÚ¡ 
UIÁ
 
numCÛffY
 = 
uhWidth
*
uhHeight
;

582 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

584 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
comp
);

585 cÚ¡ 
UIÁ
 
numCÛff
 = 
numCÛffY
 >> (
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compÚ’t
è+ g‘Pic()->
	`g‘CompÚ’tSÿËY
(component));

586 
	`mem£t
Ð
m_pcTrCÛff
[
comp
], 0, 
numCÛff
 * Ð
TCÛff
 ) );

587 #ià
ADAPTIVE_QP_SELECTION


588 
	`mem£t
Ð
m_pcA¾CÛff
[
comp
], 0, 
numCÛff
 * Ð
TCÛff
 ) );

590 
	`mem£t
Ð
m_pcIPCMSam¶e
[
comp
], 0, 
numCÛff
 * Ð
P–
) );

592 
	}
}

596 
Void
 
	gTComD©aCU
::
	$š™SubCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tUn™Idx
, UIÁ 
uiD•th
, 
IÁ
 
qp
 )

598 
	`as£¹
Ð
uiP¬tUn™Idx
<4 );

600 
UIÁ
 
uiP¬tOff£t
 = ( 
pcCU
->
	`g‘TÙ®NumP¬t
()>>2 )*
uiP¬tUn™Idx
;

602 
m_pcPic
 = 
pcCU
->
	`g‘Pic
();

603 
m_pcSliû
 = 
pcCU
->
	`g‘Sliû
();

604 
m_ùuRsAddr
 = 
pcCU
->
	`g‘CtuRsAddr
();

605 
m_absZIdxInCtu
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
uiP¬tOff£t
;

607 cÚ¡ 
UCh¬
 
uhWidth
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
(è>> 
uiD•th
;

608 cÚ¡ 
UCh¬
 
uhHeight
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
(è>> 
uiD•th
;

610 
m_uiCUP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ ( 
uhWidth
 )*Ð
uiP¬tUn™Idx
 & 1 );

611 
m_uiCUP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ ( 
uhHeight
)*Ð
uiP¬tUn™Idx
 >> 1 );

613 
m_dTÙ®Co¡
 = 
MAX_DOUBLE
;

614 
m_uiTÙ®Di¡ÜtiÚ
 = 0;

615 
m_uiTÙ®B™s
 = 0;

616 
m_uiTÙ®Bšs
 = 0;

617 
m_uiNumP¬t™iÚ
 = 
pcCU
->
	`g‘TÙ®NumP¬t
() >> 2;

619 
IÁ
 
iSizeInUch¬
 = Ð
UCh¬
 ) * 
m_uiNumP¬t™iÚ
;

620 
IÁ
 
iSizeInBoÞ
 = Ð
BoÞ
 ) * 
m_uiNumP¬t™iÚ
;

621 
IÁ
 
sizeInCh¬
 = Ð
SCh¬
 ) * 
m_uiNumP¬t™iÚ
;

623 
	`mem£t
Ð
m_phQP
, 
qp
, 
sizeInCh¬
 );

624 
	`mem£t
Ð
m_pbM”geFÏg
, 0, 
iSizeInBoÞ
 );

625 
	`mem£t
Ð
m_puhM”geIndex
, 0, 
iSizeInUch¬
 );

626 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

628 
	`mem£t
Ð
m_puhIÁ¿Dœ
[
ch
], ((ch==0è? 
DC_IDX
 : 0), 
iSizeInUch¬
 );

631 
	`mem£t
Ð
m_puhIÁ”Dœ
, 0, 
iSizeInUch¬
 );

632 
	`mem£t
Ð
m_puhTrIdx
, 0, 
iSizeInUch¬
 );

634 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

636 
	`mem£t
Ð
m_üossCompÚ’tP»diùiÚAÍha
[
comp
], 0, 
iSizeInUch¬
 );

637 
	`mem£t
Ð
m_puhT¿nsfÜmSk
[
comp
], 0, 
iSizeInUch¬
 );

638 
	`mem£t
Ð
m_puhCbf
[
comp
], 0, 
iSizeInUch¬
 );

639 
	`mem£t
Ð
m_ex¶ic™RdpcmMode
[
comp
], 
NUMBER_OF_RDPCM_MODES
, 
iSizeInUch¬
 );

642 
	`mem£t
Ð
m_puhD•th
, 
uiD•th
, 
iSizeInUch¬
 );

643 
	`mem£t
Ð
m_puhWidth
, 
uhWidth
, 
iSizeInUch¬
 );

644 
	`mem£t
Ð
m_puhHeight
, 
uhHeight
, 
iSizeInUch¬
 );

645 
	`mem£t
Ð
m_pbIPCMFÏg
, 0, 
iSizeInBoÞ
 );

646 
UIÁ
 
ui
 = 0; u˜< 
m_uiNumP¬t™iÚ
; ui++)

648 
m_skFÏg
[
ui
] = 
çl£
;

649 
m_³P¬tSize
[
ui
] = 
NUMBER_OF_PART_SIZES
;

650 
m_³P»dMode
[
ui
] = 
NUMBER_OF_PREDICTION_MODES
;

651 
m_CUT¿nsquªtBy·ss
[
ui
] = 
çl£
;

652 
m_ChromaQpAdj
[
ui
] = 0;

654 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

656 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

657 
m_­iMVPIdx
[
½l
][
ui
] = -1;

658 
m_­iMVPNum
[
½l
][
ui
] = -1;

662 cÚ¡ 
UIÁ
 
numCÛffY
 = 
uhWidth
*
uhHeight
;

663 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

665 cÚ¡ 
UIÁ
 
compÚ’tShiá
 = 
m_pcPic
->
	`g‘CompÚ’tSÿËX
(
	`CompÚ’tID
(
ch
)è+ m_pcPic->
	`g‘CompÚ’tSÿËY
(ComponentID(ch));

666 
	`mem£t
Ð
m_pcTrCÛff
[
ch
], 0, (
TCÛff
)*(
numCÛffY
>>
compÚ’tShiá
) );

667 #ià
ADAPTIVE_QP_SELECTION


668 
	`mem£t
Ð
m_pcA¾CÛff
[
ch
], 0, (
TCÛff
)*(
numCÛffY
>>
compÚ’tShiá
) );

670 
	`mem£t
Ð
m_pcIPCMSam¶e
[
ch
], 0, (
P–
)* (
numCÛffY
>>
compÚ’tShiá
) );

673 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

675 
m_acCUMvF›ld
[
i
].
	`þ—rMvF›ld
();

678 
m_pCtuLeá
 = 
pcCU
->
	`g‘CtuLeá
();

679 
m_pCtuAbove
 = 
pcCU
->
	`g‘CtuAbove
();

680 
m_pCtuAboveLeá
 = 
pcCU
->
	`g‘CtuAboveLeá
();

681 
m_pCtuAboveRight
 = 
pcCU
->
	`g‘CtuAboveRight
();

682 
	}
}

684 
Void
 
	gTComD©aCU
::
	$£tOutsideCUP¬t
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

686 cÚ¡ 
UIÁ
 
uiNumP¬t™iÚ
 = 
m_uiNumP¬t™iÚ
 >> (
uiD•th
 << 1);

687 cÚ¡ 
UIÁ
 
uiSizeInUch¬
 = Ð
UCh¬
 ) * 
uiNumP¬t™iÚ
;

688 cÚ¡ 
TComSPS
 &
¥s
 = *(
	`g‘Sliû
()->
	`g‘SPS
());

689 cÚ¡ 
UCh¬
 
uhWidth
 = 
¥s
.
	`g‘MaxCUWidth
(è>> 
uiD•th
;

690 cÚ¡ 
UCh¬
 
uhHeight
 = 
¥s
.
	`g‘MaxCUHeight
(è>> 
uiD•th
;

691 
	`mem£t
Ð
m_puhD•th
 + 
uiAbsP¬tIdx
, 
uiD•th
, 
uiSizeInUch¬
 );

692 
	`mem£t
Ð
m_puhWidth
 + 
uiAbsP¬tIdx
, 
uhWidth
, 
uiSizeInUch¬
 );

693 
	`mem£t
Ð
m_puhHeight
 + 
uiAbsP¬tIdx
, 
uhHeight
, 
uiSizeInUch¬
 );

694 
	}
}

700 
Void
 
	gTComD©aCU
::
	$cÝySubCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

702 
UIÁ
 
uiP¬t
 = 
uiAbsP¬tIdx
;

704 
m_pcPic
 = 
pcCU
->
	`g‘Pic
();

705 
m_pcSliû
 = 
pcCU
->
	`g‘Sliû
();

706 
m_ùuRsAddr
 = 
pcCU
->
	`g‘CtuRsAddr
();

707 
m_absZIdxInCtu
 = 
uiAbsP¬tIdx
;

709 
m_uiCUP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

710 
m_uiCUP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

712 
m_skFÏg
=
pcCU
->
	`g‘SkFÏg
(è+ 
uiP¬t
;

714 
m_phQP
=
pcCU
->
	`g‘QP
(è+ 
uiP¬t
;

715 
m_ChromaQpAdj
 = 
pcCU
->
	`g‘ChromaQpAdj
(è+ 
uiP¬t
;

716 
m_³P¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
(è+ 
uiP¬t
;

717 
m_³P»dMode
=
pcCU
->
	`g‘P»diùiÚMode
(è+ 
uiP¬t
;

718 
m_CUT¿nsquªtBy·ss
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
()+
uiP¬t
;

720 
m_pbM”geFÏg
 = 
pcCU
->
	`g‘M”geFÏg
(è+ 
uiP¬t
;

721 
m_puhM”geIndex
 = 
pcCU
->
	`g‘M”geIndex
(è+ 
uiP¬t
;

723 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

725 
m_puhIÁ¿Dœ
[
ch
] = 
pcCU
->
	`g‘IÁ¿Dœ
(
	`ChªÃlTy³
(ch)è+ 
uiP¬t
;

728 
m_puhIÁ”Dœ
 = 
pcCU
->
	`g‘IÁ”Dœ
(è+ 
uiP¬t
;

729 
m_puhTrIdx
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
(è+ 
uiP¬t
;

731 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

733 
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] = 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
	`CompÚ’tID
(comp)è+ 
uiP¬t
;

734 
m_puhT¿nsfÜmSk
[
comp
] = 
pcCU
->
	`g‘T¿nsfÜmSk
(
	`CompÚ’tID
(comp)è+ 
uiP¬t
;

735 
m_puhCbf
[
comp
] = 
pcCU
->
	`g‘Cbf
(
	`CompÚ’tID
(comp)è+ 
uiP¬t
;

736 
m_ex¶ic™RdpcmMode
[
comp
] = 
pcCU
->
	`g‘Ex¶ic™RdpcmMode
(
	`CompÚ’tID
(comp)è+ 
uiP¬t
;

739 
m_puhD•th
=
pcCU
->
	`g‘D•th
(è+ 
uiP¬t
;

740 
m_puhWidth
=
pcCU
->
	`g‘Width
(è+ 
uiP¬t
;

741 
m_puhHeight
=
pcCU
->
	`g‘Height
(è+ 
uiP¬t
;

743 
m_pbIPCMFÏg
 = 
pcCU
->
	`g‘IPCMFÏg
(è+ 
uiP¬t
;

745 
m_pCtuAboveLeá
 = 
pcCU
->
	`g‘CtuAboveLeá
();

746 
m_pCtuAboveRight
 = 
pcCU
->
	`g‘CtuAboveRight
();

747 
m_pCtuAbove
 = 
pcCU
->
	`g‘CtuAbove
();

748 
m_pCtuLeá
 = 
pcCU
->
	`g‘CtuLeá
();

750 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

752 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

753 
m_­iMVPIdx
[
½l
]=
pcCU
->
	`g‘MVPIdx
Ô¶è+ 
uiP¬t
;

754 
m_­iMVPNum
[
½l
]=
pcCU
->
	`g‘MVPNum
Ô¶è+ 
uiP¬t
;

757 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

759 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

760 
m_acCUMvF›ld
[
½l
].
	`lškToW™hOff£t
Ð
pcCU
->
	`g‘CUMvF›ld
Ô¶), 
uiP¬t
 );

763 
UIÁ
 
uiMaxCuWidth
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
();

764 
UIÁ
 
uiMaxCuHeight
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
();

766 
UIÁ
 
uiCoffOff£t
 = 
uiMaxCuWidth
*
uiMaxCuHeight
*
uiAbsP¬tIdx
/
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
();

768 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

770 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
ch
);

771 cÚ¡ 
UIÁ
 
compÚ’tShiá
 = 
m_pcPic
->
	`g‘CompÚ’tSÿËX
(
compÚ’t
è+ m_pcPic->
	`g‘CompÚ’tSÿËY
(component);

772 cÚ¡ 
UIÁ
 
off£t
 = 
uiCoffOff£t
 >> 
compÚ’tShiá
;

773 
m_pcTrCÛff
[
ch
] = 
pcCU
->
	`g‘CÛff
(
compÚ’t
è+ 
off£t
;

774 #ià
ADAPTIVE_QP_SELECTION


775 
m_pcA¾CÛff
[
ch
] = 
pcCU
->
	`g‘A¾CÛff
(
compÚ’t
è+ 
off£t
;

777 
m_pcIPCMSam¶e
[
ch
] = 
pcCU
->
	`g‘PCMSam¶e
(
compÚ’t
è+ 
off£t
;

779 
	}
}

782 
Void
 
	gTComD©aCU
::
	$cÝyIÁ”P»dInfoFrom
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
 )

784 
m_pcPic
 = 
pcCU
->
	`g‘Pic
();

785 
m_pcSliû
 = 
pcCU
->
	`g‘Sliû
();

786 
m_ùuRsAddr
 = 
pcCU
->
	`g‘CtuRsAddr
();

787 
m_absZIdxInCtu
 = 
uiAbsP¬tIdx
;

789 
IÁ
 
iRa¡P¬tIdx
 = 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
];

790 
m_uiCUP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
m_pcPic
->
	`g‘MšCUWidth
 ()*Ð
iRa¡P¬tIdx
 % m_pcPic->
	`g‘NumP¬tInCtuWidth
() );

791 
m_uiCUP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
m_pcPic
->
	`g‘MšCUHeight
()*Ð
iRa¡P¬tIdx
 / m_pcPic->
	`g‘NumP¬tInCtuWidth
() );

793 
m_pCtuAboveLeá
 = 
pcCU
->
	`g‘CtuAboveLeá
();

794 
m_pCtuAboveRight
 = 
pcCU
->
	`g‘CtuAboveRight
();

795 
m_pCtuAbove
 = 
pcCU
->
	`g‘CtuAbove
();

796 
m_pCtuLeá
 = 
pcCU
->
	`g‘CtuLeá
();

798 
m_skFÏg
 = 
pcCU
->
	`g‘SkFÏg
 (è+ 
uiAbsP¬tIdx
;

800 
m_³P¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
 (è+ 
uiAbsP¬tIdx
;

801 
m_³P»dMode
 = 
pcCU
->
	`g‘P»diùiÚMode
(è+ 
uiAbsP¬tIdx
;

802 
m_ChromaQpAdj
 = 
pcCU
->
	`g‘ChromaQpAdj
(è+ 
uiAbsP¬tIdx
;

803 
m_CUT¿nsquªtBy·ss
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(è+ 
uiAbsP¬tIdx
;

804 
m_puhIÁ”Dœ
 = 
pcCU
->
	`g‘IÁ”Dœ
 (è+ 
uiAbsP¬tIdx
;

806 
m_puhD•th
 = 
pcCU
->
	`g‘D•th
 (è+ 
uiAbsP¬tIdx
;

807 
m_puhWidth
 = 
pcCU
->
	`g‘Width
 (è+ 
uiAbsP¬tIdx
;

808 
m_puhHeight
 = 
pcCU
->
	`g‘Height
(è+ 
uiAbsP¬tIdx
;

810 
m_pbM”geFÏg
 = 
pcCU
->
	`g‘M”geFÏg
(è+ 
uiAbsP¬tIdx
;

811 
m_puhM”geIndex
 = 
pcCU
->
	`g‘M”geIndex
(è+ 
uiAbsP¬tIdx
;

813 
m_­iMVPIdx
[
eRefPicLi¡
] = 
pcCU
->
	`g‘MVPIdx
ÓRefPicLi¡è+ 
uiAbsP¬tIdx
;

814 
m_­iMVPNum
[
eRefPicLi¡
] = 
pcCU
->
	`g‘MVPNum
ÓRefPicLi¡è+ 
uiAbsP¬tIdx
;

816 
m_acCUMvF›ld
[ 
eRefPicLi¡
 ].
	`lškToW™hOff£t
Ð
pcCU
->
	`g‘CUMvF›ld
ÓRefPicLi¡), 
uiAbsP¬tIdx
 );

817 
	}
}

821 
Void
 
	gTComD©aCU
::
	$cÝyP¬tFrom
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tUn™Idx
, UIÁ 
uiD•th
 )

823 
	`as£¹
Ð
uiP¬tUn™Idx
<4 );

825 
m_dTÙ®Co¡
 +ð
pcCU
->
	`g‘TÙ®Co¡
();

826 
m_uiTÙ®Di¡ÜtiÚ
 +ð
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
();

827 
m_uiTÙ®B™s
 +ð
pcCU
->
	`g‘TÙ®B™s
();

829 
UIÁ
 
uiOff£t
 = 
pcCU
->
	`g‘TÙ®NumP¬t
()*
uiP¬tUn™Idx
;

830 cÚ¡ 
UIÁ
 
numV®idComp
=
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

831 cÚ¡ 
UIÁ
 
numV®idChª
=
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()==
CHROMA_400
 ? 1:2;

833 
UIÁ
 
uiNumP¬t™iÚ
 = 
pcCU
->
	`g‘TÙ®NumP¬t
();

834 
IÁ
 
iSizeInUch¬
 = Ð
UCh¬
 ) * 
uiNumP¬t™iÚ
;

835 
IÁ
 
iSizeInBoÞ
 = Ð
BoÞ
 ) * 
uiNumP¬t™iÚ
;

837 
IÁ
 
sizeInCh¬
 = Ð
SCh¬
 ) * 
uiNumP¬t™iÚ
;

838 
	`memýy
Ð
m_skFÏg
 + 
uiOff£t
, 
pcCU
->
	`g‘SkFÏg
(), Ð*m_skFÏg ) * 
uiNumP¬t™iÚ
 );

839 
	`memýy
Ð
m_phQP
 + 
uiOff£t
, 
pcCU
->
	`g‘QP
(), 
sizeInCh¬
 );

840 
	`memýy
Ð
m_³P¬tSize
 + 
uiOff£t
, 
pcCU
->
	`g‘P¬t™iÚSize
(), Ð*m_³P¬tSizè* 
uiNumP¬t™iÚ
 );

841 
	`memýy
Ð
m_³P»dMode
 + 
uiOff£t
, 
pcCU
->
	`g‘P»diùiÚMode
(), Ð*m_³P»dModè* 
uiNumP¬t™iÚ
 );

842 
	`memýy
Ð
m_ChromaQpAdj
 + 
uiOff£t
, 
pcCU
->
	`g‘ChromaQpAdj
(), Ð*m_ChromaQpAdj ) * 
uiNumP¬t™iÚ
 );

843 
	`memýy
Ð
m_CUT¿nsquªtBy·ss
 + 
uiOff£t
, 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(), Ð*m_CUT¿nsquªtBy·s è* 
uiNumP¬t™iÚ
 );

844 
	`memýy
Ð
m_pbM”geFÏg
 + 
uiOff£t
, 
pcCU
->
	`g‘M”geFÏg
(), 
iSizeInBoÞ
 );

845 
	`memýy
Ð
m_puhM”geIndex
 + 
uiOff£t
, 
pcCU
->
	`g‘M”geIndex
(), 
iSizeInUch¬
 );

847 
UIÁ
 
ch
=0; ch<
numV®idChª
; ch++)

849 
	`memýy
Ð
m_puhIÁ¿Dœ
[
ch
] + 
uiOff£t
, 
pcCU
->
	`g‘IÁ¿Dœ
(
	`ChªÃlTy³
(ch)), 
iSizeInUch¬
 );

852 
	`memýy
Ð
m_puhIÁ”Dœ
 + 
uiOff£t
, 
pcCU
->
	`g‘IÁ”Dœ
(), 
iSizeInUch¬
 );

853 
	`memýy
Ð
m_puhTrIdx
 + 
uiOff£t
, 
pcCU
->
	`g‘T¿nsfÜmIdx
(), 
iSizeInUch¬
 );

855 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

857 
	`memýy
Ð
m_üossCompÚ’tP»diùiÚAÍha
[
comp
] + 
uiOff£t
, 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
	`CompÚ’tID
(comp)), 
iSizeInUch¬
 );

858 
	`memýy
Ð
m_puhT¿nsfÜmSk
[
comp
] + 
uiOff£t
, 
pcCU
->
	`g‘T¿nsfÜmSk
(
	`CompÚ’tID
(comp)è, 
iSizeInUch¬
 );

859 
	`memýy
Ð
m_puhCbf
[
comp
] + 
uiOff£t
, 
pcCU
->
	`g‘Cbf
(
	`CompÚ’tID
(comp)è, 
iSizeInUch¬
 );

860 
	`memýy
Ð
m_ex¶ic™RdpcmMode
[
comp
] + 
uiOff£t
, 
pcCU
->
	`g‘Ex¶ic™RdpcmMode
(
	`CompÚ’tID
(comp)è, 
iSizeInUch¬
 );

863 
	`memýy
Ð
m_puhD•th
 + 
uiOff£t
, 
pcCU
->
	`g‘D•th
(), 
iSizeInUch¬
 );

864 
	`memýy
Ð
m_puhWidth
 + 
uiOff£t
, 
pcCU
->
	`g‘Width
(), 
iSizeInUch¬
 );

865 
	`memýy
Ð
m_puhHeight
 + 
uiOff£t
, 
pcCU
->
	`g‘Height
(), 
iSizeInUch¬
 );

867 
	`memýy
Ð
m_pbIPCMFÏg
 + 
uiOff£t
, 
pcCU
->
	`g‘IPCMFÏg
(), 
iSizeInBoÞ
 );

869 
m_pCtuAboveLeá
 = 
pcCU
->
	`g‘CtuAboveLeá
();

870 
m_pCtuAboveRight
 = 
pcCU
->
	`g‘CtuAboveRight
();

871 
m_pCtuAbove
 = 
pcCU
->
	`g‘CtuAbove
();

872 
m_pCtuLeá
 = 
pcCU
->
	`g‘CtuLeá
();

874 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

876 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

877 
	`memýy
Ð
m_­iMVPIdx
[
½l
] + 
uiOff£t
, 
pcCU
->
	`g‘MVPIdx
Ô¶), 
iSizeInUch¬
 );

878 
	`memýy
Ð
m_­iMVPNum
[
½l
] + 
uiOff£t
, 
pcCU
->
	`g‘MVPNum
Ô¶), 
iSizeInUch¬
 );

881 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

883 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

884 
m_acCUMvF›ld
[
½l
].
	`cÝyFrom
Ð
pcCU
->
	`g‘CUMvF›ld
Ð½È),…cCU->
	`g‘TÙ®NumP¬t
(), 
uiOff£t
 );

887 cÚ¡ 
UIÁ
 
numCÛffY
 = (
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()*pcCU->g‘Sliû()->g‘SPS()->
	`g‘MaxCUHeight
()è>> (
uiD•th
<<1);

888 cÚ¡ 
UIÁ
 
off£tY
 = 
uiP¬tUn™Idx
*
numCÛffY
;

889 
UIÁ
 
ch
=0; ch<
numV®idComp
; ch++)

891 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
ch
);

892 cÚ¡ 
UIÁ
 
compÚ’tShiá
 = 
m_pcPic
->
	`g‘CompÚ’tSÿËX
(
compÚ’t
è+ m_pcPic->
	`g‘CompÚ’tSÿËY
(component);

893 cÚ¡ 
UIÁ
 
off£t
 = 
off£tY
>>
compÚ’tShiá
;

894 
	`memýy
Ð
m_pcTrCÛff
 [
ch
] + 
off£t
, 
pcCU
->
	`g‘CÛff
(
compÚ’t
), (
TCÛff
)*(
numCÛffY
>>
compÚ’tShiá
) );

895 #ià
ADAPTIVE_QP_SELECTION


896 
	`memýy
Ð
m_pcA¾CÛff
[
ch
] + 
off£t
, 
pcCU
->
	`g‘A¾CÛff
(
compÚ’t
), (
TCÛff
)*(
numCÛffY
>>
compÚ’tShiá
) );

898 
	`memýy
Ð
m_pcIPCMSam¶e
[
ch
] + 
off£t
, 
pcCU
->
	`g‘PCMSam¶e
(
compÚ’t
), (
P–
)*(
numCÛffY
>>
compÚ’tShiá
) );

901 
m_uiTÙ®Bšs
 +ð
pcCU
->
	`g‘TÙ®Bšs
();

902 
	}
}

906 
Void
 
	gTComD©aCU
::
	$cÝyToPic
Ð
UCh¬
 
uhD•th
 )

908 
TComD©aCU
* 
pCtu
 = 
m_pcPic
->
	`g‘Ctu
Ð
m_ùuRsAddr
 );

909 cÚ¡ 
UIÁ
 
numV®idComp
=
pCtu
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

910 cÚ¡ 
UIÁ
 
numV®idChª
=
pCtu
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()==
CHROMA_400
 ? 1:2;

912 
pCtu
->
	`g‘TÙ®Co¡
(èð
m_dTÙ®Co¡
;

913 
pCtu
->
	`g‘TÙ®Di¡ÜtiÚ
(èð
m_uiTÙ®Di¡ÜtiÚ
;

914 
pCtu
->
	`g‘TÙ®B™s
(èð
m_uiTÙ®B™s
;

916 
IÁ
 
iSizeInUch¬
 = Ð
UCh¬
 ) * 
m_uiNumP¬t™iÚ
;

917 
IÁ
 
iSizeInBoÞ
 = Ð
BoÞ
 ) * 
m_uiNumP¬t™iÚ
;

918 
IÁ
 
sizeInCh¬
 = Ð
SCh¬
 ) * 
m_uiNumP¬t™iÚ
;

920 
	`memýy
Ð
pCtu
->
	`g‘SkFÏg
(è+ 
m_absZIdxInCtu
, 
m_skFÏg
, Ð*m_skFÏg ) * 
m_uiNumP¬t™iÚ
 );

922 
	`memýy
Ð
pCtu
->
	`g‘QP
(è+ 
m_absZIdxInCtu
, 
m_phQP
, 
sizeInCh¬
 );

924 
	`memýy
Ð
pCtu
->
	`g‘P¬t™iÚSize
(è+ 
m_absZIdxInCtu
, 
m_³P¬tSize
, Ð*m_³P¬tSizè* 
m_uiNumP¬t™iÚ
 );

925 
	`memýy
Ð
pCtu
->
	`g‘P»diùiÚMode
(è+ 
m_absZIdxInCtu
, 
m_³P»dMode
, Ð*m_³P»dModè* 
m_uiNumP¬t™iÚ
 );

926 
	`memýy
Ð
pCtu
->
	`g‘ChromaQpAdj
(è+ 
m_absZIdxInCtu
, 
m_ChromaQpAdj
, Ð*m_ChromaQpAdj ) * 
m_uiNumP¬t™iÚ
 );

927 
	`memýy
Ð
pCtu
->
	`g‘CUT¿nsquªtBy·ss
()+ 
m_absZIdxInCtu
, 
m_CUT¿nsquªtBy·ss
, Ð*m_CUT¿nsquªtBy·s è* 
m_uiNumP¬t™iÚ
 );

928 
	`memýy
Ð
pCtu
->
	`g‘M”geFÏg
(è+ 
m_absZIdxInCtu
, 
m_pbM”geFÏg
, 
iSizeInBoÞ
 );

929 
	`memýy
Ð
pCtu
->
	`g‘M”geIndex
(è+ 
m_absZIdxInCtu
, 
m_puhM”geIndex
, 
iSizeInUch¬
 );

930 
UIÁ
 
ch
=0; ch<
numV®idChª
; ch++)

932 
	`memýy
Ð
pCtu
->
	`g‘IÁ¿Dœ
(
	`ChªÃlTy³
(
ch
)è+ 
m_absZIdxInCtu
, 
m_puhIÁ¿Dœ
[ch], 
iSizeInUch¬
);

935 
	`memýy
Ð
pCtu
->
	`g‘IÁ”Dœ
(è+ 
m_absZIdxInCtu
, 
m_puhIÁ”Dœ
, 
iSizeInUch¬
 );

936 
	`memýy
Ð
pCtu
->
	`g‘T¿nsfÜmIdx
(è+ 
m_absZIdxInCtu
, 
m_puhTrIdx
, 
iSizeInUch¬
 );

938 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

940 
	`memýy
Ð
pCtu
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
	`CompÚ’tID
(
comp
)è+ 
m_absZIdxInCtu
, 
m_üossCompÚ’tP»diùiÚAÍha
[comp], 
iSizeInUch¬
 );

941 
	`memýy
Ð
pCtu
->
	`g‘T¿nsfÜmSk
(
	`CompÚ’tID
(
comp
)è+ 
m_absZIdxInCtu
, 
m_puhT¿nsfÜmSk
[comp], 
iSizeInUch¬
 );

942 
	`memýy
Ð
pCtu
->
	`g‘Cbf
(
	`CompÚ’tID
(
comp
)è+ 
m_absZIdxInCtu
, 
m_puhCbf
[comp], 
iSizeInUch¬
 );

943 
	`memýy
Ð
pCtu
->
	`g‘Ex¶ic™RdpcmMode
(
	`CompÚ’tID
(
comp
)è+ 
m_absZIdxInCtu
, 
m_ex¶ic™RdpcmMode
[comp], 
iSizeInUch¬
 );

946 
	`memýy
Ð
pCtu
->
	`g‘D•th
(è+ 
m_absZIdxInCtu
, 
m_puhD•th
, 
iSizeInUch¬
 );

947 
	`memýy
Ð
pCtu
->
	`g‘Width
(è+ 
m_absZIdxInCtu
, 
m_puhWidth
, 
iSizeInUch¬
 );

948 
	`memýy
Ð
pCtu
->
	`g‘Height
(è+ 
m_absZIdxInCtu
, 
m_puhHeight
, 
iSizeInUch¬
 );

950 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

952 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

953 
	`memýy
Ð
pCtu
->
	`g‘MVPIdx
(
½l
è+ 
m_absZIdxInCtu
, 
m_­iMVPIdx
[½l], 
iSizeInUch¬
 );

954 
	`memýy
Ð
pCtu
->
	`g‘MVPNum
(
½l
è+ 
m_absZIdxInCtu
, 
m_­iMVPNum
[½l], 
iSizeInUch¬
 );

957 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

959 cÚ¡ 
RefPicLi¡
 
½l
=
	`RefPicLi¡
(
i
);

960 
m_acCUMvF›ld
[
½l
].
	`cÝyTo
Ð
pCtu
->
	`g‘CUMvF›ld
Ð½È), 
m_absZIdxInCtu
 );

963 
	`memýy
Ð
pCtu
->
	`g‘IPCMFÏg
(è+ 
m_absZIdxInCtu
, 
m_pbIPCMFÏg
, 
iSizeInBoÞ
 );

965 cÚ¡ 
UIÁ
 
numCÛffY
 = (
pCtu
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()*pCtu->g‘Sliû()->g‘SPS()->
	`g‘MaxCUHeight
())>>(
uhD•th
<<1);

966 cÚ¡ 
UIÁ
 
off£tY
 = 
m_absZIdxInCtu
*
m_pcPic
->
	`g‘MšCUWidth
()*m_pcPic->
	`g‘MšCUHeight
();

967 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

969 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
comp
);

970 cÚ¡ 
UIÁ
 
compÚ’tShiá
 = 
m_pcPic
->
	`g‘CompÚ’tSÿËX
(
compÚ’t
è+ m_pcPic->
	`g‘CompÚ’tSÿËY
(component);

971 
	`memýy
Ð
pCtu
->
	`g‘CÛff
(
compÚ’t
è+ (
off£tY
>>
compÚ’tShiá
), 
m_pcTrCÛff
[compÚ’t], (
TCÛff
)*(
numCÛffY
>>componentShift) );

972 #ià
ADAPTIVE_QP_SELECTION


973 
	`memýy
Ð
pCtu
->
	`g‘A¾CÛff
(
compÚ’t
è+ (
off£tY
>>
compÚ’tShiá
), 
m_pcA¾CÛff
[compÚ’t], (
TCÛff
)*(
numCÛffY
>>componentShift) );

975 
	`memýy
Ð
pCtu
->
	`g‘PCMSam¶e
(
compÚ’t
è+ (
off£tY
>>
compÚ’tShiá
), 
m_pcIPCMSam¶e
[compÚ’t], (
P–
)*(
numCÛffY
>>componentShift) );

978 
pCtu
->
	`g‘TÙ®Bšs
(èð
m_uiTÙ®Bšs
;

979 
	}
}

985 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘PULeá
Ð
UIÁ
& 
uiLP¬tUn™Idx
,

986 
UIÁ
 
uiCu¼P¬tUn™Idx
,

987 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
,

988 
BoÞ
 
bEnfÜûTžeRe¡riùiÚ
 ) const

990 
UIÁ
 
uiAbsP¬tIdx
 = 
g_auiZsÿnToRa¡”
[
uiCu¼P¬tUn™Idx
];

991 
UIÁ
 
uiAbsZÜd”CUIdx
 = 
g_auiZsÿnToRa¡”
[
m_absZIdxInCtu
];

992 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

994 iàÐ!
Ra¡”Add»ss
::
	`isZ”oCÞ
Ð
uiAbsP¬tIdx
, 
numP¬tInCtuWidth
 ) )

996 
uiLP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 - 1 ];

997 iàÐ
Ra¡”Add»ss
::
	`isEqu®CÞ
Ð
uiAbsP¬tIdx
, 
uiAbsZÜd”CUIdx
, 
numP¬tInCtuWidth
 ) )

999  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1003 
uiLP¬tUn™Idx
 -ð
m_absZIdxInCtu
;

1004  
this
;

1008 
uiLP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 + 
numP¬tInCtuWidth
 - 1 ];

1009 iàÐ(
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliû
(
m_pCtuLeá
)è|| (
bEnfÜûTžeRe¡riùiÚ
 && !
	`CUIsFromSameTže
(m_pCtuLeft)) )

1011  
NULL
;

1013  
m_pCtuLeá
;

1014 
	}
}

1017 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘PUAbove
Ð
UIÁ
& 
uiAP¬tUn™Idx
,

1018 
UIÁ
 
uiCu¼P¬tUn™Idx
,

1019 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
,

1020 
BoÞ
 
¶ª¬AtCtuBound¬y
,

1021 
BoÞ
 
bEnfÜûTžeRe¡riùiÚ
 ) const

1023 
UIÁ
 
uiAbsP¬tIdx
 = 
g_auiZsÿnToRa¡”
[
uiCu¼P¬tUn™Idx
];

1024 
UIÁ
 
uiAbsZÜd”CUIdx
 = 
g_auiZsÿnToRa¡”
[
m_absZIdxInCtu
];

1025 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1027 iàÐ!
Ra¡”Add»ss
::
	`isZ”oRow
Ð
uiAbsP¬tIdx
, 
numP¬tInCtuWidth
 ) )

1029 
uiAP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 - 
numP¬tInCtuWidth
 ];

1030 iàÐ
Ra¡”Add»ss
::
	`isEqu®Row
Ð
uiAbsP¬tIdx
, 
uiAbsZÜd”CUIdx
, 
numP¬tInCtuWidth
 ) )

1032  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1036 
uiAP¬tUn™Idx
 -ð
m_absZIdxInCtu
;

1037  
this
;

1041 if(
¶ª¬AtCtuBound¬y
)

1043  
NULL
;

1046 
uiAP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 + 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è- 
numP¬tInCtuWidth
 ];

1048 iàÐ(
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliû
(
m_pCtuAbove
)è|| (
bEnfÜûTžeRe¡riùiÚ
 && !
	`CUIsFromSameTže
(m_pCtuAbove)) )

1050  
NULL
;

1052  
m_pCtuAbove
;

1053 
	}
}

1055 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘PUAboveLeá
Ð
UIÁ
& 
uiALP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
 ) const

1057 
UIÁ
 
uiAbsP¬tIdx
 = 
g_auiZsÿnToRa¡”
[
uiCu¼P¬tUn™Idx
];

1058 
UIÁ
 
uiAbsZÜd”CUIdx
 = 
g_auiZsÿnToRa¡”
[
m_absZIdxInCtu
];

1059 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1061 iàÐ!
Ra¡”Add»ss
::
	`isZ”oCÞ
Ð
uiAbsP¬tIdx
, 
numP¬tInCtuWidth
 ) )

1063 iàÐ!
Ra¡”Add»ss
::
	`isZ”oRow
Ð
uiAbsP¬tIdx
, 
numP¬tInCtuWidth
 ) )

1065 
uiALP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 - 
numP¬tInCtuWidth
 - 1 ];

1066 iàÐ
Ra¡”Add»ss
::
	`isEqu®RowOrCÞ
Ð
uiAbsP¬tIdx
, 
uiAbsZÜd”CUIdx
, 
numP¬tInCtuWidth
 ) )

1068  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1072 
uiALP¬tUn™Idx
 -ð
m_absZIdxInCtu
;

1073  
this
;

1076 
uiALP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 + 
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è- 
numP¬tInCtuWidth
 - 1 ];

1077 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuAbove
) )

1079  
NULL
;

1081  
m_pCtuAbove
;

1084 iàÐ!
Ra¡”Add»ss
::
	`isZ”oRow
Ð
uiAbsP¬tIdx
, 
numP¬tInCtuWidth
 ) )

1086 
uiALP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdx
 - 1 ];

1087 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuLeá
) )

1089  
NULL
;

1091  
m_pCtuLeá
;

1094 
uiALP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
() - 1 ];

1095 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuAboveLeá
) )

1097  
NULL
;

1099  
m_pCtuAboveLeá
;

1100 
	}
}

1102 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘PUB–owLeá
(
UIÁ
& 
uiBLP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, UIÁ 
uiP¬tUn™Off£t
, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
) const

1104 
UIÁ
 
uiAbsP¬tIdxLB
 = 
g_auiZsÿnToRa¡”
[
uiCu¼P¬tUn™Idx
];

1105 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1106 
UIÁ
 
uiAbsZÜd”CUIdxLB
 = 
g_auiZsÿnToRa¡”
[ 
m_absZIdxInCtu
 ] + ((
m_puhHeight
[0] / 
m_pcPic
->
	`g‘MšCUHeight
()è- 1)*
numP¬tInCtuWidth
;

1108 ifÐÐ
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[
uiAbsP¬tIdxLB
] + (m_pcPic->
	`g‘PicSym
()->
	`g‘MšCUHeight
(è* 
uiP¬tUn™Off£t
)è>ð
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicHeightInLumaSam¶es
())

1110 
uiBLP¬tUn™Idx
 = 
MAX_UINT
;

1111  
NULL
;

1114 iàÐ
Ra¡”Add»ss
::
	`ËssThªRow
Ð
uiAbsP¬tIdxLB
, 
m_pcPic
->
	`g‘NumP¬tInCtuHeight
(è- 
uiP¬tUn™Off£t
, 
numP¬tInCtuWidth
 ) )

1116 iàÐ!
Ra¡”Add»ss
::
	`isZ”oCÞ
Ð
uiAbsP¬tIdxLB
, 
numP¬tInCtuWidth
 ) )

1118 iàÐ
uiCu¼P¬tUn™Idx
 > 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxLB
 + 
uiP¬tUn™Off£t
 * 
numP¬tInCtuWidth
 - 1 ] )

1120 
uiBLP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxLB
 + 
uiP¬tUn™Off£t
 * 
numP¬tInCtuWidth
 - 1 ];

1121 iàÐ
Ra¡”Add»ss
::
	`isEqu®RowOrCÞ
Ð
uiAbsP¬tIdxLB
, 
uiAbsZÜd”CUIdxLB
, 
numP¬tInCtuWidth
 ) )

1123  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1127 
uiBLP¬tUn™Idx
 -ð
m_absZIdxInCtu
;

1128  
this
;

1131 
uiBLP¬tUn™Idx
 = 
MAX_UINT
;

1132  
NULL
;

1134 
uiBLP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxLB
 + (1+
uiP¬tUn™Off£t
è* 
numP¬tInCtuWidth
 - 1 ];

1135 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuLeá
) )

1137  
NULL
;

1139  
m_pCtuLeá
;

1142 
uiBLP¬tUn™Idx
 = 
MAX_UINT
;

1143  
NULL
;

1144 
	}
}

1146 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘PUAboveRight
(
UIÁ
& 
uiARP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, UIÁ 
uiP¬tUn™Off£t
, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
) const

1148 
UIÁ
 
uiAbsP¬tIdxRT
 = 
g_auiZsÿnToRa¡”
[
uiCu¼P¬tUn™Idx
];

1149 
UIÁ
 
uiAbsZÜd”CUIdx
 = 
g_auiZsÿnToRa¡”
[ 
m_absZIdxInCtu
 ] + (
m_puhWidth
[0] / 
m_pcPic
->
	`g‘MšCUWidth
()) - 1;

1150 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1152 ifÐÐ
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[
uiAbsP¬tIdxRT
] + (m_pcPic->
	`g‘PicSym
()->
	`g‘MšCUHeight
(è* 
uiP¬tUn™Off£t
)è>ð
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicWidthInLumaSam¶es
() )

1154 
uiARP¬tUn™Idx
 = 
MAX_UINT
;

1155  
NULL
;

1158 iàÐ
Ra¡”Add»ss
::
	`ËssThªCÞ
Ð
uiAbsP¬tIdxRT
, 
numP¬tInCtuWidth
 - 
uiP¬tUn™Off£t
,‚umPartInCtuWidth ) )

1160 iàÐ!
Ra¡”Add»ss
::
	`isZ”oRow
Ð
uiAbsP¬tIdxRT
, 
numP¬tInCtuWidth
 ) )

1162 iàÐ
uiCu¼P¬tUn™Idx
 > 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxRT
 - 
numP¬tInCtuWidth
 + 
uiP¬tUn™Off£t
 ] )

1164 
uiARP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxRT
 - 
numP¬tInCtuWidth
 + 
uiP¬tUn™Off£t
 ];

1165 iàÐ
Ra¡”Add»ss
::
	`isEqu®RowOrCÞ
Ð
uiAbsP¬tIdxRT
, 
uiAbsZÜd”CUIdx
, 
numP¬tInCtuWidth
 ) )

1167  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1171 
uiARP¬tUn™Idx
 -ð
m_absZIdxInCtu
;

1172  
this
;

1175 
uiARP¬tUn™Idx
 = 
MAX_UINT
;

1176  
NULL
;

1179 
uiARP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxRT
 + 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è- 
numP¬tInCtuWidth
 + 
uiP¬tUn™Off£t
 ];

1180 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuAbove
) )

1182  
NULL
;

1184  
m_pCtuAbove
;

1187 iàÐ!
Ra¡”Add»ss
::
	`isZ”oRow
Ð
uiAbsP¬tIdxRT
, 
numP¬tInCtuWidth
 ) )

1189 
uiARP¬tUn™Idx
 = 
MAX_UINT
;

1190  
NULL
;

1193 
uiARP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[ 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è- 
numP¬tInCtuWidth
 + 
uiP¬tUn™Off£t
-1 ];

1194 iàÐ
bEnfÜûSliûRe¡riùiÚ
 && !
	`CUIsFromSameSliûAndTže
(
m_pCtuAboveRight
) )

1196  
NULL
;

1198  
m_pCtuAboveRight
;

1199 
	}
}

1206 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘QpMšCuLeá
Ð
UIÁ
& 
uiLP¬tUn™Idx
, UIÁ 
uiCu¼AbsIdxInCtu
 ) const

1208 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1209 cÚ¡ 
UIÁ
 
maxCUD•th
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTÙ®CUD•th
();

1210 cÚ¡ 
UIÁ
 
maxCuDQPD•th
 = 
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘MaxCuDQPD•th
();

1211 cÚ¡ 
UIÁ
 
doubËD•thDifã»nû
 = ((
maxCUD•th
 - 
maxCuDQPD•th
)<<1);

1212 
UIÁ
 
absZÜd”QpMšCUIdx
 = (
uiCu¼AbsIdxInCtu
>>
doubËD•thDifã»nû
)<<doubleDepthDifference;

1213 
UIÁ
 
absRÜd”QpMšCUIdx
 = 
g_auiZsÿnToRa¡”
[
absZÜd”QpMšCUIdx
];

1216 iàÐ
Ra¡”Add»ss
::
	`isZ”oCÞ
(
absRÜd”QpMšCUIdx
, 
numP¬tInCtuWidth
) )

1218  
NULL
;

1222 
uiLP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[
absRÜd”QpMšCUIdx
 - 1];

1225  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1226 
	}
}

1233 cÚ¡ 
TComD©aCU
* 
	gTComD©aCU
::
	$g‘QpMšCuAbove
Ð
UIÁ
& 
uiAP¬tUn™Idx
, UIÁ 
uiCu¼AbsIdxInCtu
 ) const

1235 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

1236 cÚ¡ 
UIÁ
 
maxCUD•th
 = 
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTÙ®CUD•th
();

1237 cÚ¡ 
UIÁ
 
maxCuDQPD•th
 = 
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘MaxCuDQPD•th
();

1238 cÚ¡ 
UIÁ
 
doubËD•thDifã»nû
 = ((
maxCUD•th
 - 
maxCuDQPD•th
)<<1);

1239 
UIÁ
 
absZÜd”QpMšCUIdx
 = (
uiCu¼AbsIdxInCtu
>>
doubËD•thDifã»nû
)<<doubleDepthDifference;

1240 
UIÁ
 
absRÜd”QpMšCUIdx
 = 
g_auiZsÿnToRa¡”
[
absZÜd”QpMšCUIdx
];

1243 iàÐ
Ra¡”Add»ss
::
	`isZ”oRow
Ð
absRÜd”QpMšCUIdx
, 
numP¬tInCtuWidth
) )

1245  
NULL
;

1249 
uiAP¬tUn™Idx
 = 
g_auiRa¡”ToZsÿn
[
absRÜd”QpMšCUIdx
 - 
numP¬tInCtuWidth
];

1252  
m_pcPic
->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
() );

1253 
	}
}

1261 
SCh¬
 
	gTComD©aCU
::
	$g‘RefQP
Ð
UIÁ
 
uiCu¼AbsIdxInCtu
 ) const

1263 
UIÁ
 
lP¬tIdx
 = 
MAX_UINT
;

1264 
UIÁ
 
aP¬tIdx
 = 
MAX_UINT
;

1265 cÚ¡ 
TComD©aCU
* 
cULeá
 = 
	`g‘QpMšCuLeá
 ( 
lP¬tIdx
, 
m_absZIdxInCtu
 + 
uiCu¼AbsIdxInCtu
 );

1266 cÚ¡ 
TComD©aCU
* 
cUAbove
 = 
	`g‘QpMšCuAbove
Ð
aP¬tIdx
, 
m_absZIdxInCtu
 + 
uiCu¼AbsIdxInCtu
 );

1267  (((
cULeá
? cULeá->
	`g‘QP
Ð
lP¬tIdx
 ): 
	`g‘La¡CodedQP
Ð
uiCu¼AbsIdxInCtu
 )è+ (
cUAbove
? cUAbove->g‘QPÐ
aP¬tIdx
 ): getLastCodedQP( uiCurrAbsIdxInCtu )) + 1) >> 1);

1268 
	}
}

1270 
IÁ
 
	gTComD©aCU
::
	$g‘La¡V®idP¬tIdx
Ð
IÁ
 
iAbsP¬tIdx
 ) const

1272 
IÁ
 
iLa¡V®idP¬tIdx
 = 
iAbsP¬tIdx
-1;

1273  
iLa¡V®idP¬tIdx
 >= 0

1274 && 
	`g‘P»diùiÚMode
Ð
iLa¡V®idP¬tIdx
 ) =ð
NUMBER_OF_PREDICTION_MODES
 )

1276 
UIÁ
 
uiD•th
 = 
	`g‘D•th
Ð
iLa¡V®idP¬tIdx
 );

1277 
iLa¡V®idP¬tIdx
 -ð
m_uiNumP¬t™iÚ
>>(
uiD•th
<<1);

1279  
iLa¡V®idP¬tIdx
;

1280 
	}
}

1282 
SCh¬
 
	gTComD©aCU
::
	$g‘La¡CodedQP
Ð
UIÁ
 
uiAbsP¬tIdx
 ) const

1284 
UIÁ
 
uiQUP¬tIdxMask
 = ~((1<<((
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTÙ®CUD•th
(è- g‘Sliû()->
	`g‘PPS
()->
	`g‘MaxCuDQPD•th
())<<1))-1);

1285 
IÁ
 
iLa¡V®idP¬tIdx
 = 
	`g‘La¡V®idP¬tIdx
Ð
uiAbsP¬tIdx
&
uiQUP¬tIdxMask
 );

1287 iàÐ
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
()è=ð
	`g‘CtuRsAddr
(è&& 
	`IÁ
(
	`g‘ZÜd”IdxInCtu
())+
iLa¡V®idP¬tIdx
<0)

1289  
	`g‘Sliû
()->
	`g‘SliûQp
();

1291 iàÐ
iLa¡V®idP¬tIdx
 >= 0 )

1294  
	`g‘QP
Ð
iLa¡V®idP¬tIdx
 );

1298 iàÐ
	`g‘ZÜd”IdxInCtu
() > 0 )

1301  
	`g‘Pic
()->
	`g‘Ctu
Ð
	`g‘CtuRsAddr
(è)->
	`g‘La¡CodedQP
Ð
	`g‘ZÜd”IdxInCtu
() );

1303 iàÐ
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
(
	`g‘CtuRsAddr
()) > 0

1304 && 
	`CUIsFromSameSliûTžeAndWaveäÚtRow
(
	`g‘Pic
()->
	`g‘Ctu
(g‘Pic()->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(g‘Pic()->g‘PicSym()->
	`g‘CtuRsToTsAddrM­
(
	`g‘CtuRsAddr
())-1))) )

1307  
	`g‘Pic
()->
	`g‘Ctu
Ðg‘Pic()->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(g‘Pic()->g‘PicSym()->
	`g‘CtuRsToTsAddrM­
(
	`g‘CtuRsAddr
())-1è)->
	`g‘La¡CodedQP
Ðg‘Pic()->
	`g‘NumP¬t™iÚsInCtu
() );

1312  
	`g‘Sliû
()->
	`g‘SliûQp
();

1315 
	}
}

1322 
BoÞ
 
	gTComD©aCU
::
	$isLos¦essCoded
(
UIÁ
 
absP¬tIdx
) const

1324  (
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
(è&& 
	`g‘CUT¿nsquªtBy·ss
 (
absP¬tIdx
));

1325 
	}
}

1334 
Void
 
	gTComD©aCU
::
	$g‘AÎowedChromaDœ
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiModeLi¡
[
NUM_CHROMA_MODE
] ) const

1336 
uiModeLi¡
[0] = 
PLANAR_IDX
;

1337 
uiModeLi¡
[1] = 
VER_IDX
;

1338 
uiModeLi¡
[2] = 
HOR_IDX
;

1339 
uiModeLi¡
[3] = 
DC_IDX
;

1340 
uiModeLi¡
[4] = 
DM_CHROMA_IDX
;

1341 
	`as£¹
(4<
NUM_CHROMA_MODE
);

1343 
UIÁ
 
uiLumaMode
 = 
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_LUMA
, 
uiAbsP¬tIdx
 );

1345  
IÁ
 
i
 = 0; i < 
NUM_CHROMA_MODE
 - 1; i++ )

1347 ifÐ
uiLumaMode
 =ð
uiModeLi¡
[
i
] )

1349 
uiModeLi¡
[
i
] = 34;

1353 
	}
}

1362 
Void
 
	gTComD©aCU
::
	$g‘IÁ¿DœP»diùÜ
Ð
UIÁ
 
uiAbsP¬tIdx
, 
IÁ
 
uiIÁ¿DœP»d
[
NUM_MOST_PROBABLE_MODES
], cÚ¡ 
CompÚ’tID
 
compID
, IÁ* 
piMode
 ) const

1364 
UIÁ
 
LeáP¬tIdx
 = 
MAX_UINT
;

1365 
UIÁ
 
AboveP¬tIdx
 = 
MAX_UINT
;

1366 
IÁ
 
iLeáIÁ¿Dœ
, 
iAboveIÁ¿Dœ
;

1367 cÚ¡ 
TComSPS
 *
¥s
=
	`g‘Sliû
()->
	`g‘SPS
();

1368 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
->
	`g‘MaxTÙ®CUD•th
(è- sps->
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

1370 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

1371 cÚ¡ 
ChromaFÜm©
 
chFÜm
 = 
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

1373 cÚ¡ 
TComD©aCU
 *
pcCULeá
 = 
	`g‘PULeá
Ð
LeáP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 );

1375 ià(
	`isChroma
(
compID
))

1377 
LeáP¬tIdx
 = 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(LeáP¬tIdx, 
chFÜm
, 
·¹sP”MšCU
);

1379 
iLeáIÁ¿Dœ
 = 
pcCULeá
 ? (…cCULeá->
	`isIÁ¿
Ð
LeáP¬tIdx
 ) ?…cCULeá->
	`g‘IÁ¿Dœ
Ð
chTy³
, LeáP¬tIdx ) : 
DC_IDX
 ) : DC_IDX;

1382 cÚ¡ 
TComD©aCU
 *
pcCUAbove
 = 
	`g‘PUAbove
Ð
AboveP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
, 
Œue
,rue );

1384 ià(
	`isChroma
(
compID
))

1386 
AboveP¬tIdx
 = 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(AboveP¬tIdx, 
chFÜm
, 
·¹sP”MšCU
);

1388 
iAboveIÁ¿Dœ
 = 
pcCUAbove
 ? (…cCUAbove->
	`isIÁ¿
Ð
AboveP¬tIdx
 ) ?…cCUAbove->
	`g‘IÁ¿Dœ
Ð
chTy³
, AboveP¬tIdx ) : 
DC_IDX
 ) : DC_IDX;

1390 ià(
	`isChroma
(
chTy³
))

1392 ià(
iLeáIÁ¿Dœ
 =ð
DM_CHROMA_IDX
)

1394 
iLeáIÁ¿Dœ
 = 
pcCULeá
-> 
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_LUMA
, 
LeáP¬tIdx
 );

1396 ià(
iAboveIÁ¿Dœ
 =ð
DM_CHROMA_IDX
)

1398 
iAboveIÁ¿Dœ
 = 
pcCUAbove
->
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_LUMA
, 
AboveP¬tIdx
 );

1402 
	`as£¹
 (2<
NUM_MOST_PROBABLE_MODES
);

1403 if(
iLeáIÁ¿Dœ
 =ð
iAboveIÁ¿Dœ
)

1405 ifÐ
piMode
 )

1407 *
piMode
 = 1;

1410 ià(
iLeáIÁ¿Dœ
 > 1)

1412 
uiIÁ¿DœP»d
[0] = 
iLeáIÁ¿Dœ
;

1413 
uiIÁ¿DœP»d
[1] = ((
iLeáIÁ¿Dœ
 + 29) % 32) + 2;

1414 
uiIÁ¿DœP»d
[2] = ((
iLeáIÁ¿Dœ
 - 1 ) % 32) + 2;

1418 
uiIÁ¿DœP»d
[0] = 
PLANAR_IDX
;

1419 
uiIÁ¿DœP»d
[1] = 
DC_IDX
;

1420 
uiIÁ¿DœP»d
[2] = 
VER_IDX
;

1425 ifÐ
piMode
 )

1427 *
piMode
 = 2;

1429 
uiIÁ¿DœP»d
[0] = 
iLeáIÁ¿Dœ
;

1430 
uiIÁ¿DœP»d
[1] = 
iAboveIÁ¿Dœ
;

1432 ià(
iLeáIÁ¿Dœ
 && 
iAboveIÁ¿Dœ
 )

1434 
uiIÁ¿DœP»d
[2] = 
PLANAR_IDX
;

1438 
uiIÁ¿DœP»d
[2] = (
iLeáIÁ¿Dœ
+
iAboveIÁ¿Dœ
)<2? 
VER_IDX
 : 
DC_IDX
;

1441 
UIÁ
 
i
=0; i<
NUM_MOST_PROBABLE_MODES
; i++)

1443 
	`as£¹
(
uiIÁ¿DœP»d
[
i
] < 35);

1445 
	}
}

1447 
UIÁ
 
	gTComD©aCU
::
	$g‘CtxS¶™FÏg
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) const

1449 cÚ¡ 
TComD©aCU
* 
pcTempCU
;

1450 
UIÁ
 
uiTempP¬tIdx
;

1451 
UIÁ
 
uiCtx
;

1453 
pcTempCU
 = 
	`g‘PULeá
Ð
uiTempP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 );

1454 
uiCtx
 = ( 
pcTempCU
 ) ? ( (…cTempCU->
	`g‘D•th
Ð
uiTempP¬tIdx
 ) > 
uiD•th
 ) ? 1 : 0 ) : 0;

1457 
pcTempCU
 = 
	`g‘PUAbove
Ð
uiTempP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 );

1458 
uiCtx
 +ðÐ
pcTempCU
 ) ? ( (…cTempCU->
	`g‘D•th
Ð
uiTempP¬tIdx
 ) > 
uiD•th
 ) ? 1 : 0 ) : 0;

1460  
uiCtx
;

1461 
	}
}

1463 
UIÁ
 
	gTComD©aCU
::
	$g‘CtxQtCbf
Ð
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 ) const

1465 cÚ¡ 
UIÁ
 
ŒªsfÜmD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1467 ià(
	`isChroma
(
chTy³
))

1469  
ŒªsfÜmD•th
;

1473 cÚ¡ 
UIÁ
 
uiCtx
 = ( 
ŒªsfÜmD•th
 == 0 ? 1 : 0 );

1474  
uiCtx
;

1476 
	}
}

1478 
UIÁ
 
	gTComD©aCU
::
	$g‘QuadŒ“TULog2MšSizeInCU
Ð
UIÁ
 
absP¬tIdx
 ) const

1480 
UIÁ
 
log2CbSize
 = 
g_aucCÚv”tToB™
[
	`g‘Width
Ð
absP¬tIdx
 )] + 2;

1481 
P¬tSize
 
·¹Size
 = 
	`g‘P¬t™iÚSize
Ð
absP¬tIdx
 );

1482 
UIÁ
 
quadŒ“TUMaxD•th
 = 
	`isIÁ¿
Ð
absP¬tIdx
 ) ? 
m_pcSliû
->
	`g‘SPS
()->
	`g‘QuadŒ“TUMaxD•thIÁ¿
(è: m_pcSliû->g‘SPS()->
	`g‘QuadŒ“TUMaxD•thIÁ”
();

1483 
IÁ
 
šŒaS¶™FÏg
 = ( 
	`isIÁ¿
Ð
absP¬tIdx
 ) && 
·¹Size
 =ð
SIZE_NxN
 ) ? 1 : 0;

1484 
IÁ
 
š‹rS¶™FÏg
 = ((
quadŒ“TUMaxD•th
 =ð1è&& 
	`isIÁ”
Ð
absP¬tIdx
 ) && (
·¹Size
 !ð
SIZE_2Nx2N
) );

1486 
UIÁ
 
log2MšTUSizeInCU
 = 0;

1487 ià(
log2CbSize
 < (
m_pcSliû
->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MšSize
(è+ 
quadŒ“TUMaxD•th
 - 1 + 
š‹rS¶™FÏg
 + 
šŒaS¶™FÏg
) )

1490 
log2MšTUSizeInCU
 = 
m_pcSliû
->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MšSize
();

1495 
log2MšTUSizeInCU
 = 
log2CbSize
 - ( 
quadŒ“TUMaxD•th
 - 1 + 
š‹rS¶™FÏg
 + 
šŒaS¶™FÏg
);

1496 iàÐ
log2MšTUSizeInCU
 > 
m_pcSliû
->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
())

1499 
log2MšTUSizeInCU
 = 
m_pcSliû
->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
();

1502  
log2MšTUSizeInCU
;

1503 
	}
}

1505 
UIÁ
 
	gTComD©aCU
::
	$g‘CtxSkFÏg
Ð
UIÁ
 
uiAbsP¬tIdx
 ) const

1507 cÚ¡ 
TComD©aCU
* 
pcTempCU
;

1508 
UIÁ
 
uiTempP¬tIdx
;

1509 
UIÁ
 
uiCtx
 = 0;

1512 
pcTempCU
 = 
	`g‘PULeá
Ð
uiTempP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 );

1513 
uiCtx
 = ( 
pcTempCU
 ) ?…cTempCU->
	`isSk³d
Ð
uiTempP¬tIdx
 ) : 0;

1516 
pcTempCU
 = 
	`g‘PUAbove
Ð
uiTempP¬tIdx
, 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 );

1517 
uiCtx
 +ðÐ
pcTempCU
 ) ?…cTempCU->
	`isSk³d
Ð
uiTempP¬tIdx
 ) : 0;

1519  
uiCtx
;

1520 
	}
}

1522 
UIÁ
 
	gTComD©aCU
::
	$g‘CtxIÁ”Dœ
Ð
UIÁ
 
uiAbsP¬tIdx
 ) const

1524  
	`g‘D•th
Ð
uiAbsP¬tIdx
 );

1525 
	}
}

1528 
UCh¬
 
	gTComD©aCU
::
	$g‘QtRoÙCbf
Ð
UIÁ
 
uiIdx
 ) const

1530 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

1531  
	`g‘Cbf
Ð
uiIdx
, 
COMPONENT_Y
, 0 )

1532 || ((
numb”V®idCompÚ’ts
 > 
COMPONENT_Cb
è&& 
	`g‘Cbf
Ð
uiIdx
, COMPONENT_Cb, 0 ))

1533 || ((
numb”V®idCompÚ’ts
 > 
COMPONENT_Cr
è&& 
	`g‘Cbf
Ð
uiIdx
, COMPONENT_Cr, 0 ));

1534 
	}
}

1536 
Void
 
	gTComD©aCU
::
	$£tCbfSubP¬ts
ÐcÚ¡ 
UIÁ
 
uiCbf
[
MAX_NUM_COMPONENT
], UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1538 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1539 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

1541 
	`mem£t
Ð
m_puhCbf
[
comp
] + 
uiAbsP¬tIdx
, 
uiCbf
[comp], Ð
UCh¬
 ) * 
uiCu¼P¬tNumb
 );

1543 
	}
}

1545 
Void
 
	gTComD©aCU
::
	$£tCbfSubP¬ts
Ð
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1547 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1548 
	`mem£t
Ð
m_puhCbf
[
compID
] + 
uiAbsP¬tIdx
, 
uiCbf
, Ð
UCh¬
 ) * 
uiCu¼P¬tNumb
 );

1549 
	}
}

1558 
Void
 
	gTComD©aCU
::
	$£tCbfSubP¬ts
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1560 
£tSubP¬t
<
UCh¬
>Ð
uiCbf
, 
m_puhCbf
[
compID
], 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1561 
	}
}

1563 
Void
 
	gTComD©aCU
::
	$£tCbfP¬tRªge
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 )

1565 
	`mem£t
((
m_puhCbf
[
compID
] + 
uiAbsP¬tIdx
), 
uiCbf
, ((
UCh¬
è* 
uiCov”edP¬tIdxes
));

1566 
	}
}

1568 
Void
 
	gTComD©aCU
::
	$b™wi£OrCbfP¬tRªge
Ð
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 )

1570 cÚ¡ 
UIÁ
 
¡ÝAbsP¬tIdx
 = 
uiAbsP¬tIdx
 + 
uiCov”edP¬tIdxes
;

1572 
UIÁ
 
subP¬tIdx
 = 
uiAbsP¬tIdx
; subP¬tIdx < 
¡ÝAbsP¬tIdx
; subPartIdx++)

1574 
m_puhCbf
[
compID
][
subP¬tIdx
] |ð
uiCbf
;

1576 
	}
}

1578 
Void
 
	gTComD©aCU
::
	$£tD•thSubP¬ts
Ð
UIÁ
 
uiD•th
, UIÁ 
uiAbsP¬tIdx
 )

1580 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1581 
	`mem£t
Ð
m_puhD•th
 + 
uiAbsP¬tIdx
, 
uiD•th
, (
UCh¬
)*
uiCu¼P¬tNumb
 );

1582 
	}
}

1584 
BoÞ
 
	gTComD©aCU
::
	$isFœ¡AbsZÜd”IdxInD•th
 (
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
) const

1586 
UIÁ
 
uiP¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1587  (((
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
)% 
uiP¬tNumb
) == 0);

1588 
	}
}

1590 
Void
 
	gTComD©aCU
::
	$£tP¬tSizeSubP¬ts
Ð
P¬tSize
 
eMode
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1592 
	`as£¹
ÐÐ*
m_³P¬tSize
) == 1 );

1593 
	`mem£t
Ð
m_³P¬tSize
 + 
uiAbsP¬tIdx
, 
eMode
, 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> ( 2 * 
uiD•th
 ) );

1594 
	}
}

1596 
Void
 
	gTComD©aCU
::
	$£tCUT¿nsquªtBy·ssSubP¬ts
Ð
BoÞ
 
æag
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1598 
	`mem£t
Ð
m_CUT¿nsquªtBy·ss
 + 
uiAbsP¬tIdx
, 
æag
, 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> ( 2 * 
uiD•th
 ) );

1599 
	}
}

1601 
Void
 
	gTComD©aCU
::
	$£tSkFÏgSubP¬ts
Ð
BoÞ
 
sk
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
 )

1603 
	`as£¹
ÐÐ*
m_skFÏg
) == 1 );

1604 
	`mem£t
Ð
m_skFÏg
 + 
absP¬tIdx
, 
sk
, 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> ( 2 * 
d•th
 ) );

1605 
	}
}

1607 
Void
 
	gTComD©aCU
::
	$£tP»dModeSubP¬ts
Ð
P»dMode
 
eMode
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1609 
	`as£¹
ÐÐ*
m_³P»dMode
) == 1 );

1610 
	`mem£t
Ð
m_³P»dMode
 + 
uiAbsP¬tIdx
, 
eMode
, 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> ( 2 * 
uiD•th
 ) );

1611 
	}
}

1613 
Void
 
	gTComD©aCU
::
	$£tChromaQpAdjSubP¬ts
Ð
UCh¬
 
v®
, 
IÁ
 
absP¬tIdx
, IÁ 
d•th
 )

1615 
	`as£¹
Ð(*
m_ChromaQpAdj
) == 1 );

1616 
	`mem£t
Ð
m_ChromaQpAdj
 + 
absP¬tIdx
, 
v®
, 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> ( 2 * 
d•th
 ) );

1617 
	}
}

1619 
Void
 
	gTComD©aCU
::
	$£tQPSubCUs
Ð
IÁ
 
qp
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
, 
BoÞ
 &
foundNÚZ”oCbf
 )

1621 
UIÁ
 
cu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
d•th
 << 1);

1622 
UIÁ
 
cu¼P¬tNumQ
 = 
cu¼P¬tNumb
 >> 2;

1623 cÚ¡ 
UIÁ
 
numV®idComp
 = 
m_pcPic
->
	`g‘Numb”V®idCompÚ’ts
();

1625 if(!
foundNÚZ”oCbf
)

1627 if(
	`g‘D•th
(
absP¬tIdx
è> 
d•th
)

1629  
UIÁ
 
·¹Un™Idx
 = 0;…artUnitIdx < 4;…artUnitIdx++ )

1631 
	`£tQPSubCUs
Ð
qp
, 
absP¬tIdx
+
·¹Un™Idx
*
cu¼P¬tNumQ
, 
d•th
+1, 
foundNÚZ”oCbf
 );

1636 if(
	`g‘Cbf
Ð
absP¬tIdx
, 
COMPONENT_Y
 ) || (
numV®idComp
>
COMPONENT_Cb
 && g‘CbfÐabsP¬tIdx, COMPONENT_Cb )è|| (numV®idComp>
COMPONENT_Cr
 && getCbf(‡bsPartIdx, COMPONENT_Cr) ) )

1638 
foundNÚZ”oCbf
 = 
Œue
;

1642 
	`£tQPSubP¬ts
(
qp
, 
absP¬tIdx
, 
d•th
);

1646 
	}
}

1648 
Void
 
	gTComD©aCU
::
	$£tQPSubP¬ts
Ð
IÁ
 
qp
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1650 cÚ¡ 
UIÁ
 
numP¬t
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1651 
	`mem£t
(
m_phQP
+
uiAbsP¬tIdx
, 
qp
, 
numP¬t
);

1652 
	}
}

1654 
Void
 
	gTComD©aCU
::
	$£tIÁ¿DœSubP¬ts
ÐcÚ¡ 
ChªÃlTy³
 
chªÃlTy³
, cÚ¡ 
UIÁ
 
dœ
, cÚ¡ UIÁ 
absP¬tIdx
, cÚ¡ UIÁ 
d•th
 )

1656 
UIÁ
 
numP¬t
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
d•th
 << 1);

1657 
	`mem£t
Ð
m_puhIÁ¿Dœ
[
chªÃlTy³
] + 
absP¬tIdx
, 
dœ
,(
UCh¬
)*
numP¬t
 );

1658 
	}
}

1660 
	g‹m¶©e
<
ty³Çme
 
	gT
>

1661 
Void
 
	gTComD©aCU
::
	$£tSubP¬t
Ð
T
 
uiP¬am‘”
, T* 
puhBa£Ctu
, 
UIÁ
 
uiCUAddr
, UIÁ 
uiCUD•th
, UIÁ 
uiPUIdx
 )

1663 
	`as£¹
Ð(
T
) == 1 );

1665 
UIÁ
 
uiCu¼P¬tNumQ
 = (
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (2 * 
uiCUD•th
)) >> 2;

1666  
m_³P¬tSize
[ 
uiCUAddr
 ] )

1668 
SIZE_2Nx2N
:

1669 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, 4 * 
uiCu¼P¬tNumQ
 );

1671 
SIZE_2NxN
:

1672 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, 2 * 
uiCu¼P¬tNumQ
 );

1674 
SIZE_Nx2N
:

1675 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, 
uiCu¼P¬tNumQ
 );

1676 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + 2 * 
uiCu¼P¬tNumQ
, 
uiP¬am‘”
, uiCurrPartNumQ );

1678 
SIZE_NxN
:

1679 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, 
uiCu¼P¬tNumQ
 );

1681 
SIZE_2NxnU
:

1682 iàÐ
uiPUIdx
 == 0 )

1684 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 1) );

1685 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + 
uiCu¼P¬tNumQ
, 
uiP¬am‘”
, (uiCurrPartNumQ >> 1) );

1687 iàÐ
uiPUIdx
 == 1 )

1689 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 1) );

1690 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + 
uiCu¼P¬tNumQ
, 
uiP¬am‘”
, ((uiCurrPartNumQ >> 1) + (uiCurrPartNumQ << 1)) );

1694 
	`as£¹
(0);

1697 
SIZE_2NxnD
:

1698 iàÐ
uiPUIdx
 == 0 )

1700 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, ((
uiCu¼P¬tNumQ
 << 1) + (uiCurrPartNumQ >> 1)) );

1701 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1è+ uiCu¼P¬tNumQ, 
uiP¬am‘”
, (uiCurrPartNumQ >> 1) );

1703 iàÐ
uiPUIdx
 == 1 )

1705 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 1) );

1706 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + 
uiCu¼P¬tNumQ
, 
uiP¬am‘”
, (uiCurrPartNumQ >> 1) );

1710 
	`as£¹
(0);

1713 
SIZE_nLx2N
:

1714 iàÐ
uiPUIdx
 == 0 )

1716 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 2) );

1717 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1718 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1719 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1è+ (uiCu¼P¬tNumQ >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1721 iàÐ
uiPUIdx
 == 1 )

1723 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 2) );

1724 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ + (uiCurrPartNumQ >> 2)) );

1725 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1726 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1è+ (uiCu¼P¬tNumQ >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ + (uiCurrPartNumQ >> 2)) );

1730 
	`as£¹
(0);

1733 
SIZE_nRx2N
:

1734 iàÐ
uiPUIdx
 == 0 )

1736 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 + (uiCurrPartNumQ >> 2)) );

1737 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + 
uiCu¼P¬tNumQ
 + (uiCu¼P¬tNumQ >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1738 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1), 
uiP¬am‘”
, (uiCurrPartNumQ + (uiCurrPartNumQ >> 2)) );

1739 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1è+ uiCu¼P¬tNumQ + (uiCu¼P¬tNumQ >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1741 iàÐ
uiPUIdx
 == 1 )

1743 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
, 
uiP¬am‘”
, (
uiCu¼P¬tNumQ
 >> 2) );

1744 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1745 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1746 
	`mem£t
Ð
puhBa£Ctu
 + 
uiCUAddr
 + (
uiCu¼P¬tNumQ
 << 1è+ (uiCu¼P¬tNumQ >> 1), 
uiP¬am‘”
, (uiCurrPartNumQ >> 2) );

1750 
	`as£¹
(0);

1754 
	`as£¹
( 0 );

1757 
	}
}

1759 
Void
 
	gTComD©aCU
::
	$£tM”geFÏgSubP¬ts
 ( 
BoÞ
 
bM”geFÏg
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1761 
	`£tSubP¬t
Ð
bM”geFÏg
, 
m_pbM”geFÏg
, 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1762 
	}
}

1764 
Void
 
	gTComD©aCU
::
	$£tM”geIndexSubP¬ts
 ( 
UIÁ
 
uiM”geIndex
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1766 
£tSubP¬t
<
UCh¬
>Ð
uiM”geIndex
, 
m_puhM”geIndex
, 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1767 
	}
}

1769 
Void
 
	gTComD©aCU
::
	$£tIÁ”DœSubP¬ts
Ð
UIÁ
 
uiDœ
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1771 
£tSubP¬t
<
UCh¬
>Ð
uiDœ
, 
m_puhIÁ”Dœ
, 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1772 
	}
}

1774 
Void
 
	gTComD©aCU
::
	$£tMVPIdxSubP¬ts
Ð
IÁ
 
iMVPIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1776 
£tSubP¬t
<
SCh¬
>Ð
iMVPIdx
, 
m_­iMVPIdx
[
eRefPicLi¡
], 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1777 
	}
}

1779 
Void
 
	gTComD©aCU
::
	$£tMVPNumSubP¬ts
Ð
IÁ
 
iMVPNum
, 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 )

1781 
£tSubP¬t
<
SCh¬
>Ð
iMVPNum
, 
m_­iMVPNum
[
eRefPicLi¡
], 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

1782 
	}
}

1785 
Void
 
	gTComD©aCU
::
	$£tTrIdxSubP¬ts
Ð
UIÁ
 
uiTrIdx
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1787 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1789 
	`mem£t
Ð
m_puhTrIdx
 + 
uiAbsP¬tIdx
, 
uiTrIdx
, (
UCh¬
)*
uiCu¼P¬tNumb
 );

1790 
	}
}

1792 
Void
 
	gTComD©aCU
::
	$£tT¿nsfÜmSkSubP¬ts
ÐcÚ¡ 
UIÁ
 
u£T¿nsfÜmSk
[
MAX_NUM_COMPONENT
], UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1794 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1796 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

1798 
	`mem£t
Ð
m_puhT¿nsfÜmSk
[
i
] + 
uiAbsP¬tIdx
, 
u£T¿nsfÜmSk
[i], Ð
UCh¬
 ) * 
uiCu¼P¬tNumb
 );

1800 
	}
}

1802 
Void
 
	gTComD©aCU
::
	$£tT¿nsfÜmSkSubP¬ts
Ð
UIÁ
 
u£T¿nsfÜmSk
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
)

1804 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1806 
	`mem£t
Ð
m_puhT¿nsfÜmSk
[
compID
] + 
uiAbsP¬tIdx
, 
u£T¿nsfÜmSk
, Ð
UCh¬
 ) * 
uiCu¼P¬tNumb
 );

1807 
	}
}

1809 
Void
 
	gTComD©aCU
::
	$£tT¿nsfÜmSkP¬tRªge
 ( 
UIÁ
 
u£T¿nsfÜmSk
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 )

1811 
	`mem£t
((
m_puhT¿nsfÜmSk
[
compID
] + 
uiAbsP¬tIdx
), 
u£T¿nsfÜmSk
, ((
UCh¬
è* 
uiCov”edP¬tIdxes
));

1812 
	}
}

1814 
Void
 
	gTComD©aCU
::
	$£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
Ð
SCh¬
 
®phaV®ue
, 
CompÚ’tID
 
compID
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 )

1816 
	`mem£t
((
m_üossCompÚ’tP»diùiÚAÍha
[
compID
] + 
uiAbsP¬tIdx
), 
®phaV®ue
, ((
SCh¬
è* 
uiCov”edP¬tIdxes
));

1817 
	}
}

1819 
Void
 
	gTComD©aCU
::
	$£tEx¶ic™RdpcmModeP¬tRªge
 ( 
UIÁ
 
rdpcmMode
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 )

1821 
	`mem£t
((
m_ex¶ic™RdpcmMode
[
compID
] + 
uiAbsP¬tIdx
), 
rdpcmMode
, ((
UCh¬
è* 
uiCov”edP¬tIdxes
));

1822 
	}
}

1824 
Void
 
	gTComD©aCU
::
	$£tSizeSubP¬ts
Ð
UIÁ
 
uiWidth
, UIÁ 
uiHeight
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1826 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

1828 
	`mem£t
Ð
m_puhWidth
 + 
uiAbsP¬tIdx
, 
uiWidth
, (
UCh¬
)*
uiCu¼P¬tNumb
 );

1829 
	`mem£t
Ð
m_puhHeight
 + 
uiAbsP¬tIdx
, 
uiHeight
, (
UCh¬
)*
uiCu¼P¬tNumb
 );

1830 
	}
}

1832 
UCh¬
 
	gTComD©aCU
::
	$g‘NumP¬t™iÚs
(cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
) const

1834 
UCh¬
 
iNumP¬t
 = 0;

1836  
m_³P¬tSize
[
uiAbsP¬tIdx
] )

1838 
SIZE_2Nx2N
: 
iNumP¬t
 = 1; ;

1839 
SIZE_2NxN
: 
iNumP¬t
 = 2; ;

1840 
SIZE_Nx2N
: 
iNumP¬t
 = 2; ;

1841 
SIZE_NxN
: 
iNumP¬t
 = 4; ;

1842 
SIZE_2NxnU
: 
iNumP¬t
 = 2; ;

1843 
SIZE_2NxnD
: 
iNumP¬t
 = 2; ;

1844 
SIZE_nLx2N
: 
iNumP¬t
 = 2; ;

1845 
SIZE_nRx2N
: 
iNumP¬t
 = 2; ;

1846 : 
	`as£¹
 (0); ;

1849  
iNumP¬t
;

1850 
	}
}

1853 
Void
 
	gTComD©aCU
::
	$g‘P¬tIndexAndSize
Ð
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tAddr
, 
IÁ
& 
riWidth
, IÁ& 
riHeight
 ) const

1855  
m_³P¬tSize
[0] )

1857 
SIZE_2NxN
:

1858 
riWidth
 = 
	`g‘Width
(0); 
riHeight
 = 
	`g‘Height
(0è>> 1; 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 1;

1860 
SIZE_Nx2N
:

1861 
riWidth
 = 
	`g‘Width
(0è>> 1; 
riHeight
 = 
	`g‘Height
(0); 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 2;

1863 
SIZE_NxN
:

1864 
riWidth
 = 
	`g‘Width
(0è>> 1; 
riHeight
 = 
	`g‘Height
(0è>> 1; 
ruiP¬tAddr
 = ( 
m_uiNumP¬t™iÚ
 >> 2 ) * 
uiP¬tIdx
;

1866 
SIZE_2NxnU
:

1867 
riWidth
 = 
	`g‘Width
(0);

1868 
riHeight
 = ( 
uiP¬tIdx
 =ð0 ) ? 
	`g‘Height
(0) >> 2 : ( getHeight(0) >> 2 ) + ( getHeight(0) >> 1 );

1869 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 ) ? 0 : 
m_uiNumP¬t™iÚ
 >> 3;

1871 
SIZE_2NxnD
:

1872 
riWidth
 = 
	`g‘Width
(0);

1873 
riHeight
 = ( 
uiP¬tIdx
 =ð0 ) ? ( 
	`g‘Height
(0) >> 2 ) + ( getHeight(0) >> 1 ) : getHeight(0) >> 2;

1874 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 ) ? 0 : (
m_uiNumP¬t™iÚ
 >> 1) + (m_uiNumPartition >> 3);

1876 
SIZE_nLx2N
:

1877 
riWidth
 = ( 
uiP¬tIdx
 =ð0 ) ? 
	`g‘Width
(0) >> 2 : ( getWidth(0) >> 2 ) + ( getWidth(0) >> 1 );

1878 
riHeight
 = 
	`g‘Height
(0);

1879 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 ) ? 0 : 
m_uiNumP¬t™iÚ
 >> 4;

1881 
SIZE_nRx2N
:

1882 
riWidth
 = ( 
uiP¬tIdx
 =ð0 ) ? ( 
	`g‘Width
(0) >> 2 ) + ( getWidth(0) >> 1 ) : getWidth(0) >> 2;

1883 
riHeight
 = 
	`g‘Height
(0);

1884 
ruiP¬tAddr
 = ( 
uiP¬tIdx
 =ð0 ) ? 0 : (
m_uiNumP¬t™iÚ
 >> 2) + (m_uiNumPartition >> 4);

1887 
	`as£¹
 ( 
m_³P¬tSize
[0] =ð
SIZE_2Nx2N
 );

1888 
riWidth
 = 
	`g‘Width
(0); 
riHeight
 = 
	`g‘Height
(0); 
ruiP¬tAddr
 = 0;

1891 
	}
}

1894 
Void
 
	gTComD©aCU
::
	$g‘MvF›ld
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMvF›ld
& 
rcMvF›ld
 )

1896 iàÐ
pcCU
 =ð
NULL
 )

1898 
TComMv
 
cZ”oMv
;

1899 
rcMvF›ld
.
	`£tMvF›ld
Ð
cZ”oMv
, 
NOT_VALID
 );

1903 cÚ¡ 
TComCUMvF›ld
* 
pcCUMvF›ld
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 );

1904 
rcMvF›ld
.
	`£tMvF›ld
Ð
pcCUMvF›ld
->
	`g‘Mv
Ð
uiAbsP¬tIdx
 ),…cCUMvF›ld->
	`g‘RefIdx
( uiAbsPartIdx ) );

1905 
	}
}

1907 
Void
 
	gTComD©aCU
::
	$d”iveLeáRightTÝIdxG’”®
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLT
, UIÁ& 
ruiP¬tIdxRT
 ) const

1909 
ruiP¬tIdxLT
 = 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
;

1910 
UIÁ
 
uiPUWidth
 = 0;

1912  
m_³P¬tSize
[
uiAbsP¬tIdx
] )

1914 
SIZE_2Nx2N
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
]; ;

1915 
SIZE_2NxN
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
]; ;

1916 
SIZE_Nx2N
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
] >> 1; ;

1917 
SIZE_NxN
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
] >> 1; ;

1918 
SIZE_2NxnU
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
]; ;

1919 
SIZE_2NxnD
: 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
]; ;

1920 
SIZE_nLx2N
:

1921 iàÐ
uiP¬tIdx
 == 0 )

1923 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
] >> 2;

1925 iàÐ
uiP¬tIdx
 == 1 )

1927 
uiPUWidth
 = (
m_puhWidth
[
uiAbsP¬tIdx
] >> 1) + (m_puhWidth[uiAbsPartIdx] >> 2);

1931 
	`as£¹
(0);

1934 
SIZE_nRx2N
:

1935 iàÐ
uiP¬tIdx
 == 0 )

1937 
uiPUWidth
 = (
m_puhWidth
[
uiAbsP¬tIdx
] >> 1) + (m_puhWidth[uiAbsPartIdx] >> 2);

1939 iàÐ
uiP¬tIdx
 == 1 )

1941 
uiPUWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
] >> 2;

1945 
	`as£¹
(0);

1949 
	`as£¹
 (0);

1953 
ruiP¬tIdxRT
 = 
g_auiRa¡”ToZsÿn
 [
g_auiZsÿnToRa¡”
[ 
ruiP¬tIdxLT
 ] + 
uiPUWidth
 / 
m_pcPic
->
	`g‘MšCUWidth
() - 1 ];

1954 
	}
}

1956 
Void
 
	gTComD©aCU
::
	$d”iveLeáBÙtomIdxG’”®
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLB
 ) const

1958 
UIÁ
 
uiPUHeight
 = 0;

1959  
m_³P¬tSize
[
uiAbsP¬tIdx
] )

1961 
SIZE_2Nx2N
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
]; ;

1962 
SIZE_2NxN
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
] >> 1; ;

1963 
SIZE_Nx2N
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
]; ;

1964 
SIZE_NxN
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
] >> 1; ;

1965 
SIZE_2NxnU
:

1966 iàÐ
uiP¬tIdx
 == 0 )

1968 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
] >> 2;

1970 iàÐ
uiP¬tIdx
 == 1 )

1972 
uiPUHeight
 = (
m_puhHeight
[
uiAbsP¬tIdx
] >> 1) + (m_puhHeight[uiAbsPartIdx] >> 2);

1976 
	`as£¹
(0);

1979 
SIZE_2NxnD
:

1980 iàÐ
uiP¬tIdx
 == 0 )

1982 
uiPUHeight
 = (
m_puhHeight
[
uiAbsP¬tIdx
] >> 1) + (m_puhHeight[uiAbsPartIdx] >> 2);

1984 iàÐ
uiP¬tIdx
 == 1 )

1986 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
] >> 2;

1990 
	`as£¹
(0);

1993 
SIZE_nLx2N
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
]; ;

1994 
SIZE_nRx2N
: 
uiPUHeight
 = 
m_puhHeight
[
uiAbsP¬tIdx
]; ;

1996 
	`as£¹
 (0);

2000 
ruiP¬tIdxLB
 = 
g_auiRa¡”ToZsÿn
 [
g_auiZsÿnToRa¡”
[ 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
 ] + ((
uiPUHeight
 / 
m_pcPic
->
	`g‘MšCUHeight
()è- 1)*m_pcPic->
	`g‘NumP¬tInCtuWidth
()];

2001 
	}
}

2003 
Void
 
	gTComD©aCU
::
	$d”iveLeáRightTÝIdx
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLT
, UIÁ& 
ruiP¬tIdxRT
 ) const

2005 
ruiP¬tIdxLT
 = 
m_absZIdxInCtu
;

2006 
ruiP¬tIdxRT
 = 
g_auiRa¡”ToZsÿn
 [
g_auiZsÿnToRa¡”
[ 
ruiP¬tIdxLT
 ] + 
m_puhWidth
[0] / 
m_pcPic
->
	`g‘MšCUWidth
() - 1 ];

2008  
m_³P¬tSize
[0] )

2010 
SIZE_2Nx2N
: ;

2011 
SIZE_2NxN
:

2012 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 1; 
ruiP¬tIdxRT
 += ( uiPartIdx == 0 )? 0 : m_uiNumPartition >> 1;

2014 
SIZE_Nx2N
:

2015 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 2; 
ruiP¬tIdxRT
 -= ( uiPartIdx == 1 )? 0 : m_uiNumPartition >> 2;

2017 
SIZE_NxN
:

2018 
ruiP¬tIdxLT
 +ðÐ
m_uiNumP¬t™iÚ
 >> 2 ) * 
uiP¬tIdx
; 
ruiP¬tIdxRT
 += ( m_uiNumPartition >> 2 ) * ( uiPartIdx - 1 );

2020 
SIZE_2NxnU
:

2021 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 3;

2022 
ruiP¬tIdxRT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 3;

2024 
SIZE_2NxnD
:

2025 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : ( 
m_uiNumP¬t™iÚ
 >> 1 ) + ( m_uiNumPartition >> 3 );

2026 
ruiP¬tIdxRT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : ( 
m_uiNumP¬t™iÚ
 >> 1 ) + ( m_uiNumPartition >> 3 );

2028 
SIZE_nLx2N
:

2029 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 4;

2030 
ruiP¬tIdxRT
 -ðÐ
uiP¬tIdx
 =ð1 )? 0 : ( 
m_uiNumP¬t™iÚ
 >> 2 ) + ( m_uiNumPartition >> 4 );

2032 
SIZE_nRx2N
:

2033 
ruiP¬tIdxLT
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : ( 
m_uiNumP¬t™iÚ
 >> 2 ) + ( m_uiNumPartition >> 4 );

2034 
ruiP¬tIdxRT
 -ðÐ
uiP¬tIdx
 =ð1 )? 0 : 
m_uiNumP¬t™iÚ
 >> 4;

2037 
	`as£¹
 (0);

2041 
	}
}

2043 
Void
 
	gTComD©aCU
::
	$d”iveLeáBÙtomIdx
Ð
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLB
 ) const

2045 
ruiP¬tIdxLB
 = 
g_auiRa¡”ToZsÿn
 [
g_auiZsÿnToRa¡”
[ 
m_absZIdxInCtu
 ] + ( ((
m_puhHeight
[0] / 
m_pcPic
->
	`g‘MšCUHeight
())>>1è- 1)*m_pcPic->
	`g‘NumP¬tInCtuWidth
()];

2047  
m_³P¬tSize
[0] )

2049 
SIZE_2Nx2N
:

2050 
ruiP¬tIdxLB
 +ð
m_uiNumP¬t™iÚ
 >> 1;

2052 
SIZE_2NxN
:

2053 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 1;

2055 
SIZE_Nx2N
:

2056 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 )? 
m_uiNumP¬t™iÚ
 >> 1 : (m_uiNumPartition >> 2)*3;

2058 
SIZE_NxN
:

2059 
ruiP¬tIdxLB
 +ðÐ
m_uiNumP¬t™iÚ
 >> 2 ) * 
uiP¬tIdx
;

2061 
SIZE_2NxnU
:

2062 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? -((
IÁ
)
m_uiNumP¬t™iÚ
 >> 3) : m_uiNumPartition >> 1;

2064 
SIZE_2NxnD
:

2065 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? (
m_uiNumP¬t™iÚ
 >> 2) + (m_uiNumPartition >> 3): m_uiNumPartition >> 1;

2067 
SIZE_nLx2N
:

2068 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? 
m_uiNumP¬t™iÚ
 >> 1 : (m_uiNumPartition >> 1) + (m_uiNumPartition >> 4);

2070 
SIZE_nRx2N
:

2071 
ruiP¬tIdxLB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? 
m_uiNumP¬t™iÚ
 >> 1 : (m_uiNumPartition >> 1) + (m_uiNumPartition >> 2) + (m_uiNumPartition >> 4);

2074 
	`as£¹
 (0);

2077 
	}
}

2083 
Void
 
	gTComD©aCU
::
	$d”iveRightBÙtomIdx
Ð
UIÁ
 
uiP¬tIdx
, UIÁ &
ruiP¬tIdxRB
 ) const

2085 
ruiP¬tIdxRB
 = 
g_auiRa¡”ToZsÿn
 [
g_auiZsÿnToRa¡”
[ 
m_absZIdxInCtu
 ] + ( ((
m_puhHeight
[0] / 
m_pcPic
->
	`g‘MšCUHeight
())>>1è- 1)*m_pcPic->
	`g‘NumP¬tInCtuWidth
(è+ 
m_puhWidth
[0] / m_pcPic->
	`g‘MšCUWidth
() - 1];

2087  
m_³P¬tSize
[0] )

2089 
SIZE_2Nx2N
:

2090 
ruiP¬tIdxRB
 +ð
m_uiNumP¬t™iÚ
 >> 1;

2092 
SIZE_2NxN
:

2093 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 )? 0 : 
m_uiNumP¬t™iÚ
 >> 1;

2095 
SIZE_Nx2N
:

2096 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 )? 
m_uiNumP¬t™iÚ
 >> 2 : (m_uiNumPartition >> 1);

2098 
SIZE_NxN
:

2099 
ruiP¬tIdxRB
 +ðÐ
m_uiNumP¬t™iÚ
 >> 2 ) * ( 
uiP¬tIdx
 - 1 );

2101 
SIZE_2NxnU
:

2102 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? -((
IÁ
)
m_uiNumP¬t™iÚ
 >> 3) : m_uiNumPartition >> 1;

2104 
SIZE_2NxnD
:

2105 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? (
m_uiNumP¬t™iÚ
 >> 2) + (m_uiNumPartition >> 3): m_uiNumPartition >> 1;

2107 
SIZE_nLx2N
:

2108 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? (
m_uiNumP¬t™iÚ
 >> 3) + (m_uiNumPartition >> 4): m_uiNumPartition >> 1;

2110 
SIZE_nRx2N
:

2111 
ruiP¬tIdxRB
 +ðÐ
uiP¬tIdx
 =ð0 ) ? (
m_uiNumP¬t™iÚ
 >> 2) + (m_uiNumPartition >> 3) + (m_uiNumPartition >> 4) : m_uiNumPartition >> 1;

2114 
	`as£¹
 (0);

2117 
	}
}

2119 
BoÞ
 
	gTComD©aCU
::
	$hasEqu®MÙiÚ
Ð
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ 
TComD©aCU
* 
pcCªdCU
, UIÁ 
uiCªdAbsP¬tIdx
 ) const

2121 iàÐ
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) !ð
pcCªdCU
->g‘IÁ”DœÐ
uiCªdAbsP¬tIdx
 ) )

2123  
çl£
;

2126  
UIÁ
 
uiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

2128 iàÐ
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
uiRefLi¡Idx
 ) )

2130 iàÐ
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`g‘Mv
Ð
uiAbsP¬tIdx
 ) !ð
pcCªdCU
->g‘CUMvF›ldÐRefPicLi¡ÐuiRefLi¡Idx ) )->g‘MvÐ
uiCªdAbsP¬tIdx
 ) ||

2131 
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`g‘RefIdx
Ð
uiAbsP¬tIdx
 ) !ð
pcCªdCU
->g‘CUMvF›ldÐRefPicLi¡ÐuiRefLi¡Idx ) )->g‘RefIdxÐ
uiCªdAbsP¬tIdx
 ) )

2133  
çl£
;

2138  
Œue
;

2139 
	}
}

2142 #ià
MCTS_ENC_CHECK


2143 
Void
 
	gTComD©aCU
::
	$g‘IÁ”M”geCªdid©es
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiPUIdx
, 
TComMvF›ld
* 
pcMvF›ldNeighbours
, 
UCh¬
* 
puhIÁ”DœNeighbours
, 
IÁ
& 
numV®idM”geCªd
, UIÁ &
numS·tŸlM”geCªdid©es
, IÁ 
mrgCªdIdx
 ) const

2145 
Void
 
TComD©aCU
::
	$g‘IÁ”M”geCªdid©es
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiPUIdx
, 
TComMvF›ld
* 
pcMvF›ldNeighbours
, 
UCh¬
* 
puhIÁ”DœNeighbours
, 
IÁ
& 
numV®idM”geCªd
, IÁ 
mrgCªdIdx
 ) const

2148 
UIÁ
 
uiAbsP¬tAddr
 = 
m_absZIdxInCtu
 + 
uiAbsP¬tIdx
;

2149 
BoÞ
 
abCªdIsIÁ”
[ 
MRG_MAX_NUM_CANDS
 ];

2150  
UIÁ
 
ui
 = 0; u˜< 
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
(); ++ui )

2152 
abCªdIsIÁ”
[
ui
] = 
çl£
;

2153 
pcMvF›ldNeighbours
[ ( 
ui
 << 1 ) ].
	`£tRefIdx
(
NOT_VALID
);

2154 
pcMvF›ldNeighbours
[ ( 
ui
 << 1 ) + 1 ].
	`£tRefIdx
(
NOT_VALID
);

2156 
numV®idM”geCªd
 = 
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
();

2158 
IÁ
 
xP
, 
yP
, 
nPSW
, 
nPSH
;

2159 
this
->
	`g‘P¬tPos™iÚ
(
uiPUIdx
, 
xP
, 
yP
, 
nPSW
, 
nPSH
);

2161 
IÁ
 
iCouÁ
 = 0;

2163 
UIÁ
 
uiP¬tIdxLT
, 
uiP¬tIdxRT
, 
uiP¬tIdxLB
;

2164 
P¬tSize
 
cCurPS
 = 
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 );

2165 
	`d”iveLeáRightTÝIdxG’”®
Ð
uiAbsP¬tIdx
, 
uiPUIdx
, 
uiP¬tIdxLT
, 
uiP¬tIdxRT
 );

2166 
	`d”iveLeáBÙtomIdxG’”®
Ð
uiAbsP¬tIdx
, 
uiPUIdx
, 
uiP¬tIdxLB
 );

2169 
UIÁ
 
uiLeáP¬tIdx
 = 0;

2170 cÚ¡ 
TComD©aCU
 *
pcCULeá
 = 
	`g‘PULeá
Ð
uiLeáP¬tIdx
, 
uiP¬tIdxLB
 );

2172 
BoÞ
 
isAvažabËA1
 = 
pcCULeá
 &&

2173 
pcCULeá
->
	`isDiffMER
(
xP
 -1, 
yP
+
nPSH
-1, xP, yP) &&

2174 !Ð
uiPUIdx
 =ð1 && (
cCurPS
 =ð
SIZE_Nx2N
 || cCurPS =ð
SIZE_nLx2N
 || cCurPS =ð
SIZE_nRx2N
) ) &&

2175 
pcCULeá
->
	`isIÁ”
Ð
uiLeáP¬tIdx
 ) ;

2177 iàÐ
isAvažabËA1
 )

2179 
abCªdIsIÁ”
[
iCouÁ
] = 
Œue
;

2181 
puhIÁ”DœNeighbours
[
iCouÁ
] = 
pcCULeá
->
	`g‘IÁ”Dœ
Ð
uiLeáP¬tIdx
 );

2183 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCULeá
, 
uiLeáP¬tIdx
, 
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[
iCouÁ
<<1] );

2184 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2186 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCULeá
, 
uiLeáP¬tIdx
, 
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
iCouÁ
<<1)+1] );

2188 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2190 #ià
MCTS_ENC_CHECK


2191 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
 + 1;

2195 
iCouÁ
 ++;

2199 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2201 #ià
MCTS_ENC_CHECK


2202 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2207 
UIÁ
 
uiAboveP¬tIdx
 = 0;

2208 cÚ¡ 
TComD©aCU
 *
pcCUAbove
 = 
	`g‘PUAbove
Ð
uiAboveP¬tIdx
, 
uiP¬tIdxRT
 );

2210 
BoÞ
 
isAvažabËB1
 = 
pcCUAbove
 &&

2211 
pcCUAbove
->
	`isDiffMER
(
xP
+
nPSW
-1, 
yP
-1, xP, yP) &&

2212 !Ð
uiPUIdx
 =ð1 && (
cCurPS
 =ð
SIZE_2NxN
 || cCurPS =ð
SIZE_2NxnU
 || cCurPS =ð
SIZE_2NxnD
) ) &&

2213 
pcCUAbove
->
	`isIÁ”
Ð
uiAboveP¬tIdx
 );

2215 iàÐ
isAvažabËB1
 && (!
isAvažabËA1
 || !
pcCULeá
->
	`hasEqu®MÙiÚ
Ð
uiLeáP¬tIdx
, 
pcCUAbove
, 
uiAboveP¬tIdx
 ) ) )

2217 
abCªdIsIÁ”
[
iCouÁ
] = 
Œue
;

2219 
puhIÁ”DœNeighbours
[
iCouÁ
] = 
pcCUAbove
->
	`g‘IÁ”Dœ
Ð
uiAboveP¬tIdx
 );

2221 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAbove
, 
uiAboveP¬tIdx
, 
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[
iCouÁ
<<1] );

2222 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2224 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAbove
, 
uiAboveP¬tIdx
, 
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
iCouÁ
<<1)+1] );

2226 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2228 #ià
MCTS_ENC_CHECK


2229 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
 + 1;

2233 
iCouÁ
 ++;

2236 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2238 #ià
MCTS_ENC_CHECK


2239 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2245 
UIÁ
 
uiAboveRightP¬tIdx
 = 0;

2246 cÚ¡ 
TComD©aCU
 *
pcCUAboveRight
 = 
	`g‘PUAboveRight
Ð
uiAboveRightP¬tIdx
, 
uiP¬tIdxRT
 );

2248 
BoÞ
 
isAvažabËB0
 = 
pcCUAboveRight
 &&

2249 
pcCUAboveRight
->
	`isDiffMER
(
xP
+
nPSW
, 
yP
-1, xP, yP) &&

2250 
pcCUAboveRight
->
	`isIÁ”
Ð
uiAboveRightP¬tIdx
 );

2252 iàÐ
isAvažabËB0
 && ( !
isAvažabËB1
 || !
pcCUAbove
->
	`hasEqu®MÙiÚ
Ð
uiAboveP¬tIdx
, 
pcCUAboveRight
, 
uiAboveRightP¬tIdx
 ) ) )

2254 
abCªdIsIÁ”
[
iCouÁ
] = 
Œue
;

2256 
puhIÁ”DœNeighbours
[
iCouÁ
] = 
pcCUAboveRight
->
	`g‘IÁ”Dœ
Ð
uiAboveRightP¬tIdx
 );

2258 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAboveRight
, 
uiAboveRightP¬tIdx
, 
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[
iCouÁ
<<1] );

2259 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2261 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAboveRight
, 
uiAboveRightP¬tIdx
, 
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
iCouÁ
<<1)+1] );

2263 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2265 #ià
MCTS_ENC_CHECK


2266 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
 + 1;

2270 
iCouÁ
 ++;

2273 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2275 #ià
MCTS_ENC_CHECK


2276 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2282 
UIÁ
 
uiLeáBÙtomP¬tIdx
 = 0;

2283 cÚ¡ 
TComD©aCU
 *
pcCULeáBÙtom
 = 
this
->
	`g‘PUB–owLeá
Ð
uiLeáBÙtomP¬tIdx
, 
uiP¬tIdxLB
 );

2285 
BoÞ
 
isAvažabËA0
 = 
pcCULeáBÙtom
 &&

2286 
pcCULeáBÙtom
->
	`isDiffMER
(
xP
-1, 
yP
+
nPSH
, xP, yP) &&

2287 
pcCULeáBÙtom
->
	`isIÁ”
Ð
uiLeáBÙtomP¬tIdx
 ) ;

2289 iàÐ
isAvažabËA0
 && ( !
isAvažabËA1
 || !
pcCULeá
->
	`hasEqu®MÙiÚ
Ð
uiLeáP¬tIdx
, 
pcCULeáBÙtom
, 
uiLeáBÙtomP¬tIdx
 ) ) )

2291 
abCªdIsIÁ”
[
iCouÁ
] = 
Œue
;

2293 
puhIÁ”DœNeighbours
[
iCouÁ
] = 
pcCULeáBÙtom
->
	`g‘IÁ”Dœ
Ð
uiLeáBÙtomP¬tIdx
 );

2295 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCULeáBÙtom
, 
uiLeáBÙtomP¬tIdx
, 
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[
iCouÁ
<<1] );

2296 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2298 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCULeáBÙtom
, 
uiLeáBÙtomP¬tIdx
, 
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
iCouÁ
<<1)+1] );

2300 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2302 #ià
MCTS_ENC_CHECK


2303 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
 + 1;

2307 
iCouÁ
 ++;

2310 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2312 #ià
MCTS_ENC_CHECK


2313 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2319 ifÐ
iCouÁ
 < 4 )

2321 
UIÁ
 
uiAboveLeáP¬tIdx
 = 0;

2322 cÚ¡ 
TComD©aCU
 *
pcCUAboveLeá
 = 
	`g‘PUAboveLeá
Ð
uiAboveLeáP¬tIdx
, 
uiAbsP¬tAddr
 );

2324 
BoÞ
 
isAvažabËB2
 = 
pcCUAboveLeá
 &&

2325 
pcCUAboveLeá
->
	`isDiffMER
(
xP
-1, 
yP
-1, xP, yP) &&

2326 
pcCUAboveLeá
->
	`isIÁ”
Ð
uiAboveLeáP¬tIdx
 );

2328 iàÐ
isAvažabËB2
 && ( !
isAvažabËA1
 || !
pcCULeá
->
	`hasEqu®MÙiÚ
Ð
uiLeáP¬tIdx
, 
pcCUAboveLeá
, 
uiAboveLeáP¬tIdx
 ) )

2329 && ( !
isAvažabËB1
 || !
pcCUAbove
->
	`hasEqu®MÙiÚ
Ð
uiAboveP¬tIdx
, 
pcCUAboveLeá
, 
uiAboveLeáP¬tIdx
 ) ) )

2331 
abCªdIsIÁ”
[
iCouÁ
] = 
Œue
;

2333 
puhIÁ”DœNeighbours
[
iCouÁ
] = 
pcCUAboveLeá
->
	`g‘IÁ”Dœ
Ð
uiAboveLeáP¬tIdx
 );

2335 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAboveLeá
, 
uiAboveLeáP¬tIdx
, 
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[
iCouÁ
<<1] );

2336 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2338 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCUAboveLeá
, 
uiAboveLeáP¬tIdx
, 
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
iCouÁ
<<1)+1] );

2340 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2342 #ià
MCTS_ENC_CHECK


2343 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
 + 1;

2347 
iCouÁ
 ++;

2351 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2353 #ià
MCTS_ENC_CHECK


2354 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2358 #ià
MCTS_ENC_CHECK


2359 
numS·tŸlM”geCªdid©es
 = 
iCouÁ
;

2361 iàÐ
	`g‘Sliû
()->
	`g‘EÇbËTMVPFÏg
() )

2364 
UIÁ
 
uiP¬tIdxRB
;

2366 
	`d”iveRightBÙtomIdx
Ð
uiPUIdx
, 
uiP¬tIdxRB
 );

2368 
UIÁ
 
uiAbsP¬tIdxTmp
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxRB
];

2369 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

2370 cÚ¡ 
UIÁ
 
numP¬tInCtuHeight
 = 
m_pcPic
->
	`g‘NumP¬tInCtuHeight
();

2372 
TComMv
 
cCÞMv
;

2373 
IÁ
 
iRefIdx
;

2374 
IÁ
 
ùuRsAddr
 = -1;

2376 iàÐÐÐ
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[
uiAbsP¬tIdxTmp
] + m_pcPic->
	`g‘MšCUWidth
 (èè< 
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicWidthInLumaSam¶es
 () )

2377 && ( ( 
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[
uiAbsP¬tIdxTmp
] + m_pcPic->
	`g‘MšCUHeight
(èè< 
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicHeightInLumaSam¶es
() ) )

2379 iàÐÐ
uiAbsP¬tIdxTmp
 % 
numP¬tInCtuWidth
 <‚umPartInCtuWidth - 1 ) &&

2380 Ð
uiAbsP¬tIdxTmp
 / 
numP¬tInCtuWidth
 < 
numP¬tInCtuHeight
 - 1 ) )

2382 
uiAbsP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxTmp
 + 
numP¬tInCtuWidth
 + 1 ];

2383 
ùuRsAddr
 = 
	`g‘CtuRsAddr
();

2385 iàÐ
uiAbsP¬tIdxTmp
 % 
numP¬tInCtuWidth
 <‚umPartInCtuWidth - 1 )

2387 
uiAbsP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ (
uiAbsP¬tIdxTmp
 + 
numP¬tInCtuWidth
 + 1è% 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
() ];

2389 iàÐ
uiAbsP¬tIdxTmp
 / 
numP¬tInCtuWidth
 < 
numP¬tInCtuHeight
 - 1 )

2391 
uiAbsP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ 
uiAbsP¬tIdxTmp
 + 1 ];

2392 
ùuRsAddr
 = 
	`g‘CtuRsAddr
() + 1;

2396 
uiAbsP¬tAddr
 = 0;

2400 
iRefIdx
 = 0;

2402 
BoÞ
 
bExi¡MV
 = 
çl£
;

2403 
UIÁ
 
uiP¬tIdxC’‹r
;

2404 
IÁ
 
dœ
 = 0;

2405 
UIÁ
 
uiA¼ayAddr
 = 
iCouÁ
;

2406 
	`xD”iveC’‹rIdx
Ð
uiPUIdx
, 
uiP¬tIdxC’‹r
 );

2407 
bExi¡MV
 = 
ùuRsAddr
 >ð0 && 
	`xG‘CÞMVP
Ð
REF_PIC_LIST_0
, ctuRsAddr, 
uiAbsP¬tAddr
, 
cCÞMv
, 
iRefIdx
 );

2408 ifÐ
bExi¡MV
 =ð
çl£
 )

2410 
bExi¡MV
 = 
	`xG‘CÞMVP
Ð
REF_PIC_LIST_0
, 
	`g‘CtuRsAddr
(), 
uiP¬tIdxC’‹r
, 
cCÞMv
, 
iRefIdx
 );

2412 ifÐ
bExi¡MV
 )

2414 
dœ
 |= 1;

2415 
pcMvF›ldNeighbours
[ 2 * 
uiA¼ayAddr
 ].
	`£tMvF›ld
Ð
cCÞMv
, 
iRefIdx
 );

2418 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2420 
bExi¡MV
 = 
ùuRsAddr
 >ð0 && 
	`xG‘CÞMVP
Ð
REF_PIC_LIST_1
, ctuRsAddr, 
uiAbsP¬tAddr
, 
cCÞMv
, 
iRefIdx
);

2421 ifÐ
bExi¡MV
 =ð
çl£
 )

2423 
bExi¡MV
 = 
	`xG‘CÞMVP
Ð
REF_PIC_LIST_1
, 
	`g‘CtuRsAddr
(), 
uiP¬tIdxC’‹r
, 
cCÞMv
, 
iRefIdx
 );

2425 ifÐ
bExi¡MV
 )

2427 
dœ
 |= 2;

2428 
pcMvF›ldNeighbours
[ 2 * 
uiA¼ayAddr
 + 1 ].
	`£tMvF›ld
Ð
cCÞMv
, 
iRefIdx
 );

2432 ià(
dœ
 != 0)

2434 
puhIÁ”DœNeighbours
[
uiA¼ayAddr
] = 
dœ
;

2435 
abCªdIsIÁ”
[
uiA¼ayAddr
] = 
Œue
;

2437 iàÐ
mrgCªdIdx
 =ð
iCouÁ
 )

2441 
iCouÁ
++;

2445 ià(
iCouÁ
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2450 
UIÁ
 
uiA¼ayAddr
 = 
iCouÁ
;

2451 
UIÁ
 
uiCutoff
 = 
uiA¼ayAddr
;

2453 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2455 cÚ¡ 
UIÁ
 
NUM_PRIORITY_LIST
=12;

2456 cÚ¡ 
UIÁ
 
uiPriÜ™yLi¡0
[
NUM_PRIORITY_LIST
] = {0 , 1, 0, 2, 1, 2, 0, 3, 1, 3, 2, 3};

2457 cÚ¡ 
UIÁ
 
uiPriÜ™yLi¡1
[
NUM_PRIORITY_LIST
] = {1 , 0, 2, 0, 2, 1, 3, 0, 3, 1, 3, 2};

2459 
IÁ
 
idx
=0; idx<
uiCutoff
*(uiCutoff-1è&& 
uiA¼ayAddr
!ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
(); idx++)

2461 
	`as£¹
(
idx
<
NUM_PRIORITY_LIST
);

2462 
IÁ
 
i
 = 
uiPriÜ™yLi¡0
[
idx
];

2463 
IÁ
 
j
 = 
uiPriÜ™yLi¡1
[
idx
];

2464 ià(
abCªdIsIÁ”
[
i
] &&‡bCªdIsIÁ”[
j
]&& (
puhIÁ”DœNeighbours
[i]&0x1)&&(puhInterDirNeighbours[j]&0x2))

2466 
abCªdIsIÁ”
[
uiA¼ayAddr
] = 
Œue
;

2467 
puhIÁ”DœNeighbours
[
uiA¼ayAddr
] = 3;

2470 
pcMvF›ldNeighbours
[
uiA¼ayAddr
 << 1].
	`£tMvF›ld
ÕcMvF›ldNeighbours[
i
<<1].
	`g‘Mv
(),…cMvF›ldNeighbours[i<<1].
	`g‘RefIdx
());

2471 
pcMvF›ldNeighbours
[Ð
uiA¼ayAddr
 << 1 ) + 1].
	`£tMvF›ld
ÕcMvF›ldNeighbours[(
j
<<1)+1].
	`g‘Mv
(),…cMvF›ldNeighbours[(j<<1)+1].
	`g‘RefIdx
());

2473 
IÁ
 
iRefPOCL0
 = 
m_pcSliû
->
	`g‘RefPOC
Ð
REF_PIC_LIST_0
, 
pcMvF›ldNeighbours
[(
uiA¼ayAddr
<<1)].
	`g‘RefIdx
() );

2474 
IÁ
 
iRefPOCL1
 = 
m_pcSliû
->
	`g‘RefPOC
Ð
REF_PIC_LIST_1
, 
pcMvF›ldNeighbours
[(
uiA¼ayAddr
<<1)+1].
	`g‘RefIdx
() );

2475 ià(
iRefPOCL0
 =ð
iRefPOCL1
 && 
pcMvF›ldNeighbours
[(
uiA¼ayAddr
<<1)].
	`g‘Mv
() ==…cMvFieldNeighbours[(uiArrayAddr<<1)+1].getMv())

2477 
abCªdIsIÁ”
[
uiA¼ayAddr
] = 
çl£
;

2481 
uiA¼ayAddr
++;

2487 ià(
uiA¼ayAddr
 =ð
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2492 
IÁ
 
iNumRefIdx
 = (
	`g‘Sliû
()->
	`isIÁ”B
()è? 
	`mš
(
m_pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
), m_pcSliû->g‘NumRefIdx(
REF_PIC_LIST_1
)) : m_pcSlice->getNumRefIdx(REF_PIC_LIST_0);

2494 
IÁ
 
r
 = 0;

2495 
IÁ
 
»fút
 = 0;

2496 
uiA¼ayAddr
 < 
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
())

2498 
abCªdIsIÁ”
[
uiA¼ayAddr
] = 
Œue
;

2499 
puhIÁ”DœNeighbours
[
uiA¼ayAddr
] = 1;

2500 
pcMvF›ldNeighbours
[
uiA¼ayAddr
 << 1].
	`£tMvF›ld
Ð
	`TComMv
(0, 0), 
r
);

2502 iàÐ
	`g‘Sliû
()->
	`isIÁ”B
() )

2504 
puhIÁ”DœNeighbours
[
uiA¼ayAddr
] = 3;

2505 
pcMvF›ldNeighbours
[(
uiA¼ayAddr
 << 1è+ 1].
	`£tMvF›ld
(
	`TComMv
(0, 0), 
r
);

2507 
uiA¼ayAddr
++;

2509 iàÐ
»fút
 =ð
iNumRefIdx
 - 1 )

2511 
r
 = 0;

2515 ++
r
;

2516 ++
»fút
;

2519 
numV®idM”geCªd
 = 
uiA¼ayAddr
;

2520 
	}
}

2526 
BoÞ
 
	gTComD©aCU
::
	$isDiffMER
(
IÁ
 
xN
, IÁ 
yN
, IÁ 
xP
, IÁ 
yP
) const

2529 
UIÁ
 
¶ev–
 = 
this
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘Log2P¬®ËlM”geLev–Mšus2
() + 2;

2530 ià((
xN
>>
¶ev–
)!ð(
xP
>>plevel))

2532  
Œue
;

2534 ià((
yN
>>
¶ev–
)!ð(
yP
>>plevel))

2536  
Œue
;

2538  
çl£
;

2539 
	}
}

2546 
Void
 
	gTComD©aCU
::
	$g‘P¬tPos™iÚ
Ð
UIÁ
 
·¹Idx
, 
IÁ
& 
xP
, IÁ& 
yP
, IÁ& 
nPSW
, IÁ& 
nPSH
) const

2548 
UIÁ
 
cÞ
 = 
m_uiCUP–X
;

2549 
UIÁ
 
row
 = 
m_uiCUP–Y
;

2551  
m_³P¬tSize
[0] )

2553 
SIZE_2NxN
:

2554 
nPSW
 = 
	`g‘Width
(0);

2555 
nPSH
 = 
	`g‘Height
(0) >> 1;

2556 
xP
 = 
cÞ
;

2557 
yP
 = (
·¹Idx
 ==0)? 
row
:„ow + 
nPSH
;

2559 
SIZE_Nx2N
:

2560 
nPSW
 = 
	`g‘Width
(0) >> 1;

2561 
nPSH
 = 
	`g‘Height
(0);

2562 
xP
 = (
·¹Idx
 ==0)? 
cÞ
: cÞ + 
nPSW
;

2563 
yP
 = 
row
;

2565 
SIZE_NxN
:

2566 
nPSW
 = 
	`g‘Width
(0) >> 1;

2567 
nPSH
 = 
	`g‘Height
(0) >> 1;

2568 
xP
 = 
cÞ
 + (
·¹Idx
&0x1)*
nPSW
;

2569 
yP
 = 
row
 + (
·¹Idx
>>1)*
nPSH
;

2571 
SIZE_2NxnU
:

2572 
nPSW
 = 
	`g‘Width
(0);

2573 
nPSH
 = ( 
·¹Idx
 =ð0 ) ? 
	`g‘Height
(0) >> 2 : ( getHeight(0) >> 2 ) + ( getHeight(0) >> 1 );

2574 
xP
 = 
cÞ
;

2575 
yP
 = (
·¹Idx
 ==0)? 
row
:„ow + 
	`g‘Height
(0è- 
nPSH
;

2578 
SIZE_2NxnD
:

2579 
nPSW
 = 
	`g‘Width
(0);

2580 
nPSH
 = ( 
·¹Idx
 =ð0 ) ? ( 
	`g‘Height
(0) >> 2 ) + ( getHeight(0) >> 1 ) : getHeight(0) >> 2;

2581 
xP
 = 
cÞ
;

2582 
yP
 = (
·¹Idx
 ==0)? 
row
:„ow + 
	`g‘Height
(0è- 
nPSH
;

2584 
SIZE_nLx2N
:

2585 
nPSW
 = ( 
·¹Idx
 =ð0 ) ? 
	`g‘Width
(0) >> 2 : ( getWidth(0) >> 2 ) + ( getWidth(0) >> 1 );

2586 
nPSH
 = 
	`g‘Height
(0);

2587 
xP
 = (
·¹Idx
 ==0)? 
cÞ
: cÞ + 
	`g‘Width
(0è- 
nPSW
;

2588 
yP
 = 
row
;

2590 
SIZE_nRx2N
:

2591 
nPSW
 = ( 
·¹Idx
 =ð0 ) ? ( 
	`g‘Width
(0) >> 2 ) + ( getWidth(0) >> 1 ) : getWidth(0) >> 2;

2592 
nPSH
 = 
	`g‘Height
(0);

2593 
xP
 = (
·¹Idx
 ==0)? 
cÞ
: cÞ + 
	`g‘Width
(0è- 
nPSW
;

2594 
yP
 = 
row
;

2597 
	`as£¹
 ( 
m_³P¬tSize
[0] =ð
SIZE_2Nx2N
 );

2598 
nPSW
 = 
	`g‘Width
(0);

2599 
nPSH
 = 
	`g‘Height
(0);

2600 
xP
 = 
cÞ
 ;

2601 
yP
 = 
row
 ;

2605 
	}
}

2614 
Void
 
	gTComD©aCU
::
	$fžlMvpCªd
 ( cÚ¡ 
UIÁ
 
·¹Idx
, cÚ¡ UIÁ 
·¹Addr
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
»fIdx
, 
AMVPInfo
* 
pInfo
 ) const

2616 
pInfo
->
iN
 = 0;

2617 ià(
»fIdx
 < 0)

2619 #ià
MCTS_ENC_CHECK


2620 
pInfo
->
numS·tŸlMVPCªdid©es
 = 0;

2626 
UIÁ
 
·¹IdxLT
, 
·¹IdxRT
, 
·¹IdxLB
;

2627 
	`d”iveLeáRightTÝIdx
Ð
·¹Idx
, 
·¹IdxLT
, 
·¹IdxRT
 );

2628 
	`d”iveLeáBÙtomIdx
Ð
·¹Idx
, 
·¹IdxLB
 );

2630 
BoÞ
 
isSÿËdFÏgLX
 = 
çl£
;

2632 
UIÁ
 
idx
;

2633 cÚ¡ 
TComD©aCU
* 
tmpCU
 = 
	`g‘PUB–owLeá
(
idx
, 
·¹IdxLB
);

2634 
isSÿËdFÏgLX
 = (
tmpCU
 !ð
NULL
è&& (tmpCU->
	`isIÁ”
(
idx
));

2635 ià(!
isSÿËdFÏgLX
)

2637 
tmpCU
 = 
	`g‘PULeá
(
idx
, 
·¹IdxLB
);

2638 
isSÿËdFÏgLX
 = (
tmpCU
 !ð
NULL
è&& (tmpCU->
	`isIÁ”
(
idx
));

2643 ià(
isSÿËdFÏgLX
)

2645 
BoÞ
 
bAdded
 = 
	`xAddMVPCªdUnsÿËd
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLB
, 
MD_BELOW_LEFT
);

2646 ià(!
bAdded
)

2648 
bAdded
 = 
	`xAddMVPCªdUnsÿËd
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLB
, 
MD_LEFT
 );

2649 if(!
bAdded
)

2651 
bAdded
 = 
	`xAddMVPCªdW™hSÿlšg
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLB
, 
MD_BELOW_LEFT
);

2652 ià(!
bAdded
)

2654 
	`xAddMVPCªdW™hSÿlšg
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLB
, 
MD_LEFT
 );

2662 
BoÞ
 
bAdded
 = 
	`xAddMVPCªdUnsÿËd
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxRT
, 
MD_ABOVE_RIGHT
);

2663 ià(!
bAdded
)

2665 
bAdded
 = 
	`xAddMVPCªdUnsÿËd
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxRT
, 
MD_ABOVE
);

2666 if(!
bAdded
)

2668 
	`xAddMVPCªdUnsÿËd
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLT
, 
MD_ABOVE_LEFT
);

2673 if(!
isSÿËdFÏgLX
)

2675 
BoÞ
 
bAdded
 = 
	`xAddMVPCªdW™hSÿlšg
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxRT
, 
MD_ABOVE_RIGHT
);

2676 ià(!
bAdded
)

2678 
bAdded
 = 
	`xAddMVPCªdW™hSÿlšg
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxRT
, 
MD_ABOVE
);

2679 if(!
bAdded
)

2681 
	`xAddMVPCªdW™hSÿlšg
Ð*
pInfo
, 
eRefPicLi¡
, 
»fIdx
, 
·¹IdxLT
, 
MD_ABOVE_LEFT
);

2686 iàÐ
pInfo
->
iN
 == 2 )

2688 iàÐ
pInfo
->
m_acMvCªd
[ 0 ] ==…Info->m_acMvCand[ 1 ] )

2690 
pInfo
->
iN
 = 1;

2693 #ià
MCTS_ENC_CHECK


2694 
pInfo
->
numS·tŸlMVPCªdid©es
 =…Info->
iN
;

2696 ià(
pInfo
->
iN
 < 
AMVP_MAX_NUM_CANDS
 && 
	`g‘Sliû
()->
	`g‘EÇbËTMVPFÏg
() )

2699 cÚ¡ 
UIÁ
 
numP¬tInCtuWidth
 = 
m_pcPic
->
	`g‘NumP¬tInCtuWidth
();

2700 cÚ¡ 
UIÁ
 
numP¬tInCtuHeight
 = 
m_pcPic
->
	`g‘NumP¬tInCtuHeight
();

2701 cÚ¡ 
IÁ
 
»fIdx_CÞ
 = 
»fIdx
;

2702 
TComMv
 
cCÞMv
;

2703 
UIÁ
 
·¹IdxRB
;

2704 
UIÁ
 
absP¬tIdx
;

2706 
	`d”iveRightBÙtomIdx
Ð
·¹Idx
, 
·¹IdxRB
 );

2707 
UIÁ
 
absP¬tAddr
 = 
m_absZIdxInCtu
 + 
·¹Addr
;

2710 
absP¬tIdx
 = 
g_auiZsÿnToRa¡”
[
·¹IdxRB
];

2711 
IÁ
 
ùuRsAddr
 = -1;

2712 iàÐÐÐ
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[
absP¬tIdx
] + m_pcPic->
	`g‘MšCUWidth
 (èè< 
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicWidthInLumaSam¶es
 () )

2713 && ( ( 
m_pcPic
->
	`g‘Ctu
(
m_ùuRsAddr
)->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[
absP¬tIdx
] + m_pcPic->
	`g‘MšCUHeight
(èè< 
m_pcSliû
->
	`g‘SPS
()->
	`g‘PicHeightInLumaSam¶es
() ) )

2715 iàÐÐ
absP¬tIdx
 % 
numP¬tInCtuWidth
 <‚umPartInCtuWidth - 1 ) &&

2716 Ð
absP¬tIdx
 / 
numP¬tInCtuWidth
 < 
numP¬tInCtuHeight
 - 1 ) )

2718 
absP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ 
absP¬tIdx
 + 
numP¬tInCtuWidth
 + 1 ];

2719 
ùuRsAddr
 = 
	`g‘CtuRsAddr
();

2721 iàÐ
absP¬tIdx
 % 
numP¬tInCtuWidth
 <‚umPartInCtuWidth - 1 )

2723 
absP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ (
absP¬tIdx
 + 
numP¬tInCtuWidth
 + 1è% 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
() ];

2725 iàÐ
absP¬tIdx
 / 
numP¬tInCtuWidth
 < 
numP¬tInCtuHeight
 - 1 )

2727 
absP¬tAddr
 = 
g_auiRa¡”ToZsÿn
[ 
absP¬tIdx
 + 1 ];

2728 
ùuRsAddr
 = 
	`g‘CtuRsAddr
() + 1;

2732 
absP¬tAddr
 = 0;

2735 iàÐ
ùuRsAddr
 >ð0 && 
	`xG‘CÞMVP
Ð
eRefPicLi¡
, ctuRsAddr, 
absP¬tAddr
, 
cCÞMv
, 
»fIdx_CÞ
 ) )

2737 
pInfo
->
m_acMvCªd
[pInfo->
iN
++] = 
cCÞMv
;

2741 
UIÁ
 
uiP¬tIdxC’‹r
;

2742 
	`xD”iveC’‹rIdx
Ð
·¹Idx
, 
uiP¬tIdxC’‹r
 );

2743 ià(
	`xG‘CÞMVP
Ð
eRefPicLi¡
, 
	`g‘CtuRsAddr
(), 
uiP¬tIdxC’‹r
, 
cCÞMv
, 
»fIdx_CÞ
 ))

2745 
pInfo
->
m_acMvCªd
[pInfo->
iN
++] = 
cCÞMv
;

2751 
pInfo
->
iN
 < 
AMVP_MAX_NUM_CANDS
)

2753 
pInfo
->
m_acMvCªd
[pInfo->
iN
].
	`£t
(0,0);

2754 
pInfo
->
iN
++;

2757 
	}
}

2760 
BoÞ
 
	gTComD©aCU
::
	$isB»dRe¡riùiÚ
(
UIÁ
 
puIdx
) const

2762 
IÁ
 
width
 = 0;

2763 
IÁ
 
height
 = 0;

2764 
UIÁ
 
·¹Addr
;

2766 
	`g‘P¬tIndexAndSize
Ð
puIdx
, 
·¹Addr
, 
width
, 
height
 );

2767 iàÐ
	`g‘Width
(0è=ð8 && (
width
 < 8 || 
height
 < 8) )

2769  
Œue
;

2771  
çl£
;

2772 
	}
}

2775 
Void
 
	gTComD©aCU
::
	$þMv
 (
TComMv
& 
rcMv
) const

2777 cÚ¡ 
TComSPS
 &
¥s
=*(
m_pcSliû
->
	`g‘SPS
());

2778 
IÁ
 
iMvShiá
 = 2;

2779 
IÁ
 
iOff£t
 = 8;

2780 
IÁ
 
iHÜMax
 = ( 
¥s
.
	`g‘PicWidthInLumaSam¶es
(è+ 
iOff£t
 - (IÁ)
m_uiCUP–X
 - 1 ) << 
iMvShiá
;

2781 
IÁ
 
iHÜMš
 = ( -(IÁ)
¥s
.
	`g‘MaxCUWidth
(è- 
iOff£t
 - (IÁ)
m_uiCUP–X
 + 1 ) << 
iMvShiá
;

2783 
IÁ
 
iV”Max
 = ( 
¥s
.
	`g‘PicHeightInLumaSam¶es
(è+ 
iOff£t
 - (IÁ)
m_uiCUP–Y
 - 1 ) << 
iMvShiá
;

2784 
IÁ
 
iV”Mš
 = ( -(IÁ)
¥s
.
	`g‘MaxCUHeight
(è- 
iOff£t
 - (IÁ)
m_uiCUP–Y
 + 1 ) << 
iMvShiá
;

2786 
rcMv
.
	`£tHÜ
Ð
	`mš
 (
iHÜMax
, 
	`max
 (
iHÜMš
,„cMv.
	`g‘HÜ
())) );

2787 
rcMv
.
	`£tV”
Ð
	`mš
 (
iV”Max
, 
	`max
 (
iV”Mš
,„cMv.
	`g‘V”
())) );

2788 
	}
}

2791 
UIÁ
 
	gTComD©aCU
::
	$g‘IÁ¿SizeIdx
(
UIÁ
 
uiAbsP¬tIdx
) const

2793 
UIÁ
 
uiShiá
 = ( 
m_³P¬tSize
[
uiAbsP¬tIdx
]==
SIZE_NxN
 ? 1 : 0 );

2795 
UCh¬
 
uiWidth
 = 
m_puhWidth
[
uiAbsP¬tIdx
]>>
uiShiá
;

2796 
UIÁ
 
uiCÁ
 = 0;

2797  
uiWidth
 )

2799 
uiCÁ
++;

2800 
uiWidth
>>=1;

2802 
uiCÁ
-=2;

2803  
uiCÁ
 > 6 ? 6 : uiCnt;

2804 
	}
}

2806 
Void
 
	gTComD©aCU
::
	$þ—rCbf
Ð
UIÁ
 
uiIdx
, 
CompÚ’tID
 
compID
, UIÁ 
uiNumP¬ts
 )

2808 
	`mem£t
Ð&
m_puhCbf
[
compID
][
uiIdx
], 0, (
UCh¬
)*
uiNumP¬ts
);

2809 
	}
}

2817 
Void
 
	gTComD©aCU
::
	$£tIPCMFÏgSubP¬ts
 (
BoÞ
 
bIpcmFÏg
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
)

2819 
UIÁ
 
uiCu¼P¬tNumb
 = 
m_pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
 << 1);

2821 
	`mem£t
(
m_pbIPCMFÏg
 + 
uiAbsP¬tIdx
, 
bIpcmFÏg
, (
BoÞ
)*
uiCu¼P¬tNumb
 );

2822 
	}
}

2828 
BoÞ
 
	gTComD©aCU
::
	$isSk³d
Ð
UIÁ
 
uiP¬tIdx
 ) const

2830  ( 
	`g‘SkFÏg
Ð
uiP¬tIdx
 ) );

2831 
	}
}

2837 
BoÞ
 
	gTComD©aCU
::
	$xAddMVPCªdUnsÿËd
Ð
AMVPInfo
 &
šfo
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
iRefIdx
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
, cÚ¡ 
MVP_DIR
 
eDœ
 ) const

2839 cÚ¡ 
TComD©aCU
* 
ÃibCU
 = 
NULL
;

2840 
UIÁ
 
ÃibPUP¬tIdx
;

2841  
eDœ
 )

2843 
MD_LEFT
:

2845 
ÃibCU
 = 
	`g‘PULeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2848 
MD_ABOVE
:

2850 
ÃibCU
 = 
	`g‘PUAbove
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2853 
MD_ABOVE_RIGHT
:

2855 
ÃibCU
 = 
	`g‘PUAboveRight
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2858 
MD_BELOW_LEFT
:

2860 
ÃibCU
 = 
	`g‘PUB–owLeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2863 
MD_ABOVE_LEFT
:

2865 
ÃibCU
 = 
	`g‘PUAboveLeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2874 iàÐ
ÃibCU
 =ð
NULL
 )

2876  
çl£
;

2879 cÚ¡ 
IÁ
 
cu¼RefPOC
 = 
m_pcSliû
->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdx
)->
	`g‘POC
();

2880 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡2nd
 = (
eRefPicLi¡
 =ð
REF_PIC_LIST_0
è? 
REF_PIC_LIST_1
 : REF_PIC_LIST_0;

2882 
IÁ
 
´ediùÜSourû
=0;…redictorSource<2;…redictorSource++)

2884 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡Index
 = (
´ediùÜSourû
==0è? 
eRefPicLi¡
 : 
eRefPicLi¡2nd
;

2885 cÚ¡ 
IÁ
 
ÃibRefIdx
 = 
ÃibCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡Index
)->
	`g‘RefIdx
(
ÃibPUP¬tIdx
);

2887 iàÐ
ÃibRefIdx
 >ð0 && 
cu¼RefPOC
 =ð
ÃibCU
->
	`g‘Sliû
()->
	`g‘RefPOC
Ð
eRefPicLi¡Index
,‚eibRefIdx ))

2889 
šfo
.
m_acMvCªd
[šfo.
iN
++] = 
ÃibCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡Index
)->
	`g‘Mv
(
ÃibPUP¬tIdx
);

2890  
Œue
;

2894  
çl£
;

2895 
	}
}

2905 
BoÞ
 
	gTComD©aCU
::
	$xAddMVPCªdW™hSÿlšg
Ð
AMVPInfo
 &
šfo
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
iRefIdx
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
, cÚ¡ 
MVP_DIR
 
eDœ
 ) const

2907 cÚ¡ 
TComD©aCU
* 
ÃibCU
 = 
NULL
;

2908 
UIÁ
 
ÃibPUP¬tIdx
;

2909  
eDœ
 )

2911 
MD_LEFT
:

2913 
ÃibCU
 = 
	`g‘PULeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2916 
MD_ABOVE
:

2918 
ÃibCU
 = 
	`g‘PUAbove
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2921 
MD_ABOVE_RIGHT
:

2923 
ÃibCU
 = 
	`g‘PUAboveRight
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2926 
MD_BELOW_LEFT
:

2928 
ÃibCU
 = 
	`g‘PUB–owLeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2931 
MD_ABOVE_LEFT
:

2933 
ÃibCU
 = 
	`g‘PUAboveLeá
(
ÃibPUP¬tIdx
, 
uiP¬tUn™Idx
);

2942 iàÐ
ÃibCU
 =ð
NULL
 )

2944  
çl£
;

2947 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡2nd
 = (
eRefPicLi¡
 =ð
REF_PIC_LIST_0
è? 
REF_PIC_LIST_1
 : REF_PIC_LIST_0;

2949 cÚ¡ 
IÁ
 
cu¼POC
 = 
m_pcSliû
->
	`g‘POC
();

2950 cÚ¡ 
IÁ
 
cu¼RefPOC
 = 
m_pcSliû
->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdx
)->
	`g‘POC
();

2951 cÚ¡ 
BoÞ
 
bIsCu¼RefLÚgT”m
 = 
m_pcSliû
->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdx
)->
	`g‘IsLÚgT”m
();

2952 cÚ¡ 
IÁ
 
ÃibPOC
 = 
cu¼POC
;

2954 
IÁ
 
´ediùÜSourû
=0;…redictorSource<2;…redictorSource++)

2956 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡Index
 = (
´ediùÜSourû
==0è? 
eRefPicLi¡
 : 
eRefPicLi¡2nd
;

2957 cÚ¡ 
IÁ
 
ÃibRefIdx
 = 
ÃibCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡Index
)->
	`g‘RefIdx
(
ÃibPUP¬tIdx
);

2958 ifÐ
ÃibRefIdx
 >= 0)

2960 cÚ¡ 
BoÞ
 
bIsNeibRefLÚgT”m
 = 
ÃibCU
->
	`g‘Sliû
()->
	`g‘RefPic
Ð
eRefPicLi¡Index
, 
ÃibRefIdx
 )->
	`g‘IsLÚgT”m
();

2962 iàÐ
bIsCu¼RefLÚgT”m
 =ð
bIsNeibRefLÚgT”m
 )

2964 cÚ¡ 
TComMv
 &
cMvP»d
 = 
ÃibCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡Index
)->
	`g‘Mv
(
ÃibPUP¬tIdx
);

2965 
TComMv
 
rcMv
;

2966 iàÐ
bIsCu¼RefLÚgT”m
 )

2968 
rcMv
 = 
cMvP»d
;

2972 cÚ¡ 
IÁ
 
ÃibRefPOC
 = 
ÃibCU
->
	`g‘Sliû
()->
	`g‘RefPOC
Ð
eRefPicLi¡Index
, 
ÃibRefIdx
 );

2973 cÚ¡ 
IÁ
 
sÿË
 = 
	`xG‘Di¡SÿËFaùÜ
Ð
cu¼POC
, 
cu¼RefPOC
, 
ÃibPOC
, 
ÃibRefPOC
 );

2974 iàÐ
sÿË
 == 4096 )

2976 
rcMv
 = 
cMvP»d
;

2980 
rcMv
 = 
cMvP»d
.
	`sÿËMv
Ð
sÿË
 );

2984 
šfo
.
m_acMvCªd
[šfo.
iN
++] = 
rcMv
;

2985  
Œue
;

2989  
çl£
;

2990 
	}
}

2992 
BoÞ
 
	gTComD©aCU
::
	$xG‘CÞMVP
ÐcÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
ùuRsAddr
, cÚ¡ IÁ 
·¹Un™Idx
, 
TComMv
& 
rcMv
, cÚ¡ IÁ 
»fIdx
 ) const

2994 cÚ¡ 
UIÁ
 
absP¬tAddr
 = 
·¹Un™Idx
;

2997 cÚ¡ 
TComPic
 * cÚ¡ 
pCÞPic
 = 
	`g‘Sliû
()->
	`g‘RefPic
Ð
	`RefPicLi¡
(g‘Sliû()->
	`isIÁ”B
(è? 1-g‘Sliû()->
	`g‘CÞFromL0FÏg
(è: 0), g‘Sliû()->
	`g‘CÞRefIdx
());

2998 #ià
REDUCED_ENCODER_MEMORY


2999 ià(!
pCÞPic
->
	`g‘PicSym
()->
	`hasDPBP”CtuD©a
())

3001  
çl£
;

3003 cÚ¡ 
TComPicSym
::
DPBP”CtuD©a
 * cÚ¡ 
pCÞDpbCtu
 = &(
pCÞPic
->
	`g‘PicSym
()->
	`g‘DPBP”CtuD©a
(
ùuRsAddr
));

3004 cÚ¡ 
TComSliû
 * cÚ¡ 
pCÞSliû
 = 
pCÞDpbCtu
->
	`g‘Sliû
();

3005 if(
pCÞDpbCtu
->
	`g‘P¬t™iÚSize
(
·¹Un™Idx
)==
NUMBER_OF_PART_SIZES
)

3007 cÚ¡ 
TComD©aCU
 * cÚ¡ 
pCÞCtu
 = 
pCÞPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

3008 if(
pCÞCtu
->
	`g‘Pic
()==0 ||…CÞCtu->
	`g‘P¬t™iÚSize
(
·¹Un™Idx
)==
NUMBER_OF_PART_SIZES
)

3011  
çl£
;

3014 #ià
REDUCED_ENCODER_MEMORY


3015 ià(!
pCÞDpbCtu
->
	`isIÁ”
(
absP¬tAddr
))

3017 ià(!
pCÞCtu
->
	`isIÁ”
(
absP¬tAddr
))

3020  
çl£
;

3023 
RefPicLi¡
 
eCÞRefPicLi¡
 = 
	`g‘Sliû
()->
	`g‘CheckLDC
(è? 
eRefPicLi¡
 : 
	`RefPicLi¡
(g‘Sliû()->
	`g‘CÞFromL0FÏg
());

3024 #ià
REDUCED_ENCODER_MEMORY


3025 
IÁ
 
iCÞRefIdx
 = 
pCÞDpbCtu
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
eCÞRefPicLi¡
))->
	`g‘RefIdx
(
absP¬tAddr
);

3027 
IÁ
 
iCÞRefIdx
 = 
pCÞCtu
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
eCÞRefPicLi¡
))->
	`g‘RefIdx
(
absP¬tAddr
);

3030 ià(
iCÞRefIdx
 < 0 )

3032 
eCÞRefPicLi¡
 = 
	`RefPicLi¡
(1 -ƒColRefPicList);

3033 #ià
REDUCED_ENCODER_MEMORY


3034 
iCÞRefIdx
 = 
pCÞDpbCtu
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
eCÞRefPicLi¡
))->
	`g‘RefIdx
(
absP¬tAddr
);

3036 
iCÞRefIdx
 = 
pCÞCtu
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
eCÞRefPicLi¡
))->
	`g‘RefIdx
(
absP¬tAddr
);

3039 ià(
iCÞRefIdx
 < 0 )

3041  
çl£
;

3045 cÚ¡ 
BoÞ
 
bIsCu¼RefLÚgT”m
 = 
m_pcSliû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdx
)->
	`g‘IsLÚgT”m
();

3046 #ià
REDUCED_ENCODER_MEMORY


3047 cÚ¡ 
BoÞ
 
bIsCÞRefLÚgT”m
 = 
pCÞSliû
->
	`g‘IsU£dAsLÚgT”m
(
eCÞRefPicLi¡
, 
iCÞRefIdx
);

3049 cÚ¡ 
BoÞ
 
bIsCÞRefLÚgT”m
 = 
pCÞCtu
->
	`g‘Sliû
()->
	`g‘IsU£dAsLÚgT”m
(
eCÞRefPicLi¡
, 
iCÞRefIdx
);

3052 iàÐ
bIsCu¼RefLÚgT”m
 !ð
bIsCÞRefLÚgT”m
 )

3054  
çl£
;

3058 #ià
REDUCED_ENCODER_MEMORY


3059 cÚ¡ 
TComMv
 &
cCÞMv
 = 
pCÞDpbCtu
->
	`g‘CUMvF›ld
(
eCÞRefPicLi¡
)->
	`g‘Mv
(
absP¬tAddr
);

3061 cÚ¡ 
TComMv
 &
cCÞMv
 = 
pCÞCtu
->
	`g‘CUMvF›ld
(
eCÞRefPicLi¡
)->
	`g‘Mv
(
absP¬tAddr
);

3063 iàÐ
bIsCu¼RefLÚgT”m
 )

3065 
rcMv
 = 
cCÞMv
;

3069 cÚ¡ 
IÁ
 
cu¼POC
 = 
m_pcSliû
->
	`g‘POC
();

3070 #ià
REDUCED_ENCODER_MEMORY


3071 cÚ¡ 
IÁ
 
cÞPOC
 = 
pCÞSliû
->
	`g‘POC
();

3072 cÚ¡ 
IÁ
 
cÞRefPOC
 = 
pCÞSliû
->
	`g‘RefPOC
(
eCÞRefPicLi¡
, 
iCÞRefIdx
);

3074 cÚ¡ 
IÁ
 
cÞPOC
 = 
pCÞCtu
->
	`g‘Sliû
()->
	`g‘POC
();

3075 cÚ¡ 
IÁ
 
cÞRefPOC
 = 
pCÞCtu
->
	`g‘Sliû
()->
	`g‘RefPOC
(
eCÞRefPicLi¡
, 
iCÞRefIdx
);

3077 cÚ¡ 
IÁ
 
cu¼RefPOC
 = 
m_pcSliû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdx
)->
	`g‘POC
();

3078 cÚ¡ 
IÁ
 
sÿË
 = 
	`xG‘Di¡SÿËFaùÜ
(
cu¼POC
, 
cu¼RefPOC
, 
cÞPOC
, 
cÞRefPOC
);

3079 iàÐ
sÿË
 == 4096 )

3081 
rcMv
 = 
cCÞMv
;

3085 
rcMv
 = 
cCÞMv
.
	`sÿËMv
Ð
sÿË
 );

3089  
Œue
;

3090 
	}
}

3093 
IÁ
 
	gTComD©aCU
::
	$xG‘Di¡SÿËFaùÜ
(
IÁ
 
iCu¼POC
, IÁ 
iCu¼RefPOC
, IÁ 
iCÞPOC
, IÁ 
iCÞRefPOC
)

3095 
IÁ
 
iDiffPocD
 = 
iCÞPOC
 - 
iCÞRefPOC
;

3096 
IÁ
 
iDiffPocB
 = 
iCu¼POC
 - 
iCu¼RefPOC
;

3098 ifÐ
iDiffPocD
 =ð
iDiffPocB
 )

3104 
IÁ
 
iTDB
 = 
	`Cl3
Ð-128, 127, 
iDiffPocB
 );

3105 
IÁ
 
iTDD
 = 
	`Cl3
Ð-128, 127, 
iDiffPocD
 );

3106 
IÁ
 
iX
 = (0x4000 + 
	`abs
(
iTDD
/2)) / iTDD;

3107 
IÁ
 
iSÿË
 = 
	`Cl3
Ð-4096, 4095, (
iTDB
 * 
iX
 + 32) >> 6 );

3108  
iSÿË
;

3110 
	}
}

3112 
Void
 
	gTComD©aCU
::
	$xD”iveC’‹rIdx
Ð
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxC’‹r
 ) const

3114 
UIÁ
 
uiP¬tAddr
;

3115 
IÁ
 
iP¬tWidth
;

3116 
IÁ
 
iP¬tHeight
;

3117 
	`g‘P¬tIndexAndSize
Ð
uiP¬tIdx
, 
uiP¬tAddr
, 
iP¬tWidth
, 
iP¬tHeight
);

3119 
ruiP¬tIdxC’‹r
 = 
m_absZIdxInCtu
+
uiP¬tAddr
;

3120 
ruiP¬tIdxC’‹r
 = 
g_auiRa¡”ToZsÿn
[ 
g_auiZsÿnToRa¡”
[„uiPartIdxCenter ]

3121 + ( 
iP¬tHeight
/
m_pcPic
->
	`g‘MšCUHeight
(è)/2*m_pcPic->
	`g‘NumP¬tInCtuWidth
()

3122 + ( 
iP¬tWidth
/
m_pcPic
->
	`g‘MšCUWidth
() )/2];

3123 
	}
}

3125 
Void
 
	gTComD©aCU
::
	$com´essMV
()

3127 #ià
REDUCED_ENCODER_MEMORY


3128 cÚ¡ 
IÁ
 
sÿËFaùÜ
 = 
¡d
::
max
<IÁ>(1,4 * 
AMVP_DECIMATION_FACTOR
 / 
m_un™Size
);

3129 
TComPicSym
 &
picSym
=*(
	`g‘Pic
()->
	`g‘PicSym
());

3130 
TComPicSym
::
DPBP”CtuD©a
 &
dpbFÜCtu
=
picSym
.
	`g‘DPBP”CtuD©a
(
	`g‘CtuRsAddr
());

3132 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

3134 
dpbFÜCtu
.
m_CUMvF›ld
[
i
].
	`com´ess
(dpbFÜCtu.
m_³P»dMode
, m_³P»dMode, 
sÿËFaùÜ
,
m_acCUMvF›ld
[i]);

3135 
	`memýy
(
dpbFÜCtu
.
m_³P¬tSize
, m_³P¬tSize, (*m_³P¬tSize)*
m_uiNumP¬t™iÚ
);

3136 
dpbFÜCtu
.
m_pSliû
 = 
	`g‘Sliû
();

3139 
IÁ
 
sÿËFaùÜ
 = 4 * 
AMVP_DECIMATION_FACTOR
 / 
m_un™Size
;

3140 ià(
sÿËFaùÜ
 > 0)

3142 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

3144 
m_acCUMvF›ld
[
i
].
	`com´ess
(
m_³P»dMode
, 
sÿËFaùÜ
);

3148 
	}
}

3150 
UIÁ
 
	gTComD©aCU
::
	$g‘CÛfSÿnIdx
(cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
) const

3156 ià(!
	`isIÁ¿
(
uiAbsP¬tIdx
))

3158  
SCAN_DIAG
;

3165 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

3167 cÚ¡ 
UIÁ
 
maximumWidth
 = 
MDCS_MAXIMUM_WIDTH
 >> 
	`g‘CompÚ’tSÿËX
(
compID
, 
fÜm©
);

3168 cÚ¡ 
UIÁ
 
maximumHeight
 = 
MDCS_MAXIMUM_HEIGHT
 >> 
	`g‘CompÚ’tSÿËY
(
compID
, 
fÜm©
);

3170 ià((
uiWidth
 > 
maximumWidth
è|| (
uiHeight
 > 
maximumHeight
))

3172  
SCAN_DIAG
;

3179 
UIÁ
 
uiDœMode
 = 
	`g‘IÁ¿Dœ
(
	`toChªÃlTy³
(
compID
), 
uiAbsP¬tIdx
);

3181 ià(
uiDœMode
==
DM_CHROMA_IDX
)

3183 cÚ¡ 
TComSPS
 *
¥s
=
	`g‘Sliû
()->
	`g‘SPS
();

3184 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
->
	`g‘MaxTÙ®CUD•th
(è- sps->
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

3185 
uiDœMode
 = 
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
	`g‘Pic
()->
	`g‘ChromaFÜm©
(), 
·¹sP”MšCU
));

3188 ià(
	`isChroma
(
compID
è&& (
fÜm©
 =ð
CHROMA_422
))

3190 
uiDœMode
 = 
g_chroma422IÁ¿AngËM­pšgTabË
[uiDirMode];

3195 ià(
	`abs
((
IÁ
)
uiDœMode
 - 
VER_IDX
è<ð
MDCS_ANGLE_LIMIT
)

3197  
SCAN_HOR
;

3199 ià(
	`abs
((
IÁ
)
uiDœMode
 - 
HOR_IDX
è<ð
MDCS_ANGLE_LIMIT
)

3201  
SCAN_VER
;

3205  
SCAN_DIAG
;

3207 
	}
}

3209 #ià
MCTS_ENC_CHECK


3210 
BoÞ
 
	gTComD©aCU
::
	$isLa¡CÞumnCTUInTže
() const

3212 
UIÁ
 
cu¼’tTžeIdx
 = 
this
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘TžeIdxM­
Ñhis->
	`g‘CtuRsAddr
());

3213 
TComTže
 *
pCu¼’tTže
 = 
m_pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
cu¼’tTžeIdx
);

3214 
UIÁ
 
äameWidthInCtus
 = 
m_pcPic
->
	`g‘PicSym
()->
	`g‘F¿meWidthInCtus
();

3215 
UIÁ
 
rightEdgeCTUPosInCu¼’tTže
 = 
pCu¼’tTže
->
	`g‘RightEdgePosInCtus
();

3216 
UIÁ
 
ùuXPosInCtus
 = 
this
->
	`g‘CtuRsAddr
(è% 
äameWidthInCtus
;

3218  (
rightEdgeCTUPosInCu¼’tTže
 =ð
ùuXPosInCtus
);

3219 
	}
}

	@source/Lib/TLibCommon/TComDataCU.h

39 #iâdeà
__TCOMDATACU__


40 
	#__TCOMDATACU__


	)

42 
	~<®gÜ™hm
>

43 
	~<veùÜ
>

46 
	~"CommÚDef.h
"

47 
	~"TComMÙiÚInfo.h
"

48 
	~"TComSliû.h
"

49 
	~"TComRdCo¡.h
"

50 
	~"TComP©‹º.h
"

55 
þass
 
	gTComTU
;

57 cÚ¡ 
UIÁ
 
	gNUM_MOST_PROBABLE_MODES
=3;

64 þas 
	cTComD©aCU


66 
	mpublic
:

72 
TComPic
* 
m_pcPic
;

73 
TComSliû
* 
	mm_pcSliû
;

79 
UIÁ
 
	mm_ùuRsAddr
;

80 
UIÁ
 
	mm_absZIdxInCtu
;

81 
UIÁ
 
	mm_uiCUP–X
;

82 
UIÁ
 
	mm_uiCUP–Y
;

83 
UIÁ
 
	mm_uiNumP¬t™iÚ
;

84 
UCh¬
* 
	mm_puhWidth
;

85 
UCh¬
* 
	mm_puhHeight
;

86 
UCh¬
* 
	mm_puhD•th
;

87 
IÁ
 
	mm_un™Size
;

93 
BoÞ
* 
	mm_skFÏg
;

94 
SCh¬
* 
	mm_³P¬tSize
;

95 
SCh¬
* 
	mm_³P»dMode
;

96 
SCh¬
* 
	mm_üossCompÚ’tP»diùiÚAÍha
[
MAX_NUM_COMPONENT
];

97 
BoÞ
* 
	mm_CUT¿nsquªtBy·ss
;

98 
SCh¬
* 
	mm_phQP
;

99 
UCh¬
* 
	mm_ChromaQpAdj
;

100 
UIÁ
 
	mm_codedChromaQpAdj
;

101 
UCh¬
* 
	mm_puhTrIdx
;

102 
UCh¬
* 
	mm_puhT¿nsfÜmSk
[
MAX_NUM_COMPONENT
];

103 
UCh¬
* 
	mm_puhCbf
[
MAX_NUM_COMPONENT
];

104 
TComCUMvF›ld
 
	mm_acCUMvF›ld
[
NUM_REF_PIC_LIST_01
];

105 
TCÛff
* 
	mm_pcTrCÛff
[
MAX_NUM_COMPONENT
];

106 #ià
ADAPTIVE_QP_SELECTION


107 
TCÛff
* 
	mm_pcA¾CÛff
[
MAX_NUM_COMPONENT
];

108 
BoÞ
 
	mm_A¾CÛffIsAlŸ£dAÎoÿtiÚ
;

111 
P–
* 
	mm_pcIPCMSam¶e
[
MAX_NUM_COMPONENT
];

117 
TComD©aCU
* 
	mm_pCtuAboveLeá
;

118 
TComD©aCU
* 
	mm_pCtuAboveRight
;

119 
TComD©aCU
* 
	mm_pCtuAbove
;

120 
TComD©aCU
* 
	mm_pCtuLeá
;

121 
TComMvF›ld
 
	mm_cMvF›ldA
;

122 
TComMvF›ld
 
	mm_cMvF›ldB
;

123 
TComMvF›ld
 
	mm_cMvF›ldC
;

124 
TComMv
 
	mm_cMvP»d
;

130 
BoÞ
* 
	mm_pbM”geFÏg
;

131 
UCh¬
* 
	mm_puhM”geIndex
;

132 #ià
AMP_MRG


133 
BoÞ
 
	mm_bIsM”geAMP
;

135 
UCh¬
* 
	mm_puhIÁ¿Dœ
[
MAX_NUM_CHANNEL_TYPE
];

136 
UCh¬
* 
	mm_puhIÁ”Dœ
;

137 
SCh¬
* 
	mm_­iMVPIdx
[
NUM_REF_PIC_LIST_01
];

138 
SCh¬
* 
	mm_­iMVPNum
[
NUM_REF_PIC_LIST_01
];

139 
BoÞ
* 
	mm_pbIPCMFÏg
;

140 #ià
MCTS_ENC_CHECK


141 
BoÞ
 
	mm_tMùsMvpIsV®id
;

148 
BoÞ
 
	mm_bDecSubCu
;

149 
DoubË
 
	mm_dTÙ®Co¡
;

150 
Di¡ÜtiÚ
 
	mm_uiTÙ®Di¡ÜtiÚ
;

151 
UIÁ
 
	mm_uiTÙ®B™s
;

152 
UIÁ
 
	mm_uiTÙ®Bšs
;

153 
SCh¬
 
	mm_codedQP
;

154 
UCh¬
* 
	mm_ex¶ic™RdpcmMode
[
MAX_NUM_COMPONENT
];

156 
	m´Ùeùed
:

159 
BoÞ
 
	$xAddMVPCªdUnsÿËd
 ( 
AMVPInfo
 &
šfo
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
iRefIdx
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
, cÚ¡ 
MVP_DIR
 
eDœ
 ) const;

160 
BoÞ
 
	$xAddMVPCªdW™hSÿlšg
 ( 
AMVPInfo
 &
šfo
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
iRefIdx
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
, cÚ¡ 
MVP_DIR
 
eDœ
 ) const;

162 
Void
 
	$d”iveRightBÙtomIdx
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxRB
 ) const;

163 
BoÞ
 
	$xG‘CÞMVP
 ( cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
ùuRsAddr
, cÚ¡ IÁ 
·¹Un™Idx
, 
TComMv
& 
rcMv
, cÚ¡ IÁ 
»fIdx
 ) const;

166 
IÁ
 
	`xG‘Di¡SÿËFaùÜ
 ( IÁ 
iCu¼POC
, IÁ 
iCu¼RefPOC
, IÁ 
iCÞPOC
, IÁ 
iCÞRefPOC
 );

168 
Void
 
	$xD”iveC’‹rIdx
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxC’‹r
 ) const;

170 
public
:

171 
	`TComD©aCU
();

172 
vœtu®
 ~
	`TComD©aCU
();

178 
Void
 
	`ü—‹
 ( 
ChromaFÜm©
 
chromaFÜm©IDC
, 
UIÁ
 
uiNumP¬t™iÚ
, UIÁ 
uiWidth
, UIÁ 
uiHeight
, 
BoÞ
 
bDecSubCu
, 
IÁ
 
un™Size


179 #ià
ADAPTIVE_QP_SELECTION


180 , 
TCÛff
 *
pP¬’tARLBufãr
 = 0

183 
Void
 
	`de¡roy
 ( );

185 
Void
 
	`š™Ctu
 ( 
TComPic
* 
pcPic
, 
UIÁ
 
ùuRsAddr
 );

186 
Void
 
	`š™E¡D©a
 ( cÚ¡ 
UIÁ
 
uiD•th
, cÚ¡ 
IÁ
 
qp
, cÚ¡ 
BoÞ
 
bT¿nsquªtBy·ss
 );

187 
Void
 
	`š™SubCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tUn™Idx
, UIÁ 
uiD•th
, 
IÁ
 
qp
 );

188 
Void
 
	`£tOutsideCUP¬t
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

190 
Void
 
	`cÝySubCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tUn™Idx
 );

191 
Void
 
	`cÝyIÁ”P»dInfoFrom
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
 );

192 
Void
 
	`cÝyP¬tFrom
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tUn™Idx
, UIÁ 
uiD•th
 );

194 
Void
 
	`cÝyToPic
 ( 
UCh¬
 
uiD•th
 );

200 
TComPic
* 
	$g‘Pic
 ( ) {  
m_pcPic
; }

201 cÚ¡ 
TComPic
* 
	$g‘Pic
 ( ) cÚ¡ {  
m_pcPic
; 
	}
}

202 
TComSliû
* 
	$g‘Sliû
 ( ) {  
m_pcSliû
; 
	}
}

203 cÚ¡ 
TComSliû
* 
	$g‘Sliû
 ( ) cÚ¡ {  
m_pcSliû
; 
	}
}

204 
	gUIÁ
& 
	$g‘CtuRsAddr
 ( ) {  
m_ùuRsAddr
; 
	}
}

205 
UIÁ
 
	$g‘CtuRsAddr
 ( ) cÚ¡ {  
m_ùuRsAddr
; 
	}
}

206 
UIÁ
 
	$g‘ZÜd”IdxInCtu
 ( ) cÚ¡ {  
m_absZIdxInCtu
; 
	}
}

207 
UIÁ
 
	$g‘CUP–X
 ( ) cÚ¡ {  
m_uiCUP–X
; 
	}
}

208 
UIÁ
 
	$g‘CUP–Y
 ( ) cÚ¡ {  
m_uiCUP–Y
; 
	}
}

210 
UCh¬
* 
	$g‘D•th
 ( ) {  
m_puhD•th
; 
	}
}

211 
UCh¬
 
	$g‘D•th
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhD•th
[uiIdx]; 
	}
}

212 
Void
 
	$£tD•th
 ( 
UIÁ
 
uiIdx
, 
UCh¬
 
uh
 ) { 
m_puhD•th
[uiIdx] = uh; 
	}
}

214 
Void
 
£tD•thSubP¬ts
 ( 
UIÁ
 
uiD•th
, UIÁ 
uiAbsP¬tIdx
 );

216 #ià
MCTS_ENC_CHECK


217 
Void
 
	$£tTMùsMvpIsV®id
(
BoÞ
 
b
è{ 
m_tMùsMvpIsV®id
 = b; 
	}
}

218 
BoÞ
 
	$g‘TMùsMvpIsV®id
(è{  
m_tMùsMvpIsV®id
; 
	}
}

219 
BoÞ
 
	$isLa¡CÞumnCTUInTže
() const;

226 
SCh¬
* 
	$g‘P¬t™iÚSize
 ( ) {  
m_³P¬tSize
; 
	}
}

227 
P¬tSize
 
	$g‘P¬t™iÚSize
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
¡©ic_ÿ¡
<
P¬tSize
>Ð
m_³P¬tSize
[uiIdx] ); 
	}
}

228 
Void
 
	$£tP¬t™iÚSize
 ( 
UIÁ
 
uiIdx
, 
P¬tSize
 
uh
 ) { 
m_³P¬tSize
[uiIdx] = uh; 
	}
}

229 
Void
 
£tP¬tSizeSubP¬ts
 ( 
P¬tSize
 
eMode
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

230 
Void
 
£tCUT¿nsquªtBy·ssSubP¬ts
 ( 
BoÞ
 
æag
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

232 
BoÞ
* 
	$g‘SkFÏg
 ( ) {  
m_skFÏg
; 
	}
}

233 
BoÞ
 
	$g‘SkFÏg
 ( 
UIÁ
 
idx
 ) cÚ¡ {  
m_skFÏg
[idx]; 
	}
}

234 
Void
 
	$£tSkFÏg
 ( 
UIÁ
 
idx
, 
BoÞ
 
sk
 ) { 
m_skFÏg
[idx] = sk; 
	}
}

235 
Void
 
£tSkFÏgSubP¬ts
 ( 
BoÞ
 
sk
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
 );

237 
SCh¬
* 
	$g‘P»diùiÚMode
 ( ) {  
m_³P»dMode
; 
	}
}

238 
P»dMode
 
	$g‘P»diùiÚMode
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
¡©ic_ÿ¡
<
P»dMode
>Ð
m_³P»dMode
[uiIdx] ); 
	}
}

239 
Void
 
	$£tP»diùiÚMode
 ( 
UIÁ
 
uiIdx
, 
P»dMode
 
uh
 ) { 
m_³P»dMode
[uiIdx] = uh; 
	}
}

240 
Void
 
£tP»dModeSubP¬ts
 ( 
P»dMode
 
eMode
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

242 
SCh¬
* 
	$g‘CrossCompÚ’tP»diùiÚAÍha
Ð
CompÚ’tID
 
compID
 ) {  
m_üossCompÚ’tP»diùiÚAÍha
[compID]; 
	}
}

243 
SCh¬
 
	$g‘CrossCompÚ’tP»diùiÚAÍha
Ð
UIÁ
 
uiIdx
, 
CompÚ’tID
 
compID
 ) {  
m_üossCompÚ’tP»diùiÚAÍha
[compID][uiIdx]; 
	}
}

245 
BoÞ
* 
	$g‘CUT¿nsquªtBy·ss
 ( ) {  
m_CUT¿nsquªtBy·ss
; 
	}
}

246 
BoÞ
 
	$g‘CUT¿nsquªtBy·ss
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_CUT¿nsquªtBy·ss
[uiIdx]; 
	}
}

248 
UCh¬
* 
	$g‘Width
 ( ) {  
m_puhWidth
; 
	}
}

249 
UCh¬
 
	$g‘Width
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhWidth
[uiIdx]; 
	}
}

250 
Void
 
	$£tWidth
 ( 
UIÁ
 
uiIdx
, 
UCh¬
 
uh
 ) { 
m_puhWidth
[uiIdx] = uh; 
	}
}

252 
UCh¬
* 
	$g‘Height
 ( ) {  
m_puhHeight
; 
	}
}

253 
UCh¬
 
	$g‘Height
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhHeight
[uiIdx]; 
	}
}

254 
Void
 
	$£tHeight
 ( 
UIÁ
 
uiIdx
, 
UCh¬
 
uh
 ) { 
m_puhHeight
[uiIdx] = uh; 
	}
}

256 
Void
 
£tSizeSubP¬ts
 ( 
UIÁ
 
uiWidth
, UIÁ 
uiHeight
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

258 
SCh¬
* 
	$g‘QP
 ( ) {  
m_phQP
; 
	}
}

259 
SCh¬
 
	$g‘QP
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_phQP
[uiIdx]; 
	}
}

260 
Void
 
	$£tQP
 ( 
UIÁ
 
uiIdx
, 
SCh¬
 
v®ue
 ) { 
m_phQP
[uiIdx] = v®ue; 
	}
}

261 
Void
 
£tQPSubP¬ts
 ( 
IÁ
 
qp
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

262 
IÁ
 
	$g‘La¡V®idP¬tIdx
 ( 
IÁ
 
iAbsP¬tIdx
 ) const;

263 
SCh¬
 
	$g‘La¡CodedQP
 ( 
UIÁ
 
uiAbsP¬tIdx
 ) const;

264 
Void
 
	`£tQPSubCUs
 ( 
IÁ
 
qp
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
, 
BoÞ
 &
foundNÚZ”oCbf
 );

265 
Void
 
	$£tCodedQP
 ( 
SCh¬
 
qp
 ) { 
m_codedQP
 = qp; 
	}
}

266 
SCh¬
 
	$g‘CodedQP
 ( ) cÚ¡ {  
m_codedQP
; 
	}
}

268 
UCh¬
* 
	$g‘ChromaQpAdj
 ( ) {  
m_ChromaQpAdj
; 
	}
}

269 
UCh¬
 
	$g‘ChromaQpAdj
 ( 
IÁ
 
idx
 ) cÚ¡ {  
m_ChromaQpAdj
[idx]; 
	}
}

270 
Void
 
	$£tChromaQpAdj
 ( 
IÁ
 
idx
, 
UCh¬
 
v®
 ) { 
m_ChromaQpAdj
[idx] = v®; 
	}
}

271 
Void
 
£tChromaQpAdjSubP¬ts
 ( 
UCh¬
 
v®
, 
IÁ
 
absP¬tIdx
, IÁ 
d•th
 );

272 
Void
 
	$£tCodedChromaQpAdj
 ( 
SCh¬
 
qp
 ) { 
m_codedChromaQpAdj
 = qp; 
	}
}

273 
SCh¬
 
	$g‘CodedChromaQpAdj
 ( ) cÚ¡ {  
m_codedChromaQpAdj
; 
	}
}

275 
BoÞ
 
	$isLos¦essCoded
 ( 
UIÁ
 
absP¬tIdx
 ) const;

277 
UCh¬
* 
	$g‘T¿nsfÜmIdx
 ( ) {  
m_puhTrIdx
; 
	}
}

278 
UCh¬
 
	$g‘T¿nsfÜmIdx
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhTrIdx
[uiIdx]; 
	}
}

279 
Void
 
£tTrIdxSubP¬ts
 ( 
UIÁ
 
uiTrIdx
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

281 
UCh¬
* 
	$g‘T¿nsfÜmSk
 ( 
CompÚ’tID
 
compID
 ) {  
m_puhT¿nsfÜmSk
[compID]; 
	}
}

282 
UCh¬
 
	$g‘T¿nsfÜmSk
 ( 
UIÁ
 
uiIdx
, 
CompÚ’tID
 
compID
 ) cÚ¡ {  
m_puhT¿nsfÜmSk
[compID][uiIdx]; 
	}
}

283 
Void
 
£tT¿nsfÜmSkSubP¬ts
 ( 
UIÁ
 
u£T¿nsfÜmSk
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

284 
Void
 
£tT¿nsfÜmSkSubP¬ts
 ( cÚ¡ 
UIÁ
 
u£T¿nsfÜmSk
[
MAX_NUM_COMPONENT
], UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

286 
UCh¬
* 
	$g‘Ex¶ic™RdpcmMode
 ( 
CompÚ’tID
 
compÚ’t
 ) {  
m_ex¶ic™RdpcmMode
[compÚ’t]; 
	}
}

287 
UCh¬
 
	$g‘Ex¶ic™RdpcmMode
 ( 
CompÚ’tID
 
compÚ’t
, 
UIÁ
 
·¹Idx
 ) cÚ¡ {  
m_ex¶ic™RdpcmMode
[compÚ’t][·¹Idx]; 
	}
}

288 
Void
 
£tEx¶ic™RdpcmModeP¬tRªge
 ( 
UIÁ
 
rdpcmMode
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 );

290 
BoÞ
 
	$isRDPCMEÇbËd
 ( 
UIÁ
 
uiAbsP¬tIdx
 ) cÚ¡ {  
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘RdpcmEÇbËdFÏg
(
	`isIÁ¿
(uiAbsP¬tIdxè? 
RDPCM_SIGNAL_IMPLICIT
 : 
RDPCM_SIGNAL_EXPLICIT
); 
	}
}

292 
Void
 
£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
 ( 
SCh¬
 
®phaV®ue
, 
CompÚ’tID
 
compID
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 );

293 
Void
 
£tT¿nsfÜmSkP¬tRªge
 ( 
UIÁ
 
u£T¿nsfÜmSk
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 );

295 
UIÁ
 
	$g‘QuadŒ“TULog2MšSizeInCU
 ( 
UIÁ
 
uiIdx
 ) const;

297 
TComCUMvF›ld
* 
	$g‘CUMvF›ld
 ( 
RefPicLi¡
 
e
 ) {  &
m_acCUMvF›ld
[e]; 
	}
}

298 cÚ¡ 
TComCUMvF›ld
* 
	$g‘CUMvF›ld
 ( 
RefPicLi¡
 
e
 ) cÚ¡ {  &
m_acCUMvF›ld
[e]; 
	}
}

300 
TCÛff
* 
	$g‘CÛff
 ( 
CompÚ’tID
 
compÚ’t
 ) {  
m_pcTrCÛff
[compÚ’t]; 
	}
}

302 #ià
ADAPTIVE_QP_SELECTION


303 
TCÛff
* 
	$g‘A¾CÛff
 ( 
CompÚ’tID
 
compÚ’t
 ) {  
m_pcA¾CÛff
[compÚ’t]; 
	}
}

305 
P–
* 
	$g‘PCMSam¶e
 ( 
CompÚ’tID
 
compÚ’t
 ) {  
m_pcIPCMSam¶e
[compÚ’t]; 
	}
}

307 
UCh¬
 
	$g‘Cbf
 ( 
UIÁ
 
uiIdx
, 
CompÚ’tID
 
eTy³
 ) cÚ¡ {  
m_puhCbf
[eTy³][uiIdx]; 
	}
}

308 
UCh¬
* 
	$g‘Cbf
 ( 
CompÚ’tID
 
eTy³
 ) {  
m_puhCbf
[eTy³]; 
	}
}

309 
UCh¬
 
	$g‘Cbf
 ( 
UIÁ
 
uiIdx
, 
CompÚ’tID
 
eTy³
, UIÁ 
uiTrD•th
 ) cÚ¡ {  ( ( 
	`g‘Cbf
ÐuiIdx,ƒTy³ ) >> uiTrD•th ) & 0x1 ); 
	}
}

310 
Void
 
	$£tCbf
 ( 
UIÁ
 
uiIdx
, 
CompÚ’tID
 
eTy³
, 
UCh¬
 
uh
 ) { 
m_puhCbf
[eTy³][uiIdx] = uh; 
	}
}

311 
Void
 
þ—rCbf
 ( 
UIÁ
 
uiIdx
, 
CompÚ’tID
 
eTy³
, UIÁ 
uiNumP¬ts
 );

312 
UCh¬
 
	$g‘QtRoÙCbf
 ( 
UIÁ
 
uiIdx
 ) const;

314 
Void
 
	`£tCbfSubP¬ts
 ( cÚ¡ 
UIÁ
 
uiCbf
[
MAX_NUM_COMPONENT
], UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

315 
Void
 
	`£tCbfSubP¬ts
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

316 
Void
 
	`£tCbfSubP¬ts
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

318 
Void
 
	`£tCbfP¬tRªge
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 );

319 
Void
 
	`b™wi£OrCbfP¬tRªge
 ( 
UIÁ
 
uiCbf
, 
CompÚ’tID
 
compID
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiCov”edP¬tIdxes
 );

325 
BoÞ
* 
	$g‘M”geFÏg
 ( ) {  
m_pbM”geFÏg
; 
	}
}

326 
BoÞ
 
	$g‘M”geFÏg
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_pbM”geFÏg
[uiIdx]; 
	}
}

327 
Void
 
	$£tM”geFÏg
 ( 
UIÁ
 
uiIdx
, 
BoÞ
 
b
 ) { 
m_pbM”geFÏg
[uiIdx] = b; 
	}
}

328 
Void
 
£tM”geFÏgSubP¬ts
 ( 
BoÞ
 
bM”geFÏg
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

330 
UCh¬
* 
	$g‘M”geIndex
 ( ) {  
m_puhM”geIndex
; 
	}
}

331 
UCh¬
 
	$g‘M”geIndex
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhM”geIndex
[uiIdx]; 
	}
}

332 
Void
 
	$£tM”geIndex
 ( 
UIÁ
 
uiIdx
, UIÁ 
uiM”geIndex
 ) { 
m_puhM”geIndex
[uiIdx] = uiM”geIndex; 
	}
}

333 
Void
 
£tM”geIndexSubP¬ts
 ( 
UIÁ
 
uiM”geIndex
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

334 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

335 
Void
 
£tSubP¬t
 ( 
T
 
bP¬am‘”
, T* 
pbBa£Ctu
, 
UIÁ
 
uiCUAddr
, UIÁ 
uiCUD•th
, UIÁ 
uiPUIdx
 );

337 #ià
AMP_MRG


338 
Void
 
	$£tM”geAMP
 ( 
BoÞ
 
b
 ) { 
m_bIsM”geAMP
 = b; 
	}
}

339 
BoÞ
 
	$g‘M”geAMP
 ( ) cÚ¡ {  
m_bIsM”geAMP
; 
	}
}

342 
UCh¬
* 
	$g‘IÁ¿Dœ
 ( cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 ) cÚ¡ {  
m_puhIÁ¿Dœ
[chªÃlTy³]; 
	}
}

343 
UCh¬
 
	$g‘IÁ¿Dœ
 ( cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
, cÚ¡ 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhIÁ¿Dœ
[chªÃlTy³][uiIdx]; 
	}
}

345 
Void
 
£tIÁ¿DœSubP¬ts
 ( cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
,

346 cÚ¡ 
UIÁ
 
uiDœ
,

347 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
,

348 cÚ¡ 
UIÁ
 
uiD•th
 );

350 
UCh¬
* 
	$g‘IÁ”Dœ
 ( ) {  
m_puhIÁ”Dœ
; 
	}
}

351 
UCh¬
 
	$g‘IÁ”Dœ
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_puhIÁ”Dœ
[uiIdx]; 
	}
}

352 
Void
 
	$£tIÁ”Dœ
 ( 
UIÁ
 
uiIdx
, 
UCh¬
 
uh
 ) { 
m_puhIÁ”Dœ
[uiIdx] = uh; 
	}
}

353 
Void
 
£tIÁ”DœSubP¬ts
 ( 
UIÁ
 
uiDœ
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

354 
BoÞ
* 
	$g‘IPCMFÏg
 ( ) {  
m_pbIPCMFÏg
; 
	}
}

355 
BoÞ
 
	$g‘IPCMFÏg
 ( 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_pbIPCMFÏg
[uiIdx]; 
	}
}

356 
Void
 
	$£tIPCMFÏg
 ( 
UIÁ
 
uiIdx
, 
BoÞ
 
b
 ) { 
m_pbIPCMFÏg
[uiIdx] = b; 
	}
}

357 
Void
 
£tIPCMFÏgSubP¬ts
 ( 
BoÞ
 
bIpcmFÏg
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

363 
Void
 
	$g‘P¬tIndexAndSize
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tAddr
, 
IÁ
& 
riWidth
, IÁ& 
riHeight
 ) const;

364 
UCh¬
 
	$g‘NumP¬t™iÚs
 ( cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 0 ) const;

365 
BoÞ
 
	$isFœ¡AbsZÜd”IdxInD•th
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) const;

371 
Void
 
	`g‘MvF›ld
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMvF›ld
& 
rcMvF›ld
 );

373 
Void
 
	$fžlMvpCªd
 ( cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
uiP¬tAddr
, cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
, cÚ¡ 
IÁ
 
iRefIdx
, 
AMVPInfo
* 
pInfo
 ) const;

374 
BoÞ
 
	$isDiffMER
 ( 
IÁ
 
xN
, IÁ 
yN
, IÁ 
xP
, IÁ 
yP
 ) const;

375 
Void
 
	$g‘P¬tPos™iÚ
 ( 
UIÁ
 
·¹Idx
, 
IÁ
& 
xP
, IÁ& 
yP
, IÁ& 
nPSW
, IÁ& 
nPSH
 ) const;

377 
Void
 
	$£tMVPIdx
 ( 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiIdx
, 
IÁ
 
iMVPIdx
è{ 
m_­iMVPIdx
[eRefPicLi¡][uiIdx] = iMVPIdx; 
	}
}

378 
IÁ
 
	$g‘MVPIdx
 ( 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiIdx
ècÚ¡ {  
m_­iMVPIdx
[eRefPicLi¡][uiIdx]; 
	}
}

379 
SCh¬
* 
	$g‘MVPIdx
 ( 
RefPicLi¡
 
eRefPicLi¡
 ) {  
m_­iMVPIdx
[eRefPicLi¡]; 
	}
}

381 
Void
 
	$£tMVPNum
 ( 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiIdx
, 
IÁ
 
iMVPNum
 ) { 
m_­iMVPNum
[eRefPicLi¡][uiIdx] = iMVPNum; 
	}
}

382 
IÁ
 
	$g‘MVPNum
 ( 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiIdx
 ) cÚ¡ {  
m_­iMVPNum
[eRefPicLi¡][uiIdx]; 
	}
}

383 
SCh¬
* 
	$g‘MVPNum
 ( 
RefPicLi¡
 
eRefPicLi¡
 ) {  
m_­iMVPNum
[eRefPicLi¡]; 
	}
}

385 
Void
 
£tMVPIdxSubP¬ts
 ( 
IÁ
 
iMVPIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

386 
Void
 
£tMVPNumSubP¬ts
 ( 
IÁ
 
iMVPNum
, 
RefPicLi¡
 
eRefPicLi¡
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
 );

388 
Void
 
	$þMv
 ( 
TComMv
& 
rcMv
 ) const;

389 
Void
 
	$g‘MvP»dLeá
 ( 
TComMv
& 
rcMvP»d
 ) cÚ¡ {„cMvP»d = 
m_cMvF›ldA
.
	`g‘Mv
(); 
	}
}

390 
Void
 
	$g‘MvP»dAbove
 ( 
TComMv
& 
rcMvP»d
 ) cÚ¡ {„cMvP»d = 
m_cMvF›ldB
.
	`g‘Mv
(); 
	}
}

391 
Void
 
	$g‘MvP»dAboveRight
 ( 
TComMv
& 
rcMvP»d
 ) cÚ¡ {„cMvP»d = 
m_cMvF›ldC
.
	`g‘Mv
(); 
	}
}

393 
Void
 
com´essMV
 ();

399 
TComD©aCU
* 
	$g‘CtuLeá
 ( ) {  
m_pCtuLeá
; 
	}
}

400 
TComD©aCU
* 
	$g‘CtuAbove
 ( ) {  
m_pCtuAbove
; 
	}
}

401 
TComD©aCU
* 
	$g‘CtuAboveLeá
 ( ) {  
m_pCtuAboveLeá
; 
	}
}

402 
TComD©aCU
* 
	$g‘CtuAboveRight
 ( ) {  
m_pCtuAboveRight
; 
	}
}

403 
BoÞ
 
	$CUIsFromSameSliû
 ( cÚ¡ 
TComD©aCU
 *
pCU
 ) cÚ¡ {  (…CU!=
NULL
 &&…CU->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è=ðg‘Sliû()->g‘SliûCurS¹CtuTsAddr(è); 
	}
}

404 
BoÞ
 
	$CUIsFromSameTže
 ( cÚ¡ 
TComD©aCU
 *
pCU
 ) const;

405 
BoÞ
 
	$CUIsFromSameSliûAndTže
 ( cÚ¡ 
TComD©aCU
 *
pCU
 ) const;

406 
BoÞ
 
	$CUIsFromSameSliûTžeAndWaveäÚtRow
ÐcÚ¡ 
TComD©aCU
 *
pCU
 ) const;

407 
BoÞ
 
	$isLa¡SubCUOfCtu
 ( cÚ¡ 
UIÁ
 
absP¬tIdx
 ) const;

410 cÚ¡ 
TComD©aCU
* 
	$g‘PULeá
 ( 
UIÁ
& 
uiLP¬tUn™Idx
,

411 
UIÁ
 
uiCu¼P¬tUn™Idx
,

412 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
=
Œue
,

413 
BoÞ
 
bEnfÜûTžeRe¡riùiÚ
=
Œue
 ) const;

415 cÚ¡ 
TComD©aCU
* 
	$g‘PUAbove
 ( 
UIÁ
& 
uiAP¬tUn™Idx
,

416 
UIÁ
 
uiCu¼P¬tUn™Idx
,

417 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
=
Œue
,

418 
BoÞ
 
¶ª¬AtCTUBound¬y
 = 
çl£
,

419 
BoÞ
 
bEnfÜûTžeRe¡riùiÚ
=
Œue
 ) const;

421 cÚ¡ 
TComD©aCU
* 
	$g‘PUAboveLeá
 ( 
UIÁ
& 
uiALP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
=
Œue
 ) const;

423 cÚ¡ 
TComD©aCU
* 
	$g‘QpMšCuLeá
 ( 
UIÁ
& 
uiLP¬tUn™Idx
, UIÁ 
uiCu¼AbsIdxInCtu
 ) const;

424 cÚ¡ 
TComD©aCU
* 
	$g‘QpMšCuAbove
 ( 
UIÁ
& 
uiAP¬tUn™Idx
, UIÁ 
uiCu¼AbsIdxInCtu
 ) const;

427 cÚ¡ 
TComD©aCU
* 
	$g‘PUAboveRight
 ( 
UIÁ
& 
uiARP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, UIÁ 
uiP¬tUn™Off£t
 = 1, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
=
Œue
 ) const;

429 cÚ¡ 
TComD©aCU
* 
	$g‘PUB–owLeá
 ( 
UIÁ
& 
uiBLP¬tUn™Idx
, UIÁ 
uiCu¼P¬tUn™Idx
, UIÁ 
uiP¬tUn™Off£t
 = 1, 
BoÞ
 
bEnfÜûSliûRe¡riùiÚ
=
Œue
 ) const;

431 
SCh¬
 
	$g‘RefQP
 ( 
UIÁ
 
uiCu¼AbsIdxInCtu
 ) const;

433 
Void
 
	$d”iveLeáRightTÝIdx
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLT
, UIÁ& 
ruiP¬tIdxRT
 ) const;

434 
Void
 
	$d”iveLeáBÙtomIdx
 ( 
UIÁ
 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLB
 ) const;

436 
BoÞ
 
	$hasEqu®MÙiÚ
 ( 
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ 
TComD©aCU
* 
pcCªdCU
, UIÁ 
uiCªdAbsP¬tIdx
 ) const;

437 #ià
MCTS_ENC_CHECK


438 
Void
 
	`g‘IÁ”M”geCªdid©es
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiPUIdx
, 
TComMvF›ld
* 
pcMF›ldNeighbours
, 
UCh¬
* 
puhIÁ”DœNeighbours
, 
IÁ
& 
numV®idM”geCªd
, UIÁ& 
numS·tŸlM”geCªdid©es
 , IÁ 
mrgCªdIdx
 = -1) const;

440 
Void
 
	`g‘IÁ”M”geCªdid©es
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiPUIdx
, 
TComMvF›ld
* 
pcMF›ldNeighbours
, 
UCh¬
* 
puhIÁ”DœNeighbours
, 
IÁ
& 
numV®idM”geCªd
, IÁ 
mrgCªdIdx
 = -1 ) const;

443 
Void
 
	$d”iveLeáRightTÝIdxG’”®
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLT
, UIÁ& 
ruiP¬tIdxRT
 ) const;

444 
Void
 
	$d”iveLeáBÙtomIdxG’”®
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ& 
ruiP¬tIdxLB
 ) const;

450 
BoÞ
 
	$isIÁ¿
 ( 
UIÁ
 
uiP¬tIdx
 ) cÚ¡ {  
m_³P»dMode
[ uiP¬tIdx ] =ð
MODE_INTRA
; 
	}
}

451 
BoÞ
 
	$isIÁ”
 ( 
UIÁ
 
uiP¬tIdx
 ) cÚ¡ {  
m_³P»dMode
[ uiP¬tIdx ] =ð
MODE_INTER
; 
	}
}

452 
BoÞ
 
	$isSk³d
 ( 
UIÁ
 
uiP¬tIdx
 ) const;

453 
BoÞ
 
	$isB»dRe¡riùiÚ
 ( 
UIÁ
 
puIdx
 ) const;

459 
UIÁ
 
	$g‘IÁ¿SizeIdx
 ( 
UIÁ
 
uiAbsP¬tIdx
 ) const;

461 
Void
 
	$g‘AÎowedChromaDœ
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ* 
uiModeLi¡
 ) const;

462 
Void
 
	$g‘IÁ¿DœP»diùÜ
 ( 
UIÁ
 
uiAbsP¬tIdx
, 
IÁ
 
uiIÁ¿DœP»d
[
NUM_MOST_PROBABLE_MODES
], cÚ¡ 
CompÚ’tID
 
compID
, IÁ* 
piMode
 = 
NULL
 ) const;

468 
UIÁ
 
	$g‘CtxS¶™FÏg
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) const;

469 
UIÁ
 
	$g‘CtxQtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 ) const;

471 
UIÁ
 
	$g‘CtxSkFÏg
 ( 
UIÁ
 
uiAbsP¬tIdx
 ) const;

472 
UIÁ
 
	$g‘CtxIÁ”Dœ
 ( 
UIÁ
 
uiAbsP¬tIdx
 ) const;

474 
UIÁ
& 
	$g‘TÙ®Bšs
 ( ) {  
m_uiTÙ®Bšs
; 
	}
}

479 
	gDoubË
& 
	$g‘TÙ®Co¡
 ( ) {  
m_dTÙ®Co¡
; 
	}
}

480 
	gDi¡ÜtiÚ
& 
	$g‘TÙ®Di¡ÜtiÚ
 ( ) {  
m_uiTÙ®Di¡ÜtiÚ
; 
	}
}

481 
	gUIÁ
& 
	$g‘TÙ®B™s
 ( ) {  
m_uiTÙ®B™s
; 
	}
}

482 
	gUIÁ
& 
	$g‘TÙ®NumP¬t
 ( ) {  
m_uiNumP¬t™iÚ
; 
	}
}

484 
UIÁ
 
	$g‘CÛfSÿnIdx
 ( cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
 ) const ;

486 
	}
};

488 
Çme¥aû
 
	gRa¡”Add»ss


496 
šlše
 
BoÞ
 
isEqu®CÞ
Ð
IÁ
 
addrA
, IÁ 
addrB
, IÁ 
numUn™sP”Row
 )

499  (Ð
	gaddrA
 ^ 
	gaddrB
 ) & ( 
	gnumUn™sP”Row
 - 1 ) ) == 0;

508 
šlše
 
BoÞ
 
isEqu®Row
Ð
IÁ
 
addrA
, IÁ 
addrB
, IÁ 
numUn™sP”Row
 )

511  (Ð
	gaddrA
 ^ 
	gaddrB
 ) &~ ( 
	gnumUn™sP”Row
 - 1 ) ) == 0;

520 
šlše
 
BoÞ
 
isEqu®RowOrCÞ
Ð
IÁ
 
addrA
, IÁ 
addrB
, IÁ 
numUn™sP”Row
 )

522  
isEqu®CÞ
Ð
addrA
, 
addrB
, 
numUn™sP”Row
 ) | 
isEqu®Row
(‡ddrA,‡ddrB,‚umUnitsPerRow );

530 
šlše
 
BoÞ
 
isZ”oCÞ
Ð
IÁ
 
addr
, IÁ 
numUn™sP”Row
 )

533  ( 
	gaddr
 & ( 
	gnumUn™sP”Row
 - 1 ) ) == 0;

541 
šlše
 
BoÞ
 
isZ”oRow
Ð
IÁ
 
addr
, IÁ 
numUn™sP”Row
 )

544  ( 
	gaddr
 &~ ( 
	gnumUn™sP”Row
 - 1 ) ) == 0;

553 
šlše
 
BoÞ
 
ËssThªCÞ
Ð
IÁ
 
addr
, IÁ 
v®
, IÁ 
numUn™sP”Row
 )

556  ( 
	gaddr
 & ( 
	gnumUn™sP”Row
 - 1 ) ) < 
	gv®
;

565 
šlše
 
BoÞ
 
ËssThªRow
Ð
IÁ
 
addr
, IÁ 
v®
, IÁ 
numUn™sP”Row
 )

568  
	gaddr
 < 
v®
 * 
	gnumUn™sP”Row
;

	@source/Lib/TLibCommon/TComInterpolationFilter.cpp

43 
	~"TComRom.h
"

44 
	~"TComIÁ”pÞ©iÚFž‹r.h
"

45 
	~<as£¹.h
>

47 
	~"TComChromaFÜm©.h
"

49 #ià
VECTOR_CODING__INTERPOLATION_FILTER
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

50 
	~<emmšŒš.h
>

60 cÚ¡ 
TFž‹rCÛff
 
	gTComIÁ”pÞ©iÚFž‹r
::
m_lumaFž‹r
[
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
][
NTAPS_LUMA
] =

68 cÚ¡ 
TFž‹rCÛff
 
	gTComIÁ”pÞ©iÚFž‹r
::
m_chromaFž‹r
[
CHROMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
][
NTAPS_CHROMA
] =

80 #ià
VECTOR_CODING__INTERPOLATION_FILTER
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

81 
šlše
 
__m128i
 
	$simdIÁ”pÞ©eLuma4
Ð
ShÜt
 cÚ¡ *
¤c
 , 
IÁ
 
¤cSŒide
 , 
__m128i
 *
mmCÛff
 , cÚ¡ __m128˜& 
mmOff£t
 , IÁ 
shiá
 )

83 
__m128i
 
sumHi
 = 
	`_mm_£tz”o_si128
();

84 
__m128i
 
sumLo
 = 
	`_mm_£tz”o_si128
();

85  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ )

87 
__m128i
 
mmPix
 = 
	`_mm_lßdl_•i64
ÐÐ__m128i* )
¤c
 );

88 
__m128i
 
hi
 = 
	`_mm_mulhi_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

89 
__m128i
 
lo
 = 
	`_mm_muÎo_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

90 
sumHi
 = 
	`_mm_add_•i32
ÐsumH˜, 
	`_mm_uÅackhi_•i16
Ð
lo
 , 
hi
 ) );

91 
sumLo
 = 
	`_mm_add_•i32
ÐsumLØ, 
	`_mm_uÅacklo_•i16
Ð
lo
 , 
hi
 ) );

92 
¤c
 +ð
¤cSŒide
;

94 
sumHi
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumH˜, 
mmOff£t
 ) , 
shiá
 );

95 
sumLo
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumLØ, 
mmOff£t
 ) , 
shiá
 );

96 Ð
	`_mm_·cks_•i32
Ð
sumLo
 , 
sumHi
 ) );

97 
	}
}

99 
šlše
 
__m128i
 
	$simdIÁ”pÞ©eChroma4
Ð
ShÜt
 cÚ¡ *
¤c
 , 
IÁ
 
¤cSŒide
 , 
__m128i
 *
mmCÛff
 , cÚ¡ __m128˜& 
mmOff£t
 , IÁ 
shiá
 )

101 
__m128i
 
sumHi
 = 
	`_mm_£tz”o_si128
();

102 
__m128i
 
sumLo
 = 
	`_mm_£tz”o_si128
();

103  
IÁ
 
n
 = 0 ;‚ < 4 ;‚++ )

105 
__m128i
 
mmPix
 = 
	`_mm_lßdl_•i64
ÐÐ__m128i* )
¤c
 );

106 
__m128i
 
hi
 = 
	`_mm_mulhi_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

107 
__m128i
 
lo
 = 
	`_mm_muÎo_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

108 
sumHi
 = 
	`_mm_add_•i32
ÐsumH˜, 
	`_mm_uÅackhi_•i16
Ð
lo
 , 
hi
 ) );

109 
sumLo
 = 
	`_mm_add_•i32
ÐsumLØ, 
	`_mm_uÅacklo_•i16
Ð
lo
 , 
hi
 ) );

110 
¤c
 +ð
¤cSŒide
;

112 
sumHi
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumH˜, 
mmOff£t
 ) , 
shiá
 );

113 
sumLo
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumLØ, 
mmOff£t
 ) , 
shiá
 );

114 Ð
	`_mm_·cks_•i32
Ð
sumLo
 , 
sumHi
 ) );

115 
	}
}

117 
šlše
 
__m128i
 
	$simdIÁ”pÞ©eLuma8
Ð
ShÜt
 cÚ¡ *
¤c
 , 
IÁ
 
¤cSŒide
 , 
__m128i
 *
mmCÛff
 , cÚ¡ __m128˜& 
mmOff£t
 , IÁ 
shiá
 )

119 
__m128i
 
sumHi
 = 
	`_mm_£tz”o_si128
();

120 
__m128i
 
sumLo
 = 
	`_mm_£tz”o_si128
();

121  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ )

123 
__m128i
 
mmPix
 = 
	`_mm_lßdu_si128
ÐÐ__m128i* )
¤c
 );

124 
__m128i
 
hi
 = 
	`_mm_mulhi_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

125 
__m128i
 
lo
 = 
	`_mm_muÎo_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

126 
sumHi
 = 
	`_mm_add_•i32
ÐsumH˜, 
	`_mm_uÅackhi_•i16
Ð
lo
 , 
hi
 ) );

127 
sumLo
 = 
	`_mm_add_•i32
ÐsumLØ, 
	`_mm_uÅacklo_•i16
Ð
lo
 , 
hi
 ) );

128 
¤c
 +ð
¤cSŒide
;

130 
sumHi
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumH˜, 
mmOff£t
 ) , 
shiá
 );

131 
sumLo
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumLØ, 
mmOff£t
 ) , 
shiá
 );

132 Ð
	`_mm_·cks_•i32
Ð
sumLo
 , 
sumHi
 ) );

133 
	}
}

135 
šlše
 
__m128i
 
	$simdIÁ”pÞ©eLuma2P8
Ð
ShÜt
 cÚ¡ *
¤c
 , 
IÁ
 
¤cSŒide
 , 
__m128i
 *
mmCÛff
 , cÚ¡ __m128˜& 
mmOff£t
 , IÁ 
shiá
 )

137 
__m128i
 
sumHi
 = 
	`_mm_£tz”o_si128
();

138 
__m128i
 
sumLo
 = 
	`_mm_£tz”o_si128
();

139  
IÁ
 
n
 = 0 ;‚ < 2 ;‚++ )

141 
__m128i
 
mmPix
 = 
	`_mm_lßdu_si128
ÐÐ__m128i* )
¤c
 );

142 
__m128i
 
hi
 = 
	`_mm_mulhi_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

143 
__m128i
 
lo
 = 
	`_mm_muÎo_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

144 
sumHi
 = 
	`_mm_add_•i32
ÐsumH˜, 
	`_mm_uÅackhi_•i16
Ð
lo
 , 
hi
 ) );

145 
sumLo
 = 
	`_mm_add_•i32
ÐsumLØ, 
	`_mm_uÅacklo_•i16
Ð
lo
 , 
hi
 ) );

146 
¤c
 +ð
¤cSŒide
;

148 
sumHi
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumH˜, 
mmOff£t
 ) , 
shiá
 );

149 
sumLo
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumLØ, 
mmOff£t
 ) , 
shiá
 );

150 Ð
	`_mm_·cks_•i32
Ð
sumLo
 , 
sumHi
 ) );

151 
	}
}

153 
šlše
 
__m128i
 
	$simdIÁ”pÞ©eLuma2P4
Ð
ShÜt
 cÚ¡ *
¤c
 , 
IÁ
 
¤cSŒide
 , 
__m128i
 *
mmCÛff
 , cÚ¡ __m128˜& 
mmOff£t
 , IÁ 
shiá
 )

155 
__m128i
 
sumHi
 = 
	`_mm_£tz”o_si128
();

156 
__m128i
 
sumLo
 = 
	`_mm_£tz”o_si128
();

157  
IÁ
 
n
 = 0 ;‚ < 2 ;‚++ )

159 
__m128i
 
mmPix
 = 
	`_mm_lßdl_•i64
ÐÐ__m128i* )
¤c
 );

160 
__m128i
 
hi
 = 
	`_mm_mulhi_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

161 
__m128i
 
lo
 = 
	`_mm_muÎo_•i16
Ð
mmPix
 , 
mmCÛff
[
n
] );

162 
sumHi
 = 
	`_mm_add_•i32
ÐsumH˜, 
	`_mm_uÅackhi_•i16
Ð
lo
 , 
hi
 ) );

163 
sumLo
 = 
	`_mm_add_•i32
ÐsumLØ, 
	`_mm_uÅacklo_•i16
Ð
lo
 , 
hi
 ) );

164 
¤c
 +ð
¤cSŒide
;

166 
sumHi
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumH˜, 
mmOff£t
 ) , 
shiá
 );

167 
sumLo
 = 
	`_mm_¤ai_•i32
Ð
	`_mm_add_•i32
ÐsumLØ, 
mmOff£t
 ) , 
shiá
 );

168 Ð
	`_mm_·cks_•i32
Ð
sumLo
 , 
sumHi
 ) );

169 
	}
}

171 
šlše
 
__m128i
 
	$simdCl3
Ð
__m128i
 
mmMš
 , __m128˜
mmMax
 , __m128˜
mmPix
 )

173 
__m128i
 
mmMask
 = 
	`_mm_cmpgt_•i16
Ð
mmPix
 , 
mmMš
 );

174 
mmPix
 = 
	`_mm_Ü_si128
Ð
	`_mm_ªd_si128
Ð
mmMask
 , mmPix ) , 
	`_mm_ªdnÙ_si128
ÐmmMask , 
mmMš
 ) );

175 
mmMask
 = 
	`_mm_cm¶t_•i16
Ð
mmPix
 , 
mmMax
 );

176 
mmPix
 = 
	`_mm_Ü_si128
Ð
	`_mm_ªd_si128
Ð
mmMask
 , mmPix ) , 
	`_mm_ªdnÙ_si128
ÐmmMask , 
mmMax
 ) );

177 Ð
mmPix
 );

178 
	}
}

198 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹rCÝy
(
IÁ
 
b™D•th
, cÚ¡ 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
)

200 
IÁ
 
row
, 
cÞ
;

202 iàÐ
isFœ¡
 =ð
isLa¡
 )

204 
row
 = 0;„ow < 
height
;„ow++)

206 
cÞ
 = 0; cÞ < 
width
; col++)

208 
d¡
[
cÞ
] = 
¤c
[col];

211 
¤c
 +ð
¤cSŒide
;

212 
d¡
 +ð
d¡SŒide
;

215 iàÐ
isFœ¡
 )

217 cÚ¡ 
IÁ
 
shiá
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
b™D•th
));

219 
row
 = 0;„ow < 
height
;„ow++)

221 
cÞ
 = 0; cÞ < 
width
; col++)

223 
P–
 
v®
 = 
	`ËáShiá_round
(
¤c
[
cÞ
], 
shiá
);

224 
d¡
[
cÞ
] = 
v®
 - (
P–
)
IF_INTERNAL_OFFS
;

227 
¤c
 +ð
¤cSŒide
;

228 
d¡
 +ð
d¡SŒide
;

233 cÚ¡ 
IÁ
 
shiá
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
b™D•th
));

235 
P–
 
maxV®
 = (1 << 
b™D•th
) - 1;

236 
P–
 
mšV®
 = 0;

237 
row
 = 0;„ow < 
height
;„ow++)

239 
cÞ
 = 0; cÞ < 
width
; col++)

241 
P–
 
v®
 = 
¤c
[ 
cÞ
 ];

242 
v®
 = 
	`rightShiá_round
((v® + 
IF_INTERNAL_OFFS
), 
shiá
);

243 ià(
v®
 < 
mšV®
)

245 
v®
 = 
mšV®
;

247 ià(
v®
 > 
maxV®
)

249 
v®
 = 
maxV®
;

251 
d¡
[
cÞ
] = 
v®
;

254 
¤c
 +ð
¤cSŒide
;

255 
d¡
 +ð
d¡SŒide
;

258 
	}
}

276 
	g‹m¶©e
<
IÁ
 
	gN
, 
BoÞ
 
	gisV”tiÿl
, BoÞ 
	gisFœ¡
, BoÞ 
	gisLa¡
>

277 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹r
(
IÁ
 
b™D•th
, 
P–
 cÚ¡ *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
)

279 
IÁ
 
row
, 
cÞ
;

281 
P–
 
c
[8];

282 
c
[0] = 
cÛff
[0];

283 
c
[1] = 
cÛff
[1];

284 iàÐ
N
 >= 4 )

286 
c
[2] = 
cÛff
[2];

287 
c
[3] = 
cÛff
[3];

289 iàÐ
N
 >= 6 )

291 
c
[4] = 
cÛff
[4];

292 
c
[5] = 
cÛff
[5];

294 iàÐ
N
 == 8 )

296 
c
[6] = 
cÛff
[6];

297 
c
[7] = 
cÛff
[7];

300 
IÁ
 
cSŒide
 = ( 
isV”tiÿl
 ) ? 
¤cSŒide
 : 1;

301 
¤c
 -ðÐ
N
/2 - 1 ) * 
cSŒide
;

303 
IÁ
 
off£t
;

304 
P–
 
maxV®
;

305 
IÁ
 
h—dRoom
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
b™D•th
));

306 
IÁ
 
shiá
 = 
IF_FILTER_PREC
;

309 
	`as£¹
(
shiá
 >= 0);

311 iàÐ
isLa¡
 )

313 
shiá
 +ð(
isFœ¡
è? 0 : 
h—dRoom
;

314 
off£t
 = 1 << (
shiá
 - 1);

315 
off£t
 +ð(
isFœ¡
è? 0 : 
IF_INTERNAL_OFFS
 << 
IF_FILTER_PREC
;

316 
maxV®
 = (1 << 
b™D•th
) - 1;

320 
shiá
 -ð(
isFœ¡
è? 
h—dRoom
 : 0;

321 
off£t
 = (
isFœ¡
è? -
IF_INTERNAL_OFFS
 << 
shiá
 : 0;

322 
maxV®
 = 0;

325 #ià
VECTOR_CODING__INTERPOLATION_FILTER
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

326 ifÐ
b™D•th
 <= 10 )

328 ifÐ
N
 =ð8 && !Ð
width
 & 0x07 ) )

330 
ShÜt
 
mšV®
 = 0;

331 
__m128i
 
mmOff£t
 = 
	`_mm_£t1_•i32
Ð
off£t
 );

332 
__m128i
 
mmCÛff
[8];

333 
__m128i
 
mmMš
 = 
	`_mm_£t1_•i16
Ð
mšV®
 );

334 
__m128i
 
mmMax
 = 
	`_mm_£t1_•i16
Ð
maxV®
 );

335  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ )

336 
mmCÛff
[
n
] = 
	`_mm_£t1_•i16
Ð
c
[n] );

337  
row
 = 0 ;„ow < 
height
 ;„ow++ )

339  
cÞ
 = 0 ; cÞ < 
width
 ; col += 8 )

341 
__m128i
 
mmFž‹»d
 = 
	`simdIÁ”pÞ©eLuma8
Ð
¤c
 + 
cÞ
 , 
cSŒide
 , 
mmCÛff
 , 
mmOff£t
 , 
shiá
 );

342 ifÐ
isLa¡
 )

344 
mmFž‹»d
 = 
	`simdCl3
Ð
mmMš
 , 
mmMax
 , mmFiltered );

346 
	`_mm_¡Üeu_si128
ÐÐ
__m128i
 * )Ð
d¡
 + 
cÞ
 ) , 
mmFž‹»d
 );

348 
¤c
 +ð
¤cSŒide
;

349 
d¡
 +ð
d¡SŒide
;

353 ifÐ
N
 =ð8 && !Ð
width
 & 0x03 ) )

355 
ShÜt
 
mšV®
 = 0;

356 
__m128i
 
mmOff£t
 = 
	`_mm_£t1_•i32
Ð
off£t
 );

357 
__m128i
 
mmCÛff
[8];

358 
__m128i
 
mmMš
 = 
	`_mm_£t1_•i16
Ð
mšV®
 );

359 
__m128i
 
mmMax
 = 
	`_mm_£t1_•i16
Ð
maxV®
 );

360  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ )

361 
mmCÛff
[
n
] = 
	`_mm_£t1_•i16
Ð
c
[n] );

362  
row
 = 0 ;„ow < 
height
 ;„ow++ )

364  
cÞ
 = 0 ; cÞ < 
width
 ; col += 4 )

366 
__m128i
 
mmFž‹»d
 = 
	`simdIÁ”pÞ©eLuma4
Ð
¤c
 + 
cÞ
 , 
cSŒide
 , 
mmCÛff
 , 
mmOff£t
 , 
shiá
 );

367 ifÐ
isLa¡
 )

369 
mmFž‹»d
 = 
	`simdCl3
Ð
mmMš
 , 
mmMax
 , mmFiltered );

371 
	`_mm_¡Ü–_•i64
ÐÐ
__m128i
 * )Ð
d¡
 + 
cÞ
 ) , 
mmFž‹»d
 );

373 
¤c
 +ð
¤cSŒide
;

374 
d¡
 +ð
d¡SŒide
;

378 ifÐ
N
 =ð4 && !Ð
width
 & 0x03 ) )

380 
ShÜt
 
mšV®
 = 0;

381 
__m128i
 
mmOff£t
 = 
	`_mm_£t1_•i32
Ð
off£t
 );

382 
__m128i
 
mmCÛff
[8];

383 
__m128i
 
mmMš
 = 
	`_mm_£t1_•i16
Ð
mšV®
 );

384 
__m128i
 
mmMax
 = 
	`_mm_£t1_•i16
Ð
maxV®
 );

385  
IÁ
 
n
 = 0 ;‚ < 4 ;‚++ )

386 
mmCÛff
[
n
] = 
	`_mm_£t1_•i16
Ð
c
[n] );

387  
row
 = 0 ;„ow < 
height
 ;„ow++ )

389  
cÞ
 = 0 ; cÞ < 
width
 ; col += 4 )

391 
__m128i
 
mmFž‹»d
 = 
	`simdIÁ”pÞ©eChroma4
Ð
¤c
 + 
cÞ
 , 
cSŒide
 , 
mmCÛff
 , 
mmOff£t
 , 
shiá
 );

392 ifÐ
isLa¡
 )

394 
mmFž‹»d
 = 
	`simdCl3
Ð
mmMš
 , 
mmMax
 , mmFiltered );

396 
	`_mm_¡Ü–_•i64
ÐÐ
__m128i
 * )Ð
d¡
 + 
cÞ
 ) , 
mmFž‹»d
 );

398 
¤c
 +ð
¤cSŒide
;

399 
d¡
 +ð
d¡SŒide
;

403 ifÐ
N
 =ð2 && !Ð
width
 & 0x07 ) )

405 
ShÜt
 
mšV®
 = 0;

406 
__m128i
 
mmOff£t
 = 
	`_mm_£t1_•i32
Ð
off£t
 );

407 
__m128i
 
mmCÛff
[2];

408 
__m128i
 
mmMš
 = 
	`_mm_£t1_•i16
Ð
mšV®
 );

409 
__m128i
 
mmMax
 = 
	`_mm_£t1_•i16
Ð
maxV®
 );

410  
IÁ
 
n
 = 0 ;‚ < 2 ;‚++ )

411 
mmCÛff
[
n
] = 
	`_mm_£t1_•i16
Ð
c
[n] );

412  
row
 = 0 ;„ow < 
height
 ;„ow++ )

414  
cÞ
 = 0 ; cÞ < 
width
 ; col += 8 )

416 
__m128i
 
mmFž‹»d
 = 
	`simdIÁ”pÞ©eLuma2P8
Ð
¤c
 + 
cÞ
 , 
cSŒide
 , 
mmCÛff
 , 
mmOff£t
 , 
shiá
 );

417 ifÐ
isLa¡
 )

419 
mmFž‹»d
 = 
	`simdCl3
Ð
mmMš
 , 
mmMax
 , mmFiltered );

421 
	`_mm_¡Üeu_si128
ÐÐ
__m128i
 * )Ð
d¡
 + 
cÞ
 ) , 
mmFž‹»d
 );

423 
¤c
 +ð
¤cSŒide
;

424 
d¡
 +ð
d¡SŒide
;

428 ifÐ
N
 =ð2 && !Ð
width
 & 0x03 ) )

430 
ShÜt
 
mšV®
 = 0;

431 
__m128i
 
mmOff£t
 = 
	`_mm_£t1_•i32
Ð
off£t
 );

432 
__m128i
 
mmCÛff
[8];

433 
__m128i
 
mmMš
 = 
	`_mm_£t1_•i16
Ð
mšV®
 );

434 
__m128i
 
mmMax
 = 
	`_mm_£t1_•i16
Ð
maxV®
 );

435  
IÁ
 
n
 = 0 ;‚ < 2 ;‚++ )

436 
mmCÛff
[
n
] = 
	`_mm_£t1_•i16
Ð
c
[n] );

437  
row
 = 0 ;„ow < 
height
 ;„ow++ )

439  
cÞ
 = 0 ; cÞ < 
width
 ; col += 4 )

441 
__m128i
 
mmFž‹»d
 = 
	`simdIÁ”pÞ©eLuma2P4
Ð
¤c
 + 
cÞ
 , 
cSŒide
 , 
mmCÛff
 , 
mmOff£t
 , 
shiá
 );

442 ifÐ
isLa¡
 )

444 
mmFž‹»d
 = 
	`simdCl3
Ð
mmMš
 , 
mmMax
 , mmFiltered );

446 
	`_mm_¡Ü–_•i64
ÐÐ
__m128i
 * )Ð
d¡
 + 
cÞ
 ) , 
mmFž‹»d
 );

448 
¤c
 +ð
¤cSŒide
;

449 
d¡
 +ð
d¡SŒide
;

456 
row
 = 0;„ow < 
height
;„ow++)

458 
cÞ
 = 0; cÞ < 
width
; col++)

460 
IÁ
 
sum
;

462 
sum
 = 
¤c
[ 
cÞ
 + 0 * 
cSŒide
] * 
c
[0];

463 
sum
 +ð
¤c
[ 
cÞ
 + 1 * 
cSŒide
] * 
c
[1];

464 iàÐ
N
 >= 4 )

466 
sum
 +ð
¤c
[ 
cÞ
 + 2 * 
cSŒide
] * 
c
[2];

467 
sum
 +ð
¤c
[ 
cÞ
 + 3 * 
cSŒide
] * 
c
[3];

469 iàÐ
N
 >= 6 )

471 
sum
 +ð
¤c
[ 
cÞ
 + 4 * 
cSŒide
] * 
c
[4];

472 
sum
 +ð
¤c
[ 
cÞ
 + 5 * 
cSŒide
] * 
c
[5];

474 iàÐ
N
 == 8 )

476 
sum
 +ð
¤c
[ 
cÞ
 + 6 * 
cSŒide
] * 
c
[6];

477 
sum
 +ð
¤c
[ 
cÞ
 + 7 * 
cSŒide
] * 
c
[7];

480 
P–
 
v®
 = ( 
sum
 + 
off£t
 ) >> 
shiá
;

481 iàÐ
isLa¡
 )

483 
v®
 = ( val < 0 ) ? 0 : val;

484 
v®
 = ( v® > 
maxV®
 ) ? maxVal : val;

486 
d¡
[
cÞ
] = 
v®
;

489 
¤c
 +ð
¤cSŒide
;

490 
d¡
 +ð
d¡SŒide
;

492 
	}
}

508 
	g‹m¶©e
<
IÁ
 
	gN
>

509 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹rHÜ
(
IÁ
 
b™D•th
, 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isLa¡
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
)

511 iàÐ
isLa¡
 )

513 
fž‹r
<
N
, 
çl£
, 
Œue
,rue>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

517 
fž‹r
<
N
, 
çl£
, 
Œue
, f®£>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

519 
	}
}

536 
	g‹m¶©e
<
IÁ
 
	gN
>

537 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹rV”
(
IÁ
 
b™D•th
, 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
)

539 iàÐ
isFœ¡
 && 
isLa¡
 )

541 
fž‹r
<
N
, 
Œue
,rue,rue>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

543 iàÐ
isFœ¡
 && !
isLa¡
 )

545 
fž‹r
<
N
, 
Œue
,rue, 
çl£
>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

547 iàÐ!
isFœ¡
 && 
isLa¡
 )

549 
fž‹r
<
N
, 
Œue
, 
çl£
,rue>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

553 
fž‹r
<
N
, 
Œue
, 
çl£
, f®£>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
cÛff
);

555 
	}
}

576 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹rHÜ
(cÚ¡ 
CompÚ’tID
 
compID
, 
P–
 *
¤c
, 
IÁ
 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, IÁ 
äac
, 
BoÞ
 
isLa¡
, cÚ¡ 
ChromaFÜm©
 
fmt
, cÚ¡ IÁ 
b™D•th
 )

578 iàÐ
äac
 == 0 )

580 
	`fž‹rCÝy
(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
Œue
, 
isLa¡
 );

582 ià(
	`isLuma
(
compID
))

584 
	`as£¹
(
äac
 >ð0 && f¿ø< 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
);

585 
fž‹rHÜ
<
NTAPS_LUMA
>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
isLa¡
, 
m_lumaFž‹r
[
äac
]);

589 cÚ¡ 
UIÁ
 
csx
 = 
	`g‘CompÚ’tSÿËX
(
compID
, 
fmt
);

590 
	`as£¹
(
äac
 >=0 && 
csx
<2 && (äac<<(1-csx)è< 
CHROMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
);

591 
fž‹rHÜ
<
NTAPS_CHROMA
>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
isLa¡
, 
m_chromaFž‹r
[
äac
<<(1-
csx
)]);

593 
	}
}

612 
Void
 
	gTComIÁ”pÞ©iÚFž‹r
::
	$fž‹rV”
(cÚ¡ 
CompÚ’tID
 
compID
, 
P–
 *
¤c
, 
IÁ
 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, IÁ 
äac
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
, cÚ¡ 
ChromaFÜm©
 
fmt
, cÚ¡ IÁ 
b™D•th
 )

614 iàÐ
äac
 == 0 )

616 
	`fž‹rCÝy
(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
isFœ¡
, 
isLa¡
 );

618 ià(
	`isLuma
(
compID
))

620 
	`as£¹
(
äac
 >ð0 && f¿ø< 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
);

621 
fž‹rV”
<
NTAPS_LUMA
>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
isFœ¡
, 
isLa¡
, 
m_lumaFž‹r
[
äac
]);

625 cÚ¡ 
UIÁ
 
csy
 = 
	`g‘CompÚ’tSÿËY
(
compID
, 
fmt
);

626 
	`as£¹
(
äac
 >=0 && 
csy
<2 && (äac<<(1-csy)è< 
CHROMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
);

627 
fž‹rV”
<
NTAPS_CHROMA
>(
b™D•th
, 
¤c
, 
¤cSŒide
, 
d¡
, 
d¡SŒide
, 
width
, 
height
, 
isFœ¡
, 
isLa¡
, 
m_chromaFž‹r
[
äac
<<(1-
csy
)]);

629 
	}
}

	@source/Lib/TLibCommon/TComInterpolationFilter.h

39 #iâdeà
__TCOMINTERPOLATIONFILTER__


40 
	#__TCOMINTERPOLATIONFILTER__


	)

42 
	~"CommÚDef.h
"

47 
	#NTAPS_LUMA
 8

48 
	#NTAPS_CHROMA
 4

49 
	#IF_INTERNAL_PREC
 14

50 
	#IF_FILTER_PREC
 6

51 
	#IF_INTERNAL_OFFS
 (1<<(
IF_INTERNAL_PREC
-1))

52 

	)

56 þas 
	cTComIÁ”pÞ©iÚFž‹r


58 cÚ¡ 
TFž‹rCÛff
 
	mm_lumaFž‹r
[
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
][
NTAPS_LUMA
];

59 cÚ¡ 
TFž‹rCÛff
 
	mm_chromaFž‹r
[
CHROMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
][
NTAPS_CHROMA
];

61 
Void
 
fž‹rCÝy
(
IÁ
 
b™D•th
, cÚ¡ 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
);

63 
	m‹m¶©e
<
IÁ
 
	mN
, 
BoÞ
 
	misV”tiÿl
, BoÞ 
	misFœ¡
, BoÞ 
	misLa¡
>

64 
Void
 
fž‹r
(
IÁ
 
b™D•th
, 
P–
 cÚ¡ *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
);

66 
	m‹m¶©e
<
IÁ
 
	mN
>

67 
Void
 
fž‹rHÜ
(
IÁ
 
b™D•th
, 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isLa¡
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
);

68 
	m‹m¶©e
<
IÁ
 
	mN
>

69 
Void
 
fž‹rV”
(
IÁ
 
b™D•th
, 
P–
 *
¤c
, IÁ 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
, 
TFž‹rCÛff
 cÚ¡ *
cÛff
);

71 
	mpublic
:

72 
	$TComIÁ”pÞ©iÚFž‹r
() {}

73 ~
	$TComIÁ”pÞ©iÚFž‹r
(è{
	}
}

75 
Void
 
fž‹rHÜ
(cÚ¡ 
CompÚ’tID
 
compID
, 
P–
 *
¤c
, 
IÁ
 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, IÁ 
äac
, 
BoÞ
 
isLa¡
, cÚ¡ 
ChromaFÜm©
 
fmt
, cÚ¡ IÁ 
b™D•th
 );

76 
Void
 
fž‹rV”
(cÚ¡ 
CompÚ’tID
 
compID
, 
P–
 *
¤c
, 
IÁ
 
¤cSŒide
, P– *
d¡
, IÁ 
d¡SŒide
, IÁ 
width
, IÁ 
height
, IÁ 
äac
, 
BoÞ
 
isFœ¡
, BoÞ 
isLa¡
, cÚ¡ 
ChromaFÜm©
 
fmt
, cÚ¡ IÁ 
b™D•th
 );

	@source/Lib/TLibCommon/TComList.h

38 #iâdeà
__TCOMLIST__


39 
	#__TCOMLIST__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~<li¡
>

46 
	~<as£¹.h
>

47 
	~"CommÚDef.h
"

49 
	~<c¡dlib
>

50 
usšg
 
Çme¥aû
 
	g¡d
;

60 
	g‹m¶©e
< 
þass
 
	gC
 >

61 
þass
 
	gTComLi¡
 : 
public
 
¡d
::
li¡
< 
C
 >

63 
public
:

64 
ty³Çme
 
	t¡d
::
	tli¡
<
	tC
>::
	t™”©Ü
 
	tTComI‹¿tÜ
;

66 
	gTComLi¡
& 
	gÝ”©Ü
 +ðÐcÚ¡ 
TComLi¡
& 
rcTComLi¡
)

68 ifÐ! 
rcTComLi¡
.
em±y
() )

70 
š£¹
Ð
this
->
’d
(), 
rcTComLi¡
.
begš
(),„cTComList.end());

72  *
	gthis
;

75 
C
 
pÝBack
()

77 
C
 
	gcT
 = 
this
->
back
();

78 
	gthis
->
pÝ_back
();

79  
	gcT
;

82 
C
 
pÝFrÚt
()

84 
C
 
	gcT
 = 
this
->
äÚt
();

85 
	gthis
->
pÝ_äÚt
();

86  
	gcT
;

89 
Void
 
pushBack
ÐcÚ¡ 
C
& 
rcT
 )

92 ifÐ
	grcT
 !ð
NULL
 )

94 
this
->
push_back
Ð
rcT
);

98 
Void
 
pushFrÚt
ÐcÚ¡ 
C
& 
rcT
 )

101 ifÐ
	grcT
 !ð
NULL
 )

103 
this
->
push_äÚt
Ð
rcT
);

107 
TComI‹¿tÜ
 
fšd
ÐcÚ¡ 
C
& 
rcT
 )

109  
	g¡d
::
li¡
< 
C
 >::
fšd
Ð
this
->
begš
(),his->
’d
(), 
rcT
 );

	@source/Lib/TLibCommon/TComLoopFilter.cpp

38 
	~"TComLoÝFž‹r.h
"

39 
	~"TComSliû.h
"

40 
	~"TComMv.h
"

41 
	~"TComTU.h
"

53 
	#DEFAULT_INTRA_TC_OFFSET
 2

54 

	)

59 cÚ¡ 
UCh¬
 
	gTComLoÝFž‹r
::
sm_tcTabË
[
MAX_QP
 + 1 + 
DEFAULT_INTRA_TC_OFFSET
] =

64 cÚ¡ 
UCh¬
 
	gTComLoÝFž‹r
::
sm_b‘aTabË
[
MAX_QP
 + 1] =

73 
	gTComLoÝFž‹r
::
	$TComLoÝFž‹r
()

74 : 
	`m_uiNumP¬t™iÚs
(0)

75 , 
	$m_bLFCrossTžeBound¬y
(
Œue
)

77  
IÁ
 
edgeDœ
 = 0;ƒdgeDœ < 
NUM_EDGE_DIR
;ƒdgeDir++ )

79 
m_¯pucBS
 [
edgeDœ
] = 
NULL
;

80 
m_¯pbEdgeFž‹r
[
edgeDœ
] = 
NULL
;

82 
	}
}

84 
	gTComLoÝFž‹r
::~
	$TComLoÝFž‹r
()

86 
	}
}

91 
Void
 
TComLoÝFž‹r
::
	$£tCfg
Ð
BoÞ
 
bLFCrossTžeBound¬y
 )

93 
m_bLFCrossTžeBound¬y
 = 
bLFCrossTžeBound¬y
;

94 
	}
}

96 
Void
 
	gTComLoÝFž‹r
::
	$ü—‹
Ð
UIÁ
 
uiMaxCUD•th
 )

98 
	`de¡roy
();

99 
m_uiNumP¬t™iÚs
 = 1 << ( 
uiMaxCUD•th
<<1 );

100  
IÁ
 
edgeDœ
 = 0;ƒdgeDœ < 
NUM_EDGE_DIR
;ƒdgeDir++ )

102 
m_¯pucBS
 [
edgeDœ
] = 
Ãw
 
UCh¬
[
m_uiNumP¬t™iÚs
];

103 
m_¯pbEdgeFž‹r
[
edgeDœ
] = 
Ãw
 
BoÞ
 [
m_uiNumP¬t™iÚs
];

105 
	}
}

107 
Void
 
	gTComLoÝFž‹r
::
	$de¡roy
()

109  
IÁ
 
edgeDœ
 = 0;ƒdgeDœ < 
NUM_EDGE_DIR
;ƒdgeDir++ )

111 ià(
m_¯pucBS
[
edgeDœ
] !ð
NULL
)

113 
d–‘e
 [] 
m_¯pucBS
[
edgeDœ
];

114 
m_¯pucBS
[
edgeDœ
] = 
NULL
;

117 ià(
m_¯pbEdgeFž‹r
[
edgeDœ
])

119 
d–‘e
 [] 
m_¯pbEdgeFž‹r
[
edgeDœ
];

120 
m_¯pbEdgeFž‹r
[
edgeDœ
] = 
NULL
;

123 
	}
}

130 
Void
 
	gTComLoÝFž‹r
::
	$loÝFž‹rPic
Ð
TComPic
* 
pcPic
 )

133  
UIÁ
 
ùuRsAddr
 = 0; ctuRsAdd¸< 
pcPic
->
	`g‘Numb”OfCtusInF¿me
(); ctuRsAddr++ )

135 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

137 ::
	`mem£t
Ð
m_¯pucBS
 [
EDGE_VER
], 0, Ð
UCh¬
 ) * 
m_uiNumP¬t™iÚs
 );

138 ::
	`mem£t
Ð
m_¯pbEdgeFž‹r
[
EDGE_VER
], 0, Ð
BoÞ
 ) * 
m_uiNumP¬t™iÚs
 );

141 
	`xDeblockCU
Ð
pCtu
, 0, 0, 
EDGE_VER
 );

145  
UIÁ
 
ùuRsAddr
 = 0; ctuRsAdd¸< 
pcPic
->
	`g‘Numb”OfCtusInF¿me
(); ctuRsAddr++ )

147 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

149 ::
	`mem£t
Ð
m_¯pucBS
 [
EDGE_HOR
], 0, Ð
UCh¬
 ) * 
m_uiNumP¬t™iÚs
 );

150 ::
	`mem£t
Ð
m_¯pbEdgeFž‹r
[
EDGE_HOR
], 0, Ð
BoÞ
 ) * 
m_uiNumP¬t™iÚs
 );

153 
	`xDeblockCU
Ð
pCtu
, 0, 0, 
EDGE_HOR
 );

155 
	}
}

170 
Void
 
	gTComLoÝFž‹r
::
	$xDeblockCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
, 
DeblockEdgeDœ
 
edgeDœ
 )

172 if(
pcCU
->
	`g‘Pic
()==0||pcCU->
	`g‘P¬t™iÚSize
(
uiAbsZÜd”Idx
)==
NUMBER_OF_PART_SIZES
)

176 
TComPic
* 
pcPic
 = 
pcCU
->
	`g‘Pic
();

177 
UIÁ
 
uiCurNumP¬ts
 = 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
<<1);

178 
UIÁ
 
uiQNumP¬ts
 = 
uiCurNumP¬ts
>>2;

179 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

181 ifÐ
pcCU
->
	`g‘D•th
(
uiAbsZÜd”Idx
è> 
uiD•th
 )

183  
UIÁ
 
uiP¬tIdx
 = 0; uiP¬tIdx < 4; uiP¬tIdx++, 
uiAbsZÜd”Idx
+=
uiQNumP¬ts
 )

185 
UIÁ
 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
] ];

186 
UIÁ
 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
] ];

187 ifÐÐ
uiLP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiTP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

189 
	`xDeblockCU
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
+1, 
edgeDœ
 );

195 
	`xS‘LoÝfž‹rP¬am
Ð
pcCU
, 
uiAbsZÜd”Idx
 );

196 
TComTURecur£
 
	`tuRecur£
(
pcCU
, 
uiAbsZÜd”Idx
);

197 
	`xS‘Edgefž‹rTU
 ( 
tuRecur£
 );

198 
	`xS‘Edgefž‹rPU
 ( 
pcCU
, 
uiAbsZÜd”Idx
 );

200 cÚ¡ 
UIÁ
 
uiP–sInP¬t
 = 
¥s
.
	`g‘MaxCUWidth
(è>> sps.
	`g‘MaxTÙ®CUD•th
();

202  
UIÁ
 
uiP¬tIdx
 = 
uiAbsZÜd”Idx
; uiP¬tIdx < uiAbsZÜd”Idx + 
uiCurNumP¬ts
; uiPartIdx++ )

204 
UIÁ
 
uiBSCheck
;

205 ifÐ
uiP–sInP¬t
 == 4 )

207 
uiBSCheck
 = (
edgeDœ
 =ð
EDGE_VER
 && 
uiP¬tIdx
%2 =ð0è|| (edgeDœ =ð
EDGE_HOR
 && (uiPartIdx-((uiPartIdx>>2)<<2))/2 == 0);

211 
uiBSCheck
 = 1;

214 iàÐ
m_¯pbEdgeFž‹r
[
edgeDœ
][
uiP¬tIdx
] && 
uiBSCheck
 )

216 
	`xG‘Bound¬ySŒ’gthSšgË
 ( 
pcCU
, 
edgeDœ
, 
uiP¬tIdx
 );

220 
UIÁ
 
P¬tIdxInü
 = 
DEBLOCK_SMALLEST_BLOCK
 / 
uiP–sInP¬t
 ? DEBLOCK_SMALLEST_BLOCK / uiPelsInPart : 1 ;

222 
UIÁ
 
uiSizeInPU
 = 
pcPic
->
	`g‘NumP¬tInCtuWidth
()>>(
uiD•th
);

223 cÚ¡ 
ChromaFÜm©
 
chFmt
=
pcPic
->
	`g‘ChromaFÜm©
();

224 cÚ¡ 
UIÁ
 
shiáFaùÜ
 = 
edgeDœ
 =ð
EDGE_VER
 ? 
pcPic
->
	`g‘CompÚ’tSÿËX
(
COMPONENT_Cb
è:…cPic->
	`g‘CompÚ’tSÿËY
(COMPONENT_Cb);

225 cÚ¡ 
BoÞ
 
bAlwaysDoChroma
=
chFmt
==
CHROMA_444
;

227  
IÁ
 
iEdge
 = 0; iEdg< 
uiSizeInPU
 ; iEdge+=
P¬tIdxInü
)

229 
	`xEdgeFž‹rLuma
 ( 
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
edgeDœ
, 
iEdge
 );

230 iàÐ
chFmt
!=
CHROMA_400
 && (
bAlwaysDoChroma
 ||

231 (
uiP–sInP¬t
>
DEBLOCK_SMALLEST_BLOCK
) ||

232 (
iEdge
 % ( (
DEBLOCK_SMALLEST_BLOCK
<<
shiáFaùÜ
)/
uiP–sInP¬t
 ) ) == 0

236 
	`xEdgeFž‹rChroma
 ( 
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
edgeDœ
, 
iEdge
 );

239 
	}
}

241 
Void
 
	gTComLoÝFž‹r
::
	$xS‘Edgefž‹rMuÉË
Ð
TComD©aCU
* 
pcCU
,

242 
UIÁ
 
uiAbsZÜd”Idx
,

243 
UIÁ
 
uiD•th
,

244 
DeblockEdgeDœ
 
edgeDœ
,

245 
IÁ
 
iEdgeIdx
,

246 
BoÞ
 
bV®ue
,

247 
UIÁ
 
uiWidthInBa£Un™s
,

248 
UIÁ
 
uiHeightInBa£Un™s
,

249 cÚ¡ 
TComReùªgË
 *
»ù
)

251 iàÐ
uiWidthInBa£Un™s
 == 0 )

253 
uiWidthInBa£Un™s
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
 (è>> 
uiD•th
;

255 iàÐ
uiHeightInBa£Un™s
 == 0 )

257 
uiHeightInBa£Un™s
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuHeight
(è>> 
uiD•th
;

259 cÚ¡ 
UIÁ
 
uiNumEËm
 = 
edgeDœ
 =ð
EDGE_VER
 ? 
uiHeightInBa£Un™s
 : 
uiWidthInBa£Un™s
;

260 
	`as£¹
Ð
uiNumEËm
 > 0 );

261 
	`as£¹
Ð
uiWidthInBa£Un™s
 > 0 );

262 
	`as£¹
Ð
uiHeightInBa£Un™s
 > 0 );

263  
UIÁ
 
ui
 = 0; u˜< 
uiNumEËm
; ui++ )

265 cÚ¡ 
UIÁ
 
uiBsIdx
 = 
	`xC®cBsIdx
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
edgeDœ
, 
iEdgeIdx
, 
ui
, 
»ù
 );

266 
m_¯pbEdgeFž‹r
[
edgeDœ
][
uiBsIdx
] = 
bV®ue
;

267 ià(
iEdgeIdx
 == 0)

269 
m_¯pucBS
[
edgeDœ
][
uiBsIdx
] = 
bV®ue
;

272 
	}
}

274 
Void
 
	gTComLoÝFž‹r
::
	$xS‘Edgefž‹rTU
Ð
TComTU
 &
rTu
 )

276 
TComD©aCU
* 
pcCU
 = 
rTu
.
	`g‘CU
();

277 
UIÁ
 
uiT¿nsD•thTÙ®
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

279 ifÐ
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
rTu
.
	`G‘AbsP¬tIdxTU
(èè+…cCU->
	`g‘D•th
ÐrTu.G‘AbsP¬tIdxTU()è> 
uiT¿nsD•thTÙ®
 )

281 
TComTURecur£
 
	`tuChžd
(
rTu
, 
çl£
);

284 
	`xS‘Edgefž‹rTU
Ð
tuChžd
 );

285 } 
tuChžd
.
	`ÃxtSeùiÚ
(
rTu
));

289 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
COMPONENT_Y
);

290 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

292 cÚ¡ 
UIÁ
 
uiWidthInBa£Un™s
 = 
»ù
.
width
 / (
¥s
.
	`g‘MaxCUWidth
(è>> sps.
	`g‘MaxTÙ®CUD•th
());

293 cÚ¡ 
UIÁ
 
uiHeightInBa£Un™s
 = 
»ù
.
height
 / (
¥s
.
	`g‘MaxCUHeight
(è>> sps.
	`g‘MaxTÙ®CUD•th
());

295 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
rTu
.
	`G‘AbsP¬tIdxCU
(), 
uiT¿nsD•thTÙ®
, 
EDGE_VER
, 0, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
, 
uiWidthInBa£Un™s
, 
uiHeightInBa£Un™s
, &
»ù
 );

296 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
rTu
.
	`G‘AbsP¬tIdxCU
(), 
uiT¿nsD•thTÙ®
, 
EDGE_HOR
, 0, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
, 
uiWidthInBa£Un™s
, 
uiHeightInBa£Un™s
, &
»ù
 );

297 
	}
}

299 
Void
 
	gTComLoÝFž‹r
::
	$xS‘Edgefž‹rPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
 )

301 cÚ¡ 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
Ð
uiAbsZÜd”Idx
 );

302 cÚ¡ 
UIÁ
 
uiWidthInBa£Un™s
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
 (è>> 
uiD•th
;

303 cÚ¡ 
UIÁ
 
uiHeightInBa£Un™s
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuHeight
(è>> 
uiD•th
;

304 cÚ¡ 
UIÁ
 
uiHWidthInBa£Un™s
 = 
uiWidthInBa£Un™s
 >> 1;

305 cÚ¡ 
UIÁ
 
uiHHeightInBa£Un™s
 = 
uiHeightInBa£Un™s
 >> 1;

306 cÚ¡ 
UIÁ
 
uiQWidthInBa£Un™s
 = 
uiWidthInBa£Un™s
 >> 2;

307 cÚ¡ 
UIÁ
 
uiQHeightInBa£Un™s
 = 
uiHeightInBa£Un™s
 >> 2;

309 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_VER
, 0, 
m_¡LFCUP¬am
.
bLeáEdge
 );

310 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_HOR
, 0, 
m_¡LFCUP¬am
.
bTÝEdge
 );

312  
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsZÜd”Idx
 ) )

314 
SIZE_2Nx2N
:

318 
SIZE_2NxN
:

320 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_HOR
, 
uiHHeightInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

323 
SIZE_Nx2N
:

325 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_VER
, 
uiHWidthInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

328 
SIZE_NxN
:

330 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_VER
, 
uiHWidthInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

331 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_HOR
, 
uiHHeightInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

334 
SIZE_2NxnU
:

336 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_HOR
, 
uiQHeightInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

339 
SIZE_2NxnD
:

341 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_HOR
, 
uiHeightInBa£Un™s
 - 
uiQHeightInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

344 
SIZE_nLx2N
:

346 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_VER
, 
uiQWidthInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

349 
SIZE_nRx2N
:

351 
	`xS‘Edgefž‹rMuÉË
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
EDGE_VER
, 
uiWidthInBa£Un™s
 - 
uiQWidthInBa£Un™s
, 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 );

359 
	}
}

362 
Void
 
	gTComLoÝFž‹r
::
	$xS‘LoÝfž‹rP¬am
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
 )

364 
UIÁ
 
uiX
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[ 
uiAbsZÜd”Idx
 ] ];

365 
UIÁ
 
uiY
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[ 
uiAbsZÜd”Idx
 ] ];

367 
UIÁ
 
uiTempP¬tIdx
;

369 
m_¡LFCUP¬am
.
bIÁ”ÇlEdge
 = ! 
pcCU
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rDi§bË
();

371 iàÐ(
uiX
 =ð0è|| 
pcCU
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rDi§bË
() )

373 
m_¡LFCUP¬am
.
bLeáEdge
 = 
çl£
;

377 
m_¡LFCUP¬am
.
bLeáEdge
 = 
Œue
;

379 iàÐ
m_¡LFCUP¬am
.
bLeáEdge
 )

381 cÚ¡ 
TComD©aCU
* 
pcTempCU
 = 
pcCU
->
	`g‘PULeá
Ð
uiTempP¬tIdx
, 
uiAbsZÜd”Idx
, !pcCU->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
(), !
m_bLFCrossTžeBound¬y
);

383 iàÐ
pcTempCU
 !ð
NULL
 )

385 
m_¡LFCUP¬am
.
bLeáEdge
 = 
Œue
;

389 
m_¡LFCUP¬am
.
bLeáEdge
 = 
çl£
;

393 iàÐ(
uiY
 =ð0 ) || 
pcCU
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rDi§bË
() )

395 
m_¡LFCUP¬am
.
bTÝEdge
 = 
çl£
;

399 
m_¡LFCUP¬am
.
bTÝEdge
 = 
Œue
;

401 iàÐ
m_¡LFCUP¬am
.
bTÝEdge
 )

403 cÚ¡ 
TComD©aCU
* 
pcTempCU
 = 
pcCU
->
	`g‘PUAbove
Ð
uiTempP¬tIdx
, 
uiAbsZÜd”Idx
, !pcCU->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
(), 
çl£
, !
m_bLFCrossTžeBound¬y
);

405 iàÐ
pcTempCU
 !ð
NULL
 )

407 
m_¡LFCUP¬am
.
bTÝEdge
 = 
Œue
;

411 
m_¡LFCUP¬am
.
bTÝEdge
 = 
çl£
;

414 
	}
}

416 
Void
 
	gTComLoÝFž‹r
::
	$xG‘Bound¬ySŒ’gthSšgË
 ( 
TComD©aCU
* 
pCtu
, 
DeblockEdgeDœ
 
edgeDœ
, 
UIÁ
 
uiAbsP¬tIdx4x4BlockW™hšCtu
 )

418 
TComSliû
 * cÚ¡ 
pcSliû
 = 
pCtu
->
	`g‘Sliû
();

420 cÚ¡ 
BoÞ
 
lfCrossSliûBound¬yFÏg
=
pCtu
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
();

422 cÚ¡ 
UIÁ
 
uiP¬tQ
 = 
uiAbsP¬tIdx4x4BlockW™hšCtu
;

423 
TComD©aCU
* cÚ¡ 
pcCUQ
 = 
pCtu
;

425 
UIÁ
 
uiP¬tP
;

426 cÚ¡ 
TComD©aCU
* 
pcCUP
;

427 
UIÁ
 
uiBs
 = 0;

430 ià(
edgeDœ
 =ð
EDGE_VER
)

432 
pcCUP
 = 
pcCUQ
->
	`g‘PULeá
(
uiP¬tP
, 
uiP¬tQ
, !
lfCrossSliûBound¬yFÏg
, !
m_bLFCrossTžeBound¬y
);

436 
pcCUP
 = 
pcCUQ
->
	`g‘PUAbove
(
uiP¬tP
, 
uiP¬tQ
, !
pCtu
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
(), 
çl£
, !
m_bLFCrossTžeBound¬y
);

440 iàÐ
pcCUP
->
	`isIÁ¿
(
uiP¬tP
è|| 
pcCUQ
->isIÁ¿(
uiP¬tQ
) )

442 
uiBs
 = 2;

446 iàÐ!
pcCUP
->
	`isIÁ¿
(
uiP¬tP
è&& !
pcCUQ
->isIÁ¿(
uiP¬tQ
) )

448 
UIÁ
 
nsP¬tQ
 = 
uiP¬tQ
;

449 
UIÁ
 
nsP¬tP
 = 
uiP¬tP
;

451 iàÐ
m_¯pucBS
[
edgeDœ
][
uiAbsP¬tIdx4x4BlockW™hšCtu
] && (
pcCUQ
->
	`g‘Cbf
Ð
nsP¬tQ
, 
COMPONENT_Y
,…cCUQ->
	`g‘T¿nsfÜmIdx
ÒsP¬tQ)è!ð0 || 
pcCUP
->g‘CbfÐ
nsP¬tP
, COMPONENT_Y,…cCUP->getTransformIdx(nsPartP) ) != 0) )

453 
uiBs
 = 1;

457 ià(
pcSliû
->
	`isIÁ”B
(è|| 
pcCUP
->
	`g‘Sliû
()->isInterB())

459 
IÁ
 
iRefIdx
;

460 
iRefIdx
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘RefIdx
(
uiP¬tP
);

461 cÚ¡ 
TComPic
 *
piRefP0
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcCUP
->
	`g‘Sliû
()->
	`g‘RefPic
(
REF_PIC_LIST_0
, iRefIdx);

462 
iRefIdx
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘RefIdx
(
uiP¬tP
);

463 cÚ¡ 
TComPic
 *
piRefP1
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcCUP
->
	`g‘Sliû
()->
	`g‘RefPic
(
REF_PIC_LIST_1
, iRefIdx);

464 
iRefIdx
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘RefIdx
(
uiP¬tQ
);

465 cÚ¡ 
TComPic
 *
piRefQ0
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcSliû
->
	`g‘RefPic
(
REF_PIC_LIST_0
, iRefIdx);

466 
iRefIdx
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘RefIdx
(
uiP¬tQ
);

467 cÚ¡ 
TComPic
 *
piRefQ1
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcSliû
->
	`g‘RefPic
(
REF_PIC_LIST_1
, iRefIdx);

469 
TComMv
 
pcMvP0
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘Mv
(
uiP¬tP
);

470 
TComMv
 
pcMvP1
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘Mv
(
uiP¬tP
);

471 
TComMv
 
pcMvQ0
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘Mv
(
uiP¬tQ
);

472 
TComMv
 
pcMvQ1
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘Mv
(
uiP¬tQ
);

474 ià(
piRefP0
 =ð
NULL
)

476 
pcMvP0
.
	`£tZ”o
();

478 ià(
piRefP1
 =ð
NULL
)

480 
pcMvP1
.
	`£tZ”o
();

482 ià(
piRefQ0
 =ð
NULL
)

484 
pcMvQ0
.
	`£tZ”o
();

486 ià(
piRefQ1
 =ð
NULL
)

488 
pcMvQ1
.
	`£tZ”o
();

491 iàÐ((
piRefP0
==
piRefQ0
)&&(
piRefP1
==
piRefQ1
)) || ((piRefP0==piRefQ1)&&(piRefP1==piRefQ0)) )

493 iàÐ
piRefP0
 !ð
piRefP1
 )

495 iàÐ
piRefP0
 =ð
piRefQ0
 )

497 
uiBs
 = ((
	`abs
(
pcMvQ0
.
	`g‘HÜ
(è- 
pcMvP0
.getHor()) >= 4) ||

498 (
	`abs
(
pcMvQ0
.
	`g‘V”
(è- 
pcMvP0
.getVer()) >= 4) ||

499 (
	`abs
(
pcMvQ1
.
	`g‘HÜ
(è- 
pcMvP1
.getHor()) >= 4) ||

500 (
	`abs
(
pcMvQ1
.
	`g‘V”
(è- 
pcMvP1
.getVer()) >= 4)) ? 1 : 0;

504 
uiBs
 = ((
	`abs
(
pcMvQ1
.
	`g‘HÜ
(è- 
pcMvP0
.getHor()) >= 4) ||

505 (
	`abs
(
pcMvQ1
.
	`g‘V”
(è- 
pcMvP0
.getVer()) >= 4) ||

506 (
	`abs
(
pcMvQ0
.
	`g‘HÜ
(è- 
pcMvP1
.getHor()) >= 4) ||

507 (
	`abs
(
pcMvQ0
.
	`g‘V”
(è- 
pcMvP1
.getVer()) >= 4)) ? 1 : 0;

512 
uiBs
 = ((
	`abs
(
pcMvQ0
.
	`g‘HÜ
(è- 
pcMvP0
.getHor()) >= 4) ||

513 (
	`abs
(
pcMvQ0
.
	`g‘V”
(è- 
pcMvP0
.getVer()) >= 4) ||

514 (
	`abs
(
pcMvQ1
.
	`g‘HÜ
(è- 
pcMvP1
.getHor()) >= 4) ||

515 (
	`abs
(
pcMvQ1
.
	`g‘V”
(è- 
pcMvP1
.getVer()) >= 4)) &&

516 ((
	`abs
(
pcMvQ1
.
	`g‘HÜ
(è- 
pcMvP0
.getHor()) >= 4) ||

517 (
	`abs
(
pcMvQ1
.
	`g‘V”
(è- 
pcMvP0
.getVer()) >= 4) ||

518 (
	`abs
(
pcMvQ0
.
	`g‘HÜ
(è- 
pcMvP1
.getHor()) >= 4) ||

519 (
	`abs
(
pcMvQ0
.
	`g‘V”
(è- 
pcMvP1
.getVer()) >= 4)) ? 1 : 0;

524 
uiBs
 = 1;

529 
IÁ
 
iRefIdx
;

530 
iRefIdx
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘RefIdx
(
uiP¬tP
);

531 cÚ¡ 
TComPic
 *
piRefP0
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcCUP
->
	`g‘Sliû
()->
	`g‘RefPic
(
REF_PIC_LIST_0
, iRefIdx);

532 
iRefIdx
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘RefIdx
(
uiP¬tQ
);

533 cÚ¡ 
TComPic
 *
piRefQ0
 = (
iRefIdx
 < 0è? 
NULL
 : 
pcSliû
->
	`g‘RefPic
(
REF_PIC_LIST_0
, iRefIdx);

534 
TComMv
 
pcMvP0
 = 
pcCUP
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘Mv
(
uiP¬tP
);

535 
TComMv
 
pcMvQ0
 = 
pcCUQ
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘Mv
(
uiP¬tQ
);

537 ià(
piRefP0
 =ð
NULL
)

539 
pcMvP0
.
	`£tZ”o
();

541 ià(
piRefQ0
 =ð
NULL
)

543 
pcMvQ0
.
	`£tZ”o
();

546 
uiBs
 = ((
piRefP0
 !ð
piRefQ0
) ||

547 (
	`abs
(
pcMvQ0
.
	`g‘HÜ
(è- 
pcMvP0
.getHor()) >= 4) ||

548 (
	`abs
(
pcMvQ0
.
	`g‘V”
(è- 
pcMvP0
.getVer()) >= 4)) ? 1 : 0;

553 
m_¯pucBS
[
edgeDœ
][
uiAbsP¬tIdx4x4BlockW™hšCtu
] = 
uiBs
;

554 
	}
}

557 
Void
 
	gTComLoÝFž‹r
::
	$xEdgeFž‹rLuma
Ð
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiD•th
, cÚ¡ 
DeblockEdgeDœ
 
edgeDœ
, cÚ¡ 
IÁ
 
iEdge
 )

559 
TComPicYuv
 *
pcPicYuvRec
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
();

560 
P–
 *
piSrc
 = 
pcPicYuvRec
->
	`g‘Addr
(
COMPONENT_Y
, 
pcCU
->
	`g‘CtuRsAddr
(), 
uiAbsZÜd”Idx
 );

561 
P–
 *
piTmpSrc
 = 
piSrc
;

562 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

563 cÚ¡ 
BoÞ
 
µsT¿nsquªtBy·ssEÇbËdFÏg
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
();

564 cÚ¡ 
IÁ
 
b™D•thLuma
 = 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
);

565 cÚ¡ 
BoÞ
 
lfCrossSliûBound¬yFÏg
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
();

567 
IÁ
 
iSŒide
 = 
pcPicYuvRec
->
	`g‘SŒide
(
COMPONENT_Y
);

568 
IÁ
 
iQP
 = 0;

569 
IÁ
 
iQP_P
 = 0;

570 
IÁ
 
iQP_Q
 = 0;

571 
UIÁ
 
uiNumP¬ts
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
()>>
uiD•th
;

573 
UIÁ
 
uiP–sInP¬t
 = 
¥s
.
	`g‘MaxCUWidth
(è>> sps.
	`g‘MaxTÙ®CUD•th
();

574 
UIÁ
 
uiBsAbsIdx
 = 0, 
uiBs
 = 0;

575 
IÁ
 
iOff£t
, 
iSrcS‹p
;

577 
BoÞ
 
bPCMFž‹r
 = (
¥s
.
	`g‘U£PCM
(è&& sps.
	`g‘PCMFž‹rDi§bËFÏg
())? 
Œue
 : 
çl£
;

578 
BoÞ
 
bP¬tPNoFž‹r
 = 
çl£
;

579 
BoÞ
 
bP¬tQNoFž‹r
 = 
çl£
;

580 
UIÁ
 
uiP¬tPIdx
 = 0;

581 
UIÁ
 
uiP¬tQIdx
 = 0;

582 cÚ¡ 
TComD©aCU
* 
pcCUP
 = 
pcCU
;

583 
TComD©aCU
* 
pcCUQ
 = 
pcCU
;

584 
IÁ
 
b‘aOff£tDiv2
 = 
pcCUQ
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
();

585 
IÁ
 
tcOff£tDiv2
 = 
pcCUQ
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rTcOff£tDiv2
();

587 ià(
edgeDœ
 =ð
EDGE_VER
)

589 
iOff£t
 = 1;

590 
iSrcS‹p
 = 
iSŒide
;

591 
piTmpSrc
 +ð
iEdge
*
uiP–sInP¬t
;

595 
iOff£t
 = 
iSŒide
;

596 
iSrcS‹p
 = 1;

597 
piTmpSrc
 +ð
iEdge
*
uiP–sInP¬t
*
iSŒide
;

600 cÚ¡ 
IÁ
 
iB™d•thSÿË
 = 1 << (
b™D•thLuma
-8);

602  
UIÁ
 
iIdx
 = 0; iIdx < 
uiNumP¬ts
; iIdx++ )

604 
uiBsAbsIdx
 = 
	`xC®cBsIdx
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
edgeDœ
, 
iEdge
, 
iIdx
);

605 
uiBs
 = 
m_¯pucBS
[
edgeDœ
][
uiBsAbsIdx
];

606 iàÐ
uiBs
 )

608 
iQP_Q
 = 
pcCU
->
	`g‘QP
Ð
uiBsAbsIdx
 );

609 
uiP¬tQIdx
 = 
uiBsAbsIdx
;

611 ià(
edgeDœ
 =ð
EDGE_VER
)

613 
pcCUP
 = 
pcCUQ
->
	`g‘PULeá
 (
uiP¬tPIdx
, 
uiP¬tQIdx
,!
lfCrossSliûBound¬yFÏg
, !
m_bLFCrossTžeBound¬y
);

617 
pcCUP
 = 
pcCUQ
->
	`g‘PUAbove
(
uiP¬tPIdx
, 
uiP¬tQIdx
,!
lfCrossSliûBound¬yFÏg
, 
çl£
, !
m_bLFCrossTžeBound¬y
);

620 
iQP_P
 = 
pcCUP
->
	`g‘QP
(
uiP¬tPIdx
);

621 
iQP
 = (
iQP_P
 + 
iQP_Q
 + 1) >> 1;

623 
IÁ
 
iIndexTC
 = 
	`Cl3
(0, 
MAX_QP
+
DEFAULT_INTRA_TC_OFFSET
, 
	`IÁ
(
iQP
 + DEFAULT_INTRA_TC_OFFSET*(
uiBs
-1è+ (
tcOff£tDiv2
 << 1)));

624 
IÁ
 
iIndexB
 = 
	`Cl3
(0, 
MAX_QP
, 
iQP
 + (
b‘aOff£tDiv2
 << 1));

626 
IÁ
 
iTc
 = 
sm_tcTabË
[
iIndexTC
]*
iB™d•thSÿË
;

627 
IÁ
 
iB‘a
 = 
sm_b‘aTabË
[
iIndexB
]*
iB™d•thSÿË
;

628 
IÁ
 
iSideTh»shÞd
 = (
iB‘a
+(iBeta>>1))>>3;

629 
IÁ
 
iThrCut
 = 
iTc
*10;

632 
UIÁ
 
uiBlocksInP¬t
 = 
uiP–sInP¬t
 / 4 ? uiPelsInPart / 4 : 1;

633 
UIÁ
 
iBlkIdx
 = 0; iBlkIdx<
uiBlocksInP¬t
; iBlkIdx ++)

635 
IÁ
 
dp0
 = 
	`xC®cDP
Ð
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+0), 
iOff£t
);

636 
IÁ
 
dq0
 = 
	`xC®cDQ
Ð
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+0), 
iOff£t
);

637 
IÁ
 
dp3
 = 
	`xC®cDP
Ð
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+3), 
iOff£t
);

638 
IÁ
 
dq3
 = 
	`xC®cDQ
Ð
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+3), 
iOff£t
);

639 
IÁ
 
d0
 = 
dp0
 + 
dq0
;

640 
IÁ
 
d3
 = 
dp3
 + 
dq3
;

642 
IÁ
 
dp
 = 
dp0
 + 
dp3
;

643 
IÁ
 
dq
 = 
dq0
 + 
dq3
;

644 
IÁ
 
d
 = 
d0
 + 
d3
;

646 ià(
bPCMFž‹r
 || 
µsT¿nsquªtBy·ssEÇbËdFÏg
)

649 
bP¬tPNoFž‹r
 = (
bPCMFž‹r
 && 
pcCUP
->
	`g‘IPCMFÏg
(
uiP¬tPIdx
));

650 
bP¬tQNoFž‹r
 = (
bPCMFž‹r
 && 
pcCUQ
->
	`g‘IPCMFÏg
(
uiP¬tQIdx
));

653 
bP¬tPNoFž‹r
 = bP¬tPNoFž‹¸|| (
pcCUP
->
	`isLos¦essCoded
(
uiP¬tPIdx
) );

654 
bP¬tQNoFž‹r
 = bP¬tQNoFž‹¸|| (
pcCUQ
->
	`isLos¦essCoded
(
uiP¬tQIdx
) );

657 ià(
d
 < 
iB‘a
)

659 
BoÞ
 
bFž‹rP
 = (
dp
 < 
iSideTh»shÞd
);

660 
BoÞ
 
bFž‹rQ
 = (
dq
 < 
iSideTh»shÞd
);

662 
BoÞ
 
sw
 = 
	`xU£SŒÚgFž‹ršg
Ð
iOff£t
, 2*
d0
, 
iB‘a
, 
iTc
, 
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+0))

663 && 
	`xU£SŒÚgFž‹ršg
Ð
iOff£t
, 2*
d3
, 
iB‘a
, 
iTc
, 
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+3));

665  
IÁ
 
i
 = 0; i < 
DEBLOCK_SMALLEST_BLOCK
/2; i++)

667 
	`xP–Fž‹rLuma
Ð
piTmpSrc
+
iSrcS‹p
*(
iIdx
*
uiP–sInP¬t
+
iBlkIdx
*4+
i
), 
iOff£t
, 
iTc
, 
sw
, 
bP¬tPNoFž‹r
, 
bP¬tQNoFž‹r
, 
iThrCut
, 
bFž‹rP
, 
bFž‹rQ
, 
b™D•thLuma
);

673 
	}
}

676 
Void
 
	gTComLoÝFž‹r
::
	$xEdgeFž‹rChroma
Ð
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiD•th
, cÚ¡ 
DeblockEdgeDœ
 
edgeDœ
, cÚ¡ 
IÁ
 
iEdge
 )

678 
TComPicYuv
 *
pcPicYuvRec
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
();

679 
IÁ
 
iSŒide
 = 
pcPicYuvRec
->
	`g‘SŒide
(
COMPONENT_Cb
);

680 
P–
 *
piSrcCb
 = 
pcPicYuvRec
->
	`g‘Addr
Ð
COMPONENT_Cb
, 
pcCU
->
	`g‘CtuRsAddr
(), 
uiAbsZÜd”Idx
 );

681 
P–
 *
piSrcCr
 = 
pcPicYuvRec
->
	`g‘Addr
Ð
COMPONENT_Cr
, 
pcCU
->
	`g‘CtuRsAddr
(), 
uiAbsZÜd”Idx
 );

682 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

683 cÚ¡ 
IÁ
 
b™D•thChroma
 = 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
);

685 cÚ¡ 
UIÁ
 
uiP–sInP¬tChromaH
 = 
¥s
.
	`g‘MaxCUWidth
(è>> (¥s.
	`g‘MaxTÙ®CUD•th
()+
pcPicYuvRec
->
	`g‘CompÚ’tSÿËX
(
COMPONENT_Cb
));

686 cÚ¡ 
UIÁ
 
uiP–sInP¬tChromaV
 = 
¥s
.
	`g‘MaxCUHeight
(è>> (¥s.
	`g‘MaxTÙ®CUD•th
()+
pcPicYuvRec
->
	`g‘CompÚ’tSÿËY
(
COMPONENT_Cb
));

688 
IÁ
 
iQP
 = 0;

689 
IÁ
 
iQP_P
 = 0;

690 
IÁ
 
iQP_Q
 = 0;

692 
IÁ
 
iOff£t
, 
iSrcS‹p
;

693 
UIÁ
 
uiLoÝL’gth
;

695 cÚ¡ 
UIÁ
 
uiCtuWidthInBa£Un™s
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
();

697 
BoÞ
 
bPCMFž‹r
 = (
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£PCM
(è&&…cCU->g‘Sliû()->g‘SPS()->
	`g‘PCMFž‹rDi§bËFÏg
())? 
Œue
 : 
çl£
;

698 
BoÞ
 
bP¬tPNoFž‹r
 = 
çl£
;

699 
BoÞ
 
bP¬tQNoFž‹r
 = 
çl£
;

700 
TComD©aCU
* 
pcCUQ
 = 
pcCU
;

701 
IÁ
 
tcOff£tDiv2
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘DeblockšgFž‹rTcOff£tDiv2
();

704 
UIÁ
 
uiEdgeNumInCtuV”t
 = 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
]%
uiCtuWidthInBa£Un™s
 + 
iEdge
;

705 
UIÁ
 
uiEdgeNumInCtuHÜ
 = 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
]/
uiCtuWidthInBa£Un™s
 + 
iEdge
;

707 iàÐ(
uiP–sInP¬tChromaH
 < 
DEBLOCK_SMALLEST_BLOCK
è&& (
uiP–sInP¬tChromaV
 < DEBLOCK_SMALLEST_BLOCK) &&

709 Ð(
uiEdgeNumInCtuV”t
%(
DEBLOCK_SMALLEST_BLOCK
/
uiP–sInP¬tChromaH
)è&& (
edgeDœ
==
EDGE_VER
) ) ||

710 Ð(
uiEdgeNumInCtuHÜ
 %(
DEBLOCK_SMALLEST_BLOCK
/
uiP–sInP¬tChromaV
)è&& (
edgeDœ
==
EDGE_HOR
) )

718 cÚ¡ 
BoÞ
 
lfCrossSliûBound¬yFÏg
=
pcCU
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
();

720 
UIÁ
 
uiNumP¬ts
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
()>>
uiD•th
;

722 
UIÁ
 
uiBsAbsIdx
;

723 
UCh¬
 
ucBs
;

725 
P–
* 
piTmpSrcCb
 = 
piSrcCb
;

726 
P–
* 
piTmpSrcCr
 = 
piSrcCr
;

728 ià(
edgeDœ
 =ð
EDGE_VER
)

730 
iOff£t
 = 1;

731 
iSrcS‹p
 = 
iSŒide
;

732 
piTmpSrcCb
 +ð
iEdge
*
uiP–sInP¬tChromaH
;

733 
piTmpSrcCr
 +ð
iEdge
*
uiP–sInP¬tChromaH
;

734 
uiLoÝL’gth
=
uiP–sInP¬tChromaV
;

738 
iOff£t
 = 
iSŒide
;

739 
iSrcS‹p
 = 1;

740 
piTmpSrcCb
 +ð
iEdge
*
iSŒide
*
uiP–sInP¬tChromaV
;

741 
piTmpSrcCr
 +ð
iEdge
*
iSŒide
*
uiP–sInP¬tChromaV
;

742 
uiLoÝL’gth
=
uiP–sInP¬tChromaH
;

745 cÚ¡ 
IÁ
 
iB™d•thSÿË
 = 1 << (
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
)-8);

747  
UIÁ
 
iIdx
 = 0; iIdx < 
uiNumP¬ts
; iIdx++ )

749 
uiBsAbsIdx
 = 
	`xC®cBsIdx
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
edgeDœ
, 
iEdge
, 
iIdx
);

750 
ucBs
 = 
m_¯pucBS
[
edgeDœ
][
uiBsAbsIdx
];

752 iàÐ
ucBs
 > 1)

754 
iQP_Q
 = 
pcCU
->
	`g‘QP
Ð
uiBsAbsIdx
 );

755 
UIÁ
 
uiP¬tQIdx
 = 
uiBsAbsIdx
;

757 cÚ¡ 
TComD©aCU
* 
pcCUP
;

758 
UIÁ
 
uiP¬tPIdx
;

760 ià(
edgeDœ
 =ð
EDGE_VER
)

762 
pcCUP
 = 
pcCUQ
->
	`g‘PULeá
 (
uiP¬tPIdx
, 
uiP¬tQIdx
,!
lfCrossSliûBound¬yFÏg
, !
m_bLFCrossTžeBound¬y
);

766 
pcCUP
 = 
pcCUQ
->
	`g‘PUAbove
(
uiP¬tPIdx
, 
uiP¬tQIdx
,!
lfCrossSliûBound¬yFÏg
, 
çl£
, !
m_bLFCrossTžeBound¬y
);

769 
iQP_P
 = 
pcCUP
->
	`g‘QP
(
uiP¬tPIdx
);

771 ià(
bPCMFž‹r
 || 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

774 
bP¬tPNoFž‹r
 = (
bPCMFž‹r
 && 
pcCUP
->
	`g‘IPCMFÏg
(
uiP¬tPIdx
));

775 
bP¬tQNoFž‹r
 = (
bPCMFž‹r
 && 
pcCUQ
->
	`g‘IPCMFÏg
(
uiP¬tQIdx
));

778 
bP¬tPNoFž‹r
 = bP¬tPNoFž‹¸|| (
pcCUP
->
	`isLos¦essCoded
(
uiP¬tPIdx
));

779 
bP¬tQNoFž‹r
 = bP¬tQNoFž‹¸|| (
pcCUQ
->
	`isLos¦essCoded
(
uiP¬tQIdx
));

782  
UIÁ
 
chromaIdx
 = 0; chromaIdx < 2; chromaIdx++ )

784 
IÁ
 
chromaQPOff£t
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘QpOff£t
(
	`CompÚ’tID
(
chromaIdx
 + 1));

785 
P–
* 
piTmpSrcChroma
 = (
chromaIdx
 =ð0è? 
piTmpSrcCb
 : 
piTmpSrcCr
;

787 
iQP
 = ((
iQP_P
 + 
iQP_Q
 + 1è>> 1è+ 
chromaQPOff£t
;

788 ià(
iQP
 >ð
chromaQPM­pšgTabËSize
)

790 ià(
pcPicYuvRec
->
	`g‘ChromaFÜm©
()==
CHROMA_420
)

792 
iQP
 -=6;

794 ià(
iQP
>51)

796 
iQP
=51;

799 ià(
iQP
 >= 0 )

801 
iQP
 = 
	`g‘SÿËdChromaQP
(iQP, 
pcPicYuvRec
->
	`g‘ChromaFÜm©
());

804 
IÁ
 
iIndexTC
 = 
	`Cl3
(0, 
MAX_QP
+
DEFAULT_INTRA_TC_OFFSET
, 
iQP
 + DEFAULT_INTRA_TC_OFFSET*(
ucBs
 - 1è+ (
tcOff£tDiv2
 << 1));

805 
IÁ
 
iTc
 = 
sm_tcTabË
[
iIndexTC
]*
iB™d•thSÿË
;

807  
UIÁ
 
uiS‹p
 = 0; uiS‹°< 
uiLoÝL’gth
; uiStep++ )

809 
	`xP–Fž‹rChroma
Ð
piTmpSrcChroma
 + 
iSrcS‹p
*(
uiS‹p
+
iIdx
*
uiLoÝL’gth
), 
iOff£t
, 
iTc
 , 
bP¬tPNoFž‹r
, 
bP¬tQNoFž‹r
, 
b™D•thChroma
);

814 
	}
}

830 
__šlše
 
Void
 
	gTComLoÝFž‹r
::
	$xP–Fž‹rLuma
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
, IÁ 
tc
, 
BoÞ
 
sw
, BoÞ 
bP¬tPNoFž‹r
, BoÞ 
bP¬tQNoFž‹r
, IÁ 
iThrCut
, BoÞ 
bFž‹rSecÚdP
, BoÞ 
bFž‹rSecÚdQ
, cÚ¡ IÁ 
b™D•thLuma
)

832 
IÁ
 
d–
;

834 
P–
 
m4
 = 
piSrc
[0];

835 
P–
 
m3
 = 
piSrc
[-
iOff£t
];

836 
P–
 
m5
 = 
piSrc
[ 
iOff£t
];

837 
P–
 
m2
 = 
piSrc
[-
iOff£t
*2];

838 
P–
 
m6
 = 
piSrc
[ 
iOff£t
*2];

839 
P–
 
m1
 = 
piSrc
[-
iOff£t
*3];

840 
P–
 
m7
 = 
piSrc
[ 
iOff£t
*3];

841 
P–
 
m0
 = 
piSrc
[-
iOff£t
*4];

843 ià(
sw
)

845 
piSrc
[-
iOff£t
] = 
	`Cl3
(
m3
-2*
tc
, m3+2*tc, ((
m1
 + 2*
m2
 + 2*m3 + 2*
m4
 + 
m5
 + 4) >> 3));

846 
piSrc
[0] = 
	`Cl3
(
m4
-2*
tc
, m4+2*tc, ((
m2
 + 2*
m3
 + 2*m4 + 2*
m5
 + 
m6
 + 4) >> 3));

847 
piSrc
[-
iOff£t
*2] = 
	`Cl3
(
m2
-2*
tc
, m2+2*tc, ((
m1
 + m2 + 
m3
 + 
m4
 + 2)>>2));

848 
piSrc
[ 
iOff£t
] = 
	`Cl3
(
m5
-2*
tc
, m5+2*tc, ((
m3
 + 
m4
 + m5 + 
m6
 + 2)>>2));

849 
piSrc
[-
iOff£t
*3] = 
	`Cl3
(
m1
-2*
tc
, m1+2*tc, ((2*
m0
 + 3*m1 + 
m2
 + 
m3
 + 
m4
 + 4 )>>3));

850 
piSrc
[ 
iOff£t
*2] = 
	`Cl3
(
m6
-2*
tc
, m6+2*tc, ((
m3
 + 
m4
 + 
m5
 + 3*m6 + 2*
m7
 +4 )>>3));

855 
d–
 = (9*(
m4
-
m3
è-3*(
m5
-
m2
) + 8)>>4 ;

857 iàÐ
	`abs
(
d–
è< 
iThrCut
 )

859 
d–
 = 
	`Cl3
(-
tc
,c, delta);

860 
piSrc
[-
iOff£t
] = 
	`ClBD
((
m3
+
d–
), 
b™D•thLuma
);

861 
piSrc
[0] = 
	`ClBD
((
m4
-
d–
), 
b™D•thLuma
);

863 
IÁ
 
tc2
 = 
tc
>>1;

864 if(
bFž‹rSecÚdP
)

866 
IÁ
 
d–1
 = 
	`Cl3
(-
tc2
,c2, (Ð((
m1
+
m3
+1)>>1)- 
m2
+
d–
)>>1));

867 
piSrc
[-
iOff£t
*2] = 
	`ClBD
((
m2
+
d–1
), 
b™D•thLuma
);

869 if(
bFž‹rSecÚdQ
)

871 
IÁ
 
d–2
 = 
	`Cl3
(-
tc2
,c2, (Ð((
m6
+
m4
+1)>>1)- 
m5
-
d–
)>>1));

872 
piSrc
[ 
iOff£t
] = 
	`ClBD
((
m5
+
d–2
), 
b™D•thLuma
);

877 if(
bP¬tPNoFž‹r
)

879 
piSrc
[-
iOff£t
] = 
m3
;

880 
piSrc
[-
iOff£t
*2] = 
m2
;

881 
piSrc
[-
iOff£t
*3] = 
m1
;

883 if(
bP¬tQNoFž‹r
)

885 
piSrc
[0] = 
m4
;

886 
piSrc
[ 
iOff£t
] = 
m5
;

887 
piSrc
[ 
iOff£t
*2] = 
m6
;

889 
	}
}

901 
__šlše
 
Void
 
	gTComLoÝFž‹r
::
	$xP–Fž‹rChroma
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
, IÁ 
tc
, 
BoÞ
 
bP¬tPNoFž‹r
, BoÞ 
bP¬tQNoFž‹r
, cÚ¡ IÁ 
b™D•thChroma
)

903 
IÁ
 
d–
;

905 
P–
 
m4
 = 
piSrc
[0];

906 
P–
 
m3
 = 
piSrc
[-
iOff£t
];

907 
P–
 
m5
 = 
piSrc
[ 
iOff£t
];

908 
P–
 
m2
 = 
piSrc
[-
iOff£t
*2];

910 
d–
 = 
	`Cl3
(-
tc
,tc, (((Ð
m4
 - 
m3
 ) << 2 ) + 
m2
 - 
m5
 + 4 ) >> 3) );

911 
piSrc
[-
iOff£t
] = 
	`ClBD
((
m3
+
d–
), 
b™D•thChroma
);

912 
piSrc
[0] = 
	`ClBD
((
m4
-
d–
), 
b™D•thChroma
);

914 if(
bP¬tPNoFž‹r
)

916 
piSrc
[-
iOff£t
] = 
m3
;

918 if(
bP¬tQNoFž‹r
)

920 
piSrc
[0] = 
m4
;

922 
	}
}

933 
__šlše
 
BoÞ
 
	gTComLoÝFž‹r
::
	$xU£SŒÚgFž‹ršg
Ð
IÁ
 
off£t
, IÁ 
d
, IÁ 
b‘a
, IÁ 
tc
, 
P–
* 
piSrc
)

935 
P–
 
m4
 = 
piSrc
[0];

936 
P–
 
m3
 = 
piSrc
[-
off£t
];

937 
P–
 
m7
 = 
piSrc
[ 
off£t
*3];

938 
P–
 
m0
 = 
piSrc
[-
off£t
*4];

940 
IÁ
 
d_¡rÚg
 = 
	`abs
(
m0
-
m3
è+‡bs(
m7
-
m4
);

942  ( (
d_¡rÚg
 < (
b‘a
>>3)è&& (
d
<(b‘a>>2)è&& ( 
	`abs
(
m3
-
m4
è< ((
tc
*5+1)>>1)) );

943 
	}
}

945 
__šlše
 
IÁ
 
	gTComLoÝFž‹r
::
	$xC®cDP
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
)

947  
	`abs
Ð
piSrc
[-
iOff£t
*3] - 2*piSrc[-iOffset*2] +…iSrc[-iOffset] ) ;

948 
	}
}

950 
__šlše
 
IÁ
 
	gTComLoÝFž‹r
::
	$xC®cDQ
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
)

952  
	`abs
Ð
piSrc
[0] - 2*piSrc[
iOff£t
] +…iSrc[iOffset*2] );

953 
	}
}

	@source/Lib/TLibCommon/TComLoopFilter.h

38 #iâdeà
__TCOMLOOPFILTER__


39 
	#__TCOMLOOPFILTER__


	)

41 
	~"CommÚDef.h
"

42 
	~"TComPic.h
"

47 
	#DEBLOCK_SMALLEST_BLOCK
 8

	)

54 þas 
	cTComLoÝFž‹r


56 
	m´iv©e
:

58 
UIÁ
 
m_uiNumP¬t™iÚs
;

59 
UCh¬
* 
	mm_¯pucBS
[
NUM_EDGE_DIR
];

60 
BoÞ
* 
	mm_¯pbEdgeFž‹r
[
NUM_EDGE_DIR
];

61 
LFCUP¬am
 
	mm_¡LFCUP¬am
;

63 
BoÞ
 
	mm_bLFCrossTžeBound¬y
;

65 
	m´Ùeùed
:

67 
Void
 
xDeblockCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
, 
DeblockEdgeDœ
 
edgeDœ
 );

70 
Void
 
xS‘LoÝfž‹rP¬am
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
 );

72 
Void
 
xS‘Edgefž‹rTU
 ( 
TComTU
 &
rTu
 );

73 
Void
 
xS‘Edgefž‹rPU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
 );

74 
Void
 
xG‘Bound¬ySŒ’gthSšgË
 ( 
TComD©aCU
* 
pCtu
, 
DeblockEdgeDœ
 
edgeDœ
, 
UIÁ
 
uiP¬tIdx
 );

75 
UIÁ
 
	$xC®cBsIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
absZIdxInCtu
, 
DeblockEdgeDœ
 
edgeDœ
, 
IÁ
 
iEdgeIdx
, IÁ 
iBa£Un™Idx
, cÚ¡ 
TComReùªgË
 *
»ù
=
NULL
 )

77 
TComPic
* cÚ¡ 
pcPic
 = 
pcCU
->
	`g‘Pic
();

78 cÚ¡ 
UIÁ
 
ùuWidthInBa£Un™s
 = 
pcPic
->
	`g‘NumP¬tInCtuWidth
();

79 
IÁ
 
¿¡”Off£tTU
=0;

80 ià(
»ù
 !ð
NULL
)

82 cÚ¡ 
UIÁ
 
mšCuWidth
 =
pcPic
->
	`g‘MšCUWidth
();

83 cÚ¡ 
UIÁ
 
mšCuHeight
=
pcPic
->
	`g‘MšCUHeight
();

84 
¿¡”Off£tTU
 = 
»ù
->
x0
/
mšCuWidth
 + (»ù->
y0
/
mšCuHeight
)*
ùuWidthInBa£Un™s
;

86 ifÐ
edgeDœ
 =ð
EDGE_VER
 )

88  
g_auiRa¡”ToZsÿn
[
g_auiZsÿnToRa¡”
[
absZIdxInCtu
] + 
iBa£Un™Idx
 * 
ùuWidthInBa£Un™s
 + 
iEdgeIdx
 + 
¿¡”Off£tTU
 ];

92  
g_auiRa¡”ToZsÿn
[
g_auiZsÿnToRa¡”
[
absZIdxInCtu
] + 
iEdgeIdx
 * 
ùuWidthInBa£Un™s
 + 
iBa£Un™Idx
 + 
¿¡”Off£tTU
 ];

96 
Void
 
	`xS‘Edgefž‹rMuÉË
Ð
TComD©aCU
* 
pcCU
,

97 
UIÁ
 
uiAbsZÜd”Idx
,

98 
UIÁ
 
uiD•th
,

99 
DeblockEdgeDœ
 
edgeDœ
,

100 
IÁ
 
iEdgeIdx
,

101 
BoÞ
 
bV®ue
,

102 
UIÁ
 
uiWidthInBa£Un™s
 = 0,

103 
UIÁ
 
uiHeightInBa£Un™s
 = 0,

104 cÚ¡ 
TComReùªgË
 *
»ù
 = 0

107 
Void
 
	`xEdgeFž‹rLuma
 ( 
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiD•th
, cÚ¡ 
DeblockEdgeDœ
 
edgeDœ
, cÚ¡ 
IÁ
 
iEdge
 );

108 
Void
 
	`xEdgeFž‹rChroma
 ( 
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiD•th
, cÚ¡ 
DeblockEdgeDœ
 
edgeDœ
, cÚ¡ 
IÁ
 
iEdge
 );

110 
__šlše
 
Void
 
	`xP–Fž‹rLuma
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
, IÁ 
tc
, 
BoÞ
 
sw
, BoÞ 
bP¬tPNoFž‹r
, BoÞ 
bP¬tQNoFž‹r
, IÁ 
iThrCut
, BoÞ 
bFž‹rSecÚdP
, BoÞ 
bFž‹rSecÚdQ
, cÚ¡ IÁ 
b™D•thLuma
);

111 
__šlše
 
Void
 
	`xP–Fž‹rChroma
Ð
P–
* 
piSrc
, 
IÁ
 
iOff£t
, IÁ 
tc
, 
BoÞ
 
bP¬tPNoFž‹r
, BoÞ 
bP¬tQNoFž‹r
, cÚ¡ IÁ 
b™D•thChroma
);

114 
__šlše
 
BoÞ
 
	`xU£SŒÚgFž‹ršg
Ð
IÁ
 
off£t
, IÁ 
d
, IÁ 
b‘a
, IÁ 
tc
, 
P–
* 
piSrc
);

115 
__šlše
 
IÁ
 
	`xC®cDP
Ð
P–
* 
piSrc
, IÁ 
iOff£t
);

116 
__šlše
 
IÁ
 
	`xC®cDQ
Ð
P–
* 
piSrc
, IÁ 
iOff£t
);

118 cÚ¡ 
UCh¬
 
sm_tcTabË
[54];

119 cÚ¡ 
UCh¬
 
sm_b‘aTabË
[52];

121 
public
:

122 
	`TComLoÝFž‹r
();

123 
vœtu®
 ~
	`TComLoÝFž‹r
();

125 
Void
 
	`ü—‹
 ( 
UIÁ
 
uiMaxCUD•th
 );

126 
Void
 
	`de¡roy
 ();

129 
Void
 
	`£tCfg
Ð
BoÞ
 
bLFCrossTžeBound¬y
 );

132 
Void
 
	`loÝFž‹rPic
Ð
TComPic
* 
pcPic
 );

134 
IÁ
 
	$g‘B‘a
Ð
IÁ
 
qp
 )

136 
IÁ
 
šdexB
 = 
	`Cl3
Ð0, 
MAX_QP
, 
qp
 );

137  
sm_b‘aTabË
[ 
šdexB
 ];

138 
	}
}

	@source/Lib/TLibCommon/TComMotionInfo.cpp

38 
	~<memÜy.h
>

39 
	~"TComMÙiÚInfo.h
"

40 
	~"as£¹.h
"

41 
	~<¡dlib.h
>

54 
Void
 
	gTComCUMvF›ld
::
	$ü—‹
Ð
UIÁ
 
uiNumP¬t™iÚ
 )

56 
	`as£¹
(
m_pcMv
 =ð
NULL
);

57 
	`as£¹
(
m_pcMvd
 =ð
NULL
);

58 
	`as£¹
(
m_piRefIdx
 =ð
NULL
);

60 
m_pcMv
 = 
Ãw
 
TComMv
[ 
uiNumP¬t™iÚ
 ];

61 
m_pcMvd
 = 
Ãw
 
TComMv
[ 
uiNumP¬t™iÚ
 ];

62 
m_piRefIdx
 = 
Ãw
 
SCh¬
 [ 
uiNumP¬t™iÚ
 ];

64 
m_uiNumP¬t™iÚ
 = 
uiNumP¬t™iÚ
;

65 
	}
}

67 
Void
 
	gTComCUMvF›ld
::
	$de¡roy
()

69 
	`as£¹
(
m_pcMv
 !ð
NULL
);

70 
	`as£¹
(
m_pcMvd
 !ð
NULL
);

71 
	`as£¹
(
m_piRefIdx
 !ð
NULL
);

73 
d–‘e
[] 
m_pcMv
;

74 
d–‘e
[] 
m_pcMvd
;

75 
d–‘e
[] 
m_piRefIdx
;

77 
m_pcMv
 = 
NULL
;

78 
m_pcMvd
 = 
NULL
;

79 
m_piRefIdx
 = 
NULL
;

81 
m_uiNumP¬t™iÚ
 = 0;

82 
	}
}

88 
Void
 
	gTComCUMvF›ld
::
	$þ—rMvF›ld
()

90  
IÁ
 
i
 = 0; i < 
m_uiNumP¬t™iÚ
; i++ )

92 
m_pcMv
 [ 
i
 ].
	`£tZ”o
();

93 
m_pcMvd
[ 
i
 ].
	`£tZ”o
();

95 
	`as£¹
ÐÐ*
m_piRefIdx
 ) == 1 );

96 
	`mem£t
Ð
m_piRefIdx
, 
NOT_VALID
, 
m_uiNumP¬t™iÚ
 * ( *m_piRefIdx ) );

97 
	}
}

99 
Void
 
	gTComCUMvF›ld
::
	$cÝyFrom
Ð
TComCUMvF›ld
 cÚ¡ * 
pcCUMvF›ldSrc
, 
IÁ
 
iNumP¬tSrc
, IÁ 
iP¬tAddrD¡
 )

101 
IÁ
 
iSizeInTComMv
 = Ð
TComMv
 ) * 
iNumP¬tSrc
;

103 
	`memýy
Ð
m_pcMv
 + 
iP¬tAddrD¡
, 
pcCUMvF›ldSrc
->m_pcMv, 
iSizeInTComMv
 );

104 
	`memýy
Ð
m_pcMvd
 + 
iP¬tAddrD¡
, 
pcCUMvF›ldSrc
->m_pcMvd, 
iSizeInTComMv
 );

105 
	`memýy
Ð
m_piRefIdx
 + 
iP¬tAddrD¡
, 
pcCUMvF›ldSrc
->m_piRefIdx, Ð*m_piRefIdx ) * 
iNumP¬tSrc
 );

106 
	}
}

108 
Void
 
	gTComCUMvF›ld
::
	$cÝyTo
Ð
TComCUMvF›ld
* 
pcCUMvF›ldD¡
, 
IÁ
 
iP¬tAddrD¡
 ) const

110 
	`cÝyTo
Ð
pcCUMvF›ldD¡
, 
iP¬tAddrD¡
, 0, 
m_uiNumP¬t™iÚ
 );

111 
	}
}

113 
Void
 
	gTComCUMvF›ld
::
	$cÝyTo
Ð
TComCUMvF›ld
* 
pcCUMvF›ldD¡
, 
IÁ
 
iP¬tAddrD¡
, 
UIÁ
 
uiOff£t
, UIÁ 
uiNumP¬t
 ) const

115 
IÁ
 
iSizeInTComMv
 = Ð
TComMv
 ) * 
uiNumP¬t
;

116 
IÁ
 
iOff£t
 = 
uiOff£t
 + 
iP¬tAddrD¡
;

118 
	`memýy
Ð
pcCUMvF›ldD¡
->
m_pcMv
 + 
iOff£t
, m_pcMv + 
uiOff£t
, 
iSizeInTComMv
 );

119 
	`memýy
Ð
pcCUMvF›ldD¡
->
m_pcMvd
 + 
iOff£t
, m_pcMvd + 
uiOff£t
, 
iSizeInTComMv
 );

120 
	`memýy
Ð
pcCUMvF›ldD¡
->
m_piRefIdx
 + 
iOff£t
, m_piRefIdx + 
uiOff£t
, Ð*m_piRefIdx ) * 
uiNumP¬t
 );

121 
	}
}

127 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

128 
Void
 
	gTComCUMvF›ld
::
	$£tAÎ
Ð
T
 *
p
, T cÚ¡ & 
v®
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 )

130 
IÁ
 
i
;

131 
p
 +ð
iP¬tAddr
;

132 
IÁ
 
numEËm’ts
 = 
m_uiNumP¬t™iÚ
 >> ( 2 * 
uiD•th
 );

134  
eCUMode
 )

136 
SIZE_2Nx2N
:

137  
i
 = 0; i < 
numEËm’ts
; i++ )

139 
p
[ 
i
 ] = 
v®
;

143 
SIZE_2NxN
:

144 
numEËm’ts
 >>= 1;

145  
i
 = 0; i < 
numEËm’ts
; i++ )

147 
p
[ 
i
 ] = 
v®
;

151 
SIZE_Nx2N
:

152 
numEËm’ts
 >>= 2;

153  
i
 = 0; i < 
numEËm’ts
; i++ )

155 
p
[ 
i
 ] = 
v®
;

156 
p
[ 
i
 + 2 * 
numEËm’ts
 ] = 
v®
;

160 
SIZE_NxN
:

161 
numEËm’ts
 >>= 2;

162  
i
 = 0; i < 
numEËm’ts
; i++)

164 
p
[ 
i
 ] = 
v®
;

167 
SIZE_2NxnU
:

169 
IÁ
 
iCu¼P¬tNumQ
 = 
numEËm’ts
>>2;

170 ifÐ
iP¬tIdx
 == 0 )

172 
T
 *
pT
 = 
p
;

173 
T
 *
pT2
 = 
p
 + 
iCu¼P¬tNumQ
;

174 
i
 = 0; i < (
iCu¼P¬tNumQ
>>1); i++)

176 
pT
 [
i
] = 
v®
;

177 
pT2
[
i
] = 
v®
;

182 
T
 *
pT
 = 
p
;

183 
i
 = 0; i < (
iCu¼P¬tNumQ
>>1); i++)

185 
pT
[
i
] = 
v®
;

188 
pT
 = 
p
 + 
iCu¼P¬tNumQ
;

189 
i
 = 0; i < ( (
iCu¼P¬tNumQ
>>1) + (iCurrPartNumQ<<1) ); i++)

191 
pT
[
i
] = 
v®
;

196 
SIZE_2NxnD
:

198 
IÁ
 
iCu¼P¬tNumQ
 = 
numEËm’ts
>>2;

199 ifÐ
iP¬tIdx
 == 0 )

201 
T
 *
pT
 = 
p
;

202 
i
 = 0; i < ( (
iCu¼P¬tNumQ
>>1) + (iCurrPartNumQ<<1) ); i++)

204 
pT
[
i
] = 
v®
;

206 
pT
 = 
p
 + ( 
numEËm’ts
 - 
iCu¼P¬tNumQ
 );

207 
i
 = 0; i < (
iCu¼P¬tNumQ
>>1); i++)

209 
pT
[
i
] = 
v®
;

214 
T
 *
pT
 = 
p
;

215 
T
 *
pT2
 = 
p
 + 
iCu¼P¬tNumQ
;

216 
i
 = 0; i < (
iCu¼P¬tNumQ
>>1); i++)

218 
pT
 [
i
] = 
v®
;

219 
pT2
[
i
] = 
v®
;

224 
SIZE_nLx2N
:

226 
IÁ
 
iCu¼P¬tNumQ
 = 
numEËm’ts
>>2;

227 ifÐ
iP¬tIdx
 == 0 )

229 
T
 *
pT
 = 
p
;

230 
T
 *
pT2
 = 
p
 + (
iCu¼P¬tNumQ
<<1);

231 
T
 *
pT3
 = 
p
 + (
iCu¼P¬tNumQ
>>1);

232 
T
 *
pT4
 = 
p
 + (
iCu¼P¬tNumQ
<<1) + (iCurrPartNumQ>>1);

234 
i
 = 0; i < (
iCu¼P¬tNumQ
>>2); i++)

236 
pT
 [
i
] = 
v®
;

237 
pT2
[
i
] = 
v®
;

238 
pT3
[
i
] = 
v®
;

239 
pT4
[
i
] = 
v®
;

244 
T
 *
pT
 = 
p
;

245 
T
 *
pT2
 = 
p
 + (
iCu¼P¬tNumQ
<<1);

246 
i
 = 0; i < (
iCu¼P¬tNumQ
>>2); i++)

248 
pT
 [
i
] = 
v®
;

249 
pT2
[
i
] = 
v®
;

252 
pT
 = 
p
 + (
iCu¼P¬tNumQ
>>1);

253 
pT2
 = 
p
 + (
iCu¼P¬tNumQ
<<1) + (iCurrPartNumQ>>1);

254 
i
 = 0; i < ( (
iCu¼P¬tNumQ
>>2) + iCurrPartNumQ ); i++)

256 
pT
 [
i
] = 
v®
;

257 
pT2
[
i
] = 
v®
;

262 
SIZE_nRx2N
:

264 
IÁ
 
iCu¼P¬tNumQ
 = 
numEËm’ts
>>2;

265 ifÐ
iP¬tIdx
 == 0 )

267 
T
 *
pT
 = 
p
;

268 
T
 *
pT2
 = 
p
 + (
iCu¼P¬tNumQ
<<1);

269 
i
 = 0; i < ( (
iCu¼P¬tNumQ
>>2) + iCurrPartNumQ ); i++)

271 
pT
 [
i
] = 
v®
;

272 
pT2
[
i
] = 
v®
;

275 
pT
 = 
p
 + 
iCu¼P¬tNumQ
 + (iCurrPartNumQ>>1);

276 
pT2
 = 
p
 + 
numEËm’ts
 - 
iCu¼P¬tNumQ
 + (iCurrPartNumQ>>1);

277 
i
 = 0; i < (
iCu¼P¬tNumQ
>>2); i++)

279 
pT
 [
i
] = 
v®
;

280 
pT2
[
i
] = 
v®
;

285 
T
 *
pT
 = 
p
;

286 
T
 *
pT2
 = 
p
 + (
iCu¼P¬tNumQ
>>1);

287 
T
 *
pT3
 = 
p
 + (
iCu¼P¬tNumQ
<<1);

288 
T
 *
pT4
 = 
p
 + (
iCu¼P¬tNumQ
<<1) + (iCurrPartNumQ>>1);

289 
i
 = 0; i < (
iCu¼P¬tNumQ
>>2); i++)

291 
pT
 [
i
] = 
v®
;

292 
pT2
[
i
] = 
v®
;

293 
pT3
[
i
] = 
v®
;

294 
pT4
[
i
] = 
v®
;

300 
	`as£¹
(0);

303 
	}
}

305 
Void
 
	gTComCUMvF›ld
::
	$£tAÎMv
Ð
TComMv
 cÚ¡ & 
mv
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 )

307 
	`£tAÎ
(
m_pcMv
, 
mv
, 
eCUMode
, 
iP¬tAddr
, 
uiD•th
, 
iP¬tIdx
);

308 
	}
}

310 
Void
 
	gTComCUMvF›ld
::
	$£tAÎMvd
Ð
TComMv
 cÚ¡ & 
mvd
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 )

312 
	`£tAÎ
(
m_pcMvd
, 
mvd
, 
eCUMode
, 
iP¬tAddr
, 
uiD•th
, 
iP¬tIdx
);

313 
	}
}

315 
Void
 
	gTComCUMvF›ld
::
	$£tAÎRefIdx
 ( 
IÁ
 
iRefIdx
, 
P¬tSize
 
eCUMode
, IÁ 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 )

317 
	`£tAÎ
(
m_piRefIdx
, 
¡©ic_ÿ¡
<
SCh¬
>(
iRefIdx
), 
eCUMode
, 
iP¬tAddr
, 
uiD•th
, 
iP¬tIdx
);

318 
	}
}

320 
Void
 
	gTComCUMvF›ld
::
	$£tAÎMvF›ld
Ð
TComMvF›ld
 cÚ¡ & 
mvF›ld
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 )

322 
	`£tAÎMv
 ( 
mvF›ld
.
	`g‘Mv
(), 
eCUMode
, 
iP¬tAddr
, 
uiD•th
, 
iP¬tIdx
 );

323 
	`£tAÎRefIdx
Ð
mvF›ld
.
	`g‘RefIdx
(), 
eCUMode
, 
iP¬tAddr
, 
uiD•th
, 
iP¬tIdx
 );

324 
	}
}

330 #ià
REDUCED_ENCODER_MEMORY


331 
Void
 
	gTComCUMvF›ld
::
	$com´ess
(
SCh¬
 *
³P»dMode
, cÚ¡ SCh¬* 
³P»dModeSourû
, cÚ¡ 
IÁ
 
sÿË
, cÚ¡ 
TComCUMvF›ld
 &
sourû
)

333 cÚ¡ 
IÁ
 
numSub·¹sW™hId’tiÿlMÙiÚ
 = 
sÿË
 * scale;

334 
	`as£¹
Ð
numSub·¹sW™hId’tiÿlMÙiÚ
 > 0 &&‚umSub·¹sW™hId’tiÿlMÙiÚ <ð
m_uiNumP¬t™iÚ
);

335 
	`as£¹
(
sourû
.
m_uiNumP¬t™iÚ
 == m_uiNumPartition);

337  
IÁ
 
·¹Idx
 = 0;…¬tIdx < 
m_uiNumP¬t™iÚ
;…¬tIdx +ð
numSub·¹sW™hId’tiÿlMÙiÚ
 )

339 
TComMv
 
	`cMv
(0,0);

340 
IÁ
 
iRefIdx
 = 0;

342 
cMv
 = 
sourû
.
m_pcMv
[ 
·¹Idx
 ];

343 
P»dMode
 
´edMode
 = 
¡©ic_ÿ¡
<P»dMode>Ð
³P»dModeSourû
[ 
·¹Idx
 ] );

344 
iRefIdx
 = 
sourû
.
m_piRefIdx
[ 
·¹Idx
 ];

345  
IÁ
 
i
 = 0; i < 
numSub·¹sW™hId’tiÿlMÙiÚ
; i++ )

347 
m_pcMv
[ 
·¹Idx
 + 
i
 ] = 
cMv
;

348 
³P»dMode
[ 
·¹Idx
 + 
i
 ] = 
´edMode
;

349 
m_piRefIdx
[ 
·¹Idx
 + 
i
 ] = 
iRefIdx
;

352 
	}
}

354 
Void
 
	gTComCUMvF›ld
::
	$com´ess
(
SCh¬
* 
³P»dMode
, 
IÁ
 
sÿË
)

356 
IÁ
 
N
 = 
sÿË
 * scale;

357 
	`as£¹
Ð
N
 > 0 && N <ð
m_uiNumP¬t™iÚ
);

359  
IÁ
 
uiP¬tIdx
 = 0; uiP¬tIdx < 
m_uiNumP¬t™iÚ
; uiP¬tIdx +ð
N
 )

361 
TComMv
 
	`cMv
(0,0);

362 
IÁ
 
iRefIdx
 = 0;

364 
cMv
 = 
m_pcMv
[ 
uiP¬tIdx
 ];

365 
P»dMode
 
´edMode
 = 
¡©ic_ÿ¡
<P»dMode>Ð
³P»dMode
[ 
uiP¬tIdx
 ] );

366 
iRefIdx
 = 
m_piRefIdx
[ 
uiP¬tIdx
 ];

367  
IÁ
 
i
 = 0; i < 
N
; i++ )

369 
m_pcMv
[ 
uiP¬tIdx
 + 
i
 ] = 
cMv
;

370 
³P»dMode
[ 
uiP¬tIdx
 + 
i
 ] = 
´edMode
;

371 
m_piRefIdx
[ 
uiP¬tIdx
 + 
i
 ] = 
iRefIdx
;

374 
	}
}

	@source/Lib/TLibCommon/TComMotionInfo.h

39 #iâdeà
__TCOMMOTIONINFO__


40 
	#__TCOMMOTIONINFO__


	)

42 
	~<memÜy.h
>

43 
	~"CommÚDef.h
"

44 
	~"TComMv.h
"

54 
	s_AMVPInfo


56 
TComMv
 
	mm_acMvCªd
[ 
AMVP_MAX_NUM_CANDS
 ];

57 
IÁ
 
	miN
;

58 #ià
MCTS_ENC_CHECK


59 
UIÁ
 
	mnumS·tŸlMVPCªdid©es
;

61 } 
	tAMVPInfo
;

68 þas 
	cTComMvF›ld


70 
	m´iv©e
:

71 
TComMv
 
m_acMv
;

72 
IÁ
 
	mm_iRefIdx
;

74 
	mpublic
:

75 
	$TComMvF›ld
(è: 
	$m_iRefIdx
Ð
NOT_VALID
 ) {}

77 
Void
 
	$£tMvF›ld
Ð
TComMv
 cÚ¡ & 
cMv
, 
IÁ
 
iRefIdx
 )

79 
m_acMv
 = 
cMv
;

80 
m_iRefIdx
 = 
iRefIdx
;

81 
	}
}

83 
Void
 
	$£tRefIdx
Ð
IÁ
 
»fIdx
 ) { 
m_iRefIdx
 =„efIdx; 
	}
}

85 
TComMv
 cÚ¡ & 
	$g‘Mv
(ècÚ¡ {  
m_acMv
; 
	}
}

86 
	gTComMv
 & 
	$g‘Mv
(è{  
m_acMv
; 
	}
}

88 
IÁ
 
	$g‘RefIdx
(ècÚ¡ {  
m_iRefIdx
; 
	}
}

89 
IÁ
 
	$g‘HÜ
 (ècÚ¡ {  
m_acMv
.
	`g‘HÜ
(); 
	}
}

90 
IÁ
 
	$g‘V”
 (ècÚ¡ {  
m_acMv
.
	`g‘V”
(); 
	}
}

94 þas 
	cTComCUMvF›ld


96 
	m´iv©e
:

97 
TComMv
* 
m_pcMv
;

98 
TComMv
* 
	mm_pcMvd
;

99 
SCh¬
* 
	mm_piRefIdx
;

100 
UIÁ
 
	mm_uiNumP¬t™iÚ
;

101 
AMVPInfo
 
	mm_cAMVPInfo
;

103 
	m‹m¶©e
 <
ty³Çme
 
	mT
>

104 
Void
 
£tAÎ
Ð
T
 *
p
, T cÚ¡ & 
v®
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
 );

106 
	mpublic
:

107 
	$TComCUMvF›ld
(è: 
	`m_pcMv
(
NULL
), 
	`m_pcMvd
(NULL), 
	`m_piRefIdx
(NULL), 
	$m_uiNumP¬t™iÚ
(0) {}

108 ~
	$TComCUMvF›ld
(è{
	}
}

114 
Void
 
ü—‹
Ð
UIÁ
 
uiNumP¬t™iÚ
 );

115 
Void
 
de¡roy
();

121 
Void
 
þ—rMvF›ld
();

123 
Void
 
cÝyFrom
Ð
TComCUMvF›ld
 cÚ¡ * 
pcCUMvF›ldSrc
, 
IÁ
 
iNumP¬tSrc
, IÁ 
iP¬tAddrD¡
 );

124 
Void
 
	$cÝyTo
 ( 
TComCUMvF›ld
* 
pcCUMvF›ldD¡
, 
IÁ
 
iP¬tAddrD¡
 ) const;

125 
Void
 
	$cÝyTo
 ( 
TComCUMvF›ld
* 
pcCUMvF›ldD¡
, 
IÁ
 
iP¬tAddrD¡
, 
UIÁ
 
uiOff£t
, UIÁ 
uiNumP¬t
 ) const;

131 
TComMv
 cÚ¡ & 
	$g‘Mv
 ( 
IÁ
 
iIdx
 ) cÚ¡ {  
m_pcMv
 [iIdx]; 
	}
}

132 
TComMv
 cÚ¡ & 
	$g‘Mvd
 ( 
IÁ
 
iIdx
 ) cÚ¡ {  
m_pcMvd
 [iIdx]; 
	}
}

133 
IÁ
 
	$g‘RefIdx
Ð
IÁ
 
iIdx
 ) cÚ¡ {  
m_piRefIdx
[iIdx]; 
	}
}

135 
AMVPInfo
* 
	$g‘AMVPInfo
 (è{  &
m_cAMVPInfo
; 
	}
}

141 
Void
 
£tAÎMv
 ( 
TComMv
 cÚ¡ & 
rcMv
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
=0 );

142 
Void
 
£tAÎMvd
 ( 
TComMv
 cÚ¡ & 
rcMvd
, 
P¬tSize
 
eCUMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
=0 );

143 
Void
 
£tAÎRefIdx
 ( 
IÁ
 
iRefIdx
, 
P¬tSize
 
eMbMode
, IÁ 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
=0 );

144 
Void
 
£tAÎMvF›ld
Ð
TComMvF›ld
 cÚ¡ & 
mvF›ld
, 
P¬tSize
 
eMbMode
, 
IÁ
 
iP¬tAddr
, 
UIÁ
 
uiD•th
, IÁ 
iP¬tIdx
=0 );

146 
Void
 
	$£tNumP¬t™iÚ
Ð
IÁ
 
iNumP¬t
 )

148 
m_uiNumP¬t™iÚ
 = 
iNumP¬t
;

149 
	}
}

151 
Void
 
	$lškToW™hOff£t
Ð
TComCUMvF›ld
 cÚ¡ * 
¤c
, 
IÁ
 
off£t
 )

153 
m_pcMv
 = 
¤c
->m_pcMv + 
off£t
;

154 
m_pcMvd
 = 
¤c
->m_pcMvd + 
off£t
;

155 
m_piRefIdx
 = 
¤c
->m_piRefIdx + 
off£t
;

156 
	}
}

158 #ià
REDUCED_ENCODER_MEMORY


159 
Void
 
com´ess
(
SCh¬
 *
³P»dMode
, cÚ¡ SCh¬* 
³P»dModeSourû
, cÚ¡ 
IÁ
 
sÿË
, cÚ¡ 
TComCUMvF›ld
 &
sourû
);

161 
Void
 
com´ess
(
SCh¬
* 
³P»dMode
, 
IÁ
 
sÿË
);

	@source/Lib/TLibCommon/TComMv.h

38 #iâdeà
__TCOMMV__


39 
	#__TCOMMV__


	)

41 
	~"CommÚDef.h
"

51 þas 
	cTComMv


53 
	m´iv©e
:

54 
ShÜt
 
m_iHÜ
;

55 
ShÜt
 
	mm_iV”
;

57 
	mpublic
:

63 
	$TComMv
() :

64 
	`m_iHÜ
(0),

65 
	$m_iV”
(0)

69 
	$TComMv
Ð
ShÜt
 
iHÜ
, ShÜˆ
iV”
 ) :

70 
	`m_iHÜ
(
iHÜ
),

71 
	$m_iV”
(
iV”
)

73 
	}
}

79 
Void
 
	$£t
 ( 
ShÜt
 
iHÜ
, ShÜˆ
iV”
è{ 
m_iHÜ
 = iHÜ; 
m_iV”
 = iV”; 
	}
}

80 
Void
 
	$£tHÜ
 ( 
ShÜt
 
i
 ) { 
m_iHÜ
 = i; 
	}
}

81 
Void
 
	$£tV”
 ( 
ShÜt
 
i
 ) { 
m_iV”
 = i; 
	}
}

82 
Void
 
	$£tZ”o
 (è{ 
m_iHÜ
 = 
m_iV”
 = 0; 
	}
}

88 
IÁ
 
	$g‘HÜ
 (ècÚ¡ {  
m_iHÜ
; 
	}
}

89 
IÁ
 
	$g‘V”
 (ècÚ¡ {  
m_iV”
; 
	}
}

90 
IÁ
 
	$g‘AbsHÜ
 (ècÚ¡ {  
	`abs
Ð
m_iHÜ
 ); 
	}
}

91 
IÁ
 
	$g‘AbsV”
 (ècÚ¡ {  
	`abs
Ð
m_iV”
 ); 
	}
}

97 cÚ¡ 
	gTComMv
& 
	gÝ”©Ü
 +ð(cÚ¡ 
TComMv
& 
rcMv
)

99 
m_iHÜ
 +ð
rcMv
.m_iHor;

100 
	gm_iV”
 +ð
rcMv
.
m_iV”
;

101  *
	gthis
;

104 cÚ¡ 
	gTComMv
& 
	gÝ”©Ü
-ð(cÚ¡ 
TComMv
& 
rcMv
)

106 
m_iHÜ
 -ð
rcMv
.m_iHor;

107 
	gm_iV”
 -ð
rcMv
.
m_iV”
;

108  *
	gthis
;

111 #ià!
ME_ENABLE_ROUNDING_OF_MVS


112 cÚ¡ 
	gTComMv
& 
	gÝ”©Ü
>>ð(cÚ¡ 
IÁ
 
i
)

114 
m_iHÜ
 >>ð
i
;

115 
	gm_iV”
 >>ð
i
;

116  *
	gthis
;

120 #ià
ME_ENABLE_ROUNDING_OF_MVS


122 
Void
 
	$divideByPow”Of2
 (cÚ¡ 
IÁ
 
i
)

124 
IÁ
 
off£t
 = (
i
 == 0) ? 0 : 1 << (i - 1);

125 
m_iHÜ
 +ð
off£t
;

126 
m_iV”
 +ð
off£t
;

128 
m_iHÜ
 >>ð
i
;

129 
m_iV”
 >>ð
i
;

130 
	}
}

133 cÚ¡ 
	gTComMv
& 
	gÝ”©Ü
<<ð(cÚ¡ 
IÁ
 
i
)

135 
m_iHÜ
 <<ð
i
;

136 
	gm_iV”
 <<ð
i
;

137  *
	gthis
;

140 cÚ¡ 
TComMv
 
	gÝ”©Ü
 - ( cÚ¡ 
	gTComMv
& 
	grcMv
 ) const

142  
TComMv
Ð
m_iHÜ
 - 
rcMv
.m_iHÜ, 
m_iV”
 -„cMv.m_iVer );

145 cÚ¡ 
TComMv
 
	gÝ”©Ü
 + ( cÚ¡ 
	gTComMv
& 
	grcMv
 ) const

147  
TComMv
Ð
m_iHÜ
 + 
rcMv
.m_iHÜ, 
m_iV”
 +„cMv.m_iVer );

150 
BoÞ
 
	gÝ”©Ü
=ðÐcÚ¡ 
TComMv
& 
rcMv
 ) const

152  (
m_iHÜ
==
rcMv
.m_iHÜ && 
m_iV”
==rcMv.m_iVer);

155 
BoÞ
 
	gÝ”©Ü
!ðÐcÚ¡ 
TComMv
& 
rcMv
 ) const

157  (
m_iHÜ
!=
rcMv
.m_iHÜ || 
m_iV”
!=rcMv.m_iVer);

160 cÚ¡ 
TComMv
 
	$sÿËMv
Ð
IÁ
 
iSÿË
 ) const

162 
IÁ
 
mvx
 = 
	`Cl3
Ð-32768, 32767, (
iSÿË
 * 
	`g‘HÜ
() + 127 + (iScale * getHor() < 0)) >> 8 );

163 
IÁ
 
mvy
 = 
	`Cl3
Ð-32768, 32767, (
iSÿË
 * 
	`g‘V”
() + 127 + (iScale * getVer() < 0)) >> 8 );

164  
	`TComMv
Ð
mvx
, 
mvy
 );

165 
	}
}

	@source/Lib/TLibCommon/TComPattern.cpp

38 
	~"TComPic.h
"

39 
	~"TComP©‹º.h
"

40 
	~"TComD©aCU.h
"

41 
	~"TComTU.h
"

42 
	~"Debug.h
"

43 
	~"TComP»diùiÚ.h
"

51 
Void
 
fžlReã»nûSam¶es
ÐcÚ¡ 
IÁ
 
b™D•th
,

52 #ià
O0043_BEST_EFFORT_DECODING


53 cÚ¡ 
IÁ
 
b™D•thD–
,

55 cÚ¡ 
P–
* 
piRoiOrigš
,

56 
P–
* 
piIÁ¿Temp
,

57 cÚ¡ 
BoÞ
* 
bNeighbÜFÏgs
,

58 cÚ¡ 
IÁ
 
iNumIÁ¿NeighbÜ
,

59 cÚ¡ 
IÁ
 
un™Width
,

60 cÚ¡ 
IÁ
 
un™Height
,

61 cÚ¡ 
IÁ
 
iAboveUn™s
,

62 cÚ¡ 
IÁ
 
iLeáUn™s
,

63 cÚ¡ 
UIÁ
 
uiWidth
,

64 cÚ¡ 
UIÁ
 
uiHeight
,

65 cÚ¡ 
IÁ
 
iPicSŒide
 );

68 
BoÞ
 
isAboveLeáAvažabË
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
 );

69 
IÁ
 
isAboveAvažabË
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxRT
, 
BoÞ
* 
bV®idFÏgs
 );

70 
IÁ
 
isLeáAvažabË
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxLB
, 
BoÞ
* 
bV®idFÏgs
 );

71 
IÁ
 
isAboveRightAvažabË
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxRT
, 
BoÞ
* 
bV®idFÏgs
 );

72 
IÁ
 
isB–owLeáAvažabË
 ( cÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxLB
, 
BoÞ
* 
bV®idFÏgs
 );

80 #ià
MCTS_ENC_CHECK


81 
Void
 
	gTComP©‹º
::
	$š™P©‹º
(
P–
* 
piY
,

82 
IÁ
 
roiWidth
,

83 
IÁ
 
roiHeight
,

84 
IÁ
 
¡ride
,

85 
IÁ
 
b™D•thLuma
,

86 
IÁ
 
roiPosX
,

87 
IÁ
 
roiPosY
)

89 
Void
 
TComP©‹º
::
	$š™P©‹º
 (
P–
* 
piY
,

90 
IÁ
 
roiWidth
,

91 
IÁ
 
roiHeight
,

92 
IÁ
 
¡ride
,

93 
IÁ
 
b™D•thLuma
)

96 
m_piROIOrigš
 = 
piY
;

97 
m_roiWidth
 = 
roiWidth
;

98 
m_roiHeight
 = 
roiHeight
;

99 
m_·‰”nSŒide
 = 
¡ride
;

100 
m_b™D•th
 = 
b™D•thLuma
;

101 #ià
MCTS_ENC_CHECK


102 
m_roiPosX
 = 
roiPosX
;

103 
m_roiPosY
 = 
roiPosY
;

105 
	}
}

107 #ià
MCTS_ENC_CHECK


108 
Void
 
	gTComP©‹º
::
	$£tTžeBÜd”s
(
IÁ
 
tžeLeáTÝP–PosX
, IÁ 
tžeLeáTÝP–PosY
, IÁ 
tžeRightBÙtomP–PosX
, IÁ 
tžeRightBÙtomP–PosY
)

110 
m_tžeLeáTÝP–PosX
 = 
tžeLeáTÝP–PosX
;

111 
m_tžeLeáTÝP–PosY
 = 
tžeLeáTÝP–PosY
;

112 
m_tžeRightBÙtomP–PosX
 = 
tžeRightBÙtomP–PosX
;

113 
m_tžeRightBÙtomP–PosY
 = 
tžeRightBÙtomP–PosY
;

114 
	}
}

119 
Void
 
	gTComP»diùiÚ
::
š™IÁ¿P©‹ºChTy³
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
bFž‹rRefSam¶es
 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
))

121 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

123 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

124 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

125 cÚ¡ 
UIÁ
 
uiZÜd”IdxInP¬t
=
rTu
.
	`G‘AbsP¬tIdxTU
();

126 cÚ¡ 
UIÁ
 
uiTuWidth
 = 
rTu
.
	`g‘Reù
(
compID
).
width
;

127 cÚ¡ 
UIÁ
 
uiTuHeight
 = 
rTu
.
	`g‘Reù
(
compID
).
height
;

128 cÚ¡ 
UIÁ
 
uiTuWidth2
 = 
uiTuWidth
 << 1;

129 cÚ¡ 
UIÁ
 
uiTuHeight2
 = 
uiTuHeight
 << 1;

131 cÚ¡ 
IÁ
 
iBa£Un™Size
 = 
¥s
.
	`g‘MaxCUWidth
(è>> sps.
	`g‘MaxTÙ®CUD•th
();

132 cÚ¡ 
IÁ
 
iUn™Width
 = 
iBa£Un™Size
 >> 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘CompÚ’tSÿËX
(
compID
);

133 cÚ¡ 
IÁ
 
iUn™Height
 = 
iBa£Un™Size
 >> 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘CompÚ’tSÿËY
(
compID
);

134 cÚ¡ 
IÁ
 
iTUWidthInUn™s
 = 
uiTuWidth
 / 
iUn™Width
;

135 cÚ¡ 
IÁ
 
iTUHeightInUn™s
 = 
uiTuHeight
 / 
iUn™Height
;

136 cÚ¡ 
IÁ
 
iAboveUn™s
 = 
iTUWidthInUn™s
 << 1;

137 cÚ¡ 
IÁ
 
iLeáUn™s
 = 
iTUHeightInUn™s
 << 1;

138 cÚ¡ 
IÁ
 
b™D•thFÜChªÃl
 = 
¥s
.
	`g‘B™D•th
(
chTy³
);

140 
	`as£¹
(
iTUHeightInUn™s
 > 0 && 
iTUWidthInUn™s
 > 0);

142 cÚ¡ 
IÁ
 
iP¬tIdxSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
();

143 cÚ¡ 
UIÁ
 
uiP¬tIdxLT
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
uiZÜd”IdxInP¬t
;

144 cÚ¡ 
UIÁ
 
uiP¬tIdxRT
 = 
g_auiRa¡”ToZsÿn
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tIdxLT
 ] + 
iTUWidthInUn™s
 - 1 ];

145 cÚ¡ 
UIÁ
 
uiP¬tIdxLB
 = 
g_auiRa¡”ToZsÿn
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tIdxLT
 ] + ((
iTUHeightInUn™s
 - 1è* 
iP¬tIdxSŒide
)];

147 
IÁ
 
iPicSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘SŒide
(
compID
);

148 
BoÞ
 
bNeighbÜFÏgs
[4 * 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
 + 1];

149 
IÁ
 
iNumIÁ¿NeighbÜ
 = 0;

151 
bNeighbÜFÏgs
[
iLeáUn™s
] = 
	`isAboveLeáAvažabË
Ð
pcCU
, 
uiP¬tIdxLT
 );

152 
iNumIÁ¿NeighbÜ
 +ð
bNeighbÜFÏgs
[
iLeáUn™s
] ? 1 : 0;

153 
iNumIÁ¿NeighbÜ
 +ð
	`isAboveAvažabË
 ( 
pcCU
, 
uiP¬tIdxLT
, 
uiP¬tIdxRT
, (
bNeighbÜFÏgs
 + 
iLeáUn™s
 + 1) );

154 
iNumIÁ¿NeighbÜ
 +ð
	`isAboveRightAvažabË
Ð
pcCU
, 
uiP¬tIdxLT
, 
uiP¬tIdxRT
, (
bNeighbÜFÏgs
 + 
iLeáUn™s
 + 1 + 
iTUWidthInUn™s
 ) );

155 
iNumIÁ¿NeighbÜ
 +ð
	`isLeáAvažabË
 ( 
pcCU
, 
uiP¬tIdxLT
, 
uiP¬tIdxLB
, (
bNeighbÜFÏgs
 + 
iLeáUn™s
 - 1) );

156 
iNumIÁ¿NeighbÜ
 +ð
	`isB–owLeáAvažabË
 ( 
pcCU
, 
uiP¬tIdxLT
, 
uiP¬tIdxLB
, (
bNeighbÜFÏgs
 + 
iLeáUn™s
 - 1 - 
iTUHeightInUn™s
) );

158 cÚ¡ 
UIÁ
 
uiROIWidth
 = 
uiTuWidth2
+1;

159 cÚ¡ 
UIÁ
 
uiROIHeight
 = 
uiTuHeight2
+1;

161 
	`as£¹
(
uiROIWidth
*
uiROIHeight
 <ð
m_iYuvExtSize
);

163 #ià
DEBUG_STRING


164 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

168 
P–
 *
piIÁ¿Temp
 = 
m_piYuvExt
[
compID
][
PRED_BUF_UNFILTERED
];

169 
P–
 *
piRoiOrigš
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
(
compID
,…cCU->
	`g‘CtuRsAddr
(),…cCU->
	`g‘ZÜd”IdxInCtu
()+
uiZÜd”IdxInP¬t
);

170 #ià
O0043_BEST_EFFORT_DECODING


171 cÚ¡ 
IÁ
 
b™D•thFÜChªÃlInSŒ—m
 = 
¥s
.
	`g‘SŒ—mB™D•th
(
chTy³
);

172 
	`fžlReã»nûSam¶es
 (
b™D•thFÜChªÃlInSŒ—m
, b™D•thFÜChªÃlInSŒ—m - 
b™D•thFÜChªÃl
,

174 
	`fžlReã»nûSam¶es
 (
b™D•thFÜChªÃl
,

176 
piRoiOrigš
, 
piIÁ¿Temp
, 
bNeighbÜFÏgs
, 
iNumIÁ¿NeighbÜ
, 
iUn™Width
, 
iUn™Height
, 
iAboveUn™s
, 
iLeáUn™s
,

177 
uiROIWidth
, 
uiROIHeight
, 
iPicSŒide
);

180 #ià
DEBUG_STRING


181 ià(
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
	`g‘IÁ
()&
	`DebugSŒšgG‘P»dModeMask
(
MODE_INTRA
))

183 
ss
 << "###: g’”©šg ReàSam¶e fÜ chªÃÈ" << 
compID
 << "‡nd " << 
rTu
.
	`g‘Reù
(compID).
width
 << " x " <<„Tu.g‘Reù(compID).
height
 << "\n";

184 
UIÁ
 
y
=0; y<
uiROIHeight
; y++)

186 
ss
 << "###: - ";

187 
UIÁ
 
x
=0; x<
uiROIWidth
; x++)

189 ià(
x
==0 || 
y
==0)

191 
ss
 << 
piIÁ¿Temp
[
y
*
uiROIWidth
 + 
x
] << ", ";

195 
ss
 << "\n";

200 ià(
bFž‹rRefSam¶es
)

204 
IÁ
 
¡ride
 = 
uiROIWidth
;

205 cÚ¡ 
P–
 *
piSrcPŒ
 = 
piIÁ¿Temp
 + (
¡ride
 * 
uiTuHeight2
);

206 
P–
 *
piDe¡PŒ
 = 
m_piYuvExt
[
compID
][
PRED_BUF_FILTERED
] + (
¡ride
 * 
uiTuHeight2
);

210 
BoÞ
 
u£SŒÚgIÁ¿SmoÙhšg
 = 
	`isLuma
(
chTy³
è&& 
¥s
.
	`g‘U£SŒÚgIÁ¿SmoÙhšg
();

212 cÚ¡ 
P–
 
bÙtomLeá
 = 
piIÁ¿Temp
[
¡ride
 * 
uiTuHeight2
];

213 cÚ¡ 
P–
 
tÝLeá
 = 
piIÁ¿Temp
[0];

214 cÚ¡ 
P–
 
tÝRight
 = 
piIÁ¿Temp
[
uiTuWidth2
];

216 ià(
u£SŒÚgIÁ¿SmoÙhšg
)

218 #ià
O0043_BEST_EFFORT_DECODING


219 cÚ¡ 
IÁ
 
th»shÞd
 = 1 << (
b™D•thFÜChªÃlInSŒ—m
 - 5);

221 cÚ¡ 
IÁ
 
th»shÞd
 = 1 << (
b™D•thFÜChªÃl
 - 5);

223 cÚ¡ 
BoÞ
 
bžš—rLeá
 = 
	`abs
((
bÙtomLeá
 + 
tÝLeá
 ) - (2 * 
piIÁ¿Temp
[
¡ride
 * 
uiTuHeight
])è< 
th»shÞd
;

224 cÚ¡ 
BoÞ
 
bžš—rAbove
 = 
	`abs
((
tÝLeá
 + 
tÝRight
è- (2 * 
piIÁ¿Temp
[ 
uiTuWidth
 ])è< 
th»shÞd
;

225 ià((
uiTuWidth
 < 32è|| (!
bžš—rLeá
è|| (!
bžš—rAbove
))

227 
u£SŒÚgIÁ¿SmoÙhšg
 = 
çl£
;

231 *
piDe¡PŒ
 = *
piSrcPŒ
;

232 
piDe¡PŒ
 -ð
¡ride
;

233 
piSrcPŒ
 -ð
¡ride
;

239 ià(
u£SŒÚgIÁ¿SmoÙhšg
)

241 cÚ¡ 
IÁ
 
shiá
 = 
g_aucCÚv”tToB™
[
uiTuHeight
] + 3;

243 
UIÁ
 
i
=1; i<
uiTuHeight2
; i++, 
piDe¡PŒ
-=
¡ride
)

245 *
piDe¡PŒ
 = (((
uiTuHeight2
 - 
i
è* 
bÙtomLeá
è+ (˜* 
tÝLeá
è+ 
uiTuHeight
è>> 
shiá
;

248 
piSrcPŒ
 -ð
¡ride
 * (
uiTuHeight2
 - 1);

252 
UIÁ
 
i
=1; i<
uiTuHeight2
; i++, 
piDe¡PŒ
-=
¡ride
, 
piSrcPŒ
-=stride)

254 *
piDe¡PŒ
 = ( 
piSrcPŒ
[
¡ride
] + 2*piSrcPtr[0] +…iSrcPtr[-stride] + 2 ) >> 2;

262 ià(
u£SŒÚgIÁ¿SmoÙhšg
)

264 *
piDe¡PŒ
 = 
piSrcPŒ
[0];

268 *
piDe¡PŒ
 = ( 
piSrcPŒ
[
¡ride
] + 2*piSrcPtr[0] +…iSrcPtr[1] + 2 ) >> 2;

270 
piDe¡PŒ
 += 1;

271 
piSrcPŒ
 += 1;

277 ià(
u£SŒÚgIÁ¿SmoÙhšg
)

279 cÚ¡ 
IÁ
 
shiá
 = 
g_aucCÚv”tToB™
[
uiTuWidth
] + 3;

281 
UIÁ
 
i
=1; i<
uiTuWidth2
; i++, 
piDe¡PŒ
++)

283 *
piDe¡PŒ
 = (((
uiTuWidth2
 - 
i
è* 
tÝLeá
è+ (˜* 
tÝRight
è+ 
uiTuWidth
è>> 
shiá
;

286 
piSrcPŒ
 +ð
uiTuWidth2
 - 1;

290 
UIÁ
 
i
=1; i<
uiTuWidth2
; i++, 
piDe¡PŒ
++, 
piSrcPŒ
++)

292 *
piDe¡PŒ
 = ( 
piSrcPŒ
[1] + 2*piSrcPtr[0] +…iSrcPtr[-1] + 2 ) >> 2;

298 *
piDe¡PŒ
=*
piSrcPŒ
;

300 #ià
DEBUG_STRING


301 ià(
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
	`g‘IÁ
()&
	`DebugSŒšgG‘P»dModeMask
(
MODE_INTRA
))

303 
ss
 << "###: fž‹»d„esuÉ fÜ chªÃÈ" << 
compID
 <<"\n";

304 
UIÁ
 
y
=0; y<
uiROIHeight
; y++)

306 
ss
 << "###: - ";

307 
UIÁ
 
x
=0; x<
uiROIWidth
; x++)

309 ià(
x
==0 || 
y
==0)

311 
ss
 << 
m_piYuvExt
[
compID
][
PRED_BUF_FILTERED
][
y
*
uiROIWidth
 + 
x
] << ", ";

315 
ss
 << "\n";

323 
	`DEBUG_STRING_APPEND
(
sDebug
, 
ss
.
	`¡r
())

324 
	}
}

326 
Void
 
fžlReã»nûSam¶es
ÐcÚ¡ 
IÁ
 
b™D•th
,

327 #ià
O0043_BEST_EFFORT_DECODING


328 cÚ¡ 
IÁ
 
b™D•thD–
,

330 cÚ¡ 
P–
* 
piRoiOrigš
,

331 
P–
* 
piIÁ¿Temp
,

332 cÚ¡ 
BoÞ
* 
bNeighbÜFÏgs
,

333 cÚ¡ 
IÁ
 
iNumIÁ¿NeighbÜ
,

334 cÚ¡ 
IÁ
 
un™Width
,

335 cÚ¡ 
IÁ
 
un™Height
,

336 cÚ¡ 
IÁ
 
iAboveUn™s
,

337 cÚ¡ 
IÁ
 
iLeáUn™s
,

338 cÚ¡ 
UIÁ
 
uiWidth
,

339 cÚ¡ 
UIÁ
 
uiHeight
,

340 cÚ¡ 
IÁ
 
iPicSŒide
 )

342 cÚ¡ 
P–
* 
	gpiRoiTemp
;

343 
IÁ
 
	gi
, 
	gj
;

344 
IÁ
 
	giDCV®ue
 = 1 << (
b™D•th
 - 1);

345 cÚ¡ 
IÁ
 
	giTÙ®Un™s
 = 
iAboveUn™s
 + 
iLeáUn™s
 + 1;

347 ià(
	giNumIÁ¿NeighbÜ
 == 0)

350 
i
=0; 
	gi
<
	guiWidth
; i++)

352 
	gpiIÁ¿Temp
[
i
] = 
iDCV®ue
;

354 
	gi
=1; i<
	guiHeight
; i++)

356 
	gpiIÁ¿Temp
[
i
*
uiWidth
] = 
iDCV®ue
;

359 ià(
	giNumIÁ¿NeighbÜ
 =ð
iTÙ®Un™s
)

362 
piRoiTemp
 = 
piRoiOrigš
 - 
iPicSŒide
 - 1;

364 
	gi
=0; i<
	guiWidth
; i++)

366 #ià
O0043_BEST_EFFORT_DECODING


367 
	gpiIÁ¿Temp
[
i
] = 
piRoiTemp
[i] << 
b™D•thD–
;

369 
	gpiIÁ¿Temp
[
i
] = 
piRoiTemp
[i];

374 
	gpiRoiTemp
 = 
piRoiOrigš
 - 1;

376 
	gi
=1; i<
	guiHeight
; i++)

378 #ià
O0043_BEST_EFFORT_DECODING


379 
	gpiIÁ¿Temp
[
i
*
uiWidth
] = (*(
piRoiTemp
)è<< 
b™D•thD–
;

381 
	gpiIÁ¿Temp
[
i
*
uiWidth
] = *(
piRoiTemp
);

383 
	gpiRoiTemp
 +ð
iPicSŒide
;

389 cÚ¡ 
IÁ
 
	giTÙ®Sam¶es
 = (
iLeáUn™s
 * 
un™Height
è+ ((
iAboveUn™s
 + 1è* 
un™Width
);

390 
P–
 
	gpiIÁ¿Lše
[5 * 
MAX_CU_SIZE
];

391 
P–
 *
	gpiIÁ¿LšeTemp
;

392 cÚ¡ 
BoÞ
 *
	gpbNeighbÜFÏgs
;

396 
	gi
=0; i<
	giTÙ®Sam¶es
; i++)

398 
	gpiIÁ¿Lše
[
i
] = 
iDCV®ue
;

402 
	gpiRoiTemp
 = 
piRoiOrigš
 - 
iPicSŒide
 - 1;

403 
	gpiIÁ¿LšeTemp
 = 
piIÁ¿Lše
 + (
iLeáUn™s
 * 
un™Height
);

404 
	gpbNeighbÜFÏgs
 = 
bNeighbÜFÏgs
 + 
iLeáUn™s
;

405 ià(*
	gpbNeighbÜFÏgs
)

407 #ià
O0043_BEST_EFFORT_DECODING


408 
P–
 
	gtÝLeáV®
=
piRoiTemp
[0] << 
b™D•thD–
;

410 
P–
 
	gtÝLeáV®
=
piRoiTemp
[0];

412 
	gi
=0; i<
	gun™Width
; i++)

414 
	gpiIÁ¿LšeTemp
[
i
] = 
tÝLeáV®
;

419 
	gpiRoiTemp
 +ð
iPicSŒide
;

420 
	gpiIÁ¿LšeTemp
--;

421 
	gpbNeighbÜFÏgs
--;

423 
	gj
=0; j<
	giLeáUn™s
; j++)

425 ià(*
	gpbNeighbÜFÏgs
)

427 
	gi
=0; i<
	gun™Height
; i++)

429 #ià
O0043_BEST_EFFORT_DECODING


430 
	gpiIÁ¿LšeTemp
[-
i
] = 
piRoiTemp
[i*
iPicSŒide
] << 
b™D•thD–
;

432 
	gpiIÁ¿LšeTemp
[-
i
] = 
piRoiTemp
[i*
iPicSŒide
];

436 
	gpiRoiTemp
 +ð
un™Height
*
iPicSŒide
;

437 
	gpiIÁ¿LšeTemp
 -ð
un™Height
;

438 
	gpbNeighbÜFÏgs
--;

442 
	gpiRoiTemp
 = 
piRoiOrigš
 - 
iPicSŒide
;

444 
	gpiIÁ¿LšeTemp
 = 
piIÁ¿Lše
 + (
iLeáUn™s
 * 
un™Height
è+ 
un™Width
;

445 
	gpbNeighbÜFÏgs
 = 
bNeighbÜFÏgs
 + 
iLeáUn™s
 + 1;

446 
	gj
=0; j<
	giAboveUn™s
; j++)

448 ià(*
	gpbNeighbÜFÏgs
)

450 
	gi
=0; i<
	gun™Width
; i++)

452 #ià
O0043_BEST_EFFORT_DECODING


453 
	gpiIÁ¿LšeTemp
[
i
] = 
piRoiTemp
[i] << 
b™D•thD–
;

455 
	gpiIÁ¿LšeTemp
[
i
] = 
piRoiTemp
[i];

459 
	gpiRoiTemp
 +ð
un™Width
;

460 
	gpiIÁ¿LšeTemp
 +ð
un™Width
;

461 
	gpbNeighbÜFÏgs
++;

465 
IÁ
 
	giCu¼Jn™
 = 0;

466 
P–
 *
	gpiIÁ¿LšeCur
 = 
piIÁ¿Lše
;

467 cÚ¡ 
UIÁ
 
	gpiIÁ¿LšeTÝRowOff£t
 = 
iLeáUn™s
 * (
un™Height
 - 
un™Width
);

469 ià(!
	gbNeighbÜFÏgs
[0])

473 
IÁ
 
	giNext
 = 1;

474 
	giNext
 < 
	giTÙ®Un™s
 && !
	gbNeighbÜFÏgs
[
iNext
])

476 
	giNext
++;

478 
P–
 *
	gpiIÁ¿LšeNext
 = 
piIÁ¿Lše
 + ((
iNext
 < 
iLeáUn™s
è? (iNexˆ* 
un™Height
è: (
piIÁ¿LšeTÝRowOff£t
 + (iNexˆ* 
un™Width
)));

479 cÚ¡ 
P–
 
	g»fSam¶e
 = *
piIÁ¿LšeNext
;

481 
IÁ
 
	giNextOrTÝ
 = 
¡d
::
mš
<IÁ>(
iNext
, 
	giLeáUn™s
);

483 
	giCu¼Jn™
 < 
	giNextOrTÝ
)

485 
	gi
=0; i<
	gun™Height
; i++)

487 
	gpiIÁ¿LšeCur
[
i
] = 
»fSam¶e
;

489 
	gpiIÁ¿LšeCur
 +ð
un™Height
;

490 
	giCu¼Jn™
++;

493 
	giCu¼Jn™
 < 
	giNext
)

495 
	gi
=0; i<
	gun™Width
; i++)

497 
	gpiIÁ¿LšeCur
[
i
] = 
»fSam¶e
;

499 
	gpiIÁ¿LšeCur
 +ð
un™Width
;

500 
	giCu¼Jn™
++;

506 
	giCu¼Jn™
 < 
	giTÙ®Un™s
)

508 ià(!
	gbNeighbÜFÏgs
[
iCu¼Jn™
])

511 cÚ¡ 
IÁ
 
	gnumSam¶esInCu¼Un™
 = (
iCu¼Jn™
 >ð
iLeáUn™s
è? 
un™Width
 : 
un™Height
;

512 cÚ¡ 
P–
 
	g»fSam¶e
 = *(
piIÁ¿LšeCur
-1);

513 
	gi
=0; i<
	gnumSam¶esInCu¼Un™
; i++)

515 
	gpiIÁ¿LšeCur
[
i
] = 
»fSam¶e
;

517 
	gpiIÁ¿LšeCur
 +ð
numSam¶esInCu¼Un™
;

518 
	giCu¼Jn™
++;

523 
	gpiIÁ¿LšeCur
 +ð(
iCu¼Jn™
 >ð
iLeáUn™s
è? 
un™Width
 : 
un™Height
;

524 
	giCu¼Jn™
++;

530 
	gpiIÁ¿LšeTemp
 = 
piIÁ¿Lše
 + 
uiHeight
 + 
un™Width
 - 2;

532 
	gi
=0; i<
	guiWidth
; i++)

534 
	gpiIÁ¿Temp
[
i
] = 
piIÁ¿LšeTemp
[i];

537 
	gpiIÁ¿LšeTemp
 = 
piIÁ¿Lše
 + 
uiHeight
 - 1;

538 
	gi
=1; i<
	guiHeight
; i++)

540 
	gpiIÁ¿Temp
[
i
*
uiWidth
] = 
piIÁ¿LšeTemp
[-i];

545 
BoÞ
 
	gTComP»diùiÚ
::
	$fž‹ršgIÁ¿Reã»nûSam¶es
(cÚ¡ 
CompÚ’tID
 
compID
, 
UIÁ
 
uiDœMode
, UIÁ 
uiTuChWidth
, UIÁ 
uiTuChHeight
, cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ 
BoÞ
 
šŒaReã»nûSmoÙhšgDi§bËd
)

547 
BoÞ
 
bFž‹r
;

549 ià(!
	`fž‹rIÁ¿Reã»nûSam¶es
(
	`toChªÃlTy³
(
compID
), 
chFmt
, 
šŒaReã»nûSmoÙhšgDi§bËd
))

551 
bFž‹r
=
çl£
;

555 
	`as£¹
(
uiTuChWidth
>=4 && 
uiTuChHeight
>=4 && uiTuChWidth<128 && uiTuChHeight<128);

557 ià(
uiDœMode
 =ð
DC_IDX
)

559 
bFž‹r
=
çl£
;

563 
IÁ
 
diff
 = 
mš
<IÁ>(
	`abs
((IÁè
uiDœMode
 - 
HOR_IDX
),‡bs((IÁ)uiDœMod- 
VER_IDX
));

564 
UIÁ
 
sizeIndex
=
g_aucCÚv”tToB™
[
uiTuChWidth
];

565 
	`as£¹
(
sizeIndex
 < 
MAX_INTRA_FILTER_DEPTHS
);

566 
bFž‹r
 = 
diff
 > 
m_aucIÁ¿Fž‹r
[
	`toChªÃlTy³
(
compID
)][
sizeIndex
];

569  
bFž‹r
;

570 
	}
}

572 
BoÞ
 
	$isAboveLeáAvažabË
ÐcÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
 )

574 
BoÞ
 
bAboveLeáFÏg
;

575 
UIÁ
 
uiP¬tAboveLeá
;

576 cÚ¡ 
TComD©aCU
* 
pcCUAboveLeá
 = 
pcCU
->
	`g‘PUAboveLeá
Ð
uiP¬tAboveLeá
, 
uiP¬tIdxLT
 );

577 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘CÚ¡¿šedIÁ¿P»d
())

579 
bAboveLeáFÏg
 = ( 
pcCUAboveLeá
 &&…cCUAboveLeá->
	`isIÁ¿
Ð
uiP¬tAboveLeá
 ) );

583 
bAboveLeáFÏg
 = (
pcCUAboveLeá
 ? 
Œue
 : 
çl£
);

585  
bAboveLeáFÏg
;

586 
	}
}

588 
IÁ
 
	$isAboveAvažabË
ÐcÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxRT
, 
BoÞ
 *
bV®idFÏgs
 )

590 cÚ¡ 
UIÁ
 
uiRa¡”P¬tBegš
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxLT
];

591 cÚ¡ 
UIÁ
 
uiRa¡”P¬tEnd
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxRT
]+1;

592 cÚ¡ 
UIÁ
 
uiIdxS‹p
 = 1;

593 
BoÞ
 *
pbV®idFÏgs
 = 
bV®idFÏgs
;

594 
IÁ
 
iNumIÁ¿
 = 0;

596  
UIÁ
 
uiRa¡”P¬t
 = 
uiRa¡”P¬tBegš
; uiRa¡”P¬ˆ< 
uiRa¡”P¬tEnd
; uiRa¡”P¬ˆ+ð
uiIdxS‹p
 )

598 
UIÁ
 
uiP¬tAbove
;

599 cÚ¡ 
TComD©aCU
* 
pcCUAbove
 = 
pcCU
->
	`g‘PUAbove
Ð
uiP¬tAbove
, 
g_auiRa¡”ToZsÿn
[
uiRa¡”P¬t
] );

600 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘CÚ¡¿šedIÁ¿P»d
())

602 iàÐ
pcCUAbove
 &&…cCUAbove->
	`isIÁ¿
Ð
uiP¬tAbove
 ) )

604 
iNumIÁ¿
++;

605 *
pbV®idFÏgs
 = 
Œue
;

609 *
pbV®idFÏgs
 = 
çl£
;

614 ià(
pcCUAbove
)

616 
iNumIÁ¿
++;

617 *
pbV®idFÏgs
 = 
Œue
;

621 *
pbV®idFÏgs
 = 
çl£
;

624 
pbV®idFÏgs
++;

626  
iNumIÁ¿
;

627 
	}
}

629 
IÁ
 
	$isLeáAvažabË
ÐcÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxLB
, 
BoÞ
 *
bV®idFÏgs
 )

631 cÚ¡ 
UIÁ
 
uiRa¡”P¬tBegš
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxLT
];

632 cÚ¡ 
UIÁ
 
uiRa¡”P¬tEnd
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxLB
]+1;

633 cÚ¡ 
UIÁ
 
uiIdxS‹p
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
();

634 
BoÞ
 *
pbV®idFÏgs
 = 
bV®idFÏgs
;

635 
IÁ
 
iNumIÁ¿
 = 0;

637  
UIÁ
 
uiRa¡”P¬t
 = 
uiRa¡”P¬tBegš
; uiRa¡”P¬ˆ< 
uiRa¡”P¬tEnd
; uiRa¡”P¬ˆ+ð
uiIdxS‹p
 )

639 
UIÁ
 
uiP¬tLeá
;

640 cÚ¡ 
TComD©aCU
* 
pcCULeá
 = 
pcCU
->
	`g‘PULeá
Ð
uiP¬tLeá
, 
g_auiRa¡”ToZsÿn
[
uiRa¡”P¬t
] );

641 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘CÚ¡¿šedIÁ¿P»d
())

643 iàÐ
pcCULeá
 &&…cCULeá->
	`isIÁ¿
Ð
uiP¬tLeá
 ) )

645 
iNumIÁ¿
++;

646 *
pbV®idFÏgs
 = 
Œue
;

650 *
pbV®idFÏgs
 = 
çl£
;

655 iàÐ
pcCULeá
 )

657 
iNumIÁ¿
++;

658 *
pbV®idFÏgs
 = 
Œue
;

662 *
pbV®idFÏgs
 = 
çl£
;

665 
pbV®idFÏgs
--;

668  
iNumIÁ¿
;

669 
	}
}

671 
IÁ
 
	$isAboveRightAvažabË
ÐcÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxRT
, 
BoÞ
 *
bV®idFÏgs
 )

673 cÚ¡ 
UIÁ
 
uiNumUn™sInPU
 = 
g_auiZsÿnToRa¡”
[
uiP¬tIdxRT
] - g_auiZsÿnToRa¡”[
uiP¬tIdxLT
] + 1;

674 
BoÞ
 *
pbV®idFÏgs
 = 
bV®idFÏgs
;

675 
IÁ
 
iNumIÁ¿
 = 0;

677  
UIÁ
 
uiOff£t
 = 1; uiOff£ˆ<ð
uiNumUn™sInPU
; uiOffset++ )

679 
UIÁ
 
uiP¬tAboveRight
;

680 cÚ¡ 
TComD©aCU
* 
pcCUAboveRight
 = 
pcCU
->
	`g‘PUAboveRight
Ð
uiP¬tAboveRight
, 
uiP¬tIdxRT
, 
uiOff£t
 );

681 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘CÚ¡¿šedIÁ¿P»d
())

683 iàÐ
pcCUAboveRight
 &&…cCUAboveRight->
	`isIÁ¿
Ð
uiP¬tAboveRight
 ) )

685 
iNumIÁ¿
++;

686 *
pbV®idFÏgs
 = 
Œue
;

690 *
pbV®idFÏgs
 = 
çl£
;

695 iàÐ
pcCUAboveRight
 )

697 
iNumIÁ¿
++;

698 *
pbV®idFÏgs
 = 
Œue
;

702 *
pbV®idFÏgs
 = 
çl£
;

705 
pbV®idFÏgs
++;

708  
iNumIÁ¿
;

709 
	}
}

711 
IÁ
 
	$isB–owLeáAvažabË
ÐcÚ¡ 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdxLT
, UIÁ 
uiP¬tIdxLB
, 
BoÞ
 *
bV®idFÏgs
 )

713 cÚ¡ 
UIÁ
 
uiNumUn™sInPU
 = (
g_auiZsÿnToRa¡”
[
uiP¬tIdxLB
] - g_auiZsÿnToRa¡”[
uiP¬tIdxLT
]è/ 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬tInCtuWidth
() + 1;

714 
BoÞ
 *
pbV®idFÏgs
 = 
bV®idFÏgs
;

715 
IÁ
 
iNumIÁ¿
 = 0;

717  
UIÁ
 
uiOff£t
 = 1; uiOff£ˆ<ð
uiNumUn™sInPU
; uiOffset++ )

719 
UIÁ
 
uiP¬tB–owLeá
;

720 cÚ¡ 
TComD©aCU
* 
pcCUB–owLeá
 = 
pcCU
->
	`g‘PUB–owLeá
Ð
uiP¬tB–owLeá
, 
uiP¬tIdxLB
, 
uiOff£t
 );

721 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘CÚ¡¿šedIÁ¿P»d
())

723 iàÐ
pcCUB–owLeá
 &&…cCUB–owLeá->
	`isIÁ¿
Ð
uiP¬tB–owLeá
 ) )

725 
iNumIÁ¿
++;

726 *
pbV®idFÏgs
 = 
Œue
;

730 *
pbV®idFÏgs
 = 
çl£
;

735 iàÐ
pcCUB–owLeá
 )

737 
iNumIÁ¿
++;

738 *
pbV®idFÏgs
 = 
Œue
;

742 *
pbV®idFÏgs
 = 
çl£
;

745 
pbV®idFÏgs
--;

748  
iNumIÁ¿
;

749 
	}
}

	@source/Lib/TLibCommon/TComPattern.h

38 #iâdeà
__TCOMPATTERN__


39 
	#__TCOMPATTERN__


	)

42 
	~"CommÚDef.h
"

51 
þass
 
	gTComD©aCU
;

52 
þass
 
	gTComTU
;

55 þas 
	cTComP©‹º


57 
	m´iv©e
:

58 
P–
* 
m_piROIOrigš
;

59 
IÁ
 
	mm_roiWidth
;

60 
IÁ
 
	mm_roiHeight
;

61 
IÁ
 
	mm_·‰”nSŒide
;

62 
IÁ
 
	mm_b™D•th
;

64 #ià
MCTS_ENC_CHECK


65 
IÁ
 
	mm_roiPosX
;

66 
IÁ
 
	mm_roiPosY
;

67 
IÁ
 
	mm_tžeLeáTÝP–PosX
;

68 
IÁ
 
	mm_tžeLeáTÝP–PosY
;

69 
IÁ
 
	mm_tžeRightBÙtomP–PosX
;

70 
IÁ
 
	mm_tžeRightBÙtomP–PosY
;

73 
	mpublic
:

75 
IÁ
 
	$g‘ROIYWidth
(ècÚ¡ {  
m_roiWidth
; }

76 
IÁ
 
	$g‘ROIYHeight
(ècÚ¡ {  
m_roiHeight
; 
	}
}

77 
IÁ
 
	$g‘P©‹ºLSŒide
(ècÚ¡ {  
m_·‰”nSŒide
; 
	}
}

78 
IÁ
 
	$g‘B™D•thY
(ècÚ¡ {  
m_b™D•th
; 
	}
}

79 #ià
MCTS_ENC_CHECK


80 
IÁ
 
	$g‘ROIYPosX
(ècÚ¡ {  
m_roiPosX
; 
	}
}

81 
IÁ
 
	$g‘ROIYPosY
(ècÚ¡ {  
m_roiPosY
; 
	}
}

83 
IÁ
 
	$g‘TžeLeáTÝP–PosX
(ècÚ¡ {  
m_tžeLeáTÝP–PosX
; 
	}
}

84 
IÁ
 
	$g‘TžeLeáTÝP–PosY
(ècÚ¡ {  
m_tžeLeáTÝP–PosY
; 
	}
}

85 
IÁ
 
	$g‘TžeRightBÙtomP–PosX
(ècÚ¡ {  
m_tžeRightBÙtomP–PosX
; 
	}
}

86 
IÁ
 
	$g‘TžeRightBÙtomP–PosY
(ècÚ¡ {  
m_tžeRightBÙtomP–PosY
; 
	}
}

89 
__šlše
 
P–
* 
	$g‘ROIY
()

91  
m_piROIOrigš
;

92 
	}
}

93 
__šlše
 cÚ¡ 
P–
* 
	$g‘ROIY
() const

95  
m_piROIOrigš
;

96 
	}
}

98 
	$TComP©‹º
()

99 : 
	`m_piROIOrigš
(
NULL
)

100 , 
	`m_roiWidth
(0)

101 , 
	`m_roiHeight
(0)

102 , 
	`m_·‰”nSŒide
(0)

103 , 
	$m_b™D•th
(0)

104 #ià
MCTS_ENC_CHECK


105 , 
	`m_roiPosX
(0)

106 , 
	`m_roiPosY
(0)

107 , 
	`m_tžeLeáTÝP–PosX
(0)

108 , 
	`m_tžeLeáTÝP–PosY
(0)

109 , 
	`m_tžeRightBÙtomP–PosX
(0)

110 , 
	$m_tžeRightBÙtomP–PosY
(0)

112 {
	}
};

120 #ià
MCTS_ENC_CHECK


121 
Void
 
š™P©‹º
(
P–
* 
piY
, 
IÁ
 
roiWidth
, IÁ 
roiHeight
, IÁ 
¡ride
, IÁ 
b™D•thLuma
, IÁ 
roiPosX
, IÁ 
roiPosY
);

122 
Void
 
£tTžeBÜd”s
(
IÁ
 
tžeLeáTÝP–PosX
, IÁ 
tžeLeáTÝP–PosY
, IÁ 
tžeRightBÙtomP–PosX
, IÁ 
tžeRightBÙtomP–PosY
);

124 
Void
 
š™P©‹º
(
P–
* 
piY
, 
IÁ
 
roiWidth
, IÁ 
roiHeight
, IÁ 
¡ride
, IÁ 
b™D•thLuma
);

	@source/Lib/TLibCommon/TComPic.cpp

38 
	~"TComPic.h
"

39 
	~"SEI.h
"

48 
	gTComPic
::
	$TComPic
()

49 : 
	`m_uiTLay”
 (0)

50 , 
	`m_bU£dByCu¼
 (
çl£
)

51 , 
	`m_bIsLÚgT”m
 (
çl£
)

52 , 
	`m_pcPicYuvP»d
 (
NULL
)

53 , 
	`m_pcPicYuvResi
 (
NULL
)

54 , 
	`m_bRecÚ¡ruùed
 (
çl£
)

55 , 
	`m_bN“dedFÜOuut
 (
çl£
)

56 , 
	`m_uiCu¼SliûIdx
 (0)

57 , 
	$m_bCheckLTMSB
 (
çl£
)

59 
UIÁ
 
i
=0; i<
NUM_PIC_YUV
; i++)

61 
m_­cPicYuv
[
i
] = 
NULL
;

63 #ià
FGS_RDD5_ENABLE


64 
m_g¿šCh¬aù”i¡ic
 = 
NULL
;

65 
m_g¿šBuf
 = 
NULL
;

67 
	}
}

69 
	gTComPic
::~
	$TComPic
()

71 
	`de¡roy
();

72 
	}
}

74 #ià
REDUCED_ENCODER_MEMORY


75 
Void
 
	gTComPic
::
	$ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, cÚ¡ 
BoÞ
 
bC»©eEncod”SourûPicYuv
, cÚ¡ BoÞ 
bC»©eFÜImmedŸ‹RecÚ¡ruùiÚ
 )

77 
Void
 
TComPic
::
	$ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, cÚ¡ 
BoÞ
 
bIsVœtu®
)

80 
	`de¡roy
();

82 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
¥s
.
	`g‘ChromaFÜm©Idc
();

83 cÚ¡ 
IÁ
 
iWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

84 cÚ¡ 
IÁ
 
iHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

85 cÚ¡ 
UIÁ
 
uiMaxCuWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

86 cÚ¡ 
UIÁ
 
uiMaxCuHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

87 cÚ¡ 
UIÁ
 
uiMaxD•th
 = 
¥s
.
	`g‘MaxTÙ®CUD•th
();

89 #ià
REDUCED_ENCODER_MEMORY


90 
m_picSym
.
	`ü—‹
Ð
¥s
, 
µs
, 
uiMaxD•th
, 
bC»©eFÜImmedŸ‹RecÚ¡ruùiÚ
 );

91 ià(
bC»©eEncod”SourûPicYuv
)

93 
m_picSym
.
	`ü—‹
Ð
¥s
, 
µs
, 
uiMaxD•th
 );

94 ià(!
bIsVœtu®
)

97 
m_­cPicYuv
[
PIC_YUV_ORG
 ] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_ORG ]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

98 
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_TRUE_ORG]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

100 #ià
REDUCED_ENCODER_MEMORY


101 ià(
bC»©eFÜImmedŸ‹RecÚ¡ruùiÚ
)

104 
m_­cPicYuv
[
PIC_YUV_REC
] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_REC]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

105 #ià
REDUCED_ENCODER_MEMORY


110 ià(
m_SEIs
.
	`size
() > 0)

112 
	`d–‘eSEIs
 (
m_SEIs
);

114 
m_bU£dByCu¼
 = 
çl£
;

115 
	}
}

117 #ià
REDUCED_ENCODER_MEMORY


118 
Void
 
	gTComPic
::
	$´•¬eFÜEncod”SourûPicYuv
()

120 cÚ¡ 
TComSPS
 &
¥s
=
m_picSym
.
	`g‘SPS
();

122 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
¥s
.
	`g‘ChromaFÜm©Idc
();

123 cÚ¡ 
IÁ
 
iWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

124 cÚ¡ 
IÁ
 
iHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

125 cÚ¡ 
UIÁ
 
uiMaxCuWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

126 cÚ¡ 
UIÁ
 
uiMaxCuHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

127 cÚ¡ 
UIÁ
 
uiMaxD•th
 = 
¥s
.
	`g‘MaxTÙ®CUD•th
();

129 ià(
m_­cPicYuv
[
PIC_YUV_ORG
 ]==
NULL
)

131 
m_­cPicYuv
[
PIC_YUV_ORG
 ] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_ORG ]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

133 ià(
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
 ]==
NULL
)

135 
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_TRUE_ORG]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

137 
	}
}

139 
Void
 
	gTComPic
::
	$´•¬eFÜRecÚ¡ruùiÚ
()

141 ià(
m_­cPicYuv
[
PIC_YUV_REC
] =ð
NULL
)

143 cÚ¡ 
TComSPS
 &
¥s
=
m_picSym
.
	`g‘SPS
();

144 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
¥s
.
	`g‘ChromaFÜm©Idc
();

145 cÚ¡ 
IÁ
 
iWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

146 cÚ¡ 
IÁ
 
iHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

147 cÚ¡ 
UIÁ
 
uiMaxCuWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

148 cÚ¡ 
UIÁ
 
uiMaxCuHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

149 cÚ¡ 
UIÁ
 
uiMaxD•th
 = 
¥s
.
	`g‘MaxTÙ®CUD•th
();

151 
m_­cPicYuv
[
PIC_YUV_REC
] = 
Ãw
 
TComPicYuv
; m_­cPicYuv[PIC_YUV_REC]->
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©IDC
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
uiMaxD•th
, 
Œue
 );

155 
m_­cPicYuv
[
PIC_YUV_REC
]->
	`£tBÜd”Ex‹nsiÚ
(
çl£
);

157 
m_picSym
.
	`´•¬eFÜRecÚ¡ruùiÚ
();

158 
	}
}

160 
Void
 
	gTComPic
::
	$»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
()

162 
m_picSym
.
	`»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
();

163 
	}
}

165 
Void
 
	gTComPic
::
	$»Ëa£Encod”SourûImageD©a
()

167 ià(
m_­cPicYuv
[
PIC_YUV_ORG
 ])

169 
m_­cPicYuv
[
PIC_YUV_ORG
]->
	`de¡roy
();

170 
d–‘e
 
m_­cPicYuv
[
PIC_YUV_ORG
];

171 
m_­cPicYuv
[
PIC_YUV_ORG
] = 
NULL
;

173 ià(
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
 ])

175 
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
]->
	`de¡roy
();

176 
d–‘e
 
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
];

177 
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
] = 
NULL
;

179 
	}
}

181 
Void
 
	gTComPic
::
	$»Ëa£AÎRecÚ¡ruùiÚD©a
()

183 ià(
m_­cPicYuv
[
PIC_YUV_REC
 ])

185 
m_­cPicYuv
[
PIC_YUV_REC
]->
	`de¡roy
();

186 
d–‘e
 
m_­cPicYuv
[
PIC_YUV_REC
];

187 
m_­cPicYuv
[
PIC_YUV_REC
] = 
NULL
;

189 
m_picSym
.
	`»Ëa£AÎRecÚ¡ruùiÚD©a
();

190 
	}
}

193 
Void
 
	gTComPic
::
	$de¡roy
()

195 
m_picSym
.
	`de¡roy
();

197 
UIÁ
 
i
=0; i<
NUM_PIC_YUV
; i++)

199 ià(
m_­cPicYuv
[
i
])

201 
m_­cPicYuv
[
i
]->
	`de¡roy
();

202 
d–‘e
 
m_­cPicYuv
[
i
];

203 
m_­cPicYuv
[
i
] = 
NULL
;

207 
	`d–‘eSEIs
(
m_SEIs
);

208 #ià
FGS_RDD5_ENABLE


209 
m_g¿šBuf
 = 
NULL
;

211 
	}
}

213 
Void
 
	gTComPic
::
	$com´essMÙiÚ
()

215 
TComPicSym
* 
pPicSym
 = 
	`g‘PicSym
();

216  
UIÁ
 
uiCUAddr
 = 0; uiCUAdd¸< 
pPicSym
->
	`g‘Numb”OfCtusInF¿me
(); uiCUAddr++ )

218 
TComD©aCU
* 
pCtu
 = 
pPicSym
->
	`g‘Ctu
(
uiCUAddr
);

219 
pCtu
->
	`com´essMV
();

221 
	}
}

223 
BoÞ
 
	gTComPic
::
	$g‘SAOM”geAvažabž™y
(
IÁ
 
cu¼Addr
, IÁ 
m”geAddr
)

225 
BoÞ
 
m”geCtbInSliûSeg
 = (
m”geAddr
 >ð
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
	`g‘Ctu
(
cu¼Addr
)->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
()));

226 
BoÞ
 
m”geCtbInTže
 = (
	`g‘PicSym
()->
	`g‘TžeIdxM­
(
m”geAddr
è=ðg‘PicSym()->g‘TžeIdxM­(
cu¼Addr
));

227  (
m”geCtbInSliûSeg
 && 
m”geCtbInTže
);

228 
	}
}

230 
UIÁ
 
	gTComPic
::
	$g‘Sub¡»amFÜCtuAddr
(cÚ¡ 
UIÁ
 
ùuAddr
, cÚ¡ 
BoÞ
 
bAdd»ssInRa¡”
, 
TComSliû
 *
pcSliû
)

232 
UIÁ
 
subSŒm
;

233 cÚ¡ 
boÞ
 
bWPPEÇbËd
=
pcSliû
->
	`g‘PPS
()->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
();

234 cÚ¡ 
TComPicSym
 &
picSym
 = *(
	`g‘PicSym
());

236 ià((
bWPPEÇbËd
 && 
picSym
.
	`g‘F¿meHeightInCtus
()>1è|| (picSym.
	`g‘NumTžes
()>1))

238 ià(
bWPPEÇbËd
)

240 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
bAdd»ssInRa¡”
?
ùuAddr
 : 
picSym
.
	`g‘CtuTsToRsAddrM­
(ctuAddr);

241 cÚ¡ 
UIÁ
 
äameWidthInCtus
 = 
picSym
.
	`g‘F¿meWidthInCtus
();

242 cÚ¡ 
UIÁ
 
tžeIndex
 = 
picSym
.
	`g‘TžeIdxM­
(
ùuRsAddr
);

243 cÚ¡ 
UIÁ
 
numTžeCÞumns
 = (
picSym
.
	`g‘NumTžeCÞumnsMšus1
()+1);

244 cÚ¡ 
TComTže
 *
pTže
 = 
picSym
.
	`g‘TComTže
(
tžeIndex
);

245 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pTže
->
	`g‘Fœ¡CtuRsAddr
();

246 cÚ¡ 
UIÁ
 
tžeYInCtus
 = 
fœ¡CtuRsAddrOfTže
 / 
äameWidthInCtus
;

248 cÚ¡ 
UIÁ
 
ùuLše
 = 
ùuRsAddr
 / 
äameWidthInCtus
;

249 cÚ¡ 
UIÁ
 
¡¬tšgSub¡»amFÜTže
 =(
tžeYInCtus
*
numTžeCÞumns
è+ (
pTže
->
	`g‘TžeHeightInCtus
()*(
tžeIndex
%numTileColumns));

250 
subSŒm
 = 
¡¬tšgSub¡»amFÜTže
 + (
ùuLše
 - 
tžeYInCtus
);

254 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
bAdd»ssInRa¡”
?
ùuAddr
 : 
picSym
.
	`g‘CtuTsToRsAddrM­
(ctuAddr);

255 cÚ¡ 
UIÁ
 
tžeIndex
 = 
picSym
.
	`g‘TžeIdxM­
(
ùuRsAddr
);

256 
subSŒm
=
tžeIndex
;

262 
subSŒm
 = 0;

264  
subSŒm
;

265 
	}
}

267 #ià
FGS_RDD5_ENABLE


269 
	gTComPic
::
	$ü—‹G¿šSyÁhesiz”
(
BoÞ
 
bFœ¡Piùu»InSequ’û
, 
SEIFžmG¿šSyÁhesiz”
* 
pG¿šCh¬aù”i¡ics
, 
TComPicYuv
* 
pG¿šBuf
, cÚ¡ 
TComSPS
* 
¥s
)

271 
m_g¿šCh¬aù”i¡ic
 = 
pG¿šCh¬aù”i¡ics
;

272 
m_g¿šBuf
 = 
pG¿šBuf
;

274 ià(
bFœ¡Piùu»InSequ’û
)

277 
m_g¿šCh¬aù”i¡ic
->
	`ü—‹
(
¥s
->
	`g‘PicWidthInLumaSam¶es
(), sps->
	`g‘PicHeightInLumaSam¶es
(),

278 
¥s
->
	`g‘ChromaFÜm©Idc
(), sps->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
), 0, 1);

281 
m_g¿šBuf
->
	`ü—‹W™houtCUInfo
(
¥s
->
	`g‘PicWidthInLumaSam¶es
(), sps->
	`g‘PicHeightInLumaSam¶es
(),

282 
¥s
->
	`g‘ChromaFÜm©Idc
(), 
çl£
, 0, 0);

284 
m_g¿šCh¬aù”i¡ic
->
	`fgsIn™
();

286 
	}
}

288 
TComPicYuv
* 
	gTComPic
::
	$g‘PicYuvDi¥
()

290 
IÁ
 
·ylßdTy³
 = 0;

291 
¡d
::
li¡
<
SEI
*>::
™”©Ü
 
mes§ge
;

293 
m_g¿šCh¬aù”i¡ic
->
m_”rÜCode
 = -1;

294 
mes§ge
 = 
m_SEIs
.
	`begš
(); mes§g!ðm_SEIs.
	`’d
(); ++message)

296 
·ylßdTy³
 = (*
mes§ge
)->
	`·ylßdTy³
();

297 ià(
·ylßdTy³
 =ð
SEI
::
FILM_GRAIN_CHARACTERISTICS
)

299 
m_g¿šCh¬aù”i¡ic
->
m_pFgcP¬am‘”s
 = 
¡©ic_ÿ¡
<
SEIFžmG¿šCh¬aù”i¡ics
*>(*
mes§ge
);

301 
m_g¿šCh¬aù”i¡ic
->
m_”rÜCode
 = m_g¿šCh¬aù”i¡ic->
	`g¿šV®id©eP¬ams
();

306 ià(
FGS_SUCCESS
 =ð
m_g¿šCh¬aù”i¡ic
->
m_”rÜCode
)

308 
m_­cPicYuv
[
PIC_YUV_REC
]->
	`cÝyToPic
(
m_g¿šBuf
);

309 
m_g¿šCh¬aù”i¡ic
->
m_poc
 = 
	`g‘POC
();

310 
m_g¿šCh¬aù”i¡ic
->
	`g¿šSyÁhesizeAndBËnd
(
m_g¿šBuf
, 
	`g‘Sliû
(0)->
	`g‘IdrPicFÏg
());

311  
m_g¿šBuf
;

315 ià(
·ylßdTy³
 =ð
SEI
::
FILM_GRAIN_CHARACTERISTICS
)

317 
	`årštf
(
¡dout
, "Fžm G¿š syÁhesi i nÙ…”fÜmed. E¼Ü code: 0x%x \n", 
m_g¿šCh¬aù”i¡ic
->
m_”rÜCode
);

319  
m_­cPicYuv
[
PIC_YUV_REC
];

322 
	}
}

	@source/Lib/TLibCommon/TComPic.h

38 #iâdeà
__TCOMPIC__


39 
	#__TCOMPIC__


	)

42 
	~"CommÚDef.h
"

43 
	~"TComPicSym.h
"

44 
	~"TComPicYuv.h
"

45 
	~"TComB™SŒ—m.h
"

46 #ià
FGS_RDD5_ENABLE


47 
	~"SEIFžmG¿šSyÁhesiz”.h
"

59 þas 
	cTComPic


61 
	mpublic
:

62 ’um { 
PIC_YUV_ORG
=0, 
	mPIC_YUV_REC
=1, 
	mPIC_YUV_TRUE_ORG
=2, 
	mNUM_PIC_YUV
=3 } 
	tPIC_YUV_T
;

64 
TComPicYuv
* 
	$g‘PicYuvTrueOrg
(è{  
m_­cPicYuv
[
PIC_YUV_TRUE_ORG
]; 
	}
}

66 
	g´iv©e
:

67 
UIÁ
 
m_uiTLay”
;

68 
BoÞ
 
	gm_bU£dByCu¼
;

69 
BoÞ
 
	gm_bIsLÚgT”m
;

70 
TComPicSym
 
	gm_picSym
;

71 
TComPicYuv
* 
	gm_­cPicYuv
[
NUM_PIC_YUV
];

73 
TComPicYuv
* 
	gm_pcPicYuvP»d
;

74 
TComPicYuv
* 
	gm_pcPicYuvResi
;

75 
BoÞ
 
	gm_bRecÚ¡ruùed
;

76 
BoÞ
 
	gm_bN“dedFÜOuut
;

77 
UIÁ
 
	gm_uiCu¼SliûIdx
;

78 
BoÞ
 
	gm_bCheckLTMSB
;

80 
BoÞ
 
	gm_isTÝ
;

81 
BoÞ
 
	gm_isF›ld
;

83 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
TComD©aCU
*> > 
m_vSliûCUD©aLšk
;

85 
SEIMes§ges
 
	gm_SEIs
;

87 
	gpublic
:

88 
TComPic
();

89 
	gvœtu®
 ~
TComPic
();

91 #ià
REDUCED_ENCODER_MEMORY


92 
Void
 
ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, cÚ¡ 
BoÞ
 
bC»©eEncod”SourûPicYuv
, cÚ¡ BoÞ 
bC»©eFÜImmedŸ‹RecÚ¡ruùiÚ
 );

93 
Void
 
´•¬eFÜEncod”SourûPicYuv
();

94 
Void
 
´•¬eFÜRecÚ¡ruùiÚ
();

95 
Void
 
»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
();

96 
Void
 
»Ëa£AÎRecÚ¡ruùiÚD©a
();

97 
Void
 
»Ëa£Encod”SourûImageD©a
();

99 
Void
 
ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, cÚ¡ 
BoÞ
 
bIsVœtu®
 );

102 
vœtu®
 
Void
 
de¡roy
();

104 
UIÁ
 
	$g‘TLay”
(ècÚ¡ {  
m_uiTLay”
; 
	}
}

105 
Void
 
	$£tTLay”
Ð
UIÁ
 
uiTLay”
 ) { 
m_uiTLay”
 = uiTLay”; 
	}
}

107 
BoÞ
 
	$g‘U£dByCu¼
(ècÚ¡ {  
m_bU£dByCu¼
; 
	}
}

108 
Void
 
	$£tU£dByCu¼
Ð
BoÞ
 
bU£d
 ) { 
m_bU£dByCu¼
 = bU£d; 
	}
}

109 
BoÞ
 
	$g‘IsLÚgT”m
(ècÚ¡ {  
m_bIsLÚgT”m
; 
	}
}

110 
Void
 
	$£tIsLÚgT”m
Ð
BoÞ
 
É
 ) { 
m_bIsLÚgT”m
 =†t; 
	}
}

111 
Void
 
	$£tCheckLTMSBP»£Á
 (
BoÞ
 
b
 ) {
m_bCheckLTMSB
=b;
	}
}

112 
BoÞ
 
	$g‘CheckLTMSBP»£Á
 (è{  
m_bCheckLTMSB
;
	}
}

114 
TComPicSym
* 
	$g‘PicSym
(è{  &
m_picSym
; 
	}
}

115 cÚ¡ 
TComPicSym
* 
	$g‘PicSym
(ècÚ¡ {  &
m_picSym
; 
	}
}

116 
TComSliû
* 
	$g‘Sliû
(
IÁ
 
i
è{  
m_picSym
.
	`g‘Sliû
(i); 
	}
}

117 cÚ¡ 
TComSliû
* 
	$g‘Sliû
(
IÁ
 
i
ècÚ¡ {  
m_picSym
.
	`g‘Sliû
(i); 
	}
}

118 
IÁ
 
	$g‘POC
(ècÚ¡ {  
m_picSym
.
	`g‘Sliû
(
m_uiCu¼SliûIdx
)->
	`g‘POC
(); 
	}
}

119 
TComD©aCU
* 
	$g‘Ctu
Ð
UIÁ
 
ùuRsAddr
 ) {  
m_picSym
.
	`g‘Ctu
ÐùuRsAdd¸); 
	}
}

120 cÚ¡ 
TComD©aCU
* 
	$g‘Ctu
Ð
UIÁ
 
ùuRsAddr
 ) cÚ¡ {  
m_picSym
.
	`g‘Ctu
ÐùuRsAdd¸); 
	}
}

122 
TComPicYuv
* 
	$g‘PicYuvOrg
(è{  
m_­cPicYuv
[
PIC_YUV_ORG
]; 
	}
}

123 
TComPicYuv
* 
	$g‘PicYuvRec
(è{  
m_­cPicYuv
[
PIC_YUV_REC
]; 
	}
}

125 #ià
FGS_RDD5_ENABLE


126 
Void
 
ü—‹G¿šSyÁhesiz”
(
BoÞ
 
bFœ¡Piùu»InSequ’û
, 
SEIFžmG¿šSyÁhesiz”
* 
pG¿šCh¬aù”i¡ics
, 
TComPicYuv
* 
pG¿šBuf
, cÚ¡ 
TComSPS
* 
¥s
);

127 
SEIFžmG¿šSyÁhesiz”
 *
	gm_g¿šCh¬aù”i¡ic
;

128 
TComPicYuv
 *
	gm_g¿šBuf
;

129 
TComPicYuv
* 
g‘PicYuvDi¥
();

132 
TComPicYuv
* 
	$g‘PicYuvP»d
(è{  
m_pcPicYuvP»d
; 
	}
}

133 
TComPicYuv
* 
	$g‘PicYuvResi
(è{  
m_pcPicYuvResi
; 
	}
}

134 
Void
 
	$£tPicYuvP»d
Ð
TComPicYuv
* 
pcPicYuv
 ) { 
m_pcPicYuvP»d
 =…cPicYuv; 
	}
}

135 
Void
 
	$£tPicYuvResi
Ð
TComPicYuv
* 
pcPicYuv
 ) { 
m_pcPicYuvResi
 =…cPicYuv; 
	}
}

137 
UIÁ
 
	$g‘Numb”OfCtusInF¿me
(ècÚ¡ {  
m_picSym
.
	`g‘Numb”OfCtusInF¿me
(); 
	}
}

138 
UIÁ
 
	$g‘NumP¬tInCtuWidth
(ècÚ¡ {  
m_picSym
.
	`g‘NumP¬tInCtuWidth
(); 
	}
}

139 
UIÁ
 
	$g‘NumP¬tInCtuHeight
(ècÚ¡ {  
m_picSym
.
	`g‘NumP¬tInCtuHeight
(); 
	}
}

140 
UIÁ
 
	$g‘NumP¬t™iÚsInCtu
(ècÚ¡ {  
m_picSym
.
	`g‘NumP¬t™iÚsInCtu
(); 
	}
}

141 
UIÁ
 
	$g‘F¿meWidthInCtus
(ècÚ¡ {  
m_picSym
.
	`g‘F¿meWidthInCtus
(); 
	}
}

142 
UIÁ
 
	$g‘F¿meHeightInCtus
(ècÚ¡ {  
m_picSym
.
	`g‘F¿meHeightInCtus
(); 
	}
}

143 
UIÁ
 
	$g‘MšCUWidth
(ècÚ¡ {  
m_picSym
.
	`g‘MšCUWidth
(); 
	}
}

144 
UIÁ
 
	$g‘MšCUHeight
(ècÚ¡ {  
m_picSym
.
	`g‘MšCUHeight
(); 
	}
}

146 
IÁ
 
	$g‘SŒide
(cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_­cPicYuv
[
PIC_YUV_REC
]->
	`g‘SŒide
(id); 
	}
}

147 
IÁ
 
	$g‘CompÚ’tSÿËX
(cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_­cPicYuv
[
PIC_YUV_REC
]->
	`g‘CompÚ’tSÿËX
(id); 
	}
}

148 
IÁ
 
	$g‘CompÚ’tSÿËY
(cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_­cPicYuv
[
PIC_YUV_REC
]->
	`g‘CompÚ’tSÿËY
(id); 
	}
}

149 
ChromaFÜm©
 
	$g‘ChromaFÜm©
(ècÚ¡ {  
m_­cPicYuv
[
PIC_YUV_REC
]->
	`g‘ChromaFÜm©
(); 
	}
}

150 
IÁ
 
	$g‘Numb”V®idCompÚ’ts
(ècÚ¡ {  
m_­cPicYuv
[
PIC_YUV_REC
]->
	`g‘Numb”V®idCompÚ’ts
(); 
	}
}

152 
Void
 
	$£tRecÚM¬k
 (
BoÞ
 
b
è{ 
m_bRecÚ¡ruùed
 = b; 
	}
}

153 
BoÞ
 
	$g‘RecÚM¬k
 (ècÚ¡ {  
m_bRecÚ¡ruùed
; 
	}
}

154 
Void
 
	$£tOuutM¬k
 (
BoÞ
 
b
è{ 
m_bN“dedFÜOuut
 = b; 
	}
}

155 
BoÞ
 
	$g‘OuutM¬k
 (ècÚ¡ {  
m_bN“dedFÜOuut
; 
	}
}

157 
Void
 
com´essMÙiÚ
();

158 
UIÁ
 
	$g‘Cu¼SliûIdx
(ècÚ¡ {  
m_uiCu¼SliûIdx
; 
	}
}

159 
Void
 
	$£tCu¼SliûIdx
(
UIÁ
 
i
è{ 
m_uiCu¼SliûIdx
 = i; 
	}
}

160 
UIÁ
 
	$g‘NumAÎoÿ‹dSliû
(ècÚ¡ { 
m_picSym
.
	`g‘NumAÎoÿ‹dSliû
();
	}
}

161 
Void
 
	$®loÿ‹NewSliû
(è{
m_picSym
.
	`®loÿ‹NewSliû
(); 
	}
}

162 
Void
 
	$þ—rSliûBufãr
(è{
m_picSym
.
	`þ—rSliûBufãr
(); 
	}
}

164 cÚ¡ 
	gWšdow
& 
	$g‘CÚfÜmªûWšdow
(ècÚ¡ {  
m_picSym
.
	`g‘SPS
().
	`g‘CÚfÜmªûWšdow
(); 
	}
}

165 
Wšdow
 
	$g‘DefDi¥ÏyWšdow
(ècÚ¡ {  
m_picSym
.
	`g‘SPS
().
	`g‘VuiP¬am‘”sP»£ÁFÏg
(è? m_picSym.g‘SPS().
	`g‘VuiP¬am‘”s
()->
	`g‘DeçuÉDi¥ÏyWšdow
(è: 
	`Wšdow
(); 
	}
}

167 
BoÞ
 
g‘SAOM”geAvažabž™y
(
IÁ
 
cu¼Addr
, IÁ 
m”geAddr
);

169 
UIÁ
 
g‘Sub¡»amFÜCtuAddr
(cÚ¡ UIÁ 
ùuAddr
, cÚ¡ 
BoÞ
 
bAdd»ssInRa¡”
, 
TComSliû
 *
pcSliû
);

173 
Void
 
	$£tTÝF›ld
(
BoÞ
 
b
è{
m_isTÝ
 = b;
	}
}

174 
BoÞ
 
	$isTÝF›ld
(è{ 
m_isTÝ
;
	}
}

175 
Void
 
	$£tF›ld
(
BoÞ
 
b
è{
m_isF›ld
 = b;
	}
}

176 
BoÞ
 
	$isF›ld
(ècÚ¡ { 
m_isF›ld
;
	}
}

179 
Void
 
	$£tSEIs
(
SEIMes§ges
& 
£is
è{ 
m_SEIs
 = seis; 
	}
}

184 
	gSEIMes§ges
& 
	$g‘SEIs
(è{  
m_SEIs
; 
	}
}

189 cÚ¡ 
	gSEIMes§ges
& 
	$g‘SEIs
(ècÚ¡ {  
m_SEIs
; 
	}
}

	@source/Lib/TLibCommon/TComPicSym.cpp

38 
	~"TComPicSym.h
"

39 
	~"TComSam¶eAd­tiveOff£t.h
"

40 
	~"TComSliû.h
"

49 
	gTComPicSym
::
	$TComPicSym
()

50 :
	`m_äameWidthInCtus
(0)

51 ,
	`m_äameHeightInCtus
(0)

52 ,
	`m_uiMšCUWidth
(0)

53 ,
	`m_uiMšCUHeight
(0)

54 ,
	`m_uhTÙ®D•th
(0)

55 ,
	`m_numP¬t™iÚsInCtu
(0)

56 ,
	`m_numP¬tInCtuWidth
(0)

57 ,
	`m_numP¬tInCtuHeight
(0)

58 ,
	`m_numCtusInF¿me
(0)

59 ,
	`m_­Sliûs
()

60 ,
	`m_piùu»CtuA¼ay
(
NULL
)

61 ,
	`m_numTžeCÞumnsMšus1
(0)

62 ,
	`m_numTžeRowsMšus1
(0)

63 ,
	`m_ùuTsToRsAddrM­
(
NULL
)

64 ,
	`m_puiTžeIdxM­
(
NULL
)

65 ,
	$m_ùuRsToTsAddrM­
(
NULL
)

66 #ià
REDUCED_ENCODER_MEMORY


67 ,
	$m_dpbP”CtuD©a
(
NULL
)

69 ,
	$m_§oBlkP¬ams
(
NULL
)

70 #ià
ADAPTIVE_QP_SELECTION


71 ,
	$m_pP¬’tARLBufãr
(
NULL
)

73 {
	}
}

76 
	gTComPicSym
::~
	$TComPicSym
()

78 
	`de¡roy
();

79 
	}
}

82 #ià
REDUCED_ENCODER_MEMORY


83 
Void
 
	gTComPicSym
::
	$ü—‹
 ( cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxD•th
, cÚ¡ 
BoÞ
 
bAÎoÿ‹CtuA¼ay
 )

85 
Void
 
TComPicSym
::
	$ü—‹
 ( cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxD•th
 )

88 
	`de¡roy
();

90 
m_¥s
 = 
¥s
;

91 
m_µs
 = 
µs
;

93 #ià!
REDUCED_ENCODER_MEMORY


94 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
¥s
.
	`g‘ChromaFÜm©Idc
();

96 cÚ¡ 
IÁ
 
iPicWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

97 cÚ¡ 
IÁ
 
iPicHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

98 cÚ¡ 
UIÁ
 
uiMaxCuWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

99 cÚ¡ 
UIÁ
 
uiMaxCuHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

101 
m_uhTÙ®D•th
 = 
uiMaxD•th
;

102 
m_numP¬t™iÚsInCtu
 = 1<<(
m_uhTÙ®D•th
<<1);

104 
m_uiMšCUWidth
 = 
uiMaxCuWidth
 >> 
m_uhTÙ®D•th
;

105 
m_uiMšCUHeight
 = 
uiMaxCuHeight
 >> 
m_uhTÙ®D•th
;

107 
m_numP¬tInCtuWidth
 = 
uiMaxCuWidth
 / 
m_uiMšCUWidth
;

108 
m_numP¬tInCtuHeight
 = 
uiMaxCuHeight
 / 
m_uiMšCUHeight
;

110 
m_äameWidthInCtus
 = ( 
iPicWidth
 %
uiMaxCuWidth
 ) ? iPicWidth /uiMaxCuWidth + 1 : iPicWidth /uiMaxCuWidth;

111 
m_äameHeightInCtus
 = ( 
iPicHeight
%
uiMaxCuHeight
 ) ? iPicHeight/uiMaxCuHeight + 1 : iPicHeight/uiMaxCuHeight;

113 
m_numCtusInF¿me
 = 
m_äameWidthInCtus
 * 
m_äameHeightInCtus
;

114 #ià
REDUCED_ENCODER_MEMORY


115 
m_piùu»CtuA¼ay
 = 
NULL
;

117 
m_piùu»CtuA¼ay
 = 
Ãw
 
TComD©aCU
*[
m_numCtusInF¿me
];

120 
	`þ—rSliûBufãr
();

121 
	`®loÿ‹NewSliû
();

123 #ià
ADAPTIVE_QP_SELECTION


124 ià(
m_pP¬’tARLBufãr
 =ð
NULL
)

126 
m_pP¬’tARLBufãr
 = 
Ãw
 
TCÛff
[
uiMaxCuWidth
*
uiMaxCuHeight
*
MAX_NUM_COMPONENT
];

130 #ià
REDUCED_ENCODER_MEMORY


131 ià(
bAÎoÿ‹CtuA¼ay
)

133 
	`´•¬eFÜRecÚ¡ruùiÚ
();

136 
UIÁ
 
i
=0; i<
m_numCtusInF¿me
 ; i++ )

138 
m_piùu»CtuA¼ay
[
i
] = 
Ãw
 
TComD©aCU
;

139 
m_piùu»CtuA¼ay
[
i
]->
	`ü—‹
Ð
chromaFÜm©IDC
, 
m_numP¬t™iÚsInCtu
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
çl£
, uiMaxCuWidth >> 
m_uhTÙ®D•th


140 #ià
ADAPTIVE_QP_SELECTION


141 , 
m_pP¬’tARLBufãr


147 
m_ùuTsToRsAddrM­
 = 
Ãw
 
UIÁ
[
m_numCtusInF¿me
+1];

148 
m_puiTžeIdxM­
 = 
Ãw
 
UIÁ
[
m_numCtusInF¿me
];

149 
m_ùuRsToTsAddrM­
 = 
Ãw
 
UIÁ
[
m_numCtusInF¿me
+1];

151 
UIÁ
 
i
=0; i<
m_numCtusInF¿me
; i++ )

153 
m_ùuTsToRsAddrM­
[
i
] = i;

154 
m_ùuRsToTsAddrM­
[
i
] = i;

157 
m_§oBlkP¬ams
 = 
Ãw
 
SAOBlkP¬am
[
m_numCtusInF¿me
];

160 
	`xIn™Tžes
();

161 
	`xIn™CtuTsRsAddrM­s
();

163 
	}
}

165 #ià
REDUCED_ENCODER_MEMORY


166 
Void
 
	gTComPicSym
::
	$´•¬eFÜRecÚ¡ruùiÚ
()

168 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 = 
m_¥s
.
	`g‘ChromaFÜm©Idc
();

169 cÚ¡ 
UIÁ
 
uiMaxCuWidth
 = 
m_¥s
.
	`g‘MaxCUWidth
();

170 cÚ¡ 
UIÁ
 
uiMaxCuHeight
 = 
m_¥s
.
	`g‘MaxCUHeight
();

171 ià(
m_piùu»CtuA¼ay
 =ð
NULL
)

173 
m_piùu»CtuA¼ay
 = 
Ãw
 
TComD©aCU
*[
m_numCtusInF¿me
];

175 
UIÁ
 
i
=0; i<
m_numCtusInF¿me
 ; i++ )

177 
m_piùu»CtuA¼ay
[
i
] = 
Ãw
 
TComD©aCU
;

178 
m_piùu»CtuA¼ay
[
i
]->
	`ü—‹
Ð
chromaFÜm©IDC
, 
m_numP¬t™iÚsInCtu
, 
uiMaxCuWidth
, 
uiMaxCuHeight
, 
çl£
, uiMaxCuWidth >> 
m_uhTÙ®D•th


179 #ià
ADAPTIVE_QP_SELECTION


180 , 
m_pP¬’tARLBufãr


185 ià(
m_dpbP”CtuD©a
 =ð
NULL
)

187 
m_dpbP”CtuD©a
 = 
Ãw
 
DPBP”CtuD©a
[
m_numCtusInF¿me
];

188 
UIÁ
 
i
=0; i<
m_numCtusInF¿me
; i++)

190 
IÁ
 
j
=0; j<
NUM_REF_PIC_LIST_01
; j++)

192 
m_dpbP”CtuD©a
[
i
].
m_CUMvF›ld
[
j
].
	`ü—‹
Ð
m_numP¬t™iÚsInCtu
 );

194 
m_dpbP”CtuD©a
[
i
].
m_³P»dMode
 = 
Ãw
 
SCh¬
[
m_numP¬t™iÚsInCtu
];

195 
	`mem£t
(
m_dpbP”CtuD©a
[
i
].
m_³P»dMode
, 
NUMBER_OF_PREDICTION_MODES
, 
m_numP¬t™iÚsInCtu
);

196 
m_dpbP”CtuD©a
[
i
].
m_³P¬tSize
 = 
Ãw
 
SCh¬
[
m_numP¬t™iÚsInCtu
];

197 
	`mem£t
(
m_dpbP”CtuD©a
[
i
].
m_³P¬tSize
, 
NUMBER_OF_PART_SIZES
, 
m_numP¬t™iÚsInCtu
);

198 
m_dpbP”CtuD©a
[
i
].
m_pSliû
=
NULL
;

201 
	}
}

203 
Void
 
	gTComPicSym
::
	$»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
()

205 ià(
m_piùu»CtuA¼ay
)

207 
IÁ
 
i
 = 0; i < 
m_numCtusInF¿me
; i++)

209 ià(
m_piùu»CtuA¼ay
[
i
])

211 
m_piùu»CtuA¼ay
[
i
]->
	`de¡roy
();

212 
d–‘e
 
m_piùu»CtuA¼ay
[
i
];

213 
m_piùu»CtuA¼ay
[
i
] = 
NULL
;

216 
d–‘e
 [] 
m_piùu»CtuA¼ay
;

217 
m_piùu»CtuA¼ay
 = 
NULL
;

219 
	}
}

221 
Void
 
	gTComPicSym
::
	$»Ëa£AÎRecÚ¡ruùiÚD©a
()

223 
	`»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
();

225 ià(
m_dpbP”CtuD©a
 !ð
NULL
)

227 
UIÁ
 
i
=0; i<
m_numCtusInF¿me
; i++)

229 
IÁ
 
j
=0; j<
NUM_REF_PIC_LIST_01
; j++)

231 
m_dpbP”CtuD©a
[
i
].
m_CUMvF›ld
[
j
].
	`de¡roy
();

233 
d–‘e
 [] 
m_dpbP”CtuD©a
[
i
].
m_³P»dMode
;

234 
d–‘e
 [] 
m_dpbP”CtuD©a
[
i
].
m_³P¬tSize
;

236 
d–‘e
 [] 
m_dpbP”CtuD©a
;

237 
m_dpbP”CtuD©a
=
NULL
;

239 
	}
}

242 
Void
 
	gTComPicSym
::
	$de¡roy
()

244 
	`þ—rSliûBufãr
();

246 #ià
REDUCED_ENCODER_MEMORY


247 
	`»Ëa£AÎRecÚ¡ruùiÚD©a
();

249 ià(
m_piùu»CtuA¼ay
)

251 
IÁ
 
i
 = 0; i < 
m_numCtusInF¿me
; i++)

253 ià(
m_piùu»CtuA¼ay
[
i
])

255 
m_piùu»CtuA¼ay
[
i
]->
	`de¡roy
();

256 
d–‘e
 
m_piùu»CtuA¼ay
[
i
];

257 
m_piùu»CtuA¼ay
[
i
] = 
NULL
;

260 
d–‘e
 [] 
m_piùu»CtuA¼ay
;

261 
m_piùu»CtuA¼ay
 = 
NULL
;

265 
d–‘e
 [] 
m_ùuTsToRsAddrM­
;

266 
m_ùuTsToRsAddrM­
 = 
NULL
;

268 
d–‘e
 [] 
m_puiTžeIdxM­
;

269 
m_puiTžeIdxM­
 = 
NULL
;

271 
d–‘e
 [] 
m_ùuRsToTsAddrM­
;

272 
m_ùuRsToTsAddrM­
 = 
NULL
;

274 if(
m_§oBlkP¬ams
)

276 
d–‘e
[] 
m_§oBlkP¬ams
; m_§oBlkP¬am ð
NULL
;

279 #ià
ADAPTIVE_QP_SELECTION


280 
d–‘e
 [] 
m_pP¬’tARLBufãr
;

281 
m_pP¬’tARLBufãr
 = 
NULL
;

283 
	}
}

285 
Void
 
	gTComPicSym
::
	$®loÿ‹NewSliû
()

287 
m_­Sliûs
.
	`push_back
(
Ãw
 
TComSliû
);

288 
m_­Sliûs
.
	`back
()->
	`£tPPS
(&
m_µs
);

289 
m_­Sliûs
.
	`back
()->
	`£tSPS
(&
m_¥s
);

290 ià(
m_­Sliûs
.
	`size
()>=2)

292 
m_­Sliûs
.
	`back
()->
	`cÝySliûInfo
Ðm_­Sliûs[m_­Sliûs.
	`size
()-2] );

293 
m_­Sliûs
.
	`back
()->
	`š™Sliû
();

295 
	}
}

297 
Void
 
	gTComPicSym
::
	$þ—rSliûBufãr
()

299 
UIÁ
 
i
 = 0; i < 
	`UIÁ
(
m_­Sliûs
.
	`size
()); i++)

301 
d–‘e
 
m_­Sliûs
[
i
];

303 
m_­Sliûs
.
	`þ—r
();

304 
	}
}

306 
Void
 
	gTComPicSym
::
	$xIn™CtuTsRsAddrM­s
()

309 
IÁ
 
ùuTsAddr
=0, 
ùuRsAddr
=0; ctuTsAddr<
	`g‘Numb”OfCtusInF¿me
(); ctuTsAddr++, ctuRsAdd¸ð
	`xC®cuÏ‹NextCtuRSAddr
(ctuRsAddr))

311 
	`£tCtuTsToRsAddrM­
(
ùuTsAddr
, 
ùuRsAddr
);

312 
	`£tCtuRsToTsAddrM­
(
ùuRsAddr
, 
ùuTsAddr
);

314 
	`£tCtuTsToRsAddrM­
(
	`g‘Numb”OfCtusInF¿me
(), getNumberOfCtusInFrame());

315 
	`£tCtuRsToTsAddrM­
(
	`g‘Numb”OfCtusInF¿me
(), getNumberOfCtusInFrame());

316 
	}
}

318 
Void
 
	gTComPicSym
::
	$xIn™Tžes
()

321 
	`£tNumTžeCÞumnsMšus1
Ð
m_µs
.
	`g‘NumTžeCÞumnsMšus1
() );

322 
	`£tNumTžeRowsMšus1
Ð
m_µs
.
	`g‘NumTžeRowsMšus1
() );

324 cÚ¡ 
IÁ
 
numCÞs
 = 
m_µs
.
	`g‘NumTžeCÞumnsMšus1
() + 1;

325 cÚ¡ 
IÁ
 
numRows
 = 
m_µs
.
	`g‘NumTžeRowsMšus1
() + 1;

326 cÚ¡ 
IÁ
 
numTžes
 = 
numRows
 * 
numCÞs
;

329 
m_tžeP¬am‘”s
.
	`»size
(
numTžes
);

331 ifÐ
m_µs
.
	`g‘TžeUnifÜmS·cšgFÏg
() )

334 
IÁ
 
row
=0;„ow < 
numRows
;„ow++)

336 
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++)

338 cÚ¡ 
IÁ
 
tžeIdx
 = 
row
 * 
numCÞs
 + 
cÞ
;

339 
m_tžeP¬am‘”s
[
tžeIdx
].
	`£tTžeWidthInCtus
Ð(
cÞ
+1)*
	`g‘F¿meWidthInCtus
Ð)/
numCÞs
 - (col*getFrameWidthInCtus( ))/numCols );

340 
m_tžeP¬am‘”s
[
tžeIdx
].
	`£tTžeHeightInCtus
Ð(
row
+1)*
	`g‘F¿meHeightInCtus
()/
numRows
 - (row*getFrameHeightInCtus())/numRows );

347 
IÁ
 
row
=0;„ow < 
numRows
;„ow++)

349 
IÁ
 
cumuÏtiveTžeWidth
 = 0;

350 
IÁ
 
cÞ
=0; cÞ < 
	`g‘NumTžeCÞumnsMšus1
(); col++)

352 
m_tžeP¬am‘”s
[
row
 * 
numCÞs
 + 
cÞ
].
	`£tTžeWidthInCtus
Ð
m_µs
.
	`g‘TžeCÞumnWidth
(col) );

353 
cumuÏtiveTžeWidth
 +ð
m_µs
.
	`g‘TžeCÞumnWidth
(
cÞ
);

355 
m_tžeP¬am‘”s
[
row
 * 
numCÞs
 + 
	`g‘NumTžeCÞumnsMšus1
()].
	`£tTžeWidthInCtus
Ð
	`g‘F¿meWidthInCtus
()-
cumuÏtiveTžeWidth
 );

359 
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++)

361 
IÁ
 
cumuÏtiveTžeHeight
 = 0;

362 
IÁ
 
row
=0;„ow < 
	`g‘NumTžeRowsMšus1
();„ow++)

364 
m_tžeP¬am‘”s
[
row
 * 
numCÞs
 + 
cÞ
].
	`£tTžeHeightInCtus
Ð
m_µs
.
	`g‘TžeRowHeight
(row) );

365 
cumuÏtiveTžeHeight
 +ð
m_µs
.
	`g‘TžeRowHeight
(
row
);

367 
m_tžeP¬am‘”s
[
	`g‘NumTžeRowsMšus1
(è* 
numCÞs
 + 
cÞ
].
	`£tTžeHeightInCtus
Ð
	`g‘F¿meHeightInCtus
()-
cumuÏtiveTžeHeight
 );

372 
IÁ
 
mšWidth
 = 1;

373 
IÁ
 
mšHeight
 = 1;

374 cÚ¡ 
IÁ
 
´ofžeIdc
 = 
m_¥s
.
	`g‘PTL
()->
	`g‘G’”®PTL
()->
	`g‘ProfžeIdc
();

375 iàÐ
´ofžeIdc
 =ð
Profže
::
MAIN
 ||…rofžeIdø=ðProfže::
MAIN10
)

377 ià(
m_µs
.
	`g‘TžesEÇbËdFÏg
())

379 
mšHeight
 = 64 / 
m_¥s
.
	`g‘MaxCUHeight
();

380 
mšWidth
 = 256 / 
m_¥s
.
	`g‘MaxCUWidth
();

383 
IÁ
 
row
=0;„ow < 
numRows
;„ow++)

385 
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++)

387 cÚ¡ 
IÁ
 
tžeIdx
 = 
row
 * 
numCÞs
 + 
cÞ
;

388 
	`as£¹
 (
m_tžeP¬am‘”s
[
tžeIdx
].
	`g‘TžeWidthInCtus
(è>ð
mšWidth
);

389 
	`as£¹
 (
m_tžeP¬am‘”s
[
tžeIdx
].
	`g‘TžeHeightInCtus
(è>ð
mšHeight
);

394  
IÁ
 
row
=0;„ow < 
numRows
;„ow++ )

396  
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++ )

398 cÚ¡ 
IÁ
 
tžeIdx
 = 
row
 * 
numCÞs
 + 
cÞ
;

401 
IÁ
 
rightEdgePosInCTU
 = 0;

402  
IÁ
 
i
=0; i <ð
cÞ
; i++ )

404 
rightEdgePosInCTU
 +ð
m_tžeP¬am‘”s
[
row
 * 
numCÞs
 + 
i
].
	`g‘TžeWidthInCtus
();

406 
m_tžeP¬am‘”s
[
tžeIdx
].
	`£tRightEdgePosInCtus
(
rightEdgePosInCTU
-1);

409 
IÁ
 
bÙtomEdgePosInCTU
 = 0;

410  
IÁ
 
i
=0; i <ð
row
; i++ )

412 
bÙtomEdgePosInCTU
 +ð
m_tžeP¬am‘”s
[
i
 * 
numCÞs
 + 
cÞ
].
	`g‘TžeHeightInCtus
();

414 
m_tžeP¬am‘”s
[
tžeIdx
].
	`£tBÙtomEdgePosInCtus
(
bÙtomEdgePosInCTU
-1);

417 
m_tžeP¬am‘”s
[
tžeIdx
].
	`£tFœ¡CtuRsAddr
Ð(m_tžeP¬am‘”s[tžeIdx].
	`g‘BÙtomEdgePosInCtus
(è- m_tžeP¬am‘”s[tžeIdx].
	`g‘TžeHeightInCtus
(è+ 1è* 
	`g‘F¿meWidthInCtus
() +

418 
m_tžeP¬am‘”s
[
tžeIdx
].
	`g‘RightEdgePosInCtus
(è- m_tžeP¬am‘”s[tžeIdx].
	`g‘TžeWidthInCtus
() + 1);

422 
IÁ
 
cÞumnIdx
 = 0;

423 
IÁ
 
rowIdx
 = 0;

426  
IÁ
 
i
=0; i<
m_numCtusInF¿me
; i++)

428  
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++)

430 if(
i
 % 
	`g‘F¿meWidthInCtus
(è<ð
m_tžeP¬am‘”s
[
cÞ
].
	`g‘RightEdgePosInCtus
())

432 
cÞumnIdx
 = 
cÞ
;

436 
IÁ
 
row
=0;„ow < 
numRows
;„ow++)

438 if(
i
 / 
	`g‘F¿meWidthInCtus
(è<ð
m_tžeP¬am‘”s
[
row
*
numCÞs
].
	`g‘BÙtomEdgePosInCtus
())

440 
rowIdx
 = 
row
;

444 
m_puiTžeIdxM­
[
i
] = 
rowIdx
 * 
numCÞs
 + 
cÞumnIdx
;

446 
	}
}

447 
UIÁ
 
	gTComPicSym
::
	$xC®cuÏ‹NextCtuRSAddr
Ð
UIÁ
 
cu¼CtuRsAddr
 )

449 
UIÁ
 
ÃxtCtuRsAddr
;

452 cÚ¡ 
UIÁ
 
uiTžeIdx
 = 
	`g‘TžeIdxM­
(
cu¼CtuRsAddr
);

455 ifÐ
cu¼CtuRsAddr
 % 
m_äameWidthInCtus
 =ð
	`g‘TComTže
(
uiTžeIdx
)->
	`g‘RightEdgePosInCtus
(è&& cu¼CtuRsAdd¸/ m_äameWidthInCtu =ðg‘TComTže(uiTžeIdx)->
	`g‘BÙtomEdgePosInCtus
() )

458 if(
uiTžeIdx
+1 =ð
	`g‘NumTžes
())

460 
ÃxtCtuRsAddr
 = 
m_numCtusInF¿me
;

464 
ÃxtCtuRsAddr
 = 
	`g‘TComTže
(
uiTžeIdx
+1)->
	`g‘Fœ¡CtuRsAddr
();

469 ifÐ
cu¼CtuRsAddr
 % 
m_äameWidthInCtus
 =ð
	`g‘TComTže
(
uiTžeIdx
)->
	`g‘RightEdgePosInCtus
() )

471 
ÃxtCtuRsAddr
 = 
cu¼CtuRsAddr
 + 
m_äameWidthInCtus
 - 
	`g‘TComTže
(
uiTžeIdx
)->
	`g‘TžeWidthInCtus
() + 1;

475 
ÃxtCtuRsAddr
 = 
cu¼CtuRsAddr
 + 1;

479  
ÃxtCtuRsAddr
;

480 
	}
}

482 
Void
 
	gTComPicSym
::
	$d”iveLoÝFž‹rBound¬yAvažibž™y
(
IÁ
 
ùuRsAddr
,

483 
BoÞ
& 
isLeáAvaž
,

484 
BoÞ
& 
isRightAvaž
,

485 
BoÞ
& 
isAboveAvaž
,

486 
BoÞ
& 
isB–owAvaž
,

487 
BoÞ
& 
isAboveLeáAvaž
,

488 
BoÞ
& 
isAboveRightAvaž
,

489 
BoÞ
& 
isB–owLeáAvaž
,

490 
BoÞ
& 
isB–owRightAvaž


494 
isLeáAvaž
 = (
ùuRsAddr
 % 
m_äameWidthInCtus
 != 0);

495 
isRightAvaž
 = (
ùuRsAddr
 % 
m_äameWidthInCtus
 != m_frameWidthInCtus-1);

496 
isAboveAvaž
 = (
ùuRsAddr
 >ð
m_äameWidthInCtus
 );

497 
isB–owAvaž
 = (
ùuRsAddr
 < 
m_numCtusInF¿me
 - 
m_äameWidthInCtus
);

498 
isAboveLeáAvaž
 = (
isAboveAvaž
 && 
isLeáAvaž
);

499 
isAboveRightAvaž
ð(
isAboveAvaž
 && 
isRightAvaž
);

500 
isB–owLeáAvaž
 = (
isB–owAvaž
 && 
isLeáAvaž
);

501 
isB–owRightAvaž
ð(
isB–owAvaž
 && 
isRightAvaž
);

503 
BoÞ
 
isLoÝFžtAüossTžePPS
 = 
	`g‘Ctu
(
ùuRsAddr
)->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘LoÝFž‹rAüossTžesEÇbËdFÏg
();

506 
TComD©aCU
* 
ùuCu¼
 = 
	`g‘Ctu
(
ùuRsAddr
);

507 
TComD©aCU
* 
ùuLeá
 = 
isLeáAvaž
 ?
	`g‘Ctu
(
ùuRsAddr
-1):
NULL
;

508 
TComD©aCU
* 
ùuRight
 = 
isRightAvaž
?
	`g‘Ctu
(
ùuRsAddr
+1):
NULL
;

509 
TComD©aCU
* 
ùuAbove
 = 
isAboveAvaž
?
	`g‘Ctu
(
ùuRsAddr
-
m_äameWidthInCtus
):
NULL
;

510 
TComD©aCU
* 
ùuB–ow
 = 
isB–owAvaž
?
	`g‘Ctu
(
ùuRsAddr
+
m_äameWidthInCtus
):
NULL
;

511 
TComD©aCU
* 
ùuAboveLeá
 = 
isAboveLeáAvaž
 ? 
	`g‘Ctu
(
ùuRsAddr
-
m_äameWidthInCtus
-1):
NULL
;

512 
TComD©aCU
* 
ùuAboveRight
 = 
isAboveRightAvaž
? 
	`g‘Ctu
(
ùuRsAddr
-
m_äameWidthInCtus
+1):
NULL
;

513 
TComD©aCU
* 
ùuB–owLeá
 = 
isB–owLeáAvaž
 ? 
	`g‘Ctu
(
ùuRsAddr
+
m_äameWidthInCtus
-1):
NULL
;

514 
TComD©aCU
* 
ùuB–owRight
 = 
isB–owRightAvaž
? 
	`g‘Ctu
(
ùuRsAddr
+
m_äameWidthInCtus
+1):
NULL
;

518 if(
ùuLeá
 !ð
NULL
)

520 
isLeáAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuLeá
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuCu¼->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

523 if(
ùuAbove
 !ð
NULL
)

525 
isAboveAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuAbove
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuCu¼->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

528 if(
ùuRight
 !ð
NULL
)

530 
isRightAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuRight
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuRight->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

533 if(
ùuB–ow
 !ð
NULL
)

535 
isB–owAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuB–ow
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuB–ow->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

538 if(
ùuAboveLeá
 !ð
NULL
)

540 
isAboveLeáAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuAboveLeá
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuCu¼->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

543 if(
ùuB–owRight
 !ð
NULL
)

545 
isB–owRightAvaž
 = (
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
(è!ð
ùuB–owRight
->g‘Sliû()->g‘SliûCurS¹CtuTsAddr())?ùuB–owRight->g‘Sliû()->
	`g‘LFCrossSliûBound¬yFÏg
():
Œue
;

549 if(
ùuAboveRight
 !ð
NULL
)

551 
IÁ
 
curSliûS¹TsAddr
 = 
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
();

552 
IÁ
 
aboveRightSliûS¹TsAddr
 = 
ùuAboveRight
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
();

554 
isAboveRightAvaž
 = (
curSliûS¹TsAddr
 =ð
aboveRightSliûS¹TsAddr
)?(
Œue
):

556 (
curSliûS¹TsAddr
 > 
aboveRightSliûS¹TsAddr
)?(
ùuCu¼
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
())

557 :(
ùuAboveRight
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
())

561 if(
ùuB–owLeá
 !ð
NULL
)

563 
IÁ
 
curSliûS¹TsAddr
 = 
ùuCu¼
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
();

564 
IÁ
 
b–owLeáSliûS¹TsAddr
 = 
ùuB–owLeá
->
	`g‘Sliû
()->
	`g‘SliûCurS¹CtuTsAddr
();

566 
isB–owLeáAvaž
 = (
curSliûS¹TsAddr
 =ð
b–owLeáSliûS¹TsAddr
)?(
Œue
):

568 (
curSliûS¹TsAddr
 > 
b–owLeáSliûS¹TsAddr
)?(
ùuCu¼
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
())

569 :(
ùuB–owLeá
->
	`g‘Sliû
()->
	`g‘LFCrossSliûBound¬yFÏg
())

574 if(!
isLoÝFžtAüossTžePPS
)

576 
isLeáAvaž
 = (!isLeáAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuLeá
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

577 
isAboveAvaž
 = (!isAboveAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuAbove
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

578 
isRightAvaž
 = (!isRightAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuRight
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

579 
isB–owAvaž
 = (!isB–owAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuB–ow
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

580 
isAboveLeáAvaž
 = (!isAboveLeáAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuAboveLeá
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

581 
isAboveRightAvaž
ð(!isAboveRightAvažè?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuAboveRight
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

582 
isB–owLeáAvaž
 = (!isB–owLeáAvaž ) ?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuB–owLeá
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

583 
isB–owRightAvaž
ð(!isB–owRightAvažè?
çl£
:(
	`g‘TžeIdxM­
Ð
ùuB–owRight
->
	`g‘CtuRsAddr
(èè=ðg‘TžeIdxM­Ð
ùuRsAddr
 ));

587 
	}
}

590 
	gTComTže
::
	$TComTže
()

591 : 
	`m_tžeWidthInCtus
 (0)

592 , 
	`m_tžeHeightInCtus
 (0)

593 , 
	`m_rightEdgePosInCtus
 (0)

594 , 
	`m_bÙtomEdgePosInCtus
 (0)

595 , 
	$m_fœ¡CtuRsAddr
 (0)

597 
	}
}

599 
	gTComTže
::~
	$TComTže
()

601 
	}
}

603 #ià
MCTS_ENC_CHECK


605 
Void
 
	$g‘TžePos™iÚ
(cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
, 
UIÁ
 &
tžeXPosInCtus
, UIÁ &
tžeYPosInCtus
, UIÁ &
tžeWidthtInCtus
, UIÁ &
tžeHeightInCtus
)

607 cÚ¡ 
UIÁ
 
cu¼’tTžeIdx
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘TžeIdxM­
ÕcCU->
	`g‘CtuRsAddr
());

608 cÚ¡ 
TComTže
 *
pCu¼’tTže
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘TComTže
(
cu¼’tTžeIdx
);

609 cÚ¡ 
UIÁ
 
äameWidthInCtus
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘F¿meWidthInCtus
();

610 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘TComTže
ÕcCU->g‘Pic()->g‘PicSym()->
	`g‘TžeIdxM­
ÕcCU->
	`g‘CtuRsAddr
()))->
	`g‘Fœ¡CtuRsAddr
();

612 
tžeXPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 % 
äameWidthInCtus
;

613 
tžeYPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 / 
äameWidthInCtus
;

614 
tžeWidthtInCtus
 = 
pCu¼’tTže
->
	`g‘TžeWidthInCtus
();

615 
tžeHeightInCtus
 = 
pCu¼’tTže
->
	`g‘TžeHeightInCtus
();

616 
	}
}

	@source/Lib/TLibCommon/TComPicSym.h

38 #iâdeà
__TCOMPICSYM__


39 
	#__TCOMPICSYM__


	)

43 
	~<deque
>

44 
	~"CommÚDef.h
"

45 
	~"TComSliû.h
"

46 
	~"TComD©aCU.h
"

47 
þass
 
	gTComSam¶eAd­tiveOff£t
;

48 
þass
 
	gTComPPS
;

57 þas 
	cTComTže


59 
	m´iv©e
:

60 
UIÁ
 
m_tžeWidthInCtus
;

61 
UIÁ
 
	mm_tžeHeightInCtus
;

62 
UIÁ
 
	mm_rightEdgePosInCtus
;

63 
UIÁ
 
	mm_bÙtomEdgePosInCtus
;

64 
UIÁ
 
	mm_fœ¡CtuRsAddr
;

66 
	mpublic
:

67 
TComTže
();

68 
	mvœtu®
 ~
TComTže
();

70 
Void
 
	$£tTžeWidthInCtus
 ( 
UIÁ
 
i
 ) { 
m_tžeWidthInCtus
 = i; }

71 
UIÁ
 
	$g‘TžeWidthInCtus
 (ècÚ¡ {  
m_tžeWidthInCtus
; 
	}
}

72 
Void
 
	$£tTžeHeightInCtus
 ( 
UIÁ
 
i
 ) { 
m_tžeHeightInCtus
 = i; 
	}
}

73 
UIÁ
 
	$g‘TžeHeightInCtus
 (ècÚ¡ {  
m_tžeHeightInCtus
; 
	}
}

74 
Void
 
	$£tRightEdgePosInCtus
 ( 
UIÁ
 
i
 ) { 
m_rightEdgePosInCtus
 = i; 
	}
}

75 
UIÁ
 
	$g‘RightEdgePosInCtus
 (ècÚ¡ {  
m_rightEdgePosInCtus
; 
	}
}

76 
Void
 
	$£tBÙtomEdgePosInCtus
 ( 
UIÁ
 
i
 ) { 
m_bÙtomEdgePosInCtus
 = i; 
	}
}

77 
UIÁ
 
	$g‘BÙtomEdgePosInCtus
 (ècÚ¡ {  
m_bÙtomEdgePosInCtus
; 
	}
}

78 
Void
 
	$£tFœ¡CtuRsAddr
 ( 
UIÁ
 
i
 ) { 
m_fœ¡CtuRsAddr
 = i; 
	}
}

79 
UIÁ
 
	$g‘Fœ¡CtuRsAddr
 (ècÚ¡ {  
m_fœ¡CtuRsAddr
; 
	}
}

83 þas 
	cTComPicSym


85 
	m´iv©e
:

86 
UIÁ
 
m_äameWidthInCtus
;

87 
UIÁ
 
	mm_äameHeightInCtus
;

89 
UIÁ
 
	mm_uiMšCUWidth
;

90 
UIÁ
 
	mm_uiMšCUHeight
;

92 
UCh¬
 
	mm_uhTÙ®D•th
;

93 
UIÁ
 
	mm_numP¬t™iÚsInCtu
;

94 
UIÁ
 
	mm_numP¬tInCtuWidth
;

95 
UIÁ
 
	mm_numP¬tInCtuHeight
;

96 
UIÁ
 
	mm_numCtusInF¿me
;

98 
	m¡d
::
deque
<
TComSliû
*> 
m_­Sliûs
;

99 
TComD©aCU
** 
	mm_piùu»CtuA¼ay
;

101 
IÁ
 
	mm_numTžeCÞumnsMšus1
;

102 
IÁ
 
	mm_numTžeRowsMšus1
;

103 
	m¡d
::
veùÜ
<
TComTže
> 
m_tžeP¬am‘”s
;

104 
UIÁ
* 
	mm_ùuTsToRsAddrM­
;

105 
UIÁ
* 
	mm_puiTžeIdxM­
;

106 
UIÁ
* 
	mm_ùuRsToTsAddrM­
;

108 #ià
REDUCED_ENCODER_MEMORY


109 
	mpublic
:

110 #ià
MCTS_EXTRACTION


111 
ä›nd
 
þass
 
MùsExŒaùÜTComPicSym
;

113 
	sDPBP”CtuD©a


115 
BoÞ
 
isIÁ”
(cÚ¡ 
UIÁ
 
absP¬tAddr
ècÚ¡ {  
	mm_³P»dMode
[absP¬tAddr] =ð
MODE_INTER
; }

116 
P¬tSize
 
g‘P¬t™iÚSize
ÐcÚ¡ 
UIÁ
 
absP¬tAddr
 ) cÚ¡ {  
	m¡©ic_ÿ¡
<
	mP¬tSize
>Ð
	mm_³P¬tSize
[absPartAddr] ); }

117 cÚ¡ 
TComCUMvF›ld
* 
g‘CUMvF›ld
 ( 
RefPicLi¡
 
e
 ) cÚ¡ {  &
	mm_CUMvF›ld
[e]; }

118 cÚ¡ 
TComSliû
* 
g‘Sliû
(ècÚ¡ {  
	mm_pSliû
; }

120 
SCh¬
 * 
	mm_³P»dMode
;

121 
SCh¬
 * 
	mm_³P¬tSize
;

122 
TComCUMvF›ld
 
	mm_CUMvF›ld
[
NUM_REF_PIC_LIST_01
];

123 
TComSliû
 * 
	mm_pSliû
;

126 
	g´iv©e
:

127 
DPBP”CtuD©a
 *
m_dpbP”CtuD©a
;

129 
SAOBlkP¬am
 *
	gm_§oBlkP¬ams
;

130 #ià
ADAPTIVE_QP_SELECTION


131 
TCÛff
* 
	gm_pP¬’tARLBufãr
;

133 
TComSPS
 
	gm_¥s
;

134 
TComPPS
 
	gm_µs
;

136 
Void
 
xIn™Tžes
( );

137 
Void
 
xIn™CtuTsRsAddrM­s
();

138 
Void
 
	$£tNumTžeCÞumnsMšus1
Ð
IÁ
 
i
 ) { 
m_numTžeCÞumnsMšus1
 = i; 
	}
}

139 
Void
 
	$£tNumTžeRowsMšus1
Ð
IÁ
 
i
 ) { 
m_numTžeRowsMšus1
 = i; 
	}
}

140 
Void
 
	$£tCtuTsToRsAddrM­
Ð
IÁ
 
ùuTsAddr
, IÁ 
ùuRsAddr
 ) { *(
m_ùuTsToRsAddrM­
 + ctuTsAddrèðùuRsAddr; 
	}
}

141 
Void
 
	$£tCtuRsToTsAddrM­
Ð
IÁ
 
ùuRsAddr
, IÁ 
ùuTsOrd”
 ) { *(
m_ùuRsToTsAddrM­
 + ctuRsAddrèðùuTsOrd”; 
	}
}

143 
	gpublic
:

144 #ià
REDUCED_ENCODER_MEMORY


145 
Void
 
ü—‹
 ( cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxD•th
, cÚ¡ 
BoÞ
 
bAÎoÿ‹CtuA¼ay
 );

146 
Void
 
´•¬eFÜRecÚ¡ruùiÚ
();

147 
Void
 
»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
();

148 
Void
 
»Ëa£AÎRecÚ¡ruùiÚD©a
();

150 
Void
 
ü—‹
 ( cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxD•th
 );

152 
Void
 
de¡roy
 ();

154 
TComPicSym
 ();

155 ~
TComPicSym
();

157 
TComSliû
* 
	$g‘Sliû
(
UIÁ
 
i
è{  
m_­Sliûs
[i]; 
	}
}

158 cÚ¡ 
TComSliû
* 
	$g‘Sliû
(
UIÁ
 
i
ècÚ¡ {  
m_­Sliûs
[i]; 
	}
}

159 
UIÁ
 
	$g‘F¿meWidthInCtus
(ècÚ¡ {  
m_äameWidthInCtus
; 
	}
}

160 
UIÁ
 
	$g‘F¿meHeightInCtus
(ècÚ¡ {  
m_äameHeightInCtus
; 
	}
}

161 
UIÁ
 
	$g‘MšCUWidth
(ècÚ¡ {  
m_uiMšCUWidth
; 
	}
}

162 
UIÁ
 
	$g‘MšCUHeight
(ècÚ¡ {  
m_uiMšCUHeight
; 
	}
}

163 
UIÁ
 
	$g‘Numb”OfCtusInF¿me
(ècÚ¡ {  
m_numCtusInF¿me
; 
	}
}

164 
TComD©aCU
* 
	$g‘Ctu
Ð
UIÁ
 
ùuRsAddr
 ) {  
m_piùu»CtuA¼ay
[ùuRsAddr]; 
	}
}

165 cÚ¡ 
TComD©aCU
* 
	$g‘Ctu
Ð
UIÁ
 
ùuRsAddr
 ) cÚ¡ {  
m_piùu»CtuA¼ay
[ùuRsAddr]; 
	}
}

166 cÚ¡ 
	gTComSPS
& 
	$g‘SPS
(ècÚ¡ {  
m_¥s
; 
	}
}

167 cÚ¡ 
	gTComPPS
& 
	$g‘PPS
(ècÚ¡ {  
m_µs
; 
	}
}

168 #ià
REDUCED_ENCODER_MEMORY


169 
BoÞ
 
	$hasDPBP”CtuD©a
(ècÚ¡ {  (
m_dpbP”CtuD©a
!=0); 
	}
};

170 
	gDPBP”CtuD©a
& 
	$g‘DPBP”CtuD©a
(
UIÁ
 
ùuRsAddr
è{  
m_dpbP”CtuD©a
[ùuRsAddr]; 
	}
}

171 cÚ¡ 
	gDPBP”CtuD©a
& 
	$g‘DPBP”CtuD©a
(
UIÁ
 
ùuRsAddr
ècÚ¡ {  
m_dpbP”CtuD©a
[ùuRsAddr]; 
	}
}

174 
TComSliû
 * 
	$sw­SliûObjeù
(
TComSliû
* 
p
, 
UIÁ
 
i
è{…->
	`£tSPS
(&
m_¥s
);…->
	`£tPPS
(&
m_µs
); TComSliû *
pTmp
=
m_­Sliûs
[i];m_­Sliûs[i] =…;…Tmp->£tSPS(0);…Tmp->£tPPS(0); …Tmp; 
	}
}

175 
UIÁ
 
	$g‘NumAÎoÿ‹dSliû
(ècÚ¡ {  
	`UIÁ
(
m_­Sliûs
.
	`size
()); 
	}
}

176 
Void
 
®loÿ‹NewSliû
();

177 
Void
 
þ—rSliûBufãr
();

178 
UIÁ
 
	$g‘NumP¬t™iÚsInCtu
(ècÚ¡ {  
m_numP¬t™iÚsInCtu
; 
	}
}

179 
UIÁ
 
	$g‘NumP¬tInCtuWidth
(ècÚ¡ {  
m_numP¬tInCtuWidth
; 
	}
}

180 
UIÁ
 
	$g‘NumP¬tInCtuHeight
(ècÚ¡ {  
m_numP¬tInCtuHeight
; 
	}
}

181 
IÁ
 
	$g‘NumTžeCÞumnsMšus1
(ècÚ¡ {  
m_numTžeCÞumnsMšus1
; 
	}
}

182 
IÁ
 
	$g‘NumTžeRowsMšus1
(ècÚ¡ {  
m_numTžeRowsMšus1
; 
	}
}

183 
IÁ
 
	$g‘NumTžes
(ècÚ¡ {  (
m_numTžeRowsMšus1
+1)*(
m_numTžeCÞumnsMšus1
+1); 
	}
}

184 
TComTže
* 
	$g‘TComTže
 ( 
UIÁ
 
tžeIdx
 ) {  &(
m_tžeP¬am‘”s
[tžeIdx]); 
	}
}

185 cÚ¡ 
TComTže
* 
	$g‘TComTže
 ( 
UIÁ
 
tžeIdx
 ) cÚ¡ {  &(
m_tžeP¬am‘”s
[tžeIdx]); 
	}
}

186 
UIÁ
 
	$g‘CtuTsToRsAddrM­
Ð
IÁ
 
ùuTsAddr
 ) cÚ¡ {  *(
m_ùuTsToRsAddrM­
 + (ùuTsAddr>=
m_numCtusInF¿me
 ? m_numCtusInF¿m: ctuTsAddr)); 
	}
}

187 
UIÁ
 
	$g‘TžeIdxM­
Ð
IÁ
 
ùuRsAddr
 ) cÚ¡ {  *(
m_puiTžeIdxM­
 + ctuRsAddr); 
	}
}

188 
UIÁ
 
	$g‘CtuRsToTsAddrM­
Ð
IÁ
 
ùuRsAddr
 ) cÚ¡ {  *(
m_ùuRsToTsAddrM­
 + (ùuRsAddr>=
m_numCtusInF¿me
 ? m_numCtusInF¿m: ctuRsAddr)); 
	}
}

189 
SAOBlkP¬am
* 
	$g‘SAOBlkP¬am
(è{  
m_§oBlkP¬ams
;
	}
}

190 cÚ¡ 
SAOBlkP¬am
* 
	$g‘SAOBlkP¬am
(ècÚ¡ {  
m_§oBlkP¬ams
;
	}
}

191 
Void
 
d”iveLoÝFž‹rBound¬yAvažibž™y
(
IÁ
 
ùuRsAddr
,

192 
BoÞ
& 
isLeáAvaž
, BoÞ& 
isRightAvaž
, BoÞ& 
isAboveAvaž
, BoÞ& 
isB–owAvaž
,

193 
BoÞ
& 
isAboveLeáAvaž
, BoÞ& 
isAboveRightAvaž
, BoÞ& 
isB–owLeáAvaž
, BoÞ& 
isB–owRightAvaž
);

194 
	g´Ùeùed
:

195 
UIÁ
 
xC®cuÏ‹NextCtuRSAddr
ÐUIÁ 
uiCu¼CtuRSAddr
 );

200 #ià
MCTS_EXTRACTION


202 þas 
	cMùsExŒaùÜTComPicSym
 {

203 
	mpublic
:

204 
Void
 
	$£tNumb”OfCtusInF¿me
(
TComPicSym
 *
picsym
, 
UIÁ
 
numOfCtusInF¿me
è{…icsym->
m_numCtusInF¿me
 =‚umOfCtusInFrame; }

205 
	}
};

211 #ià
MCTS_ENC_CHECK


212 
Void
 
g‘TžePos™iÚ
(cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
, 
UIÁ
 &
tžeXPosInCtus
, UIÁ &
tžeYPosInCtus
, UIÁ &
tžeWidthtInCtus
, UIÁ &
tžeHeightInCtus
);

	@source/Lib/TLibCommon/TComPicYuv.cpp

38 
	~<c¡dlib
>

39 
	~<as£¹.h
>

40 
	~<memÜy.h
>

42 #ifdeà
__APPLE__


43 
	~<m®loc/m®loc.h
>

45 
	~<m®loc.h
>

48 
	~"TComPicYuv.h
"

49 
	~"Utž™›s/TVideoIOYuv.h
"

54 
	gTComPicYuv
::
	$TComPicYuv
()

56 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

58 
m_­iPicBuf
[
i
] = 
NULL
;

59 
m_piPicOrg
[
i
] = 
NULL
;

62 
UIÁ
 
i
=0; i<
MAX_NUM_CHANNEL_TYPE
; i++)

64 
m_ùuOff£tInBufãr
[
i
]=0;

65 
m_subCuOff£tInBufãr
[
i
]=0;

68 
m_bIsBÜd”Ex‹nded
 = 
çl£
;

69 
	}
}

74 
	gTComPicYuv
::~
	$TComPicYuv
()

76 
	`de¡roy
();

77 
	}
}

81 
Void
 
	gTComPicYuv
::
	$ü—‹W™houtCUInfo
 ( cÚ¡ 
IÁ
 
picWidth
,

82 cÚ¡ 
IÁ
 
picHeight
,

83 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
,

84 cÚ¡ 
BoÞ
 
bU£M¬gš
,

85 cÚ¡ 
UIÁ
 
maxCUWidth
,

86 cÚ¡ 
UIÁ
 
maxCUHeight
)

89 
	`de¡roy
();

91 
m_picWidth
 = 
picWidth
;

92 
m_picHeight
 = 
picHeight
;

93 
m_chromaFÜm©IDC
 = 
chromaFÜm©IDC
;

94 
m_m¬gšX
 = (
bU£M¬gš
?
maxCUWidth
:0) + 16;

95 
m_m¬gšY
 = (
bU£M¬gš
?
maxCUHeight
:0) + 16;

96 
m_bIsBÜd”Ex‹nded
 = 
çl£
;

99 
UIÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

101 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
comp
);

102 
m_­iPicBuf
[
comp
] = (
P–
*)
	`xM®loc
ÐP–, 
	`g‘SŒide
(
ch
è* 
	`g‘TÙ®Height
(ch));

103 
m_piPicOrg
[
comp
] = 
m_­iPicBuf
[comp] + (
m_m¬gšY
 >> 
	`g‘CompÚ’tSÿËY
(
ch
)è* 
	`g‘SŒide
(chè+ (
m_m¬gšX
 >> 
	`g‘CompÚ’tSÿËX
(ch));

106 
UIÁ
 
comp
=
	`g‘Numb”V®idCompÚ’ts
();comp<
MAX_NUM_COMPONENT
; comp++)

108 
m_­iPicBuf
[
comp
] = 
NULL
;

109 
m_piPicOrg
[
comp
] = 
NULL
;

112 
IÁ
 
chª
=0; chª<
MAX_NUM_CHANNEL_TYPE
; chan++)

114 
m_ùuOff£tInBufãr
[
chª
] = 
NULL
;

115 
m_subCuOff£tInBufãr
[
chª
] = 
NULL
;

117 
	}
}

121 
Void
 
	gTComPicYuv
::
	$ü—‹
 ( cÚ¡ 
IÁ
 
picWidth
,

122 cÚ¡ 
IÁ
 
picHeight
,

123 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
,

124 cÚ¡ 
UIÁ
 
maxCUWidth
,

125 cÚ¡ 
UIÁ
 
maxCUHeight
,

126 cÚ¡ 
UIÁ
 
maxCUD•th
,

127 cÚ¡ 
BoÞ
 
bU£M¬gš
)

130 
	`ü—‹W™houtCUInfo
(
picWidth
, 
picHeight
, 
chromaFÜm©IDC
, 
bU£M¬gš
, 
maxCUWidth
, 
maxCUHeight
);

133 cÚ¡ 
IÁ
 
numCuInWidth
 = 
m_picWidth
 / 
maxCUWidth
 + (m_picWidth % maxCUWidth != 0);

134 cÚ¡ 
IÁ
 
numCuInHeight
 = 
m_picHeight
 / 
maxCUHeight
 + (m_picHeight % maxCUHeight != 0);

135 
IÁ
 
chª
=0; chª<
MAX_NUM_CHANNEL_TYPE
; chan++)

137 cÚ¡ 
ChªÃlTy³
 
ch
ð
	`ChªÃlTy³
(
chª
);

138 cÚ¡ 
IÁ
 
ùuHeight
 = 
maxCUHeight
>>
	`g‘ChªÃlTy³SÿËY
(
ch
);

139 cÚ¡ 
IÁ
 
ùuWidth
 = 
maxCUWidth
>>
	`g‘ChªÃlTy³SÿËX
(
ch
);

140 cÚ¡ 
IÁ
 
¡ride
 = 
	`g‘SŒide
(
ch
);

142 
m_ùuOff£tInBufãr
[
chª
] = 
Ãw
 
IÁ
[
numCuInWidth
 * 
numCuInHeight
];

144 
IÁ
 
cuRow
 = 0; cuRow < 
numCuInHeight
; cuRow++)

146 
IÁ
 
cuCÞ
 = 0; cuCÞ < 
numCuInWidth
; cuCol++)

148 
m_ùuOff£tInBufãr
[
chª
][
cuRow
 * 
numCuInWidth
 + 
cuCÞ
] = 
¡ride
 * cuRow * 
ùuHeight
 + cuCÞ * 
ùuWidth
;

152 
m_subCuOff£tInBufãr
[
chª
] = 
Ãw
 
IÁ
[(
size_t
)1 << (2 * 
maxCUD•th
)];

154 cÚ¡ 
IÁ
 
numSubBlockP¬t™iÚs
=(1<<
maxCUD•th
);

155 cÚ¡ 
IÁ
 
mšSubBlockHeight
 =(
ùuHeight
 >> 
maxCUD•th
);

156 cÚ¡ 
IÁ
 
mšSubBlockWidth
 =(
ùuWidth
 >> 
maxCUD•th
);

158 
IÁ
 
buRow
 = 0; buRow < 
numSubBlockP¬t™iÚs
; buRow++)

160 
IÁ
 
buCÞ
 = 0; buCÞ < 
numSubBlockP¬t™iÚs
; buCol++)

162 
m_subCuOff£tInBufãr
[
chª
][(
buRow
 << 
maxCUD•th
è+ 
buCÞ
] = 
¡ride
 * buRow * 
mšSubBlockHeight
 + buCÞ * 
mšSubBlockWidth
;

166 
	}
}

168 
Void
 
	gTComPicYuv
::
	$de¡roy
()

170 
IÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

172 
m_piPicOrg
[
comp
] = 
NULL
;

174 ifÐ
m_­iPicBuf
[
comp
] )

176 
	`xF»e
Ð
m_­iPicBuf
[
comp
] );

177 
m_­iPicBuf
[
comp
] = 
NULL
;

181 
UIÁ
 
chª
=0; chª<
MAX_NUM_CHANNEL_TYPE
; chan++)

183 ià(
m_ùuOff£tInBufãr
[
chª
])

185 
d–‘e
[] 
m_ùuOff£tInBufãr
[
chª
];

186 
m_ùuOff£tInBufãr
[
chª
] = 
NULL
;

188 ià(
m_subCuOff£tInBufãr
[
chª
])

190 
d–‘e
[] 
m_subCuOff£tInBufãr
[
chª
];

191 
m_subCuOff£tInBufãr
[
chª
] = 
NULL
;

194 
	}
}

198 
Void
 
	gTComPicYuv
::
	$cÝyToPic
 (
TComPicYuv
* 
pcPicYuvD¡
) const

200 
	`as£¹
Ð
m_chromaFÜm©IDC
 =ð
pcPicYuvD¡
->
	`g‘ChromaFÜm©
() );

202 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

204 cÚ¡ 
CompÚ’tID
 
compId
=
	`CompÚ’tID
(
comp
);

205 cÚ¡ 
IÁ
 
width
 = 
	`g‘Width
(
compId
);

206 cÚ¡ 
IÁ
 
height
 = 
	`g‘Height
(
compId
);

207 cÚ¡ 
IÁ
 
¡rideSrc
 = 
	`g‘SŒide
(
compId
);

208 
	`as£¹
(
pcPicYuvD¡
->
	`g‘Width
(
compId
è=ð
width
);

209 
	`as£¹
(
pcPicYuvD¡
->
	`g‘Height
(
compId
è=ð
height
);

210 ià(
¡rideSrc
==
pcPicYuvD¡
->
	`g‘SŒide
(
compId
))

212 ::
	`memýy
 ( 
pcPicYuvD¡
->
	`g‘Buf
(
compId
), g‘Buf(compId), (
P–
)*
¡rideSrc
*
	`g‘TÙ®Height
(compId));

216 cÚ¡ 
P–
 *
pSrc
 = 
	`g‘Addr
(
compId
);

217 
P–
 *
pDe¡
 = 
pcPicYuvD¡
->
	`g‘Addr
(
compId
);

218 cÚ¡ 
UIÁ
 
¡rideDe¡
 = 
pcPicYuvD¡
->
	`g‘SŒide
(
compId
);

220 
IÁ
 
y
=0; y<
height
; y++, 
pSrc
+=
¡rideSrc
, 
pDe¡
+=
¡rideDe¡
)

222 ::
	`memýy
(
pDe¡
, 
pSrc
, 
width
*(
P–
));

226 
	}
}

229 
Void
 
	gTComPicYuv
::
	$ex‹ndPicBÜd”
 ()

231 iàÐ
m_bIsBÜd”Ex‹nded
 )

236 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

238 cÚ¡ 
CompÚ’tID
 
compId
=
	`CompÚ’tID
(
comp
);

239 
P–
 *
piTxt
=
	`g‘Addr
(
compId
);

240 cÚ¡ 
IÁ
 
¡ride
=
	`g‘SŒide
(
compId
);

241 cÚ¡ 
IÁ
 
width
=
	`g‘Width
(
compId
);

242 cÚ¡ 
IÁ
 
height
=
	`g‘Height
(
compId
);

243 cÚ¡ 
IÁ
 
m¬gšX
=
	`g‘M¬gšX
(
compId
);

244 cÚ¡ 
IÁ
 
m¬gšY
=
	`g‘M¬gšY
(
compId
);

246 
P–
* 
pi
 = 
piTxt
;

248 
IÁ
 
y
 = 0; y < 
height
; y++)

250 
IÁ
 
x
 = 0; x < 
m¬gšX
; x++ )

252 
pi
[ -
m¬gšX
 + 
x
 ] =…i[0];

253 
pi
[ 
width
 + 
x
 ] =…i[width-1];

255 
pi
 +ð
¡ride
;

259 
pi
 -ð(
¡ride
 + 
m¬gšX
);

261 
IÁ
 
y
 = 0; y < 
m¬gšY
; y++ )

263 ::
	`memýy
Ð
pi
 + (
y
+1)*
¡ride
,…i, (
P–
)*(
width
 + (
m¬gšX
<<1)) );

267 
pi
 -ð((
height
-1è* 
¡ride
);

269 
IÁ
 
y
 = 0; y < 
m¬gšY
; y++ )

271 ::
	`memýy
Ð
pi
 - (
y
+1)*
¡ride
,…i, (
P–
)*(
width
 + (
m¬gšX
<<1)) );

275 
m_bIsBÜd”Ex‹nded
 = 
Œue
;

276 
	}
}

281 
Void
 
	gTComPicYuv
::
	$dump
 (cÚ¡ 
¡d
::
¡ršg
 &
fžeName
, cÚ¡ 
B™D•ths
 &
b™D•ths
, cÚ¡ 
BoÞ
 
bAµ’d
, cÚ¡ BoÞ 
bFÜûTo8B™
) const

283 
FILE
 *
pFže
 = 
	`fÝ’
 (
fžeName
.
	`c_¡r
(), 
bAµ’d
?"ab":"wb");

285 
BoÞ
 
is16b™
=
çl£
;

286 
IÁ
 
comp
 = 0; com°< 
	`g‘Numb”V®idCompÚ’ts
(è&& !
bFÜûTo8B™
; comp++)

288 ià(
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
	`CompÚ’tID
(
comp
))]>8)

290 
is16b™
=
Œue
;

294 
IÁ
 
comp
 = 0; com°< 
	`g‘Numb”V®idCompÚ’ts
(); comp++)

296 cÚ¡ 
CompÚ’tID
 
compId
 = 
	`CompÚ’tID
(
comp
);

297 cÚ¡ 
P–
 *
pi
 = 
	`g‘Addr
(
compId
);

298 cÚ¡ 
IÁ
 
¡ride
 = 
	`g‘SŒide
(
compId
);

299 cÚ¡ 
IÁ
 
height
 = 
	`g‘Height
(
compId
);

300 cÚ¡ 
IÁ
 
width
 = 
	`g‘Width
(
compId
);

302 ià(
is16b™
)

304 
IÁ
 
y
 = 0; y < 
height
; y++ )

306 
IÁ
 
x
 = 0; x < 
width
; x++ )

308 
UCh¬
 
uc
 = (UCh¬)((
pi
[
x
]>>0) & 0xff);

309 
	`fwr™e
Ð&
uc
, (
UCh¬
), 1, 
pFže
 );

310 
uc
 = (
UCh¬
)((
pi
[
x
]>>8) & 0xff);

311 
	`fwr™e
Ð&
uc
, (
UCh¬
), 1, 
pFže
 );

313 
pi
 +ð
¡ride
;

318 cÚ¡ 
IÁ
 
shiá
 = 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compId
)] - 8;

319 cÚ¡ 
IÁ
 
off£t
 = (
shiá
>0)?(1<<(shift-1)):0;

320 
IÁ
 
y
 = 0; y < 
height
; y++ )

322 
IÁ
 
x
 = 0; x < 
width
; x++ )

324 
UCh¬
 
uc
 = (UCh¬)
Cl3
<
P–
>(0, 255, (
pi
[
x
]+
off£t
)>>
shiá
);

325 
	`fwr™e
Ð&
uc
, (
UCh¬
), 1, 
pFže
 );

327 
pi
 +ð
¡ride
;

332 
	`fþo£
(
pFže
);

333 
	}
}

	@source/Lib/TLibCommon/TComPicYuv.h

38 #iâdeà
__TCOMPICYUV__


39 
	#__TCOMPICYUV__


	)

41 
	~<¡dio.h
>

42 
	~"CommÚDef.h
"

43 
	~"TComRom.h
"

44 
	~"TComChromaFÜm©.h
"

45 
	~"SEI.h
"

55 þas 
	cTComPicYuv


57 
	m´iv©e
:

63 
P–
* 
m_­iPicBuf
[
MAX_NUM_COMPONENT
];

65 
P–
* 
	mm_piPicOrg
[
MAX_NUM_COMPONENT
];

71 
IÁ
 
	mm_picWidth
;

72 
IÁ
 
	mm_picHeight
;

73 
ChromaFÜm©
 
	mm_chromaFÜm©IDC
;

75 
IÁ
* 
	mm_ùuOff£tInBufãr
[
MAX_NUM_CHANNEL_TYPE
];

76 
IÁ
* 
	mm_subCuOff£tInBufãr
[
MAX_NUM_CHANNEL_TYPE
];

78 
IÁ
 
	mm_m¬gšX
;

79 
IÁ
 
	mm_m¬gšY
;

81 
BoÞ
 
	mm_bIsBÜd”Ex‹nded
;

83 
	mpublic
:

84 
TComPicYuv
 ();

85 
	mvœtu®
 ~
TComPicYuv
 ();

91 
Void
 
ü—‹
 (cÚ¡ 
IÁ
 
picWidth
,

92 cÚ¡ 
IÁ
 
picHeight
,

93 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
,

94 cÚ¡ 
UIÁ
 
maxCUWidth
,

95 cÚ¡ 
UIÁ
 
maxCUHeight
,

96 cÚ¡ 
UIÁ
 
maxCUD•th
,

97 cÚ¡ 
BoÞ
 
bU£M¬gš
);

99 
Void
 
ü—‹W™houtCUInfo
(cÚ¡ 
IÁ
 
picWidth
,

100 cÚ¡ 
IÁ
 
picHeight
,

101 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
,

102 cÚ¡ 
BoÞ
 
bU£M¬gš
=
çl£
,

103 cÚ¡ 
UIÁ
 
maxCUWidth
=0,

104 cÚ¡ 
UIÁ
 
maxCUHeight
=0);

106 
Void
 
de¡roy
 ();

116 
IÁ
 
	$g‘Width
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_picWidth
 >> 
	`g‘CompÚ’tSÿËX
(id); }

117 
IÁ
 
	$g‘Height
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_picHeight
 >> 
	`g‘CompÚ’tSÿËY
(id); 
	}
}

118 
ChromaFÜm©
 
	$g‘ChromaFÜm©
 (ècÚ¡ {  
m_chromaFÜm©IDC
; 
	}
}

119 
UIÁ
 
	$g‘Numb”V®idCompÚ’ts
(ècÚ¡ {  ::
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
); 
	}
}

121 
IÁ
 
	$g‘SŒide
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ((
m_picWidth
 ) + (
m_m¬gšX
 <<1)è>> 
	`g‘CompÚ’tSÿËX
(id); 
	}
}

122 
	g´iv©e
:

123 
IÁ
 
	$g‘SŒide
 (cÚ¡ 
ChªÃlTy³
 
id
ècÚ¡ {  ((
m_picWidth
 ) + (
m_m¬gšX
 <<1)è>> 
	`g‘ChªÃlTy³SÿËX
(id); 
	}
}

124 
	gpublic
:

125 
IÁ
 
	$g‘TÙ®Height
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ((
m_picHeight
 ) + (
m_m¬gšY
 <<1)è>> 
	`g‘CompÚ’tSÿËY
(id); 
	}
}

127 
IÁ
 
	$g‘M¬gšX
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_m¬gšX
 >> 
	`g‘CompÚ’tSÿËX
(id); 
	}
}

128 
IÁ
 
	$g‘M¬gšY
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_m¬gšY
 >> 
	`g‘CompÚ’tSÿËY
(id); 
	}
}

135 
P–
* 
	$g‘Buf
 (cÚ¡ 
CompÚ’tID
 
ch
è{  
m_­iPicBuf
[ch]; 
	}
}

136 cÚ¡ 
P–
* 
	$g‘Buf
 (cÚ¡ 
CompÚ’tID
 
ch
ècÚ¡ {  
m_­iPicBuf
[ch]; 
	}
}

139 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
è{  
m_piPicOrg
[ch]; 
	}
}

140 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
ècÚ¡ {  
m_piPicOrg
[ch]; 
	}
}

143 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
, cÚ¡ 
IÁ
 
ùuRSAddr
 ) {  
m_piPicOrg
[ch] + 
m_ùuOff£tInBufãr
[ch==0?0:1][ ctuRSAdd¸]; 
	}
}

144 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
, cÚ¡ 
IÁ
 
ùuRSAddr
 ) cÚ¡ {  
m_piPicOrg
[ch] + 
m_ùuOff£tInBufãr
[ch==0?0:1][ ctuRSAdd¸]; 
	}
}

145 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
, cÚ¡ 
IÁ
 
ùuRSAddr
, cÚ¡ IÁ 
uiAbsZÜd”Idx
 )

146 {  
m_piPicOrg
[
ch
] + 
m_ùuOff£tInBufãr
[ch==0?0:1][
ùuRSAddr
] + 
m_subCuOff£tInBufãr
[ch==0?0:1][
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
]]; 
	}
}

147 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
ch
, cÚ¡ 
IÁ
 
ùuRSAddr
, cÚ¡ IÁ 
uiAbsZÜd”Idx
 ) const

148 {  
m_piPicOrg
[
ch
] + 
m_ùuOff£tInBufãr
[ch==0?0:1][
ùuRSAddr
] + 
m_subCuOff£tInBufãr
[ch==0?0:1][
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
]]; 
	}
}

150 
UIÁ
 
	$g‘CompÚ’tSÿËX
(cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ::
	`g‘CompÚ’tSÿËX
(id, 
m_chromaFÜm©IDC
); 
	}
}

151 
UIÁ
 
	$g‘CompÚ’tSÿËY
(cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ::
	`g‘CompÚ’tSÿËY
(id, 
m_chromaFÜm©IDC
); 
	}
}

153 
UIÁ
 
	$g‘ChªÃlTy³SÿËX
(cÚ¡ 
ChªÃlTy³
 
id
ècÚ¡ {  ::
	`g‘ChªÃlTy³SÿËX
(id, 
m_chromaFÜm©IDC
); 
	}
}

154 
UIÁ
 
	$g‘ChªÃlTy³SÿËY
(cÚ¡ 
ChªÃlTy³
 
id
ècÚ¡ {  ::
	`g‘ChªÃlTy³SÿËY
(id, 
m_chromaFÜm©IDC
); 
	}
}

161 
Void
 
	$cÝyToPic
 ( 
TComPicYuv
* 
pcPicYuvD¡
 ) const ;

164 
Void
 
	`ex‹ndPicBÜd”
 ();

167 
Void
 
	$dump
 (cÚ¡ 
¡d
::
¡ršg
 &
fžeName
, cÚ¡ 
B™D•ths
 &
b™D•ths
, cÚ¡ 
BoÞ
 
bAµ’d
=
çl£
, cÚ¡ BoÞ 
bFÜûTo8B™
=false) const ;

170 
Void
 
	$£tBÜd”Ex‹nsiÚ
(
BoÞ
 
b
è{ 
m_bIsBÜd”Ex‹nded
 = b; 
	}
}

175 
UIÁ
 
ÿlcChecksum
(cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

176 
UIÁ
 
ÿlcCRC
 (cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

177 
UIÁ
 
ÿlcMD5
 (cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

178 
	g¡d
::
¡ršg
 
hashToSŒšg
(cÚ¡ 
TComPiùu»Hash
 &
dige¡
, 
IÁ
 
numCh¬
);

	@source/Lib/TLibCommon/TComPicYuvMD5.cpp

34 
	~"TComPicYuv.h
"

35 
	~"libmd5/MD5.h
"

44 
	g‹m¶©e
<
UIÁ
 
	gOUTPUT_BITDEPTH_DIV8
>

45 
Void
 
	$md5_block
(
MD5
& 
md5
, cÚ¡ 
P–
* 
¶ªe
, 
UIÁ
 
n
)

48 
UCh¬
 
buf
[64/
OUTPUT_BITDEPTH_DIV8
][OUTPUT_BITDEPTH_DIV8];

49 
UIÁ
 
i
 = 0; i < 
n
; i++)

51 
P–
 
³l
 = 
¶ªe
[
i
];

53 
UIÁ
 
d
 = 0; d < 
OUTPUT_BITDEPTH_DIV8
; d++)

55 
buf
[
i
][
d
] = 
³l
 >> (d*8);

58 
md5
.
	`upd©e
((
UCh¬
*)
buf
, 
n
 * 
OUTPUT_BITDEPTH_DIV8
);

59 
	}
}

65 
	g‹m¶©e
<
UIÁ
 
	gOUTPUT_BITDEPTH_DIV8
>

66 
Void
 
	$md5_¶ªe
(
MD5
& 
md5
, cÚ¡ 
P–
* 
¶ªe
, 
UIÁ
 
width
, UIÁ 
height
, UIÁ 
¡ride
)

70 
UIÁ
 
N
 = 32;

71 
UIÁ
 
width_modN
 = 
width
 % 
N
;

72 
UIÁ
 
width_Ëss_modN
 = 
width
 - 
width_modN
;

74 
UIÁ
 
y
 = 0; y < 
height
; y++)

78 
UIÁ
 
x
 = 0; x < 
width_Ëss_modN
; x +ð
N
)

80 
md5_block
<
OUTPUT_BITDEPTH_DIV8
>(
md5
, &
¶ªe
[
y
*
¡ride
 + 
x
], 
N
);

84 
md5_block
<
OUTPUT_BITDEPTH_DIV8
>(
md5
, &
¶ªe
[
y
*
¡ride
 + 
width_Ëss_modN
], 
width_modN
);

86 
	}
}

89 
UIÁ
 
	$compCRC
(
IÁ
 
b™d•th
, cÚ¡ 
P–
* 
¶ªe
, 
UIÁ
 
width
, UIÁ 
height
, UIÁ 
¡ride
, 
TComPiùu»Hash
 &
dige¡
)

91 
UIÁ
 
ücMsb
;

92 
UIÁ
 
b™V®
;

93 
UIÁ
 
ücV®
 = 0xffff;

94 
UIÁ
 
b™Idx
;

95 
UIÁ
 
y
 = 0; y < 
height
; y++)

97 
UIÁ
 
x
 = 0; x < 
width
; x++)

100 
b™Idx
=0; bitIdx<8; bitIdx++)

102 
ücMsb
 = (
ücV®
 >> 15) & 1;

103 
b™V®
 = (
¶ªe
[
y
*
¡ride
+
x
] >> (7 - 
b™Idx
)) & 1;

104 
ücV®
 = (((ücV® << 1è+ 
b™V®
è& 0xffffè^ (
ücMsb
 * 0x1021);

107 if(
b™d•th
 > 8)

109 
b™Idx
=0; bitIdx<8; bitIdx++)

111 
ücMsb
 = (
ücV®
 >> 15) & 1;

112 
b™V®
 = (
¶ªe
[
y
*
¡ride
+
x
] >> (15 - 
b™Idx
)) & 1;

113 
ücV®
 = (((ücV® << 1è+ 
b™V®
è& 0xffffè^ (
ücMsb
 * 0x1021);

118 
b™Idx
=0; bitIdx<16; bitIdx++)

120 
ücMsb
 = (
ücV®
 >> 15) & 1;

121 
ücV®
 = ((ücV® << 1è& 0xffffè^ (
ücMsb
 * 0x1021);

124 
dige¡
.
hash
.
	`push_back
((
ücV®
>>8) & 0xff);

125 
dige¡
.
hash
.
	`push_back
Ð
ücV®
 & 0xff);

127 
	}
}

129 
UIÁ
 
	$ÿlcCRC
(cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

131 
UIÁ
 
dige¡L’
=0;

132 
dige¡
.
hash
.
	`þ—r
();

133 
IÁ
 
chª
=0; chª<
pic
.
	`g‘Numb”V®idCompÚ’ts
(); chan++)

135 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
chª
);

136 
dige¡L’
=
	`compCRC
(
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)], 
pic
.
	`g‘Addr
(compID),…ic.
	`g‘Width
(compID),…ic.
	`g‘Height
(compID),…ic.
	`g‘SŒide
(compID), 
dige¡
);

138  
dige¡L’
;

139 
	}
}

141 
UIÁ
 
	$compChecksum
(
IÁ
 
b™d•th
, cÚ¡ 
P–
* 
¶ªe
, 
UIÁ
 
width
, UIÁ 
height
, UIÁ 
¡ride
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 & )

143 
UIÁ
 
checksum
 = 0;

144 
UCh¬
 
xÜ_mask
;

146 
UIÁ
 
y
 = 0; y < 
height
; y++)

148 
UIÁ
 
x
 = 0; x < 
width
; x++)

150 
xÜ_mask
 = (
x
 & 0xffè^ (
y
 & 0xff) ^ (x >> 8) ^ (y >> 8);

151 
checksum
 = (checksum + ((
¶ªe
[
y
*
¡ride
+
x
] & 0xffè^ 
xÜ_mask
)) & 0xffffffff;

153 if(
b™d•th
 > 8)

155 
checksum
 = (checksum + ((
¶ªe
[
y
*
¡ride
+
x
]>>8è^ 
xÜ_mask
)) & 0xffffffff;

160 
dige¡
.
hash
.
	`push_back
((
checksum
>>24) & 0xff);

161 
dige¡
.
hash
.
	`push_back
((
checksum
>>16) & 0xff);

162 
dige¡
.
hash
.
	`push_back
((
checksum
>>8) & 0xff);

163 
dige¡
.
hash
.
	`push_back
Ð
checksum
 & 0xff);

165 
	}
}

167 
UIÁ
 
	$ÿlcChecksum
(cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

169 
UIÁ
 
dige¡L’
=0;

170 
dige¡
.
hash
.
	`þ—r
();

171 
IÁ
 
chª
=0; chª<
pic
.
	`g‘Numb”V®idCompÚ’ts
(); chan++)

173 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
chª
);

174 
dige¡L’
=
	`compChecksum
(
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)], 
pic
.
	`g‘Addr
(compID),…ic.
	`g‘Width
(compID),…ic.
	`g‘Height
(compID),…ic.
	`g‘SŒide
(compID), 
dige¡
, bitDepths);

176  
dige¡L’
;

177 
	}
}

185 
UIÁ
 
	$ÿlcMD5
(cÚ¡ 
TComPicYuv
& 
pic
, 
TComPiùu»Hash
 &
dige¡
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

188 
	`Void
 (*
	tMD5PÏÃFunc
)(
	tMD5
&, cÚ¡ 
	tP–
*, 
	tUIÁ
, UInt, UInt);

189 
MD5PÏÃFunc
 
md5_¶ªe_func
;

191 
MD5
 
md5
[
MAX_NUM_COMPONENT
];

193 
dige¡
.
hash
.
	`þ—r
();

194 
IÁ
 
chª
=0; chª<
pic
.
	`g‘Numb”V®idCompÚ’ts
(); chan++)

196 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
chª
);

197 
md5_¶ªe_func
 = 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)] <ð8 ? (
MD5PÏÃFunc
)
md5_¶ªe
<1> : (MD5PlaneFunc)md5_plane<2>;

198 
UCh¬
 
tmp_dige¡
[
MD5_DIGEST_STRING_LENGTH
];

199 
	`md5_¶ªe_func
(
md5
[
compID
], 
pic
.
	`g‘Addr
(compID),…ic.
	`g‘Width
(compID),…ic.
	`g‘Height
(compID),…ic.
	`g‘SŒide
(compID));

200 
md5
[
compID
].
	`fš®ize
(
tmp_dige¡
);

201 
UIÁ
 
i
=0; i<
MD5_DIGEST_STRING_LENGTH
; i++)

203 
dige¡
.
hash
.
	`push_back
(
tmp_dige¡
[
i
]);

207 
	}
}

209 
	g¡d
::
¡ršg
 
	$hashToSŒšg
(cÚ¡ 
TComPiùu»Hash
 &
dige¡
, 
IÁ
 
numCh¬
)

211 cÚ¡ 
TCh¬
* 
hex
 = "0123456789abcdef";

212 
¡d
::
¡ršg
 
»suÉ
;

214 
IÁ
 
pos
=0;…os<
	`IÁ
(
dige¡
.
hash
.
	`size
());…os++)

216 ià((
pos
 % 
numCh¬
) == 0 &&…os!=0 )

218 
»suÉ
 += ',';

220 
»suÉ
 +ð
hex
[
dige¡
.
hash
[
pos
] >> 4];

221 
»suÉ
 +ð
hex
[
dige¡
.
hash
[
pos
] & 0xf];

224  
»suÉ
;

225 
	}
}

	@source/Lib/TLibCommon/TComPrediction.cpp

38 
	~<memÜy.h
>

39 
	~"TComP»diùiÚ.h
"

40 
	~"TComPic.h
"

41 
	~"TComTU.h
"

50 cÚ¡ 
UCh¬
 
	gTComP»diùiÚ
::
m_aucIÁ¿Fž‹r
[
MAX_NUM_CHANNEL_TYPE
][
MAX_INTRA_FILTER_DEPTHS
] =

73 
	gTComP»diùiÚ
::
	$TComP»diùiÚ
()

74 : 
	`m_pLumaRecBufãr
(0)

75 , 
	$m_iLumaRecSŒide
(0)

77 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

79 
UIÁ
 
buf
=0; buf<2; buf++)

81 
m_piYuvExt
[
ch
][
buf
] = 
NULL
;

84 
	}
}

86 
	gTComP»diùiÚ
::~
	$TComP»diùiÚ
()

88 
	`de¡roy
();

89 
	}
}

91 
Void
 
	gTComP»diùiÚ
::
	$de¡roy
()

93 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

95 
UIÁ
 
buf
=0; buf<
NUM_PRED_BUF
; buf++)

97 
d–‘e
 [] 
m_piYuvExt
[
ch
][
buf
];

98 
m_piYuvExt
[
ch
][
buf
] = 
NULL
;

102 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

104 
m_acYuvP»d
[
i
].
	`de¡roy
();

107 
m_cYuvP»dTemp
.
	`de¡roy
();

109 ifÐ
m_pLumaRecBufãr
 )

111 
d–‘e
 [] 
m_pLumaRecBufãr
;

112 
m_pLumaRecBufãr
 = 0;

114 
m_iLumaRecSŒide
 = 0;

116 
UIÁ
 
i
 = 0; i < 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
; i++)

118 
UIÁ
 
j
 = 0; j < 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
; j++)

120 
m_fž‹»dBlock
[
i
][
j
].
	`de¡roy
();

122 
m_fž‹»dBlockTmp
[
i
].
	`de¡roy
();

124 
	}
}

126 
Void
 
	gTComP»diùiÚ
::
	$š™TempBuff
(
ChromaFÜm©
 
chromaFÜm©IDC
)

129 ifÐ
m_piYuvExt
[
COMPONENT_Y
][
PRED_BUF_UNFILTERED
] !ð
NULL
 && 
m_cYuvP»dTemp
.
	`g‘ChromaFÜm©
()!=
chromaFÜm©IDC
)

131 
	`de¡roy
();

134 ifÐ
m_piYuvExt
[
COMPONENT_Y
][
PRED_BUF_UNFILTERED
] =ð
NULL
 )

136 
IÁ
 
extWidth
 = 
MAX_CU_SIZE
 + 16;

137 
IÁ
 
extHeight
 = 
MAX_CU_SIZE
 + 1;

139 
UIÁ
 
i
 = 0; i < 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
; i++)

141 
m_fž‹»dBlockTmp
[
i
].
	`ü—‹
(
extWidth
, 
extHeight
 + 7, 
chromaFÜm©IDC
);

142 
UIÁ
 
j
 = 0; j < 
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
; j++)

144 
m_fž‹»dBlock
[
i
][
j
].
	`ü—‹
(
extWidth
, 
extHeight
, 
chromaFÜm©IDC
);

148 
m_iYuvExtSize
 = (
MAX_CU_SIZE
*2+1) * (MAX_CU_SIZE*2+1);

149 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

151 
UIÁ
 
buf
=0; buf<
NUM_PRED_BUF
; buf++)

153 
m_piYuvExt
[
ch
][
buf
] = 
Ãw
 
P–
[ 
m_iYuvExtSize
 ];

158 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

160 
m_acYuvP»d
[
i
] .
	`ü—‹
Ð
MAX_CU_SIZE
, MAX_CU_SIZE, 
chromaFÜm©IDC
 );

163 
m_cYuvP»dTemp
.
	`ü—‹
Ð
MAX_CU_SIZE
, MAX_CU_SIZE, 
chromaFÜm©IDC
 );

167 ià(
m_iLumaRecSŒide
 !ð(
MAX_CU_SIZE
>>1) + 1)

169 
m_iLumaRecSŒide
 = (
MAX_CU_SIZE
>>1) + 1;

170 ià(!
m_pLumaRecBufãr
)

172 
m_pLumaRecBufãr
 = 
Ãw
 
P–
[ 
m_iLumaRecSŒide
 * m_iLumaRecStride ];

175 
	}
}

183 
P–
 
	gTComP»diùiÚ
::
	$´edIÁ¿G‘P»dV®DC
ÐcÚ¡ 
P–
* 
pSrc
, 
IÁ
 
iSrcSŒide
, 
UIÁ
 
iWidth
, UIÁ 
iHeight
)

185 
	`as£¹
(
iWidth
 > 0 && 
iHeight
 > 0);

186 
IÁ
 
iInd
, 
iSum
 = 0;

187 
P–
 
pDcV®
;

189 
iInd
 = 0;iInd < 
iWidth
;iInd++)

191 
iSum
 +ð
pSrc
[
iInd
-
iSrcSŒide
];

193 
iInd
 = 0;iInd < 
iHeight
;iInd++)

195 
iSum
 +ð
pSrc
[
iInd
*
iSrcSŒide
-1];

198 
pDcV®
 = (
iSum
 + 
iWidth
è/ (iWidth + 
iHeight
);

200  
pDcV®
;

201 
	}
}

229 
Void
 
	gTComP»diùiÚ
::
	$xP»dIÁ¿Ang
Ð
IÁ
 
b™D•th
,

230 cÚ¡ 
P–
* 
pSrc
, 
IÁ
 
¤cSŒide
,

231 
P–
* 
pTrueD¡
, 
IÁ
 
d¡SŒideTrue
,

232 
UIÁ
 
uiWidth
, UIÁ 
uiHeight
, 
ChªÃlTy³
 
chªÃlTy³
,

233 
UIÁ
 
dœMode
, cÚ¡ 
BoÞ
 
bEÇbËEdgeFž‹rs


236 
IÁ
 
width
=
	`IÁ
(
uiWidth
);

237 
IÁ
 
height
=
	`IÁ
(
uiHeight
);

240 
	`as£¹
Ð
dœMode
 !ð
PLANAR_IDX
 );

241 cÚ¡ 
BoÞ
 
modeDC
 = 
dœMode
==
DC_IDX
;

244 ià(
modeDC
)

246 cÚ¡ 
P–
 
dcv®
 = 
	`´edIÁ¿G‘P»dV®DC
(
pSrc
, 
¤cSŒide
, 
width
, 
height
);

248 
IÁ
 
y
=
height
;y>0;y--, 
pTrueD¡
+=
d¡SŒideTrue
)

250 
IÁ
 
x
=0; x<
width
;)

252 
pTrueD¡
[
x
++] = 
dcv®
;

258 cÚ¡ 
BoÞ
 
bIsModeV”
 = (
dœMode
 >= 18);

259 cÚ¡ 
IÁ
 
šŒaP»dAngËMode
 = (
bIsModeV”
è? (IÁ)
dœMode
 - 
VER_IDX
 : -((IÁ)dœMod- 
HOR_IDX
);

260 cÚ¡ 
IÁ
 
absAngMode
 = 
	`abs
(
šŒaP»dAngËMode
);

261 cÚ¡ 
IÁ
 
signAng
 = 
šŒaP»dAngËMode
 < 0 ? -1 : 1;

262 cÚ¡ 
BoÞ
 
edgeFž‹r
 = 
bEÇbËEdgeFž‹rs
 && 
	`isLuma
(
chªÃlTy³
è&& (
width
 <ð
MAXIMUM_INTRA_FILTERED_WIDTH
è&& (
height
 <ð
MAXIMUM_INTRA_FILTERED_HEIGHT
);

265 cÚ¡ 
IÁ
 
ªgTabË
[9] = {0, 2, 5, 9, 13, 17, 21, 26, 32};

266 cÚ¡ 
IÁ
 
švAngTabË
[9] = {0, 4096, 1638, 910, 630, 482, 390, 315, 256};

267 
IÁ
 
švAngË
 = 
švAngTabË
[
absAngMode
];

268 
IÁ
 
absAng
 = 
ªgTabË
[
absAngMode
];

269 
IÁ
 
šŒaP»dAngË
 = 
signAng
 * 
absAng
;

271 
P–
* 
»fMaš
;

272 
P–
* 
»fSide
;

274 
P–
 
»fAbove
[2*
MAX_CU_SIZE
+1];

275 
P–
 
»fLeá
[2*
MAX_CU_SIZE
+1];

278 ià(
šŒaP»dAngË
 < 0)

280 cÚ¡ 
IÁ
 
»fMašOff£tP»SÿË
 = (
bIsModeV”
 ? 
height
 : 
width
 ) - 1;

281 cÚ¡ 
IÁ
 
»fMašOff£t
 = 
height
 - 1;

282 
IÁ
 
x
=0;x<
width
+1;x++)

284 
»fAbove
[
x
+
»fMašOff£t
] = 
pSrc
[x-
¤cSŒide
-1];

286 
IÁ
 
y
=0;y<
height
+1;y++)

288 
»fLeá
[
y
+
»fMašOff£t
] = 
pSrc
[(y-1)*
¤cSŒide
-1];

290 
»fMaš
 = (
bIsModeV”
 ? 
»fAbove
 : 
»fLeá
è+ 
»fMašOff£t
;

291 
»fSide
 = (
bIsModeV”
 ? 
»fLeá
 : 
»fAbove
è+ 
»fMašOff£t
;

294 
IÁ
 
švAngËSum
 = 128;

295 
IÁ
 
k
=-1; k>(
»fMašOff£tP»SÿË
+1)*
šŒaP»dAngË
>>5; k--)

297 
švAngËSum
 +ð
švAngË
;

298 
»fMaš
[
k
] = 
»fSide
[
švAngËSum
>>8];

303 
IÁ
 
x
=0;x<2*
width
+1;x++)

305 
»fAbove
[
x
] = 
pSrc
[x-
¤cSŒide
-1];

307 
IÁ
 
y
=0;y<2*
height
+1;y++)

309 
»fLeá
[
y
] = 
pSrc
[(y-1)*
¤cSŒide
-1];

311 
»fMaš
 = 
bIsModeV”
 ? 
»fAbove
 : 
»fLeá
 ;

312 
»fSide
 = 
bIsModeV”
 ? 
»fLeá
 : 
»fAbove
;

316 
P–
 
‹mpA¼ay
[
MAX_CU_SIZE
*MAX_CU_SIZE];

317 cÚ¡ 
IÁ
 
d¡SŒide
 = 
bIsModeV”
 ? 
d¡SŒideTrue
 : 
MAX_CU_SIZE
;

318 
P–
 *
pD¡
 = 
bIsModeV”
 ? 
pTrueD¡
 : 
‹mpA¼ay
;

319 ià(!
bIsModeV”
)

321 
¡d
::
	`sw­
(
width
, 
height
);

324 ià(
šŒaP»dAngË
 == 0)

326 
IÁ
 
y
=0;y<
height
;y++)

328 
IÁ
 
x
=0;x<
width
;x++)

330 
pD¡
[
y
*
d¡SŒide
+
x
] = 
»fMaš
[x+1];

334 ià(
edgeFž‹r
)

336 
IÁ
 
y
=0;y<
height
;y++)

338 
pD¡
[
y
*
d¡SŒide
] = 
	`Cl3
 (0, ((1 << 
b™D•th
è- 1),…D¡[y*d¡SŒide] + (Ð
»fSide
[y+1] -„efSide[0] ) >> 1) );

344 
P–
 *
pD¡y
=
pD¡
;

346 
IÁ
 
y
=0, 
d–Pos
=
šŒaP»dAngË
; y<
height
; y++, d–Pos+=šŒaP»dAngË, 
pD¡y
+=
d¡SŒide
)

348 cÚ¡ 
IÁ
 
d–IÁ
 = 
d–Pos
 >> 5;

349 cÚ¡ 
IÁ
 
d–F¿ù
 = 
d–Pos
 & (32 - 1);

351 ià(
d–F¿ù
)

354 cÚ¡ 
P–
 *
pRM
=
»fMaš
+
d–IÁ
+1;

355 
IÁ
 
Ï¡RefMašP–
=*
pRM
++;

356 
IÁ
 
x
=0;x<
width
;
pRM
++,x++)

358 
IÁ
 
thisRefMašP–
=*
pRM
;

359 
pD¡y
[
x
+0] = (
P–
èÐ((32-
d–F¿ù
)*
Ï¡RefMašP–
 + d–F¿ù*
thisRefMašP–
 +16) >> 5 );

360 
Ï¡RefMašP–
=
thisRefMašP–
;

366 
IÁ
 
x
=0;x<
width
; x++)

368 
pD¡y
[
x
] = 
»fMaš
[x+
d–IÁ
+1];

375 ià(!
bIsModeV”
)

377 
IÁ
 
y
=0; y<
height
; y++)

379 
IÁ
 
x
=0; x<
width
; x++)

381 
pTrueD¡
[
x
*
d¡SŒideTrue
] = 
pD¡
[x];

383 
pTrueD¡
++;

384 
pD¡
+=
d¡SŒide
;

388 
	}
}

390 
Void
 
	gTComP»diùiÚ
::
	$´edIÁ¿Ang
ÐcÚ¡ 
CompÚ’tID
 
compID
, 
UIÁ
 
uiDœMode
, 
P–
* 
piOrg
 , UIÁ 
uiOrgSŒide
, P–* 
piP»d
, UIÁ 
uiSŒide
, 
TComTU
 &
rTu
, cÚ¡ 
BoÞ
 
bU£Fž‹»dP»dSam¶es
, cÚ¡ BoÞ 
bU£Los¦essDPCM
 )

392 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = 
	`toChªÃlTy³
(
compID
);

393 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
	`isLuma
(
compID
è? 
COMPONENT_Y
 : 
COMPONENT_Cb
);

394 cÚ¡ 
IÁ
 
iWidth
 = 
»ù
.
width
;

395 cÚ¡ 
IÁ
 
iHeight
 = 
»ù
.
height
;

397 
	`as£¹
Ð
g_aucCÚv”tToB™
[ 
iWidth
 ] >= 0 );

398 
	`as£¹
Ð
g_aucCÚv”tToB™
[ 
iWidth
 ] <= 5 );

401 
P–
 *
pD¡
 = 
piP»d
;

404 cÚ¡ 
IÁ
 
sw
 = (2 * 
iWidth
 + 1);

406 iàÐ
bU£Los¦essDPCM
 )

408 cÚ¡ 
P–
 *
±rSrc
 = 
	`g‘P»diùÜPŒ
Ð
compID
, 
çl£
 );

410 ià(
uiDœMode
==
HOR_IDX
)

414 
IÁ
 
y
=0; y<
iHeight
; y++)

416 
piP»d
[
y
*
uiSŒide
+0] = 
±rSrc
[(y+1)*
sw
];

418 ià(
piOrg
!=0)

420 
piP»d
+=1;

421 
IÁ
 
y
=0; y<
iHeight
; y++, 
piP»d
+=
uiSŒide
, 
piOrg
+=
uiOrgSŒide
)

423 
	`memýy
(
piP»d
, 
piOrg
, (
iWidth
-1)*(
P–
));

431 
IÁ
 
x
=0; x<
iWidth
; x++)

433 
piP»d
[
x
] = 
±rSrc
[x+1];

435 ià(
piOrg
!=0)

437 
piP»d
+=
uiSŒide
;

438 
IÁ
 
y
=1; y<
iHeight
; y++, 
piP»d
+=
uiSŒide
, 
piOrg
+=
uiOrgSŒide
)

440 
	`memýy
(
piP»d
, 
piOrg
, 
iWidth
*(
P–
));

447 cÚ¡ 
P–
 *
±rSrc
 = 
	`g‘P»diùÜPŒ
Ð
compID
, 
bU£Fž‹»dP»dSam¶es
 );

449 iàÐ
uiDœMode
 =ð
PLANAR_IDX
 )

451 
	`xP»dIÁ¿PÏÇr
Ð
±rSrc
+
sw
+1, sw, 
pD¡
, 
uiSŒide
, 
iWidth
, 
iHeight
 );

456 
TComD©aCU
 *cÚ¡ 
pcCU
 = 
rTu
.
	`g‘CU
();

457 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

458 cÚ¡ 
BoÞ
 
’abËEdgeFž‹rs
 = !(
pcCU
->
	`isRDPCMEÇbËd
(
uiAbsP¬tIdx
è&&…cCU->
	`g‘CUT¿nsquªtBy·ss
(uiAbsPartIdx));

459 #ià
O0043_BEST_EFFORT_DECODING


460 cÚ¡ 
IÁ
 
chªÃlsB™D•thFÜP»diùiÚ
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SŒ—mB™D•th
(
chªÃlTy³
);

462 cÚ¡ 
IÁ
 
chªÃlsB™D•thFÜP»diùiÚ
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
chªÃlTy³
);

464 
	`xP»dIÁ¿Ang
Ð
chªÃlsB™D•thFÜP»diùiÚ
, 
±rSrc
+
sw
+1, sw, 
pD¡
, 
uiSŒide
, 
iWidth
, 
iHeight
, 
chªÃlTy³
, 
uiDœMode
, 
’abËEdgeFž‹rs
 );

466 ifÐ
uiDœMode
 =ð
DC_IDX
 )

468 
	`xDCP»dFž‹ršg
Ð
±rSrc
+
sw
+1, sw, 
pD¡
, 
uiSŒide
, 
iWidth
, 
iHeight
, 
chªÃlTy³
 );

473 
	}
}

478 
BoÞ
 
	gTComP»diùiÚ
::
	$xCheckId’tiÿlMÙiÚ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
P¬tAddr
 )

480 ifÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ”B
(è&& !pcCU->g‘Sliû()->
	`g‘PPS
()->
	`g‘WPBiP»d
() )

482 ifÐ
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘RefIdx
(
P¬tAddr
è>ð0 &&…cCU->g‘CUMvF›ld(
REF_PIC_LIST_1
)->getRefIdx(PartAddr) >= 0)

484 
IÁ
 
RefPOCL0
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘RefPic
(
REF_PIC_LIST_0
,…cCU->
	`g‘CUMvF›ld
(REF_PIC_LIST_0)->
	`g‘RefIdx
(
P¬tAddr
))->
	`g‘POC
();

485 
IÁ
 
RefPOCL1
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘RefPic
(
REF_PIC_LIST_1
,…cCU->
	`g‘CUMvF›ld
(REF_PIC_LIST_1)->
	`g‘RefIdx
(
P¬tAddr
))->
	`g‘POC
();

486 if(
RefPOCL0
 =ð
RefPOCL1
 && 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘Mv
(
P¬tAddr
è=ðpcCU->g‘CUMvF›ld(
REF_PIC_LIST_1
)->getMv(PartAddr))

488  
Œue
;

492  
çl£
;

493 
	}
}

495 
Void
 
	gTComP»diùiÚ
::
	$mÙiÚCom³n§tiÚ
 ( 
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvP»d
, 
RefPicLi¡
 
eRefPicLi¡
, 
IÁ
 
iP¬tIdx
 )

497 
IÁ
 
iWidth
;

498 
IÁ
 
iHeight
;

499 
UIÁ
 
uiP¬tAddr
;

500 cÚ¡ 
TComSliû
 *
pSliû
 = 
pcCU
->
	`g‘Sliû
();

501 cÚ¡ 
SliûTy³
 
¦iûTy³
 = 
pSliû
->
	`g‘SliûTy³
();

502 cÚ¡ 
TComPPS
 &
µs
 = *(
pSliû
->
	`g‘PPS
());

504 iàÐ
iP¬tIdx
 >= 0 )

506 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iP¬tIdx
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
 );

507 iàÐ
eRefPicLi¡
 !ð
REF_PIC_LIST_X
 )

509 ifÐ(
¦iûTy³
 =ð
P_SLICE
 && 
µs
.
	`g‘U£WP
()è|| (¦iûTy³ =ð
B_SLICE
 &&…ps.
	`g‘WPBiP»d
()))

511 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcYuvP»d
, 
Œue
 );

512 
	`xWeigh‹dP»diùiÚUni
Ð
pcCU
, 
pcYuvP»d
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
,…cYuvPred );

516 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcYuvP»d
 );

521 iàÐ
	`xCheckId’tiÿlMÙiÚ
Ð
pcCU
, 
uiP¬tAddr
 ) )

523 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
REF_PIC_LIST_0
, 
pcYuvP»d
 );

527 
	`xP»dIÁ”Bi
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
pcYuvP»d
 );

533  
iP¬tIdx
 = 0; iP¬tIdx < 
pcCU
->
	`g‘NumP¬t™iÚs
(); iPartIdx++ )

535 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iP¬tIdx
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
 );

537 iàÐ
eRefPicLi¡
 !ð
REF_PIC_LIST_X
 )

539 ifÐ(
¦iûTy³
 =ð
P_SLICE
 && 
µs
.
	`g‘U£WP
()è|| (¦iûTy³ =ð
B_SLICE
 &&…ps.
	`g‘WPBiP»d
()))

541 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcYuvP»d
, 
Œue
 );

542 
	`xWeigh‹dP»diùiÚUni
Ð
pcCU
, 
pcYuvP»d
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
,…cYuvPred );

546 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcYuvP»d
 );

551 iàÐ
	`xCheckId’tiÿlMÙiÚ
Ð
pcCU
, 
uiP¬tAddr
 ) )

553 
	`xP»dIÁ”Uni
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
REF_PIC_LIST_0
, 
pcYuvP»d
 );

557 
	`xP»dIÁ”Bi
 (
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
pcYuvP»d
 );

562 
	}
}

564 
Void
 
	gTComP»diùiÚ
::
	$xP»dIÁ”Uni
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tAddr
, 
IÁ
 
iWidth
, IÁ 
iHeight
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComYuv
* 
pcYuvP»d
, 
BoÞ
 
bi
 )

566 
IÁ
 
iRefIdx
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`g‘RefIdx
Ð
uiP¬tAddr
 ); 
	`as£¹
 (iRefIdx >= 0);

567 
TComMv
 
cMv
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`g‘Mv
Ð
uiP¬tAddr
 );

568 
pcCU
->
	`þMv
(
cMv
);

570 
UIÁ
 
comp
=
COMPONENT_Y
; comp<
pcYuvP»d
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

572 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

573 
	`xP»dIÁ”Blk
 (
compID
, 
pcCU
,…cCU->
	`g‘Sliû
()->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdx
 )->
	`g‘PicYuvRec
(), 
uiP¬tAddr
, &
cMv
, 
iWidth
, 
iHeight
, 
pcYuvP»d
, 
bi
,…cCU->g‘Sliû()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(compID)) );

575 
	}
}

577 
Void
 
	gTComP»diùiÚ
::
	$xP»dIÁ”Bi
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tAddr
, 
IÁ
 
iWidth
, IÁ 
iHeight
, 
TComYuv
* 
pcYuvP»d
 )

579 
TComYuv
* 
pcMbYuv
;

580 
IÁ
 
iRefIdx
[
NUM_REF_PIC_LIST_01
] = {-1, -1};

582  
UIÁ
 
»fLi¡
 = 0;„efLi¡ < 
NUM_REF_PIC_LIST_01
;„efList++ )

584 
RefPicLi¡
 
eRefPicLi¡
 = (
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
);

585 
iRefIdx
[
»fLi¡
] = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`g‘RefIdx
Ð
uiP¬tAddr
 );

587 iàÐ
iRefIdx
[
»fLi¡
] < 0 )

592 
	`as£¹
Ð
iRefIdx
[
»fLi¡
] < 
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
) );

594 
pcMbYuv
 = &
m_acYuvP»d
[
»fLi¡
];

595 ifÐ
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_0
 )->
	`g‘RefIdx
Ð
uiP¬tAddr
 ) >ð0 &&…cCU->g‘CUMvF›ldÐ
REF_PIC_LIST_1
 )->getRefIdx( uiPartAddr ) >= 0 )

597 
	`xP»dIÁ”Uni
 ( 
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcMbYuv
, 
Œue
 );

601 iàÐÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£WP
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
(è=ð
P_SLICE
 ) ||

602 Ð
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘WPBiP»d
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
(è=ð
B_SLICE
 ) )

604 
	`xP»dIÁ”Uni
 ( 
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcMbYuv
, 
Œue
 );

608 
	`xP»dIÁ”Uni
 ( 
pcCU
, 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
eRefPicLi¡
, 
pcMbYuv
 );

613 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘WPBiP»d
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
(è=ð
B_SLICE
 )

615 
	`xWeigh‹dP»diùiÚBi
Ð
pcCU
, &
m_acYuvP»d
[
REF_PIC_LIST_0
], &m_acYuvP»d[
REF_PIC_LIST_1
], 
iRefIdx
[REF_PIC_LIST_0], iRefIdx[REF_PIC_LIST_1], 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
pcYuvP»d
 );

617 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£WP
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
(è=ð
P_SLICE
 )

619 
	`xWeigh‹dP»diùiÚUni
Ð
pcCU
, &
m_acYuvP»d
[
REF_PIC_LIST_0
], 
uiP¬tAddr
, 
iWidth
, 
iHeight
, REF_PIC_LIST_0, 
pcYuvP»d
 );

623 
	`xWeigh‹dAv”age
Ð&
m_acYuvP»d
[
REF_PIC_LIST_0
], &m_acYuvP»d[
REF_PIC_LIST_1
], 
iRefIdx
[REF_PIC_LIST_0], iRefIdx[REF_PIC_LIST_1], 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
pcYuvP»d
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
() );

625 
	}
}

643 
Void
 
	gTComP»diùiÚ
::
	$xP»dIÁ”Blk
(cÚ¡ 
CompÚ’tID
 
compID
, 
TComD©aCU
 *
cu
, 
TComPicYuv
 *
»fPic
, 
UIÁ
 
·¹Addr
, 
TComMv
 *
mv
, 
IÁ
 
width
, IÁ 
height
, 
TComYuv
 *
d¡Pic
, 
BoÞ
 
bi
, cÚ¡ IÁ 
b™D•th
 )

645 
IÁ
 
»fSŒide
 = 
»fPic
->
	`g‘SŒide
(
compID
);

646 
IÁ
 
d¡SŒide
 = 
d¡Pic
->
	`g‘SŒide
(
compID
);

647 
IÁ
 
shiáHÜ
=(2+
»fPic
->
	`g‘CompÚ’tSÿËX
(
compID
));

648 
IÁ
 
shiáV”
=(2+
»fPic
->
	`g‘CompÚ’tSÿËY
(
compID
));

650 
IÁ
 
»fOff£t
 = (
mv
->
	`g‘HÜ
(è>> 
shiáHÜ
è+ (mv->
	`g‘V”
(è>> 
shiáV”
è* 
»fSŒide
;

652 
P–
* 
»f
 = 
»fPic
->
	`g‘Addr
(
compID
, 
cu
->
	`g‘CtuRsAddr
(), cu->
	`g‘ZÜd”IdxInCtu
(è+ 
·¹Addr
 ) + 
»fOff£t
;

654 
P–
* 
d¡
 = 
d¡Pic
->
	`g‘Addr
Ð
compID
, 
·¹Addr
 );

656 
IÁ
 
xF¿c
 = 
mv
->
	`g‘HÜ
(è& ((1<<
shiáHÜ
)-1);

657 
IÁ
 
yF¿c
 = 
mv
->
	`g‘V”
(è& ((1<<
shiáV”
)-1);

658 
UIÁ
 
cxWidth
 = 
width
 >> 
»fPic
->
	`g‘CompÚ’tSÿËX
(
compID
);

659 
UIÁ
 
cxHeight
 = 
height
 >> 
»fPic
->
	`g‘CompÚ’tSÿËY
(
compID
);

661 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
cu
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

663 iàÐ
yF¿c
 == 0 )

665 
m_if
.
	`fž‹rHÜ
(
compID
, 
»f
, 
»fSŒide
, 
d¡
, 
d¡SŒide
, 
cxWidth
, 
cxHeight
, 
xF¿c
, !
bi
, 
chFmt
, 
b™D•th
);

667 iàÐ
xF¿c
 == 0 )

669 
m_if
.
	`fž‹rV”
(
compID
, 
»f
, 
»fSŒide
, 
d¡
, 
d¡SŒide
, 
cxWidth
, 
cxHeight
, 
yF¿c
, 
Œue
, !
bi
, 
chFmt
, 
b™D•th
);

673 
IÁ
 
tmpSŒide
 = 
m_fž‹»dBlockTmp
[0].
	`g‘SŒide
(
compID
);

674 
P–
* 
tmp
 = 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(
compID
);

676 cÚ¡ 
IÁ
 
vFž‹rSize
 = 
	`isLuma
(
compID
è? 
NTAPS_LUMA
 : 
NTAPS_CHROMA
;

678 
m_if
.
	`fž‹rHÜ
(
compID
, 
»f
 - ((
vFž‹rSize
>>1è-1)*
»fSŒide
,„efSŒide, 
tmp
, 
tmpSŒide
, 
cxWidth
, 
cxHeight
+vFž‹rSize-1, 
xF¿c
, 
çl£
, 
chFmt
, 
b™D•th
);

679 
m_if
.
	`fž‹rV”
(
compID
, 
tmp
 + ((
vFž‹rSize
>>1è-1)*
tmpSŒide
,mpSŒide, 
d¡
, 
d¡SŒide
, 
cxWidth
, 
cxHeight
, 
yF¿c
, 
çl£
, !
bi
, 
chFmt
, 
b™D•th
);

681 
	}
}

683 
Void
 
	gTComP»diùiÚ
::
	$xWeigh‹dAv”age
Ð
TComYuv
* 
pcYuvSrc0
, TComYuv* 
pcYuvSrc1
, 
IÁ
 
iRefIdx0
, IÁ 
iRefIdx1
, 
UIÁ
 
uiP¬tIdx
, IÁ 
iWidth
, IÁ 
iHeight
, TComYuv* 
pcYuvD¡
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 )

685 ifÐ
iRefIdx0
 >ð0 && 
iRefIdx1
 >= 0 )

687 
pcYuvD¡
->
	`addAvg
Ð
pcYuvSrc0
, 
pcYuvSrc1
, 
uiP¬tIdx
, 
iWidth
, 
iHeight
, 
þB™D•ths
 );

689 iàÐ
iRefIdx0
 >ð0 && 
iRefIdx1
 < 0 )

691 
pcYuvSrc0
->
	`cÝyP¬tToP¬tYuv
Ð
pcYuvD¡
, 
uiP¬tIdx
, 
iWidth
, 
iHeight
 );

693 iàÐ
iRefIdx0
 < 0 && 
iRefIdx1
 >= 0 )

695 
pcYuvSrc1
->
	`cÝyP¬tToP¬tYuv
Ð
pcYuvD¡
, 
uiP¬tIdx
, 
iWidth
, 
iHeight
 );

697 
	}
}

700 
Void
 
	gTComP»diùiÚ
::
	$g‘MvP»dAMVP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdx
, UIÁ 
uiP¬tAddr
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMv
& 
rcMvP»d
 )

702 
AMVPInfo
* 
pcAMVPInfo
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘AMVPInfo
();

704 ifÐ
pcAMVPInfo
->
iN
 <= 1 )

706 
rcMvP»d
 = 
pcAMVPInfo
->
m_acMvCªd
[0];

708 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð0, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

709 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
pcAMVPInfo
->
iN
, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

713 
	`as£¹
(
pcCU
->
	`g‘MVPIdx
(
eRefPicLi¡
,
uiP¬tAddr
) >= 0);

714 
rcMvP»d
 = 
pcAMVPInfo
->
m_acMvCªd
[
pcCU
->
	`g‘MVPIdx
(
eRefPicLi¡
,
uiP¬tAddr
)];

716 
	}
}

731 
Void
 
	gTComP»diùiÚ
::
	$xP»dIÁ¿PÏÇr
ÐcÚ¡ 
P–
* 
pSrc
, 
IÁ
 
¤cSŒide
, P–* 
½D¡
, IÁ 
d¡SŒide
, 
UIÁ
 
width
, UIÁ 
height
 )

733 
	`as£¹
(
width
 <ð
height
);

735 
IÁ
 
ËáCÞumn
[
MAX_CU_SIZE
+1] = {0};

736 
IÁ
 
tÝRow
[
MAX_CU_SIZE
+1] = {0};

737 
IÁ
 
bÙtomRow
[
MAX_CU_SIZE
] = {0};

738 
IÁ
 
rightCÞumn
[
MAX_CU_SIZE
] = {0};

739 
UIÁ
 
shiá1DhÜ
 = 
g_aucCÚv”tToB™
[ 
width
 ] + 2;

740 
UIÁ
 
shiá1Dv”
 = 
g_aucCÚv”tToB™
[ 
height
 ] + 2;

743 
IÁ
 
k
=0;k<
width
+1;k++)

745 
tÝRow
[
k
] = 
pSrc
[k-
¤cSŒide
];

748 
IÁ
 
k
=0; k < 
height
+1; k++)

750 
ËáCÞumn
[
k
] = 
pSrc
[k*
¤cSŒide
-1];

754 
IÁ
 
bÙtomLeá
 = 
ËáCÞumn
[
height
];

755 
IÁ
 
tÝRight
 = 
tÝRow
[
width
];

757 
IÁ
 
k
=0;k<
width
;k++)

759 
bÙtomRow
[
k
] = 
bÙtomLeá
 - 
tÝRow
[k];

760 
tÝRow
[
k
] <<ð
shiá1Dv”
;

763 
IÁ
 
k
=0;k<
height
;k++)

765 
rightCÞumn
[
k
] = 
tÝRight
 - 
ËáCÞumn
[k];

766 
ËáCÞumn
[
k
] <<ð
shiá1DhÜ
;

769 cÚ¡ 
UIÁ
 
tÝRowShiá
 = 0;

772 
IÁ
 
y
=0;y<
height
;y++)

774 
IÁ
 
hÜP»d
 = 
ËáCÞumn
[
y
] + 
width
;

775 
IÁ
 
x
=0;x<
width
;x++)

777 
hÜP»d
 +ð
rightCÞumn
[
y
];

778 
tÝRow
[
x
] +ð
bÙtomRow
[x];

780 
IÁ
 
v”tP»d
 = ((
tÝRow
[
x
] + 
tÝRowShiá
)>>topRowShift);

781 
½D¡
[
y
*
d¡SŒide
+
x
] = ( 
hÜP»d
 + 
v”tP»d
 ) >> (
shiá1DhÜ
+1);

784 
	}
}

797 
Void
 
	gTComP»diùiÚ
::
	$xDCP»dFž‹ršg
ÐcÚ¡ 
P–
* 
pSrc
, 
IÁ
 
iSrcSŒide
, P–* 
pD¡
, IÁ 
iD¡SŒide
, IÁ 
iWidth
, IÁ 
iHeight
, 
ChªÃlTy³
 
chªÃlTy³
 )

799 
IÁ
 
x
, 
y
, 
iD¡SŒide2
, 
iSrcSŒide2
;

801 ià(
	`isLuma
(
chªÃlTy³
è&& (
iWidth
 <ð
MAXIMUM_INTRA_FILTERED_WIDTH
è&& (
iHeight
 <ð
MAXIMUM_INTRA_FILTERED_HEIGHT
))

804 
pD¡
[0] = (
P–
)((
pSrc
[-
iSrcSŒide
] +…Src[-1] + 2 *…Dst[0] + 2) >> 2);

807  
x
 = 1; x < 
iWidth
; x++ )

809 
pD¡
[
x
] = (
P–
)((
pSrc
[x - 
iSrcSŒide
] + 3 *…Dst[x] + 2) >> 2);

813  
y
 = 1, 
iD¡SŒide2
 = 
iD¡SŒide
, 
iSrcSŒide2
 = 
iSrcSŒide
-1; y < 
iHeight
; y++, iDstStride2+=iDstStride, iSrcStride2+=iSrcStride )

815 
pD¡
[
iD¡SŒide2
] = (
P–
)((
pSrc
[
iSrcSŒide2
] + 3 *…Dst[iDstStride2] + 2) >> 2);

820 
	}
}

823 
BoÞ
 
	gTComP»diùiÚ
::
	$U£DPCMFÜFœ¡PassIÁ¿E¡im©iÚ
(
TComTU
 &
rTu
, cÚ¡ 
UIÁ
 
uiDœMode
)

825  (
rTu
.
	`g‘CU
()->
	`isRDPCMEÇbËd
ÔTu.
	`G‘AbsP¬tIdxTU
()) ) &&

826 
rTu
.
	`g‘CU
()->
	`g‘CUT¿nsquªtBy·ss
ÔTu.
	`G‘AbsP¬tIdxTU
()) &&

827 (
uiDœMode
==
HOR_IDX
 || uiDœMode==
VER_IDX
);

828 
	}
}

830 #ià
MCTS_ENC_CHECK


832 
Void
 
	$g‘RefPUP¬tPos
(
TComD©aCU
* 
pcCU
, 
TComMv
& 
cMv
, 
IÁ
 
uiP¬tIdx
, IÁ& 
ruiP»dXLeá
, IÁ& 
ruiP»dYTÝ
, IÁ& 
ruiP»dXRight
, IÁ& 
ruiP»dYBÙtom
, IÁ 
iWidth
, IÁ 
iHeight
)

834 
ruiP»dXLeá
 = 
pcCU
->
	`g‘CUP–X
();

835 
ruiP»dYTÝ
 = 
pcCU
->
	`g‘CUP–Y
();

837 
pcCU
->
	`g‘P¬t™iÚSize
(0))

839 
SIZE_2NxN
:

840 ià(
uiP¬tIdx
 == 0)

842 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

843 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

847 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

848 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + (
iHeight
 << 1);

849 
ruiP»dYTÝ
 +ð
iHeight
;

852 
SIZE_Nx2N
:

853 ià(
uiP¬tIdx
 == 0)

855 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

856 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

860 
ruiP»dXRight
 = 
ruiP»dXLeá
 + (
iWidth
 << 1);

861 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

862 
ruiP»dXLeá
 +ð
iWidth
;

865 
SIZE_NxN
:

866 ià(
uiP¬tIdx
 == 0)

868 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

869 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

871 ià(
uiP¬tIdx
 == 1)

873 
ruiP»dXRight
 = 
ruiP»dXLeá
 + (
iWidth
 << 1);

874 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

875 
ruiP»dXLeá
 +ð
iWidth
;

877 ià(
uiP¬tIdx
 == 2)

879 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

880 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + (
iHeight
 << 1);

881 
ruiP»dYTÝ
 +ð
iHeight
;

883 ià(
uiP¬tIdx
 == 3)

885 
ruiP»dXRight
 = 
ruiP»dXLeá
 + (
iWidth
 << 1);

886 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + (
iHeight
 << 1);

887 
ruiP»dXLeá
 +ð
iWidth
;

888 
ruiP»dYTÝ
 +ð
iHeight
;

891 
SIZE_2NxnU
:

892 ià(
uiP¬tIdx
 == 0)

894 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

895 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

899 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

900 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
pcCU
->
	`g‘Height
(0);

901 
ruiP»dYTÝ
 +ð(
iHeight
 / 3);

904 
SIZE_2NxnD
:

905 ià(
uiP¬tIdx
 == 0)

907 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

908 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

912 
IÁ
 
ÜiHeight
 = 
iHeight
 << 2;

913 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

914 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
ÜiHeight
;

915 
ruiP»dYTÝ
 +ð(
ÜiHeight
 >> 2) + (oriHeight >> 1);

918 
SIZE_nLx2N
:

919 ià(
uiP¬tIdx
 == 0)

921 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

922 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

926 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
pcCU
->
	`g‘Width
(0);

927 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

928 
ruiP»dXLeá
 +ð(
iWidth
 / 3);

931 
SIZE_nRx2N
:

932 ià(
uiP¬tIdx
 == 0)

934 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

935 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

939 
IÁ
 
ÜiWidth
 = (
iWidth
 << 2);

940 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
ÜiWidth
;

941 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

942 
ruiP»dXLeá
 +ð(
ÜiWidth
 >> 2) + (oriWidth >> 1);

946 
ruiP»dXRight
 = 
ruiP»dXLeá
 + 
iWidth
;

947 
ruiP»dYBÙtom
 = 
ruiP»dYTÝ
 + 
iHeight
;

951 
ruiP»dXLeá
 +ð(
cMv
.
	`g‘HÜ
() >> 2);

952 
ruiP»dYTÝ
 +ð(
cMv
.
	`g‘V”
() >> 2);

953 
ruiP»dXRight
 +ð(
cMv
.
	`g‘HÜ
() >> 2) - 1;

954 
ruiP»dYBÙtom
 +ð(
cMv
.
	`g‘V”
() >> 2) - 1;

955 
	}
}

957 
BoÞ
 
	$checkMVPRªge
(
TComMv
& 
cMv
, 
UIÁ
 
ùuL’gth
, UIÁ 
tžeXPosInCtus
, UIÁ 
tžeYPosInCtus
, UIÁ 
tžeWidthtInCtus
, UIÁ 
tžeHeightInCtus
, 
IÁ
 
P»dXLeá
, IÁ 
P»dXRight
, IÁ 
P»dYTÝ
, IÁ 
P»dYBÙtom
, 
ChromaFÜm©
 
chromaFÜm©
)

960 cÚ¡ 
UIÁ
 
LumaLTSam¶eOff£t
 = 3;

961 cÚ¡ 
UIÁ
 
LumaRBSam¶eOff£t
 = 4;

962 cÚ¡ 
UIÁ
 
CromaLTSam¶eoff£t
 = 1;

963 cÚ¡ 
UIÁ
 
CromaRBSam¶eoff£t
 = 2;

966 cÚ¡ 
IÁ
 
ËáTÝP–PosX
 = 
ùuL’gth
 * 
tžeXPosInCtus
;

967 cÚ¡ 
IÁ
 
ËáTÝP–PosY
 = 
ùuL’gth
 * 
tžeYPosInCtus
;

968 cÚ¡ 
IÁ
 
rightBÙtomP–PosX
 = ((
tžeWidthtInCtus
 + 
tžeXPosInCtus
è* 
ùuL’gth
) - 1;

969 cÚ¡ 
IÁ
 
rightBÙtomP–PosY
 = ((
tžeHeightInCtus
 + 
tžeYPosInCtus
è* 
ùuL’gth
) - 1;

972 cÚ¡ 
BoÞ
 
isFuÎP–HÜLuma
 = (
cMv
.
	`g‘HÜ
() % 4 == 0);

973 cÚ¡ 
BoÞ
 
isFuÎP–V”Luma
 = (
cMv
.
	`g‘V”
() % 4 == 0);

975 cÚ¡ 
IÁ
 
lRªgeXLeá
 = 
ËáTÝP–PosX
 + (
isFuÎP–HÜLuma
 ? 0 : 
LumaLTSam¶eOff£t
);

976 cÚ¡ 
IÁ
 
lRªgeYTÝ
 = 
ËáTÝP–PosY
 + (
isFuÎP–V”Luma
 ? 0 : 
LumaLTSam¶eOff£t
);

977 cÚ¡ 
IÁ
 
lRªgeXRight
 = 
rightBÙtomP–PosX
 - (
isFuÎP–HÜLuma
 ? 0 : 
LumaRBSam¶eOff£t
);

978 cÚ¡ 
IÁ
 
lRªgeYBÙtom
 = 
rightBÙtomP–PosY
 - (
isFuÎP–V”Luma
 ? 0 : 
LumaRBSam¶eOff£t
);

980 ià(!(
P»dXLeá
 >ð
lRªgeXLeá
 && P»dXLeá <ð
lRªgeXRight
è|| !(
P»dXRight
 >=†RangeXLeft && PredXRight <=†RangeXRight))

982  
çl£
;

984 ià(!(
P»dYTÝ
 >ð
lRªgeYTÝ
 && P»dYTÝ <ð
lRªgeYBÙtom
è|| !(
P»dYBÙtom
 >=†RangeYTop && PredYBottom <=†RangeYBottom))

986  
çl£
;

989 ià((
chromaFÜm©
 !ð
CHROMA_444
è&& (chromaFÜm© !ð
CHROMA_400
))

992 cÚ¡ 
BoÞ
 
isFuÎP–HÜChroma
 = (
cMv
.
	`g‘HÜ
() % 8 == 0);

993 cÚ¡ 
BoÞ
 
isFuÎP–V”Chroma
 = (
cMv
.
	`g‘V”
() % 8 == 0);

995 cÚ¡ 
IÁ
 
cRªgeXLeá
 = 
ËáTÝP–PosX
 + (
isFuÎP–HÜChroma
 ? 0 : 
CromaLTSam¶eoff£t
);

996 cÚ¡ 
IÁ
 
cRªgeYTÝ
 = 
ËáTÝP–PosY
 + (
isFuÎP–V”Chroma
 ? 0 : 
CromaLTSam¶eoff£t
);

997 cÚ¡ 
IÁ
 
cRªgeXRight
 = 
rightBÙtomP–PosX
 - (
isFuÎP–HÜChroma
 ? 0 : 
CromaRBSam¶eoff£t
);

998 cÚ¡ 
IÁ
 
cRªgeYBÙtom
 = 
rightBÙtomP–PosY
 - (
isFuÎP–V”Chroma
 ? 0 : 
CromaRBSam¶eoff£t
);

1000 ià(!(
P»dXLeá
 >ð
cRªgeXLeá
 && P»dXLeá <ð
cRªgeXRight
è|| !(
P»dXRight
 >= cRangeXLeft && PredXRight <= cRangeXRight))

1002  
çl£
;

1004 ià((!(
P»dYTÝ
 >ð
cRªgeYTÝ
 && P»dYTÝ <ð
cRªgeYBÙtom
è|| !(
P»dYBÙtom
 >ðcRªgeYTÝ && P»dYBÙtom <ðcRªgeYBÙtom)è&& (
chromaFÜm©
 !ð
CHROMA_422
))

1006  
çl£
;

1010  
Œue
;

1011 
	}
}

1013 
BoÞ
 
	gTComP»diùiÚ
::
	$checkTMùsMvp
(
TComD©aCU
* 
pcCU
, 
IÁ
 
·¹Idx
)

1015 
IÁ
 
·¹Width
 = 0;

1016 
IÁ
 
·¹Height
 = 0;

1017 
UIÁ
 
·¹Addr
 = 0;

1019 
UIÁ
 
tžeXPosInCtus
 = 0;

1020 
UIÁ
 
tžeYPosInCtus
 = 0;

1021 
UIÁ
 
tžeWidthtInCtus
 = 0;

1022 
UIÁ
 
tžeHeightInCtus
 = 0;

1024 
	`g‘TžePos™iÚ
(
pcCU
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
);

1026 cÚ¡ 
UIÁ
 
ùuL’gth
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘MaxCUWidth
();

1027 cÚ¡ 
ChromaFÜm©
 
chromaFÜm©
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘ChromaFÜm©Idc
();

1029 
IÁ
 
´edXLeá
;

1030 
IÁ
 
´edYTÝ
;

1031 
IÁ
 
´edXRight
;

1032 
IÁ
 
´edYBÙtom
;

1034 ià(
·¹Idx
 >= 0)

1036 
pcCU
->
	`g‘P¬tIndexAndSize
(
·¹Idx
, 
·¹Addr
, 
·¹Width
, 
·¹Height
);

1038 ià(
	`xCheckId’tiÿlMÙiÚ
(
pcCU
, 
·¹Addr
))

1040 
RefPicLi¡
 
eRefPicLi¡
 = 
REF_PIC_LIST_0
;

1041 
TComMv
 
cMv
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘Mv
(
·¹Addr
);

1042 
	`g‘RefPUP¬tPos
(
pcCU
, 
cMv
, 
·¹Idx
, 
´edXLeá
, 
´edYTÝ
, 
´edXRight
, 
´edYBÙtom
, 
·¹Width
, 
·¹Height
);

1043 ià(!
	`checkMVPRªge
(
cMv
, 
ùuL’gth
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
, 
´edXLeá
, 
´edXRight
, 
´edYTÝ
, 
´edYBÙtom
, 
chromaFÜm©
))

1045  
çl£
;

1050 
UIÁ
 
»fLi¡
 = 0;„efLi¡ < 
NUM_REF_PIC_LIST_01
;„efList++)

1052 
RefPicLi¡
 
eRefPicLi¡
 = (
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
);

1054 
TComMv
 
cMv
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘Mv
(
·¹Addr
);

1055 
	`g‘RefPUP¬tPos
(
pcCU
, 
cMv
, 
·¹Idx
, 
´edXLeá
, 
´edYTÝ
, 
´edXRight
, 
´edYBÙtom
, 
·¹Width
, 
·¹Height
);

1056 ià(!
	`checkMVPRªge
(
cMv
, 
ùuL’gth
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
, 
´edXLeá
, 
´edXRight
, 
´edYTÝ
, 
´edYBÙtom
, 
chromaFÜm©
))

1058  
çl£
;

1062  
Œue
;

1065 
·¹Idx
 = 0;…¬tIdx < 
pcCU
->
	`g‘NumP¬t™iÚs
();…artIdx++)

1067 
pcCU
->
	`g‘P¬tIndexAndSize
(
·¹Idx
, 
·¹Addr
, 
·¹Width
, 
·¹Height
);

1069 ià(
	`xCheckId’tiÿlMÙiÚ
(
pcCU
, 
·¹Addr
))

1071 
RefPicLi¡
 
eRefPicLi¡
 = 
REF_PIC_LIST_0
;

1072 
TComMv
 
cMv
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘Mv
(
·¹Addr
);

1073 
	`g‘RefPUP¬tPos
(
pcCU
, 
cMv
, 
·¹Idx
, 
´edXLeá
, 
´edYTÝ
, 
´edXRight
, 
´edYBÙtom
, 
·¹Width
, 
·¹Height
);

1074 ià(!
	`checkMVPRªge
(
cMv
, 
ùuL’gth
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
, 
´edXLeá
, 
´edXRight
, 
´edYTÝ
, 
´edYBÙtom
, 
chromaFÜm©
))

1076  
çl£
;

1081 
UIÁ
 
»fLi¡
 = 0;„efLi¡ < 
NUM_REF_PIC_LIST_01
;„efList++)

1083 
RefPicLi¡
 
eRefPicLi¡
 = (
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
);

1085 
TComMv
 
cMv
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘Mv
(
·¹Addr
);

1086 
	`g‘RefPUP¬tPos
(
pcCU
, 
cMv
, 
·¹Idx
, 
´edXLeá
, 
´edYTÝ
, 
´edXRight
, 
´edYBÙtom
, 
·¹Width
, 
·¹Height
);

1087 ià(!
	`checkMVPRªge
(
cMv
, 
ùuL’gth
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
, 
´edXLeá
, 
´edXRight
, 
´edYTÝ
, 
´edYBÙtom
, 
chromaFÜm©
))

1089  
çl£
;

1094  
Œue
;

1095 
	}
}

	@source/Lib/TLibCommon/TComPrediction.h

38 #iâdeà
__TCOMPREDICTION__


39 
	#__TCOMPREDICTION__


	)

43 
	~"TComYuv.h
"

44 
	~"TComIÁ”pÞ©iÚFž‹r.h
"

45 
	~"TComWeightP»diùiÚ.h
"

48 
þass
 
	gTComMv
;

49 
þass
 
	gTComTU
;

59 
	ePRED_BUF_E


61 
	mPRED_BUF_UNFILTERED
=0,

62 
	mPRED_BUF_FILTERED
=1,

63 
	mNUM_PRED_BUF
=2

64 } 
	tPRED_BUF
;

66 cÚ¡ 
UIÁ
 
	gMAX_INTRA_FILTER_DEPTHS
=5;

68 þas 
	cTComP»diùiÚ
 : 
public
 
TComWeightP»diùiÚ


70 
´iv©e
:

71 cÚ¡ 
UCh¬
 
m_aucIÁ¿Fž‹r
[
MAX_NUM_CHANNEL_TYPE
][
MAX_INTRA_FILTER_DEPTHS
];

73 
	m´Ùeùed
:

74 
P–
* 
m_piYuvExt
[
MAX_NUM_COMPONENT
][
NUM_PRED_BUF
];

75 
IÁ
 
	mm_iYuvExtSize
;

77 
TComYuv
 
	mm_acYuvP»d
[
NUM_REF_PIC_LIST_01
];

78 
TComYuv
 
	mm_cYuvP»dTemp
;

79 
TComYuv
 
	mm_fž‹»dBlock
[
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
][LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS];

80 
TComYuv
 
	mm_fž‹»dBlockTmp
[
LUMA_INTERPOLATION_FILTER_SUB_SAMPLE_POSITIONS
];

82 
TComIÁ”pÞ©iÚFž‹r
 
	mm_if
;

84 
P–
* 
	mm_pLumaRecBufãr
;

85 
IÁ
 
	mm_iLumaRecSŒide
;

87 
Void
 
xP»dIÁ¿Ang
 ( 
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
pSrc
, IÁ 
¤cSŒide
, P–* 
pD¡
, IÁ 
d¡SŒide
, 
UIÁ
 
width
, UIÁ 
height
, 
ChªÃlTy³
 
chªÃlTy³
, UIÁ 
dœMode
, cÚ¡ 
BoÞ
 
bEÇbËEdgeFž‹rs
 );

88 
Void
 
xP»dIÁ¿PÏÇr
 ( cÚ¡ 
P–
* 
pSrc
, 
IÁ
 
¤cSŒide
, P–* 
½D¡
, IÁ 
d¡SŒide
, 
UIÁ
 
width
, UIÁ 
height
 );

91 
Void
 
xP»dIÁ”Uni
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tAddr
, 
IÁ
 
iWidth
, IÁ 
iHeight
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComYuv
* 
pcYuvP»d
, 
BoÞ
 
bi
=
çl£
 );

92 
Void
 
xP»dIÁ”Bi
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tAddr
, 
IÁ
 
iWidth
, IÁ 
iHeight
, 
TComYuv
* 
pcYuvP»d
 );

93 
Void
 
xP»dIÁ”Blk
(cÚ¡ 
CompÚ’tID
 
compID
, 
TComD©aCU
 *
cu
, 
TComPicYuv
 *
»fPic
, 
UIÁ
 
·¹Addr
, 
TComMv
 *
mv
, 
IÁ
 
width
, IÁ 
height
, 
TComYuv
 *
d¡Pic
, 
BoÞ
 
bi
, cÚ¡ IÁ 
b™D•th
 );

94 
Void
 
xWeigh‹dAv”age
 ( 
TComYuv
* 
pcYuvSrc0
, TComYuv* 
pcYuvSrc1
, 
IÁ
 
iRefIdx0
, IÁ 
iRefIdx1
, 
UIÁ
 
uiP¬tAddr
, IÁ 
iWidth
, IÁ 
iHeight
, TComYuv* 
pcYuvD¡
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 );

96 
Void
 
xG‘LLSP»diùiÚ
 ( cÚ¡ 
P–
* 
pSrc0
, 
IÁ
 
iSrcSŒide
, P–* 
pD¡0
, IÁ 
iD¡SŒide
, 
UIÁ
 
uiWidth
, UIÁ 
uiHeight
, UIÁ 
uiExt0
, cÚ¡ 
ChromaFÜm©
 
chFmt
 
DEBUG_STRING_FN_DECLARE
(
sDebug
) );

98 
Void
 
xDCP»dFž‹ršg
ÐcÚ¡ 
P–
* 
pSrc
, 
IÁ
 
iSrcSŒide
, P–* 
pD¡
, IÁ 
iD¡SŒide
, IÁ 
iWidth
, IÁ 
iHeight
, 
ChªÃlTy³
 
chªÃlTy³
 );

99 
BoÞ
 
xCheckId’tiÿlMÙiÚ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
P¬tAddr
);

100 
Void
 
de¡roy
();

102 
	mpublic
:

103 
TComP»diùiÚ
();

104 
	mvœtu®
 ~
TComP»diùiÚ
();

106 
Void
 
š™TempBuff
(
ChromaFÜm©
 
chromaFÜm©IDC
);

108 
ChromaFÜm©
 
	$g‘ChromaFÜm©
(ècÚ¡ {  
m_cYuvP»dTemp
.
	`g‘ChromaFÜm©
(); }

111 
Void
 
	`mÙiÚCom³n§tiÚ
 ( 
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvP»d
, 
RefPicLi¡
 
eRefPicLi¡
 = 
REF_PIC_LIST_X
, 
IÁ
 
iP¬tIdx
 = -1 );

114 
Void
 
	`g‘MvP»dAMVP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdx
, UIÁ 
uiP¬tAddr
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMv
& 
rcMvP»d
 );

117 
Void
 
	`´edIÁ¿Ang
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
UIÁ
 
uiDœMode
, 
P–
 *
piOrg
 , UIÁ 
uiOrgSŒide
, P–* 
piP»d
, UIÁ 
uiSŒide
, 
TComTU
 &
rTu
, cÚ¡ 
BoÞ
 
bU£Fž‹»dP»dSam¶es
, cÚ¡ BoÞ 
bU£Los¦essDPCM
 = 
çl£
 );

119 
P–
 
	`´edIÁ¿G‘P»dV®DC
 ( cÚ¡ P–* 
pSrc
, 
IÁ
 
iSrcSŒide
, 
UIÁ
 
iWidth
, UIÁ 
iHeight
);

121 
P–
* 
	$g‘P»diùÜPŒ
 ( cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
bU£Fž‹»dP»diùiÚs
 )

123  
m_piYuvExt
[
compID
][
bU£Fž‹»dP»diùiÚs
?
PRED_BUF_FILTERED
:
PRED_BUF_UNFILTERED
];

124 
	}
}

128 
Void
 
š™IÁ¿P©‹ºChTy³
 ( 
TComTU
 &
rTu
,

129 cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
bFž‹rRefSam¶es


130 
DEBUG_STRING_FN_DECLARE
(
sDebug
)

133 
BoÞ
 
fž‹ršgIÁ¿Reã»nûSam¶es
(cÚ¡ 
CompÚ’tID
 
compID
, 
UIÁ
 
uiDœMode
, UIÁ 
uiTuChWidth
, UIÁ 
uiTuChHeight
, cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ BoÞ 
šŒaReã»nûSmoÙhšgDi§bËd
);

135 
BoÞ
 
U£DPCMFÜFœ¡PassIÁ¿E¡im©iÚ
(
TComTU
 &
rTu
, cÚ¡ 
UIÁ
 
uiDœMode
);

137 #ià
MCTS_ENC_CHECK


138 
BoÞ
 
checkTMùsMvp
(
TComD©aCU
* 
pcCU
, 
IÁ
 
·¹Idx
 = -1);

	@source/Lib/TLibCommon/TComRdCost.cpp

38 
	~<m©h.h
>

39 
	~<as£¹.h
>

40 
	~<lim™s
>

41 
	~"TComRom.h
"

42 
	~"TComRdCo¡.h
"

44 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

45 
	~<emmšŒš.h
>

46 
	~<xmmšŒš.h
>

52 
	gTComRdCo¡
::
	$TComRdCo¡
()

54 
	`š™
();

55 
	}
}

57 
	gTComRdCo¡
::~
	$TComRdCo¡
()

59 
	}
}

62 
DoubË
 
TComRdCo¡
::
	$ÿlcRdCo¡
Ð
DoubË
 
numB™s
, 
Di¡ÜtiÚ
 
di¡ÜtiÚ
, 
DFunc
 
eDFunc
 )

64 
DoubË
 
Ïmbda
 = 1.0;

66  
eDFunc
 )

68 
DF_SSE
:

69 
	`as£¹
(0);

71 
DF_SAD
:

72 
Ïmbda
 = 
m_dLambdaMÙiÚSAD
[0];

74 
DF_DEFAULT
:

75 
Ïmbda
 = 
m_dLambda
;

77 
DF_SSE_FRAME
:

78 
Ïmbda
 = 
m_dF¿meLambda
;

81 
	`as£¹
 (0);

85 ià(
eDFunc
 =ð
DF_SAD
)

87 ià(
m_co¡Mode
 !ð
COST_STANDARD_LOSSY
)

89  ((
di¡ÜtiÚ
 * 65536.0è/ 
Ïmbda
è+ 
numB™s
;

93  
di¡ÜtiÚ
 + (((
numB™s
 * 
Ïmbda
) ) / 65536.0);

98 ià(
m_co¡Mode
 !ð
COST_STANDARD_LOSSY
)

100  (
di¡ÜtiÚ
 / 
Ïmbda
è+ 
numB™s
;

104  
di¡ÜtiÚ
 + (
numB™s
 * 
Ïmbda
);

107 
	}
}

109 
Void
 
	gTComRdCo¡
::
	$£tLambda
Ð
DoubË
 
dLambda
, cÚ¡ 
B™D•ths
 &
b™D•ths
 )

111 
m_dLambda
 = 
dLambda
;

112 
m_sq¹Lambda
 = 
	`sq¹
(
m_dLambda
);

113 
m_dLambdaMÙiÚSAD
[0] = 65536.0 * 
m_sq¹Lambda
;

114 
m_dLambdaMÙiÚSSE
[0] = 65536.0 * 
m_dLambda
;

115 #ià
FULL_NBIT


116 
dLambda
 = 0.57 * 
	`pow
(2.0, ((
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
 - 12) / 3.0));

118 
dLambda
 = 0.57 * 
	`pow
(2.0, ((
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
 - 12 - 6 * (
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
] - 8)) / 3.0));

120 
m_dLambdaMÙiÚSAD
[1] = 65536.0 * 
	`sq¹
(
dLambda
);

121 
m_dLambdaMÙiÚSSE
[1] = 65536.0 * 
dLambda
;

122 
	}
}

126 
Void
 
	gTComRdCo¡
::
	$š™
()

128 
m_aåDi¡ÜtFunc
[
DF_DEFAULT
] = 
NULL
;

130 
m_aåDi¡ÜtFunc
[
DF_SSE
 ] = 
TComRdCo¡
::
xG‘SSE
;

131 
m_aåDi¡ÜtFunc
[
DF_SSE4
 ] = 
TComRdCo¡
::
xG‘SSE4
;

132 
m_aåDi¡ÜtFunc
[
DF_SSE8
 ] = 
TComRdCo¡
::
xG‘SSE8
;

133 
m_aåDi¡ÜtFunc
[
DF_SSE16
 ] = 
TComRdCo¡
::
xG‘SSE16
;

134 
m_aåDi¡ÜtFunc
[
DF_SSE32
 ] = 
TComRdCo¡
::
xG‘SSE32
;

135 
m_aåDi¡ÜtFunc
[
DF_SSE64
 ] = 
TComRdCo¡
::
xG‘SSE64
;

136 
m_aåDi¡ÜtFunc
[
DF_SSE16N
 ] = 
TComRdCo¡
::
xG‘SSE16N
;

138 
m_aåDi¡ÜtFunc
[
DF_SAD
 ] = 
TComRdCo¡
::
xG‘SAD
;

139 
m_aåDi¡ÜtFunc
[
DF_SAD4
 ] = 
TComRdCo¡
::
xG‘SAD4
;

140 
m_aåDi¡ÜtFunc
[
DF_SAD8
 ] = 
TComRdCo¡
::
xG‘SAD8
;

141 
m_aåDi¡ÜtFunc
[
DF_SAD16
 ] = 
TComRdCo¡
::
xG‘SAD16
;

142 
m_aåDi¡ÜtFunc
[
DF_SAD32
 ] = 
TComRdCo¡
::
xG‘SAD32
;

143 
m_aåDi¡ÜtFunc
[
DF_SAD64
 ] = 
TComRdCo¡
::
xG‘SAD64
;

144 
m_aåDi¡ÜtFunc
[
DF_SAD16N
 ] = 
TComRdCo¡
::
xG‘SAD16N
;

146 
m_aåDi¡ÜtFunc
[
DF_SADS
 ] = 
TComRdCo¡
::
xG‘SAD
;

147 
m_aåDi¡ÜtFunc
[
DF_SADS4
 ] = 
TComRdCo¡
::
xG‘SAD4
;

148 
m_aåDi¡ÜtFunc
[
DF_SADS8
 ] = 
TComRdCo¡
::
xG‘SAD8
;

149 
m_aåDi¡ÜtFunc
[
DF_SADS16
 ] = 
TComRdCo¡
::
xG‘SAD16
;

150 
m_aåDi¡ÜtFunc
[
DF_SADS32
 ] = 
TComRdCo¡
::
xG‘SAD32
;

151 
m_aåDi¡ÜtFunc
[
DF_SADS64
 ] = 
TComRdCo¡
::
xG‘SAD64
;

152 
m_aåDi¡ÜtFunc
[
DF_SADS16N
] = 
TComRdCo¡
::
xG‘SAD16N
;

154 
m_aåDi¡ÜtFunc
[
DF_SAD12
 ] = 
TComRdCo¡
::
xG‘SAD12
;

155 
m_aåDi¡ÜtFunc
[
DF_SAD24
 ] = 
TComRdCo¡
::
xG‘SAD24
;

156 
m_aåDi¡ÜtFunc
[
DF_SAD48
 ] = 
TComRdCo¡
::
xG‘SAD48
;

158 
m_aåDi¡ÜtFunc
[
DF_SADS12
 ] = 
TComRdCo¡
::
xG‘SAD12
;

159 
m_aåDi¡ÜtFunc
[
DF_SADS24
 ] = 
TComRdCo¡
::
xG‘SAD24
;

160 
m_aåDi¡ÜtFunc
[
DF_SADS48
 ] = 
TComRdCo¡
::
xG‘SAD48
;

162 
m_aåDi¡ÜtFunc
[
DF_HADS
 ] = 
TComRdCo¡
::
xG‘HADs
;

163 
m_aåDi¡ÜtFunc
[
DF_HADS4
 ] = 
TComRdCo¡
::
xG‘HADs
;

164 
m_aåDi¡ÜtFunc
[
DF_HADS8
 ] = 
TComRdCo¡
::
xG‘HADs
;

165 
m_aåDi¡ÜtFunc
[
DF_HADS16
 ] = 
TComRdCo¡
::
xG‘HADs
;

166 
m_aåDi¡ÜtFunc
[
DF_HADS32
 ] = 
TComRdCo¡
::
xG‘HADs
;

167 
m_aåDi¡ÜtFunc
[
DF_HADS64
 ] = 
TComRdCo¡
::
xG‘HADs
;

168 
m_aåDi¡ÜtFunc
[
DF_HADS16N
] = 
TComRdCo¡
::
xG‘HADs
;

170 
m_co¡Mode
 = 
COST_STANDARD_LOSSY
;

172 
m_mÙiÚLambda
 = 0;

173 
m_iCo¡SÿË
 = 0;

174 
	}
}

177 
UIÁ
 
	gTComRdCo¡
::
	$xG‘ExpGÞombNumb”OfB™s
Ð
IÁ
 
iV®
 )

179 
	`as£¹
(
iV®
 !ð
¡d
::
num”ic_lim™s
<
IÁ
>::
	`mš
());

180 
UIÁ
 
uiL’gth
 = 1;

181 
UIÁ
 
uiTemp
 = ( 
iV®
 <ð0è? (
	`UIÁ
(-iVal)<<1)+1: UInt(iVal<<1);

183  1 !ð
uiTemp
 )

185 
uiTemp
 >>= 1;

186 
uiL’gth
 += 2;

189  
uiL’gth
;

190 
	}
}

192 
Void
 
	gTComRdCo¡
::
	$£tDi¡P¬am
Ð
UIÁ
 
uiBlkWidth
, UIÁ 
uiBlkHeight
, 
DFunc
 
eDFunc
, 
Di¡P¬am
& 
rcDi¡P¬am
 )

195 
rcDi¡P¬am
.
iCÞs
 = 
uiBlkWidth
;

196 
rcDi¡P¬am
.
iRows
 = 
uiBlkHeight
;

197 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
eDFunc
 + 
g_aucCÚv”tToB™
[„cDi¡P¬am.
iCÞs
 ] + 1 ];

200 
rcDi¡P¬am
.
iSubShiá
 = 0;

201 
rcDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

202 
	}
}

205 
Void
 
	gTComRdCo¡
::
	$£tDi¡P¬am
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, cÚ¡ 
P–
* 
piRefY
, 
IÁ
 
iRefSŒide
, 
Di¡P¬am
& 
rcDi¡P¬am
 )

208 
rcDi¡P¬am
.
pOrg
 = 
pcP©‹ºKey
->
	`g‘ROIY
();

209 
rcDi¡P¬am
.
pCur
 = 
piRefY
;

211 
rcDi¡P¬am
.
iSŒideOrg
 = 
pcP©‹ºKey
->
	`g‘P©‹ºLSŒide
();

212 
rcDi¡P¬am
.
iSŒideCur
 = 
iRefSŒide
;

215 
rcDi¡P¬am
.
iCÞs
 = 
pcP©‹ºKey
->
	`g‘ROIYWidth
();

216 
rcDi¡P¬am
.
iRows
 = 
pcP©‹ºKey
->
	`g‘ROIYHeight
();

217 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SAD
 + 
g_aucCÚv”tToB™
[„cDi¡P¬am.
iCÞs
 ] + 1 ];

218 
rcDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

220 ià(
rcDi¡P¬am
.
iCÞs
 == 12)

222 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SAD12
];

224 ià(
rcDi¡P¬am
.
iCÞs
 == 24)

226 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SAD24
];

228 ià(
rcDi¡P¬am
.
iCÞs
 == 48)

230 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SAD48
];

234 
rcDi¡P¬am
.
iSubShiá
 = 0;

235 
	}
}

238 
Void
 
	gTComRdCo¡
::
	$£tDi¡P¬am
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, cÚ¡ 
P–
* 
piRefY
, 
IÁ
 
iRefSŒide
, IÁ 
iS‹p
, 
Di¡P¬am
& 
rcDi¡P¬am
, 
BoÞ
 
bHADME
 )

241 
rcDi¡P¬am
.
pOrg
 = 
pcP©‹ºKey
->
	`g‘ROIY
();

242 
rcDi¡P¬am
.
pCur
 = 
piRefY
;

244 
rcDi¡P¬am
.
iSŒideOrg
 = 
pcP©‹ºKey
->
	`g‘P©‹ºLSŒide
();

245 
rcDi¡P¬am
.
iSŒideCur
 = 
iRefSŒide
 * 
iS‹p
;

248 
rcDi¡P¬am
.
iS‹p
 = iStep;

251 
rcDi¡P¬am
.
iCÞs
 = 
pcP©‹ºKey
->
	`g‘ROIYWidth
();

252 
rcDi¡P¬am
.
iRows
 = 
pcP©‹ºKey
->
	`g‘ROIYHeight
();

254 
rcDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

257 iàÐ!
bHADME
 )

259 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SADS
 + 
g_aucCÚv”tToB™
[„cDi¡P¬am.
iCÞs
 ] + 1 ];

260 ià(
rcDi¡P¬am
.
iCÞs
 == 12)

262 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SADS12
];

264 ià(
rcDi¡P¬am
.
iCÞs
 == 24)

266 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SADS24
];

268 ià(
rcDi¡P¬am
.
iCÞs
 == 48)

270 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_SADS48
];

275 
rcDi¡P¬am
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[
DF_HADS
 + 
g_aucCÚv”tToB™
[„cDi¡P¬am.
iCÞs
 ] + 1 ];

279 
rcDi¡P¬am
.
iSubShiá
 = 0;

280 
	}
}

282 
Void
 
	gTComRdCo¡
::
	$£tDi¡P¬am
Ð
Di¡P¬am
& 
rcDP
, 
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
p1
, IÁ 
iSŒide1
, cÚ¡ P–* 
p2
, IÁ 
iSŒide2
, IÁ 
iWidth
, IÁ 
iHeight
, 
BoÞ
 
bHadam¬d
 )

284 
rcDP
.
pOrg
 = 
p1
;

285 
rcDP
.
pCur
 = 
p2
;

286 
rcDP
.
iSŒideOrg
 = 
iSŒide1
;

287 
rcDP
.
iSŒideCur
 = 
iSŒide2
;

288 
rcDP
.
iCÞs
 = 
iWidth
;

289 
rcDP
.
iRows
 = 
iHeight
;

290 
rcDP
.
iS‹p
 = 1;

291 
rcDP
.
iSubShiá
 = 0;

292 
rcDP
.
b™D•th
 = bitDepth;

293 
rcDP
.
Di¡Func
 = 
m_aåDi¡ÜtFunc
[ ( 
bHadam¬d
 ? 
DF_HADS
 : 
DF_SADS
 ) + 
g_aucCÚv”tToB™
[ 
iWidth
 ] + 1 ];

294 
rcDP
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

295 
	}
}

297 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$ÿlcHAD
Ð
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
pi0
, IÁ 
iSŒide0
, cÚ¡ P–* 
pi1
, IÁ 
iSŒide1
, IÁ 
iWidth
, IÁ 
iHeight
 )

299 
Di¡ÜtiÚ
 
uiSum
 = 0;

300 
IÁ
 
x
, 
y
;

302 iàÐÐ(
iWidth
 % 8è=ð0 ) && ( (
iHeight
 % 8) == 0 ) )

304  
y
=0; y<
iHeight
; y+= 8 )

306  
x
=0; x<
iWidth
; x+= 8 )

308 
uiSum
 +ð
	`xC®cHADs8x8
Ð&
pi0
[
x
], &
pi1
[x], 
iSŒide0
, 
iSŒide1
, 1

309 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

310 , 
b™D•th


314 
pi0
 +ð
iSŒide0
*8;

315 
pi1
 +ð
iSŒide1
*8;

320 
	`as£¹
 ( ( (
iWidth
 % 4è=ð0 ) && ( (
iHeight
 % 4) == 0 ) );

322  
y
=0; y<
iHeight
; y+= 4 )

324  
x
=0; x<
iWidth
; x+= 4 )

326 
uiSum
 +ð
	`xC®cHADs4x4
Ð&
pi0
[
x
], &
pi1
[x], 
iSŒide0
, 
iSŒide1
, 1 );

328 
pi0
 +ð
iSŒide0
*4;

329 
pi1
 +ð
iSŒide1
*4;

333  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
b™D•th
-8) );

334 
	}
}

336 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$g‘Di¡P¬t
Ð
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
piCur
, IÁ 
iCurSŒide
, cÚ¡ P–* 
piOrg
, IÁ 
iOrgSŒide
, 
UIÁ
 
uiBlkWidth
, UIÁ 
uiBlkHeight
, cÚ¡ 
CompÚ’tID
 
compID
, 
DFunc
 
eDFunc
 )

338 
Di¡P¬am
 
cDtP¬am
;

339 
	`£tDi¡P¬am
Ð
uiBlkWidth
, 
uiBlkHeight
, 
eDFunc
, 
cDtP¬am
 );

340 
cDtP¬am
.
pOrg
 = 
piOrg
;

341 
cDtP¬am
.
pCur
 = 
piCur
;

342 
cDtP¬am
.
iSŒideOrg
 = 
iOrgSŒide
;

343 
cDtP¬am
.
iSŒideCur
 = 
iCurSŒide
;

344 
cDtP¬am
.
iS‹p
 = 1;

346 
cDtP¬am
.
bAµlyWeight
 = 
çl£
;

347 
cDtP¬am
.
compIdx
 = 
MAX_NUM_COMPONENT
;

348 
cDtP¬am
.
b™D•th
 = bitDepth;

350 ià(
	`isChroma
(
compID
))

352  ((
Di¡ÜtiÚ
è(
m_di¡ÜtiÚWeight
[
compID
] * 
cDtP¬am
.
	`Di¡Func
( &cDtParam )));

356  
cDtP¬am
.
	`Di¡Func
( &cDtParam );

358 
	}
}

364 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

365 
šlše
 
IÁ
 
	$simdSADLše4n16b
ÐcÚ¡ 
P–
 * 
piOrg
 , cÚ¡ P– * 
piCur
 , 
IÁ
 
nWidth
 )

368 
	`as£¹
Ð!Ð
nWidth
 & 0x03 ) );

369 
__m128i
 
Üg
 , 
cur
 , 
abs
 , 
sum
;

370 
sum
 = 
	`_mm_£tz”o_si128
();

371  
IÁ
 
n
 = 0 ;‚ < 
nWidth
 ;‚ += 4 )

373 
Üg
 = 
	`_mm_lßdl_•i64
ÐÐ
__m128i
* )Ð
piOrg
 + 
n
 ) );

374 
cur
 = 
	`_mm_lßdl_•i64
ÐÐ
__m128i
* )Ð
piCur
 + 
n
 ) );

375 
abs
 = 
	`_mm_subs_•i16
Ð
	`_mm_max_•i16
Ð
Üg
 , 
cur
 ) , 
	`_mm_mš_•i16
( org , cur ) );

376 
sum
 = 
	`_mm_adds_•u16
Ð
abs
 , sum );

378 
__m128i
 
z”o
 = 
	`_mm_£tz”o_si128
();

379 
sum
 = 
	`_mm_uÅacklo_•i16
Ðsum , 
z”o
 );

380 
sum
 = 
	`_mm_add_•i32
Ðsum , 
	`_mm_shufæe_•i32
Ðsum , 
	`_MM_SHUFFLE
( 2 , 3 , 0 , 1 ) ) );

381 
sum
 = 
	`_mm_add_•i32
Ðsum , 
	`_mm_shufæe_•i32
Ðsum , 
	`_MM_SHUFFLE
( 1 , 0 , 3 , 2 ) ) );

382 Ð
	`_mm_cvtsi128_si32
Ð
sum
 ) );

383 
	}
}

385 
šlše
 
IÁ
 
	$simdSADLše8n16b
ÐcÚ¡ 
P–
 * 
piOrg
 , cÚ¡ P– * 
piCur
 , 
IÁ
 
nWidth
 )

388 
	`as£¹
Ð!Ð
nWidth
 & 0x07 ) );

389 
__m128i
 
Üg
 , 
cur
 , 
abs
 , 
sum
;

390 
sum
 = 
	`_mm_£tz”o_si128
();

391  
IÁ
 
n
 = 0 ;‚ < 
nWidth
 ;‚ += 8 )

393 
Üg
 = 
	`_mm_lßdu_si128
ÐÐ
__m128i
* )Ð
piOrg
 + 
n
 ) );

394 
cur
 = 
	`_mm_lßdu_si128
ÐÐ
__m128i
* )Ð
piCur
 + 
n
 ) );

395 
abs
 = 
	`_mm_subs_•i16
Ð
	`_mm_max_•i16
Ð
Üg
 , 
cur
 ) , 
	`_mm_mš_•i16
( org , cur ) );

396 
sum
 = 
	`_mm_adds_•u16
Ð
abs
 , sum );

398 
__m128i
 
z”o
 = 
	`_mm_£tz”o_si128
();

399 
__m128i
 
hi
 = 
	`_mm_uÅackhi_•i16
Ð
sum
 , 
z”o
 );

400 
__m128i
 
lo
 = 
	`_mm_uÅacklo_•i16
Ð
sum
 , 
z”o
 );

401 
sum
 = 
	`_mm_add_•i32
Ð
lo
 , 
hi
 );

402 
sum
 = 
	`_mm_add_•i32
Ðsum , 
	`_mm_shufæe_•i32
Ðsum , 
	`_MM_SHUFFLE
( 2 , 3 , 0 , 1 ) ) );

403 
sum
 = 
	`_mm_add_•i32
Ðsum , 
	`_mm_shufæe_•i32
Ðsum , 
	`_MM_SHUFFLE
( 1 , 0 , 3 , 2 ) ) );

404 Ð
	`_mm_cvtsi128_si32
Ð
sum
 ) );

405 
	}
}

407 
šlše
 
Void
 
	$simd8x8T¿n¥o£32b
Ð
__m128i
 * 
pBufãr
 )

409 
__m128
 
tmp
[16];

410  
IÁ
 
n
 = 0 ;‚ < 16 ;‚++ )

412 
tmp
[
n
] = 
	`_mm_ÿ¡si128_ps
Ð
pBufãr
[n] );

414 
	`_MM_TRANSPOSE4_PS
Ð
tmp
[0] ,mp[2] ,mp[4] ,mp[6] );

415 
	`_MM_TRANSPOSE4_PS
Ð
tmp
[1] ,mp[3] ,mp[5] ,mp[7] );

416 
	`_MM_TRANSPOSE4_PS
Ð
tmp
[8] ,mp[10] ,mp[12] ,mp[14] );

417 
	`_MM_TRANSPOSE4_PS
Ð
tmp
[9] ,mp[11] ,mp[13] ,mp[15] );

418  
IÁ
 
n
 = 0 ;‚ < 8 ;‚ += 2 )

420 
pBufãr
[
n
] = 
	`_mm_ÿ¡ps_si128
Ð
tmp
[n] );

421 
pBufãr
[
n
+1] = 
	`_mm_ÿ¡ps_si128
Ð
tmp
[n+8] );

422 
pBufãr
[
n
+8] = 
	`_mm_ÿ¡ps_si128
Ð
tmp
[n+1] );

423 
pBufãr
[
n
+9] = 
	`_mm_ÿ¡ps_si128
Ð
tmp
[n+9] );

425 
	}
}

427 #ifdeà
__GNUC__


428 
	#GCC_VERSION
 (
__GNUC__
 * 10000 + 
__GNUC_MINOR__
 * 100 + 
__GNUC_PATCHLEVEL__
)

	)

429 #ià
GCC_VERSION
 > 40600 && GCC_VERSION < 40700

430 
__©Œibu‹__
((
Ýtimize
("no-tree-vrp")))

433 
Void
 
	$simd8x8HAD1D32b
Ð
__m128i
 * 
pIÅut
 , __m128˜* 
pOuut
 )

435 
__m128i
 
m1
[8][2] , 
m2
[8][2];

437 
m2
[0][0] = 
	`_mm_add_•i32
Ð
pIÅut
[0] ,pInput[8 ] ); m2[0][1] = _mm_add_epi32(…Input[1] ,pInput[9 ] );

438 
m2
[1][0] = 
	`_mm_add_•i32
Ð
pIÅut
[2] ,pInput[10] ); m2[1][1] = _mm_add_epi32(…Input[3] ,pInput[11] );

439 
m2
[2][0] = 
	`_mm_add_•i32
Ð
pIÅut
[4] ,pInput[12] ); m2[2][1] = _mm_add_epi32(…Input[5] ,pInput[13] );

440 
m2
[3][0] = 
	`_mm_add_•i32
Ð
pIÅut
[6] ,pInput[14] ); m2[3][1] = _mm_add_epi32(…Input[7] ,pInput[15] );

441 
m2
[4][0] = 
	`_mm_sub_•i32
Ð
pIÅut
[0] ,pInput[8 ] ); m2[4][1] = _mm_sub_epi32(…Input[1] ,pInput[9 ] );

442 
m2
[5][0] = 
	`_mm_sub_•i32
Ð
pIÅut
[2] ,pInput[10] ); m2[5][1] = _mm_sub_epi32(…Input[3] ,pInput[11] );

443 
m2
[6][0] = 
	`_mm_sub_•i32
Ð
pIÅut
[4] ,pInput[12] ); m2[6][1] = _mm_sub_epi32(…Input[5] ,pInput[13] );

444 
m2
[7][0] = 
	`_mm_sub_•i32
Ð
pIÅut
[6] ,pInput[14] ); m2[7][1] = _mm_sub_epi32(…Input[7] ,pInput[15] );

446 
m1
[0][0] = 
	`_mm_add_•i32
Ð
m2
[0][0] , m2[2][0] ); m1[0][1] = _mm_add_epi32( m2[0][1] , m2[2][1] );

447 
m1
[1][0] = 
	`_mm_add_•i32
Ð
m2
[1][0] , m2[3][0] ); m1[1][1] = _mm_add_epi32( m2[1][1] , m2[3][1] );

448 
m1
[2][0] = 
	`_mm_sub_•i32
Ð
m2
[0][0] , m2[2][0] ); m1[2][1] = _mm_sub_epi32( m2[0][1] , m2[2][1] );

449 
m1
[3][0] = 
	`_mm_sub_•i32
Ð
m2
[1][0] , m2[3][0] ); m1[3][1] = _mm_sub_epi32( m2[1][1] , m2[3][1] );

450 
m1
[4][0] = 
	`_mm_add_•i32
Ð
m2
[4][0] , m2[6][0] ); m1[4][1] = _mm_add_epi32( m2[4][1] , m2[6][1] );

451 
m1
[5][0] = 
	`_mm_add_•i32
Ð
m2
[5][0] , m2[7][0] ); m1[5][1] = _mm_add_epi32( m2[5][1] , m2[7][1] );

452 
m1
[6][0] = 
	`_mm_sub_•i32
Ð
m2
[4][0] , m2[6][0] ); m1[6][1] = _mm_sub_epi32( m2[4][1] , m2[6][1] );

453 
m1
[7][0] = 
	`_mm_sub_•i32
Ð
m2
[5][0] , m2[7][0] ); m1[7][1] = _mm_sub_epi32( m2[5][1] , m2[7][1] );

455 
pIÅut
[0 ] = 
	`_mm_add_•i32
Ð
m1
[0][0] , m1[1][0] );…Input[1 ] = _mm_add_epi32( m1[0][1] , m1[1][1] );

456 
pIÅut
[2 ] = 
	`_mm_sub_•i32
Ð
m1
[0][0] , m1[1][0] );…Input[3 ] = _mm_sub_epi32( m1[0][1] , m1[1][1] );

457 
pIÅut
[4 ] = 
	`_mm_add_•i32
Ð
m1
[2][0] , m1[3][0] );…Input[5 ] = _mm_add_epi32( m1[2][1] , m1[3][1] );

458 
pIÅut
[6 ] = 
	`_mm_sub_•i32
Ð
m1
[2][0] , m1[3][0] );…Input[7 ] = _mm_sub_epi32( m1[2][1] , m1[3][1] );

459 
pIÅut
[8 ] = 
	`_mm_add_•i32
Ð
m1
[4][0] , m1[5][0] );…Input[9 ] = _mm_add_epi32( m1[4][1] , m1[5][1] );

460 
pIÅut
[10] = 
	`_mm_sub_•i32
Ð
m1
[4][0] , m1[5][0] );…Input[11] = _mm_sub_epi32( m1[4][1] , m1[5][1] );

461 
pIÅut
[12] = 
	`_mm_add_•i32
Ð
m1
[6][0] , m1[7][0] );…Input[13] = _mm_add_epi32( m1[6][1] , m1[7][1] );

462 
pIÅut
[14] = 
	`_mm_sub_•i32
Ð
m1
[6][0] , m1[7][0] );…Input[15] = _mm_sub_epi32( m1[6][1] , m1[7][1] );

463 
	}
}

465 
šlše
 
__m128i
 
	$simdAbs32b
Ð
__m128i
 
m
 )

467 cÚ¡ 
__m128i
 
z”o
 = 
	`_mm_£tz”o_si128
();

468 
__m128i
 
tmp
 = 
	`_mm_sub_•i32
Ð
z”o
 , 
m
 );

469 
__m128i
 
mask
 = 
	`_mm_cmpgt_•i32
Ð
m
 , 
tmp
 );

470 Ð
	`_mm_Ü_si128
Ð
	`_mm_ªd_si128
Ð
mask
 , 
m
 ) , 
	`_mm_ªdnÙ_si128
Ðmask , 
tmp
 ) ) );

471 
	}
}

473 
UIÁ
 
	$simdHADs8x8
ÐcÚ¡ 
P–
 * 
piOrg
, cÚ¡ P– * 
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
 )

475 
__m128i
 
mmDiff
[8][2];

476 
__m128i
 
mmZ”o
 = 
	`_mm_£tz”o_si128
();

477  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ , 
piOrg
 +ð
iSŒideOrg
 , 
piCur
 +ð
iSŒideCur
 )

479 
__m128i
 
diff
 = 
	`_mm_sub_•i16
Ð
	`_mm_lßdu_si128
ÐÐ__m128i* )
piOrg
 ) , _mm_lßdu_si128ÐÐ__m128i* )
piCur
 ) );

481 
__m128i
 
mask
 = 
	`_mm_cm¶t_•i16
Ð
diff
 , 
mmZ”o
 );

482 
mmDiff
[
n
][0] = 
	`_mm_uÅacklo_•i16
Ð
diff
 , 
mask
 );

483 
mmDiff
[
n
][1] = 
	`_mm_uÅackhi_•i16
Ð
diff
 , 
mask
 );

487 
	`simd8x8T¿n¥o£32b
Ð&
mmDiff
[0][0] );

490 
	`simd8x8HAD1D32b
Ð&
mmDiff
[0][0] , &mmDiff[0][0] );

493 
	`simd8x8T¿n¥o£32b
Ð&
mmDiff
[0][0] );

496 
	`simd8x8HAD1D32b
Ð&
mmDiff
[0][0] , &mmDiff[0][0] );

498 
__m128i
 
mmSum
 = 
	`_mm_£tz”o_si128
();

499  
IÁ
 
n
 = 0 ;‚ < 8 ;‚++ )

501 
mmSum
 = 
	`_mm_add_•i32
ÐmmSum , 
	`simdAbs32b
Ð
mmDiff
[
n
][0] ) );

502 
mmSum
 = 
	`_mm_add_•i32
ÐmmSum , 
	`simdAbs32b
Ð
mmDiff
[
n
][1] ) );

504 
mmSum
 = 
	`_mm_add_•i32
ÐmmSum , 
	`_mm_shufæe_•i32
ÐmmSum , 
	`_MM_SHUFFLE
( 2 , 3 , 0 , 1 ) ) );

505 
mmSum
 = 
	`_mm_add_•i32
ÐmmSum , 
	`_mm_shufæe_•i32
ÐmmSum , 
	`_MM_SHUFFLE
( 1 , 0 , 3 , 2 ) ) );

507 
UIÁ
 
§d
 = 
	`_mm_cvtsi128_si32
Ð
mmSum
 );

508 
§d
 = ( sad + 2 ) >> 2;

510 Ð
§d
 );

511 
	}
}

518 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD
Ð
Di¡P¬am
* 
pcDtP¬am
 )

520 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

522  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

524 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

525 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

526 cÚ¡ 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

527 cÚ¡ 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

528 cÚ¡ 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

529 cÚ¡ 
UIÁ
 
di¡ÜtiÚShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
 - 8);

531 
Di¡ÜtiÚ
 
uiSum
 = 0;

533 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

534 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

536 ifÐÐ
iCÞs
 & 0x07 ) == 0 )

538  
IÁ
 
iRows
 = 
pcDtP¬am
->iRows ; iRows != 0; iRows-- )

540 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 
iCÞs
 );

541 
piOrg
 +ð
iSŒideOrg
;

542 
piCur
 +ð
iSŒideCur
;

547  
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

549 
uiSum
 +ð
	`simdSADLše4n16b
Ð
piOrg
 , 
piCur
 , 
iCÞs
 );

550 
piOrg
 +ð
iSŒideOrg
;

551 
piCur
 +ð
iSŒideCur
;

558 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows ; iRows != 0; iRows-- )

560 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

562 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
piCur
[n] );

564 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
 ))

566  ( 
uiSum
 >> 
di¡ÜtiÚShiá
 );

568 
piOrg
 +ð
iSŒideOrg
;

569 
piCur
 +ð
iSŒideCur
;

571 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

575  ( 
uiSum
 >> 
di¡ÜtiÚShiá
 );

576 
	}
}

578 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD4
Ð
Di¡P¬am
* 
pcDtP¬am
 )

580 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

582  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

584 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

585 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

586 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

587 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

588 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

589 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

590 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

592 
Di¡ÜtiÚ
 
uiSum
 = 0;

594 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

595 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

597  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

599 
uiSum
 +ð
	`simdSADLše4n16b
Ð
piOrg
 , 
piCur
 , 4 );

600 
piOrg
 +ð
iSŒideOrg
;

601 
piCur
 +ð
iSŒideCur
;

607  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

609 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

610 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

611 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

612 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

614 
piOrg
 +ð
iSŒideOrg
;

615 
piCur
 +ð
iSŒideCur
;

617 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

621 
uiSum
 <<ð
iSubShiá
;

622  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

623 
	}
}

625 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD8
Ð
Di¡P¬am
* 
pcDtP¬am
 )

627 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

629  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

631 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

632 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

633 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

634 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

635 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

636 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

637 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

639 
Di¡ÜtiÚ
 
uiSum
 = 0;

641 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

642 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

644  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

646 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 8 );

647 
piOrg
 +ð
iSŒideOrg
;

648 
piCur
 +ð
iSŒideCur
;

654  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

656 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

657 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

658 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

659 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

660 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

661 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

662 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

663 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

665 
piOrg
 +ð
iSŒideOrg
;

666 
piCur
 +ð
iSŒideCur
;

668 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

672 
uiSum
 <<ð
iSubShiá
;

673  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

674 
	}
}

676 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD16
Ð
Di¡P¬am
* 
pcDtP¬am
 )

678 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

680  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

682 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

683 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

684 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

685 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

686 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

687 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

688 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

690 
Di¡ÜtiÚ
 
uiSum
 = 0;

692 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

693 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

695  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

697 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 16 );

698 
piOrg
 +ð
iSŒideOrg
;

699 
piCur
 +ð
iSŒideCur
;

705  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

707 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

708 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

709 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

710 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

711 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

712 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

713 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

714 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

715 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

716 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

717 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

718 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

719 
uiSum
 +ð
	`abs
Ð
piOrg
[12] - 
piCur
[12] );

720 
uiSum
 +ð
	`abs
Ð
piOrg
[13] - 
piCur
[13] );

721 
uiSum
 +ð
	`abs
Ð
piOrg
[14] - 
piCur
[14] );

722 
uiSum
 +ð
	`abs
Ð
piOrg
[15] - 
piCur
[15] );

724 
piOrg
 +ð
iSŒideOrg
;

725 
piCur
 +ð
iSŒideCur
;

727 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

731 
uiSum
 <<ð
iSubShiá
;

732  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

733 
	}
}

735 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD12
Ð
Di¡P¬am
* 
pcDtP¬am
 )

737 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

739  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

741 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

742 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

743 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

744 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

745 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

746 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

747 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

749 
Di¡ÜtiÚ
 
uiSum
 = 0;

751  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

753 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

754 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

755 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

756 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

757 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

758 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

759 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

760 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

761 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

762 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

763 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

764 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

766 
piOrg
 +ð
iSŒideOrg
;

767 
piCur
 +ð
iSŒideCur
;

770 
uiSum
 <<ð
iSubShiá
;

771  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

772 
	}
}

774 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD16N
Ð
Di¡P¬am
* 
pcDtP¬am
 )

776 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

777 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

778 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

779 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

780 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

781 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

782 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

783 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

785 
Di¡ÜtiÚ
 
uiSum
 = 0;

787 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

788 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

790  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

792 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 
iCÞs
 );

793 
piOrg
 +ð
iSŒideOrg
;

794 
piCur
 +ð
iSŒideCur
;

800  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

802 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚+=16 )

804 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 0] - 
piCur
[n+ 0] );

805 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 1] - 
piCur
[n+ 1] );

806 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 2] - 
piCur
[n+ 2] );

807 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 3] - 
piCur
[n+ 3] );

808 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 4] - 
piCur
[n+ 4] );

809 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 5] - 
piCur
[n+ 5] );

810 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 6] - 
piCur
[n+ 6] );

811 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 7] - 
piCur
[n+ 7] );

812 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 8] - 
piCur
[n+ 8] );

813 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+ 9] - 
piCur
[n+ 9] );

814 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+10] - 
piCur
[n+10] );

815 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+11] - 
piCur
[n+11] );

816 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+12] - 
piCur
[n+12] );

817 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+13] - 
piCur
[n+13] );

818 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+14] - 
piCur
[n+14] );

819 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
+15] - 
piCur
[n+15] );

821 
piOrg
 +ð
iSŒideOrg
;

822 
piCur
 +ð
iSŒideCur
;

824 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

828 
uiSum
 <<ð
iSubShiá
;

829  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

830 
	}
}

832 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD32
Ð
Di¡P¬am
* 
pcDtP¬am
 )

834 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

836  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

838 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

839 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

840 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

841 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

842 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

843 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

844 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

846 
Di¡ÜtiÚ
 
uiSum
 = 0;

848 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

849 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

851  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

853 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 32 );

854 
piOrg
 +ð
iSŒideOrg
;

855 
piCur
 +ð
iSŒideCur
;

861  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

863 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

864 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

865 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

866 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

867 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

868 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

869 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

870 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

871 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

872 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

873 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

874 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

875 
uiSum
 +ð
	`abs
Ð
piOrg
[12] - 
piCur
[12] );

876 
uiSum
 +ð
	`abs
Ð
piOrg
[13] - 
piCur
[13] );

877 
uiSum
 +ð
	`abs
Ð
piOrg
[14] - 
piCur
[14] );

878 
uiSum
 +ð
	`abs
Ð
piOrg
[15] - 
piCur
[15] );

879 
uiSum
 +ð
	`abs
Ð
piOrg
[16] - 
piCur
[16] );

880 
uiSum
 +ð
	`abs
Ð
piOrg
[17] - 
piCur
[17] );

881 
uiSum
 +ð
	`abs
Ð
piOrg
[18] - 
piCur
[18] );

882 
uiSum
 +ð
	`abs
Ð
piOrg
[19] - 
piCur
[19] );

883 
uiSum
 +ð
	`abs
Ð
piOrg
[20] - 
piCur
[20] );

884 
uiSum
 +ð
	`abs
Ð
piOrg
[21] - 
piCur
[21] );

885 
uiSum
 +ð
	`abs
Ð
piOrg
[22] - 
piCur
[22] );

886 
uiSum
 +ð
	`abs
Ð
piOrg
[23] - 
piCur
[23] );

887 
uiSum
 +ð
	`abs
Ð
piOrg
[24] - 
piCur
[24] );

888 
uiSum
 +ð
	`abs
Ð
piOrg
[25] - 
piCur
[25] );

889 
uiSum
 +ð
	`abs
Ð
piOrg
[26] - 
piCur
[26] );

890 
uiSum
 +ð
	`abs
Ð
piOrg
[27] - 
piCur
[27] );

891 
uiSum
 +ð
	`abs
Ð
piOrg
[28] - 
piCur
[28] );

892 
uiSum
 +ð
	`abs
Ð
piOrg
[29] - 
piCur
[29] );

893 
uiSum
 +ð
	`abs
Ð
piOrg
[30] - 
piCur
[30] );

894 
uiSum
 +ð
	`abs
Ð
piOrg
[31] - 
piCur
[31] );

896 
piOrg
 +ð
iSŒideOrg
;

897 
piCur
 +ð
iSŒideCur
;

899 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

903 
uiSum
 <<ð
iSubShiá
;

904  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

905 
	}
}

907 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD24
Ð
Di¡P¬am
* 
pcDtP¬am
 )

909 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

911  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

913 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

914 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

915 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

916 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

917 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

918 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

919 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

921 
Di¡ÜtiÚ
 
uiSum
 = 0;

923 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

924 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

926  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

928 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 24 );

929 
piOrg
 +ð
iSŒideOrg
;

930 
piCur
 +ð
iSŒideCur
;

936  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

938 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

939 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

940 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

941 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

942 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

943 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

944 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

945 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

946 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

947 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

948 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

949 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

950 
uiSum
 +ð
	`abs
Ð
piOrg
[12] - 
piCur
[12] );

951 
uiSum
 +ð
	`abs
Ð
piOrg
[13] - 
piCur
[13] );

952 
uiSum
 +ð
	`abs
Ð
piOrg
[14] - 
piCur
[14] );

953 
uiSum
 +ð
	`abs
Ð
piOrg
[15] - 
piCur
[15] );

954 
uiSum
 +ð
	`abs
Ð
piOrg
[16] - 
piCur
[16] );

955 
uiSum
 +ð
	`abs
Ð
piOrg
[17] - 
piCur
[17] );

956 
uiSum
 +ð
	`abs
Ð
piOrg
[18] - 
piCur
[18] );

957 
uiSum
 +ð
	`abs
Ð
piOrg
[19] - 
piCur
[19] );

958 
uiSum
 +ð
	`abs
Ð
piOrg
[20] - 
piCur
[20] );

959 
uiSum
 +ð
	`abs
Ð
piOrg
[21] - 
piCur
[21] );

960 
uiSum
 +ð
	`abs
Ð
piOrg
[22] - 
piCur
[22] );

961 
uiSum
 +ð
	`abs
Ð
piOrg
[23] - 
piCur
[23] );

963 
piOrg
 +ð
iSŒideOrg
;

964 
piCur
 +ð
iSŒideCur
;

966 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

970 
uiSum
 <<ð
iSubShiá
;

971  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

972 
	}
}

974 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD64
Ð
Di¡P¬am
* 
pcDtP¬am
 )

976 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

978  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

980 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

981 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

982 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

983 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

984 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

985 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

986 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

988 
Di¡ÜtiÚ
 
uiSum
 = 0;

990 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

991 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

993  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

995 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 64 );

996 
piOrg
 +ð
iSŒideOrg
;

997 
piCur
 +ð
iSŒideCur
;

1003  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

1005 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

1006 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

1007 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

1008 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

1009 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

1010 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

1011 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

1012 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

1013 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

1014 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

1015 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

1016 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

1017 
uiSum
 +ð
	`abs
Ð
piOrg
[12] - 
piCur
[12] );

1018 
uiSum
 +ð
	`abs
Ð
piOrg
[13] - 
piCur
[13] );

1019 
uiSum
 +ð
	`abs
Ð
piOrg
[14] - 
piCur
[14] );

1020 
uiSum
 +ð
	`abs
Ð
piOrg
[15] - 
piCur
[15] );

1021 
uiSum
 +ð
	`abs
Ð
piOrg
[16] - 
piCur
[16] );

1022 
uiSum
 +ð
	`abs
Ð
piOrg
[17] - 
piCur
[17] );

1023 
uiSum
 +ð
	`abs
Ð
piOrg
[18] - 
piCur
[18] );

1024 
uiSum
 +ð
	`abs
Ð
piOrg
[19] - 
piCur
[19] );

1025 
uiSum
 +ð
	`abs
Ð
piOrg
[20] - 
piCur
[20] );

1026 
uiSum
 +ð
	`abs
Ð
piOrg
[21] - 
piCur
[21] );

1027 
uiSum
 +ð
	`abs
Ð
piOrg
[22] - 
piCur
[22] );

1028 
uiSum
 +ð
	`abs
Ð
piOrg
[23] - 
piCur
[23] );

1029 
uiSum
 +ð
	`abs
Ð
piOrg
[24] - 
piCur
[24] );

1030 
uiSum
 +ð
	`abs
Ð
piOrg
[25] - 
piCur
[25] );

1031 
uiSum
 +ð
	`abs
Ð
piOrg
[26] - 
piCur
[26] );

1032 
uiSum
 +ð
	`abs
Ð
piOrg
[27] - 
piCur
[27] );

1033 
uiSum
 +ð
	`abs
Ð
piOrg
[28] - 
piCur
[28] );

1034 
uiSum
 +ð
	`abs
Ð
piOrg
[29] - 
piCur
[29] );

1035 
uiSum
 +ð
	`abs
Ð
piOrg
[30] - 
piCur
[30] );

1036 
uiSum
 +ð
	`abs
Ð
piOrg
[31] - 
piCur
[31] );

1037 
uiSum
 +ð
	`abs
Ð
piOrg
[32] - 
piCur
[32] );

1038 
uiSum
 +ð
	`abs
Ð
piOrg
[33] - 
piCur
[33] );

1039 
uiSum
 +ð
	`abs
Ð
piOrg
[34] - 
piCur
[34] );

1040 
uiSum
 +ð
	`abs
Ð
piOrg
[35] - 
piCur
[35] );

1041 
uiSum
 +ð
	`abs
Ð
piOrg
[36] - 
piCur
[36] );

1042 
uiSum
 +ð
	`abs
Ð
piOrg
[37] - 
piCur
[37] );

1043 
uiSum
 +ð
	`abs
Ð
piOrg
[38] - 
piCur
[38] );

1044 
uiSum
 +ð
	`abs
Ð
piOrg
[39] - 
piCur
[39] );

1045 
uiSum
 +ð
	`abs
Ð
piOrg
[40] - 
piCur
[40] );

1046 
uiSum
 +ð
	`abs
Ð
piOrg
[41] - 
piCur
[41] );

1047 
uiSum
 +ð
	`abs
Ð
piOrg
[42] - 
piCur
[42] );

1048 
uiSum
 +ð
	`abs
Ð
piOrg
[43] - 
piCur
[43] );

1049 
uiSum
 +ð
	`abs
Ð
piOrg
[44] - 
piCur
[44] );

1050 
uiSum
 +ð
	`abs
Ð
piOrg
[45] - 
piCur
[45] );

1051 
uiSum
 +ð
	`abs
Ð
piOrg
[46] - 
piCur
[46] );

1052 
uiSum
 +ð
	`abs
Ð
piOrg
[47] - 
piCur
[47] );

1053 
uiSum
 +ð
	`abs
Ð
piOrg
[48] - 
piCur
[48] );

1054 
uiSum
 +ð
	`abs
Ð
piOrg
[49] - 
piCur
[49] );

1055 
uiSum
 +ð
	`abs
Ð
piOrg
[50] - 
piCur
[50] );

1056 
uiSum
 +ð
	`abs
Ð
piOrg
[51] - 
piCur
[51] );

1057 
uiSum
 +ð
	`abs
Ð
piOrg
[52] - 
piCur
[52] );

1058 
uiSum
 +ð
	`abs
Ð
piOrg
[53] - 
piCur
[53] );

1059 
uiSum
 +ð
	`abs
Ð
piOrg
[54] - 
piCur
[54] );

1060 
uiSum
 +ð
	`abs
Ð
piOrg
[55] - 
piCur
[55] );

1061 
uiSum
 +ð
	`abs
Ð
piOrg
[56] - 
piCur
[56] );

1062 
uiSum
 +ð
	`abs
Ð
piOrg
[57] - 
piCur
[57] );

1063 
uiSum
 +ð
	`abs
Ð
piOrg
[58] - 
piCur
[58] );

1064 
uiSum
 +ð
	`abs
Ð
piOrg
[59] - 
piCur
[59] );

1065 
uiSum
 +ð
	`abs
Ð
piOrg
[60] - 
piCur
[60] );

1066 
uiSum
 +ð
	`abs
Ð
piOrg
[61] - 
piCur
[61] );

1067 
uiSum
 +ð
	`abs
Ð
piOrg
[62] - 
piCur
[62] );

1068 
uiSum
 +ð
	`abs
Ð
piOrg
[63] - 
piCur
[63] );

1070 
piOrg
 +ð
iSŒideOrg
;

1071 
piCur
 +ð
iSŒideCur
;

1073 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1077 
uiSum
 <<ð
iSubShiá
;

1078  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

1079 
	}
}

1081 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SAD48
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1083 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1085  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SADw
Ð
pcDtP¬am
 );

1087 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1088 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1089 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1090 
IÁ
 
iSubShiá
 = 
pcDtP¬am
->iSubShift;

1091 
IÁ
 
iSubS‹p
 = ( 1 << 
iSubShiá
 );

1092 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iSŒideCur*
iSubS‹p
;

1093 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iSŒideOrg*
iSubS‹p
;

1095 
Di¡ÜtiÚ
 
uiSum
 = 0;

1097 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1098 ifÐ
pcDtP¬am
->
b™D•th
 <= 10 )

1100  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

1102 
uiSum
 +ð
	`simdSADLše8n16b
Ð
piOrg
 , 
piCur
 , 48 );

1103 
piOrg
 +ð
iSŒideOrg
;

1104 
piCur
 +ð
iSŒideCur
;

1110  ; 
iRows
 !ð0; iRows-=
iSubS‹p
 )

1112 
uiSum
 +ð
	`abs
Ð
piOrg
[0] - 
piCur
[0] );

1113 
uiSum
 +ð
	`abs
Ð
piOrg
[1] - 
piCur
[1] );

1114 
uiSum
 +ð
	`abs
Ð
piOrg
[2] - 
piCur
[2] );

1115 
uiSum
 +ð
	`abs
Ð
piOrg
[3] - 
piCur
[3] );

1116 
uiSum
 +ð
	`abs
Ð
piOrg
[4] - 
piCur
[4] );

1117 
uiSum
 +ð
	`abs
Ð
piOrg
[5] - 
piCur
[5] );

1118 
uiSum
 +ð
	`abs
Ð
piOrg
[6] - 
piCur
[6] );

1119 
uiSum
 +ð
	`abs
Ð
piOrg
[7] - 
piCur
[7] );

1120 
uiSum
 +ð
	`abs
Ð
piOrg
[8] - 
piCur
[8] );

1121 
uiSum
 +ð
	`abs
Ð
piOrg
[9] - 
piCur
[9] );

1122 
uiSum
 +ð
	`abs
Ð
piOrg
[10] - 
piCur
[10] );

1123 
uiSum
 +ð
	`abs
Ð
piOrg
[11] - 
piCur
[11] );

1124 
uiSum
 +ð
	`abs
Ð
piOrg
[12] - 
piCur
[12] );

1125 
uiSum
 +ð
	`abs
Ð
piOrg
[13] - 
piCur
[13] );

1126 
uiSum
 +ð
	`abs
Ð
piOrg
[14] - 
piCur
[14] );

1127 
uiSum
 +ð
	`abs
Ð
piOrg
[15] - 
piCur
[15] );

1128 
uiSum
 +ð
	`abs
Ð
piOrg
[16] - 
piCur
[16] );

1129 
uiSum
 +ð
	`abs
Ð
piOrg
[17] - 
piCur
[17] );

1130 
uiSum
 +ð
	`abs
Ð
piOrg
[18] - 
piCur
[18] );

1131 
uiSum
 +ð
	`abs
Ð
piOrg
[19] - 
piCur
[19] );

1132 
uiSum
 +ð
	`abs
Ð
piOrg
[20] - 
piCur
[20] );

1133 
uiSum
 +ð
	`abs
Ð
piOrg
[21] - 
piCur
[21] );

1134 
uiSum
 +ð
	`abs
Ð
piOrg
[22] - 
piCur
[22] );

1135 
uiSum
 +ð
	`abs
Ð
piOrg
[23] - 
piCur
[23] );

1136 
uiSum
 +ð
	`abs
Ð
piOrg
[24] - 
piCur
[24] );

1137 
uiSum
 +ð
	`abs
Ð
piOrg
[25] - 
piCur
[25] );

1138 
uiSum
 +ð
	`abs
Ð
piOrg
[26] - 
piCur
[26] );

1139 
uiSum
 +ð
	`abs
Ð
piOrg
[27] - 
piCur
[27] );

1140 
uiSum
 +ð
	`abs
Ð
piOrg
[28] - 
piCur
[28] );

1141 
uiSum
 +ð
	`abs
Ð
piOrg
[29] - 
piCur
[29] );

1142 
uiSum
 +ð
	`abs
Ð
piOrg
[30] - 
piCur
[30] );

1143 
uiSum
 +ð
	`abs
Ð
piOrg
[31] - 
piCur
[31] );

1144 
uiSum
 +ð
	`abs
Ð
piOrg
[32] - 
piCur
[32] );

1145 
uiSum
 +ð
	`abs
Ð
piOrg
[33] - 
piCur
[33] );

1146 
uiSum
 +ð
	`abs
Ð
piOrg
[34] - 
piCur
[34] );

1147 
uiSum
 +ð
	`abs
Ð
piOrg
[35] - 
piCur
[35] );

1148 
uiSum
 +ð
	`abs
Ð
piOrg
[36] - 
piCur
[36] );

1149 
uiSum
 +ð
	`abs
Ð
piOrg
[37] - 
piCur
[37] );

1150 
uiSum
 +ð
	`abs
Ð
piOrg
[38] - 
piCur
[38] );

1151 
uiSum
 +ð
	`abs
Ð
piOrg
[39] - 
piCur
[39] );

1152 
uiSum
 +ð
	`abs
Ð
piOrg
[40] - 
piCur
[40] );

1153 
uiSum
 +ð
	`abs
Ð
piOrg
[41] - 
piCur
[41] );

1154 
uiSum
 +ð
	`abs
Ð
piOrg
[42] - 
piCur
[42] );

1155 
uiSum
 +ð
	`abs
Ð
piOrg
[43] - 
piCur
[43] );

1156 
uiSum
 +ð
	`abs
Ð
piOrg
[44] - 
piCur
[44] );

1157 
uiSum
 +ð
	`abs
Ð
piOrg
[45] - 
piCur
[45] );

1158 
uiSum
 +ð
	`abs
Ð
piOrg
[46] - 
piCur
[46] );

1159 
uiSum
 +ð
	`abs
Ð
piOrg
[47] - 
piCur
[47] );

1161 
piOrg
 +ð
iSŒideOrg
;

1162 
piCur
 +ð
iSŒideCur
;

1164 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1168 
uiSum
 <<ð
iSubShiá
;

1169  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

1170 
	}
}

1176 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1178 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1180  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1182 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1183 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1184 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1185 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

1186 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1187 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1189 
Di¡ÜtiÚ
 
uiSum
 = 0;

1190 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1192 
IÁ”medŸ‹_IÁ
 
iTemp
;

1194  ; 
iRows
 != 0; iRows-- )

1196 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

1198 
iTemp
 = 
piOrg
[
n
 ] - 
piCur
[n ];

1199 
uiSum
 +ð
	`Di¡ÜtiÚ
(Ð
iTemp
 * iTem°è>> 
uiShiá
);

1201 
piOrg
 +ð
iSŒideOrg
;

1202 
piCur
 +ð
iSŒideCur
;

1205  ( 
uiSum
 );

1206 
	}
}

1208 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE4
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1210 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1212 
	`as£¹
Ð
pcDtP¬am
->
iCÞs
 == 4 );

1213  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1215 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1216 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1217 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1218 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1219 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1221 
Di¡ÜtiÚ
 
uiSum
 = 0;

1222 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1224 
IÁ”medŸ‹_IÁ
 
iTemp
;

1226  ; 
iRows
 != 0; iRows-- )

1229 
iTemp
 = 
piOrg
[0] - 
piCur
[0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1230 
iTemp
 = 
piOrg
[1] - 
piCur
[1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1231 
iTemp
 = 
piOrg
[2] - 
piCur
[2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1232 
iTemp
 = 
piOrg
[3] - 
piCur
[3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1234 
piOrg
 +ð
iSŒideOrg
;

1235 
piCur
 +ð
iSŒideCur
;

1238  ( 
uiSum
 );

1239 
	}
}

1241 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE8
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1243 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1245 
	`as£¹
Ð
pcDtP¬am
->
iCÞs
 == 8 );

1246  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1248 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1249 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1250 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1251 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1252 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1254 
Di¡ÜtiÚ
 
uiSum
 = 0;

1255 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1257 
IÁ”medŸ‹_IÁ
 
iTemp
;

1259  ; 
iRows
 != 0; iRows-- )

1261 
iTemp
 = 
piOrg
[0] - 
piCur
[0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1262 
iTemp
 = 
piOrg
[1] - 
piCur
[1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1263 
iTemp
 = 
piOrg
[2] - 
piCur
[2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1264 
iTemp
 = 
piOrg
[3] - 
piCur
[3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1265 
iTemp
 = 
piOrg
[4] - 
piCur
[4]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1266 
iTemp
 = 
piOrg
[5] - 
piCur
[5]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1267 
iTemp
 = 
piOrg
[6] - 
piCur
[6]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1268 
iTemp
 = 
piOrg
[7] - 
piCur
[7]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1270 
piOrg
 +ð
iSŒideOrg
;

1271 
piCur
 +ð
iSŒideCur
;

1274  ( 
uiSum
 );

1275 
	}
}

1277 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE16
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1279 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1281 
	`as£¹
Ð
pcDtP¬am
->
iCÞs
 == 16 );

1282  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1284 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1285 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1286 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1287 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1288 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1290 
Di¡ÜtiÚ
 
uiSum
 = 0;

1291 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1293 
IÁ”medŸ‹_IÁ
 
iTemp
;

1295  ; 
iRows
 != 0; iRows-- )

1298 
iTemp
 = 
piOrg
[ 0] - 
piCur
[ 0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1299 
iTemp
 = 
piOrg
[ 1] - 
piCur
[ 1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1300 
iTemp
 = 
piOrg
[ 2] - 
piCur
[ 2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1301 
iTemp
 = 
piOrg
[ 3] - 
piCur
[ 3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1302 
iTemp
 = 
piOrg
[ 4] - 
piCur
[ 4]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1303 
iTemp
 = 
piOrg
[ 5] - 
piCur
[ 5]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1304 
iTemp
 = 
piOrg
[ 6] - 
piCur
[ 6]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1305 
iTemp
 = 
piOrg
[ 7] - 
piCur
[ 7]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1306 
iTemp
 = 
piOrg
[ 8] - 
piCur
[ 8]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1307 
iTemp
 = 
piOrg
[ 9] - 
piCur
[ 9]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1308 
iTemp
 = 
piOrg
[10] - 
piCur
[10]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1309 
iTemp
 = 
piOrg
[11] - 
piCur
[11]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1310 
iTemp
 = 
piOrg
[12] - 
piCur
[12]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1311 
iTemp
 = 
piOrg
[13] - 
piCur
[13]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1312 
iTemp
 = 
piOrg
[14] - 
piCur
[14]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1313 
iTemp
 = 
piOrg
[15] - 
piCur
[15]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1315 
piOrg
 +ð
iSŒideOrg
;

1316 
piCur
 +ð
iSŒideCur
;

1319  ( 
uiSum
 );

1320 
	}
}

1322 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE16N
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1324 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1326  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1328 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1329 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1330 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1331 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

1332 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1333 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1335 
Di¡ÜtiÚ
 
uiSum
 = 0;

1336 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1338 
IÁ”medŸ‹_IÁ
 
iTemp
;

1340  ; 
iRows
 != 0; iRows-- )

1342 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚+=16 )

1345 
iTemp
 = 
piOrg
[
n
+ 0] - 
piCur
[n+ 0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1346 
iTemp
 = 
piOrg
[
n
+ 1] - 
piCur
[n+ 1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1347 
iTemp
 = 
piOrg
[
n
+ 2] - 
piCur
[n+ 2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1348 
iTemp
 = 
piOrg
[
n
+ 3] - 
piCur
[n+ 3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1349 
iTemp
 = 
piOrg
[
n
+ 4] - 
piCur
[n+ 4]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1350 
iTemp
 = 
piOrg
[
n
+ 5] - 
piCur
[n+ 5]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1351 
iTemp
 = 
piOrg
[
n
+ 6] - 
piCur
[n+ 6]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1352 
iTemp
 = 
piOrg
[
n
+ 7] - 
piCur
[n+ 7]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1353 
iTemp
 = 
piOrg
[
n
+ 8] - 
piCur
[n+ 8]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1354 
iTemp
 = 
piOrg
[
n
+ 9] - 
piCur
[n+ 9]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1355 
iTemp
 = 
piOrg
[
n
+10] - 
piCur
[n+10]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1356 
iTemp
 = 
piOrg
[
n
+11] - 
piCur
[n+11]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1357 
iTemp
 = 
piOrg
[
n
+12] - 
piCur
[n+12]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1358 
iTemp
 = 
piOrg
[
n
+13] - 
piCur
[n+13]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1359 
iTemp
 = 
piOrg
[
n
+14] - 
piCur
[n+14]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1360 
iTemp
 = 
piOrg
[
n
+15] - 
piCur
[n+15]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1363 
piOrg
 +ð
iSŒideOrg
;

1364 
piCur
 +ð
iSŒideCur
;

1367  ( 
uiSum
 );

1368 
	}
}

1370 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE32
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1372 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1374 
	`as£¹
Ð
pcDtP¬am
->
iCÞs
 == 32 );

1375  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1377 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1378 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1379 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1380 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1381 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1383 
Di¡ÜtiÚ
 
uiSum
 = 0;

1384 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1386 
IÁ”medŸ‹_IÁ
 
iTemp
;

1388  ; 
iRows
 != 0; iRows-- )

1391 
iTemp
 = 
piOrg
[ 0] - 
piCur
[ 0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1392 
iTemp
 = 
piOrg
[ 1] - 
piCur
[ 1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1393 
iTemp
 = 
piOrg
[ 2] - 
piCur
[ 2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1394 
iTemp
 = 
piOrg
[ 3] - 
piCur
[ 3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1395 
iTemp
 = 
piOrg
[ 4] - 
piCur
[ 4]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1396 
iTemp
 = 
piOrg
[ 5] - 
piCur
[ 5]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1397 
iTemp
 = 
piOrg
[ 6] - 
piCur
[ 6]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1398 
iTemp
 = 
piOrg
[ 7] - 
piCur
[ 7]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1399 
iTemp
 = 
piOrg
[ 8] - 
piCur
[ 8]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1400 
iTemp
 = 
piOrg
[ 9] - 
piCur
[ 9]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1401 
iTemp
 = 
piOrg
[10] - 
piCur
[10]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1402 
iTemp
 = 
piOrg
[11] - 
piCur
[11]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1403 
iTemp
 = 
piOrg
[12] - 
piCur
[12]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1404 
iTemp
 = 
piOrg
[13] - 
piCur
[13]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1405 
iTemp
 = 
piOrg
[14] - 
piCur
[14]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1406 
iTemp
 = 
piOrg
[15] - 
piCur
[15]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1407 
iTemp
 = 
piOrg
[16] - 
piCur
[16]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1408 
iTemp
 = 
piOrg
[17] - 
piCur
[17]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1409 
iTemp
 = 
piOrg
[18] - 
piCur
[18]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1410 
iTemp
 = 
piOrg
[19] - 
piCur
[19]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1411 
iTemp
 = 
piOrg
[20] - 
piCur
[20]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1412 
iTemp
 = 
piOrg
[21] - 
piCur
[21]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1413 
iTemp
 = 
piOrg
[22] - 
piCur
[22]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1414 
iTemp
 = 
piOrg
[23] - 
piCur
[23]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1415 
iTemp
 = 
piOrg
[24] - 
piCur
[24]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1416 
iTemp
 = 
piOrg
[25] - 
piCur
[25]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1417 
iTemp
 = 
piOrg
[26] - 
piCur
[26]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1418 
iTemp
 = 
piOrg
[27] - 
piCur
[27]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1419 
iTemp
 = 
piOrg
[28] - 
piCur
[28]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1420 
iTemp
 = 
piOrg
[29] - 
piCur
[29]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1421 
iTemp
 = 
piOrg
[30] - 
piCur
[30]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1422 
iTemp
 = 
piOrg
[31] - 
piCur
[31]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1424 
piOrg
 +ð
iSŒideOrg
;

1425 
piCur
 +ð
iSŒideCur
;

1428  ( 
uiSum
 );

1429 
	}
}

1431 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘SSE64
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1433 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1435 
	`as£¹
Ð
pcDtP¬am
->
iCÞs
 == 64 );

1436  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘SSEw
Ð
pcDtP¬am
 );

1438 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1439 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1440 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1441 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1442 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1444 
Di¡ÜtiÚ
 
uiSum
 = 0;

1445 
UIÁ
 
uiShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

1447 
IÁ”medŸ‹_IÁ
 
iTemp
;

1449  ; 
iRows
 != 0; iRows-- )

1451 
iTemp
 = 
piOrg
[ 0] - 
piCur
[ 0]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1452 
iTemp
 = 
piOrg
[ 1] - 
piCur
[ 1]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1453 
iTemp
 = 
piOrg
[ 2] - 
piCur
[ 2]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1454 
iTemp
 = 
piOrg
[ 3] - 
piCur
[ 3]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1455 
iTemp
 = 
piOrg
[ 4] - 
piCur
[ 4]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1456 
iTemp
 = 
piOrg
[ 5] - 
piCur
[ 5]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1457 
iTemp
 = 
piOrg
[ 6] - 
piCur
[ 6]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1458 
iTemp
 = 
piOrg
[ 7] - 
piCur
[ 7]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1459 
iTemp
 = 
piOrg
[ 8] - 
piCur
[ 8]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1460 
iTemp
 = 
piOrg
[ 9] - 
piCur
[ 9]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1461 
iTemp
 = 
piOrg
[10] - 
piCur
[10]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1462 
iTemp
 = 
piOrg
[11] - 
piCur
[11]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1463 
iTemp
 = 
piOrg
[12] - 
piCur
[12]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1464 
iTemp
 = 
piOrg
[13] - 
piCur
[13]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1465 
iTemp
 = 
piOrg
[14] - 
piCur
[14]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1466 
iTemp
 = 
piOrg
[15] - 
piCur
[15]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1467 
iTemp
 = 
piOrg
[16] - 
piCur
[16]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1468 
iTemp
 = 
piOrg
[17] - 
piCur
[17]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1469 
iTemp
 = 
piOrg
[18] - 
piCur
[18]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1470 
iTemp
 = 
piOrg
[19] - 
piCur
[19]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1471 
iTemp
 = 
piOrg
[20] - 
piCur
[20]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1472 
iTemp
 = 
piOrg
[21] - 
piCur
[21]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1473 
iTemp
 = 
piOrg
[22] - 
piCur
[22]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1474 
iTemp
 = 
piOrg
[23] - 
piCur
[23]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1475 
iTemp
 = 
piOrg
[24] - 
piCur
[24]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1476 
iTemp
 = 
piOrg
[25] - 
piCur
[25]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1477 
iTemp
 = 
piOrg
[26] - 
piCur
[26]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1478 
iTemp
 = 
piOrg
[27] - 
piCur
[27]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1479 
iTemp
 = 
piOrg
[28] - 
piCur
[28]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1480 
iTemp
 = 
piOrg
[29] - 
piCur
[29]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1481 
iTemp
 = 
piOrg
[30] - 
piCur
[30]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1482 
iTemp
 = 
piOrg
[31] - 
piCur
[31]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1483 
iTemp
 = 
piOrg
[32] - 
piCur
[32]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1484 
iTemp
 = 
piOrg
[33] - 
piCur
[33]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1485 
iTemp
 = 
piOrg
[34] - 
piCur
[34]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1486 
iTemp
 = 
piOrg
[35] - 
piCur
[35]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1487 
iTemp
 = 
piOrg
[36] - 
piCur
[36]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1488 
iTemp
 = 
piOrg
[37] - 
piCur
[37]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1489 
iTemp
 = 
piOrg
[38] - 
piCur
[38]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1490 
iTemp
 = 
piOrg
[39] - 
piCur
[39]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1491 
iTemp
 = 
piOrg
[40] - 
piCur
[40]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1492 
iTemp
 = 
piOrg
[41] - 
piCur
[41]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1493 
iTemp
 = 
piOrg
[42] - 
piCur
[42]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1494 
iTemp
 = 
piOrg
[43] - 
piCur
[43]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1495 
iTemp
 = 
piOrg
[44] - 
piCur
[44]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1496 
iTemp
 = 
piOrg
[45] - 
piCur
[45]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1497 
iTemp
 = 
piOrg
[46] - 
piCur
[46]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1498 
iTemp
 = 
piOrg
[47] - 
piCur
[47]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1499 
iTemp
 = 
piOrg
[48] - 
piCur
[48]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1500 
iTemp
 = 
piOrg
[49] - 
piCur
[49]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1501 
iTemp
 = 
piOrg
[50] - 
piCur
[50]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1502 
iTemp
 = 
piOrg
[51] - 
piCur
[51]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1503 
iTemp
 = 
piOrg
[52] - 
piCur
[52]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1504 
iTemp
 = 
piOrg
[53] - 
piCur
[53]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1505 
iTemp
 = 
piOrg
[54] - 
piCur
[54]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1506 
iTemp
 = 
piOrg
[55] - 
piCur
[55]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1507 
iTemp
 = 
piOrg
[56] - 
piCur
[56]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1508 
iTemp
 = 
piOrg
[57] - 
piCur
[57]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1509 
iTemp
 = 
piOrg
[58] - 
piCur
[58]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1510 
iTemp
 = 
piOrg
[59] - 
piCur
[59]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1511 
iTemp
 = 
piOrg
[60] - 
piCur
[60]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1512 
iTemp
 = 
piOrg
[61] - 
piCur
[61]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1513 
iTemp
 = 
piOrg
[62] - 
piCur
[62]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1514 
iTemp
 = 
piOrg
[63] - 
piCur
[63]; 
uiSum
 +ð
	`Di¡ÜtiÚ
(ÐiTem°* iTem°è>> 
uiShiá
);

1516 
piOrg
 +ð
iSŒideOrg
;

1517 
piCur
 +ð
iSŒideCur
;

1520  ( 
uiSum
 );

1521 
	}
}

1527 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xC®cHADs2x2
ÐcÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 )

1529 
Di¡ÜtiÚ
 
§td
 = 0;

1530 
TCÛff
 
diff
[4], 
m
[4];

1531 
	`as£¹
Ð
iS‹p
 == 1 );

1532 
diff
[0] = 
piOrg
[0 ] - 
piCur
[0];

1533 
diff
[1] = 
piOrg
[1 ] - 
piCur
[1];

1534 
diff
[2] = 
piOrg
[
iSŒideOrg
 ] - 
piCur
[0 + 
iSŒideCur
];

1535 
diff
[3] = 
piOrg
[
iSŒideOrg
 + 1] - 
piCur
[1 + 
iSŒideCur
];

1536 
m
[0] = 
diff
[0] + diff[2];

1537 
m
[1] = 
diff
[1] + diff[3];

1538 
m
[2] = 
diff
[0] - diff[2];

1539 
m
[3] = 
diff
[1] - diff[3];

1541 
§td
 +ð
	`abs
(
m
[0] + m[1]);

1542 
§td
 +ð
	`abs
(
m
[0] - m[1]);

1543 
§td
 +ð
	`abs
(
m
[2] + m[3]);

1544 
§td
 +ð
	`abs
(
m
[2] - m[3]);

1546  
§td
;

1547 
	}
}

1549 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xC®cHADs4x4
ÐcÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 )

1551 
IÁ
 
k
;

1552 
Di¡ÜtiÚ
 
§td
 = 0;

1553 
TCÛff
 
diff
[16], 
m
[16], 
d
[16];

1555 
	`as£¹
Ð
iS‹p
 == 1 );

1556  
k
 = 0; k < 16; k+=4 )

1558 
diff
[
k
+0] = 
piOrg
[0] - 
piCur
[0];

1559 
diff
[
k
+1] = 
piOrg
[1] - 
piCur
[1];

1560 
diff
[
k
+2] = 
piOrg
[2] - 
piCur
[2];

1561 
diff
[
k
+3] = 
piOrg
[3] - 
piCur
[3];

1563 
piCur
 +ð
iSŒideCur
;

1564 
piOrg
 +ð
iSŒideOrg
;

1568 
m
[ 0] = 
diff
[ 0] + diff[12];

1569 
m
[ 1] = 
diff
[ 1] + diff[13];

1570 
m
[ 2] = 
diff
[ 2] + diff[14];

1571 
m
[ 3] = 
diff
[ 3] + diff[15];

1572 
m
[ 4] = 
diff
[ 4] + diff[ 8];

1573 
m
[ 5] = 
diff
[ 5] + diff[ 9];

1574 
m
[ 6] = 
diff
[ 6] + diff[10];

1575 
m
[ 7] = 
diff
[ 7] + diff[11];

1576 
m
[ 8] = 
diff
[ 4] - diff[ 8];

1577 
m
[ 9] = 
diff
[ 5] - diff[ 9];

1578 
m
[10] = 
diff
[ 6] - diff[10];

1579 
m
[11] = 
diff
[ 7] - diff[11];

1580 
m
[12] = 
diff
[ 0] - diff[12];

1581 
m
[13] = 
diff
[ 1] - diff[13];

1582 
m
[14] = 
diff
[ 2] - diff[14];

1583 
m
[15] = 
diff
[ 3] - diff[15];

1585 
d
[ 0] = 
m
[ 0] + m[ 4];

1586 
d
[ 1] = 
m
[ 1] + m[ 5];

1587 
d
[ 2] = 
m
[ 2] + m[ 6];

1588 
d
[ 3] = 
m
[ 3] + m[ 7];

1589 
d
[ 4] = 
m
[ 8] + m[12];

1590 
d
[ 5] = 
m
[ 9] + m[13];

1591 
d
[ 6] = 
m
[10] + m[14];

1592 
d
[ 7] = 
m
[11] + m[15];

1593 
d
[ 8] = 
m
[ 0] - m[ 4];

1594 
d
[ 9] = 
m
[ 1] - m[ 5];

1595 
d
[10] = 
m
[ 2] - m[ 6];

1596 
d
[11] = 
m
[ 3] - m[ 7];

1597 
d
[12] = 
m
[12] - m[ 8];

1598 
d
[13] = 
m
[13] - m[ 9];

1599 
d
[14] = 
m
[14] - m[10];

1600 
d
[15] = 
m
[15] - m[11];

1602 
m
[ 0] = 
d
[ 0] + d[ 3];

1603 
m
[ 1] = 
d
[ 1] + d[ 2];

1604 
m
[ 2] = 
d
[ 1] - d[ 2];

1605 
m
[ 3] = 
d
[ 0] - d[ 3];

1606 
m
[ 4] = 
d
[ 4] + d[ 7];

1607 
m
[ 5] = 
d
[ 5] + d[ 6];

1608 
m
[ 6] = 
d
[ 5] - d[ 6];

1609 
m
[ 7] = 
d
[ 4] - d[ 7];

1610 
m
[ 8] = 
d
[ 8] + d[11];

1611 
m
[ 9] = 
d
[ 9] + d[10];

1612 
m
[10] = 
d
[ 9] - d[10];

1613 
m
[11] = 
d
[ 8] - d[11];

1614 
m
[12] = 
d
[12] + d[15];

1615 
m
[13] = 
d
[13] + d[14];

1616 
m
[14] = 
d
[13] - d[14];

1617 
m
[15] = 
d
[12] - d[15];

1619 
d
[ 0] = 
m
[ 0] + m[ 1];

1620 
d
[ 1] = 
m
[ 0] - m[ 1];

1621 
d
[ 2] = 
m
[ 2] + m[ 3];

1622 
d
[ 3] = 
m
[ 3] - m[ 2];

1623 
d
[ 4] = 
m
[ 4] + m[ 5];

1624 
d
[ 5] = 
m
[ 4] - m[ 5];

1625 
d
[ 6] = 
m
[ 6] + m[ 7];

1626 
d
[ 7] = 
m
[ 7] - m[ 6];

1627 
d
[ 8] = 
m
[ 8] + m[ 9];

1628 
d
[ 9] = 
m
[ 8] - m[ 9];

1629 
d
[10] = 
m
[10] + m[11];

1630 
d
[11] = 
m
[11] - m[10];

1631 
d
[12] = 
m
[12] + m[13];

1632 
d
[13] = 
m
[12] - m[13];

1633 
d
[14] = 
m
[14] + m[15];

1634 
d
[15] = 
m
[15] - m[14];

1636 
k
=0; k<16; ++k)

1638 
§td
 +ð
	`abs
(
d
[
k
]);

1640 
§td
 = ((satd+1)>>1);

1642  
§td
;

1643 
	}
}

1645 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
xC®cHADs8x8
ÐcÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p


1646 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1647 , 
IÁ
 
b™D•th


1651 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1652 ifÐ
	gb™D•th
 <= 10 )

1654 Ð
simdHADs8x8
Ð
piOrg
 , 
piCur
 , 
iSŒideOrg
 , 
iSŒideCur
 ) );

1657 
IÁ
 
	gk
, 
	gi
, 
	gj
, 
	gjj
;

1658 
Di¡ÜtiÚ
 
	g§d
 = 0;

1659 
TCÛff
 
	gdiff
[64], 
	gm1
[8][8], 
	gm2
[8][8], 
	gm3
[8][8];

1660 
as£¹
Ð
iS‹p
 == 1 );

1661  
	gk
 = 0; k < 64; k += 8 )

1663 
diff
[
k
+0] = 
piOrg
[0] - 
piCur
[0];

1664 
	gdiff
[
k
+1] = 
piOrg
[1] - 
piCur
[1];

1665 
	gdiff
[
k
+2] = 
piOrg
[2] - 
piCur
[2];

1666 
	gdiff
[
k
+3] = 
piOrg
[3] - 
piCur
[3];

1667 
	gdiff
[
k
+4] = 
piOrg
[4] - 
piCur
[4];

1668 
	gdiff
[
k
+5] = 
piOrg
[5] - 
piCur
[5];

1669 
	gdiff
[
k
+6] = 
piOrg
[6] - 
piCur
[6];

1670 
	gdiff
[
k
+7] = 
piOrg
[7] - 
piCur
[7];

1672 
	gpiCur
 +ð
iSŒideCur
;

1673 
	gpiOrg
 +ð
iSŒideOrg
;

1677 
	gj
=0; j < 8; j++)

1679 
	gjj
 = 
j
 << 3;

1680 
	gm2
[
j
][0] = 
diff
[
jj
 ] + diff[jj+4];

1681 
	gm2
[
j
][1] = 
diff
[
jj
+1] + diff[jj+5];

1682 
	gm2
[
j
][2] = 
diff
[
jj
+2] + diff[jj+6];

1683 
	gm2
[
j
][3] = 
diff
[
jj
+3] + diff[jj+7];

1684 
	gm2
[
j
][4] = 
diff
[
jj
 ] - diff[jj+4];

1685 
	gm2
[
j
][5] = 
diff
[
jj
+1] - diff[jj+5];

1686 
	gm2
[
j
][6] = 
diff
[
jj
+2] - diff[jj+6];

1687 
	gm2
[
j
][7] = 
diff
[
jj
+3] - diff[jj+7];

1689 
	gm1
[
j
][0] = 
m2
[j][0] + m2[j][2];

1690 
	gm1
[
j
][1] = 
m2
[j][1] + m2[j][3];

1691 
	gm1
[
j
][2] = 
m2
[j][0] - m2[j][2];

1692 
	gm1
[
j
][3] = 
m2
[j][1] - m2[j][3];

1693 
	gm1
[
j
][4] = 
m2
[j][4] + m2[j][6];

1694 
	gm1
[
j
][5] = 
m2
[j][5] + m2[j][7];

1695 
	gm1
[
j
][6] = 
m2
[j][4] - m2[j][6];

1696 
	gm1
[
j
][7] = 
m2
[j][5] - m2[j][7];

1698 
	gm2
[
j
][0] = 
m1
[j][0] + m1[j][1];

1699 
	gm2
[
j
][1] = 
m1
[j][0] - m1[j][1];

1700 
	gm2
[
j
][2] = 
m1
[j][2] + m1[j][3];

1701 
	gm2
[
j
][3] = 
m1
[j][2] - m1[j][3];

1702 
	gm2
[
j
][4] = 
m1
[j][4] + m1[j][5];

1703 
	gm2
[
j
][5] = 
m1
[j][4] - m1[j][5];

1704 
	gm2
[
j
][6] = 
m1
[j][6] + m1[j][7];

1705 
	gm2
[
j
][7] = 
m1
[j][6] - m1[j][7];

1709 
	gi
=0; i < 8; i++)

1711 
	gm3
[0][
i
] = 
m2
[0][i] + m2[4][i];

1712 
	gm3
[1][
i
] = 
m2
[1][i] + m2[5][i];

1713 
	gm3
[2][
i
] = 
m2
[2][i] + m2[6][i];

1714 
	gm3
[3][
i
] = 
m2
[3][i] + m2[7][i];

1715 
	gm3
[4][
i
] = 
m2
[0][i] - m2[4][i];

1716 
	gm3
[5][
i
] = 
m2
[1][i] - m2[5][i];

1717 
	gm3
[6][
i
] = 
m2
[2][i] - m2[6][i];

1718 
	gm3
[7][
i
] = 
m2
[3][i] - m2[7][i];

1720 
	gm1
[0][
i
] = 
m3
[0][i] + m3[2][i];

1721 
	gm1
[1][
i
] = 
m3
[1][i] + m3[3][i];

1722 
	gm1
[2][
i
] = 
m3
[0][i] - m3[2][i];

1723 
	gm1
[3][
i
] = 
m3
[1][i] - m3[3][i];

1724 
	gm1
[4][
i
] = 
m3
[4][i] + m3[6][i];

1725 
	gm1
[5][
i
] = 
m3
[5][i] + m3[7][i];

1726 
	gm1
[6][
i
] = 
m3
[4][i] - m3[6][i];

1727 
	gm1
[7][
i
] = 
m3
[5][i] - m3[7][i];

1729 
	gm2
[0][
i
] = 
m1
[0][i] + m1[1][i];

1730 
	gm2
[1][
i
] = 
m1
[0][i] - m1[1][i];

1731 
	gm2
[2][
i
] = 
m1
[2][i] + m1[3][i];

1732 
	gm2
[3][
i
] = 
m1
[2][i] - m1[3][i];

1733 
	gm2
[4][
i
] = 
m1
[4][i] + m1[5][i];

1734 
	gm2
[5][
i
] = 
m1
[4][i] - m1[5][i];

1735 
	gm2
[6][
i
] = 
m1
[6][i] + m1[7][i];

1736 
	gm2
[7][
i
] = 
m1
[6][i] - m1[7][i];

1739 
	gi
 = 0; i < 8; i++)

1741 
	gj
 = 0; j < 8; j++)

1743 
	g§d
 +ð
abs
(
m2
[
i
][
j
]);

1747 
	g§d
=((
§d
+2)>>2);

1749  
	g§d
;

1753 
Di¡ÜtiÚ
 
	gTComRdCo¡
::
	$xG‘HADs
Ð
Di¡P¬am
* 
pcDtP¬am
 )

1755 iàÐ
pcDtP¬am
->
bAµlyWeight
 )

1757  
TComRdCo¡WeightP»diùiÚ
::
	`xG‘HADsw
Ð
pcDtP¬am
 );

1759 cÚ¡ 
P–
* 
piOrg
 = 
pcDtP¬am
->
pOrg
;

1760 cÚ¡ 
P–
* 
piCur
 = 
pcDtP¬am
->
pCur
;

1761 cÚ¡ 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

1762 cÚ¡ 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

1763 cÚ¡ 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

1764 cÚ¡ 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

1765 cÚ¡ 
IÁ
 
iS‹p
 = 
pcDtP¬am
->iStep;

1767 
IÁ
 
x
, 
y
;

1769 
Di¡ÜtiÚ
 
uiSum
 = 0;

1771 ifÐÐ
iRows
 % 8 =ð0è&& (
iCÞs
 % 8 == 0) )

1773 
IÁ
 
iOff£tOrg
 = 
iSŒideOrg
<<3;

1774 
IÁ
 
iOff£tCur
 = 
iSŒideCur
<<3;

1775  
y
=0; y<
iRows
; y+= 8 )

1777  
x
=0; x<
iCÞs
; x+= 8 )

1779 
uiSum
 +ð
	`xC®cHADs8x8
Ð&
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep

1780 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

1781 , 
pcDtP¬am
->
b™D•th


1785 
piOrg
 +ð
iOff£tOrg
;

1786 
piCur
 +ð
iOff£tCur
;

1789 ifÐÐ
iRows
 % 4 =ð0è&& (
iCÞs
 % 4 == 0) )

1791 
IÁ
 
iOff£tOrg
 = 
iSŒideOrg
<<2;

1792 
IÁ
 
iOff£tCur
 = 
iSŒideCur
<<2;

1794  
y
=0; y<
iRows
; y+= 4 )

1796  
x
=0; x<
iCÞs
; x+= 4 )

1798 
uiSum
 +ð
	`xC®cHADs4x4
Ð&
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep );

1800 
piOrg
 +ð
iOff£tOrg
;

1801 
piCur
 +ð
iOff£tCur
;

1804 ifÐÐ
iRows
 % 2 =ð0è&& (
iCÞs
 % 2 == 0) )

1806 
IÁ
 
iOff£tOrg
 = 
iSŒideOrg
<<1;

1807 
IÁ
 
iOff£tCur
 = 
iSŒideCur
<<1;

1808  
y
=0; y<
iRows
; y+=2 )

1810  
x
=0; x<
iCÞs
; x+=2 )

1812 
uiSum
 +ð
	`xC®cHADs2x2
Ð&
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep );

1814 
piOrg
 +ð
iOff£tOrg
;

1815 
piCur
 +ð
iOff£tCur
;

1820 
	`as£¹
(
çl£
);

1823  ( 
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8) );

1824 
	}
}

	@source/Lib/TLibCommon/TComRdCost.h

38 #iâdeà
__TCOMRDCOST__


39 
	#__TCOMRDCOST__


	)

42 
	~"CommÚDef.h
"

43 
	~"TComP©‹º.h
"

44 
	~"TComMv.h
"

46 
	~"TComSliû.h
"

47 
	~"TComRdCo¡WeightP»diùiÚ.h
"

52 
þass
 
	gDi¡P¬am
;

53 
þass
 
	gTComP©‹º
;

60 
	$Di¡ÜtiÚ
 (*
	tFpDi¡Func
è(
	tDi¡P¬am
*);

67 þas 
	cDi¡P¬am


69 
public
:

70 cÚ¡ 
P–
* 
pOrg
;

71 cÚ¡ 
P–
* 
pCur
;

72 
IÁ
 
iSŒideOrg
;

73 
IÁ
 
iSŒideCur
;

74 
IÁ
 
iRows
;

75 
IÁ
 
iCÞs
;

76 
IÁ
 
iS‹p
;

77 
FpDi¡Func
 
Di¡Func
;

78 
IÁ
 
b™D•th
;

80 
BoÞ
 
bAµlyWeight
;

81 
BoÞ
 
bIsBiP»d
;

83 cÚ¡ 
WPSÿlšgP¬am
 *
wpCur
;

84 
CompÚ’tID
 
compIdx
;

85 
Di¡ÜtiÚ
 
m_maximumDi¡ÜtiÚFÜE¬lyEx™
;

89 
IÁ
 
iSubShiá
;

91 
	$Di¡P¬am
()

92 : 
	`pOrg
(
NULL
),

93 
	`pCur
(
NULL
),

94 
	`iSŒideOrg
(0),

95 
	`iSŒideCur
(0),

96 
	`iRows
(0),

97 
	`iCÞs
(0),

98 
	`iS‹p
(1),

99 
	`Di¡Func
(
NULL
),

100 
	`b™D•th
(0),

101 
	`bAµlyWeight
(
çl£
),

102 
	`bIsBiP»d
(
çl£
),

103 
	`wpCur
(
NULL
),

104 
	`compIdx
(
MAX_NUM_COMPONENT
),

105 
	`m_maximumDi¡ÜtiÚFÜE¬lyEx™
(
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
()),

106 
	$iSubShiá
(0)

108 
	}
};

111 þas 
	cTComRdCo¡


113 
	m´iv©e
:

116 
FpDi¡Func
 
m_aåDi¡ÜtFunc
[
DF_TOTAL_FUNCTIONS
];

117 
Co¡Mode
 
	mm_co¡Mode
;

118 
DoubË
 
	mm_di¡ÜtiÚWeight
[
MAX_NUM_COMPONENT
];

119 
DoubË
 
	mm_dLambda
;

120 
DoubË
 
	mm_sq¹Lambda
;

121 
DoubË
 
	mm_dLambdaMÙiÚSAD
[2 ];

122 
DoubË
 
	mm_dLambdaMÙiÚSSE
[2 ];

123 
DoubË
 
	mm_dF¿meLambda
;

126 
TComMv
 
	mm_mvP»diùÜ
;

127 
DoubË
 
	mm_mÙiÚLambda
;

128 
IÁ
 
	mm_iCo¡SÿË
;

130 
	mpublic
:

131 
TComRdCo¡
();

132 
	mvœtu®
 ~
TComRdCo¡
();

134 
DoubË
 
ÿlcRdCo¡
ÐDoubË 
numB™s
, 
Di¡ÜtiÚ
 
di¡ÜtiÚ
, 
DFunc
 
eDFunc
 = 
DF_DEFAULT
 );

136 
Void
 
	$£tDi¡ÜtiÚWeight
 ( cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
DoubË
 
di¡ÜtiÚWeight
 ) { 
m_di¡ÜtiÚWeight
[compID] = distortionWeight; }

137 
Void
 
	`£tLambda
 ( 
DoubË
 
dLambda
, cÚ¡ 
B™D•ths
 &
b™D•ths
 );

138 
Void
 
	$£tF¿meLambda
 ( 
DoubË
 
dLambda
 ) { 
m_dF¿meLambda
 = dLambda; 
	}
}

140 
DoubË
 
	$g‘Sq¹Lambda
 (è{  
m_sq¹Lambda
; 
	}
}

142 
DoubË
 
	$g‘Lambda
(è{  
m_dLambda
; 
	}
}

143 
DoubË
 
	$g‘ChromaWeight
 (è{  ((
m_di¡ÜtiÚWeight
[
COMPONENT_Cb
] + m_di¡ÜtiÚWeight[
COMPONENT_Cr
]è/ 2.0); 
	}
}

145 
Void
 
	$£tCo¡Mode
(
Co¡Mode
 
m
 ) { 
m_co¡Mode
 = m; 
	}
}

148 
Void
 
š™
();

150 
Void
 
£tDi¡P¬am
Ð
UIÁ
 
uiBlkWidth
, UIÁ 
uiBlkHeight
, 
DFunc
 
eDFunc
, 
Di¡P¬am
& 
rcDi¡P¬am
 );

151 
Void
 
£tDi¡P¬am
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, cÚ¡ 
P–
* 
piRefY
, 
IÁ
 
iRefSŒide
, 
Di¡P¬am
& 
rcDi¡P¬am
 );

152 
Void
 
£tDi¡P¬am
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, cÚ¡ 
P–
* 
piRefY
, 
IÁ
 
iRefSŒide
, IÁ 
iS‹p
, 
Di¡P¬am
& 
rcDi¡P¬am
, 
BoÞ
 
bHADME
=
çl£
 );

153 
Void
 
£tDi¡P¬am
Ð
Di¡P¬am
& 
rcDP
, 
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
p1
, IÁ 
iSŒide1
, cÚ¡ P–* 
p2
, IÁ 
iSŒide2
, IÁ 
iWidth
, IÁ 
iHeight
, 
BoÞ
 
bHadam¬d
 = 
çl£
 );

155 
Di¡ÜtiÚ
 
ÿlcHAD
(
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
pi0
, IÁ 
iSŒide0
, cÚ¡ P–* 
pi1
, IÁ 
iSŒide1
, IÁ 
iWidth
, IÁ 
iHeight
 );

158 
UIÁ
 
xG‘ExpGÞombNumb”OfB™s
Ð
IÁ
 
iV®
 );

159 
Void
 
	$£ËùMÙiÚLambda
Ð
BoÞ
 
bSad
, 
IÁ
 
iAdd
, BoÞ 
bIsT¿nsquªtBy·ss
 ) { 
m_mÙiÚLambda
 = (bSad ? 
m_dLambdaMÙiÚSAD
[(bIsT¿nsquªtBy·s && 
m_co¡Mode
==
COST_MIXED_LOSSLESS_LOSSY_CODING
è?1:0] + iAdd : 
m_dLambdaMÙiÚSSE
[(bIsT¿nsquªtBy·s && m_co¡Mode==COST_MIXED_LOSSLESS_LOSSY_CODING)?1:0] + iAdd); 
	}
}

160 
Void
 
	$£tP»diùÜ
Ð
TComMv
& 
rcMv
 )

162 
m_mvP»diùÜ
 = 
rcMv
;

163 
	}
}

164 
Void
 
	$£tCo¡SÿË
Ð
IÁ
 
iCo¡SÿË
 ) { 
m_iCo¡SÿË
 = iCo¡SÿË; 
	}
}

165 
Di¡ÜtiÚ
 
	$g‘Co¡
Ð
UIÁ
 
b
 ) {  
	`Di¡ÜtiÚ
(Ð
m_mÙiÚLambda
 * b ) / 65536.0); 
	}
}

166 
Di¡ÜtiÚ
 
	$g‘Co¡OfVeùÜW™hP»diùÜ
ÐcÚ¡ 
IÁ
 
x
, cÚ¡ IÁ 
y
 )

168  
	`Di¡ÜtiÚ
((
m_mÙiÚLambda
 * 
	`g‘B™sOfVeùÜW™hP»diùÜ
(
x
, 
y
)) / 65536.0);

169 
	}
}

170 
UIÁ
 
	$g‘B™sOfVeùÜW™hP»diùÜ
ÐcÚ¡ 
IÁ
 
x
, cÚ¡ IÁ 
y
 )

172  
	`xG‘ExpGÞombNumb”OfB™s
((
x
 << 
m_iCo¡SÿË
è- 
m_mvP»diùÜ
.
	`g‘HÜ
())

173 + 
	`xG‘ExpGÞombNumb”OfB™s
((
y
 << 
m_iCo¡SÿË
è- 
m_mvP»diùÜ
.
	`g‘V”
());

174 
	}
}

176 
	g´iv©e
:

178 
Di¡ÜtiÚ
 
xG‘SSE
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

179 
Di¡ÜtiÚ
 
xG‘SSE4
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

180 
Di¡ÜtiÚ
 
xG‘SSE8
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

181 
Di¡ÜtiÚ
 
xG‘SSE16
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

182 
Di¡ÜtiÚ
 
xG‘SSE32
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

183 
Di¡ÜtiÚ
 
xG‘SSE64
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

184 
Di¡ÜtiÚ
 
xG‘SSE16N
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

186 
Di¡ÜtiÚ
 
xG‘SAD
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

187 
Di¡ÜtiÚ
 
xG‘SAD4
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

188 
Di¡ÜtiÚ
 
xG‘SAD8
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

189 
Di¡ÜtiÚ
 
xG‘SAD16
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

190 
Di¡ÜtiÚ
 
xG‘SAD32
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

191 
Di¡ÜtiÚ
 
xG‘SAD64
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

192 
Di¡ÜtiÚ
 
xG‘SAD16N
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

194 
Di¡ÜtiÚ
 
xG‘SAD12
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

195 
Di¡ÜtiÚ
 
xG‘SAD24
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

196 
Di¡ÜtiÚ
 
xG‘SAD48
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

198 
Di¡ÜtiÚ
 
xG‘HADs
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

199 
Di¡ÜtiÚ
 
xC®cHADs2x2
 ( cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 );

200 
Di¡ÜtiÚ
 
xC®cHADs4x4
 ( cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 );

201 
Di¡ÜtiÚ
 
xC®cHADs8x8
 ( cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p


202 #ià
VECTOR_CODING__DISTORTION_CALCULATIONS
 && (
RExt__HIGH_BIT_DEPTH_SUPPORT
==0)

203 , 
IÁ
 
b™D•th


207 
	gpublic
:

209 
Di¡ÜtiÚ
 
g‘Di¡P¬t
(
IÁ
 
b™D•th
, cÚ¡ 
P–
* 
piCur
, IÁ 
iCurSŒide
, cÚ¡ P–* 
piOrg
, IÁ 
iOrgSŒide
, 
UIÁ
 
uiBlkWidth
, UIÁ 
uiBlkHeight
, cÚ¡ 
CompÚ’tID
 
compID
, 
DFunc
 
eDFunc
 = 
DF_SSE
 );

	@source/Lib/TLibCommon/TComRdCostWeightPrediction.cpp

38 
	~<m©h.h
>

39 
	~<as£¹.h
>

40 
	~"TComRdCo¡.h
"

41 
	~"TComRdCo¡WeightP»diùiÚ.h
"

43 
Di¡ÜtiÚ
 
xC®cHADs2x2w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 );

44 
Di¡ÜtiÚ
 
xC®cHADs4x4w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 );

45 
Di¡ÜtiÚ
 
xC®cHADs8x8w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCu¼
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 );

55 
Di¡ÜtiÚ
 
	gTComRdCo¡WeightP»diùiÚ
::
	$xG‘SADw
Ð
Di¡P¬am
* 
pcDtP¬am
 )

57 cÚ¡ 
P–
 *
piOrg
 = 
pcDtP¬am
->
pOrg
;

58 cÚ¡ 
P–
 *
piCur
 = 
pcDtP¬am
->
pCur
;

59 cÚ¡ 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

60 cÚ¡ 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

61 cÚ¡ 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

62 cÚ¡ 
CompÚ’tID
 
compID
 = 
pcDtP¬am
->
compIdx
;

64 
	`as£¹
(
compID
<
MAX_NUM_COMPONENT
);

66 cÚ¡ 
WPSÿlšgP¬am
 &
wpCur
 = 
pcDtP¬am
->wpCur[
compID
];

68 cÚ¡ 
IÁ
 
w0
 = 
wpCur
.
w
;

69 cÚ¡ 
IÁ
 
off£t
 = 
wpCur
.offset;

70 cÚ¡ 
IÁ
 
shiá
 = 
wpCur
.shift;

71 cÚ¡ 
IÁ
 
round
 = 
wpCur
.round;

72 cÚ¡ 
IÁ
 
di¡ÜtiÚShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8);

74 
Di¡ÜtiÚ
 
uiSum
 = 0;

77 ià(
w0
 =ð1 << 
shiá
)

80 ià(
off£t
 == 0)

82 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

84 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

86 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
piCur
[n] );

88 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

90  
uiSum
 >> 
di¡ÜtiÚShiá
;

92 
piOrg
 +ð
iSŒideOrg
;

93 
piCur
 +ð
iSŒideCur
;

101 ià(
pcDtP¬am
->
bIsBiP»d
)

103 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

105 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

107 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - (
piCur
[n] + 
off£t
) );

109 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

111  
uiSum
 >> 
di¡ÜtiÚShiá
;

114 
piOrg
 +ð
iSŒideOrg
;

115 
piCur
 +ð
iSŒideCur
;

120 cÚ¡ 
P–
 
iMaxV®ue
 = (P–è((1 << 
pcDtP¬am
->
b™D•th
) - 1);

121 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

123 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

125 cÚ¡ 
P–
 
´ed
 = 
	`Cl3
((P–è0, 
iMaxV®ue
, (P–è(
piCur
[
n
] + 
off£t
)) ;

127 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
´ed
 );

129 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

131  
uiSum
 >> 
di¡ÜtiÚShiá
;

133 
piOrg
 +ð
iSŒideOrg
;

134 
piCur
 +ð
iSŒideCur
;

144 ià(
pcDtP¬am
->
bIsBiP»d
)

146 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

148 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

150 cÚ¡ 
P–
 
´ed
 = ( (
w0
*
piCur
[
n
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

151 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
´ed
 );

153 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

155  
uiSum
 >> 
di¡ÜtiÚShiá
;

158 
piOrg
 +ð
iSŒideOrg
;

159 
piCur
 +ð
iSŒideCur
;

164 cÚ¡ 
P–
 
iMaxV®ue
 = (P–è((1 << 
pcDtP¬am
->
b™D•th
) - 1);

166 ià(
off£t
 == 0)

168 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

170 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

172 cÚ¡ 
P–
 
´ed
 = 
	`Cl3
((P–è0, 
iMaxV®ue
, (P–è(Ð(
w0
*
piCur
[
n
] + 
round
è>> 
shiá
 ))) ;

174 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
´ed
 );

176 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

178  
uiSum
 >> 
di¡ÜtiÚShiá
;

180 
piOrg
 +ð
iSŒideOrg
;

181 
piCur
 +ð
iSŒideCur
;

186 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows; iRows != 0; iRows-- )

188 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

190 cÚ¡ 
P–
 
´ed
 = 
	`Cl3
((P–è0, 
iMaxV®ue
, (P–è(Ð(
w0
*
piCur
[
n
] + 
round
è>> 
shiá
 ) + 
off£t
)) ;

192 
uiSum
 +ð
	`abs
Ð
piOrg
[
n
] - 
´ed
 );

194 ià(
pcDtP¬am
->
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 < ( 
uiSum
 >> 
di¡ÜtiÚShiá
))

196  
uiSum
 >> 
di¡ÜtiÚShiá
;

198 
piOrg
 +ð
iSŒideOrg
;

199 
piCur
 +ð
iSŒideCur
;

206  
uiSum
 >> 
di¡ÜtiÚShiá
;

207 
	}
}

217 
Di¡ÜtiÚ
 
	gTComRdCo¡WeightP»diùiÚ
::
	$xG‘SSEw
Ð
Di¡P¬am
* 
pcDtP¬am
 )

219 cÚ¡ 
P–
 *
piOrg
 = 
pcDtP¬am
->
pOrg
;

220 cÚ¡ 
P–
 *
piCur
 = 
pcDtP¬am
->
pCur
;

221 cÚ¡ 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

222 cÚ¡ 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

223 cÚ¡ 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

224 cÚ¡ 
CompÚ’tID
 
compIdx
 = 
pcDtP¬am
->compIdx;

226 
	`as£¹
Ð
pcDtP¬am
->
iSubShiá
 == 0 );

228 
	`as£¹
(
compIdx
<
MAX_NUM_COMPONENT
);

229 cÚ¡ 
WPSÿlšgP¬am
 &
wpCur
 = 
pcDtP¬am
->wpCur[
compIdx
];

230 cÚ¡ 
IÁ
 
w0
 = 
wpCur
.
w
;

231 cÚ¡ 
IÁ
 
off£t
 = 
wpCur
.offset;

232 cÚ¡ 
IÁ
 
shiá
 = 
wpCur
.shift;

233 cÚ¡ 
IÁ
 
round
 = 
wpCur
.round;

234 cÚ¡ 
UIÁ
 
di¡ÜtiÚShiá
 = 
	`DISTORTION_PRECISION_ADJUSTMENT
((
pcDtP¬am
->
b™D•th
-8) << 1);

236 
Di¡ÜtiÚ
 
sum
 = 0;

238 ià(
pcDtP¬am
->
bIsBiP»d
)

240 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows ; iRows != 0; iRows-- )

242 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

244 cÚ¡ 
P–
 
´ed
 = ( (
w0
*
piCur
[
n
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

245 cÚ¡ 
P–
 
»sidu®
 = 
piOrg
[
n
] - 
´ed
;

246 
sum
 +ðÐ
	`Di¡ÜtiÚ
(
»sidu®
è* Di¡ÜtiÚÔesidu®èè>> 
di¡ÜtiÚShiá
;

248 
piOrg
 +ð
iSŒideOrg
;

249 
piCur
 +ð
iSŒideCur
;

254 cÚ¡ 
P–
 
iMaxV®ue
 = (P–è((1 << 
pcDtP¬am
->
b™D•th
) - 1);

256 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows ; iRows != 0; iRows-- )

258 
IÁ
 
n
 = 0;‚ < 
iCÞs
;‚++ )

260 cÚ¡ 
P–
 
´ed
 = 
	`Cl3
((P–è0, 
iMaxV®ue
, (P–è(Ð(
w0
*
piCur
[
n
] + 
round
è>> 
shiá
 ) + 
off£t
)) ;

261 cÚ¡ 
P–
 
»sidu®
 = 
piOrg
[
n
] - 
´ed
;

262 
sum
 +ðÐ
	`Di¡ÜtiÚ
(
»sidu®
è* Di¡ÜtiÚÔesidu®èè>> 
di¡ÜtiÚShiá
;

264 
piOrg
 +ð
iSŒideOrg
;

265 
piCur
 +ð
iSŒideCur
;

271  
sum
;

272 
	}
}

279 
Di¡ÜtiÚ
 
	$xC®cHADs2x2w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 )

281 cÚ¡ 
IÁ
 
round
 = 
wpCur
.round;

282 cÚ¡ 
IÁ
 
shiá
 = 
wpCur
.shift;

283 cÚ¡ 
IÁ
 
off£t
 = 
wpCur
.offset;

284 cÚ¡ 
IÁ
 
w0
 = 
wpCur
.
w
;

286 
Di¡ÜtiÚ
 
§td
 = 0;

287 
TCÛff
 
diff
[4];

288 
TCÛff
 
m
[4];

290 
P–
 
´ed
;

292 
´ed
 = ( (
w0
*
piCur
[0*
iS‹p
 ] + 
round
è>> 
shiá
 ) + 
off£t
 ;

293 
diff
[0] = 
piOrg
[0 ] - 
´ed
;

294 
´ed
 = ( (
w0
*
piCur
[1*
iS‹p
 ] + 
round
è>> 
shiá
 ) + 
off£t
 ;

295 
diff
[1] = 
piOrg
[1 ] - 
´ed
;

296 
´ed
 = ( (
w0
*
piCur
[0*
iS‹p
 + 
iSŒideCur
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

297 
diff
[2] = 
piOrg
[
iSŒideOrg
 ] - 
´ed
;

298 
´ed
 = ( (
w0
*
piCur
[1*
iS‹p
 + 
iSŒideCur
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

299 
diff
[3] = 
piOrg
[
iSŒideOrg
 + 1] - 
´ed
;

301 
m
[0] = 
diff
[0] + diff[2];

302 
m
[1] = 
diff
[1] + diff[3];

303 
m
[2] = 
diff
[0] - diff[2];

304 
m
[3] = 
diff
[1] - diff[3];

306 
§td
 +ð
	`abs
(
m
[0] + m[1]);

307 
§td
 +ð
	`abs
(
m
[0] - m[1]);

308 
§td
 +ð
	`abs
(
m
[2] + m[3]);

309 
§td
 +ð
	`abs
(
m
[2] - m[3]);

311  
§td
;

312 
	}
}

316 
Di¡ÜtiÚ
 
	$xC®cHADs4x4w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 )

318 cÚ¡ 
IÁ
 
round
 = 
wpCur
.round;

319 cÚ¡ 
IÁ
 
shiá
 = 
wpCur
.shift;

320 cÚ¡ 
IÁ
 
off£t
 = 
wpCur
.offset;

321 cÚ¡ 
IÁ
 
w0
 = 
wpCur
.
w
;

323 
Di¡ÜtiÚ
 
§td
 = 0;

324 
TCÛff
 
diff
[16];

325 
TCÛff
 
m
[16];

326 
TCÛff
 
d
[16];

329 
IÁ
 
k
 = 0; k < 16; k+=4 )

331 
P–
 
´ed
;

332 
´ed
 = ( (
w0
*
piCur
[0*
iS‹p
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

333 
diff
[
k
+0] = 
piOrg
[0] - 
´ed
;

334 
´ed
 = ( (
w0
*
piCur
[1*
iS‹p
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

335 
diff
[
k
+1] = 
piOrg
[1] - 
´ed
;

336 
´ed
 = ( (
w0
*
piCur
[2*
iS‹p
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

337 
diff
[
k
+2] = 
piOrg
[2] - 
´ed
;

338 
´ed
 = ( (
w0
*
piCur
[3*
iS‹p
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

339 
diff
[
k
+3] = 
piOrg
[3] - 
´ed
;

341 
piCur
 +ð
iSŒideCur
;

342 
piOrg
 +ð
iSŒideOrg
;

346 
m
[ 0] = 
diff
[ 0] + diff[12];

347 
m
[ 1] = 
diff
[ 1] + diff[13];

348 
m
[ 2] = 
diff
[ 2] + diff[14];

349 
m
[ 3] = 
diff
[ 3] + diff[15];

350 
m
[ 4] = 
diff
[ 4] + diff[ 8];

351 
m
[ 5] = 
diff
[ 5] + diff[ 9];

352 
m
[ 6] = 
diff
[ 6] + diff[10];

353 
m
[ 7] = 
diff
[ 7] + diff[11];

354 
m
[ 8] = 
diff
[ 4] - diff[ 8];

355 
m
[ 9] = 
diff
[ 5] - diff[ 9];

356 
m
[10] = 
diff
[ 6] - diff[10];

357 
m
[11] = 
diff
[ 7] - diff[11];

358 
m
[12] = 
diff
[ 0] - diff[12];

359 
m
[13] = 
diff
[ 1] - diff[13];

360 
m
[14] = 
diff
[ 2] - diff[14];

361 
m
[15] = 
diff
[ 3] - diff[15];

363 
d
[ 0] = 
m
[ 0] + m[ 4];

364 
d
[ 1] = 
m
[ 1] + m[ 5];

365 
d
[ 2] = 
m
[ 2] + m[ 6];

366 
d
[ 3] = 
m
[ 3] + m[ 7];

367 
d
[ 4] = 
m
[ 8] + m[12];

368 
d
[ 5] = 
m
[ 9] + m[13];

369 
d
[ 6] = 
m
[10] + m[14];

370 
d
[ 7] = 
m
[11] + m[15];

371 
d
[ 8] = 
m
[ 0] - m[ 4];

372 
d
[ 9] = 
m
[ 1] - m[ 5];

373 
d
[10] = 
m
[ 2] - m[ 6];

374 
d
[11] = 
m
[ 3] - m[ 7];

375 
d
[12] = 
m
[12] - m[ 8];

376 
d
[13] = 
m
[13] - m[ 9];

377 
d
[14] = 
m
[14] - m[10];

378 
d
[15] = 
m
[15] - m[11];

380 
m
[ 0] = 
d
[ 0] + d[ 3];

381 
m
[ 1] = 
d
[ 1] + d[ 2];

382 
m
[ 2] = 
d
[ 1] - d[ 2];

383 
m
[ 3] = 
d
[ 0] - d[ 3];

384 
m
[ 4] = 
d
[ 4] + d[ 7];

385 
m
[ 5] = 
d
[ 5] + d[ 6];

386 
m
[ 6] = 
d
[ 5] - d[ 6];

387 
m
[ 7] = 
d
[ 4] - d[ 7];

388 
m
[ 8] = 
d
[ 8] + d[11];

389 
m
[ 9] = 
d
[ 9] + d[10];

390 
m
[10] = 
d
[ 9] - d[10];

391 
m
[11] = 
d
[ 8] - d[11];

392 
m
[12] = 
d
[12] + d[15];

393 
m
[13] = 
d
[13] + d[14];

394 
m
[14] = 
d
[13] - d[14];

395 
m
[15] = 
d
[12] - d[15];

397 
d
[ 0] = 
m
[ 0] + m[ 1];

398 
d
[ 1] = 
m
[ 0] - m[ 1];

399 
d
[ 2] = 
m
[ 2] + m[ 3];

400 
d
[ 3] = 
m
[ 3] - m[ 2];

401 
d
[ 4] = 
m
[ 4] + m[ 5];

402 
d
[ 5] = 
m
[ 4] - m[ 5];

403 
d
[ 6] = 
m
[ 6] + m[ 7];

404 
d
[ 7] = 
m
[ 7] - m[ 6];

405 
d
[ 8] = 
m
[ 8] + m[ 9];

406 
d
[ 9] = 
m
[ 8] - m[ 9];

407 
d
[10] = 
m
[10] + m[11];

408 
d
[11] = 
m
[11] - m[10];

409 
d
[12] = 
m
[12] + m[13];

410 
d
[13] = 
m
[12] - m[13];

411 
d
[14] = 
m
[14] + m[15];

412 
d
[15] = 
m
[15] - m[14];

414 
IÁ
 
k
=0; k<16; ++k)

416 
§td
 +ð
	`abs
(
d
[
k
]);

418 
§td
 = ((satd+1)>>1);

420  
§td
;

421 
	}
}

425 
Di¡ÜtiÚ
 
	$xC®cHADs8x8w
ÐcÚ¡ 
WPSÿlšgP¬am
 &
wpCur
, cÚ¡ 
P–
 *
piOrg
, cÚ¡ P– *
piCur
, 
IÁ
 
iSŒideOrg
, IÁ 
iSŒideCur
, IÁ 
iS‹p
 )

427 
Di¡ÜtiÚ
 
§d
=0;

428 
TCÛff
 
diff
[64], 
m1
[8][8], 
m2
[8][8], 
m3
[8][8];

429 
IÁ
 
iS‹p2
 = 
iS‹p
<<1;

430 
IÁ
 
iS‹p3
 = 
iS‹p2
 + 
iS‹p
;

431 
IÁ
 
iS‹p4
 = 
iS‹p3
 + 
iS‹p
;

432 
IÁ
 
iS‹p5
 = 
iS‹p4
 + 
iS‹p
;

433 
IÁ
 
iS‹p6
 = 
iS‹p5
 + 
iS‹p
;

434 
IÁ
 
iS‹p7
 = 
iS‹p6
 + 
iS‹p
;

435 cÚ¡ 
IÁ
 
round
 = 
wpCur
.round;

436 cÚ¡ 
IÁ
 
shiá
 = 
wpCur
.shift;

437 cÚ¡ 
IÁ
 
off£t
 = 
wpCur
.offset;

438 cÚ¡ 
IÁ
 
w0
 = 
wpCur
.
w
;

440 
P–
 
´ed
;

442 
IÁ
 
k
 = 0; k < 64; k+=8 )

444 
´ed
 = ( (
w0
*
piCur
[ 0] + 
round
è>> 
shiá
 ) + 
off£t
 ;

445 
diff
[
k
+0] = 
piOrg
[0] - 
´ed
;

446 
´ed
 = ( (
w0
*
piCur
[
iS‹p
 ] + 
round
è>> 
shiá
 ) + 
off£t
 ;

447 
diff
[
k
+1] = 
piOrg
[1] - 
´ed
;

448 
´ed
 = ( (
w0
*
piCur
[
iS‹p2
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

449 
diff
[
k
+2] = 
piOrg
[2] - 
´ed
;

450 
´ed
 = ( (
w0
*
piCur
[
iS‹p3
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

451 
diff
[
k
+3] = 
piOrg
[3] - 
´ed
;

452 
´ed
 = ( (
w0
*
piCur
[
iS‹p4
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

453 
diff
[
k
+4] = 
piOrg
[4] - 
´ed
;

454 
´ed
 = ( (
w0
*
piCur
[
iS‹p5
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

455 
diff
[
k
+5] = 
piOrg
[5] - 
´ed
;

456 
´ed
 = ( (
w0
*
piCur
[
iS‹p6
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

457 
diff
[
k
+6] = 
piOrg
[6] - 
´ed
;

458 
´ed
 = ( (
w0
*
piCur
[
iS‹p7
] + 
round
è>> 
shiá
 ) + 
off£t
 ;

459 
diff
[
k
+7] = 
piOrg
[7] - 
´ed
;

461 
piCur
 +ð
iSŒideCur
;

462 
piOrg
 +ð
iSŒideOrg
;

466 
IÁ
 
j
=0; j < 8; j++)

468 cÚ¡ 
IÁ
 
jj
 = 
j
 << 3;

469 
m2
[
j
][0] = 
diff
[
jj
 ] + diff[jj+4];

470 
m2
[
j
][1] = 
diff
[
jj
+1] + diff[jj+5];

471 
m2
[
j
][2] = 
diff
[
jj
+2] + diff[jj+6];

472 
m2
[
j
][3] = 
diff
[
jj
+3] + diff[jj+7];

473 
m2
[
j
][4] = 
diff
[
jj
 ] - diff[jj+4];

474 
m2
[
j
][5] = 
diff
[
jj
+1] - diff[jj+5];

475 
m2
[
j
][6] = 
diff
[
jj
+2] - diff[jj+6];

476 
m2
[
j
][7] = 
diff
[
jj
+3] - diff[jj+7];

478 
m1
[
j
][0] = 
m2
[j][0] + m2[j][2];

479 
m1
[
j
][1] = 
m2
[j][1] + m2[j][3];

480 
m1
[
j
][2] = 
m2
[j][0] - m2[j][2];

481 
m1
[
j
][3] = 
m2
[j][1] - m2[j][3];

482 
m1
[
j
][4] = 
m2
[j][4] + m2[j][6];

483 
m1
[
j
][5] = 
m2
[j][5] + m2[j][7];

484 
m1
[
j
][6] = 
m2
[j][4] - m2[j][6];

485 
m1
[
j
][7] = 
m2
[j][5] - m2[j][7];

487 
m2
[
j
][0] = 
m1
[j][0] + m1[j][1];

488 
m2
[
j
][1] = 
m1
[j][0] - m1[j][1];

489 
m2
[
j
][2] = 
m1
[j][2] + m1[j][3];

490 
m2
[
j
][3] = 
m1
[j][2] - m1[j][3];

491 
m2
[
j
][4] = 
m1
[j][4] + m1[j][5];

492 
m2
[
j
][5] = 
m1
[j][4] - m1[j][5];

493 
m2
[
j
][6] = 
m1
[j][6] + m1[j][7];

494 
m2
[
j
][7] = 
m1
[j][6] - m1[j][7];

498 
IÁ
 
i
=0; i < 8; i++)

500 
m3
[0][
i
] = 
m2
[0][i] + m2[4][i];

501 
m3
[1][
i
] = 
m2
[1][i] + m2[5][i];

502 
m3
[2][
i
] = 
m2
[2][i] + m2[6][i];

503 
m3
[3][
i
] = 
m2
[3][i] + m2[7][i];

504 
m3
[4][
i
] = 
m2
[0][i] - m2[4][i];

505 
m3
[5][
i
] = 
m2
[1][i] - m2[5][i];

506 
m3
[6][
i
] = 
m2
[2][i] - m2[6][i];

507 
m3
[7][
i
] = 
m2
[3][i] - m2[7][i];

509 
m1
[0][
i
] = 
m3
[0][i] + m3[2][i];

510 
m1
[1][
i
] = 
m3
[1][i] + m3[3][i];

511 
m1
[2][
i
] = 
m3
[0][i] - m3[2][i];

512 
m1
[3][
i
] = 
m3
[1][i] - m3[3][i];

513 
m1
[4][
i
] = 
m3
[4][i] + m3[6][i];

514 
m1
[5][
i
] = 
m3
[5][i] + m3[7][i];

515 
m1
[6][
i
] = 
m3
[4][i] - m3[6][i];

516 
m1
[7][
i
] = 
m3
[5][i] - m3[7][i];

518 
m2
[0][
i
] = 
m1
[0][i] + m1[1][i];

519 
m2
[1][
i
] = 
m1
[0][i] - m1[1][i];

520 
m2
[2][
i
] = 
m1
[2][i] + m1[3][i];

521 
m2
[3][
i
] = 
m1
[2][i] - m1[3][i];

522 
m2
[4][
i
] = 
m1
[4][i] + m1[5][i];

523 
m2
[5][
i
] = 
m1
[4][i] - m1[5][i];

524 
m2
[6][
i
] = 
m1
[6][i] + m1[7][i];

525 
m2
[7][
i
] = 
m1
[6][i] - m1[7][i];

528 
IÁ
 
j
=0; j < 8; j++)

530 
IÁ
 
i
=0; i < 8; i++)

532 
§d
 +ð(
	`abs
(
m2
[
j
][
i
]));

536 
§d
=((sad+2)>>2);

538  
§d
;

539 
	}
}

543 
Di¡ÜtiÚ
 
	gTComRdCo¡WeightP»diùiÚ
::
	$xG‘HADsw
Ð
Di¡P¬am
* 
pcDtP¬am
 )

545 cÚ¡ 
P–
 *
piOrg
 = 
pcDtP¬am
->
pOrg
;

546 cÚ¡ 
P–
 *
piCur
 = 
pcDtP¬am
->
pCur
;

547 cÚ¡ 
IÁ
 
iRows
 = 
pcDtP¬am
->iRows;

548 cÚ¡ 
IÁ
 
iCÞs
 = 
pcDtP¬am
->iCols;

549 cÚ¡ 
IÁ
 
iSŒideCur
 = 
pcDtP¬am
->iStrideCur;

550 cÚ¡ 
IÁ
 
iSŒideOrg
 = 
pcDtP¬am
->iStrideOrg;

551 cÚ¡ 
IÁ
 
iS‹p
 = 
pcDtP¬am
->iStep;

552 cÚ¡ 
CompÚ’tID
 
compIdx
 = 
pcDtP¬am
->compIdx;

553 
	`as£¹
(
compIdx
<
MAX_NUM_COMPONENT
);

554 cÚ¡ 
WPSÿlšgP¬am
 &
wpCur
 = 
pcDtP¬am
->wpCur[
compIdx
];

556 
Di¡ÜtiÚ
 
uiSum
 = 0;

558 ifÐÐ
iRows
 % 8 =ð0è&& (
iCÞs
 % 8 == 0) )

560 cÚ¡ 
IÁ
 
iOff£tOrg
 = 
iSŒideOrg
<<3;

561 cÚ¡ 
IÁ
 
iOff£tCur
 = 
iSŒideCur
<<3;

562 
IÁ
 
y
=0; y<
iRows
; y+= 8 )

564 
IÁ
 
x
=0; x<
iCÞs
; x+= 8 )

566 
uiSum
 +ð
	`xC®cHADs8x8w
Ð
wpCur
, &
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep );

568 
piOrg
 +ð
iOff£tOrg
;

569 
piCur
 +ð
iOff£tCur
;

572 ifÐÐ
iRows
 % 4 =ð0è&& (
iCÞs
 % 4 == 0) )

574 cÚ¡ 
IÁ
 
iOff£tOrg
 = 
iSŒideOrg
<<2;

575 cÚ¡ 
IÁ
 
iOff£tCur
 = 
iSŒideCur
<<2;

577 
IÁ
 
y
=0; y<
iRows
; y+= 4 )

579 
IÁ
 
x
=0; x<
iCÞs
; x+= 4 )

581 
uiSum
 +ð
	`xC®cHADs4x4w
Ð
wpCur
, &
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep );

583 
piOrg
 +ð
iOff£tOrg
;

584 
piCur
 +ð
iOff£tCur
;

589 
IÁ
 
y
=0; y<
iRows
; y+=2 )

591 
IÁ
 
x
=0; x<
iCÞs
; x+=2 )

593 
uiSum
 +ð
	`xC®cHADs2x2w
Ð
wpCur
, &
piOrg
[
x
], &
piCur
[x*
iS‹p
], 
iSŒideOrg
, 
iSŒideCur
, iStep );

595 
piOrg
 +ð
iSŒideOrg
;

596 
piCur
 +ð
iSŒideCur
;

600  
uiSum
 >> 
	`DISTORTION_PRECISION_ADJUSTMENT
(
pcDtP¬am
->
b™D•th
-8);

601 
	}
}

	@source/Lib/TLibCommon/TComRdCostWeightPrediction.h

38 #iâdeà
__TCOMRDCOSTWEIGHTPREDICTION__


39 
	#__TCOMRDCOSTWEIGHTPREDICTION__


	)

42 
	~"CommÚDef.h
"

44 
þass
 
	gDi¡P¬am
;

45 
þass
 
	gTComP©‹º
;

52 
Çme¥aû
 
	gTComRdCo¡WeightP»diùiÚ


54 
Di¡ÜtiÚ
 
xG‘SSEw
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

55 
Di¡ÜtiÚ
 
xG‘SADw
 ( 
Di¡P¬am
* 
pcDtP¬am
 );

56 
Di¡ÜtiÚ
 
xG‘HADsw
Ð
Di¡P¬am
* 
pcDtP¬am
 );

	@source/Lib/TLibCommon/TComRectangle.h

35 #iâdeà
__TCOMRECTANGLE__


36 
	#__TCOMRECTANGLE__


	)

39 
	sTComReùªgË


41 
UIÁ
 
	mwidth
;

42 
UIÁ
 
	mheight
;

43 
UIÁ
 
	mx0
;

44 
UIÁ
 
	my0
;

	@source/Lib/TLibCommon/TComRom.cpp

38 
	~"TComRom.h
"

39 
	~<memÜy.h
>

40 
	~<¡dlib.h
>

41 
	~<¡dio.h
>

42 
	~<iomª
>

43 
	~<as£¹.h
>

44 
	~"TComD©aCU.h
"

45 
	~"Debug.h
"

53 cÚ¡ 
TCh¬
* 
	$ÇlUn™Ty³ToSŒšg
(
N®Un™Ty³
 
ty³
)

55 
ty³
)

57 
NAL_UNIT_CODED_SLICE_TRAIL_R
:  "TRAIL_R";

58 
NAL_UNIT_CODED_SLICE_TRAIL_N
:  "TRAIL_N";

59 
NAL_UNIT_CODED_SLICE_TSA_R
:  "TSA_R";

60 
NAL_UNIT_CODED_SLICE_TSA_N
:  "TSA_N";

61 
NAL_UNIT_CODED_SLICE_STSA_R
:  "STSA_R";

62 
NAL_UNIT_CODED_SLICE_STSA_N
:  "STSA_N";

63 
NAL_UNIT_CODED_SLICE_BLA_W_LP
:  "BLA_W_LP";

64 
NAL_UNIT_CODED_SLICE_BLA_W_RADL
:  "BLA_W_RADL";

65 
NAL_UNIT_CODED_SLICE_BLA_N_LP
:  "BLA_N_LP";

66 
NAL_UNIT_CODED_SLICE_IDR_W_RADL
:  "IDR_W_RADL";

67 
NAL_UNIT_CODED_SLICE_IDR_N_LP
:  "IDR_N_LP";

68 
NAL_UNIT_CODED_SLICE_CRA
:  "CRA";

69 
NAL_UNIT_CODED_SLICE_RADL_R
:  "RADL_R";

70 
NAL_UNIT_CODED_SLICE_RADL_N
:  "RADL_N";

71 
NAL_UNIT_CODED_SLICE_RASL_R
:  "RASL_R";

72 
NAL_UNIT_CODED_SLICE_RASL_N
:  "RASL_N";

73 
NAL_UNIT_VPS
:  "VPS";

74 
NAL_UNIT_SPS
:  "SPS";

75 
NAL_UNIT_PPS
:  "PPS";

76 
NAL_UNIT_ACCESS_UNIT_DELIMITER
:  "AUD";

77 
NAL_UNIT_EOS
:  "EOS";

78 
NAL_UNIT_EOB
:  "EOB";

79 
NAL_UNIT_FILLER_DATA
:  "FILLER";

80 
NAL_UNIT_PREFIX_SEI
:  "Prefix SEI";

81 
NAL_UNIT_SUFFIX_SEI
:  "Suffix SEI";

84 
	}
}

86 þas 
	cSÿnG’”©Ü


88 
	m´iv©e
:

89 
UIÁ
 
m_lše
, 
	mm_cÞumn
;

90 cÚ¡ 
UIÁ
 
	mm_blockWidth
, 
	mm_blockHeight
;

91 cÚ¡ 
UIÁ
 
	mm_¡ride
;

92 cÚ¡ 
COEFF_SCAN_TYPE
 
	mm_sÿnTy³
;

94 
	mpublic
:

95 
	$SÿnG’”©Ü
(
UIÁ
 
blockWidth
, UIÁ 
blockHeight
, UIÁ 
¡ride
, 
COEFF_SCAN_TYPE
 
sÿnTy³
)

96 : 
	`m_lše
(0), 
	`m_cÞumn
(0), 
	`m_blockWidth
(
blockWidth
), 
	`m_blockHeight
(
blockHeight
), 
	`m_¡ride
(
¡ride
), 
	$m_sÿnTy³
(
sÿnTy³
)

99 
UIÁ
 
	$G‘Cu¼’tX
(ècÚ¡ {  
m_cÞumn
; 
	}
}

100 
UIÁ
 
	$G‘Cu¼’tY
(ècÚ¡ {  
m_lše
; 
	}
}

102 
UIÁ
 
	$G‘NextIndex
(
UIÁ
 
blockOff£tX
, UIÁ 
blockOff£tY
)

104 
IÁ
 
¹n
=((
m_lše
 + 
blockOff£tY
è* 
m_¡ride
è+ 
m_cÞumn
 + 
blockOff£tX
;

107 
m_sÿnTy³
)

111 
SCAN_DIAG
:

113 ià((
m_cÞumn
 =ð(
m_blockWidth
 - 1)è|| (
m_lše
 == 0))

115 
m_lše
 +ð
m_cÞumn
 + 1;

116 
m_cÞumn
 = 0;

118 ià(
m_lše
 >ð
m_blockHeight
)

120 
m_cÞumn
 +ð
m_lše
 - (
m_blockHeight
 - 1);

121 
m_lše
 = 
m_blockHeight
 - 1;

126 
m_cÞumn
++;

127 
m_lše
--;

134 
SCAN_HOR
:

136 ià(
m_cÞumn
 =ð(
m_blockWidth
 - 1))

138 
m_lše
++;

139 
m_cÞumn
 = 0;

143 
m_cÞumn
++;

150 
SCAN_VER
:

152 ià(
m_lše
 =ð(
m_blockHeight
 - 1))

154 
m_cÞumn
++;

155 
m_lše
 = 0;

159 
m_lše
++;

168 
¡d
::
û¼
 << "ERROR: UnknowÀsÿÀty³ \"" << 
m_sÿnTy³
 << "\"š SÿnG’”©Ü::G‘NextIndex" << std::
’dl
;

169 
	`ex™
(1);

174  
¹n
;

175 
	}
}

179 
Void
 
	$š™ROM
()

181 
IÁ
 
i
, 
c
;

184 ::
	`mem£t
Ð
g_aucCÚv”tToB™
, -1, ( g_aucConvertToBit ) );

185 
c
=0;

186  
i
=4; i<=
MAX_CU_SIZE
; i*=2 )

188 
g_aucCÚv”tToB™
[ 
i
 ] = 
c
;

189 
c
++;

193 
UIÁ
 
log2BlockHeight
 = 0;†og2BlockHeighˆ< 
MAX_CU_DEPTH
;†og2BlockHeight++)

195 
UIÁ
 
log2BlockWidth
 = 0;†og2BlockWidth < 
MAX_CU_DEPTH
;†og2BlockWidth++)

197 cÚ¡ 
UIÁ
 
blockWidth
 = 1 << 
log2BlockWidth
;

198 cÚ¡ 
UIÁ
 
blockHeight
 = 1 << 
log2BlockHeight
;

199 cÚ¡ 
UIÁ
 
tÙ®V®ues
 = 
blockWidth
 * 
blockHeight
;

205 
UIÁ
 
sÿnTy³Index
 = 0; sÿnTy³Index < 
SCAN_NUMBER_OF_TYPES
; scanTypeIndex++)

207 cÚ¡ 
COEFF_SCAN_TYPE
 
sÿnTy³
 = 
	`COEFF_SCAN_TYPE
(
sÿnTy³Index
);

209 
g_sÿnOrd”
[
SCAN_UNGROUPED
][
sÿnTy³
][
log2BlockWidth
][
log2BlockHeight
] = 
Ãw
 
UIÁ
[
tÙ®V®ues
];

211 
SÿnG’”©Ü
 
	`fuÎBlockSÿn
(
blockWidth
, 
blockHeight
, blockWidth, 
sÿnTy³
);

213 
UIÁ
 
sÿnPos™iÚ
 = 0; sÿnPos™iÚ < 
tÙ®V®ues
; scanPosition++)

215 
g_sÿnOrd”
[
SCAN_UNGROUPED
][
sÿnTy³
][
log2BlockWidth
][
log2BlockHeight
][
sÿnPos™iÚ
] = 
fuÎBlockSÿn
.
	`G‘NextIndex
(0, 0);

223 cÚ¡ 
UIÁ
 
groupWidth
 = 1 << 
MLS_CG_LOG2_WIDTH
;

224 cÚ¡ 
UIÁ
 
groupHeight
 = 1 << 
MLS_CG_LOG2_HEIGHT
;

225 cÚ¡ 
UIÁ
 
widthInGroups
 = 
blockWidth
 >> 
MLS_CG_LOG2_WIDTH
;

226 cÚ¡ 
UIÁ
 
heightInGroups
 = 
blockHeight
 >> 
MLS_CG_LOG2_HEIGHT
;

228 cÚ¡ 
UIÁ
 
groupSize
 = 
groupWidth
 * 
groupHeight
;

229 cÚ¡ 
UIÁ
 
tÙ®Groups
 = 
widthInGroups
 * 
heightInGroups
;

231 
UIÁ
 
sÿnTy³Index
 = 0; sÿnTy³Index < 
SCAN_NUMBER_OF_TYPES
; scanTypeIndex++)

233 cÚ¡ 
COEFF_SCAN_TYPE
 
sÿnTy³
 = 
	`COEFF_SCAN_TYPE
(
sÿnTy³Index
);

235 
g_sÿnOrd”
[
SCAN_GROUPED_4x4
][
sÿnTy³
][
log2BlockWidth
][
log2BlockHeight
] = 
Ãw
 
UIÁ
[
tÙ®V®ues
];

237 
SÿnG’”©Ü
 
	`fuÎBlockSÿn
(
widthInGroups
, 
heightInGroups
, 
groupWidth
, 
sÿnTy³
);

239 
UIÁ
 
groupIndex
 = 0; groupIndex < 
tÙ®Groups
; groupIndex++)

241 cÚ¡ 
UIÁ
 
groupPos™iÚY
 = 
fuÎBlockSÿn
.
	`G‘Cu¼’tY
();

242 cÚ¡ 
UIÁ
 
groupPos™iÚX
 = 
fuÎBlockSÿn
.
	`G‘Cu¼’tX
();

243 cÚ¡ 
UIÁ
 
groupOff£tX
 = 
groupPos™iÚX
 * 
groupWidth
;

244 cÚ¡ 
UIÁ
 
groupOff£tY
 = 
groupPos™iÚY
 * 
groupHeight
;

245 cÚ¡ 
UIÁ
 
groupOff£tSÿn
 = 
groupIndex
 * 
groupSize
;

247 
SÿnG’”©Ü
 
	`groupSÿn
(
groupWidth
, 
groupHeight
, 
blockWidth
, 
sÿnTy³
);

249 
UIÁ
 
sÿnPos™iÚ
 = 0; sÿnPos™iÚ < 
groupSize
; scanPosition++)

251 
g_sÿnOrd”
[
SCAN_GROUPED_4x4
][
sÿnTy³
][
log2BlockWidth
][
log2BlockHeight
][
groupOff£tSÿn
 + 
sÿnPos™iÚ
] = 
groupSÿn
.
	`G‘NextIndex
(
groupOff£tX
, 
groupOff£tY
);

254 
fuÎBlockSÿn
.
	`G‘NextIndex
(0,0);

261 
	}
}

263 
Void
 
	$de¡royROM
()

265 
UIÁ
 
groupTy³Index
 = 0; groupTy³Index < 
SCAN_NUMBER_OF_GROUP_TYPES
; groupTypeIndex++)

267 
UIÁ
 
sÿnOrd”Index
 = 0; sÿnOrd”Index < 
SCAN_NUMBER_OF_TYPES
; scanOrderIndex++)

269 
UIÁ
 
log2BlockWidth
 = 0;†og2BlockWidth < 
MAX_CU_DEPTH
;†og2BlockWidth++)

271 
UIÁ
 
log2BlockHeight
 = 0;†og2BlockHeighˆ< 
MAX_CU_DEPTH
;†og2BlockHeight++)

273 
d–‘e
 [] 
g_sÿnOrd”
[
groupTy³Index
][
sÿnOrd”Index
][
log2BlockWidth
][
log2BlockHeight
];

278 
	}
}

284 
UIÁ
 
	gg_auiZsÿnToRa¡”
 [ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ] = { 0, };

285 
UIÁ
 
	gg_auiRa¡”ToZsÿn
 [ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ] = { 0, };

286 
UIÁ
 
	gg_auiRa¡”ToP–X
 [ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ] = { 0, };

287 
UIÁ
 
	gg_auiRa¡”ToP–Y
 [ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ] = { 0, };

289 cÚ¡ 
UIÁ
 
	gg_auiPUOff£t
[
NUMBER_OF_PART_SIZES
] = { 0, 8, 4, 4, 2, 10, 1, 5};

291 
Void
 
	$š™ZsÿnToRa¡”
 ( 
IÁ
 
iMaxD•th
, IÁ 
iD•th
, 
UIÁ
 
uiS¹V®
, UIÁ*& 
½uiCu¼Idx
 )

293 
IÁ
 
iSŒide
 = 1 << ( 
iMaxD•th
 - 1 );

295 iàÐ
iD•th
 =ð
iMaxD•th
 )

297 
½uiCu¼Idx
[0] = 
uiS¹V®
;

298 
½uiCu¼Idx
++;

302 
IÁ
 
iS‹p
 = 
iSŒide
 >> 
iD•th
;

303 
	`š™ZsÿnToRa¡”
Ð
iMaxD•th
, 
iD•th
+1, 
uiS¹V®
, 
½uiCu¼Idx
 );

304 
	`š™ZsÿnToRa¡”
Ð
iMaxD•th
, 
iD•th
+1, 
uiS¹V®
+
iS‹p
, 
½uiCu¼Idx
 );

305 
	`š™ZsÿnToRa¡”
Ð
iMaxD•th
, 
iD•th
+1, 
uiS¹V®
+
iS‹p
*
iSŒide
, 
½uiCu¼Idx
 );

306 
	`š™ZsÿnToRa¡”
Ð
iMaxD•th
, 
iD•th
+1, 
uiS¹V®
+
iS‹p
*
iSŒide
+iS‹p, 
½uiCu¼Idx
 );

308 
	}
}

310 
Void
 
	$š™Ra¡”ToZsÿn
 ( 
UIÁ
 
uiMaxCUWidth
, UIÁ 
uiMaxCUHeight
, UIÁ 
uiMaxD•th
 )

312 
UIÁ
 
uiMšCUWidth
 = 
uiMaxCUWidth
 >> ( 
uiMaxD•th
 - 1 );

313 
UIÁ
 
uiMšCUHeight
 = 
uiMaxCUHeight
 >> ( 
uiMaxD•th
 - 1 );

315 
UIÁ
 
uiNumP¬tInWidth
 = (UIÁ)
uiMaxCUWidth
 / 
uiMšCUWidth
;

316 
UIÁ
 
uiNumP¬tInHeight
 = (UIÁ)
uiMaxCUHeight
 / 
uiMšCUHeight
;

318  
UIÁ
 
i
 = 0; i < 
uiNumP¬tInWidth
*
uiNumP¬tInHeight
; i++ )

320 
g_auiRa¡”ToZsÿn
[ 
g_auiZsÿnToRa¡”
[
i
] ] = i;

322 
	}
}

324 
Void
 
	$š™Ra¡”ToP–XY
 ( 
UIÁ
 
uiMaxCUWidth
, UIÁ 
uiMaxCUHeight
, UIÁ 
uiMaxD•th
 )

326 
UIÁ
 
i
;

328 
UIÁ
* 
uiTempX
 = &
g_auiRa¡”ToP–X
[0];

329 
UIÁ
* 
uiTempY
 = &
g_auiRa¡”ToP–Y
[0];

331 
UIÁ
 
uiMšCUWidth
 = 
uiMaxCUWidth
 >> ( 
uiMaxD•th
 - 1 );

332 
UIÁ
 
uiMšCUHeight
 = 
uiMaxCUHeight
 >> ( 
uiMaxD•th
 - 1 );

334 
UIÁ
 
uiNumP¬tInWidth
 = 
uiMaxCUWidth
 / 
uiMšCUWidth
;

335 
UIÁ
 
uiNumP¬tInHeight
 = 
uiMaxCUHeight
 / 
uiMšCUHeight
;

337 
uiTempX
[0] = 0; uiTempX++;

338  
i
 = 1; i < 
uiNumP¬tInWidth
; i++ )

340 
uiTempX
[0] = uiTempX[-1] + 
uiMšCUWidth
; uiTempX++;

342  
i
 = 1; i < 
uiNumP¬tInHeight
; i++ )

344 
	`memýy
(
uiTempX
, uiTempX-
uiNumP¬tInWidth
, (
UIÁ
)*uiNumPartInWidth);

345 
uiTempX
 +ð
uiNumP¬tInWidth
;

348  
i
 = 1; i < 
uiNumP¬tInWidth
*
uiNumP¬tInHeight
; i++ )

350 
uiTempY
[
i
] = ( i / 
uiNumP¬tInWidth
 ) * 
uiMšCUWidth
;

352 
	}
}

354 cÚ¡ 
IÁ
 
	gg_quªtSÿËs
[
SCALING_LIST_REM_NUM
] =

359 cÚ¡ 
IÁ
 
	gg_švQuªtSÿËs
[
SCALING_LIST_REM_NUM
] =

368 
	#DEFINE_DST4x4_MATRIX
(
a
,
b
,
c
,
d
) \

370 { 
a
, 
b
, 
c
, 
d
 }, \

371 { 
c
, c, 0, -c }, \

372 { 
d
, -
a
, -
c
, 
b
 }, \

373 { 
b
, -
d
, 
c
, -
a
 }, \

374 }

	)

376 
	#DEFINE_DCT4x4_MATRIX
(
a
,
b
,
c
) \

378 { 
a
,‡,‡,‡}, \

379 { 
b
, 
c
, -c, -b}, \

380 { 
a
, -a, -a,‡}, \

381 { 
c
, -
b
, b, -c} \

382 }

	)

384 
	#DEFINE_DCT8x8_MATRIX
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

386 { 
a
,‡,‡,‡,‡,‡,‡,‡}, \

387 { 
d
, 
e
, 
f
, 
g
, -g, -f, -e, -d}, \

388 { 
b
, 
c
, -c, -b, -b, -c, c, b}, \

389 { 
e
, -
g
, -
d
, -
f
, f, d, g, -e}, \

390 { 
a
, -a, -a,‡,‡, -a, -a,‡}, \

391 { 
f
, -
d
, 
g
, 
e
, -e, -g, d, -f}, \

392 { 
c
, -
b
, b, -c, -c, b, -b, c}, \

393 { 
g
, -
f
, 
e
, -
d
, d, -e, f, -g} \

394 }

	)

396 
	#DEFINE_DCT16x16_MATRIX
(
a
,
b
,
c
,
d
,
e
,
f
,
g
,
h
,
i
,
j
,
k
,
l
,
m
,
n
,
o
) \

398 { 
a
,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡}, \

399 { 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
, -o, -n, -m, -l, -k, -j, -i, -h}, \

400 { 
d
, 
e
, 
f
, 
g
, -g, -f, -e, -d, -d, -e, -f, -g, g, f,ƒ, d}, \

401 { 
i
, 
l
, 
o
, -
m
, -
j
, -
h
, -
k
, -
n
,‚, k, h, j, m, -o, -l, -i}, \

402 { 
b
, 
c
, -c, -b, -b, -c, c, b, b, c, -c, -b, -b, -c, c, b}, \

403 { 
j
, 
o
, -
k
, -
i
, -
n
, 
l
, 
h
, 
m
, -m, -h, -l,‚, i, k, -o, -j}, \

404 { 
e
, -
g
, -
d
, -
f
, f, d, g, -e, -e, g, d, f, -f, -d, -g,ƒ}, \

405 { 
k
, -
m
, -
i
, 
o
, 
h
, 
n
, -
j
, -
l
,†, j, -n, -h, -o, i, m, -k}, \

406 { 
a
, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡}, \

407 { 
l
, -
j
, -
n
, 
h
, -
o
, -
i
, 
m
, 
k
, -k, -m, i, o, -h,‚, j, -l}, \

408 { 
f
, -
d
, 
g
, 
e
, -e, -g, d, -f, -f, d, -g, -e,ƒ, g, -d, f}, \

409 { 
m
, -
h
, 
l
, 
n
, -
i
, 
k
, 
o
, -
j
, j, -o, -k, i, -n, -l, h, -m}, \

410 { 
c
, -
b
, b, -c, -c, b, -b, c, c, -b, b, -c, -c, b, -b, c}, \

411 { 
n
, -
k
, 
h
, -
j
, 
m
, 
o
, -
l
, 
i
, -i,†, -o, -m, j, -h, k, -n}, \

412 { 
g
, -
f
, 
e
, -
d
, d, -e, f, -g, -g, f, -e, d, -d,ƒ, -f, g}, \

413 { 
o
, -
n
, 
m
, -
l
, 
k
, -
j
, 
i
, -
h
, h, -i, j, -k,†, -m,‚, -o} \

414 }

	)

416 
	#DEFINE_DCT32x32_MATRIX
(
a
,
b
,
c
,
d
,
e
,
f
,
g
,
h
,
i
,
j
,
k
,
l
,
m
,
n
,
o
,
p
,
q
,
r
,
s
,
t
,
u
,
v
,
w
,
x
,
y
,
z
,
A
,
B
,
C
,
D
,
E
) \

418 { 
a
,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡,‡}, \

419 { 
p
, 
q
, 
r
, 
s
, 
t
, 
u
, 
v
, 
w
, 
x
, 
y
, 
z
, 
A
, 
B
, 
C
, 
D
, 
E
, -E, -D, -C, -B, -A, -z, -y, -x, -w, -v, -u, -t, -s, -r, -q, -p}, \

420 { 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
, -o, -n, -m, -l, -k, -j, -i, -h, -h, -i, -j, -k, -l, -m, -n, -o, o,‚, m,†, k, j, i, h}, \

421 { 
q
, 
t
, 
w
, 
z
, 
C
, -
E
, -
B
, -
y
, -
v
, -
s
, -
p
, -
r
, -
u
, -
x
, -
A
, -
D
, D, A, x, u,„,…, s, v, y, B, E, -C, -z, -w, -t, -q}, \

422 { 
d
, 
e
, 
f
, 
g
, -g, -f, -e, -d, -d, -e, -f, -g, g, f,ƒ, d, d,ƒ, f, g, -g, -f, -e, -d, -d, -e, -f, -g, g, f,ƒ, d}, \

423 { 
r
, 
w
, 
B
, -
D
, -
y
, -
t
, -
p
, -
u
, -
z
, -
E
, 
A
, 
v
, 
q
, 
s
, 
x
, 
C
, -C, -x, -s, -q, -v, -A, E, z, u,…,, y, D, -B, -w, -r}, \

424 { 
i
, 
l
, 
o
, -
m
, -
j
, -
h
, -
k
, -
n
,‚, k, h, j, m, -o, -l, -i, -i, -l, -o, m, j, h, k,‚, -n, -k, -h, -j, -m, o,†, i}, \

425 { 
s
, 
z
, -
D
, -
w
, -
p
, -
v
, -
C
, 
A
, 
t
, 
r
, 
y
, -
E
, -
x
, -
q
, -
u
, -
B
, B, u, q, x, E, -y, -r, -t, -A, C, v,…, w, D, -z, -s}, \

426 { 
b
, 
c
, -c, -b, -b, -c, c, b, b, c, -c, -b, -b, -c, c, b, b, c, -c, -b, -b, -c, c, b, b, c, -c, -b, -b, -c, c, b}, \

427 { 
t
, 
C
, -
y
, -
p
, -
x
, 
D
, 
u
, 
s
, 
B
, -
z
, -
q
, -
w
, 
E
, 
v
, 
r
, 
A
, -A, -r, -v, -E, w, q, z, -B, -s, -u, -D, x,…, y, -C, -t}, \

428 { 
j
, 
o
, -
k
, -
i
, -
n
, 
l
, 
h
, 
m
, -m, -h, -l,‚, i, k, -o, -j, -j, -o, k, i,‚, -l, -h, -m, m, h,†, -n, -i, -k, o, j}, \

429 { 
u
, -
E
, -
t
, -
v
, 
D
, 
s
, 
w
, -
C
, -
r
, -
x
, 
B
, 
q
, 
y
, -
A
, -
p
, -
z
, z,…, A, -y, -q, -B, x,„, C, -w, -s, -D, v,, E, -u}, \

430 { 
e
, -
g
, -
d
, -
f
, f, d, g, -e, -e, g, d, f, -f, -d, -g,ƒ,ƒ, -g, -d, -f, f, d, g, -e, -e, g, d, f, -f, -d, -g,ƒ}, \

431 { 
v
, -
B
, -
p
, -
C
, 
u
, 
w
, -
A
, -
q
, -
D
, 
t
, 
x
, -
z
, -
r
, -
E
, 
s
, 
y
, -y, -s, E,„, z, -x, -t, D, q, A, -w, -u, C,…, B, -v}, \

432 { 
k
, -
m
, -
i
, 
o
, 
h
, 
n
, -
j
, -
l
,†, j, -n, -h, -o, i, m, -k, -k, m, i, -o, -h, -n, j,†, -l, -j,‚, h, o, -i, -m, k}, \

433 { 
w
, -
y
, -
u
, 
A
, 
s
, -
C
, -
q
, 
E
, 
p
, 
D
, -
r
, -
B
, 
t
, 
z
, -
v
, -
x
, x, v, -z, -t, B,„, -D, -p, -E, q, C, -s, -A, u, y, -w}, \

434 { 
a
, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡,‡, -a, -a,‡}, \

435 { 
x
, -
v
, -
z
, 
t
, 
B
, -
r
, -
D
, 
p
, -
E
, -
q
, 
C
, 
s
, -
A
, -
u
, 
y
, 
w
, -w, -y, u, A, -s, -C, q, E, -p, D,„, -B, -t, z, v, -x}, \

436 { 
l
, -
j
, -
n
, 
h
, -
o
, -
i
, 
m
, 
k
, -k, -m, i, o, -h,‚, j, -l, -l, j,‚, -h, o, i, -m, -k, k, m, -i, -o, h, -n, -j,†}, \

437 { 
y
, -
s
, -
E
, 
r
, -
z
, -
x
, 
t
, 
D
, -
q
, 
A
, 
w
, -
u
, -
C
, 
p
, -
B
, -
v
, v, B, -p, C, u, -w, -A, q, -D, -t, x, z, -r, E, s, -y}, \

438 { 
f
, -
d
, 
g
, 
e
, -e, -g, d, -f, -f, d, -g, -e,ƒ, g, -d, f, f, -d, g,ƒ, -e, -g, d, -f, -f, d, -g, -e,ƒ, g, -d, f}, \

439 { 
z
, -
p
, 
A
, 
y
, -
q
, 
B
, 
x
, -
r
, 
C
, 
w
, -
s
, 
D
, 
v
, -
t
, 
E
, 
u
, -u, -E,, -v, -D, s, -w, -C,„, -x, -B, q, -y, -A,…, -z}, \

440 { 
m
, -
h
, 
l
, 
n
, -
i
, 
k
, 
o
, -
j
, j, -o, -k, i, -n, -l, h, -m, -m, h, -l, -n, i, -k, -o, j, -j, o, k, -i,‚,†, -h, m}, \

441 { 
A
, -
r
, 
v
, -
E
, -
w
, 
q
, -
z
, -
B
, 
s
, -
u
, 
D
, 
x
, -
p
, 
y
, 
C
, -
t
,, -C, -y,…, -x, -D, u, -s, B, z, -q, w, E, -v,„, -A}, \

442 { 
c
, -
b
, b, -c, -c, b, -b, c, c, -b, b, -c, -c, b, -b, c, c, -b, b, -c, -c, b, -b, c, c, -b, b, -c, -c, b, -b, c}, \

443 { 
B
, -
u
, 
q
, -
x
, 
E
, 
y
, -
r
, 
t
, -
A
, -
C
, 
v
, -
p
, 
w
, -
D
, -
z
, 
s
, -s, z, D, -w,…, -v, C, A, -t,„, -y, -E, x, -q, u, -B}, \

444 { 
n
, -
k
, 
h
, -
j
, 
m
, 
o
, -
l
, 
i
, -i,†, -o, -m, j, -h, k, -n, -n, k, -h, j, -m, -o,†, -i, i, -l, o, m, -j, h, -k,‚}, \

445 { 
C
, -
x
, 
s
, -
q
, 
v
, -
A
, -
E
, 
z
, -
u
, 
p
, -
t
, 
y
, -
D
, -
B
, 
w
, -
r
,„, -w, B, D, -y,, -p, u, -z, E, A, -v, q, -s, x, -C}, \

446 { 
g
, -
f
, 
e
, -
d
, d, -e, f, -g, -g, f, -e, d, -d,ƒ, -f, g, g, -f,ƒ, -d, d, -e, f, -g, -g, f, -e, d, -d,ƒ, -f, g}, \

447 { 
D
, -
A
, 
x
, -
u
, 
r
, -
p
, 
s
, -
v
, 
y
, -
B
, 
E
, 
C
, -
z
, 
w
, -
t
, 
q
, -q,, -w, z, -C, -E, B, -y, v, -s,…, -r, u, -x, A, -D}, \

448 { 
o
, -
n
, 
m
, -
l
, 
k
, -
j
, 
i
, -
h
, h, -i, j, -k,†, -m,‚, -o, -o,‚, -m,†, -k, j, -i, h, -h, i, -j, k, -l, m, -n, o}, \

449 { 
E
, -
D
, 
C
, -
B
, 
A
, -
z
, 
y
, -
x
, 
w
, -
v
, 
u
, -
t
, 
s
, -
r
, 
q
, -
p
,…, -q,„, -s,, -u, v, -w, x, -y, z, -A, B, -C, D, -E} \

450 }

	)

456 #ià
RExt__HIGH_PRECISION_FORWARD_TRANSFORM


457 cÚ¡ 
TM©rixCÛff
 
	gg_aiT4
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4] =

459 
DEFINE_DCT4x4_MATRIX
 (16384, 21266, 9224),

460 
DEFINE_DCT4x4_MATRIX
 ( 64, 83, 36)

463 cÚ¡ 
TM©rixCÛff
 
	gg_aiT8
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][8][8] =

465 
DEFINE_DCT8x8_MATRIX
 (16384, 21266, 9224, 22813, 19244, 12769, 4563),

466 
DEFINE_DCT8x8_MATRIX
 ( 64, 83, 36, 89, 75, 50, 18)

469 cÚ¡ 
TM©rixCÛff
 
	gg_aiT16
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][16][16] =

471 
DEFINE_DCT16x16_MATRIX
(16384, 21266, 9224, 22813, 19244, 12769, 4563, 23120, 22063, 20450, 17972, 14642, 11109, 6446, 2316),

472 
DEFINE_DCT16x16_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9)

475 cÚ¡ 
TM©rixCÛff
 
	gg_aiT32
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][32][32] =

477 
DEFINE_DCT32x32_MATRIX
(16384, 21266, 9224, 22813, 19244, 12769, 4563, 23120, 22063, 20450, 17972, 14642, 11109, 6446, 2316, 23106, 22852, 22445, 21848, 20995, 19810, 18601, 17143, 15718, 13853, 11749, 9846, 7908, 5573, 3281, 946),

478 
DEFINE_DCT32x32_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9, 90, 90, 88, 85, 82, 78, 73, 67, 61, 54, 46, 38, 31, 22, 13, 4)

481 cÚ¡ 
TM©rixCÛff
 
	gg_as_DST_MAT_4
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4] =

483 
DEFINE_DST4x4_MATRIX
( 7424, 14081, 18893, 21505),

484 
DEFINE_DST4x4_MATRIX
( 29, 55, 74, 84)

489 cÚ¡ 
TM©rixCÛff
 
	gg_aiT4
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4] =

491 
DEFINE_DCT4x4_MATRIX
 ( 64, 83, 36),

492 
DEFINE_DCT4x4_MATRIX
 ( 64, 83, 36)

495 cÚ¡ 
TM©rixCÛff
 
	gg_aiT8
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][8][8] =

497 
DEFINE_DCT8x8_MATRIX
 ( 64, 83, 36, 89, 75, 50, 18),

498 
DEFINE_DCT8x8_MATRIX
 ( 64, 83, 36, 89, 75, 50, 18)

501 cÚ¡ 
TM©rixCÛff
 
	gg_aiT16
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][16][16] =

503 
DEFINE_DCT16x16_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9),

504 
DEFINE_DCT16x16_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9)

507 cÚ¡ 
TM©rixCÛff
 
	gg_aiT32
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][32][32] =

509 
DEFINE_DCT32x32_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9, 90, 90, 88, 85, 82, 78, 73, 67, 61, 54, 46, 38, 31, 22, 13, 4),

510 
DEFINE_DCT32x32_MATRIX
( 64, 83, 36, 89, 75, 50, 18, 90, 87, 80, 70, 57, 43, 25, 9, 90, 90, 88, 85, 82, 78, 73, 67, 61, 54, 46, 38, 31, 22, 13, 4)

513 cÚ¡ 
TM©rixCÛff
 
	gg_as_DST_MAT_4
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4] =

515 
DEFINE_DST4x4_MATRIX
( 29, 55, 74, 84),

516 
DEFINE_DST4x4_MATRIX
( 29, 55, 74, 84)

523 #undeà
DEFINE_DST4x4_MATRIX


524 #undeà
DEFINE_DCT4x4_MATRIX


525 #undeà
DEFINE_DCT8x8_MATRIX


526 #undeà
DEFINE_DCT16x16_MATRIX


527 #undeà
DEFINE_DCT32x32_MATRIX


532 cÚ¡ 
UCh¬
 
	gg_aucChromaSÿË
[
NUM_CHROMA_FORMAT
][
chromaQPM­pšgTabËSize
]=

545 cÚ¡ 
UCh¬
 
	gg_aucIÁ¿ModeNumFa¡_U£MPM
[
MAX_CU_DEPTH
] =

554 cÚ¡ 
UCh¬
 
	gg_aucIÁ¿ModeNumFa¡_NÙU£MPM
[
MAX_CU_DEPTH
] =

564 cÚ¡ 
UCh¬
 
	gg_chroma422IÁ¿AngËM­pšgTabË
[
NUM_INTRA_MODE
] =

566 { 0, 1, 2, 2, 2, 2, 3, 5, 7, 8, 10, 12, 13, 15, 17, 18, 19, 20, 21, 22, 23, 23, 24, 24, 25, 25, 26, 27, 27, 28, 28, 29, 29, 30, 31, 
DM_CHROMA_IDX
};

572 
SCh¬
 
	gg_aucCÚv”tToB™
 [ 
MAX_CU_SIZE
+1 ];

574 #ià
ENC_DEC_TRACE


575 
FILE
* 
	gg_hT¿û
 = 
NULL
;

576 cÚ¡ 
BoÞ
 
	gg_bEncDecT¿ûEÇbË
 = 
Œue
;

577 cÚ¡ 
BoÞ
 
	gg_bEncDecT¿ûDi§bË
 = 
çl£
;

578 
BoÞ
 
	gg_HLST¿ûEÇbË
 = 
Œue
;

579 
BoÞ
 
	gg_bJu¡DoIt
 = 
çl£
;

580 
UIÁ64
 
	gg_nSymbÞCouÁ”
 = 0;

587 
UIÁ
* 
	gg_sÿnOrd”
[
SCAN_NUMBER_OF_GROUP_TYPES
][
SCAN_NUMBER_OF_TYPES
][ 
MAX_CU_DEPTH
 ][ MAX_CU_DEPTH ];

589 cÚ¡ 
UIÁ
 
	gùxIndM­4x4
[4*4] =

597 cÚ¡ 
UIÁ
 
	gg_uiMšInGroup
[ 
LAST_SIGNIFICANT_GROUPS
 ] = {0,1,2,3,4,6,8,12,16,24};

598 cÚ¡ 
UIÁ
 
	gg_uiGroupIdx
[ 
MAX_TU_SIZE
 ] = {0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9};

600 cÚ¡ 
TCh¬
 *
	gM©rixTy³
[
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
] =

636 cÚ¡ 
TCh¬
 *
	gM©rixTy³_DC
[
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
] =

660 cÚ¡ 
IÁ
 
	gg_quªtTSDeçuÉ4x4
[4*4] =

668 cÚ¡ 
IÁ
 
	gg_quªtIÁ¿DeçuÉ8x8
[8*8] =

680 cÚ¡ 
IÁ
 
	gg_quªtIÁ”DeçuÉ8x8
[8*8] =

692 cÚ¡ 
UIÁ
 
	gg_sÿlšgLi¡Size
 [
SCALING_LIST_SIZE_NUM
] = {16,64,256,1024};

693 cÚ¡ 
UIÁ
 
	gg_sÿlšgLi¡SizeX
 [
SCALING_LIST_SIZE_NUM
] = { 4, 8, 16, 32};

	@source/Lib/TLibCommon/TComRom.h

38 #iâdeà
__TCOMROM__


39 
	#__TCOMROM__


	)

41 
	~"CommÚDef.h
"

43 
	~<¡dio.h
>

44 
	~<io¡»am
>

53 
Void
 
š™ROM
();

54 
Void
 
de¡royROM
();

61 
UIÁ
 
g_auiZsÿnToRa¡”
[ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ];

62 
UIÁ
 
g_auiRa¡”ToZsÿn
[ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ];

63 
UIÁ
* 
g_sÿnOrd”
[
SCAN_NUMBER_OF_GROUP_TYPES
][
SCAN_NUMBER_OF_TYPES
][ 
MAX_CU_DEPTH
 ][ MAX_CU_DEPTH ];

65 
Void
 
š™ZsÿnToRa¡”
 ( 
IÁ
 
iMaxD•th
, IÁ 
iD•th
, 
UIÁ
 
uiS¹V®
, UIÁ*& 
½uiCu¼Idx
 );

66 
Void
 
š™Ra¡”ToZsÿn
 ( 
UIÁ
 
uiMaxCUWidth
, UIÁ 
uiMaxCUHeight
, UIÁ 
uiMaxD•th
 );

69 
UIÁ
 
g_auiRa¡”ToP–X
[ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ];

70 
UIÁ
 
g_auiRa¡”ToP–Y
[ 
MAX_NUM_PART_IDXS_IN_CTU_WIDTH
*MAX_NUM_PART_IDXS_IN_CTU_WIDTH ];

72 
Void
 
š™Ra¡”ToP–XY
 ( 
UIÁ
 
uiMaxCUWidth
, UIÁ 
uiMaxCUHeight
, UIÁ 
uiMaxD•th
 );

74 cÚ¡ 
UIÁ
 
g_auiPUOff£t
[
NUMBER_OF_PART_SIZES
];

76 cÚ¡ 
IÁ
 
g_quªtSÿËs
[
SCALING_LIST_REM_NUM
];

77 cÚ¡ 
IÁ
 
g_švQuªtSÿËs
[
SCALING_LIST_REM_NUM
];

79 #ià
RExt__HIGH_PRECISION_FORWARD_TRANSFORM


80 cÚ¡ 
IÁ
 
	gg_ŒªsfÜmM©rixShiá
[
TRANSFORM_NUMBER_OF_DIRECTIONS
] = { 14, 6 };

82 cÚ¡ 
IÁ
 
	gg_ŒªsfÜmM©rixShiá
[
TRANSFORM_NUMBER_OF_DIRECTIONS
] = { 6, 6 };

85 cÚ¡ 
TM©rixCÛff
 
g_aiT4
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4];

86 cÚ¡ 
TM©rixCÛff
 
g_aiT8
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][8][8];

87 cÚ¡ 
TM©rixCÛff
 
g_aiT16
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][16][16];

88 cÚ¡ 
TM©rixCÛff
 
g_aiT32
[
TRANSFORM_NUMBER_OF_DIRECTIONS
][32][32];

94 cÚ¡ 
IÁ
 
	gchromaQPM­pšgTabËSize
 = 58;

96 cÚ¡ 
UCh¬
 
g_aucChromaSÿË
[
NUM_CHROMA_FORMAT
][
chromaQPM­pšgTabËSize
];

103 cÚ¡ 
UIÁ
 
ùxIndM­4x4
[4*4];

105 cÚ¡ 
UIÁ
 
g_uiGroupIdx
[ 
MAX_TU_SIZE
 ];

106 cÚ¡ 
UIÁ
 
g_uiMšInGroup
[ 
LAST_SIGNIFICANT_GROUPS
 ];

112 cÚ¡ 
UCh¬
 
g_aucIÁ¿ModeNumFa¡_U£MPM
[
MAX_CU_DEPTH
];

113 cÚ¡ 
UCh¬
 
g_aucIÁ¿ModeNumFa¡_NÙU£MPM
[
MAX_CU_DEPTH
];

115 cÚ¡ 
UCh¬
 
g_chroma422IÁ¿AngËM­pšgTabË
[
NUM_INTRA_MODE
];

121 cÚ¡ 
TM©rixCÛff
 
g_as_DST_MAT_4
 [
TRANSFORM_NUMBER_OF_DIRECTIONS
][4][4];

127 
SCh¬
 
g_aucCÚv”tToB™
 [ 
MAX_CU_SIZE
+1 ];

130 #ià
ENC_DEC_TRACE


131 
FILE
* 
g_hT¿û
;

132 
BoÞ
 
g_bJu¡DoIt
;

133 cÚ¡ 
BoÞ
 
g_bEncDecT¿ûEÇbË
;

134 cÚ¡ 
BoÞ
 
g_bEncDecT¿ûDi§bË
;

135 
BoÞ
 
g_HLST¿ûEÇbË
;

136 
UIÁ64
 
g_nSymbÞCouÁ”
;

138 
	#COUNTER_START
 1

	)

139 
	#COUNTER_END
 0

140 

	)

141 
	#DTRACE_CABAC_F
(
x
èiàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "%f", x );

	)

142 
	#DTRACE_CABAC_V
(
x
èiàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "%d", x );

	)

143 
	#DTRACE_CABAC_VL
(
x
èiàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "%Îd", x );

	)

144 
	#DTRACE_CABAC_T
(
x
èiàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "%s", x );

	)

145 
	#DTRACE_CABAC_X
(
x
èiàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "%x", x );

	)

146 
	#DTRACE_CABAC_R
Ð
x
,
y
 ) iàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, x, y );

	)

147 
	#DTRACE_CABAC_N
 iàÐÐ
g_nSymbÞCouÁ”
 >ð
COUNTER_START
 && g_nSymbÞCouÁ” <ð
COUNTER_END
 )|| 
g_bJu¡DoIt
 ) 
	`årštf
Ð
g_hT¿û
, "\n" );

	)

151 
	#DTRACE_CABAC_F
(
x
)

	)

152 
	#DTRACE_CABAC_V
(
x
)

	)

153 
	#DTRACE_CABAC_VL
(
x
)

	)

154 
	#DTRACE_CABAC_T
(
x
)

	)

155 
	#DTRACE_CABAC_X
(
x
)

	)

156 
	#DTRACE_CABAC_R
Ð
x
,
y
 )

	)

157 
	#DTRACE_CABAC_N


	)

161 cÚ¡ 
TCh¬
* 
ÇlUn™Ty³ToSŒšg
(
N®Un™Ty³
 
ty³
);

163 cÚ¡ 
TCh¬
 *
M©rixTy³
[
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

164 cÚ¡ 
TCh¬
 *
M©rixTy³_DC
[
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

166 cÚ¡ 
IÁ
 
g_quªtTSDeçuÉ4x4
[4*4];

167 cÚ¡ 
IÁ
 
g_quªtIÁ¿DeçuÉ8x8
[8*8];

168 cÚ¡ 
IÁ
 
g_quªtIÁ”DeçuÉ8x8
[8*8];

170 cÚ¡ 
UIÁ
 
g_sÿlšgLi¡Size
 [
SCALING_LIST_SIZE_NUM
];

171 cÚ¡ 
UIÁ
 
g_sÿlšgLi¡SizeX
[
SCALING_LIST_SIZE_NUM
];

	@source/Lib/TLibCommon/TComSampleAdaptiveOffset.cpp

38 
	~"TComSam¶eAd­tiveOff£t.h
"

39 
	~<¡ršg.h
>

40 
	~<¡dlib.h
>

41 
	~<¡dio.h
>

42 
	~<m©h.h
>

47 
	gSAOOff£t
::
	$SAOOff£t
()

49 
	`»£t
();

50 
	}
}

52 
	gSAOOff£t
::~
	$SAOOff£t
()

55 
	}
}

57 
Void
 
SAOOff£t
::
	$»£t
()

59 
modeIdc
 = 
SAO_MODE_OFF
;

60 
ty³Idc
 = -1;

61 
ty³AuxInfo
 = -1;

62 ::
	`mem£t
(
off£t
, 0, (
IÁ
)* 
MAX_NUM_SAO_CLASSES
);

63 
	}
}

65 cÚ¡ 
	gSAOOff£t
& SAOOff£t::
Ý”©Ü
ð(cÚ¡ 
SAOOff£t
& 
¤c
)

67 
modeIdc
 = 
¤c
.modeIdc;

68 
	gty³Idc
 = 
¤c
.
ty³Idc
;

69 
	gty³AuxInfo
 = 
¤c
.
ty³AuxInfo
;

70 ::
memýy
(
off£t
, 
¤c
.off£t, (
IÁ
)* 
MAX_NUM_SAO_CLASSES
);

72  *
	gthis
;

76 
	gSAOBlkP¬am
::
	$SAOBlkP¬am
()

78 
	`»£t
();

79 
	}
}

81 
	gSAOBlkP¬am
::~
	$SAOBlkP¬am
()

84 
	}
}

86 
Void
 
SAOBlkP¬am
::
	$»£t
()

88 
IÁ
 
compIdx
 = 0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

90 
off£tP¬am
[
compIdx
].
	`»£t
();

92 
	}
}

94 cÚ¡ 
	gSAOBlkP¬am
& SAOBlkP¬am::
Ý”©Ü
ð(cÚ¡ 
SAOBlkP¬am
& 
¤c
)

96 
IÁ
 
compIdx
 = 0; 
	gcompIdx
 < 
	gMAX_NUM_COMPONENT
; compIdx++)

98 
	goff£tP¬am
[
compIdx
] = 
¤c
.
off£tP¬am
[compIdx];

100  *
	gthis
;

104 
	gTComSam¶eAd­tiveOff£t
::
	$TComSam¶eAd­tiveOff£t
()

106 
m_‹mpPicYuv
 = 
NULL
;

107 
m_lšeBufWidth
 = 0;

108 
m_signLšeBuf1
 = 
NULL
;

109 
m_signLšeBuf2
 = 
NULL
;

110 
	}
}

113 
	gTComSam¶eAd­tiveOff£t
::~
	$TComSam¶eAd­tiveOff£t
()

115 
	`de¡roy
();

117 ià(
m_signLšeBuf1
)

119 
d–‘e
[] 
m_signLšeBuf1
;

120 
m_signLšeBuf1
 = 
NULL
;

122 ià(
m_signLšeBuf2
)

124 
d–‘e
[] 
m_signLšeBuf2
;

125 
m_signLšeBuf2
 = 
NULL
;

127 
	}
}

129 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$ü—‹
Ð
IÁ
 
picWidth
, IÁ 
picHeight
, 
ChromaFÜm©
 
fÜm©
, 
UIÁ
 
maxCUWidth
, UIÁ 
maxCUHeight
, UIÁ 
maxCUD•th
, UIÁ 
lumaB™Shiá
, UIÁ 
chromaB™Shiá
 )

131 
	`de¡roy
();

133 
m_picWidth
 = 
picWidth
;

134 
m_picHeight
 = 
picHeight
;

135 
m_chromaFÜm©IDC
 = 
fÜm©
;

136 
m_maxCUWidth
 = 
maxCUWidth
;

137 
m_maxCUHeight
 = 
maxCUHeight
;

139 
m_numCTUInWidth
 = (
m_picWidth
/
m_maxCUWidth
) + ((m_picWidth % m_maxCUWidth)?1:0);

140 
m_numCTUInHeight
 = (
m_picHeight
/
m_maxCUHeight
) + ((m_picHeight % m_maxCUHeight)?1:0);

141 
m_numCTUsPic
 = 
m_numCTUInHeight
*
m_numCTUInWidth
;

144 iàÐ!
m_‹mpPicYuv
 )

146 
m_‹mpPicYuv
 = 
Ãw
 
TComPicYuv
;

147 
m_‹mpPicYuv
->
	`ü—‹
Ð
m_picWidth
, 
m_picHeight
, 
m_chromaFÜm©IDC
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
maxCUD•th
, 
Œue
 );

151 
IÁ
 
compIdx
 = 0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

153 
m_off£tS‹pLog2
 [
compIdx
] = 
	`isLuma
(
	`CompÚ’tID
(compIdx))? 
lumaB™Shiá
 : 
chromaB™Shiá
;

155 
	}
}

157 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$de¡roy
()

159 iàÐ
m_‹mpPicYuv
 )

161 
m_‹mpPicYuv
->
	`de¡roy
();

162 
d–‘e
 
m_‹mpPicYuv
;

163 
m_‹mpPicYuv
 = 
NULL
;

165 
	}
}

167 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$šv”tQuªtOff£ts
(
CompÚ’tID
 
compIdx
, 
IÁ
 
ty³Idc
, IÁ 
ty³AuxInfo
, IÁ* 
d¡Off£ts
, IÁ* 
¤cOff£ts
)

169 
IÁ
 
codedOff£t
[
MAX_NUM_SAO_CLASSES
];

171 ::
	`memýy
(
codedOff£t
, 
¤cOff£ts
, (
IÁ
)*
MAX_NUM_SAO_CLASSES
);

172 ::
	`mem£t
(
d¡Off£ts
, 0, (
IÁ
)*
MAX_NUM_SAO_CLASSES
);

174 if(
ty³Idc
 =ð
SAO_TYPE_START_BO
)

176 
IÁ
 
i
=0; i< 4; i++)

178 
d¡Off£ts
[(
ty³AuxInfo
+ 
i
)%
NUM_SAO_BO_CLASSES
] = 
codedOff£t
[Ñy³AuxInfo+ i)%NUM_SAO_BO_CLASSES]*(1<<
m_off£tS‹pLog2
[
compIdx
]);

183 
IÁ
 
i
=0; i< 
NUM_SAO_EO_CLASSES
; i++)

185 
d¡Off£ts
[
i
] = 
codedOff£t
[i] *(1<<
m_off£tS‹pLog2
[
compIdx
]);

187 
	`as£¹
(
d¡Off£ts
[
SAO_CLASS_EO_PLAIN
] == 0);

190 
	}
}

192 
IÁ
 
	gTComSam¶eAd­tiveOff£t
::
	$g‘M”geLi¡
(
TComPic
* 
pic
, 
IÁ
 
ùuRsAddr
, 
SAOBlkP¬am
* 
blkP¬ams
, SAOBlkP¬am* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
])

194 
IÁ
 
ùuX
 = 
ùuRsAddr
 % 
m_numCTUInWidth
;

195 
IÁ
 
ùuY
 = 
ùuRsAddr
 / 
m_numCTUInWidth
;

196 
IÁ
 
m”gedCTUPos
;

197 
IÁ
 
numV®idM”geCªdid©es
 = 0;

199 
IÁ
 
m”geTy³
=0; m”geTy³< 
NUM_SAO_MERGE_TYPES
; mergeType++)

201 
SAOBlkP¬am
* 
m”geCªdid©e
 = 
NULL
;

203 
m”geTy³
)

205 
SAO_MERGE_ABOVE
:

207 if(
ùuY
 > 0)

209 
m”gedCTUPos
 = 
ùuRsAddr
- 
m_numCTUInWidth
;

210 ifÐ
pic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, 
m”gedCTUPos
) )

212 
m”geCªdid©e
 = &(
blkP¬ams
[
m”gedCTUPos
]);

217 
SAO_MERGE_LEFT
:

219 if(
ùuX
 > 0)

221 
m”gedCTUPos
 = 
ùuRsAddr
- 1;

222 ifÐ
pic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, 
m”gedCTUPos
) )

224 
m”geCªdid©e
 = &(
blkP¬ams
[
m”gedCTUPos
]);

231 
	`´štf
("not‡ supported mergeype");

232 
	`as£¹
(0);

233 
	`ex™
(-1);

237 
m”geLi¡
[
m”geTy³
]=
m”geCªdid©e
;

238 ià(
m”geCªdid©e
 !ð
NULL
)

240 
numV®idM”geCªdid©es
++;

244  
numV®idM”geCªdid©es
;

245 
	}
}

248 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$»cÚ¡ruùBlkSAOP¬am
(
SAOBlkP¬am
& 
»cP¬am
, SAOBlkP¬am* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
])

250 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

251 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

253 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compIdx
);

254 
SAOOff£t
& 
off£tP¬am
 = 
»cP¬am
[
compÚ’t
];

256 if(
off£tP¬am
.
modeIdc
 =ð
SAO_MODE_OFF
)

261 
off£tP¬am
.
modeIdc
)

263 
SAO_MODE_NEW
:

265 
	`šv”tQuªtOff£ts
(
compÚ’t
, 
off£tP¬am
.
ty³Idc
, off£tP¬am.
ty³AuxInfo
, off£tP¬am.
off£t
, offsetParam.offset);

268 
SAO_MODE_MERGE
:

270 
SAOBlkP¬am
* 
m”geT¬g‘
 = 
m”geLi¡
[
off£tP¬am
.
ty³Idc
];

271 
	`as£¹
(
m”geT¬g‘
 !ð
NULL
);

273 
off£tP¬am
 = (*
m”geT¬g‘
)[
compÚ’t
];

278 
	`´štf
("Not‡ supported mode");

279 
	`as£¹
(0);

280 
	`ex™
(-1);

284 
	}
}

286 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$»cÚ¡ruùBlkSAOP¬ams
(
TComPic
* 
pic
, 
SAOBlkP¬am
* 
§oBlkP¬ams
)

288 
IÁ
 
compIdx
 = 0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

290 
m_picSAOEÇbËd
[
compIdx
] = 
çl£
;

293 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

295 
IÁ
 
ùuRsAddr
=0; ctuRsAddr< 
m_numCTUsPic
; ctuRsAddr++)

297 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
] = { 
NULL
 };

298 
	`g‘M”geLi¡
(
pic
, 
ùuRsAddr
, 
§oBlkP¬ams
, 
m”geLi¡
);

300 
	`»cÚ¡ruùBlkSAOP¬am
(
§oBlkP¬ams
[
ùuRsAddr
], 
m”geLi¡
);

302 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

304 if(
§oBlkP¬ams
[
ùuRsAddr
][
compIdx
].
modeIdc
 !ð
SAO_MODE_OFF
)

306 
m_picSAOEÇbËd
[
compIdx
] = 
Œue
;

310 
	}
}

313 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$off£tBlock
(cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idx
, IÁ* 
off£t


314 , 
P–
* 
¤cBlk
, P–* 
»sBlk
, 
IÁ
 
¤cSŒide
, IÁ 
»sSŒide
, IÁ 
width
, IÁ 
height


315 , 
BoÞ
 
isLeáAvaž
, BoÞ 
isRightAvaž
, BoÞ 
isAboveAvaž
, BoÞ 
isB–owAvaž
, BoÞ 
isAboveLeáAvaž
, BoÞ 
isAboveRightAvaž
, BoÞ 
isB–owLeáAvaž
, BoÞ 
isB–owRightAvaž
)

317 if(
m_lšeBufWidth
 !ð
m_maxCUWidth
)

319 
m_lšeBufWidth
 = 
m_maxCUWidth
;

321 ià(
m_signLšeBuf1
)

323 
d–‘e
[] 
m_signLšeBuf1
;

324 
m_signLšeBuf1
 = 
NULL
;

326 
m_signLšeBuf1
 = 
Ãw
 
SCh¬
[
m_lšeBufWidth
+1];

328 ià(
m_signLšeBuf2
)

330 
d–‘e
[] 
m_signLšeBuf2
;

331 
m_signLšeBuf2
 = 
NULL
;

333 
m_signLšeBuf2
 = 
Ãw
 
SCh¬
[
m_lšeBufWidth
+1];

336 cÚ¡ 
IÁ
 
maxSam¶eV®ueInþ
 = (1<< 
chªÃlB™D•th
 )-1;

338 
IÁ
 
x
,
y
, 
¡¬tX
, 
¡¬tY
, 
’dX
, 
’dY
, 
edgeTy³
;

339 
IÁ
 
fœ¡LšeS¹X
, 
fœ¡LšeEndX
, 
Ï¡LšeS¹X
, 
Ï¡LšeEndX
;

340 
SCh¬
 
signLeá
, 
signRight
, 
signDown
;

342 
P–
* 
¤cLše
 = 
¤cBlk
;

343 
P–
* 
»sLše
 = 
»sBlk
;

345 
ty³Idx
)

347 
SAO_TYPE_EO_0
:

349 
off£t
 += 2;

350 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1;

351 
’dX
 = 
isRightAvaž
 ? 
width
 : (width -1);

352 
y
=0; y< 
height
; y++)

354 
signLeá
 = (
SCh¬
)
	`sgn
(
¤cLše
[
¡¬tX
] - srcLine[startX-1]);

355 
x
=
¡¬tX
; x< 
’dX
; x++)

357 
signRight
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - srcLine[x+1]);

358 
edgeTy³
 = 
signRight
 + 
signLeá
;

359 
signLeá
 = -
signRight
;

361 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

363 
¤cLše
 +ð
¤cSŒide
;

364 
»sLše
 +ð
»sSŒide
;

369 
SAO_TYPE_EO_90
:

371 
off£t
 += 2;

372 
SCh¬
 *
signUpLše
 = 
m_signLšeBuf1
;

374 
¡¬tY
 = 
isAboveAvaž
 ? 0 : 1;

375 
’dY
 = 
isB–owAvaž
 ? 
height
 : height-1;

376 ià(!
isAboveAvaž
)

378 
¤cLše
 +ð
¤cSŒide
;

379 
»sLše
 +ð
»sSŒide
;

382 
P–
* 
¤cLšeAbove
ð
¤cLše
- 
¤cSŒide
;

383 
x
=0; x< 
width
; x++)

385 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLše
[x] - 
¤cLšeAbove
[x]);

388 
P–
* 
¤cLšeB–ow
;

389 
y
=
¡¬tY
; y<
’dY
; y++)

391 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

393 
x
=0; x< 
width
; x++)

395 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x]);

396 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

397 
signUpLše
[
x
]ð-
signDown
;

399 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

401 
¤cLše
 +ð
¤cSŒide
;

402 
»sLše
 +ð
»sSŒide
;

407 
SAO_TYPE_EO_135
:

409 
off£t
 += 2;

410 
SCh¬
 *
signUpLše
, *
signDownLše
, *
signTmpLše
;

412 
signUpLše
 = 
m_signLšeBuf1
;

413 
signDownLše
ð
m_signLšeBuf2
;

415 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1 ;

416 
’dX
 = 
isRightAvaž
 ? 
width
 : (width-1);

419 
P–
* 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

420 
x
=
¡¬tX
; x< 
’dX
+1; x++)

422 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[x] - 
¤cLše
[x- 1]);

426 
P–
* 
¤cLšeAbove
ð
¤cLše
- 
¤cSŒide
;

427 
fœ¡LšeS¹X
 = 
isAboveLeáAvaž
 ? 0 : 1;

428 
fœ¡LšeEndX
 = 
isAboveAvaž
? 
’dX
: 1;

429 
x
ð
fœ¡LšeS¹X
; x< 
fœ¡LšeEndX
; x++)

431 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeAbove
[x- 1]è- 
signUpLše
[x+1];

433 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

435 
¤cLše
 +ð
¤cSŒide
;

436 
»sLše
 +ð
»sSŒide
;

440 
y
ð1; y< 
height
-1; y++)

442 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

444 
x
=
¡¬tX
; x<
’dX
; x++)

446 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x+ 1]);

447 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

448 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

450 
signDownLše
[
x
+1] = -
signDown
;

452 
signDownLše
[
¡¬tX
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[¡¬tX] - 
¤cLše
[startX-1]);

454 
signTmpLše
 = 
signUpLše
;

455 
signUpLše
 = 
signDownLše
;

456 
signDownLše
 = 
signTmpLše
;

458 
¤cLše
 +ð
¤cSŒide
;

459 
»sLše
 +ð
»sSŒide
;

463 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

464 
Ï¡LšeS¹X
 = 
isB–owAvaž
 ? 
¡¬tX
 : (
width
 -1);

465 
Ï¡LšeEndX
 = 
isB–owRightAvaž
 ? 
width
 : (width -1);

466 
x
ð
Ï¡LšeS¹X
; x< 
Ï¡LšeEndX
; x++)

468 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x+ 1]è+ 
signUpLše
[x];

469 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

474 
SAO_TYPE_EO_45
:

476 
off£t
 += 2;

477 
SCh¬
 *
signUpLše
 = 
m_signLšeBuf1
+1;

479 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1;

480 
’dX
 = 
isRightAvaž
 ? 
width
 : (width -1);

483 
P–
* 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

484 
x
=
¡¬tX
-1; x< 
’dX
; x++)

486 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[x] - 
¤cLše
[x+1]);

491 
P–
* 
¤cLšeAbove
ð
¤cLše
- 
¤cSŒide
;

492 
fœ¡LšeS¹X
 = 
isAboveAvaž
 ? 
¡¬tX
 : (
width
 -1 );

493 
fœ¡LšeEndX
 = 
isAboveRightAvaž
 ? 
width
 : (width-1);

494 
x
ð
fœ¡LšeS¹X
; x< 
fœ¡LšeEndX
; x++)

496 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeAbove
[x+1]è-
signUpLše
[x-1];

497 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

499 
¤cLše
 +ð
¤cSŒide
;

500 
»sLše
 +ð
»sSŒide
;

503 
y
ð1; y< 
height
-1; y++)

505 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

507 
x
ð
¡¬tX
; x< 
’dX
; x++)

509 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x-1]);

510 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

511 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

512 
signUpLše
[
x
-1] = -
signDown
;

514 
signUpLše
[
’dX
-1] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[’dX-1] - 
¤cLše
[endX]);

515 
¤cLše
 +ð
¤cSŒide
;

516 
»sLše
 +ð
»sSŒide
;

520 
¤cLšeB–ow
ð
¤cLše
+ 
¤cSŒide
;

521 
Ï¡LšeS¹X
 = 
isB–owLeáAvaž
 ? 0 : 1;

522 
Ï¡LšeEndX
 = 
isB–owAvaž
 ? 
’dX
 : 1;

523 
x
ð
Ï¡LšeS¹X
; x< 
Ï¡LšeEndX
; x++)

525 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x-1]è+ 
signUpLše
[x];

526 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[
edgeTy³
]);

531 
SAO_TYPE_BO
:

533 cÚ¡ 
IÁ
 
shiáB™s
 = 
chªÃlB™D•th
 - 
NUM_SAO_BO_CLASSES_LOG2
;

534 
y
=0; y< 
height
; y++)

536 
x
=0; x< 
width
; x++)

538 
»sLše
[
x
] = 
Cl3
<
IÁ
>(0, 
maxSam¶eV®ueInþ
, 
¤cLše
[x] + 
off£t
[¤cLše[x] >> 
shiáB™s
] );

540 
¤cLše
 +ð
¤cSŒide
;

541 
»sLše
 +ð
»sSŒide
;

547 
	`´štf
("Not‡ supported SAOypes\n");

548 
	`as£¹
(0);

549 
	`ex™
(-1);

552 
	}
}

554 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$off£tCTU
(
IÁ
 
ùuRsAddr
, 
TComPicYuv
* 
¤cYuv
, TComPicYuv* 
»sYuv
, 
SAOBlkP¬am
& 
§oblkP¬am
, 
TComPic
* 
pPic
)

556 
BoÞ
 
isLeáAvaž
,
isRightAvaž
,
isAboveAvaž
,
isB–owAvaž
,
isAboveLeáAvaž
,
isAboveRightAvaž
,
isB–owLeáAvaž
,
isB–owRightAvaž
;

558 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

559 
BoÞ
 
bAÎOff
=
Œue
;

560 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

562 ià(
§oblkP¬am
[
compIdx
].
modeIdc
 !ð
SAO_MODE_OFF
)

564 
bAÎOff
=
çl£
;

567 ià(
bAÎOff
)

573 
pPic
->
	`g‘PicSym
()->
	`d”iveLoÝFž‹rBound¬yAvažibž™y
(
ùuRsAddr
, 
isLeáAvaž
,
isRightAvaž
,
isAboveAvaž
,
isB–owAvaž
,
isAboveLeáAvaž
,
isAboveRightAvaž
,
isB–owLeáAvaž
,
isB–owRightAvaž
);

575 
IÁ
 
yPos
 = (
ùuRsAddr
 / 
m_numCTUInWidth
)*
m_maxCUHeight
;

576 
IÁ
 
xPos
 = (
ùuRsAddr
 % 
m_numCTUInWidth
)*
m_maxCUWidth
;

577 
IÁ
 
height
 = (
yPos
 + 
m_maxCUHeight
 > 
m_picHeight
)?(m_picHeight- yPos):m_maxCUHeight;

578 
IÁ
 
width
 = (
xPos
 + 
m_maxCUWidth
 > 
m_picWidth
 )?(m_picWidth - xPos):m_maxCUWidth;

580 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

582 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compIdx
);

583 
SAOOff£t
& 
ùbOff£t
 = 
§oblkP¬am
[
compIdx
];

585 if(
ùbOff£t
.
modeIdc
 !ð
SAO_MODE_OFF
)

587 cÚ¡ 
UIÁ
 
compÚ’tSÿËX
 = 
	`g‘CompÚ’tSÿËX
(
compÚ’t
, 
pPic
->
	`g‘ChromaFÜm©
());

588 cÚ¡ 
UIÁ
 
compÚ’tSÿËY
 = 
	`g‘CompÚ’tSÿËY
(
compÚ’t
, 
pPic
->
	`g‘ChromaFÜm©
());

590 
IÁ
 
blkWidth
 = (
width
 >> 
compÚ’tSÿËX
);

591 
IÁ
 
blkHeight
 = (
height
 >> 
compÚ’tSÿËY
);

592 
IÁ
 
blkXPos
 = (
xPos
 >> 
compÚ’tSÿËX
);

593 
IÁ
 
blkYPos
 = (
yPos
 >> 
compÚ’tSÿËY
);

595 
IÁ
 
¤cSŒide
 = 
¤cYuv
->
	`g‘SŒide
(
compÚ’t
);

596 
P–
* 
¤cBlk
 = 
¤cYuv
->
	`g‘Addr
(
compÚ’t
è+ 
blkYPos
*
¤cSŒide
 + 
blkXPos
;

598 
IÁ
 
»sSŒide
 = 
»sYuv
->
	`g‘SŒide
(
compÚ’t
);

599 
P–
* 
»sBlk
 = 
»sYuv
->
	`g‘Addr
(
compÚ’t
è+ 
blkYPos
*
»sSŒide
 + 
blkXPos
;

601 
	`off£tBlock
Ð
pPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(
compÚ’t
)), 
ùbOff£t
.
ty³Idc
, ctbOff£t.
off£t


602 , 
¤cBlk
, 
»sBlk
, 
¤cSŒide
, 
»sSŒide
, 
blkWidth
, 
blkHeight


603 , 
isLeáAvaž
, 
isRightAvaž


604 , 
isAboveAvaž
, 
isB–owAvaž


605 , 
isAboveLeáAvaž
, 
isAboveRightAvaž


606 , 
isB–owLeáAvaž
, 
isB–owRightAvaž


611 
	}
}

614 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$SAOProûss
(
TComPic
* 
pDecPic
)

616 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

617 
BoÞ
 
bAÎDi§bËd
=
Œue
;

618 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

620 ià(
m_picSAOEÇbËd
[
compIdx
])

622 
bAÎDi§bËd
=
çl£
;

625 ià(
bAÎDi§bËd
)

630 
TComPicYuv
* 
»sYuv
 = 
pDecPic
->
	`g‘PicYuvRec
();

631 
TComPicYuv
* 
¤cYuv
 = 
m_‹mpPicYuv
;

632 
»sYuv
->
	`cÝyToPic
(
¤cYuv
);

633 
IÁ
 
ùuRsAddr
ð0; ctuRsAdd¸< 
m_numCTUsPic
; ctuRsAddr++)

635 
	`off£tCTU
(
ùuRsAddr
, 
¤cYuv
, 
»sYuv
, (
pDecPic
->
	`g‘PicSym
()->
	`g‘SAOBlkP¬am
())[ctuRsAddr],…DecPic);

637 
	}
}

645 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$PCMLFDi§bËProûss
 (
TComPic
* 
pcPic
)

647 
	`xPCMRe¡Ü©iÚ
(
pcPic
);

648 
	}
}

653 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$xPCMRe¡Ü©iÚ
(
TComPic
* 
pcPic
)

655 
BoÞ
 
bPCMFž‹r
 = (
pcPic
->
	`g‘Sliû
(0)->
	`g‘SPS
()->
	`g‘U£PCM
(è&&…cPic->g‘Sliû(0)->g‘SPS()->
	`g‘PCMFž‹rDi§bËFÏg
())? 
Œue
 : 
çl£
;

657 if(
bPCMFž‹r
 || 
pcPic
->
	`g‘Sliû
(0)->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

659  
UIÁ
 
ùuRsAddr
 = 0; ctuRsAdd¸< 
pcPic
->
	`g‘Numb”OfCtusInF¿me
() ; ctuRsAddr++ )

661 
TComD©aCU
* 
pcCU
 = 
pcPic
->
	`g‘Ctu
(
ùuRsAddr
);

663 
	`xPCMCURe¡Ü©iÚ
(
pcCU
, 0, 0);

666 
	}
}

673 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$xPCMCURe¡Ü©iÚ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
 )

675 
TComPic
* 
pcPic
 = 
pcCU
->
	`g‘Pic
();

676 
UIÁ
 
uiCurNumP¬ts
 = 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
<<1);

677 
UIÁ
 
uiQNumP¬ts
 = 
uiCurNumP¬ts
>>2;

680 ifÐ
pcCU
->
	`g‘D•th
(
uiAbsZÜd”Idx
è> 
uiD•th
 )

682  
UIÁ
 
uiP¬tIdx
 = 0; uiP¬tIdx < 4; uiP¬tIdx++, 
uiAbsZÜd”Idx
+=
uiQNumP¬ts
 )

684 
UIÁ
 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
] ];

685 
UIÁ
 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsZÜd”Idx
] ];

686 ifÐÐ
uiLP–X
 < 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiTP–Y
 <…cCU->g‘Sliû()->g‘SPS()->
	`g‘PicHeightInLumaSam¶es
() ) )

688 
	`xPCMCURe¡Ü©iÚ
Ð
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
+1 );

695 ià((
pcCU
->
	`g‘IPCMFÏg
(
uiAbsZÜd”Idx
)&& 
pcPic
->
	`g‘Sliû
(0)->
	`g‘SPS
()->
	`g‘PCMFž‹rDi§bËFÏg
()è||…cCU->
	`isLos¦essCoded
( uiAbsZorderIdx))

697 cÚ¡ 
UIÁ
 
numCompÚ’ts
=
pcPic
->
	`g‘Numb”V®idCompÚ’ts
();

698 
UIÁ
 
comp
=0; comp<
numCompÚ’ts
; comp++)

700 
	`xPCMSam¶eRe¡Ü©iÚ
 (
pcCU
, 
uiAbsZÜd”Idx
, 
uiD•th
, 
	`CompÚ’tID
(
comp
));

703 
	}
}

711 
Void
 
	gTComSam¶eAd­tiveOff£t
::
	$xPCMSam¶eRe¡Ü©iÚ
 (
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
, cÚ¡ 
CompÚ’tID
 
compID
)

713 
TComPicYuv
* 
pcPicYuvRec
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
();

714 
UIÁ
 
uiPcmLeáShiáB™
;

715 cÚ¡ 
UIÁ
 
uiMšCÛffSize
 = 
pcCU
->
	`g‘Pic
()->
	`g‘MšCUWidth
()*pcCU->g‘Pic()->
	`g‘MšCUHeight
();

716 cÚ¡ 
UIÁ
 
csx
=
pcPicYuvRec
->
	`g‘CompÚ’tSÿËX
(
compID
);

717 cÚ¡ 
UIÁ
 
csy
=
pcPicYuvRec
->
	`g‘CompÚ’tSÿËY
(
compID
);

718 cÚ¡ 
UIÁ
 
uiOff£t
 = (
uiMšCÛffSize
*
uiAbsZÜd”Idx
)>>(
csx
+
csy
);

720 
P–
 *
piSrc
 = 
pcPicYuvRec
->
	`g‘Addr
(
compID
, 
pcCU
->
	`g‘CtuRsAddr
(), 
uiAbsZÜd”Idx
);

721 cÚ¡ 
P–
 *
piPcm
 = 
pcCU
->
	`g‘PCMSam¶e
(
compID
è+ 
uiOff£t
;

722 cÚ¡ 
UIÁ
 
uiSŒide
 = 
pcPicYuvRec
->
	`g‘SŒide
(
compID
);

723 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

724 cÚ¡ 
UIÁ
 
uiWidth
 = ((
¥s
.
	`g‘MaxCUWidth
(è>> 
uiD•th
è>> 
csx
);

725 cÚ¡ 
UIÁ
 
uiHeight
 = ((
¥s
.
	`g‘MaxCUHeight
(è>> 
uiD•th
è>> 
csy
);

727 iàÐ
pcCU
->
	`isLos¦essCoded
(
uiAbsZÜd”Idx
è&& !pcCU->
	`g‘IPCMFÏg
(uiAbsZorderIdx) )

729 
uiPcmLeáShiáB™
 = 0;

733 
uiPcmLeáShiáB™
 = 
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
)è- sps.
	`g‘PCMB™D•th
(toChannelType(compID));

736 
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

738 
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

740 
piSrc
[
uiX
] = (
piPcm
[uiX] << 
uiPcmLeáShiáB™
);

742 
piPcm
 +ð
uiWidth
;

743 
piSrc
 +ð
uiSŒide
;

745 
	}
}

	@source/Lib/TLibCommon/TComSampleAdaptiveOffset.h

38 #iâdeà
__TCOMSAMPLEADAPTIVEOFFSET__


39 
	#__TCOMSAMPLEADAPTIVEOFFSET__


	)

41 
	~"CommÚDef.h
"

42 
	~"TComPic.h
"

52 
	#MAX_SAO_TRUNCATED_BITDEPTH
 10

	)

58 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
IÁ
 
	$sgn
(
T
 
v®
)

60  (
	`T
(0è< 
v®
) - (val < T(0));

61 
	}
}

63 þas 
	cTComSam¶eAd­tiveOff£t


65 
	mpublic
:

66 
TComSam¶eAd­tiveOff£t
();

67 
	mvœtu®
 ~
TComSam¶eAd­tiveOff£t
();

68 
Void
 
SAOProûss
(
TComPic
* 
pDecPic
);

69 
Void
 
ü—‹
Ð
IÁ
 
picWidth
, IÁ 
picHeight
, 
ChromaFÜm©
 
fÜm©
, 
UIÁ
 
maxCUWidth
, UIÁ 
maxCUHeight
, UIÁ 
maxCUD•th
, UIÁ 
lumaB™Shiá
, UIÁ 
chromaB™Shiá
 );

70 
Void
 
de¡roy
();

71 
Void
 
»cÚ¡ruùBlkSAOP¬ams
(
TComPic
* 
pic
, 
SAOBlkP¬am
* 
§oBlkP¬ams
);

72 
Void
 
PCMLFDi§bËProûss
 (
TComPic
* 
pcPic
);

73 
IÁ
 
	$g‘MaxOff£tQV®
(cÚ¡ 
IÁ
 
chªÃlB™D•th
è{  (1<<(
¡d
::
mš
<IÁ>(chªÃlB™D•th,
MAX_SAO_TRUNCATED_BITDEPTH
)-5))-1; }

75 
´Ùeùed
:

76 
Void
 
	`off£tBlock
(cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idx
, IÁ* 
off£t
, 
P–
* 
¤cBlk
, P–* 
»sBlk
, IÁ 
¤cSŒide
, IÁ 
»sSŒide
, IÁ 
width
, IÁ 
height


77 , 
BoÞ
 
isLeáAvaž
, BoÞ 
isRightAvaž
, BoÞ 
isAboveAvaž
, BoÞ 
isB–owAvaž
, BoÞ 
isAboveLeáAvaž
, BoÞ 
isAboveRightAvaž
, BoÞ 
isB–owLeáAvaž
, BoÞ 
isB–owRightAvaž
);

78 
Void
 
	`šv”tQuªtOff£ts
(
CompÚ’tID
 
compIdx
, 
IÁ
 
ty³Idc
, IÁ 
ty³AuxInfo
, IÁ* 
d¡Off£ts
, IÁ* 
¤cOff£ts
);

79 
Void
 
	`»cÚ¡ruùBlkSAOP¬am
(
SAOBlkP¬am
& 
»cP¬am
, SAOBlkP¬am* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
]);

80 
IÁ
 
	`g‘M”geLi¡
(
TComPic
* 
pic
, IÁ 
ùuRsAddr
, 
SAOBlkP¬am
* 
blkP¬ams
, SAOBlkP¬am* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
]);

81 
Void
 
	`off£tCTU
(
IÁ
 
ùuRsAddr
, 
TComPicYuv
* 
¤cYuv
, TComPicYuv* 
»sYuv
, 
SAOBlkP¬am
& 
§oblkP¬am
, 
TComPic
* 
pPic
);

82 
Void
 
	`xPCMRe¡Ü©iÚ
(
TComPic
* 
pcPic
);

83 
Void
 
	`xPCMCURe¡Ü©iÚ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
 );

84 
Void
 
	`xPCMSam¶eRe¡Ü©iÚ
 (
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsZÜd”Idx
, UIÁ 
uiD•th
, cÚ¡ 
CompÚ’tID
 
compID
);

85 
´Ùeùed
:

86 
UIÁ
 
m_off£tS‹pLog2
[
MAX_NUM_COMPONENT
];

87 
TComPicYuv
* 
m_‹mpPicYuv
;

88 
IÁ
 
m_picWidth
;

89 
IÁ
 
m_picHeight
;

90 
IÁ
 
m_maxCUWidth
;

91 
IÁ
 
m_maxCUHeight
;

92 
IÁ
 
m_numCTUInWidth
;

93 
IÁ
 
m_numCTUInHeight
;

94 
IÁ
 
m_numCTUsPic
;

97 
IÁ
 
m_lšeBufWidth
;

98 
SCh¬
* 
m_signLšeBuf1
;

99 
SCh¬
* 
m_signLšeBuf2
;

100 
ChromaFÜm©
 
m_chromaFÜm©IDC
;

101 
´iv©e
:

102 
BoÞ
 
m_picSAOEÇbËd
[
MAX_NUM_COMPONENT
];

103 
	}
};

	@source/Lib/TLibCommon/TComSlice.cpp

38 
	~"CommÚDef.h
"

39 
	~"TComSliû.h
"

40 
	~"TComPic.h
"

41 
	~"TLibEncod”/TEncSbac.h
"

42 
	~"TLibDecod”/TDecSbac.h
"

48 
	gTComSliû
::
	$TComSliû
()

49 : 
	`m_iPPSId
 ( -1 )

50 , 
	`m_PicOuutFÏg
 ( 
Œue
 )

51 , 
	`m_iPOC
 ( 0 )

52 , 
	`m_iLa¡IDR
 ( 0 )

53 , 
	`m_iAssocŸ‹dIRAP
 ( 0 )

54 , 
	`m_iAssocŸ‹dIRAPTy³
 ( 
NAL_UNIT_INVALID
 )

55 , 
	`m_pRPS
 ( 0 )

56 , 
	`m_loÿlRPS
 ( )

57 , 
	`m_½sIdx
 ( 0 )

58 , 
	`m_RefPicLi¡ModifiÿtiÚ
 ( )

59 , 
	`m_eN®Un™Ty³
 ( 
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 )

60 , 
	`m_eSliûTy³
 ( 
I_SLICE
 )

61 , 
	`m_iSliûQp
 ( 0 )

62 , 
	$m_d•’d’tSliûSegm’tFÏg
 ( 
çl£
 )

63 #ià
ADAPTIVE_QP_SELECTION


64 , 
	$m_iSliûQpBa£
 ( 0 )

66 , 
	`m_ChromaQpAdjEÇbËd
 ( 
çl£
 )

67 , 
	`m_deblockšgFž‹rDi§bË
 ( 
çl£
 )

68 , 
	`m_deblockšgFž‹rOv”rideFÏg
 ( 
çl£
 )

69 , 
	`m_deblockšgFž‹rB‘aOff£tDiv2
( 0 )

70 , 
	`m_deblockšgFž‹rTcOff£tDiv2
 ( 0 )

71 , 
	`m_bCheckLDC
 ( 
çl£
 )

72 , 
	`m_iSliûQpD–
 ( 0 )

73 , 
	`m_iD•th
 ( 0 )

74 , 
	`m_bReãnûd
 ( 
çl£
 )

75 , 
	`m_pcVPS
 ( 
NULL
 )

76 , 
	`m_pcSPS
 ( 
NULL
 )

77 , 
	`m_pcPPS
 ( 
NULL
 )

78 , 
	`m_pcPic
 ( 
NULL
 )

79 , 
	`m_cÞFromL0FÏg
 ( 
Œue
 )

80 , 
	`m_noOuutPriÜPicsFÏg
 ( 
çl£
 )

81 , 
	`m_noRa¦OuutFÏg
 ( 
çl£
 )

82 , 
	`m_hªdËC¿AsBÏFÏg
 ( 
çl£
 )

83 , 
	`m_cÞRefIdx
 ( 0 )

84 , 
	`m_maxNumM”geCªd
 ( 0 )

85 , 
	`m_uiTLay”
 ( 0 )

86 , 
	`m_bTLay”Sw™chšgFÏg
 ( 
çl£
 )

87 , 
	`m_¦iûMode
 ( 
NO_SLICES
 )

88 , 
	`m_¦iûArgum’t
 ( 0 )

89 , 
	`m_¦iûCurS¹CtuTsAddr
 ( 0 )

90 , 
	`m_¦iûCurEndCtuTsAddr
 ( 0 )

91 , 
	`m_¦iûIdx
 ( 0 )

92 , 
	`m_¦iûSegm’tMode
 ( 
NO_SLICES
 )

93 , 
	`m_¦iûSegm’tArgum’t
 ( 0 )

94 , 
	`m_¦iûSegm’tCurS¹CtuTsAddr
 ( 0 )

95 , 
	`m_¦iûSegm’tCurEndCtuTsAddr
 ( 0 )

96 , 
	`m_ÃxtSliû
 ( 
çl£
 )

97 , 
	`m_ÃxtSliûSegm’t
 ( 
çl£
 )

98 , 
	`m_¦iûB™s
 ( 0 )

99 , 
	`m_¦iûSegm’tB™s
 ( 0 )

100 , 
	`m_bFš®ized
 ( 
çl£
 )

101 , 
	`m_bTe¡WeightP»d
 ( 
çl£
 )

102 , 
	`m_bTe¡WeightBiP»d
 ( 
çl£
 )

103 , 
	`m_sub¡»amSizes
 ( )

104 , 
	`m_ÿbacIn™FÏg
 ( 
çl£
 )

105 , 
	`m_bLMvdL1Z”o
 ( 
çl£
 )

106 , 
	`m_‹mpÜ®Lay”NÚReã»nûFÏg
 ( 
çl£
 )

107 , 
	`m_LFCrossSliûBound¬yFÏg
 ( 
çl£
 )

108 , 
	`m_’abËTMVPFÏg
 ( 
Œue
 )

109 , 
	$m_’cCABACTabËIdx
 (
I_SLICE
)

111 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

113 
m_aiNumRefIdx
[
i
] = 0;

116 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
MAX_NUM_COMPONENT
; component++)

118 
m_Ïmbdas
 [
compÚ’t
] = 0.0;

119 
m_iSliûChromaQpD–
[
compÚ’t
] = 0;

122 
	`š™Equ®Ref
();

124  
IÁ
 
idx
 = 0; idx < 
MAX_NUM_REF
; idx++ )

126 
m_li¡1IdxToLi¡0Idx
[
idx
] = -1;

129 
IÁ
 
iNumCouÁ
 = 0; iNumCouÁ < 
MAX_NUM_REF
; iNumCount++)

131 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

133 
m_­cRefPicLi¡
 [
i
][
iNumCouÁ
] = 
NULL
;

134 
m_aiRefPOCLi¡
 [
i
][
iNumCouÁ
] = 0;

138 
	`»£tWpSÿlšg
();

139 
	`š™WpAcDcP¬am
();

141 
IÁ
 
ch
=0; ch < 
MAX_NUM_CHANNEL_TYPE
; ch++)

143 
m_§oEÇbËdFÏg
[
ch
] = 
çl£
;

145 
	}
}

147 
	gTComSliû
::~
	$TComSliû
()

149 
	}
}

152 
Void
 
TComSliû
::
	$š™Sliû
()

154 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

156 
m_aiNumRefIdx
[
i
] = 0;

158 
m_cÞFromL0FÏg
 = 
Œue
;

160 
m_cÞRefIdx
 = 0;

161 
	`š™Equ®Ref
();

163 
m_bCheckLDC
 = 
çl£
;

165 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
MAX_NUM_COMPONENT
; component++)

167 
m_iSliûChromaQpD–
[
compÚ’t
] = 0;

170 
m_maxNumM”geCªd
 = 
MRG_MAX_NUM_CANDS
;

172 
m_bFš®ized
=
çl£
;

174 
m_sub¡»amSizes
.
	`þ—r
();

175 
m_ÿbacIn™FÏg
 = 
çl£
;

176 
m_’abËTMVPFÏg
 = 
Œue
;

177 
	}
}

179 
BoÞ
 
	gTComSliû
::
	$g‘R­PicFÏg
() const

181  
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


182 || 
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


183 || 
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


184 || 
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


185 || 
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


186 || 
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
;

187 
	}
}

190 
Void
 
	gTComSliû
::
sÜtPicLi¡
 (
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
)

192 
TComPic
* 
pcPicExŒaù
;

193 
TComPic
* 
	gpcPicIn£¹
;

195 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”PicExŒaù
;

196 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”PicExŒaù_1
;

197 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”PicIn£¹
;

199 
IÁ
 
	gi
 = 1; i < (
	gIÁ
)(
	grcLi¡Pic
.
size
()); i++)

201 
	g™”PicExŒaù
 = 
rcLi¡Pic
.
begš
();

202 
IÁ
 
	gj
 = 0; j < 
	gi
; j++)

204 
	g™”PicExŒaù
++;

206 
	gpcPicExŒaù
 = *(
™”PicExŒaù
);

207 
	gpcPicExŒaù
->
£tCu¼SliûIdx
(0);

209 
	g™”PicIn£¹
 = 
rcLi¡Pic
.
begš
();

210 
	g™”PicIn£¹
 !ð
™”PicExŒaù
)

212 
pcPicIn£¹
 = *(
™”PicIn£¹
);

213 
	gpcPicIn£¹
->
£tCu¼SliûIdx
(0);

214 ià(
	gpcPicIn£¹
->
g‘POC
(è>ð
pcPicExŒaù
->getPOC())

219 
	g™”PicIn£¹
++;

222 
	g™”PicExŒaù_1
 = 
™”PicExŒaù
; iterPicExtract_1++;

225 
	grcLi¡Pic
.
š£¹
 (
™”PicIn£¹
, 
™”PicExŒaù
, 
™”PicExŒaù_1
);

226 
	grcLi¡Pic
.
”a£
 (
™”PicExŒaù
);

230 
TComPic
* 
	gTComSliû
::
xG‘RefPic
 (
TComLi¡
<TComPic*>& 
rcLi¡Pic
, 
IÁ
 
poc
)

232 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

233 
TComPic
* 
	gpcPic
 = *(
™”Pic
);

234  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
() )

236 if(
pcPic
->
g‘POC
(è=ð
poc
)

240 
	g™”Pic
++;

241 
	gpcPic
 = *(
™”Pic
);

243  
	gpcPic
;

247 
TComPic
* 
	gTComSliû
::
xG‘LÚgT”mRefPic
(
TComLi¡
<TComPic*>& 
rcLi¡Pic
, 
IÁ
 
poc
, 
BoÞ
 
pocHasMsb
)

249 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

250 
TComPic
* 
	gpcPic
 = *(
™”Pic
);

251 
TComPic
* 
	gpcStPic
 = 
pcPic
;

253 
IÁ
 
	gpocCyþe
 = 1 << 
g‘SPS
()->
g‘B™sFÜPOC
();

254 ià(!
	gpocHasMsb
)

256 
	gpoc
 = 
poc
 & (
pocCyþe
 - 1);

259  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
() )

261 
pcPic
 = *(
™”Pic
);

262 ià(
	gpcPic
 &&…cPic->
g‘POC
()!=
this
->g‘POC(è&& 
pcPic
->
g‘Sliû
Ð0 )->
isReã»nûd
())

264 
IÁ
 
picPoc
 = 
pcPic
->
g‘POC
();

265 ià(!
	gpocHasMsb
)

267 
	gpicPoc
 = 
picPoc
 & (
pocCyþe
 - 1);

270 ià(
	gpoc
 =ð
picPoc
)

272 if(
pcPic
->
g‘IsLÚgT”m
())

274  
pcPic
;

278 
	gpcStPic
 = 
pcPic
;

284 
	g™”Pic
++;

287  
	gpcStPic
;

290 
Void
 
	gTComSliû
::
	$£tRefPOCLi¡
 ()

292 
IÁ
 
iDœ
 = 0; iDœ < 
NUM_REF_PIC_LIST_01
; iDir++)

294 
IÁ
 
iNumRefIdx
 = 0; iNumRefIdx < 
m_aiNumRefIdx
[
iDœ
]; iNumRefIdx++)

296 
m_aiRefPOCLi¡
[
iDœ
][
iNumRefIdx
] = 
m_­cRefPicLi¡
[iDœ][iNumRefIdx]->
	`g‘POC
();

300 
	}
}

302 
Void
 
	gTComSliû
::
	$£tLi¡1IdxToLi¡0Idx
()

304 
IÁ
 
idxL0
, 
idxL1
;

305  
idxL1
 = 0; idxL1 < 
	`g‘NumRefIdx
Ð
REF_PIC_LIST_1
 ); idxL1++ )

307 
m_li¡1IdxToLi¡0Idx
[
idxL1
] = -1;

308  
idxL0
 = 0; idxL0 < 
	`g‘NumRefIdx
Ð
REF_PIC_LIST_0
 ); idxL0++ )

310 iàÐ
m_­cRefPicLi¡
[
REF_PIC_LIST_0
][
idxL0
]->
	`g‘POC
(è=ðm_­cRefPicLi¡[
REF_PIC_LIST_1
][
idxL1
]->getPOC() )

312 
m_li¡1IdxToLi¡0Idx
[
idxL1
] = 
idxL0
;

317 
	}
}

319 
Void
 
	gTComSliû
::
£tRefPicLi¡
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, 
BoÞ
 
checkNumPocTÙ®Cu¼
 )

321 iàÐ
	gm_eSliûTy³
 =ð
I_SLICE
)

323 ::
mem£t
Ð
m_­cRefPicLi¡
, 0,  (m_apcRefPicList));

324 ::
mem£t
Ð
m_aiNumRefIdx
, 0,  ( m_aiNumRefIdx ));

326 ià(!
	gcheckNumPocTÙ®Cu¼
)

332 
TComPic
* 
	gpcRefPic
ð
NULL
;

333 cÚ¡ 
UIÁ
 
	gMAX_NUM_NEGATIVE_PICTURES
=16;

334 
TComPic
* 
	gRefPicS‘StCu¼0
[
MAX_NUM_NEGATIVE_PICTURES
];

335 
TComPic
* 
	gRefPicS‘StCu¼1
[
MAX_NUM_NEGATIVE_PICTURES
];

336 
TComPic
* 
	gRefPicS‘LtCu¼
[
MAX_NUM_NEGATIVE_PICTURES
];

337 
UIÁ
 
	gNumPicStCu¼0
 = 0;

338 
UIÁ
 
	gNumPicStCu¼1
 = 0;

339 
UIÁ
 
	gNumPicLtCu¼
 = 0;

340 
IÁ
 
	gi
;

342 
	gi
=0; i < 
	gm_pRPS
->
g‘Numb”OfNeg©ivePiùu»s
(); i++)

344 if(
	gm_pRPS
->
g‘U£d
(
i
))

346 
	gpcRefPic
 = 
xG‘RefPic
(
rcLi¡Pic
, 
g‘POC
()+
m_pRPS
->
g‘D–POC
(
i
));

347 
	gpcRefPic
->
£tIsLÚgT”m
(0);

348 
	gpcRefPic
->
g‘PicYuvRec
()->
ex‹ndPicBÜd”
();

349 
	gRefPicS‘StCu¼0
[
NumPicStCu¼0
] = 
pcRefPic
;

350 
	gNumPicStCu¼0
++;

351 
	gpcRefPic
->
£tCheckLTMSBP»£Á
(
çl£
);

355 ; 
	gi
 < 
	gm_pRPS
->
g‘Numb”OfNeg©ivePiùu»s
()+m_pRPS->
g‘Numb”OfPos™ivePiùu»s
(); i++)

357 if(
	gm_pRPS
->
g‘U£d
(
i
))

359 
	gpcRefPic
 = 
xG‘RefPic
(
rcLi¡Pic
, 
g‘POC
()+
m_pRPS
->
g‘D–POC
(
i
));

360 
	gpcRefPic
->
£tIsLÚgT”m
(0);

361 
	gpcRefPic
->
g‘PicYuvRec
()->
ex‹ndPicBÜd”
();

362 
	gRefPicS‘StCu¼1
[
NumPicStCu¼1
] = 
pcRefPic
;

363 
	gNumPicStCu¼1
++;

364 
	gpcRefPic
->
£tCheckLTMSBP»£Á
(
çl£
);

368 
	gi
 = 
m_pRPS
->
g‘Numb”OfNeg©ivePiùu»s
()+m_pRPS->
g‘Numb”OfPos™ivePiùu»s
()+m_pRPS->
g‘Numb”OfLÚg‹rmPiùu»s
()-1; i > 
	gm_pRPS
->getNumberOfNegativePictures()+m_pRPS->getNumberOfPositivePictures()-1 ; i--)

370 if(
	gm_pRPS
->
g‘U£d
(
i
))

372 
	gpcRefPic
 = 
xG‘LÚgT”mRefPic
(
rcLi¡Pic
, 
m_pRPS
->
g‘POC
(
i
), m_pRPS->
g‘CheckLTMSBP»£Á
(i));

373 
	gpcRefPic
->
£tIsLÚgT”m
(1);

374 
	gpcRefPic
->
g‘PicYuvRec
()->
ex‹ndPicBÜd”
();

375 
	gRefPicS‘LtCu¼
[
NumPicLtCu¼
] = 
pcRefPic
;

376 
	gNumPicLtCu¼
++;

378 if(
	gpcRefPic
==
NULL
)

380 
pcRefPic
 = 
xG‘LÚgT”mRefPic
(
rcLi¡Pic
, 
m_pRPS
->
g‘POC
(
i
), m_pRPS->
g‘CheckLTMSBP»£Á
(i));

382 
	gpcRefPic
->
£tCheckLTMSBP»£Á
(
m_pRPS
->
g‘CheckLTMSBP»£Á
(
i
));

386 
TComPic
* 
	g½sCu¼Li¡0
[
MAX_NUM_REF
+1];

387 
TComPic
* 
	g½sCu¼Li¡1
[
MAX_NUM_REF
+1];

388 
IÁ
 
	gnumPicTÙ®Cu¼
 = 
NumPicStCu¼0
 + 
NumPicStCu¼1
 + 
NumPicLtCu¼
;

390 ià(
	gcheckNumPocTÙ®Cu¼
)

395 ià(
g‘R­PicFÏg
())

397 
as£¹
(
numPicTÙ®Cu¼
 == 0);

400 ià(
	gm_eSliûTy³
 =ð
I_SLICE
)

405 
as£¹
(
numPicTÙ®Cu¼
 > 0);

407 
as£¹
(
numPicTÙ®Cu¼
 <= 8);

410 
IÁ
 
	gcIdx
 = 0;

411  
	gi
=0; i<
	gNumPicStCu¼0
; i++, 
	gcIdx
++)

413 
	g½sCu¼Li¡0
[
cIdx
] = 
RefPicS‘StCu¼0
[
i
];

415  
	gi
=0; i<
	gNumPicStCu¼1
; i++, 
	gcIdx
++)

417 
	g½sCu¼Li¡0
[
cIdx
] = 
RefPicS‘StCu¼1
[
i
];

419  
	gi
=0; i<
	gNumPicLtCu¼
; i++, 
	gcIdx
++)

421 
	g½sCu¼Li¡0
[
cIdx
] = 
RefPicS‘LtCu¼
[
i
];

423 
as£¹
(
cIdx
 =ð
numPicTÙ®Cu¼
);

425 ià(
	gm_eSliûTy³
==
B_SLICE
)

427 
cIdx
 = 0;

428  
	gi
=0; i<
	gNumPicStCu¼1
; i++, 
	gcIdx
++)

430 
	g½sCu¼Li¡1
[
cIdx
] = 
RefPicS‘StCu¼1
[
i
];

432  
	gi
=0; i<
	gNumPicStCu¼0
; i++, 
	gcIdx
++)

434 
	g½sCu¼Li¡1
[
cIdx
] = 
RefPicS‘StCu¼0
[
i
];

436  
	gi
=0; i<
	gNumPicLtCu¼
; i++, 
	gcIdx
++)

438 
	g½sCu¼Li¡1
[
cIdx
] = 
RefPicS‘LtCu¼
[
i
];

440 
as£¹
(
cIdx
 =ð
numPicTÙ®Cu¼
);

443 ::
mem£t
(
m_bIsU£dAsLÚgT”m
, 0, (m_bIsUsedAsLongTerm));

445 
IÁ
 
	grIdx
 = 0;„Idx < 
	gm_aiNumRefIdx
[
REF_PIC_LIST_0
];„Idx ++)

447 
	gcIdx
 = 
m_RefPicLi¡ModifiÿtiÚ
.
g‘RefPicLi¡ModifiÿtiÚFÏgL0
(è? m_RefPicLi¡ModifiÿtiÚ.
g‘RefPicS‘IdxL0
(
rIdx
è:„Idx % 
numPicTÙ®Cu¼
;

448 
as£¹
(
cIdx
 >ð0 && cIdx < 
numPicTÙ®Cu¼
);

449 
	gm_­cRefPicLi¡
[
REF_PIC_LIST_0
][
rIdx
] = 
½sCu¼Li¡0
[ 
cIdx
 ];

450 
	gm_bIsU£dAsLÚgT”m
[
REF_PIC_LIST_0
][
rIdx
] = ( 
cIdx
 >ð
NumPicStCu¼0
 + 
NumPicStCu¼1
 );

452 iàÐ
	gm_eSliûTy³
 !ð
B_SLICE
 )

454 
m_aiNumRefIdx
[
REF_PIC_LIST_1
] = 0;

455 ::
mem£t
Ð
m_­cRefPicLi¡
[
REF_PIC_LIST_1
], 0, (m_apcRefPicList[REF_PIC_LIST_1]));

459 
IÁ
 
	grIdx
 = 0;„Idx < 
	gm_aiNumRefIdx
[
REF_PIC_LIST_1
];„Idx ++)

461 
	gcIdx
 = 
m_RefPicLi¡ModifiÿtiÚ
.
g‘RefPicLi¡ModifiÿtiÚFÏgL1
(è? m_RefPicLi¡ModifiÿtiÚ.
g‘RefPicS‘IdxL1
(
rIdx
è:„Idx % 
numPicTÙ®Cu¼
;

462 
as£¹
(
cIdx
 >ð0 && cIdx < 
numPicTÙ®Cu¼
);

463 
	gm_­cRefPicLi¡
[
REF_PIC_LIST_1
][
rIdx
] = 
½sCu¼Li¡1
[ 
cIdx
 ];

464 
	gm_bIsU£dAsLÚgT”m
[
REF_PIC_LIST_1
][
rIdx
] = ( 
cIdx
 >ð
NumPicStCu¼0
 + 
NumPicStCu¼1
 );

469 
IÁ
 
	gTComSliû
::
	$g‘NumRpsCu¼TempLi¡
() const

471 
IÁ
 
numRpsCu¼TempLi¡
 = 0;

473 ià(
m_eSliûTy³
 =ð
I_SLICE
)

477 
UIÁ
 
i
=0; i < 
m_pRPS
->
	`g‘Numb”OfNeg©ivePiùu»s
()+ m_pRPS->
	`g‘Numb”OfPos™ivePiùu»s
(è+ m_pRPS->
	`g‘Numb”OfLÚg‹rmPiùu»s
(); i++)

479 if(
m_pRPS
->
	`g‘U£d
(
i
))

481 
numRpsCu¼TempLi¡
++;

484  
numRpsCu¼TempLi¡
;

485 
	}
}

487 
Void
 
	gTComSliû
::
	$š™Equ®Ref
()

489 
IÁ
 
iDœ
 = 0; iDœ < 
NUM_REF_PIC_LIST_01
; iDir++)

491 
IÁ
 
iRefIdx1
 = 0; iRefIdx1 < 
MAX_NUM_REF
; iRefIdx1++)

493 
IÁ
 
iRefIdx2
 = 
iRefIdx1
; iRefIdx2 < 
MAX_NUM_REF
; iRefIdx2++)

495 
m_abEqu®Ref
[
iDœ
][
iRefIdx1
][
iRefIdx2
] = m_abEqu®Ref[iDœ][iRefIdx2][iRefIdx1] = (iRefIdx1 =ðiRefIdx2? 
Œue
 : 
çl£
);

499 
	}
}

501 
Void
 
	gTComSliû
::
	$checkCÞRefIdx
(
UIÁ
 
curSliûIdx
, 
TComPic
* 
pic
)

503 
IÁ
 
i
;

504 
TComSliû
* 
curSliû
 = 
pic
->
	`g‘Sliû
(
curSliûIdx
);

505 
IÁ
 
cu¼CÞRefPOC
 = 
curSliû
->
	`g‘RefPOC
Ð
	`RefPicLi¡
(1 - curSliû->
	`g‘CÞFromL0FÏg
()), curSliû->
	`g‘CÞRefIdx
());

506 
TComSliû
* 
´eSliû
;

507 
IÁ
 
´eCÞRefPOC
;

508 
i
=
curSliûIdx
-1; i>=0; i--)

510 
´eSliû
 = 
pic
->
	`g‘Sliû
(
i
);

511 if(
´eSliû
->
	`g‘SliûTy³
(è!ð
I_SLICE
)

513 
´eCÞRefPOC
 = 
´eSliû
->
	`g‘RefPOC
Ð
	`RefPicLi¡
(1 -…»Sliû->
	`g‘CÞFromL0FÏg
()),…»Sliû->
	`g‘CÞRefIdx
());

514 if(
cu¼CÞRefPOC
 !ð
´eCÞRefPOC
)

516 
	`´štf
("Collocated_ref_idx shall‡lways behe same for‡ll slices of‡ coded…icture!\n");

517 
	`ex™
(
EXIT_FAILURE
);

525 
	}
}

527 
Void
 
	gTComSliû
::
checkCRA
(cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
IÁ
& 
pocCRA
, 
N®Un™Ty³
& 
assocŸ‹dIRAPTy³
, 
TComLi¡
<
TComPic
 *>& 
rcLi¡Pic
)

529 
IÁ
 
	gi
 = 0; i < 
	gpReã»nûPiùu»S‘
->
g‘Numb”OfNeg©ivePiùu»s
()+pReã»nûPiùu»S‘->
g‘Numb”OfPos™ivePiùu»s
(); i++)

531 if(
	gpocCRA
 < 
	gMAX_UINT
 && 
g‘POC
() >…ocCRA)

533 
as£¹
(
g‘POC
()+
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
è>ð
pocCRA
);

536 
IÁ
 
	gi
 = 
pReã»nûPiùu»S‘
->
g‘Numb”OfNeg©ivePiùu»s
()+pReã»nûPiùu»S‘->
g‘Numb”OfPos™ivePiùu»s
(); i < 
	gpReã»nûPiùu»S‘
->
g‘Numb”OfPiùu»s
(); i++)

538 if(
	gpocCRA
 < 
	gMAX_UINT
 && 
g‘POC
() >…ocCRA)

540 ià(!
	gpReã»nûPiùu»S‘
->
g‘CheckLTMSBP»£Á
(
i
))

542 
as£¹
(
xG‘LÚgT”mRefPic
(
rcLi¡Pic
, 
pReã»nûPiùu»S‘
->
g‘POC
(
i
), 
çl£
)->g‘POC(è>ð
pocCRA
);

546 
as£¹
(
pReã»nûPiùu»S‘
->
g‘POC
(
i
è>ð
pocCRA
);

550 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 || g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 )

552 
pocCRA
 = 
g‘POC
();

553 
	gassocŸ‹dIRAPTy³
 = 
g‘N®Un™Ty³
();

555 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 )

557 
pocCRA
 = 
g‘POC
();

558 
	gassocŸ‹dIRAPTy³
 = 
g‘N®Un™Ty³
();

560 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


561 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


562 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 )

564 
pocCRA
 = 
g‘POC
();

565 
	gassocŸ‹dIRAPTy³
 = 
g‘N®Un™Ty³
();

587 
Void
 
	gTComSliû
::
decodšgReäeshM¬kšg
(
IÁ
& 
pocCRA
, 
BoÞ
& 
bReäeshP’dšg
, 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
boÞ
 
bEffic›ÁF›ldIRAPEÇbËd
)

589 
TComPic
* 
	g½cPic
;

590 
IÁ
 
	gpocCu¼
 = 
g‘POC
();

592 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


593 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


594 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


595 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


596 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 )

599 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

600 
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

602 
½cPic
 = *(
™”Pic
);

603 
	g½cPic
->
£tCu¼SliûIdx
(0);

604 ià(
	g½cPic
->
g‘POC
(è!ð
pocCu¼
)

606 
½cPic
->
g‘Sliû
(0)->
£tReã»nûd
(
çl£
);

608 
	g™”Pic
++;

610 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


611 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


612 || 
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 )

614 
pocCRA
 = 
pocCu¼
;

616 ià(
	gbEffic›ÁF›ldIRAPEÇbËd
)

618 
	gbReäeshP’dšg
 = 
Œue
;

623 if(
	gbEffic›ÁF›ldIRAPEÇbËd
 && (
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 || g‘AssocŸ‹dIRAPTy³(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
))

625 ià(
bReäeshP’dšg
==
Œue
 && 
pocCu¼
 > 
m_iLa¡IDR
)

627 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

628 
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

630 
½cPic
 = *(
™”Pic
);

631 ià(
	g½cPic
->
g‘POC
(è!ð
pocCu¼
 && 
½cPic
->g‘POC(è!ð
m_iLa¡IDR
)

633 
½cPic
->
g‘Sliû
(0)->
£tReã»nûd
(
çl£
);

635 
	g™”Pic
++;

637 
	gbReäeshP’dšg
 = 
çl£
;

642 ià(
	gbReäeshP’dšg
==
Œue
 && 
pocCu¼
 > 
pocCRA
)

644 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

645 
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

647 
½cPic
 = *(
™”Pic
);

648 ià(
	g½cPic
->
g‘POC
(è!ð
pocCu¼
 && 
½cPic
->g‘POC(è!ð
pocCRA
)

650 
½cPic
->
g‘Sliû
(0)->
£tReã»nûd
(
çl£
);

652 
	g™”Pic
++;

654 
	gbReäeshP’dšg
 = 
çl£
;

657 iàÐ
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 )

659 
bReäeshP’dšg
 = 
Œue
;

660 
	gpocCRA
 = 
pocCu¼
;

665 
Void
 
	gTComSliû
::
	$cÝySliûInfo
(
TComSliû
 *
pSrc
)

667 
	`as£¹
Ð
pSrc
 !ð
NULL
 );

669 
IÁ
 
i
, 
j
, 
k
;

671 
m_iPOC
 = 
pSrc
->m_iPOC;

672 
m_eN®Un™Ty³
 = 
pSrc
->m_eNalUnitType;

673 
m_eSliûTy³
 = 
pSrc
->m_eSliceType;

674 
m_iSliûQp
 = 
pSrc
->m_iSliceQp;

675 #ià
ADAPTIVE_QP_SELECTION


676 
m_iSliûQpBa£
 = 
pSrc
->m_iSliceQpBase;

678 
m_ChromaQpAdjEÇbËd
 = 
pSrc
->m_ChromaQpAdjEnabled;

679 
m_deblockšgFž‹rDi§bË
 = 
pSrc
->m_deblockingFilterDisable;

680 
m_deblockšgFž‹rOv”rideFÏg
 = 
pSrc
->m_deblockingFilterOverrideFlag;

681 
m_deblockšgFž‹rB‘aOff£tDiv2
 = 
pSrc
->m_deblockingFilterBetaOffsetDiv2;

682 
m_deblockšgFž‹rTcOff£tDiv2
 = 
pSrc
->m_deblockingFilterTcOffsetDiv2;

684 
i
 = 0; i < 
NUM_REF_PIC_LIST_01
; i++)

686 
m_aiNumRefIdx
[
i
] = 
pSrc
->m_aiNumRefIdx[i];

689 
i
 = 0; i < 
MAX_NUM_REF
; i++)

691 
m_li¡1IdxToLi¡0Idx
[
i
] = 
pSrc
->m_list1IdxToList0Idx[i];

694 
m_bCheckLDC
 = 
pSrc
->m_bCheckLDC;

695 
m_iSliûQpD–
 = 
pSrc
->m_iSliceQpDelta;

696 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
MAX_NUM_COMPONENT
; component++)

698 
m_iSliûChromaQpD–
[
compÚ’t
] = 
pSrc
->m_iSliceChromaQpDelta[component];

700 
i
 = 0; i < 
NUM_REF_PIC_LIST_01
; i++)

702 
j
 = 0; j < 
MAX_NUM_REF
; j++)

704 
m_­cRefPicLi¡
[
i
][
j
] = 
pSrc
->m_apcRefPicList[i][j];

705 
m_aiRefPOCLi¡
[
i
][
j
] = 
pSrc
->m_aiRefPOCList[i][j];

706 
m_bIsU£dAsLÚgT”m
[
i
][
j
] = 
pSrc
->m_bIsUsedAsLongTerm[i][j];

708 
m_bIsU£dAsLÚgT”m
[
i
][
MAX_NUM_REF
] = 
pSrc
->m_bIsUsedAsLongTerm[i][MAX_NUM_REF];

710 
m_iD•th
 = 
pSrc
->m_iDepth;

713 
m_bReãnûd
 = 
pSrc
->m_bRefenced;

716 
m_pRPS
 = 
pSrc
->m_pRPS;

717 
m_iLa¡IDR
 = 
pSrc
->m_iLastIDR;

719 
m_pcPic
 = 
pSrc
->m_pcPic;

721 
m_cÞFromL0FÏg
 = 
pSrc
->m_colFromL0Flag;

722 
m_cÞRefIdx
 = 
pSrc
->m_colRefIdx;

724 
	`£tLambdas
(
pSrc
->
	`g‘Lambdas
());

726 
i
 = 0; i < 
NUM_REF_PIC_LIST_01
; i++)

728 
j
 = 0; j < 
MAX_NUM_REF
; j++)

730 
k
 =0; k < 
MAX_NUM_REF
; k++)

732 
m_abEqu®Ref
[
i
][
j
][
k
] = 
pSrc
->m_abEqualRef[i][j][k];

737 
m_uiTLay”
 = 
pSrc
->m_uiTLayer;

738 
m_bTLay”Sw™chšgFÏg
 = 
pSrc
->m_bTLayerSwitchingFlag;

740 
m_¦iûMode
 = 
pSrc
->m_sliceMode;

741 
m_¦iûArgum’t
 = 
pSrc
->m_sliceArgument;

742 
m_¦iûCurS¹CtuTsAddr
 = 
pSrc
->m_sliceCurStartCtuTsAddr;

743 
m_¦iûCurEndCtuTsAddr
 = 
pSrc
->m_sliceCurEndCtuTsAddr;

744 
m_¦iûIdx
 = 
pSrc
->m_sliceIdx;

745 
m_¦iûSegm’tMode
 = 
pSrc
->m_sliceSegmentMode;

746 
m_¦iûSegm’tArgum’t
 = 
pSrc
->m_sliceSegmentArgument;

747 
m_¦iûSegm’tCurS¹CtuTsAddr
 = 
pSrc
->m_sliceSegmentCurStartCtuTsAddr;

748 
m_¦iûSegm’tCurEndCtuTsAddr
 = 
pSrc
->m_sliceSegmentCurEndCtuTsAddr;

749 
m_ÃxtSliû
 = 
pSrc
->m_nextSlice;

750 
m_ÃxtSliûSegm’t
 = 
pSrc
->m_nextSliceSegment;

752  
UIÁ
 
e
=0 ;ƒ<
NUM_REF_PIC_LIST_01
 ;ƒ++ )

754  
UIÁ
 
n
=0 ;‚<
MAX_NUM_REF
 ;‚++ )

756 
	`memýy
(
m_weightP»dTabË
[
e
][
n
], 
pSrc
->m_weightP»dTabË[e][n], (
WPSÿlšgP¬am
)*
MAX_NUM_COMPONENT
 );

760  
UIÁ
 
ch
 = 0 ; ch < 
MAX_NUM_CHANNEL_TYPE
; ch++)

762 
m_§oEÇbËdFÏg
[
ch
] = 
pSrc
->m_saoEnabledFlag[ch];

765 
m_ÿbacIn™FÏg
 = 
pSrc
->m_cabacInitFlag;

767 
m_bLMvdL1Z”o
 = 
pSrc
->m_bLMvdL1Zero;

768 
m_LFCrossSliûBound¬yFÏg
 = 
pSrc
->m_LFCrossSliceBoundaryFlag;

769 
m_’abËTMVPFÏg
 = 
pSrc
->m_enableTMVPFlag;

770 
m_maxNumM”geCªd
 = 
pSrc
->m_maxNumMergeCand;

771 
m_’cCABACTabËIdx
 = 
pSrc
->m_encCABACTableIdx;

772 
	}
}

781 
Void
 
	gTComSliû
::
	$£tTLay”Info
Ð
UIÁ
 
uiTLay”
 )

783 
m_uiTLay”
 = 
uiTLay”
;

784 
	}
}

788 
BoÞ
 
	gTComSliû
::
isTempÜ®Lay”Sw™chšgPošt
(
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
)

790 
TComPic
* 
½cPic
;

792 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

793  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

795 
½cPic
 = *(
™”Pic
++);

796 if(
	g½cPic
->
g‘Sliû
(0)->
isReã»nûd
(è&&„pcPic->
g‘POC
() != getPOC())

798 if(
½cPic
->
g‘TLay”
() >= getTLayer())

800  
çl£
;

804  
	gŒue
;

809 
BoÞ
 
	gTComSliû
::
isS‹pwi£TempÜ®Lay”Sw™chšgPoštCªdid©e
(
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
)

811 
TComPic
* 
½cPic
;

813 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

814  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

816 
½cPic
 = *(
™”Pic
++);

817 if(
	g½cPic
->
g‘Sliû
(0)->
isReã»nûd
(è&& (½cPic->
g‘U£dByCu¼
()==
Œue
è&& 
½cPic
->
g‘POC
() != getPOC())

819 if(
½cPic
->
g‘TLay”
() >= getTLayer())

821  
çl£
;

825  
	gŒue
;

829 
Void
 
	gTComSliû
::
checkL—dšgPiùu»Re¡riùiÚs
(
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
)

831 
TComPic
* 
½cPic
;

833 
IÁ
 
	gÇlUn™Ty³
 = 
this
->
g‘N®Un™Ty³
();

836 if(
	gthis
->
g‘AssocŸ‹dIRAPPOC
(è>his->
g‘POC
())

839 if(
	gÇlUn™Ty³
 < 
	gNAL_UNIT_CODED_SLICE_BLA_W_LP
 ||

840 
	gÇlUn™Ty³
 > 
	gNAL_UNIT_RESERVED_IRAP_VCL23
)

842 
as£¹
(
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

843 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
 ||

844 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

845 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_R
);

850 if(
	gthis
->
g‘AssocŸ‹dIRAPPOC
(è<his->
g‘POC
())

852 
as£¹
(
ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_RASL_N
 &&

853 
ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_RASL_R
 &&

854 
ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_RADL_N
 &&

855 
ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_RADL_R
);

860 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

861 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
)

863 
as£¹
(
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
 &&

864 
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
);

869 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

870 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
)

872 
as£¹
(
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 &&

873 
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
);

879 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

880 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_R
)

882 
as£¹
(
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 &&

883 
this
->
g‘AssocŸ‹dIRAPTy³
(è!ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
);

887 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

888  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

890 
½cPic
 = *(
™”Pic
++);

891 if(!
	g½cPic
->
g‘RecÚM¬k
())

895 ià(
	g½cPic
->
g‘POC
(è=ð
this
->getPOC())

903 if(
	g½cPic
->
g‘Sliû
(0)->
g‘PicOuutFÏg
(è=ð1 && !
this
->
g‘NoOuutPriÜPicsFÏg
())

905 if(
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 ||

906 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 ||

907 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
 ||

908 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_CRA
 ||

909 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 ||

910 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
)

912 
as£¹
(
½cPic
->
g‘POC
(è< 
this
->getPOC());

919 if(
	g½cPic
->
g‘Sliû
(0)->
g‘PicOuutFÏg
() == 1)

921 if((
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

922 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_R
))

925 if(
this
->
g‘AssocŸ‹dIRAPPOC
(è> 
½cPic
->
g‘Sliû
(0)->getAssociatedIRAPPOC())

928 if(
this
->
g‘AssocŸ‹dIRAPPOC
(è!ð
½cPic
->
g‘POC
())

930 
as£¹
(
½cPic
->
g‘POC
(è< 
this
->getPOC());

938 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

939 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
 ||

940 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

941 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RADL_R
)

943 if(
½cPic
->
g‘Sliû
(0)->
g‘AssocŸ‹dIRAPPOC
(è=ð
this
->getAssociatedIRAPPOC())

947 
as£¹
(
½cPic
->
g‘POC
(è<ð
this
->
g‘AssocŸ‹dIRAPPOC
());

953 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

954 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
)

956 if((
this
->
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 ||

957 
this
->
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 ||

958 
this
->
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
 ||

959 
this
->
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
) &&

960 
this
->
g‘AssocŸ‹dIRAPPOC
(è=ð
½cPic
->
g‘Sliû
(0)->getAssociatedIRAPPOC())

962 if(
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

963 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RADL_R
)

965 
as£¹
(
½cPic
->
g‘POC
(è> 
this
->getPOC());

972 if(
	gÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_N
 ||

973 
ÇlUn™Ty³
 =ð
NAL_UNIT_CODED_SLICE_RASL_R
)

975 if(
this
->
g‘AssocŸ‹dIRAPTy³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
)

977 if(
½cPic
->
g‘Sliû
(0)->
g‘POC
(è< 
this
->
g‘AssocŸ‹dIRAPPOC
() &&

978 (
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 ||

979 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 ||

980 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
 ||

981 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 ||

982 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 ||

983 
½cPic
->
g‘Sliû
(0)->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
))

985 
as£¹
(
this
->
g‘POC
(è> 
½cPic
->
g‘Sliû
(0)->getPOC());

996 
Void
 
	gTComSliû
::
­¶yReã»nûPiùu»S‘
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
)

998 
TComPic
* 
	g½cPic
;

999 
IÁ
 
	gi
, 
	gisReã»nû
;

1001 
checkL—dšgPiùu»Re¡riùiÚs
(
rcLi¡Pic
);

1004 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

1005  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1007 
½cPic
 = *(
™”Pic
++);

1009 if(!
	g½cPic
->
g‘Sliû
Ð0 )->
isReã»nûd
())

1014 
	gisReã»nû
 = 0;

1017 
	gi
=0;i<
	gpReã»nûPiùu»S‘
->
g‘Numb”OfPos™ivePiùu»s
()+pReã»nûPiùu»S‘->
g‘Numb”OfNeg©ivePiùu»s
();i++)

1019 if(!
	g½cPic
->
g‘IsLÚgT”m
(è&&„pcPic->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è=ð
this
->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
))

1021 
isReã»nû
 = 1;

1022 
	g½cPic
->
£tU£dByCu¼
(
pReã»nûPiùu»S‘
->
g‘U£d
(
i
));

1023 
	g½cPic
->
£tIsLÚgT”m
(0);

1026 ;
	gi
<
	gpReã»nûPiùu»S‘
->
g‘Numb”OfPiùu»s
();i++)

1028 if(
	gpReã»nûPiùu»S‘
->
g‘CheckLTMSBP»£Á
(
i
)==
Œue
)

1030 if(
½cPic
->
g‘IsLÚgT”m
(è&& (½cPic->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
()è=ð
pReã»nûPiùu»S‘
->g‘POC(
i
))

1032 
isReã»nû
 = 1;

1033 
	g½cPic
->
£tU£dByCu¼
(
pReã»nûPiùu»S‘
->
g‘U£d
(
i
));

1038 
IÁ
 
	gpocCyþe
 = 1<<
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘SPS
()->
g‘B™sFÜPOC
();

1039 
IÁ
 
	gcurPoc
 = 
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è& (
pocCyþe
-1);

1040 
IÁ
 
	g»fPoc
 = 
pReã»nûPiùu»S‘
->
g‘POC
(
i
è& (
pocCyþe
-1);

1041 if(
	g½cPic
->
g‘IsLÚgT”m
(è&& 
	gcurPoc
 =ð
»fPoc
)

1043 
isReã»nû
 = 1;

1044 
	g½cPic
->
£tU£dByCu¼
(
pReã»nûPiùu»S‘
->
g‘U£d
(
i
));

1051 if(
	g½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è!ð
this
->g‘POC(è&& 
isReã»nû
 == 0)

1053 
½cPic
->
g‘Sliû
Ð0 )->
£tReã»nûd
Ð
çl£
 );

1054 
	g½cPic
->
£tU£dByCu¼
(0);

1055 
	g½cPic
->
£tIsLÚgT”m
(0);

1058 
as£¹
(
½cPic
->
g‘Sliû
Ð0 )->
isReã»nûd
()==0||½cPic->
g‘U£dByCu¼
()==0||½cPic->
g‘TLay”
()<=
this
->getTLayer());

1060 if(
	gthis
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_TSA_R
 || 
this
->g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_TSA_N
)

1062 
as£¹
(
½cPic
->
g‘Sliû
Ð0 )->
isReã»nûd
()==0||½cPic->
g‘TLay”
()<
this
->getTLayer());

1065 if(
	g½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è!ð
this
->g‘POC(è&& 
½cPic
->
g‘TLay”
()==this->getTLayer())

1067 
as£¹
(
½cPic
->
g‘Sliû
Ð0 )->
isReã»nûd
()==0||½cPic->
g‘U£dByCu¼
()==0||½cPic->g‘SliûÐ0 )->
g‘TempÜ®Lay”NÚReã»nûFÏg
()==
çl£
);

1074 
IÁ
 
	gTComSliû
::
checkTh©AÎRefPicsA»AvažabË
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
BoÞ
 
´štE¼Üs
, IÁ 
pocRªdomAcûss
, BoÞ 
bU£Recov”yPošt
)

1076 
IÁ
 
	g©L—¡OÃUÇbËdByRecov”yPošt
 = 0;

1077 
IÁ
 
	g©L—¡OÃFlushedByP»viousIDR
 = 0;

1078 
TComPic
* 
	g½cPic
;

1079 
IÁ
 
	gi
, 
	gisAvažabË
;

1080 
IÁ
 
	g©L—¡OÃLo¡
 = 0;

1081 
IÁ
 
	g©L—¡OÃRemoved
 = 0;

1082 
IÁ
 
	giPocLo¡
 = 0;

1086 
	gi
=
pReã»nûPiùu»S‘
->
g‘Numb”OfNeg©ivePiùu»s
()+pReã»nûPiùu»S‘->
g‘Numb”OfPos™ivePiùu»s
();i<
	gpReã»nûPiùu»S‘
->
g‘Numb”OfPiùu»s
();i++)

1088 
	gisAvažabË
 = 0;

1090 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

1091  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1093 
½cPic
 = *(
™”Pic
++);

1094 if(
	gpReã»nûPiùu»S‘
->
g‘CheckLTMSBP»£Á
(
i
)==
Œue
)

1096 if(
½cPic
->
g‘IsLÚgT”m
(è&& (½cPic->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
()è=ð
pReã»nûPiùu»S‘
->g‘POC(
i
è&&„pcPic->g‘Sliû(0)->
isReã»nûd
())

1098 if(
bU£Recov”yPošt
 && 
this
->
g‘POC
(è> 
pocRªdomAcûss
 &&his->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
) <…ocRandomAccess)

1100 
isAvažabË
 = 0;

1104 
	gisAvažabË
 = 1;

1110 
IÁ
 
	gpocCyþe
 = 1<<
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘SPS
()->
g‘B™sFÜPOC
();

1111 
IÁ
 
	gcurPoc
 = 
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è& (
pocCyþe
-1);

1112 
IÁ
 
	g»fPoc
 = 
pReã»nûPiùu»S‘
->
g‘POC
(
i
è& (
pocCyþe
-1);

1113 if(
	g½cPic
->
g‘IsLÚgT”m
(è&& 
	gcurPoc
 =ð
»fPoc
 && 
½cPic
->
g‘Sliû
(0)->
isReã»nûd
())

1115 if(
bU£Recov”yPošt
 && 
this
->
g‘POC
(è> 
pocRªdomAcûss
 &&his->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
) <…ocRandomAccess)

1117 
isAvažabË
 = 0;

1121 
	gisAvažabË
 = 1;

1127 if(!
	gisAvažabË
)

1129 
	g™”Pic
 = 
rcLi¡Pic
.
begš
();

1130  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1132 
½cPic
 = *(
™”Pic
++);

1134 
IÁ
 
	gpocCyþe
 = 1 << 
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘SPS
()->
g‘B™sFÜPOC
();

1135 
IÁ
 
	gcurPoc
 = 
½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
();

1136 
IÁ
 
	g»fPoc
 = 
pReã»nûPiùu»S‘
->
g‘POC
(
i
);

1137 ià(!
	gpReã»nûPiùu»S‘
->
g‘CheckLTMSBP»£Á
(
i
))

1139 
	gcurPoc
 = 
curPoc
 & (
pocCyþe
 - 1);

1140 
	g»fPoc
 = 
»fPoc
 & (
pocCyþe
 - 1);

1143 ià(
	g½cPic
->
g‘Sliû
(0)->
isReã»nûd
(è&& 
	gcurPoc
 =ð
»fPoc
)

1145 if(
bU£Recov”yPošt
 && 
this
->
g‘POC
(è> 
pocRªdomAcûss
 &&his->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
) <…ocRandomAccess)

1147 
isAvažabË
 = 0;

1151 
	gisAvažabË
 = 1;

1152 
	g½cPic
->
£tIsLÚgT”m
(1);

1160 if(
	gisAvažabË
 == 0)

1162 ià(
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
è>ð
pocRªdomAcûss
)

1164 if(!
pReã»nûPiùu»S‘
->
g‘U£d
(
i
) )

1166 if(
´štE¼Üs
)

1168 
´štf
("\nLÚg-‹rm„eã»nû…iùu» w™h POC = %3d s“m tØhavb“À»moved o¸nÙ cÜ»ùly decoded.", 
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
));

1170 
	g©L—¡OÃRemoved
 = 1;

1174 if(
	g´štE¼Üs
)

1176 
´štf
("\nLÚg-‹rm„eã»nû…iùu» w™h POC = %3d i lo¡ o¸nÙ cÜ»ùly decoded!", 
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
));

1178 
	g©L—¡OÃLo¡
 = 1;

1179 
	giPocLo¡
=
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
);

1182 if(
	gbU£Recov”yPošt
 && 
	gthis
->
g‘POC
(è> 
	gpocRªdomAcûss
)

1184 
	g©L—¡OÃUÇbËdByRecov”yPošt
 = 1;

1186 if(
	gbU£Recov”yPošt
 && (
	gthis
->
g‘AssocŸ‹dIRAPTy³
()==
NAL_UNIT_CODED_SLICE_IDR_N_LP
 || 
this
->g‘AssocŸ‹dIRAPTy³()==
NAL_UNIT_CODED_SLICE_IDR_W_RADL
))

1188 
©L—¡OÃFlushedByP»viousIDR
 = 1;

1194 
	gi
=0;i<
	gpReã»nûPiùu»S‘
->
g‘Numb”OfNeg©ivePiùu»s
()+pReã»nûPiùu»S‘->
g‘Numb”OfPos™ivePiùu»s
();i++)

1196 
	gisAvažabË
 = 0;

1198 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

1199  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1201 
½cPic
 = *(
™”Pic
++);

1203 if(!
	g½cPic
->
g‘IsLÚgT”m
(è&&„pcPic->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è=ð
this
->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
è&& 
½cPic
->g‘Sliû(0)->
isReã»nûd
())

1205 if(
bU£Recov”yPošt
 && 
this
->
g‘POC
(è> 
pocRªdomAcûss
 &&his->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
) <…ocRandomAccess)

1207 
isAvažabË
 = 0;

1211 
	gisAvažabË
 = 1;

1217 if(
	gisAvažabË
 == 0)

1219 ià(
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
è>ð
pocRªdomAcûss
)

1221 if(!
pReã»nûPiùu»S‘
->
g‘U£d
(
i
) )

1223 if(
´štE¼Üs
)

1225 
´štf
("\nShÜt-‹rm„eã»nû…iùu» w™h POC = %3d s“m tØhavb“À»moved o¸nÙ cÜ»ùly decoded.", 
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
));

1227 
	g©L—¡OÃRemoved
 = 1;

1231 if(
	g´štE¼Üs
)

1233 
´štf
("\nShÜt-‹rm„eã»nû…iùu» w™h POC = %3d i lo¡ o¸nÙ cÜ»ùly decoded!", 
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
));

1235 
	g©L—¡OÃLo¡
 = 1;

1236 
	giPocLo¡
=
this
->
g‘POC
(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
);

1239 if(
	gbU£Recov”yPošt
 && 
	gthis
->
g‘POC
(è> 
	gpocRªdomAcûss
)

1241 
	g©L—¡OÃUÇbËdByRecov”yPošt
 = 1;

1243 if(
	gbU£Recov”yPošt
 && (
	gthis
->
g‘AssocŸ‹dIRAPTy³
()==
NAL_UNIT_CODED_SLICE_IDR_N_LP
 || 
this
->g‘AssocŸ‹dIRAPTy³()==
NAL_UNIT_CODED_SLICE_IDR_W_RADL
))

1245 
©L—¡OÃFlushedByP»viousIDR
 = 1;

1250 if(
	g©L—¡OÃUÇbËdByRecov”yPošt
 || 
	g©L—¡OÃFlushedByP»viousIDR
)

1254 if(
	g©L—¡OÃLo¡
)

1256  
	giPocLo¡
+1;

1258 if(
	g©L—¡OÃRemoved
)

1270 
Void
 
	gTComSliû
::
ü—‹Ex¶ic™Reã»nûPiùu»S‘FromReã»nû
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
BoÞ
 
isRAP
, 
IÁ
 
pocRªdomAcûss
, BoÞ 
bU£Recov”yPošt
, cÚ¡ BoÞ 
bEffic›ÁF›ldIRAPEÇbËd
)

1272 
TComPic
* 
	g½cPic
;

1273 
IÁ
 
	gi
, 
	gj
;

1274 
IÁ
 
	gk
 = 0;

1275 
IÁ
 
	gÄOfNeg©ivePiùu»s
 = 0;

1276 
IÁ
 
	gÄOfPos™ivePiùu»s
 = 0;

1277 
TComReã»nûPiùu»S‘
* 
	gpLoÿlRPS
 = 
this
->
g‘LoÿlRPS
();

1278 (*
	gpLoÿlRPS
)=
TComReã»nûPiùu»S‘
();

1280 
BoÞ
 
	gœ­IsInRPS
 = 
çl£
;

1283 
	gi
=0;i<
	gpReã»nûPiùu»S‘
->
g‘Numb”OfPiùu»s
();i++)

1285 
	gj
 = 0;

1287 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

1288  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1290 
j
++;

1291 
	g½cPic
 = *(
™”Pic
++);

1293 if(
	g½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è=ð
this
->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
è&& 
½cPic
->g‘Sliû(0)->
isReã»nûd
())

1297 
pLoÿlRPS
->
£tD–POC
(
k
, 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
));

1298 
	gpLoÿlRPS
->
£tU£d
(
k
, 
pReã»nûPiùu»S‘
->
g‘U£d
(
i
è&& (!
isRAP
));

1299 ià(
	gbEffic›ÁF›ldIRAPEÇbËd
)

1301 
	gpLoÿlRPS
->
£tU£d
(
k
, 
pLoÿlRPS
->
g‘U£d
(kè&& !(
bU£Recov”yPošt
 && 
this
->
g‘POC
(è> 
pocRªdomAcûss
 &&his->g‘POC(è+ 
pReã»nûPiùu»S‘
->
g‘D–POC
(
i
) <…ocRandomAccess) );

1304 if(
	gpLoÿlRPS
->
g‘D–POC
(
k
) < 0)

1306 
	gÄOfNeg©ivePiùu»s
++;

1310 if(
	gbEffic›ÁF›ldIRAPEÇbËd
 && 
	g½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è=ð
this
->
g‘AssocŸ‹dIRAPPOC
() &&his->getAssociatedIRAPPOC() ==his->getPOC()+1)

1312 
œ­IsInRPS
 = 
Œue
;

1314 
	gÄOfPos™ivePiùu»s
++;

1316 
	gk
++;

1321 
BoÞ
 
	gu£NewRPS
 = 
çl£
;

1323 if(
	gbEffic›ÁF›ldIRAPEÇbËd
 && 
	gm_pcPic
->
isF›ld
(è&& !
	gœ­IsInRPS
)

1325 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

1326  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

1328 
½cPic
 = *(
™”Pic
++);

1329 if(
	g½cPic
->
g‘PicSym
()->
g‘Sliû
(0)->
g‘POC
(è=ð
this
->
g‘AssocŸ‹dIRAPPOC
() &&his->getAssociatedIRAPPOC() ==his->getPOC()+1)

1331 
pLoÿlRPS
->
£tD–POC
(
k
, 1);

1332 
	gpLoÿlRPS
->
£tU£d
(
k
, 
Œue
);

1333 
	gÄOfPos™ivePiùu»s
++;

1334 
	gk
 ++;

1335 
	gu£NewRPS
 = 
Œue
;

1339 
	gpLoÿlRPS
->
£tNumb”OfNeg©ivePiùu»s
(
ÄOfNeg©ivePiùu»s
);

1340 
	gpLoÿlRPS
->
£tNumb”OfPos™ivePiùu»s
(
ÄOfPos™ivePiùu»s
);

1341 
	gpLoÿlRPS
->
£tNumb”OfPiùu»s
(
ÄOfNeg©ivePiùu»s
+
ÄOfPos™ivePiùu»s
);

1345 ià(!
	gpReã»nûPiùu»S‘
->
g‘IÁ”RPSP»diùiÚ
(è|| 
	gu£NewRPS
 )

1347 
	gpLoÿlRPS
->
£tIÁ”RPSP»diùiÚ
(
çl£
);

1348 
	gpLoÿlRPS
->
£tNumRefIdc
(0);

1352 
IÁ
 
	grIdx
 = 
this
->
g‘RPSidx
(è- 
pReã»nûPiùu»S‘
->
g‘D–RIdxMšus1
() - 1;

1353 
IÁ
 
	gd–RPS
 = 
pReã»nûPiùu»S‘
->
g‘D–RPS
();

1354 cÚ¡ 
TComReã»nûPiùu»S‘
* 
	gpcRefRPS
 = 
this
->
g‘SPS
()->
g‘RPSLi¡
()->
g‘Reã»nûPiùu»S‘
(
rIdx
);

1355 
IÁ
 
	giRefPics
 = 
pcRefRPS
->
g‘Numb”OfPiùu»s
();

1356 
IÁ
 
	giNewIdc
=0;

1357 
	gi
=0; i<ð
iRefPics
; i++)

1359 
IÁ
 
	gd–POC
 = ((
i
 !ð
iRefPics
)? 
pcRefRPS
->
g‘D–POC
(i) : 0);

1360 
IÁ
 
	giRefIdc
 = 0;

1361 
	gj
=0; j < 
	gpLoÿlRPS
->
g‘Numb”OfPiùu»s
(); j++)

1363 iàÐ(
	gd–POC
 + 
	gd–RPS
è=ð
pLoÿlRPS
->
g‘D–POC
(
j
))

1365 ià(
pLoÿlRPS
->
g‘U£d
(
j
))

1367 
iRefIdc
 = 1;

1371 
	giRefIdc
 = 2;

1375 
	gpLoÿlRPS
->
£tRefIdc
(
i
, 
iRefIdc
);

1376 
	giNewIdc
++;

1378 
	gpLoÿlRPS
->
£tIÁ”RPSP»diùiÚ
(
Œue
);

1379 
	gpLoÿlRPS
->
£tNumRefIdc
(
iNewIdc
);

1380 
	gpLoÿlRPS
->
£tD–RPS
(
d–RPS
);

1381 
	gpLoÿlRPS
->
£tD–RIdxMšus1
(
pReã»nûPiùu»S‘
->
g‘D–RIdxMšus1
(è+ 
this
->
g‘SPS
()->
g‘RPSLi¡
()->
g‘Numb”OfReã»nûPiùu»S‘s
(è-his->
g‘RPSidx
());

1384 
	gthis
->
£tRPS
(
pLoÿlRPS
);

1385 
	gthis
->
£tRPSidx
(-1);

1389 
Void
 
	gTComSliû
::
	$g‘WpAcDcP¬am
(
WPACDCP¬am
 *&
wp
)

1391 
wp
 = 
m_weightACDCP¬am
;

1392 
	}
}

1395 
Void
 
	gTComSliû
::
	$š™WpAcDcP¬am
()

1397 
IÁ
 
iComp
 = 0; iCom°< 
MAX_NUM_COMPONENT
; iComp++ )

1399 
m_weightACDCP¬am
[
iComp
].
iAC
 = 0;

1400 
m_weightACDCP¬am
[
iComp
].
iDC
 = 0;

1402 
	}
}

1405 
Void
 
	gTComSliû
::
	$g‘WpSÿlšg
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
, 
WPSÿlšgP¬am
 *&
wp
 )

1407 
	`as£¹
 (
e
<
NUM_REF_PIC_LIST_01
);

1408 
wp
 = 
m_weightP»dTabË
[
e
][
iRefIdx
];

1409 
	}
}

1412 
Void
 
	gTComSliû
::
	$»£tWpSÿlšg
()

1414  
IÁ
 
e
=0 ;ƒ<
NUM_REF_PIC_LIST_01
 ;ƒ++ )

1416  
IÁ
 
i
=0 ; i<
MAX_NUM_REF
 ; i++ )

1418  
IÁ
 
yuv
=0 ; yuv<
MAX_NUM_COMPONENT
 ; yuv++ )

1420 
WPSÿlšgP¬am
 *
pwp
 = &(
m_weightP»dTabË
[
e
][
i
][
yuv
]);

1421 
pwp
->
bP»£ÁFÏg
 = 
çl£
;

1422 
pwp
->
uiLog2WeightD’om
 = 0;

1423 
pwp
->
uiLog2WeightD’om
 = 0;

1424 
pwp
->
iWeight
 = 1;

1425 
pwp
->
iOff£t
 = 0;

1429 
	}
}

1432 
Void
 
	gTComSliû
::
	$š™WpSÿlšg
(cÚ¡ 
TComSPS
 *
¥s
)

1434 cÚ¡ 
BoÞ
 
bU£HighP»cisiÚP»diùiÚWeightšg
 = 
¥s
->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
();

1435  
IÁ
 
e
=0 ;ƒ<
NUM_REF_PIC_LIST_01
 ;ƒ++ )

1437  
IÁ
 
i
=0 ; i<
MAX_NUM_REF
 ; i++ )

1439  
IÁ
 
yuv
=0 ; yuv<
MAX_NUM_COMPONENT
 ; yuv++ )

1441 
WPSÿlšgP¬am
 *
pwp
 = &(
m_weightP»dTabË
[
e
][
i
][
yuv
]);

1442 iàÐ!
pwp
->
bP»£ÁFÏg
 )

1445 
pwp
->
iWeight
 = (1 <<…wp->
uiLog2WeightD’om
);

1446 
pwp
->
iOff£t
 = 0;

1449 cÚ¡ 
IÁ
 
off£tSÿlšgFaùÜ
 = 
bU£HighP»cisiÚP»diùiÚWeightšg
 ? 1 : (1 << (
¥s
->
	`g‘B™D•th
(
	`toChªÃlTy³
(
	`CompÚ’tID
(
yuv
)))-8));

1451 
pwp
->
w
 =…wp->
iWeight
;

1452 
pwp
->
o
 =…wp->
iOff£t
 * 
off£tSÿlšgFaùÜ
;

1453 
pwp
->
shiá
 =…wp->
uiLog2WeightD’om
;

1454 
pwp
->
round
 = (pwp->
uiLog2WeightD’om
>=1) ? (1 << (pwp->uiLog2WeightDenom-1)) : (0);

1458 
	}
}

1463 
	gTComVPS
::
	$TComVPS
()

1464 : 
	`m_VPSId
 ( 0)

1465 , 
	`m_uiMaxTLay”s
 ( 1)

1466 , 
	`m_uiMaxLay”s
 ( 1)

1467 , 
	`m_bTempÜ®IdNe¡šgFÏg
 (
çl£
)

1468 , 
	`m_numHrdP¬am‘”s
 ( 0)

1469 , 
	`m_maxNuhRe£rvedZ”oLay”Id
 ( 0)

1470 , 
	`m_hrdP¬am‘”s
 ()

1471 , 
	`m_hrdOpS‘Idx
 ()

1472 , 
	$m_ýrmsP»£ÁFÏg
 ()

1475  
IÁ
 
i
 = 0; i < 
MAX_TLAYER
; i++)

1477 
m_numReÜd”Pics
[
i
] = 0;

1478 
m_uiMaxDecPicBufãršg
[
i
] = 1;

1479 
m_uiMaxL©’cyInü—£
[
i
] = 0;

1481 
	}
}

1483 
	gTComVPS
::~
	$TComVPS
()

1485 
	}
}

1491 
TComSPSRExt
::
	$TComSPSRExt
()

1492 : 
	`m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 (
çl£
)

1493 , 
	`m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 (
çl£
)

1495 , 
	`m_ex‹ndedP»cisiÚProûssšgFÏg
 (
çl£
)

1496 , 
	`m_šŒaSmoÙhšgDi§bËdFÏg
 (
çl£
)

1497 , 
	`m_highP»cisiÚOff£tsEÇbËdFÏg
 (
çl£
)

1498 , 
	`m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
(
çl£
)

1499 , 
	$m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 (
çl£
)

1501 
UIÁ
 
sigÇÎšgModeIndex
 = 0; sigÇÎšgModeIndex < 
NUMBER_OF_RDPCM_SIGNALLING_MODES
; signallingModeIndex++)

1503 
m_rdpcmEÇbËdFÏg
[
sigÇÎšgModeIndex
] = 
çl£
;

1505 
	}
}

1507 
	gTComSPS
::
	$TComSPS
()

1508 : 
	`m_SPSId
 ( 0)

1509 , 
	`m_VPSId
 ( 0)

1510 , 
	`m_chromaFÜm©Idc
 (
CHROMA_420
)

1511 , 
	`m_uiMaxTLay”s
 ( 1)

1513 , 
	`m_picWidthInLumaSam¶es
 (352)

1514 , 
	`m_picHeightInLumaSam¶es
 (288)

1515 , 
	`m_log2MšCodšgBlockSize
 ( 0)

1516 , 
	`m_log2DiffMaxMšCodšgBlockSize
(0)

1517 , 
	`m_uiMaxCUWidth
 ( 32)

1518 , 
	`m_uiMaxCUHeight
 ( 32)

1519 , 
	`m_uiMaxTÙ®CUD•th
 ( 3)

1520 , 
	`m_bLÚgT”mRefsP»£Á
 (
çl£
)

1521 , 
	`m_uiQuadŒ“TULog2MaxSize
 ( 0)

1522 , 
	`m_uiQuadŒ“TULog2MšSize
 ( 0)

1523 , 
	`m_uiQuadŒ“TUMaxD•thIÁ”
 ( 0)

1524 , 
	`m_uiQuadŒ“TUMaxD•thIÁ¿
 ( 0)

1526 , 
	`m_u£PCM
 (
çl£
)

1527 , 
	`m_pcmLog2MaxSize
 ( 5)

1528 , 
	`m_uiPCMLog2MšSize
 ( 7)

1529 , 
	`m_bPCMFž‹rDi§bËFÏg
 (
çl£
)

1530 , 
	`m_uiB™sFÜPOC
 ( 8)

1531 , 
	`m_numLÚgT”mRefPicSPS
 ( 0)

1532 , 
	`m_uiMaxTrSize
 ( 32)

1533 , 
	`m_bU£SAO
 (
çl£
)

1534 , 
	`m_bTempÜ®IdNe¡šgFÏg
 (
çl£
)

1535 , 
	`m_sÿlšgLi¡EÇbËdFÏg
 (
çl£
)

1536 , 
	`m_u£SŒÚgIÁ¿SmoÙhšg
 (
çl£
)

1537 , 
	`m_vuiP¬am‘”sP»£ÁFÏg
 (
çl£
)

1538 , 
	$m_vuiP¬am‘”s
 ()

1540 
IÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

1542 
m_b™D•ths
.
»cÚ
[
ch
] = 8;

1543 #ià
O0043_BEST_EFFORT_DECODING


1544 
m_b™D•ths
.
¡»am
[
ch
] = 8;

1546 
m_pcmB™D•ths
[
ch
] = 8;

1547 
m_qpBDOff£t
 [
ch
] = 0;

1550  
IÁ
 
i
 = 0; i < 
MAX_TLAYER
; i++ )

1552 
m_uiMaxL©’cyInü—£Plus1
[
i
] = 0;

1553 
m_uiMaxDecPicBufãršg
[
i
] = 1;

1554 
m_numReÜd”Pics
[
i
] = 0;

1557 ::
	`mem£t
(
m_ÉRefPicPocLsbSps
, 0, (m_ltRefPicPocLsbSps));

1558 ::
	`mem£t
(
m_u£dByCu¼PicLtSPSFÏg
, 0, (m_usedByCurrPicLtSPSFlag));

1559 
	}
}

1561 
	gTComSPS
::~
	$TComSPS
()

1563 
m_RPSLi¡
.
	`de¡roy
();

1564 
	}
}

1566 
Void
 
	gTComSPS
::
	$ü—‹RPSLi¡
Ð
IÁ
 
numRPS
 )

1568 
m_RPSLi¡
.
	`de¡roy
();

1569 
m_RPSLi¡
.
	`ü—‹
(
numRPS
);

1570 
	}
}

1573 cÚ¡ 
IÁ
 
	gTComSPS
::
m_wšUn™X
[]={1,2,2,1};

1574 cÚ¡ 
IÁ
 
	gTComSPS
::
m_wšUn™Y
[]={1,2,1,1};

1576 
	gTComPPSRExt
::
	$TComPPSRExt
()

1577 : 
	`m_log2MaxT¿nsfÜmSkBlockSize
 (2)

1578 , 
	`m_üossCompÚ’tP»diùiÚEÇbËdFÏg
(
çl£
)

1579 , 
	`m_diffCuChromaQpOff£tD•th
 (0)

1580 , 
	$m_chromaQpOff£tLi¡L’
 (0)

1584 
m_ChromaQpAdjTabËInþudšgNuÎEÁry
[0].
u
.
comp
.
CbOff£t
 = 0;

1585 
m_ChromaQpAdjTabËInþudšgNuÎEÁry
[0].
u
.
comp
.
CrOff£t
 = 0;

1586 
IÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

1588 
m_log2SaoOff£tSÿË
[
ch
] = 0;

1590 
	}
}

1592 
	gTComPPS
::
	$TComPPS
()

1593 : 
	`m_PPSId
 (0)

1594 , 
	`m_SPSId
 (0)

1595 , 
	`m_picIn™QPMšus26
 (0)

1596 , 
	`m_u£DQP
 (
çl£
)

1597 , 
	`m_bCÚ¡¿šedIÁ¿P»d
 (
çl£
)

1598 , 
	`m_bSliûChromaQpFÏg
 (
çl£
)

1599 , 
	`m_uiMaxCuDQPD•th
 (0)

1600 , 
	`m_chromaCbQpOff£t
 (0)

1601 , 
	`m_chromaCrQpOff£t
 (0)

1602 , 
	`m_numRefIdxL0DeçuÉAùive
 (1)

1603 , 
	`m_numRefIdxL1DeçuÉAùive
 (1)

1604 , 
	`m_T¿nsquªtBy·ssEÇbËdFÏg
 (
çl£
)

1605 , 
	`m_u£T¿nsfÜmSk
 (
çl£
)

1606 , 
	`m_d•’d’tSliûSegm’tsEÇbËdFÏg
(
çl£
)

1607 , 
	`m_tžesEÇbËdFÏg
 (
çl£
)

1608 , 
	`m_’ŒÝyCodšgSyncEÇbËdFÏg
 (
çl£
)

1609 , 
	`m_loÝFž‹rAüossTžesEÇbËdFÏg
 (
Œue
)

1610 , 
	`m_unifÜmS·cšgFÏg
 (
çl£
)

1611 , 
	`m_numTžeCÞumnsMšus1
 (0)

1612 , 
	`m_numTžeRowsMšus1
 (0)

1613 , 
	`m_signD©aHidšgEÇbËdFÏg
 (
çl£
)

1614 , 
	`m_ÿbacIn™P»£ÁFÏg
 (
çl£
)

1615 , 
	`m_¦iûH—d”Ex‹nsiÚP»£ÁFÏg
 (
çl£
)

1616 , 
	`m_loÝFž‹rAüossSliûsEÇbËdFÏg
(
çl£
)

1617 , 
	`m_li¡sModifiÿtiÚP»£ÁFÏg
 (0)

1618 , 
	$m_numExŒaSliûH—d”B™s
 (0)

1620 
	}
}

1622 
	gTComPPS
::~
	$TComPPS
()

1624 
	}
}

1626 
TComReã»nûPiùu»S‘
::
	$TComReã»nûPiùu»S‘
()

1627 : 
	`m_numb”OfPiùu»s
 (0)

1628 , 
	`m_numb”OfNeg©ivePiùu»s
 (0)

1629 , 
	`m_numb”OfPos™ivePiùu»s
 (0)

1630 , 
	`m_numb”OfLÚg‹rmPiùu»s
 (0)

1631 , 
	`m_š‹rRPSP»diùiÚ
 (0)

1632 , 
	`m_d–RIdxMšus1
 (0)

1633 , 
	`m_d–RPS
 (0)

1634 , 
	$m_numRefIdc
 (0)

1636 ::
	`mem£t
Ð
m_d–POC
, 0, (m_deltaPOC) );

1637 ::
	`mem£t
Ð
m_POC
, 0, (m_POC) );

1638 ::
	`mem£t
Ð
m_u£d
, 0, (m_used) );

1639 ::
	`mem£t
Ð
m_»fIdc
, 0, (m_refIdc) );

1640 ::
	`mem£t
Ð
m_bCheckLTMSB
, 0, (m_bCheckLTMSB) );

1641 ::
	`mem£t
Ð
m_pocLSBLT
, 0, (m_pocLSBLT) );

1642 ::
	`mem£t
Ð
m_d–POCMSBCyþeLT
, 0, (m_deltaPOCMSBCycleLT) );

1643 ::
	`mem£t
Ð
m_d–PocMSBP»£ÁFÏg
, 0, (m_deltaPocMSBPresentFlag) );

1644 
	}
}

1646 
	gTComReã»nûPiùu»S‘
::~
	$TComReã»nûPiùu»S‘
()

1648 
	}
}

1650 
Void
 
TComReã»nûPiùu»S‘
::
	$£tU£d
(
IÁ
 
bufãrNum
, 
BoÞ
 
u£d
)

1652 
m_u£d
[
bufãrNum
] = 
u£d
;

1653 
	}
}

1655 
Void
 
	gTComReã»nûPiùu»S‘
::
	$£tD–POC
(
IÁ
 
bufãrNum
, IÁ 
d–POC
)

1657 
m_d–POC
[
bufãrNum
] = 
d–POC
;

1658 
	}
}

1660 
Void
 
	gTComReã»nûPiùu»S‘
::
	$£tNumb”OfPiùu»s
(
IÁ
 
numb”OfPiùu»s
)

1662 
m_numb”OfPiùu»s
 = 
numb”OfPiùu»s
;

1663 
	}
}

1665 
IÁ
 
	gTComReã»nûPiùu»S‘
::
	$g‘U£d
(
IÁ
 
bufãrNum
) const

1667  
m_u£d
[
bufãrNum
];

1668 
	}
}

1670 
IÁ
 
	gTComReã»nûPiùu»S‘
::
	$g‘D–POC
(
IÁ
 
bufãrNum
) const

1672  
m_d–POC
[
bufãrNum
];

1673 
	}
}

1675 
IÁ
 
	gTComReã»nûPiùu»S‘
::
	$g‘Numb”OfPiùu»s
() const

1677  
m_numb”OfPiùu»s
;

1678 
	}
}

1680 
IÁ
 
	gTComReã»nûPiùu»S‘
::
	$g‘POC
(
IÁ
 
bufãrNum
) const

1682  
m_POC
[
bufãrNum
];

1683 
	}
}

1685 
Void
 
	gTComReã»nûPiùu»S‘
::
	$£tPOC
(
IÁ
 
bufãrNum
, IÁ 
POC
)

1687 
m_POC
[
bufãrNum
] = 
POC
;

1688 
	}
}

1690 
BoÞ
 
	gTComReã»nûPiùu»S‘
::
	$g‘CheckLTMSBP»£Á
(
IÁ
 
bufãrNum
) const

1692  
m_bCheckLTMSB
[
bufãrNum
];

1693 
	}
}

1695 
Void
 
	gTComReã»nûPiùu»S‘
::
	$£tCheckLTMSBP»£Á
(
IÁ
 
bufãrNum
, 
BoÞ
 
b
)

1697 
m_bCheckLTMSB
[
bufãrNum
] = 
b
;

1698 
	}
}

1701 
Void
 
	gTComReã»nûPiùu»S‘
::
	$£tRefIdc
(
IÁ
 
bufãrNum
, IÁ 
»fIdc
)

1703 
m_»fIdc
[
bufãrNum
] = 
»fIdc
;

1704 
	}
}

1707 
IÁ
 
	gTComReã»nûPiùu»S‘
::
	$g‘RefIdc
(
IÁ
 
bufãrNum
) const

1709  
m_»fIdc
[
bufãrNum
];

1710 
	}
}

1717 
Void
 
	gTComReã»nûPiùu»S‘
::
	$sÜtD–POC
()

1720 
IÁ
 
j
=1; j < 
	`g‘Numb”OfPiùu»s
(); j++)

1722 
IÁ
 
d–POC
 = 
	`g‘D–POC
(
j
);

1723 
BoÞ
 
u£d
 = 
	`g‘U£d
(
j
);

1724 
IÁ
 
k
=
j
-1; k >= 0; k--)

1726 
IÁ
 
‹mp
 = 
	`g‘D–POC
(
k
);

1727 ià(
d–POC
 < 
‹mp
)

1729 
	`£tD–POC
(
k
+1, 
‹mp
);

1730 
	`£tU£d
(
k
+1, 
	`g‘U£d
(k));

1731 
	`£tD–POC
(
k
, 
d–POC
);

1732 
	`£tU£d
(
k
, 
u£d
);

1737 
IÁ
 
numNegPics
 = 
	`g‘Numb”OfNeg©ivePiùu»s
();

1738 
IÁ
 
j
=0, 
k
=
numNegPics
-1; j <‚umNegPics>>1; j++, k--)

1740 
IÁ
 
d–POC
 = 
	`g‘D–POC
(
j
);

1741 
BoÞ
 
u£d
 = 
	`g‘U£d
(
j
);

1742 
	`£tD–POC
(
j
, 
	`g‘D–POC
(
k
));

1743 
	`£tU£d
(
j
, 
	`g‘U£d
(
k
));

1744 
	`£tD–POC
(
k
, 
d–POC
);

1745 
	`£tU£d
(
k
, 
u£d
);

1747 
	}
}

1753 
Void
 
	gTComReã»nûPiùu»S‘
::
	$´štD–POC
() const

1755 
	`´štf
("DeltaPOC = { ");

1756 
IÁ
 
j
=0; j < 
	`g‘Numb”OfPiùu»s
(); j++)

1758 
	`´štf
("%d% ", 
	`g‘D–POC
(
j
), (
	`g‘U£d
(j)==1)?"*":"");

1760 ià(
	`g‘IÁ”RPSP»diùiÚ
())

1762 
	`´štf
("}, RefIdc = { ");

1763 
IÁ
 
j
=0; j < 
	`g‘NumRefIdc
(); j++)

1765 
	`´štf
("%d ", 
	`g‘RefIdc
(
j
));

1768 
	`´štf
("}\n");

1769 
	}
}

1771 
	gTComRefPicLi¡ModifiÿtiÚ
::
	$TComRefPicLi¡ModifiÿtiÚ
()

1772 : 
	`m_»fPicLi¡ModifiÿtiÚFÏgL0
 (
çl£
)

1773 , 
	$m_»fPicLi¡ModifiÿtiÚFÏgL1
 (
çl£
)

1775 ::
	`mem£t
Ð
m_RefPicS‘IdxL0
, 0, (m_RefPicSetIdxL0) );

1776 ::
	`mem£t
Ð
m_RefPicS‘IdxL1
, 0, (m_RefPicSetIdxL1) );

1777 
	}
}

1779 
	gTComRefPicLi¡ModifiÿtiÚ
::~
	$TComRefPicLi¡ModifiÿtiÚ
()

1781 
	}
}

1783 
TComSÿlšgLi¡
::
	$TComSÿlšgLi¡
()

1785 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

1787 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†istId++)

1789 
m_sÿlšgLi¡CÛf
[
sizeId
][
li¡Id
].
	`»size
(
mš
<
IÁ
>(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[sizeId]));

1792 
	}
}

1796 
Void
 
	gTComSÿlšgLi¡
::
	$£tDeçuÉSÿlšgLi¡
()

1798 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

1800 
UIÁ
 
li¡Id
=0;li¡Id<
SCALING_LIST_NUM
;listId++)

1802 
	`´oûssDeçuÉM©rix
(
sizeId
, 
li¡Id
);

1805 
	}
}

1809 
BoÞ
 
	gTComSÿlšgLi¡
::
	$checkDeçuÉSÿlšgLi¡
()

1811 
UIÁ
 
deçuÉCouÁ”
=0;

1813 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

1815 
UIÁ
 
li¡Id
=0;li¡Id<
SCALING_LIST_NUM
;listId++)

1817 ifÐ!
	`memcmp
(
	`g‘SÿlšgLi¡Add»ss
(
sizeId
,
li¡Id
), 
	`g‘SÿlšgLi¡DeçuÉAdd»ss
(sizeId,†i¡Id),(
IÁ
)*
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[sizeId]))

1818 && ((
sizeId
 < 
SCALING_LIST_16x16
è|| (
	`g‘SÿlšgLi¡DC
(sizeId,
li¡Id
) == 16)))

1820 
deçuÉCouÁ”
++;

1825  (
deçuÉCouÁ”
 =ð(
SCALING_LIST_NUM
 * 
SCALING_LIST_SIZE_NUM
 )è? 
çl£
 : 
Œue
;

1826 
	}
}

1833 
Void
 
	gTComSÿlšgLi¡
::
	$´oûssRefM©rix
Ð
UIÁ
 
sizeId
, UIÁ 
li¡Id
 , UIÁ 
»fLi¡Id
 )

1835 ::
	`memýy
(
	`g‘SÿlšgLi¡Add»ss
(
sizeId
, 
li¡Id
),(Öi¡Id =ð
»fLi¡Id
)? 
	`g‘SÿlšgLi¡DeçuÉAdd»ss
(sizeId,„efLi¡Id): g‘SÿlšgLi¡Add»ss(sizeId,„efLi¡Id)),(
IÁ
)*
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[sizeId]));

1836 
	}
}

1838 
Void
 
	gTComSÿlšgLi¡
::
	$checkP»dMode
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
)

1840 
IÁ
 
´edLi¡S‹p
 = (
sizeId
 =ð
SCALING_LIST_32x32
? (
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) : 1);

1842 
IÁ
 
´edLi¡Idx
 = (IÁ)
li¡Id
 ;…»dLi¡Idx >ð0;…»dLi¡Idx-=
´edLi¡S‹p
)

1844 ifÐ!
	`memcmp
(
	`g‘SÿlšgLi¡Add»ss
(
sizeId
,
li¡Id
),(Öi¡Id =ð
´edLi¡Idx
) ?

1845 
	`g‘SÿlšgLi¡DeçuÉAdd»ss
(
sizeId
, 
´edLi¡Idx
): 
	`g‘SÿlšgLi¡Add»ss
(sizeId,…»dLi¡Idx)),(
IÁ
)*
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[sizeId]))

1846 && ((
sizeId
 < 
SCALING_LIST_16x16
è|| (
	`g‘SÿlšgLi¡DC
(sizeId,
li¡Id
è=ðg‘SÿlšgLi¡DC(sizeId,
´edLi¡Idx
))))

1848 
	`£tRefM©rixId
(
sizeId
, 
li¡Id
, 
´edLi¡Idx
);

1849 
	`£tSÿlšgLi¡P»dModeFÏg
(
sizeId
, 
li¡Id
, 
çl£
);

1853 
	`£tSÿlšgLi¡P»dModeFÏg
(
sizeId
, 
li¡Id
, 
Œue
);

1854 
	}
}

1856 
Void
 
	$ouutSÿlšgLi¡H–p
(
¡d
::
o¡»am
 &
os
)

1858 
os
 << "The scaling†ist file specifies‡ll matrices‡ndheir DC values;‚one can be missing,\n"

1873 
os
 << "The…ermitted matrix‚ames‡re:\n";

1874 
UIÁ
 
sizeIdc
 = 0; sizeIdø< 
SCALING_LIST_SIZE_NUM
; sizeIdc++)

1876 
UIÁ
 
li¡Idc
 = 0;†i¡Idø< 
SCALING_LIST_NUM
;†istIdc++)

1878 ià((
sizeIdc
!=
SCALING_LIST_32x32
è|| (
li¡Idc
%(
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) == 0))

1880 
os
 << " " << 
M©rixTy³
[
sizeIdc
][
li¡Idc
] << '\n';

1884 
	}
}

1886 
Void
 
	gTComSÿlšgLi¡
::
	$ouutSÿlšgLi¡s
(
¡d
::
o¡»am
 &
os
) const

1888 
UIÁ
 
sizeIdc
 = 0; sizeIdø< 
SCALING_LIST_SIZE_NUM
; sizeIdc++)

1890 cÚ¡ 
UIÁ
 
size
 = 
	`mš
(8,4<<(
sizeIdc
));

1891 
UIÁ
 
li¡Idc
 = 0;†i¡Idø< 
SCALING_LIST_NUM
;†istIdc++)

1893 ià((
sizeIdc
!=
SCALING_LIST_32x32
è|| (
li¡Idc
%(
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) == 0))

1895 cÚ¡ 
IÁ
 *
¤c
 = 
	`g‘SÿlšgLi¡Add»ss
(
sizeIdc
, 
li¡Idc
);

1896 
os
 << (
M©rixTy³
[
sizeIdc
][
li¡Idc
]) << " =\n ";

1897 
UIÁ
 
y
=0; y<
size
; y++)

1899 
UIÁ
 
x
=0; x<
size
; x++, 
¤c
++)

1901 
os
 << 
¡d
::
	`£tw
(3è<< (*
¤c
) << ", ";

1903 
os
 << (
y
+1<
size
?"\n ":"\n");

1905 if(
sizeIdc
 > 
SCALING_LIST_8x8
)

1907 
os
 << 
M©rixTy³_DC
[
sizeIdc
][
li¡Idc
] << " = \À " << 
¡d
::
	`£tw
(3è<< 
	`g‘SÿlšgLi¡DC
(sizeIdc,†istIdc) << "\n";

1909 
os
 << "\n";

1913 
	}
}

1915 
BoÞ
 
	gTComSÿlšgLi¡
::
	$xP¬£SÿlšgLi¡
(cÚ¡ 
¡d
::
¡ršg
 &
fžeName
)

1917 cÚ¡ 
IÁ
 
LINE_SIZE
=1024;

1918 
FILE
 *
å
 = 
NULL
;

1919 
TCh¬
 
lše
[
LINE_SIZE
];

1921 ià(
fžeName
.
	`em±y
())

1923 
	`årštf
(
¡d”r
, "Error:‚o scaling†ist file specified. Help on scaling†ists being output\n");

1924 
	`ouutSÿlšgLi¡H–p
(
¡d
::
cout
);

1925 
¡d
::
cout
 << "\n\nExample scaling†ist file using default values:\n\n";

1926 
	`ouutSÿlšgLi¡s
(
¡d
::
cout
);

1927 
	`ex™
 (1);

1928  
Œue
;

1930 ià((
å
 = 
	`fÝ’
(
fžeName
.
	`c_¡r
(),"r")è=ð(
FILE
*)
NULL
)

1932 
	`årštf
(
¡d”r
, "E¼Ü: cªnÙ o³Àsÿlšg†i¡ fž% fÜ„—dšg\n", 
fžeName
.
	`c_¡r
());

1933  
Œue
;

1936 
UIÁ
 
sizeIdc
 = 0; sizeIdø< 
SCALING_LIST_SIZE_NUM
; sizeIdc++)

1938 cÚ¡ 
UIÁ
 
size
 = 
	`mš
(
MAX_MATRIX_COEF_NUM
,(
IÁ
)
g_sÿlšgLi¡Size
[
sizeIdc
]);

1940 
UIÁ
 
li¡Idc
 = 0;†i¡Idø< 
SCALING_LIST_NUM
;†istIdc++)

1942 
IÁ
 * cÚ¡ 
¤c
 = 
	`g‘SÿlšgLi¡Add»ss
(
sizeIdc
, 
li¡Idc
);

1944 ià((
sizeIdc
==
SCALING_LIST_32x32
è&& (
li¡Idc
%(
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) != 0))

1946 cÚ¡ 
IÁ
 *
¤cNextSm®ËrSize
 = 
	`g‘SÿlšgLi¡Add»ss
(
sizeIdc
-1, 
li¡Idc
);

1947 
UIÁ
 
i
=0; i<
size
; i++)

1949 
¤c
[
i
] = 
¤cNextSm®ËrSize
[i];

1951 
	`£tSÿlšgLi¡DC
(
sizeIdc
,
li¡Idc
,(sizeIdø> 
SCALING_LIST_8x8
è? 
	`g‘SÿlšgLi¡DC
(sizeIdc-1,†i¡Idcè: 
¤c
[0]);

1956 
	`f£ek
(
å
, 0, 
SEEK_SET
);

1957 
BoÞ
 
bFound
=
çl£
;

1958 (!
	`ãof
(
å
)è&& (!
bFound
))

1960 
TCh¬
 *
»t
 = 
	`fg‘s
(
lše
, 
LINE_SIZE
, 
å
);

1961 
TCh¬
 *
fšdNamePos™iÚ
ð
»t
==
NULL
 ? NULL : 
	`¡r¡r
(
lše
, 
M©rixTy³
[
sizeIdc
][
li¡Idc
]);

1963 ià(
fšdNamePos™iÚ
!ð
NULL
 && (
M©rixTy³_DC
[
sizeIdc
][
li¡Idc
]==NULL || 
	`¡r¡r
(
lše
, MatrixType_DC[sizeIdc][listIdc])==NULL))

1965 
bFound
=
Œue
;

1968 ià(!
bFound
)

1970 
	`årštf
(
¡d”r
, "E¼Ü: cªnÙ fšd M©rix % äom sÿlšg†i¡ fž%s\n", 
M©rixTy³
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
());

1971  
Œue
;

1974 
UIÁ
 
i
=0; i<
size
; i++)

1976 
IÁ
 
d©a
;

1977 ià(
	`fsÿnf
(
å
, "%d,", &
d©a
)!=1)

1979 
	`årštf
(
¡d”r
, "E¼Ü: cªnÙ„—d v®u#%d fÜ M©rix % äom sÿlšg†i¡ fž% © fžpos™iÚ %ld\n", 
i
, 
M©rixTy³
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
(), 
	`á–l
(
å
));

1980  
Œue
;

1982 ià(
d©a
<0 || data>255)

1984 
	`årštf
(
¡d”r
, "E¼Ü: QM©rixƒÁry #%d oàv®u%d fÜ M©rix % äom sÿlšg†i¡ fž% © fžpos™iÚ %ld i ouˆoà¿ng(0Ø255)\n", 
i
, 
d©a
, 
M©rixTy³
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
(), 
	`á–l
(
å
));

1985  
Œue
;

1987 
¤c
[
i
] = 
d©a
;

1991 
	`£tSÿlšgLi¡DC
(
sizeIdc
,
li¡Idc
,
¤c
[0]);

1993 if(
sizeIdc
 > 
SCALING_LIST_8x8
)

1996 
	`f£ek
(
å
, 0, 
SEEK_SET
);

1997 
BoÞ
 
bFound
=
çl£
;

1998 (!
	`ãof
(
å
)è&& (!
bFound
))

2000 
TCh¬
 *
»t
 = 
	`fg‘s
(
lše
, 
LINE_SIZE
, 
å
);

2001 
TCh¬
 *
fšdNamePos™iÚ
ð
»t
==
NULL
 ? NULL : 
	`¡r¡r
(
lše
, 
M©rixTy³_DC
[
sizeIdc
][
li¡Idc
]);

2002 ià(
fšdNamePos™iÚ
!ð
NULL
)

2005 
bFound
=
Œue
;

2008 ià(!
bFound
)

2010 
	`årštf
(
¡d”r
, "E¼Ü: cªnÙ fšd DC M©rix % äom sÿlšg†i¡ fž%s\n", 
M©rixTy³_DC
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
());

2011  
Œue
;

2014 
IÁ
 
d©a
;

2015 ià(
	`fsÿnf
(
å
, "%d,", &
d©a
)!=1)

2017 
	`årštf
(
¡d”r
, "E¼Ü: cªnÙ„—d DC % äom sÿlšg†i¡ fž% © fžpos™iÚ %ld\n", 
M©rixTy³_DC
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
(), 
	`á–l
(
å
));

2018  
Œue
;

2020 ià(
d©a
<0 || data>255)

2022 
	`årštf
(
¡d”r
, "E¼Ü: DC v®u%d fÜ M©rix % äom sÿlšg†i¡ fž% © fžpos™iÚ %ld i ouˆoà¿ng(0Ø255)\n", 
d©a
, 
M©rixTy³
[
sizeIdc
][
li¡Idc
], 
fžeName
.
	`c_¡r
(), 
	`á–l
(
å
));

2023  
Œue
;

2026 
	`£tSÿlšgLi¡DC
(
sizeIdc
,
li¡Idc
,
d©a
);

2034 
	`fþo£
(
å
);

2035  
çl£
;

2036 
	}
}

2044 cÚ¡ 
IÁ
* 
	gTComSÿlšgLi¡
::
	$g‘SÿlšgLi¡DeçuÉAdd»ss
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
)

2046 cÚ¡ 
IÁ
 *
¤c
 = 0;

2047 
sizeId
)

2049 
SCALING_LIST_4x4
:

2050 
¤c
 = 
g_quªtTSDeçuÉ4x4
;

2052 
SCALING_LIST_8x8
:

2053 
SCALING_LIST_16x16
:

2054 
SCALING_LIST_32x32
:

2055 
¤c
 = (
li¡Id
 < (
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
èè? 
g_quªtIÁ¿DeçuÉ8x8
 : 
g_quªtIÁ”DeçuÉ8x8
;

2058 
	`as£¹
(0);

2059 
¤c
 = 
NULL
;

2062  
¤c
;

2063 
	}
}

2069 
Void
 
	gTComSÿlšgLi¡
::
	$´oûssDeçuÉM©rix
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
)

2071 ::
	`memýy
(
	`g‘SÿlšgLi¡Add»ss
(
sizeId
, 
li¡Id
),
	`g‘SÿlšgLi¡DeçuÉAdd»ss
(sizeId,li¡Id),(
IÁ
)*
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[sizeId]));

2072 
	`£tSÿlšgLi¡DC
(
sizeId
,
li¡Id
,
SCALING_LIST_DC
);

2073 
	}
}

2077 
Void
 
	gTComSÿlšgLi¡
::
	$checkDcOfM©rix
()

2079 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

2081 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†istId++)

2084 if(
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
) == 0)

2086 
	`´oûssDeçuÉM©rix
(
sizeId
, 
li¡Id
);

2090 
	}
}

2092 
	gP¬am‘”S‘Mªag”
::
	$P¬am‘”S‘Mªag”
()

2093 : 
	`m_vpsM­
(
MAX_NUM_VPS
)

2094 , 
	`m_¥sM­
(
MAX_NUM_SPS
)

2095 , 
	`m_µsM­
(
MAX_NUM_PPS
)

2096 , 
	`m_aùiveVPSId
(-1)

2097 , 
	`m_aùiveSPSId
(-1)

2099 
	}
}

2102 
	gP¬am‘”S‘Mªag”
::~
	$P¬am‘”S‘Mªag”
()

2104 
	}
}

2135 
BoÞ
 
P¬am‘”S‘Mªag”
::
	$aùiv©ePPS
(
IÁ
 
µsId
, 
BoÞ
 
isIRAP
)

2137 
TComPPS
 *
µs
 = 
m_µsM­
.
	`g‘PS
(
µsId
);

2138 ià(
µs
)

2140 
IÁ
 
¥sId
 = 
µs
->
	`g‘SPSId
();

2141 ià(!
isIRAP
 && (
¥sId
 !ð
m_aùiveSPSId
 ))

2143 
	`´štf
("Warning:riedo‡ctivate PPS„eferringo‡ inactive SPS‡t‚on-IDR.");

2147 
TComSPS
 *
¥s
 = 
m_¥sM­
.
	`g‘PS
(
¥sId
);

2148 ià(
¥s
)

2150 
IÁ
 
vpsId
 = 
¥s
->
	`g‘VPSId
();

2151 ià(!
isIRAP
 && (
vpsId
 !ð
m_aùiveVPSId
 ))

2153 
	`´štf
("Warning:riedo‡ctivate PPS„eferringo‡ inactive VPS‡t‚on-IDR.");

2157 
TComVPS
 *
vps
 =
m_vpsM­
.
	`g‘PS
(
vpsId
);

2158 ià(
vps
)

2160 
m_aùiveVPSId
 = 
vpsId
;

2161 
m_aùiveSPSId
 = 
¥sId
;

2162  
Œue
;

2166 
	`´štf
("Warning:riedo‡ctivate PPShat„eferso‡‚on-existing VPS.");

2172 
	`´štf
("Warning:riedo‡ctivate‡ PPShat„eferso‡‚on-existing SPS.");

2178 
	`´štf
("Warning:riedo‡ctivate‚on-existing PPS.");

2182 
m_aùiveSPSId
=-1;

2183 
m_aùiveVPSId
=-1;

2184  
çl£
;

2185 
	}
}

2187 
	g‹m¶©e
 <>

2188 
Void
 
	gP¬am‘”S‘M­
<
	gTComPPS
>::
	$£tID
(
TComPPS
* 
·¿m‘”S‘
, cÚ¡ 
IÁ
 
psId
)

2190 
·¿m‘”S‘
->
	`£tPPSId
(
psId
);

2191 
	}
}

2193 
	g‹m¶©e
 <>

2194 
Void
 
	gP¬am‘”S‘M­
<
	gTComSPS
>::
	$£tID
(
TComSPS
* 
·¿m‘”S‘
, cÚ¡ 
IÁ
 
psId
)

2196 
·¿m‘”S‘
->
	`£tSPSId
(
psId
);

2197 
	}
}

2199 
	gProfžeT›rLev–
::
	$ProfžeT›rLev–
()

2200 : 
	`m_´ofžeS·û
 (0)

2201 , 
	`m_t›rFÏg
 (
Lev–
::
MAIN
)

2202 , 
	`m_´ofžeIdc
 (
Profže
::
NONE
)

2203 , 
	`m_Ëv–Idc
 (
Lev–
::
NONE
)

2204 , 
	`m_´og»ssiveSourûFÏg
 (
çl£
)

2205 , 
	`m_š‹¾aûdSourûFÏg
 (
çl£
)

2206 , 
	`m_nÚPackedCÚ¡¿štFÏg
(
çl£
)

2207 , 
	$m_äameOÆyCÚ¡¿štFÏg
(
çl£
)

2209 ::
	`mem£t
(
m_´ofžeCom·tibž™yFÏg
, 0, (m_profileCompatibilityFlag));

2210 
	}
}

2212 
	gTComPTL
::
	$TComPTL
()

2214 ::
	`mem£t
(
m_subLay”ProfžeP»£ÁFÏg
, 0, (m_subLayerProfilePresentFlag));

2215 ::
	`mem£t
(
m_subLay”Lev–P»£ÁFÏg
, 0, (m_subLayerLevelPresentFlag ));

2216 
	}
}

2218 
Void
 
ÿlcuÏ‹P¬am‘”S‘ChªgedFÏg
(
BoÞ
 &
bChªged
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> *
pOldD©a
, cÚ¡ std::veùÜ<UCh¬> *
pNewD©a
)

2220 ià(!
bChªged
)

2222 ià((
pOldD©a
==0 && 
pNewD©a
!=0) || (pOldData!=0 &&…NewData==0))

2224 
bChªged
=
Œue
;

2226 ià(
	gpOldD©a
!=0 && 
pNewD©a
!=0)

2229 ià(
pOldD©a
->
size
(è!ð
pNewD©a
->size())

2231 
bChªged
=
Œue
;

2235 cÚ¡ 
UCh¬
 *
	gpNewD©aA¼ay
=&(*
pNewD©a
)[0];

2236 cÚ¡ 
UCh¬
 *
	gpOldD©aA¼ay
=&(*
pOldD©a
)[0];

2237 ià(
memcmp
(
pOldD©aA¼ay
, 
pNewD©aA¼ay
, 
pOldD©a
->
size
()))

2239 
	gbChªged
=
Œue
;

	@source/Lib/TLibCommon/TComSlice.h

38 #iâdeà
__TCOMSLICE__


39 
	#__TCOMSLICE__


	)

41 
	~<c¡ršg
>

42 
	~<m­
>

43 
	~<veùÜ
>

44 
	~"CommÚDef.h
"

45 
	~"TComRom.h
"

46 
	~"TComLi¡.h
"

47 
	~"TComChromaFÜm©.h
"

52 
þass
 
	gTComPic
;

53 
þass
 
	gTComTrQuªt
;

58 cÚ¡ 
UIÁ
 
	gREF_PIC_LIST_NUM_IDX
=32;

65 þas 
	cTComReã»nûPiùu»S‘


67 
	m´iv©e
:

68 
IÁ
 
m_numb”OfPiùu»s
;

69 
IÁ
 
	mm_numb”OfNeg©ivePiùu»s
;

70 
IÁ
 
	mm_numb”OfPos™ivePiùu»s
;

71 
IÁ
 
	mm_numb”OfLÚg‹rmPiùu»s
;

72 
IÁ
 
	mm_d–POC
[
MAX_NUM_REF_PICS
];

73 
IÁ
 
	mm_POC
[
MAX_NUM_REF_PICS
];

74 
BoÞ
 
	mm_u£d
[
MAX_NUM_REF_PICS
];

75 
BoÞ
 
	mm_š‹rRPSP»diùiÚ
;

76 
IÁ
 
	mm_d–RIdxMšus1
;

77 
IÁ
 
	mm_d–RPS
;

78 
IÁ
 
	mm_numRefIdc
;

79 
IÁ
 
	mm_»fIdc
[
MAX_NUM_REF_PICS
+1];

80 
BoÞ
 
	mm_bCheckLTMSB
[
MAX_NUM_REF_PICS
];

81 
IÁ
 
	mm_pocLSBLT
[
MAX_NUM_REF_PICS
];

82 
IÁ
 
	mm_d–POCMSBCyþeLT
[
MAX_NUM_REF_PICS
];

83 
BoÞ
 
	mm_d–PocMSBP»£ÁFÏg
[
MAX_NUM_REF_PICS
];

85 
	mpublic
:

86 
TComReã»nûPiùu»S‘
();

87 
	mvœtu®
 ~
TComReã»nûPiùu»S‘
();

88 
IÁ
 
	$g‘PocLSBLT
(
IÁ
 
i
ècÚ¡ {  
m_pocLSBLT
[i]; }

89 
Void
 
	$£tPocLSBLT
(
IÁ
 
i
, IÁ 
x
è{ 
m_pocLSBLT
[i] = x; 
	}
}

90 
IÁ
 
	$g‘D–PocMSBCyþeLT
(
IÁ
 
i
ècÚ¡ {  
m_d–POCMSBCyþeLT
[i]; 
	}
}

91 
Void
 
	$£tD–PocMSBCyþeLT
(
IÁ
 
i
, IÁ 
x
è{ 
m_d–POCMSBCyþeLT
[i] = x; 
	}
}

92 
BoÞ
 
	$g‘D–PocMSBP»£ÁFÏg
(
IÁ
 
i
ècÚ¡ {  
m_d–PocMSBP»£ÁFÏg
[i]; 
	}
}

93 
Void
 
	$£tD–PocMSBP»£ÁFÏg
(
IÁ
 
i
, 
BoÞ
 
x
è{ 
m_d–PocMSBP»£ÁFÏg
[i] = x; 
	}
}

94 
Void
 
£tU£d
(
IÁ
 
bufãrNum
, 
BoÞ
 
u£d
);

95 
Void
 
£tD–POC
(
IÁ
 
bufãrNum
, IÁ 
d–POC
);

96 
Void
 
£tPOC
(
IÁ
 
bufãrNum
, IÁ 
d–POC
);

97 
Void
 
£tNumb”OfPiùu»s
(
IÁ
 
numb”OfPiùu»s
);

98 
Void
 
£tCheckLTMSBP»£Á
(
IÁ
 
bufãrNum
, 
BoÞ
 
b
 );

99 
BoÞ
 
	$g‘CheckLTMSBP»£Á
(
IÁ
 
bufãrNum
) const;

101 
IÁ
 
	$g‘U£d
(
IÁ
 
bufãrNum
) const;

102 
IÁ
 
	$g‘D–POC
(
IÁ
 
bufãrNum
) const;

103 
IÁ
 
	$g‘POC
(
IÁ
 
bufãrNum
) const;

104 
IÁ
 
	$g‘Numb”OfPiùu»s
() const;

106 
Void
 
	$£tNumb”OfNeg©ivePiùu»s
(
IÁ
 
numb”
è{ 
m_numb”OfNeg©ivePiùu»s
 =‚umb”; 
	}
}

107 
IÁ
 
	$g‘Numb”OfNeg©ivePiùu»s
(ècÚ¡ {  
m_numb”OfNeg©ivePiùu»s
; 
	}
}

108 
Void
 
	$£tNumb”OfPos™ivePiùu»s
(
IÁ
 
numb”
è{ 
m_numb”OfPos™ivePiùu»s
 =‚umb”; 
	}
}

109 
IÁ
 
	$g‘Numb”OfPos™ivePiùu»s
(ècÚ¡ {  
m_numb”OfPos™ivePiùu»s
; 
	}
}

110 
Void
 
	$£tNumb”OfLÚg‹rmPiùu»s
(
IÁ
 
numb”
è{ 
m_numb”OfLÚg‹rmPiùu»s
 =‚umb”; 
	}
}

111 
IÁ
 
	$g‘Numb”OfLÚg‹rmPiùu»s
(ècÚ¡ {  
m_numb”OfLÚg‹rmPiùu»s
; 
	}
}

113 
Void
 
	$£tIÁ”RPSP»diùiÚ
(
BoÞ
 
æag
è{ 
m_š‹rRPSP»diùiÚ
 = fÏg; 
	}
}

114 
BoÞ
 
	$g‘IÁ”RPSP»diùiÚ
(ècÚ¡ {  
m_š‹rRPSP»diùiÚ
; 
	}
}

115 
Void
 
	$£tD–RIdxMšus1
(
IÁ
 
x
è{ 
m_d–RIdxMšus1
 = x; 
	}
}

116 
IÁ
 
	$g‘D–RIdxMšus1
(ècÚ¡ {  
m_d–RIdxMšus1
; 
	}
}

117 
Void
 
	$£tD–RPS
(
IÁ
 
x
è{ 
m_d–RPS
 = x; 
	}
}

118 
IÁ
 
	$g‘D–RPS
(ècÚ¡ {  
m_d–RPS
; 
	}
}

119 
Void
 
	$£tNumRefIdc
(
IÁ
 
x
è{ 
m_numRefIdc
 = x; 
	}
}

120 
IÁ
 
	$g‘NumRefIdc
(ècÚ¡ {  
m_numRefIdc
; 
	}
}

122 
Void
 
£tRefIdc
(
IÁ
 
bufãrNum
, IÁ 
»fIdc
);

123 
IÁ
 
	$g‘RefIdc
(
IÁ
 
bufãrNum
) const ;

125 
Void
 
	`sÜtD–POC
();

126 
Void
 
	$´štD–POC
() const;

127 
	}
};

130 þas 
	cTComRPSLi¡


132 
	m´iv©e
:

133 
¡d
::
veùÜ
<
TComReã»nûPiùu»S‘
> 
m_»ã»nûPiùu»S‘s
;

135 
	mpublic
:

136 
	$TComRPSLi¡
() { }

137 
vœtu®
 ~
	$TComRPSLi¡
(è{ 
	}
}

139 
Void
 
	$ü—‹
 (
IÁ
 
numb”OfEÁr›s
è{ 
m_»ã»nûPiùu»S‘s
.
	`»size
Òumb”OfEÁr›s); 
	}
}

140 
Void
 
	$de¡roy
 (è{ 
	}
}

143 
TComReã»nûPiùu»S‘
* 
	$g‘Reã»nûPiùu»S‘
(
IÁ
 
»ã»nûPiùu»S‘Num
è{  &
m_»ã»nûPiùu»S‘s
[»ã»nûPiùu»S‘Num]; 
	}
}

144 cÚ¡ 
TComReã»nûPiùu»S‘
* 
	$g‘Reã»nûPiùu»S‘
(
IÁ
 
»ã»nûPiùu»S‘Num
ècÚ¡ {  &
m_»ã»nûPiùu»S‘s
[»ã»nûPiùu»S‘Num]; 
	}
}

146 
IÁ
 
	$g‘Numb”OfReã»nûPiùu»S‘s
(ècÚ¡ {  
	`IÁ
(
m_»ã»nûPiùu»S‘s
.
	`size
()); 
	}
}

150 þas 
	cTComSÿlšgLi¡


152 
	mpublic
:

153 
TComSÿlšgLi¡
();

154 
	mvœtu®
 ~
	$TComSÿlšgLi¡
() { }

155 
IÁ
* 
	$g‘SÿlšgLi¡Add»ss
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
è{  &(
m_sÿlšgLi¡CÛf
[sizeId][li¡Id][0]); 
	}
}

156 cÚ¡ 
IÁ
* 
	$g‘SÿlšgLi¡Add»ss
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
ècÚ¡ {  &(
m_sÿlšgLi¡CÛf
[sizeId][li¡Id][0]); 
	}
}

157 
Void
 
checkP»dMode
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
);

159 
Void
 
	$£tRefM©rixId
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
, UIÁ 
u
è{ 
m_»fM©rixId
[sizeId][li¡Id] = u; 
	}
}

160 
UIÁ
 
	$g‘RefM©rixId
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
ècÚ¡ {  
m_»fM©rixId
[sizeId][li¡Id]; 
	}
}

162 cÚ¡ 
IÁ
* 
g‘SÿlšgLi¡DeçuÉAdd»ss
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
);

163 
Void
 
´oûssDeçuÉM©rix
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
);

165 
Void
 
	$£tSÿlšgLi¡DC
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
, UIÁ 
u
è{ 
m_sÿlšgLi¡DC
[sizeId][li¡Id] = u; 
	}
}

166 
IÁ
 
	$g‘SÿlšgLi¡DC
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
ècÚ¡ {  
m_sÿlšgLi¡DC
[sizeId][li¡Id]; 
	}
}

168 
Void
 
	$£tSÿlšgLi¡P»dModeFÏg
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
, 
BoÞ
 
bIsDPCM
è{ 
m_sÿlšgLi¡P»dModeFÏgIsDPCM
[sizeId][li¡Id] = bIsDPCM; 
	}
}

169 
BoÞ
 
	$g‘SÿlšgLi¡P»dModeFÏg
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
ècÚ¡ {  
m_sÿlšgLi¡P»dModeFÏgIsDPCM
[sizeId][li¡Id]; 
	}
}

171 
Void
 
checkDcOfM©rix
();

172 
Void
 
´oûssRefM©rix
(
UIÁ
 
sizeId
, UIÁ 
li¡Id
 , UIÁ 
»fLi¡Id
 );

173 
BoÞ
 
xP¬£SÿlšgLi¡
(cÚ¡ 
¡d
::
¡ršg
 &
fžeName
);

174 
Void
 
£tDeçuÉSÿlšgLi¡
();

175 
BoÞ
 
checkDeçuÉSÿlšgLi¡
();

177 
	g´iv©e
:

178 
Void
 
	$ouutSÿlšgLi¡s
(
¡d
::
o¡»am
 &
os
) const;

179 
BoÞ
 
m_sÿlšgLi¡P»dModeFÏgIsDPCM
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

180 
IÁ
 
m_sÿlšgLi¡DC
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

181 
UIÁ
 
m_»fM©rixId
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

182 
¡d
::
veùÜ
<
IÁ
> 
m_sÿlšgLi¡CÛf
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
];

183 
	}
};

185 þas 
	cProfžeT›rLev–


187 
IÁ
 
	mm_´ofžeS·û
;

188 
	mLev–
::
T›r
 
m_t›rFÏg
;

189 
	mProfže
::
Name
 
m_´ofžeIdc
;

190 
BoÞ
 
	mm_´ofžeCom·tibž™yFÏg
[32];

191 
	mLev–
::
Name
 
m_Ëv–Idc
;

193 
BoÞ
 
	mm_´og»ssiveSourûFÏg
;

194 
BoÞ
 
	mm_š‹¾aûdSourûFÏg
;

195 
BoÞ
 
	mm_nÚPackedCÚ¡¿štFÏg
;

196 
BoÞ
 
	mm_äameOÆyCÚ¡¿štFÏg
;

197 
UIÁ
 
	mm_b™D•thCÚ¡¿štV®ue
;

198 
ChromaFÜm©
 
	mm_chromaFÜm©CÚ¡¿štV®ue
;

199 
BoÞ
 
	mm_šŒaCÚ¡¿štFÏg
;

200 
BoÞ
 
	mm_ÚePiùu»OÆyCÚ¡¿štFÏg
;

201 
BoÞ
 
	mm_low”B™R©eCÚ¡¿štFÏg
;

203 
	mpublic
:

204 
ProfžeT›rLev–
();

206 
IÁ
 
	$g‘ProfžeS·û
(ècÚ¡ {  
m_´ofžeS·û
; }

207 
Void
 
	$£tProfžeS·û
(
IÁ
 
x
è{ 
m_´ofžeS·û
 = x; 
	}
}

209 
	gLev–
::
T›r
 
	$g‘T›rFÏg
(ècÚ¡ {  
m_t›rFÏg
; 
	}
}

210 
Void
 
	$£tT›rFÏg
(
Lev–
::
T›r
 
x
è{ 
m_t›rFÏg
 = x; 
	}
}

212 
	gProfže
::
Name
 
	$g‘ProfžeIdc
(ècÚ¡ {  
m_´ofžeIdc
; 
	}
}

213 
Void
 
	$£tProfžeIdc
(
Profže
::
Name
 
x
è{ 
m_´ofžeIdc
 = x; 
	}
}

215 
BoÞ
 
	$g‘ProfžeCom·tibž™yFÏg
(
IÁ
 
i
ècÚ¡ {  
m_´ofžeCom·tibž™yFÏg
[i]; 
	}
}

216 
Void
 
	$£tProfžeCom·tibž™yFÏg
(
IÁ
 
i
, 
BoÞ
 
x
è{ 
m_´ofžeCom·tibž™yFÏg
[i] = x; 
	}
}

218 
	gLev–
::
Name
 
	$g‘Lev–Idc
(ècÚ¡ {  
m_Ëv–Idc
; 
	}
}

219 
Void
 
	$£tLev–Idc
(
Lev–
::
Name
 
x
è{ 
m_Ëv–Idc
 = x; 
	}
}

221 
BoÞ
 
	$g‘Prog»ssiveSourûFÏg
(ècÚ¡ {  
m_´og»ssiveSourûFÏg
; 
	}
}

222 
Void
 
	$£tProg»ssiveSourûFÏg
(
BoÞ
 
b
è{ 
m_´og»ssiveSourûFÏg
 = b; 
	}
}

224 
BoÞ
 
	$g‘IÁ”ÏûdSourûFÏg
(ècÚ¡ {  
m_š‹¾aûdSourûFÏg
; 
	}
}

225 
Void
 
	$£tIÁ”ÏûdSourûFÏg
(
BoÞ
 
b
è{ 
m_š‹¾aûdSourûFÏg
 = b; 
	}
}

227 
BoÞ
 
	$g‘NÚPackedCÚ¡¿štFÏg
(ècÚ¡ {  
m_nÚPackedCÚ¡¿štFÏg
; 
	}
}

228 
Void
 
	$£tNÚPackedCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_nÚPackedCÚ¡¿štFÏg
 = b; 
	}
}

230 
BoÞ
 
	$g‘F¿meOÆyCÚ¡¿štFÏg
(ècÚ¡ {  
m_äameOÆyCÚ¡¿štFÏg
; 
	}
}

231 
Void
 
	$£tF¿meOÆyCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_äameOÆyCÚ¡¿štFÏg
 = b; 
	}
}

233 
UIÁ
 
	$g‘B™D•thCÚ¡¿št
(ècÚ¡ {  
m_b™D•thCÚ¡¿štV®ue
; 
	}
}

234 
Void
 
	$£tB™D•thCÚ¡¿št
(
UIÁ
 
b™D•th
è{ 
m_b™D•thCÚ¡¿štV®ue
=b™D•th; 
	}
}

236 
ChromaFÜm©
 
	$g‘ChromaFÜm©CÚ¡¿št
(ècÚ¡ {  
m_chromaFÜm©CÚ¡¿štV®ue
; 
	}
}

237 
Void
 
	$£tChromaFÜm©CÚ¡¿št
(
ChromaFÜm©
 
fmt
è{ 
m_chromaFÜm©CÚ¡¿štV®ue
=fmt; 
	}
}

239 
BoÞ
 
	$g‘IÁ¿CÚ¡¿štFÏg
(ècÚ¡ {  
m_šŒaCÚ¡¿štFÏg
; 
	}
}

240 
Void
 
	$£tIÁ¿CÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_šŒaCÚ¡¿štFÏg
 = b; 
	}
}

242 
BoÞ
 
	$g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(ècÚ¡ {  
m_ÚePiùu»OÆyCÚ¡¿štFÏg
;
	}
}

243 
Void
 
	$£tOÃPiùu»OÆyCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
 = b; 
	}
}

245 
BoÞ
 
	$g‘Low”B™R©eCÚ¡¿štFÏg
(ècÚ¡ {  
m_low”B™R©eCÚ¡¿štFÏg
; 
	}
}

246 
Void
 
	$£tLow”B™R©eCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_low”B™R©eCÚ¡¿štFÏg
 = b; 
	}
}

250 þas 
	cTComPTL


252 
ProfžeT›rLev–
 
	mm_g’”®PTL
;

253 
ProfžeT›rLev–
 
	mm_subLay”PTL
 [
MAX_TLAYER
-1];

254 
BoÞ
 
	mm_subLay”ProfžeP»£ÁFÏg
 [
MAX_TLAYER
-1];

255 
BoÞ
 
	mm_subLay”Lev–P»£ÁFÏg
 [
MAX_TLAYER
-1];

257 
	mpublic
:

258 
TComPTL
();

259 
BoÞ
 
	$g‘SubLay”ProfžeP»£ÁFÏg
(
IÁ
 
i
ècÚ¡ {  
m_subLay”ProfžeP»£ÁFÏg
[i]; }

260 
Void
 
	$£tSubLay”ProfžeP»£ÁFÏg
(
IÁ
 
i
, 
BoÞ
 
x
è{ 
m_subLay”ProfžeP»£ÁFÏg
[i] = x; 
	}
}

262 
BoÞ
 
	$g‘SubLay”Lev–P»£ÁFÏg
(
IÁ
 
i
ècÚ¡ {  
m_subLay”Lev–P»£ÁFÏg
[i]; 
	}
}

263 
Void
 
	$£tSubLay”Lev–P»£ÁFÏg
(
IÁ
 
i
, 
BoÞ
 
x
è{ 
m_subLay”Lev–P»£ÁFÏg
[i] = x; 
	}
}

265 
ProfžeT›rLev–
* 
	$g‘G’”®PTL
(è{  &
m_g’”®PTL
; 
	}
}

266 cÚ¡ 
ProfžeT›rLev–
* 
	$g‘G’”®PTL
(ècÚ¡ {  &
m_g’”®PTL
; 
	}
}

267 
ProfžeT›rLev–
* 
	$g‘SubLay”PTL
(
IÁ
 
i
è{  &
m_subLay”PTL
[i]; 
	}
}

268 cÚ¡ 
ProfžeT›rLev–
* 
	$g‘SubLay”PTL
(
IÁ
 
i
ècÚ¡ {  &
m_subLay”PTL
[i]; 
	}
}

273 
	sHrdSubLay”Info


275 
BoÞ
 
	mfixedPicR©eFÏg
;

276 
BoÞ
 
	mfixedPicR©eW™hšCvsFÏg
;

277 
UIÁ
 
	mpicDu¿tiÚInTcMšus1
;

278 
BoÞ
 
	mlowD–ayHrdFÏg
;

279 
UIÁ
 
	mýbCÁMšus1
;

280 
UIÁ
 
	mb™R©eV®ueMšus1
[
MAX_CPB_CNT
][2];

281 
UIÁ
 
	mýbSizeV®ue
 [
MAX_CPB_CNT
][2];

282 
UIÁ
 
	mduýbSizeV®ue
 [
MAX_CPB_CNT
][2];

283 
BoÞ
 
	mcbrFÏg
 [
MAX_CPB_CNT
][2];

284 
UIÁ
 
	mduB™R©eV®ue
 [
MAX_CPB_CNT
][2];

287 þas 
	cTComHRD


289 
	m´iv©e
:

290 
BoÞ
 
m_ÇlHrdP¬am‘”sP»£ÁFÏg
;

291 
BoÞ
 
	mm_vþHrdP¬am‘”sP»£ÁFÏg
;

292 
BoÞ
 
	mm_subPicCpbP¬amsP»£ÁFÏg
;

293 
UIÁ
 
	mm_tickDivisÜMšus2
;

294 
UIÁ
 
	mm_duCpbRemov®D–ayL’gthMšus1
;

295 
BoÞ
 
	mm_subPicCpbP¬amsInPicTimšgSEIFÏg
;

296 
UIÁ
 
	mm_dpbOuutD–ayDuL’gthMšus1
;

297 
UIÁ
 
	mm_b™R©eSÿË
;

298 
UIÁ
 
	mm_ýbSizeSÿË
;

299 
UIÁ
 
	mm_duýbSizeSÿË
;

300 
UIÁ
 
	mm_š™ŸlCpbRemov®D–ayL’gthMšus1
;

301 
UIÁ
 
	mm_ýbRemov®D–ayL’gthMšus1
;

302 
UIÁ
 
	mm_dpbOuutD–ayL’gthMšus1
;

303 
HrdSubLay”Info
 
	mm_HRD
[
MAX_TLAYER
];

305 
	mpublic
:

306 
	$TComHRD
()

307 :
	`m_ÇlHrdP¬am‘”sP»£ÁFÏg
 (0)

308 ,
	`m_vþHrdP¬am‘”sP»£ÁFÏg
 (0)

309 ,
	`m_subPicCpbP¬amsP»£ÁFÏg
 (
çl£
)

310 ,
	`m_tickDivisÜMšus2
 (0)

311 ,
	`m_duCpbRemov®D–ayL’gthMšus1
 (0)

312 ,
	`m_subPicCpbP¬amsInPicTimšgSEIFÏg
 (
çl£
)

313 ,
	`m_dpbOuutD–ayDuL’gthMšus1
 (0)

314 ,
	`m_b™R©eSÿË
 (0)

315 ,
	`m_ýbSizeSÿË
 (0)

316 ,
	`m_š™ŸlCpbRemov®D–ayL’gthMšus1
(23)

317 ,
	`m_ýbRemov®D–ayL’gthMšus1
 (23)

318 ,
	$m_dpbOuutD–ayL’gthMšus1
 (23)

321 
vœtu®
 ~
	$TComHRD
(è{
	}
}

323 
Void
 
	$£tN®HrdP¬am‘”sP»£ÁFÏg
Ð
BoÞ
 
æag
 ) { 
m_ÇlHrdP¬am‘”sP»£ÁFÏg
 = fÏg; 
	}
}

324 
BoÞ
 
	$g‘N®HrdP¬am‘”sP»£ÁFÏg
ÐècÚ¡ {  
m_ÇlHrdP¬am‘”sP»£ÁFÏg
; 
	}
}

326 
Void
 
	$£tVþHrdP¬am‘”sP»£ÁFÏg
Ð
BoÞ
 
æag
 ) { 
m_vþHrdP¬am‘”sP»£ÁFÏg
 = fÏg; 
	}
}

327 
BoÞ
 
	$g‘VþHrdP¬am‘”sP»£ÁFÏg
ÐècÚ¡ {  
m_vþHrdP¬am‘”sP»£ÁFÏg
; 
	}
}

329 
Void
 
	$£tSubPicCpbP¬amsP»£ÁFÏg
Ð
BoÞ
 
æag
 ) { 
m_subPicCpbP¬amsP»£ÁFÏg
 = fÏg; 
	}
}

330 
BoÞ
 
	$g‘SubPicCpbP¬amsP»£ÁFÏg
ÐècÚ¡ {  
m_subPicCpbP¬amsP»£ÁFÏg
; 
	}
}

332 
Void
 
	$£tTickDivisÜMšus2
Ð
UIÁ
 
v®ue
 ) { 
m_tickDivisÜMšus2
 = v®ue; 
	}
}

333 
UIÁ
 
	$g‘TickDivisÜMšus2
ÐècÚ¡ {  
m_tickDivisÜMšus2
; 
	}
}

335 
Void
 
	$£tDuCpbRemov®D–ayL’gthMšus1
Ð
UIÁ
 
v®ue
 ) { 
m_duCpbRemov®D–ayL’gthMšus1
 = v®ue; 
	}
}

336 
UIÁ
 
	$g‘DuCpbRemov®D–ayL’gthMšus1
ÐècÚ¡ {  
m_duCpbRemov®D–ayL’gthMšus1
; 
	}
}

338 
Void
 
	$£tSubPicCpbP¬amsInPicTimšgSEIFÏg
Ð
BoÞ
 
æag
è{ 
m_subPicCpbP¬amsInPicTimšgSEIFÏg
 = fÏg; 
	}
}

339 
BoÞ
 
	$g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
ÐècÚ¡ {  
m_subPicCpbP¬amsInPicTimšgSEIFÏg
; 
	}
}

341 
Void
 
	$£tDpbOuutD–ayDuL’gthMšus1
(
UIÁ
 
v®ue
 ) { 
m_dpbOuutD–ayDuL’gthMšus1
 = v®ue; 
	}
}

342 
UIÁ
 
	$g‘DpbOuutD–ayDuL’gthMšus1
ÐècÚ¡ {  
m_dpbOuutD–ayDuL’gthMšus1
; 
	}
}

344 
Void
 
	$£tB™R©eSÿË
Ð
UIÁ
 
v®ue
 ) { 
m_b™R©eSÿË
 = v®ue; 
	}
}

345 
UIÁ
 
	$g‘B™R©eSÿË
ÐècÚ¡ {  
m_b™R©eSÿË
; 
	}
}

347 
Void
 
	$£tCpbSizeSÿË
Ð
UIÁ
 
v®ue
 ) { 
m_ýbSizeSÿË
 = v®ue; 
	}
}

348 
UIÁ
 
	$g‘CpbSizeSÿË
ÐècÚ¡ {  
m_ýbSizeSÿË
; 
	}
}

349 
Void
 
	$£tDuCpbSizeSÿË
Ð
UIÁ
 
v®ue
 ) { 
m_duýbSizeSÿË
 = v®ue; 
	}
}

350 
UIÁ
 
	$g‘DuCpbSizeSÿË
ÐècÚ¡ {  
m_duýbSizeSÿË
; 
	}
}

352 
Void
 
	$£tIn™ŸlCpbRemov®D–ayL’gthMšus1
Ð
UIÁ
 
v®ue
 ) { 
m_š™ŸlCpbRemov®D–ayL’gthMšus1
 = v®ue; 
	}
}

353 
UIÁ
 
	$g‘In™ŸlCpbRemov®D–ayL’gthMšus1
ÐècÚ¡ {  
m_š™ŸlCpbRemov®D–ayL’gthMšus1
; 
	}
}

355 
Void
 
	$£tCpbRemov®D–ayL’gthMšus1
Ð
UIÁ
 
v®ue
 ) { 
m_ýbRemov®D–ayL’gthMšus1
 = v®ue; 
	}
}

356 
UIÁ
 
	$g‘CpbRemov®D–ayL’gthMšus1
ÐècÚ¡ {  
m_ýbRemov®D–ayL’gthMšus1
; 
	}
}

358 
Void
 
	$£tDpbOuutD–ayL’gthMšus1
Ð
UIÁ
 
v®ue
 ) { 
m_dpbOuutD–ayL’gthMšus1
 = v®ue; 
	}
}

359 
UIÁ
 
	$g‘DpbOuutD–ayL’gthMšus1
ÐècÚ¡ {  
m_dpbOuutD–ayL’gthMšus1
; 
	}
}

361 
Void
 
	$£tFixedPicR©eFÏg
Ð
IÁ
 
Ïy”
, 
BoÞ
 
æag
 ) { 
m_HRD
[Ïy”].
fixedPicR©eFÏg
 = fÏg; 
	}
}

362 
BoÞ
 
	$g‘FixedPicR©eFÏg
Ð
IÁ
 
Ïy”
 ) cÚ¡ {  
m_HRD
[Ïy”].
fixedPicR©eFÏg
; 
	}
}

364 
Void
 
	$£tFixedPicR©eW™hšCvsFÏg
Ð
IÁ
 
Ïy”
, 
BoÞ
 
æag
 ) { 
m_HRD
[Ïy”].
fixedPicR©eW™hšCvsFÏg
 = fÏg; 
	}
}

365 
BoÞ
 
	$g‘FixedPicR©eW™hšCvsFÏg
Ð
IÁ
 
Ïy”
 ) cÚ¡ {  
m_HRD
[Ïy”].
fixedPicR©eW™hšCvsFÏg
; 
	}
}

367 
Void
 
	$£tPicDu¿tiÚInTcMšus1
Ð
IÁ
 
Ïy”
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
picDu¿tiÚInTcMšus1
 = v®ue; 
	}
}

368 
UIÁ
 
	$g‘PicDu¿tiÚInTcMšus1
Ð
IÁ
 
Ïy”
 ) cÚ¡ {  
m_HRD
[Ïy”].
picDu¿tiÚInTcMšus1
; 
	}
}

370 
Void
 
	$£tLowD–ayHrdFÏg
Ð
IÁ
 
Ïy”
, 
BoÞ
 
æag
 ) { 
m_HRD
[Ïy”].
lowD–ayHrdFÏg
 = fÏg; 
	}
}

371 
BoÞ
 
	$g‘LowD–ayHrdFÏg
Ð
IÁ
 
Ïy”
 ) cÚ¡ {  
m_HRD
[Ïy”].
lowD–ayHrdFÏg
; 
	}
}

373 
Void
 
	$£tCpbCÁMšus1
Ð
IÁ
 
Ïy”
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
ýbCÁMšus1
 = v®ue; 
	}
}

374 
UIÁ
 
	$g‘CpbCÁMšus1
Ð
IÁ
 
Ïy”
 ) cÚ¡ {  
m_HRD
[Ïy”].
ýbCÁMšus1
; 
	}
}

376 
Void
 
	$£tB™R©eV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
b™R©eV®ueMšus1
[ýbút][ÇlOrVþ] = v®ue; 
	}
}

377 
UIÁ
 
	$g‘B™R©eV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
 ) cÚ¡ {  
m_HRD
[Ïy”].
b™R©eV®ueMšus1
[ýbút][ÇlOrVþ]; 
	}
}

379 
Void
 
	$£tCpbSizeV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
ýbSizeV®ue
[ýbút][ÇlOrVþ] = v®ue; 
	}
}

380 
UIÁ
 
	$g‘CpbSizeV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
 ) cÚ¡ {  
m_HRD
[Ïy”].
ýbSizeV®ue
[ýbút][ÇlOrVþ]; 
	}
}

381 
Void
 
	$£tDuCpbSizeV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
duýbSizeV®ue
[ýbút][ÇlOrVþ] = v®ue; 
	}
}

382 
UIÁ
 
	$g‘DuCpbSizeV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
 ) cÚ¡ {  
m_HRD
[Ïy”].
duýbSizeV®ue
[ýbút][ÇlOrVþ]; 
	}
}

383 
Void
 
	$£tDuB™R©eV®ueMšus1
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
, 
UIÁ
 
v®ue
 ) { 
m_HRD
[Ïy”].
duB™R©eV®ue
[ýbút][ÇlOrVþ] = v®ue; 
	}
}

384 
UIÁ
 
	$g‘DuB™R©eV®ueMšus1
(
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
 ) cÚ¡ {  
m_HRD
[Ïy”].
duB™R©eV®ue
[ýbút][ÇlOrVþ]; 
	}
}

385 
Void
 
	$£tCbrFÏg
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
, 
BoÞ
 
v®ue
 ) { 
m_HRD
[Ïy”].
cbrFÏg
[ýbút][ÇlOrVþ] = v®ue; 
	}
}

386 
BoÞ
 
	$g‘CbrFÏg
Ð
IÁ
 
Ïy”
, IÁ 
ýbút
, IÁ 
ÇlOrVþ
 ) cÚ¡ {  
m_HRD
[Ïy”].
cbrFÏg
[ýbút][ÇlOrVþ]; 
	}
}

388 
BoÞ
 
	$g‘CpbDpbD–aysP»£ÁFÏg
ÐècÚ¡ {  
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
(è|| 
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
(); 
	}
}

391 þas 
	cTimšgInfo


393 
BoÞ
 
	mm_timšgInfoP»£ÁFÏg
;

394 
UIÁ
 
	mm_numUn™sInTick
;

395 
UIÁ
 
	mm_timeSÿË
;

396 
BoÞ
 
	mm_pocPrÝÜtiÚ®ToTimšgFÏg
;

397 
IÁ
 
	mm_numTicksPocDiffOÃMšus1
;

398 
	mpublic
:

399 
	$TimšgInfo
()

400 : 
	`m_timšgInfoP»£ÁFÏg
 (
çl£
)

401 , 
	`m_numUn™sInTick
 (1001)

402 , 
	`m_timeSÿË
 (60000)

403 , 
	`m_pocPrÝÜtiÚ®ToTimšgFÏg
(
çl£
)

404 , 
	$m_numTicksPocDiffOÃMšus1
 (0)

407 
Void
 
	$£tTimšgInfoP»£ÁFÏg
Ð
BoÞ
 
æag
 ) { 
m_timšgInfoP»£ÁFÏg
 = fÏg; 
	}
}

408 
BoÞ
 
	$g‘TimšgInfoP»£ÁFÏg
ÐècÚ¡ {  
m_timšgInfoP»£ÁFÏg
; 
	}
}

410 
Void
 
	$£tNumUn™sInTick
Ð
UIÁ
 
v®ue
 ) { 
m_numUn™sInTick
 = v®ue; 
	}
}

411 
UIÁ
 
	$g‘NumUn™sInTick
ÐècÚ¡ {  
m_numUn™sInTick
; 
	}
}

413 
Void
 
	$£tTimeSÿË
Ð
UIÁ
 
v®ue
 ) { 
m_timeSÿË
 = v®ue; 
	}
}

414 
UIÁ
 
	$g‘TimeSÿË
ÐècÚ¡ {  
m_timeSÿË
; 
	}
}

416 
Void
 
	$£tPocPrÝÜtiÚ®ToTimšgFÏg
(
BoÞ
 
x
è{ 
m_pocPrÝÜtiÚ®ToTimšgFÏg
 = x; 
	}
}

417 
BoÞ
 
	$g‘PocPrÝÜtiÚ®ToTimšgFÏg
ÐècÚ¡ {  
m_pocPrÝÜtiÚ®ToTimšgFÏg
; 
	}
}

419 
Void
 
	$£tNumTicksPocDiffOÃMšus1
(
IÁ
 
x
è{ 
m_numTicksPocDiffOÃMšus1
 = x; 
	}
}

420 
IÁ
 
	$g‘NumTicksPocDiffOÃMšus1
ÐècÚ¡ {  
m_numTicksPocDiffOÃMšus1
; 
	}
}

423 
	sChromaQpAdj


428 
IÁ
 
	mCbOff£t
;

429 
IÁ
 
	mCrOff£t
;

430 } 
	mcomp
;

431 
IÁ
 
	moff£t
[2];

432 } 
	mu
;

435 þas 
	cTComVPS


437 
	m´iv©e
:

438 
IÁ
 
m_VPSId
;

439 
UIÁ
 
	mm_uiMaxTLay”s
;

440 
UIÁ
 
	mm_uiMaxLay”s
;

441 
BoÞ
 
	mm_bTempÜ®IdNe¡šgFÏg
;

443 
UIÁ
 
	mm_numReÜd”Pics
[
MAX_TLAYER
];

444 
UIÁ
 
	mm_uiMaxDecPicBufãršg
[
MAX_TLAYER
];

445 
UIÁ
 
	mm_uiMaxL©’cyInü—£
[
MAX_TLAYER
];

447 
UIÁ
 
	mm_numHrdP¬am‘”s
;

448 
UIÁ
 
	mm_maxNuhRe£rvedZ”oLay”Id
;

449 
	m¡d
::
veùÜ
<
TComHRD
> 
m_hrdP¬am‘”s
;

450 
	m¡d
::
veùÜ
<
UIÁ
> 
m_hrdOpS‘Idx
;

451 
	m¡d
::
veùÜ
<
BoÞ
> 
m_ýrmsP»£ÁFÏg
;

452 
UIÁ
 
	mm_numOpS‘s
;

453 
BoÞ
 
	mm_Ïy”IdInþudedFÏg
[
MAX_VPS_OP_SETS_PLUS1
][
MAX_VPS_NUH_RESERVED_ZERO_LAYER_ID_PLUS1
];

455 
TComPTL
 
	mm_pcPTL
;

456 
TimšgInfo
 
	mm_timšgInfo
;

458 
	mpublic
:

459 
TComVPS
();

461 
	mvœtu®
 ~
TComVPS
();

463 
Void
 
	$ü—‹HrdP¬amBufãr
()

465 
m_hrdP¬am‘”s
.
	`»size
(
	`g‘NumHrdP¬am‘”s
());

466 
m_hrdOpS‘Idx
.
	`»size
(
	`g‘NumHrdP¬am‘”s
());

467 
m_ýrmsP»£ÁFÏg
.
	`»size
(
	`g‘NumHrdP¬am‘”s
());

470 
TComHRD
* 
	$g‘HrdP¬am‘”s
Ð
UIÁ
 
i
 ) {  &
m_hrdP¬am‘”s
[ i ]; 
	}
}

471 cÚ¡ 
TComHRD
* 
	$g‘HrdP¬am‘”s
Ð
UIÁ
 
i
 ) cÚ¡ {  &
m_hrdP¬am‘”s
[ i ]; 
	}
}

472 
UIÁ
 
	$g‘HrdOpS‘Idx
Ð
UIÁ
 
i
 ) cÚ¡ {  
m_hrdOpS‘Idx
[ i ]; 
	}
}

473 
Void
 
	$£tHrdOpS‘Idx
Ð
UIÁ
 
v®
, UIÁ 
i
 ) { 
m_hrdOpS‘Idx
[ i ] = v®; 
	}
}

474 
BoÞ
 
	$g‘C´msP»£ÁFÏg
Ð
UIÁ
 
i
 ) cÚ¡ {  
m_ýrmsP»£ÁFÏg
[ i ]; 
	}
}

475 
Void
 
	$£tC´msP»£ÁFÏg
Ð
BoÞ
 
v®
, 
UIÁ
 
i
 ) { 
m_ýrmsP»£ÁFÏg
[ i ] = v®; 
	}
}

477 
IÁ
 
	$g‘VPSId
(ècÚ¡ {  
m_VPSId
; 
	}
}

478 
Void
 
	$£tVPSId
(
IÁ
 
i
è{ 
m_VPSId
 = i; 
	}
}

480 
UIÁ
 
	$g‘MaxTLay”s
(ècÚ¡ {  
m_uiMaxTLay”s
; 
	}
}

481 
Void
 
	$£tMaxTLay”s
(
UIÁ
 
t
è{ 
m_uiMaxTLay”s
 =; 
	}
}

483 
UIÁ
 
	$g‘MaxLay”s
(ècÚ¡ {  
m_uiMaxLay”s
; 
	}
}

484 
Void
 
	$£tMaxLay”s
(
UIÁ
 
l
è{ 
m_uiMaxLay”s
 =†; 
	}
}

486 
BoÞ
 
	$g‘TempÜ®Ne¡šgFÏg
(ècÚ¡ {  
m_bTempÜ®IdNe¡šgFÏg
; 
	}
}

487 
Void
 
	$£tTempÜ®Ne¡šgFÏg
(
BoÞ
 
t
è{ 
m_bTempÜ®IdNe¡šgFÏg
 =; 
	}
}

489 
Void
 
	$£tNumReÜd”Pics
(
UIÁ
 
v
, UIÁ 
tLay”
è{ 
m_numReÜd”Pics
[tLay”] = v; 
	}
}

490 
UIÁ
 
	$g‘NumReÜd”Pics
(
UIÁ
 
tLay”
ècÚ¡ {  
m_numReÜd”Pics
[tLay”]; 
	}
}

492 
Void
 
	$£tMaxDecPicBufãršg
(
UIÁ
 
v
, UIÁ 
tLay”
è{ 
	`as£¹
ÑLay” < 
MAX_TLAYER
); 
m_uiMaxDecPicBufãršg
[tLay”] = v; 
	}
}

493 
UIÁ
 
	$g‘MaxDecPicBufãršg
(
UIÁ
 
tLay”
ècÚ¡ {  
m_uiMaxDecPicBufãršg
[tLay”]; 
	}
}

495 
Void
 
	$£tMaxL©’cyInü—£
(
UIÁ
 
v
, UIÁ 
tLay”
è{ 
m_uiMaxL©’cyInü—£
[tLay”] = v; 
	}
}

496 
UIÁ
 
	$g‘MaxL©’cyInü—£
(
UIÁ
 
tLay”
ècÚ¡ {  
m_uiMaxL©’cyInü—£
[tLay”]; 
	}
}

498 
UIÁ
 
	$g‘NumHrdP¬am‘”s
(ècÚ¡ {  
m_numHrdP¬am‘”s
; 
	}
}

499 
Void
 
	$£tNumHrdP¬am‘”s
(
UIÁ
 
v
è{ 
m_numHrdP¬am‘”s
 = v; 
	}
}

501 
UIÁ
 
	$g‘MaxNuhRe£rvedZ”oLay”Id
(ècÚ¡ {  
m_maxNuhRe£rvedZ”oLay”Id
; 
	}
}

502 
Void
 
	$£tMaxNuhRe£rvedZ”oLay”Id
(
UIÁ
 
v
è{ 
m_maxNuhRe£rvedZ”oLay”Id
 = v; 
	}
}

504 
UIÁ
 
	$g‘MaxOpS‘s
(ècÚ¡ {  
m_numOpS‘s
; 
	}
}

505 
Void
 
	$£tMaxOpS‘s
(
UIÁ
 
v
è{ 
m_numOpS‘s
 = v; 
	}
}

506 
BoÞ
 
	$g‘Lay”IdInþudedFÏg
(
UIÁ
 
ÝsIdx
, UIÁ 
id
ècÚ¡ {  
m_Ïy”IdInþudedFÏg
[ÝsIdx][id]; 
	}
}

507 
Void
 
	$£tLay”IdInþudedFÏg
(
BoÞ
 
v
, 
UIÁ
 
ÝsIdx
, UIÁ 
id
è{ 
m_Ïy”IdInþudedFÏg
[ÝsIdx][id] = v; 
	}
}

509 
TComPTL
* 
	$g‘PTL
(è{  &
m_pcPTL
; 
	}
}

510 cÚ¡ 
TComPTL
* 
	$g‘PTL
(ècÚ¡ {  &
m_pcPTL
; 
	}
}

511 
TimšgInfo
* 
	$g‘TimšgInfo
(è{  &
m_timšgInfo
; 
	}
}

512 cÚ¡ 
TimšgInfo
* 
	$g‘TimšgInfo
(ècÚ¡ {  &
m_timšgInfo
; 
	}
}

515 þas 
	cTComVUI


517 
	m´iv©e
:

518 
BoÞ
 
m_a¥eùR©ioInfoP»£ÁFÏg
;

519 
IÁ
 
	mm_a¥eùR©ioIdc
;

520 
IÁ
 
	mm_§rWidth
;

521 
IÁ
 
	mm_§rHeight
;

522 
BoÞ
 
	mm_ov”sÿnInfoP»£ÁFÏg
;

523 
BoÞ
 
	mm_ov”sÿnAµrÝrŸ‹FÏg
;

524 
BoÞ
 
	mm_videoSigÇlTy³P»£ÁFÏg
;

525 
IÁ
 
	mm_videoFÜm©
;

526 
BoÞ
 
	mm_videoFuÎRªgeFÏg
;

527 
BoÞ
 
	mm_cÞourDesütiÚP»£ÁFÏg
;

528 
IÁ
 
	mm_cÞourPrim¬›s
;

529 
IÁ
 
	mm_ŒªsãrCh¬aù”i¡ics
;

530 
IÁ
 
	mm_m©rixCÛffic›Ás
;

531 
BoÞ
 
	mm_chromaLocInfoP»£ÁFÏg
;

532 
IÁ
 
	mm_chromaSam¶eLocTy³TÝF›ld
;

533 
IÁ
 
	mm_chromaSam¶eLocTy³BÙtomF›ld
;

534 
BoÞ
 
	mm_ÃuŒ®ChromaIndiÿtiÚFÏg
;

535 
BoÞ
 
	mm_f›ldSeqFÏg
;

536 
Wšdow
 
	mm_deçuÉDi¥ÏyWšdow
;

537 
BoÞ
 
	mm_äameF›ldInfoP»£ÁFÏg
;

538 
BoÞ
 
	mm_hrdP¬am‘”sP»£ÁFÏg
;

539 
BoÞ
 
	mm_b™¡»amRe¡riùiÚFÏg
;

540 
BoÞ
 
	mm_tžesFixedSŒuùu»FÏg
;

541 
BoÞ
 
	mm_mÙiÚVeùÜsOv”PicBound¬›sFÏg
;

542 
BoÞ
 
	mm_»¡riùedRefPicLi¡sFÏg
;

543 
IÁ
 
	mm_mšS·tŸlSegm’tiÚIdc
;

544 
IÁ
 
	mm_maxBy‹sP”PicD’om
;

545 
IÁ
 
	mm_maxB™sP”MšCuD’om
;

546 
IÁ
 
	mm_log2MaxMvL’gthHÜizÚl
;

547 
IÁ
 
	mm_log2MaxMvL’gthV”tiÿl
;

548 
TComHRD
 
	mm_hrdP¬am‘”s
;

549 
TimšgInfo
 
	mm_timšgInfo
;

551 
	mpublic
:

552 
	$TComVUI
()

553 : 
	`m_a¥eùR©ioInfoP»£ÁFÏg
 (
çl£
)

554 , 
	`m_a¥eùR©ioIdc
 (0)

555 , 
	`m_§rWidth
 (0)

556 , 
	`m_§rHeight
 (0)

557 , 
	`m_ov”sÿnInfoP»£ÁFÏg
 (
çl£
)

558 , 
	`m_ov”sÿnAµrÝrŸ‹FÏg
 (
çl£
)

559 , 
	`m_videoSigÇlTy³P»£ÁFÏg
 (
çl£
)

560 , 
	`m_videoFÜm©
 (5)

561 , 
	`m_videoFuÎRªgeFÏg
 (
çl£
)

562 , 
	`m_cÞourDesütiÚP»£ÁFÏg
 (
çl£
)

563 , 
	`m_cÞourPrim¬›s
 (2)

564 , 
	`m_ŒªsãrCh¬aù”i¡ics
 (2)

565 , 
	`m_m©rixCÛffic›Ás
 (2)

566 , 
	`m_chromaLocInfoP»£ÁFÏg
 (
çl£
)

567 , 
	`m_chromaSam¶eLocTy³TÝF›ld
 (0)

568 , 
	`m_chromaSam¶eLocTy³BÙtomF›ld
 (0)

569 , 
	`m_ÃuŒ®ChromaIndiÿtiÚFÏg
 (
çl£
)

570 , 
	`m_f›ldSeqFÏg
 (
çl£
)

571 , 
	`m_äameF›ldInfoP»£ÁFÏg
 (
çl£
)

572 , 
	`m_hrdP¬am‘”sP»£ÁFÏg
 (
çl£
)

573 , 
	`m_b™¡»amRe¡riùiÚFÏg
 (
çl£
)

574 , 
	`m_tžesFixedSŒuùu»FÏg
 (
çl£
)

575 , 
	`m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
(
Œue
)

576 , 
	`m_»¡riùedRefPicLi¡sFÏg
 (1)

577 , 
	`m_mšS·tŸlSegm’tiÚIdc
 (0)

578 , 
	`m_maxBy‹sP”PicD’om
 (2)

579 , 
	`m_maxB™sP”MšCuD’om
 (1)

580 , 
	`m_log2MaxMvL’gthHÜizÚl
 (15)

581 , 
	$m_log2MaxMvL’gthV”tiÿl
 (15)

584 
vœtu®
 ~
	$TComVUI
(è{
	}
}

586 
BoÞ
 
	$g‘A¥eùR©ioInfoP»£ÁFÏg
(ècÚ¡ {  
m_a¥eùR©ioInfoP»£ÁFÏg
; 
	}
}

587 
Void
 
	$£tA¥eùR©ioInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_a¥eùR©ioInfoP»£ÁFÏg
 = i; 
	}
}

589 
IÁ
 
	$g‘A¥eùR©ioIdc
(ècÚ¡ {  
m_a¥eùR©ioIdc
; 
	}
}

590 
Void
 
	$£tA¥eùR©ioIdc
(
IÁ
 
i
è{ 
m_a¥eùR©ioIdc
 = i; 
	}
}

592 
IÁ
 
	$g‘S¬Width
(ècÚ¡ {  
m_§rWidth
; 
	}
}

593 
Void
 
	$£tS¬Width
(
IÁ
 
i
è{ 
m_§rWidth
 = i; 
	}
}

595 
IÁ
 
	$g‘S¬Height
(ècÚ¡ {  
m_§rHeight
; 
	}
}

596 
Void
 
	$£tS¬Height
(
IÁ
 
i
è{ 
m_§rHeight
 = i; 
	}
}

598 
BoÞ
 
	$g‘Ov”sÿnInfoP»£ÁFÏg
(ècÚ¡ {  
m_ov”sÿnInfoP»£ÁFÏg
; 
	}
}

599 
Void
 
	$£tOv”sÿnInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_ov”sÿnInfoP»£ÁFÏg
 = i; 
	}
}

601 
BoÞ
 
	$g‘Ov”sÿnAµrÝrŸ‹FÏg
(ècÚ¡ {  
m_ov”sÿnAµrÝrŸ‹FÏg
; 
	}
}

602 
Void
 
	$£tOv”sÿnAµrÝrŸ‹FÏg
(
BoÞ
 
i
è{ 
m_ov”sÿnAµrÝrŸ‹FÏg
 = i; 
	}
}

604 
BoÞ
 
	$g‘VideoSigÇlTy³P»£ÁFÏg
(ècÚ¡ {  
m_videoSigÇlTy³P»£ÁFÏg
; 
	}
}

605 
Void
 
	$£tVideoSigÇlTy³P»£ÁFÏg
(
BoÞ
 
i
è{ 
m_videoSigÇlTy³P»£ÁFÏg
 = i; 
	}
}

607 
IÁ
 
	$g‘VideoFÜm©
(ècÚ¡ {  
m_videoFÜm©
; 
	}
}

608 
Void
 
	$£tVideoFÜm©
(
IÁ
 
i
è{ 
m_videoFÜm©
 = i; 
	}
}

610 
BoÞ
 
	$g‘VideoFuÎRªgeFÏg
(ècÚ¡ {  
m_videoFuÎRªgeFÏg
; 
	}
}

611 
Void
 
	$£tVideoFuÎRªgeFÏg
(
BoÞ
 
i
è{ 
m_videoFuÎRªgeFÏg
 = i; 
	}
}

613 
BoÞ
 
	$g‘CÞourDesütiÚP»£ÁFÏg
(ècÚ¡ {  
m_cÞourDesütiÚP»£ÁFÏg
; 
	}
}

614 
Void
 
	$£tCÞourDesütiÚP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_cÞourDesütiÚP»£ÁFÏg
 = i; 
	}
}

616 
IÁ
 
	$g‘CÞourPrim¬›s
(ècÚ¡ {  
m_cÞourPrim¬›s
; 
	}
}

617 
Void
 
	$£tCÞourPrim¬›s
(
IÁ
 
i
è{ 
m_cÞourPrim¬›s
 = i; 
	}
}

619 
IÁ
 
	$g‘T¿nsãrCh¬aù”i¡ics
(ècÚ¡ {  
m_ŒªsãrCh¬aù”i¡ics
; 
	}
}

620 
Void
 
	$£tT¿nsãrCh¬aù”i¡ics
(
IÁ
 
i
è{ 
m_ŒªsãrCh¬aù”i¡ics
 = i; 
	}
}

622 
IÁ
 
	$g‘M©rixCÛffic›Ás
(ècÚ¡ {  
m_m©rixCÛffic›Ás
; 
	}
}

623 
Void
 
	$£tM©rixCÛffic›Ás
(
IÁ
 
i
è{ 
m_m©rixCÛffic›Ás
 = i; 
	}
}

625 
BoÞ
 
	$g‘ChromaLocInfoP»£ÁFÏg
(ècÚ¡ {  
m_chromaLocInfoP»£ÁFÏg
; 
	}
}

626 
Void
 
	$£tChromaLocInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_chromaLocInfoP»£ÁFÏg
 = i; 
	}
}

628 
IÁ
 
	$g‘ChromaSam¶eLocTy³TÝF›ld
(ècÚ¡ {  
m_chromaSam¶eLocTy³TÝF›ld
; 
	}
}

629 
Void
 
	$£tChromaSam¶eLocTy³TÝF›ld
(
IÁ
 
i
è{ 
m_chromaSam¶eLocTy³TÝF›ld
 = i; 
	}
}

631 
IÁ
 
	$g‘ChromaSam¶eLocTy³BÙtomF›ld
(ècÚ¡ {  
m_chromaSam¶eLocTy³BÙtomF›ld
; 
	}
}

632 
Void
 
	$£tChromaSam¶eLocTy³BÙtomF›ld
(
IÁ
 
i
è{ 
m_chromaSam¶eLocTy³BÙtomF›ld
 = i; 
	}
}

634 
BoÞ
 
	$g‘NeuŒ®ChromaIndiÿtiÚFÏg
(ècÚ¡ {  
m_ÃuŒ®ChromaIndiÿtiÚFÏg
; 
	}
}

635 
Void
 
	$£tNeuŒ®ChromaIndiÿtiÚFÏg
(
BoÞ
 
i
è{ 
m_ÃuŒ®ChromaIndiÿtiÚFÏg
 = i; 
	}
}

637 
BoÞ
 
	$g‘F›ldSeqFÏg
(ècÚ¡ {  
m_f›ldSeqFÏg
; 
	}
}

638 
Void
 
	$£tF›ldSeqFÏg
(
BoÞ
 
i
è{ 
m_f›ldSeqFÏg
 = i; 
	}
}

640 
BoÞ
 
	$g‘F¿meF›ldInfoP»£ÁFÏg
(ècÚ¡ {  
m_äameF›ldInfoP»£ÁFÏg
; 
	}
}

641 
Void
 
	$£tF¿meF›ldInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_äameF›ldInfoP»£ÁFÏg
 = i; 
	}
}

643 
	gWšdow
& 
	$g‘DeçuÉDi¥ÏyWšdow
(è{  
m_deçuÉDi¥ÏyWšdow
; 
	}
}

644 cÚ¡ 
	gWšdow
& 
	$g‘DeçuÉDi¥ÏyWšdow
(ècÚ¡ {  
m_deçuÉDi¥ÏyWšdow
; 
	}
}

645 
Void
 
	$£tDeçuÉDi¥ÏyWšdow
(
Wšdow
& 
deçuÉDi¥ÏyWšdow
 ) { 
m_deçuÉDi¥ÏyWšdow
 = deçuÉDi¥ÏyWšdow; 
	}
}

647 
BoÞ
 
	$g‘HrdP¬am‘”sP»£ÁFÏg
(ècÚ¡ {  
m_hrdP¬am‘”sP»£ÁFÏg
; 
	}
}

648 
Void
 
	$£tHrdP¬am‘”sP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_hrdP¬am‘”sP»£ÁFÏg
 = i; 
	}
}

650 
BoÞ
 
	$g‘B™¡»amRe¡riùiÚFÏg
(ècÚ¡ {  
m_b™¡»amRe¡riùiÚFÏg
; 
	}
}

651 
Void
 
	$£tB™¡»amRe¡riùiÚFÏg
(
BoÞ
 
i
è{ 
m_b™¡»amRe¡riùiÚFÏg
 = i; 
	}
}

653 
BoÞ
 
	$g‘TžesFixedSŒuùu»FÏg
(ècÚ¡ {  
m_tžesFixedSŒuùu»FÏg
; 
	}
}

654 
Void
 
	$£tTžesFixedSŒuùu»FÏg
(
BoÞ
 
i
è{ 
m_tžesFixedSŒuùu»FÏg
 = i; 
	}
}

656 
BoÞ
 
	$g‘MÙiÚVeùÜsOv”PicBound¬›sFÏg
(ècÚ¡ {  
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
; 
	}
}

657 
Void
 
	$£tMÙiÚVeùÜsOv”PicBound¬›sFÏg
(
BoÞ
 
i
è{ 
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
 = i; 
	}
}

659 
BoÞ
 
	$g‘Re¡riùedRefPicLi¡sFÏg
(ècÚ¡ {  
m_»¡riùedRefPicLi¡sFÏg
; 
	}
}

660 
Void
 
	$£tRe¡riùedRefPicLi¡sFÏg
(
BoÞ
 
b
è{ 
m_»¡riùedRefPicLi¡sFÏg
 = b; 
	}
}

662 
IÁ
 
	$g‘MšS·tŸlSegm’tiÚIdc
(ècÚ¡ {  
m_mšS·tŸlSegm’tiÚIdc
; 
	}
}

663 
Void
 
	$£tMšS·tŸlSegm’tiÚIdc
(
IÁ
 
i
è{ 
m_mšS·tŸlSegm’tiÚIdc
 = i; 
	}
}

665 
IÁ
 
	$g‘MaxBy‹sP”PicD’om
(ècÚ¡ {  
m_maxBy‹sP”PicD’om
; 
	}
}

666 
Void
 
	$£tMaxBy‹sP”PicD’om
(
IÁ
 
i
è{ 
m_maxBy‹sP”PicD’om
 = i; 
	}
}

668 
IÁ
 
	$g‘MaxB™sP”MšCuD’om
(ècÚ¡ {  
m_maxB™sP”MšCuD’om
; 
	}
}

669 
Void
 
	$£tMaxB™sP”MšCuD’om
(
IÁ
 
i
è{ 
m_maxB™sP”MšCuD’om
 = i; 
	}
}

671 
IÁ
 
	$g‘Log2MaxMvL’gthHÜizÚl
(ècÚ¡ {  
m_log2MaxMvL’gthHÜizÚl
; 
	}
}

672 
Void
 
	$£tLog2MaxMvL’gthHÜizÚl
(
IÁ
 
i
è{ 
m_log2MaxMvL’gthHÜizÚl
 = i; 
	}
}

674 
IÁ
 
	$g‘Log2MaxMvL’gthV”tiÿl
(ècÚ¡ {  
m_log2MaxMvL’gthV”tiÿl
; 
	}
}

675 
Void
 
	$£tLog2MaxMvL’gthV”tiÿl
(
IÁ
 
i
è{ 
m_log2MaxMvL’gthV”tiÿl
 = i; 
	}
}

677 
TComHRD
* 
	$g‘HrdP¬am‘”s
(è{  &
m_hrdP¬am‘”s
; 
	}
}

678 cÚ¡ 
TComHRD
* 
	$g‘HrdP¬am‘”s
(ècÚ¡ {  &
m_hrdP¬am‘”s
; 
	}
}

680 
TimšgInfo
* 
	$g‘TimšgInfo
(è{  &
m_timšgInfo
; 
	}
}

681 cÚ¡ 
TimšgInfo
* 
	$g‘TimšgInfo
(ècÚ¡ {  &
m_timšgInfo
; 
	}
}

685 þas 
	cTComSPSRExt


687 
	m´iv©e
:

688 
BoÞ
 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
;

689 
BoÞ
 
	mm_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
;

690 
BoÞ
 
	mm_rdpcmEÇbËdFÏg
[
NUMBER_OF_RDPCM_SIGNALLING_MODES
];

691 
BoÞ
 
	mm_ex‹ndedP»cisiÚProûssšgFÏg
;

692 
BoÞ
 
	mm_šŒaSmoÙhšgDi§bËdFÏg
;

693 
BoÞ
 
	mm_highP»cisiÚOff£tsEÇbËdFÏg
;

694 
BoÞ
 
	mm_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
;

695 
BoÞ
 
	mm_ÿbacBy·ssAlignm’tEÇbËdFÏg
;

697 
	mpublic
:

698 
TComSPSRExt
();

700 
BoÞ
 
	$£‰šgsDifãrFromDeçuÉs
() const

702  
	`g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
()

703 || 
	`g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
()

704 || 
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_IMPLICIT
)

705 || 
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_EXPLICIT
)

706 || 
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
()

707 || 
	`g‘IÁ¿SmoÙhšgDi§bËdFÏg
()

708 || 
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
()

709 || 
	`g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
()

710 || 
	`g‘CabacBy·ssAlignm’tEÇbËdFÏg
();

714 
BoÞ
 
	$g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
(ècÚ¡ {  
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
; 
	}
}

715 
Void
 
	$£tT¿nsfÜmSkRÙ©iÚEÇbËdFÏg
(cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 = v®ue; 
	}
}

717 
BoÞ
 
	$g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
(ècÚ¡ {  
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
; 
	}
}

718 
Void
 
	$£tT¿nsfÜmSkCÚ‹xtEÇbËdFÏg
(cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 = v®ue; 
	}
}

720 
BoÞ
 
	$g‘RdpcmEÇbËdFÏg
(cÚ¡ 
RDPCMSigÇÎšgMode
 
sigÇÎšgMode
ècÚ¡ {  
m_rdpcmEÇbËdFÏg
[sigÇÎšgMode]; 
	}
}

721 
Void
 
	$£tRdpcmEÇbËdFÏg
(cÚ¡ 
RDPCMSigÇÎšgMode
 
sigÇÎšgMode
, cÚ¡ 
BoÞ
 
v®ue
è{ 
m_rdpcmEÇbËdFÏg
[sigÇÎšgMode] = v®ue; 
	}
}

723 
BoÞ
 
	$g‘Ex‹ndedP»cisiÚProûssšgFÏg
(ècÚ¡ {  
m_ex‹ndedP»cisiÚProûssšgFÏg
; 
	}
}

724 
Void
 
	$£tEx‹ndedP»cisiÚProûssšgFÏg
(
BoÞ
 
v®ue
è{ 
m_ex‹ndedP»cisiÚProûssšgFÏg
 = v®ue; 
	}
}

726 
BoÞ
 
	$g‘IÁ¿SmoÙhšgDi§bËdFÏg
(ècÚ¡ {  
m_šŒaSmoÙhšgDi§bËdFÏg
; 
	}
}

727 
Void
 
	$£tIÁ¿SmoÙhšgDi§bËdFÏg
(
BoÞ
 
bV®ue
è{ 
m_šŒaSmoÙhšgDi§bËdFÏg
=bV®ue; 
	}
}

729 
BoÞ
 
	$g‘HighP»cisiÚOff£tsEÇbËdFÏg
(ècÚ¡ {  
m_highP»cisiÚOff£tsEÇbËdFÏg
; 
	}
}

730 
Void
 
	$£tHighP»cisiÚOff£tsEÇbËdFÏg
(
BoÞ
 
v®ue
è{ 
m_highP»cisiÚOff£tsEÇbËdFÏg
 = v®ue; 
	}
}

732 
BoÞ
 
	$g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
(ècÚ¡ {  
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
; 
	}
}

733 
Void
 
	$£tP”si¡’tRiûAd­tiÚEÇbËdFÏg
(cÚ¡ 
BoÞ
 
v®ue
è{ 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 = v®ue; 
	}
}

735 
BoÞ
 
	$g‘CabacBy·ssAlignm’tEÇbËdFÏg
(ècÚ¡ {  
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
; 
	}
}

736 
Void
 
	$£tCabacBy·ssAlignm’tEÇbËdFÏg
(cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 = v®ue; 
	}
}

740 þas 
	cTComSPS


742 
	m´iv©e
:

743 
IÁ
 
m_SPSId
;

744 
IÁ
 
	mm_VPSId
;

745 
ChromaFÜm©
 
	mm_chromaFÜm©Idc
;

747 
UIÁ
 
	mm_uiMaxTLay”s
;

750 
UIÁ
 
	mm_picWidthInLumaSam¶es
;

751 
UIÁ
 
	mm_picHeightInLumaSam¶es
;

753 
IÁ
 
	mm_log2MšCodšgBlockSize
;

754 
IÁ
 
	mm_log2DiffMaxMšCodšgBlockSize
;

755 
UIÁ
 
	mm_uiMaxCUWidth
;

756 
UIÁ
 
	mm_uiMaxCUHeight
;

757 
UIÁ
 
	mm_uiMaxTÙ®CUD•th
;

759 
Wšdow
 
	mm_cÚfÜmªûWšdow
;

761 
TComRPSLi¡
 
	mm_RPSLi¡
;

762 
BoÞ
 
	mm_bLÚgT”mRefsP»£Á
;

763 
BoÞ
 
	mm_SPSTempÜ®MVPEÇbËdFÏg
;

764 
IÁ
 
	mm_numReÜd”Pics
[
MAX_TLAYER
];

767 
UIÁ
 
	mm_uiQuadŒ“TULog2MaxSize
;

768 
UIÁ
 
	mm_uiQuadŒ“TULog2MšSize
;

769 
UIÁ
 
	mm_uiQuadŒ“TUMaxD•thIÁ”
;

770 
UIÁ
 
	mm_uiQuadŒ“TUMaxD•thIÁ¿
;

771 
BoÞ
 
	mm_u£PCM
;

772 
UIÁ
 
	mm_pcmLog2MaxSize
;

773 
UIÁ
 
	mm_uiPCMLog2MšSize
;

774 
BoÞ
 
	mm_u£AMP
;

777 
B™D•ths
 
	mm_b™D•ths
;

778 
IÁ
 
	mm_qpBDOff£t
[
MAX_NUM_CHANNEL_TYPE
];

779 
IÁ
 
	mm_pcmB™D•ths
[
MAX_NUM_CHANNEL_TYPE
];

780 
BoÞ
 
	mm_bPCMFž‹rDi§bËFÏg
;

782 
UIÁ
 
	mm_uiB™sFÜPOC
;

783 
UIÁ
 
	mm_numLÚgT”mRefPicSPS
;

784 
UIÁ
 
	mm_ÉRefPicPocLsbSps
[
MAX_NUM_LONG_TERM_REF_PICS
];

785 
BoÞ
 
	mm_u£dByCu¼PicLtSPSFÏg
[
MAX_NUM_LONG_TERM_REF_PICS
];

787 
UIÁ
 
	mm_uiMaxTrSize
;

789 
BoÞ
 
	mm_bU£SAO
;

791 
BoÞ
 
	mm_bTempÜ®IdNe¡šgFÏg
;

793 
BoÞ
 
	mm_sÿlšgLi¡EÇbËdFÏg
;

794 
BoÞ
 
	mm_sÿlšgLi¡P»£ÁFÏg
;

795 
TComSÿlšgLi¡
 
	mm_sÿlšgLi¡
;

796 
UIÁ
 
	mm_uiMaxDecPicBufãršg
[
MAX_TLAYER
];

797 
UIÁ
 
	mm_uiMaxL©’cyInü—£Plus1
[
MAX_TLAYER
];

799 
BoÞ
 
	mm_u£SŒÚgIÁ¿SmoÙhšg
;

801 
BoÞ
 
	mm_vuiP¬am‘”sP»£ÁFÏg
;

802 
TComVUI
 
	mm_vuiP¬am‘”s
;

804 
TComSPSRExt
 
	mm_¥sRªgeEx‹nsiÚ
;

806 cÚ¡ 
IÁ
 
	mm_wšUn™X
[
NUM_CHROMA_FORMAT
];

807 cÚ¡ 
IÁ
 
	mm_wšUn™Y
[
NUM_CHROMA_FORMAT
];

808 
TComPTL
 
	mm_pcPTL
;

810 #ià
O0043_BEST_EFFORT_DECODING


811 
UIÁ
 
	mm_fÜûDecodeB™D•th
;

814 
	mpublic
:

815 
TComSPS
();

816 
	mvœtu®
 ~
TComSPS
();

817 #ià
O0043_BEST_EFFORT_DECODING


818 
Void
 
	$£tFÜûDecodeB™D•th
(
UIÁ
 
b™D•th
è{ 
m_fÜûDecodeB™D•th
 = bitDepth; }

819 
UIÁ
 
	$g‘FÜûDecodeB™D•th
(ècÚ¡ {  
m_fÜûDecodeB™D•th
; 
	}
}

822 
IÁ
 
	$g‘VPSId
(ècÚ¡ {  
m_VPSId
; 
	}
}

823 
Void
 
	$£tVPSId
(
IÁ
 
i
è{ 
m_VPSId
 = i; 
	}
}

824 
IÁ
 
	$g‘SPSId
(ècÚ¡ {  
m_SPSId
; 
	}
}

825 
Void
 
	$£tSPSId
(
IÁ
 
i
è{ 
m_SPSId
 = i; 
	}
}

826 
ChromaFÜm©
 
	$g‘ChromaFÜm©Idc
 (ècÚ¡ {  
m_chromaFÜm©Idc
; 
	}
}

827 
Void
 
	$£tChromaFÜm©Idc
 (
ChromaFÜm©
 
i
è{ 
m_chromaFÜm©Idc
 = i; 
	}
}

829 
IÁ
 
	$g‘WšUn™X
 (
IÁ
 
chromaFÜm©Idc
è{ 
	`as£¹
 (chromaFÜm©Idø>ð0 && chromaFÜm©Idø< 
NUM_CHROMA_FORMAT
);  
m_wšUn™X
[chromaFÜm©Idc]; 
	}
}

830 
IÁ
 
	$g‘WšUn™Y
 (
IÁ
 
chromaFÜm©Idc
è{ 
	`as£¹
 (chromaFÜm©Idø>ð0 && chromaFÜm©Idø< 
NUM_CHROMA_FORMAT
);  
m_wšUn™Y
[chromaFÜm©Idc]; 
	}
}

833 
Void
 
	$£tPicWidthInLumaSam¶es
Ð
UIÁ
 
u
 ) { 
m_picWidthInLumaSam¶es
 = u; 
	}
}

834 
UIÁ
 
	$g‘PicWidthInLumaSam¶es
(ècÚ¡ {  
m_picWidthInLumaSam¶es
; 
	}
}

835 
Void
 
	$£tPicHeightInLumaSam¶es
Ð
UIÁ
 
u
 ) { 
m_picHeightInLumaSam¶es
 = u; 
	}
}

836 
UIÁ
 
	$g‘PicHeightInLumaSam¶es
(ècÚ¡ {  
m_picHeightInLumaSam¶es
; 
	}
}

838 
	gWšdow
& 
	$g‘CÚfÜmªûWšdow
(è{  
m_cÚfÜmªûWšdow
; 
	}
}

839 cÚ¡ 
	gWšdow
& 
	$g‘CÚfÜmªûWšdow
(ècÚ¡ {  
m_cÚfÜmªûWšdow
; 
	}
}

840 
Void
 
	$£tCÚfÜmªûWšdow
(
Wšdow
& 
cÚfÜmªûWšdow
 ) { 
m_cÚfÜmªûWšdow
 = cÚfÜmªûWšdow; 
	}
}

842 
UIÁ
 
	$g‘NumLÚgT”mRefPicSPS
(ècÚ¡ {  
m_numLÚgT”mRefPicSPS
; 
	}
}

843 
Void
 
	$£tNumLÚgT”mRefPicSPS
(
UIÁ
 
v®
è{ 
m_numLÚgT”mRefPicSPS
 = v®; 
	}
}

845 
UIÁ
 
	$g‘LtRefPicPocLsbSps
(
UIÁ
 
šdex
ècÚ¡ { 
	`as£¹
Ðšdex < 
MAX_NUM_LONG_TERM_REF_PICS
 );  
m_ÉRefPicPocLsbSps
[šdex]; 
	}
}

846 
Void
 
	$£tLtRefPicPocLsbSps
(
UIÁ
 
šdex
, UIÁ 
v®
è{ 
	`as£¹
Ðšdex < 
MAX_NUM_LONG_TERM_REF_PICS
 ); 
m_ÉRefPicPocLsbSps
[šdex] = v®; 
	}
}

848 
BoÞ
 
	$g‘U£dByCu¼PicLtSPSFÏg
(
IÁ
 
i
ècÚ¡ { 
	`as£¹
Ð˜< 
MAX_NUM_LONG_TERM_REF_PICS
 );  
m_u£dByCu¼PicLtSPSFÏg
[i]; 
	}
}

849 
Void
 
	$£tU£dByCu¼PicLtSPSFÏg
(
IÁ
 
i
, 
BoÞ
 
x
è{ 
	`as£¹
Ð˜< 
MAX_NUM_LONG_TERM_REF_PICS
 ); 
m_u£dByCu¼PicLtSPSFÏg
[i] = x; 
	}
}

851 
IÁ
 
	$g‘Log2MšCodšgBlockSize
(ècÚ¡ {  
m_log2MšCodšgBlockSize
; 
	}
}

852 
Void
 
	$£tLog2MšCodšgBlockSize
(
IÁ
 
v®
è{ 
m_log2MšCodšgBlockSize
 = v®; 
	}
}

853 
IÁ
 
	$g‘Log2DiffMaxMšCodšgBlockSize
(ècÚ¡ {  
m_log2DiffMaxMšCodšgBlockSize
; 
	}
}

854 
Void
 
	$£tLog2DiffMaxMšCodšgBlockSize
(
IÁ
 
v®
è{ 
m_log2DiffMaxMšCodšgBlockSize
 = v®; 
	}
}

856 
Void
 
	$£tMaxCUWidth
Ð
UIÁ
 
u
 ) { 
m_uiMaxCUWidth
 = u; 
	}
}

857 
UIÁ
 
	$g‘MaxCUWidth
(ècÚ¡ {  
m_uiMaxCUWidth
; 
	}
}

858 
Void
 
	$£tMaxCUHeight
Ð
UIÁ
 
u
 ) { 
m_uiMaxCUHeight
 = u; 
	}
}

859 
UIÁ
 
	$g‘MaxCUHeight
(ècÚ¡ {  
m_uiMaxCUHeight
; 
	}
}

860 
Void
 
	$£tMaxTÙ®CUD•th
Ð
UIÁ
 
u
 ) { 
m_uiMaxTÙ®CUD•th
 = u; 
	}
}

861 
UIÁ
 
	$g‘MaxTÙ®CUD•th
(ècÚ¡ {  
m_uiMaxTÙ®CUD•th
; 
	}
}

862 
Void
 
	$£tU£PCM
Ð
BoÞ
 
b
 ) { 
m_u£PCM
 = b; 
	}
}

863 
BoÞ
 
	$g‘U£PCM
(ècÚ¡ {  
m_u£PCM
; 
	}
}

864 
Void
 
	$£tPCMLog2MaxSize
Ð
UIÁ
 
u
 ) { 
m_pcmLog2MaxSize
 = u; 
	}
}

865 
UIÁ
 
	$g‘PCMLog2MaxSize
(ècÚ¡ {  
m_pcmLog2MaxSize
; 
	}
}

866 
Void
 
	$£tPCMLog2MšSize
Ð
UIÁ
 
u
 ) { 
m_uiPCMLog2MšSize
 = u; 
	}
}

867 
UIÁ
 
	$g‘PCMLog2MšSize
(ècÚ¡ {  
m_uiPCMLog2MšSize
; 
	}
}

868 
Void
 
	$£tB™sFÜPOC
Ð
UIÁ
 
u
 ) { 
m_uiB™sFÜPOC
 = u; 
	}
}

869 
UIÁ
 
	$g‘B™sFÜPOC
(ècÚ¡ {  
m_uiB™sFÜPOC
; 
	}
}

870 
BoÞ
 
	$g‘U£AMP
(ècÚ¡ {  
m_u£AMP
; 
	}
}

871 
Void
 
	$£tU£AMP
Ð
BoÞ
 
b
 ) { 
m_u£AMP
 = b; 
	}
}

872 
Void
 
	$£tQuadŒ“TULog2MaxSize
Ð
UIÁ
 
u
 ) { 
m_uiQuadŒ“TULog2MaxSize
 = u; 
	}
}

873 
UIÁ
 
	$g‘QuadŒ“TULog2MaxSize
(ècÚ¡ {  
m_uiQuadŒ“TULog2MaxSize
; 
	}
}

874 
Void
 
	$£tQuadŒ“TULog2MšSize
Ð
UIÁ
 
u
 ) { 
m_uiQuadŒ“TULog2MšSize
 = u; 
	}
}

875 
UIÁ
 
	$g‘QuadŒ“TULog2MšSize
(ècÚ¡ {  
m_uiQuadŒ“TULog2MšSize
; 
	}
}

876 
Void
 
	$£tQuadŒ“TUMaxD•thIÁ”
Ð
UIÁ
 
u
 ) { 
m_uiQuadŒ“TUMaxD•thIÁ”
 = u; 
	}
}

877 
Void
 
	$£tQuadŒ“TUMaxD•thIÁ¿
Ð
UIÁ
 
u
 ) { 
m_uiQuadŒ“TUMaxD•thIÁ¿
 = u; 
	}
}

878 
UIÁ
 
	$g‘QuadŒ“TUMaxD•thIÁ”
(ècÚ¡ {  
m_uiQuadŒ“TUMaxD•thIÁ”
; 
	}
}

879 
UIÁ
 
	$g‘QuadŒ“TUMaxD•thIÁ¿
(ècÚ¡ {  
m_uiQuadŒ“TUMaxD•thIÁ¿
; 
	}
}

880 
Void
 
	$£tNumReÜd”Pics
(
IÁ
 
i
, 
UIÁ
 
Žay”
è{ 
m_numReÜd”Pics
[Žay”] = i; 
	}
}

881 
IÁ
 
	$g‘NumReÜd”Pics
(
UIÁ
 
Žay”
ècÚ¡ {  
m_numReÜd”Pics
[Žay”]; 
	}
}

882 
Void
 
ü—‹RPSLi¡
Ð
IÁ
 
numRPS
 );

883 cÚ¡ 
TComRPSLi¡
* 
	$g‘RPSLi¡
(ècÚ¡ {  &
m_RPSLi¡
; 
	}
}

884 
TComRPSLi¡
* 
	$g‘RPSLi¡
(è{  &
m_RPSLi¡
; 
	}
}

885 
BoÞ
 
	$g‘LÚgT”mRefsP»£Á
(ècÚ¡ {  
m_bLÚgT”mRefsP»£Á
; 
	}
}

886 
Void
 
	$£tLÚgT”mRefsP»£Á
(
BoÞ
 
b
è{ 
m_bLÚgT”mRefsP»£Á
=b; 
	}
}

887 
BoÞ
 
	$g‘SPSTempÜ®MVPEÇbËdFÏg
(ècÚ¡ {  
m_SPSTempÜ®MVPEÇbËdFÏg
; 
	}
}

888 
Void
 
	$£tSPSTempÜ®MVPEÇbËdFÏg
(
BoÞ
 
b
è{ 
m_SPSTempÜ®MVPEÇbËdFÏg
=b; 
	}
}

890 
Void
 
	$£tMaxTrSize
Ð
UIÁ
 
u
 ) { 
m_uiMaxTrSize
 = u; 
	}
}

891 
UIÁ
 
	$g‘MaxTrSize
(ècÚ¡ {  
m_uiMaxTrSize
; 
	}
}

894 
IÁ
 
	$g‘B™D•th
(
ChªÃlTy³
 
ty³
ècÚ¡ {  
m_b™D•ths
.
»cÚ
[ty³]; 
	}
}

895 
Void
 
	$£tB™D•th
(
ChªÃlTy³
 
ty³
, 
IÁ
 
u
 ) { 
m_b™D•ths
.
»cÚ
[ty³] = u; 
	}
}

896 #ià
O0043_BEST_EFFORT_DECODING


897 
IÁ
 
	$g‘SŒ—mB™D•th
(
ChªÃlTy³
 
ty³
ècÚ¡ {  
m_b™D•ths
.
¡»am
[ty³]; 
	}
}

898 
Void
 
	$£tSŒ—mB™D•th
(
ChªÃlTy³
 
ty³
, 
IÁ
 
u
 ) { 
m_b™D•ths
.
¡»am
[ty³] = u; 
	}
}

900 cÚ¡ 
	gB™D•ths
& 
	$g‘B™D•ths
(ècÚ¡ {  
m_b™D•ths
; 
	}
}

901 
IÁ
 
	$g‘MaxLog2TrDyÇmicRªge
(
ChªÃlTy³
 
chªÃlTy³
ècÚ¡ {  
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
(è? 
¡d
::
max
<
IÁ
>(15, 
	`IÁ
(
m_b™D•ths
.
»cÚ
[chªÃlTy³] + 6)è: 15; 
	}
}

903 
IÁ
 
	$g‘Difã»ÁŸlLumaChromaB™D•th
(ècÚ¡ {  
	`IÁ
(
m_b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
]è- IÁ(m_b™D•ths.»cÚ[
CHANNEL_TYPE_CHROMA
]); 
	}
}

904 
IÁ
 
	$g‘QpBDOff£t
(
ChªÃlTy³
 
ty³
ècÚ¡ {  
m_qpBDOff£t
[ty³]; 
	}
}

905 
Void
 
	$£tQpBDOff£t
(
ChªÃlTy³
 
ty³
, 
IÁ
 
i
è{ 
m_qpBDOff£t
[ty³] = i; 
	}
}

907 
Void
 
	$£tU£SAO
(
BoÞ
 
bV®
è{ 
m_bU£SAO
 = bV®; 
	}
}

908 
BoÞ
 
	$g‘U£SAO
(ècÚ¡ {  
m_bU£SAO
; 
	}
}

910 
UIÁ
 
	$g‘MaxTLay”s
(ècÚ¡ {  
m_uiMaxTLay”s
; 
	}
}

911 
Void
 
	$£tMaxTLay”s
Ð
UIÁ
 
uiMaxTLay”s
 ) { 
	`as£¹
ÐuiMaxTLay” <ð
MAX_TLAYER
 ); 
m_uiMaxTLay”s
 = uiMaxTLay”s; 
	}
}

913 
BoÞ
 
	$g‘TempÜ®IdNe¡šgFÏg
(ècÚ¡ {  
m_bTempÜ®IdNe¡šgFÏg
; 
	}
}

914 
Void
 
	$£tTempÜ®IdNe¡šgFÏg
Ð
BoÞ
 
bV®ue
 ) { 
m_bTempÜ®IdNe¡šgFÏg
 = bV®ue; 
	}
}

915 
UIÁ
 
	$g‘PCMB™D•th
(
ChªÃlTy³
 
ty³
ècÚ¡ {  
m_pcmB™D•ths
[ty³]; 
	}
}

916 
Void
 
	$£tPCMB™D•th
(
ChªÃlTy³
 
ty³
, 
UIÁ
 
u
è{ 
m_pcmB™D•ths
[ty³] = u; 
	}
}

917 
Void
 
	$£tPCMFž‹rDi§bËFÏg
Ð
BoÞ
 
bV®ue
 ) { 
m_bPCMFž‹rDi§bËFÏg
 = bV®ue; 
	}
}

918 
BoÞ
 
	$g‘PCMFž‹rDi§bËFÏg
(ècÚ¡ {  
m_bPCMFž‹rDi§bËFÏg
; 
	}
}

920 
BoÞ
 
	$g‘SÿlšgLi¡FÏg
(ècÚ¡ {  
m_sÿlšgLi¡EÇbËdFÏg
; 
	}
}

921 
Void
 
	$£tSÿlšgLi¡FÏg
Ð
BoÞ
 
b
 ) { 
m_sÿlšgLi¡EÇbËdFÏg
 = b; 
	}
}

922 
BoÞ
 
	$g‘SÿlšgLi¡P»£ÁFÏg
(ècÚ¡ {  
m_sÿlšgLi¡P»£ÁFÏg
; 
	}
}

923 
Void
 
	$£tSÿlšgLi¡P»£ÁFÏg
Ð
BoÞ
 
b
 ) { 
m_sÿlšgLi¡P»£ÁFÏg
 = b; 
	}
}

924 
	gTComSÿlšgLi¡
& 
	$g‘SÿlšgLi¡
(è{  
m_sÿlšgLi¡
; 
	}
}

925 cÚ¡ 
	gTComSÿlšgLi¡
& 
	$g‘SÿlšgLi¡
(ècÚ¡ {  
m_sÿlšgLi¡
; 
	}
}

926 
UIÁ
 
	$g‘MaxDecPicBufãršg
(
UIÁ
 
Žay”
ècÚ¡ {  
m_uiMaxDecPicBufãršg
[Žay”]; 
	}
}

927 
Void
 
	$£tMaxDecPicBufãršg
Ð
UIÁ
 
ui
, UIÁ 
Žay”
 ) { 
	`as£¹
ÑÏy” < 
MAX_TLAYER
); 
m_uiMaxDecPicBufãršg
[Žay”] = ui; 
	}
}

928 
UIÁ
 
	$g‘MaxL©’cyInü—£Plus1
(
UIÁ
 
Žay”
ècÚ¡ {  
m_uiMaxL©’cyInü—£Plus1
[Žay”]; 
	}
}

929 
Void
 
	$£tMaxL©’cyInü—£Plus1
Ð
UIÁ
 
ui
 , UIÁ 
Žay”
è{ 
m_uiMaxL©’cyInü—£Plus1
[Žay”] = ui; 
	}
}

931 
Void
 
	$£tU£SŒÚgIÁ¿SmoÙhšg
(
BoÞ
 
bV®
è{ 
m_u£SŒÚgIÁ¿SmoÙhšg
 = bV®; 
	}
}

932 
BoÞ
 
	$g‘U£SŒÚgIÁ¿SmoÙhšg
(ècÚ¡ {  
m_u£SŒÚgIÁ¿SmoÙhšg
; 
	}
}

934 
BoÞ
 
	$g‘VuiP¬am‘”sP»£ÁFÏg
(ècÚ¡ {  
m_vuiP¬am‘”sP»£ÁFÏg
; 
	}
}

935 
Void
 
	$£tVuiP¬am‘”sP»£ÁFÏg
(
BoÞ
 
b
è{ 
m_vuiP¬am‘”sP»£ÁFÏg
 = b; 
	}
}

936 
TComVUI
* 
	$g‘VuiP¬am‘”s
(è{  &
m_vuiP¬am‘”s
; 
	}
}

937 cÚ¡ 
TComVUI
* 
	$g‘VuiP¬am‘”s
(ècÚ¡ {  &
m_vuiP¬am‘”s
; 
	}
}

938 cÚ¡ 
TComPTL
* 
	$g‘PTL
(ècÚ¡ {  &
m_pcPTL
; 
	}
}

939 
TComPTL
* 
	$g‘PTL
(è{  &
m_pcPTL
; 
	}
}

941 cÚ¡ 
	gTComSPSRExt
& 
	$g‘SpsRªgeEx‹nsiÚ
(ècÚ¡ {  
m_¥sRªgeEx‹nsiÚ
; 
	}
}

942 
	gTComSPSRExt
& 
	$g‘SpsRªgeEx‹nsiÚ
(è{  
m_¥sRªgeEx‹nsiÚ
; 
	}
}

948 þas 
	cTComRefPicLi¡ModifiÿtiÚ


950 
	m´iv©e
:

951 
BoÞ
 
m_»fPicLi¡ModifiÿtiÚFÏgL0
;

952 
BoÞ
 
	mm_»fPicLi¡ModifiÿtiÚFÏgL1
;

953 
UIÁ
 
	mm_RefPicS‘IdxL0
[
REF_PIC_LIST_NUM_IDX
];

954 
UIÁ
 
	mm_RefPicS‘IdxL1
[
REF_PIC_LIST_NUM_IDX
];

956 
	mpublic
:

957 
TComRefPicLi¡ModifiÿtiÚ
();

958 
	mvœtu®
 ~
TComRefPicLi¡ModifiÿtiÚ
();

960 
BoÞ
 
	$g‘RefPicLi¡ModifiÿtiÚFÏgL0
(ècÚ¡ {  
m_»fPicLi¡ModifiÿtiÚFÏgL0
; }

961 
Void
 
	$£tRefPicLi¡ModifiÿtiÚFÏgL0
(
BoÞ
 
æag
è{ 
m_»fPicLi¡ModifiÿtiÚFÏgL0
 = fÏg; 
	}
}

962 
BoÞ
 
	$g‘RefPicLi¡ModifiÿtiÚFÏgL1
(ècÚ¡ {  
m_»fPicLi¡ModifiÿtiÚFÏgL1
; 
	}
}

963 
Void
 
	$£tRefPicLi¡ModifiÿtiÚFÏgL1
(
BoÞ
 
æag
è{ 
m_»fPicLi¡ModifiÿtiÚFÏgL1
 = fÏg; 
	}
}

964 
UIÁ
 
	$g‘RefPicS‘IdxL0
(
UIÁ
 
idx
ècÚ¡ { 
	`as£¹
(idx<
REF_PIC_LIST_NUM_IDX
);  
m_RefPicS‘IdxL0
[idx]; 
	}
}

965 
Void
 
	$£tRefPicS‘IdxL0
(
UIÁ
 
idx
, UIÁ 
»fPicS‘Idx
è{ 
	`as£¹
(idx<
REF_PIC_LIST_NUM_IDX
); 
m_RefPicS‘IdxL0
[idx] =„efPicS‘Idx; 
	}
}

966 
UIÁ
 
	$g‘RefPicS‘IdxL1
(
UIÁ
 
idx
ècÚ¡ { 
	`as£¹
(idx<
REF_PIC_LIST_NUM_IDX
);  
m_RefPicS‘IdxL1
[idx]; 
	}
}

967 
Void
 
	$£tRefPicS‘IdxL1
(
UIÁ
 
idx
, UIÁ 
»fPicS‘Idx
è{ 
	`as£¹
(idx<
REF_PIC_LIST_NUM_IDX
); 
m_RefPicS‘IdxL1
[idx] =„efPicS‘Idx; 
	}
}

973 þas 
	cTComPPSRExt


975 
	m´iv©e
:

976 
IÁ
 
m_log2MaxT¿nsfÜmSkBlockSize
;

977 
BoÞ
 
	mm_üossCompÚ’tP»diùiÚEÇbËdFÏg
;

980 
IÁ
 
	mm_diffCuChromaQpOff£tD•th
;

981 
IÁ
 
	mm_chromaQpOff£tLi¡L’
;

982 
ChromaQpAdj
 
	mm_ChromaQpAdjTabËInþudšgNuÎEÁry
[1+
MAX_QP_OFFSET_LIST_SIZE
];

984 
UIÁ
 
	mm_log2SaoOff£tSÿË
[
MAX_NUM_CHANNEL_TYPE
];

986 
	mpublic
:

987 
TComPPSRExt
();

989 
BoÞ
 
	$£‰šgsDifãrFromDeçuÉs
(cÚ¡ 
boÞ
 
bT¿nsfÜmSkEÇbËdFÏg
) const

991  (
bT¿nsfÜmSkEÇbËdFÏg
 && (
	`g‘Log2MaxT¿nsfÜmSkBlockSize
() !=2))

992 || (
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
() )

993 || (
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
() )

994 || (
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
) !=0 )

995 || (
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_CHROMA
) !=0 );

998 
UIÁ
 
	$g‘Log2MaxT¿nsfÜmSkBlockSize
(ècÚ¡ {  
m_log2MaxT¿nsfÜmSkBlockSize
; 
	}
}

999 
Void
 
	$£tLog2MaxT¿nsfÜmSkBlockSize
Ð
UIÁ
 
u
 ) { 
m_log2MaxT¿nsfÜmSkBlockSize
 = u; 
	}
}

1001 
BoÞ
 
	$g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
(ècÚ¡ {  
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
; 
	}
}

1002 
Void
 
	$£tCrossCompÚ’tP»diùiÚEÇbËdFÏg
(
BoÞ
 
v®ue
è{ 
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 = v®ue; 
	}
}

1004 
Void
 
	$þ—rChromaQpOff£tLi¡
(è{ 
m_chromaQpOff£tLi¡L’
 = 0; 
	}
}

1006 
UIÁ
 
	$g‘DiffCuChromaQpOff£tD•th
 (ècÚ¡ {  
m_diffCuChromaQpOff£tD•th
; 
	}
}

1007 
Void
 
	$£tDiffCuChromaQpOff£tD•th
 ( 
UIÁ
 
u
 ) { 
m_diffCuChromaQpOff£tD•th
 = u; 
	}
}

1009 
BoÞ
 
	$g‘ChromaQpOff£tLi¡EÇbËdFÏg
(ècÚ¡ {  
	`g‘ChromaQpOff£tLi¡L’
()>0; 
	}
}

1010 
IÁ
 
	$g‘ChromaQpOff£tLi¡L’
(ècÚ¡ {  
m_chromaQpOff£tLi¡L’
; 
	}
}

1012 cÚ¡ 
	gChromaQpAdj
& 
	$g‘ChromaQpOff£tLi¡EÁry
Ð
IÁ
 
cuChromaQpOff£tIdxPlus1
 ) const

1014 
	`as£¹
(
cuChromaQpOff£tIdxPlus1
 < 
m_chromaQpOff£tLi¡L’
+1);

1015  
m_ChromaQpAdjTabËInþudšgNuÎEÁry
[
cuChromaQpOff£tIdxPlus1
];

1016 
	}
}

1018 
Void
 
	$£tChromaQpOff£tLi¡EÁry
Ð
IÁ
 
cuChromaQpOff£tIdxPlus1
, IÁ 
cbOff£t
, IÁ 
üOff£t
 )

1020 
	`as£¹
 (
cuChromaQpOff£tIdxPlus1
 !ð0 && cuChromaQpOff£tIdxPlus1 <ð
MAX_QP_OFFSET_LIST_SIZE
);

1021 
m_ChromaQpAdjTabËInþudšgNuÎEÁry
[
cuChromaQpOff£tIdxPlus1
].
u
.
comp
.
CbOff£t
 = 
cbOff£t
;

1022 
m_ChromaQpAdjTabËInþudšgNuÎEÁry
[
cuChromaQpOff£tIdxPlus1
].
u
.
comp
.
CrOff£t
 = 
üOff£t
;

1023 
m_chromaQpOff£tLi¡L’
 = 
	`max
(m_chromaQpOff£tLi¡L’, 
cuChromaQpOff£tIdxPlus1
);

1024 
	}
}

1027 
UIÁ
 
	$g‘Log2SaoOff£tSÿË
(
ChªÃlTy³
 
ty³
ècÚ¡ {  
m_log2SaoOff£tSÿË
[ty³]; 
	}
}

1028 
Void
 
	$£tLog2SaoOff£tSÿË
(
ChªÃlTy³
 
ty³
, 
UIÁ
 
uiB™Shiá
è{ 
m_log2SaoOff£tSÿË
[ty³] = uiB™Shiá; 
	}
}

1034 þas 
	cTComPPS


1036 
	m´iv©e
:

1037 
IÁ
 
m_PPSId
;

1038 
IÁ
 
	mm_SPSId
;

1039 
IÁ
 
	mm_picIn™QPMšus26
;

1040 
BoÞ
 
	mm_u£DQP
;

1041 
BoÞ
 
	mm_bCÚ¡¿šedIÁ¿P»d
;

1042 
BoÞ
 
	mm_bSliûChromaQpFÏg
;

1045 
UIÁ
 
	mm_uiMaxCuDQPD•th
;

1047 
IÁ
 
	mm_chromaCbQpOff£t
;

1048 
IÁ
 
	mm_chromaCrQpOff£t
;

1050 
UIÁ
 
	mm_numRefIdxL0DeçuÉAùive
;

1051 
UIÁ
 
	mm_numRefIdxL1DeçuÉAùive
;

1053 
BoÞ
 
	mm_bU£WeightP»d
;

1054 
BoÞ
 
	mm_u£Weigh‹dBiP»d
;

1055 
BoÞ
 
	mm_OuutFÏgP»£ÁFÏg
;

1056 
BoÞ
 
	mm_T¿nsquªtBy·ssEÇbËdFÏg
;

1057 
BoÞ
 
	mm_u£T¿nsfÜmSk
;

1058 
BoÞ
 
	mm_d•’d’tSliûSegm’tsEÇbËdFÏg
;

1059 
BoÞ
 
	mm_tžesEÇbËdFÏg
;

1060 
BoÞ
 
	mm_’ŒÝyCodšgSyncEÇbËdFÏg
;

1062 
BoÞ
 
	mm_loÝFž‹rAüossTžesEÇbËdFÏg
;

1063 
BoÞ
 
	mm_unifÜmS·cšgFÏg
;

1064 
IÁ
 
	mm_numTžeCÞumnsMšus1
;

1065 
IÁ
 
	mm_numTžeRowsMšus1
;

1066 
	m¡d
::
veùÜ
<
IÁ
> 
m_tžeCÞumnWidth
;

1067 
	m¡d
::
veùÜ
<
IÁ
> 
m_tžeRowHeight
;

1069 
BoÞ
 
	mm_signD©aHidšgEÇbËdFÏg
;

1071 
BoÞ
 
	mm_ÿbacIn™P»£ÁFÏg
;

1073 
BoÞ
 
	mm_¦iûH—d”Ex‹nsiÚP»£ÁFÏg
;

1074 
BoÞ
 
	mm_loÝFž‹rAüossSliûsEÇbËdFÏg
;

1075 
BoÞ
 
	mm_deblockšgFž‹rCÚŒÞP»£ÁFÏg
;

1076 
BoÞ
 
	mm_deblockšgFž‹rOv”rideEÇbËdFÏg
;

1077 
BoÞ
 
	mm_µsDeblockšgFž‹rDi§bËdFÏg
;

1078 
IÁ
 
	mm_deblockšgFž‹rB‘aOff£tDiv2
;

1079 
IÁ
 
	mm_deblockšgFž‹rTcOff£tDiv2
;

1080 
BoÞ
 
	mm_sÿlšgLi¡P»£ÁFÏg
;

1081 
TComSÿlšgLi¡
 
	mm_sÿlšgLi¡
;

1082 
BoÞ
 
	mm_li¡sModifiÿtiÚP»£ÁFÏg
;

1083 
UIÁ
 
	mm_log2P¬®ËlM”geLev–Mšus2
;

1084 
IÁ
 
	mm_numExŒaSliûH—d”B™s
;

1086 
TComPPSRExt
 
	mm_µsRªgeEx‹nsiÚ
;

1088 
	mpublic
:

1089 
TComPPS
();

1090 
	mvœtu®
 ~
TComPPS
();

1092 
IÁ
 
	$g‘PPSId
(ècÚ¡ {  
m_PPSId
; }

1093 
Void
 
	$£tPPSId
(
IÁ
 
i
è{ 
m_PPSId
 = i; 
	}
}

1094 
IÁ
 
	$g‘SPSId
(ècÚ¡ {  
m_SPSId
; 
	}
}

1095 
Void
 
	$£tSPSId
(
IÁ
 
i
è{ 
m_SPSId
 = i; 
	}
}

1097 
IÁ
 
	$g‘PicIn™QPMšus26
(ècÚ¡ {  
m_picIn™QPMšus26
; 
	}
}

1098 
Void
 
	$£tPicIn™QPMšus26
Ð
IÁ
 
i
 ) { 
m_picIn™QPMšus26
 = i; 
	}
}

1099 
BoÞ
 
	$g‘U£DQP
(ècÚ¡ {  
m_u£DQP
; 
	}
}

1100 
Void
 
	$£tU£DQP
Ð
BoÞ
 
b
 ) { 
m_u£DQP
 = b; 
	}
}

1101 
BoÞ
 
	$g‘CÚ¡¿šedIÁ¿P»d
(ècÚ¡ {  
m_bCÚ¡¿šedIÁ¿P»d
; 
	}
}

1102 
Void
 
	$£tCÚ¡¿šedIÁ¿P»d
Ð
BoÞ
 
b
 ) { 
m_bCÚ¡¿šedIÁ¿P»d
 = b; 
	}
}

1103 
BoÞ
 
	$g‘SliûChromaQpFÏg
(ècÚ¡ {  
m_bSliûChromaQpFÏg
; 
	}
}

1104 
Void
 
	$£tSliûChromaQpFÏg
Ð
BoÞ
 
b
 ) { 
m_bSliûChromaQpFÏg
 = b; 
	}
}

1106 
Void
 
	$£tMaxCuDQPD•th
Ð
UIÁ
 
u
 ) { 
m_uiMaxCuDQPD•th
 = u; 
	}
}

1107 
UIÁ
 
	$g‘MaxCuDQPD•th
(ècÚ¡ {  
m_uiMaxCuDQPD•th
; 
	}
}

1109 
Void
 
	$£tQpOff£t
(
CompÚ’tID
 
compID
, 
IÁ
 
i
 )

1111 ià(
compID
==
COMPONENT_Cb
)

1113 
m_chromaCbQpOff£t
 = 
i
;

1115 ià(
compID
==
COMPONENT_Cr
)

1117 
m_chromaCrQpOff£t
 = 
i
;

1121 
	`as£¹
(0);

1123 
	}
}

1124 
IÁ
 
	$g‘QpOff£t
(
CompÚ’tID
 
compID
) const

1126  (
compID
==
COMPONENT_Y
è? 0 : (compID==
COMPONENT_Cb
 ? 
m_chromaCbQpOff£t
 : 
m_chromaCrQpOff£t
 );

1127 
	}
}

1129 
Void
 
	$£tNumRefIdxL0DeçuÉAùive
(
UIÁ
 
ui
è{ 
m_numRefIdxL0DeçuÉAùive
=ui; 
	}
}

1130 
UIÁ
 
	$g‘NumRefIdxL0DeçuÉAùive
(ècÚ¡ {  
m_numRefIdxL0DeçuÉAùive
; 
	}
}

1131 
Void
 
	$£tNumRefIdxL1DeçuÉAùive
(
UIÁ
 
ui
è{ 
m_numRefIdxL1DeçuÉAùive
=ui; 
	}
}

1132 
UIÁ
 
	$g‘NumRefIdxL1DeçuÉAùive
(ècÚ¡ {  
m_numRefIdxL1DeçuÉAùive
; 
	}
}

1134 
BoÞ
 
	$g‘U£WP
(ècÚ¡ {  
m_bU£WeightP»d
; 
	}
}

1135 
BoÞ
 
	$g‘WPBiP»d
(ècÚ¡ {  
m_u£Weigh‹dBiP»d
; 
	}
}

1136 
Void
 
	$£tU£WP
Ð
BoÞ
 
b
 ) { 
m_bU£WeightP»d
 = b; 
	}
}

1137 
Void
 
	$£tWPBiP»d
Ð
BoÞ
 
b
 ) { 
m_u£Weigh‹dBiP»d
 = b; 
	}
}

1139 
Void
 
	$£tOuutFÏgP»£ÁFÏg
Ð
BoÞ
 
b
 ) { 
m_OuutFÏgP»£ÁFÏg
 = b; 
	}
}

1140 
BoÞ
 
	$g‘OuutFÏgP»£ÁFÏg
(ècÚ¡ {  
m_OuutFÏgP»£ÁFÏg
; 
	}
}

1141 
Void
 
	$£tT¿nsquªtBy·ssEÇbËdFÏg
Ð
BoÞ
 
b
 ) { 
m_T¿nsquªtBy·ssEÇbËdFÏg
 = b; 
	}
}

1142 
BoÞ
 
	$g‘T¿nsquªtBy·ssEÇbËdFÏg
(ècÚ¡ {  
m_T¿nsquªtBy·ssEÇbËdFÏg
; 
	}
}

1144 
BoÞ
 
	$g‘U£T¿nsfÜmSk
(ècÚ¡ {  
m_u£T¿nsfÜmSk
; 
	}
}

1145 
Void
 
	$£tU£T¿nsfÜmSk
Ð
BoÞ
 
b
 ) { 
m_u£T¿nsfÜmSk
 = b; 
	}
}

1147 
Void
 
	$£tLoÝFž‹rAüossTžesEÇbËdFÏg
(
BoÞ
 
b
è{ 
m_loÝFž‹rAüossTžesEÇbËdFÏg
 = b; 
	}
}

1148 
BoÞ
 
	$g‘LoÝFž‹rAüossTžesEÇbËdFÏg
(ècÚ¡ {  
m_loÝFž‹rAüossTžesEÇbËdFÏg
; 
	}
}

1149 
BoÞ
 
	$g‘D•’d’tSliûSegm’tsEÇbËdFÏg
(ècÚ¡ {  
m_d•’d’tSliûSegm’tsEÇbËdFÏg
; 
	}
}

1150 
Void
 
	$£tD•’d’tSliûSegm’tsEÇbËdFÏg
(
BoÞ
 
v®
è{ 
m_d•’d’tSliûSegm’tsEÇbËdFÏg
 = v®; 
	}
}

1151 
BoÞ
 
	$g‘EÁrÝyCodšgSyncEÇbËdFÏg
(ècÚ¡ {  
m_’ŒÝyCodšgSyncEÇbËdFÏg
; 
	}
}

1152 
Void
 
	$£tEÁrÝyCodšgSyncEÇbËdFÏg
(
BoÞ
 
v®
è{ 
m_’ŒÝyCodšgSyncEÇbËdFÏg
 = v®; 
	}
}

1154 
Void
 
	$£tTžesEÇbËdFÏg
(
BoÞ
 
v®
è{ 
m_tžesEÇbËdFÏg
 = v®; 
	}
}

1155 
BoÞ
 
	$g‘TžesEÇbËdFÏg
(ècÚ¡ {  
m_tžesEÇbËdFÏg
; 
	}
}

1156 
Void
 
	$£tTžeUnifÜmS·cšgFÏg
(
BoÞ
 
b
è{ 
m_unifÜmS·cšgFÏg
 = b; 
	}
}

1157 
BoÞ
 
	$g‘TžeUnifÜmS·cšgFÏg
(ècÚ¡ {  
m_unifÜmS·cšgFÏg
; 
	}
}

1158 
Void
 
	$£tNumTžeCÞumnsMšus1
(
IÁ
 
i
è{ 
m_numTžeCÞumnsMšus1
 = i; 
	}
}

1159 
IÁ
 
	$g‘NumTžeCÞumnsMšus1
(ècÚ¡ {  
m_numTžeCÞumnsMšus1
; 
	}
}

1160 
Void
 
£tTžeCÞumnWidth
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
cÞumnWidth
 ) { 
m_tžeCÞumnWidth
 = columnWidth; }

1161 
UIÁ
 
	$g‘TžeCÞumnWidth
(
UIÁ
 
cÞumnIdx
ècÚ¡ {  
m_tžeCÞumnWidth
[cÞumnIdx]; 
	}
}

1162 
Void
 
	$£tNumTžeRowsMšus1
(
IÁ
 
i
è{ 
m_numTžeRowsMšus1
 = i; 
	}
}

1163 
IÁ
 
	$g‘NumTžeRowsMšus1
(ècÚ¡ {  
m_numTžeRowsMšus1
; 
	}
}

1164 
Void
 
£tTžeRowHeight
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
rowHeight
è{ 
m_tžeRowHeight
 =„owHeight; }

1165 
UIÁ
 
	$g‘TžeRowHeight
(
UIÁ
 
rowIdx
ècÚ¡ {  
m_tžeRowHeight
[rowIdx]; 
	}
}

1167 
Void
 
	$£tSignD©aHidšgEÇbËdFÏg
Ð
BoÞ
 
b
 ) { 
m_signD©aHidšgEÇbËdFÏg
 = b; 
	}
}

1168 
BoÞ
 
	$g‘SignD©aHidšgEÇbËdFÏg
(ècÚ¡ {  
m_signD©aHidšgEÇbËdFÏg
; 
	}
}

1170 
Void
 
	$£tCabacIn™P»£ÁFÏg
Ð
BoÞ
 
æag
 ) { 
m_ÿbacIn™P»£ÁFÏg
 = fÏg; 
	}
}

1171 
BoÞ
 
	$g‘CabacIn™P»£ÁFÏg
(ècÚ¡ {  
m_ÿbacIn™P»£ÁFÏg
; 
	}
}

1172 
Void
 
	$£tDeblockšgFž‹rCÚŒÞP»£ÁFÏg
Ð
BoÞ
 
v®
 ) { 
m_deblockšgFž‹rCÚŒÞP»£ÁFÏg
 = v®; 
	}
}

1173 
BoÞ
 
	$g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
(ècÚ¡ {  
m_deblockšgFž‹rCÚŒÞP»£ÁFÏg
; 
	}
}

1174 
Void
 
	$£tDeblockšgFž‹rOv”rideEÇbËdFÏg
Ð
BoÞ
 
v®
 ) { 
m_deblockšgFž‹rOv”rideEÇbËdFÏg
 = v®; 
	}
}

1175 
BoÞ
 
	$g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
(ècÚ¡ {  
m_deblockšgFž‹rOv”rideEÇbËdFÏg
; 
	}
}

1176 
Void
 
	$£tPPSDeblockšgFž‹rDi§bËdFÏg
(
BoÞ
 
v®
è{ 
m_µsDeblockšgFž‹rDi§bËdFÏg
 = v®; 
	}
}

1177 
BoÞ
 
	$g‘PPSDeblockšgFž‹rDi§bËdFÏg
(ècÚ¡ {  
m_µsDeblockšgFž‹rDi§bËdFÏg
; 
	}
}

1178 
Void
 
	$£tDeblockšgFž‹rB‘aOff£tDiv2
(
IÁ
 
v®
è{ 
m_deblockšgFž‹rB‘aOff£tDiv2
 = v®; 
	}
}

1179 
IÁ
 
	$g‘DeblockšgFž‹rB‘aOff£tDiv2
(ècÚ¡ {  
m_deblockšgFž‹rB‘aOff£tDiv2
; 
	}
}

1180 
Void
 
	$£tDeblockšgFž‹rTcOff£tDiv2
(
IÁ
 
v®
è{ 
m_deblockšgFž‹rTcOff£tDiv2
 = v®; 
	}
}

1181 
IÁ
 
	$g‘DeblockšgFž‹rTcOff£tDiv2
(ècÚ¡ {  
m_deblockšgFž‹rTcOff£tDiv2
; 
	}
}

1182 
BoÞ
 
	$g‘SÿlšgLi¡P»£ÁFÏg
(ècÚ¡ {  
m_sÿlšgLi¡P»£ÁFÏg
; 
	}
}

1183 
Void
 
	$£tSÿlšgLi¡P»£ÁFÏg
Ð
BoÞ
 
b
 ) { 
m_sÿlšgLi¡P»£ÁFÏg
 = b; 
	}
}

1184 
	gTComSÿlšgLi¡
& 
	$g‘SÿlšgLi¡
(è{  
m_sÿlšgLi¡
; 
	}
}

1185 cÚ¡ 
	gTComSÿlšgLi¡
& 
	$g‘SÿlšgLi¡
(ècÚ¡ {  
m_sÿlšgLi¡
; 
	}
}

1186 
BoÞ
 
	$g‘Li¡sModifiÿtiÚP»£ÁFÏg
(ècÚ¡ {  
m_li¡sModifiÿtiÚP»£ÁFÏg
; 
	}
}

1187 
Void
 
	$£tLi¡sModifiÿtiÚP»£ÁFÏg
Ð
BoÞ
 
b
 ) { 
m_li¡sModifiÿtiÚP»£ÁFÏg
 = b; 
	}
}

1188 
UIÁ
 
	$g‘Log2P¬®ËlM”geLev–Mšus2
(ècÚ¡ {  
m_log2P¬®ËlM”geLev–Mšus2
; 
	}
}

1189 
Void
 
	$£tLog2P¬®ËlM”geLev–Mšus2
(
UIÁ
 
mrgLev–
è{ 
m_log2P¬®ËlM”geLev–Mšus2
 = mrgLev–; 
	}
}

1190 
IÁ
 
	$g‘NumExŒaSliûH—d”B™s
(ècÚ¡ {  
m_numExŒaSliûH—d”B™s
; 
	}
}

1191 
Void
 
	$£tNumExŒaSliûH—d”B™s
(
IÁ
 
i
è{ 
m_numExŒaSliûH—d”B™s
 = i; 
	}
}

1192 
Void
 
	$£tLoÝFž‹rAüossSliûsEÇbËdFÏg
Ð
BoÞ
 
bV®ue
 ) { 
m_loÝFž‹rAüossSliûsEÇbËdFÏg
 = bV®ue; 
	}
}

1193 
BoÞ
 
	$g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
(ècÚ¡ {  
m_loÝFž‹rAüossSliûsEÇbËdFÏg
; 
	}
}

1194 
BoÞ
 
	$g‘SliûH—d”Ex‹nsiÚP»£ÁFÏg
(ècÚ¡ {  
m_¦iûH—d”Ex‹nsiÚP»£ÁFÏg
; 
	}
}

1195 
Void
 
	$£tSliûH—d”Ex‹nsiÚP»£ÁFÏg
(
BoÞ
 
v®
è{ 
m_¦iûH—d”Ex‹nsiÚP»£ÁFÏg
 = v®; 
	}
}

1197 cÚ¡ 
	gTComPPSRExt
& 
	$g‘PpsRªgeEx‹nsiÚ
(ècÚ¡ {  
m_µsRªgeEx‹nsiÚ
; 
	}
}

1198 
	gTComPPSRExt
& 
	$g‘PpsRªgeEx‹nsiÚ
(è{  
m_µsRªgeEx‹nsiÚ
; 
	}
}

1201 
	sWPSÿlšgP¬am


1205 
BoÞ
 
	mbP»£ÁFÏg
;

1206 
UIÁ
 
	muiLog2WeightD’om
;

1207 
IÁ
 
	miWeight
;

1208 
IÁ
 
	miOff£t
;

1211 
IÁ
 
	mw
;

1212 
IÁ
 
	mo
;

1213 
IÁ
 
	moff£t
;

1214 
IÁ
 
	mshiá
;

1215 
IÁ
 
	mround
;

1218 
	sWPACDCP¬am


1220 
IÁ64
 
	miAC
;

1221 
IÁ64
 
	miDC
;

1225 þas 
	cTComSliû


1228 
	m´iv©e
:

1230 
BoÞ
 
m_§oEÇbËdFÏg
[
MAX_NUM_CHANNEL_TYPE
];

1231 
IÁ
 
	mm_iPPSId
;

1232 
BoÞ
 
	mm_PicOuutFÏg
;

1233 
IÁ
 
	mm_iPOC
;

1234 
IÁ
 
	mm_iLa¡IDR
;

1235 
IÁ
 
	mm_iAssocŸ‹dIRAP
;

1236 
N®Un™Ty³
 
	mm_iAssocŸ‹dIRAPTy³
;

1237 cÚ¡ 
TComReã»nûPiùu»S‘
* 
	mm_pRPS
;

1238 
TComReã»nûPiùu»S‘
 
	mm_loÿlRPS
;

1239 
IÁ
 
	mm_½sIdx
;

1240 
TComRefPicLi¡ModifiÿtiÚ
 
	mm_RefPicLi¡ModifiÿtiÚ
;

1241 
N®Un™Ty³
 
	mm_eN®Un™Ty³
;

1242 
SliûTy³
 
	mm_eSliûTy³
;

1243 
IÁ
 
	mm_iSliûQp
;

1244 
BoÞ
 
	mm_d•’d’tSliûSegm’tFÏg
;

1245 #ià
ADAPTIVE_QP_SELECTION


1246 
IÁ
 
	mm_iSliûQpBa£
;

1248 
BoÞ
 
	mm_ChromaQpAdjEÇbËd
;

1249 
BoÞ
 
	mm_deblockšgFž‹rDi§bË
;

1250 
BoÞ
 
	mm_deblockšgFž‹rOv”rideFÏg
;

1251 
IÁ
 
	mm_deblockšgFž‹rB‘aOff£tDiv2
;

1252 
IÁ
 
	mm_deblockšgFž‹rTcOff£tDiv2
;

1253 
IÁ
 
	mm_li¡1IdxToLi¡0Idx
[
MAX_NUM_REF
];

1254 
IÁ
 
	mm_aiNumRefIdx
 [
NUM_REF_PIC_LIST_01
];

1256 
BoÞ
 
	mm_bCheckLDC
;

1259 
IÁ
 
	mm_iSliûQpD–
;

1260 
IÁ
 
	mm_iSliûChromaQpD–
[
MAX_NUM_COMPONENT
];

1261 
TComPic
* 
	mm_­cRefPicLi¡
 [
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
+1];

1262 
IÁ
 
	mm_aiRefPOCLi¡
 [
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
+1];

1263 
BoÞ
 
	mm_bIsU£dAsLÚgT”m
[
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
+1];

1264 
IÁ
 
	mm_iD•th
;

1267 
BoÞ
 
	mm_bReãnûd
;

1270 cÚ¡ 
TComVPS
* 
	mm_pcVPS
;

1271 cÚ¡ 
TComSPS
* 
	mm_pcSPS
;

1272 cÚ¡ 
TComPPS
* 
	mm_pcPPS
;

1273 
TComPic
* 
	mm_pcPic
;

1274 
BoÞ
 
	mm_cÞFromL0FÏg
;

1276 
BoÞ
 
	mm_noOuutPriÜPicsFÏg
;

1277 
BoÞ
 
	mm_noRa¦OuutFÏg
;

1278 
BoÞ
 
	mm_hªdËC¿AsBÏFÏg
;

1280 
UIÁ
 
	mm_cÞRefIdx
;

1281 
UIÁ
 
	mm_maxNumM”geCªd
;

1283 
DoubË
 
	mm_Ïmbdas
[
MAX_NUM_COMPONENT
];

1285 
BoÞ
 
	mm_abEqu®Ref
 [
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
][MAX_NUM_REF];

1286 
UIÁ
 
	mm_uiTLay”
;

1287 
BoÞ
 
	mm_bTLay”Sw™chšgFÏg
;

1289 
SliûCÚ¡¿št
 
	mm_¦iûMode
;

1290 
UIÁ
 
	mm_¦iûArgum’t
;

1291 
UIÁ
 
	mm_¦iûCurS¹CtuTsAddr
;

1292 
UIÁ
 
	mm_¦iûCurEndCtuTsAddr
;

1293 
UIÁ
 
	mm_¦iûIdx
;

1294 
SliûCÚ¡¿št
 
	mm_¦iûSegm’tMode
;

1295 
UIÁ
 
	mm_¦iûSegm’tArgum’t
;

1296 
UIÁ
 
	mm_¦iûSegm’tCurS¹CtuTsAddr
;

1297 
UIÁ
 
	mm_¦iûSegm’tCurEndCtuTsAddr
;

1298 
BoÞ
 
	mm_ÃxtSliû
;

1299 
BoÞ
 
	mm_ÃxtSliûSegm’t
;

1300 
UIÁ
 
	mm_¦iûB™s
;

1301 
UIÁ
 
	mm_¦iûSegm’tB™s
;

1302 
BoÞ
 
	mm_bFš®ized
;

1304 
BoÞ
 
	mm_bTe¡WeightP»d
;

1305 
BoÞ
 
	mm_bTe¡WeightBiP»d
;

1306 
WPSÿlšgP¬am
 
	mm_weightP»dTabË
[
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
][
MAX_NUM_COMPONENT
];

1307 
WPACDCP¬am
 
	mm_weightACDCP¬am
[
MAX_NUM_COMPONENT
];

1309 
	m¡d
::
veùÜ
<
UIÁ
> 
m_sub¡»amSizes
;

1311 
BoÞ
 
	mm_ÿbacIn™FÏg
;

1313 
BoÞ
 
	mm_bLMvdL1Z”o
;

1314 
BoÞ
 
	mm_‹mpÜ®Lay”NÚReã»nûFÏg
;

1315 
BoÞ
 
	mm_LFCrossSliûBound¬yFÏg
;

1317 
BoÞ
 
	mm_’abËTMVPFÏg
;

1319 
SliûTy³
 
	mm_’cCABACTabËIdx
;

1321 
	mpublic
:

1322 
TComSliû
();

1323 
	mvœtu®
 ~
TComSliû
();

1324 
Void
 
š™Sliû
();

1326 
Void
 
	$£tVPS
Ð
TComVPS
* 
pcVPS
 ) { 
m_pcVPS
 =…cVPS; }

1327 cÚ¡ 
TComVPS
* 
	$g‘VPS
(ècÚ¡ {  
m_pcVPS
; 
	}
}

1328 
Void
 
	$£tSPS
ÐcÚ¡ 
TComSPS
* 
pcSPS
 ) { 
m_pcSPS
 =…cSPS; 
	}
}

1329 cÚ¡ 
TComSPS
* 
	$g‘SPS
(ècÚ¡ {  
m_pcSPS
; 
	}
}

1331 
Void
 
	$£tPPS
ÐcÚ¡ 
TComPPS
* 
pcPPS
 ) { 
m_pcPPS
 =…cPPS; 
m_iPPSId
 = (pcPPSè?…cPPS->
	`g‘PPSId
(è: -1; 
	}
}

1332 cÚ¡ 
TComPPS
* 
	$g‘PPS
(ècÚ¡ {  
m_pcPPS
; 
	}
}

1334 
Void
 
	$£tPPSId
Ð
IÁ
 
PPSId
 ) { 
m_iPPSId
 = PPSId; 
	}
}

1335 
IÁ
 
	$g‘PPSId
(ècÚ¡ {  
m_iPPSId
; 
	}
}

1336 
Void
 
	$£tPicOuutFÏg
Ð
BoÞ
 
b
 ) { 
m_PicOuutFÏg
 = b; 
	}
}

1337 
BoÞ
 
	$g‘PicOuutFÏg
(ècÚ¡ {  
m_PicOuutFÏg
; 
	}
}

1338 
Void
 
	$£tSaoEÇbËdFÏg
(
ChªÃlTy³
 
chTy³
, 
BoÞ
 
s
è{
m_§oEÇbËdFÏg
[chTy³] =s; 
	}
}

1339 
BoÞ
 
	$g‘SaoEÇbËdFÏg
(
ChªÃlTy³
 
chTy³
ècÚ¡ {  
m_§oEÇbËdFÏg
[chTy³]; 
	}
}

1340 
Void
 
	$£tRPS
ÐcÚ¡ 
TComReã»nûPiùu»S‘
 *
pcRPS
 ) { 
m_pRPS
 =…cRPS; 
	}
}

1341 cÚ¡ 
TComReã»nûPiùu»S‘
* 
	$g‘RPS
(è{  
m_pRPS
; 
	}
}

1342 
TComReã»nûPiùu»S‘
* 
	$g‘LoÿlRPS
(è{  &
m_loÿlRPS
; 
	}
}

1344 
Void
 
	$£tRPSidx
Ð
IÁ
 
½sIdx
 ) { 
m_½sIdx
 =„psIdx; 
	}
}

1345 
IÁ
 
	$g‘RPSidx
(ècÚ¡ {  
m_½sIdx
; 
	}
}

1346 
TComRefPicLi¡ModifiÿtiÚ
* 
	$g‘RefPicLi¡ModifiÿtiÚ
(è{  &
m_RefPicLi¡ModifiÿtiÚ
; 
	}
}

1347 
Void
 
	$£tLa¡IDR
(
IÁ
 
iIDRPOC
è{ 
m_iLa¡IDR
 = iIDRPOC; 
	}
}

1348 
IÁ
 
	$g‘La¡IDR
(ècÚ¡ {  
m_iLa¡IDR
; 
	}
}

1349 
Void
 
	$£tAssocŸ‹dIRAPPOC
(
IÁ
 
iAssocŸ‹dIRAPPOC
è{ 
m_iAssocŸ‹dIRAP
 = iAssocŸ‹dIRAPPOC; 
	}
}

1350 
IÁ
 
	$g‘AssocŸ‹dIRAPPOC
(ècÚ¡ {  
m_iAssocŸ‹dIRAP
; 
	}
}

1351 
Void
 
	$£tAssocŸ‹dIRAPTy³
(
N®Un™Ty³
 
assocŸ‹dIRAPTy³
è{ 
m_iAssocŸ‹dIRAPTy³
 =‡ssocŸ‹dIRAPTy³; 
	}
}

1352 
N®Un™Ty³
 
	$g‘AssocŸ‹dIRAPTy³
(ècÚ¡ {  
m_iAssocŸ‹dIRAPTy³
; 
	}
}

1353 
SliûTy³
 
	$g‘SliûTy³
(ècÚ¡ {  
m_eSliûTy³
; 
	}
}

1354 
IÁ
 
	$g‘POC
(ècÚ¡ {  
m_iPOC
; 
	}
}

1355 
IÁ
 
	$g‘SliûQp
(ècÚ¡ {  
m_iSliûQp
; 
	}
}

1356 
BoÞ
 
	$g‘U£Weigh‹dP»diùiÚ
(ècÚ¡ { Ð(
m_eSliûTy³
==
P_SLICE
 && 
	`‹¡WeightP»d
()è|| (m_eSliûTy³==
B_SLICE
 && 
	`‹¡WeightBiP»d
()è); 
	}
}

1357 
BoÞ
 
	$g‘D•’d’tSliûSegm’tFÏg
(ècÚ¡ {  
m_d•’d’tSliûSegm’tFÏg
; 
	}
}

1358 
Void
 
	$£tD•’d’tSliûSegm’tFÏg
(
BoÞ
 
v®
è{ 
m_d•’d’tSliûSegm’tFÏg
 = v®; 
	}
}

1359 #ià
ADAPTIVE_QP_SELECTION


1360 
IÁ
 
	$g‘SliûQpBa£
(ècÚ¡ {  
m_iSliûQpBa£
; 
	}
}

1362 
IÁ
 
	$g‘SliûQpD–
(ècÚ¡ {  
m_iSliûQpD–
; 
	}
}

1363 
IÁ
 
	$g‘SliûChromaQpD–
(
CompÚ’tID
 
compID
ècÚ¡ {  
	`isLuma
(compIDè? 0 : 
m_iSliûChromaQpD–
[compID]; 
	}
}

1364 
BoÞ
 
	$g‘U£ChromaQpAdj
(ècÚ¡ {  
m_ChromaQpAdjEÇbËd
; 
	}
}

1365 
BoÞ
 
	$g‘DeblockšgFž‹rDi§bË
(ècÚ¡ {  
m_deblockšgFž‹rDi§bË
; 
	}
}

1366 
BoÞ
 
	$g‘DeblockšgFž‹rOv”rideFÏg
(ècÚ¡ {  
m_deblockšgFž‹rOv”rideFÏg
; 
	}
}

1367 
IÁ
 
	$g‘DeblockšgFž‹rB‘aOff£tDiv2
()cÚ¡ {  
m_deblockšgFž‹rB‘aOff£tDiv2
; 
	}
}

1368 
IÁ
 
	$g‘DeblockšgFž‹rTcOff£tDiv2
(ècÚ¡ {  
m_deblockšgFž‹rTcOff£tDiv2
; 
	}
}

1370 
IÁ
 
	$g‘NumRefIdx
Ð
RefPicLi¡
 
e
 ) cÚ¡ {  
m_aiNumRefIdx
[e]; 
	}
}

1371 
TComPic
* 
	$g‘Pic
(è{  
m_pcPic
; 
	}
}

1372 cÚ¡ 
TComPic
* 
	$g‘Pic
(ècÚ¡ {  
m_pcPic
; 
	}
}

1373 
TComPic
* 
	$g‘RefPic
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
è{  
m_­cRefPicLi¡
[e][iRefIdx]; 
	}
}

1374 cÚ¡ 
TComPic
* 
	$g‘RefPic
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
ècÚ¡ {  
m_­cRefPicLi¡
[e][iRefIdx]; 
	}
}

1375 
IÁ
 
	$g‘RefPOC
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
ècÚ¡ {  
m_aiRefPOCLi¡
[e][iRefIdx]; 
	}
}

1376 
IÁ
 
	$g‘D•th
(ècÚ¡ {  
m_iD•th
; 
	}
}

1377 
BoÞ
 
	$g‘CÞFromL0FÏg
(ècÚ¡ {  
m_cÞFromL0FÏg
; 
	}
}

1378 
UIÁ
 
	$g‘CÞRefIdx
(ècÚ¡ {  
m_cÞRefIdx
; 
	}
}

1379 
Void
 
checkCÞRefIdx
(
UIÁ
 
curSliûIdx
, 
TComPic
* 
pic
);

1380 
BoÞ
 
	$g‘IsU£dAsLÚgT”m
(
IÁ
 
i
, IÁ 
j
ècÚ¡ {  
m_bIsU£dAsLÚgT”m
[i][j]; 
	}
}

1381 
Void
 
	$£tIsU£dAsLÚgT”m
(
IÁ
 
i
, IÁ 
j
, 
BoÞ
 
v®ue
è{ 
m_bIsU£dAsLÚgT”m
[i][j] = v®ue; 
	}
}

1382 
BoÞ
 
	$g‘CheckLDC
(ècÚ¡ {  
m_bCheckLDC
; 
	}
}

1383 
BoÞ
 
	$g‘MvdL1Z”oFÏg
(ècÚ¡ {  
m_bLMvdL1Z”o
; 
	}
}

1384 
IÁ
 
	$g‘NumRpsCu¼TempLi¡
() const;

1385 
IÁ
 
	$g‘Li¡1IdxToLi¡0Idx
Ð
IÁ
 
li¡1Idx
 ) cÚ¡ {  
m_li¡1IdxToLi¡0Idx
[li¡1Idx]; 
	}
}

1386 
Void
 
	$£tReã»nûd
(
BoÞ
 
b
è{ 
m_bReãnûd
 = b; 
	}
}

1387 
BoÞ
 
	$isReã»nûd
(ècÚ¡ {  
m_bReãnûd
; 
	}
}

1388 
BoÞ
 
	$isReã»nûN®u
(ècÚ¡ {  ((
	`g‘N®Un™Ty³
(è<ð
NAL_UNIT_RESERVED_VCL_R15
è&& (g‘N®Un™Ty³()%2 !ð0)è|| ((g‘N®Un™Ty³(è>ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
è&& (g‘N®Un™Ty³(è<ð
NAL_UNIT_RESERVED_IRAP_VCL23
è); 
	}
}

1389 
Void
 
	$£tPOC
Ð
IÁ
 
i
 ) { 
m_iPOC
 = i; 
	}
}

1390 
Void
 
	$£tN®Un™Ty³
Ð
N®Un™Ty³
 
e
 ) { 
m_eN®Un™Ty³
 =ƒ; 
	}
}

1391 
N®Un™Ty³
 
	$g‘N®Un™Ty³
(ècÚ¡ {  
m_eN®Un™Ty³
; 
	}
}

1392 
BoÞ
 
	$g‘R­PicFÏg
() const;

1393 
BoÞ
 
	$g‘IdrPicFÏg
(ècÚ¡ {  
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 || g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
; 
	}
}

1394 
BoÞ
 
	$isIRAP
(ècÚ¡ {  (
	`g‘N®Un™Ty³
(è>ð16è&& (g‘N®Un™Ty³(è<ð23); 
	}
}

1395 
Void
 
checkCRA
(cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
IÁ
& 
pocCRA
, 
N®Un™Ty³
& 
assocŸ‹dIRAPTy³
, 
TComLi¡
<
TComPic
 *>& 
rcLi¡Pic
);

1396 
Void
 
decodšgReäeshM¬kšg
(
IÁ
& 
pocCRA
, 
BoÞ
& 
bReäeshP’dšg
, 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
boÞ
 
bEffic›ÁF›ldIRAPEÇbËd
);

1397 
Void
 
	$£tSliûTy³
Ð
SliûTy³
 
e
 ) { 
m_eSliûTy³
 =ƒ; 
	}
}

1398 
Void
 
	$£tSliûQp
Ð
IÁ
 
i
 ) { 
m_iSliûQp
 = i; 
	}
}

1399 #ià
ADAPTIVE_QP_SELECTION


1400 
Void
 
	$£tSliûQpBa£
Ð
IÁ
 
i
 ) { 
m_iSliûQpBa£
 = i; 
	}
}

1402 
Void
 
	$£tSliûQpD–
Ð
IÁ
 
i
 ) { 
m_iSliûQpD–
 = i; 
	}
}

1403 
Void
 
	$£tSliûChromaQpD–
Ð
CompÚ’tID
 
compID
, 
IÁ
 
i
 ) { 
m_iSliûChromaQpD–
[compID] = 
	`isLuma
(compIDè? 0 : i; 
	}
}

1404 
Void
 
	$£tU£ChromaQpAdj
Ð
BoÞ
 
b
 ) { 
m_ChromaQpAdjEÇbËd
 = b; 
	}
}

1405 
Void
 
	$£tDeblockšgFž‹rDi§bË
Ð
BoÞ
 
b
 ) { 
m_deblockšgFž‹rDi§bË
ðb; 
	}
}

1406 
Void
 
	$£tDeblockšgFž‹rOv”rideFÏg
Ð
BoÞ
 
b
 ) { 
m_deblockšgFž‹rOv”rideFÏg
 = b; 
	}
}

1407 
Void
 
	$£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
IÁ
 
i
 ) { 
m_deblockšgFž‹rB‘aOff£tDiv2
 = i; 
	}
}

1408 
Void
 
	$£tDeblockšgFž‹rTcOff£tDiv2
Ð
IÁ
 
i
 ) { 
m_deblockšgFž‹rTcOff£tDiv2
 = i; 
	}
}

1410 
Void
 
	$£tRefPic
Ð
TComPic
* 
p
, 
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
 ) { 
m_­cRefPicLi¡
[e][iRefIdx] =…; 
	}
}

1411 
Void
 
	$£tRefPOC
Ð
IÁ
 
i
, 
RefPicLi¡
 
e
, IÁ 
iRefIdx
 ) { 
m_aiRefPOCLi¡
[e][iRefIdx] = i; 
	}
}

1412 
Void
 
	$£tNumRefIdx
Ð
RefPicLi¡
 
e
, 
IÁ
 
i
 ) { 
m_aiNumRefIdx
[e] = i; 
	}
}

1413 
Void
 
	$£tPic
Ð
TComPic
* 
p
 ) { 
m_pcPic
 =…; 
	}
}

1414 
Void
 
	$£tD•th
Ð
IÁ
 
iD•th
 ) { 
m_iD•th
 = iD•th; 
	}
}

1416 
Void
 
£tRefPicLi¡
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, 
BoÞ
 
checkNumPocTÙ®Cu¼
 = 
çl£
 );

1417 
Void
 
£tRefPOCLi¡
();

1418 
Void
 
	$£tCÞFromL0FÏg
Ð
BoÞ
 
cÞFromL0
 ) { 
m_cÞFromL0FÏg
 = cÞFromL0; 
	}
}

1419 
Void
 
	$£tCÞRefIdx
Ð
UIÁ
 
»fIdx
è{ 
m_cÞRefIdx
 =„efIdx; 
	}
}

1420 
Void
 
	$£tCheckLDC
Ð
BoÞ
 
b
 ) { 
m_bCheckLDC
 = b; 
	}
}

1421 
Void
 
	$£tMvdL1Z”oFÏg
Ð
BoÞ
 
b
è{ 
m_bLMvdL1Z”o
 = b; 
	}
}

1423 
BoÞ
 
	$isIÁ¿
(ècÚ¡ {  
m_eSliûTy³
 =ð
I_SLICE
; 
	}
}

1424 
BoÞ
 
	$isIÁ”B
(ècÚ¡ {  
m_eSliûTy³
 =ð
B_SLICE
; 
	}
}

1425 
BoÞ
 
	$isIÁ”P
(ècÚ¡ {  
m_eSliûTy³
 =ð
P_SLICE
; 
	}
}

1427 
Void
 
	$£tLambdas
ÐcÚ¡ 
DoubË
 
Ïmbdas
[
MAX_NUM_COMPONENT
] ) { 
IÁ
 
compÚ’t
 = 0; compÚ’ˆ< MAX_NUM_COMPONENT; compÚ’t++è
m_Ïmbdas
[compÚ’t] =†ambdas[compÚ’t]; 
	}
}

1428 cÚ¡ 
DoubË
* 
	$g‘Lambdas
(ècÚ¡ {  
m_Ïmbdas
; 
	}
}

1430 
Void
 
š™Equ®Ref
();

1431 
BoÞ
 
	$isEqu®Ref
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx1
, IÁ 
iRefIdx2
 )

1433 
	`as£¹
(
e
<
NUM_REF_PIC_LIST_01
);

1434 ià(
iRefIdx1
 < 0 || 
iRefIdx2
 < 0)

1436  
çl£
;

1440  
m_abEqu®Ref
[
e
][
iRefIdx1
][
iRefIdx2
];

1442 
	}
}

1444 
Void
 
	$£tEqu®Ref
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx1
, IÁ 
iRefIdx2
, 
BoÞ
 
b
)

1446 
	`as£¹
(
e
<
NUM_REF_PIC_LIST_01
);

1447 
m_abEqu®Ref
[
e
][
iRefIdx1
][
iRefIdx2
] = m_abEqu®Ref[e][iRefIdx2][iRefIdx1] = 
b
;

1448 
	}
}

1450 
Void
 
sÜtPicLi¡
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
 );

1451 
Void
 
£tLi¡1IdxToLi¡0Idx
();

1453 
UIÁ
 
	$g‘TLay”
(ècÚ¡ {  
m_uiTLay”
; 
	}
}

1454 
Void
 
	$£tTLay”
Ð
UIÁ
 
uiTLay”
 ) { 
m_uiTLay”
 = uiTLay”; 
	}
}

1456 
Void
 
£tTLay”Info
Ð
UIÁ
 
uiTLay”
 );

1457 
Void
 
decodšgM¬kšg
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, 
IÁ
 
iGOPSIze
, IÁ& 
iMaxRefPicNum
 );

1458 
Void
 
checkL—dšgPiùu»Re¡riùiÚs
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
 );

1459 
Void
 
­¶yReã»nûPiùu»S‘
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
RPSLi¡
);

1460 
BoÞ
 
isTempÜ®Lay”Sw™chšgPošt
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
 );

1461 
BoÞ
 
isS‹pwi£TempÜ®Lay”Sw™chšgPoštCªdid©e
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
 );

1462 
IÁ
 
checkTh©AÎRefPicsA»AvažabË
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
BoÞ
 
´štE¼Üs
, IÁ 
pocRªdomAcûss
 = 0, BoÞ 
bU£Recov”yPošt
 = 
çl£
);

1463 
Void
 
ü—‹Ex¶ic™Reã»nûPiùu»S‘FromReã»nû
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, cÚ¡ 
TComReã»nûPiùu»S‘
 *
pReã»nûPiùu»S‘
, 
BoÞ
 
isRAP
, 
IÁ
 
pocRªdomAcûss
, BoÞ 
bU£Recov”yPošt
, cÚ¡ BoÞ 
bEffic›ÁF›ldIRAPEÇbËd
);

1464 
Void
 
	$£tMaxNumM”geCªd
(
UIÁ
 
v®
 ) { 
m_maxNumM”geCªd
 = v®; 
	}
}

1465 
UIÁ
 
	$g‘MaxNumM”geCªd
(ècÚ¡ {  
m_maxNumM”geCªd
; 
	}
}

1467 
Void
 
	$£tNoOuutPriÜPicsFÏg
Ð
BoÞ
 
v®
 ) { 
m_noOuutPriÜPicsFÏg
 = v®; 
	}
}

1468 
BoÞ
 
	$g‘NoOuutPriÜPicsFÏg
(ècÚ¡ {  
m_noOuutPriÜPicsFÏg
; 
	}
}

1470 
Void
 
	$£tNoRa¦OuutFÏg
Ð
BoÞ
 
v®
 ) { 
m_noRa¦OuutFÏg
 = v®; 
	}
}

1471 
BoÞ
 
	$g‘NoRa¦OuutFÏg
(ècÚ¡ {  
m_noRa¦OuutFÏg
; 
	}
}

1473 
Void
 
	$£tHªdËC¿AsBÏFÏg
Ð
BoÞ
 
v®
 ) { 
m_hªdËC¿AsBÏFÏg
 = v®; 
	}
}

1474 
BoÞ
 
	$g‘HªdËC¿AsBÏFÏg
(ècÚ¡ {  
m_hªdËC¿AsBÏFÏg
; 
	}
}

1476 
Void
 
	$£tSliûMode
Ð
SliûCÚ¡¿št
 
mode
 ) { 
m_¦iûMode
 = mode; 
	}
}

1477 
SliûCÚ¡¿št
 
	$g‘SliûMode
(ècÚ¡ {  
m_¦iûMode
; 
	}
}

1478 
Void
 
	$£tSliûArgum’t
Ð
UIÁ
 
uiArgum’t
 ) { 
m_¦iûArgum’t
 = uiArgum’t; 
	}
}

1479 
UIÁ
 
	$g‘SliûArgum’t
(ècÚ¡ {  
m_¦iûArgum’t
; 
	}
}

1480 
Void
 
	$£tSliûCurS¹CtuTsAddr
Ð
UIÁ
 
ùuTsAddr
 ) { 
m_¦iûCurS¹CtuTsAddr
 = ctuTsAddr; 
	}
}

1481 
UIÁ
 
	$g‘SliûCurS¹CtuTsAddr
(ècÚ¡ {  
m_¦iûCurS¹CtuTsAddr
; 
	}
}

1482 
Void
 
	$£tSliûCurEndCtuTsAddr
Ð
UIÁ
 
ùuTsAddr
 ) { 
m_¦iûCurEndCtuTsAddr
 = ctuTsAddr; 
	}
}

1483 
UIÁ
 
	$g‘SliûCurEndCtuTsAddr
(ècÚ¡ {  
m_¦iûCurEndCtuTsAddr
; 
	}
}

1484 
Void
 
	$£tSliûIdx
Ð
UIÁ
 
i
è{ 
m_¦iûIdx
 = i; 
	}
}

1485 
UIÁ
 
	$g‘SliûIdx
(ècÚ¡ {  
m_¦iûIdx
; 
	}
}

1486 
Void
 
cÝySliûInfo
(
TComSliû
 *
pcSliûSrc
);

1487 
Void
 
	$£tSliûSegm’tMode
Ð
SliûCÚ¡¿št
 
mode
 ) { 
m_¦iûSegm’tMode
 = mode; 
	}
}

1488 
SliûCÚ¡¿št
 
	$g‘SliûSegm’tMode
(ècÚ¡ {  
m_¦iûSegm’tMode
; 
	}
}

1489 
Void
 
	$£tSliûSegm’tArgum’t
Ð
UIÁ
 
uiArgum’t
 ) { 
m_¦iûSegm’tArgum’t
 = uiArgum’t; 
	}
}

1490 
UIÁ
 
	$g‘SliûSegm’tArgum’t
(ècÚ¡ {  
m_¦iûSegm’tArgum’t
; 
	}
}

1491 
Void
 
	$£tSliûSegm’tCurS¹CtuTsAddr
Ð
UIÁ
 
ùuTsAddr
 ) { 
m_¦iûSegm’tCurS¹CtuTsAddr
 = ctuTsAddr; 
	}
}

1492 
UIÁ
 
	$g‘SliûSegm’tCurS¹CtuTsAddr
(ècÚ¡ {  
m_¦iûSegm’tCurS¹CtuTsAddr
; 
	}
}

1493 
Void
 
	$£tSliûSegm’tCurEndCtuTsAddr
Ð
UIÁ
 
ùuTsAddr
 ) { 
m_¦iûSegm’tCurEndCtuTsAddr
 = ctuTsAddr; 
	}
}

1494 
UIÁ
 
	$g‘SliûSegm’tCurEndCtuTsAddr
(ècÚ¡ {  
m_¦iûSegm’tCurEndCtuTsAddr
; 
	}
}

1495 
Void
 
	$£tSliûB™s
Ð
UIÁ
 
uiV®
 ) { 
m_¦iûB™s
 = uiV®; 
	}
}

1496 
UIÁ
 
	$g‘SliûB™s
(ècÚ¡ {  
m_¦iûB™s
; 
	}
}

1497 
Void
 
	$£tSliûSegm’tB™s
Ð
UIÁ
 
uiV®
 ) { 
m_¦iûSegm’tB™s
 = uiV®; 
	}
}

1498 
UIÁ
 
	$g‘SliûSegm’tB™s
(ècÚ¡ {  
m_¦iûSegm’tB™s
; 
	}
}

1499 
Void
 
	$£tFš®ized
Ð
BoÞ
 
uiV®
 ) { 
m_bFš®ized
 = uiV®; 
	}
}

1500 
BoÞ
 
	$g‘Fš®ized
(ècÚ¡ {  
m_bFš®ized
; 
	}
}

1501 
BoÞ
 
	$‹¡WeightP»d
ÐècÚ¡ {  
m_bTe¡WeightP»d
; 
	}
}

1502 
Void
 
	$£tTe¡WeightP»d
Ð
BoÞ
 
bV®ue
 ) { 
m_bTe¡WeightP»d
 = bV®ue; 
	}
}

1503 
BoÞ
 
	$‹¡WeightBiP»d
ÐècÚ¡ {  
m_bTe¡WeightBiP»d
; 
	}
}

1504 
Void
 
	$£tTe¡WeightBiP»d
Ð
BoÞ
 
bV®ue
 ) { 
m_bTe¡WeightBiP»d
 = bV®ue; 
	}
}

1505 
Void
 
	$£tWpSÿlšg
Ð
WPSÿlšgP¬am
 
wp
[
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
][
MAX_NUM_COMPONENT
] )

1507 
	`memýy
(
m_weightP»dTabË
, 
wp
, (
WPSÿlšgP¬am
)*
NUM_REF_PIC_LIST_01
*
MAX_NUM_REF
*
MAX_NUM_COMPONENT
);

1508 
	}
}

1510 
Void
 
g‘WpSÿlšg
Ð
RefPicLi¡
 
e
, 
IÁ
 
iRefIdx
, 
WPSÿlšgP¬am
 *&
wp
);

1512 
Void
 
»£tWpSÿlšg
();

1513 
Void
 
š™WpSÿlšg
(cÚ¡ 
TComSPS
 *
¥s
);

1515 
Void
 
	$£tWpAcDcP¬am
Ð
WPACDCP¬am
 
wp
[
MAX_NUM_COMPONENT
] )

1517 
	`memýy
(
m_weightACDCP¬am
, 
wp
, (
WPACDCP¬am
)*
MAX_NUM_COMPONENT
);

1518 
	}
}

1520 
Void
 
g‘WpAcDcP¬am
Ð
WPACDCP¬am
 *&
wp
 );

1521 
Void
 
š™WpAcDcP¬am
();

1523 
Void
 
	$þ—rSub¡»amSizes
Ðè{  
m_sub¡»amSizes
.
	`þ—r
(); 
	}
}

1524 
UIÁ
 
	$g‘Numb”OfSub¡»amSizes
Ðè{  (
UIÁ
è
m_sub¡»amSizes
.
	`size
(); 
	}
}

1525 
Void
 
	$addSub¡»amSize
Ð
UIÁ
 
size
 ) { 
m_sub¡»amSizes
.
	`push_back
(size); 
	}
}

1526 
UIÁ
 
	$g‘Sub¡»amSize
Ð
IÁ
 
idx
 ) { 
	`as£¹
(idx<
	`g‘Numb”OfSub¡»amSizes
());  
m_sub¡»amSizes
[idx]; 
	}
}

1528 
Void
 
	$£tCabacIn™FÏg
Ð
BoÞ
 
v®
 ) { 
m_ÿbacIn™FÏg
 = v®; 
	}
}

1529 
BoÞ
 
	$g‘CabacIn™FÏg
(è{  
m_ÿbacIn™FÏg
; 
	}
}

1530 
BoÞ
 
	$g‘TempÜ®Lay”NÚReã»nûFÏg
(è{  
m_‹mpÜ®Lay”NÚReã»nûFÏg
; 
	}
}

1531 
Void
 
	$£tTempÜ®Lay”NÚReã»nûFÏg
(
BoÞ
 
x
è{ 
m_‹mpÜ®Lay”NÚReã»nûFÏg
 = x; 
	}
}

1532 
Void
 
	$£tLFCrossSliûBound¬yFÏg
Ð
BoÞ
 
v®
 ) { 
m_LFCrossSliûBound¬yFÏg
 = v®; 
	}
}

1533 
BoÞ
 
	$g‘LFCrossSliûBound¬yFÏg
(è{  
m_LFCrossSliûBound¬yFÏg
; 
	}
}

1535 
Void
 
	$£tEÇbËTMVPFÏg
Ð
BoÞ
 
b
 ) { 
m_’abËTMVPFÏg
 = b; 
	}
}

1536 
BoÞ
 
	$g‘EÇbËTMVPFÏg
(ècÚ¡ {  
m_’abËTMVPFÏg
; 
	}
}

1538 
Void
 
	$£tEncCABACTabËIdx
Ð
SliûTy³
 
idx
 ) { 
m_’cCABACTabËIdx
 = idx; 
	}
}

1539 
SliûTy³
 
	$g‘EncCABACTabËIdx
(ècÚ¡ {  
m_’cCABACTabËIdx
; 
	}
}

1541 
	g´Ùeùed
:

1542 
TComPic
* 
xG‘RefPic
 (
TComLi¡
<TComPic*>& 
rcLi¡Pic
, 
IÁ
 
poc
);

1543 
TComPic
* 
xG‘LÚgT”mRefPic
(
TComLi¡
<TComPic*>& 
rcLi¡Pic
, 
IÁ
 
poc
, 
BoÞ
 
pocHasMsb
);

1547 
Void
 
ÿlcuÏ‹P¬am‘”S‘ChªgedFÏg
(
BoÞ
 &
bChªged
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> *
pOldD©a
, cÚ¡ std::veùÜ<UCh¬> *
pNewD©a
);

1549 
	g‹m¶©e
 <
þass
 
	gT
> cÏs 
	cP¬am‘”S‘M­


1551 
	mpublic
:

1552 
‹m¶©e
 <
þass
 
Tm
>

1553 
	sM­D©a


1555 
BoÞ
 
bChªged
;

1556 
	m¡d
::
veùÜ
<
UCh¬
> *
pN®uD©a
;

1557 
Tm
* 
	m·¿m‘”S‘
;

1560 
	$P¬am‘”S‘M­
(
IÁ
 
maxId
)

1561 :
	$m_maxId
 (
maxId
)

1562 {
	}
}

1564 ~
	$P¬am‘”S‘M­
()

1566 
ty³Çme
 
¡d
::
m­
<
IÁ
,
M­D©a
<
T
> >::
™”©Ü
 
i
 = 
m_·¿m£tM­
.
	`begš
(); i!ðm_·¿m£tM­.
	`’d
(); i++)

1568 
	`d–‘e
 (*
i
).
£cÚd
.
pN®uD©a
;

1569 
	`d–‘e
 (*
i
).
£cÚd
.
·¿m‘”S‘
;

1571 
	}
}

1573 
T
 *
	$®loÿ‹PS
(cÚ¡ 
IÁ
 
psId
)

1575 
	`as£¹
 ( 
psId
 < 
m_maxId
 );

1576 iàÐ
m_·¿m£tM­
.
	`fšd
(
psId
è=ðm_·¿m£tM­.
	`’d
() )

1578 
m_·¿m£tM­
[
psId
].
bChªged
 = 
Œue
;

1579 
m_·¿m£tM­
[
psId
].
pN®uD©a
=0;

1580 
m_·¿m£tM­
[
psId
].
·¿m‘”S‘
 = 
Ãw
 
T
;

1581 
	`£tID
(
m_·¿m£tM­
[
psId
].
·¿m‘”S‘
,…sId);

1583  
m_·¿m£tM­
[
psId
].
·¿m‘”S‘
;

1584 
	}
}

1586 
Void
 
¡ÜePS
(
IÁ
 
psId
, 
T
 *
ps
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> *
pN®uD©a
)

1588 
as£¹
 ( 
psId
 < 
m_maxId
 );

1589 iàÐ
	gm_·¿m£tM­
.
fšd
(
psId
è!ð
m_·¿m£tM­
.
’d
() )

1591 
M­D©a
<
T
> &
m­D©a
=
m_·¿m£tM­
[
psId
];

1594 
ÿlcuÏ‹P¬am‘”S‘ChªgedFÏg
(
m­D©a
.
bChªged
, m­D©a.
pN®uD©a
,…NaluData);

1595 
d–‘e
 
	gm_·¿m£tM­
[
psId
].
	gpN®uD©a
;

1596 
d–‘e
 
	gm_·¿m£tM­
[
psId
].
	g·¿m‘”S‘
;

1598 
	gm_·¿m£tM­
[
psId
].
	g·¿m‘”S‘
 = 
ps
;

1602 
	gm_·¿m£tM­
[
psId
].
	g·¿m‘”S‘
 = 
ps
;

1603 
	gm_·¿m£tM­
[
psId
].
	gbChªged
 = 
çl£
;

1605 ià(
	gpN®uD©a
 != 0)

1607 
m_·¿m£tM­
[
psId
].
pN®uD©a
=
Ãw
 
¡d
::
veùÜ
<
UCh¬
>;

1608 *(
	gm_·¿m£tM­
[
psId
].
	gpN®uD©a
èð*
pN®uD©a
;

1612 
	gm_·¿m£tM­
[
psId
].
	gpN®uD©a
=0;

1616 
Void
 
	$£tChªgedFÏg
(
IÁ
 
psId
, 
BoÞ
 
bChªged
=
Œue
)

1618 iàÐ
m_·¿m£tM­
.
	`fšd
(
psId
è!ðm_·¿m£tM­.
	`’d
() )

1620 
m_·¿m£tM­
[
psId
].
bChªged
=bChanged;

1622 
	}
}

1624 
Void
 
	$þ—rChªgedFÏg
(
IÁ
 
psId
)

1626 iàÐ
m_·¿m£tM­
.
	`fšd
(
psId
è!ðm_·¿m£tM­.
	`’d
() )

1628 
m_·¿m£tM­
[
psId
].
bChªged
=
çl£
;

1630 
	}
}

1632 
BoÞ
 
	$g‘ChªgedFÏg
(
IÁ
 
psId
) const

1634 cÚ¡ 
ty³Çme
 
¡d
::
m­
<
IÁ
,
M­D©a
<
T
> >::
cÚ¡_™”©Ü
 
cÚ¡™
=
m_·¿m£tM­
.
	`fšd
(
psId
);

1635 iàÐ
cÚ¡™
 !ð
m_·¿m£tM­
.
	`’d
() )

1637  
cÚ¡™
->
£cÚd
.
bChªged
;

1639  
çl£
;

1640 
	}
}

1642 
T
* 
	$g‘PS
(
IÁ
 
psId
)

1644 
ty³Çme
 
¡d
::
m­
<
IÁ
,
M­D©a
<
T
> >::
™”©Ü
 
™
=
m_·¿m£tM­
.
	`fšd
(
psId
);

1645  ( 
™
 =ð
m_·¿m£tM­
.
	`’d
(èè? 
NULL
 : (™)->
£cÚd
.
·¿m‘”S‘
;

1646 
	}
}

1648 cÚ¡ 
T
* 
	$g‘PS
(
IÁ
 
psId
) const

1650 
ty³Çme
 
¡d
::
m­
<
IÁ
,
M­D©a
<
T
> >::
cÚ¡_™”©Ü
 
™
=
m_·¿m£tM­
.
	`fšd
(
psId
);

1651  ( 
™
 =ð
m_·¿m£tM­
.
	`’d
(èè? 
NULL
 : (™)->
£cÚd
.
·¿m‘”S‘
;

1652 
	}
}

1654 
T
* 
	$g‘Fœ¡PS
()

1656  (
m_·¿m£tM­
.
	`begš
(è=ðm_·¿m£tM­.
	`’d
(èè? 
NULL
 : m_·¿m£tM­.begš()->
£cÚd
.
·¿m‘”S‘
;

1657 
	}
}

1659 
	g´iv©e
:

1660 
¡d
::
m­
<
IÁ
,
	gM­D©a
<
	gT
> > 
	gm_·¿m£tM­
;

1661 
IÁ
 
	gm_maxId
;

1663 
Void
 
£tID
(
T
* 
·¿m‘”S‘
, cÚ¡ 
IÁ
 
psId
);

1667 þas 
	cP¬am‘”S‘Mªag”


1669 
	mpublic
:

1670 
P¬am‘”S‘Mªag”
();

1671 
	mvœtu®
 ~
P¬am‘”S‘Mªag”
();

1674 
Void
 
¡ÜeVPS
(
TComVPS
 *
vps
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
è{ 
m_vpsM­
.
¡ÜePS
Ðvps->
g‘VPSId
(), vps, &naluData); };

1676 
TComVPS
* 
	$g‘VPS
(
IÁ
 
vpsId
è{  
m_vpsM­
.
	`g‘PS
(vpsId); 
	}
};

1677 
BoÞ
 
	$g‘VPSChªgedFÏg
(
IÁ
 
vpsId
ècÚ¡ {  
m_vpsM­
.
	`g‘ChªgedFÏg
(vpsId); 
	}
}

1678 
Void
 
	$þ—rVPSChªgedFÏg
(
IÁ
 
vpsId
è{ 
m_vpsM­
.
	`þ—rChªgedFÏg
(vpsId); 
	}
}

1679 
TComVPS
* 
	$g‘Fœ¡VPS
(è{  
m_vpsM­
.
	`g‘Fœ¡PS
(); 
	}
};

1682 
Void
 
¡ÜeSPS
(
TComSPS
 *
¥s
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
è{ 
m_¥sM­
.
¡ÜePS
Ð¥s->
g‘SPSId
(), sps, &naluData); };

1684 
TComSPS
* 
	$g‘SPS
(
IÁ
 
¥sId
è{  
m_¥sM­
.
	`g‘PS
(¥sId); 
	}
};

1685 
BoÞ
 
	$g‘SPSChªgedFÏg
(
IÁ
 
¥sId
ècÚ¡ {  
m_¥sM­
.
	`g‘ChªgedFÏg
(¥sId); 
	}
}

1686 
Void
 
	$þ—rSPSChªgedFÏg
(
IÁ
 
¥sId
è{ 
m_¥sM­
.
	`þ—rChªgedFÏg
(¥sId); 
	}
}

1687 
TComSPS
* 
	$g‘Fœ¡SPS
(è{  
m_¥sM­
.
	`g‘Fœ¡PS
(); 
	}
};

1690 
Void
 
¡ÜePPS
(
TComPPS
 *
µs
, cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
è{ 
m_µsM­
.
¡ÜePS
Ðµs->
g‘PPSId
(),…ps, &naluData); };

1692 
TComPPS
* 
	$g‘PPS
(
IÁ
 
µsId
è{  
m_µsM­
.
	`g‘PS
ÕpsId); 
	}
};

1693 
BoÞ
 
	$g‘PPSChªgedFÏg
(
IÁ
 
µsId
ècÚ¡ {  
m_µsM­
.
	`g‘ChªgedFÏg
ÕpsId); 
	}
}

1694 
Void
 
	$þ—rPPSChªgedFÏg
(
IÁ
 
µsId
è{ 
m_µsM­
.
	`þ—rChªgedFÏg
ÕpsId); 
	}
}

1695 
TComPPS
* 
	$g‘Fœ¡PPS
(è{  
m_µsM­
.
	`g‘Fœ¡PS
(); 
	}
};

1703 
BoÞ
 
aùiv©ePPS
(
IÁ
 
µsId
, BoÞ 
isIRAP
);

1705 cÚ¡ 
TComVPS
* 
	$g‘AùiveVPS
()cÚ¡ {  
m_vpsM­
.
	`g‘PS
(
m_aùiveVPSId
); 
	}
};

1706 cÚ¡ 
TComSPS
* 
	$g‘AùiveSPS
()cÚ¡ {  
m_¥sM­
.
	`g‘PS
(
m_aùiveSPSId
); 
	}
};

1708 
	g´Ùeùed
:

1709 
P¬am‘”S‘M­
<
TComVPS
> 
m_vpsM­
;

1710 
	gP¬am‘”S‘M­
<
	gTComSPS
> 
	gm_¥sM­
;

1711 
	gP¬am‘”S‘M­
<
	gTComPPS
> 
	gm_µsM­
;

1713 
IÁ
 
	gm_aùiveVPSId
;

1714 
IÁ
 
	gm_aùiveSPSId
;

	@source/Lib/TLibCommon/TComTU.cpp

35 
	~"TComTU.h
"

36 
	~"TComRom.h
"

37 
	~"TComD©aCU.h
"

38 
	~"TComPic.h
"

42  cÚ¡ 
UIÁ
 
	gTComTU
::
NUMBER_OF_SECTIONS
[
TComTU
::
NUMBER_OF_SPLIT_MODES
] = { 1, 2, 4 };

44 cÚ¡ 
UIÁ
 
	g·¹IdxS‹pShiá
 [
TComTU
::
NUMBER_OF_SPLIT_MODES
] = { 0, 1, 2 };

48 
	gTComTU
::
	$TComTU
(
TComD©aCU
 *
pcCU
, cÚ¡ 
UIÁ
 
absP¬tIdxCU
, cÚ¡ UIÁ 
cuD•th
, cÚ¡ UIÁ 
š™TrD•thR–CU
)

49 : 
	`mChromaFÜm©
(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘ChromaFÜm©Idc
()),

50 
	`mbProûssLa¡OfLev–
(
Œue
),

51 
	`mCuD•th
(
cuD•th
),

52 
	`mSeùiÚ
(0),

53 
	`mS¶™Mode
(
DONT_SPLIT
),

54 
	`mAbsP¬tIdxCU
(
absP¬tIdxCU
),

55 
	`mAbsP¬tIdxTUR–CU
(0),

56 
	`mAbsP¬tIdxS‹p
(
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> (pcCU->
	`g‘D•th
(
absP¬tIdxCU
)<<1)),

57 
	`mpcCU
(
pcCU
),

58 
	`mLog2TrLumaSize
(0),

59 
	$mpP¬’t
(
NULL
)

61 cÚ¡ 
TComSPS
 *
pSPS
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
();

62 
mLog2TrLumaSize
 = 
g_aucCÚv”tToB™
[
pSPS
->
	`g‘MaxCUWidth
(è>> (
mCuD•th
+
š™TrD•thR–CU
)]+2;

64 cÚ¡ 
UIÁ
 
ba£Off£t444
=
pcCU
->
	`g‘Pic
()->
	`g‘MšCUWidth
()*pcCU->g‘Pic()->
	`g‘MšCUHeight
()*
absP¬tIdxCU
;

66 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

68 
mTrD•thR–CU
[
i
] = 
š™TrD•thR–CU
;

69 cÚ¡ 
UIÁ
 
csx
=
	`g‘CompÚ’tSÿËX
(
	`CompÚ’tID
(
i
), 
mChromaFÜm©
);

70 cÚ¡ 
UIÁ
 
csy
=
	`g‘CompÚ’tSÿËY
(
	`CompÚ’tID
(
i
), 
mChromaFÜm©
);

71 
mOrigWidth
[
i
]=
mReù
[i].
width
 = (˜< 
	`g‘Numb”V®idCompÚ’ts
(
mChromaFÜm©
)è? (
pcCU
->
	`g‘Width
Ð
absP¬tIdxCU
è>> 
csx
) : 0;

72 
mReù
[
i
].
height
 = (˜< 
	`g‘Numb”V®idCompÚ’ts
(
mChromaFÜm©
)è? (
pcCU
->
	`g‘Height
(
absP¬tIdxCU
è>> 
csy
) : 0;

73 
mReù
[
i
].
x0
=0;

74 
mReù
[
i
].
y0
=0;

75 
mCodeAÎ
[
i
]=
Œue
;

76 
mOff£ts
[
i
]=
ba£Off£t444
>>(
csx
+
csy
);

78 
	}
}

82 
	gTComTURecur£
::
	$TComTURecur£
Ð
TComD©aCU
 *
pcCU
,

83 cÚ¡ 
UIÁ
 
absP¬tIdxCU
)

84 : 
	`TComTU
(
pcCU
, 
absP¬tIdxCU
,…cCU->
	`g‘D•th
(absPartIdxCU), 0)

85 { 
	}
}

89 
	gTComTU
::
	$TComTU
(
TComTU
 &
·»Á
, cÚ¡ 
BoÞ
 
bProûssLa¡OfLev–
, cÚ¡ 
TU_SPLIT_MODE
 
¥l™Mode
, cÚ¡ BoÞ 
¥l™AtCu¼’tD•th
, cÚ¡ 
CompÚ’tID
 
absP¬tIdxSourûCompÚ’t
)

90 : 
	`mChromaFÜm©
(
·»Á
.
mChromaFÜm©
),

91 
	`mbProûssLa¡OfLev–
(
bProûssLa¡OfLev–
),

92 
	`mCuD•th
(
·»Á
.
mCuD•th
),

93 
	`mSeùiÚ
(0),

94 
	`mS¶™Mode
(
¥l™Mode
),

95 
	`mAbsP¬tIdxCU
(
·»Á
.
mAbsP¬tIdxCU
),

96 
	`mAbsP¬tIdxTUR–CU
(
·»Á
.
	`G‘R–P¬tIdxTU
(
absP¬tIdxSourûCompÚ’t
)),

97 
	`mAbsP¬tIdxS‹p
(
¡d
::
max
<
UIÁ
>(1, (
·»Á
.
	`G‘AbsP¬tIdxNumP¬ts
(
absP¬tIdxSourûCompÚ’t
è>> 
·¹IdxS‹pShiá
[
¥l™Mode
]))),

98 
	`mpcCU
(
·»Á
.
mpcCU
),

99 
	`mLog2TrLumaSize
(
·»Á
.
mLog2TrLumaSize
 - ((
¥l™Mode
 !ð
QUAD_SPLIT
) ? 0 : 1)),

100 
	$mpP¬’t
(&
·»Á
)

102 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

104 
mTrD•thR–CU
[
i
] = 
·»Á
.mTrD•thR–CU[i] + ((
¥l™AtCu¼’tD•th
 || (
¥l™Mode
 =ð
DONT_SPLIT
)) ? 0 : 1);

107 ià(
mS¶™Mode
==
DONT_SPLIT
)

109 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

111 
mReù
[
i
] = (
·»Á
.mRect[i]);

112 
mOff£ts
[
i
]=
·»Á
.mOffsets[i];

113 
mCodeAÎ
[
i
]=
Œue
;

114 
mOrigWidth
[
i
]=
mReù
[i].
width
;

118 ià(
mS¶™Mode
==
VERTICAL_SPLIT
)

120 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

122 
mReù
[
i
].
x0
 = (
·»Á
.mRect[i].x0);

123 
mReù
[
i
].
y0
 = (
·»Á
.mRect[i].y0);

124 
mReù
[
i
].
width
 = (
·»Á
.mRect[i].width);

125 
mReù
[
i
].
height
 = (
·»Á
.mRect[i].height)>>1;

126 
mOff£ts
[
i
]=
·»Á
.mOffsets[i];

127 
mCodeAÎ
[
i
]=
Œue
;

128 
mOrigWidth
[
i
]=
mReù
[i].
width
;

133 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

135 
mReù
[
i
].
width
 = (
·»Á
.mRect[i].width >> 1);

136 
mReù
[
i
].
height
ð(
·»Á
.mRect[i].height>> 1);

137 
mReù
[
i
].
x0
=
·»Á
.mRect[i].x0;

138 
mReù
[
i
].
y0
=
·»Á
.mRect[i].y0;

139 
mOff£ts
[
i
]=
·»Á
.mOffsets[i];

141 ià((
mReù
[
i
].
width
 < 
MIN_TU_SIZE
 || mReù[i].
height
 < MIN_TU_SIZE) && mRect[i].width!=0)

143 cÚ¡ 
UIÁ
 
numP–s
=
mReù
[
i
].
width
 * mReù[i].
height
;

144 ià(
numP–s
 < (
MIN_TU_SIZE
*MIN_TU_SIZE))

147 
mReù
[
i
].
width
 = 
·»Á
.mRect[i].width;

148 
mReù
[
i
].
height
ð
·»Á
.mRect[i].height;

149 
mCodeAÎ
[
i
]=
çl£
;

150 
mTrD•thR–CU
[
i
]--;

152 ià(
mReù
[
i
].
width
 < mReù[i].
height
)

154 
mReù
[
i
].
width
=
MIN_TU_SIZE
;

155 
mReù
[
i
].
height
=
numP–s
/
MIN_TU_SIZE
;

156 
mCodeAÎ
[
i
]=
Œue
;

160 
mReù
[
i
].
height
=
MIN_TU_SIZE
;

161 
mReù
[
i
].
width
=
numP–s
/
MIN_TU_SIZE
;

162 
mCodeAÎ
[
i
]=
Œue
;

167 
mCodeAÎ
[
i
]=
Œue
;

170 
mOrigWidth
[
i
]=
mReù
[i].
width
;

171 ià(!
mCodeAÎ
[
i
] && 
mbProûssLa¡OfLev–
)

173 
mReù
[
i
].
width
=0;

176 
	}
}

178 
BoÞ
 
	gTComTURecur£
::
	$ÃxtSeùiÚ
(cÚ¡ 
TComTU
 &
·»Á
)

180 ià(
mS¶™Mode
==
DONT_SPLIT
)

182 
mSeùiÚ
++;

183  
çl£
;

187 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

189 
mOff£ts
[
i
]+=
mReù
[i].
width
*mReù[i].
height
;

190 ià(
mbProûssLa¡OfLev–
)

192 
mReù
[
i
].
width
=
mOrigWidth
[i];

194 
mReù
[
i
].
x0
+=mReù[i].
width
;

195 cÚ¡ 
TComReùªgË
 &
·»ÁReù
=
·»Á
.
	`g‘Reù
(
	`CompÚ’tID
(
i
));

196 ià(
mReù
[
i
].
x0
 >ð
·»ÁReù
.x0+·»ÁReù.
width
)

198 
mReù
[
i
].
x0
=
·»ÁReù
.x0;

199 
mReù
[
i
].
y0
+=mReù[i].
height
;

201 ià(!
mCodeAÎ
[
i
])

203 ià(!
mbProûssLa¡OfLev–
 || 
mSeùiÚ
!=2)

205 
mReù
[
i
].
width
=0;

209 
	`as£¹
(
mReù
[
COMPONENT_Cb
].
x0
==mReù[
COMPONENT_Cr
].x0);

210 
	`as£¹
(
mReù
[
COMPONENT_Cb
].
y0
==mReù[
COMPONENT_Cr
].y0);

211 
	`as£¹
(
mReù
[
COMPONENT_Cb
].
width
==mReù[
COMPONENT_Cr
].width);

212 
	`as£¹
(
mReù
[
COMPONENT_Cb
].
height
==mReù[
COMPONENT_Cr
].height);

214 
mAbsP¬tIdxTUR–CU
+=
mAbsP¬tIdxS‹p
;

215 
mSeùiÚ
++;

216  
mSeùiÚ
< (1<<
mS¶™Mode
);

218 
	}
}

221 
UIÁ
 
	gTComTU
::
	$G‘Equiv®’tLog2TrSize
(cÚ¡ 
CompÚ’tID
 
compID
) const

223  
g_aucCÚv”tToB™
[ 
	`g‘Reù
(
compID
).
height
 ] + 2;

224 
	}
}

227 
BoÞ
 
	gTComTU
::
	$u£DST
(cÚ¡ 
CompÚ’tID
 
compID
)

229 
TComD©aCU
 *cÚ¡ 
pcCU
 = 
	`g‘CU
();

230 cÚ¡ 
UIÁ
 
absP¬tIdx
 = 
	`G‘AbsP¬tIdxTU
(
compID
);

232  
	`isLuma
(
compID
è&& 
pcCU
->
	`isIÁ¿
(
absP¬tIdx
);

233 
	}
}

236 
BoÞ
 
	gTComTU
::
	$isNÚT¿nsfÜmedResidu®RÙ©ed
(cÚ¡ 
CompÚ’tID
 
compID
)

239  
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
()

240 && 
mReù
[
compID
].
width
 == 4

241 && 
	`g‘CU
()->
	`isIÁ¿
(
	`G‘AbsP¬tIdxTU
());

242 
	}
}

245 
UIÁ
 
	gTComTU
::
	$g‘GÞombRiûSti¡icsIndex
(cÚ¡ 
CompÚ’tID
 
compID
)

247 
TComD©aCU
 *cÚ¡ 
pcCU
 = 
	`g‘CU
();

248 cÚ¡ 
UIÁ
 
absP¬tIdx
 = 
	`G‘AbsP¬tIdxTU
(
compID
);

249 cÚ¡ 
BoÞ
 
ŒªsfÜmSk
 = 
pcCU
->
	`g‘T¿nsfÜmSk
(
absP¬tIdx
, 
compID
);

250 cÚ¡ 
BoÞ
 
ŒªsquªtBy·ss
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
absP¬tIdx
);

254 cÚ¡ 
UIÁ
 
chªÃlTy³Off£t
 = 
	`isChroma
(
compID
) ? 2 : 0;

255 cÚ¡ 
UIÁ
 
nÚT¿nsfÜmedOff£t
 = (
ŒªsfÜmSk
 || 
ŒªsquªtBy·ss
) ? 1 : 0;

259 cÚ¡ 
UIÁ
 
£ËùedIndex
 = 
chªÃlTy³Off£t
 + 
nÚT¿nsfÜmedOff£t
;

260 
	`as£¹
(
£ËùedIndex
 < 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
);

262  
£ËùedIndex
;

263 
	}
}

	@source/Lib/TLibCommon/TComTU.h

34 #iâdeà
__TCOMTU__


35 
	#__TCOMTU__


	)

37 
þass
 
	gTComTU
;

39 
	~"CommÚDef.h
"

40 
	~"TComReùªgË.h
"

41 
	~"TComChromaFÜm©.h
"

43 
þass
 
	gTComD©aCU
;

48 þas 
	cTComTU


50 
	mpublic
:

51 
	eTU_SPLIT_MODE
 { 
DONT_SPLIT
=0, 
	mVERTICAL_SPLIT
=1, 
	mQUAD_SPLIT
=2, 
	mNUMBER_OF_SPLIT_MODES
=3 } 
	tSPLIT_MODE
;

53 cÚ¡ 
UIÁ
 
	gNUMBER_OF_SECTIONS
[
NUMBER_OF_SPLIT_MODES
];

55 
	g´Ùeùed
:

56 
ChromaFÜm©
 
mChromaFÜm©
;

57 
BoÞ
 
	gmbProûssLa¡OfLev–
;

58 
UIÁ
 
	gmCuD•th
;

59 
UIÁ
 
	gmTrD•thR–CU
[
MAX_NUM_COMPONENT
];

60 
UIÁ
 
	gmSeùiÚ
;

61 
TU_SPLIT_MODE
 
	gmS¶™Mode
;

62 
TComReùªgË
 
	gmReù
[
MAX_NUM_COMPONENT
];

63 
BoÞ
 
	gmCodeAÎ
[
MAX_NUM_COMPONENT
];

64 
UIÁ
 
	gmOrigWidth
[
MAX_NUM_COMPONENT
];

65 
UIÁ
 
	gmOff£ts
[
MAX_NUM_COMPONENT
];

66 
UIÁ
 
	gmAbsP¬tIdxCU
;

67 
UIÁ
 
	gmAbsP¬tIdxTUR–CU
;

68 
UIÁ
 
	gmAbsP¬tIdxS‹p
;

69 
TComD©aCU
 *
	gmpcCU
;

70 
UIÁ
 
	gmLog2TrLumaSize
;

71 
TComTU
 *
	gmpP¬’t
;

73 
TComTU
(const TComTU &);

74 
	gTComTU
&
	gÝ”©Ü
=(cÚ¡ 
TComTU
 &);

76 
	gpublic
:

77 
TComTU
Ð
TComD©aCU
 *
pcCU
,

78 cÚ¡ 
UIÁ
 
absP¬tIdxCU
,

79 cÚ¡ 
UIÁ
 
cuD•th
,

80 cÚ¡ 
UIÁ
 
š™TrD•thR–CU
);

82 
	g´Ùeùed
:

83 
TComTU
ÐTComTU &
·»ÁLev–
,

84 cÚ¡ 
BoÞ
 
bProûssLa¡OfLev–
,

85 cÚ¡ 
TU_SPLIT_MODE
 
¥l™Mode
 = 
QUAD_SPLIT
,

86 cÚ¡ 
BoÞ
 
¥l™AtCu¼’tD•th
 = 
çl£
,

87 cÚ¡ 
CompÚ’tID
 
absP¬tIdxSourûCompÚ’t
 = 
COMPONENT_Y


90 
	gpublic
:

91 
TComTU
 *
	$P¬’t
(è{  
mpP¬’t
; 
	}
}

92 cÚ¡ 
TComTU
 *
	$P¬’t
(ècÚ¡ {  
mpP¬’t
; 
	}
}

94 
UIÁ
 
	$g‘CÛffic›ÁOff£t
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mOff£ts
[compID]; 
	}
}

96 cÚ¡ 
	gTComReùªgË
 &
	$g‘Reù
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mReù
[compID]; 
	}
}

98 
BoÞ
 
	$ProûssšgAÎQuad¿Ás
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mCodeAÎ
[compID]; 
	}
}

99 
BoÞ
 
	$ProûssCompÚ’tSeùiÚ
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mReù
[compID].
width
 !ð0; 
	}
}

100 
BoÞ
 
	$ProûssChªÃlSeùiÚ
(cÚ¡ 
ChªÃlTy³
 
chTy³
ècÚ¡ {  
mReù
[chTy³].
width
 !ð0; 
	}
}

101 
UIÁ
 
	$G‘SeùiÚNumb”
(ècÚ¡ {  
mSeùiÚ
; 
	}
}

103 
UIÁ
 
	$g‘CUD•th
(ècÚ¡ {  
mCuD•th
; 
	}
}

105 
UIÁ
 
	$G‘T¿nsfÜmD•thTÙ®
(ècÚ¡ {  
mCuD•th
+
	`G‘T¿nsfÜmD•thR–
(); 
	}
}

106 
UIÁ
 
	$G‘T¿nsfÜmD•thTÙ®Adj
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mCuD•th
+
	`G‘T¿nsfÜmD•thR–Adj
(compID); 
	}
}

108 
UIÁ
 
	$G‘T¿nsfÜmD•thR–
(ècÚ¡ {  
mTrD•thR–CU
[
COMPONENT_Y
]; 
	}
}

109 
UIÁ
 
	$G‘T¿nsfÜmD•thR–Adj
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
mTrD•thR–CU
[compID]; 
	}
}

110 
UIÁ
 
	$G‘T¿nsfÜmD•thR–Adj
(cÚ¡ 
ChªÃlTy³
 
chTy³
) const

112 
	`as£¹
(
	`isLuma
(
chTy³
è|| (
mTrD•thR–CU
[
COMPONENT_Cb
] =ðmTrD•thR–CU[
COMPONENT_Cr
]));

113  
mTrD•thR–CU
[
	`isLuma
(
chTy³
è? 
COMPONENT_Y
 : 
COMPONENT_Cb
];

114 
	}
}

116 
UIÁ
 
	$G‘AbsP¬tIdxCU
(ècÚ¡ {  
mAbsP¬tIdxCU
; 
	}
}

117 
UIÁ
 
	$G‘R–P¬tIdxTU
(ècÚ¡ {  
mAbsP¬tIdxTUR–CU
; 
	}
}

118 
UIÁ
 
	$G‘R–P¬tIdxTU
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
	`ProûssšgAÎQuad¿Ás
(compIDè? 
mAbsP¬tIdxTUR–CU
 : (mAbsP¬tIdxTUR–CU & (~0x3)); 
	}
}

119 
UIÁ
 
	$G‘AbsP¬tIdxTU
(ècÚ¡ {  
	`G‘AbsP¬tIdxCU
(è+ 
	`G‘R–P¬tIdxTU
(); 
	}
}

120 
UIÁ
 
	$G‘AbsP¬tIdxTU
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
	`G‘AbsP¬tIdxCU
(è+ 
	`G‘R–P¬tIdxTU
(compID); 
	}
}

121 
UIÁ
 
	$G‘AbsP¬tIdxNumP¬ts
(ècÚ¡ {  
mAbsP¬tIdxS‹p
; 
	}
}

122 
UIÁ
 
	$G‘AbsP¬tIdxNumP¬ts
(cÚ¡ 
CompÚ’tID
 
compID
ècÚ¡ {  
	`ProûssšgAÎQuad¿Ás
(compIDè? 
mAbsP¬tIdxS‹p
 : (mAbsP¬tIdxS‹°* 
NUMBER_OF_SECTIONS
[
mS¶™Mode
]); 
	}
}

124 
ChromaFÜm©
 
	$G‘ChromaFÜm©
(ècÚ¡ {  
mChromaFÜm©
; 
	}
}

126 
TComD©aCU
 *
	$g‘CU
(è{  
mpcCU
; 
	}
}

127 cÚ¡ 
TComD©aCU
 *
	$g‘CU
(ècÚ¡ {  
mpcCU
; 
	}
}

128 
BoÞ
 
	$IsLa¡SeùiÚ
(ècÚ¡ {  
mSeùiÚ
+1>=((1<<
mS¶™Mode
)); 
	}
}

130 
UIÁ
 
	$G‘Log2LumaTrSize
(ècÚ¡ {  
mLog2TrLumaSize
; 
	}
}

131 
UIÁ
 
	$G‘Equiv®’tLog2TrSize
(cÚ¡ 
CompÚ’tID
 
compID
) const;

132 
TU_SPLIT_MODE
 
	$G‘S¶™Mode
(ècÚ¡ {  
mS¶™Mode
; 
	}
}

134 
BoÞ
 
u£DST
(cÚ¡ 
CompÚ’tID
 
compID
);

135 
BoÞ
 
isNÚT¿nsfÜmedResidu®RÙ©ed
(cÚ¡ 
CompÚ’tID
 
compID
);

137 
UIÁ
 
g‘GÞombRiûSti¡icsIndex
(cÚ¡ 
CompÚ’tID
 
compID
);

142 þas 
	cTComTURecur£
 : 
public
 
TComTU


144 
public
:

146 
	$TComTURecur£
Ð
TComD©aCU
 *
pcCU
,

147 cÚ¡ 
UIÁ
 
absP¬tIdxCU
,

148 cÚ¡ 
UIÁ
 
fÜûdD•thOfCU
)

149 : 
	$TComTU
(
pcCU
, 
absP¬tIdxCU
, 
fÜûdD•thOfCU
, 0) { }

151 
	`TComTURecur£
Ð
TComD©aCU
 *
pcCU
,

152 cÚ¡ 
UIÁ
 
absP¬tIdxCU
);

154 
	$TComTURecur£
Ð
TComTU
 &
·»ÁLev–
,

155 cÚ¡ 
BoÞ
 
bProûssLa¡OfLev–
,

156 cÚ¡ 
TU_SPLIT_MODE
 
¥l™Mode
 = 
QUAD_SPLIT
,

157 cÚ¡ 
BoÞ
 
¥l™AtCu¼’tD•th
 = 
çl£
,

158 cÚ¡ 
CompÚ’tID
 
absP¬tIdxSourûCompÚ’t
 = 
COMPONENT_Y


160 : 
	$TComTU
(
·»ÁLev–
, 
bProûssLa¡OfLev–
, 
¥l™Mode
, 
¥l™AtCu¼’tD•th
, 
absP¬tIdxSourûCompÚ’t
è{ 
	}
}

162 
BoÞ
 
ÃxtSeùiÚ
(cÚ¡ 
TComTU
 &
·»Á
);

	@source/Lib/TLibCommon/TComTrQuant.cpp

38 
	~<¡dlib.h
>

39 
	~<m©h.h
>

40 
	~<lim™s
>

41 
	~<memÜy.h
>

42 
	~"TComTrQuªt.h
"

43 
	~"TComPic.h
"

44 
	~"CÚ‹xtTabËs.h
"

45 
	~"TComTU.h
"

46 
	~"Debug.h
"

50 
IÁ
 
	miNNZbefÜePos0
;

51 
DoubË
 
	md64CodedLev–ªdDi¡
;

52 
DoubË
 
	md64UncodedDi¡
;

53 
DoubË
 
	md64SigCo¡
;

54 
DoubË
 
	md64SigCo¡_0
;

55 } 
	tcÛffGroupRDSts
;

64 
	#RDOQ_CHROMA
 1

65 

	)

71 
	gQpP¬am
::
	$QpP¬am
(cÚ¡ 
IÁ
 
qpy
,

72 cÚ¡ 
ChªÃlTy³
 
chTy³
,

73 cÚ¡ 
IÁ
 
qpBdOff£t
,

74 cÚ¡ 
IÁ
 
chromaQPOff£t
,

75 cÚ¡ 
ChromaFÜm©
 
chFmt
 )

77 
IÁ
 
ba£Qp
;

79 if(
	`isLuma
(
chTy³
))

81 
ba£Qp
 = 
qpy
 + 
qpBdOff£t
;

85 
ba£Qp
 = 
	`Cl3
Ð-
qpBdOff£t
, (
chromaQPM­pšgTabËSize
 - 1), 
qpy
 + 
chromaQPOff£t
 );

87 if(
ba£Qp
 < 0)

89 
ba£Qp
 = ba£Q°+ 
qpBdOff£t
;

93 
ba£Qp
 = 
	`g‘SÿËdChromaQP
(ba£Qp, 
chFmt
è+ 
qpBdOff£t
;

97 
Qp
 =
ba£Qp
;

98 
³r
=
ba£Qp
/6;

99 
»m
=
ba£Qp
%6;

100 
	}
}

102 
	gQpP¬am
::
	$QpP¬am
(cÚ¡ 
TComD©aCU
 &
cu
, cÚ¡ 
CompÚ’tID
 
compID
)

104 
IÁ
 
chromaQpOff£t
 = 0;

106 ià(
	`isChroma
(
compID
))

108 
chromaQpOff£t
 +ð
cu
.
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘QpOff£t
(
compID
);

109 
chromaQpOff£t
 +ð
cu
.
	`g‘Sliû
()->
	`g‘SliûChromaQpD–
(
compID
);

111 
chromaQpOff£t
 +ð
cu
.
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÁry
(cu.
	`g‘ChromaQpAdj
(0)).
u
.
off£t
[
	`IÁ
(
compID
)-1];

114 *
this
 = 
	`QpP¬am
(
cu
.
	`g‘QP
( 0 ),

115 
	`toChªÃlTy³
(
compID
),

116 
cu
.
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
	`toChªÃlTy³
(
compID
)),

117 
chromaQpOff£t
,

118 
cu
.
	`g‘Pic
()->
	`g‘ChromaFÜm©
());

119 
	}
}

126 
	gTComTrQuªt
::
	$TComTrQuªt
()

129 
m_¶TempCÛff
 = 
Ãw
 
TCÛff
[ 
MAX_CU_SIZE
*MAX_CU_SIZE ];

132 
m_pcE¡B™sSbac
 = 
Ãw
 
e¡B™sSbacSŒuù
;

133 
	`š™SÿlšgLi¡
();

134 
	}
}

136 
	gTComTrQuªt
::~
	$TComTrQuªt
()

139 iàÐ
m_¶TempCÛff
 )

141 
d–‘e
 [] 
m_¶TempCÛff
;

142 
m_¶TempCÛff
 = 
NULL
;

146 iàÐ
m_pcE¡B™sSbac
 )

148 
d–‘e
 
m_pcE¡B™sSbac
;

150 
	`de¡roySÿlšgLi¡
();

151 
	}
}

153 #ià
ADAPTIVE_QP_SELECTION


154 
Void
 
	gTComTrQuªt
::
	$¡ÜeSliûQpNext
(
TComSliû
* 
pcSliû
)

158 
IÁ
 
qpBa£
 = 
pcSliû
->
	`g‘SliûQpBa£
();

159 
IÁ
 
¦iûQpu£d
 = 
pcSliû
->
	`g‘SliûQp
();

160 
IÁ
 
¦iûQ²ext
;

161 
DoubË
 
®pha
 = 
qpBa£
 < 17 ? 0.5 : 1;

163 
IÁ
 
út
=0;

164 
IÁ
 
u
=1; u<=
LEVEL_RANGE
; u++)

166 
út
 +ð
m_¦iûN§m¶es
[
u
] ;

169 ifÐ!
m_u£RDOQ
 )

171 
¦iûQpu£d
 = 
qpBa£
;

172 
®pha
 = 0.5;

175 ifÐ
út
 > 120 )

177 
DoubË
 
sum
 = 0;

178 
IÁ
 
k
 = 0;

179 
IÁ
 
u
=1; u<
LEVEL_RANGE
; u++)

181 
sum
 +ð
u
*
m_¦iûSumC
[u];

182 
k
 +ð
u
*u*
m_¦iûN§m¶es
[u];

185 
IÁ
 
v
;

186 
DoubË
 
q
[
MAX_QP
+1] ;

187 
v
=0; v<=
MAX_QP
; v++)

189 
q
[
v
] = (
DoubË
)(
g_švQuªtSÿËs
[v%6] * (1<<(v/6)))/64 ;

192 
DoubË
 
qÃxt
 = 
sum
/
k
 * 
q
[
¦iûQpu£d
] / (1<<
ARL_C_PRECISION
);

194 
v
=0; v<
MAX_QP
; v++)

196 if(
qÃxt
 < 
®pha
 * 
q
[
v
] + (1 -‡lpha) * q[v+1] )

201 
¦iûQ²ext
 = 
	`Cl3
(
¦iûQpu£d
 - 3, sliûQpu£d + 3, 
v
);

205 
¦iûQ²ext
 = 
¦iûQpu£d
;

208 
m_qpD–
[
qpBa£
] = 
¦iûQ²ext
 - qpBase;

209 
	}
}

211 
Void
 
	gTComTrQuªt
::
	$š™SliûQpD–
()

213 
IÁ
 
qp
=0; qp<=
MAX_QP
; qp++)

215 
m_qpD–
[
qp
] = qp < 17 ? 0 : 1;

217 
	}
}

219 
Void
 
	gTComTrQuªt
::
	$þ—rSliûARLCÁ
()

221 
	`mem£t
(
m_¦iûSumC
, 0, (
DoubË
)*(
LEVEL_RANGE
+1));

222 
	`mem£t
(
m_¦iûN§m¶es
, 0, (
IÁ
)*(
LEVEL_RANGE
+1));

223 
	}
}

228 #ià
MATRIX_MULT


236 
Void
 
	$xTr
(
IÁ
 
b™D•th
, 
P–
 *
block
, 
TCÛff
 *
cÛff
, 
UIÁ
 
uiSŒide
, UIÁ 
uiTrSize
, 
BoÞ
 
u£DST
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
)

238 
UIÁ
 
i
,
j
,
k
;

239 
TCÛff
 
iSum
;

240 
TCÛff
 
tmp
[
MAX_TU_SIZE
 * MAX_TU_SIZE];

241 cÚ¡ 
TM©rixCÛff
 *
iT
;

242 
UIÁ
 
uiLog2TrSize
 = 
g_aucCÚv”tToB™
[ 
uiTrSize
 ] + 2;

244 ià(
uiTrSize
==4)

246 
iT
 = (
u£DST
 ? 
g_as_DST_MAT_4
[
TRANSFORM_FORWARD
][0] : 
g_aiT4
[TRANSFORM_FORWARD][0]);

248 ià(
uiTrSize
==8)

250 
iT
 = 
g_aiT8
[
TRANSFORM_FORWARD
][0];

252 ià(
uiTrSize
==16)

254 
iT
 = 
g_aiT16
[
TRANSFORM_FORWARD
][0];

256 ià(
uiTrSize
==32)

258 
iT
 = 
g_aiT32
[
TRANSFORM_FORWARD
][0];

262 
	`as£¹
(0);

265 cÚ¡ 
IÁ
 
TRANSFORM_MATRIX_SHIFT
 = 
g_ŒªsfÜmM©rixShiá
[
TRANSFORM_FORWARD
];

267 cÚ¡ 
IÁ
 
shiá_1¡
 = (
uiLog2TrSize
 + 
b™D•th
 + 
TRANSFORM_MATRIX_SHIFT
è- 
maxLog2TrDyÇmicRªge
;

268 cÚ¡ 
IÁ
 
shiá_2nd
 = 
uiLog2TrSize
 + 
TRANSFORM_MATRIX_SHIFT
;

269 cÚ¡ 
IÁ
 
add_1¡
 = (
shiá_1¡
>0) ? (1<<(shift_1st-1)) : 0;

270 cÚ¡ 
IÁ
 
add_2nd
 = 1<<(
shiá_2nd
-1);

274 
i
=0; i<
uiTrSize
; i++)

276 
j
=0; j<
uiTrSize
; j++)

278 
iSum
 = 0;

279 
k
=0; k<
uiTrSize
; k++)

281 
iSum
 +ð
iT
[
i
*
uiTrSize
+
k
]*
block
[
j
*
uiSŒide
+k];

283 
tmp
[
i
*
uiTrSize
+
j
] = (
iSum
 + 
add_1¡
)>>
shiá_1¡
;

288 
i
=0; i<
uiTrSize
; i++)

290 
j
=0; j<
uiTrSize
; j++)

292 
iSum
 = 0;

293 
k
=0; k<
uiTrSize
; k++)

295 
iSum
 +ð
iT
[
i
*
uiTrSize
+
k
]*
tmp
[
j
*uiTrSize+k];

297 
cÛff
[
i
*
uiTrSize
+
j
] = (
iSum
 + 
add_2nd
)>>
shiá_2nd
;

300 
	}
}

309 
Void
 
	$xITr
(
IÁ
 
b™D•th
, 
TCÛff
 *
cÛff
, 
P–
 *
block
, 
UIÁ
 
uiSŒide
, UIÁ 
uiTrSize
, 
BoÞ
 
u£DST
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
)

311 
UIÁ
 
i
,
j
,
k
;

312 
TCÛff
 
iSum
;

313 
TCÛff
 
tmp
[
MAX_TU_SIZE
 * MAX_TU_SIZE];

314 cÚ¡ 
TM©rixCÛff
 *
iT
;

316 ià(
uiTrSize
==4)

318 
iT
 = (
u£DST
 ? 
g_as_DST_MAT_4
[
TRANSFORM_INVERSE
][0] : 
g_aiT4
[TRANSFORM_INVERSE][0]);

320 ià(
uiTrSize
==8)

322 
iT
 = 
g_aiT8
[
TRANSFORM_INVERSE
][0];

324 ià(
uiTrSize
==16)

326 
iT
 = 
g_aiT16
[
TRANSFORM_INVERSE
][0];

328 ià(
uiTrSize
==32)

330 
iT
 = 
g_aiT32
[
TRANSFORM_INVERSE
][0];

334 
	`as£¹
(0);

337 cÚ¡ 
IÁ
 
TRANSFORM_MATRIX_SHIFT
 = 
g_ŒªsfÜmM©rixShiá
[
TRANSFORM_INVERSE
];

339 cÚ¡ 
IÁ
 
shiá_1¡
 = 
TRANSFORM_MATRIX_SHIFT
 + 1;

340 cÚ¡ 
IÁ
 
shiá_2nd
 = (
TRANSFORM_MATRIX_SHIFT
 + 
maxLog2TrDyÇmicRªge
 - 1è- 
b™D•th
;

341 cÚ¡ 
TCÛff
 
þMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

342 cÚ¡ 
TCÛff
 
þMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

343 
	`as£¹
(
shiá_2nd
>=0);

344 cÚ¡ 
IÁ
 
add_1¡
 = 1<<(
shiá_1¡
-1);

345 cÚ¡ 
IÁ
 
add_2nd
 = (
shiá_2nd
>0) ? (1<<(shift_2nd-1)) : 0;

348 
i
=0; i<
uiTrSize
; i++)

350 
j
=0; j<
uiTrSize
; j++)

352 
iSum
 = 0;

353 
k
=0; k<
uiTrSize
; k++)

355 
iSum
 +ð
iT
[
k
*
uiTrSize
+
i
]*
cÛff
[k*uiTrSize+
j
];

359 
tmp
[
i
*
uiTrSize
+
j
] = 
Cl3
<
TCÛff
>(
þMšimum
, 
þMaximum
, (
iSum
 + 
add_1¡
)>>
shiá_1¡
);

364 
i
=0; i<
uiTrSize
; i++)

366 
j
=0; j<
uiTrSize
; j++)

368 
iSum
 = 0;

369 
k
=0; k<
uiTrSize
; k++)

371 
iSum
 +ð
iT
[
k
*
uiTrSize
+
j
]*
tmp
[
i
*uiTrSize+k];

374 
block
[
i
*
uiSŒide
+
j
] = 
Cl3
<
TCÛff
>(
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
(), (
iSum
 + 
add_2nd
)>>
shiá_2nd
);

377 
	}
}

388 
Void
 
	$·¹ŸlBu‰”æy4
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
)

390 
IÁ
 
j
;

391 
TCÛff
 
E
[2],
O
[2];

392 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

394 
j
=0; j<
lše
; j++)

397 
E
[0] = 
¤c
[0] + src[3];

398 
O
[0] = 
¤c
[0] - src[3];

399 
E
[1] = 
¤c
[1] + src[2];

400 
O
[1] = 
¤c
[1] - src[2];

402 
d¡
[0] = (
g_aiT4
[
TRANSFORM_FORWARD
][0][0]*
E
[0] + g_aiT4[TRANSFORM_FORWARD][0][1]*E[1] + 
add
)>>
shiá
;

403 
d¡
[2*
lše
] = (
g_aiT4
[
TRANSFORM_FORWARD
][2][0]*
E
[0] + g_aiT4[TRANSFORM_FORWARD][2][1]*E[1] + 
add
)>>
shiá
;

404 
d¡
[
lše
] = (
g_aiT4
[
TRANSFORM_FORWARD
][1][0]*
O
[0] + g_aiT4[TRANSFORM_FORWARD][1][1]*O[1] + 
add
)>>
shiá
;

405 
d¡
[3*
lše
] = (
g_aiT4
[
TRANSFORM_FORWARD
][3][0]*
O
[0] + g_aiT4[TRANSFORM_FORWARD][3][1]*O[1] + 
add
)>>
shiá
;

407 
¤c
 += 4;

408 
d¡
 ++;

410 
	}
}

414 
Void
 
	$ç¡FÜw¬dD¡
(
TCÛff
 *
block
, TCÛfà*
cÛff
, 
IÁ
 
shiá
)

416 
IÁ
 
i
;

417 
TCÛff
 
c
[4];

418 
TCÛff
 
ºd_çùÜ
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

419 
i
=0; i<4; i++)

422 
c
[0] = 
block
[4*
i
+0];

423 
c
[1] = 
block
[4*
i
+1];

424 
c
[2] = 
block
[4*
i
+2];

425 
c
[3] = 
block
[4*
i
+3];

427 
IÁ
 
row
 = 0;„ow < 4;„ow++)

429 
TCÛff
 
»suÉ
 = 0;

430 
IÁ
 
cÞumn
 = 0; column < 4; column++)

432 
»suÉ
 +ð
c
[
cÞumn
] * 
g_as_DST_MAT_4
[
TRANSFORM_FORWARD
][
row
][column];

435 
cÛff
[(
row
 * 4è+ 
i
] = 
	`rightShiá
((
»suÉ
 + 
ºd_çùÜ
), 
shiá
);

438 
	}
}

440 
Void
 
	$ç¡Inv”£D¡
(
TCÛff
 *
tmp
, TCÛfà*
block
, 
IÁ
 
shiá
, cÚ¡ TCÛfà
ouutMšimum
, cÚ¡ TCÛfà
ouutMaximum
)

442 
IÁ
 
i
;

443 
TCÛff
 
c
[4];

444 
TCÛff
 
ºd_çùÜ
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

445 
i
=0; i<4; i++)

448 
c
[0] = 
tmp
[ 
i
];

449 
c
[1] = 
tmp
[4 +
i
];

450 
c
[2] = 
tmp
[8 +
i
];

451 
c
[3] = 
tmp
[12+
i
];

453 
IÁ
 
cÞumn
 = 0; column < 4; column++)

455 
TCÛff
 &
»suÉ
 = 
block
[(
i
 * 4è+ 
cÞumn
];

457 
»suÉ
 = 0;

458 
IÁ
 
row
 = 0;„ow < 4;„ow++)

460 
»suÉ
 +ð
c
[
row
] * 
g_as_DST_MAT_4
[
TRANSFORM_INVERSE
][row][
cÞumn
];

463 
»suÉ
 = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, 
	`rightShiá
(ÔesuÉ + 
ºd_çùÜ
), 
shiá
));

466 
	}
}

476 
Void
 
	$·¹ŸlBu‰”æyInv”£4
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
, cÚ¡ TCÛfà
ouutMšimum
, cÚ¡ TCÛfà
ouutMaximum
)

478 
IÁ
 
j
;

479 
TCÛff
 
E
[2],
O
[2];

480 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

482 
j
=0; j<
lše
; j++)

485 
O
[0] = 
g_aiT4
[
TRANSFORM_INVERSE
][1][0]*
¤c
[
lše
] + g_aiT4[TRANSFORM_INVERSE][3][0]*src[3*line];

486 
O
[1] = 
g_aiT4
[
TRANSFORM_INVERSE
][1][1]*
¤c
[
lše
] + g_aiT4[TRANSFORM_INVERSE][3][1]*src[3*line];

487 
E
[0] = 
g_aiT4
[
TRANSFORM_INVERSE
][0][0]*
¤c
[0] + g_aiT4[TRANSFORM_INVERSE][2][0]*¤c[2*
lše
];

488 
E
[1] = 
g_aiT4
[
TRANSFORM_INVERSE
][0][1]*
¤c
[0] + g_aiT4[TRANSFORM_INVERSE][2][1]*¤c[2*
lše
];

491 
d¡
[0] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[0] + 
O
[0] + 
add
)>>
shiá
 );

492 
d¡
[1] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[1] + 
O
[1] + 
add
)>>
shiá
 );

493 
d¡
[2] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[1] - 
O
[1] + 
add
)>>
shiá
 );

494 
d¡
[3] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[0] - 
O
[0] + 
add
)>>
shiá
 );

496 
¤c
 ++;

497 
d¡
 += 4;

499 
	}
}

507 
Void
 
	$·¹ŸlBu‰”æy8
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
)

509 
IÁ
 
j
,
k
;

510 
TCÛff
 
E
[4],
O
[4];

511 
TCÛff
 
EE
[2],
EO
[2];

512 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

514 
j
=0; j<
lše
; j++)

517 
k
=0;k<4;k++)

519 
E
[
k
] = 
¤c
[k] + src[7-k];

520 
O
[
k
] = 
¤c
[k] - src[7-k];

523 
EE
[0] = 
E
[0] + E[3];

524 
EO
[0] = 
E
[0] - E[3];

525 
EE
[1] = 
E
[1] + E[2];

526 
EO
[1] = 
E
[1] - E[2];

528 
d¡
[0] = (
g_aiT8
[
TRANSFORM_FORWARD
][0][0]*
EE
[0] + g_aiT8[TRANSFORM_FORWARD][0][1]*EE[1] + 
add
)>>
shiá
;

529 
d¡
[4*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][4][0]*
EE
[0] + g_aiT8[TRANSFORM_FORWARD][4][1]*EE[1] + 
add
)>>
shiá
;

530 
d¡
[2*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][2][0]*
EO
[0] + g_aiT8[TRANSFORM_FORWARD][2][1]*EO[1] + 
add
)>>
shiá
;

531 
d¡
[6*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][6][0]*
EO
[0] + g_aiT8[TRANSFORM_FORWARD][6][1]*EO[1] + 
add
)>>
shiá
;

533 
d¡
[
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][1][0]*
O
[0] + g_aiT8[TRANSFORM_FORWARD][1][1]*O[1] + g_aiT8[TRANSFORM_FORWARD][1][2]*O[2] + g_aiT8[TRANSFORM_FORWARD][1][3]*O[3] + 
add
)>>
shiá
;

534 
d¡
[3*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][3][0]*
O
[0] + g_aiT8[TRANSFORM_FORWARD][3][1]*O[1] + g_aiT8[TRANSFORM_FORWARD][3][2]*O[2] + g_aiT8[TRANSFORM_FORWARD][3][3]*O[3] + 
add
)>>
shiá
;

535 
d¡
[5*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][5][0]*
O
[0] + g_aiT8[TRANSFORM_FORWARD][5][1]*O[1] + g_aiT8[TRANSFORM_FORWARD][5][2]*O[2] + g_aiT8[TRANSFORM_FORWARD][5][3]*O[3] + 
add
)>>
shiá
;

536 
d¡
[7*
lše
] = (
g_aiT8
[
TRANSFORM_FORWARD
][7][0]*
O
[0] + g_aiT8[TRANSFORM_FORWARD][7][1]*O[1] + g_aiT8[TRANSFORM_FORWARD][7][2]*O[2] + g_aiT8[TRANSFORM_FORWARD][7][3]*O[3] + 
add
)>>
shiá
;

538 
¤c
 += 8;

539 
d¡
 ++;

541 
	}
}

551 
Void
 
	$·¹ŸlBu‰”æyInv”£8
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
, cÚ¡ TCÛfà
ouutMšimum
, cÚ¡ TCÛfà
ouutMaximum
)

553 
IÁ
 
j
,
k
;

554 
TCÛff
 
E
[4],
O
[4];

555 
TCÛff
 
EE
[2],
EO
[2];

556 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

558 
j
=0; j<
lše
; j++)

561 
k
=0;k<4;k++)

563 
O
[
k
] = 
g_aiT8
[
TRANSFORM_INVERSE
][ 1][k]*
¤c
[
lše
] + g_aiT8[TRANSFORM_INVERSE][ 3][k]*src[3*line] +

564 
g_aiT8
[
TRANSFORM_INVERSE
][ 5][
k
]*
¤c
[5*
lše
] + g_aiT8[TRANSFORM_INVERSE][ 7][k]*src[7*line];

567 
EO
[0] = 
g_aiT8
[
TRANSFORM_INVERSE
][2][0]*
¤c
[ 2*
lše
 ] + g_aiT8[TRANSFORM_INVERSE][6][0]*src[ 6*line ];

568 
EO
[1] = 
g_aiT8
[
TRANSFORM_INVERSE
][2][1]*
¤c
[ 2*
lše
 ] + g_aiT8[TRANSFORM_INVERSE][6][1]*src[ 6*line ];

569 
EE
[0] = 
g_aiT8
[
TRANSFORM_INVERSE
][0][0]*
¤c
[ 0 ] + g_aiT8[TRANSFORM_INVERSE][4][0]*¤c[ 4*
lše
 ];

570 
EE
[1] = 
g_aiT8
[
TRANSFORM_INVERSE
][0][1]*
¤c
[ 0 ] + g_aiT8[TRANSFORM_INVERSE][4][1]*¤c[ 4*
lše
 ];

573 
E
[0] = 
EE
[0] + 
EO
[0];

574 
E
[3] = 
EE
[0] - 
EO
[0];

575 
E
[1] = 
EE
[1] + 
EO
[1];

576 
E
[2] = 
EE
[1] - 
EO
[1];

577 
k
=0;k<4;k++)

579 
d¡
[ 
k
 ] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[k] + 
O
[k] + 
add
)>>
shiá
 );

580 
d¡
[ 
k
+4 ] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[3-k] - 
O
[3-k] + 
add
)>>
shiá
 );

582 
¤c
 ++;

583 
d¡
 += 8;

585 
	}
}

593 
Void
 
	$·¹ŸlBu‰”æy16
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
)

595 
IÁ
 
j
,
k
;

596 
TCÛff
 
E
[8],
O
[8];

597 
TCÛff
 
EE
[4],
EO
[4];

598 
TCÛff
 
EEE
[2],
EEO
[2];

599 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

601 
j
=0; j<
lše
; j++)

604 
k
=0;k<8;k++)

606 
E
[
k
] = 
¤c
[k] + src[15-k];

607 
O
[
k
] = 
¤c
[k] - src[15-k];

610 
k
=0;k<4;k++)

612 
EE
[
k
] = 
E
[k] + E[7-k];

613 
EO
[
k
] = 
E
[k] - E[7-k];

616 
EEE
[0] = 
EE
[0] + EE[3];

617 
EEO
[0] = 
EE
[0] - EE[3];

618 
EEE
[1] = 
EE
[1] + EE[2];

619 
EEO
[1] = 
EE
[1] - EE[2];

621 
d¡
[ 0 ] = (
g_aiT16
[
TRANSFORM_FORWARD
][ 0][0]*
EEE
[0] + g_aiT16[TRANSFORM_FORWARD][ 0][1]*EEE[1] + 
add
)>>
shiá
;

622 
d¡
[ 8*
lše
 ] = (
g_aiT16
[
TRANSFORM_FORWARD
][ 8][0]*
EEE
[0] + g_aiT16[TRANSFORM_FORWARD][ 8][1]*EEE[1] + 
add
)>>
shiá
;

623 
d¡
[ 4*
lše
 ] = (
g_aiT16
[
TRANSFORM_FORWARD
][ 4][0]*
EEO
[0] + g_aiT16[TRANSFORM_FORWARD][ 4][1]*EEO[1] + 
add
)>>
shiá
;

624 
d¡
[ 12*
lše
] = (
g_aiT16
[
TRANSFORM_FORWARD
][12][0]*
EEO
[0] + g_aiT16[TRANSFORM_FORWARD][12][1]*EEO[1] + 
add
)>>
shiá
;

626 
k
=2;k<16;k+=4)

628 
d¡
[ 
k
*
lše
 ] = (
g_aiT16
[
TRANSFORM_FORWARD
][k][0]*
EO
[0] + g_aiT16[TRANSFORM_FORWARD][k][1]*EO[1] +

629 
g_aiT16
[
TRANSFORM_FORWARD
][
k
][2]*
EO
[2] + g_aiT16[TRANSFORM_FORWARD][k][3]*EO[3] + 
add
)>>
shiá
;

632 
k
=1;k<16;k+=2)

634 
d¡
[ 
k
*
lše
 ] = (
g_aiT16
[
TRANSFORM_FORWARD
][k][0]*
O
[0] + g_aiT16[TRANSFORM_FORWARD][k][1]*O[1] +

635 
g_aiT16
[
TRANSFORM_FORWARD
][
k
][2]*
O
[2] + g_aiT16[TRANSFORM_FORWARD][k][3]*O[3] +

636 
g_aiT16
[
TRANSFORM_FORWARD
][
k
][4]*
O
[4] + g_aiT16[TRANSFORM_FORWARD][k][5]*O[5] +

637 
g_aiT16
[
TRANSFORM_FORWARD
][
k
][6]*
O
[6] + g_aiT16[TRANSFORM_FORWARD][k][7]*O[7] + 
add
)>>
shiá
;

640 
¤c
 += 16;

641 
d¡
 ++;

644 
	}
}

654 
Void
 
	$·¹ŸlBu‰”æyInv”£16
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
, cÚ¡ TCÛfà
ouutMšimum
, cÚ¡ TCÛfà
ouutMaximum
)

656 
IÁ
 
j
,
k
;

657 
TCÛff
 
E
[8],
O
[8];

658 
TCÛff
 
EE
[4],
EO
[4];

659 
TCÛff
 
EEE
[2],
EEO
[2];

660 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

662 
j
=0; j<
lše
; j++)

665 
k
=0;k<8;k++)

667 
O
[
k
] = 
g_aiT16
[
TRANSFORM_INVERSE
][ 1][k]*
¤c
[ 
lše
] + g_aiT16[TRANSFORM_INVERSE][ 3][k]*src[ 3*line] +

668 
g_aiT16
[
TRANSFORM_INVERSE
][ 5][
k
]*
¤c
[ 5*
lše
] + g_aiT16[TRANSFORM_INVERSE][ 7][k]*src[ 7*line] +

669 
g_aiT16
[
TRANSFORM_INVERSE
][ 9][
k
]*
¤c
[ 9*
lše
] + g_aiT16[TRANSFORM_INVERSE][11][k]*src[11*line] +

670 
g_aiT16
[
TRANSFORM_INVERSE
][13][
k
]*
¤c
[13*
lše
] + g_aiT16[TRANSFORM_INVERSE][15][k]*src[15*line];

672 
k
=0;k<4;k++)

674 
EO
[
k
] = 
g_aiT16
[
TRANSFORM_INVERSE
][ 2][k]*
¤c
[ 2*
lše
] + g_aiT16[TRANSFORM_INVERSE][ 6][k]*src[ 6*line] +

675 
g_aiT16
[
TRANSFORM_INVERSE
][10][
k
]*
¤c
[10*
lše
] + g_aiT16[TRANSFORM_INVERSE][14][k]*src[14*line];

677 
EEO
[0] = 
g_aiT16
[
TRANSFORM_INVERSE
][4][0]*
¤c
[ 4*
lše
 ] + g_aiT16[TRANSFORM_INVERSE][12][0]*src[ 12*line ];

678 
EEE
[0] = 
g_aiT16
[
TRANSFORM_INVERSE
][0][0]*
¤c
[ 0 ] + g_aiT16[TRANSFORM_INVERSE][ 8][0]*¤c[ 8*
lše
 ];

679 
EEO
[1] = 
g_aiT16
[
TRANSFORM_INVERSE
][4][1]*
¤c
[ 4*
lše
 ] + g_aiT16[TRANSFORM_INVERSE][12][1]*src[ 12*line ];

680 
EEE
[1] = 
g_aiT16
[
TRANSFORM_INVERSE
][0][1]*
¤c
[ 0 ] + g_aiT16[TRANSFORM_INVERSE][ 8][1]*¤c[ 8*
lše
 ];

683 
k
=0;k<2;k++)

685 
EE
[
k
] = 
EEE
[k] + 
EEO
[k];

686 
EE
[
k
+2] = 
EEE
[1-k] - 
EEO
[1-k];

688 
k
=0;k<4;k++)

690 
E
[
k
] = 
EE
[k] + 
EO
[k];

691 
E
[
k
+4] = 
EE
[3-k] - 
EO
[3-k];

693 
k
=0;k<8;k++)

695 
d¡
[
k
] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[k] + 
O
[k] + 
add
)>>
shiá
 );

696 
d¡
[
k
+8] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[7-k] - 
O
[7-k] + 
add
)>>
shiá
 );

698 
¤c
 ++;

699 
d¡
 += 16;

701 
	}
}

709 
Void
 
	$·¹ŸlBu‰”æy32
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
)

711 
IÁ
 
j
,
k
;

712 
TCÛff
 
E
[16],
O
[16];

713 
TCÛff
 
EE
[8],
EO
[8];

714 
TCÛff
 
EEE
[4],
EEO
[4];

715 
TCÛff
 
EEEE
[2],
EEEO
[2];

716 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

718 
j
=0; j<
lše
; j++)

721 
k
=0;k<16;k++)

723 
E
[
k
] = 
¤c
[k] + src[31-k];

724 
O
[
k
] = 
¤c
[k] - src[31-k];

727 
k
=0;k<8;k++)

729 
EE
[
k
] = 
E
[k] + E[15-k];

730 
EO
[
k
] = 
E
[k] - E[15-k];

733 
k
=0;k<4;k++)

735 
EEE
[
k
] = 
EE
[k] + EE[7-k];

736 
EEO
[
k
] = 
EE
[k] - EE[7-k];

739 
EEEE
[0] = 
EEE
[0] + EEE[3];

740 
EEEO
[0] = 
EEE
[0] - EEE[3];

741 
EEEE
[1] = 
EEE
[1] + EEE[2];

742 
EEEO
[1] = 
EEE
[1] - EEE[2];

744 
d¡
[ 0 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][ 0][0]*
EEEE
[0] + g_aiT32[TRANSFORM_FORWARD][ 0][1]*EEEE[1] + 
add
)>>
shiá
;

745 
d¡
[ 16*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][16][0]*
EEEE
[0] + g_aiT32[TRANSFORM_FORWARD][16][1]*EEEE[1] + 
add
)>>
shiá
;

746 
d¡
[ 8*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][ 8][0]*
EEEO
[0] + g_aiT32[TRANSFORM_FORWARD][ 8][1]*EEEO[1] + 
add
)>>
shiá
;

747 
d¡
[ 24*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][24][0]*
EEEO
[0] + g_aiT32[TRANSFORM_FORWARD][24][1]*EEEO[1] + 
add
)>>
shiá
;

748 
k
=4;k<32;k+=8)

750 
d¡
[ 
k
*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][k][0]*
EEO
[0] + g_aiT32[TRANSFORM_FORWARD][k][1]*EEO[1] +

751 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][2]*
EEO
[2] + g_aiT32[TRANSFORM_FORWARD][k][3]*EEO[3] + 
add
)>>
shiá
;

753 
k
=2;k<32;k+=4)

755 
d¡
[ 
k
*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][k][0]*
EO
[0] + g_aiT32[TRANSFORM_FORWARD][k][1]*EO[1] +

756 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][2]*
EO
[2] + g_aiT32[TRANSFORM_FORWARD][k][3]*EO[3] +

757 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][4]*
EO
[4] + g_aiT32[TRANSFORM_FORWARD][k][5]*EO[5] +

758 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][6]*
EO
[6] + g_aiT32[TRANSFORM_FORWARD][k][7]*EO[7] + 
add
)>>
shiá
;

760 
k
=1;k<32;k+=2)

762 
d¡
[ 
k
*
lše
 ] = (
g_aiT32
[
TRANSFORM_FORWARD
][k][ 0]*
O
[ 0] + g_aiT32[TRANSFORM_FORWARD][k][ 1]*O[ 1] +

763 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][ 2]*
O
[ 2] + g_aiT32[TRANSFORM_FORWARD][k][ 3]*O[ 3] +

764 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][ 4]*
O
[ 4] + g_aiT32[TRANSFORM_FORWARD][k][ 5]*O[ 5] +

765 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][ 6]*
O
[ 6] + g_aiT32[TRANSFORM_FORWARD][k][ 7]*O[ 7] +

766 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][ 8]*
O
[ 8] + g_aiT32[TRANSFORM_FORWARD][k][ 9]*O[ 9] +

767 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][10]*
O
[10] + g_aiT32[TRANSFORM_FORWARD][k][11]*O[11] +

768 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][12]*
O
[12] + g_aiT32[TRANSFORM_FORWARD][k][13]*O[13] +

769 
g_aiT32
[
TRANSFORM_FORWARD
][
k
][14]*
O
[14] + g_aiT32[TRANSFORM_FORWARD][k][15]*O[15] + 
add
)>>
shiá
;

772 
¤c
 += 32;

773 
d¡
 ++;

775 
	}
}

785 
Void
 
	$·¹ŸlBu‰”æyInv”£32
(
TCÛff
 *
¤c
, TCÛfà*
d¡
, 
IÁ
 
shiá
, IÁ 
lše
, cÚ¡ TCÛfà
ouutMšimum
, cÚ¡ TCÛfà
ouutMaximum
)

787 
IÁ
 
j
,
k
;

788 
TCÛff
 
E
[16],
O
[16];

789 
TCÛff
 
EE
[8],
EO
[8];

790 
TCÛff
 
EEE
[4],
EEO
[4];

791 
TCÛff
 
EEEE
[2],
EEEO
[2];

792 
TCÛff
 
add
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

794 
j
=0; j<
lše
; j++)

797 
k
=0;k<16;k++)

799 
O
[
k
] = 
g_aiT32
[
TRANSFORM_INVERSE
][ 1][k]*
¤c
[ 
lše
 ] + g_aiT32[TRANSFORM_INVERSE][ 3][k]*src[ 3*line ] +

800 
g_aiT32
[
TRANSFORM_INVERSE
][ 5][
k
]*
¤c
[ 5*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][ 7][k]*src[ 7*line ] +

801 
g_aiT32
[
TRANSFORM_INVERSE
][ 9][
k
]*
¤c
[ 9*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][11][k]*src[ 11*line ] +

802 
g_aiT32
[
TRANSFORM_INVERSE
][13][
k
]*
¤c
[ 13*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][15][k]*src[ 15*line ] +

803 
g_aiT32
[
TRANSFORM_INVERSE
][17][
k
]*
¤c
[ 17*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][19][k]*src[ 19*line ] +

804 
g_aiT32
[
TRANSFORM_INVERSE
][21][
k
]*
¤c
[ 21*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][23][k]*src[ 23*line ] +

805 
g_aiT32
[
TRANSFORM_INVERSE
][25][
k
]*
¤c
[ 25*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][27][k]*src[ 27*line ] +

806 
g_aiT32
[
TRANSFORM_INVERSE
][29][
k
]*
¤c
[ 29*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][31][k]*src[ 31*line ];

808 
k
=0;k<8;k++)

810 
EO
[
k
] = 
g_aiT32
[
TRANSFORM_INVERSE
][ 2][k]*
¤c
[ 2*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][ 6][k]*src[ 6*line ] +

811 
g_aiT32
[
TRANSFORM_INVERSE
][10][
k
]*
¤c
[ 10*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][14][k]*src[ 14*line ] +

812 
g_aiT32
[
TRANSFORM_INVERSE
][18][
k
]*
¤c
[ 18*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][22][k]*src[ 22*line ] +

813 
g_aiT32
[
TRANSFORM_INVERSE
][26][
k
]*
¤c
[ 26*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][30][k]*src[ 30*line ];

815 
k
=0;k<4;k++)

817 
EEO
[
k
] = 
g_aiT32
[
TRANSFORM_INVERSE
][ 4][k]*
¤c
[ 4*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][12][k]*src[ 12*line ] +

818 
g_aiT32
[
TRANSFORM_INVERSE
][20][
k
]*
¤c
[ 20*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][28][k]*src[ 28*line ];

820 
EEEO
[0] = 
g_aiT32
[
TRANSFORM_INVERSE
][8][0]*
¤c
[ 8*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][24][0]*src[ 24*line ];

821 
EEEO
[1] = 
g_aiT32
[
TRANSFORM_INVERSE
][8][1]*
¤c
[ 8*
lše
 ] + g_aiT32[TRANSFORM_INVERSE][24][1]*src[ 24*line ];

822 
EEEE
[0] = 
g_aiT32
[
TRANSFORM_INVERSE
][0][0]*
¤c
[ 0 ] + g_aiT32[TRANSFORM_INVERSE][16][0]*¤c[ 16*
lše
 ];

823 
EEEE
[1] = 
g_aiT32
[
TRANSFORM_INVERSE
][0][1]*
¤c
[ 0 ] + g_aiT32[TRANSFORM_INVERSE][16][1]*¤c[ 16*
lše
 ];

826 
EEE
[0] = 
EEEE
[0] + 
EEEO
[0];

827 
EEE
[3] = 
EEEE
[0] - 
EEEO
[0];

828 
EEE
[1] = 
EEEE
[1] + 
EEEO
[1];

829 
EEE
[2] = 
EEEE
[1] - 
EEEO
[1];

830 
k
=0;k<4;k++)

832 
EE
[
k
] = 
EEE
[k] + 
EEO
[k];

833 
EE
[
k
+4] = 
EEE
[3-k] - 
EEO
[3-k];

835 
k
=0;k<8;k++)

837 
E
[
k
] = 
EE
[k] + 
EO
[k];

838 
E
[
k
+8] = 
EE
[7-k] - 
EO
[7-k];

840 
k
=0;k<16;k++)

842 
d¡
[
k
] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[k] + 
O
[k] + 
add
)>>
shiá
 );

843 
d¡
[
k
+16] = 
	`Cl3
Ð
ouutMšimum
, 
ouutMaximum
, (
E
[15-k] - 
O
[15-k] + 
add
)>>
shiá
 );

845 
¤c
 ++;

846 
d¡
 += 32;

848 
	}
}

860 
Void
 
	$xTrMxN
(
IÁ
 
b™D•th
, 
TCÛff
 *
block
, TCÛfà*
cÛff
, IÁ 
iWidth
, IÁ 
iHeight
, 
BoÞ
 
u£DST
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
)

862 cÚ¡ 
IÁ
 
TRANSFORM_MATRIX_SHIFT
 = 
g_ŒªsfÜmM©rixShiá
[
TRANSFORM_FORWARD
];

864 cÚ¡ 
IÁ
 
shiá_1¡
 = ((
g_aucCÚv”tToB™
[
iWidth
] + 2è+ 
b™D•th
 + 
TRANSFORM_MATRIX_SHIFT
è- 
maxLog2TrDyÇmicRªge
;

865 cÚ¡ 
IÁ
 
shiá_2nd
 = (
g_aucCÚv”tToB™
[
iHeight
] + 2è+ 
TRANSFORM_MATRIX_SHIFT
;

867 
	`as£¹
(
shiá_1¡
 >= 0);

868 
	`as£¹
(
shiá_2nd
 >= 0);

870 
TCÛff
 
tmp
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

872 
iWidth
)

876 ià((
iHeight
 =ð4è&& 
u£DST
)

878 
	`ç¡FÜw¬dD¡
Ð
block
, 
tmp
, 
shiá_1¡
 );

882 
	`·¹ŸlBu‰”æy4
 ( 
block
, 
tmp
, 
shiá_1¡
, 
iHeight
 );

887 8: 
	`·¹ŸlBu‰”æy8
 ( 
block
, 
tmp
, 
shiá_1¡
, 
iHeight
 ); ;

888 16: 
	`·¹ŸlBu‰”æy16
Ð
block
, 
tmp
, 
shiá_1¡
, 
iHeight
 ); ;

889 32: 
	`·¹ŸlBu‰”æy32
Ð
block
, 
tmp
, 
shiá_1¡
, 
iHeight
 ); ;

891 
	`as£¹
(0); 
	`ex™
 (1); ;

894 
iHeight
)

898 ià((
iWidth
 =ð4è&& 
u£DST
)

900 
	`ç¡FÜw¬dD¡
Ð
tmp
, 
cÛff
, 
shiá_2nd
 );

904 
	`·¹ŸlBu‰”æy4
 ( 
tmp
, 
cÛff
, 
shiá_2nd
, 
iWidth
 );

909 8: 
	`·¹ŸlBu‰”æy8
 ( 
tmp
, 
cÛff
, 
shiá_2nd
, 
iWidth
 ); ;

910 16: 
	`·¹ŸlBu‰”æy16
Ð
tmp
, 
cÛff
, 
shiá_2nd
, 
iWidth
 ); ;

911 32: 
	`·¹ŸlBu‰”æy32
Ð
tmp
, 
cÛff
, 
shiá_2nd
, 
iWidth
 ); ;

913 
	`as£¹
(0); 
	`ex™
 (1); ;

915 
	}
}

927 
Void
 
	$xITrMxN
(
IÁ
 
b™D•th
, 
TCÛff
 *
cÛff
, TCÛfà*
block
, IÁ 
iWidth
, IÁ 
iHeight
, 
BoÞ
 
u£DST
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
)

929 cÚ¡ 
IÁ
 
TRANSFORM_MATRIX_SHIFT
 = 
g_ŒªsfÜmM©rixShiá
[
TRANSFORM_INVERSE
];

931 
IÁ
 
shiá_1¡
 = 
TRANSFORM_MATRIX_SHIFT
 + 1;

932 
IÁ
 
shiá_2nd
 = (
TRANSFORM_MATRIX_SHIFT
 + 
maxLog2TrDyÇmicRªge
 - 1è- 
b™D•th
;

933 cÚ¡ 
TCÛff
 
þMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

934 cÚ¡ 
TCÛff
 
þMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

936 
	`as£¹
(
shiá_1¡
 >= 0);

937 
	`as£¹
(
shiá_2nd
 >= 0);

939 
TCÛff
 
tmp
[
MAX_TU_SIZE
 * MAX_TU_SIZE];

941 
iHeight
)

945 ià((
iWidth
 =ð4è&& 
u£DST
)

947 
	`ç¡Inv”£D¡
Ð
cÛff
, 
tmp
, 
shiá_1¡
, 
þMšimum
, 
þMaximum
);

951 
	`·¹ŸlBu‰”æyInv”£4
 ( 
cÛff
, 
tmp
, 
shiá_1¡
, 
iWidth
, 
þMšimum
, 
þMaximum
);

956 8: 
	`·¹ŸlBu‰”æyInv”£8
 ( 
cÛff
, 
tmp
, 
shiá_1¡
, 
iWidth
, 
þMšimum
, 
þMaximum
); ;

957 16: 
	`·¹ŸlBu‰”æyInv”£16
Ð
cÛff
, 
tmp
, 
shiá_1¡
, 
iWidth
, 
þMšimum
, 
þMaximum
); ;

958 32: 
	`·¹ŸlBu‰”æyInv”£32
Ð
cÛff
, 
tmp
, 
shiá_1¡
, 
iWidth
, 
þMšimum
, 
þMaximum
); ;

961 
	`as£¹
(0); 
	`ex™
 (1); ;

964 
iWidth
)

969 ià((
iHeight
 =ð4è&& 
u£DST
)

971 
	`ç¡Inv”£D¡
Ð
tmp
, 
block
, 
shiá_2nd
, 
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
() );

975 
	`·¹ŸlBu‰”æyInv”£4
 ( 
tmp
, 
block
, 
shiá_2nd
, 
iHeight
, 
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
());

980 8: 
	`·¹ŸlBu‰”æyInv”£8
 ( 
tmp
, 
block
, 
shiá_2nd
, 
iHeight
, 
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
()); ;

981 16: 
	`·¹ŸlBu‰”æyInv”£16
Ð
tmp
, 
block
, 
shiá_2nd
, 
iHeight
, 
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
()); ;

982 32: 
	`·¹ŸlBu‰”æyInv”£32
Ð
tmp
, 
block
, 
shiá_2nd
, 
iHeight
, 
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
(), std::num”ic_lim™s<P–>::
	`max
()); ;

985 
	`as£¹
(0); 
	`ex™
 (1); ;

987 
	}
}

991 
Void
 
	gTComTrQuªt
::
	$signB™HidšgHDQ
Ð
TCÛff
* 
pQCÛf
, TCÛff* 
pCÛf
, TCÛff* 
d–U
, cÚ¡ 
TUEÁrÝyCodšgP¬am‘”s
 &
codšgP¬am‘”s
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 )

993 cÚ¡ 
UIÁ
 
width
 = 
codšgP¬am‘”s
.
widthInGroups
 << 
MLS_CG_LOG2_WIDTH
;

994 cÚ¡ 
UIÁ
 
height
 = 
codšgP¬am‘”s
.
heightInGroups
 << 
MLS_CG_LOG2_HEIGHT
;

995 cÚ¡ 
UIÁ
 
groupSize
 = 1 << 
MLS_CG_SIZE
;

997 cÚ¡ 
TCÛff
 
’ŒÝyCodšgMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

998 cÚ¡ 
TCÛff
 
’ŒÝyCodšgMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

1000 
IÁ
 
Ï¡CG
 = -1;

1001 
IÁ
 
absSum
 = 0 ;

1002 
IÁ
 
n
 ;

1004  
IÁ
 
subS‘
 = (
width
*
height
-1è>> 
MLS_CG_SIZE
; subSet >= 0; subSet-- )

1006 
IÁ
 
subPos
 = 
subS‘
 << 
MLS_CG_SIZE
;

1007 
IÁ
 
fœ¡NZPosInCG
=
groupSize
 , 
Ï¡NZPosInCG
=-1 ;

1008 
absSum
 = 0 ;

1010 
n
 = 
groupSize
-1;‚ >= 0; --n )

1012 ifÐ
pQCÛf
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]] )

1014 
Ï¡NZPosInCG
 = 
n
;

1019 
n
 = 0;‚ <
groupSize
;‚++ )

1021 ifÐ
pQCÛf
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]] )

1023 
fœ¡NZPosInCG
 = 
n
;

1028 
n
 = 
fœ¡NZPosInCG
;‚ <=
Ï¡NZPosInCG
;‚++ )

1030 
absSum
 +ð
	`IÁ
(
pQCÛf
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]]);

1033 if(
Ï¡NZPosInCG
>=0 && 
Ï¡CG
==-1)

1035 
Ï¡CG
 = 1 ;

1038 ifÐ
Ï¡NZPosInCG
-
fœ¡NZPosInCG
>=
SBH_THRESHOLD
 )

1040 
UIÁ
 
signb™
 = (
pQCÛf
[
codšgP¬am‘”s
.
sÿn
[
subPos
+
fœ¡NZPosInCG
]]>0?0:1) ;

1041 ifÐ
signb™
!=(
absSum
&0x1) )

1043 
TCÛff
 
curCo¡
 = 
¡d
::
num”ic_lim™s
<TCÛff>::
	`max
();

1044 
TCÛff
 
mšCo¡Inc
 = 
¡d
::
num”ic_lim™s
<TCÛff>::
	`max
();

1045 
IÁ
 
mšPos
 =-1, 
fš®Chªge
=0, 
curChªge
=0;

1047  
n
 = (
Ï¡CG
==1?
Ï¡NZPosInCG
:
groupSize
-1) ;‚ >= 0; --n )

1049 
UIÁ
 
blkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
n
+
subPos
 ];

1050 if(
pQCÛf
[ 
blkPos
 ] != 0 )

1052 if(
d–U
[
blkPos
]>0)

1054 
curCo¡
 = - 
d–U
[
blkPos
];

1055 
curChªge
=1 ;

1060 if(
n
==
fœ¡NZPosInCG
 && 
	`abs
(
pQCÛf
[
blkPos
])==1)

1062 
curCo¡
 = 
¡d
::
num”ic_lim™s
<
TCÛff
>::
	`max
();

1066 
curCo¡
 = 
d–U
[
blkPos
];

1067 
curChªge
 =-1;

1073 if(
n
<
fœ¡NZPosInCG
)

1075 
UIÁ
 
thisSignB™
 = (
pCÛf
[
blkPos
]>=0?0:1);

1076 if(
thisSignB™
 !ð
signb™
 )

1078 
curCo¡
 = 
¡d
::
num”ic_lim™s
<
TCÛff
>::
	`max
();

1082 
curCo¡
 = - (
d–U
[
blkPos
]) ;

1083 
curChªge
 = 1 ;

1088 
curCo¡
 = - (
d–U
[
blkPos
]) ;

1089 
curChªge
 = 1 ;

1093 ifÐ
curCo¡
<
mšCo¡Inc
)

1095 
mšCo¡Inc
 = 
curCo¡
 ;

1096 
fš®Chªge
 = 
curChªge
 ;

1097 
mšPos
 = 
blkPos
 ;

1101 if(
pQCÛf
[
mšPos
] =ð
’ŒÝyCodšgMaximum
 ||…QCÛf[mšPos] =ð
’ŒÝyCodšgMšimum
)

1103 
fš®Chªge
 = -1;

1106 if(
pCÛf
[
mšPos
]>=0)

1108 
pQCÛf
[
mšPos
] +ð
fš®Chªge
 ;

1112 
pQCÛf
[
mšPos
] -ð
fš®Chªge
 ;

1116 if(
Ï¡CG
==1)

1118 
Ï¡CG
=0 ;

1123 
	}
}

1126 
Void
 
	gTComTrQuªt
::
xQuªt
Ð
TComTU
 &
rTu
,

1127 
TCÛff
 * 
pSrc
,

1128 
TCÛff
 * 
pDes
,

1129 #ià
ADAPTIVE_QP_SELECTION


1130 
TCÛff
 *
pA¾Des
,

1132 
TCÛff
 &
uiAbsSum
,

1133 cÚ¡ 
CompÚ’tID
 
compID
,

1134 cÚ¡ 
QpP¬am
 &
cQP
 )

1136 cÚ¡ 
	gTComReùªgË
 &
	g»ù
 = 
rTu
.
g‘Reù
(
compID
);

1137 cÚ¡ 
UIÁ
 
	guiWidth
 = 
»ù
.
width
;

1138 cÚ¡ 
UIÁ
 
	guiHeight
 = 
»ù
.
height
;

1139 
TComD©aCU
* 
	gpcCU
 = 
rTu
.
g‘CU
();

1140 cÚ¡ 
UIÁ
 
	guiAbsP¬tIdx
 = 
rTu
.
G‘AbsP¬tIdxTU
();

1141 cÚ¡ 
IÁ
 
	gchªÃlB™D•th
 = 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘B™D•th
(
toChªÃlTy³
(
compID
));

1143 
TCÛff
* 
	gpiCÛf
 = 
pSrc
;

1144 
TCÛff
* 
	gpiQCÛf
 = 
pDes
;

1145 #ià
ADAPTIVE_QP_SELECTION


1146 
TCÛff
* 
	gpiA¾CCÛf
 = 
pA¾Des
;

1149 cÚ¡ 
BoÞ
 
	gu£T¿nsfÜmSk
 = 
pcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
);

1150 cÚ¡ 
IÁ
 
	gmaxLog2TrDyÇmicRªge
 = 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘MaxLog2TrDyÇmicRªge
(
toChªÃlTy³
(
compID
));

1152 
BoÞ
 
	gu£RDOQ
 = 
u£T¿nsfÜmSk
 ? 
m_u£RDOQTS
 : 
m_u£RDOQ
;

1153 iàÐ
	gu£RDOQ
 && (
isLuma
(
compID
è|| 
	gRDOQ_CHROMA
) )

1155 iàÐ!
	gm_u£S–eùiveRDOQ
 || 
xN“dRDOQ
Ð
rTu
, 
piCÛf
, 
compID
, 
cQP
 ) )

1157 #ià
ADAPTIVE_QP_SELECTION


1158 
xR©eDi¡O±Quªt
Ð
rTu
, 
piCÛf
, 
pDes
, 
pA¾Des
, 
uiAbsSum
, 
compID
, 
cQP
 );

1160 
xR©eDi¡O±Quªt
Ð
rTu
, 
piCÛf
, 
pDes
, 
uiAbsSum
, 
compID
, 
cQP
 );

1165 
mem£t
Ð
pDes
, 0, Ð
TCÛff
 ) * 
uiWidth
 *
uiHeight
 );

1166 
	guiAbsSum
 = 0;

1171 
TUEÁrÝyCodšgP¬am‘”s
 
	gcodšgP¬am‘”s
;

1172 
g‘TUEÁrÝyCodšgP¬am‘”s
(
codšgP¬am‘”s
, 
rTu
, 
compID
);

1174 cÚ¡ 
TCÛff
 
	g’ŒÝyCodšgMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

1175 cÚ¡ 
TCÛff
 
	g’ŒÝyCodšgMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

1177 
TCÛff
 
	gd–U
[
MAX_TU_SIZE
 * MAX_TU_SIZE];

1179 cÚ¡ 
UIÁ
 
	guiLog2TrSize
 = 
rTu
.
G‘Equiv®’tLog2TrSize
(
compID
);

1181 
IÁ
 
	gsÿlšgLi¡Ty³
 = 
g‘SÿlšgLi¡Ty³
(
pcCU
->
g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

1182 
as£¹
(
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
);

1183 
IÁ
 *
	gpiQuªtCÛff
 = 
g‘QuªtCÛff
(
sÿlšgLi¡Ty³
, 
cQP
.
»m
, 
uiLog2TrSize
-2);

1185 cÚ¡ 
BoÞ
 
	g’abËSÿlšgLi¡s
 = 
g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, (
pcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
) != 0));

1186 cÚ¡ 
IÁ
 
	gdeçuÉQuªti§tiÚCÛffic›Á
 = 
g_quªtSÿËs
[
cQP
.
»m
];

1195 
IÁ
 
	giT¿nsfÜmShiá
 = 
g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
uiLog2TrSize
, 
maxLog2TrDyÇmicRªge
);

1196 ià(
	gu£T¿nsfÜmSk
 && 
	gpcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘SpsRªgeEx‹nsiÚ
().
g‘Ex‹ndedP»cisiÚProûssšgFÏg
())

1198 
	giT¿nsfÜmShiá
 = 
¡d
::
max
<
IÁ
>(0, iTransformShift);

1201 cÚ¡ 
IÁ
 
	giQB™s
 = 
QUANT_SHIFT
 + 
cQP
.
³r
 + 
iT¿nsfÜmShiá
;

1204 #ià
ADAPTIVE_QP_SELECTION


1205 
IÁ
 
	giQB™sC
 = 
MAX_INT
;

1206 
IÁ
 
	giAddC
 = 
MAX_INT
;

1208 ià(
	gm_bU£Ad­tQpS–eù
)

1210 
	giQB™sC
 = 
iQB™s
 - 
ARL_C_PRECISION
;

1211 
	giAddC
 = 1 << (
iQB™sC
-1);

1215 cÚ¡ 
IÁ
 
	giAdd
 = (
pcCU
->
g‘Sliû
()->
g‘SliûTy³
()==
I_SLICE
 ? 171 : 85è<< (
iQB™s
-9);

1216 cÚ¡ 
IÁ
 
	gqB™s8
 = 
iQB™s
 - 8;

1218  
IÁ
 
	guiBlockPos
 = 0; uiBlockPo < 
uiWidth
*
	guiHeight
; uiBlockPos++ )

1220 cÚ¡ 
TCÛff
 
	giLev–
 = 
piCÛf
[
uiBlockPos
];

1221 cÚ¡ 
TCÛff
 
	giSign
 = (
iLev–
 < 0 ? -1: 1);

1223 cÚ¡ 
IÁ64
 
	gtmpLev–
 = (IÁ64)
abs
(
iLev–
è* (
’abËSÿlšgLi¡s
 ? 
piQuªtCÛff
[
uiBlockPos
] : 
deçuÉQuªti§tiÚCÛffic›Á
);

1225 #ià
ADAPTIVE_QP_SELECTION


1226 ifÐ
	gm_bU£Ad­tQpS–eù
 )

1228 
	gpiA¾CCÛf
[
uiBlockPos
] = (
TCÛff
)((
tmpLev–
 + 
iAddC
 ) >> 
iQB™sC
);

1232 cÚ¡ 
TCÛff
 
	gquªti£dMagn™ude
 = TCÛff((
tmpLev–
 + 
iAdd
 ) >> 
iQB™s
);

1233 
	gd–U
[
uiBlockPos
] = (
TCÛff
)((
tmpLev–
 - (
quªti£dMagn™ude
<<
iQB™s
è)>> 
qB™s8
);

1235 
	guiAbsSum
 +ð
quªti£dMagn™ude
;

1236 cÚ¡ 
TCÛff
 
	gquªti£dCÛffic›Á
 = 
quªti£dMagn™ude
 * 
iSign
;

1238 
	gpiQCÛf
[
uiBlockPos
] = 
Cl3
<
TCÛff
>Ð
’ŒÝyCodšgMšimum
, 
	g’ŒÝyCodšgMaximum
, 
	gquªti£dCÛffic›Á
 );

1241 ifÐ
	gpcCU
->
g‘Sliû
()->
g‘PPS
()->
g‘SignD©aHidšgEÇbËdFÏg
() )

1243 if(
	guiAbsSum
 >= 2)

1245 
signB™HidšgHDQ
Ð
piQCÛf
, 
piCÛf
, 
d–U
, 
codšgP¬am‘”s
, 
maxLog2TrDyÇmicRªge
 ) ;

1252 
BoÞ
 
	gTComTrQuªt
::
	$xN“dRDOQ
Ð
TComTU
 &
rTu
, 
TCÛff
 * 
pSrc
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
QpP¬am
 &
cQP
 )

1254 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

1255 cÚ¡ 
UIÁ
 
uiWidth
 = 
»ù
.
width
;

1256 cÚ¡ 
UIÁ
 
uiHeight
 = 
»ù
.
height
;

1257 
TComD©aCU
* 
pcCU
 = 
rTu
.
	`g‘CU
();

1258 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1259 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

1261 
TCÛff
* 
piCÛf
 = 
pSrc
;

1263 cÚ¡ 
BoÞ
 
u£T¿nsfÜmSk
 = 
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
);

1264 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compID
));

1266 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
);

1268 
IÁ
 
sÿlšgLi¡Ty³
 = 
	`g‘SÿlšgLi¡Ty³
(
pcCU
->
	`g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

1269 
	`as£¹
(
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
);

1270 
IÁ
 *
piQuªtCÛff
 = 
	`g‘QuªtCÛff
(
sÿlšgLi¡Ty³
, 
cQP
.
»m
, 
uiLog2TrSize
-2);

1272 cÚ¡ 
BoÞ
 
’abËSÿlšgLi¡s
 = 
	`g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, (
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
) != 0));

1273 cÚ¡ 
IÁ
 
deçuÉQuªti§tiÚCÛffic›Á
 = 
g_quªtSÿËs
[
cQP
.
»m
];

1282 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
uiLog2TrSize
, 
maxLog2TrDyÇmicRªge
);

1283 ià(
u£T¿nsfÜmSk
 && 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
())

1285 
iT¿nsfÜmShiá
 = 
¡d
::
max
<
IÁ
>(0, iTransformShift);

1288 cÚ¡ 
IÁ
 
iQB™s
 = 
QUANT_SHIFT
 + 
cQP
.
³r
 + 
iT¿nsfÜmShiá
;

1292 cÚ¡ 
IÁ
 
iAdd
 = (
compID
 =ð
COMPONENT_Y
 ? 171 : 256è<< (
iQB™s
-9);

1294  
IÁ
 
uiBlockPos
 = 0; uiBlockPo < 
uiWidth
*
uiHeight
; uiBlockPos++ )

1296 cÚ¡ 
TCÛff
 
iLev–
 = 
piCÛf
[
uiBlockPos
];

1297 cÚ¡ 
IÁ64
 
tmpLev–
 = (IÁ64)
	`abs
(
iLev–
è* (
’abËSÿlšgLi¡s
 ? 
piQuªtCÛff
[
uiBlockPos
] : 
deçuÉQuªti§tiÚCÛffic›Á
);

1298 cÚ¡ 
TCÛff
 
quªti£dMagn™ude
 = 
	`TCÛff
((
tmpLev–
 + 
iAdd
 ) >> 
iQB™s
);

1300 iàÐ
quªti£dMagn™ude
 != 0 )

1302  
Œue
;

1305  
çl£
;

1306 
	}
}

1308 
Void
 
	gTComTrQuªt
::
	$xDeQuªt
Ð
TComTU
 &
rTu
,

1309 cÚ¡ 
TCÛff
 * 
pSrc
,

1310 
TCÛff
 * 
pDes
,

1311 cÚ¡ 
CompÚ’tID
 
compID
,

1312 cÚ¡ 
QpP¬am
 &
cQP
 )

1314 
	`as£¹
(
compID
<
MAX_NUM_COMPONENT
);

1316 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

1317 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1318 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

1319 cÚ¡ 
UIÁ
 
uiWidth
 = 
»ù
.
width
;

1320 cÚ¡ 
UIÁ
 
uiHeight
 = 
»ù
.
height
;

1321 cÚ¡ 
TCÛff
 *cÚ¡ 
piQCÛf
 = 
pSrc
;

1322 
TCÛff
 *cÚ¡ 
piCÛf
 = 
pDes
;

1323 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
);

1324 cÚ¡ 
UIÁ
 
numSam¶esInBlock
 = 
uiWidth
*
uiHeight
;

1325 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compID
));

1326 cÚ¡ 
TCÛff
 
ŒªsfÜmMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

1327 cÚ¡ 
TCÛff
 
ŒªsfÜmMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

1328 cÚ¡ 
BoÞ
 
’abËSÿlšgLi¡s
 = 
	`g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, (
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
) != 0));

1329 cÚ¡ 
IÁ
 
sÿlšgLi¡Ty³
 = 
	`g‘SÿlšgLi¡Ty³
(
pcCU
->
	`g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

1330 #ià
O0043_BEST_EFFORT_DECODING


1331 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SŒ—mB™D•th
(
	`toChªÃlTy³
(
compID
));

1333 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

1336 
	`as£¹
 (
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
);

1337 
	`as£¹
 ( 
uiWidth
 <ð
m_uiMaxTrSize
 );

1340 cÚ¡ 
BoÞ
 
bClT¿nsfÜmShiáTo0
 = (
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
è!ð0è&&…cCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
();

1341 cÚ¡ 
IÁ
 
Üigš®T¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
uiLog2TrSize
, 
maxLog2TrDyÇmicRªge
);

1342 cÚ¡ 
IÁ
 
iT¿nsfÜmShiá
 = 
bClT¿nsfÜmShiáTo0
 ? 
¡d
::
max
<IÁ>(0, 
Üigš®T¿nsfÜmShiá
) : originalTransformShift;

1344 cÚ¡ 
IÁ
 
QP_³r
 = 
cQP
.
³r
;

1345 cÚ¡ 
IÁ
 
QP_»m
 = 
cQP
.
»m
;

1347 cÚ¡ 
IÁ
 
rightShiá
 = (
IQUANT_SHIFT
 - (
iT¿nsfÜmShiá
 + 
QP_³r
)è+ (
’abËSÿlšgLi¡s
 ? 
LOG2_SCALING_LIST_NEUTRAL_VALUE
 : 0);

1349 if(
’abËSÿlšgLi¡s
)

1354 cÚ¡ 
UIÁ
 
dequªtCÛfB™s
 = 1 + 
IQUANT_SHIFT
 + 
SCALING_LIST_BITS
;

1355 cÚ¡ 
UIÁ
 
rg‘IÅutB™D•th
 = 
¡d
::
mš
<UIÁ>((
maxLog2TrDyÇmicRªge
 + 1), ((((
IÁ”medŸ‹_IÁ
è* 8è+ 
rightShiá
è- 
dequªtCÛfB™s
));

1357 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMšimum
 = -(1 << (
rg‘IÅutB™D•th
 - 1));

1358 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMaximum
 = (1 << (
rg‘IÅutB™D•th
 - 1)) - 1;

1360 
IÁ
 *
piDequªtCÛf
 = 
	`g‘DequªtCÛff
(
sÿlšgLi¡Ty³
,
QP_»m
,
uiLog2TrSize
-2);

1362 if(
rightShiá
 > 0)

1364 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iAdd
 = 1 << (
rightShiá
 - 1);

1366  
IÁ
 
n
 = 0;‚ < 
numSam¶esInBlock
;‚++ )

1368 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
piQCÛf
[
n
]));

1369 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = ((
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
piDequªtCÛf
[
n
]è+ 
iAdd
 ) >> 
rightShiá
;

1371 
piCÛf
[
n
] = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

1376 cÚ¡ 
IÁ
 
ËáShiá
 = -
rightShiá
;

1378  
IÁ
 
n
 = 0;‚ < 
numSam¶esInBlock
;‚++ )

1380 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
piQCÛf
[
n
]));

1381 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
piDequªtCÛf
[
n
]è<< 
ËáShiá
;

1383 
piCÛf
[
n
] = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

1389 cÚ¡ 
IÁ
 
sÿË
 = 
g_švQuªtSÿËs
[
QP_»m
];

1390 cÚ¡ 
IÁ
 
sÿËB™s
 = (
IQUANT_SHIFT
 + 1) ;

1395 cÚ¡ 
UIÁ
 
rg‘IÅutB™D•th
 = 
¡d
::
mš
<UIÁ>((
maxLog2TrDyÇmicRªge
 + 1), ((((
IÁ”medŸ‹_IÁ
è* 8è+ 
rightShiá
è- 
sÿËB™s
));

1396 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMšimum
 = -(1 << (
rg‘IÅutB™D•th
 - 1));

1397 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMaximum
 = (1 << (
rg‘IÅutB™D•th
 - 1)) - 1;

1399 ià(
rightShiá
 > 0)

1401 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iAdd
 = 1 << (
rightShiá
 - 1);

1403  
IÁ
 
n
 = 0;‚ < 
numSam¶esInBlock
;‚++ )

1405 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
piQCÛf
[
n
]));

1406 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
sÿË
 + 
iAdd
è>> 
rightShiá
;

1408 
piCÛf
[
n
] = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

1413 cÚ¡ 
IÁ
 
ËáShiá
 = -
rightShiá
;

1415  
IÁ
 
n
 = 0;‚ < 
numSam¶esInBlock
;‚++ )

1417 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
piQCÛf
[
n
]));

1418 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
sÿË
è<< 
ËáShiá
;

1420 
piCÛf
[
n
] = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

1424 
	}
}

1427 
Void
 
	gTComTrQuªt
::
š™
Ð
UIÁ
 
uiMaxTrSize
,

1428 
BoÞ
 
bU£RDOQ
,

1429 
BoÞ
 
bU£RDOQTS
,

1430 
BoÞ
 
u£S–eùiveRDOQ
,

1431 
BoÞ
 
bEnc
,

1432 
BoÞ
 
u£T¿nsfÜmSkFa¡


1433 #ià
ADAPTIVE_QP_SELECTION


1434 , 
BoÞ
 
bU£Ad­tQpS–eù


1438 
	gm_uiMaxTrSize
 = 
uiMaxTrSize
;

1439 
	gm_bEnc
 = 
bEnc
;

1440 
	gm_u£RDOQ
 = 
bU£RDOQ
;

1441 
	gm_u£RDOQTS
 = 
bU£RDOQTS
;

1442 
	gm_u£S–eùiveRDOQ
 = 
u£S–eùiveRDOQ
;

1443 #ià
ADAPTIVE_QP_SELECTION


1444 
	gm_bU£Ad­tQpS–eù
 = 
bU£Ad­tQpS–eù
;

1446 
	gm_u£T¿nsfÜmSkFa¡
 = 
u£T¿nsfÜmSkFa¡
;

1450 
Void
 
	gTComTrQuªt
::
ŒªsfÜmNxN
Ð
TComTU
 & 
rTu
,

1451 cÚ¡ 
CompÚ’tID
 
compID
,

1452 
P–
 * 
pcResidu®
,

1453 cÚ¡ 
UIÁ
 
uiSŒide
,

1454 
TCÛff
 * 
½cCÛff
,

1455 #ià
ADAPTIVE_QP_SELECTION


1456 
TCÛff
 * 
pcA¾CÛff
,

1458 
TCÛff
 & 
uiAbsSum
,

1459 cÚ¡ 
QpP¬am
 & 
cQP


1462 cÚ¡ 
	gTComReùªgË
 &
	g»ù
 = 
rTu
.
g‘Reù
(
compID
);

1463 cÚ¡ 
UIÁ
 
	guiWidth
 = 
»ù
.
width
;

1464 cÚ¡ 
UIÁ
 
	guiHeight
 = 
»ù
.
height
;

1465 
TComD©aCU
* 
	gpcCU
 = 
rTu
.
g‘CU
();

1466 cÚ¡ 
UIÁ
 
	guiAbsP¬tIdx
 = 
rTu
.
G‘AbsP¬tIdxTU
();

1467 cÚ¡ 
UIÁ
 
	guiOrgTrD•th
 = 
rTu
.
G‘T¿nsfÜmD•thR–
();

1469 
	guiAbsSum
=0;

1471 
RDPCMMode
 
	grdpcmMode
 = 
RDPCM_OFF
;

1472 
rdpcmNxN
Ð
rTu
, 
compID
, 
pcResidu®
, 
uiSŒide
, 
cQP
, 
½cCÛff
, 
uiAbsSum
, 
rdpcmMode
 );

1474 ià(
	grdpcmMode
 =ð
RDPCM_OFF
)

1476 
uiAbsSum
 = 0;

1478 if(
	gpcCU
->
g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
))

1480 cÚ¡ 
BoÞ
 
	grÙ©eResidu®
 = 
rTu
.
isNÚT¿nsfÜmedResidu®RÙ©ed
(
compID
);

1481 cÚ¡ 
UIÁ
 
	guiSizeMšus1
 = (
uiWidth
 * 
uiHeight
) - 1;

1483 
UIÁ
 
	gy
 = 0, 
	gcÛffic›ÁIndex
 = 0; y<
	guiHeight
; y++)

1485 
UIÁ
 
	gx
 = 0; x<
	guiWidth
; x++, 
	gcÛffic›ÁIndex
++)

1487 cÚ¡ 
P–
 
	gcu¼’tSam¶e
 = 
pcResidu®
[(
y
 * 
uiSŒide
è+ 
x
];

1489 
	g½cCÛff
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
è: cÛffic›ÁIndex] = 
cu¼’tSam¶e
;

1490 
	guiAbsSum
 +ð
TCÛff
(
abs
(
cu¼’tSam¶e
));

1496 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1497 
	g¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU‡t inputoransform\n";

1498 
´štBlock
(
pcResidu®
, 
uiWidth
, 
uiHeight
, 
uiSŒide
);

1501 
as£¹
Ð(
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘MaxTrSize
(è>ð
uiWidth
) );

1503 if(
	gpcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
) != 0)

1505 
xT¿nsfÜmSk
Ð
pcResidu®
, 
uiSŒide
, 
m_¶TempCÛff
, 
rTu
, 
compID
 );

1509 cÚ¡ 
IÁ
 
	gchªÃlB™D•th
=
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘B™D•th
(
toChªÃlTy³
(
compID
));

1510 
xT
Ð
chªÃlB™D•th
, 
rTu
.
u£DST
(
compID
), 
pcResidu®
, 
uiSŒide
, 
m_¶TempCÛff
, 
uiWidth
, 
uiHeight
, 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘MaxLog2TrDyÇmicRªge
(
toChªÃlTy³
(compID)) );

1513 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1514 
	g¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU betweenransform‡nd quantiser\n";

1515 
´štBlock
(
m_¶TempCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1518 
xQuªt
Ð
rTu
, 
m_¶TempCÛff
, 
½cCÛff
,

1520 #ià
ADAPTIVE_QP_SELECTION


1521 
pcA¾CÛff
,

1523 
uiAbsSum
, 
compID
, 
cQP
 );

1525 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1526 
	g¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU‡t output of quantiser\n";

1527 
´štBlock
(
½cCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1533 
	gpcCU
->
£tCbfP¬tRªge
((((
uiAbsSum
 > 0è? 1 : 0è<< 
uiOrgTrD•th
), 
compID
, 
uiAbsP¬tIdx
, 
rTu
.
G‘AbsP¬tIdxNumP¬ts
(compID));

1537 
Void
 
	gTComTrQuªt
::
švT¿nsfÜmNxN
Ð
TComTU
 &
rTu
,

1538 cÚ¡ 
CompÚ’tID
 
compID
,

1539 
P–
 *
pcResidu®
,

1540 cÚ¡ 
UIÁ
 
uiSŒide
,

1541 
TCÛff
 * 
pcCÛff
,

1542 cÚ¡ 
QpP¬am
 &
cQP


1543 
	$DEBUG_STRING_FN_DECLAREP
(
psDebug
))

1545 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1546 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1547 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

1548 cÚ¡ 
UIÁ
 
uiWidth
 = 
»ù
.
width
;

1549 cÚ¡ 
UIÁ
 
uiHeight
 = 
»ù
.
height
;

1551 ià(
uiWidth
 !ð
uiHeight
)

1557 
TComTURecur£
 
	`subTURecur£
(
rTu
, 
çl£
, 
TComTU
::
VERTICAL_SPLIT
, 
Œue
, 
compID
);

1563 cÚ¡ 
UIÁ
 
lšeOff£t
 = 
subTURecur£
.
	`G‘SeùiÚNumb”
(è* subTURecur£.
	`g‘Reù
(
compID
).
height
;

1565 
P–
 *
subTUResidu®
 = 
pcResidu®
 + (
lšeOff£t
 * 
uiSŒide
);

1566 
TCÛff
 *
subTUCÛffic›Ás
 = 
pcCÛff
 + (
lšeOff£t
 * 
subTURecur£
.
	`g‘Reù
(
compID
).
width
);

1568 
	`švT¿nsfÜmNxN
(
subTURecur£
, 
compID
, 
subTUResidu®
, 
uiSŒide
, 
subTUCÛffic›Ás
, 
cQP
 
	`DEBUG_STRING_PASS_INTO
(
psDebug
));

1572 } 
subTURecur£
.
	`ÃxtSeùiÚ
(
rTu
));

1579 #ià
DEBUG_STRING


1580 ià(
psDebug
)

1582 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

1583 
	`´štBlockToSŒ—m
(
ss
, (
compID
==0)?"###InvT¿À Ch0: " : ((compID==1)?"###InvT¿À Ch1: ":"###InvT¿À Ch2: "), 
pcCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1584 
	`DEBUG_STRING_APPEND
((*
psDebug
), 
ss
.
	`¡r
())

1588 if(
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
))

1590 cÚ¡ 
BoÞ
 
rÙ©eResidu®
 = 
rTu
.
	`isNÚT¿nsfÜmedResidu®RÙ©ed
(
compID
);

1591 cÚ¡ 
UIÁ
 
uiSizeMšus1
 = (
uiWidth
 * 
uiHeight
) - 1;

1593 
UIÁ
 
y
 = 0, 
cÛffic›ÁIndex
 = 0; y<
uiHeight
; y++)

1595 
UIÁ
 
x
 = 0; x<
uiWidth
; x++, 
cÛffic›ÁIndex
++)

1597 
pcResidu®
[(
y
 * 
uiSŒide
è+ 
x
] = 
	`P–
(
pcCÛff
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
) : coefficientIndex]);

1603 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1604 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU‡t inputo dequantiser\n";

1605 
	`´štBlock
(
pcCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1608 
	`xDeQuªt
(
rTu
, 
pcCÛff
, 
m_¶TempCÛff
, 
compID
, 
cQP
);

1610 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1611 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU between dequantiser‡nd inverse-transform\n";

1612 
	`´štBlock
(
m_¶TempCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1615 #ià
DEBUG_STRING


1616 ià(
psDebug
)

1618 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

1619 
	`´štBlockToSŒ—m
(
ss
, "###InvT¿Àdeq: ", 
m_¶TempCÛff
, 
uiWidth
, 
uiHeight
, uiWidth);

1620 (*
psDebug
)+=
ss
.
	`¡r
();

1624 if(
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
))

1626 
	`xIT¿nsfÜmSk
Ð
m_¶TempCÛff
, 
pcResidu®
, 
uiSŒide
, 
rTu
, 
compID
 );

1628 #ià
DEBUG_STRING


1629 ià(
psDebug
)

1631 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

1632 
	`´štBlockToSŒ—m
(
ss
, "###InvT¿À»si: ", 
pcResidu®
, 
uiWidth
, 
uiHeight
, 
uiSŒide
);

1633 (*
psDebug
)+=
ss
.
	`¡r
();

1634 (*
psDebug
)+="(<- was‡ Transform-skipped block)\n";

1640 #ià
O0043_BEST_EFFORT_DECODING


1641 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SŒ—mB™D•th
(
	`toChªÃlTy³
(
compID
));

1643 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

1645 
	`xIT
Ð
chªÃlB™D•th
, 
rTu
.
	`u£DST
(
compID
), 
m_¶TempCÛff
, 
pcResidu®
, 
uiSŒide
, 
uiWidth
, 
uiHeight
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(compID)) );

1647 #ià
DEBUG_STRING


1648 ià(
psDebug
)

1650 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

1651 
	`´štBlockToSŒ—m
(
ss
, "###InvT¿À»si: ", 
pcResidu®
, 
uiWidth
, 
uiHeight
, 
uiSŒide
);

1652 (*
psDebug
)+=
ss
.
	`¡r
();

1653 (*
psDebug
)+="(<- was‡ Transformed block)\n";

1658 #ià
DEBUG_TRANSFORM_AND_QUANTISE


1659 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": " << 
uiWidth
 << "x" << 
uiHeight
 << " chªÃÈ" << 
compID
 << " TU‡t output of inverse-transform\n";

1660 
	`´štBlock
(
pcResidu®
, 
uiWidth
, 
uiHeight
, 
uiSŒide
);

1661 
g_debugCouÁ”
++;

1665 
	`švRdpcmNxN
Ð
rTu
, 
compID
, 
pcResidu®
, 
uiSŒide
 );

1666 
	}
}

1668 
Void
 
	gTComTrQuªt
::
	$švRecurT¿nsfÜmNxN
ÐcÚ¡ 
CompÚ’tID
 
compID
,

1669 
TComYuv
 *
pResidu®
,

1670 
TComTU
 &
rTu
)

1672 ià(!
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

1677 
TComD©aCU
* 
pcCU
 = 
rTu
.
	`g‘CU
();

1678 
UIÁ
 
absP¬tIdxTU
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1679 
UIÁ
 
uiTrMode
=
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1680 ifÐ(
pcCU
->
	`g‘Cbf
(
absP¬tIdxTU
, 
compID
, 
uiTrMode
è=ð0è&& (
	`isLuma
(compIDè|| !pcCU->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
()) )

1685 ifÐ
uiTrMode
 =ð
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
absP¬tIdxTU
 ) )

1687 cÚ¡ 
TComReùªgË
 &
tuReù
 = 
rTu
.
	`g‘Reù
(
compID
);

1688 cÚ¡ 
IÁ
 
uiSŒide
 = 
pResidu®
->
	`g‘SŒide
Ð
compID
 );

1689 
P–
 *
½cResidu®
 = 
pResidu®
->
	`g‘Addr
Ð
compID
 );

1690 
UIÁ
 
uiAddr
 = (
tuReù
.
x0
 + 
uiSŒide
*tuReù.
y0
);

1691 
P–
 *
pResi
 = 
½cResidu®
 + 
uiAddr
;

1692 
TCÛff
 *
pcCÛff
 = 
pcCU
->
	`g‘CÛff
(
compID
è+ 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

1694 cÚ¡ 
QpP¬am
 
	`cQP
(*
pcCU
, 
compID
);

1696 if(
pcCU
->
	`g‘Cbf
(
absP¬tIdxTU
, 
compID
, 
uiTrMode
) != 0)

1698 
	`DEBUG_STRING_NEW
(
sTemp
)

1699 #ià
DEBUG_STRING


1700 
¡d
::
¡ršg
 *
psDebug
=((
DebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
.
	`g‘IÁ
()&(
pcCU
->
	`isIÁ¿
(
absP¬tIdxTU
)?1:ÕcCU->
	`isIÁ”
×bsP¬tIdxTU)?2:4)))!=0è? &
sTemp
 : 0;

1703 
	`švT¿nsfÜmNxN
Ð
rTu
, 
compID
, 
pResi
, 
uiSŒide
, 
pcCÛff
, 
cQP
 
	`DEBUG_STRING_PASS_INTO
(
psDebug
) );

1705 #ià
DEBUG_STRING


1706 ià(
psDebug
 != 0)

1708 
¡d
::
cout
 << (*
psDebug
);

1713 ià(
	`isChroma
(
compID
è&& (
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
absP¬tIdxTU
, compID) != 0))

1715 cÚ¡ 
P–
 *
piResiLuma
 = 
pResidu®
->
	`g‘Addr
Ð
COMPONENT_Y
 );

1716 cÚ¡ 
IÁ
 
¡rideLuma
 = 
pResidu®
->
	`g‘SŒide
Ð
COMPONENT_Y
 );

1717 cÚ¡ 
IÁ
 
tuWidth
 = 
rTu
.
	`g‘Reù
Ð
compID
 ).
width
;

1718 cÚ¡ 
IÁ
 
tuHeight
 = 
rTu
.
	`g‘Reù
Ð
compID
 ).
height
;

1720 if(
pcCU
->
	`g‘Cbf
(
absP¬tIdxTU
, 
COMPONENT_Y
, 
uiTrMode
) != 0)

1722 
pResi
 = 
½cResidu®
 + 
uiAddr
;

1723 cÚ¡ 
P–
 *
pResiLuma
 = 
piResiLuma
 + 
uiAddr
;

1725 
	`üossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
, 
pResiLuma
, 
pResi
,…Resi, 
tuWidth
, 
tuHeight
, 
¡rideLuma
, 
uiSŒide
, uiSŒide, 
Œue
 );

1731 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

1734 
	`švRecurT¿nsfÜmNxN
Ð
compID
, 
pResidu®
, 
tuRecur£Chžd
 );

1735 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

1737 
	}
}

1739 
Void
 
	gTComTrQuªt
::
	$­¶yFÜw¬dRDPCM
Ð
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
, cÚ¡ 
QpP¬am
& 
cQP
, 
TCÛff
* 
pcCÛff
, TCÛfà&
uiAbsSum
, cÚ¡ 
RDPCMMode
 
mode
 )

1741 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

1742 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

1744 cÚ¡ 
BoÞ
 
bLos¦ess
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
Ð
uiAbsP¬tIdx
 );

1745 cÚ¡ 
UIÁ
 
uiWidth
 = 
rTu
.
	`g‘Reù
(
compID
).
width
;

1746 cÚ¡ 
UIÁ
 
uiHeight
 = 
rTu
.
	`g‘Reù
(
compID
).
height
;

1747 cÚ¡ 
BoÞ
 
rÙ©eResidu®
 = 
rTu
.
	`isNÚT¿nsfÜmedResidu®RÙ©ed
(
compID
);

1748 cÚ¡ 
UIÁ
 
uiSizeMšus1
 = (
uiWidth
 * 
uiHeight
) - 1;

1750 
UIÁ
 
uiX
 = 0;

1751 
UIÁ
 
uiY
 = 0;

1753 
UIÁ
 &
majÜAxis
 = (
mode
 =ð
RDPCM_VER
è? 
uiX
 : 
uiY
;

1754 
UIÁ
 &
mšÜAxis
 = (
mode
 =ð
RDPCM_VER
è? 
uiY
 : 
uiX
;

1755 cÚ¡ 
UIÁ
 
majÜAxisLim™
 = (
mode
 =ð
RDPCM_VER
è? 
uiWidth
 : 
uiHeight
;

1756 cÚ¡ 
UIÁ
 
mšÜAxisLim™
 = (
mode
 =ð
RDPCM_VER
è? 
uiHeight
 : 
uiWidth
;

1758 cÚ¡ 
BoÞ
 
bU£H®fRoundšgPošt
 = (
mode
 !ð
RDPCM_OFF
);

1760 
uiAbsSum
 = 0;

1762  
majÜAxis
 = 0; majÜAxi < 
majÜAxisLim™
; majorAxis++ )

1764 
TCÛff
 
accumuÏtÜV®ue
 = 0;

1765  
mšÜAxis
 = 0; mšÜAxi < 
mšÜAxisLim™
; minorAxis++ )

1767 cÚ¡ 
UIÁ
 
§m¶eIndex
 = (
uiY
 * 
uiWidth
è+ 
uiX
;

1768 cÚ¡ 
UIÁ
 
cÛffic›ÁIndex
 = (
rÙ©eResidu®
 ? (
uiSizeMšus1
-
§m¶eIndex
) : sampleIndex);

1769 cÚ¡ 
P–
 
cu¼’tSam¶e
 = 
pcResidu®
[(
uiY
 * 
uiSŒide
è+ 
uiX
];

1770 cÚ¡ 
TCÛff
 
’cod”SideD–
 = 
	`TCÛff
(
cu¼’tSam¶e
è- 
accumuÏtÜV®ue
;

1772 
P–
 
»cÚ¡ruùedD–
;

1773 iàÐ
bLos¦ess
 )

1775 
pcCÛff
[
cÛffic›ÁIndex
] = 
’cod”SideD–
;

1776 
»cÚ¡ruùedD–
 = (
P–
è
’cod”SideD–
;

1780 
	`ŒªsfÜmSkQuªtOÃSam¶e
(
rTu
, 
compID
, 
’cod”SideD–
, 
pcCÛff
, 
cÛffic›ÁIndex
, 
cQP
, 
bU£H®fRoundšgPošt
);

1781 
	`švTrSkDeQuªtOÃSam¶e
 (
rTu
, 
compID
, 
pcCÛff
[
cÛffic›ÁIndex
], 
»cÚ¡ruùedD–
, 
cQP
, coefficientIndex);

1784 
uiAbsSum
 +ð
	`abs
(
pcCÛff
[
cÛffic›ÁIndex
]);

1786 ià(
mode
 !ð
RDPCM_OFF
)

1788 
accumuÏtÜV®ue
 +ð
»cÚ¡ruùedD–
;

1792 
	}
}

1794 
Void
 
	gTComTrQuªt
::
	$rdpcmNxN
 ( 
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
, cÚ¡ 
QpP¬am
& 
cQP
, 
TCÛff
* 
pcCÛff
, TCÛfà&
uiAbsSum
, 
RDPCMMode
& 
rdpcmMode
 )

1796 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

1797 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

1799 ià(!
pcCU
->
	`isRDPCMEÇbËd
(
uiAbsP¬tIdx
è|| (ÕcCU->
	`g‘T¿nsfÜmSk
(uiAbsP¬tIdx, 
compID
è=ð0è&& !pcCU->
	`g‘CUT¿nsquªtBy·ss
(uiAbsPartIdx)))

1801 
rdpcmMode
 = 
RDPCM_OFF
;

1803 iàÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

1805 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvOrg
()->
	`g‘ChromaFÜm©
();

1806 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

1807 cÚ¡ 
UIÁ
 
uiChP»dMode
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
chTy³
, 
uiAbsP¬tIdx
 );

1808 cÚ¡ 
TComSPS
 *
¥s
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
();

1809 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
->
	`g‘MaxTÙ®CUD•th
(è- sps->
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

1810 cÚ¡ 
UIÁ
 
uiChCodedMode
 = (
uiChP»dMode
==
DM_CHROMA_IDX
 && 
	`isChroma
(
compID
)è? 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
chFmt
, 
·¹sP”MšCU
)) : uiChPredMode;

1811 cÚ¡ 
UIÁ
 
uiChFš®Mode
 = ((
chFmt
 =ð
CHROMA_422
è&& 
	`isChroma
(
compID
)è? 
g_chroma422IÁ¿AngËM­pšgTabË
[
uiChCodedMode
] : uiChCodedMode;

1813 ià(
uiChFš®Mode
 =ð
VER_IDX
 || uiChFš®Mod=ð
HOR_IDX
)

1815 
rdpcmMode
 = (
uiChFš®Mode
 =ð
VER_IDX
è? 
RDPCM_VER
 : 
RDPCM_HOR
;

1816 
	`­¶yFÜw¬dRDPCM
Ð
rTu
, 
compID
, 
pcResidu®
, 
uiSŒide
, 
cQP
, 
pcCÛff
, 
uiAbsSum
, 
rdpcmMode
 );

1820 
rdpcmMode
 = 
RDPCM_OFF
;

1825 cÚ¡ 
UIÁ
 
uiWidth
 = 
rTu
.
	`g‘Reù
(
compID
).
width
;

1826 cÚ¡ 
UIÁ
 
uiHeight
 = 
rTu
.
	`g‘Reù
(
compID
).
height
;

1828 
RDPCMMode
 
be¡Mode
 = 
NUMBER_OF_RDPCM_MODES
;

1829 
TCÛff
 
be¡AbsSum
 = 
¡d
::
num”ic_lim™s
<TCÛff>::
	`max
();

1830 
TCÛff
 
be¡CÛffic›Ás
[
MAX_TU_SIZE
 * MAX_TU_SIZE];

1832 
UIÁ
 
modeIndex
 = 0; modeIndex < 
NUMBER_OF_RDPCM_MODES
; modeIndex++)

1834 cÚ¡ 
RDPCMMode
 
mode
 = 
	`RDPCMMode
(
modeIndex
);

1836 
TCÛff
 
cu¼AbsSum
 = 0;

1838 
	`­¶yFÜw¬dRDPCM
Ð
rTu
, 
compID
, 
pcResidu®
, 
uiSŒide
, 
cQP
, 
pcCÛff
, 
cu¼AbsSum
, 
mode
 );

1840 ià(
cu¼AbsSum
 < 
be¡AbsSum
)

1842 
be¡Mode
 = 
mode
;

1843 
be¡AbsSum
 = 
cu¼AbsSum
;

1844 ià(
mode
 !ð
RDPCM_OFF
)

1846 
	`memýy
(
be¡CÛffic›Ás
, 
pcCÛff
, (
uiWidth
 * 
uiHeight
 * (
TCÛff
)));

1851 
rdpcmMode
 = 
be¡Mode
;

1852 
uiAbsSum
 = 
be¡AbsSum
;

1854 ià(
rdpcmMode
 !ð
RDPCM_OFF
)

1856 
	`memýy
(
pcCÛff
, 
be¡CÛffic›Ás
, (
uiWidth
 * 
uiHeight
 * (
TCÛff
)));

1860 
pcCU
->
	`£tEx¶ic™RdpcmModeP¬tRªge
(
rdpcmMode
, 
compID
, 
uiAbsP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(compID));

1861 
	}
}

1863 
Void
 
	gTComTrQuªt
::
	$švRdpcmNxN
Ð
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
 )

1865 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

1866 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

1868 ià(
pcCU
->
	`isRDPCMEÇbËd
Ð
uiAbsP¬tIdx
 ) && (ÕcCU->
	`g‘T¿nsfÜmSk
(uiAbsP¬tIdx, 
compID
 ) !ð0è||…cCU->
	`g‘CUT¿nsquªtBy·ss
(uiAbsPartIdx)))

1870 cÚ¡ 
UIÁ
 
uiWidth
 = 
rTu
.
	`g‘Reù
(
compID
).
width
;

1871 cÚ¡ 
UIÁ
 
uiHeight
 = 
rTu
.
	`g‘Reù
(
compID
).
height
;

1873 
RDPCMMode
 
rdpcmMode
 = 
RDPCM_OFF
;

1875 iàÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

1877 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘ChromaFÜm©
();

1878 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

1879 cÚ¡ 
UIÁ
 
uiChP»dMode
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
chTy³
, 
uiAbsP¬tIdx
 );

1880 cÚ¡ 
TComSPS
 *
¥s
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
();

1881 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
->
	`g‘MaxTÙ®CUD•th
(è- sps->
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

1882 cÚ¡ 
UIÁ
 
uiChCodedMode
 = (
uiChP»dMode
==
DM_CHROMA_IDX
 && 
	`isChroma
(
compID
)è? 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
chFmt
, 
·¹sP”MšCU
)) : uiChPredMode;

1883 cÚ¡ 
UIÁ
 
uiChFš®Mode
 = ((
chFmt
 =ð
CHROMA_422
è&& 
	`isChroma
(
compID
)è? 
g_chroma422IÁ¿AngËM­pšgTabË
[
uiChCodedMode
] : uiChCodedMode;

1885 ià(
uiChFš®Mode
 =ð
VER_IDX
 || uiChFš®Mod=ð
HOR_IDX
)

1887 
rdpcmMode
 = (
uiChFš®Mode
 =ð
VER_IDX
è? 
RDPCM_VER
 : 
RDPCM_HOR
;

1892 
rdpcmMode
 = 
	`RDPCMMode
(
pcCU
->
	`g‘Ex¶ic™RdpcmMode
Ð
compID
, 
uiAbsP¬tIdx
 ));

1895 cÚ¡ 
TCÛff
 
³lMš
=(TCÛffè
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
();

1896 cÚ¡ 
TCÛff
 
³lMax
=(TCÛffè
¡d
::
num”ic_lim™s
<
P–
>::
	`max
();

1897 ià(
rdpcmMode
 =ð
RDPCM_VER
)

1899  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

1901 
P–
 *
pcCurResidu®
 = 
pcResidu®
+
uiX
;

1902 
TCÛff
 
accumuÏtÜ
 = *
pcCurResidu®
;

1903 
pcCurResidu®
+=
uiSŒide
;

1904  
UIÁ
 
uiY
 = 1; uiY < 
uiHeight
; uiY++, 
pcCurResidu®
+=
uiSŒide
 )

1906 
accumuÏtÜ
 +ð*(
pcCurResidu®
);

1907 *
pcCurResidu®
 = (
P–
)
Cl3
<
TCÛff
>(
³lMš
, 
³lMax
, 
accumuÏtÜ
);

1911 ià(
rdpcmMode
 =ð
RDPCM_HOR
)

1913  
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

1915 
P–
 *
pcCurResidu®
 = 
pcResidu®
+
uiY
*
uiSŒide
;

1916 
TCÛff
 
accumuÏtÜ
 = *
pcCurResidu®
;

1917 
pcCurResidu®
++;

1918  
UIÁ
 
uiX
 = 1; uiX < 
uiWidth
; uiX++, 
pcCurResidu®
++ )

1920 
accumuÏtÜ
 +ð*(
pcCurResidu®
);

1921 *
pcCurResidu®
 = (
P–
)
Cl3
<
TCÛff
>(
³lMš
, 
³lMax
, 
accumuÏtÜ
);

1926 
	}
}

1942 
Void
 
	gTComTrQuªt
::
	$xT
ÐcÚ¡ 
IÁ
 
chªÃlB™D•th
, 
BoÞ
 
u£DST
, 
P–
* 
piBlkResi
, 
UIÁ
 
uiSŒide
, 
TCÛff
* 
psCÛff
, IÁ 
iWidth
, IÁ 
iHeight
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
 )

1944 #ià
MATRIX_MULT


1945 ifÐ
iWidth
 =ð
iHeight
)

1947 
	`xTr
(
chªÃlB™D•th
, 
piBlkResi
, 
psCÛff
, 
uiSŒide
, (
UIÁ
)
iWidth
, 
u£DST
, 
maxLog2TrDyÇmicRªge
);

1952 
TCÛff
 
block
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

1953 
TCÛff
 
cÛff
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

1955 
IÁ
 
y
 = 0; y < 
iHeight
; y++)

1957 
IÁ
 
x
 = 0; x < 
iWidth
; x++)

1959 
block
[(
y
 * 
iWidth
è+ 
x
] = 
piBlkResi
[(y * 
uiSŒide
) + x];

1963 
	`xTrMxN
Ð
chªÃlB™D•th
, 
block
, 
cÛff
, 
iWidth
, 
iHeight
, 
u£DST
, 
maxLog2TrDyÇmicRªge
 );

1965 
	`memýy
(
psCÛff
, 
cÛff
, (
iWidth
 * 
iHeight
 * (
TCÛff
)));

1966 
	}
}

1978 
Void
 
	gTComTrQuªt
::
	$xIT
ÐcÚ¡ 
IÁ
 
chªÃlB™D•th
, 
BoÞ
 
u£DST
, 
TCÛff
* 
¶CÛf
, 
P–
* 
pResidu®
, 
UIÁ
 
uiSŒide
, IÁ 
iWidth
, IÁ 
iHeight
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
 )

1980 #ià
MATRIX_MULT


1981 ifÐ
iWidth
 =ð
iHeight
 )

1983 
	`xITr
(
chªÃlB™D•th
, 
¶CÛf
, 
pResidu®
, 
uiSŒide
, (
UIÁ
)
iWidth
, 
u£DST
, 
maxLog2TrDyÇmicRªge
);

1988 
TCÛff
 
block
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

1989 
TCÛff
 
cÛff
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

1991 
	`memýy
(
cÛff
, 
¶CÛf
, (
iWidth
 * 
iHeight
 * (
TCÛff
)));

1993 
	`xITrMxN
Ð
chªÃlB™D•th
, 
cÛff
, 
block
, 
iWidth
, 
iHeight
, 
u£DST
, 
maxLog2TrDyÇmicRªge
 );

1995 
IÁ
 
y
 = 0; y < 
iHeight
; y++)

1997 
IÁ
 
x
 = 0; x < 
iWidth
; x++)

1999 
pResidu®
[(
y
 * 
uiSŒide
è+ 
x
] = 
	`P–
(
block
[(y * 
iWidth
) + x]);

2002 
	}
}

2011 
Void
 
	gTComTrQuªt
::
	$xT¿nsfÜmSk
Ð
P–
* 
piBlkResi
, 
UIÁ
 
uiSŒide
, 
TCÛff
* 
psCÛff
, 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compÚ’t
 )

2013 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compÚ’t
);

2014 cÚ¡ 
IÁ
 
width
 = 
»ù
.width;

2015 cÚ¡ 
IÁ
 
height
 = 
»ù
.height;

2016 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compÚ’t
));

2017 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compÚ’t
));

2019 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compÚ’t
), 
maxLog2TrDyÇmicRªge
);

2020 ià(
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
())

2022 
iT¿nsfÜmShiá
 = 
¡d
::
max
<
IÁ
>(0, iTransformShift);

2025 cÚ¡ 
BoÞ
 
rÙ©eResidu®
 = 
rTu
.
	`isNÚT¿nsfÜmedResidu®RÙ©ed
(
compÚ’t
);

2026 cÚ¡ 
UIÁ
 
uiSizeMšus1
 = (
width
 * 
height
) - 1;

2028 ià(
iT¿nsfÜmShiá
 >= 0)

2030 
UIÁ
 
y
 = 0, 
cÛffic›ÁIndex
 = 0; y < 
height
; y++)

2032 
UIÁ
 
x
 = 0; x < 
width
; x++, 
cÛffic›ÁIndex
++)

2034 
psCÛff
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
è: cÛffic›ÁIndex] = 
	`TCÛff
(
piBlkResi
[(
y
 * 
uiSŒide
è+ 
x
]è<< 
iT¿nsfÜmShiá
;

2040 
iT¿nsfÜmShiá
 = -iTransformShift;

2041 cÚ¡ 
TCÛff
 
off£t
 = 1 << (
iT¿nsfÜmShiá
 - 1);

2043 
UIÁ
 
y
 = 0, 
cÛffic›ÁIndex
 = 0; y < 
height
; y++)

2045 
UIÁ
 
x
 = 0; x < 
width
; x++, 
cÛffic›ÁIndex
++)

2047 
psCÛff
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
è: cÛffic›ÁIndex] = (
	`TCÛff
(
piBlkResi
[(
y
 * 
uiSŒide
è+ 
x
]è+ 
off£t
è>> 
iT¿nsfÜmShiá
;

2051 
	}
}

2060 
Void
 
	gTComTrQuªt
::
	$xIT¿nsfÜmSk
Ð
TCÛff
* 
¶CÛf
, 
P–
* 
pResidu®
, 
UIÁ
 
uiSŒide
, 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compÚ’t
 )

2062 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compÚ’t
);

2063 cÚ¡ 
IÁ
 
width
 = 
»ù
.width;

2064 cÚ¡ 
IÁ
 
height
 = 
»ù
.height;

2065 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compÚ’t
));

2066 #ià
O0043_BEST_EFFORT_DECODING


2067 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SŒ—mB™D•th
(
	`toChªÃlTy³
(
compÚ’t
));

2069 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compÚ’t
));

2072 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compÚ’t
), 
maxLog2TrDyÇmicRªge
);

2073 ià(
rTu
.
	`g‘CU
()->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
())

2075 
iT¿nsfÜmShiá
 = 
¡d
::
max
<
IÁ
>(0, iTransformShift);

2078 cÚ¡ 
BoÞ
 
rÙ©eResidu®
 = 
rTu
.
	`isNÚT¿nsfÜmedResidu®RÙ©ed
(
compÚ’t
);

2079 cÚ¡ 
UIÁ
 
uiSizeMšus1
 = (
width
 * 
height
) - 1;

2081 ià(
iT¿nsfÜmShiá
 >= 0)

2083 cÚ¡ 
TCÛff
 
off£t
 = 
iT¿nsfÜmShiá
==0 ? 0 : (1 << (iTransformShift - 1));

2085 
UIÁ
 
y
 = 0, 
cÛffic›ÁIndex
 = 0; y < 
height
; y++)

2087 
UIÁ
 
x
 = 0; x < 
width
; x++, 
cÛffic›ÁIndex
++)

2089 
pResidu®
[(
y
 * 
uiSŒide
è+ 
x
] = 
	`P–
((
¶CÛf
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
è: cÛffic›ÁIndex] + 
off£t
è>> 
iT¿nsfÜmShiá
);

2095 
iT¿nsfÜmShiá
 = -iTransformShift;

2097 
UIÁ
 
y
 = 0, 
cÛffic›ÁIndex
 = 0; y < 
height
; y++)

2099 
UIÁ
 
x
 = 0; x < 
width
; x++, 
cÛffic›ÁIndex
++)

2101 
pResidu®
[(
y
 * 
uiSŒide
è+ 
x
] = 
	`P–
(
¶CÛf
[
rÙ©eResidu®
 ? (
uiSizeMšus1
 - 
cÛffic›ÁIndex
è: cÛffic›ÁIndex] << 
iT¿nsfÜmShiá
);

2105 
	}
}

2119 
Void
 
	gTComTrQuªt
::
xR©eDi¡O±Quªt
 ( 
TComTU
 &
rTu
,

2120 
TCÛff
 * 
¶SrcCÛff
,

2121 
TCÛff
 * 
piD¡CÛff
,

2122 #ià
ADAPTIVE_QP_SELECTION


2123 
TCÛff
 * 
piA¾D¡CÛff
,

2125 
TCÛff
 &
uiAbsSum
,

2126 cÚ¡ 
CompÚ’tID
 
compID
,

2127 cÚ¡ 
QpP¬am
 &
cQP
 )

2129 cÚ¡ 
	gTComReùªgË
 & 
	g»ù
 = 
rTu
.
g‘Reù
(
compID
);

2130 cÚ¡ 
UIÁ
 
	guiWidth
 = 
»ù
.
width
;

2131 cÚ¡ 
UIÁ
 
	guiHeight
 = 
»ù
.
height
;

2132 
TComD©aCU
 * 
	gpcCU
 = 
rTu
.
g‘CU
();

2133 cÚ¡ 
UIÁ
 
	guiAbsP¬tIdx
 = 
rTu
.
G‘AbsP¬tIdxTU
();

2134 cÚ¡ 
ChªÃlTy³
 
	gchªÃlTy³
 = 
toChªÃlTy³
(
compID
);

2135 cÚ¡ 
UIÁ
 
	guiLog2TrSize
 = 
rTu
.
G‘Equiv®’tLog2TrSize
(
compID
);

2137 cÚ¡ 
BoÞ
 
	gex‹ndedP»cisiÚ
 = 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘SpsRªgeEx‹nsiÚ
().
g‘Ex‹ndedP»cisiÚProûssšgFÏg
();

2138 cÚ¡ 
IÁ
 
	gmaxLog2TrDyÇmicRªge
 = 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘MaxLog2TrDyÇmicRªge
(
toChªÃlTy³
(
compID
));

2139 cÚ¡ 
IÁ
 
	gchªÃlB™D•th
 = 
rTu
.
g‘CU
()->
g‘Sliû
()->
g‘SPS
()->
g‘B™D•th
(
chªÃlTy³
);

2148 
IÁ
 
	giT¿nsfÜmShiá
 = 
g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
uiLog2TrSize
, 
maxLog2TrDyÇmicRªge
);

2149 ià((
	gpcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
è!ð0è&& 
ex‹ndedP»cisiÚ
)

2151 
iT¿nsfÜmShiá
 = 
¡d
::
max
<
IÁ
>(0, 
	giT¿nsfÜmShiá
);

2154 cÚ¡ 
BoÞ
 
	gbU£GÞombRiûP¬am‘”Ad­tiÚ
 = 
pcCU
->
g‘Sliû
()->
g‘SPS
()->
g‘SpsRªgeEx‹nsiÚ
().
g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
();

2155 cÚ¡ 
UIÁ
 
	gš™ŸlGÞombRiûP¬am‘”
 = 
m_pcE¡B™sSbac
->
gÞombRiûAd­tiÚSti¡ics
[
rTu
.
g‘GÞombRiûSti¡icsIndex
(
compID
)] / 
RExt__GOLOMB_RICE_INCREMENT_DIVISOR
;

2156 
UIÁ
 
	guiGoRiûP¬am
 = 
š™ŸlGÞombRiûP¬am‘”
;

2157 
DoubË
 
	gd64BlockUncodedCo¡
 = 0;

2158 cÚ¡ 
UIÁ
 
	guiLog2BlockWidth
 = 
g_aucCÚv”tToB™
[ 
uiWidth
 ] + 2;

2159 cÚ¡ 
UIÁ
 
	guiLog2BlockHeight
 = 
g_aucCÚv”tToB™
[ 
uiHeight
 ] + 2;

2160 cÚ¡ 
UIÁ
 
	guiMaxNumCÛff
 = 
uiWidth
 * 
uiHeight
;

2161 
as£¹
(
compID
<
MAX_NUM_COMPONENT
);

2163 
IÁ
 
	gsÿlšgLi¡Ty³
 = 
g‘SÿlšgLi¡Ty³
(
pcCU
->
g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

2164 
as£¹
(
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
);

2166 #ià
ADAPTIVE_QP_SELECTION


2167 
mem£t
(
piA¾D¡CÛff
, 0, (
TCÛff
è* 
uiMaxNumCÛff
);

2170 
DoubË
 
	gpdCo¡CÛff
 [ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2171 
DoubË
 
	gpdCo¡Sig
 [ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2172 
DoubË
 
	gpdCo¡CÛff0
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2173 
mem£t
Ð
pdCo¡CÛff
, 0, (
DoubË
è* 
uiMaxNumCÛff
 );

2174 
mem£t
Ð
pdCo¡Sig
, 0, (
DoubË
è* 
uiMaxNumCÛff
 );

2175 
IÁ
 
	g¿‹IncUp
 [ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2176 
IÁ
 
	g¿‹IncDown
 [ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2177 
IÁ
 
	gsigR©eD–
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2178 
TCÛff
 
	gd–U
 [ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

2179 
mem£t
Ð
¿‹IncUp
, 0, (
IÁ
 ) * 
uiMaxNumCÛff
 );

2180 
mem£t
Ð
¿‹IncDown
, 0, (
IÁ
 ) * 
uiMaxNumCÛff
 );

2181 
mem£t
Ð
sigR©eD–
, 0, (
IÁ
 ) * 
uiMaxNumCÛff
 );

2182 
mem£t
Ð
d–U
, 0, (
TCÛff
è* 
uiMaxNumCÛff
 );

2184 cÚ¡ 
IÁ
 
	giQB™s
 = 
QUANT_SHIFT
 + 
cQP
.
³r
 + 
iT¿nsfÜmShiá
;

2185 cÚ¡ 
DoubË
 *cÚ¡ 
	gpdE¼SÿË
 = 
g‘E¼SÿËCÛff
(
sÿlšgLi¡Ty³
, (
uiLog2TrSize
-2), 
cQP
.
»m
);

2186 cÚ¡ 
IÁ
 *cÚ¡ 
	gpiQCÛf
 = 
g‘QuªtCÛff
(
sÿlšgLi¡Ty³
, 
cQP
.
»m
, (
uiLog2TrSize
-2));

2188 cÚ¡ 
BoÞ
 
	g’abËSÿlšgLi¡s
 = 
g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, (
pcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
) != 0));

2189 cÚ¡ 
IÁ
 
	gdeçuÉQuªti§tiÚCÛffic›Á
 = 
g_quªtSÿËs
[
cQP
.
»m
];

2190 cÚ¡ 
DoubË
 
	gdeçuÉE¼ÜSÿË
 = 
g‘E¼SÿËCÛffNoSÿlšgLi¡
(
sÿlšgLi¡Ty³
, (
uiLog2TrSize
-2), 
cQP
.
»m
);

2192 cÚ¡ 
TCÛff
 
	g’ŒÝyCodšgMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

2193 cÚ¡ 
TCÛff
 
	g’ŒÝyCodšgMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

2195 #ià
ADAPTIVE_QP_SELECTION


2196 
IÁ
 
	giQB™sC
 = 
iQB™s
 - 
ARL_C_PRECISION
;

2197 
IÁ
 
	giAddC
 = 1 << (
iQB™sC
-1);

2200 
TUEÁrÝyCodšgP¬am‘”s
 
	gcodšgP¬am‘”s
;

2201 
g‘TUEÁrÝyCodšgP¬am‘”s
(
codšgP¬am‘”s
, 
rTu
, 
compID
);

2202 cÚ¡ 
UIÁ
 
	guiCGSize
 = (1 << 
MLS_CG_SIZE
);

2204 
DoubË
 
	gpdCo¡CÛffGroupSig
[ 
MLS_GRP_NUM
 ];

2205 
UIÁ
 
	guiSigCÛffGroupFÏg
[ 
MLS_GRP_NUM
 ];

2206 
IÁ
 
	giCGLa¡SÿnPos
 = -1;

2208 
UIÁ
 
	guiCtxS‘
 = 0;

2209 
IÁ
 
	gc1
 = 1;

2210 
IÁ
 
	gc2
 = 0;

2211 
DoubË
 
	gd64Ba£Co¡
 = 0;

2212 
IÁ
 
	giLa¡SÿnPos
 = -1;

2214 
UIÁ
 
	gc1Idx
 = 0;

2215 
UIÁ
 
	gc2Idx
 = 0;

2216 
IÁ
 
	gba£Lev–
;

2218 
mem£t
Ð
pdCo¡CÛffGroupSig
, 0, (
DoubË
è* 
MLS_GRP_NUM
 );

2219 
mem£t
Ð
uiSigCÛffGroupFÏg
, 0, (
UIÁ
è* 
MLS_GRP_NUM
 );

2221 
UIÁ
 
	guiCGNum
 = 
uiWidth
 * 
uiHeight
 >> 
MLS_CG_SIZE
;

2222 
IÁ
 
	giSÿnPos
;

2223 
cÛffGroupRDSts
 
	grdSts
;

2225 cÚ¡ 
UIÁ
 
	gsignifiÿnûM­CÚ‹xtOff£t
 = 
g‘SignifiÿnûM­CÚ‹xtOff£t
(
compID
);

2227 
IÁ
 
	giCGSÿnPos
 = 
uiCGNum
-1; iCGScanPos >= 0; iCGScanPos--)

2229 
UIÁ
 
	guiCGBlkPos
 = 
codšgP¬am‘”s
.
sÿnCG
[ 
iCGSÿnPos
 ];

2230 
UIÁ
 
	guiCGPosY
 = 
uiCGBlkPos
 / 
codšgP¬am‘”s
.
widthInGroups
;

2231 
UIÁ
 
	guiCGPosX
 = 
uiCGBlkPos
 - (
uiCGPosY
 * 
codšgP¬am‘”s
.
widthInGroups
);

2233 
mem£t
Ð&
rdSts
, 0,  (
cÛffGroupRDSts
));

2235 cÚ¡ 
IÁ
 
	g·‰”nSigCtx
 = 
TComTrQuªt
::
ÿlcP©‹ºSigCtx
(
uiSigCÛffGroupFÏg
, 
uiCGPosX
, 
uiCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
);

2237 
IÁ
 
	giSÿnPosšCG
 = 
uiCGSize
-1; iScanPosinCG >= 0; iScanPosinCG--)

2239 
	giSÿnPos
 = 
iCGSÿnPos
*
uiCGSize
 + 
iSÿnPosšCG
;

2241 
UIÁ
 
	guiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[
iSÿnPos
];

2244 cÚ¡ 
IÁ
 
	gquªti§tiÚCÛffic›Á
 = (
’abËSÿlšgLi¡s
è? 
piQCÛf
 [
uiBlkPos
] : 
deçuÉQuªti§tiÚCÛffic›Á
;

2245 cÚ¡ 
DoubË
 
	g”rÜSÿË
 = (
’abËSÿlšgLi¡s
è? 
pdE¼SÿË
[
uiBlkPos
] : 
deçuÉE¼ÜSÿË
;

2247 cÚ¡ 
IÁ64
 
	gtmpLev–
 = IÁ64(
abs
(
¶SrcCÛff
[ 
uiBlkPos
 ])è* 
quªti§tiÚCÛffic›Á
;

2249 cÚ¡ 
IÁ”medŸ‹_IÁ
 
	glLev–DoubË
 = (IÁ”medŸ‹_IÁ)
mš
<
IÁ64
>(
tmpLev–
, 
	g¡d
::
num”ic_lim™s
<IÁ”medŸ‹_IÁ>::
max
(è- (IÁ”medŸ‹_IÁ(1è<< (
iQB™s
 - 1)));

2251 #ià
ADAPTIVE_QP_SELECTION


2252 ifÐ
	gm_bU£Ad­tQpS–eù
 )

2254 
	gpiA¾D¡CÛff
[
uiBlkPos
] = (
TCÛff
)(Ð
lLev–DoubË
 + 
iAddC
è>> 
iQB™sC
 );

2257 cÚ¡ 
UIÁ
 
	guiMaxAbsLev–
 = 
¡d
::
mš
<UIÁ>(UIÁ(
’ŒÝyCodšgMaximum
), UIÁ((
lLev–DoubË
 + (
IÁ”medŸ‹_IÁ
(1è<< (
iQB™s
 - 1))) >> iQBits));

2259 cÚ¡ 
DoubË
 
	gdE¼
 = DoubËÐ
lLev–DoubË
 );

2260 
	gpdCo¡CÛff0
[ 
iSÿnPos
 ] = 
dE¼
 * dE¼ * 
”rÜSÿË
;

2261 
	gd64BlockUncodedCo¡
 +ð
pdCo¡CÛff0
[ 
iSÿnPos
 ];

2262 
	gpiD¡CÛff
[ 
uiBlkPos
 ] = 
uiMaxAbsLev–
;

2264 iàÐ
	guiMaxAbsLev–
 > 0 && 
	giLa¡SÿnPos
 < 0 )

2266 
	giLa¡SÿnPos
 = 
iSÿnPos
;

2267 
	guiCtxS‘
 = 
g‘CÚ‹xtS‘Index
(
compID
, (
iSÿnPos
 >> 
MLS_CG_SIZE
), 0);

2268 
	giCGLa¡SÿnPos
 = 
iCGSÿnPos
;

2271 iàÐ
	giLa¡SÿnPos
 >= 0 )

2274 
UIÁ
 
uiLev–
;

2275 
UIÁ
 
	guiOÃCtx
 = (
NUM_ONE_FLAG_CTX_PER_SET
 * 
uiCtxS‘
è+ 
c1
;

2276 
UIÁ
 
	guiAbsCtx
 = (
NUM_ABS_FLAG_CTX_PER_SET
 * 
uiCtxS‘
è+ 
c2
;

2278 ifÐ
	giSÿnPos
 =ð
iLa¡SÿnPos
 )

2280 
uiLev–
 = 
xG‘CodedLev–
Ð
pdCo¡CÛff
[ 
iSÿnPos
 ], 
pdCo¡CÛff0
[ iSÿnPo ], 
pdCo¡Sig
[ iScanPos ],

2281 
lLev–DoubË
, 
uiMaxAbsLev–
, 
signifiÿnûM­CÚ‹xtOff£t
, 
uiOÃCtx
, 
uiAbsCtx
, 
uiGoRiûP¬am
,

2282 
c1Idx
, 
c2Idx
, 
iQB™s
, 
”rÜSÿË
, 1, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge


2287 
UShÜt
 
	guiCtxSig
 = 
signifiÿnûM­CÚ‹xtOff£t
 + 
g‘SigCtxInc
Ð
·‰”nSigCtx
, 
codšgP¬am‘”s
, 
iSÿnPos
, 
uiLog2BlockWidth
, 
uiLog2BlockHeight
, 
chªÃlTy³
 );

2289 
	guiLev–
 = 
xG‘CodedLev–
Ð
pdCo¡CÛff
[ 
iSÿnPos
 ], 
pdCo¡CÛff0
[ iSÿnPo ], 
pdCo¡Sig
[ iScanPos ],

2290 
lLev–DoubË
, 
uiMaxAbsLev–
, 
uiCtxSig
, 
uiOÃCtx
, 
uiAbsCtx
, 
uiGoRiûP¬am
,

2291 
c1Idx
, 
c2Idx
, 
iQB™s
, 
”rÜSÿË
, 0, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge


2294 
	gsigR©eD–
[ 
uiBlkPos
 ] = 
m_pcE¡B™sSbac
->
signifiÿÁB™s
[ 
uiCtxSig
 ][ 1 ] - m_pcEstBitsSbac->significantBits[ uiCtxSig ][ 0 ];

2297 
	gd–U
[ 
uiBlkPos
 ] = 
TCÛff
((
lLev–DoubË
 - (
IÁ”medŸ‹_IÁ
(
uiLev–
è<< 
iQB™s
)) >> (iQBits-8));

2299 ifÐ
	guiLev–
 > 0 )

2301 
IÁ
 
	g¿‹Now
 = 
xG‘ICR©e
Ð
uiLev–
, 
uiOÃCtx
, 
uiAbsCtx
, 
uiGoRiûP¬am
, 
c1Idx
, 
c2Idx
, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge
 );

2302 
	g¿‹IncUp
 [ 
uiBlkPos
 ] = 
xG‘ICR©e
Ð
uiLev–
+1, 
uiOÃCtx
, 
uiAbsCtx
, 
uiGoRiûP¬am
, 
c1Idx
, 
c2Idx
, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge
 ) - 
	g¿‹Now
;

2303 
	g¿‹IncDown
 [ 
uiBlkPos
 ] = 
xG‘ICR©e
Ð
uiLev–
-1, 
uiOÃCtx
, 
uiAbsCtx
, 
uiGoRiûP¬am
, 
c1Idx
, 
c2Idx
, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge
 ) - 
	g¿‹Now
;

2307 
	g¿‹IncUp
 [ 
uiBlkPos
 ] = 
m_pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
uiOÃCtx
 ][ 0 ];

2309 
	gpiD¡CÛff
[ 
uiBlkPos
 ] = 
uiLev–
;

2310 
	gd64Ba£Co¡
 +ð
pdCo¡CÛff
 [ 
iSÿnPos
 ];

2312 
	gba£Lev–
 = (
c1Idx
 < 
C1FLAG_NUMBER
è? (2 + (
c2Idx
 < 
C2FLAG_NUMBER
)) : 1;

2313 ifÐ
	guiLev–
 >ð
ba£Lev–
 )

2315 ià(
uiLev–
 > 3*(1<<
uiGoRiûP¬am
))

2317 
uiGoRiûP¬am
 = 
bU£GÞombRiûP¬am‘”Ad­tiÚ
 ? (uiGoRiûP¬am + 1è: (
¡d
::
mš
<
UIÁ
>((uiGoRiceParam + 1), 4));

2320 iàÐ
	guiLev–
 >= 1)

2322 
c1Idx
 ++;

2326 ifÐ
	guiLev–
 > 1 )

2328 
	gc1
 = 0;

2329 
	gc2
 +ð(
c2
 < 2);

2330 
	gc2Idx
 ++;

2332 ifÐ(
	gc1
 < 3è&& (c1 > 0è&& 
	guiLev–
)

2334 
	gc1
++;

2338 ifÐÐ
	giSÿnPos
 % 
	guiCGSize
 =ð0 ) && ( 
iSÿnPos
 > 0 ) )

2340 
uiCtxS‘
 = 
g‘CÚ‹xtS‘Index
(
compID
, ((
iSÿnPos
 - 1è>> 
MLS_CG_SIZE
), (
c1
 == 0));

2341 
	gc1
 = 1;

2342 
	gc2
 = 0;

2343 
	gc1Idx
 = 0;

2344 
	gc2Idx
 = 0;

2345 
	guiGoRiûP¬am
 = 
š™ŸlGÞombRiûP¬am‘”
;

2350 
	gd64Ba£Co¡
 +ð
pdCo¡CÛff0
[ 
iSÿnPos
 ];

2352 
	grdSts
.
	gd64SigCo¡
 +ð
pdCo¡Sig
[ 
iSÿnPos
 ];

2353 ià(
	giSÿnPosšCG
 == 0 )

2355 
rdSts
.
d64SigCo¡_0
 = 
pdCo¡Sig
[ 
iSÿnPos
 ];

2357 ià(
	gpiD¡CÛff
[ 
uiBlkPos
 ] )

2359 
	guiSigCÛffGroupFÏg
[ 
uiCGBlkPos
 ] = 1;

2360 
	grdSts
.
	gd64CodedLev–ªdDi¡
 +ð
pdCo¡CÛff
[ 
iSÿnPos
 ] - 
pdCo¡Sig
[ iScanPos ];

2361 
	grdSts
.
	gd64UncodedDi¡
 +ð
pdCo¡CÛff0
[ 
iSÿnPos
 ];

2362 iàÐ
	giSÿnPosšCG
 != 0 )

2364 
rdSts
.
iNNZbefÜePos0
++;

2369 ià(
	giCGLa¡SÿnPos
 >= 0)

2371 ifÐ
iCGSÿnPos
 )

2373 ià(
uiSigCÛffGroupFÏg
[ 
uiCGBlkPos
 ] == 0)

2375 
UIÁ
 
uiCtxSig
 = 
g‘SigCÛffGroupCtxInc
Ð
uiSigCÛffGroupFÏg
, 
uiCGPosX
, 
uiCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
 );

2376 
	gd64Ba£Co¡
 +ð
xG‘R©eSigCÛffGroup
(0, 
uiCtxSig
è- 
	grdSts
.
	gd64SigCo¡
;;

2377 
	gpdCo¡CÛffGroupSig
[ 
iCGSÿnPos
 ] = 
xG‘R©eSigCÛffGroup
(0, 
uiCtxSig
);

2381 ià(
	giCGSÿnPos
 < 
	giCGLa¡SÿnPos
)

2383 iàÐ
	grdSts
.
	giNNZbefÜePos0
 == 0 )

2385 
d64Ba£Co¡
 -ð
rdSts
.
d64SigCo¡_0
;

2386 
	grdSts
.
	gd64SigCo¡
 -ð
rdSts
.
d64SigCo¡_0
;

2389 
DoubË
 
	gd64Co¡Z”oCG
 = 
d64Ba£Co¡
;

2392 
UIÁ
 
	guiCtxSig
 = 
g‘SigCÛffGroupCtxInc
Ð
uiSigCÛffGroupFÏg
, 
uiCGPosX
, 
uiCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
 );

2394 ià(
	giCGSÿnPos
 < 
	giCGLa¡SÿnPos
)

2396 
	gd64Ba£Co¡
 +ð
xG‘R©eSigCÛffGroup
(1, 
uiCtxSig
);

2397 
	gd64Co¡Z”oCG
 +ð
xG‘R©eSigCÛffGroup
(0, 
uiCtxSig
);

2398 
	gpdCo¡CÛffGroupSig
[ 
iCGSÿnPos
 ] = 
xG‘R©eSigCÛffGroup
(1, 
uiCtxSig
);

2402 
	gd64Co¡Z”oCG
 +ð
rdSts
.
d64UncodedDi¡
;

2403 
	gd64Co¡Z”oCG
 -ð
rdSts
.
d64CodedLev–ªdDi¡
;

2404 
	gd64Co¡Z”oCG
 -ð
rdSts
.
d64SigCo¡
;

2407 iàÐ
	gd64Co¡Z”oCG
 < 
	gd64Ba£Co¡
 )

2409 
	guiSigCÛffGroupFÏg
[ 
uiCGBlkPos
 ] = 0;

2410 
	gd64Ba£Co¡
 = 
d64Co¡Z”oCG
;

2411 ià(
	giCGSÿnPos
 < 
	giCGLa¡SÿnPos
)

2413 
	gpdCo¡CÛffGroupSig
[ 
iCGSÿnPos
 ] = 
xG‘R©eSigCÛffGroup
(0, 
uiCtxSig
);

2416 
IÁ
 
	giSÿnPosšCG
 = 
uiCGSize
-1; iScanPosinCG >= 0; iScanPosinCG--)

2418 
	giSÿnPos
 = 
iCGSÿnPos
*
uiCGSize
 + 
iSÿnPosšCG
;

2419 
UIÁ
 
	guiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
iSÿnPos
 ];

2421 ià(
	gpiD¡CÛff
[ 
uiBlkPos
 ])

2423 
	gpiD¡CÛff
 [ 
uiBlkPos
 ] = 0;

2424 
	gpdCo¡CÛff
[ 
iSÿnPos
 ] = 
pdCo¡CÛff0
[ iScanPos ];

2425 
	gpdCo¡Sig
 [ 
iSÿnPos
 ] = 0;

2434 
	guiSigCÛffGroupFÏg
[ 
uiCGBlkPos
 ] = 1;

2440 iàÐ
	giLa¡SÿnPos
 < 0 )

2445 
DoubË
 
	gd64Be¡Co¡
 = 0;

2446 
IÁ
 
	gui16CtxCbf
 = 0;

2447 
IÁ
 
	giBe¡La¡IdxP1
 = 0;

2448 ifÐ!
	gpcCU
->
isIÁ¿
Ð
uiAbsP¬tIdx
 ) && 
isLuma
(
compID
è&&…cCU->
g‘T¿nsfÜmIdx
( uiAbsPartIdx ) == 0 )

2450 
ui16CtxCbf
 = 0;

2451 
	gd64Be¡Co¡
 = 
d64BlockUncodedCo¡
 + 
xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
blockRoÙCbpB™s
[ 
ui16CtxCbf
 ][ 0 ] );

2452 
	gd64Ba£Co¡
 +ð
xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
blockRoÙCbpB™s
[ 
ui16CtxCbf
 ][ 1 ] );

2456 
	gui16CtxCbf
 = 
pcCU
->
g‘CtxQtCbf
Ð
rTu
, 
chªÃlTy³
 );

2457 
	gui16CtxCbf
 +ð
g‘CBFCÚ‹xtOff£t
(
compID
);

2458 
	gd64Be¡Co¡
 = 
d64BlockUncodedCo¡
 + 
xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
blockCbpB™s
[ 
ui16CtxCbf
 ][ 0 ] );

2459 
	gd64Ba£Co¡
 +ð
xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
blockCbpB™s
[ 
ui16CtxCbf
 ][ 1 ] );

2463 
BoÞ
 
	gbFoundLa¡
 = 
çl£
;

2464 
IÁ
 
	giCGSÿnPos
 = 
iCGLa¡SÿnPos
; iCGScanPos >= 0; iCGScanPos--)

2466 
UIÁ
 
	guiCGBlkPos
 = 
codšgP¬am‘”s
.
sÿnCG
[ 
iCGSÿnPos
 ];

2468 
	gd64Ba£Co¡
 -ð
pdCo¡CÛffGroupSig
 [ 
iCGSÿnPos
 ];

2469 ià(
	guiSigCÛffGroupFÏg
[ 
uiCGBlkPos
 ])

2471 
IÁ
 
	giSÿnPosšCG
 = 
uiCGSize
-1; iScanPosinCG >= 0; iScanPosinCG--)

2473 
	giSÿnPos
 = 
iCGSÿnPos
*
uiCGSize
 + 
iSÿnPosšCG
;

2475 ià(
	giSÿnPos
 > 
	giLa¡SÿnPos
)

2479 
UIÁ
 
	guiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[
iSÿnPos
];

2481 ifÐ
	gpiD¡CÛff
[ 
uiBlkPos
 ] )

2483 
UIÁ
 
	guiPosY
 = 
uiBlkPos
 >> 
uiLog2BlockWidth
;

2484 
UIÁ
 
	guiPosX
 = 
uiBlkPos
 - ( 
uiPosY
 << 
uiLog2BlockWidth
 );

2486 
DoubË
 
	gd64Co¡La¡
ð
codšgP¬am‘”s
.
sÿnTy³
 =ð
SCAN_VER
 ? 
xG‘R©eLa¡
Ð
uiPosY
, 
uiPosX
, 
compID
 ) : xGetRateLast( uiPosX, uiPosY, compID );

2487 
DoubË
 
	gtÙ®Co¡
 = 
d64Ba£Co¡
 + 
d64Co¡La¡
 - 
pdCo¡Sig
[ 
iSÿnPos
 ];

2489 ifÐ
	gtÙ®Co¡
 < 
	gd64Be¡Co¡
 )

2491 
	giBe¡La¡IdxP1
 = 
iSÿnPos
 + 1;

2492 
	gd64Be¡Co¡
 = 
tÙ®Co¡
;

2494 ifÐ
	gpiD¡CÛff
[ 
uiBlkPos
 ] > 1 )

2496 
	gbFoundLa¡
 = 
Œue
;

2499 
	gd64Ba£Co¡
 -ð
pdCo¡CÛff
[ 
iSÿnPos
 ];

2500 
	gd64Ba£Co¡
 +ð
pdCo¡CÛff0
[ 
iSÿnPos
 ];

2504 
	gd64Ba£Co¡
 -ð
pdCo¡Sig
[ 
iSÿnPos
 ];

2507 ià(
	gbFoundLa¡
)

2515  
IÁ
 
	gsÿnPos
 = 0; sÿnPo < 
	giBe¡La¡IdxP1
; scanPos++ )

2517 
IÁ
 
	gblkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
sÿnPos
 ];

2518 
TCÛff
 
	gËv–
 = 
piD¡CÛff
[ 
blkPos
 ];

2519 
	guiAbsSum
 +ð
Ëv–
;

2520 
	gpiD¡CÛff
[ 
blkPos
 ] = ( 
¶SrcCÛff
[ blkPo ] < 0 ) ? -
Ëv–
 :†evel;

2524  
IÁ
 
	gsÿnPos
 = 
iBe¡La¡IdxP1
; sÿnPo <ð
iLa¡SÿnPos
; scanPos++ )

2526 
	gpiD¡CÛff
[ 
codšgP¬am‘”s
.
sÿn
[ 
sÿnPos
 ] ] = 0;

2530 ifÐ
	gpcCU
->
g‘Sliû
()->
g‘PPS
()->
g‘SignD©aHidšgEÇbËdFÏg
(è&& 
	guiAbsSum
>=2)

2532 cÚ¡ 
DoubË
 
šv”£QuªtSÿË
 = DoubË(
g_švQuªtSÿËs
[
cQP
.
»m
]);

2533 
IÁ64
 
	grdFaùÜ
 = (IÁ64)(
šv”£QuªtSÿË
 * inv”£QuªtSÿË * (1 << (2 * 
cQP
.
³r
))

2534 / 
m_dLambda
 / 16 / (1 << (2 * 
DISTORTION_PRECISION_ADJUSTMENT
(
chªÃlB™D•th
 - 8)))

2537 
IÁ
 
	gÏ¡CG
 = -1;

2538 
IÁ
 
	gabsSum
 = 0 ;

2539 
IÁ
 
	gn
 ;

2541  
IÁ
 
	gsubS‘
 = (
uiWidth
*
uiHeight
-1è>> 
MLS_CG_SIZE
; subSet >= 0; subSet-- )

2543 
IÁ
 
	gsubPos
 = 
subS‘
 << 
MLS_CG_SIZE
;

2544 
IÁ
 
	gfœ¡NZPosInCG
=
uiCGSize
 , 
	gÏ¡NZPosInCG
=-1 ;

2545 
	gabsSum
 = 0 ;

2547 
	gn
 = 
uiCGSize
-1;‚ >= 0; --n )

2549 ifÐ
	gpiD¡CÛff
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]] )

2551 
	gÏ¡NZPosInCG
 = 
n
;

2556 
	gn
 = 0;‚ <
	guiCGSize
;‚++ )

2558 ifÐ
	gpiD¡CÛff
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]] )

2560 
	gfœ¡NZPosInCG
 = 
n
;

2565 
	gn
 = 
fœ¡NZPosInCG
;‚ <=
Ï¡NZPosInCG
;‚++ )

2567 
	gabsSum
 +ð
IÁ
(
piD¡CÛff
[ 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ]]);

2570 if(
	gÏ¡NZPosInCG
>=0 && 
Ï¡CG
==-1)

2572 
Ï¡CG
 = 1;

2575 ifÐ
	gÏ¡NZPosInCG
-
	gfœ¡NZPosInCG
>=
SBH_THRESHOLD
 )

2577 
UIÁ
 
signb™
 = (
piD¡CÛff
[
codšgP¬am‘”s
.
sÿn
[
subPos
+
fœ¡NZPosInCG
]]>0?0:1);

2578 ifÐ
	gsignb™
!=(
absSum
&0x1) )

2581 
IÁ64
 
mšCo¡Inc
 = 
¡d
::
num”ic_lim™s
<IÁ64>::
max
(), 
	gcurCo¡
 = std::numeric_limits<Int64>::max();

2582 
IÁ
 
	gmšPos
 = -1, 
	gfš®Chªge
 = 0, 
	gcurChªge
 = 0;

2584  
	gn
 = (
Ï¡CG
==1?
Ï¡NZPosInCG
:
uiCGSize
-1) ;‚ >= 0; --n )

2586 
UIÁ
 
	guiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
n
 + 
subPos
 ];

2587 if(
	gpiD¡CÛff
[ 
uiBlkPos
 ] != 0 )

2589 
IÁ64
 
co¡Up
 = 
rdFaùÜ
 * ( - 
d–U
[
uiBlkPos
] ) + 
¿‹IncUp
[uiBlkPos];

2590 
IÁ64
 
	gco¡Down
 = 
rdFaùÜ
 * ( 
d–U
[
uiBlkPos
] ) + 
¿‹IncDown
[uiBlkPos]

2591 - ((
abs
(
piD¡CÛff
[
uiBlkPos
]è=ð1è? 
sigR©eD–
[uiBlkPos] : 0);

2593 if(
	gÏ¡CG
==1 && 
Ï¡NZPosInCG
==
n
 && 
abs
(
piD¡CÛff
[
uiBlkPos
])==1)

2595 
co¡Down
 -= (4<<15);

2598 if(
	gco¡Up
<
	gco¡Down
)

2600 
	gcurCo¡
 = 
co¡Up
;

2601 
	gcurChªge
 = 1;

2605 
	gcurChªge
 = -1;

2606 if(
	gn
==
fœ¡NZPosInCG
 && 
abs
(
piD¡CÛff
[
uiBlkPos
])==1)

2608 
curCo¡
 = 
¡d
::
num”ic_lim™s
<
IÁ64
>::
max
();

2612 
	gcurCo¡
 = 
co¡Down
;

2618 
	gcurCo¡
 = 
rdFaùÜ
 * ( - (
abs
(
d–U
[
uiBlkPos
])èè+ (1<<15è+ 
¿‹IncUp
[uiBlkPos] + 
sigR©eD–
[uiBlkPos] ;

2619 
	gcurChªge
 = 1 ;

2621 if(
	gn
<
	gfœ¡NZPosInCG
)

2623 
UIÁ
 
	gthissignb™
 = (
¶SrcCÛff
[
uiBlkPos
]>=0?0:1);

2624 if(
	gthissignb™
 !ð
signb™
 )

2626 
curCo¡
 = 
¡d
::
num”ic_lim™s
<
IÁ64
>::
max
();

2631 ifÐ
	gcurCo¡
<
	gmšCo¡Inc
)

2633 
	gmšCo¡Inc
 = 
curCo¡
;

2634 
	gfš®Chªge
 = 
curChªge
;

2635 
	gmšPos
 = 
uiBlkPos
;

2639 if(
	gpiD¡CÛff
[
mšPos
] =ð
’ŒÝyCodšgMaximum
 || 
piD¡CÛff
[mšPos] =ð
’ŒÝyCodšgMšimum
)

2641 
fš®Chªge
 = -1;

2644 if(
	g¶SrcCÛff
[
mšPos
]>=0)

2646 
piD¡CÛff
[
mšPos
] +ð
fš®Chªge
 ;

2650 
	gpiD¡CÛff
[
mšPos
] -ð
fš®Chªge
 ;

2655 if(
	gÏ¡CG
==1)

2657 
Ï¡CG
=0 ;

2672 
IÁ
 
	gTComTrQuªt
::
	$ÿlcP©‹ºSigCtx
ÐcÚ¡ 
UIÁ
* 
sigCÛffGroupFÏg
, UIÁ 
uiCGPosX
, UIÁ 
uiCGPosY
, UIÁ 
widthInGroups
, UIÁ 
heightInGroups
 )

2674 ià((
widthInGroups
 <ð1è&& (
heightInGroups
 <= 1))

2679 cÚ¡ 
BoÞ
 
rightAvažabË
 = 
uiCGPosX
 < (
widthInGroups
 - 1);

2680 cÚ¡ 
BoÞ
 
b–owAvažabË
 = 
uiCGPosY
 < (
heightInGroups
 - 1);

2682 
UIÁ
 
sigRight
 = 0;

2683 
UIÁ
 
sigLow”
 = 0;

2685 ià(
rightAvažabË
)

2687 
sigRight
 = ((
sigCÛffGroupFÏg
[ (
uiCGPosY
 * 
widthInGroups
è+ 
uiCGPosX
 + 1 ] != 0) ? 1 : 0);

2689 ià(
b–owAvažabË
)

2691 
sigLow”
 = ((
sigCÛffGroupFÏg
[ (
uiCGPosY
 + 1è* 
widthInGroups
 + 
uiCGPosX
 ] != 0) ? 1 : 0);

2694  
sigRight
 + (
sigLow”
 << 1);

2695 
	}
}

2707 
IÁ
 
	gTComTrQuªt
::
	$g‘SigCtxInc
 ( 
IÁ
 
·‰”nSigCtx
,

2708 cÚ¡ 
TUEÁrÝyCodšgP¬am‘”s
 &
codšgP¬am‘”s
,

2709 cÚ¡ 
IÁ
 
sÿnPos™iÚ
,

2710 cÚ¡ 
IÁ
 
log2BlockWidth
,

2711 cÚ¡ 
IÁ
 
log2BlockHeight
,

2712 cÚ¡ 
ChªÃlTy³
 
chªTy³
)

2714 ià(
codšgP¬am‘”s
.
fœ¡SignifiÿnûM­CÚ‹xt
 =ð
signifiÿnûM­CÚ‹xtS‘S¹
[
chªTy³
][
CONTEXT_TYPE_SINGLE
])

2717  
signifiÿnûM­CÚ‹xtS‘S¹
[
chªTy³
][
CONTEXT_TYPE_SINGLE
];

2720 cÚ¡ 
UIÁ
 
¿¡”Pos™iÚ
 = 
codšgP¬am‘”s
.
sÿn
[
sÿnPos™iÚ
];

2721 cÚ¡ 
UIÁ
 
posY
 = 
¿¡”Pos™iÚ
 >> 
log2BlockWidth
;

2722 cÚ¡ 
UIÁ
 
posX
 = 
¿¡”Pos™iÚ
 - (
posY
 << 
log2BlockWidth
);

2724 ià((
posX
 + 
posY
) == 0)

2729 
IÁ
 
off£t
 = 
MAX_INT
;

2731 ià((
log2BlockWidth
 =ð2è&& (
log2BlockHeight
 == 2))

2733 
off£t
 = 
ùxIndM­4x4
[ (4 * 
posY
è+ 
posX
 ];

2737 
IÁ
 
út
 = 0;

2739 
·‰”nSigCtx
)

2745 cÚ¡ 
IÁ
 
posXšSub£t
 = 
posX
 & ((1 << 
MLS_CG_LOG2_WIDTH
) - 1);

2746 cÚ¡ 
IÁ
 
posYšSub£t
 = 
posY
 & ((1 << 
MLS_CG_LOG2_HEIGHT
) - 1);

2747 cÚ¡ 
IÁ
 
posTÙ®InSub£t
 = 
posXšSub£t
 + 
posYšSub£t
;

2750 cÚ¡ 
UIÁ
 
cÚ‹xt1Th»shÞd
 = 
NEIGHBOURHOOD_00_CONTEXT_1_THRESHOLD_4x4
;

2751 cÚ¡ 
UIÁ
 
cÚ‹xt2Th»shÞd
 = 
NEIGHBOURHOOD_00_CONTEXT_2_THRESHOLD_4x4
;

2753 
út
 = (
posTÙ®InSub£t
 >ð
cÚ‹xt1Th»shÞd
è? 0 : (ÕosTÙ®InSub£ˆ>ð
cÚ‹xt2Th»shÞd
) ? 1 : 2);

2761 cÚ¡ 
IÁ
 
posYšSub£t
 = 
posY
 & ((1 << 
MLS_CG_LOG2_HEIGHT
) - 1);

2762 cÚ¡ 
IÁ
 
groupHeight
 = 1 << 
MLS_CG_LOG2_HEIGHT
;

2764 
út
 = (
posYšSub£t
 >ð(
groupHeight
 >> 1)) ? 0 : ((posYinSubset >= (groupHeight >> 2)) ? 1 : 2);

2772 cÚ¡ 
IÁ
 
posXšSub£t
 = 
posX
 & ((1 << 
MLS_CG_LOG2_WIDTH
) - 1);

2773 cÚ¡ 
IÁ
 
groupWidth
 = 1 << 
MLS_CG_LOG2_WIDTH
;

2775 
út
 = (
posXšSub£t
 >ð(
groupWidth
 >> 1)) ? 0 : ((posXinSubset >= (groupWidth >> 2)) ? 1 : 2);

2783 
út
 = 2;

2790 
¡d
::
û¼
 << "ERROR: Inv®id…©‹ºSigCtx \"" << 
	`IÁ
(
·‰”nSigCtx
è<< "\" iÀg‘SigCtxInc" << std::
’dl
;

2791 
	`ex™
(1);

2797 cÚ¡ 
BoÞ
 
nÙFœ¡Group
 = ((
posX
 >> 
MLS_CG_LOG2_WIDTH
è+ (
posY
 >> 
MLS_CG_LOG2_HEIGHT
)) > 0;

2799 
off£t
 = (
nÙFœ¡Group
 ? 
nÙFœ¡GroupNeighbourhoodCÚ‹xtOff£t
[
chªTy³
] : 0è+ 
út
;

2802  
codšgP¬am‘”s
.
fœ¡SignifiÿnûM­CÚ‹xt
 + 
off£t
;

2803 
	}
}

2812 
__šlše
 
UIÁ
 
	gTComTrQuªt
::
	$xG‘CodedLev–
 ( 
DoubË
& 
rd64CodedCo¡
,

2813 
DoubË
& 
rd64CodedCo¡0
,

2814 
DoubË
& 
rd64CodedCo¡Sig
,

2815 
IÁ”medŸ‹_IÁ
 
lLev–DoubË
,

2816 
UIÁ
 
uiMaxAbsLev–
,

2817 
UShÜt
 
ui16CtxNumSig
,

2818 
UShÜt
 
ui16CtxNumOÃ
,

2819 
UShÜt
 
ui16CtxNumAbs
,

2820 
UShÜt
 
ui16AbsGoRiû
,

2821 
UIÁ
 
c1Idx
,

2822 
UIÁ
 
c2Idx
,

2823 
IÁ
 
iQB™s
,

2824 
DoubË
 
”rÜSÿË
,

2825 
BoÞ
 
bLa¡
,

2826 
BoÞ
 
u£Lim™edP»fixL’gth
,

2827 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge


2830 
DoubË
 
dCu¼Co¡Sig
 = 0;

2831 
UIÁ
 
uiBe¡AbsLev–
 = 0;

2833 ifÐ!
bLa¡
 && 
uiMaxAbsLev–
 < 3 )

2835 
rd64CodedCo¡Sig
 = 
	`xG‘R©eSigCÛf
Ð0, 
ui16CtxNumSig
 );

2836 
rd64CodedCo¡
 = 
rd64CodedCo¡0
 + 
rd64CodedCo¡Sig
;

2837 ifÐ
uiMaxAbsLev–
 == 0 )

2839  
uiBe¡AbsLev–
;

2844 
rd64CodedCo¡
 = 
MAX_DOUBLE
;

2847 ifÐ!
bLa¡
 )

2849 
dCu¼Co¡Sig
 = 
	`xG‘R©eSigCÛf
Ð1, 
ui16CtxNumSig
 );

2852 
UIÁ
 
uiMšAbsLev–
 = ( 
uiMaxAbsLev–
 > 1 ? uiMaxAbsLevel - 1 : 1 );

2853  
IÁ
 
uiAbsLev–
 = 
uiMaxAbsLev–
; uiAbsLev– >ð
uiMšAbsLev–
 ; uiAbsLevel-- )

2855 
DoubË
 
dE¼
 = 
	`DoubË
Ð
lLev–DoubË
 - ( 
	`IÁ”medŸ‹_IÁ
(
uiAbsLev–
è<< 
iQB™s
 ) );

2856 
DoubË
 
dCu¼Co¡
 = 
dE¼
 * dE¼ * 
”rÜSÿË
 + 
	`xG‘ICo¡
Ð
	`xG‘ICR©e
Ð
uiAbsLev–
, 
ui16CtxNumOÃ
, 
ui16CtxNumAbs
, 
ui16AbsGoRiû
, 
c1Idx
, 
c2Idx
, 
u£Lim™edP»fixL’gth
, 
maxLog2TrDyÇmicRªge
 ) );

2857 
dCu¼Co¡
 +ð
dCu¼Co¡Sig
;

2859 ifÐ
dCu¼Co¡
 < 
rd64CodedCo¡
 )

2861 
uiBe¡AbsLev–
 = 
uiAbsLev–
;

2862 
rd64CodedCo¡
 = 
dCu¼Co¡
;

2863 
rd64CodedCo¡Sig
 = 
dCu¼Co¡Sig
;

2867  
uiBe¡AbsLev–
;

2868 
	}
}

2881 
__šlše
 
IÁ
 
	gTComTrQuªt
::
	$xG‘ICR©e
 ( cÚ¡ 
UIÁ
 
uiAbsLev–
,

2882 cÚ¡ 
UShÜt
 
ui16CtxNumOÃ
,

2883 cÚ¡ 
UShÜt
 
ui16CtxNumAbs
,

2884 cÚ¡ 
UShÜt
 
ui16AbsGoRiû
,

2885 cÚ¡ 
UIÁ
 
c1Idx
,

2886 cÚ¡ 
UIÁ
 
c2Idx
,

2887 cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
,

2888 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge


2891 
IÁ
 
iR©e
 = 
	`IÁ
(
	`xG‘IEPR©e
());

2892 
UIÁ
 
ba£Lev–
 = (
c1Idx
 < 
C1FLAG_NUMBER
è? (2 + (
c2Idx
 < 
C2FLAG_NUMBER
)) : 1;

2894 iàÐ
uiAbsLev–
 >ð
ba£Lev–
 )

2896 
UIÁ
 
symbÞ
 = 
uiAbsLev–
 - 
ba£Lev–
;

2897 
UIÁ
 
Ëngth
;

2898 ià(
symbÞ
 < (
COEF_REMAIN_BIN_REDUCTION
 << 
ui16AbsGoRiû
))

2900 
Ëngth
 = 
symbÞ
>>
ui16AbsGoRiû
;

2901 
iR©e
 +ð(
Ëngth
+1+
ui16AbsGoRiû
)<< 15;

2903 ià(
u£Lim™edP»fixL’gth
)

2905 cÚ¡ 
UIÁ
 
maximumP»fixL’gth
 = (32 - (
COEF_REMAIN_BIN_REDUCTION
 + 
maxLog2TrDyÇmicRªge
));

2907 
UIÁ
 
´efixL’gth
 = 0;

2908 
UIÁ
 
suffix
 = (
symbÞ
 >> 
ui16AbsGoRiû
è- 
COEF_REMAIN_BIN_REDUCTION
;

2910 (
´efixL’gth
 < 
maximumP»fixL’gth
è&& (
suffix
 > ((2 <<…refixLength) - 2)))

2912 
´efixL’gth
++;

2915 cÚ¡ 
UIÁ
 
suffixL’gth
 = (
´efixL’gth
 =ð
maximumP»fixL’gth
è? (
maxLog2TrDyÇmicRªge
 - 
ui16AbsGoRiû
) : (prefixLength + 1 );

2917 
iR©e
 +ð(
COEF_REMAIN_BIN_REDUCTION
 + 
´efixL’gth
 + 
suffixL’gth
 + 
ui16AbsGoRiû
) << 15;

2921 
Ëngth
 = 
ui16AbsGoRiû
;

2922 
symbÞ
 = symbÞ - ( 
COEF_REMAIN_BIN_REDUCTION
 << 
ui16AbsGoRiû
);

2923 
symbÞ
 >ð(1<<
Ëngth
))

2925 
symbÞ
 -ð(1<<(
Ëngth
++));

2927 
iR©e
 +ð(
COEF_REMAIN_BIN_REDUCTION
+
Ëngth
+1-
ui16AbsGoRiû
+length)<< 15;

2930 ià(
c1Idx
 < 
C1FLAG_NUMBER
)

2932 
iR©e
 +ð
m_pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
ui16CtxNumOÃ
 ][ 1 ];

2934 ià(
c2Idx
 < 
C2FLAG_NUMBER
)

2936 
iR©e
 +ð
m_pcE¡B™sSbac
->
m_Ëv–AbsB™s
[ 
ui16CtxNumAbs
 ][ 1 ];

2940 ifÐ
uiAbsLev–
 == 1 )

2942 
iR©e
 +ð
m_pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
ui16CtxNumOÃ
 ][ 0 ];

2944 ifÐ
uiAbsLev–
 == 2 )

2946 
iR©e
 +ð
m_pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
ui16CtxNumOÃ
 ][ 1 ];

2947 
iR©e
 +ð
m_pcE¡B™sSbac
->
m_Ëv–AbsB™s
[ 
ui16CtxNumAbs
 ][ 0 ];

2951 
iR©e
 = 0;

2954  
iR©e
;

2955 
	}
}

2957 
__šlše
 
DoubË
 
	gTComTrQuªt
::
	$xG‘R©eSigCÛffGroup
 ( 
UShÜt
 
uiSignifiÿnûCÛffGroup
,

2958 
UShÜt
 
ui16CtxNumSig
 ) const

2960  
	`xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
signifiÿÁCÛffGroupB™s
[ 
ui16CtxNumSig
 ][ 
uiSignifiÿnûCÛffGroup
 ] );

2961 
	}
}

2972 
__šlše
 
DoubË
 
	gTComTrQuªt
::
	$xG‘R©eLa¡
 ( cÚ¡ 
UIÁ
 
uiPosX
,

2973 cÚ¡ 
UIÁ
 
uiPosY
,

2974 cÚ¡ 
CompÚ’tID
 
compÚ’t
 ) const

2976 
UIÁ
 
uiCtxX
 = 
g_uiGroupIdx
[
uiPosX
];

2977 
UIÁ
 
uiCtxY
 = 
g_uiGroupIdx
[
uiPosY
];

2979 
DoubË
 
uiCo¡
 = 
m_pcE¡B™sSbac
->
Ï¡XB™s
[
	`toChªÃlTy³
(
compÚ’t
)][ 
uiCtxX
 ] + m_pcE¡B™sSbac->
Ï¡YB™s
[toChªÃlTy³(compÚ’t)][ 
uiCtxY
 ];

2981 ifÐ
uiCtxX
 > 3 )

2983 
uiCo¡
 +ð
	`xG‘IEPR©e
(è* ((
uiCtxX
-2)>>1);

2985 ifÐ
uiCtxY
 > 3 )

2987 
uiCo¡
 +ð
	`xG‘IEPR©e
(è* ((
uiCtxY
-2)>>1);

2989  
	`xG‘ICo¡
Ð
uiCo¡
 );

2990 
	}
}

2992 
__šlše
 
DoubË
 
	gTComTrQuªt
::
	$xG‘R©eSigCÛf
 ( 
UShÜt
 
uiSignifiÿnû
,

2993 
UShÜt
 
ui16CtxNumSig
 ) const

2995  
	`xG‘ICo¡
Ð
m_pcE¡B™sSbac
->
signifiÿÁB™s
[ 
ui16CtxNumSig
 ][ 
uiSignifiÿnû
 ] );

2996 
	}
}

3002 
__šlše
 
DoubË
 
	gTComTrQuªt
::
	$xG‘ICo¡
 ( 
DoubË
 
dR©e
 ) const

3004  
m_dLambda
 * 
dR©e
;

3005 
	}
}

3010 
__šlše
 
DoubË
 
	gTComTrQuªt
::
	$xG‘IEPR©e
 ( ) const

3013 
	}
}

3023 
UIÁ
 
	gTComTrQuªt
::
	$g‘SigCÛffGroupCtxInc
 (cÚ¡ 
UIÁ
* 
uiSigCÛffGroupFÏg
,

3024 cÚ¡ 
UIÁ
 
uiCGPosX
,

3025 cÚ¡ 
UIÁ
 
uiCGPosY
,

3026 cÚ¡ 
UIÁ
 
widthInGroups
,

3027 cÚ¡ 
UIÁ
 
heightInGroups
)

3029 
UIÁ
 
sigRight
 = 0;

3030 
UIÁ
 
sigLow”
 = 0;

3032 ià(
uiCGPosX
 < (
widthInGroups
 - 1))

3034 
sigRight
 = ((
uiSigCÛffGroupFÏg
[ (
uiCGPosY
 * 
widthInGroups
è+ 
uiCGPosX
 + 1 ] != 0) ? 1 : 0);

3036 ià(
uiCGPosY
 < (
heightInGroups
 - 1))

3038 
sigLow”
 = ((
uiSigCÛffGroupFÏg
[ (
uiCGPosY
 + 1è* 
widthInGroups
 + 
uiCGPosX
 ] != 0) ? 1 : 0);

3041  ((
sigRight
 + 
sigLow”
) != 0) ? 1 : 0;

3042 
	}
}

3051 
Void
 
	gTComTrQuªt
::
	$£tSÿlšgLi¡
(
TComSÿlšgLi¡
 *
sÿlšgLi¡
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
)

3053 cÚ¡ 
IÁ
 
mšimumQp
 = 0;

3054 cÚ¡ 
IÁ
 
maximumQp
 = 
SCALING_LIST_REM_NUM
;

3056 
UIÁ
 
size
 = 0; siz< 
SCALING_LIST_SIZE_NUM
; size++)

3058 
UIÁ
 
li¡
 = 0;†i¡ < 
SCALING_LIST_NUM
;†ist++)

3060 
IÁ
 
qp
 = 
mšimumQp
; q°< 
maximumQp
; qp++)

3062 
	`xS‘SÿlšgLi¡Enc
(
sÿlšgLi¡
,
li¡
,
size
,
qp
);

3063 
	`xS‘SÿlšgLi¡Dec
(*
sÿlšgLi¡
,
li¡
,
size
,
qp
);

3064 
	`£tE¼SÿËCÛff
(
li¡
,
size
,
qp
,
maxLog2TrDyÇmicRªge
, 
b™D•ths
);

3068 
	}
}

3073 
Void
 
	gTComTrQuªt
::
	$£tSÿlšgLi¡Dec
(cÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
)

3075 cÚ¡ 
IÁ
 
mšimumQp
 = 0;

3076 cÚ¡ 
IÁ
 
maximumQp
 = 
SCALING_LIST_REM_NUM
;

3078 
UIÁ
 
size
 = 0; siz< 
SCALING_LIST_SIZE_NUM
; size++)

3080 
UIÁ
 
li¡
 = 0;†i¡ < 
SCALING_LIST_NUM
;†ist++)

3082 
IÁ
 
qp
 = 
mšimumQp
; q°< 
maximumQp
; qp++)

3084 
	`xS‘SÿlšgLi¡Dec
(
sÿlšgLi¡
,
li¡
,
size
,
qp
);

3088 
	}
}

3096 
Void
 
	gTComTrQuªt
::
	$£tE¼SÿËCÛff
(
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
)

3098 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
g_aucCÚv”tToB™
[ 
g_sÿlšgLi¡SizeX
[
size
] ] + 2;

3099 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = ((
li¡
 =ð0è|| (li¡ =ð
MAX_NUM_COMPONENT
)è? 
CHANNEL_TYPE_LUMA
 : 
CHANNEL_TYPE_CHROMA
;

3101 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
b™D•ths
.
»cÚ
[
chªÃlTy³
];

3102 cÚ¡ 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
uiLog2TrSize
, 
maxLog2TrDyÇmicRªge
[
chªÃlTy³
]);

3104 
UIÁ
 
i
,
uiMaxNumCÛff
 = 
g_sÿlšgLi¡Size
[
size
];

3105 
IÁ
 *
piQuªtcÛff
;

3106 
DoubË
 *
pdE¼SÿË
;

3107 
piQuªtcÛff
 = 
	`g‘QuªtCÛff
(
li¡
, 
qp
,
size
);

3108 
pdE¼SÿË
 = 
	`g‘E¼SÿËCÛff
(
li¡
, 
size
, 
qp
);

3110 
DoubË
 
dE¼SÿË
 = (DoubË)(1<<
SCALE_BITS
);

3111 
dE¼SÿË
 = dE¼SÿË*
	`pow
(2.0,(-2.0*
iT¿nsfÜmShiá
));

3113 
i
=0;i<
uiMaxNumCÛff
;i++)

3115 
pdE¼SÿË
[
i
] = 
dE¼SÿË
 / 
piQuªtcÛff
[i] /…iQuªtcÛff[i] / (1 << 
	`DISTORTION_PRECISION_ADJUSTMENT
(2 * (
b™D•ths
.
»cÚ
[
chªÃlTy³
] - 8)));

3118 
	`g‘E¼SÿËCÛffNoSÿlšgLi¡
(
li¡
, 
size
, 
qp
èð
dE¼SÿË
 / 
g_quªtSÿËs
[qp] / g_quªtSÿËs[qp] / (1 << 
	`DISTORTION_PRECISION_ADJUSTMENT
(2 * (
b™D•ths
.
»cÚ
[
chªÃlTy³
] - 8)));

3119 
	}
}

3128 
Void
 
	gTComTrQuªt
::
	$xS‘SÿlšgLi¡Enc
(
TComSÿlšgLi¡
 *
sÿlšgLi¡
, 
UIÁ
 
li¡Id
, UIÁ 
sizeId
, 
IÁ
 
qp
)

3130 
UIÁ
 
width
 = 
g_sÿlšgLi¡SizeX
[
sizeId
];

3131 
UIÁ
 
height
 = 
g_sÿlšgLi¡SizeX
[
sizeId
];

3132 
UIÁ
 
¿tio
 = 
g_sÿlšgLi¡SizeX
[
sizeId
]/
	`mš
(
MAX_MATRIX_SIZE_NUM
,(
IÁ
)g_scalingListSizeX[sizeId]);

3133 
IÁ
 *
quªtcÛff
;

3134 
IÁ
 *
cÛff
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡Add»ss
(
sizeId
,
li¡Id
);

3135 
quªtcÛff
 = 
	`g‘QuªtCÛff
(
li¡Id
, 
qp
, 
sizeId
);

3137 
IÁ
 
quªtSÿËs
 = 
g_quªtSÿËs
[
qp
];

3139 
	`´oûssSÿlšgLi¡Enc
(
cÛff
,

3140 
quªtcÛff
,

3141 (
quªtSÿËs
 << 
LOG2_SCALING_LIST_NEUTRAL_VALUE
),

3142 
height
, 
width
, 
¿tio
,

3143 
	`mš
(
MAX_MATRIX_SIZE_NUM
, (
IÁ
)
g_sÿlšgLi¡SizeX
[
sizeId
]),

3144 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
));

3145 
	}
}

3154 
Void
 
	gTComTrQuªt
::
	$xS‘SÿlšgLi¡Dec
(cÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
, 
UIÁ
 
li¡Id
, UIÁ 
sizeId
, 
IÁ
 
qp
)

3156 
UIÁ
 
width
 = 
g_sÿlšgLi¡SizeX
[
sizeId
];

3157 
UIÁ
 
height
 = 
g_sÿlšgLi¡SizeX
[
sizeId
];

3158 
UIÁ
 
¿tio
 = 
g_sÿlšgLi¡SizeX
[
sizeId
]/
	`mš
(
MAX_MATRIX_SIZE_NUM
,(
IÁ
)g_scalingListSizeX[sizeId]);

3159 
IÁ
 *
dequªtcÛff
;

3160 cÚ¡ 
IÁ
 *
cÛff
 = 
sÿlšgLi¡
.
	`g‘SÿlšgLi¡Add»ss
(
sizeId
,
li¡Id
);

3162 
dequªtcÛff
 = 
	`g‘DequªtCÛff
(
li¡Id
, 
qp
, 
sizeId
);

3164 
IÁ
 
švQuªtSÿË
 = 
g_švQuªtSÿËs
[
qp
];

3166 
	`´oûssSÿlšgLi¡Dec
(
cÛff
,

3167 
dequªtcÛff
,

3168 
švQuªtSÿË
,

3169 
height
, 
width
, 
¿tio
,

3170 
	`mš
(
MAX_MATRIX_SIZE_NUM
, (
IÁ
)
g_sÿlšgLi¡SizeX
[
sizeId
]),

3171 
sÿlšgLi¡
.
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
));

3172 
	}
}

3176 
Void
 
	gTComTrQuªt
::
	$£tFÏtSÿlšgLi¡
(cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
)

3178 cÚ¡ 
IÁ
 
mšimumQp
 = 0;

3179 cÚ¡ 
IÁ
 
maximumQp
 = 
SCALING_LIST_REM_NUM
;

3181 
UIÁ
 
size
 = 0; siz< 
SCALING_LIST_SIZE_NUM
; size++)

3183 
UIÁ
 
li¡
 = 0;†i¡ < 
SCALING_LIST_NUM
;†ist++)

3185 
IÁ
 
qp
 = 
mšimumQp
; q°< 
maximumQp
; qp++)

3187 
	`x£tFÏtSÿlšgLi¡
(
li¡
,
size
,
qp
);

3188 
	`£tE¼SÿËCÛff
(
li¡
,
size
,
qp
,
maxLog2TrDyÇmicRªge
, 
b™D•ths
);

3192 
	}
}

3200 
Void
 
	gTComTrQuªt
::
	$x£tFÏtSÿlšgLi¡
(
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
)

3202 
UIÁ
 
i
,
num
 = 
g_sÿlšgLi¡Size
[
size
];

3203 
IÁ
 *
quªtcÛff
;

3204 
IÁ
 *
dequªtcÛff
;

3206 
IÁ
 
quªtSÿËs
 = 
g_quªtSÿËs
 [
qp
];

3207 
IÁ
 
švQuªtSÿËs
 = 
g_švQuªtSÿËs
[
qp
] << 4;

3209 
quªtcÛff
 = 
	`g‘QuªtCÛff
(
li¡
, 
qp
, 
size
);

3210 
dequªtcÛff
 = 
	`g‘DequªtCÛff
(
li¡
, 
qp
, 
size
);

3212 
i
=0;i<
num
;i++)

3214 *
quªtcÛff
++ = 
quªtSÿËs
;

3215 *
dequªtcÛff
++ = 
švQuªtSÿËs
;

3217 
	}
}

3229 
Void
 
	gTComTrQuªt
::
	$´oûssSÿlšgLi¡Enc
Ð
IÁ
 *
cÛff
, IÁ *
quªtcÛff
, IÁ 
quªtSÿËs
, 
UIÁ
 
height
, UIÁ 
width
, UIÁ 
¿tio
, IÁ 
sizuNum
, UIÁ 
dc
)

3231 
UIÁ
 
j
=0;j<
height
;j++)

3233 
UIÁ
 
i
=0;i<
width
;i++)

3235 
quªtcÛff
[
j
*
width
 + 
i
] = 
quªtSÿËs
 / 
cÛff
[
sizuNum
 * (j / 
¿tio
) + i /„atio];

3239 if(
¿tio
 > 1)

3241 
quªtcÛff
[0] = 
quªtSÿËs
 / 
dc
;

3243 
	}
}

3255 
Void
 
	gTComTrQuªt
::
	$´oûssSÿlšgLi¡Dec
ÐcÚ¡ 
IÁ
 *
cÛff
, IÁ *
dequªtcÛff
, IÁ 
švQuªtSÿËs
, 
UIÁ
 
height
, UIÁ 
width
, UIÁ 
¿tio
, IÁ 
sizuNum
, UIÁ 
dc
)

3257 
UIÁ
 
j
=0;j<
height
;j++)

3259 
UIÁ
 
i
=0;i<
width
;i++)

3261 
dequªtcÛff
[
j
*
width
 + 
i
] = 
švQuªtSÿËs
 * 
cÛff
[
sizuNum
 * (j / 
¿tio
) + i /„atio];

3265 if(
¿tio
 > 1)

3267 
dequªtcÛff
[0] = 
švQuªtSÿËs
 * 
dc
;

3269 
	}
}

3273 
Void
 
	gTComTrQuªt
::
	$š™SÿlšgLi¡
()

3275 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

3277 
UIÁ
 
qp
 = 0; q°< 
SCALING_LIST_REM_NUM
; qp++)

3279 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†istId++)

3281 
m_quªtCÛf
 [
sizeId
][
li¡Id
][
qp
] = 
Ãw
 
IÁ
 [
g_sÿlšgLi¡Size
[sizeId]];

3282 
m_dequªtCÛf
 [
sizeId
][
li¡Id
][
qp
] = 
Ãw
 
IÁ
 [
g_sÿlšgLi¡Size
[sizeId]];

3283 
m_”rSÿË
 [
sizeId
][
li¡Id
][
qp
] = 
Ãw
 
DoubË
 [
g_sÿlšgLi¡Size
[sizeId]];

3287 
	}
}

3291 
Void
 
	gTComTrQuªt
::
	$de¡roySÿlšgLi¡
()

3293 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

3295 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†istId++)

3297 
UIÁ
 
qp
 = 0; q°< 
SCALING_LIST_REM_NUM
; qp++)

3299 if(
m_quªtCÛf
[
sizeId
][
li¡Id
][
qp
])

3301 
d–‘e
 [] 
m_quªtCÛf
[
sizeId
][
li¡Id
][
qp
];

3303 if(
m_dequªtCÛf
[
sizeId
][
li¡Id
][
qp
])

3305 
d–‘e
 [] 
m_dequªtCÛf
[
sizeId
][
li¡Id
][
qp
];

3307 if(
m_”rSÿË
[
sizeId
][
li¡Id
][
qp
])

3309 
d–‘e
 [] 
m_”rSÿË
[
sizeId
][
li¡Id
][
qp
];

3314 
	}
}

3316 
Void
 
	gTComTrQuªt
::
	$ŒªsfÜmSkQuªtOÃSam¶e
(
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
TCÛff
 
»siDiff
, TCÛff* 
pcCÛff
, cÚ¡ 
UIÁ
 
uiPos
, cÚ¡ 
QpP¬am
 &
cQP
, cÚ¡ 
BoÞ
 
bU£H®fRoundšgPošt
)

3318 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

3319 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

3320 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

3321 cÚ¡ 
UIÁ
 
uiWidth
 = 
»ù
.
width
;

3322 cÚ¡ 
UIÁ
 
uiHeight
 = 
»ù
.
height
;

3323 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compID
));

3324 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

3325 cÚ¡ 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
), 
maxLog2TrDyÇmicRªge
);

3326 cÚ¡ 
IÁ
 
sÿlšgLi¡Ty³
 = 
	`g‘SÿlšgLi¡Ty³
(
pcCU
->
	`g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

3327 cÚ¡ 
BoÞ
 
’abËSÿlšgLi¡s
 = 
	`g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, 
Œue
);

3328 cÚ¡ 
IÁ
 
deçuÉQuªti§tiÚCÛffic›Á
 = 
g_quªtSÿËs
[
cQP
.
»m
];

3330 
	`as£¹
Ð
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
 );

3331 cÚ¡ 
IÁ
 *cÚ¡ 
piQuªtCÛff
 = 
	`g‘QuªtCÛff
Ð
sÿlšgLi¡Ty³
, 
cQP
.
»m
, (
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
)-2) );

3340 cÚ¡ 
IÁ
 
iQB™s
 = 
QUANT_SHIFT
 + 
cQP
.
³r
 + 
iT¿nsfÜmShiá
;

3343 cÚ¡ 
IÁ
 
iAdd
 = ( 
bU£H®fRoundšgPošt
 ? 256 : (
pcCU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
 ? 171 : 85èè<< (
iQB™s
 - 9);

3345 
TCÛff
 
ŒªsfÜmedCÛffic›Á
;

3348 ià(
iT¿nsfÜmShiá
 >= 0)

3350 
ŒªsfÜmedCÛffic›Á
 = 
»siDiff
 << 
iT¿nsfÜmShiá
;

3354 cÚ¡ 
IÁ
 
iTrShiáNeg
 = -
iT¿nsfÜmShiá
;

3355 cÚ¡ 
IÁ
 
off£t
 = 1 << (
iTrShiáNeg
 - 1);

3356 
ŒªsfÜmedCÛffic›Á
 = ( 
»siDiff
 + 
off£t
 ) >> 
iTrShiáNeg
;

3360 cÚ¡ 
TCÛff
 
iSign
 = (
ŒªsfÜmedCÛffic›Á
 < 0 ? -1: 1);

3362 cÚ¡ 
IÁ
 
quªti§tiÚCÛffic›Á
 = 
’abËSÿlšgLi¡s
 ? 
piQuªtCÛff
[
uiPos
] : 
deçuÉQuªti§tiÚCÛffic›Á
;

3364 cÚ¡ 
IÁ64
 
tmpLev–
 = (IÁ64)
	`abs
(
ŒªsfÜmedCÛffic›Á
è* 
quªti§tiÚCÛffic›Á
;

3366 cÚ¡ 
TCÛff
 
quªti£dCÛffic›Á
 = (
	`TCÛff
((
tmpLev–
 + 
iAdd
 ) >> 
iQB™s
)è* 
iSign
;

3368 cÚ¡ 
TCÛff
 
’ŒÝyCodšgMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

3369 cÚ¡ 
TCÛff
 
’ŒÝyCodšgMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

3370 
pcCÛff
[ 
uiPos
 ] = 
Cl3
<
TCÛff
>Ð
’ŒÝyCodšgMšimum
, 
’ŒÝyCodšgMaximum
, 
quªti£dCÛffic›Á
 );

3371 
	}
}

3374 
Void
 
	gTComTrQuªt
::
	$švTrSkDeQuªtOÃSam¶e
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
, 
TCÛff
 
šSam¶e
, 
P–
 &
»cÚSam¶e
, cÚ¡ 
QpP¬am
 &
cQP
, 
UIÁ
 
uiPos
 )

3376 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

3377 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

3378 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

3379 cÚ¡ 
UIÁ
 
uiWidth
 = 
»ù
.
width
;

3380 cÚ¡ 
UIÁ
 
uiHeight
 = 
»ù
.
height
;

3381 cÚ¡ 
IÁ
 
QP_³r
 = 
cQP
.
³r
;

3382 cÚ¡ 
IÁ
 
QP_»m
 = 
cQP
.
»m
;

3383 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
	`toChªÃlTy³
(
compID
));

3384 #ià
O0043_BEST_EFFORT_DECODING


3385 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SŒ—mB™D•th
(
	`toChªÃlTy³
(
compID
));

3387 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

3389 cÚ¡ 
IÁ
 
iT¿nsfÜmShiá
 = 
	`g‘T¿nsfÜmShiá
(
chªÃlB™D•th
, 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
), 
maxLog2TrDyÇmicRªge
);

3390 cÚ¡ 
IÁ
 
sÿlšgLi¡Ty³
 = 
	`g‘SÿlšgLi¡Ty³
(
pcCU
->
	`g‘P»diùiÚMode
(
uiAbsP¬tIdx
), 
compID
);

3391 cÚ¡ 
BoÞ
 
’abËSÿlšgLi¡s
 = 
	`g‘U£SÿlšgLi¡
(
uiWidth
, 
uiHeight
, 
Œue
);

3392 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Equiv®’tLog2TrSize
(
compID
);

3394 
	`as£¹
Ð
sÿlšgLi¡Ty³
 < 
SCALING_LIST_NUM
 );

3396 cÚ¡ 
IÁ
 
rightShiá
 = (
IQUANT_SHIFT
 - (
iT¿nsfÜmShiá
 + 
QP_³r
)è+ (
’abËSÿlšgLi¡s
 ? 
LOG2_SCALING_LIST_NEUTRAL_VALUE
 : 0);

3398 cÚ¡ 
TCÛff
 
ŒªsfÜmMšimum
 = -(1 << 
maxLog2TrDyÇmicRªge
);

3399 cÚ¡ 
TCÛff
 
ŒªsfÜmMaximum
 = (1 << 
maxLog2TrDyÇmicRªge
) - 1;

3403 
TCÛff
 
dequªti£dSam¶e
;

3405 if(
’abËSÿlšgLi¡s
)

3407 cÚ¡ 
UIÁ
 
dequªtCÛfB™s
 = 1 + 
IQUANT_SHIFT
 + 
SCALING_LIST_BITS
;

3408 cÚ¡ 
UIÁ
 
rg‘IÅutB™D•th
 = 
¡d
::
mš
<UIÁ>((
maxLog2TrDyÇmicRªge
 + 1), ((((
IÁ”medŸ‹_IÁ
è* 8è+ 
rightShiá
è- 
dequªtCÛfB™s
));

3410 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMšimum
 = -(1 << (
rg‘IÅutB™D•th
 - 1));

3411 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMaximum
 = (1 << (
rg‘IÅutB™D•th
 - 1)) - 1;

3413 
IÁ
 *
piDequªtCÛf
 = 
	`g‘DequªtCÛff
(
sÿlšgLi¡Ty³
,
QP_»m
,
uiLog2TrSize
-2);

3415 if(
rightShiá
 > 0)

3417 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iAdd
 = 1 << (
rightShiá
 - 1);

3418 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
šSam¶e
));

3419 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = ((
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
piDequªtCÛf
[
uiPos
]è+ 
iAdd
 ) >> 
rightShiá
;

3421 
dequªti£dSam¶e
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

3425 cÚ¡ 
IÁ
 
ËáShiá
 = -
rightShiá
;

3426 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
šSam¶e
));

3427 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
piDequªtCÛf
[
uiPos
]è<< 
ËáShiá
;

3429 
dequªti£dSam¶e
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

3434 cÚ¡ 
IÁ
 
sÿË
 = 
g_švQuªtSÿËs
[
QP_»m
];

3435 cÚ¡ 
IÁ
 
sÿËB™s
 = (
IQUANT_SHIFT
 + 1) ;

3437 cÚ¡ 
UIÁ
 
rg‘IÅutB™D•th
 = 
¡d
::
mš
<UIÁ>((
maxLog2TrDyÇmicRªge
 + 1), ((((
IÁ”medŸ‹_IÁ
è* 8è+ 
rightShiá
è- 
sÿËB™s
));

3438 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMšimum
 = -(1 << (
rg‘IÅutB™D•th
 - 1));

3439 cÚ¡ 
IÁ”medŸ‹_IÁ
 
šputMaximum
 = (1 << (
rg‘IÅutB™D•th
 - 1)) - 1;

3441 ià(
rightShiá
 > 0)

3443 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iAdd
 = 1 << (
rightShiá
 - 1);

3444 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
šSam¶e
));

3445 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
sÿË
 + 
iAdd
è>> 
rightShiá
;

3447 
dequªti£dSam¶e
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

3451 cÚ¡ 
IÁ
 
ËáShiá
 = -
rightShiá
;

3452 cÚ¡ 
TCÛff
 
þQCÛf
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
šputMšimum
, 
šputMaximum
, 
šSam¶e
));

3453 cÚ¡ 
IÁ”medŸ‹_IÁ
 
iCÛffQ
 = (
	`IÁ”medŸ‹_IÁ
(
þQCÛf
è* 
sÿË
è<< 
ËáShiá
;

3455 
dequªti£dSam¶e
 = 
	`TCÛff
(
Cl3
<
IÁ”medŸ‹_IÁ
>(
ŒªsfÜmMšimum
,
ŒªsfÜmMaximum
,
iCÛffQ
));

3461 ià(
iT¿nsfÜmShiá
 >= 0)

3463 cÚ¡ 
TCÛff
 
off£t
 = 
iT¿nsfÜmShiá
==0 ? 0 : (1 << (iTransformShift - 1));

3464 
»cÚSam¶e
 = 
	`P–
(Ð
dequªti£dSam¶e
 + 
off£t
 ) >> 
iT¿nsfÜmShiá
);

3468 cÚ¡ 
IÁ
 
iTrShiáNeg
 = -
iT¿nsfÜmShiá
;

3469 
»cÚSam¶e
 = 
	`P–
(
dequªti£dSam¶e
 << 
iTrShiáNeg
);

3471 
	}
}

3474 
Void
 
	gTComTrQuªt
::
	$üossCompÚ’tP»diùiÚ
Ð
TComTU
 & 
rTu
,

3475 cÚ¡ 
CompÚ’tID
 
compID
,

3476 cÚ¡ 
P–
 * 
piResiL
,

3477 cÚ¡ 
P–
 * 
piResiC
,

3478 
P–
 * 
piResiT
,

3479 cÚ¡ 
IÁ
 
width
,

3480 cÚ¡ 
IÁ
 
height
,

3481 cÚ¡ 
IÁ
 
¡rideL
,

3482 cÚ¡ 
IÁ
 
¡rideC
,

3483 cÚ¡ 
IÁ
 
¡rideT
,

3484 cÚ¡ 
BoÞ
 
»v”£
 )

3486 cÚ¡ 
P–
 *
pResiL
 = 
piResiL
;

3487 cÚ¡ 
P–
 *
pResiC
 = 
piResiC
;

3488 
P–
 *
pResiT
 = 
piResiT
;

3490 
TComD©aCU
 *
pCU
 = 
rTu
.
	`g‘CU
();

3491 cÚ¡ 
IÁ
 
®pha
 = 
pCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
Ð
rTu
.
	`G‘AbsP¬tIdxTU
Ð
compID
 ), compID );

3492 cÚ¡ 
IÁ
 
diffB™D•th
 = 
pCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Difã»ÁŸlLumaChromaB™D•th
();

3494  
IÁ
 
y
 = 0; y < 
height
; y++ )

3496 ià(
»v”£
)

3503 #ià
RExt__HIGH_BIT_DEPTH_SUPPORT


3504  
IÁ
 
x
 = 0; x < 
width
; x++ )

3506 
pResiT
[
x
] = 
pResiC
[x] + (Ð
®pha
 * 
	`rightShiá
Ð
pResiL
[x], 
diffB™D•th
) ) >> 3);

3509 cÚ¡ 
IÁ
 
mšP–
=
¡d
::
num”ic_lim™s
<
P–
>::
	`mš
();

3510 cÚ¡ 
IÁ
 
maxP–
=
¡d
::
num”ic_lim™s
<
P–
>::
	`max
();

3511  
IÁ
 
x
 = 0; x < 
width
; x++ )

3513 
pResiT
[
x
] = 
Cl3
<
IÁ
>(
mšP–
, 
maxP–
, 
pResiC
[x] + (Ð
®pha
 * 
rightShiá
<IÁ>(
	`IÁ
(
pResiL
[x]), 
diffB™D•th
) ) >> 3));

3520  
IÁ
 
x
 = 0; x < 
width
; x++ )

3522 
pResiT
[
x
] = 
pResiC
[x] - (Ð
®pha
 * 
rightShiá
<
IÁ
>(
	`IÁ
(
pResiL
[x]), 
diffB™D•th
) ) >> 3);

3526 
pResiL
 +ð
¡rideL
;

3527 
pResiC
 +ð
¡rideC
;

3528 
pResiT
 +ð
¡rideT
;

3530 
	}
}

	@source/Lib/TLibCommon/TComTrQuant.h

38 #iâdeà
__TCOMTRQUANT__


39 
	#__TCOMTRQUANT__


	)

41 
	~"CommÚDef.h
"

42 
	~"TComYuv.h
"

43 
	~"TComD©aCU.h
"

44 
	~"TComChromaFÜm©.h
"

45 
	~"CÚ‹xtTabËs.h
"

54 
	#QP_BITS
 15

	)

62 
IÁ
 
	msignifiÿÁCÛffGroupB™s
[
NUM_SIG_CG_FLAG_CTX
][2 ];

63 
IÁ
 
	msignifiÿÁB™s
[
NUM_SIG_FLAG_CTX
][2 ];

64 
IÁ
 
	mÏ¡XB™s
[
MAX_NUM_CHANNEL_TYPE
][
LAST_SIGNIFICANT_GROUPS
];

65 
IÁ
 
	mÏ¡YB™s
[
MAX_NUM_CHANNEL_TYPE
][
LAST_SIGNIFICANT_GROUPS
];

66 
IÁ
 
	mm_g»©”OÃB™s
[
NUM_ONE_FLAG_CTX
][2 ];

67 
IÁ
 
	mm_Ëv–AbsB™s
[
NUM_ABS_FLAG_CTX
][2 ];

69 
IÁ
 
	mblockCbpB™s
[
NUM_QT_CBF_CTX_SETS
 * 
NUM_QT_CBF_CTX_PER_SET
][2 ];

70 
IÁ
 
	mblockRoÙCbpB™s
[4][2 ];

72 
IÁ
 
	mgÞombRiûAd­tiÚSti¡ics
[
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
];

73 } 
	te¡B™sSbacSŒuù
;

80 
	sQpP¬am


82 
IÁ
 
	mQp
;

83 
IÁ
 
	m³r
;

84 
IÁ
 
	m»m
;

86 
QpP¬am
(cÚ¡ 
IÁ
 
qpy
,

87 cÚ¡ 
ChªÃlTy³
 
chTy³
,

88 cÚ¡ 
IÁ
 
qpBdOff£t
,

89 cÚ¡ 
IÁ
 
chromaQPOff£t
,

90 cÚ¡ 
ChromaFÜm©
 
chFmt
 );

92 
QpP¬am
(cÚ¡ 
TComD©aCU
 &
cu
, cÚ¡ 
CompÚ’tID
 
compID
);

98 þas 
	cTComTrQuªt


100 
	mpublic
:

101 
TComTrQuªt
();

102 ~
TComTrQuªt
();

105 
Void
 
š™
 ( 
UIÁ
 
uiMaxTrSize
,

106 
BoÞ
 
u£RDOQ
 = 
çl£
,

107 
BoÞ
 
u£RDOQTS
 = 
çl£
,

108 
BoÞ
 
u£S–eùiveRDOQ
 = 
çl£
,

109 
BoÞ
 
bEnc
 = 
çl£
,

110 
BoÞ
 
u£T¿nsfÜmSkFa¡
 = 
çl£


111 #ià
ADAPTIVE_QP_SELECTION


112 , 
BoÞ
 
bU£Ad­tQpS–eù
 = 
çl£


117 
Void
 
ŒªsfÜmNxN
Ð
TComTU
 & 
rTu
,

118 cÚ¡ 
CompÚ’tID
 
compID
,

119 
P–
 * 
pcResidu®
,

120 cÚ¡ 
UIÁ
 
uiSŒide
,

121 
TCÛff
 * 
½cCÛff
,

122 #ià
ADAPTIVE_QP_SELECTION


123 
TCÛff
 * 
½cA¾CÛff
,

125 
TCÛff
 & 
uiAbsSum
,

126 cÚ¡ 
QpP¬am
 & 
cQP


130 
Void
 
švT¿nsfÜmNxN
Ð
TComTU
 & 
rTu
,

131 cÚ¡ 
CompÚ’tID
 
compID
,

132 
P–
 *
pcResidu®
,

133 cÚ¡ 
UIÁ
 
uiSŒide
,

134 
TCÛff
 * 
pcCÛff
,

135 cÚ¡ 
QpP¬am
 & 
cQP


136 
DEBUG_STRING_FN_DECLAREP
(
psDebug
));

138 
Void
 
švRecurT¿nsfÜmNxN
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComYuv
 *
pResidu®
, 
TComTU
 &
rTu
 );

140 
Void
 
rdpcmNxN
 ( 
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
, cÚ¡ 
QpP¬am
& 
cQP
, 
TCÛff
* 
pcCÛff
, TCÛfà&
uiAbsSum
, 
RDPCMMode
& 
rdpcmMode
 );

141 
Void
 
švRdpcmNxN
Ð
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
 );

143 
Void
 
­¶yFÜw¬dRDPCM
Ð
TComTU
& 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, 
P–
* 
pcResidu®
, cÚ¡ 
UIÁ
 
uiSŒide
, cÚ¡ 
QpP¬am
& 
cQP
, 
TCÛff
* 
pcCÛff
, TCÛfà&
uiAbsSum
, cÚ¡ 
RDPCMMode
 
mode
 );

147 #ià
RDOQ_CHROMA_LAMBDA


148 
Void
 
	$£tLambdas
(cÚ¡ 
DoubË
 
Ïmbdas
[
MAX_NUM_COMPONENT
]è{ 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< MAX_NUM_COMPONENT; compÚ’t++è
m_Ïmbdas
[component] =†ambdas[component]; }

149 
Void
 
	$£ËùLambda
(cÚ¡ 
CompÚ’tID
 
compIdx
è{ 
m_dLambda
 = 
m_Ïmbdas
[compIdx]; 
	}
}

151 
Void
 
	$£tLambda
(
DoubË
 
dLambda
è{ 
m_dLambda
 = dLambda;
	}
}

153 
Void
 
	$£tRDOQOff£t
Ð
UIÁ
 
uiRDOQOff£t
 ) { 
m_uiRDOQOff£t
 = uiRDOQOff£t; 
	}
}

155 
e¡B™sSbacSŒuù
* 
	gm_pcE¡B™sSbac
;

157 
IÁ
 
ÿlcP©‹ºSigCtx
ÐcÚ¡ 
UIÁ
* 
sigCÛffGroupFÏg
, UIÁ 
uiCGPosX
, UIÁ 
uiCGPosY
, UIÁ 
widthInGroups
, UIÁ 
heightInGroups
 );

159 
IÁ
 
g‘SigCtxInc
 ( IÁ 
·‰”nSigCtx
,

160 cÚ¡ 
TUEÁrÝyCodšgP¬am‘”s
 &
codšgP¬am‘”s
,

161 cÚ¡ 
IÁ
 
sÿnPos™iÚ
,

162 cÚ¡ 
IÁ
 
log2BlockWidth
,

163 cÚ¡ 
IÁ
 
log2BlockHeight
,

164 cÚ¡ 
ChªÃlTy³
 
chªTy³


167 
UIÁ
 
g‘SigCÛffGroupCtxInc
 (cÚ¡ UIÁ* 
uiSigCÛffGroupFÏg
,

168 cÚ¡ 
UIÁ
 
uiCGPosX
,

169 cÚ¡ 
UIÁ
 
uiCGPosY
,

170 cÚ¡ 
UIÁ
 
widthInGroups
,

171 cÚ¡ 
UIÁ
 
heightInGroups
);

173 
Void
 
š™SÿlšgLi¡
 ();

174 
Void
 
de¡roySÿlšgLi¡
 ();

175 
Void
 
£tE¼SÿËCÛff
 ( 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
 );

176 
DoubË
* 
	$g‘E¼SÿËCÛff
 ( 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
 ) {  
m_”rSÿË
 [size][li¡][qp]; 
	}
};

177 
	gDoubË
& 
	$g‘E¼SÿËCÛffNoSÿlšgLi¡
 ( 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
 ) {  
m_”rSÿËNoSÿlšgLi¡
[size][li¡][qp]; 
	}
};

178 
IÁ
* 
	$g‘QuªtCÛff
 ( 
UIÁ
 
li¡
, 
IÁ
 
qp
, UIÁ 
size
 ) {  
m_quªtCÛf
 [size][li¡][qp]; 
	}
};

179 
IÁ
* 
	$g‘DequªtCÛff
 ( 
UIÁ
 
li¡
, 
IÁ
 
qp
, UIÁ 
size
 ) {  
m_dequªtCÛf
 [size][li¡][qp]; 
	}
};

180 
Void
 
	$£tU£SÿlšgLi¡
 ( 
BoÞ
 
bU£SÿlšgLi¡
){ 
m_sÿlšgLi¡EÇbËdFÏg
 = bU£SÿlšgLi¡; 
	}
};

181 
BoÞ
 
	$g‘U£SÿlšgLi¡
 (cÚ¡ 
UIÁ
 
width
, cÚ¡ UIÁ 
height
, cÚ¡ 
BoÞ
 
isT¿nsfÜmSk
){  
m_sÿlšgLi¡EÇbËdFÏg
 && (!isT¿nsfÜmSk || ((width =ð4è&& (heighˆ=ð4))); 
	}
};

182 
Void
 
£tFÏtSÿlšgLi¡
 (cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
);

183 
Void
 
x£tFÏtSÿlšgLi¡
 ( 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
);

184 
Void
 
xS‘SÿlšgLi¡Enc
 ( 
TComSÿlšgLi¡
 *
sÿlšgLi¡
, 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
);

185 
Void
 
xS‘SÿlšgLi¡Dec
 ( cÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
, 
UIÁ
 
li¡
, UIÁ 
size
, 
IÁ
 
qp
);

186 
Void
 
£tSÿlšgLi¡
 ( 
TComSÿlšgLi¡
 *
sÿlšgLi¡
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
B™D•ths
 &
b™D•ths
);

187 
Void
 
£tSÿlšgLi¡Dec
 ( cÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
);

188 
Void
 
´oûssSÿlšgLi¡Enc
Ð
IÁ
 *
cÛff
, IÁ *
quªtcÛff
, IÁ 
quªtSÿËs
, 
UIÁ
 
height
, UIÁ 
width
, UIÁ 
¿tio
, IÁ 
sizuNum
, UIÁ 
dc
);

189 
Void
 
´oûssSÿlšgLi¡Dec
ÐcÚ¡ 
IÁ
 *
cÛff
, IÁ *
dequªtcÛff
, IÁ 
švQuªtSÿËs
, 
UIÁ
 
height
, UIÁ 
width
, UIÁ 
¿tio
, IÁ 
sizuNum
, UIÁ 
dc
);

190 #ià
ADAPTIVE_QP_SELECTION


191 
Void
 
š™SliûQpD–
() ;

192 
Void
 
¡ÜeSliûQpNext
(
TComSliû
* 
pcSliû
);

193 
Void
 
þ—rSliûARLCÁ
();

194 
IÁ
 
	$g‘QpD–
(
IÁ
 
qp
è{  
m_qpD–
[qp]; 
	}
}

195 
IÁ
* 
	$g‘SliûNSam¶es
(){  
m_¦iûN§m¶es
 ;
	}
}

196 
DoubË
* 
	$g‘SliûSumC
(è{  
m_¦iûSumC
; 
	}
}

198 
Void
 
ŒªsfÜmSkQuªtOÃSam¶e
(
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
TCÛff
 
»siDiff
, TCÛff* 
pcCÛff
, cÚ¡ 
UIÁ
 
uiPos
, cÚ¡ 
QpP¬am
 &
cQP
, cÚ¡ 
BoÞ
 
bU£H®fRoundšgPošt
);

199 
Void
 
švTrSkDeQuªtOÃSam¶e
(
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
, 
TCÛff
 
pcCÛff
, 
P–
 &
»cÚSam¶e
, cÚ¡ 
QpP¬am
 &
cQP
, 
UIÁ
 
uiPos
 );

201 
	g´Ùeùed
:

202 #ià
ADAPTIVE_QP_SELECTION


203 
IÁ
 
m_qpD–
[
MAX_QP
+1];

204 
IÁ
 
	gm_¦iûN§m¶es
[
LEVEL_RANGE
+1];

205 
DoubË
 
	gm_¦iûSumC
[
LEVEL_RANGE
+1] ;

207 
TCÛff
* 
	gm_¶TempCÛff
;

210 #ià
RDOQ_CHROMA_LAMBDA


211 
DoubË
 
	gm_Ïmbdas
[
MAX_NUM_COMPONENT
];

213 
DoubË
 
	gm_dLambda
;

214 
UIÁ
 
	gm_uiRDOQOff£t
;

215 
UIÁ
 
	gm_uiMaxTrSize
;

216 
BoÞ
 
	gm_bEnc
;

217 
BoÞ
 
	gm_u£RDOQ
;

218 
BoÞ
 
	gm_u£RDOQTS
;

219 
BoÞ
 
	gm_u£S–eùiveRDOQ
;

220 #ià
ADAPTIVE_QP_SELECTION


221 
BoÞ
 
	gm_bU£Ad­tQpS–eù
;

223 
BoÞ
 
	gm_u£T¿nsfÜmSkFa¡
;

225 
BoÞ
 
	gm_sÿlšgLi¡EÇbËdFÏg
;

227 
IÁ
 *
	gm_quªtCÛf
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
][
SCALING_LIST_REM_NUM
];

228 
IÁ
 *
	gm_dequªtCÛf
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
][
SCALING_LIST_REM_NUM
];

229 
DoubË
 *
	gm_”rSÿË
 [
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
][
SCALING_LIST_REM_NUM
];

230 
DoubË
 
	gm_”rSÿËNoSÿlšgLi¡
[
SCALING_LIST_SIZE_NUM
][
SCALING_LIST_NUM
][
SCALING_LIST_REM_NUM
];

232 
	g´iv©e
:

234 
Void
 
xT
 ( cÚ¡ 
IÁ
 
chªÃlB™D•th
, 
BoÞ
 
u£DST
, 
P–
* 
piBlkResi
, 
UIÁ
 
uiSŒide
, 
TCÛff
* 
psCÛff
, IÁ 
iWidth
, IÁ 
iHeight
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
 );

237 
Void
 
xT¿nsfÜmSk
 ( 
P–
* 
piBlkResi
, 
UIÁ
 
uiSŒide
, 
TCÛff
* 
psCÛff
, 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compÚ’t
 );

239 
Void
 
signB™HidšgHDQ
Ð
TCÛff
* 
pQCÛf
, TCÛff* 
pCÛf
, TCÛff* 
d–U
, cÚ¡ 
TUEÁrÝyCodšgP¬am‘”s
 &
codšgP¬am‘”s
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 );

242 
Void
 
xQuªt
Ð
TComTU
 &
rTu
,

243 
TCÛff
 * 
pSrc
,

244 
TCÛff
 * 
pDes
,

245 #ià
ADAPTIVE_QP_SELECTION


246 
TCÛff
 *
pA¾Des
,

248 
TCÛff
 &
uiAbsSum
,

249 cÚ¡ 
CompÚ’tID
 
compID
,

250 cÚ¡ 
QpP¬am
 &
cQP
 );

252 
BoÞ
 
xN“dRDOQ
Ð
TComTU
 &
rTu
,

253 
TCÛff
 * 
pSrc
,

254 cÚ¡ 
CompÚ’tID
 
compID
,

255 cÚ¡ 
QpP¬am
 &
cQP
 );

259 
Void
 
xR©eDi¡O±Quªt
 ( 
TComTU
 &
rTu
,

260 
TCÛff
 * 
¶SrcCÛff
,

261 
TCÛff
 * 
piD¡CÛff
,

262 #ià
ADAPTIVE_QP_SELECTION


263 
TCÛff
 *
piA¾D¡CÛff
,

265 
TCÛff
 &
uiAbsSum
,

266 cÚ¡ 
CompÚ’tID
 
compID
,

267 cÚ¡ 
QpP¬am
 &
cQP
 );

269 
__šlše
 
UIÁ
 
	$xG‘CodedLev–
 ( 
DoubË
& 
rd64CodedCo¡
,

270 
DoubË
& 
rd64CodedCo¡0
,

271 
DoubË
& 
rd64CodedCo¡Sig
,

272 
IÁ”medŸ‹_IÁ
 
lLev–DoubË
,

273 
UIÁ
 
uiMaxAbsLev–
,

274 
UShÜt
 
ui16CtxNumSig
,

275 
UShÜt
 
ui16CtxNumOÃ
,

276 
UShÜt
 
ui16CtxNumAbs
,

277 
UShÜt
 
ui16AbsGoRiû
,

278 
UIÁ
 
c1Idx
,

279 
UIÁ
 
c2Idx
,

280 
IÁ
 
iQB™s
,

281 
DoubË
 
”rÜSÿË
,

282 
BoÞ
 
bLa¡
,

283 
BoÞ
 
u£Lim™edP»fixL’gth
,

284 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge


288 
__šlše
 
IÁ
 
	$xG‘ICR©e
 ( cÚ¡ 
UIÁ
 
uiAbsLev–
,

289 cÚ¡ 
UShÜt
 
ui16CtxNumOÃ
,

290 cÚ¡ 
UShÜt
 
ui16CtxNumAbs
,

291 cÚ¡ 
UShÜt
 
ui16AbsGoRiû
,

292 cÚ¡ 
UIÁ
 
c1Idx
,

293 cÚ¡ 
UIÁ
 
c2Idx
,

294 cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
,

295 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge


298 
__šlše
 
DoubË
 
	$xG‘R©eLa¡
 ( cÚ¡ 
UIÁ
 
uiPosX
, cÚ¡ UIÁ 
uiPosY
, cÚ¡ 
CompÚ’tID
 
compÚ’t
 ) const;

299 
__šlše
 
DoubË
 
	$xG‘R©eSigCÛffGroup
Ð
UShÜt
 
uiSignifiÿnûCÛffGroup
, UShÜˆ
ui16CtxNumSig
 ) const;

300 
__šlše
 
DoubË
 
	$xG‘R©eSigCÛf
 ( 
UShÜt
 
uiSignifiÿnû
, UShÜˆ
ui16CtxNumSig
 ) const;

301 
__šlše
 
DoubË
 
	$xG‘ICo¡
 ( 
DoubË
 
dR©e
 ) const;

302 
__šlše
 
DoubË
 
	$xG‘IEPR©e
 ( ) const;

306 
Void
 
	`xDeQuªt
Ð
TComTU
 &
rTu
,

307 cÚ¡ 
TCÛff
 * 
pSrc
,

308 
TCÛff
 * 
pDes
,

309 cÚ¡ 
CompÚ’tID
 
compID
,

310 cÚ¡ 
QpP¬am
 &
cQP
 );

313 
Void
 
	`xIT
 ( cÚ¡ 
IÁ
 
chªÃlB™D•th
, 
BoÞ
 
u£DST
, 
TCÛff
* 
¶CÛf
, 
P–
* 
pResidu®
, 
UIÁ
 
uiSŒide
, IÁ 
iWidth
, IÁ 
iHeight
, cÚ¡ IÁ 
maxLog2TrDyÇmicRªge
 );

316 
Void
 
	`xIT¿nsfÜmSk
 ( 
TCÛff
* 
¶CÛf
, 
P–
* 
pResidu®
, 
UIÁ
 
uiSŒide
, 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compÚ’t
 );

318 
public
:

319 
Void
 
	`üossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
,

320 cÚ¡ 
CompÚ’tID
 
compID
,

321 cÚ¡ 
P–
 *
piResiL
,

322 cÚ¡ 
P–
 *
piResiC
,

323 
P–
 *
piResiT
,

324 cÚ¡ 
IÁ
 
width
,

325 cÚ¡ 
IÁ
 
height
,

326 cÚ¡ 
IÁ
 
¡rideL
,

327 cÚ¡ 
IÁ
 
¡rideC
,

328 cÚ¡ 
IÁ
 
¡rideT
,

329 cÚ¡ 
BoÞ
 
»v”£
);

331 
	}
};

	@source/Lib/TLibCommon/TComWeightPrediction.cpp

39 
	~"CommÚDef.h
"

40 
	~"TComYuv.h
"

41 
	~"TComPic.h
"

42 
	~"TComIÁ”pÞ©iÚFž‹r.h
"

43 
	~"TComWeightP»diùiÚ.h
"

46 
šlše
 
P–
 
	$weightBidœ
Ð
IÁ
 
w0
, 
P–
 
P0
, IÁ 
w1
, P– 
P1
, IÁ 
round
, IÁ 
shiá
, IÁ 
off£t
, IÁ 
þBD
)

48  
	`ClBD
ÐÐ(
w0
*(
P0
 + 
IF_INTERNAL_OFFS
è+ 
w1
*(
P1
 + IF_INTERNAL_OFFSè+ 
round
 + (
off£t
 << (
shiá
-1))è>> shiá ), 
þBD
 );

49 
	}
}

52 
šlše
 
P–
 
	$weightUnidœ
Ð
IÁ
 
w0
, 
P–
 
P0
, IÁ 
round
, IÁ 
shiá
, IÁ 
off£t
, IÁ 
þBD
)

54  
	`ClBD
ÐÐ(
w0
*(
P0
 + 
IF_INTERNAL_OFFS
è+ 
round
è>> 
shiá
 ) + 
off£t
, 
þBD
 );

55 
	}
}

57 
šlše
 
P–
 
	$noWeightUnidœ
Ð
P–
 
P0
, 
IÁ
 
round
, IÁ 
shiá
, IÁ 
off£t
, IÁ 
þBD
)

59  
	`ClBD
ÐÐ((
P0
 + 
IF_INTERNAL_OFFS
è+ 
round
è>> 
shiá
 ) + 
off£t
, 
þBD
 );

60 
	}
}

62 
šlše
 
P–
 
	$noWeightOff£tUnidœ
Ð
P–
 
P0
, 
IÁ
 
round
, IÁ 
shiá
, IÁ 
þBD
)

64  
	`ClBD
ÐÐ((
P0
 + 
IF_INTERNAL_OFFS
è+ 
round
è>> 
shiá
 ), 
þBD
 );

65 
	}
}

72 
	gTComWeightP»diùiÚ
::
	$TComWeightP»diùiÚ
()

74 
	}
}

78 
Void
 
TComWeightP»diùiÚ
::
	$addWeightBi
ÐcÚ¡ 
TComYuv
 *
pcYuvSrc0
,

79 cÚ¡ 
TComYuv
 *
pcYuvSrc1
,

80 cÚ¡ 
B™D•ths
 &
b™D•ths
,

81 cÚ¡ 
UIÁ
 
iP¬tUn™Idx
,

82 cÚ¡ 
UIÁ
 
uiWidth
,

83 cÚ¡ 
UIÁ
 
uiHeight
,

84 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp0
,

85 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp1
,

86 
TComYuv
 *cÚ¡ 
½cYuvD¡
,

87 cÚ¡ 
BoÞ
 
bRoundLuma
)

90 cÚ¡ 
BoÞ
 
’abËRoundšg
[
MAX_NUM_COMPONENT
]={ 
bRoundLuma
, 
Œue
,rue };

92 cÚ¡ 
UIÁ
 
numV®idCompÚ’t
 = 
pcYuvSrc0
->
	`g‘Numb”V®idCompÚ’ts
();

94 
IÁ
 
compÚ’tIndex
=0; compÚ’tIndex<
numV®idCompÚ’t
; componentIndex++)

96 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
compÚ’tIndex
);

98 cÚ¡ 
P–
* 
pSrc0
 = 
pcYuvSrc0
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

99 cÚ¡ 
P–
* 
pSrc1
 = 
pcYuvSrc1
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

100 
P–
* 
pD¡
 = 
½cYuvD¡
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

103 cÚ¡ 
IÁ
 
w0
 = 
wp0
[
compID
].
w
;

104 cÚ¡ 
IÁ
 
off£t
 = 
wp0
[
compID
].offset;

105 cÚ¡ 
IÁ
 
þBD
 = 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)];

106 cÚ¡ 
IÁ
 
shiáNum
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
þBD
));

107 cÚ¡ 
IÁ
 
shiá
 = 
wp0
[
compID
].shiá + 
shiáNum
;

108 cÚ¡ 
IÁ
 
round
 = (
’abËRoundšg
[
compID
] && (
shiá
 > 0)) ? (1<<(shift-1)) : 0;

109 cÚ¡ 
IÁ
 
w1
 = 
wp1
[
compID
].
w
;

110 cÚ¡ 
UIÁ
 
csx
 = 
pcYuvSrc0
->
	`g‘CompÚ’tSÿËX
(
compID
);

111 cÚ¡ 
UIÁ
 
csy
 = 
pcYuvSrc0
->
	`g‘CompÚ’tSÿËY
(
compID
);

112 cÚ¡ 
IÁ
 
iHeight
 = 
uiHeight
>>
csy
;

113 cÚ¡ 
IÁ
 
iWidth
 = 
uiWidth
>>
csx
;

115 cÚ¡ 
UIÁ
 
iSrc0SŒide
 = 
pcYuvSrc0
->
	`g‘SŒide
(
compID
);

116 cÚ¡ 
UIÁ
 
iSrc1SŒide
 = 
pcYuvSrc1
->
	`g‘SŒide
(
compID
);

117 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
½cYuvD¡
->
	`g‘SŒide
(
compID
);

119  
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

122 
IÁ
 
x
 = 
iWidth
-1;

123  ; 
x
 >= 3; )

125 
pD¡
[
x
] = 
	`weightBidœ
(
w0
,
pSrc0
[x], 
w1
,
pSrc1
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

126 
pD¡
[
x
] = 
	`weightBidœ
(
w0
,
pSrc0
[x], 
w1
,
pSrc1
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

127 
pD¡
[
x
] = 
	`weightBidœ
(
w0
,
pSrc0
[x], 
w1
,
pSrc1
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

128 
pD¡
[
x
] = 
	`weightBidœ
(
w0
,
pSrc0
[x], 
w1
,
pSrc1
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

130  ; 
x
 >= 0; x-- )

132 
pD¡
[
x
] = 
	`weightBidœ
(
w0
,
pSrc0
[x], 
w1
,
pSrc1
[x], 
round
, 
shiá
, 
off£t
, 
þBD
);

135 
pSrc0
 +ð
iSrc0SŒide
;

136 
pSrc1
 +ð
iSrc1SŒide
;

137 
pD¡
 +ð
iD¡SŒide
;

140 
	}
}

144 
Void
 
	gTComWeightP»diùiÚ
::
	$addWeightUni
ÐcÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc0
,

145 cÚ¡ 
B™D•ths
 &
b™D•ths
,

146 cÚ¡ 
UIÁ
 
iP¬tUn™Idx
,

147 cÚ¡ 
UIÁ
 
uiWidth
,

148 cÚ¡ 
UIÁ
 
uiHeight
,

149 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp0
,

150 
TComYuv
 *cÚ¡ 
pcYuvD¡
 )

152 cÚ¡ 
UIÁ
 
numV®idCompÚ’t
 = 
pcYuvSrc0
->
	`g‘Numb”V®idCompÚ’ts
();

154 
IÁ
 
compÚ’tIndex
=0; compÚ’tIndex<
numV®idCompÚ’t
; componentIndex++)

156 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
compÚ’tIndex
);

158 cÚ¡ 
P–
* 
pSrc0
 = 
pcYuvSrc0
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

159 
P–
* 
pD¡
 = 
pcYuvD¡
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

162 cÚ¡ 
IÁ
 
w0
 = 
wp0
[
compID
].
w
;

163 cÚ¡ 
IÁ
 
off£t
 = 
wp0
[
compID
].offset;

164 cÚ¡ 
IÁ
 
þBD
 = 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)];

165 cÚ¡ 
IÁ
 
shiáNum
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
þBD
));

166 cÚ¡ 
IÁ
 
shiá
 = 
wp0
[
compID
].shiá + 
shiáNum
;

167 cÚ¡ 
UIÁ
 
iSrc0SŒide
 = 
pcYuvSrc0
->
	`g‘SŒide
(
compID
);

168 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcYuvD¡
->
	`g‘SŒide
(
compID
);

169 cÚ¡ 
UIÁ
 
csx
 = 
pcYuvSrc0
->
	`g‘CompÚ’tSÿËX
(
compID
);

170 cÚ¡ 
UIÁ
 
csy
 = 
pcYuvSrc0
->
	`g‘CompÚ’tSÿËY
(
compID
);

171 cÚ¡ 
IÁ
 
iHeight
 = 
uiHeight
>>
csy
;

172 cÚ¡ 
IÁ
 
iWidth
 = 
uiWidth
>>
csx
;

174 ià(
w0
 !ð1 << 
wp0
[
compID
].
shiá
)

176 cÚ¡ 
IÁ
 
round
 = (
shiá
 > 0) ? (1<<(shift-1)) : 0;

177 
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

179 
IÁ
 
x
 = 
iWidth
-1;

180  ; 
x
 >= 3; )

182 
pD¡
[
x
] = 
	`weightUnidœ
(
w0
, 
pSrc0
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

183 
pD¡
[
x
] = 
	`weightUnidœ
(
w0
, 
pSrc0
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

184 
pD¡
[
x
] = 
	`weightUnidœ
(
w0
, 
pSrc0
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

185 
pD¡
[
x
] = 
	`weightUnidœ
(
w0
, 
pSrc0
[x], 
round
, 
shiá
, 
off£t
, 
þBD
); x--;

187  ; 
x
 >= 0; x--)

189 
pD¡
[
x
] = 
	`weightUnidœ
(
w0
, 
pSrc0
[x], 
round
, 
shiá
, 
off£t
, 
þBD
);

191 
pSrc0
 +ð
iSrc0SŒide
;

192 
pD¡
 +ð
iD¡SŒide
;

197 cÚ¡ 
IÁ
 
round
 = (
shiáNum
 > 0) ? (1<<(shiftNum-1)) : 0;

198 ià(
off£t
 == 0)

200 
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

202 
IÁ
 
x
 = 
iWidth
-1;

203  ; 
x
 >= 3; )

205 
pD¡
[
x
] = 
	`noWeightOff£tUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
þBD
); x--;

206 
pD¡
[
x
] = 
	`noWeightOff£tUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
þBD
); x--;

207 
pD¡
[
x
] = 
	`noWeightOff£tUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
þBD
); x--;

208 
pD¡
[
x
] = 
	`noWeightOff£tUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
þBD
); x--;

210  ; 
x
 >= 0; x--)

212 
pD¡
[
x
] = 
	`noWeightOff£tUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
þBD
);

214 
pSrc0
 +ð
iSrc0SŒide
;

215 
pD¡
 +ð
iD¡SŒide
;

220 
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

222 
IÁ
 
x
 = 
iWidth
-1;

223  ; 
x
 >= 3; )

225 
pD¡
[
x
] = 
	`noWeightUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
off£t
, 
þBD
); x--;

226 
pD¡
[
x
] = 
	`noWeightUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
off£t
, 
þBD
); x--;

227 
pD¡
[
x
] = 
	`noWeightUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
off£t
, 
þBD
); x--;

228 
pD¡
[
x
] = 
	`noWeightUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
off£t
, 
þBD
); x--;

230  ; 
x
 >= 0; x--)

232 
pD¡
[
x
] = 
	`noWeightUnidœ
(
pSrc0
[x], 
round
, 
shiáNum
, 
off£t
, 
þBD
);

234 
pSrc0
 +ð
iSrc0SŒide
;

235 
pD¡
 +ð
iD¡SŒide
;

240 
	}
}

247 
Void
 
	gTComWeightP»diùiÚ
::
	$g‘WpSÿlšg
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

248 cÚ¡ 
IÁ
 
iRefIdx0
,

249 cÚ¡ 
IÁ
 
iRefIdx1
,

250 
WPSÿlšgP¬am
 *&
wp0
,

251 
WPSÿlšgP¬am
 *&
wp1
)

253 
	`as£¹
(
iRefIdx0
 >ð0 || 
iRefIdx1
 >= 0);

255 
TComSliû
 *cÚ¡ 
pcSliû
 = 
pcCU
->
	`g‘Sliû
();

256 cÚ¡ 
BoÞ
 
wpBiP»d
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘WPBiP»d
();

257 cÚ¡ 
BoÞ
 
bBiP»d
 = (
iRefIdx0
>=0 && 
iRefIdx1
>=0);

258 cÚ¡ 
BoÞ
 
bUniP»d
 = !
bBiP»d
;

260 iàÐ
bUniP»d
 || 
wpBiP»d
 )

262 iàÐ
iRefIdx0
 >= 0 )

264 
pcSliû
->
	`g‘WpSÿlšg
(
REF_PIC_LIST_0
, 
iRefIdx0
, 
wp0
);

266 iàÐ
iRefIdx1
 >= 0 )

268 
pcSliû
->
	`g‘WpSÿlšg
(
REF_PIC_LIST_1
, 
iRefIdx1
, 
wp1
);

273 
	`as£¹
(0);

276 iàÐ
iRefIdx0
 < 0 )

278 
wp0
 = 
NULL
;

280 iàÐ
iRefIdx1
 < 0 )

282 
wp1
 = 
NULL
;

285 cÚ¡ 
UIÁ
 
numV®idCompÚ’t
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

286 cÚ¡ 
BoÞ
 
bU£HighP»cisiÚP»diùiÚWeightšg
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
();

288 iàÐ
bBiP»d
 )

290  
IÁ
 
yuv
=0 ; yuv<
numV®idCompÚ’t
 ; yuv++ )

292 cÚ¡ 
IÁ
 
b™D•th
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
	`CompÚ’tID
(
yuv
)));

293 cÚ¡ 
IÁ
 
off£tSÿlšgFaùÜ
 = 
bU£HighP»cisiÚP»diùiÚWeightšg
 ? 1 : (1 << (
b™D•th
-8));

295 
wp0
[
yuv
].
w
 = wp0[yuv].
iWeight
;

296 
wp1
[
yuv
].
w
 = wp1[yuv].
iWeight
;

297 
wp0
[
yuv
].
o
 = wp0[yuv].
iOff£t
 * 
off£tSÿlšgFaùÜ
;

298 
wp1
[
yuv
].
o
 = wp1[yuv].
iOff£t
 * 
off£tSÿlšgFaùÜ
;

299 
wp0
[
yuv
].
off£t
 = wp0[yuv].
o
 + 
wp1
[yuv].o;

300 
wp0
[
yuv
].
shiá
 = wp0[yuv].
uiLog2WeightD’om
 + 1;

301 
wp0
[
yuv
].
round
 = (1 << wp0[yuv].
uiLog2WeightD’om
);

302 
wp1
[
yuv
].
off£t
 = 
wp0
[yuv].offset;

303 
wp1
[
yuv
].
shiá
 = 
wp0
[yuv].shift;

304 
wp1
[
yuv
].
round
 = 
wp0
[yuv].round;

309 
WPSÿlšgP¬am
 *cÚ¡ 
pwp
 = (
iRefIdx0
>=0è? 
wp0
 : 
wp1
 ;

311  
IÁ
 
yuv
=0 ; yuv<
numV®idCompÚ’t
 ; yuv++ )

313 cÚ¡ 
IÁ
 
b™D•th
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
	`CompÚ’tID
(
yuv
)));

314 cÚ¡ 
IÁ
 
off£tSÿlšgFaùÜ
 = 
bU£HighP»cisiÚP»diùiÚWeightšg
 ? 1 : (1 << (
b™D•th
-8));

316 
pwp
[
yuv
].
w
 =…wp[yuv].
iWeight
;

317 
pwp
[
yuv
].
off£t
 =…wp[yuv].
iOff£t
 * 
off£tSÿlšgFaùÜ
;

318 
pwp
[
yuv
].
shiá
 =…wp[yuv].
uiLog2WeightD’om
;

319 
pwp
[
yuv
].
round
 = (pwp[yuv].
uiLog2WeightD’om
>=1) ? (1 << (pwp[yuv].uiLog2WeightDenom-1)) : (0);

322 
	}
}

326 
Void
 
	gTComWeightP»diùiÚ
::
	$xWeigh‹dP»diùiÚBi
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

327 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc0
,

328 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc1
,

329 cÚ¡ 
IÁ
 
iRefIdx0
,

330 cÚ¡ 
IÁ
 
iRefIdx1
,

331 cÚ¡ 
UIÁ
 
uiP¬tIdx
,

332 cÚ¡ 
IÁ
 
iWidth
,

333 cÚ¡ 
IÁ
 
iHeight
,

334 
TComYuv
 *
½cYuvD¡
 )

336 
WPSÿlšgP¬am
 *
pwp0
;

337 
WPSÿlšgP¬am
 *
pwp1
;

339 
	`as£¹
(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘WPBiP»d
());

341 
	`g‘WpSÿlšg
(
pcCU
, 
iRefIdx0
, 
iRefIdx1
, 
pwp0
, 
pwp1
);

343 ifÐ
iRefIdx0
 >ð0 && 
iRefIdx1
 >= 0 )

345 
	`addWeightBi
(
pcYuvSrc0
, 
pcYuvSrc1
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
(), 
uiP¬tIdx
, 
iWidth
, 
iHeight
, 
pwp0
, 
pwp1
, 
½cYuvD¡
 );

347 iàÐ
iRefIdx0
 >ð0 && 
iRefIdx1
 < 0 )

349 
	`addWeightUni
Ð
pcYuvSrc0
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
(), 
uiP¬tIdx
, 
iWidth
, 
iHeight
, 
pwp0
, 
½cYuvD¡
 );

351 iàÐ
iRefIdx0
 < 0 && 
iRefIdx1
 >= 0 )

353 
	`addWeightUni
Ð
pcYuvSrc1
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
(), 
uiP¬tIdx
, 
iWidth
, 
iHeight
, 
pwp1
, 
½cYuvD¡
 );

357 
	`as£¹
 (0);

359 
	}
}

363 
Void
 
	gTComWeightP»diùiÚ
::
	$xWeigh‹dP»diùiÚUni
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

364 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc
,

365 cÚ¡ 
UIÁ
 
uiP¬tAddr
,

366 cÚ¡ 
IÁ
 
iWidth
,

367 cÚ¡ 
IÁ
 
iHeight
,

368 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
,

369 
TComYuv
 *
pcYuvP»d
,

370 cÚ¡ 
IÁ
 
iRefIdx_šput
)

372 
WPSÿlšgP¬am
 *
pwp
, *
pwpTmp
;

374 
IÁ
 
iRefIdx
=
iRefIdx_šput
;

375 iàÐ
iRefIdx
 < 0 )

377 
iRefIdx
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`g‘RefIdx
Ð
uiP¬tAddr
 );

379 
	`as£¹
 (
iRefIdx
 >= 0);

381 iàÐ
eRefPicLi¡
 =ð
REF_PIC_LIST_0
 )

383 
	`g‘WpSÿlšg
(
pcCU
, 
iRefIdx
, -1, 
pwp
, 
pwpTmp
);

387 
	`g‘WpSÿlšg
(
pcCU
, -1, 
iRefIdx
, 
pwpTmp
, 
pwp
);

389 
	`addWeightUni
Ð
pcYuvSrc
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
(), 
uiP¬tAddr
, 
iWidth
, 
iHeight
, 
pwp
, 
pcYuvP»d
 );

390 
	}
}

	@source/Lib/TLibCommon/TComWeightPrediction.h

38 #iâdeà
__TCOMWEIGHTPREDICTION__


39 
	#__TCOMWEIGHTPREDICTION__


	)

41 
	~"CommÚDef.h
"

44 
þass
 
	gTComD©aCU
;

45 
þass
 
	gTComYuv
;

46 
	gWPSÿlšgP¬am
;

52 þas 
	cTComWeightP»diùiÚ


54 
	mpublic
:

55 
TComWeightP»diùiÚ
();

57 
Void
 
g‘WpSÿlšg
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

58 cÚ¡ 
IÁ
 
iRefIdx0
,

59 cÚ¡ 
IÁ
 
iRefIdx1
,

60 
WPSÿlšgP¬am
 *&
wp0
,

61 
WPSÿlšgP¬am
 *&
wp1
);

63 
Void
 
addWeightBi
ÐcÚ¡ 
TComYuv
 *
pcYuvSrc0
,

64 cÚ¡ 
TComYuv
 *
pcYuvSrc1
,

65 cÚ¡ 
B™D•ths
 &
b™D•ths
,

66 cÚ¡ 
UIÁ
 
iP¬tUn™Idx
,

67 cÚ¡ 
UIÁ
 
uiWidth
,

68 cÚ¡ 
UIÁ
 
uiHeight
,

69 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp0
,

70 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp1
,

71 
TComYuv
 *cÚ¡ 
½cYuvD¡
,

72 cÚ¡ 
BoÞ
 
bRoundLuma
=
Œue
 );

74 
Void
 
addWeightUni
ÐcÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc0
,

75 cÚ¡ 
B™D•ths
 &
b™D•ths
,

76 cÚ¡ 
UIÁ
 
iP¬tUn™Idx
,

77 cÚ¡ 
UIÁ
 
uiWidth
,

78 cÚ¡ 
UIÁ
 
uiHeight
,

79 cÚ¡ 
WPSÿlšgP¬am
 *cÚ¡ 
wp0
,

80 
TComYuv
 *cÚ¡ 
½cYuvD¡
 );

82 
Void
 
xWeigh‹dP»diùiÚUni
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

83 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc
,

84 cÚ¡ 
UIÁ
 
uiP¬tAddr
,

85 cÚ¡ 
IÁ
 
iWidth
,

86 cÚ¡ 
IÁ
 
iHeight
,

87 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
,

88 
TComYuv
 *
pcYuvP»d
,

89 cÚ¡ 
IÁ
 
iRefIdx
=-1 );

91 
Void
 
xWeigh‹dP»diùiÚBi
Ð
TComD©aCU
 *cÚ¡ 
pcCU
,

92 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc0
,

93 cÚ¡ 
TComYuv
 *cÚ¡ 
pcYuvSrc1
,

94 cÚ¡ 
IÁ
 
iRefIdx0
,

95 cÚ¡ 
IÁ
 
iRefIdx1
,

96 cÚ¡ 
UIÁ
 
uiP¬tIdx
,

97 cÚ¡ 
IÁ
 
iWidth
,

98 cÚ¡ 
IÁ
 
iHeight
,

99 
TComYuv
 *
pcYuvD¡
 );

	@source/Lib/TLibCommon/TComYuv.cpp

39 
	~<¡dlib.h
>

40 
	~<memÜy.h
>

41 
	~<as£¹.h
>

42 
	~<m©h.h
>

44 
	~"CommÚDef.h
"

45 
	~"TComYuv.h
"

46 
	~"TComIÁ”pÞ©iÚFž‹r.h
"

51 
	gTComYuv
::
	$TComYuv
()

53 
IÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

55 
m_­iBuf
[
comp
] = 
NULL
;

57 
	}
}

59 
	gTComYuv
::~
	$TComYuv
()

61 
	`de¡roy
();

62 
	}
}

64 
Void
 
	gTComYuv
::
	$ü—‹
Ð
UIÁ
 
iWidth
, UIÁ 
iHeight
, 
ChromaFÜm©
 
chromaFÜm©IDC
 )

66 
	`de¡roy
();

68 
m_iWidth
 = 
iWidth
;

69 
m_iHeight
 = 
iHeight
;

70 
m_chromaFÜm©IDC
 = 
chromaFÜm©IDC
;

72 
IÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

75 
m_­iBuf
[
comp
] = (
P–
*)
	`xM®loc
ÐP–, 
	`g‘Width
(
	`CompÚ’tID
(comp))*
	`g‘Height
(ComponentID(comp)) );

77 
	}
}

79 
Void
 
	gTComYuv
::
	$de¡roy
()

82 
IÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

84 ià(
m_­iBuf
[
comp
]!=
NULL
)

86 
	`xF»e
Ð
m_­iBuf
[
comp
] );

87 
m_­iBuf
[
comp
] = 
NULL
;

90 
	}
}

92 
Void
 
	gTComYuv
::
	$þ—r
()

94 
IÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

96 ià(
m_­iBuf
[
comp
]!=
NULL
)

98 ::
	`mem£t
Ð
m_­iBuf
[
comp
], 0, ( 
	`g‘Width
(
	`CompÚ’tID
(comp)è* 
	`g‘Height
(CompÚ’tID(comp)è)*(
P–
) );

101 
	}
}

106 
Void
 
	gTComYuv
::
	$cÝyToPicYuv
 ( 
TComPicYuv
* 
pcPicYuvD¡
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiP¬tD•th
, cÚ¡ UIÁ 
uiP¬tIdx
 ) const

108 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

110 
	`cÝyToPicCompÚ’t
 ( 
	`CompÚ’tID
(
comp
), 
pcPicYuvD¡
, 
ùuRsAddr
, 
uiAbsZÜd”Idx
, 
uiP¬tD•th
, 
uiP¬tIdx
 );

112 
	}
}

114 
Void
 
	gTComYuv
::
	$cÝyToPicCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComPicYuv
* 
pcPicYuvD¡
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiP¬tD•th
, cÚ¡ UIÁ 
uiP¬tIdx
 ) const

116 cÚ¡ 
IÁ
 
iWidth
 = 
	`g‘Width
(
compID
è>>
uiP¬tD•th
;

117 cÚ¡ 
IÁ
 
iHeight
 = 
	`g‘Height
(
compID
)>>
uiP¬tD•th
;

119 cÚ¡ 
P–
* 
pSrc
 = 
	`g‘Addr
(
compID
, 
uiP¬tIdx
, 
iWidth
);

120 
P–
* 
pD¡
 = 
pcPicYuvD¡
->
	`g‘Addr
 ( 
compID
, 
ùuRsAddr
, 
uiAbsZÜd”Idx
 );

122 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
	`g‘SŒide
(
compID
);

123 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcPicYuvD¡
->
	`g‘SŒide
(
compID
);

125  
IÁ
 
y
 = 
iHeight
; y != 0; y-- )

127 ::
	`memýy
Ð
pD¡
, 
pSrc
, (
P–
)*
iWidth
);

128 
pD¡
 +ð
iD¡SŒide
;

129 
pSrc
 +ð
iSrcSŒide
;

131 
	}
}

136 
Void
 
	gTComYuv
::
	$cÝyFromPicYuv
 ( cÚ¡ 
TComPicYuv
* 
pcPicYuvSrc
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
 )

138 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

140 
	`cÝyFromPicCompÚ’t
 ( 
	`CompÚ’tID
(
comp
), 
pcPicYuvSrc
, 
ùuRsAddr
, 
uiAbsZÜd”Idx
 );

142 
	}
}

144 
Void
 
	gTComYuv
::
	$cÝyFromPicCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
TComPicYuv
* 
pcPicYuvSrc
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
 )

146 
P–
* 
pD¡
 = 
	`g‘Addr
(
compID
);

147 cÚ¡ 
P–
* 
pSrc
 = 
pcPicYuvSrc
->
	`g‘Addr
 ( 
compID
, 
ùuRsAddr
, 
uiAbsZÜd”Idx
 );

149 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
	`g‘SŒide
(
compID
);

150 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
pcPicYuvSrc
->
	`g‘SŒide
(
compID
);

151 cÚ¡ 
IÁ
 
iWidth
=
	`g‘Width
(
compID
);

152 cÚ¡ 
IÁ
 
iHeight
=
	`g‘Height
(
compID
);

154 
IÁ
 
y
 = 
iHeight
; y != 0; y-- )

156 ::
	`memýy
Ð
pD¡
, 
pSrc
, (
P–
)*
iWidth
);

157 
pD¡
 +ð
iD¡SŒide
;

158 
pSrc
 +ð
iSrcSŒide
;

160 
	}
}

165 
Void
 
	gTComYuv
::
	$cÝyToP¬tYuv
Ð
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiD¡P¬tIdx
 ) const

167 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

169 
	`cÝyToP¬tCompÚ’t
 ( 
	`CompÚ’tID
(
comp
), 
pcYuvD¡
, 
uiD¡P¬tIdx
 );

171 
	}
}

173 
Void
 
	gTComYuv
::
	$cÝyToP¬tCompÚ’t
ÐcÚ¡ 
CompÚ’tID
 
compID
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiD¡P¬tIdx
 ) const

175 cÚ¡ 
P–
* 
pSrc
 = 
	`g‘Addr
(
compID
);

176 
P–
* 
pD¡
 = 
pcYuvD¡
->
	`g‘Addr
Ð
compID
, 
uiD¡P¬tIdx
 );

178 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
	`g‘SŒide
(
compID
);

179 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcYuvD¡
->
	`g‘SŒide
(
compID
);

180 cÚ¡ 
IÁ
 
iWidth
=
	`g‘Width
(
compID
);

181 cÚ¡ 
IÁ
 
iHeight
=
	`g‘Height
(
compID
);

183 
IÁ
 
y
 = 
iHeight
; y != 0; y-- )

185 ::
	`memýy
Ð
pD¡
, 
pSrc
, (
P–
)*
iWidth
);

186 
pD¡
 +ð
iD¡SŒide
;

187 
pSrc
 +ð
iSrcSŒide
;

189 
	}
}

194 
Void
 
	gTComYuv
::
	$cÝyP¬tToYuv
Ð
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiSrcP¬tIdx
 ) const

196 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

198 
	`cÝyP¬tToCompÚ’t
 ( 
	`CompÚ’tID
(
comp
), 
pcYuvD¡
, 
uiSrcP¬tIdx
 );

200 
	}
}

202 
Void
 
	gTComYuv
::
	$cÝyP¬tToCompÚ’t
ÐcÚ¡ 
CompÚ’tID
 
compID
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiSrcP¬tIdx
 ) const

204 cÚ¡ 
P–
* 
pSrc
 = 
	`g‘Addr
(
compID
, 
uiSrcP¬tIdx
);

205 
P–
* 
pD¡
 = 
pcYuvD¡
->
	`g‘Addr
(
compID
, 0 );

207 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
	`g‘SŒide
(
compID
);

208 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcYuvD¡
->
	`g‘SŒide
(
compID
);

210 cÚ¡ 
UIÁ
 
uiHeight
 = 
pcYuvD¡
->
	`g‘Height
(
compID
);

211 cÚ¡ 
UIÁ
 
uiWidth
 = 
pcYuvD¡
->
	`g‘Width
(
compID
);

213  
UIÁ
 
y
 = 
uiHeight
; y != 0; y-- )

215 ::
	`memýy
Ð
pD¡
, 
pSrc
, (
P–
)*
uiWidth
);

216 
pD¡
 +ð
iD¡SŒide
;

217 
pSrc
 +ð
iSrcSŒide
;

219 
	}
}

224 
Void
 
	gTComYuv
::
	$cÝyP¬tToP¬tYuv
 ( 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
iWidth
, cÚ¡ UIÁ 
iHeight
 ) const

226 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

228 
	`cÝyP¬tToP¬tCompÚ’t
 (
	`CompÚ’tID
(
comp
), 
pcYuvD¡
, 
uiP¬tIdx
, 
iWidth
>>
	`g‘CompÚ’tSÿËX
(CompÚ’tID(comp)), 
iHeight
>>
	`g‘CompÚ’tSÿËY
(ComponentID(comp)) );

230 
	}
}

232 
Void
 
	gTComYuv
::
	$cÝyP¬tToP¬tCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
iWidthCompÚ’t
, cÚ¡ UIÁ 
iHeightCompÚ’t
 ) const

234 cÚ¡ 
P–
* 
pSrc
 = 
	`g‘Addr
(
compID
, 
uiP¬tIdx
);

235 
P–
* 
pD¡
 = 
pcYuvD¡
->
	`g‘Addr
(
compID
, 
uiP¬tIdx
);

236 ifÐ
pSrc
 =ð
pD¡
 )

243 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
	`g‘SŒide
(
compID
);

244 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcYuvD¡
->
	`g‘SŒide
(
compID
);

245  
UIÁ
 
y
 = 
iHeightCompÚ’t
; y != 0; y-- )

247 ::
	`memýy
Ð
pD¡
, 
pSrc
, 
iWidthCompÚ’t
 * (
P–
) );

248 
pSrc
 +ð
iSrcSŒide
;

249 
pD¡
 +ð
iD¡SŒide
;

251 
	}
}

256 
Void
 
	gTComYuv
::
	$cÝyP¬tToP¬tCompÚ’tMxN
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
TComReùªgË
 &
»ù
) const

258 cÚ¡ 
P–
* 
pSrc
 = 
	`g‘AddrPix
Ð
compID
, 
»ù
.
x0
,„eù.
y0
 );

259 
P–
* 
pD¡
 = 
pcYuvD¡
->
	`g‘AddrPix
Ð
compID
, 
»ù
.
x0
,„eù.
y0
 );

260 ifÐ
pSrc
 =ð
pD¡
 )

267 cÚ¡ 
UIÁ
 
iSrcSŒide
 = 
	`g‘SŒide
(
compID
);

268 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
pcYuvD¡
->
	`g‘SŒide
(
compID
);

269 cÚ¡ 
UIÁ
 
uiHeightCompÚ’t
=
»ù
.
height
;

270 cÚ¡ 
UIÁ
 
uiWidthCompÚ’t
=
»ù
.
width
;

271  
UIÁ
 
y
 = 
uiHeightCompÚ’t
; y != 0; y-- )

273 ::
	`memýy
Ð
pD¡
, 
pSrc
, 
uiWidthCompÚ’t
 * Ð
P–
 ) );

274 
pSrc
 +ð
iSrcSŒide
;

275 
pD¡
 +ð
iD¡SŒide
;

277 
	}
}

282 
Void
 
	gTComYuv
::
	$addCl
ÐcÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
uiTrUn™Idx
, cÚ¡ UIÁ 
uiP¬tSize
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 )

284 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

286 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

287 cÚ¡ 
IÁ
 
uiP¬tWidth
 =
uiP¬tSize
>>
	`g‘CompÚ’tSÿËX
(
compID
);

288 cÚ¡ 
IÁ
 
uiP¬tHeight
=
uiP¬tSize
>>
	`g‘CompÚ’tSÿËY
(
compID
);

290 cÚ¡ 
P–
* 
pSrc0
 = 
pcYuvSrc0
->
	`g‘Addr
(
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

291 cÚ¡ 
P–
* 
pSrc1
 = 
pcYuvSrc1
->
	`g‘Addr
(
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

292 
P–
* 
pD¡
 = 
	`g‘Addr
(
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

294 cÚ¡ 
UIÁ
 
iSrc0SŒide
 = 
pcYuvSrc0
->
	`g‘SŒide
(
compID
);

295 cÚ¡ 
UIÁ
 
iSrc1SŒide
 = 
pcYuvSrc1
->
	`g‘SŒide
(
compID
);

296 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
	`g‘SŒide
(
compID
);

297 cÚ¡ 
IÁ
 
þbd
 = 
þB™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)];

298 #ià
O0043_BEST_EFFORT_DECODING


299 cÚ¡ 
IÁ
 
b™D•thD–
 = 
þB™D•ths
.
¡»am
[
	`toChªÃlTy³
(
compID
)] - 
þbd
;

302  
IÁ
 
y
 = 
uiP¬tHeight
-1; y >= 0; y-- )

304  
IÁ
 
x
 = 
uiP¬tWidth
-1; x >= 0; x-- )

306 #ià
O0043_BEST_EFFORT_DECODING


307 
pD¡
[
x
] = 
	`P–
(
ClBD
<
IÁ
>Ð
	`IÁ
(
pSrc0
[x]è+ 
rightShiáEv’Roundšg
<
P–
>(
pSrc1
[x], 
b™D•thD–
), 
þbd
));

309 
pD¡
[
x
] = 
	`P–
(
ClBD
<
IÁ
>Ð
	`IÁ
(
pSrc0
[x]è+ IÁ(
pSrc1
[x]), 
þbd
));

312 
pSrc0
 +ð
iSrc0SŒide
;

313 
pSrc1
 +ð
iSrc1SŒide
;

314 
pD¡
 +ð
iD¡SŒide
;

317 
	}
}

322 
Void
 
	gTComYuv
::
	$subŒaù
ÐcÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
uiTrUn™Idx
, cÚ¡ UIÁ 
uiP¬tSize
 )

324 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

326 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

327 cÚ¡ 
IÁ
 
uiP¬tWidth
 =
uiP¬tSize
>>
	`g‘CompÚ’tSÿËX
(
compID
);

328 cÚ¡ 
IÁ
 
uiP¬tHeight
=
uiP¬tSize
>>
	`g‘CompÚ’tSÿËY
(
compID
);

330 cÚ¡ 
P–
* 
pSrc0
 = 
pcYuvSrc0
->
	`g‘Addr
Ð
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

331 cÚ¡ 
P–
* 
pSrc1
 = 
pcYuvSrc1
->
	`g‘Addr
Ð
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

332 
P–
* 
pD¡
 = 
	`g‘Addr
Ð
compID
, 
uiTrUn™Idx
, 
uiP¬tWidth
 );

334 cÚ¡ 
IÁ
 
iSrc0SŒide
 = 
pcYuvSrc0
->
	`g‘SŒide
(
compID
);

335 cÚ¡ 
IÁ
 
iSrc1SŒide
 = 
pcYuvSrc1
->
	`g‘SŒide
(
compID
);

336 cÚ¡ 
IÁ
 
iD¡SŒide
 = 
	`g‘SŒide
(
compID
);

338 
IÁ
 
y
 = 
uiP¬tHeight
-1; y >= 0; y-- )

340 
IÁ
 
x
 = 
uiP¬tWidth
-1; x >= 0; x-- )

342 
pD¡
[
x
] = 
pSrc0
[x] - 
pSrc1
[x];

344 
pSrc0
 +ð
iSrc0SŒide
;

345 
pSrc1
 +ð
iSrc1SŒide
;

346 
pD¡
 +ð
iD¡SŒide
;

349 
	}
}

354 
Void
 
	gTComYuv
::
	$addAvg
ÐcÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
iP¬tUn™Idx
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 )

356 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

358 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

359 cÚ¡ 
P–
* 
pSrc0
 = 
pcYuvSrc0
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

360 cÚ¡ 
P–
* 
pSrc1
 = 
pcYuvSrc1
->
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

361 
P–
* 
pD¡
 = 
	`g‘Addr
Ð
compID
, 
iP¬tUn™Idx
 );

363 cÚ¡ 
UIÁ
 
iSrc0SŒide
 = 
pcYuvSrc0
->
	`g‘SŒide
(
compID
);

364 cÚ¡ 
UIÁ
 
iSrc1SŒide
 = 
pcYuvSrc1
->
	`g‘SŒide
(
compID
);

365 cÚ¡ 
UIÁ
 
iD¡SŒide
 = 
	`g‘SŒide
(
compID
);

366 cÚ¡ 
IÁ
 
þbd
 = 
þB™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)];

367 cÚ¡ 
IÁ
 
shiáNum
 = 
¡d
::
max
<IÁ>(2, (
IF_INTERNAL_PREC
 - 
þbd
)) + 1;

368 cÚ¡ 
IÁ
 
off£t
 = ( 1 << ( 
shiáNum
 - 1 ) ) + 2 * 
IF_INTERNAL_OFFS
;

370 cÚ¡ 
IÁ
 
iWidth
 = 
uiWidth
 >> 
	`g‘CompÚ’tSÿËX
(
compID
);

371 cÚ¡ 
IÁ
 
iHeight
 = 
uiHeight
 >> 
	`g‘CompÚ’tSÿËY
(
compID
);

373 ià(
iWidth
&1)

375 
	`as£¹
(0);

376 
	`ex™
(-1);

378 ià(
iWidth
&2)

380  
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

382 
IÁ
 
x
=0 ; x < 
iWidth
; x+=2 )

384 
pD¡
[ 
x
 + 0 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 0 ] + 
pSrc1
[ x + 0 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

385 
pD¡
[ 
x
 + 1 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 1 ] + 
pSrc1
[ x + 1 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

387 
pSrc0
 +ð
iSrc0SŒide
;

388 
pSrc1
 +ð
iSrc1SŒide
;

389 
pD¡
 +ð
iD¡SŒide
;

394  
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

396 
IÁ
 
x
=0 ; x < 
iWidth
; x+=4 )

398 
pD¡
[ 
x
 + 0 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 0 ] + 
pSrc1
[ x + 0 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

399 
pD¡
[ 
x
 + 1 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 1 ] + 
pSrc1
[ x + 1 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

400 
pD¡
[ 
x
 + 2 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 2 ] + 
pSrc1
[ x + 2 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

401 
pD¡
[ 
x
 + 3 ] = 
	`ClBD
Ð
	`rightShiá
(Ð
pSrc0
[ x + 3 ] + 
pSrc1
[ x + 3 ] + 
off£t
 ), 
shiáNum
), 
þbd
 );

403 
pSrc0
 +ð
iSrc0SŒide
;

404 
pSrc1
 +ð
iSrc1SŒide
;

405 
pD¡
 +ð
iD¡SŒide
;

409 
	}
}

411 
Void
 
	gTComYuv
::
	$»moveHighF»q
ÐcÚ¡ 
TComYuv
* 
pcYuvSrc
,

412 cÚ¡ 
UIÁ
 
uiP¬tIdx
,

413 cÚ¡ 
UIÁ
 
uiWidth
,

414 cÚ¡ 
UIÁ
 
uiHeight
,

415 cÚ¡ 
IÁ
 
b™D•ths
[
MAX_NUM_CHANNEL_TYPE
],

416 cÚ¡ 
BoÞ
 
bClToB™D•ths


419 
IÁ
 
comp
=0; comp<
	`g‘Numb”V®idCompÚ’ts
(); comp++)

421 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

422 cÚ¡ 
P–
* 
pSrc
 = 
pcYuvSrc
->
	`g‘Addr
(
compID
, 
uiP¬tIdx
);

423 
P–
* 
pD¡
 = 
	`g‘Addr
(
compID
, 
uiP¬tIdx
);

425 cÚ¡ 
IÁ
 
iSrcSŒide
 = 
pcYuvSrc
->
	`g‘SŒide
(
compID
);

426 cÚ¡ 
IÁ
 
iD¡SŒide
 = 
	`g‘SŒide
(
compID
);

427 cÚ¡ 
IÁ
 
iWidth
 = 
uiWidth
 >>
	`g‘CompÚ’tSÿËX
(
compID
);

428 cÚ¡ 
IÁ
 
iHeight
 = 
uiHeight
>>
	`g‘CompÚ’tSÿËY
(
compID
);

429 ià(
bClToB™D•ths
)

431 cÚ¡ 
IÁ
 
þBd
=
b™D•ths
[
	`toChªÃlTy³
(
compID
)];

432  
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

434  
IÁ
 
x
 = 
iWidth
-1; x >= 0; x-- )

436 
pD¡
[
x
 ] = 
	`ClBD
((2 *…D¡[x]è- 
pSrc
[x], 
þBd
);

438 
pSrc
 +ð
iSrcSŒide
;

439 
pD¡
 +ð
iD¡SŒide
;

444  
IÁ
 
y
 = 
iHeight
-1; y >= 0; y-- )

446  
IÁ
 
x
 = 
iWidth
-1; x >= 0; x-- )

448 
pD¡
[
x
 ] = (2 *…D¡[x]è- 
pSrc
[x];

450 
pSrc
 +ð
iSrcSŒide
;

451 
pD¡
 +ð
iD¡SŒide
;

455 
	}
}

	@source/Lib/TLibCommon/TComYuv.h

40 #iâdeà
__TCOMYUV__


41 
	#__TCOMYUV__


	)

42 
	~"CommÚDef.h
"

43 
	~"TComPicYuv.h
"

44 
	~"TComReùªgË.h
"

54 þas 
	cTComYuv


56 
	m´iv©e
:

62 
P–
* 
m_­iBuf
[
MAX_NUM_COMPONENT
];

68 
UIÁ
 
	mm_iWidth
;

69 
UIÁ
 
	mm_iHeight
;

70 
ChromaFÜm©
 
	mm_chromaFÜm©IDC
;

88 
	mpublic
:

90 
TComYuv
 ();

91 
	mvœtu®
 ~
TComYuv
 ();

97 
Void
 
ü—‹
 ( cÚ¡ 
UIÁ
 
iWidth
, cÚ¡ UIÁ 
iHeight
, cÚ¡ 
ChromaFÜm©
 
chromaFÜm©IDC
 );

98 
Void
 
de¡roy
 ();

99 
Void
 
þ—r
 ();

106 
Void
 
	$cÝyToPicYuv
 ( 
TComPicYuv
* 
pcPicYuvD¡
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiP¬tD•th
 = 0, cÚ¡ UIÁ 
uiP¬tIdx
 = 0 ) const ;

107 
Void
 
	$cÝyToPicCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
id
, 
TComPicYuv
* 
pcPicYuvD¡
, cÚ¡ 
UIÁ
 
iCtuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
, cÚ¡ UIÁ 
uiP¬tD•th
 = 0, cÚ¡ UIÁ 
uiP¬tIdx
 = 0 ) const ;

110 
Void
 
	`cÝyFromPicYuv
 ( cÚ¡ 
TComPicYuv
* 
pcPicYuvSrc
, cÚ¡ 
UIÁ
 
ùuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
 );

111 
Void
 
	`cÝyFromPicCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
TComPicYuv
* 
pcPicYuvSrc
, cÚ¡ 
UIÁ
 
iCtuRsAddr
, cÚ¡ UIÁ 
uiAbsZÜd”Idx
 );

114 
Void
 
	$cÝyToP¬tYuv
 ( 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiD¡P¬tIdx
 ) const ;

115 
Void
 
	$cÝyToP¬tCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
id
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiD¡P¬tIdx
 ) const ;

118 
Void
 
	$cÝyP¬tToYuv
 ( 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiSrcP¬tIdx
 ) const;

119 
Void
 
	$cÝyP¬tToCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
id
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiSrcP¬tIdx
 ) const;

122 
Void
 
	$cÝyP¬tToP¬tYuv
 ( 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
 ) const;

123 
Void
 
	$cÝyP¬tToP¬tCompÚ’t
 ( cÚ¡ 
CompÚ’tID
 
id
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
uiWidthCompÚ’t
, cÚ¡ UIÁ 
uiHeightCompÚ’t
 ) const;

126 
Void
 
	$cÝyP¬tToP¬tCompÚ’tMxN
 ( cÚ¡ 
CompÚ’tID
 
id
, 
TComYuv
* 
pcYuvD¡
, cÚ¡ 
TComReùªgË
 &
»ù
 ) const;

133 
Void
 
	`addCl
 ( cÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
uiTrUn™Idx
, cÚ¡ UIÁ 
uiP¬tSize
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 );

136 
Void
 
	`subŒaù
 ( cÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
uiTrUn™Idx
, cÚ¡ UIÁ 
uiP¬tSize
 );

139 
Void
 
	`addAvg
 ( cÚ¡ 
TComYuv
* 
pcYuvSrc0
, cÚ¡ TComYuv* 
pcYuvSrc1
, cÚ¡ 
UIÁ
 
iP¬tUn™Idx
, cÚ¡ UIÁ 
iWidth
, cÚ¡ UIÁ 
iHeight
, cÚ¡ 
B™D•ths
 &
þB™D•ths
 );

141 
Void
 
	`»moveHighF»q
 ( cÚ¡ 
TComYuv
* 
pcYuvSrc
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight


142 , cÚ¡ 
IÁ
 
b™D•ths
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ 
BoÞ
 
bClToB™D•ths


150 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
è{  
m_­iBuf
[id]; }

151 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_­iBuf
[id]; 
	}
}

154 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
)

156 
IÁ
 
blkX
 = 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tUn™Idx
 ] ] >> 
	`g‘CompÚ’tSÿËX
(
id
);

157 
IÁ
 
blkY
 = 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tUn™Idx
 ] ] >> 
	`g‘CompÚ’tSÿËY
(
id
);

158 
	`as£¹
((
blkX
<
	`g‘Width
(
id
è&& 
blkY
<
	`g‘Height
(id)));

159  
m_­iBuf
[
id
] + 
blkX
 + 
blkY
 * 
	`g‘SŒide
(id);

160 
	}
}

161 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
uiP¬tUn™Idx
) const

163 
IÁ
 
blkX
 = 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tUn™Idx
 ] ] >> 
	`g‘CompÚ’tSÿËX
(
id
);

164 
IÁ
 
blkY
 = 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[ 
uiP¬tUn™Idx
 ] ] >> 
	`g‘CompÚ’tSÿËY
(
id
);

165 
	`as£¹
((
blkX
<
	`g‘Width
(
id
è&& 
blkY
<
	`g‘Height
(id)));

166  
m_­iBuf
[
id
] + 
blkX
 + 
blkY
 * 
	`g‘SŒide
(id);

167 
	}
}

170 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
iT¿nsUn™Idx
, cÚ¡ UIÁ 
iBlkSizeFÜCompÚ’t
)

172 
UIÁ
 
width
=
	`g‘Width
(
id
);

173 
IÁ
 
blkX
 = ( 
iT¿nsUn™Idx
 * 
iBlkSizeFÜCompÚ’t
 ) & ( 
width
 - 1 );

174 
IÁ
 
blkY
 = ( 
iT¿nsUn™Idx
 * 
iBlkSizeFÜCompÚ’t
 ) &~ ( 
width
 - 1 );

175 ià(
m_chromaFÜm©IDC
==
CHROMA_422
 && 
id
!=
COMPONENT_Y
)

177 
blkY
<<=1;

179  
m_­iBuf
[
id
] + 
blkX
 + 
blkY
 * 
iBlkSizeFÜCompÚ’t
;

180 
	}
}

182 cÚ¡ 
P–
* 
	$g‘Addr
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
iT¿nsUn™Idx
, cÚ¡ UIÁ 
iBlkSizeFÜCompÚ’t
) const

184 
UIÁ
 
width
=
	`g‘Width
(
id
);

185 
IÁ
 
blkX
 = ( 
iT¿nsUn™Idx
 * 
iBlkSizeFÜCompÚ’t
 ) & ( 
width
 - 1 );

186 
IÁ
 
blkY
 = ( 
iT¿nsUn™Idx
 * 
iBlkSizeFÜCompÚ’t
 ) &~ ( 
width
 - 1 );

187 ià(
m_chromaFÜm©IDC
==
CHROMA_422
 && 
id
!=
COMPONENT_Y
)

189 
blkY
<<=1;

191  
m_­iBuf
[
id
] + 
blkX
 + 
blkY
 * 
iBlkSizeFÜCompÚ’t
;

192 
	}
}

195 
P–
* 
	$g‘AddrPix
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
iPixX
, cÚ¡ UIÁ 
iPixY
 ) {  
m_­iBuf
[id] + iPixY * 
	`g‘SŒide
(idè+ iPixX; 
	}
}

196 cÚ¡ 
P–
* 
	$g‘AddrPix
 (cÚ¡ 
CompÚ’tID
 
id
, cÚ¡ 
UIÁ
 
iPixX
, cÚ¡ UIÁ 
iPixY
 ) cÚ¡ {  
m_­iBuf
[id] + iPixY * 
	`g‘SŒide
(idè+ iPixX; 
	}
}

199 
UIÁ
 
	$g‘SŒide
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_iWidth
 >> 
	`g‘CompÚ’tSÿËX
(id); 
	}
}

200 
UIÁ
 
	$g‘Height
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_iHeight
 >> 
	`g‘CompÚ’tSÿËY
(id); 
	}
}

201 
UIÁ
 
	$g‘Width
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_iWidth
 >> 
	`g‘CompÚ’tSÿËX
(id); 
	}
}

202 
ChromaFÜm©
 
	$g‘ChromaFÜm©
 (ècÚ¡ {  
m_chromaFÜm©IDC
; 
	}
}

203 
UIÁ
 
	$g‘Numb”V®idCompÚ’ts
 (ècÚ¡ {  ::
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
); 
	}
}

204 
UIÁ
 
	$g‘CompÚ’tSÿËX
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ::
	`g‘CompÚ’tSÿËX
(id, 
m_chromaFÜm©IDC
); 
	}
}

205 
UIÁ
 
	$g‘CompÚ’tSÿËY
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  ::
	`g‘CompÚ’tSÿËY
(id, 
m_chromaFÜm©IDC
); 
	}
}

	@source/Lib/TLibCommon/TypeDef.h

38 #iâdeà
__TYPEDEF__


39 
	#__TYPEDEF__


	)

41 #iâdeà
__COMMONDEF__


42 #”rÜ 
Inþude
 
CommÚDef
.
h
 
nÙ
 
Ty³Def
.h

45 
	~<veùÜ
>

46 
	~<utž™y
>

47 
	~<io¡»am
>

56 
	#DEBUG_STRING
 0

57 
	#DEBUG_ENCODER_SEARCH_BINS
 0

58 
	#DEBUG_CABAC_BINS
 0

59 
	#DEBUG_INTRA_SEARCH_COSTS
 0

60 
	#DEBUG_TRANSFORM_AND_QUANTISE
 0

61 

	)

62 
	#ENVIRONMENT_VARIABLE_DEBUG_AND_TEST
 0

63 
	#PRINT_MACRO_VALUES
 1

64 

	)

67 #iâdeà
RExt__DECODER_DEBUG_BIT_STATISTICS


68 
	#RExt__DECODER_DEBUG_BIT_STATISTICS
 0

70 

	)

72 #iâdeà
ENC_DEC_TRACE


73 
	#ENC_DEC_TRACE
 0

	)

75 
	#DEC_NUH_TRACE
 0

76 

	)

77 
	#PRINT_RPS_INFO
 0

78 

	)

79 
	#MCTS_EXTRACTION
 1

80 

	)

85 
	#JVET_K0390_RATE_CTRL
 1

	)

86 #ià
JVET_K0390_RATE_CTRL


87 
	#JVET_M0600_RATE_CTRL
 1

	)

89 
	#DECODER_CHECK_SUBSTREAM_AND_SLICE_TRAILING_BYTES
 1

90 
	#MCTS_ENC_CHECK
 1

91 
	#SHUTTER_INTERVAL_SEI_MESSAGE
 1

92 
	#SEI_ENCODER_CONTROL
 1

93 
	#DPB_ENCODER_USAGE_CHECK
 1

94 
	#FGS_RDD5_ENABLE
 1

95 

	)

102 #iâdeà
EXTENSION_360_VIDEO


103 
	#EXTENSION_360_VIDEO
 0

105 

	)

106 
	#REDUCED_ENCODER_MEMORY
 1

107 

	)

108 
	#ADAPTIVE_QP_SELECTION
 1

109 

	)

110 
	#AMP_ENC_SPEEDUP
 1

111 #ià
AMP_ENC_SPEEDUP


	)

112 
	#AMP_MRG
 1

114 

	)

115 
	#FAST_BIT_EST
 1

116 

	)

117 
	#HHI_RQT_INTRA_SPEEDUP
 1

118 
	#HHI_RQT_INTRA_SPEEDUP_MOD
 0

119 

	)

120 #ià
HHI_RQT_INTRA_SPEEDUP_MOD
 && !
HHI_RQT_INTRA_SPEEDUP


124 
	#MATRIX_MULT
 0

125 

	)

126 
	#O0043_BEST_EFFORT_DECODING
 0

127 

	)

128 
	#ME_ENABLE_ROUNDING_OF_MVS
 1

129 

	)

130 
	#RDOQ_CHROMA_LAMBDA
 1

131 

	)

133 #iâdeà
RExt__HIGH_BIT_DEPTH_SUPPORT


134 
	#RExt__HIGH_BIT_DEPTH_SUPPORT
 0

136 

	)

137 #ià
defšed
 
__SSE2__
 || defšed 
__AVX2__
 || defšed 
__AVX__
 || defšed 
_M_AMD64
 || defšed 
_M_X64


138 
	#VECTOR_CODING__INTERPOLATION_FILTER
 1

139 
	#VECTOR_CODING__DISTORTION_CALCULATIONS
 1

140 #–£

	)

141 
	#VECTOR_CODING__INTERPOLATION_FILTER
 0

142 
	#VECTOR_CODING__DISTORTION_CALCULATIONS
 0

144 

	)

149 #ià
RExt__HIGH_BIT_DEPTH_SUPPORT


150 
	#FULL_NBIT
 1

151 
	#RExt__HIGH_PRECISION_FORWARD_TRANSFORM
 1

152 #–£

	)

153 
	#FULL_NBIT
 1

154 
	#RExt__HIGH_PRECISION_FORWARD_TRANSFORM
 0

156 

	)

157 #ià
FULL_NBIT


158 
	#DISTORTION_PRECISION_ADJUSTMENT
(
x
è0

	)

160 
	#DISTORTION_PRECISION_ADJUSTMENT
(
x
è(x)

	)

163 #ià
DEBUG_STRING


164 
	#DEBUG_STRING_PASS_INTO
(
Çme
è, 
	)
name

165 
	#DEBUG_STRING_PASS_INTO_OPTIONAL
(
Çme
, 
exp
è, (exp==0)?0:
	)
name

166 
	#DEBUG_STRING_FN_DECLARE
(
Çme
è, 
¡d
::
¡ršg
 &
	)
name

167 
	#DEBUG_STRING_FN_DECLAREP
(
Çme
è, 
¡d
::
¡ršg
 *
	)
name

168 
	#DEBUG_STRING_NEW
(
Çme
è
¡d
::
¡ršg
‚ame;

	)

169 
	#DEBUG_STRING_OUTPUT
(
os
, 
Çme
èo <<‚ame;

	)

170 
	#DEBUG_STRING_APPEND
(
¡r1
, 
¡r2
è¡r1+=¡r2;

	)

171 
	#DEBUG_STRING_SWAP
(
¡r1
, 
¡r2
è¡r1.
	`sw­
(¡r2);

	)

172 
	#DEBUG_STRING_CHANNEL_CONDITION
(
compID
è(
Œue
)

	)

173 
	~<s¡»am
>

174 
	~<iomª
>

176 
	#DEBUG_STRING_PASS_INTO
(
Çme
)

	)

177 
	#DEBUG_STRING_PASS_INTO_OPTIONAL
(
Çme
, 
exp
)

	)

178 
	#DEBUG_STRING_FN_DECLARE
(
Çme
)

	)

179 
	#DEBUG_STRING_FN_DECLAREP
(
Çme
)

	)

180 
	#DEBUG_STRING_NEW
(
Çme
)

	)

181 
	#DEBUG_STRING_OUTPUT
(
os
, 
Çme
)

	)

182 
	#DEBUG_STRING_APPEND
(
¡r1
, 
¡r2
)

	)

183 
	#DEBUG_STRING_SWAP
(
¤t1
, 
¡r2
)

	)

184 
	#DEBUG_STRING_CHANNEL_CONDITION
(
compID
)

	)

191 #ià((
RExt__HIGH_PRECISION_FORWARD_TRANSFORM
 !ð0è&& (
RExt__HIGH_BIT_DEPTH_SUPPORT
 == 0))

192 #”rÜ 
ERROR
: 
ÿÂÙ
 
’abË
 
RExt__HIGH_PRECISION_FORWARD_TRANSFORM
 
w™hout
 
RExt__HIGH_BIT_DEPTH_SUPPORT


199 
	tVoid
;

200 
boÞ
 
	tBoÞ
;

202 
	tTCh¬
;

203 sigÃd 
	tSCh¬
;

204 
	tUCh¬
;

205 
	tShÜt
;

206 
	tUShÜt
;

207 
	tIÁ
;

208 
	tUIÁ
;

209 
	tDoubË
;

210 
	tFlßt
;

217 #ifdeà
_MSC_VER


218 
__št64
 
	tIÁ64
;

220 #ià
_MSC_VER
 <= 1200

221 
__št64
 
	tUIÁ64
;

223 
	t__št64
 
	tUIÁ64
;

228 
	tIÁ64
;

229 
	tUIÁ64
;

237 #ià
RExt__HIGH_BIT_DEPTH_SUPPORT


238 
IÁ
 
	tP–
;

239 
IÁ64
 
	tTCÛff
;

240 
IÁ
 
	tTM©rixCÛff
;

241 
ShÜt
 
	tTFž‹rCÛff
;

242 
IÁ64
 
	tIÁ”medŸ‹_IÁ
;

243 
UIÁ64
 
	tIÁ”medŸ‹_UIÁ
;

245 
ShÜt
 
	tP–
;

246 
IÁ
 
	tTCÛff
;

247 
ShÜt
 
	tTM©rixCÛff
;

248 
ShÜt
 
	tTFž‹rCÛff
;

249 
IÁ
 
	tIÁ”medŸ‹_IÁ
;

250 
UIÁ
 
	tIÁ”medŸ‹_UIÁ
;

253 #ià
FULL_NBIT


254 
UIÁ64
 
	tDi¡ÜtiÚ
;

256 
UIÁ
 
	tDi¡ÜtiÚ
;

263 
	eRDPCMMode


265 
	mRDPCM_OFF
 = 0,

266 
	mRDPCM_HOR
 = 1,

267 
	mRDPCM_VER
 = 2,

268 
	mNUMBER_OF_RDPCM_MODES
 = 3

271 
	eRDPCMSigÇÎšgMode


273 
	mRDPCM_SIGNAL_IMPLICIT
 = 0,

274 
	mRDPCM_SIGNAL_EXPLICIT
 = 1,

275 
	mNUMBER_OF_RDPCM_SIGNALLING_MODES
 = 2

279 
	eSliûTy³


281 
	mB_SLICE
 = 0,

282 
	mP_SLICE
 = 1,

283 
	mI_SLICE
 = 2,

284 
	mNUMBER_OF_SLICE_TYPES
 = 3

288 
	eChromaFÜm©


290 
	mCHROMA_400
 = 0,

291 
	mCHROMA_420
 = 1,

292 
	mCHROMA_422
 = 2,

293 
	mCHROMA_444
 = 3,

294 
	mNUM_CHROMA_FORMAT
 = 4

297 
	eChªÃlTy³


299 
	mCHANNEL_TYPE_LUMA
 = 0,

300 
	mCHANNEL_TYPE_CHROMA
 = 1,

301 
	mMAX_NUM_CHANNEL_TYPE
 = 2

304 
	eCompÚ’tID


306 
	mCOMPONENT_Y
 = 0,

307 
	mCOMPONENT_Cb
 = 1,

308 
	mCOMPONENT_Cr
 = 2,

309 
	mMAX_NUM_COMPONENT
 = 3

312 
	eIÅutCÞourS·ûCÚv”siÚ


314 
	mIPCOLOURSPACE_UNCHANGED
 = 0,

315 
	mIPCOLOURSPACE_YCbC¹oYCrCb
 = 1,

316 
	mIPCOLOURSPACE_YCbC¹oYYY
 = 2,

317 
	mIPCOLOURSPACE_RGBtoGBR
 = 3,

318 
	mNUMBER_INPUT_COLOUR_SPACE_CONVERSIONS
 = 4

321 
	eMATRIX_COEFFICIENTS


323 
	mMATRIX_COEFFICIENTS_RGB
 = 0,

324 
	mMATRIX_COEFFICIENTS_BT709
 = 1,

325 
	mMATRIX_COEFFICIENTS_UNSPECIFIED
 = 2,

326 
	mMATRIX_COEFFICIENTS_RESERVED_BY_ITUISOIEC
 = 3,

327 
	mMATRIX_COEFFICIENTS_USFCCT47
 = 4,

328 
	mMATRIX_COEFFICIENTS_BT601_625
 = 5,

329 
	mMATRIX_COEFFICIENTS_BT601_525
 = 6,

330 
	mMATRIX_COEFFICIENTS_SMPTE240
 = 7,

331 
	mMATRIX_COEFFICIENTS_YCGCO
 = 8,

332 
	mMATRIX_COEFFICIENTS_BT2020_NON_CONSTANT_LUMINANCE
 = 9,

333 
	mMATRIX_COEFFICIENTS_BT2020_CONSTANT_LUMINANCE
 = 10,

336 
	eDeblockEdgeDœ


338 
	mEDGE_VER
 = 0,

339 
	mEDGE_HOR
 = 1,

340 
	mNUM_EDGE_DIR
 = 2

344 
	eP¬tSize


346 
	mSIZE_2Nx2N
 = 0,

347 
	mSIZE_2NxN
 = 1,

348 
	mSIZE_Nx2N
 = 2,

349 
	mSIZE_NxN
 = 3,

350 
	mSIZE_2NxnU
 = 4,

351 
	mSIZE_2NxnD
 = 5,

352 
	mSIZE_nLx2N
 = 6,

353 
	mSIZE_nRx2N
 = 7,

354 
	mNUMBER_OF_PART_SIZES
 = 8

358 
	eP»dMode


360 
	mMODE_INTER
 = 0,

361 
	mMODE_INTRA
 = 1,

362 
	mNUMBER_OF_PREDICTION_MODES
 = 2,

366 
	eRefPicLi¡


368 
	mREF_PIC_LIST_0
 = 0,

369 
	mREF_PIC_LIST_1
 = 1,

370 
	mNUM_REF_PIC_LIST_01
 = 2,

371 
	mREF_PIC_LIST_X
 = 100

375 
	eDFunc


377 
	mDF_DEFAULT
 = 0,

378 
	mDF_SSE
 = 1,

379 
	mDF_SSE4
 = 2,

380 
	mDF_SSE8
 = 3,

381 
	mDF_SSE16
 = 4,

382 
	mDF_SSE32
 = 5,

383 
	mDF_SSE64
 = 6,

384 
	mDF_SSE16N
 = 7,

386 
	mDF_SAD
 = 8,

387 
	mDF_SAD4
 = 9,

388 
	mDF_SAD8
 = 10,

389 
	mDF_SAD16
 = 11,

390 
	mDF_SAD32
 = 12,

391 
	mDF_SAD64
 = 13,

392 
	mDF_SAD16N
 = 14,

394 
	mDF_SADS
 = 15,

395 
	mDF_SADS4
 = 16,

396 
	mDF_SADS8
 = 17,

397 
	mDF_SADS16
 = 18,

398 
	mDF_SADS32
 = 19,

399 
	mDF_SADS64
 = 20,

400 
	mDF_SADS16N
 = 21,

402 
	mDF_HADS
 = 22,

403 
	mDF_HADS4
 = 23,

404 
	mDF_HADS8
 = 24,

405 
	mDF_HADS16
 = 25,

406 
	mDF_HADS32
 = 26,

407 
	mDF_HADS64
 = 27,

408 
	mDF_HADS16N
 = 28,

410 
	mDF_SAD12
 = 43,

411 
	mDF_SAD24
 = 44,

412 
	mDF_SAD48
 = 45,

414 
	mDF_SADS12
 = 46,

415 
	mDF_SADS24
 = 47,

416 
	mDF_SADS48
 = 48,

418 
	mDF_SSE_FRAME
 = 50,

419 
	mDF_TOTAL_FUNCTIONS
 = 64

423 
	eCI_IDX


425 
	mCI_CURR_BEST
 = 0,

426 
	mCI_NEXT_BEST
,

427 
	mCI_TEMP_BEST
,

428 
	mCI_CHROMA_INTRA
,

429 
	mCI_QT_TRAFO_TEST
,

430 
	mCI_QT_TRAFO_ROOT
,

431 
	mCI_NUM
,

435 
	eMVP_DIR


437 
	mMD_LEFT
 = 0,

438 
	mMD_ABOVE
,

439 
	mMD_ABOVE_RIGHT
,

440 
	mMD_BELOW_LEFT
,

441 
	mMD_ABOVE_LEFT


444 
	eStÜedResidu®Ty³


446 
	mRESIDUAL_RECONSTRUCTED
 = 0,

447 
	mRESIDUAL_ENCODER_SIDE
 = 1,

448 
	mNUMBER_OF_STORED_RESIDUAL_TYPES
 = 2

451 
	eT¿nsfÜmDœeùiÚ


453 
	mTRANSFORM_FORWARD
 = 0,

454 
	mTRANSFORM_INVERSE
 = 1,

455 
	mTRANSFORM_NUMBER_OF_DIRECTIONS
 = 2

459 
	eMES—rchM‘hod


461 
	mMESEARCH_FULL
 = 0,

462 
	mMESEARCH_DIAMOND
 = 1,

463 
	mMESEARCH_SELECTIVE
 = 2,

464 
	mMESEARCH_DIAMOND_ENHANCED
 = 3,

465 
	mMESEARCH_NUMBER_OF_METHODS
 = 4

469 
	eCOEFF_SCAN_TYPE


471 
	mSCAN_DIAG
 = 0,

472 
	mSCAN_HOR
 = 1,

473 
	mSCAN_VER
 = 2,

474 
	mSCAN_NUMBER_OF_TYPES
 = 3

477 
	eCOEFF_SCAN_GROUP_TYPE


479 
	mSCAN_UNGROUPED
 = 0,

480 
	mSCAN_GROUPED_4x4
 = 1,

481 
	mSCAN_NUMBER_OF_GROUP_TYPES
 = 2

484 
	eSignifiÿnûM­CÚ‹xtTy³


486 
	mCONTEXT_TYPE_4x4
 = 0,

487 
	mCONTEXT_TYPE_8x8
 = 1,

488 
	mCONTEXT_TYPE_NxN
 = 2,

489 
	mCONTEXT_TYPE_SINGLE
 = 3,

490 
	mCONTEXT_NUMBER_OF_TYPES
 = 4

493 
	eSÿlšgLi¡Mode


495 
	mSCALING_LIST_OFF
,

496 
	mSCALING_LIST_DEFAULT
,

497 
	mSCALING_LIST_FILE_READ


500 
	eSÿlšgLi¡Size


502 
	mSCALING_LIST_4x4
 = 0,

503 
	mSCALING_LIST_8x8
,

504 
	mSCALING_LIST_16x16
,

505 
	mSCALING_LIST_32x32
,

506 
	mSCALING_LIST_SIZE_NUM


510 
	eSliûCÚ¡¿št


512 
	mNO_SLICES
 = 0,

513 
	mFIXED_NUMBER_OF_CTU
 = 1,

514 
	mFIXED_NUMBER_OF_BYTES
 = 2,

515 
	mFIXED_NUMBER_OF_TILES
 = 3,

516 
	mNUMBER_OF_SLICE_CONSTRAINT_MODES
 = 4

520 
	eHashTy³


522 
	mHASHTYPE_MD5
 = 0,

523 
	mHASHTYPE_CRC
 = 1,

524 
	mHASHTYPE_CHECKSUM
 = 2,

525 
	mHASHTYPE_NONE
 = 3,

526 
	mNUMBER_OF_HASHTYPES
 = 4

529 
	eSAOMode


531 
	mSAO_MODE_OFF
 = 0,

532 
	mSAO_MODE_NEW
,

533 
	mSAO_MODE_MERGE
,

534 
	mNUM_SAO_MODES


537 
	eSAOModeM”geTy³s


539 
	mSAO_MERGE_LEFT
 =0,

540 
	mSAO_MERGE_ABOVE
,

541 
	mNUM_SAO_MERGE_TYPES


545 
	eSAOModeNewTy³s


547 
	mSAO_TYPE_START_EO
 =0,

548 
	mSAO_TYPE_EO_0
 = 
SAO_TYPE_START_EO
,

549 
	mSAO_TYPE_EO_90
,

550 
	mSAO_TYPE_EO_135
,

551 
	mSAO_TYPE_EO_45
,

553 
	mSAO_TYPE_START_BO
,

554 
	mSAO_TYPE_BO
 = 
SAO_TYPE_START_BO
,

556 
	mNUM_SAO_NEW_TYPES


558 
	#NUM_SAO_EO_TYPES_LOG2
 2

	)

560 
	eSAOEOCÏs£s


562 
	mSAO_CLASS_EO_FULL_VALLEY
 = 0,

563 
	mSAO_CLASS_EO_HALF_VALLEY
 = 1,

564 
	mSAO_CLASS_EO_PLAIN
 = 2,

565 
	mSAO_CLASS_EO_HALF_PEAK
 = 3,

566 
	mSAO_CLASS_EO_FULL_PEAK
 = 4,

567 
	mNUM_SAO_EO_CLASSES
,

570 
	#NUM_SAO_BO_CLASSES_LOG2
 5

	)

571 
	#NUM_SAO_BO_CLASSES
 (1<<
NUM_SAO_BO_CLASSES_LOG2
)

	)

573 
Çme¥aû
 
	gProfže


575 
	eName


577 
	gNONE
 = 0,

578 
	gMAIN
 = 1,

579 
	gMAIN10
 = 2,

580 
	gMAINSTILLPICTURE
 = 3,

581 
	gMAINREXT
 = 4,

582 
	gHIGHTHROUGHPUTREXT
 = 5

586 
Çme¥aû
 
	gLev–


588 
	eT›r


590 
	gMAIN
 = 0,

591 
	gHIGH
 = 1,

592 
	gNUMBER_OF_TIERS
 = 2

595 
	eName


598 
	gNONE
 = 0,

599 
	gLEVEL1
 = 30,

600 
	gLEVEL2
 = 60,

601 
	gLEVEL2_1
 = 63,

602 
	gLEVEL3
 = 90,

603 
	gLEVEL3_1
 = 93,

604 
	gLEVEL4
 = 120,

605 
	gLEVEL4_1
 = 123,

606 
	gLEVEL5
 = 150,

607 
	gLEVEL5_1
 = 153,

608 
	gLEVEL5_2
 = 156,

609 
	gLEVEL6
 = 180,

610 
	gLEVEL6_1
 = 183,

611 
	gLEVEL6_2
 = 186,

612 
	gLEVEL8_5
 = 255,

616 
	eCo¡Mode


618 
	mCOST_STANDARD_LOSSY
 = 0,

619 
	mCOST_SEQUENCE_LEVEL_LOSSLESS
 = 1,

620 
	mCOST_LOSSLESS_CODING
 = 2,

621 
	mCOST_MIXED_LOSSLESS_LOSSY_CODING
 = 3

624 
	eWeigh‹dP»diùiÚM‘hod


626 
	mWP_PER_PICTURE_WITH_SIMPLE_DC_COMBINED_COMPONENT
 =0,

627 
	mWP_PER_PICTURE_WITH_SIMPLE_DC_PER_COMPONENT
 =1,

628 
	mWP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT
 =2,

629 
	mWP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING
 =3,

630 
	mWP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING_AND_EXTENSION
=4

633 
	eFa¡IÁ”S—rchMode


635 
	mFASTINTERSEARCH_DISABLED
 = 0,

636 
	mFASTINTERSEARCH_MODE1
 = 1,

637 
	mFASTINTERSEARCH_MODE2
 = 2,

638 
	mFASTINTERSEARCH_MODE3
 = 3

641 
	eSPSEx‹nsiÚFÏgIndex


643 
	mSPS_EXT__REXT
 = 0,

646 
	mNUM_SPS_EXTENSION_FLAGS
 = 8

649 
	ePPSEx‹nsiÚFÏgIndex


651 
	mPPS_EXT__REXT
 = 0,

654 
	mNUM_PPS_EXTENSION_FLAGS
 = 8

660 
	eN®Un™Ty³


662 
	mNAL_UNIT_CODED_SLICE_TRAIL_N
 = 0,

663 
	mNAL_UNIT_CODED_SLICE_TRAIL_R
,

665 
	mNAL_UNIT_CODED_SLICE_TSA_N
,

666 
	mNAL_UNIT_CODED_SLICE_TSA_R
,

668 
	mNAL_UNIT_CODED_SLICE_STSA_N
,

669 
	mNAL_UNIT_CODED_SLICE_STSA_R
,

671 
	mNAL_UNIT_CODED_SLICE_RADL_N
,

672 
	mNAL_UNIT_CODED_SLICE_RADL_R
,

674 
	mNAL_UNIT_CODED_SLICE_RASL_N
,

675 
	mNAL_UNIT_CODED_SLICE_RASL_R
,

677 
	mNAL_UNIT_RESERVED_VCL_N10
,

678 
	mNAL_UNIT_RESERVED_VCL_R11
,

679 
	mNAL_UNIT_RESERVED_VCL_N12
,

680 
	mNAL_UNIT_RESERVED_VCL_R13
,

681 
	mNAL_UNIT_RESERVED_VCL_N14
,

682 
	mNAL_UNIT_RESERVED_VCL_R15
,

684 
	mNAL_UNIT_CODED_SLICE_BLA_W_LP
,

685 
	mNAL_UNIT_CODED_SLICE_BLA_W_RADL
,

686 
	mNAL_UNIT_CODED_SLICE_BLA_N_LP
,

687 
	mNAL_UNIT_CODED_SLICE_IDR_W_RADL
,

688 
	mNAL_UNIT_CODED_SLICE_IDR_N_LP
,

689 
	mNAL_UNIT_CODED_SLICE_CRA
,

690 
	mNAL_UNIT_RESERVED_IRAP_VCL22
,

691 
	mNAL_UNIT_RESERVED_IRAP_VCL23
,

693 
	mNAL_UNIT_RESERVED_VCL24
,

694 
	mNAL_UNIT_RESERVED_VCL25
,

695 
	mNAL_UNIT_RESERVED_VCL26
,

696 
	mNAL_UNIT_RESERVED_VCL27
,

697 
	mNAL_UNIT_RESERVED_VCL28
,

698 
	mNAL_UNIT_RESERVED_VCL29
,

699 
	mNAL_UNIT_RESERVED_VCL30
,

700 
	mNAL_UNIT_RESERVED_VCL31
,

702 
	mNAL_UNIT_VPS
,

703 
	mNAL_UNIT_SPS
,

704 
	mNAL_UNIT_PPS
,

705 
	mNAL_UNIT_ACCESS_UNIT_DELIMITER
,

706 
	mNAL_UNIT_EOS
,

707 
	mNAL_UNIT_EOB
,

708 
	mNAL_UNIT_FILLER_DATA
,

709 
	mNAL_UNIT_PREFIX_SEI
,

710 
	mNAL_UNIT_SUFFIX_SEI
,

712 
	mNAL_UNIT_RESERVED_NVCL41
,

713 
	mNAL_UNIT_RESERVED_NVCL42
,

714 
	mNAL_UNIT_RESERVED_NVCL43
,

715 
	mNAL_UNIT_RESERVED_NVCL44
,

716 
	mNAL_UNIT_RESERVED_NVCL45
,

717 
	mNAL_UNIT_RESERVED_NVCL46
,

718 
	mNAL_UNIT_RESERVED_NVCL47
,

719 
	mNAL_UNIT_UNSPECIFIED_48
,

720 
	mNAL_UNIT_UNSPECIFIED_49
,

721 
	mNAL_UNIT_UNSPECIFIED_50
,

722 
	mNAL_UNIT_UNSPECIFIED_51
,

723 
	mNAL_UNIT_UNSPECIFIED_52
,

724 
	mNAL_UNIT_UNSPECIFIED_53
,

725 
	mNAL_UNIT_UNSPECIFIED_54
,

726 
	mNAL_UNIT_UNSPECIFIED_55
,

727 
	mNAL_UNIT_UNSPECIFIED_56
,

728 
	mNAL_UNIT_UNSPECIFIED_57
,

729 
	mNAL_UNIT_UNSPECIFIED_58
,

730 
	mNAL_UNIT_UNSPECIFIED_59
,

731 
	mNAL_UNIT_UNSPECIFIED_60
,

732 
	mNAL_UNIT_UNSPECIFIED_61
,

733 
	mNAL_UNIT_UNSPECIFIED_62
,

734 
	mNAL_UNIT_UNSPECIFIED_63
,

735 
	mNAL_UNIT_INVALID
,

738 
	eLumaLev–ToDQPMode


740 
	mLUMALVL_TO_DQP_DISABLED
 = 0,

741 
	mLUMALVL_TO_DQP_AVG_METHOD
 = 1,

742 
	mLUMALVL_TO_DQP_MAX_METHOD
 = 2,

743 
	mLUMALVL_TO_DQP_NUM_MODES
 = 3

751 
þass
 
	gTComPicSym
;

753 
	#MAX_NUM_SAO_CLASSES
 32

754 

	)

755 
	sSAOOff£t


757 
SAOMode
 
	mmodeIdc
;

758 
IÁ
 
	mty³Idc
;

759 
IÁ
 
	mty³AuxInfo
;

760 
IÁ
 
	moff£t
[
MAX_NUM_SAO_CLASSES
];

762 
SAOOff£t
();

763 ~
SAOOff£t
();

764 
Void
 
»£t
();

766 cÚ¡ 
	mSAOOff£t
& 
	mÝ”©Ü
ð(cÚ¡ 
SAOOff£t
& 
¤c
);

769 
	sSAOBlkP¬am


772 
SAOBlkP¬am
();

773 ~
SAOBlkP¬am
();

774 
Void
 
»£t
();

775 cÚ¡ 
	mSAOBlkP¬am
& 
	mÝ”©Ü
ð(cÚ¡ 
SAOBlkP¬am
& 
¤c
);

776 
	mSAOOff£t
& 
	mÝ”©Ü
[](
IÁ
 
	mcompIdx
){  
	moff£tP¬am
[
compIdx
];}

777 
	m´iv©e
:

778 
SAOOff£t
 
off£tP¬am
[
MAX_NUM_COMPONENT
];

783 
	sB™D•ths


785 #ià
O0043_BEST_EFFORT_DECODING


786 
IÁ
 
	m»cÚ
[
MAX_NUM_CHANNEL_TYPE
];

787 
IÁ
 
	m¡»am
[
MAX_NUM_CHANNEL_TYPE
];

789 
IÁ
 
	m»cÚ
[
MAX_NUM_CHANNEL_TYPE
];

794 
	s_LFCUP¬am


796 
BoÞ
 
	mbIÁ”ÇlEdge
;

797 
BoÞ
 
	mbLeáEdge
;

798 
BoÞ
 
	mbTÝEdge
;

799 } 
	tLFCUP¬am
;

804 
	sTUEÁrÝyCodšgP¬am‘”s


806 cÚ¡ 
UIÁ
 *
	msÿn
;

807 cÚ¡ 
UIÁ
 *
	msÿnCG
;

808 
COEFF_SCAN_TYPE
 
	msÿnTy³
;

809 
UIÁ
 
	mwidthInGroups
;

810 
UIÁ
 
	mheightInGroups
;

811 
UIÁ
 
	mfœ¡SignifiÿnûM­CÚ‹xt
;

815 
	sTComPiùu»Hash


817 
	m¡d
::
veùÜ
<
UCh¬
> 
hash
;

819 
BoÞ
 
	mÝ”©Ü
==(cÚ¡ 
TComPiùu»Hash
 &
Ùh”
) const

821 ià(
Ùh”
.
hash
.
size
() != hash.size())

823  
çl£
;

825 
UIÁ
 
	mi
=0; i<UIÁ(
hash
.
size
()); i++)

827 ià(
	mÙh”
.
	mhash
[
i
] !ð
hash
[i])

829  
çl£
;

832  
	mŒue
;

835 
BoÞ
 
	mÝ”©Ü
!=(cÚ¡ 
TComPiùu»Hash
 &
Ùh”
) const

837  !(*
this
 =ð
Ùh”
);

841 
	sTComSEITimeS‘


843 
TComSEITimeS‘
(è: 
þockTimeSmpFÏg
(
çl£
),

844 
numUn™F›ldBa£dFÏg
(
çl£
),

845 
couÁšgTy³
(0),

846 
fuÎTimeSmpFÏg
(
çl£
),

847 
discÚtšu™yFÏg
(
çl£
),

848 
útDrÝ³dFÏg
(
çl£
),

849 
numb”OfF¿mes
(0),

850 
£cÚdsV®ue
(0),

851 
mšu‹sV®ue
(0),

852 
hoursV®ue
(0),

853 
£cÚdsFÏg
(
çl£
),

854 
mšu‹sFÏg
(
çl£
),

855 
hoursFÏg
(
çl£
),

856 
timeOff£tL’gth
(0),

857 
timeOff£tV®ue
(0)

859 
BoÞ
 
	mþockTimeSmpFÏg
;

860 
BoÞ
 
	mnumUn™F›ldBa£dFÏg
;

861 
IÁ
 
	mcouÁšgTy³
;

862 
BoÞ
 
	mfuÎTimeSmpFÏg
;

863 
BoÞ
 
	mdiscÚtšu™yFÏg
;

864 
BoÞ
 
	mútDrÝ³dFÏg
;

865 
IÁ
 
	mnumb”OfF¿mes
;

866 
IÁ
 
	m£cÚdsV®ue
;

867 
IÁ
 
	mmšu‹sV®ue
;

868 
IÁ
 
	mhoursV®ue
;

869 
BoÞ
 
	m£cÚdsFÏg
;

870 
BoÞ
 
	mmšu‹sFÏg
;

871 
BoÞ
 
	mhoursFÏg
;

872 
IÁ
 
	mtimeOff£tL’gth
;

873 
IÁ
 
	mtimeOff£tV®ue
;

876 
	sTComSEIMa¡”šgDi¥Ïy


878 
BoÞ
 
	mcÞourVÞumeSEIEÇbËd
;

879 
UIÁ
 
	mmaxLumšªû
;

880 
UIÁ
 
	mmšLumšªû
;

881 
UShÜt
 
	m´im¬›s
[3][2];

882 
UShÜt
 
	mwh™ePošt
[2];

885 
	sLumaLev–ToD–QPM­pšg


887 
LumaLev–ToDQPMode
 
	mmode
;

888 
DoubË
 
	mmaxM‘hodWeight
;

889 
	m¡d
::
veùÜ
< 
¡d
::
·œ
<
IÁ
, 
	mIÁ
> > 
	mm­pšg
;

890 
BoÞ
 
isEÇbËd
(ècÚ¡ {  
	mmode
!=
LUMALVL_TO_DQP_DISABLED
; }

893 
	sWCGChromaQPCÚŒÞ


895 
BoÞ
 
isEÇbËd
(ècÚ¡ {  
	m’abËd
; }

896 
BoÞ
 
	m’abËd
;

897 
DoubË
 
	mchromaCbQpSÿË
;

898 
DoubË
 
	mchromaCrQpSÿË
;

899 
DoubË
 
	mchromaQpSÿË
;

900 
DoubË
 
	mchromaQpOff£t
;

903 
	sTComSEIFisheyeVideoInfo


905 
	sAùiveA»aInfo


907 
UIÁ
 
	mm_fisheyeCœcuÏrRegiÚC’ŒeX
;

908 
UIÁ
 
	mm_fisheyeCœcuÏrRegiÚC’ŒeY
;

909 
UIÁ
 
	mm_fisheyeReùRegiÚTÝ
;

910 
UIÁ
 
	mm_fisheyeReùRegiÚLeá
;

911 
UIÁ
 
	mm_fisheyeReùRegiÚWidth
;

912 
UIÁ
 
	mm_fisheyeReùRegiÚHeight
;

913 
UIÁ
 
	mm_fisheyeCœcuÏrRegiÚRadius
;

914 
UIÁ
 
	mm_fisheyeSûÃRadius
;

916 
IÁ
 
	mm_fisheyeCam”aC’ŒeAzimuth
;

917 
IÁ
 
	mm_fisheyeCam”aC’ŒeEËv©iÚ
;

918 
IÁ
 
	mm_fisheyeCam”aC’ŒeTžt
;

919 
UIÁ
 
	mm_fisheyeCam”aC’ŒeOff£tX
;

920 
UIÁ
 
	mm_fisheyeCam”aC’ŒeOff£tY
;

921 
UIÁ
 
	mm_fisheyeCam”aC’ŒeOff£tZ
;

922 
UIÁ
 
	mm_fisheyeF›ldOfV›w
;

923 
	m¡d
::
veùÜ
<
IÁ
> 
m_fisheyePÞynomŸlCÛff
;

926 
BoÞ
 
	mm_fisheyeCªûlFÏg
;

927 
BoÞ
 
	mm_fisheyeP”si¡’ûFÏg
;

928 
UIÁ
 
	mm_fisheyeV›wDim’siÚIdc
;

929 
	m¡d
::
veùÜ
<
AùiveA»aInfo
> 
m_fisheyeAùiveA»as
;

930 
TComSEIFisheyeVideoInfo
(è: 
m_fisheyeCªûlFÏg
(
çl£
), 
m_fisheyeP”si¡’ûFÏg
(çl£), 
m_fisheyeV›wDim’siÚIdc
(0), 
m_fisheyeAùiveA»as
() { }

933 þas 
	cWšdow


935 
	m´iv©e
:

936 
BoÞ
 
m_’abËdFÏg
;

937 
IÁ
 
	mm_wšLeáOff£t
;

938 
IÁ
 
	mm_wšRightOff£t
;

939 
IÁ
 
	mm_wšTÝOff£t
;

940 
IÁ
 
	mm_wšBÙtomOff£t
;

941 
	mpublic
:

942 
	$Wšdow
()

943 : 
	`m_’abËdFÏg
 (
çl£
)

944 , 
	`m_wšLeáOff£t
 (0)

945 , 
	`m_wšRightOff£t
 (0)

946 , 
	`m_wšTÝOff£t
 (0)

947 , 
	$m_wšBÙtomOff£t
(0)

950 
BoÞ
 
	$g‘WšdowEÇbËdFÏg
(ècÚ¡ {  
m_’abËdFÏg
; 
	}
}

951 
IÁ
 
	$g‘WšdowLeáOff£t
(ècÚ¡ {  
m_’abËdFÏg
 ? 
m_wšLeáOff£t
 : 0; 
	}
}

952 
Void
 
	$£tWšdowLeáOff£t
(
IÁ
 
v®
è{ 
m_wšLeáOff£t
 = v®; 
m_’abËdFÏg
 = 
Œue
; 
	}
}

953 
IÁ
 
	$g‘WšdowRightOff£t
(ècÚ¡ {  
m_’abËdFÏg
 ? 
m_wšRightOff£t
 : 0; 
	}
}

954 
Void
 
	$£tWšdowRightOff£t
(
IÁ
 
v®
è{ 
m_wšRightOff£t
 = v®; 
m_’abËdFÏg
 = 
Œue
; 
	}
}

955 
IÁ
 
	$g‘WšdowTÝOff£t
(ècÚ¡ {  
m_’abËdFÏg
 ? 
m_wšTÝOff£t
 : 0; 
	}
}

956 
Void
 
	$£tWšdowTÝOff£t
(
IÁ
 
v®
è{ 
m_wšTÝOff£t
 = v®; 
m_’abËdFÏg
 = 
Œue
; 
	}
}

957 
IÁ
 
	$g‘WšdowBÙtomOff£t
(ècÚ¡ {  
m_’abËdFÏg
 ? 
m_wšBÙtomOff£t
: 0; 
	}
}

958 
Void
 
	$£tWšdowBÙtomOff£t
(
IÁ
 
v®
è{ 
m_wšBÙtomOff£t
 = v®; 
m_’abËdFÏg
 = 
Œue
; 
	}
}

960 
Void
 
	$£tWšdow
(
IÁ
 
off£tLeá
, IÁ 
off£tLRight
, IÁ 
off£tLTÝ
, IÁ 
off£tLBÙtom
)

962 
m_’abËdFÏg
 = 
Œue
;

963 
m_wšLeáOff£t
 = 
off£tLeá
;

964 
m_wšRightOff£t
 = 
off£tLRight
;

965 
m_wšTÝOff£t
 = 
off£tLTÝ
;

966 
m_wšBÙtomOff£t
 = 
off£tLBÙtom
;

967 
	}
}

968 
BoÞ
 
	gÝ”©Ü
 =ð(cÚ¡ 
Wšdow
 &
rhs
) const

970  ( 
m_’abËdFÏg
 && 
rhs
.m_enabledFlag &&

971 
m_wšLeáOff£t
 =ð
rhs
.m_winLeftOffset &&

972 
m_wšRightOff£t
 =ð
rhs
.m_winRightOffset &&

973 
m_wšTÝOff£t
 =ð
rhs
.m_winTopOffset &&

974 
m_wšBÙtomOff£t
 =ð
rhs
.m_winBottomOffset

979 þas 
	cRNSEIWšdow
 : 
public
 
Wšdow


981 
´iv©e
:

982 
UIÁ
 
m_»giÚId
;

983 
	mpublic
:

984 
	$RNSEIWšdow
(è: 
	`Wšdow
(), 
	$m_»giÚId
(0) {}

985 
IÁ
 
	$g‘RegiÚId
(ècÚ¡ {  
	`g‘WšdowEÇbËdFÏg
(è? 
m_»giÚId
 : 0; 
	}
}

986 
Void
 
	$£tRegiÚId
(
UIÁ
 cÚ¡ 
v®
è{ 
m_»giÚId
 = v®; 
	}
}

988 
BoÞ
 
	gÝ”©Ü
 =ð(
RNSEIWšdow
 cÚ¡ &
rhs
) const

990  ( (
m_»giÚId
 =ð
rhs
.m_regionId) &&

991 
Wšdow
(*
this
è=ðWšdow(
rhs
) );

994 
BoÞ
 
	$checkSameRegiÚ
(
RNSEIWšdow
 cÚ¡ &
rhs
) const

996  ( 
	`Wšdow
(*
this
è=ðWšdow(
rhs
) );

997 
	}
}

998 
BoÞ
 
	$checkSameID
(
RNSEIWšdow
 cÚ¡ &
rhs
) const

1000  ( 
m_»giÚId
 =ð
rhs
.m_regionId );

1001 
	}
}

1002 
ä›nd
 
	g¡d
::
o¡»am
& 
Ý”©Ü
<<(
¡d
::o¡»am &
os
, 
RNSEIWšdow
 cÚ¡ &
	g»giÚ
);

1004 
	g¡d
::
	tveùÜ
<
	tRNSEIWšdow
> 
	tRNSEIWšdowVec
;

	@source/Lib/TLibDecoder/AnnexBread.cpp

40 
	~<¡dšt.h
>

41 
	~<ÿs£¹
>

42 
	~<veùÜ
>

43 
	~"AÂexB»ad.h
"

44 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


45 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

48 
usšg
 
Çme¥aû
 
	g¡d
;

61 
Void


62 
_by‹SŒ—mNALUn™
(

63 
IÅutBy‹SŒ—m
& 
bs
,

64 
veùÜ
<
ušt8_t
>& 
ÇlUn™
,

65 
AÂexBSts
& 
¡©s
)

75 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


76 
	gTComCodšgSti¡ics
::
SSt
 &
¡©B™s
=
TComCodšgSti¡ics
::
G‘Sti¡icEP
(
STATS__NAL_UNIT_PACKING
);

78 (
	gbs
.
eofBefÜeNBy‹s
(24/8è|| bs.
³ekBy‹s
(24/8) != 0x000001)

79 && (
bs
.
eofBefÜeNBy‹s
(32/8è|| bs.
³ekBy‹s
(32/8) != 0x00000001))

81 
ušt8_t
 
Ëadšg_z”o_8b™s
 = 
bs
.
»adBy‹
();

82 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


83 
	g¡©B™s
.
	gb™s
+=8; stB™s.
	gcouÁ
++;

85 
as£¹
(
Ëadšg_z”o_8b™s
 == 0);

86 
	g¡©s
.
	gm_numL—dšgZ”o8B™sBy‹s
++;

97 ià(
	gbs
.
³ekBy‹s
(24/8) != 0x000001)

99 
ušt8_t
 
z”o_by‹
 = 
bs
.
»adBy‹
();

100 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


101 
	g¡©B™s
.
	gb™s
+=8; stB™s.
	gcouÁ
++;

103 
as£¹
(
z”o_by‹
 == 0);

104 
	g¡©s
.
	gm_numZ”oBy‹By‹s
++;

113 
ušt32_t
 
	g¡¬t_code_´efix_Úe_3by‹s
 = 
bs
.
»adBy‹s
(24/8);

114 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


115 
	g¡©B™s
.
	gb™s
+=24; stB™s.
	gcouÁ
+=3;

117 
as£¹
(
¡¬t_code_´efix_Úe_3by‹s
 == 0x000001);

118 
	g¡©s
.
	gm_numS¹CodeP»fixBy‹s
 += 3;

134 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


135 
	gTComCodšgSti¡ics
::
SSt
 &
bodySts
=
TComCodšgSti¡ics
::
G‘Sti¡icEP
(
STATS__NAL_UNIT_TOTAL_BODY
);

137 
	gbs
.
eofBefÜeNBy‹s
(24/8è|| bs.
³ekBy‹s
(24/8) > 2)

139 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


140 
ušt8_t
 
	gtheby‹
=
bs
.
»adBy‹
();
	gbodySts
.
	gb™s
+=8;bodySts.
	gcouÁ
++;

141 
	gÇlUn™
.
push_back
(
theby‹
);

143 
	gÇlUn™
.
push_back
(
bs
.
»adBy‹
());

162 (
	gbs
.
eofBefÜeNBy‹s
(24/8è|| bs.
³ekBy‹s
(24/8) != 0x000001)

163 && (
bs
.
eofBefÜeNBy‹s
(32/8è|| bs.
³ekBy‹s
(32/8) != 0x00000001))

165 
ušt8_t
 
Œažšg_z”o_8b™s
 = 
bs
.
»adBy‹
();

166 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


167 
	g¡©B™s
.
	gb™s
+=8; stB™s.
	gcouÁ
++;

169 
as£¹
(
Œažšg_z”o_8b™s
 == 0);

170 
	g¡©s
.
	gm_numT¿žšgZ”o8B™sBy‹s
++;

181 
BoÞ


182 
by‹SŒ—mNALUn™
(

183 
IÅutBy‹SŒ—m
& 
bs
,

184 
veùÜ
<
ušt8_t
>& 
ÇlUn™
,

185 
AÂexBSts
& 
¡©s
)

187 
BoÞ
 
	geof
 = 
çl£
;

188 
	gŒy


190 
_by‹SŒ—mNALUn™
(
bs
, 
ÇlUn™
, 
¡©s
);

192 
ÿtch
 (...)

194 
	geof
 = 
Œue
;

196 
	g¡©s
.
	gm_numBy‹sInNALUn™
 = 
UIÁ
(
ÇlUn™
.
size
());

197  
	geof
;

	@source/Lib/TLibDecoder/AnnexBread.h

39 #´agm¨
Úû


41 #iâdeà
__ANNEXBREAD__


42 
	#__ANNEXBREAD__


	)

44 
	~<¡dšt.h
>

45 
	~<i¡»am
>

46 
	~<veùÜ
>

48 
	~"TLibCommÚ/CommÚDef.h
"

53 þas 
	cIÅutBy‹SŒ—m


55 
	mpublic
:

65 
	$IÅutBy‹SŒ—m
(
¡d
::
i¡»am
& istream)

66 : 
	`m_NumFutu»By‹s
(0)

67 , 
	`m_Futu»By‹s
(0)

68 , 
	$m_IÅut
(
i¡»am
)

70 
i¡»am
.
	`exû±iÚs
(
¡d
::i¡»am::
eofb™
 | std::i¡»am::
badb™
);

77 
Void
 
	$»£t
()

79 
m_NumFutu»By‹s
 = 0;

80 
m_Futu»By‹s
 = 0;

81 
	}
}

87 
BoÞ
 
	$eofBefÜeNBy‹s
(
UIÁ
 
n
)

89 
	`as£¹
(
n
 <= 4);

90 ià(
m_NumFutu»By‹s
 >ð
n
)

92  
çl£
;

95 
n
 -ð
m_NumFutu»By‹s
;

96 
Œy


98 
UIÁ
 
i
 = 0; i < 
n
; i++)

100 
m_Futu»By‹s
 = (m_Futu»By‹ << 8è| 
m_IÅut
.
	`g‘
();

101 
m_NumFutu»By‹s
++;

104 
	`ÿtch
 (...)

106  
Œue
;

108  
çl£
;

109 
	}
}

123 
ušt32_t
 
	$³ekBy‹s
(
UIÁ
 
n
)

125 
	`eofBefÜeNBy‹s
(
n
);

126  
m_Futu»By‹s
 >> 8*(
m_NumFutu»By‹s
 - 
n
);

127 
	}
}

135 
ušt8_t
 
	$»adBy‹
()

137 ià(!
m_NumFutu»By‹s
)

139 
ušt8_t
 
by‹
 = 
m_IÅut
.
	`g‘
();

140  
by‹
;

142 
m_NumFutu»By‹s
--;

143 
ušt8_t
 
wª‹d_by‹
 = 
m_Futu»By‹s
 >> 8*
m_NumFutu»By‹s
;

144 
m_Futu»By‹s
 &ð~(0xfà<< 8*
m_NumFutu»By‹s
);

145  
wª‹d_by‹
;

146 
	}
}

153 
ušt32_t
 
	$»adBy‹s
(
UIÁ
 
n
)

155 
ušt32_t
 
v®
 = 0;

156 
UIÁ
 
i
 = 0; i < 
n
; i++)

158 
v®
 = (v® << 8è| 
	`»adBy‹
();

160  
v®
;

161 
	}
}

163 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


164 
UIÁ
 
	$G‘NumBufã»dBy‹s
(ècÚ¡ {  
m_NumFutu»By‹s
; 
	}
}

167 
	g´iv©e
:

168 
UIÁ
 
m_NumFutu»By‹s
;

169 
ušt32_t
 
	gm_Futu»By‹s
;

170 
	g¡d
::
i¡»am
& 
m_IÅut
;

176 
	sAÂexBSts


178 
UIÁ
 
	mm_numL—dšgZ”o8B™sBy‹s
;

179 
UIÁ
 
	mm_numZ”oBy‹By‹s
;

180 
UIÁ
 
	mm_numS¹CodeP»fixBy‹s
;

181 
UIÁ
 
	mm_numBy‹sInNALUn™
;

182 
UIÁ
 
	mm_numT¿žšgZ”o8B™sBy‹s
;

184 
	mAÂexBSts
& 
	mÝ”©Ü
+=(cÚ¡ 
AÂexBSts
& 
rhs
)

186 
this
->
m_numL—dšgZ”o8B™sBy‹s
 +ð
rhs
.m_numLeadingZero8BitsBytes;

187 
	mthis
->
	mm_numZ”oBy‹By‹s
 +ð
rhs
.
m_numZ”oBy‹By‹s
;

188 
	mthis
->
	mm_numS¹CodeP»fixBy‹s
 +ð
rhs
.
m_numS¹CodeP»fixBy‹s
;

189 
	mthis
->
	mm_numBy‹sInNALUn™
 +ð
rhs
.
m_numBy‹sInNALUn™
;

190 
	mthis
->
	mm_numT¿žšgZ”o8B™sBy‹s
 +ð
rhs
.
m_numT¿žšgZ”o8B™sBy‹s
;

191  *
	mthis
;

195 
BoÞ
 
by‹SŒ—mNALUn™
(
IÅutBy‹SŒ—m
& 
bs
, 
¡d
::
veùÜ
<
ušt8_t
>& 
ÇlUn™
, 
AÂexBSts
& 
¡©s
);

	@source/Lib/TLibDecoder/NALread.cpp

40 
	~<veùÜ
>

41 
	~<®gÜ™hm
>

42 
	~<o¡»am
>

44 
	~"NAL»ad.h
"

45 
	~"TLibCommÚ/NAL.h
"

46 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


48 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

50 #ià
ENC_DEC_TRACE
 && 
DEC_NUH_TRACE


51 
	~"TLibCommÚ/TComRom.h
"

54 
usšg
 
Çme¥aû
 
	g¡d
;

58 
Void
 
cÚv”tPaylßdToRBSP
(
veùÜ
<
ušt8_t
>& 
ÇlUn™Buf
, 
TComIÅutB™¡»am
 *
b™¡»am
, 
BoÞ
 
isVþN®Un™
)

60 
UIÁ
 
	gz”oCouÁ
 = 0;

61 
	gveùÜ
<
	gušt8_t
>::
™”©Ü
 
™_»ad
, 
	g™_wr™e
;

63 
UIÁ
 
	gpos
 = 0;

64 
	gb™¡»am
->
þ—rEmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
();

65 
	g™_»ad
 = 
™_wr™e
 = 
ÇlUn™Buf
.
begš
(); it_»ad !ðÇlUn™Buf.
’d
(); it_»ad++, 
	g™_wr™e
++, 
	gpos
++)

67 
as£¹
(
z”oCouÁ
 < 2 || *
™_»ad
 >= 0x03);

68 ià(
	gz”oCouÁ
 =ð2 && *
™_»ad
 == 0x03)

70 
b™¡»am
->
pushEmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
Ð
pos
 );

71 
	gpos
++;

72 
	g™_»ad
++;

73 
	gz”oCouÁ
 = 0;

74 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


75 
	gTComCodšgSti¡ics
::
Inüem’tSti¡icEP
(
STATS__EMULATION_PREVENTION_3_BYTES
, 8, 0);

77 ià(
	g™_»ad
 =ð
ÇlUn™Buf
.
’d
())

81 
as£¹
(*
™_»ad
 <= 0x03);

83 
	gz”oCouÁ
 = (*
™_»ad
 =ð0x00è? 
z”oCouÁ
+1 : 0;

84 *
	g™_wr™e
 = *
™_»ad
;

86 
as£¹
(
z”oCouÁ
 == 0);

88 ià(
	gisVþN®Un™
)

91 
IÁ
 
	gn
 = 0;

93 
	g™_wr™e
[-1] == 0x00)

95 
™_wr™e
--;

96 
	gn
++;

99 ià(
	gn
 > 0)

101 
´štf
("\nD‘eùed %d in¡ªû oàÿbac_z”o_wÜd\n", 
n
/2);

105 
	gÇlUn™Buf
.
»size
(
™_wr™e
 - 
ÇlUn™Buf
.
begš
());

108 #ià
ENC_DEC_TRACE
 && 
DEC_NUH_TRACE


109 
	$xT¿ûN®Un™H—d”
(
IÅutNALUn™
& 
Çlu
)

111 
	`årštf
Ð
g_hT¿û
, "*********** NAL UNIT (%sè***********\n", 
	`ÇlUn™Ty³ToSŒšg
(
Çlu
.
m_ÇlUn™Ty³
) );

113 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

114 
	`årštf
Ð
g_hT¿û
, "%-50s u(%d) : %u\n", "forbidden_zero_bit", 1, 0 );

116 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

117 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %u\n", "Çl_un™_ty³", 6, 
Çlu
.
m_ÇlUn™Ty³
 );

119 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

120 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %u\n", "nuh_Ïy”_id", 6, 
Çlu
.
m_nuhLay”Id
 );

122 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

123 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %u\n", "nuh_‹mpÜ®_id_¶us1", 3, 
Çlu
.
m_‹mpÜ®Id
 + 1 );

125 
	`fæush
 ( 
g_hT¿û
 );

126 
	}
}

129 
Void
 
	$»adN®Un™H—d”
(
IÅutNALUn™
& 
Çlu
)

131 
TComIÅutB™¡»am
& 
bs
 = 
Çlu
.
	`g‘B™¡»am
();

133 
BoÞ
 
fÜbidd’_z”o_b™
 = 
bs
.
	`»ad
(1);

134 
	`as£¹
(
fÜbidd’_z”o_b™
 == 0);

135 
Çlu
.
m_ÇlUn™Ty³
 = (
N®Un™Ty³
è
bs
.
	`»ad
(6);

136 
Çlu
.
m_nuhLay”Id
 = 
bs
.
	`»ad
(6);

137 
Çlu
.
m_‹mpÜ®Id
 = 
bs
.
	`»ad
(3) - 1;

138 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


139 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
STATS__NAL_UNIT_HEADER_BITS
, 1+6+6+3, 0);

142 #ià
ENC_DEC_TRACE
 && 
DEC_NUH_TRACE


143 
	`xT¿ûN®Un™H—d”
(
Çlu
);

147 ià(
Çlu
.
m_nuhLay”Id
 == 0)

149 iàÐ
Çlu
.
m_‹mpÜ®Id
 )

151 
	`as£¹
Ð
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


152 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


153 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


154 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


155 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


156 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_CRA


157 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_VPS


158 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_SPS


159 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_EOS


160 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_EOB
 );

164 
	`as£¹
Ð
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_TSA_R


165 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_TSA_N


166 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_STSA_R


167 && 
Çlu
.
m_ÇlUn™Ty³
 !ð
NAL_UNIT_CODED_SLICE_STSA_N
 );

170 
	}
}

175 
Void
 
	$»ad
(
IÅutNALUn™
& 
Çlu
)

177 
TComIÅutB™¡»am
 &
b™¡»am
 = 
Çlu
.
	`g‘B™¡»am
();

178 
veùÜ
<
ušt8_t
>& 
ÇlUn™Buf
=
b™¡»am
.
	`g‘Fifo
();

180 
	`cÚv”tPaylßdToRBSP
(
ÇlUn™Buf
, &
b™¡»am
, (nalUnitBuf[0] & 64) == 0);

181 
b™¡»am
.
	`»£tToS¹
();

182 
	`»adN®Un™H—d”
(
Çlu
);

183 
	}
}

	@source/Lib/TLibDecoder/NALread.h

39 #´agm¨
Úû


41 #iâdeà
__NALREAD__


42 
	#__NALREAD__


	)

44 
	~"TLibCommÚ/CommÚDef.h
"

45 
	~"TLibCommÚ/TComB™SŒ—m.h
"

46 
	~"TLibCommÚ/NAL.h
"

55 þas 
	cIÅutNALUn™
 : 
public
 
NALUn™


57 
´iv©e
:

58 
TComIÅutB™¡»am
 
m_B™¡»am
;

60 
	mpublic
:

61 
	$IÅutNALUn™
(cÚ¡ 
IÅutNALUn™
 &
¤c
è: 
	`NALUn™
(¤c), 
	$m_B™¡»am
(
¤c
.
m_B™¡»am
) {};

62 
	$IÅutNALUn™
(è: 
	$m_B™¡»am
(è{
	}
};

63 
	gvœtu®
 ~
	$IÅutNALUn™
(è{ 
	}
}

64 cÚ¡ 
	gTComIÅutB™¡»am
 &
	$g‘B™¡»am
(ècÚ¡ {  
m_B™¡»am
; 
	}
}

65 
	gTComIÅutB™¡»am
 &
	$g‘B™¡»am
(è{  
m_B™¡»am
; 
	}
}

68 
Void
 
»ad
(
IÅutNALUn™
& 
Çlu
);

69 
Void
 
»adN®Un™H—d”
(
IÅutNALUn™
& 
Çlu
);

	@source/Lib/TLibDecoder/SEIread.cpp

39 
	~"TLibCommÚ/CommÚDef.h
"

40 
	~"TLibCommÚ/TComB™SŒ—m.h
"

41 
	~"TLibCommÚ/SEI.h
"

42 
	~"TLibCommÚ/TComSliû.h
"

43 
	~"SyÁaxEËm’tP¬£r.h
"

44 
	~"SEI»ad.h
"

45 
	~"TLibCommÚ/TComPicYuv.h
"

46 
	~<iomª
>

53 #ià
ENC_DEC_TRACE


54 
Void
 
	$xT¿ûSEIH—d”
()

56 
	`årštf
Ð
g_hT¿û
, "=========== SEI message ===========\n");

57 
	}
}

59 
Void
 
	$xT¿ûSEIMes§geTy³
(
SEI
::
PaylßdTy³
 
·ylßdTy³
)

61 
	`årštf
Ð
g_hT¿û
, "==========ð% SEI mes§g===========\n", 
SEI
::
	`g‘SEIMes§geSŒšg
(
·ylßdTy³
));

62 
	}
}

65 
Void
 
	gSEIR—d”
::
	$£i_»ad_scode
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
 
uiL’gth
, 
IÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

67 
	`READ_SCODE
(
uiL’gth
, 
ruiCode
, 
pSymbÞName
);

68 ià(
pOS
)

70 (*
pOS
è<< " " << 
¡d
::
	`£tw
(55è<< 
pSymbÞName
 << ": " << 
ruiCode
 << "\n";

72 
	}
}

74 
Void
 
	gSEIR—d”
::
	$£i_»ad_code
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
 
uiL’gth
, UIÁ& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

76 
	`READ_CODE
(
uiL’gth
, 
ruiCode
, 
pSymbÞName
);

77 ià(
pOS
)

79 (*
pOS
è<< " " << 
¡d
::
	`£tw
(55è<< 
pSymbÞName
 << ": " << 
ruiCode
 << "\n";

81 
	}
}

83 
Void
 
	gSEIR—d”
::
	$£i_»ad_uvlc
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

85 
	`READ_UVLC
(
ruiCode
, 
pSymbÞName
);

86 ià(
pOS
)

88 (*
pOS
è<< " " << 
¡d
::
	`£tw
(55è<< 
pSymbÞName
 << ": " << 
ruiCode
 << "\n";

90 
	}
}

92 
Void
 
	gSEIR—d”
::
	$£i_»ad_svlc
(
¡d
::
o¡»am
 *
pOS
, 
IÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

94 
	`READ_SVLC
(
ruiCode
, 
pSymbÞName
);

95 ià(
pOS
)

97 (*
pOS
è<< " " << 
¡d
::
	`£tw
(55è<< 
pSymbÞName
 << ": " << 
ruiCode
 << "\n";

99 
	}
}

101 
Void
 
	gSEIR—d”
::
	$£i_»ad_æag
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

103 
	`READ_FLAG
(
ruiCode
, 
pSymbÞName
);

104 ià(
pOS
)

106 (*
pOS
è<< " " << 
¡d
::
	`£tw
(55è<< 
pSymbÞName
 << ": " << (
ruiCode
?1:0) << "\n";

108 
	}
}

110 
šlše
 
Void
 
	$ouut_£i_mes§ge_h—d”
(
SEI
 &
£i
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
, 
UIÁ
 
·ylßdSize
)

112 ià(
pDecodedMes§geOuutSŒ—m
)

114 
¡d
::
¡ršg
 
	`£iMes§geHdr
(
SEI
::
	`g‘SEIMes§geSŒšg
(
£i
.
	`·ylßdTy³
())); 
£iMes§geHdr
+=" SEI message";

115 (*
pDecodedMes§geOuutSŒ—m
è<< 
¡d
::
	`£tfžl
('-'è<< std::
	`£tw
(
£iMes§geHdr
.
	`size
()è<< "-" << std::£tfžl(' 'è<< "\n" << seiMes§geHd¸<< " (" << 
·ylßdSize
 << " bytes)"<< "\n";

117 
	}
}

119 #undeà
READ_SCODE


120 #undeà
READ_CODE


121 #undeà
READ_SVLC


122 #undeà
READ_UVLC


123 #undeà
READ_FLAG


129 
Void
 
	gSEIR—d”
::
	$·r£SEImes§ge
(
TComIÅutB™¡»am
* 
bs
, 
SEIMes§ges
& 
£is
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

131 
	`£tB™¡»am
(
bs
);

133 
	`as£¹
(!
m_pcB™¡»am
->
	`g‘NumB™sUÁžBy‹AligÃd
());

136 if(
ÇlUn™Ty³
 =ð
NAL_UNIT_PREFIX_SEI
)

138 
	`xR—dSEImes§ge
(
£is
, 
ÇlUn™Ty³
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
SEI
::
´efix_£i_mes§ges
, 
¡d
::
	`¡ršg
("prefix SEI"));

140 ià(
ÇlUn™Ty³
 =ð
NAL_UNIT_SUFFIX_SEI
)

142 
	`xR—dSEImes§ge
(
£is
, 
ÇlUn™Ty³
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
SEI
::
suffix_£i_mes§ges
, 
¡d
::
	`¡ršg
("suffix SEI"));

146 
¡d
::
û¼
 << "UnsuµÜ‹d SEI NAL un™y³ '" << 
ÇlUn™Ty³
 << "'" << std::
’dl
;

147 
	`ex™
(
EXIT_FAILURE
);

152 
	`as£¹
(!
m_pcB™¡»am
->
	`g‘NumB™sUÁžBy‹AligÃd
());

154 
m_pcB™¡»am
->
	`g‘NumB™sLeá
() > 8);

156 
	`xR—dRb¥T¿žšgB™s
();

157 
	}
}

158 
Void
 
	gSEIR—d”
::
	$xR—dSEIPaylßdD©a
(
IÁ
 cÚ¡ 
·ylßdTy³
, IÁ cÚ¡ 
·ylßdSize
, 
SEI
 *&
£i
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
,

159 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
, std::
¡ršg
 cÚ¡ &
ty³Name
)

161 
·ylßdTy³
)

163 
SEI
::
BUFFERING_PERIOD
:

164 ià(!
¥s
)

166 
	`´štf
 ("Warning: Found Buffering…eriod SEI message, but‚o‡ctive SPS is‡vailable. Ignoring.");

170 
£i
 = 
Ãw
 
SEIBufãršgP”iod
;

171 
	`xP¬£SEIBufãršgP”iod
((
SEIBufãršgP”iod
&è*
£i
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

174 
SEI
::
PICTURE_TIMING
:

175 ià(!
¥s
)

177 
	`´štf
 ("Warning: Found Pictureiming SEI message, but‚o‡ctive SPS is‡vailable. Ignoring.");

181 
£i
 = 
Ãw
 
SEIPiùu»Timšg
;

182 
	`xP¬£SEIPiùu»Timšg
((
SEIPiùu»Timšg
&)*
£i
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

185 
SEI
::
PAN_SCAN_RECT
:

186 
£i
 = 
Ãw
 
SEIPªSÿnReù
;

187 
	`xP¬£SEIPªSÿnReù
((
SEIPªSÿnReù
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

189 
SEI
::
FILLER_PAYLOAD
:

190 
£i
 = 
Ãw
 
SEIFžËrPaylßd
;

191 
	`xP¬£SEIFžËrPaylßd
((
SEIFžËrPaylßd
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

193 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
:

194 
£i
 = 
Ãw
 
SEIU£rD©aRegi¡”ed
;

195 
	`xP¬£SEIU£rD©aRegi¡”ed
((
SEIU£rD©aRegi¡”ed
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

197 
SEI
::
USER_DATA_UNREGISTERED
:

198 
£i
 = 
Ãw
 
SEIU£rD©aUÄegi¡”ed
;

199 
	`xP¬£SEIU£rD©aUÄegi¡”ed
((
SEIU£rD©aUÄegi¡”ed
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

201 
SEI
::
RECOVERY_POINT
:

202 
£i
 = 
Ãw
 
SEIRecov”yPošt
;

203 
	`xP¬£SEIRecov”yPošt
((
SEIRecov”yPošt
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

205 
SEI
::
SCENE_INFO
:

206 
£i
 = 
Ãw
 
SEISûÃInfo
;

207 
	`xP¬£SEISûÃInfo
((
SEISûÃInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

209 
SEI
::
PICTURE_SNAPSHOT
:

210 
£i
 = 
Ãw
 
SEIPiùu»SÇpshÙ
;

211 
	`xP¬£SEIPiùu»SÇpshÙ
((
SEIPiùu»SÇpshÙ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

213 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_START
:

214 
£i
 = 
Ãw
 
SEIProg»ssiveRefšem’tSegm’tS¹
;

215 
	`xP¬£SEIProg»ssiveRefšem’tSegm’tS¹
((
SEIProg»ssiveRefšem’tSegm’tS¹
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

217 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_END
:

218 
£i
 = 
Ãw
 
SEIProg»ssiveRefšem’tSegm’tEnd
;

219 
	`xP¬£SEIProg»ssiveRefšem’tSegm’tEnd
((
SEIProg»ssiveRefšem’tSegm’tEnd
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

221 
SEI
::
FILM_GRAIN_CHARACTERISTICS
:

222 
£i
 = 
Ãw
 
SEIFžmG¿šCh¬aù”i¡ics
;

223 
	`xP¬£SEIFžmG¿šCh¬aù”i¡ics
((
SEIFžmG¿šCh¬aù”i¡ics
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

225 
SEI
::
POST_FILTER_HINT
:

226 ià(!
¥s
)

228 
	`´štf
 ("Warning:…ost filter hint SEI message, but‚o‡ctive SPS is‡vailable. Ignoring.");

232 
£i
 = 
Ãw
 
SEIPo¡Fž‹rHšt
;

233 
	`xP¬£SEIPo¡Fž‹rHšt
((
SEIPo¡Fž‹rHšt
&è*
£i
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

236 
SEI
::
TONE_MAPPING_INFO
:

237 
£i
 = 
Ãw
 
SEITÚeM­pšgInfo
;

238 
	`xP¬£SEITÚeM­pšgInfo
((
SEITÚeM­pšgInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

240 
SEI
::
FRAME_PACKING
:

241 
£i
 = 
Ãw
 
SEIF¿mePackšg
;

242 
	`xP¬£SEIF¿mePackšg
((
SEIF¿mePackšg
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

244 
SEI
::
DISPLAY_ORIENTATION
:

245 
£i
 = 
Ãw
 
SEIDi¥ÏyOr›Á©iÚ
;

246 
	`xP¬£SEIDi¥ÏyOr›Á©iÚ
((
SEIDi¥ÏyOr›Á©iÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

248 
SEI
::
GREEN_METADATA
:

249 
£i
 = 
Ãw
 
SEIG»’M‘ad©aInfo
;

250 
	`xP¬£SEIG»’M‘ad©aInfo
((
SEIG»’M‘ad©aInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

252 
SEI
::
SOP_DESCRIPTION
:

253 
£i
 = 
Ãw
 
SEISOPDesütiÚ
;

254 
	`xP¬£SEISOPDesütiÚ
((
SEISOPDesütiÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

256 
SEI
::
DECODED_PICTURE_HASH
:

257 
£i
 = 
Ãw
 
SEIDecodedPiùu»Hash
;

258 
	`xP¬£SEIDecodedPiùu»Hash
((
SEIDecodedPiùu»Hash
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

260 
SEI
::
ACTIVE_PARAMETER_SETS
:

261 
£i
 = 
Ãw
 
SEIAùiveP¬am‘”S‘s
;

262 
	`xP¬£SEIAùiveP¬am‘”S‘s
((
SEIAùiveP¬am‘”S‘s
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

264 
SEI
::
DECODING_UNIT_INFO
:

265 ià(!
¥s
)

267 
	`´štf
 ("Warning: Found Decoding unit SEI message, but‚o‡ctive SPS is‡vailable. Ignoring.");

271 
£i
 = 
Ãw
 
SEIDecodšgUn™Info
;

272 
	`xP¬£SEIDecodšgUn™Info
((
SEIDecodšgUn™Info
&è*
£i
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

275 
SEI
::
TEMPORAL_LEVEL0_INDEX
:

276 
£i
 = 
Ãw
 
SEITempÜ®Lev–0Index
;

277 
	`xP¬£SEITempÜ®Lev–0Index
((
SEITempÜ®Lev–0Index
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

279 
SEI
::
SCALABLE_NESTING
:

280 
£i
 = 
Ãw
 
SEISÿÏbËNe¡šg
;

281 
	`xP¬£SEISÿÏbËNe¡šg
((
SEISÿÏbËNe¡šg
&è*
£i
, 
ÇlUn™Ty³
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

283 
SEI
::
REGION_REFRESH_INFO
:

284 
£i
 = 
Ãw
 
SEIRegiÚReäeshInfo
;

285 
	`xP¬£SEIRegiÚReäeshInfo
((
SEIRegiÚReäeshInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

287 
SEI
::
NO_DISPLAY
:

288 
£i
 = 
Ãw
 
SEINoDi¥Ïy
;

289 
	`xP¬£SEINoDi¥Ïy
((
SEINoDi¥Ïy
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

291 
SEI
::
TIME_CODE
:

292 
£i
 = 
Ãw
 
SEITimeCode
;

293 
	`xP¬£SEITimeCode
((
SEITimeCode
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

295 
SEI
::
MASTERING_DISPLAY_COLOUR_VOLUME
:

296 
£i
 = 
Ãw
 
SEIMa¡”šgDi¥ÏyCÞourVÞume
;

297 
	`xP¬£SEIMa¡”šgDi¥ÏyCÞourVÞume
((
SEIMa¡”šgDi¥ÏyCÞourVÞume
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

299 
SEI
::
SEGM_RECT_FRAME_PACKING
:

300 
£i
 = 
Ãw
 
SEISegm’‹dReùF¿mePackšg
;

301 
	`xP¬£SEISegm’‹dReùF¿mePackšg
((
SEISegm’‹dReùF¿mePackšg
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

303 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
:

304 
£i
 = 
Ãw
 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
;

305 
	`xP¬£SEITempMÙiÚCÚ¡¿štsTžeS‘s
((
SEITempMÙiÚCÚ¡¿šedTžeS‘s
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

307 #ià
MCTS_EXTRACTION


308 
SEI
::
MCTS_EXTRACTION_INFO_SET
:

309 
£i
 = 
Ãw
 
SEIMCTSExŒaùiÚInfoS‘
;

310 
	`xP¬£SEIMCTSExŒaùiÚInfoS‘
((
SEIMCTSExŒaùiÚInfoS‘
&)*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

313 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
:

314 
£i
 = 
Ãw
 
SEIChromaRe§m¶šgFž‹rHšt
;

315 
	`xP¬£SEIChromaRe§m¶šgFž‹rHšt
((
SEIChromaRe§m¶šgFž‹rHšt
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

317 
SEI
::
KNEE_FUNCTION_INFO
:

318 
£i
 = 
Ãw
 
SEIKÃeFunùiÚInfo
;

319 
	`xP¬£SEIKÃeFunùiÚInfo
((
SEIKÃeFunùiÚInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

321 
SEI
::
COLOUR_REMAPPING_INFO
:

322 
£i
 = 
Ãw
 
SEICÞourRem­pšgInfo
;

323 
	`xP¬£SEICÞourRem­pšgInfo
((
SEICÞourRem­pšgInfo
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

325 
SEI
::
DEINTERLACE_FIELD_IDENTIFICATION
:

326 
£i
 = 
Ãw
 
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
;

327 
	`xP¬£SEIDeš‹¾aûF›ldId’tifiÿtiÚ
((
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

329 
SEI
::
CONTENT_LIGHT_LEVEL_INFO
:

330 
£i
 = 
Ãw
 
SEICÚ‹ÁLightLev–Info
;

331 
	`xP¬£SEICÚ‹ÁLightLev–Info
((
SEICÚ‹ÁLightLev–Info
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

333 
SEI
::
DEPENDENT_RAP_INDICATION
:

334 
£i
 = 
Ãw
 
SEID•’d’tRAPIndiÿtiÚ
;

335 
	`xP¬£SEID•’d’tRAPIndiÿtiÚ
((
SEID•’d’tRAPIndiÿtiÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

337 
SEI
::
CODED_REGION_COMPLETION
:

338 
£i
 = 
Ãw
 
SEICodedRegiÚCom¶‘iÚ
;

339 
	`xP¬£SEICodedRegiÚCom¶‘iÚ
((
SEICodedRegiÚCom¶‘iÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

341 
SEI
::
ALTERNATIVE_TRANSFER_CHARACTERISTICS
:

342 
£i
 = 
Ãw
 
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
;

343 
	`xP¬£SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
((
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

345 
SEI
::
AMBIENT_VIEWING_ENVIRONMENT
:

346 
£i
 = 
Ãw
 
SEIAmb›ÁV›wšgEnvœÚm’t
;

347 
	`xP¬£SEIAmb›ÁV›wšgEnvœÚm’t
((
SEIAmb›ÁV›wšgEnvœÚm’t
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

349 
SEI
::
CONTENT_COLOUR_VOLUME
:

350 
£i
 = 
Ãw
 
SEICÚ‹ÁCÞourVÞume
;

351 
	`xP¬£SEICÚ‹ÁCÞourVÞume
((
SEICÚ‹ÁCÞourVÞume
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

353 
SEI
::
EQUIRECTANGULAR_PROJECTION
:

354 
£i
 = 
Ãw
 
SEIEquœeùªguÏrProjeùiÚ
;

355 
	`xP¬£SEIEquœeùªguÏrProjeùiÚ
((
SEIEquœeùªguÏrProjeùiÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

357 
SEI
::
SPHERE_ROTATION
:

358 
£i
 = 
Ãw
 
SEISph”eRÙ©iÚ
;

359 
	`xP¬£SEISph”eRÙ©iÚ
((
SEISph”eRÙ©iÚ
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

361 
SEI
::
OMNI_VIEWPORT
:

362 
£i
 = 
Ãw
 
SEIOmniV›wpÜt
;

363 
	`xP¬£SEIOmniV›wpÜt
((
SEIOmniV›wpÜt
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

365 
SEI
::
CUBEMAP_PROJECTION
:

366 
£i
 = 
Ãw
 
SEICubem­ProjeùiÚ
;

367 
	`xP¬£SEICubem­ProjeùiÚ
((
SEICubem­ProjeùiÚ
&)*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

369 
SEI
::
REGION_WISE_PACKING
:

370 
£i
 = 
Ãw
 
SEIRegiÚWi£Packšg
;

371 
	`xP¬£SEIRegiÚWi£Packšg
((
SEIRegiÚWi£Packšg
&è*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

374 
SEI
::
ANNOTATED_REGIONS
:

375 
£i
 = 
Ãw
 
SEIAÂÙ©edRegiÚs
;

376 
	`xP¬£SEIAÂÙ©edRegiÚs
((
SEIAÂÙ©edRegiÚs
&)*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

378 
SEI
::
FISHEYE_VIDEO_INFO
:

379 
£i
 = 
Ãw
 
SEIFisheyeVideoInfo
;

380 
	`xP¬£SEIFisheyeVideoInfo
((
SEIFisheyeVideoInfo
&)*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

382 
SEI
::
REGIONAL_NESTING
:

383 
£i
 = 
Ãw
 
SEIRegiÚ®Ne¡šg
;

384 
	`xP¬£SEIRegiÚ®Ne¡šg
((
SEIRegiÚ®Ne¡šg
&è*
£i
, 
·ylßdSize
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
);

386 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


387 
SEI
::
SHUTTER_INTERVAL_INFO
:

388 
£i
 = 
Ãw
 
SEIShu‰”IÁ”v®Info
;

389 
	`xP¬£SEIShu‰”IÁ”v®
((
SEIShu‰”IÁ”v®Info
&)*
£i
, 
·ylßdSize
, 
pDecodedMes§geOuutSŒ—m
);

393 
UIÁ
 
i
 = 0; i < 
·ylßdSize
; i++)

395 
UIÁ
 
£iBy‹
;

396 
¡d
::
¡ršg
 
msg
 = std::
	`¡ršg
("unknowÀ")+
ty³Name
+std::string("…ayload byte");

397 
	`£i_»ad_code
 (
NULL
, 8, 
£iBy‹
, 
msg
.
	`c_¡r
());

399 
	`´štf
 ("UnknowÀ´efix SEI mes§gÕaylßdTy³ = %dèwa found!\n", 
·ylßdTy³
);

400 ià(
pDecodedMes§geOuutSŒ—m
)

402 (*
pDecodedMes§geOuutSŒ—m
è<< "UnknowÀ"<< 
ty³Name
 << " mes§gÕaylßdTy³ = " << 
·ylßdTy³
 << ") was found!\n";

406 
	}
}

408 
Void
 
	gSEIR—d”
::
xR—dSEImes§ge
(
SEIMes§ges
& 
£is
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
, cÚ¡ 
veùÜ
<
SEI
::
PaylßdTy³
>& 
®lowedSeiTy³s
, std::
¡ršg
 cÚ¡ &
ty³Name
)

410 #ià
ENC_DEC_TRACE


411 
xT¿ûSEIH—d”
();

413 
IÁ
 
	g·ylßdTy³
 = 0;

414 
UIÁ
 
	gv®
 = 0;

418 
£i_»ad_code
(
NULL
, 8, 
v®
, "payload_type");

419 
	g·ylßdTy³
 +ð
v®
;

420 } 
	gv®
==0xFF);

422 
UIÁ
 
	g·ylßdSize
 = 0;

425 
£i_»ad_code
(
NULL
, 8, 
v®
, "payload_size");

426 
	g·ylßdSize
 +ð
v®
;

427 } 
	gv®
==0xFF);

429 #ià
ENC_DEC_TRACE


430 
xT¿ûSEIMes§geTy³
((
SEI
::
PaylßdTy³
)
·ylßdTy³
);

439 
TComIÅutB™¡»am
 *
	gbs
 = 
g‘B™¡»am
();

440 
£tB™¡»am
(
bs
->
exŒaùSub¡»am
(
·ylßdSize
 * 8));

442 
SEI
 *
	g£i
 = 
NULL
;

444 ià(
	g¡d
::
fšd
(
®lowedSeiTy³s
.
begš
(),‡ÎowedSeiTy³s.begš(), 
·ylßdTy³
è!ð®lowedSeiTy³s.
’d
())

446 
xR—dSEIPaylßdD©a
(
·ylßdTy³
, 
·ylßdSize
, 
£i
, 
ÇlUn™Ty³
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
ty³Name
);

450 
UIÁ
 
	gi
 = 0; i < 
	g·ylßdSize
; i++)

452 
UIÁ
 
	g£iBy‹
;

453 
£i_»ad_code
 (
NULL
, 8, 
£iBy‹
, "unknown SEI…ayload byte");

455 
´štf
 ("UnknowÀSEI mes§gÕaylßdTy³ = %dèwa found!\n", 
·ylßdTy³
);

456 ià(
	gpDecodedMes§geOuutSŒ—m
)

458 (*
	gpDecodedMes§geOuutSŒ—m
è<< "UnknowÀSEI mes§gÕaylßdTy³ = " << 
	g·ylßdTy³
 << ") was found!\n";

462 ià(
	g£i
 !ð
NULL
)

464 
£is
.
push_back
(
£i
);

474 
IÁ
 
	g·ylßdB™sRemaššg
 = 
g‘B™¡»am
()->
g‘NumB™sLeá
();

475 ià(
	g·ylßdB™sRemaššg
)

477 ; 
	g·ylßdB™sRemaššg
 > 9;…ayloadBitsRemaining--)

479 
UIÁ
 
	g»£rvedPaylßdEx‹nsiÚD©a
;

480 
£i_»ad_code
 ( 
pDecodedMes§geOuutSŒ—m
, 1, 
»£rvedPaylßdEx‹nsiÚD©a
, "reserved_payload_extension_data");

484 
IÁ
 
	gfš®B™s
 = 
g‘B™¡»am
()->
³ekB™s
(
·ylßdB™sRemaššg
);

485 
IÁ
 
	gfš®PaylßdB™s
 = 0;

486 
IÁ
 
	gmask
 = 0xff; 
	gfš®B™s
 & (mask >> 
	gfš®PaylßdB™s
); finalPayloadBits++)

492 ; 
	g·ylßdB™sRemaššg
 > 9 - 
	gfš®PaylßdB™s
;…ayloadBitsRemaining--)

494 
UIÁ
 
	g»£rvedPaylßdEx‹nsiÚD©a
;

495 
£i_»ad_æag
 ( 0, 
»£rvedPaylßdEx‹nsiÚD©a
, "reserved_payload_extension_data");

498 
UIÁ
 
	gdummy
;

499 
£i_»ad_æag
Ð0, 
dummy
, "·ylßd_b™_equ®_to_Úe"); 
	g·ylßdB™sRemaššg
--;

500 
	g·ylßdB™sRemaššg
)

502 
£i_»ad_æag
Ð0, 
dummy
, "·ylßd_b™_equ®_to_z”o"); 
	g·ylßdB™sRemaššg
--;

507 
d–‘e
 
g‘B™¡»am
();

508 
£tB™¡»am
(
bs
);

512 
Void
 
	gSEIR—d”
::
	$xP¬£SEIBufãršgP”iod
(
SEIBufãršgP”iod
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

514 
IÁ
 
i
, 
ÇlOrVþ
;

515 
UIÁ
 
code
;

517 cÚ¡ 
TComVUI
 *
pVUI
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

518 cÚ¡ 
TComHRD
 *
pHRD
 = 
pVUI
->
	`g‘HrdP¬am‘”s
();

520 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

522 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "bp_£q_·¿m‘”_£t_id" ); 
£i
.
m_bpSeqP¬am‘”S‘Id
 = code;

523 ifÐ!
pHRD
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

525 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "œ­_ýb_·¿ms_´e£Á_æag" ); 
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
 = code;

527 ifÐ
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
 )

529 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 
pHRD
->
	`g‘CpbRemov®D–ayL’gthMšus1
(è+ 1, 
code
, "ýb_d–ay_off£t" ); 
£i
.
m_ýbD–ayOff£t
 = code;

530 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 
pHRD
->
	`g‘DpbOuutD–ayL’gthMšus1
(è+ 1, 
code
, "dpb_d–ay_off£t" ); 
£i
.
m_dpbD–ayOff£t
 = code;

534 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "concatenation_flag");

535 
£i
.
m_cÚÿ‹ÇtiÚFÏg
 = 
code
;

536 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
pHRD
->
	`g‘CpbRemov®D–ayL’gthMšus1
(è+ 1 ), 
code
, "au_cpb_removal_delay_delta_minus1" );

537 
£i
.
m_auCpbRemov®D–ayD–
 = 
code
 + 1;

539  
ÇlOrVþ
 = 0;‚alOrVcl < 2;‚alOrVcl ++ )

541 ifÐÐÐ
ÇlOrVþ
 =ð0 ) && ( 
pHRD
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() ) ) ||

542 ÐÐ
ÇlOrVþ
 =ð1 ) && ( 
pHRD
->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) )

544  
i
 = 0; i < ( 
pHRD
->
	`g‘CpbCÁMšus1
( 0 ) + 1 ); i ++ )

546 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
pHRD
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
(è+ 1 ) , 
code
, 
ÇlOrVþ
?"vcl_initial_cpb_removal_delay":"nal_initial_cpb_removal_delay" );

547 
£i
.
m_š™ŸlCpbRemov®D–ay
[
i
][
ÇlOrVþ
] = 
code
;

548 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
pHRD
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
(è+ 1 ) , 
code
, 
ÇlOrVþ
?"vcl_initial_cpb_removal_offset":"nal_initial_cpb_removal_offset" );

549 
£i
.
m_š™ŸlCpbRemov®D–ayOff£t
[
i
][
ÇlOrVþ
] = 
code
;

550 ifÐ
pHRD
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
(è|| 
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
 )

552 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
pHRD
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
(è+ 1 ) , 
code
, 
ÇlOrVþ
?"vcl_initial_alt_cpb_removal_delay":"nal_initial_alt_cpb_removal_delay" );

553 
£i
.
m_š™ŸlAÉCpbRemov®D–ay
[
i
][
ÇlOrVþ
] = 
code
;

554 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
pHRD
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
(è+ 1 ) , 
code
, 
ÇlOrVþ
?"vcl_initial_alt_cpb_removal_offset":"nal_initial_alt_cpb_removal_offset" );

555 
£i
.
m_š™ŸlAÉCpbRemov®D–ayOff£t
[
i
][
ÇlOrVþ
] = 
code
;

560 
	}
}

563 
Void
 
	gSEIR—d”
::
	$xP¬£SEIPiùu»Timšg
(
SEIPiùu»Timšg
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

565 
IÁ
 
i
;

566 
UIÁ
 
code
;

568 cÚ¡ 
TComVUI
 *
vui
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

569 cÚ¡ 
TComHRD
 *
hrd
 = 
vui
->
	`g‘HrdP¬am‘”s
();

570 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

572 ifÐ
vui
->
	`g‘F¿meF›ldInfoP»£ÁFÏg
() )

574 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
code
, "pic_¡ruù" ); 
£i
.
m_picSŒuù
 = code;

575 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
code
, "sourû_sÿn_ty³" ); 
£i
.
m_sourûSÿnTy³
 = code;

576 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "du¶iÿ‹_æag" ); 
£i
.
m_du¶iÿ‹FÏg
 = (code == 1);

579 ifÐ
hrd
->
	`g‘CpbDpbD–aysP»£ÁFÏg
())

581 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
hrd
->
	`g‘CpbRemov®D–ayL’gthMšus1
(è+ 1 ), 
code
, "au_cpb_removal_delay_minus1" );

582 
£i
.
m_auCpbRemov®D–ay
 = 
code
 + 1;

583 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
hrd
->
	`g‘DpbOuutD–ayL’gthMšus1
(è+ 1 ), 
code
, "pic_dpb_output_delay" );

584 
£i
.
m_picDpbOuutD–ay
 = 
code
;

586 if(
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
())

588 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 
hrd
->
	`g‘DpbOuutD–ayDuL’gthMšus1
()+1, 
code
, "pic_dpb_output_du_delay" );

589 
£i
.
m_picDpbOuutDuD–ay
 = 
code
;

592 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
(è&& hrd->
	`g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
() )

594 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "num_decoding_units_minus1");

595 
£i
.
m_numDecodšgUn™sMšus1
 = 
code
;

596 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "du_common_cpb_removal_delay_flag" );

597 
£i
.
m_duCommÚCpbRemov®D–ayFÏg
 = 
code
;

598 ifÐ
£i
.
m_duCommÚCpbRemov®D–ayFÏg
 )

600 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
hrd
->
	`g‘DuCpbRemov®D–ayL’gthMšus1
(è+ 1 ), 
code
, "du_common_cpb_removal_delay_increment_minus1" );

601 
£i
.
m_duCommÚCpbRemov®D–ayMšus1
 = 
code
;

603 
£i
.
m_numN®usInDuMšus1
.
	`»size
(£i.
m_numDecodšgUn™sMšus1
 + 1 );

604 
£i
.
m_duCpbRemov®D–ayMšus1
.
	`»size
Ð£i.
m_numDecodšgUn™sMšus1
 + 1 );

606  
i
 = 0; i <ð
£i
.
m_numDecodšgUn™sMšus1
; i ++ )

608 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "num_nalus_in_du_minus1[i]");

609 
£i
.
m_numN®usInDuMšus1
[ 
i
 ] = 
code
;

610 ifÐÐ!
£i
.
m_duCommÚCpbRemov®D–ayFÏg
 ) && ( 
i
 < sei.
m_numDecodšgUn™sMšus1
 ) )

612 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
hrd
->
	`g‘DuCpbRemov®D–ayL’gthMšus1
(è+ 1 ), 
code
, "du_cpb_removal_delay_minus1[i]" );

613 
£i
.
m_duCpbRemov®D–ayMšus1
[ 
i
 ] = 
code
;

618 
	}
}

621 
Void
 
	gSEIR—d”
::
	$xP¬£SEIPªSÿnReù
(
SEIPªSÿnReù
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

623 
UIÁ
 
code
;

624 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

625 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "·n_sÿn_»ù_id" ); 
£i
.
m_·nSÿnReùId
 = code;

626 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "·n_sÿn_»ù_ÿnûl_æag" ); 
£i
.
m_·nSÿnReùCªûlFÏg
 = code!=0;

627 ià(!
£i
.
m_·nSÿnReùCªûlFÏg
)

629 
UIÁ
 
numRegiÚs
;

630 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
numRegiÚs
, "pan_scan_cnt_minus1" );‚umRegions++;

631 
£i
.
m_·nSÿnReùRegiÚs
.
	`»size
(
numRegiÚs
);

632 
UIÁ
 
»giÚ
=0;„egiÚ<
numRegiÚs
;„egion++)

634 
SEIPªSÿnReù
::
PªSÿnReù
 &
»ù
=
£i
.
m_·nSÿnReùRegiÚs
[
»giÚ
];

635 
IÁ
 
i
;

636 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
i
, "·n_sÿn_»ù_Ëá_off£t[i]" ); 
»ù
.
ËáOff£t
 = i;

637 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
i
, "·n_sÿn_»ù_right_off£t[i]" ); 
»ù
.
rightOff£t
 = i;

638 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
i
, "·n_sÿn_»ù_tÝ_off£t[i]" ); 
»ù
.
tÝOff£t
 = i;

639 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
i
, "·n_sÿn_»ù_bÙtom_off£t[i]" ); 
»ù
.
bÙtomOff£t
 = i;

641 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "·n_sÿn_»ù_³rsi¡’û_æag" ); 
£i
.
m_·nSÿnReùP”si¡’ûFÏg
 = code!=0;

645 
£i
.
m_·nSÿnReùRegiÚs
.
	`þ—r
();

646 
£i
.
m_·nSÿnReùP”si¡’ûFÏg
=
çl£
;

648 
	}
}

651 
Void
 
	gSEIR—d”
::
	$xP¬£SEIFžËrPaylßd
(
SEIFžËrPaylßd
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

653 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

654 
£i
.
m_numFžËrFFBy‹s
 = 
·ylßdSize
;

655 
BoÞ
 
®lBy‹sW”eFF
=
Œue
;

656 
UIÁ
 
k
=0; k<
·ylßdSize
; k++)

658 
UIÁ
 
code
;

659 
	`£i_»ad_code
Ð
NULL
, 8, 
code
, "ff_byte" );

660 ià(
code
!=0xffè
®lBy‹sW”eFF
=
çl£
;

662 ià(
pDecodedMes§geOuutSŒ—m
 && !
®lBy‹sW”eFF
)

664 (*
pDecodedMes§geOuutSŒ—m
) << "‚ot‡ll filler…ayload bytes were 0xff\n";

666 
	}
}

669 
Void
 
	gSEIR—d”
::
	$xP¬£SEIU£rD©aRegi¡”ed
(
SEIU£rD©aRegi¡”ed
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

671 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

673 
UIÁ
 
code
;

674 
	`as£¹
(
·ylßdSize
>0);

675 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "™u_t_t35_couÁry_code" ); 
·ylßdSize
--;

676 ià(
code
 == 255)

678 
	`as£¹
(
·ylßdSize
>0);

679 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "™u_t_t35_couÁry_code_ex‹nsiÚ_by‹" ); 
·ylßdSize
--;

680 
code
+=255;

682 
£i
.
m_™uCouÁryCode
 = 
code
;

683 
£i
.
m_u£rD©a
.
	`»size
(
·ylßdSize
);

684 
UIÁ
 
i
 = 0; i < 
£i
.
m_u£rD©a
.
	`size
(); i++)

686 
	`£i_»ad_code
Ð
NULL
, 8, 
code
, "itu_t_t35_payload_byte" );

687 
£i
.
m_u£rD©a
[
i
] = 
code
;

689 ià(
pDecodedMes§geOuutSŒ—m
)

691 (*
pDecodedMes§geOuutSŒ—m
è<< " itu_t_t35…aylßd size: " << 
£i
.
m_u£rD©a
.
	`size
() << "\n";

693 
	}
}

696 
Void
 
	gSEIR—d”
::
	$xP¬£SEIU£rD©aUÄegi¡”ed
(
SEIU£rD©aUÄegi¡”ed
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

698 
	`as£¹
(
·ylßdSize
 >ð
ISO_IEC_11578_LEN
);

699 
UIÁ
 
v®
;

700 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

702 
UIÁ
 
i
 = 0; i < 
ISO_IEC_11578_LEN
; i++)

704 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "uuid_iso_iec_11578");

705 
£i
.
m_uuid_iso_›c_11578
[
i
] = 
v®
;

708 
£i
.
m_u£rD©a
.
	`»size
(
·ylßdSize
 - 
ISO_IEC_11578_LEN
);

709 
UIÁ
 
i
 = 0; i < 
£i
.
m_u£rD©a
.
	`size
(); i++)

711 
	`£i_»ad_code
Ð
NULL
, 8, 
v®
, "user_data_payload_byte" );

712 
£i
.
m_u£rD©a
[
i
] = 
v®
;

714 ià(
pDecodedMes§geOuutSŒ—m
)

716 (*
pDecodedMes§geOuutSŒ—m
è<< " U£¸d©¨·ylßd size: " << 
£i
.
m_u£rD©a
.
	`size
() << "\n";

718 
	}
}

721 
Void
 
	gSEIR—d”
::
	$xP¬£SEIRecov”yPošt
(
SEIRecov”yPošt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

723 
IÁ
 
iCode
;

724 
UIÁ
 
uiCode
;

725 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

727 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
iCode
, "»cov”y_poc_út" ); 
£i
.
m_»cov”yPocCÁ
 = iCode;

728 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "exaù_m©chšg_æag" ); 
£i
.
m_exaùM©chšgFÏg
 = uiCode;

729 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "brok’_lšk_æag" ); 
£i
.
m_brok’LškFÏg
 = uiCode;

730 
	}
}

733 
Void
 
	gSEIR—d”
::
	$xP¬£SEISûÃInfo
(
SEISûÃInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

735 
UIÁ
 
code
;

736 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

738 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "sûÃ_šfo_´e£Á_æag" ); 
£i
.
m_bSûÃInfoP»£ÁFÏg
 = code!=0;

739 ià(
£i
.
m_bSûÃInfoP»£ÁFÏg
)

741 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "´ev_sûÃ_id_v®id_æag" ); 
£i
.
m_bP»vSûÃIdV®idFÏg
 = code!=0;

742 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "sûÃ_id" ); 
£i
.
m_sûÃId
 = code;

743 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "sûÃ_Œªs™iÚ_ty³" ); 
£i
.
m_sûÃT¿ns™iÚTy³
 = code;

744 ià(
£i
.
m_sûÃT¿ns™iÚTy³
 > 3)

746 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "£cÚd_sûÃ_id" ); 
£i
.
m_£cÚdSûÃId
 = code;

750 
£i
.
m_£cÚdSûÃId
 = 0;

753 
	}
}

756 
Void
 
	gSEIR—d”
::
	$xP¬£SEIPiùu»SÇpshÙ
(
SEIPiùu»SÇpshÙ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

758 
UIÁ
 
code
;

759 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

761 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "¢­shÙ_id" ); 
£i
.
m_¢­shÙId
 = code;

762 
	}
}

765 
Void
 
	gSEIR—d”
::
	$xP¬£SEIProg»ssiveRefšem’tSegm’tS¹
(
SEIProg»ssiveRefšem’tSegm’tS¹
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

767 
UIÁ
 
code
;

768 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

770 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "´og»ssive_»fšem’t_id" ); 
£i
.
m_´og»ssiveRefšem’tId
 = code;

771 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "pic_Üd”_út_d–" ); 
£i
.
m_picOrd”CÁD–
 = code;

772 
	}
}

775 
Void
 
	gSEIR—d”
::
	$xP¬£SEIProg»ssiveRefšem’tSegm’tEnd
(
SEIProg»ssiveRefšem’tSegm’tEnd
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

777 
UIÁ
 
code
;

778 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

780 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "´og»ssive_»fšem’t_id" ); 
£i
.
m_´og»ssiveRefšem’tId
 = code;

781 
	}
}

784 
Void
 
	gSEIR—d”
::
	$xP¬£SEIFžmG¿šCh¬aù”i¡ics
(
SEIFžmG¿šCh¬aù”i¡ics
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

786 
UIÁ
 
code
;

787 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

789 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fžm_g¿š_ch¬aù”i¡ics_ÿnûl_æag" ); 
£i
.
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
 = code!=0;

790 ià(!
£i
.
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
)

792 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
code
, "fžm_g¿š_mod–_id" ); 
£i
.
m_fžmG¿šMod–Id
 = code;

793 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "£·¿‹_cÞour_desütiÚ_´e£Á_æag" ); 
£i
.
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
 = code!=0;

794 ià(
£i
.
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
)

796 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
code
, "fžm_g¿š_b™_d•th_luma_mšus8" ); 
£i
.
m_fžmG¿šB™D•thLumaMšus8
 = code;

797 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
code
, "fžm_g¿š_b™_d•th_chroma_mšus8" ); 
£i
.
m_fžmG¿šB™D•thChromaMšus8
 = code;

798 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fžm_g¿š_fuÎ_¿nge_æag" ); 
£i
.
m_fžmG¿šFuÎRªgeFÏg
 = code!=0;

799 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "fžm_g¿š_cÞour_´im¬›s" ); 
£i
.
m_fžmG¿šCÞourPrim¬›s
 = code;

800 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "fžm_g¿š_Œªsãr_ch¬aù”i¡ics" ); 
£i
.
m_fžmG¿šT¿nsãrCh¬aù”i¡ics
 = code;

801 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "fžm_g¿š_m©rix_cÛffs" ); 
£i
.
m_fžmG¿šM©rixCÛffs
 = code;

803 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
code
, "bËndšg_mode_id" ); 
£i
.
m_bËndšgModeId
 = code;

804 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
code
, "log2_sÿË_çùÜ" ); 
£i
.
m_log2SÿËFaùÜ
 = code;

805 
IÁ
 
c
=0; c<3; c++)

807 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "comp_mod–_´e£Á_æag[c]" ); 
£i
.
m_compMod–
[
c
].
bP»£ÁFÏg
 = code!=0;

809 
IÁ
 
c
=0; c<3; c++)

811 
SEIFžmG¿šCh¬aù”i¡ics
::
CompMod–
 &
cm
=
£i
.
m_compMod–
[
c
];

812 ià(
cm
.
bP»£ÁFÏg
)

814 
UIÁ
 
numIÁ’s™yIÁ”v®s
;

815 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "num_š‹ns™y_š‹rv®s_mšus1[c]" ); 
numIÁ’s™yIÁ”v®s
 = code+1;

816 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
code
, "num_mod–_v®ues_mšus1[c]" ); 
cm
.
numMod–V®ues
 = code+1;

817 
cm
.
š‹ns™yV®ues
.
	`»size
(
numIÁ’s™yIÁ”v®s
);

818 
UIÁ
 
š‹rv®
=0; iÁ”v®<
numIÁ’s™yIÁ”v®s
; interval++)

820 
SEIFžmG¿šCh¬aù”i¡ics
::
CompMod–IÁ’s™yV®ues
 &
cmiv
=
cm
.
š‹ns™yV®ues
[
š‹rv®
];

821 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "š‹ns™y_š‹rv®_low”_bound[c][i]" ); 
cmiv
.
š‹ns™yIÁ”v®Low”Bound
=code;

822 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "š‹ns™y_š‹rv®_uµ”_bound[c][i]" ); 
cmiv
.
š‹ns™yIÁ”v®Uµ”Bound
=code;

823 
cmiv
.
compMod–V®ue
.
	`»size
(
cm
.
numMod–V®ues
);

824 
UIÁ
 
j
=0; j<
cm
.
numMod–V®ues
; j++)

826 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
cmiv
.
compMod–V®ue
[
j
], "comp_model_value[c][i]" );

831 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fžm_g¿š_ch¬aù”i¡ics_³rsi¡’û_æag" ); 
£i
.
m_fžmG¿šCh¬aù”i¡icsP”si¡’ûFÏg
 = code!=0;

833 
	}
}

836 
Void
 
	gSEIR—d”
::
	$xP¬£SEIPo¡Fž‹rHšt
(
SEIPo¡Fž‹rHšt
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

838 
UIÁ
 
code
;

839 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

841 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fž‹r_hšt_size_y" ); 
£i
.
m_fž‹rHštSizeY
 = code;

842 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fž‹r_hšt_size_x" ); 
£i
.
m_fž‹rHštSizeX
 = code;

843 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
code
, "fž‹r_hšt_ty³" ); 
£i
.
m_fž‹rHštTy³
 = code;

845 
£i
.
m_bIsMÚochrome
 = (
¥s
->
	`g‘ChromaFÜm©Idc
(è=ð
CHROMA_400
);

846 cÚ¡ 
UIÁ
 
numChromaChªÃls
 = 
£i
.
m_bIsMÚochrome
 ? 1:3;

848 
£i
.
m_fž‹rHštV®ues
.
	`»size
(
numChromaChªÃls
 * sei.
m_fž‹rHštSizeX
 * sei.
m_fž‹rHštSizeY
);

849 
¡d
::
size_t
 
i
=0; i<
£i
.
m_fž‹rHštV®ues
.
	`size
(); i++)

851 
IÁ
 
v
;

852 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v
, "fž‹r_hšt_v®ue[][][]" ); 
£i
.
m_fž‹rHštV®ues
[
i
] = 
code
;

854 
	}
}

857 
Void
 
	gSEIR—d”
::
	$xP¬£SEITÚeM­pšgInfo
(
SEITÚeM­pšgInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

859 
IÁ
 
i
;

860 
UIÁ
 
v®
;

861 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

862 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "tÚe_m­_id" ); 
£i
.
m_tÚeM­Id
 = val;

863 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "tÚe_m­_ÿnûl_æag" ); 
£i
.
m_tÚeM­CªûlFÏg
 = val;

865 iàÐ!
£i
.
m_tÚeM­CªûlFÏg
 )

867 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "tÚe_m­_³rsi¡’û_æag" ); 
£i
.
m_tÚeM­P”si¡’ûFÏg
 = val;

868 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "coded_d©a_b™_d•th" ); 
£i
.
m_codedD©aB™D•th
 = val;

869 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "rg‘_b™_d•th" ); 
£i
.
m_rg‘B™D•th
 = val;

870 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "tÚe_m­_mod–_id" ); 
£i
.
m_mod–Id
 = val;

871 
£i
.
m_mod–Id
)

875 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "mš_v®ue" ); 
£i
.
m_mšV®ue
 = val;

876 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "max_v®ue" ); 
£i
.
m_maxV®ue
 = val;

881 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "sigmoid_midpošt" ); 
£i
.
m_sigmoidMidpošt
 = val;

882 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "sigmoid_width" ); 
£i
.
m_sigmoidWidth
 = val;

887 
UIÁ
 
num
 = 1u << 
£i
.
m_rg‘B™D•th
;

888 
£i
.
m_¡¬tOfCodedIÁ”v®
.
	`»size
(
num
+1);

889 
i
 = 0; i < 
num
; i++)

891 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ((Ð
£i
.
m_codedD©aB™D•th
 + 7 ) >> 3 ) << 3), 
v®
, "start_of_coded_interval[i]" );

892 
£i
.
m_¡¬tOfCodedIÁ”v®
[
i
] = 
v®
;

894 
£i
.
m_¡¬tOfCodedIÁ”v®
[
num
] = 1u << sei.
m_codedD©aB™D•th
;

899 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "num_pivÙs" ); 
£i
.
m_numPivÙs
 = val;

900 
£i
.
m_codedPivÙV®ue
.
	`»size
(£i.
m_numPivÙs
);

901 
£i
.
m_rg‘PivÙV®ue
.
	`»size
(£i.
m_numPivÙs
);

902 
i
 = 0; i < 
£i
.
m_numPivÙs
; i++ )

904 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ((Ð
£i
.
m_codedD©aB™D•th
 + 7 ) >> 3 ) << 3), 
v®
, "coded_pivot_value[i]" );

905 
£i
.
m_codedPivÙV®ue
[
i
] = 
v®
;

906 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ((Ð
£i
.
m_rg‘B™D•th
 + 7 ) >> 3 ) << 3), 
v®
, "target_pivot_value[i]" );

907 
£i
.
m_rg‘PivÙV®ue
[
i
] = 
v®
;

913 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "ÿm”a_iso_¥“d_idc" ); 
£i
.
m_ÿm”aIsoS³edIdc
 = val;

914 ifÐ
£i
.
m_ÿm”aIsoS³edIdc
 == 255)

916 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ÿm”a_iso_¥“d_v®ue" ); 
£i
.
m_ÿm”aIsoS³edV®ue
 = val;

918 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "exposu»_šdex_idc" ); 
£i
.
m_exposu»IndexIdc
 = val;

919 ifÐ
£i
.
m_exposu»IndexIdc
 == 255)

921 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "exposu»_šdex_v®ue" ); 
£i
.
m_exposu»IndexV®ue
 = val;

923 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "exposu»_com³n§tiÚ_v®ue_sign_æag" ); 
£i
.
m_exposu»Com³n§tiÚV®ueSignFÏg
 = val;

924 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "exposu»_com³n§tiÚ_v®ue_num”©Ü" ); 
£i
.
m_exposu»Com³n§tiÚV®ueNum”©Ü
 = val;

925 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "exposu»_com³n§tiÚ_v®ue_d’om_idc" ); 
£i
.
m_exposu»Com³n§tiÚV®ueD’omIdc
 = val;

926 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "»f_sü“n_lumšªû_wh™e" ); 
£i
.
m_»fSü“nLumšªûWh™e
 = val;

927 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ex‹nded_¿nge_wh™e_Ëv–" ); 
£i
.
m_ex‹ndedRªgeWh™eLev–
 = val;

928 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "nomš®_bÏck_Ëv–_code_v®ue" ); 
£i
.
m_nomš®BÏckLev–LumaCodeV®ue
 = val;

929 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "nomš®_wh™e_Ëv–_code_v®ue" ); 
£i
.
m_nomš®Wh™eLev–LumaCodeV®ue
= val;

930 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "ex‹nded_wh™e_Ëv–_code_v®ue" ); 
£i
.
m_ex‹ndedWh™eLev–LumaCodeV®ue
 = val;

935 
	`as£¹
(!"Undefined SEIToneMapModelId");

940 
	}
}

943 
Void
 
	gSEIR—d”
::
	$xP¬£SEIF¿mePackšg
(
SEIF¿mePackšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

945 
UIÁ
 
v®
;

946 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

948 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame_·ckšg_¬¿ngem’t_id" ); 
£i
.
m_¬¿ngem’tId
 = val;

949 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame_·ckšg_¬¿ngem’t_ÿnûl_æag" ); 
£i
.
m_¬¿ngem’tCªûlFÏg
 = val;

951 iàÐ!
£i
.
m_¬¿ngem’tCªûlFÏg
 )

953 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 7, 
v®
, "äame_·ckšg_¬¿ngem’t_ty³" ); 
£i
.
m_¬¿ngem’tTy³
 = val;

954 
	`as£¹
((
£i
.
m_¬¿ngem’tTy³
 > 2) && (sei.m_arrangementType < 6) );

956 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "qušcunx_§m¶šg_æag" ); 
£i
.
m_qušcunxSam¶šgFÏg
 = val;

958 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
v®
, "cÚ‹Á_š‹½»tiÚ_ty³" ); 
£i
.
m_cÚ‹ÁIÁ”´‘©iÚTy³
 = val;

959 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "¥©Ÿl_æpšg_æag" ); 
£i
.
m_¥©ŸlFlpšgFÏg
 = val;

960 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame0_æ³d_æag" ); 
£i
.
m_äame0Fl³dFÏg
 = val;

961 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "f›ld_v›ws_æag" ); 
£i
.
m_f›ldV›wsFÏg
 = val;

962 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "cu¼’t_äame_is_äame0_æag" ); 
£i
.
m_cu¼’tF¿meIsF¿me0FÏg
 = val;

963 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame0_£lf_cÚšed_æag" ); 
£i
.
m_äame0S–fCÚšedFÏg
 = val;

964 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame1_£lf_cÚšed_æag" ); 
£i
.
m_äame1S–fCÚšedFÏg
 = val;

966 iàÐ
£i
.
m_qušcunxSam¶šgFÏg
 =ð0 && sei.
m_¬¿ngem’tTy³
 != 5)

968 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "äame0_grid_pos™iÚ_x" ); 
£i
.
m_äame0GridPos™iÚX
 = val;

969 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "äame0_grid_pos™iÚ_y" ); 
£i
.
m_äame0GridPos™iÚY
 = val;

970 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "äame1_grid_pos™iÚ_x" ); 
£i
.
m_äame1GridPos™iÚX
 = val;

971 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "äame1_grid_pos™iÚ_y" ); 
£i
.
m_äame1GridPos™iÚY
 = val;

974 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "äame_·ckšg_¬¿ngem’t_»£rved_by‹" ); 
£i
.
m_¬¿ngem’tRe£rvedBy‹
 = val;

975 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "äame_·ckšg_¬¿ngem’t_³rsi¡’û_æag" ); 
£i
.
m_¬¿ngem’tP”si¡’ûFÏg
 = (val != 0);

977 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "up§m¶ed_a¥eù_¿tio_æag" ); 
£i
.
m_up§m¶edA¥eùR©io
 = val;

978 
	}
}

981 
Void
 
	gSEIR—d”
::
	$xP¬£SEIDi¥ÏyOr›Á©iÚ
(
SEIDi¥ÏyOr›Á©iÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

983 
UIÁ
 
v®
;

984 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

985 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "di¥Ïy_Ü›Á©iÚ_ÿnûl_æag" ); 
£i
.
ÿnûlFÏg
 = val;

986 ifÐ!
£i
.
ÿnûlFÏg
 )

988 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "hÜ_æ" ); 
£i
.
hÜFl
 = val;

989 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "v”_æ" ); 
£i
.
v”Fl
 = val;

990 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "ªtiþockwi£_rÙ©iÚ" ); 
£i
.
ªtiþockwi£RÙ©iÚ
 = val;

991 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "di¥Ïy_Ü›Á©iÚ_³rsi¡’û_æag" ); 
£i
.
³rsi¡’ûFÏg
 = val;

993 
	}
}

996 
Void
 
	gSEIR—d”
::
	$xP¬£SEIG»’M‘ad©aInfo
(
SEIG»’M‘ad©aInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
o¡»am
* 
pDecodedMes§geOuutSŒ—m
)

998 
UIÁ
 
code
;

999 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1001 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "green_metadata_type");

1002 
£i
.
m_g»’M‘ad©aTy³
 = 
code
;

1004 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "xsd_metric_type");

1005 
£i
.
m_xsdM‘ricTy³
 = 
code
;

1007 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "xsd_metric_value");

1008 
£i
.
m_xsdM‘ricV®ue
 = 
code
;

1009 
	}
}

1012 
Void
 
	gSEIR—d”
::
	$xP¬£SEISOPDesütiÚ
(
SEISOPDesütiÚ
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1014 
IÁ
 
iCode
;

1015 
UIÁ
 
uiCode
;

1016 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1018 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "sÝ_£q_·¿m‘”_£t_id" ); 
£i
.
m_sÝSeqP¬am‘”S‘Id
 = uiCode;

1019 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "num_pics_š_sÝ_mšus1" ); 
£i
.
m_numPicsInSÝMšus1
 = uiCode;

1020 
UIÁ
 
i
 = 0; i <ð
£i
.
m_numPicsInSÝMšus1
; i++)

1022 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
uiCode
, "sÝ_vþ_nut[i]" ); 
£i
.
m_sÝDescVþN®uTy³
[
i
] = uiCode;

1023 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
£i
.
m_sÝDescTempÜ®Id
[
i
], "sÝ_‹mpÜ®_id[i]" ); sei.m_sÝDescTempÜ®Id[i] = 
uiCode
;

1024 ià(
£i
.
m_sÝDescVþN®uTy³
[
i
] !ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 && sei.m_sÝDescVþN®uTy³[i] !ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
)

1026 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
£i
.
m_sÝDescStRpsIdx
[
i
], "sÝ_shÜt_‹rm_½s_idx[i]" ); sei.m_sÝDescStRpsIdx[i] = 
uiCode
;

1028 ià(
i
 > 0)

1030 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
iCode
, "sÝ_poc_d–[i]" ); 
£i
.
m_sÝDescPocD–
[
i
] = iCode;

1033 
	}
}

1036 
Void
 
	gSEIR—d”
::
	$xP¬£SEIAùiveP¬am‘”S‘s
(
SEIAùiveP¬am‘”S‘s
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1038 
UIÁ
 
v®
;

1039 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1041 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "aùive_video_·¿m‘”_£t_id"); 
£i
.
aùiveVPSId
 = val;

1042 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "£lf_cÚšed_cvs_æag"); 
£i
.
m_£lfCÚšedCvsFÏg
 = (val != 0);

1043 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "no_·¿m‘”_£t_upd©e_æag"); 
£i
.
m_noP¬am‘”S‘Upd©eFÏg
 = (val != 0);

1044 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "num_¥s_ids_mšus1"); 
£i
.
numSpsIdsMšus1
 = val;

1046 
£i
.
aùiveSeqP¬am‘”S‘Id
.
	`»size
(£i.
numSpsIdsMšus1
 + 1);

1047 
IÁ
 
i
=0; i < (
£i
.
numSpsIdsMšus1
 + 1); i++)

1049 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "aùive_£q_·¿m‘”_£t_id[i]"); 
£i
.
aùiveSeqP¬am‘”S‘Id
[
i
] = val;

1051 
	}
}

1054 
Void
 
	gSEIR—d”
::
	$xP¬£SEIDecodšgUn™Info
(
SEIDecodšgUn™Info
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1056 
UIÁ
 
v®
;

1057 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1058 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "decoding_unit_idx");

1059 
£i
.
m_decodšgUn™Idx
 = 
v®
;

1061 cÚ¡ 
TComVUI
 *
vui
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

1062 if(
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
())

1064 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, ( 
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘DuCpbRemov®D–ayL’gthMšus1
(è+ 1 ), 
v®
, "du_spt_cpb_removal_delay_increment");

1065 
£i
.
m_duS±CpbRemov®D–ay
 = 
v®
;

1069 
£i
.
m_duS±CpbRemov®D–ay
 = 0;

1071 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "dpb_ouut_du_d–ay_´e£Á_æag"); 
£i
.
m_dpbOuutDuD–ayP»£ÁFÏg
 = (val != 0);

1072 if(
£i
.
m_dpbOuutDuD–ayP»£ÁFÏg
)

1074 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘DpbOuutD–ayDuL’gthMšus1
(è+ 1, 
v®
, "pic_spt_dpb_output_du_delay");

1075 
£i
.
m_picS±DpbOuutDuD–ay
 = 
v®
;

1077 
	}
}

1080 
Void
 
	gSEIR—d”
::
	$xP¬£SEITempÜ®Lev–0Index
(
SEITempÜ®Lev–0Index
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1082 
UIÁ
 
v®
;

1083 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1084 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "‹mpÜ®_sub_Ïy”_z”o_idx" ); 
£i
.
Ž0Idx
 = val;

1085 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "œ­_pic_id" ); 
£i
.
¿pIdx
 = val;

1086 
	}
}

1089 
Void
 
	gSEIR—d”
::
	$xP¬£SEIDecodedPiùu»Hash
(
SEIDecodedPiùu»Hash
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1091 
UIÁ
 
by‹sR—d
 = 0;

1092 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1094 
UIÁ
 
v®
;

1095 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "hash_type");

1096 
£i
.
m‘hod
 = 
¡©ic_ÿ¡
<
HashTy³
>(
v®
); 
by‹sR—d
++;

1098 cÚ¡ 
TCh¬
 *
ŒaûSŒšg
="\0";

1099 
£i
.
m‘hod
)

1101 
HASHTYPE_MD5
: 
ŒaûSŒšg
="picture_md5"; ;

1102 
HASHTYPE_CRC
: 
ŒaûSŒšg
="picture_crc"; ;

1103 
HASHTYPE_CHECKSUM
: 
ŒaûSŒšg
="picture_checksum"; ;

1104 : 
	`as£¹
(
çl£
); ;

1107 ià(
pDecodedMes§geOuutSŒ—m
)

1109 (*
pDecodedMes§geOuutSŒ—m
è<< " " << 
¡d
::
	`£tw
(55è<< 
ŒaûSŒšg
 << ": " << std::
hex
 << std::
	`£tfžl
('0');

1112 
£i
.
m_piùu»Hash
.
hash
.
	`þ—r
();

1113 ;
by‹sR—d
 < 
·ylßdSize
; bytesRead++)

1115 
	`£i_»ad_code
Ð
NULL
, 8, 
v®
, 
ŒaûSŒšg
);

1116 
£i
.
m_piùu»Hash
.
hash
.
	`push_back
((
UCh¬
)
v®
);

1117 ià(
pDecodedMes§geOuutSŒ—m
)

1119 (*
pDecodedMes§geOuutSŒ—m
è<< 
¡d
::
	`£tw
(2è<< 
v®
;

1123 ià(
pDecodedMes§geOuutSŒ—m
)

1125 (*
pDecodedMes§geOuutSŒ—m
è<< 
¡d
::
dec
 << std::
	`£tfžl
(' ') << "\n";

1127 
	}
}

1130 
Void
 
	gSEIR—d”
::
	$xP¬£SEISÿÏbËNe¡šg
(
SEISÿÏbËNe¡šg
& 
£i
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1132 
UIÁ
 
uiCode
;

1133 
SEIMes§ges
 
£is
;

1134 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1136 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "b™¡»am_sub£t_æag" ); 
£i
.
m_b™SŒ—mSub£tFÏg
 = uiCode;

1137 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "Ã¡šg_Ý_æag" ); 
£i
.
m_Ã¡šgOpFÏg
 = uiCode;

1138 ià(
£i
.
m_Ã¡šgOpFÏg
)

1140 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "deçuÉ_Ý_æag" ); 
£i
.
m_deçuÉOpFÏg
 = uiCode;

1141 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "Ã¡šg_num_Ýs_mšus1" ); 
£i
.
m_Ã¡šgNumOpsMšus1
 = uiCode;

1142 
UIÁ
 
i
 = 
£i
.
m_deçuÉOpFÏg
; i <ð£i.
m_Ã¡šgNumOpsMšus1
; i++)

1144 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
uiCode
, "Ã¡šg_max_‹mpÜ®_id_¶us1[i]" ); 
£i
.
m_Ã¡šgMaxTempÜ®IdPlus1
[
i
] = uiCode;

1145 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "Ã¡šg_Ý_idx[i]" ); 
£i
.
m_Ã¡šgOpIdx
[
i
] = uiCode;

1150 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "®l_Ïy”s_æag" ); 
£i
.
m_®lLay”sFÏg
 = uiCode;

1151 ià(!
£i
.
m_®lLay”sFÏg
)

1153 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
uiCode
, "Ã¡šg_no_Ý_max_‹mpÜ®_id_¶us1" ); 
£i
.
m_Ã¡šgNoOpMaxTempÜ®IdPlus1
 = uiCode;

1154 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "Ã¡šg_num_Ïy”s_mšus1" ); 
£i
.
m_Ã¡šgNumLay”sMšus1
 = uiCode;

1155 
UIÁ
 
i
 = 0; i <ð
£i
.
m_Ã¡šgNumLay”sMšus1
; i++)

1157 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
uiCode
, "Ã¡šg_Ïy”_id[i]" ); 
£i
.
m_Ã¡šgLay”Id
[
i
] = uiCode;

1163  
m_pcB™¡»am
->
	`g‘NumB™sR—d
() % 8 != 0 )

1165 
UIÁ
 
code
;

1166 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "nesting_zero_bit" );

1172 if(
ÇlUn™Ty³
 =ð
NAL_UNIT_PREFIX_SEI
)

1174 
	`xR—dSEImes§ge
(
£i
.
m_Ã¡edSEIs
, 
ÇlUn™Ty³
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
SEI
::
´efix_£i_mes§ges
, 
¡d
::
	`¡ršg
("scalable‚ested SEI"));

1178 
	`xR—dSEImes§ge
(
£i
.
m_Ã¡edSEIs
, 
ÇlUn™Ty³
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
SEI
::
suffix_£i_mes§ges
, 
¡d
::
	`¡ršg
("scalable‚ested SEI"));

1180 } 
m_pcB™¡»am
->
	`g‘NumB™sLeá
() > 8);

1182 ià(
pDecodedMes§geOuutSŒ—m
)

1184 (*
pDecodedMes§geOuutSŒ—m
) << "End of scalable‚esting SEI message\n";

1186 
	}
}

1189 
Void
 
	gSEIR—d”
::
	$xP¬£SEIRegiÚReäeshInfo
(
SEIRegiÚReäeshInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1191 
UIÁ
 
v®
;

1192 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1193 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "»äeshed_»giÚ_æag" ); 
£i
.
m_gdrFÜegroundFÏg
 = val ? 1 : 0;

1194 
	}
}

1197 
Void
 
	gSEIR—d”
::
	$xP¬£SEINoDi¥Ïy
(
SEINoDi¥Ïy
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1199 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1200 
£i
.
m_noDi¥Ïy
 = 
Œue
;

1201 
	}
}

1204 
Void
 
	gSEIR—d”
::
	$xP¬£SEITimeCode
(
SEITimeCode
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1206 
UIÁ
 
code
;

1207 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1208 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
code
, "num_þock_ts"); 
£i
.
numClockTs
 = code;

1209 
IÁ
 
i
 = 0; i < 
£i
.
numClockTs
; i++)

1211 
TComSEITimeS‘
 
cu¼’tTimeS‘
;

1212 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "þock_time_¡amp_æag[i]"); 
cu¼’tTimeS‘
.
þockTimeSmpFÏg
 = code;

1213 if(
cu¼’tTimeS‘
.
þockTimeSmpFÏg
)

1215 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "nu™_f›ld_ba£d_æag"); 
cu¼’tTimeS‘
.
numUn™F›ldBa£dFÏg
 = code;

1216 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 5, 
code
, "couÁšg_ty³"); 
cu¼’tTimeS‘
.
couÁšgTy³
 = code;

1217 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "fuÎ_time¡amp_æag"); 
cu¼’tTimeS‘
.
fuÎTimeSmpFÏg
 = code;

1218 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "discÚtšu™y_æag"); 
cu¼’tTimeS‘
.
discÚtšu™yFÏg
 = code;

1219 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "út_drÝ³d_æag"); 
cu¼’tTimeS‘
.
útDrÝ³dFÏg
 = code;

1220 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 9, 
code
, "n_äames"); 
cu¼’tTimeS‘
.
numb”OfF¿mes
 = code;

1221 if(
cu¼’tTimeS‘
.
fuÎTimeSmpFÏg
)

1223 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
code
, "£cÚds_v®ue"); 
cu¼’tTimeS‘
.
£cÚdsV®ue
 = code;

1224 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
code
, "mšu‹s_v®ue"); 
cu¼’tTimeS‘
.
mšu‹sV®ue
 = code;

1225 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 5, 
code
, "hours_v®ue"); 
cu¼’tTimeS‘
.
hoursV®ue
 = code;

1229 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "£cÚds_æag"); 
cu¼’tTimeS‘
.
£cÚdsFÏg
 = code;

1230 if(
cu¼’tTimeS‘
.
£cÚdsFÏg
)

1232 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
code
, "£cÚds_v®ue"); 
cu¼’tTimeS‘
.
£cÚdsV®ue
 = code;

1233 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "mšu‹s_æag"); 
cu¼’tTimeS‘
.
mšu‹sFÏg
 = code;

1234 if(
cu¼’tTimeS‘
.
mšu‹sFÏg
)

1236 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 6, 
code
, "mšu‹s_v®ue"); 
cu¼’tTimeS‘
.
mšu‹sV®ue
 = code;

1237 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "hours_æag"); 
cu¼’tTimeS‘
.
hoursFÏg
 = code;

1238 if(
cu¼’tTimeS‘
.
hoursFÏg
)

1240 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 5, 
code
, "hours_v®ue"); 
cu¼’tTimeS‘
.
hoursV®ue
 = code;

1245 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 5, 
code
, "time_off£t_Ëngth"); 
cu¼’tTimeS‘
.
timeOff£tL’gth
 = code;

1246 if(
cu¼’tTimeS‘
.
timeOff£tL’gth
 > 0)

1248 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 
cu¼’tTimeS‘
.
timeOff£tL’gth
, 
code
, "time_offset_value");

1249 if((
code
 & (1 << (
cu¼’tTimeS‘
.
timeOff£tL’gth
-1))) == 0)

1251 
cu¼’tTimeS‘
.
timeOff£tV®ue
 = 
code
;

1255 
code
 &ð(1<< (
cu¼’tTimeS‘
.
timeOff£tL’gth
-1)) - 1;

1256 
cu¼’tTimeS‘
.
timeOff£tV®ue
 = ~
code
 + 1;

1260 
£i
.
timeS‘A¼ay
[
i
] = 
cu¼’tTimeS‘
;

1262 
	}
}

1265 
Void
 
	gSEIR—d”
::
	$xP¬£SEIMa¡”šgDi¥ÏyCÞourVÞume
(
SEIMa¡”šgDi¥ÏyCÞourVÞume
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1267 
UIÁ
 
code
;

1268 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1270 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_x[0]" ); 
£i
.
v®ues
.
´im¬›s
[0][0] = code;

1271 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_y[0]" ); 
£i
.
v®ues
.
´im¬›s
[0][1] = code;

1273 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_x[1]" ); 
£i
.
v®ues
.
´im¬›s
[1][0] = code;

1274 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_y[1]" ); 
£i
.
v®ues
.
´im¬›s
[1][1] = code;

1276 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_x[2]" ); 
£i
.
v®ues
.
´im¬›s
[2][0] = code;

1277 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "di¥Ïy_´im¬›s_y[2]" ); 
£i
.
v®ues
.
´im¬›s
[2][1] = code;

1280 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "wh™e_pošt_x" ); 
£i
.
v®ues
.
wh™ePošt
[0] = code;

1281 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "wh™e_pošt_y" ); 
£i
.
v®ues
.
wh™ePošt
[1] = code;

1283 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
code
, "max_di¥Ïy_ma¡”šg_lumšªû" ); 
£i
.
v®ues
.
maxLumšªû
 = code;

1284 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
code
, "mš_di¥Ïy_ma¡”šg_lumšªû" ); 
£i
.
v®ues
.
mšLumšªû
 = code;

1285 
	}
}

1288 
Void
 
	gSEIR—d”
::
	$xP¬£SEISegm’‹dReùF¿mePackšg
(
SEISegm’‹dReùF¿mePackšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1290 
UIÁ
 
v®
;

1291 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1292 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "£gm’‹d_»ù_äame_·ckšg_¬¿ngem’t_ÿnûl_æag" ); 
£i
.
m_¬¿ngem’tCªûlFÏg
 = val;

1293 ifÐ!
£i
.
m_¬¿ngem’tCªûlFÏg
 )

1295 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
v®
, "£gm’‹d_»ù_cÚ‹Á_š‹½»tiÚ_ty³" ); 
£i
.
m_cÚ‹ÁIÁ”´‘©iÚTy³
 = val;

1296 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "£gm’‹d_»ù_äame_·ckšg_¬¿ngem’t_³rsi¡’û" ); 
£i
.
m_¬¿ngem’tP”si¡’ûFÏg
 = val;

1298 
	}
}

1301 
Void
 
	gSEIR—d”
::
	$xP¬£SEITempMÙiÚCÚ¡¿štsTžeS‘s
(
SEITempMÙiÚCÚ¡¿šedTžeS‘s
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1303 
UIÁ
 
code
;

1304 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1305 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag"); 
£i
.
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
 = (code != 0);

1306 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "—ch_tže_Úe_tže_£t_æag"); 
£i
.
m_—ch_tže_Úe_tže_£t_æag
 = (code != 0);

1308 if(!
£i
.
m_—ch_tže_Úe_tže_£t_æag
)

1310 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "lim™ed_tže_£t_di¥Ïy_æag"); 
£i
.
m_lim™ed_tže_£t_di¥Ïy_æag
 = (code != 0);

1311 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "num_£ts_š_mes§ge_mšus1"); 
£i
.
	`£tNumb”OfTžeS‘s
(code + 1);

1313 if(
£i
.
	`g‘Numb”OfTžeS‘s
() != 0)

1315 
IÁ
 
i
 = 0; i < 
£i
.
	`g‘Numb”OfTžeS‘s
(); i++)

1317 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "mùs_id"); 
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_id
 = code;

1319 if(
£i
.
m_lim™ed_tže_£t_di¥Ïy_æag
)

1321 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "di¥Ïy_tže_£t_æag"); 
£i
.
	`tžeS‘D©a
(
i
).
m_di¥Ïy_tže_£t_æag
 = (code != 1);

1324 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "num_tže_»ùs_š_£t_mšus1"); 
£i
.
	`tžeS‘D©a
(
i
).
	`£tNumb”OfTžeReùs
(code + 1);

1326 
IÁ
 
j
=0; j<
£i
.
	`tžeS‘D©a
(
i
).
	`g‘Numb”OfTžeReùs
(); j++)

1328 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "tÝ_Ëá_tže_šdex"); 
£i
.
	`tžeS‘D©a
(
i
).
	`tÝLeáTžeIndex
(
j
) = code;

1329 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "bÙtom_right_tže_šdex"); 
£i
.
	`tžeS‘D©a
(
i
).
	`bÙtomRightTžeIndex
(
j
) = code;

1332 if(!
£i
.
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
)

1334 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "exaù_§m¶e_v®ue_m©ch_æag"); 
£i
.
	`tžeS‘D©a
(
i
).
m_exaù_§m¶e_v®ue_m©ch_æag
 = (code != 0);

1336 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "mùs_t›r_Ëv–_idc_´e£Á_æag"); 
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_Ëv–_idc_´e£Á_æag
 = (code != 0);

1338 if(
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_Ëv–_idc_´e£Á_æag
)

1340 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "mùs_t›r_æag"); 
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_æag
 = (code != 0);

1341 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "mùs_Ëv–_idc"); 
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_Ëv–_idc
 = code;

1348 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "max_mcs_t›r_Ëv–_idc_´e£Á_æag"); 
£i
.
m_max_mcs_t›r_Ëv–_idc_´e£Á_æag
 = code;

1349 if(
£i
.
m_max_mcs_t›r_Ëv–_idc_´e£Á_æag
)

1351 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "max_mùs_t›r_æag"); 
£i
.
m_max_mùs_t›r_æag
 = code;

1352 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "max_mùs_Ëv–_idc"); 
£i
.
m_max_mùs_Ëv–_idc
 = code;

1355 
	}
}

1357 #ià
MCTS_EXTRACTION


1358 
Void
 
	gSEIR—d”
::
	$xP¬£SEIMCTSExŒaùiÚInfoS‘
(
SEIMCTSExŒaùiÚInfoS‘
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1360 
UIÁ
 
code
;

1361 
UIÁ
 
numInfoS‘sMšus1
;

1362 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1364 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_£ts_š_mes§ge_mšus1"); 
numInfoS‘sMšus1
 = code;

1365 
IÁ
 
i
 = 0; i <ð
numInfoS‘sMšus1
; i++)

1367 
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
 
EIS
;

1369 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_mcts_sets_minus1[ i ]");

1370 
EIS
.
m_idxOfMùsInS‘
.
	`»size
(
code
 + 1);

1371 
IÁ
 
j
 = 0; j < 
EIS
.
m_idxOfMùsInS‘
.
	`size
(); j++)

1373 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_mcts_in_set_minus1[ i ][ j ]");

1374 
EIS
.
m_idxOfMùsInS‘
[
j
].
	`»size
(
code
 + 1);

1375 
IÁ
 
k
 = 0; k < 
EIS
.
m_idxOfMùsInS‘
[
j
].
	`size
(); k++)

1377 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "idx_of_mùs_š_£t[ i ][ j ][ k ]"); 
EIS
.
m_idxOfMùsInS‘
[
j
][
k
] = code;

1380 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "¦iû_»Üd”šg_’abËd_æag[ i ]"); 
EIS
.
m_¦iûReÜd”šgEÇbËdFÏg
 = (code != 0);

1381 ià(
EIS
.
m_¦iûReÜd”šgEÇbËdFÏg
)

1383 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_slice_segments_minus1[ i ]");

1384 
EIS
.
m_ouutSliûSegm’tAdd»ss
.
	`»size
(
code
 + 1);

1385 
IÁ
 
j
 = 0; j < 
EIS
.
m_ouutSliûSegm’tAdd»ss
.
	`size
(); j++)

1387 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "ouut_¦iû_£gm’t_add»ss[ i ][ j ]"); 
EIS
.
m_ouutSliûSegm’tAdd»ss
[
j
] = code;

1391 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_vps_in_info_set_minus1[i]");

1392 
EIS
.
m_vpsRb¥D©a
.
	`»size
(
code
 + 1);

1393 
EIS
.
m_vpsRb¥D©aL’gth
.
	`»size
(
code
 + 1);

1394 
IÁ
 
j
 = 0; j < 
EIS
.
m_vpsRb¥D©aL’gth
.
	`size
(); j++)

1396 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "vps_rb¥_d©a_Ëngth[i][j]"); 
EIS
.
m_vpsRb¥D©aL’gth
[
j
] = code;

1398 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_sps_in_info_set_minus1[i]");

1399 
EIS
.
m_¥sRb¥D©a
.
	`»size
(
code
 + 1);

1400 
EIS
.
m_¥sRb¥D©aL’gth
.
	`»size
(
code
 + 1);

1401 
IÁ
 
j
 = 0; j < 
EIS
.
m_¥sRb¥D©aL’gth
.
	`size
(); j++)

1403 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "¥s_rb¥_d©a_Ëngth[i][j]"); 
EIS
.
m_¥sRb¥D©aL’gth
[
j
] = code;

1405 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "num_pps_in_info_set_minus1[i]");

1406 
EIS
.
m_µsRb¥D©a
.
	`»size
(
code
 + 1);

1407 
EIS
.
m_µsNuhTempÜ®IdPlus1
.
	`»size
(
code
 + 1);

1408 
EIS
.
m_µsRb¥D©aL’gth
.
	`»size
(
code
 + 1);

1409 
IÁ
 
j
 = 0; j < 
EIS
.
m_µsRb¥D©aL’gth
.
	`size
(); j++)

1411 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "µs_nuh_‹mpÜ®_id_¶us1[i][j]"); 
EIS
.
m_µsNuhTempÜ®IdPlus1
[
j
] = code;

1412 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "¥s_rb¥_d©a_Ëngth[i][j]"); 
EIS
.
m_µsRb¥D©aL’gth
[
j
] = code;

1416 
m_pcB™¡»am
->
	`g‘NumB™sR—d
() % 8 != 0)

1418 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "mcts_alignment_bit_equal_to_zero");

1421 
IÁ
 
j
 = 0; j < 
EIS
.
m_vpsRb¥D©a
.
	`size
(); j++)

1423 
EIS
.
m_vpsRb¥D©a
[
j
].
	`»size
(EIS.
m_vpsRb¥D©aL’gth
[j]);

1424 
IÁ
 
k
 = 0; k < 
EIS
.
m_vpsRb¥D©aL’gth
[
j
]; k++)

1426 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "vps_rb¥_d©a_by‹[ i ][ j ][ k ]"); 
EIS
.
m_vpsRb¥D©a
[
j
][
k
] = code;

1429 
IÁ
 
j
 = 0; j < 
EIS
.
m_¥sRb¥D©a
.
	`size
(); j++)

1431 
EIS
.
m_¥sRb¥D©a
[
j
].
	`»size
(EIS.
m_¥sRb¥D©aL’gth
[j]);

1432 
IÁ
 
k
 = 0; k < 
EIS
.
m_¥sRb¥D©aL’gth
[
j
]; k++)

1434 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "¥s_rb¥_d©a_by‹[ i ][ j ][ k ]"); 
EIS
.
m_¥sRb¥D©a
[
j
][
k
] = code;

1437 
IÁ
 
j
 = 0; j < 
EIS
.
m_µsRb¥D©a
.
	`size
(); j++)

1439 
EIS
.
m_µsRb¥D©a
[
j
].
	`»size
(EIS.
m_µsRb¥D©aL’gth
[j]);

1440 
IÁ
 
k
 = 0; k < 
EIS
.
m_µsRb¥D©aL’gth
[
j
]; k++)

1442 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "µs_rb¥_d©a_by‹[ i ][ j ][ k ]"); 
EIS
.
m_µsRb¥D©a
[
j
][
k
] = code;

1445 
£i
.
m_MCTSExŒaùiÚInfoS‘s
.
	`push_back
(
EIS
);

1447 
	}
}

1451 
Void
 
	gSEIR—d”
::
	$xP¬£SEIChromaRe§m¶šgFž‹rHšt
(
SEIChromaRe§m¶šgFž‹rHšt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1453 
UIÁ
 
uiCode
;

1454 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1456 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "v”_chroma_fž‹r_idc"); 
£i
.
m_v”ChromaFž‹rIdc
 = uiCode;

1457 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "hÜ_chroma_fž‹r_idc"); 
£i
.
m_hÜChromaFž‹rIdc
 = uiCode;

1458 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "v”_fž‹ršg_f›ld_´oûssšg_æag"); 
£i
.
m_v”Fž‹ršgF›ldProûssšgFÏg
 = uiCode;

1459 if(
£i
.
m_v”ChromaFž‹rIdc
 =ð1 || sei.
m_hÜChromaFž‹rIdc
 == 1)

1461 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiCode
, "rg‘_fÜm©_idc"); 
£i
.
m_rg‘FÜm©Idc
 = uiCode;

1462 if(
£i
.
m_v”ChromaFž‹rIdc
 == 1)

1464 
UIÁ
 
numV”tiÿlFž‹rs
;

1465 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
numV”tiÿlFž‹rs
, "num_v”tiÿl_fž‹rs"); 
£i
.
m_v”Fž‹rCÛff
.
	`»size
(numVerticalFilters);

1466 if(
numV”tiÿlFž‹rs
 > 0)

1468 
IÁ
 
i
 = 0; i < 
numV”tiÿlFž‹rs
; i++)

1470 
UIÁ
 
v”T­L’gthMšus1
;

1471 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v”T­L’gthMšus1
, "v”_p_Ëngth_mšus_1"); 
£i
.
m_v”Fž‹rCÛff
[
i
].
	`»size
(verTapLengthMinus1+1);

1472 
IÁ
 
j
 = 0; j < (
v”T­L’gthMšus1
 + 1); j++)

1474 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
£i
.
m_v”Fž‹rCÛff
[
i
][
j
], "ver_filter_coeff");

1479 if(
£i
.
m_hÜChromaFž‹rIdc
 == 1)

1481 
UIÁ
 
numHÜizÚlFž‹rs
;

1482 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
numHÜizÚlFž‹rs
, "num_hÜizÚl_fž‹rs"); 
£i
.
m_hÜFž‹rCÛff
.
	`»size
(numHorizontalFilters);

1483 if(
numHÜizÚlFž‹rs
 > 0)

1485 
IÁ
 
i
 = 0; i < 
numHÜizÚlFž‹rs
; i++)

1487 
UIÁ
 
hÜT­L’gthMšus1
;

1488 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
hÜT­L’gthMšus1
, "hÜ_p_Ëngth_mšus_1"); 
£i
.
m_hÜFž‹rCÛff
[
i
].
	`»size
(horTapLengthMinus1+1);

1489 
IÁ
 
j
 = 0; j < (
hÜT­L’gthMšus1
 + 1); j++)

1491 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
£i
.
m_hÜFž‹rCÛff
[
i
][
j
], "hor_filter_coeff");

1497 
	}
}

1500 
Void
 
	gSEIR—d”
::
	$xP¬£SEIKÃeFunùiÚInfo
(
SEIKÃeFunùiÚInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1502 
IÁ
 
i
;

1503 
UIÁ
 
v®
;

1504 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1506 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "kÃe_funùiÚ_id" ); 
£i
.
m_kÃeId
 = val;

1507 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "kÃe_funùiÚ_ÿnûl_æag" ); 
£i
.
m_kÃeCªûlFÏg
 = val;

1508 iàÐ!
£i
.
m_kÃeCªûlFÏg
 )

1510 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "kÃe_funùiÚ_³rsi¡’û_æag" ); 
£i
.
m_kÃeP”si¡’ûFÏg
 = val;

1511 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "šput_d_¿nge" ); 
£i
.
m_kÃeIÅutD¿nge
 = val;

1512 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "šput_di¥_lumšªû" ); 
£i
.
m_kÃeIÅutDi¥Lumšªû
 = val;

1513 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ouut_d_¿nge" ); 
£i
.
m_kÃeOuutD¿nge
 = val;

1514 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ouut_di¥_lumšªû" ); 
£i
.
m_kÃeOuutDi¥Lumšªû
 = val;

1515 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "num_kÃe_pošts_mšus1" ); 
£i
.
m_kÃeNumKÃePoštsMšus1
 = val;

1516 
	`as£¹
Ð
£i
.
m_kÃeNumKÃePoštsMšus1
 > 0 );

1517 
£i
.
m_kÃeIÅutKÃePošt
.
	`»size
(£i.
m_kÃeNumKÃePoštsMšus1
+1);

1518 
£i
.
m_kÃeOuutKÃePošt
.
	`»size
(£i.
m_kÃeNumKÃePoštsMšus1
+1);

1519 
i
 = 0; i <ð
£i
.
m_kÃeNumKÃePoštsMšus1
; i++ )

1521 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 10, 
v®
, "šput_kÃe_pošt" ); 
£i
.
m_kÃeIÅutKÃePošt
[
i
] = val;

1522 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 10, 
v®
, "ouut_kÃe_pošt" ); 
£i
.
m_kÃeOuutKÃePošt
[
i
] = val;

1525 
	}
}

1527 
Void
 
	gSEIR—d”
::
	$xP¬£SEICÚ‹ÁCÞourVÞume
(
SEICÚ‹ÁCÞourVÞume
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1529 
IÁ
 
i
;

1530 
UIÁ
 
v®
;

1531 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1533 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_ÿnûl_æag" ); 
£i
.
m_ccvCªûlFÏg
 = val;

1534 iàÐ!
£i
.
m_ccvCªûlFÏg
 )

1536 
IÁ
 
iV®
;

1537 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_³rsi¡’û_æag" ); 
£i
.
m_ccvP”si¡’ûFÏg
 = val;

1538 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_´im¬›s_´e£Á_æag" ); 
£i
.
m_ccvPrim¬›sP»£ÁFÏg
 = val;

1539 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_mš_lumšªû_v®ue_´e£Á_æag" ); 
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
 = val;

1540 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_max_lumšªû_v®ue_´e£Á_æag" ); 
£i
.
m_ccvMaxLumšªûV®ueP»£ÁFÏg
 = val;

1541 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "ccv_avg_lumšªû_v®ue_´e£Á_æag" ); 
£i
.
m_ccvAvgLumšªûV®ueP»£ÁFÏg
 = val;

1543 ià(
£i
.
m_ccvPrim¬›sP»£ÁFÏg
)

1545 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

1547 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
iV®
, "ccv_´im¬›s_x[i]" ); 
£i
.
m_ccvPrim¬›sX
[
i
] = iVal;

1548 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
iV®
, "ccv_´im¬›s_y[i]" ); 
£i
.
m_ccvPrim¬›sY
[
i
] = iVal;

1551 ià(
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
)

1553 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ccv_mš_lumšªû_v®ue" ); 
£i
.
m_ccvMšLumšªûV®ue
 = val;

1555 ià(
£i
.
m_ccvMaxLumšªûV®ueP»£ÁFÏg
)

1557 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ccv_max_lumšªû_v®ue" ); 
£i
.
m_ccvMaxLumšªûV®ue
 = val;

1559 ià(
£i
.
m_ccvAvgLumšªûV®ueP»£ÁFÏg
)

1561 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "ccv_avg_lumšªû_v®ue" ); 
£i
.
m_ccvAvgLumšªûV®ue
 = val;

1564 
	}
}

1566 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


1567 
Void
 
	gSEIR—d”
::
	$xP¬£SEIShu‰”IÁ”v®
(
SEIShu‰”IÁ”v®Info
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1569 
IÁ
 
i
;

1570 
UIÁ
 
v®
;

1571 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1572 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "sii_time_sÿË"); 
£i
.
m_siiTimeSÿË
 = val;

1573 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "fixed_shu‰”_š‹rv®_w™hš_þvs_æag"); 
£i
.
m_siiFixedSIw™hšCLVS
 = val;

1574 ià(
£i
.
m_siiFixedSIw™hšCLVS
)

1576 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "sii_num_un™s_š_shu‰”_š‹rv®"); 
£i
.
m_siiNumUn™sInShu‰”IÁ”v®
 = val;

1580 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "sii_max_sub_Ïy”s_mšus1 "); 
£i
.
m_siiMaxSubLay”sMšus1
 = val;

1581 
£i
.
m_siiSubLay”NumUn™sInSI
.
	`»size
(£i.
m_siiMaxSubLay”sMšus1
 + 1);

1582 
i
 = 0; i <ð
£i
.
m_siiMaxSubLay”sMšus1
; i++)

1584 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "sub_layer_num_units_in_shutter_interval[ i ]");

1585 
£i
.
m_siiSubLay”NumUn™sInSI
[
i
] = 
v®
;

1588 
	}
}

1591 
Void
 
	gSEIR—d”
::
	$xP¬£SEIEquœeùªguÏrProjeùiÚ
(
SEIEquœeùªguÏrProjeùiÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1593 
UIÁ
 
v®
;

1594 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1596 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "”p_ÿnûl_æag" ); 
£i
.
m_”pCªûlFÏg
 = val;

1597 ifÐ!
£i
.
m_”pCªûlFÏg
 )

1599 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "”p_³rsi¡’û_æag" ); 
£i
.
m_”pP”si¡’ûFÏg
 = val;

1600 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "”p_gu¬d_bªd_æag" ); 
£i
.
m_”pGu¬dBªdFÏg
 = val;

1601 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 2, 
v®
, "erp_reserved_zero_2bits" );

1602 iàÐ
£i
.
m_”pGu¬dBªdFÏg
 == 1)

1604 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "”p_gu¬d_bªd_ty³" ); 
£i
.
m_”pGu¬dBªdTy³
 = val;

1605 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "”p_Ëá_gu¬d_bªd_width" ); 
£i
.
m_”pLeáGu¬dBªdWidth
 = val;

1606 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "”p_right_gu¬d_bªd_width"); 
£i
.
m_”pRightGu¬dBªdWidth
 = val;

1609 
	}
}

1611 
Void
 
	gSEIR—d”
::
	$xP¬£SEISph”eRÙ©iÚ
(
SEISph”eRÙ©iÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1613 
UIÁ
 
v®
;

1614 
IÁ
 
sv®
;

1615 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1616 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "¥h”e_rÙ©iÚ_ÿnûl_æag" ); 
£i
.
m_¥h”eRÙ©iÚCªûlFÏg
 = val;

1617 ifÐ!
£i
.
m_¥h”eRÙ©iÚCªûlFÏg
 )

1619 
	`£i_»ad_æag
 ( 
pDecodedMes§geOuutSŒ—m
, 
v®
, "¥h”e_rÙ©iÚ_³rsi¡’û_æag" ); 
£i
.
m_¥h”eRÙ©iÚP”si¡’ûFÏg
 = val;

1620 
	`£i_»ad_code
 ( 
pDecodedMes§geOuutSŒ—m
, 6, 
v®
, "sphere_rotation_reserved_zero_6bits" );

1621 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "¥h”e_rÙ©iÚ_yaw" ); 
£i
.
m_¥h”eRÙ©iÚYaw
 = sval;

1622 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "¥h”e_rÙ©iÚ_p™ch" ); 
£i
.
m_¥h”eRÙ©iÚP™ch
 = sval;

1623 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "¥h”e_rÙ©iÚ_rÞl" ); 
£i
.
m_¥h”eRÙ©iÚRÞl
 = sval;

1625 
	}
}

1627 
Void
 
	gSEIR—d”
::
	$xP¬£SEIOmniV›wpÜt
(
SEIOmniV›wpÜt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1629 
UIÁ
 
code
;

1630 
IÁ
 
scode
;

1631 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1632 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 10, 
code
, "omni_v›wpÜt_id" ); 
£i
.
m_omniV›wpÜtId
 = code;

1633 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "omni_v›wpÜt_ÿnûl_æag" ); 
£i
.
m_omniV›wpÜtCªûlFÏg
 = code;

1634 ià(!
£i
.
m_omniV›wpÜtCªûlFÏg
)

1636 
UIÁ
 
numRegiÚs
;

1637 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
code
, "omni_v›wpÜt_³rsi¡’û_æag" ); 
£i
.
m_omniV›wpÜtP”si¡’ûFÏg
 = code;

1638 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
numRegiÚs
, "omni_viewport_cnt_minus1" );‚umRegions++;

1639 
£i
.
m_omniV›wpÜtRegiÚs
.
	`»size
(
numRegiÚs
);

1640 
UIÁ
 
»giÚ
=0;„egiÚ<
numRegiÚs
;„egion++)

1642 
SEIOmniV›wpÜt
::
OmniV›wpÜt
 &
v›wpÜt
 = 
£i
.
m_omniV›wpÜtRegiÚs
[
»giÚ
];

1643 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
scode
, "omni_v›wpÜt_azimuth_ûÁ»" ); 
v›wpÜt
.
azimuthC’Œe
 = scode;

1644 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
scode
, "omni_v›wpÜt_–ev©iÚ_ûÁ»" ); 
v›wpÜt
.
–ev©iÚC’Œe
 = scode;

1645 
	`£i_»ad_scode
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
scode
, "omni_v›wpÜt_tžt_ûÁ»" ); 
v›wpÜt
.
tžtC’Œe
 = 
code
;

1646 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
code
, "omni_v›wpÜt_hÜ_¿nge" ); 
v›wpÜt
.
hÜRªge
 = code;

1647 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
code
, "omni_v›wpÜt_v”_¿nge" ); 
v›wpÜt
.
v”Rªge
 = code;

1652 
£i
.
m_omniV›wpÜtRegiÚs
.
	`þ—r
();

1653 
£i
.
m_omniV›wpÜtP”si¡’ûFÏg
=
çl£
;

1655 
	}
}

1657 
Void
 
	gSEIR—d”
::
	$xP¬£SEIAÂÙ©edRegiÚs
(
SEIAÂÙ©edRegiÚs
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1659 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1660 
UIÁ
 
v®
;

1662 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_ÿnûl_æag"); 
£i
.
m_hdr
.
m_ÿnûlFÏg
 = val;

1663 ià(!
£i
.
m_hdr
.
m_ÿnûlFÏg
)

1665 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_nÙ_Ýtimized_fÜ_v›wšg_æag"); 
£i
.
m_hdr
.
m_nÙO±imizedFÜV›wšgFÏg
 = val;

1666 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_Œue_mÙiÚ_æag"); 
£i
.
m_hdr
.
m_ŒueMÙiÚFÏg
 = val;

1667 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_ocþuded_objeù_æag"); 
£i
.
m_hdr
.
m_ocþudedObjeùFÏg
 = val;

1668 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_·¹Ÿl_objeù_æag_´e£Á_æag"); 
£i
.
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
 = val;

1669 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_Ïb–_´e£Á_æag"); 
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
 = val;

1670 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_cÚfid’û_šfo_´e£Á_æag"); 
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
 = val;

1671 ià(
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1673 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "¬_objeù_cÚfid’û_Ëngth_mšus_1"); 
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
 = (val + 1);

1675 ià(
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1677 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_Ïb–_Ïnguage_´e£Á_æag"); 
£i
.
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
 = val;

1678 ià(
£i
.
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
)

1681 
m_pcB™¡»am
->
	`g‘NumB™sR—d
() % 8 != 0)

1683 
UIÁ
 
code
;

1684 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "ar_bit_equal_to_zero");

1686 
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
.
	`þ—r
();

1689 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "ar_label_language");

1690 ià(
v®
)

1692 
	`as£¹
(
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
.
	`size
()<256);

1693 
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
.
	`push_back
(()
v®
);

1695 } 
v®
 != '\0');

1699 
UIÁ
 
numLab–Upd©es
;

1700 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
numLab–Upd©es
, "ar_num_label_updates");

1701 
	`as£¹
(
numLab–Upd©es
<256);

1703 
£i
.
m_ªnÙ©edLab–s
.
	`þ—r
();

1704 
£i
.
m_ªnÙ©edLab–s
.
	`»size
(
numLab–Upd©es
);

1705 autØ
™
=
£i
.
m_ªnÙ©edLab–s
.
	`begš
(); it!=£i.m_ªnÙ©edLab–s.
	`’d
(); it++)

1707 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚLab–
 &
¬
 = 
™
->
£cÚd
;

1708 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_Ïb–_idx[]"); 
™
->
fœ¡
 = val;

1709 
	`as£¹
(
v®
<256);

1710 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_Ïb–_ÿnûl_æag"); 
¬
.
Ïb–V®id
 = !val;

1711 ià(
¬
.
Ïb–V®id
)

1713 
¬
.
Ïb–
.
	`þ—r
();

1715 
m_pcB™¡»am
->
	`g‘NumB™sR—d
() % 8 != 0)

1717 
UIÁ
 
code
;

1718 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "ar_bit_equal_to_zero");

1722 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "ar_label[]");

1723 ià(
v®
)

1725 
	`as£¹
(
¬
.
Ïb–
.
	`size
()<256);

1726 
¬
.
Ïb–
.
	`push_back
(()
v®
);

1728 } 
v®
 != '\0');

1732 
UIÁ
 
numObjUpd©es
;

1733 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
numObjUpd©es
, "ar_num_object_updates");

1734 
	`as£¹
(
numObjUpd©es
<256);

1735 
£i
.
m_ªnÙ©edRegiÚs
.
	`þ—r
();

1736 
£i
.
m_ªnÙ©edRegiÚs
.
	`»size
(
numObjUpd©es
);

1737 autØ
™
=
£i
.
m_ªnÙ©edRegiÚs
.
	`begš
(); it!=£i.m_ªnÙ©edRegiÚs.
	`’d
(); it++)

1739 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_idx"); 
™
->
fœ¡
=val;

1740 
	`as£¹
(
v®
<256);

1741 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
 &
¬
 = 
™
->
£cÚd
;

1742 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_ÿnûl_æag"); 
¬
.
objeùCªûlFÏg
 = val;

1743 
¬
.
objeùLab–V®id
=
çl£
;

1744 
¬
.
boundšgBoxV®id
=
çl£
;

1746 ià(!
¬
.
objeùCªûlFÏg
)

1748 ià(
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1750 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_Ïb–_upd©e_æag"); 
¬
.
objeùLab–V®id
 = val;

1751 ià(
¬
.
objeùLab–V®id
)

1753 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_objeù_Ïb–_idx"); 
¬
.
objLab–Idx
 = val;

1754 
	`as£¹
(
v®
<256);

1757 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_boundšg_box_upd©e_æag"); 
¬
.
boundšgBoxV®id
 = val;

1758 ià(
¬
.
boundšgBoxV®id
)

1760 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "¬_boundšg_box_tÝ"); 
¬
.
boundšgBoxTÝ
 = val;

1761 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "¬_boundšg_box_Ëá"); 
¬
.
boundšgBoxLeá
 = val;

1762 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "¬_boundšg_box_width"); 
¬
.
boundšgBoxWidth
 = val;

1763 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "¬_boundšg_box_height"); 
¬
.
boundšgBoxHeight
 = val;

1764 ià(
£i
.
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
)

1766 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "¬_·¹Ÿl_objeù_æag"); 
¬
.
·¹ŸlObjeùFÏg
 = val;

1768 ià(
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1770 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
, 
v®
, "¬_objeù_cÚfid’û"); 
¬
.
objeùCÚfid’û
 = val;

1776 
	}
}

1778 
Void
 
	gSEIR—d”
::
	$xP¬£SEICubem­ProjeùiÚ
(
SEICubem­ProjeùiÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1780 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1781 
UIÁ
 
v®
;

1783 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "cmp_ÿnûl_æag"); 
£i
.
m_cmpCªûlFÏg
 = val;

1784 ià(!
£i
.
m_cmpCªûlFÏg
)

1786 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "cmp_³rsi¡’û_æag"); 
£i
.
m_cmpP”si¡’ûFÏg
 = val;

1788 
	}
}

1792 
Void
 
	gSEIR—d”
::
	$xP¬£SEIRegiÚWi£Packšg
(
SEIRegiÚWi£Packšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1794 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1795 
UIÁ
 
v®
;

1797 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "rwp_ÿnûl_æag" ); 
£i
.
m_rwpCªûlFÏg
 = val;

1798 ià(!
£i
.
m_rwpCªûlFÏg
)

1800 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "rwp_³rsi¡’û_æag" ); 
£i
.
m_rwpP”si¡’ûFÏg
 = val;

1801 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "cÚ¡™u’t_piùu»_m©chšg_æag" ); 
£i
.
m_cÚ¡™u’tPiùu»M©chšgFÏg
 = val;

1802 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 5, 
v®
, "rwp_reserved_zero_5bits" );

1803 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "num_·cked_»giÚs" ); 
£i
.
m_numPackedRegiÚs
 = val;

1804 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "´oj_piùu»_width" ); 
£i
.
m_´ojPiùu»Width
 = val;

1805 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "´oj_piùu»_height" ); 
£i
.
m_´ojPiùu»Height
 = val;

1806 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_piùu»_width" ); 
£i
.
m_·ckedPiùu»Width
 = val;

1807 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_piùu»_height" ); 
£i
.
m_·ckedPiùu»Height
 = val;

1809 
£i
.
m_rwpT¿nsfÜmTy³
.
	`»size
(£i.
m_numPackedRegiÚs
);

1810 
£i
.
m_rwpGu¬dBªdFÏg
.
	`»size
(£i.
m_numPackedRegiÚs
);

1811 
£i
.
m_´ojRegiÚWidth
.
	`»size
(£i.
m_numPackedRegiÚs
);

1812 
£i
.
m_´ojRegiÚHeight
.
	`»size
(£i.
m_numPackedRegiÚs
);

1813 
£i
.
m_rwpProjRegiÚTÝ
.
	`»size
(£i.
m_numPackedRegiÚs
);

1814 
£i
.
m_´ojRegiÚLeá
.
	`»size
(£i.
m_numPackedRegiÚs
);

1815 
£i
.
m_·ckedRegiÚWidth
.
	`»size
(£i.
m_numPackedRegiÚs
);

1816 
£i
.
m_·ckedRegiÚHeight
.
	`»size
(£i.
m_numPackedRegiÚs
);

1817 
£i
.
m_·ckedRegiÚTÝ
.
	`»size
(£i.
m_numPackedRegiÚs
);

1818 
£i
.
m_·ckedRegiÚLeá
.
	`»size
(£i.
m_numPackedRegiÚs
);

1819 
£i
.
m_rwpLeáGu¬dBªdWidth
.
	`»size
(£i.
m_numPackedRegiÚs
);

1820 
£i
.
m_rwpRightGu¬dBªdWidth
.
	`»size
(£i.
m_numPackedRegiÚs
);

1821 
£i
.
m_rwpTÝGu¬dBªdHeight
.
	`»size
(£i.
m_numPackedRegiÚs
);

1822 
£i
.
m_rwpBÙtomGu¬dBªdHeight
.
	`»size
(£i.
m_numPackedRegiÚs
);

1823 
£i
.
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
.
	`»size
(£i.
m_numPackedRegiÚs
);

1824 
£i
.
m_rwpGu¬dBªdTy³
.
	`»size
(4*£i.
m_numPackedRegiÚs
);

1826  
IÁ
 
i
=0; i < 
£i
.
m_numPackedRegiÚs
; i++ )

1828 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
v®
, "rwp_reserved_zero_4bits" );

1829 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "rwp_tT¿nsfÜm_ty³" ); 
£i
.
m_rwpT¿nsfÜmTy³
[
i
] = val;

1830 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "rwp_gu¬d_bªd_æag" ); 
£i
.
m_rwpGu¬dBªdFÏg
[
i
] = val;

1831 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "´oj_»giÚ_width" ); 
£i
.
m_´ojRegiÚWidth
[
i
] = val;

1832 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "´oj_»giÚ_height" ); 
£i
.
m_´ojRegiÚHeight
[
i
] = val;

1833 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "rwp_´oj_»giÚTÝ" ); 
£i
.
m_rwpProjRegiÚTÝ
[
i
] = val;

1834 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "´oj_»giÚ_Ëá" ); 
£i
.
m_´ojRegiÚLeá
[
i
] = val;

1835 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_»giÚ_width" ); 
£i
.
m_·ckedRegiÚWidth
[
i
] = val;

1836 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_»giÚ_height" ); 
£i
.
m_·ckedRegiÚHeight
[
i
] = val;

1837 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_»giÚ_tÝ" ); 
£i
.
m_·ckedRegiÚTÝ
[
i
] = val;

1838 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "·cked_»giÚ_Ëá" ); 
£i
.
m_·ckedRegiÚLeá
[
i
] = val;

1839 ifÐ
£i
.
m_rwpGu¬dBªdFÏg
[
i
] )

1841 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "rwp_Ëá_gu¬d_bªd_width" ); 
£i
.
m_rwpLeáGu¬dBªdWidth
[
i
] = val;

1842 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "rwp_right_gu¬d_bªd_width" ); 
£i
.
m_rwpRightGu¬dBªdWidth
[
i
] = val;

1843 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "rwp_tÝ_gu¬d_bªd_height" ); 
£i
.
m_rwpTÝGu¬dBªdHeight
[
i
] = val;

1844 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "rwp_bÙtom_gu¬d_bªd_height" ); 
£i
. 
m_rwpBÙtomGu¬dBªdHeight
[
i
] = val;

1845 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
v®
, "rwp_gu¬d_bªd_nÙ_u£d_fÜP»d_æag" ); 
£i
.
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
[
i
] = val;

1846  
IÁ
 
j
=0; j < 4; j++ )

1848 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "rwp_gu¬d_bªd_ty³" ); 
£i
.
m_rwpGu¬dBªdTy³
[
i
*4 + 
j
] = val;

1850 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "rwp_guard_band_reserved_zero_3bits" );

1854 
	}
}

1856 
Void
 
	gSEIR—d”
::
	$xP¬£SEIFisheyeVideoInfo
(
SEIFisheyeVideoInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1858 
UIÁ
 
v®
;

1860 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1861 
£i
.
v®ues
 = 
	`TComSEIFisheyeVideoInfo
();

1863 
TComSEIFisheyeVideoInfo
 &
šfo
=
£i
.
v®ues
;

1865 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "fisheye_ÿnûl_æag"); 
šfo
.
m_fisheyeCªûlFÏg
 = val;

1866 ià(!
šfo
.
m_fisheyeCªûlFÏg
)

1868 
IÁ
 
sv®
;

1870 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
v®
, "fisheye_³rsi¡’û_æag"); 
šfo
.
m_fisheyeP”si¡’ûFÏg
 = val;

1871 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "fisheye_v›w_dim’siÚ_idc"); 
šfo
.
m_fisheyeV›wDim’siÚIdc
 = val;

1872 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 3, 
v®
, "fisheye_reserved_zero_3bits");

1873 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
v®
, "fisheye_num_active_area_minus1");

1874 
šfo
.
m_fisheyeAùiveA»as
.
	`»size
(
v®
+1);

1876 
¡d
::
size_t
 
i
 = 0; i < 
šfo
.
m_fisheyeAùiveA»as
.
	`size
(); i++)

1878 
TComSEIFisheyeVideoInfo
::
AùiveA»aInfo
 &
¬—
=
šfo
.
m_fisheyeAùiveA»as
[
i
];

1879 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_cœcuÏr_»giÚ_ûÁ»_x[i]"); 
¬—
.
m_fisheyeCœcuÏrRegiÚC’ŒeX
 = val;

1880 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_cœcuÏr_»giÚ_ûÁ»_y[i]"); 
¬—
.
m_fisheyeCœcuÏrRegiÚC’ŒeY
 = val;

1881 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_»ù_»giÚ_tÝ[i]"); 
¬—
.
m_fisheyeReùRegiÚTÝ
 = val;

1882 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_»ù_»giÚ_Ëá[i]"); 
¬—
.
m_fisheyeReùRegiÚLeá
 = val;

1883 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_»ù_»giÚ_width[i]"); 
¬—
.
m_fisheyeReùRegiÚWidth
 = val;

1884 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_»ù_»giÚ_Height[i]"); 
¬—
.
m_fisheyeReùRegiÚHeight
 = val;

1885 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_cœcuÏr_»giÚ_¿dius[i]"); 
¬—
.
m_fisheyeCœcuÏrRegiÚRadius
 = val;

1886 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_sûÃ_¿dius[i]"); 
¬—
.
m_fisheyeSûÃRadius
 = val;

1888 
	`£i_»ad_scode
(
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "fisheye_ÿm”a_ûÁ»_azimuth[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeAzimuth
 = sval;

1889 
	`£i_»ad_scode
(
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "fisheye_ÿm”a_ûÁ»_–ev©iÚ[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeEËv©iÚ
 = sval;

1890 
	`£i_»ad_scode
(
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "fisheye_ÿm”a_ûÁ»_tžt[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeTžt
 = sval;

1892 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_ÿm”a_ûÁ»_off£t_x[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeOff£tX
 = val;

1893 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_ÿm”a_ûÁ»_off£t_y[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeOff£tY
 = val;

1894 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_ÿm”a_ûÁ»_off£t_z[i]"); 
¬—
.
m_fisheyeCam”aC’ŒeOff£tZ
 = val;

1895 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
v®
, "fisheye_f›ld_of_v›w[i]"); 
¬—
.
m_fisheyeF›ldOfV›w
 = val;

1896 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
v®
, "fisheye_num_polynomial_coeffs[i]");

1897 
¬—
.
m_fisheyePÞynomŸlCÛff
.
	`»size
(
v®
);

1899 
¡d
::
size_t
 
j
 = 0; j < 
¬—
.
m_fisheyePÞynomŸlCÛff
.
	`size
(); j++)

1901 
	`£i_»ad_scode
(
pDecodedMes§geOuutSŒ—m
, 32, 
sv®
, "fisheye_pÞynomŸl_cÛff[i][j]"); 
¬—
.
m_fisheyePÞynomŸlCÛff
[
j
] = sval;

1905 
	}
}

1907 
Void
 
	gSEIR—d”
::
	$xP¬£SEICÞourRem­pšgInfo
(
SEICÞourRem­pšgInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
)

1909 
UIÁ
 
uiV®
;

1910 
IÁ
 
iV®
;

1911 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

1913 
	`£i_»ad_uvlc
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_id" ); 
£i
.
m_cÞourRem­Id
 = uiVal;

1914 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_ÿnûl_æag" ); 
£i
.
m_cÞourRem­CªûlFÏg
 = uiVal;

1915 ifÐ!
£i
.
m_cÞourRem­CªûlFÏg
 )

1917 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_³rsi¡’û_æag" ); 
£i
.
m_cÞourRem­P”si¡’ûFÏg
 = uiVal;

1918 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_video_sigÇl_šfo_´e£Á_æag" ); 
£i
.
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
 = uiVal;

1919 iàÐ
£i
.
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
 )

1921 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_fuÎ_¿nge_æag" ); 
£i
.
m_cÞourRem­FuÎRªgeFÏg
 = uiVal;

1922 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "cÞour_»m­_´im¬›s" ); 
£i
.
m_cÞourRem­Prim¬›s
 = uiVal;

1923 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "cÞour_»m­_Œªsãr_funùiÚ" ); 
£i
.
m_cÞourRem­T¿nsãrFunùiÚ
 = uiVal;

1924 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "cÞour_»m­_m©rix_cÛffic›Ás" ); 
£i
.
m_cÞourRem­M©rixCÛffic›Ás
 = uiVal;

1926 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "cÞour_»m­_šput_b™_d•th" ); 
£i
.
m_cÞourRem­IÅutB™D•th
 = uiVal;

1927 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "cÞour_»m­_b™_d•th" ); 
£i
.
m_cÞourRem­B™D•th
 = uiVal;

1929  
IÁ
 
c
=0 ; c<3 ; c++ )

1931 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "´e_lut_num_v®_mšus1[c]" ); 
£i
.
m_´eLutNumV®Mšus1
[
c
] = (uiVal==0) ? 1 : uiVal;

1932 
£i
.
m_´eLut
[
c
].
	`»size
(£i.
m_´eLutNumV®Mšus1
[c]+1);

1933 ifÐ
uiV®
> 0 )

1935  
IÁ
 
i
=0 ; i<=
£i
.
m_´eLutNumV®Mšus1
[
c
] ; i++ )

1937 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, (Ð
£i
.
m_cÞourRem­IÅutB™D•th
 + 7 ) >> 3 ) << 3, 
uiV®
, "´e_lut_coded_v®ue[c][i]" ); sei.
m_´eLut
[
c
][
i
].
codedV®ue
 = uiVal;

1938 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, (Ð
£i
.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, 
uiV®
, "´e_lut_rg‘_v®ue[c][i]" ); sei.
m_´eLut
[
c
][
i
].
rg‘V®ue
 = uiVal;

1943 
£i
.
m_´eLut
[
c
][0].
codedV®ue
 = 0;

1944 
£i
.
m_´eLut
[
c
][0].
rg‘V®ue
 = 0;

1945 
£i
.
m_´eLut
[
c
][1].
codedV®ue
 = (1 << sei.
m_cÞourRem­IÅutB™D•th
) - 1 ;

1946 
£i
.
m_´eLut
[
c
][1].
rg‘V®ue
 = (1 << sei.
m_cÞourRem­B™D•th
) - 1 ;

1950 
	`£i_»ad_æag
Ð
pDecodedMes§geOuutSŒ—m
, 
uiV®
, "cÞour_»m­_m©rix_´e£Á_æag" ); 
£i
.
m_cÞourRem­M©rixP»£ÁFÏg
 = uiVal;

1951 ifÐ
£i
.
m_cÞourRem­M©rixP»£ÁFÏg
 )

1953 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 4, 
uiV®
, "log2_m©rix_d’om" ); 
£i
.
m_log2M©rixD’om
 = uiVal;

1954  
IÁ
 
c
=0 ; c<3 ; c++ )

1956  
IÁ
 
i
=0 ; i<3 ; i++ )

1958 
	`£i_»ad_svlc
Ð
pDecodedMes§geOuutSŒ—m
, 
iV®
, "cÞour_»m­_cÛffs[c][i]" ); 
£i
.
m_cÞourRem­CÛffs
[
c
][
i
] = iVal;

1964 
£i
.
m_log2M©rixD’om
 = 10;

1965  
IÁ
 
c
=0 ; c<3 ; c++ )

1967  
IÁ
 
i
=0 ; i<3 ; i++ )

1969 
£i
.
m_cÞourRem­CÛffs
[
c
][
i
] = (c==iè<< sei.
m_log2M©rixD’om
;

1973  
IÁ
 
c
=0 ; c<3 ; c++ )

1975 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, 8, 
uiV®
, "po¡_lut_num_v®_mšus1[c]" ); 
£i
.
m_po¡LutNumV®Mšus1
[
c
] = (uiVal==0) ? 1 : uiVal;

1976 
£i
.
m_po¡Lut
[
c
].
	`»size
(£i.
m_po¡LutNumV®Mšus1
[c]+1);

1977 ifÐ
uiV®
 > 0 )

1979  
IÁ
 
i
=0 ; i<=
£i
.
m_po¡LutNumV®Mšus1
[
c
] ; i++ )

1981 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, (Ð
£i
.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, 
uiV®
, "po¡_lut_coded_v®ue[c][i]" ); sei.
m_po¡Lut
[
c
][
i
].
codedV®ue
 = uiVal;

1982 
	`£i_»ad_code
Ð
pDecodedMes§geOuutSŒ—m
, (Ð
£i
.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, 
uiV®
, "po¡_lut_rg‘_v®ue[c][i]" ); sei.
m_po¡Lut
[
c
][
i
].
rg‘V®ue
 = uiVal;

1987 
£i
.
m_po¡Lut
[
c
][0].
codedV®ue
 = 0;

1988 
£i
.
m_po¡Lut
[
c
][0].
rg‘V®ue
 = 0;

1989 
£i
.
m_po¡Lut
[
c
][1].
rg‘V®ue
 = (1 << sei.
m_cÞourRem­B™D•th
) - 1;

1990 
£i
.
m_po¡Lut
[
c
][1].
codedV®ue
 = (1 << sei.
m_cÞourRem­B™D•th
) - 1;

1994 
	}
}

1997 
Void
 
	gSEIR—d”
::
	$xP¬£SEIDeš‹¾aûF›ldId’tifiÿtiÚ
Ð
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

1999 
UIÁ
 
code
;

2000 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2002 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "deš‹¾aûd_piùu»_sourû_·r™y_æag"); 
£i
.
m_deš‹¾aûdPiùu»SourûP¬™yFÏg
 = code!=0;

2003 
	}
}

2006 
Void
 
	gSEIR—d”
::
	$xP¬£SEICÚ‹ÁLightLev–Info
Ð
SEICÚ‹ÁLightLev–Info
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

2008 
UIÁ
 
code
;

2009 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2011 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "max_cÚ‹Á_light_Ëv–"); 
£i
.
m_maxCÚ‹ÁLightLev–
 = code;

2012 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "max_pic_av”age_light_Ëv–"); 
£i
.
m_maxPicAv”ageLightLev–
 = code;

2013 
	}
}

2016 
Void
 
	gSEIR—d”
::
	$xP¬£SEID•’d’tRAPIndiÿtiÚ
Ð
SEID•’d’tRAPIndiÿtiÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

2018 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2019 
	}
}

2022 
Void
 
	gSEIR—d”
::
	$xP¬£SEICodedRegiÚCom¶‘iÚ
Ð
SEICodedRegiÚCom¶‘iÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

2024 
UIÁ
 
code
;

2025 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2027 
	`£i_»ad_uvlc
(
pDecodedMes§geOuutSŒ—m
, 
code
, "Ãxt_£gm’t_add»ss"); 
£i
.
m_ÃxtSegm’tAdd»ss
= code;

2028 ià(
code
)

2030 
	`£i_»ad_æag
(
pDecodedMes§geOuutSŒ—m
, 
code
, "šd•’d’t_¦iû_£gm’t_æag"); 
£i
.
m_šd•’d’tSliûSegm’tFÏg
 = code!=0;

2034 
£i
.
m_šd•’d’tSliûSegm’tFÏg
=
çl£
;

2036 
	}
}

2039 
Void
 
	gSEIR—d”
::
	$xP¬£SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
& 
£i
, 
UIÁ
 
·ylßdSize
, 
o¡»am
* 
pDecodedMes§geOuutSŒ—m
)

2041 
UIÁ
 
code
;

2042 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2044 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
code
, "´eã¼ed_Œªsãr_ch¬aù”i¡ics"); 
£i
.
m_´eã¼edT¿nsãrCh¬aù”i¡ics
 = code;

2045 
	}
}

2048 
Void
 
	gSEIR—d”
::
	$xP¬£SEIAmb›ÁV›wšgEnvœÚm’t
Ð
SEIAmb›ÁV›wšgEnvœÚm’t
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

2050 
UIÁ
 
code
;

2051 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2053 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 32, 
code
, "amb›Á_žlumšªû"); 
£i
.
m_amb›ÁIÎumšªû
= code;

2054 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "amb›Á_light_x"); 
£i
.
m_amb›ÁLightX
 = (
UShÜt
)code;

2055 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
code
, "amb›Á_light_y"); 
£i
.
m_amb›ÁLightY
 = (
UShÜt
)code;

2056 
	}
}

2057 
Void
 
	gSEIR—d”
::
	$xP¬£SEIRegiÚ®Ne¡šg
Ð
SEIRegiÚ®Ne¡šg
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 )

2059 
UIÁ
 
uiCode
;

2060 
	`ouut_£i_mes§ge_h—d”
(
£i
, 
pDecodedMes§geOuutSŒ—m
, 
·ylßdSize
);

2061 
UIÁ
 
numRegiÚs
, 
numSEIs
;

2063 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
uiCode
, "regional_nesting_id");

2064 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "»giÚ®_Ã¡šg_num_»ù_»giÚs"); 
numRegiÚs
 = uiCode;

2066 
£i
.
	`þ—rRegiÚs
();

2067 
UIÁ
 
i
 = 0; i < 
numRegiÚs
; i++)

2069 
RNSEIWšdow
 
»giÚ
;

2070 
IÁ
 
lOff£t
, 
rOff£t
, 
tOff£t
, 
bOff£t
, 
»giÚId
;

2071 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "»giÚ®_Ã¡šg_»ù_»giÚ_id"); 
»giÚId
 = uiCode;

2072 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
uiCode
, "»giÚ®_Ã¡šg_»ù_Ëá_off£t"); 
lOff£t
 = uiCode;

2073 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
uiCode
, "»giÚ®_Ã¡šg_»ù_right_off£t"); 
rOff£t
 = uiCode;

2074 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
uiCode
, "»giÚ®_Ã¡šg_»ù_tÝ_off£t"); 
tOff£t
 = uiCode;

2075 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 16, 
uiCode
, "»giÚ®_Ã¡šg_»ù_bÙtom_off£t"); 
bOff£t
 = uiCode;

2076 
»giÚ
.
	`£tRegiÚId
(
»giÚId
);

2077 
»giÚ
.
	`£tWšdow
(
lOff£t
, 
rOff£t
, 
tOff£t
, 
bOff£t
);

2079 
£i
.
	`addRegiÚ
(&
»giÚ
);

2081 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "num_£i_mes§ges_š_»giÚ®_Ã¡šg_mšus1"); 
numSEIs
 = uiCode + 1;

2082 
UIÁ
 
i
 = 0; i < 
numSEIs
; i++)

2084 
SEIRegiÚ®Ne¡šg
::
SEILi¡OfIndiûs
 
£iW™hRegiÚIndiûs
;

2085 
UIÁ
 
numRegiÚsFÜSEI
;

2086 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "num_»giÚs_fÜ_£i_mes§ge[i]"); 
numRegiÚsFÜSEI
 = uiCode;

2087 
UIÁ
 
j
 = 0; j < 
numRegiÚsFÜSEI
; j++)

2089 
	`£i_»ad_code
(
pDecodedMes§geOuutSŒ—m
, 8, 
uiCode
, "regional_nesting_sei_region_idx[i][j]");

2090 
£iW™hRegiÚIndiûs
.
m_li¡OfIndiûs
.
	`push_back
(
uiCode
);

2093 
SEIMes§ges
 
£iReg
;

2094 
	`xR—dSEImes§ge
(
£iReg
, 
NAL_UNIT_PREFIX_SEI
, 
¥s
, 
pDecodedMes§geOuutSŒ—m
, 
SEI
::
»giÚ®_Ã¡šg_£i_mes§ges
, 
¡d
::
	`¡ršg
(""));

2095 
£iW™hRegiÚIndiûs
.
m_£iMes§ge
 = 
£iReg
.
	`äÚt
();

2096 
£i
.
	`addRegiÚ®SEI
Ð
£iW™hRegiÚIndiûs
 ) ;

2098 
	}
}

	@source/Lib/TLibDecoder/SEIread.h

39 #iâdeà
__SEIREAD__


40 
	#__SEIREAD__


	)

42 #ià
_MSC_VER
 > 1000

43 #´agm¨
Úû


49 
	~"TLibCommÚ/SEI.h
"

50 
þass
 
	gTComIÅutB™¡»am
;

53 þas 
	cSEIR—d”
: 
public
 
SyÁaxEËm’tP¬£r


55 
public
:

56 
	$SEIR—d”
() {};

57 
vœtu®
 ~
	$SEIR—d”
(è{
	}
};

58 
Void
 
·r£SEImes§ge
(
TComIÅutB™¡»am
* 
bs
, 
SEIMes§ges
& 
£is
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

60 
	g´Ùeùed
:

61 
Void
 
xR—dSEImes§ge
 (
SEIMes§ges
& 
£is
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
, cÚ¡ 
veùÜ
<
SEI
::
PaylßdTy³
>& 
®lowedSeiTy³s
, std::
¡ršg
 cÚ¡ &
ty³Name
);

62 
Void
 
xR—dSEIPaylßdD©a
 (
IÁ
 cÚ¡ 
·ylßdTy³
, IÁ cÚ¡ 
·ylßdSize
, 
SEI
 *&
£i
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
, std::
¡ršg
 cÚ¡ &
ty³Name
);

63 
Void
 
xP¬£SEIBufãršgP”iod
 (
SEIBufãršgP”iod
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

64 
Void
 
xP¬£SEIPiùu»Timšg
 (
SEIPiùu»Timšg
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

65 
Void
 
xP¬£SEIPªSÿnReù
 (
SEIPªSÿnReù
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

66 
Void
 
xP¬£SEIFžËrPaylßd
 (
SEIFžËrPaylßd
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

67 
Void
 
xP¬£SEIU£rD©aRegi¡”ed
 (
SEIU£rD©aRegi¡”ed
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

68 
Void
 
xP¬£SEIU£rD©aUÄegi¡”ed
 (
SEIU£rD©aUÄegi¡”ed
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

69 
Void
 
xP¬£SEIRecov”yPošt
 (
SEIRecov”yPošt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

70 
Void
 
xP¬£SEISûÃInfo
 (
SEISûÃInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

71 
Void
 
xP¬£SEIPiùu»SÇpshÙ
 (
SEIPiùu»SÇpshÙ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

72 
Void
 
xP¬£SEIProg»ssiveRefšem’tSegm’tS¹
(
SEIProg»ssiveRefšem’tSegm’tS¹
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

73 
Void
 
xP¬£SEIProg»ssiveRefšem’tSegm’tEnd
(
SEIProg»ssiveRefšem’tSegm’tEnd
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

74 
Void
 
xP¬£SEIFžmG¿šCh¬aù”i¡ics
 (
SEIFžmG¿šCh¬aù”i¡ics
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

75 
Void
 
xP¬£SEIPo¡Fž‹rHšt
 (
SEIPo¡Fž‹rHšt
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

76 
Void
 
xP¬£SEITÚeM­pšgInfo
 (
SEITÚeM­pšgInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

77 
Void
 
xP¬£SEIF¿mePackšg
 (
SEIF¿mePackšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

78 
Void
 
xP¬£SEIDi¥ÏyOr›Á©iÚ
 (
SEIDi¥ÏyOr›Á©iÚ
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

79 
Void
 
xP¬£SEIG»’M‘ad©aInfo
 (
SEIG»’M‘ad©aInfo
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

80 
Void
 
xP¬£SEISOPDesütiÚ
 (
SEISOPDesütiÚ
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

81 
Void
 
xP¬£SEIAùiveP¬am‘”S‘s
 (
SEIAùiveP¬am‘”S‘s
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

82 
Void
 
xP¬£SEIDecodšgUn™Info
 (
SEIDecodšgUn™Info
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

83 
Void
 
xP¬£SEITempÜ®Lev–0Index
 (
SEITempÜ®Lev–0Index
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

84 
Void
 
xP¬£SEIDecodedPiùu»Hash
 (
SEIDecodedPiùu»Hash
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

85 
Void
 
xP¬£SEISÿÏbËNe¡šg
 (
SEISÿÏbËNe¡šg
& 
£i
, cÚ¡ 
N®Un™Ty³
 
ÇlUn™Ty³
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

86 
Void
 
xP¬£SEIRegiÚReäeshInfo
 (
SEIRegiÚReäeshInfo
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

87 
Void
 
xP¬£SEINoDi¥Ïy
 (
SEINoDi¥Ïy
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

88 
Void
 
xP¬£SEITimeCode
 (
SEITimeCode
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

89 
Void
 
xP¬£SEIMa¡”šgDi¥ÏyCÞourVÞume
 (
SEIMa¡”šgDi¥ÏyCÞourVÞume
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

90 
Void
 
xP¬£SEISegm’‹dReùF¿mePackšg
 (
SEISegm’‹dReùF¿mePackšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

91 
Void
 
xP¬£SEITempMÙiÚCÚ¡¿štsTžeS‘s
 (
SEITempMÙiÚCÚ¡¿šedTžeS‘s
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

92 #ià
MCTS_EXTRACTION


93 
Void
 
xP¬£SEIMCTSExŒaùiÚInfoS‘
 (
SEIMCTSExŒaùiÚInfoS‘
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

95 
Void
 
xP¬£SEIChromaRe§m¶šgFž‹rHšt
 (
SEIChromaRe§m¶šgFž‹rHšt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

96 
Void
 
xP¬£SEIKÃeFunùiÚInfo
 (
SEIKÃeFunùiÚInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

97 
Void
 
xP¬£SEICÚ‹ÁCÞourVÞume
 (
SEICÚ‹ÁCÞourVÞume
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

98 
Void
 
xP¬£SEIEquœeùªguÏrProjeùiÚ
 (
SEIEquœeùªguÏrProjeùiÚ
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

99 
Void
 
xP¬£SEISph”eRÙ©iÚ
 (
SEISph”eRÙ©iÚ
 &
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

100 
Void
 
xP¬£SEIOmniV›wpÜt
 (
SEIOmniV›wpÜt
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

101 
Void
 
xP¬£SEICubem­ProjeùiÚ
 (
SEICubem­ProjeùiÚ
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

102 
Void
 
xP¬£SEIAÂÙ©edRegiÚs
 (
SEIAÂÙ©edRegiÚs
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

103 
Void
 
xP¬£SEIRegiÚWi£Packšg
 (
SEIRegiÚWi£Packšg
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

104 
Void
 
xP¬£SEIFisheyeVideoInfo
(
SEIFisheyeVideoInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

105 
Void
 
xP¬£SEICÞourRem­pšgInfo
 (
SEICÞourRem­pšgInfo
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

106 
Void
 
xP¬£SEIDeš‹¾aûF›ldId’tifiÿtiÚ
(
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
& 
£i
,
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

107 
Void
 
xP¬£SEICÚ‹ÁLightLev–Info
 (
SEICÚ‹ÁLightLev–Info
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

108 
Void
 
xP¬£SEID•’d’tRAPIndiÿtiÚ
 (
SEID•’d’tRAPIndiÿtiÚ
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

109 
Void
 
xP¬£SEICodedRegiÚCom¶‘iÚ
 (
SEICodedRegiÚCom¶‘iÚ
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

110 
Void
 
xP¬£SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

111 
Void
 
xP¬£SEIAmb›ÁV›wšgEnvœÚm’t
 (
SEIAmb›ÁV›wšgEnvœÚm’t
& 
£i
, 
UIÁ
 
·yLßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

112 
Void
 
xP¬£SEIRegiÚ®Ne¡šg
 ( 
SEIRegiÚ®Ne¡šg
& 
£i
, 
UIÁ
 
·ylßdSize
, cÚ¡ 
TComSPS
* 
¥s
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
 );

113 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


114 
Void
 
xP¬£SEIShu‰”IÁ”v®
 (
SEIShu‰”IÁ”v®Info
& 
£i
, 
UIÁ
 
·ylßdSize
, 
¡d
::
o¡»am
 *
pDecodedMes§geOuutSŒ—m
);

116 
Void
 
£i_»ad_scode
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
 
uiL’gth
, 
IÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

117 
Void
 
£i_»ad_code
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
 
uiL’gth
, UIÁ& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

118 
Void
 
£i_»ad_uvlc
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

119 
Void
 
£i_»ad_svlc
(
¡d
::
o¡»am
 *
pOS
, 
IÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

120 
Void
 
£i_»ad_æag
(
¡d
::
o¡»am
 *
pOS
, 
UIÁ
& 
ruiCode
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

	@source/Lib/TLibDecoder/SyntaxElementParser.cpp

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComRom.h
"

43 
	~"TLibCommÚ/TComB™SŒ—m.h
"

44 
	~"SyÁaxEËm’tP¬£r.h
"

45 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


46 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

49 #ià
ENC_DEC_TRACE


51 
Void
 
	$xT¿ûAcûssUn™D–im™”
 ()

53 
	`årštf
Ð
g_hT¿û
, "=========== Access Unit Delimiter ===========\n");

54 
	}
}

56 
Void
 
	$xT¿ûFžËrD©a
 ()

58 
	`årštf
Ð
g_hT¿û
, "=========== Filler Data ===========\n");

59 
	}
}

65 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
!=0

67 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dSCodeChk
 ( 
UIÁ
 
Ëngth
, 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ IÁ 
mšV®Inþ
, cÚ¡ IÁ 
maxV®Inþ
 )

69 
	`READ_SCODE
(
Ëngth
, 
v®
, 
pSymbÞName
);

70 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
v®
, 
pSymbÞName
, 
mšV®Inþ
, 
maxV®Inþ
);

71 
	}
}

73 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dCodeChk
 ( 
UIÁ
 
Ëngth
, UIÁ& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 )

75 
	`READ_CODE
(
Ëngth
, 
v®
, 
pSymbÞName
);

76 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
v®
, 
pSymbÞName
, 
mšV®Inþ
, 
maxV®Inþ
);

77 
	}
}

79 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dUvlcChk
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 )

81 
	`READ_UVLC
(
v®
, 
pSymbÞName
);

82 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
v®
, 
pSymbÞName
, 
mšV®Inþ
, 
maxV®Inþ
);

83 
	}
}

85 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dSvlcChk
 ( 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ IÁ 
mšV®Inþ
, cÚ¡ IÁ 
maxV®Inþ
 )

87 
	`READ_SVLC
(
v®
, 
pSymbÞName
);

88 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
v®
, 
pSymbÞName
, 
mšV®Inþ
, 
maxV®Inþ
);

89 
	}
}

91 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dFÏgChk
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 )

93 
	`READ_FLAG
(
v®
, 
pSymbÞName
);

94 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
v®
, 
pSymbÞName
, 
mšV®Inþ
, 
maxV®Inþ
);

95 
	}
}

101 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


102 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dSCode
 (
UIÁ
 
uiL’gth
, 
IÁ
& 
rV®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

104 
Void
 
SyÁaxEËm’tP¬£r
::
	$xR—dSCode
 (
UIÁ
 
uiL’gth
, 
IÁ
& 
rV®ue
)

107 
UIÁ
 
v®
;

108 
	`as£¹
 ( 
uiL’gth
 > 0 && uiLength<=32);

109 
m_pcB™¡»am
->
	`»ad
 (
uiL’gth
, 
v®
);

110 
rV®ue
ð
uiL’gth
>=32 ? 
	`IÁ
(
v®
è: ( (-IÁÐv® & (
	`UIÁ
(1)<<(uiLength-1)))) | Int(val) );

112 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


113 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
pSymbÞName
, 
uiL’gth
, 
rV®ue
);

115 #ià
ENC_DEC_TRACE


116 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

117 ià(
uiL’gth
 < 10)

119 
	`årštf
Ð
g_hT¿û
, "%-50 i(%dè : %d\n", 
pSymbÞName
, 
uiL’gth
, 
rV®ue
 );

123 
	`årštf
Ð
g_hT¿û
, "%-50 i(%dè: %d\n", 
pSymbÞName
, 
uiL’gth
, 
rV®ue
 );

125 
	`fæush
 ( 
g_hT¿û
 );

127 
	}
}

129 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


130 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dCode
 (
UIÁ
 
uiL’gth
, UIÁ& 
rV®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

132 
Void
 
SyÁaxEËm’tP¬£r
::
	$xR—dCode
 (
UIÁ
 
uiL’gth
, UIÁ& 
rV®ue
)

135 
	`as£¹
 ( 
uiL’gth
 > 0 );

136 
m_pcB™¡»am
->
	`»ad
 (
uiL’gth
, 
rV®ue
);

137 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


138 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
pSymbÞName
, 
uiL’gth
, 
rV®ue
);

140 #ià
ENC_DEC_TRACE


141 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

142 ià(
uiL’gth
 < 10)

144 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %u\n", 
pSymbÞName
, 
uiL’gth
, 
rV®ue
 );

148 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè: %u\n", 
pSymbÞName
, 
uiL’gth
, 
rV®ue
 );

150 
	`fæush
 ( 
g_hT¿û
 );

152 
	}
}

155 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


156 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dUvlc
Ð
UIÁ
& 
rV®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

158 
Void
 
SyÁaxEËm’tP¬£r
::
	$xR—dUvlc
Ð
UIÁ
& 
rV®ue
)

161 
UIÁ
 
uiV®
 = 0;

162 
UIÁ
 
uiCode
 = 0;

163 
UIÁ
 
uiL’gth
;

164 
m_pcB™¡»am
->
	`»ad
Ð1, 
uiCode
 );

165 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


166 
UIÁ
 
tÙ®L’
=1;

169 ifÐ0 =ð
uiCode
 )

171 
uiL’gth
 = 0;

173  ! ( 
uiCode
 & 1 ))

175 
m_pcB™¡»am
->
	`»ad
Ð1, 
uiCode
 );

176 
uiL’gth
++;

179 
m_pcB™¡»am
->
	`»ad
Ð
uiL’gth
, 
uiV®
 );

181 
uiV®
 +ð(1 << 
uiL’gth
)-1;

182 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


183 
tÙ®L’
+=
uiL’gth
+uiLength;

187 
rV®ue
 = 
uiV®
;

188 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


189 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
pSymbÞName
, 
	`IÁ
(
tÙ®L’
), 
rV®ue
);

192 #ià
ENC_DEC_TRACE


193 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

194 
	`årštf
Ð
g_hT¿û
, "%-50 ue(vè: %u\n", 
pSymbÞName
, 
rV®ue
 );

195 
	`fæush
 ( 
g_hT¿û
 );

197 
	}
}

199 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


200 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dSvlc
Ð
IÁ
& 
rV®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

202 
Void
 
SyÁaxEËm’tP¬£r
::
	$xR—dSvlc
Ð
IÁ
& 
rV®ue
)

205 
UIÁ
 
uiB™s
 = 0;

206 
m_pcB™¡»am
->
	`»ad
Ð1, 
uiB™s
 );

207 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


208 
UIÁ
 
tÙ®L’
=1;

210 ifÐ0 =ð
uiB™s
 )

212 
UIÁ
 
uiL’gth
 = 0;

214  ! ( 
uiB™s
 & 1 ))

216 
m_pcB™¡»am
->
	`»ad
Ð1, 
uiB™s
 );

217 
uiL’gth
++;

220 
m_pcB™¡»am
->
	`»ad
Ð
uiL’gth
, 
uiB™s
 );

222 
uiB™s
 +ð(1 << 
uiL’gth
);

223 
rV®ue
 = ( 
uiB™s
 & 1è? -(
IÁ
)(uiBits>>1) : (Int)(uiBits>>1);

224 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


225 
tÙ®L’
+=
uiL’gth
+uiLength;

230 
rV®ue
 = 0;

232 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


233 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
pSymbÞName
, 
	`IÁ
(
tÙ®L’
), 
rV®ue
);

236 #ià
ENC_DEC_TRACE


237 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

238 
	`årštf
Ð
g_hT¿û
, "%-50 £(vè: %d\n", 
pSymbÞName
, 
rV®ue
 );

239 
	`fæush
 ( 
g_hT¿û
 );

242 
	}
}

244 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


245 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dFÏg
 (
UIÁ
& 
rV®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

247 
Void
 
SyÁaxEËm’tP¬£r
::
	$xR—dFÏg
 (
UIÁ
& 
rV®ue
)

250 
m_pcB™¡»am
->
	`»ad
Ð1, 
rV®ue
 );

251 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


252 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
pSymbÞName
, 1, 
	`IÁ
(
rV®ue
));

255 #ià
ENC_DEC_TRACE


256 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

257 
	`årštf
Ð
g_hT¿û
, "%-50 u(1è : %d\n", 
pSymbÞName
, 
rV®ue
 );

258 
	`fæush
 ( 
g_hT¿û
 );

260 
	}
}

262 
Void
 
	gSyÁaxEËm’tP¬£r
::
	$xR—dRb¥T¿žšgB™s
()

264 
UIÁ
 
b™
;

265 
	`READ_FLAG
Ð
b™
, "rbsp_stop_one_bit");

266 
	`as£¹
 (
b™
==1);

267 
IÁ
 
út
 = 0;

268 
m_pcB™¡»am
->
	`g‘NumB™sUÁžBy‹AligÃd
())

270 
	`READ_FLAG
Ð
b™
, "rbsp_alignment_zero_bit");

271 
	`as£¹
 (
b™
==0);

272 
út
++;

274 
	`as£¹
(
út
<8);

275 
	}
}

277 
Void
 
	gAUDR—d”
::
	$·r£AcûssUn™D–im™”
(
TComIÅutB™¡»am
* 
bs
, 
UIÁ
 &
picTy³
)

279 
	`£tB™¡»am
(
bs
);

281 #ià
ENC_DEC_TRACE


282 
	`xT¿ûAcûssUn™D–im™”
();

285 
	`READ_CODE
 (3, 
picTy³
, "pic_type");

286 
	`xR—dRb¥T¿žšgB™s
();

287 
	}
}

289 
Void
 
	gFDR—d”
::
	$·r£FžËrD©a
(
TComIÅutB™¡»am
* 
bs
, 
UIÁ
 &
fdSize
)

291 
	`£tB™¡»am
(
bs
);

292 #ià
ENC_DEC_TRACE


293 
	`xT¿ûFžËrD©a
();

295 
UIÁ
 
ffBy‹
;

296 
fdSize
 = 0;

297  
m_pcB™¡»am
->
	`g‘NumB™sLeá
() >8 )

299 
	`READ_CODE
 (8, 
ffBy‹
, "ff_byte");

300 
	`as£¹
 (
ffBy‹
==0xff);

301 
fdSize
++;

303 
	`xR—dRb¥T¿žšgB™s
();

304 
	}
}

	@source/Lib/TLibDecoder/SyntaxElementParser.h

38 #iâdeà
__SYNTAXELEMENTPARSER__


39 
	#__SYNTAXELEMENTPARSER__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/TComRom.h
"

46 
	~"TDecCÚfÜmªû.h
"

48 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
!=0

49 
	#READ_SCODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSCodeChk
 (†’gth, code,‚ame, mšV®Inþ, maxV®Inþ )

	)

50 
	#READ_CODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dCodeChk
 (†’gth, code,‚ame, mšV®Inþ, maxV®Inþ )

	)

51 
	#READ_UVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dUvlcChk
 ( code,‚ame, mšV®Inþ, maxV®Inþ )

	)

52 
	#READ_SVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSvlcChk
 ( code,‚ame, mšV®Inþ, maxV®Inþ )

	)

53 
	#READ_FLAG_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dFÏgChk
 ( code,‚ame, mšV®Inþ, maxV®Inþ )

	)

54 #–ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


55 
	#READ_SCODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSCode
 (†’gth, code,‚am)

	)

56 
	#READ_CODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dCode
 (†’gth, code,‚am)

	)

57 
	#READ_UVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dUvlc
 ( code,‚am)

	)

58 
	#READ_SVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSvlc
 ( code,‚am)

	)

59 
	#READ_FLAG_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dFÏg
 ( code,‚am)

	)

61 
	#READ_SCODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSCode
 (†’gth, cod)

	)

62 
	#READ_CODE_CHK
(
Ëngth
, 
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dCode
 (†’gth, cod)

	)

63 
	#READ_UVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dUvlc
 ( cod)

	)

64 
	#READ_SVLC_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dSvlc
 ( cod)

	)

65 
	#READ_FLAG_CHK
Ð
code
, 
Çme
, 
mšV®Inþ
, 
maxV®Inþ
è
	`xR—dFÏg
 ( cod)

	)

69 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


70 
	#READ_SCODE
(
Ëngth
, 
code
, 
Çme
è
	`xR—dSCode
 (†’gth, code,‚am)

	)

71 
	#READ_CODE
(
Ëngth
, 
code
, 
Çme
è
	`xR—dCode
 (†’gth, code,‚am)

	)

72 
	#READ_UVLC
Ð
code
, 
Çme
è
	`xR—dUvlc
 ( code,‚am)

	)

73 
	#READ_SVLC
Ð
code
, 
Çme
è
	`xR—dSvlc
 ( code,‚am)

	)

74 
	#READ_FLAG
Ð
code
, 
Çme
è
	`xR—dFÏg
 ( code,‚am)

	)

77 
	#READ_SCODE
(
Ëngth
, 
code
, 
Çme
è
	`xR—dSCode
 (†’gth, cod)

	)

78 
	#READ_CODE
(
Ëngth
, 
code
, 
Çme
è
	`xR—dCode
 (†’gth, cod)

	)

79 
	#READ_UVLC
Ð
code
, 
Çme
è
	`xR—dUvlc
 ( cod)

	)

80 
	#READ_SVLC
Ð
code
, 
Çme
è
	`xR—dSvlc
 ( cod)

	)

81 
	#READ_FLAG
Ð
code
, 
Çme
è
	`xR—dFÏg
 ( cod)

	)

92 þas 
	cSyÁaxEËm’tP¬£r


94 
	m´Ùeùed
:

95 
TComIÅutB™¡»am
* 
m_pcB™¡»am
;

97 
	$SyÁaxEËm’tP¬£r
()

98 : 
	$m_pcB™¡»am
 (
NULL
)

100 
vœtu®
 ~
	$SyÁaxEËm’tP¬£r
(è{
	}
};

102 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
!=0

103 
Void
 
xR—dSCodeChk
 ( 
UIÁ
 
Ëngth
, 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ IÁ 
mšV®Inþ
, cÚ¡ IÁ 
maxV®Inþ
 );

104 
Void
 
xR—dCodeChk
 ( 
UIÁ
 
Ëngth
, UIÁ& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 );

105 
Void
 
xR—dUvlcChk
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 );

106 
Void
 
xR—dSvlcChk
 ( 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ IÁ 
mšV®Inþ
, cÚ¡ IÁ 
maxV®Inþ
 );

107 
Void
 
xR—dFÏgChk
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
, cÚ¡ UIÁ 
mšV®Inþ
, cÚ¡ UIÁ 
maxV®Inþ
 );

110 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS
 || 
ENC_DEC_TRACE


111 
Void
 
xR—dSCode
 ( 
UIÁ
 
Ëngth
, 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
 );

112 
Void
 
xR—dCode
 ( 
UIÁ
 
Ëngth
, UIÁ& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
 );

113 
Void
 
xR—dUvlc
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
 );

114 
Void
 
xR—dSvlc
 ( 
IÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
 );

115 
Void
 
xR—dFÏg
 ( 
UIÁ
& 
v®
, cÚ¡ 
TCh¬
 *
pSymbÞName
 );

117 
Void
 
xR—dSCode
 ( 
UIÁ
 
Ëngth
, 
IÁ
& 
v®
 );

118 
Void
 
xR—dCode
 ( 
UIÁ
 
Ëngth
, UIÁ& 
v®
 );

119 
Void
 
xR—dUvlc
 ( 
UIÁ
& 
v®
 );

120 
Void
 
xR—dSvlc
 ( 
IÁ
& 
v®
 );

121 
Void
 
xR—dFÏg
 ( 
UIÁ
& 
v®
 );

123 
	gpublic
:

124 
Void
 
	$£tB™¡»am
 ( 
TComIÅutB™¡»am
* 
p
 ) { 
m_pcB™¡»am
 =…; 
	}
}

125 
TComIÅutB™¡»am
* 
	$g‘B™¡»am
(è{  
m_pcB™¡»am
; 
	}
}

127 
	g´Ùeùed
:

128 
Void
 
xR—dRb¥T¿žšgB™s
();

131 þas 
	cAUDR—d”
: 
public
 
SyÁaxEËm’tP¬£r


133 
public
:

134 
	$AUDR—d”
() {};

135 
vœtu®
 ~
	$AUDR—d”
(è{
	}
};

136 
Void
 
·r£AcûssUn™D–im™”
(
TComIÅutB™¡»am
* 
bs
, 
UIÁ
 &
picTy³
);

139 þas 
	cFDR—d”
: 
public
 
SyÁaxEËm’tP¬£r


141 
public
:

142 
	$FDR—d”
() {};

143 
vœtu®
 ~
	$FDR—d”
(è{
	}
};

144 
Void
 
·r£FžËrD©a
(
TComIÅutB™¡»am
* 
bs
, 
UIÁ
 &
fdSize
);

	@source/Lib/TLibDecoder/TDecBinCoder.h

38 #iâdeà
__TDECBINCODER__


39 
	#__TDECBINCODER__


	)

41 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

42 
	~"TLibCommÚ/TComB™SŒ—m.h
"

44 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


45 
þass
 
	gTComCodšgSti¡icsCÏssTy³
;

50 
þass
 
	gTDecBšCABAC
;

52 þas 
	cTDecBšIf


54 
	mpublic
:

55 
vœtu®
 
Void
 
š™
 ( 
TComIÅutB™¡»am
* 
pcTComB™¡»am
 ) = 0;

56 
vœtu®
 
Void
 
unš™
 () = 0;

58 
vœtu®
 
Void
 
¡¬t
 () = 0;

59 
vœtu®
 
Void
 
fšish
 () = 0;

61 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


62 
vœtu®
 
Void
 
decodeBš
 ( 
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
& 
rcCtxMod–
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 ) = 0;

63 
vœtu®
 
Void
 
decodeBšEP
 ( 
UIÁ
& 
ruiBš
 , cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 ) = 0;

64 
vœtu®
 
Void
 
decodeBšsEP
 ( 
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
 , cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 ) = 0;

66 
vœtu®
 
Void
 
decodeBš
 ( 
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
& 
rcCtxMod–
 ) = 0;

67 
vœtu®
 
Void
 
decodeBšEP
 ( 
UIÁ
& 
ruiBš
 ) = 0;

68 
vœtu®
 
Void
 
decodeBšsEP
 ( 
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
 ) = 0;

71 
vœtu®
 
Void
 
®ign
 () = 0;

73 
vœtu®
 
Void
 
decodeBšTrm
 ( 
UIÁ
& 
ruiBš
 ) = 0;

75 
vœtu®
 
Void
 
xR—dPCMCode
 ( 
UIÁ
 
uiL’gth
, UIÁ& 
ruiCode
) = 0;

77 
	mvœtu®
 ~
	$TDecBšIf
() {}

79 
vœtu®
 
Void
 
	`cÝyS‹
 ( cÚ¡ 
TDecBšIf
* 
pcTDecBšIf
 ) = 0;

80 
vœtu®
 
TDecBšCABAC
* 
	$g‘TDecBšCABAC
 (è{  0; 
	}
}

81 
vœtu®
 cÚ¡ 
TDecBšCABAC
* 
	$g‘TDecBšCABAC
 (ècÚ¡ {  0; 
	}
}

	@source/Lib/TLibDecoder/TDecBinCoderCABAC.cpp

38 
	~"TDecBšCod”CABAC.h
"

39 
	~"TLibCommÚ/Debug.h
"

40 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


41 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

47 
	gTDecBšCABAC
::
	$TDecBšCABAC
()

48 : 
	$m_pcTComB™¡»am
( 0 )

50 
	}
}

52 
TDecBšCABAC
::~
	$TDecBšCABAC
()

54 
	}
}

56 
Void


57 
TDecBšCABAC
::
	$š™
Ð
TComIÅutB™¡»am
* 
pcTComB™¡»am
 )

59 
m_pcTComB™¡»am
 = 
pcTComB™¡»am
;

60 
	}
}

62 
Void


63 
	gTDecBšCABAC
::
	$unš™
()

65 
m_pcTComB™¡»am
 = 0;

66 
	}
}

68 
Void


69 
	gTDecBšCABAC
::
	$¡¬t
()

71 
	`as£¹
Ð
m_pcTComB™¡»am
->
	`g‘NumB™sUÁžBy‹AligÃd
() == 0 );

72 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


73 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
STATS__CABAC_INITIALISATION
, 512, 510, 0);

75 
m_uiRªge
 = 510;

76 
m_b™sN“ded
 = -8;

77 
m_uiV®ue
 = (
m_pcTComB™¡»am
->
	`»adBy‹
() << 8);

78 
m_uiV®ue
 |ð
m_pcTComB™¡»am
->
	`»adBy‹
();

79 
	}
}

81 
Void


82 
	gTDecBšCABAC
::
	$fšish
()

84 
UIÁ
 
Ï¡By‹
;

86 
m_pcTComB™¡»am
->
	`³ekP»viousBy‹
Ð
Ï¡By‹
 );

88 
	`as£¹
Ð((
Ï¡By‹
 << (8 + 
m_b™sN“ded
)) & 0xff) == 0x80 );

89 
	}
}

96 
Void


97 
	gTDecBšCABAC
::
	$cÝyS‹
ÐcÚ¡ 
TDecBšIf
* 
pcTDecBšIf
 )

99 cÚ¡ 
TDecBšCABAC
* 
pcTDecBšCABAC
 = 
pcTDecBšIf
->
	`g‘TDecBšCABAC
();

100 
m_uiRªge
 = 
pcTDecBšCABAC
->m_uiRange;

101 
m_uiV®ue
 = 
pcTDecBšCABAC
->m_uiValue;

102 
m_b™sN“ded
ð
pcTDecBšCABAC
->m_bitsNeeded;

103 
	}
}

107 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


108 
Void
 
	gTDecBšCABAC
::
	$decodeBš
Ð
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
 &
rcCtxMod–
, cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

110 
Void
 
TDecBšCABAC
::
	$decodeBš
Ð
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
 &
rcCtxMod–
 )

113 #ià
DEBUG_CABAC_BINS


114 cÚ¡ 
UIÁ
 
¡¬tšgRªge
 = 
m_uiRªge
;

117 
UIÁ
 
uiLPS
 = 
TComCABACTabËs
::
sm_aucLPSTabË
[ 
rcCtxMod–
.
	`g‘S‹
(è][ ( 
m_uiRªge
 >> 6 ) - 4 ];

118 
m_uiRªge
 -ð
uiLPS
;

119 
UIÁ
 
sÿËdRªge
 = 
m_uiRªge
 << 7;

121 ifÐ
m_uiV®ue
 < 
sÿËdRªge
 )

124 
ruiBš
 = 
rcCtxMod–
.
	`g‘Mps
();

125 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


126 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
whichSt
, 
m_uiRªge
+
uiLPS
, m_uiRªge, 
	`IÁ
(
ruiBš
));

128 
rcCtxMod–
.
	`upd©eMPS
();

130 iàÐ
sÿËdRªge
 < ( 256 << 7 ) )

132 
m_uiRªge
 = 
sÿËdRªge
 >> 6;

133 
m_uiV®ue
 += m_uiValue;

135 iàÐ++
m_b™sN“ded
 == 0 )

137 
m_b™sN“ded
 = -8;

138 
m_uiV®ue
 +ð
m_pcTComB™¡»am
->
	`»adBy‹
();

145 
ruiBš
 = 1 - 
rcCtxMod–
.
	`g‘Mps
();

146 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


147 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
whichSt
, 
m_uiRªge
+
uiLPS
, uiLPS, 
	`IÁ
(
ruiBš
));

149 
IÁ
 
numB™s
 = 
TComCABACTabËs
::
sm_aucR’ÜmTabË
[ 
uiLPS
 >> 3 ];

150 
m_uiV®ue
 = ( m_uiV®u- 
sÿËdRªge
 ) << 
numB™s
;

151 
m_uiRªge
 = 
uiLPS
 << 
numB™s
;

152 
rcCtxMod–
.
	`upd©eLPS
();

154 
m_b™sN“ded
 +ð
numB™s
;

156 iàÐ
m_b™sN“ded
 >= 0 )

158 
m_uiV®ue
 +ð
m_pcTComB™¡»am
->
	`»adBy‹
(è<< 
m_b™sN“ded
;

159 
m_b™sN“ded
 -= 8;

163 #ià
DEBUG_CABAC_BINS


164 ià((
g_debugCouÁ”
 + 
debugCabacBšWšdow
è>ð
debugCabacBšT¬g‘Lše
)

166 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": codšg bš v®u" << 
ruiBš
 << ",„ªgð[" << 
¡¬tšgRªge
 << "->" << 
m_uiRªge
 << "]\n";

169 ià(
g_debugCouÁ”
 >ð
debugCabacBšT¬g‘Lše
)

171 
UCh¬
 
b»akPoštThis
;

172 
b»akPoštThis
 = 7;

174 ià(
g_debugCouÁ”
 >ð(
debugCabacBšT¬g‘Lše
 + 
debugCabacBšWšdow
))

176 
	`ex™
(0);

178 
g_debugCouÁ”
++;

180 
	}
}

183 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


184 
Void
 
	gTDecBšCABAC
::
	$decodeBšEP
Ð
UIÁ
& 
ruiBš
, cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

186 
Void
 
TDecBšCABAC
::
	$decodeBšEP
Ð
UIÁ
& 
ruiBš
 )

189 ià(
m_uiRªge
 == 256)

191 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


192 
	`decodeAligÃdBšsEP
(
ruiBš
, 1, 
whichSt
);

194 
	`decodeAligÃdBšsEP
(
ruiBš
, 1);

199 
m_uiV®ue
 += m_uiValue;

201 iàÐ++
m_b™sN“ded
 >= 0 )

203 
m_b™sN“ded
 = -8;

204 
m_uiV®ue
 +ð
m_pcTComB™¡»am
->
	`»adBy‹
();

207 
ruiBš
 = 0;

208 
UIÁ
 
sÿËdRªge
 = 
m_uiRªge
 << 7;

209 iàÐ
m_uiV®ue
 >ð
sÿËdRªge
 )

211 
ruiBš
 = 1;

212 
m_uiV®ue
 -ð
sÿËdRªge
;

214 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


215 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
whichSt
, 1, 
	`IÁ
(
ruiBš
));

217 
	}
}

219 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


220 
Void
 
	gTDecBšCABAC
::
	$decodeBšsEP
Ð
UIÁ
& 
ruiBš
, 
IÁ
 
numBšs
, cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

222 
Void
 
TDecBšCABAC
::
	$decodeBšsEP
Ð
UIÁ
& 
ruiBš
, 
IÁ
 
numBšs
 )

225 ià(
m_uiRªge
 == 256)

227 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


228 
	`decodeAligÃdBšsEP
(
ruiBš
, 
numBšs
, 
whichSt
);

230 
	`decodeAligÃdBšsEP
(
ruiBš
, 
numBšs
);

235 
UIÁ
 
bšs
 = 0;

236 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


237 
IÁ
 
ÜigNumBšs
=
numBšs
;

239  
numBšs
 > 8 )

241 
m_uiV®ue
 = ( m_uiV®u<< 8 ) + ( 
m_pcTComB™¡»am
->
	`»adBy‹
(è<< ( 8 + 
m_b™sN“ded
 ) );

243 
UIÁ
 
sÿËdRªge
 = 
m_uiRªge
 << 15;

244  
IÁ
 
i
 = 0; i < 8; i++ )

246 
bšs
 += bins;

247 
sÿËdRªge
 >>= 1;

248 iàÐ
m_uiV®ue
 >ð
sÿËdRªge
 )

250 
bšs
++;

251 
m_uiV®ue
 -ð
sÿËdRªge
;

254 
numBšs
 -= 8;

257 
m_b™sN“ded
 +ð
numBšs
;

258 
m_uiV®ue
 <<ð
numBšs
;

260 iàÐ
m_b™sN“ded
 >= 0 )

262 
m_uiV®ue
 +ð
m_pcTComB™¡»am
->
	`»adBy‹
(è<< 
m_b™sN“ded
;

263 
m_b™sN“ded
 -= 8;

266 
UIÁ
 
sÿËdRªge
 = 
m_uiRªge
 << ( 
numBšs
 + 7 );

267  
IÁ
 
i
 = 0; i < 
numBšs
; i++ )

269 
bšs
 += bins;

270 
sÿËdRªge
 >>= 1;

271 iàÐ
m_uiV®ue
 >ð
sÿËdRªge
 )

273 
bšs
++;

274 
m_uiV®ue
 -ð
sÿËdRªge
;

278 
ruiBš
 = 
bšs
;

279 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


280 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
whichSt
, 
ÜigNumBšs
, 
	`IÁ
(
ruiBš
));

282 
	}
}

284 
Void
 
	gTDecBšCABAC
::
	$®ign
()

286 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


287 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
STATS__CABAC_EP_BIT_ALIGNMENT
, 
m_uiRªge
, 256, 0);

289 
m_uiRªge
 = 256;

290 
	}
}

292 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


293 
Void
 
	gTDecBšCABAC
::
	$decodeAligÃdBšsEP
Ð
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

295 
Void
 
TDecBšCABAC
::
	$decodeAligÃdBšsEP
Ð
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
 )

298 
IÁ
 
bšsRemaššg
 = 
numBšs
;

299 
ruiBšs
 = 0;

301 
	`as£¹
(
m_uiRªge
 == 256);

303 
bšsRemaššg
 > 0)

305 cÚ¡ 
UIÁ
 
bšsToR—d
 = 
¡d
::
mš
<UIÁ>(
bšsRemaššg
, 8);

306 cÚ¡ 
UIÁ
 
bšMask
 = (1 << 
bšsToR—d
) - 1;

317 cÚ¡ 
UIÁ
 
ÃwBšs
 = (
m_uiV®ue
 >> (15 - 
bšsToR—d
)è& 
bšMask
;

319 
ruiBšs
 = (ruiBš << 
bšsToR—d
è| 
ÃwBšs
;

320 
m_uiV®ue
 = (m_uiV®u<< 
bšsToR—d
) & 0x7FFF;

322 
bšsRemaššg
 -ð
bšsToR—d
;

323 
m_b™sN“ded
 +ð
bšsToR—d
;

325 ià(
m_b™sN“ded
 >= 0)

327 
m_uiV®ue
 |ð
m_pcTComB™¡»am
->
	`»adBy‹
(è<< 
m_b™sN“ded
;

328 
m_b™sN“ded
 -= 8;

332 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


333 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
whichSt
, 
numBšs
, 
	`IÁ
(
ruiBšs
));

335 
	}
}

337 
Void


338 
	gTDecBšCABAC
::
	$decodeBšTrm
Ð
UIÁ
& 
ruiBš
 )

340 
m_uiRªge
 -= 2;

341 
UIÁ
 
sÿËdRªge
 = 
m_uiRªge
 << 7;

342 ifÐ
m_uiV®ue
 >ð
sÿËdRªge
 )

344 
ruiBš
 = 1;

345 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


346 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
STATS__CABAC_TRM_BITS
, 
m_uiRªge
+2, 2, 
ruiBš
);

347 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
STATS__BYTE_ALIGNMENT_BITS
, -
m_b™sN“ded
, 0);

352 
ruiBš
 = 0;

353 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


354 
TComCodšgSti¡ics
::
	`Upd©eCABACSt
(
STATS__CABAC_TRM_BITS
, 
m_uiRªge
+2, m_uiRªge, 
ruiBš
);

356 iàÐ
sÿËdRªge
 < ( 256 << 7 ) )

358 
m_uiRªge
 = 
sÿËdRªge
 >> 6;

359 
m_uiV®ue
 += m_uiValue;

361 iàÐ++
m_b™sN“ded
 == 0 )

363 
m_b™sN“ded
 = -8;

364 
m_uiV®ue
 +ð
m_pcTComB™¡»am
->
	`»adBy‹
();

368 
	}
}

375 
Void
 
	gTDecBšCABAC
::
	$xR—dPCMCode
(
UIÁ
 
uiL’gth
, UIÁ& 
ruiCode
)

377 
	`as£¹
 ( 
uiL’gth
 > 0 );

378 
m_pcTComB™¡»am
->
	`»ad
 (
uiL’gth
, 
ruiCode
);

379 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


380 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
STATS__CABAC_PCM_CODE_BITS
, 
uiL’gth
, 
ruiCode
);

382 
	}
}

	@source/Lib/TLibDecoder/TDecBinCoderCABAC.h

38 #iâdeà
__TDECBINCODERCABAC__


39 
	#__TDECBINCODERCABAC__


	)

41 
	~"TLibCommÚ/TComCABACTabËs.h
"

42 
	~"TDecBšCod”.h
"

47 þas 
	cTDecBšCABAC
 : 
public
 
TDecBšIf


49 
public
:

50 
TDecBšCABAC
 ();

51 
	mvœtu®
 ~
TDecBšCABAC
();

53 
Void
 
š™
 ( 
TComIÅutB™¡»am
* 
pcTComB™¡»am
 );

54 
Void
 
unš™
 ();

56 
Void
 
¡¬t
 ();

57 
Void
 
fšish
 ();

59 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


60 
Void
 
decodeBš
 ( 
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
& 
rcCtxMod–
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

61 
Void
 
decodeBšEP
 ( 
UIÁ
& 
ruiBš
 , cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

62 
Void
 
decodeBšsEP
 ( 
UIÁ
& 
ruiBš
, 
IÁ
 
numBšs
 , cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

63 
Void
 
decodeAligÃdBšsEP
Ð
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
 , cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

65 
Void
 
decodeBš
 ( 
UIÁ
& 
ruiBš
, 
CÚ‹xtMod–
& 
rcCtxMod–
 );

66 
Void
 
decodeBšEP
 ( 
UIÁ
& 
ruiBš
 );

67 
Void
 
decodeBšsEP
 ( 
UIÁ
& 
ruiBš
, 
IÁ
 
numBšs
 );

68 
Void
 
decodeAligÃdBšsEP
Ð
UIÁ
& 
ruiBšs
, 
IÁ
 
numBšs
 );

71 
Void
 
®ign
 ();

73 
Void
 
decodeBšTrm
 ( 
UIÁ
& 
ruiBš
 );

75 
Void
 
xR—dPCMCode
 ( 
UIÁ
 
uiL’gth
, UIÁ& 
ruiCode
 );

77 
Void
 
cÝyS‹
 ( cÚ¡ 
TDecBšIf
* 
pcTDecBšIf
 );

78 
TDecBšCABAC
* 
	$g‘TDecBšCABAC
(è{  
this
; }

79 cÚ¡ 
TDecBšCABAC
* 
	$g‘TDecBšCABAC
(ècÚ¡ {  
this
; 
	}
}

81 
	g´iv©e
:

82 
TComIÅutB™¡»am
* 
m_pcTComB™¡»am
;

83 
UIÁ
 
	gm_uiRªge
;

84 
UIÁ
 
	gm_uiV®ue
;

85 
IÁ
 
	gm_b™sN“ded
;

	@source/Lib/TLibDecoder/TDecCAVLC.cpp

38 
	~"TDecCAVLC.h
"

39 
	~"SEI»ad.h
"

40 
	~"TDecSliû.h
"

41 
	~"TLibCommÚ/TComChromaFÜm©.h
"

42 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


43 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

45 
	~"TDecCÚfÜmªû.h
"

50 #ià
ENC_DEC_TRACE


51 #ià
MCTS_EXTRACTION


52 
Void
 
	$xT¿ûVPSH—d”Dec
 ()

54 
Void
 
	$xT¿ûVPSH—d”
()

57 
	`årštf
Ð
g_hT¿û
, "=========== Video Parameter Set ===========\n" );

58 
	}
}

60 #ià
MCTS_EXTRACTION


61 
Void
 
	$xT¿ûSPSH—d”Dec
()

63 
Void
 
	$xT¿ûSPSH—d”
()

66 
	`årštf
Ð
g_hT¿û
, "=========== Sequence Parameter Set ===========\n" );

67 
	}
}

69 #ià
MCTS_EXTRACTION


70 
Void
 
	$xT¿ûPPSH—d”Dec
()

72 
Void
 
	$xT¿ûPPSH—d”
()

75 
	`årštf
Ð
g_hT¿û
, "=========== Picture Parameter Set ===========\n");

76 
	}
}

78 #ià
MCTS_EXTRACTION


79 
Void
 
	$xT¿ûSliûH—d”Dec
()

81 
Void
 
	$xT¿ûSliûH—d”
()

84 
	`årštf
Ð
g_hT¿û
, "=========== Slice ===========\n");

85 
	}
}

93 
	gTDecCavlc
::
	$TDecCavlc
()

95 
	}
}

97 
TDecCavlc
::~
	$TDecCavlc
()

100 
	}
}

106 
Void
 
TDecCavlc
::
	$·r£ShÜtT”mRefPicS‘
Ð
TComSPS
* 
¥s
, 
TComReã»nûPiùu»S‘
* 
½s
, 
IÁ
 
idx
 )

108 
UIÁ
 
code
;

109 
UIÁ
 
š‹rRPSP»d
;

110 ià(
idx
 > 0)

112 
	`READ_FLAG
(
š‹rRPSP»d
, "š‹r_»f_pic_£t_´ediùiÚ_æag"); 
½s
->
	`£tIÁ”RPSP»diùiÚ
(interRPSPred);

116 
š‹rRPSP»d
 = 
çl£
;

117 
½s
->
	`£tIÁ”RPSP»diùiÚ
(
çl£
);

120 ià(
š‹rRPSP»d
)

122 
UIÁ
 
b™
;

123 if(
idx
 =ð
¥s
->
	`g‘RPSLi¡
()->
	`g‘Numb”OfReã»nûPiùu»S‘s
())

125 
	`READ_UVLC
(
code
, "delta_idx_minus1" );

129 
code
 = 0;

131 #ià
MCTS_EXTRACTION


132 
½s
->
	`£tD–RIdxMšus1
(
code
);

134 
	`as£¹
(
code
 <ð
idx
-1);

135 
IÁ
 
rIdx
 = 
idx
 - 1 - 
code
;

136 
	`as£¹
 (
rIdx
 <ð
idx
-1 &&„Idx >= 0);

137 
TComReã»nûPiùu»S‘
* 
½sRef
 = 
¥s
->
	`g‘RPSLi¡
()->
	`g‘Reã»nûPiùu»S‘
(
rIdx
);

138 
IÁ
 
k
 = 0, 
k0
 = 0, 
k1
 = 0;

139 
	`READ_CODE
(1, 
b™
, "delta_rps_sign");

140 
	`READ_UVLC
(
code
, "abs_delta_rps_minus1");

141 
IÁ
 
d–RPS
 = (1 - 2 * 
b™
è* (
code
 + 1);

142 #ià
MCTS_EXTRACTION


143 
½s
->
	`£tD–RPS
(
d–RPS
);

145 
IÁ
 
j
=0 ; j <ð
½sRef
->
	`g‘Numb”OfPiùu»s
(); j++)

147 
	`READ_CODE
(1, 
b™
, "used_by_curr_pic_flag" );

148 
IÁ
 
»fIdc
 = 
b™
;

149 ià(
»fIdc
 == 0)

151 
	`READ_CODE
(1, 
b™
, "use_delta_flag" );

152 
»fIdc
 = 
b™
<<1;

154 ià(
»fIdc
 == 1 ||„efIdc == 2)

156 
IÁ
 
d–POC
 = 
d–RPS
 + ((
j
 < 
½sRef
->
	`g‘Numb”OfPiùu»s
())?„psRef->
	`g‘D–POC
(j) : 0);

157 
½s
->
	`£tD–POC
(
k
, 
d–POC
);

158 
½s
->
	`£tU£d
(
k
, (
»fIdc
 == 1));

160 ià(
d–POC
 < 0)

162 
k0
++;

166 
k1
++;

168 
k
++;

170 
½s
->
	`£tRefIdc
(
j
,
»fIdc
);

172 
½s
->
	`£tNumRefIdc
(
½sRef
->
	`g‘Numb”OfPiùu»s
()+1);

173 
½s
->
	`£tNumb”OfPiùu»s
(
k
);

174 
½s
->
	`£tNumb”OfNeg©ivePiùu»s
(
k0
);

175 
½s
->
	`£tNumb”OfPos™ivePiùu»s
(
k1
);

176 
½s
->
	`sÜtD–POC
();

180 
	`READ_UVLC
(
code
, "num_Ãg©ive_pics"); 
½s
->
	`£tNumb”OfNeg©ivePiùu»s
(code);

181 
	`READ_UVLC
(
code
, "num_pos™ive_pics"); 
½s
->
	`£tNumb”OfPos™ivePiùu»s
(code);

182 
IÁ
 
´ev
 = 0;

183 
IÁ
 
poc
;

184 
IÁ
 
j
=0 ; j < 
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(); j++)

186 
	`READ_UVLC
(
code
, "delta_poc_s0_minus1");

187 
poc
 = 
´ev
-
code
-1;

188 
´ev
 = 
poc
;

189 
½s
->
	`£tD–POC
(
j
,
poc
);

190 
	`READ_FLAG
(
code
, "u£d_by_cu¼_pic_s0_æag"); 
½s
->
	`£tU£d
(
j
,code);

192 
´ev
 = 0;

193 
IÁ
 
j
=
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(); j <„ps->g‘Numb”OfNeg©ivePiùu»s()+½s->
	`g‘Numb”OfPos™ivePiùu»s
(); j++)

195 
	`READ_UVLC
(
code
, "delta_poc_s1_minus1");

196 
poc
 = 
´ev
+
code
+1;

197 
´ev
 = 
poc
;

198 
½s
->
	`£tD–POC
(
j
,
poc
);

199 
	`READ_FLAG
(
code
, "u£d_by_cu¼_pic_s1_æag"); 
½s
->
	`£tU£d
(
j
,code);

201 
½s
->
	`£tNumb”OfPiùu»s
Ôps->
	`g‘Numb”OfNeg©ivePiùu»s
()+½s->
	`g‘Numb”OfPos™ivePiùu»s
());

203 #ià
PRINT_RPS_INFO


204 
½s
->
	`´štD–POC
();

206 
	}
}

208 
Void
 
	gTDecCavlc
::
	$·r£PPS
(
TComPPS
* 
pcPPS
)

210 #ià
ENC_DEC_TRACE


211 #ià
MCTS_EXTRACTION


212 
	`xT¿ûPPSH—d”Dec
 ();

214 
	`xT¿ûPPSH—d”
();

217 
UIÁ
 
uiCode
;

219 
IÁ
 
iCode
;

221 
	`READ_UVLC_CHK
Ð
uiCode
, "pps_pic_parameter_set_id", 0, 63);

222 
	`as£¹
(
uiCode
 <= 63);

223 
pcPPS
->
	`£tPPSId
 (
uiCode
);

225 
	`READ_UVLC_CHK
Ð
uiCode
, "pps_seq_parameter_set_id", 0, 15);

226 
	`as£¹
(
uiCode
 <= 15);

227 
pcPPS
->
	`£tSPSId
 (
uiCode
);

229 
	`READ_FLAG
Ð
uiCode
, "d•’d’t_¦iû_£gm’ts_’abËd_æag" ); 
pcPPS
->
	`£tD•’d’tSliûSegm’tsEÇbËdFÏg
 ( uiCode == 1 );

231 
	`READ_FLAG
Ð
uiCode
, "ouut_æag_´e£Á_æag" ); 
pcPPS
->
	`£tOuutFÏgP»£ÁFÏg
( uiCode==1 );

233 
	`READ_CODE
(3, 
uiCode
, "num_exŒa_¦iû_h—d”_b™s"); 
pcPPS
->
	`£tNumExŒaSliûH—d”B™s
(uiCode);

235 
	`READ_FLAG
Ð
uiCode
, "sign_d©a_hidšg_’abËd_æag" ); 
pcPPS
->
	`£tSignD©aHidšgEÇbËdFÏg
( uiCode );

237 
	`READ_FLAG
Ð
uiCode
, "ÿbac_š™_´e£Á_æag" ); 
pcPPS
->
	`£tCabacIn™P»£ÁFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

239 
	`READ_UVLC_CHK
(
uiCode
, "num_ref_idx_l0_default_active_minus1", 0, 14);

240 
	`as£¹
(
uiCode
 <= 14);

241 
pcPPS
->
	`£tNumRefIdxL0DeçuÉAùive
(
uiCode
+1);

243 
	`READ_UVLC_CHK
(
uiCode
, "num_ref_idx_l1_default_active_minus1", 0, 14);

244 
	`as£¹
(
uiCode
 <= 14);

245 
pcPPS
->
	`£tNumRefIdxL1DeçuÉAùive
(
uiCode
+1);

247 
	`READ_SVLC_CHK
(
iCode
, "š™_qp_mšus26", 
¡d
::
num”ic_lim™s
<
IÁ
>::
	`mš
(), 25 ); 
pcPPS
->
	`£tPicIn™QPMšus26
(iCode);

248 
	`READ_FLAG
Ð
uiCode
, "cÚ¡¿šed_šŒa_´ed_æag" ); 
pcPPS
->
	`£tCÚ¡¿šedIÁ¿P»d
ÐuiCod? 
Œue
 : 
çl£
 );

249 
	`READ_FLAG
Ð
uiCode
, "transform_skip_enabled_flag" );

250 
pcPPS
->
	`£tU£T¿nsfÜmSk
 ( 
uiCode
 ? 
Œue
 : 
çl£
 );

252 
	`READ_FLAG
Ð
uiCode
, "cu_qp_d–_’abËd_æag" ); 
pcPPS
->
	`£tU£DQP
ÐuiCod? 
Œue
 : 
çl£
 );

253 ifÐ
pcPPS
->
	`g‘U£DQP
() )

255 
	`READ_UVLC
Ð
uiCode
, "diff_cu_qp_delta_depth" );

256 
pcPPS
->
	`£tMaxCuDQPD•th
Ð
uiCode
 );

260 
pcPPS
->
	`£tMaxCuDQPD•th
( 0 );

262 
	`READ_SVLC_CHK
Ð
iCode
, "pps_cb_qp_offset", -12, 12);

263 
pcPPS
->
	`£tQpOff£t
(
COMPONENT_Cb
, 
iCode
);

264 
	`as£¹
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cb
) >= -12 );

265 
	`as£¹
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cb
) <= 12 );

267 
	`READ_SVLC_CHK
Ð
iCode
, "pps_cr_qp_offset", -12, 12);

268 
pcPPS
->
	`£tQpOff£t
(
COMPONENT_Cr
, 
iCode
);

269 
	`as£¹
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cr
) >= -12 );

270 
	`as£¹
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cr
) <= 12 );

272 
	`as£¹
(
MAX_NUM_COMPONENT
<=3);

274 
	`READ_FLAG
Ð
uiCode
, "pps_slice_chroma_qp_offsets_present_flag" );

275 
pcPPS
->
	`£tSliûChromaQpFÏg
Ð
uiCode
 ? 
Œue
 : 
çl£
 );

277 
	`READ_FLAG
Ð
uiCode
, "weighted_pred_flag" );

278 
pcPPS
->
	`£tU£WP
Ð
uiCode
==1 );

279 
	`READ_FLAG
Ð
uiCode
, "weighted_bipred_flag" );

280 
pcPPS
->
	`£tWPBiP»d
Ð
uiCode
==1 );

282 
	`READ_FLAG
Ð
uiCode
, "transquant_bypass_enabled_flag");

283 
pcPPS
->
	`£tT¿nsquªtBy·ssEÇbËdFÏg
(
uiCode
 ? 
Œue
 : 
çl£
);

284 
	`READ_FLAG
Ð
uiCode
, "tžes_’abËd_æag" ); 
pcPPS
->
	`£tTžesEÇbËdFÏg
 ( uiCode == 1 );

285 
	`READ_FLAG
Ð
uiCode
, "’ŒÝy_codšg_sync_’abËd_æag" ); 
pcPPS
->
	`£tEÁrÝyCodšgSyncEÇbËdFÏg
( uiCode == 1 );

287 ifÐ
pcPPS
->
	`g‘TžesEÇbËdFÏg
() )

289 
	`READ_UVLC
 ( 
uiCode
, "num_tže_cÞumns_mšus1" ); 
pcPPS
->
	`£tNumTžeCÞumnsMšus1
( uiCode );

290 
	`READ_UVLC
 ( 
uiCode
, "num_tže_rows_mšus1" ); 
pcPPS
->
	`£tNumTžeRowsMšus1
( uiCode );

291 
	`READ_FLAG
 ( 
uiCode
, "unifÜm_¥acšg_æag" ); 
pcPPS
->
	`£tTžeUnifÜmS·cšgFÏg
( uiCode == 1 );

293 cÚ¡ 
UIÁ
 
tžeCÞumnsMšus1
 = 
pcPPS
->
	`g‘NumTžeCÞumnsMšus1
();

294 cÚ¡ 
UIÁ
 
tžeRowsMšus1
 = 
pcPPS
->
	`g‘NumTžeRowsMšus1
();

296 iàÐ!
pcPPS
->
	`g‘TžeUnifÜmS·cšgFÏg
())

298 ià(
tžeCÞumnsMšus1
 > 0)

300 
¡d
::
veùÜ
<
IÁ
> 
	`cÞumnWidth
(
tžeCÞumnsMšus1
);

301 
UIÁ
 
i
 = 0; i < 
tžeCÞumnsMšus1
; i++)

303 
	`READ_UVLC
Ð
uiCode
, "column_width_minus1" );

304 
cÞumnWidth
[
i
] = 
uiCode
+1;

306 
pcPPS
->
	`£tTžeCÞumnWidth
(
cÞumnWidth
);

309 ià(
tžeRowsMšus1
 > 0)

311 
¡d
::
veùÜ
<
IÁ
> 
	`rowHeight
 (
tžeRowsMšus1
);

312 
UIÁ
 
i
 = 0; i < 
tžeRowsMšus1
; i++)

314 
	`READ_UVLC
Ð
uiCode
, "row_height_minus1" );

315 
rowHeight
[
i
] = 
uiCode
 + 1;

317 
pcPPS
->
	`£tTžeRowHeight
(
rowHeight
);

320 
	`as£¹
 ((
tžeCÞumnsMšus1
 + 
tžeRowsMšus1
) != 0);

321 
	`READ_FLAG
 ( 
uiCode
, "loÝ_fž‹r_aüoss_tžes_’abËd_æag" ); 
pcPPS
->
	`£tLoÝFž‹rAüossTžesEÇbËdFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

323 
	`READ_FLAG
Ð
uiCode
, "µs_loÝ_fž‹r_aüoss_¦iûs_’abËd_æag" ); 
pcPPS
->
	`£tLoÝFž‹rAüossSliûsEÇbËdFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

324 
	`READ_FLAG
Ð
uiCode
, "deblockšg_fž‹r_cÚŒÞ_´e£Á_æag" ); 
pcPPS
->
	`£tDeblockšgFž‹rCÚŒÞP»£ÁFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

325 if(
pcPPS
->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
())

327 
	`READ_FLAG
Ð
uiCode
, "deblockšg_fž‹r_ov”ride_’abËd_æag" ); 
pcPPS
->
	`£tDeblockšgFž‹rOv”rideEÇbËdFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

328 
	`READ_FLAG
Ð
uiCode
, "µs_deblockšg_fž‹r_di§bËd_æag" ); 
pcPPS
->
	`£tPPSDeblockšgFž‹rDi§bËdFÏg
(uiCod? 
Œue
 : 
çl£
 );

329 if(!
pcPPS
->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
())

331 
	`READ_SVLC
 ( 
iCode
, "µs_b‘a_off£t_div2" ); 
pcPPS
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
( iCode );

332 
	`READ_SVLC
 ( 
iCode
, "µs_tc_off£t_div2" ); 
pcPPS
->
	`£tDeblockšgFž‹rTcOff£tDiv2
( iCode );

335 
	`READ_FLAG
Ð
uiCode
, "µs_sÿlšg_li¡_d©a_´e£Á_æag" ); 
pcPPS
->
	`£tSÿlšgLi¡P»£ÁFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

336 if(
pcPPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
 ())

338 
	`·r£SÿlšgLi¡
Ð&(
pcPPS
->
	`g‘SÿlšgLi¡
()) );

341 
	`READ_FLAG
Ð
uiCode
, "lists_modification_present_flag");

342 
pcPPS
->
	`£tLi¡sModifiÿtiÚP»£ÁFÏg
(
uiCode
);

344 
	`READ_UVLC
Ð
uiCode
, "log2_parallel_merge_level_minus2");

345 
pcPPS
->
	`£tLog2P¬®ËlM”geLev–Mšus2
 (
uiCode
);

347 
	`READ_FLAG
Ð
uiCode
, "slice_segment_header_extension_present_flag");

348 
pcPPS
->
	`£tSliûH—d”Ex‹nsiÚP»£ÁFÏg
(
uiCode
);

350 
	`READ_FLAG
Ð
uiCode
, "pps_extension_present_flag");

351 ià(
uiCode
)

353 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


354 cÚ¡ 
TCh¬
 *
syÁaxSŒšgs
[]={ "pps_range_extension_flag",

364 
BoÞ
 
µs_ex‹nsiÚ_æags
[
NUM_PPS_EXTENSION_FLAGS
];

365 
IÁ
 
i
=0; i<
NUM_PPS_EXTENSION_FLAGS
; i++)

367 
	`READ_FLAG
Ð
uiCode
, 
syÁaxSŒšgs
[
i
] );

368 
µs_ex‹nsiÚ_æags
[
i
] = 
uiCode
!=0;

371 
BoÞ
 
bSkT¿žšgEx‹nsiÚB™s
=
çl£
;

372 
IÁ
 
i
=0; i<
NUM_PPS_EXTENSION_FLAGS
; i++)

374 ià(
µs_ex‹nsiÚ_æags
[
i
])

376 
	`PPSEx‹nsiÚFÏgIndex
(
i
))

378 
PPS_EXT__REXT
:

380 
TComPPSRExt
 &
µsRªgeEx‹nsiÚ
 = 
pcPPS
->
	`g‘PpsRªgeEx‹nsiÚ
();

381 
	`as£¹
(!
bSkT¿žšgEx‹nsiÚB™s
);

383 ià(
pcPPS
->
	`g‘U£T¿nsfÜmSk
())

385 
	`READ_UVLC
Ð
uiCode
, "log2_max_transform_skip_block_size_minus2");

386 
µsRªgeEx‹nsiÚ
.
	`£tLog2MaxT¿nsfÜmSkBlockSize
(
uiCode
+2);

389 
	`READ_FLAG
Ð
uiCode
, "cross_component_prediction_enabled_flag");

390 
µsRªgeEx‹nsiÚ
.
	`£tCrossCompÚ’tP»diùiÚEÇbËdFÏg
(
uiCode
 != 0);

392 
	`READ_FLAG
Ð
uiCode
, "chroma_qp_offset_list_enabled_flag");

393 ià(
uiCode
 == 0)

395 
µsRªgeEx‹nsiÚ
.
	`þ—rChromaQpOff£tLi¡
();

396 
µsRªgeEx‹nsiÚ
.
	`£tDiffCuChromaQpOff£tD•th
(0);

400 
	`READ_UVLC
(
uiCode
, "diff_cu_chroma_qp_off£t_d•th"); 
µsRªgeEx‹nsiÚ
.
	`£tDiffCuChromaQpOff£tD•th
(uiCode);

401 
UIÁ
 
bËSizeMšus1
 = 0;

402 
	`READ_UVLC_CHK
(
bËSizeMšus1
, "chroma_qp_off£t_li¡_Ën_mšus1", 0, 
MAX_QP_OFFSET_LIST_SIZE
-1);

403 
	`as£¹
(
bËSizeMšus1
 < 
MAX_QP_OFFSET_LIST_SIZE
);

405 
IÁ
 
cuChromaQpOff£tIdx
 = 0; cuChromaQpOff£tIdx <ð(
bËSizeMšus1
); cuChromaQpOffsetIdx++)

407 
IÁ
 
cbOff£t
;

408 
IÁ
 
üOff£t
;

409 
	`READ_SVLC_CHK
(
cbOff£t
, "cb_qp_offset_list[i]", -12, 12);

410 
	`as£¹
(
cbOff£t
 >= -12 && cbOffset <= 12);

411 
	`READ_SVLC_CHK
(
üOff£t
, "cr_qp_offset_list[i]", -12, 12);

412 
	`as£¹
(
üOff£t
 >= -12 && crOffset <= 12);

414 
µsRªgeEx‹nsiÚ
.
	`£tChromaQpOff£tLi¡EÁry
(
cuChromaQpOff£tIdx
+1, 
cbOff£t
, 
üOff£t
);

416 
	`as£¹
(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡L’
(è=ð
bËSizeMšus1
 + 1);

419 
	`READ_UVLC
Ð
uiCode
, "log2_sao_offset_scale_luma");

420 
µsRªgeEx‹nsiÚ
.
	`£tLog2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
, 
uiCode
);

421 
	`READ_UVLC
Ð
uiCode
, "log2_sao_offset_scale_chroma");

422 
µsRªgeEx‹nsiÚ
.
	`£tLog2SaoOff£tSÿË
(
CHANNEL_TYPE_CHROMA
, 
uiCode
);

426 
bSkT¿žšgEx‹nsiÚB™s
=
Œue
;

431 ià(
bSkT¿žšgEx‹nsiÚB™s
)

433  
	`xMÜeRb¥D©a
() )

435 
	`READ_FLAG
Ð
uiCode
, "pps_extension_data_flag");

439 
	`xR—dRb¥T¿žšgB™s
();

440 
	}
}

442 
Void
 
	gTDecCavlc
::
	$·r£VUI
(
TComVUI
* 
pcVUI
, 
TComSPS
 *
pcSPS
)

444 #ià
ENC_DEC_TRACE


445 
	`årštf
Ð
g_hT¿û
, "----------- vui_parameters -----------\n");

447 
UIÁ
 
uiCode
;

449 
	`READ_FLAG
Ð
uiCode
, "a¥eù_¿tio_šfo_´e£Á_æag"); 
pcVUI
->
	`£tA¥eùR©ioInfoP»£ÁFÏg
(uiCode);

450 ià(
pcVUI
->
	`g‘A¥eùR©ioInfoP»£ÁFÏg
())

452 
	`READ_CODE
(8, 
uiCode
, "a¥eù_¿tio_idc"); 
pcVUI
->
	`£tA¥eùR©ioIdc
(uiCode);

453 ià(
pcVUI
->
	`g‘A¥eùR©ioIdc
() == 255)

455 
	`READ_CODE
(16, 
uiCode
, "§r_width"); 
pcVUI
->
	`£tS¬Width
(uiCode);

456 
	`READ_CODE
(16, 
uiCode
, "§r_height"); 
pcVUI
->
	`£tS¬Height
(uiCode);

460 
	`READ_FLAG
Ð
uiCode
, "ov”sÿn_šfo_´e£Á_æag"); 
pcVUI
->
	`£tOv”sÿnInfoP»£ÁFÏg
(uiCode);

461 ià(
pcVUI
->
	`g‘Ov”sÿnInfoP»£ÁFÏg
())

463 
	`READ_FLAG
Ð
uiCode
, "ov”sÿn_­´ÝrŸ‹_æag"); 
pcVUI
->
	`£tOv”sÿnAµrÝrŸ‹FÏg
(uiCode);

466 
	`READ_FLAG
Ð
uiCode
, "video_sigÇl_ty³_´e£Á_æag"); 
pcVUI
->
	`£tVideoSigÇlTy³P»£ÁFÏg
(uiCode);

467 ià(
pcVUI
->
	`g‘VideoSigÇlTy³P»£ÁFÏg
())

469 
	`READ_CODE
(3, 
uiCode
, "video_fÜm©"); 
pcVUI
->
	`£tVideoFÜm©
(uiCode);

470 
	`READ_FLAG
Ð
uiCode
, "video_fuÎ_¿nge_æag"); 
pcVUI
->
	`£tVideoFuÎRªgeFÏg
(uiCode);

471 
	`READ_FLAG
Ð
uiCode
, "cÞour_desütiÚ_´e£Á_æag"); 
pcVUI
->
	`£tCÞourDesütiÚP»£ÁFÏg
(uiCode);

472 ià(
pcVUI
->
	`g‘CÞourDesütiÚP»£ÁFÏg
())

474 
	`READ_CODE
(8, 
uiCode
, "cÞour_´im¬›s"); 
pcVUI
->
	`£tCÞourPrim¬›s
(uiCode);

475 
	`READ_CODE
(8, 
uiCode
, "Œªsãr_ch¬aù”i¡ics"); 
pcVUI
->
	`£tT¿nsãrCh¬aù”i¡ics
(uiCode);

476 
	`READ_CODE
(8, 
uiCode
, "m©rix_cÛffs"); 
pcVUI
->
	`£tM©rixCÛffic›Ás
(uiCode);

480 
	`READ_FLAG
Ð
uiCode
, "chroma_loc_šfo_´e£Á_æag"); 
pcVUI
->
	`£tChromaLocInfoP»£ÁFÏg
(uiCode);

481 ià(
pcVUI
->
	`g‘ChromaLocInfoP»£ÁFÏg
())

483 
	`READ_UVLC
Ð
uiCode
, "chroma_§m¶e_loc_ty³_tÝ_f›ld" ); 
pcVUI
->
	`£tChromaSam¶eLocTy³TÝF›ld
(uiCode);

484 
	`READ_UVLC
Ð
uiCode
, "chroma_§m¶e_loc_ty³_bÙtom_f›ld" ); 
pcVUI
->
	`£tChromaSam¶eLocTy³BÙtomF›ld
(uiCode);

487 
	`READ_FLAG
Ð
uiCode
, "ÃuŒ®_chroma_šdiÿtiÚ_æag"); 
pcVUI
->
	`£tNeuŒ®ChromaIndiÿtiÚFÏg
(uiCode);

489 
	`READ_FLAG
Ð
uiCode
, "f›ld_£q_æag"); 
pcVUI
->
	`£tF›ldSeqFÏg
(uiCode);

491 
	`READ_FLAG
(
uiCode
, "äame_f›ld_šfo_´e£Á_æag"); 
pcVUI
->
	`£tF¿meF›ldInfoP»£ÁFÏg
(uiCode);

493 
	`READ_FLAG
Ð
uiCode
, "default_display_window_flag");

494 ià(
uiCode
 != 0)

496 
Wšdow
 &
defDi¥
 = 
pcVUI
->
	`g‘DeçuÉDi¥ÏyWšdow
();

497 
	`READ_UVLC
Ð
uiCode
, "def_di¥_wš_Ëá_off£t" ); 
defDi¥
.
	`£tWšdowLeáOff£t
 ( uiCod* 
TComSPS
::
	`g‘WšUn™X
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
()) );

498 
	`READ_UVLC
Ð
uiCode
, "def_di¥_wš_right_off£t" ); 
defDi¥
.
	`£tWšdowRightOff£t
 ( uiCod* 
TComSPS
::
	`g‘WšUn™X
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
()) );

499 
	`READ_UVLC
Ð
uiCode
, "def_di¥_wš_tÝ_off£t" ); 
defDi¥
.
	`£tWšdowTÝOff£t
 ( uiCod* 
TComSPS
::
	`g‘WšUn™Y
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
()) );

500 
	`READ_UVLC
Ð
uiCode
, "def_di¥_wš_bÙtom_off£t" ); 
defDi¥
.
	`£tWšdowBÙtomOff£t
ÐuiCod* 
TComSPS
::
	`g‘WšUn™Y
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
()) );

503 
TimšgInfo
 *
timšgInfo
 = 
pcVUI
->
	`g‘TimšgInfo
();

504 
	`READ_FLAG
Ð
uiCode
, "vui_timšg_šfo_´e£Á_æag"); 
timšgInfo
->
	`£tTimšgInfoP»£ÁFÏg
 (uiCod? 
Œue
 : 
çl£
);

505 if(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
())

507 
	`READ_CODE
Ð32, 
uiCode
, "vui_num_un™s_š_tick"); 
timšgInfo
->
	`£tNumUn™sInTick
 (uiCode);

508 
	`READ_CODE
Ð32, 
uiCode
, "vui_time_sÿË"); 
timšgInfo
->
	`£tTimeSÿË
 (uiCode);

509 
	`READ_FLAG
Ð
uiCode
, "vui_poc_´ÝÜtiÚ®_to_timšg_æag"); 
timšgInfo
->
	`£tPocPrÝÜtiÚ®ToTimšgFÏg
(uiCod? 
Œue
 : 
çl£
);

510 if(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
())

512 
	`READ_UVLC
Ð
uiCode
, "vui_num_ticks_poc_diff_Úe_mšus1"); 
timšgInfo
->
	`£tNumTicksPocDiffOÃMšus1
 (uiCode);

515 
	`READ_FLAG
Ð
uiCode
, "vui_hrd_·¿m‘”s_´e£Á_æag"); 
pcVUI
->
	`£tHrdP¬am‘”sP»£ÁFÏg
(uiCode);

516 ifÐ
pcVUI
->
	`g‘HrdP¬am‘”sP»£ÁFÏg
() )

518 
	`·r£HrdP¬am‘”s
Ð
pcVUI
->
	`g‘HrdP¬am‘”s
(), 1, 
pcSPS
->
	`g‘MaxTLay”s
() - 1 );

522 
	`READ_FLAG
Ð
uiCode
, "b™¡»am_»¡riùiÚ_æag"); 
pcVUI
->
	`£tB™¡»amRe¡riùiÚFÏg
(uiCode);

523 ià(
pcVUI
->
	`g‘B™¡»amRe¡riùiÚFÏg
())

525 
	`READ_FLAG
Ð
uiCode
, "tžes_fixed_¡ruùu»_æag"); 
pcVUI
->
	`£tTžesFixedSŒuùu»FÏg
(uiCode);

526 
	`READ_FLAG
Ð
uiCode
, "mÙiÚ_veùÜs_ov”_pic_bound¬›s_æag"); 
pcVUI
->
	`£tMÙiÚVeùÜsOv”PicBound¬›sFÏg
(uiCode);

527 
	`READ_FLAG
Ð
uiCode
, "»¡riùed_»f_pic_li¡s_æag"); 
pcVUI
->
	`£tRe¡riùedRefPicLi¡sFÏg
(uiCode);

528 
	`READ_UVLC
Ð
uiCode
, "mš_¥©Ÿl_£gm’tiÚ_idc"); 
pcVUI
->
	`£tMšS·tŸlSegm’tiÚIdc
(uiCode);

529 
	`as£¹
(
uiCode
 < 4096);

530 
	`READ_UVLC
Ð
uiCode
, "max_by‹s_³r_pic_d’om" ); 
pcVUI
->
	`£tMaxBy‹sP”PicD’om
(uiCode);

531 
	`READ_UVLC
Ð
uiCode
, "max_b™s_³r_mš_cu_d’om" ); 
pcVUI
->
	`£tMaxB™sP”MšCuD’om
(uiCode);

532 
	`READ_UVLC
Ð
uiCode
, "log2_max_mv_Ëngth_hÜizÚl" ); 
pcVUI
->
	`£tLog2MaxMvL’gthHÜizÚl
(uiCode);

533 
	`READ_UVLC
Ð
uiCode
, "log2_max_mv_Ëngth_v”tiÿl" ); 
pcVUI
->
	`£tLog2MaxMvL’gthV”tiÿl
(uiCode);

535 
	}
}

537 
Void
 
	gTDecCavlc
::
	$·r£HrdP¬am‘”s
(
TComHRD
 *
hrd
, 
BoÞ
 
commÚInfP»£ÁFÏg
, 
UIÁ
 
maxNumSubLay”sMšus1
)

539 
UIÁ
 
uiCode
;

540 ifÐ
commÚInfP»£ÁFÏg
 )

542 
	`READ_FLAG
Ð
uiCode
, "Çl_hrd_·¿m‘”s_´e£Á_æag" ); 
hrd
->
	`£tN®HrdP¬am‘”sP»£ÁFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
 );

543 
	`READ_FLAG
Ð
uiCode
, "vþ_hrd_·¿m‘”s_´e£Á_æag" ); 
hrd
->
	`£tVþHrdP¬am‘”sP»£ÁFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
 );

544 ifÐ
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
(è|| hrd->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() )

546 
	`READ_FLAG
Ð
uiCode
, "sub_pic_hrd_·¿ms_´e£Á_æag" ); 
hrd
->
	`£tSubPicCpbP¬amsP»£ÁFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
 );

547 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

549 
	`READ_CODE
Ð8, 
uiCode
, "tick_divisÜ_mšus2" ); 
hrd
->
	`£tTickDivisÜMšus2
( uiCode );

550 
	`READ_CODE
Ð5, 
uiCode
, "du_ýb_»mov®_d–ay_šüem’t_Ëngth_mšus1" ); 
hrd
->
	`£tDuCpbRemov®D–ayL’gthMšus1
( uiCode );

551 
	`READ_FLAG
Ð
uiCode
, "sub_pic_ýb_·¿ms_š_pic_timšg_£i_æag" ); 
hrd
->
	`£tSubPicCpbP¬amsInPicTimšgSEIFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
 );

552 
	`READ_CODE
Ð5, 
uiCode
, "dpb_ouut_d–ay_du_Ëngth_mšus1" ); 
hrd
->
	`£tDpbOuutD–ayDuL’gthMšus1
( uiCode );

554 
	`READ_CODE
Ð4, 
uiCode
, "b™_¿‹_sÿË" ); 
hrd
->
	`£tB™R©eSÿË
( uiCode );

555 
	`READ_CODE
Ð4, 
uiCode
, "ýb_size_sÿË" ); 
hrd
->
	`£tCpbSizeSÿË
( uiCode );

556 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

558 
	`READ_CODE
Ð4, 
uiCode
, "ýb_size_du_sÿË" ); 
hrd
->
	`£tDuCpbSizeSÿË
( uiCode );

560 
	`READ_CODE
Ð5, 
uiCode
, "š™Ÿl_ýb_»mov®_d–ay_Ëngth_mšus1" ); 
hrd
->
	`£tIn™ŸlCpbRemov®D–ayL’gthMšus1
( uiCode );

561 
	`READ_CODE
Ð5, 
uiCode
, "au_ýb_»mov®_d–ay_Ëngth_mšus1" ); 
hrd
->
	`£tCpbRemov®D–ayL’gthMšus1
( uiCode );

562 
	`READ_CODE
Ð5, 
uiCode
, "dpb_ouut_d–ay_Ëngth_mšus1" ); 
hrd
->
	`£tDpbOuutD–ayL’gthMšus1
( uiCode );

565 
IÁ
 
i
, 
j
, 
ÇlOrVþ
;

566  
i
 = 0; i <ð
maxNumSubLay”sMšus1
; i ++ )

568 
	`READ_FLAG
Ð
uiCode
, "fixed_pic_¿‹_g’”®_æag" ); 
hrd
->
	`£tFixedPicR©eFÏg
Ð
i
, uiCod=ð1 ? 
Œue
 : 
çl£
 );

569 ifÐ!
hrd
->
	`g‘FixedPicR©eFÏg
Ð
i
 ) )

571 
	`READ_FLAG
Ð
uiCode
, "fixed_pic_¿‹_w™hš_cvs_æag" ); 
hrd
->
	`£tFixedPicR©eW™hšCvsFÏg
Ð
i
, uiCod=ð1 ? 
Œue
 : 
çl£
 );

575 
hrd
->
	`£tFixedPicR©eW™hšCvsFÏg
Ð
i
, 
Œue
 );

578 
hrd
->
	`£tLowD–ayHrdFÏg
Ð
i
, 0 );

579 
hrd
->
	`£tCpbCÁMšus1
 ( 
i
, 0 );

581 ifÐ
hrd
->
	`g‘FixedPicR©eW™hšCvsFÏg
Ð
i
 ) )

583 
	`READ_UVLC
Ð
uiCode
, "–em’l_du¿tiÚ_š_tc_mšus1" ); 
hrd
->
	`£tPicDu¿tiÚInTcMšus1
Ð
i
, uiCode );

587 
	`READ_FLAG
Ð
uiCode
, "low_d–ay_hrd_æag" ); 
hrd
->
	`£tLowD–ayHrdFÏg
Ð
i
, uiCod=ð1 ? 
Œue
 : 
çl£
 );

589 ià(!
hrd
->
	`g‘LowD–ayHrdFÏg
Ð
i
 ))

591 
	`READ_UVLC
Ð
uiCode
, "ýb_út_mšus1" ); 
hrd
->
	`£tCpbCÁMšus1
Ð
i
, uiCode );

594  
ÇlOrVþ
 = 0;‚alOrVcl < 2;‚alOrVcl ++ )

596 ifÐÐÐ
ÇlOrVþ
 =ð0 ) && ( 
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() ) ) ||

597 ÐÐ
ÇlOrVþ
 =ð1 ) && ( 
hrd
->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) )

599  
j
 = 0; j <ðÐ
hrd
->
	`g‘CpbCÁMšus1
Ð
i
 ) ); j ++ )

601 
	`READ_UVLC
Ð
uiCode
, "b™_¿‹_v®ue_mšus1" ); 
hrd
->
	`£tB™R©eV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
, uiCode );

602 
	`READ_UVLC
Ð
uiCode
, "ýb_size_v®ue_mšus1" ); 
hrd
->
	`£tCpbSizeV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
, uiCode );

603 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

605 
	`READ_UVLC
Ð
uiCode
, "ýb_size_du_v®ue_mšus1" ); 
hrd
->
	`£tDuCpbSizeV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
, uiCode );

606 
	`READ_UVLC
Ð
uiCode
, "b™_¿‹_du_v®ue_mšus1" ); 
hrd
->
	`£tDuB™R©eV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
, uiCode );

608 
	`READ_FLAG
Ð
uiCode
, "cbr_æag" ); 
hrd
->
	`£tCbrFÏg
Ð
i
, 
j
, 
ÇlOrVþ
, uiCod=ð1 ? 
Œue
 : 
çl£
 );

613 
	}
}

615 
Void
 
	gTDecCavlc
::
	$·r£SPS
(
TComSPS
* 
pcSPS
)

617 #ià
ENC_DEC_TRACE


618 #ià
MCTS_EXTRACTION


619 
	`xT¿ûSPSH—d”Dec
 ();

621 
	`xT¿ûSPSH—d”
 ();

625 
UIÁ
 
uiCode
;

626 
	`READ_CODE
Ð4, 
uiCode
, "¥s_video_·¿m‘”_£t_id"); 
pcSPS
->
	`£tVPSId
 ( uiCode );

627 
	`READ_CODE_CHK
Ð3, 
uiCode
, "¥s_max_sub_Ïy”s_mšus1", 0, 6 ); 
pcSPS
->
	`£tMaxTLay”s
 ( uiCode+1 );

628 
	`as£¹
(
uiCode
 <= 6);

630 
	`READ_FLAG
Ð
uiCode
, "¥s_‹mpÜ®_id_Ã¡šg_æag" ); 
pcSPS
->
	`£tTempÜ®IdNe¡šgFÏg
 ( uiCod> 0 ? 
Œue
 : 
çl£
 );

631 iàÐ
pcSPS
->
	`g‘MaxTLay”s
() == 1 )

634 
TDecCÚfÜmªûCheck
::
	`checkRªge
(
uiCode
, "sps_temporal_id_nesting_flag", 1U, 1U);

635 
	`as£¹
Ð
uiCode
 == 1 );

638 
	`·r£PTL
(
pcSPS
->
	`g‘PTL
(), 1,…cSPS->
	`g‘MaxTLay”s
() - 1);

639 
	`READ_UVLC_CHK
Ð
uiCode
, "¥s_£q_·¿m‘”_£t_id", 0, 15 ); 
pcSPS
->
	`£tSPSId
( uiCode );

640 
	`as£¹
(
uiCode
 <= 15);

642 
	`READ_UVLC_CHK
Ð
uiCode
, "chroma_fÜm©_idc", 0, 3 ); 
pcSPS
->
	`£tChromaFÜm©Idc
Ð
	`ChromaFÜm©
(uiCode) );

643 
	`as£¹
(
uiCode
 <= 3);

645 ifÐ
pcSPS
->
	`g‘ChromaFÜm©Idc
(è=ð
CHROMA_444
 )

647 
	`READ_FLAG_CHK
Ð
uiCode
, "separate_colour_plane_flag", 0, 0);

648 
	`as£¹
(
uiCode
 == 0);

652 
	`READ_UVLC_CHK
 ( 
uiCode
, "pic_width_š_luma_§m¶es", 1, 
¡d
::
num”ic_lim™s
<
UIÁ
>::
	`max
(è); 
pcSPS
->
	`£tPicWidthInLumaSam¶es
 ( uiCode );

653 
	`READ_UVLC_CHK
 ( 
uiCode
, "pic_height_š_luma_§m¶es", 1, 
¡d
::
num”ic_lim™s
<
UIÁ
>::
	`max
(è); 
pcSPS
->
	`£tPicHeightInLumaSam¶es
( uiCode );

654 
	`READ_FLAG
Ð
uiCode
, "conformance_window_flag");

655 ià(
uiCode
 != 0)

657 
Wšdow
 &
cÚf
 = 
pcSPS
->
	`g‘CÚfÜmªûWšdow
();

658 cÚ¡ 
UIÁ
 
subWidthC
 = 
TComSPS
::
	`g‘WšUn™X
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
() );

659 cÚ¡ 
UIÁ
 
subHeightC
 = 
TComSPS
::
	`g‘WšUn™Y
Ð
pcSPS
->
	`g‘ChromaFÜm©Idc
() );

660 
	`READ_UVLC
Ð
uiCode
, "cÚf_wš_Ëá_off£t" ); 
cÚf
.
	`£tWšdowLeáOff£t
 ( uiCod* 
subWidthC
 );

661 
	`READ_UVLC
Ð
uiCode
, "cÚf_wš_right_off£t" ); 
cÚf
.
	`£tWšdowRightOff£t
 ( uiCod* 
subWidthC
 );

662 
	`READ_UVLC
Ð
uiCode
, "cÚf_wš_tÝ_off£t" ); 
cÚf
.
	`£tWšdowTÝOff£t
 ( uiCod* 
subHeightC
 );

663 
	`READ_UVLC
Ð
uiCode
, "cÚf_wš_bÙtom_off£t" ); 
cÚf
.
	`£tWšdowBÙtomOff£t
ÐuiCod* 
subHeightC
 );

664 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
cÚf
.
	`g‘WšdowLeáOff£t
()+cÚf.
	`g‘WšdowRightOff£t
(), "cÚfÜmªû wšdow width iÀpix–s", 0, 
pcSPS
->
	`g‘PicWidthInLumaSam¶es
()-1);

667 
	`READ_UVLC_CHK
Ð
uiCode
, "bit_depth_luma_minus8", 0, 8 );

668 
	`as£¹
(
uiCode
 <= 8);

669 #ià
O0043_BEST_EFFORT_DECODING


670 
pcSPS
->
	`£tSŒ—mB™D•th
(
CHANNEL_TYPE_LUMA
, 8 + 
uiCode
);

671 cÚ¡ 
UIÁ
 
fÜûDecodeB™D•th
 = 
pcSPS
->
	`g‘FÜûDecodeB™D•th
();

672 ià(
fÜûDecodeB™D•th
 != 0)

674 
uiCode
 = 
fÜûDecodeB™D•th
 - 8;

676 
	`as£¹
(
uiCode
 <= 8);

678 
pcSPS
->
	`£tB™D•th
(
CHANNEL_TYPE_LUMA
, 8 + 
uiCode
);

680 #ià
O0043_BEST_EFFORT_DECODING


681 
pcSPS
->
	`£tQpBDOff£t
(
CHANNEL_TYPE_LUMA
, (
IÁ
è(6*ÕcSPS->
	`g‘SŒ—mB™D•th
(CHANNEL_TYPE_LUMA)-8)) );

683 
pcSPS
->
	`£tQpBDOff£t
(
CHANNEL_TYPE_LUMA
, (
IÁ
è(6*
uiCode
) );

686 
	`READ_UVLC_CHK
Ð
uiCode
, "bit_depth_chroma_minus8", 0, 8 );

687 
	`as£¹
(
uiCode
 <= 8);

688 #ià
O0043_BEST_EFFORT_DECODING


689 
pcSPS
->
	`£tSŒ—mB™D•th
(
CHANNEL_TYPE_CHROMA
, 8 + 
uiCode
);

690 ià(
fÜûDecodeB™D•th
 != 0)

692 
uiCode
 = 
fÜûDecodeB™D•th
 - 8;

694 
	`as£¹
(
uiCode
 <= 8);

696 
pcSPS
->
	`£tB™D•th
(
CHANNEL_TYPE_CHROMA
, 8 + 
uiCode
);

697 #ià
O0043_BEST_EFFORT_DECODING


698 
pcSPS
->
	`£tQpBDOff£t
(
CHANNEL_TYPE_CHROMA
, (
IÁ
è(6*ÕcSPS->
	`g‘SŒ—mB™D•th
(CHANNEL_TYPE_CHROMA)-8)) );

700 
pcSPS
->
	`£tQpBDOff£t
(
CHANNEL_TYPE_CHROMA
, (
IÁ
è(6*
uiCode
) );

703 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_max_pic_Üd”_út_lsb_mšus4", 0, 12 ); 
pcSPS
->
	`£tB™sFÜPOC
( 4 + uiCode );

705 
UIÁ
 
subLay”Ord”šgInfoP»£ÁFÏg
;

706 
	`READ_FLAG
(
subLay”Ord”šgInfoP»£ÁFÏg
, "sps_sub_layer_ordering_info_present_flag");

708 
UIÁ
 
i
=0; i <ð
pcSPS
->
	`g‘MaxTLay”s
()-1; i++)

710 
	`READ_UVLC
 ( 
uiCode
, "sps_max_dec_pic_buffering_minus1[i]");

711 
pcSPS
->
	`£tMaxDecPicBufãršg
Ð
uiCode
 + 1, 
i
);

712 
	`READ_UVLC
 ( 
uiCode
, "sps_max_num_reorder_pics[i]" );

713 
pcSPS
->
	`£tNumReÜd”Pics
(
uiCode
, 
i
);

714 
	`READ_UVLC
 ( 
uiCode
, "sps_max_latency_increase_plus1[i]");

715 
pcSPS
->
	`£tMaxL©’cyInü—£Plus1
Ð
uiCode
, 
i
 );

717 ià(!
subLay”Ord”šgInfoP»£ÁFÏg
)

719 
i
++; i <ð
pcSPS
->
	`g‘MaxTLay”s
()-1; i++)

721 
pcSPS
->
	`£tMaxDecPicBufãršg
ÕcSPS->
	`g‘MaxDecPicBufãršg
(0), 
i
);

722 
pcSPS
->
	`£tNumReÜd”Pics
ÕcSPS->
	`g‘NumReÜd”Pics
(0), 
i
);

723 
pcSPS
->
	`£tMaxL©’cyInü—£Plus1
ÕcSPS->
	`g‘MaxL©’cyInü—£Plus1
(0), 
i
);

729 cÚ¡ 
UIÁ
 
maxLog2CtbSize
 = 
TDecCÚfÜmªûCheck
::
	`g‘MaxLog2CtbSize
(*(
pcSPS
->
	`g‘PTL
()));

730 cÚ¡ 
UIÁ
 
mšLog2CtbSize
 = 
TDecCÚfÜmªûCheck
::
	`g‘MšLog2CtbSize
(*(
pcSPS
->
	`g‘PTL
()));

731 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_mš_luma_codšg_block_size_mšus3", 0, 
maxLog2CtbSize
-3 );

732 
	`as£¹
(
uiCode
 <ð
maxLog2CtbSize
-3);

733 
IÁ
 
mšCbLog2SizeY
 = 
uiCode
 + 3;

734 
pcSPS
->
	`£tLog2MšCodšgBlockSize
(
mšCbLog2SizeY
);

738 cÚ¡ 
UIÁ
 
mšLog2DiffMaxMšLumaCodšgBlockSize
 = 
mšLog2CtbSize
 < 
mšCbLog2SizeY
 ? 0 : minLog2CtbSize - minCbLog2SizeY;

739 cÚ¡ 
UIÁ
 
maxLog2DiffMaxMšLumaCodšgBlockSize
 = 
maxLog2CtbSize
 - 
mšCbLog2SizeY
;

741 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_diff_max_mš_luma_codšg_block_size", 
mšLog2DiffMaxMšLumaCodšgBlockSize
, 
maxLog2DiffMaxMšLumaCodšgBlockSize
);

742 
	`as£¹
(
uiCode
 >ð
mšLog2DiffMaxMšLumaCodšgBlockSize
 && uiCod<ð
maxLog2DiffMaxMšLumaCodšgBlockSize
);

743 
pcSPS
->
	`£tLog2DiffMaxMšCodšgBlockSize
(
uiCode
);

745 cÚ¡ 
IÁ
 
maxCUD•thD–
 = 
uiCode
;

746 cÚ¡ 
IÁ
 
ùbLog2SizeY
 = 
mšCbLog2SizeY
 + 
maxCUD•thD–
;

747 
pcSPS
->
	`£tMaxCUWidth
 ( 1<<
ùbLog2SizeY
 );

748 
pcSPS
->
	`£tMaxCUHeight
 ( 1<<
ùbLog2SizeY
 );

749 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_mš_luma_ŒªsfÜm_block_size_mšus2", 0, 
mšCbLog2SizeY
-1-2 );

750 cÚ¡ 
UIÁ
 
mšTbLog2SizeY
 = 
uiCode
 + 2;

751 
pcSPS
->
	`£tQuadŒ“TULog2MšSize
Ð
mšTbLog2SizeY
 );

754 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_diff_max_mš_luma_ŒªsfÜm_block_size", 0, 
mš
<
UIÁ
>(5U, 
ùbLog2SizeY
è- 
mšTbLog2SizeY
 );

755 
pcSPS
->
	`£tQuadŒ“TULog2MaxSize
Ð
uiCode
 +…cSPS->
	`g‘QuadŒ“TULog2MšSize
() );

756 
pcSPS
->
	`£tMaxTrSize
Ð1<<(
uiCode
 +…cSPS->
	`g‘QuadŒ“TULog2MšSize
()) );

758 
	`READ_UVLC_CHK
Ð
uiCode
, "max_ŒªsfÜm_h›¿rchy_d•th_š‹r", 0, 
ùbLog2SizeY
 - 
mšTbLog2SizeY
); 
pcSPS
->
	`£tQuadŒ“TUMaxD•thIÁ”
( uiCode+1 );

759 
	`READ_UVLC_CHK
Ð
uiCode
, "max_ŒªsfÜm_h›¿rchy_d•th_šŒa", 0, 
ùbLog2SizeY
 - 
mšTbLog2SizeY
); 
pcSPS
->
	`£tQuadŒ“TUMaxD•thIÁ¿
( uiCode+1 );

761 
IÁ
 
addCuD•th
 = 
	`max
 (0, 
mšCbLog2SizeY
 - (IÁ)
pcSPS
->
	`g‘QuadŒ“TULog2MšSize
() );

762 
pcSPS
->
	`£tMaxTÙ®CUD•th
Ð
maxCUD•thD–
 + 
addCuD•th
 + 
	`g‘MaxCUD•thOff£t
ÕcSPS->
	`g‘ChromaFÜm©Idc
(),…cSPS->
	`g‘QuadŒ“TULog2MšSize
()) );

764 
	`READ_FLAG
Ð
uiCode
, "sÿlšg_li¡_’abËd_æag" ); 
pcSPS
->
	`£tSÿlšgLi¡FÏg
 ( uiCode );

765 if(
pcSPS
->
	`g‘SÿlšgLi¡FÏg
())

767 
	`READ_FLAG
Ð
uiCode
, "¥s_sÿlšg_li¡_d©a_´e£Á_æag" ); 
pcSPS
->
	`£tSÿlšgLi¡P»£ÁFÏg
 ( uiCode );

768 if(
pcSPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
 ())

770 
	`·r£SÿlšgLi¡
Ð&(
pcSPS
->
	`g‘SÿlšgLi¡
()) );

773 
	`READ_FLAG
Ð
uiCode
, "amp_’abËd_æag" ); 
pcSPS
->
	`£tU£AMP
( uiCode );

774 
	`READ_FLAG
Ð
uiCode
, "§m¶e_ad­tive_off£t_’abËd_æag" ); 
pcSPS
->
	`£tU£SAO
 ( uiCod? 
Œue
 : 
çl£
 );

776 
	`READ_FLAG
Ð
uiCode
, "pcm_’abËd_æag" ); 
pcSPS
->
	`£tU£PCM
ÐuiCod? 
Œue
 : 
çl£
 );

777 ifÐ
pcSPS
->
	`g‘U£PCM
() )

779 #ià
O0043_BEST_EFFORT_DECODING


780 
	`READ_CODE_CHK
Ð4, 
uiCode
, "pcm_§m¶e_b™_d•th_luma_mšus1", 0, 
pcSPS
->
	`g‘SŒ—mB™D•th
(
CHANNEL_TYPE_LUMA
è);…cSPS->
	`£tPCMB™D•th
 ( CHANNEL_TYPE_LUMA, 1 + uiCode );

781 
	`READ_CODE_CHK
Ð4, 
uiCode
, "pcm_§m¶e_b™_d•th_chroma_mšus1", 0, 
pcSPS
->
	`g‘SŒ—mB™D•th
(
CHANNEL_TYPE_LUMA
è);…cSPS->
	`£tPCMB™D•th
 ( 
CHANNEL_TYPE_CHROMA
, 1 + uiCode );

783 
	`READ_CODE_CHK
Ð4, 
uiCode
, "pcm_§m¶e_b™_d•th_luma_mšus1", 0, 
pcSPS
->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
è);…cSPS->
	`£tPCMB™D•th
 ( CHANNEL_TYPE_LUMA, 1 + uiCode );

784 
	`READ_CODE_CHK
Ð4, 
uiCode
, "pcm_§m¶e_b™_d•th_chroma_mšus1", 0, 
pcSPS
->
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
è);…cSPS->
	`£tPCMB™D•th
 ( CHANNEL_TYPE_CHROMA, 1 + uiCode );

786 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_mš_pcm_luma_codšg_block_size_mšus3", 
¡d
::
mš
<
UIÁ
>(
mšCbLog2SizeY
, 5 )-3, std::mš<UIÁ>(
ùbLog2SizeY
, 5)-3);

787 cÚ¡ 
UIÁ
 
log2MšIpcmCbSizeY
 = 
uiCode
+3;

788 
pcSPS
->
	`£tPCMLog2MšSize
 (
log2MšIpcmCbSizeY
);

789 
	`READ_UVLC_CHK
Ð
uiCode
, "log2_diff_max_mš_pcm_luma_codšg_block_size", 0, (
¡d
::
mš
<
UIÁ
>(
ùbLog2SizeY
,5è- 
log2MšIpcmCbSizeY
) );

790 
pcSPS
->
	`£tPCMLog2MaxSize
 ( 
uiCode
+pcSPS->
	`g‘PCMLog2MšSize
() );

791 
	`READ_FLAG
Ð
uiCode
, "pcm_loÝ_fž‹r_di§bË_æag" ); 
pcSPS
->
	`£tPCMFž‹rDi§bËFÏg
 ( uiCod? 
Œue
 : 
çl£
 );

794 
	`READ_UVLC_CHK
Ð
uiCode
, "num_short_term_ref_pic_sets", 0, 64 );

795 
	`as£¹
(
uiCode
 <= 64);

796 
pcSPS
->
	`ü—‹RPSLi¡
(
uiCode
);

798 
TComRPSLi¡
* 
½sLi¡
 = 
pcSPS
->
	`g‘RPSLi¡
();

799 
TComReã»nûPiùu»S‘
* 
½s
;

801 
UIÁ
 
i
=0; i< 
½sLi¡
->
	`g‘Numb”OfReã»nûPiùu»S‘s
(); i++)

803 
½s
 = 
½sLi¡
->
	`g‘Reã»nûPiùu»S‘
(
i
);

804 
	`·r£ShÜtT”mRefPicS‘
(
pcSPS
,
½s
,
i
);

806 
	`READ_FLAG
Ð
uiCode
, "lÚg_‹rm_»f_pics_´e£Á_æag" ); 
pcSPS
->
	`£tLÚgT”mRefsP»£Á
(uiCode);

807 ià(
pcSPS
->
	`g‘LÚgT”mRefsP»£Á
())

809 
	`READ_UVLC_CHK
Ð
uiCode
, "num_long_term_ref_pics_sps", 0, 32 );

810 
pcSPS
->
	`£tNumLÚgT”mRefPicSPS
(
uiCode
);

811 
UIÁ
 
k
 = 0; k < 
pcSPS
->
	`g‘NumLÚgT”mRefPicSPS
(); k++)

813 
	`READ_CODE
Ð
pcSPS
->
	`g‘B™sFÜPOC
(), 
uiCode
, "lt_ref_pic_poc_lsb_sps" );

814 
pcSPS
->
	`£tLtRefPicPocLsbSps
(
k
, 
uiCode
);

815 
	`READ_FLAG
Ð
uiCode
, "used_by_curr_pic_lt_sps_flag[i]");

816 
pcSPS
->
	`£tU£dByCu¼PicLtSPSFÏg
(
k
, 
uiCode
?1:0);

819 
	`READ_FLAG
Ð
uiCode
, "¥s_‹mpÜ®_mvp_’abËd_æag" ); 
pcSPS
->
	`£tSPSTempÜ®MVPEÇbËdFÏg
(uiCode);

821 
	`READ_FLAG
Ð
uiCode
, "¡rÚg_šŒa_smoÙhšg_’abË_æag" ); 
pcSPS
->
	`£tU£SŒÚgIÁ¿SmoÙhšg
(uiCode);

823 
	`READ_FLAG
Ð
uiCode
, "vui_·¿m‘”s_´e£Á_æag" ); 
pcSPS
->
	`£tVuiP¬am‘”sP»£ÁFÏg
(uiCode);

825 ià(
pcSPS
->
	`g‘VuiP¬am‘”sP»£ÁFÏg
())

827 
	`·r£VUI
(
pcSPS
->
	`g‘VuiP¬am‘”s
(),…cSPS);

830 
	`READ_FLAG
Ð
uiCode
, "sps_extension_present_flag");

831 ià(
uiCode
)

833 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


834 cÚ¡ 
TCh¬
 *
syÁaxSŒšgs
[]={ "sps_range_extension_flag",

843 
BoÞ
 
¥s_ex‹nsiÚ_æags
[
NUM_SPS_EXTENSION_FLAGS
];

845 
IÁ
 
i
=0; i<
NUM_SPS_EXTENSION_FLAGS
; i++)

847 
	`READ_FLAG
Ð
uiCode
, 
syÁaxSŒšgs
[
i
] );

848 
¥s_ex‹nsiÚ_æags
[
i
] = 
uiCode
!=0;

851 
BoÞ
 
bSkT¿žšgEx‹nsiÚB™s
=
çl£
;

852 
IÁ
 
i
=0; i<
NUM_SPS_EXTENSION_FLAGS
; i++)

854 ià(
¥s_ex‹nsiÚ_æags
[
i
])

856 
	`SPSEx‹nsiÚFÏgIndex
(
i
))

858 
SPS_EXT__REXT
:

859 
	`as£¹
(!
bSkT¿žšgEx‹nsiÚB™s
);

861 
TComSPSRExt
 &
¥sRªgeEx‹nsiÚ
 = 
pcSPS
->
	`g‘SpsRªgeEx‹nsiÚ
();

862 
	`READ_FLAG
Ð
uiCode
, "ŒªsfÜm_sk_rÙ©iÚ_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tT¿nsfÜmSkRÙ©iÚEÇbËdFÏg
(uiCode != 0);

863 
	`READ_FLAG
Ð
uiCode
, "ŒªsfÜm_sk_cÚ‹xt_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tT¿nsfÜmSkCÚ‹xtEÇbËdFÏg
 (uiCode != 0);

864 
	`READ_FLAG
Ð
uiCode
, "im¶ic™_rdpcm_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tRdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_IMPLICIT
, (uiCode != 0));

865 
	`READ_FLAG
Ð
uiCode
, "ex¶ic™_rdpcm_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tRdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_EXPLICIT
, (uiCode != 0));

866 
	`READ_FLAG
Ð
uiCode
, "ex‹nded_´ecisiÚ_´oûssšg_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tEx‹ndedP»cisiÚProûssšgFÏg
 (uiCode != 0);

867 
	`READ_FLAG
Ð
uiCode
, "šŒa_smoÙhšg_di§bËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tIÁ¿SmoÙhšgDi§bËdFÏg
 (uiCode != 0);

868 
	`READ_FLAG
Ð
uiCode
, "high_´ecisiÚ_off£ts_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tHighP»cisiÚOff£tsEÇbËdFÏg
 (uiCode != 0);

869 
	`READ_FLAG
Ð
uiCode
, "³rsi¡’t_riû_ad­tiÚ_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tP”si¡’tRiûAd­tiÚEÇbËdFÏg
 (uiCode != 0);

870 
	`READ_FLAG
Ð
uiCode
, "ÿbac_by·ss_®ignm’t_’abËd_æag"); 
¥sRªgeEx‹nsiÚ
.
	`£tCabacBy·ssAlignm’tEÇbËdFÏg
 (uiCode != 0);

874 
bSkT¿žšgEx‹nsiÚB™s
=
Œue
;

879 ià(
bSkT¿žšgEx‹nsiÚB™s
)

881  
	`xMÜeRb¥D©a
() )

883 
	`READ_FLAG
Ð
uiCode
, "sps_extension_data_flag");

888 
	`xR—dRb¥T¿žšgB™s
();

889 
	}
}

891 
Void
 
	gTDecCavlc
::
	$·r£VPS
(
TComVPS
* 
pcVPS
)

893 #ià
ENC_DEC_TRACE


894 #ià
MCTS_EXTRACTION


895 
	`xT¿ûVPSH—d”Dec
 ();

897 
	`xT¿ûVPSH—d”
();

900 
UIÁ
 
uiCode
;

902 
	`READ_CODE
Ð4, 
uiCode
, "vps_video_·¿m‘”_£t_id" ); 
pcVPS
->
	`£tVPSId
( uiCode );

903 
	`READ_FLAG
Ð
uiCode
, "vps_ba£_Ïy”_š‹º®_æag" ); 
	`as£¹
(uiCode == 1);

904 
	`READ_FLAG
Ð
uiCode
, "vps_ba£_Ïy”_avažabË_æag" ); 
	`as£¹
(uiCode == 1);

905 
	`READ_CODE
Ð6, 
uiCode
, "vps_max_layers_minus1" );

906 
	`READ_CODE
Ð3, 
uiCode
, "vps_max_sub_Ïy”s_mšus1" ); 
pcVPS
->
	`£tMaxTLay”s
ÐuiCod+ 1 ); 
	`as£¹
(uiCode+1 <ð
MAX_TLAYER
);

907 
	`READ_FLAG
Ð
uiCode
, "vps_‹mpÜ®_id_Ã¡šg_æag" ); 
pcVPS
->
	`£tTempÜ®Ne¡šgFÏg
ÐuiCod? 
Œue
:
çl£
 );

908 
	`as£¹
 (
pcVPS
->
	`g‘MaxTLay”s
()>1||pcVPS->
	`g‘TempÜ®Ne¡šgFÏg
());

909 
	`READ_CODE
Ð16, 
uiCode
, "vps_»£rved_0xffff_16b™s" ); 
	`as£¹
(uiCode == 0xffff);

910 
	`·r£PTL
 ( 
pcVPS
->
	`g‘PTL
(), 
Œue
,…cVPS->
	`g‘MaxTLay”s
()-1);

911 
UIÁ
 
subLay”Ord”šgInfoP»£ÁFÏg
;

912 
	`READ_FLAG
(
subLay”Ord”šgInfoP»£ÁFÏg
, "vps_sub_layer_ordering_info_present_flag");

913 
UIÁ
 
i
 = 0; i <ð
pcVPS
->
	`g‘MaxTLay”s
()-1; i++)

915 
	`READ_UVLC
Ð
uiCode
, "vps_max_dec_pic_bufãršg_mšus1[i]" ); 
pcVPS
->
	`£tMaxDecPicBufãršg
ÐuiCod+ 1, 
i
 );

916 
	`READ_UVLC
Ð
uiCode
, "vps_max_num_»Üd”_pics[i]" ); 
pcVPS
->
	`£tNumReÜd”Pics
ÐuiCode, 
i
 );

917 
	`READ_UVLC
Ð
uiCode
, "vps_max_Ï‹ncy_šü—£_¶us1[i]" ); 
pcVPS
->
	`£tMaxL©’cyInü—£
ÐuiCode, 
i
 );

919 ià(!
subLay”Ord”šgInfoP»£ÁFÏg
)

921 
i
++; i <ð
pcVPS
->
	`g‘MaxTLay”s
()-1; i++)

923 
pcVPS
->
	`£tMaxDecPicBufãršg
ÕcVPS->
	`g‘MaxDecPicBufãršg
(0), 
i
);

924 
pcVPS
->
	`£tNumReÜd”Pics
ÕcVPS->
	`g‘NumReÜd”Pics
(0), 
i
);

925 
pcVPS
->
	`£tMaxL©’cyInü—£
ÕcVPS->
	`g‘MaxL©’cyInü—£
(0), 
i
);

931 
	`as£¹
Ð
pcVPS
->
	`g‘NumHrdP¬am‘”s
(è< 
MAX_VPS_OP_SETS_PLUS1
 );

932 
	`as£¹
Ð
pcVPS
->
	`g‘MaxNuhRe£rvedZ”oLay”Id
(è< 
MAX_VPS_NUH_RESERVED_ZERO_LAYER_ID_PLUS1
 );

933 
	`READ_CODE
Ð6, 
uiCode
, "vps_max_Ïy”_id" ); 
pcVPS
->
	`£tMaxNuhRe£rvedZ”oLay”Id
( uiCode );

934 
	`READ_UVLC
Ð
uiCode
, "vps_num_Ïy”_£ts_mšus1" ); 
pcVPS
->
	`£tMaxOpS‘s
( uiCode + 1 );

935  
UIÁ
 
ÝsIdx
 = 1; opsIdx <ðÐ
pcVPS
->
	`g‘MaxOpS‘s
() - 1 ); opsIdx ++ )

938  
UIÁ
 
i
 = 0; i <ð
pcVPS
->
	`g‘MaxNuhRe£rvedZ”oLay”Id
(); i ++ )

940 
	`READ_FLAG
Ð
uiCode
, "Ïy”_id_šþuded_æag[ÝsIdx][i]" ); 
pcVPS
->
	`£tLay”IdInþudedFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
, 
ÝsIdx
, 
i
 );

944 
TimšgInfo
 *
timšgInfo
 = 
pcVPS
->
	`g‘TimšgInfo
();

945 
	`READ_FLAG
Ð
uiCode
, "vps_timšg_šfo_´e£Á_æag"); 
timšgInfo
->
	`£tTimšgInfoP»£ÁFÏg
 (uiCod? 
Œue
 : 
çl£
);

946 if(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
())

948 
	`READ_CODE
Ð32, 
uiCode
, "vps_num_un™s_š_tick"); 
timšgInfo
->
	`£tNumUn™sInTick
 (uiCode);

949 
	`READ_CODE
Ð32, 
uiCode
, "vps_time_sÿË"); 
timšgInfo
->
	`£tTimeSÿË
 (uiCode);

950 
	`READ_FLAG
Ð
uiCode
, "vps_poc_´ÝÜtiÚ®_to_timšg_æag"); 
timšgInfo
->
	`£tPocPrÝÜtiÚ®ToTimšgFÏg
(uiCod? 
Œue
 : 
çl£
);

951 if(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
())

953 
	`READ_UVLC
Ð
uiCode
, "vps_num_ticks_poc_diff_Úe_mšus1"); 
timšgInfo
->
	`£tNumTicksPocDiffOÃMšus1
 (uiCode);

956 
	`READ_UVLC
Ð
uiCode
, "vps_num_hrd_·¿m‘”s" ); 
pcVPS
->
	`£tNumHrdP¬am‘”s
( uiCode );

958 ifÐ
pcVPS
->
	`g‘NumHrdP¬am‘”s
() > 0 )

960 
pcVPS
->
	`ü—‹HrdP¬amBufãr
();

962  
UIÁ
 
i
 = 0; i < 
pcVPS
->
	`g‘NumHrdP¬am‘”s
(); i ++ )

964 
	`READ_UVLC
Ð
uiCode
, "hrd_Ïy”_£t_idx[i]" ); 
pcVPS
->
	`£tHrdOpS‘Idx
ÐuiCode, 
i
 );

965 ifÐ
i
 > 0 )

967 
	`READ_FLAG
Ð
uiCode
, "ýrms_´e£Á_æag[i]" ); 
pcVPS
->
	`£tC´msP»£ÁFÏg
ÐuiCod=ð1 ? 
Œue
 : 
çl£
, 
i
 );

971 
pcVPS
->
	`£tC´msP»£ÁFÏg
Ð
Œue
, 
i
 );

974 
	`·r£HrdP¬am‘”s
(
pcVPS
->
	`g‘HrdP¬am‘”s
(
i
),…cVPS->
	`g‘C´msP»£ÁFÏg
Ð˜),…cVPS->
	`g‘MaxTLay”s
() - 1);

978 
	`READ_FLAG
Ð
uiCode
, "vps_extension_flag" );

979 ià(
uiCode
)

981  
	`xMÜeRb¥D©a
() )

983 
	`READ_FLAG
Ð
uiCode
, "vps_extension_data_flag");

987 
	`xR—dRb¥T¿žšgB™s
();

988 
	}
}

990 
Void
 
	gTDecCavlc
::
	$·r£SliûH—d”
 (
TComSliû
* 
pcSliû
, 
P¬am‘”S‘Mªag”
 *
·¿m‘”S‘Mªag”
, cÚ¡ 
IÁ
 
´evTid0POC
)

992 
UIÁ
 
uiCode
;

993 
IÁ
 
iCode
;

995 #ià
ENC_DEC_TRACE


996 #ià
MCTS_EXTRACTION


997 
	`xT¿ûSliûH—d”Dec
();

999 
	`xT¿ûSliûH—d”
();

1002 
TComPPS
* 
µs
 = 
NULL
;

1003 
TComSPS
* 
¥s
 = 
NULL
;

1005 
UIÁ
 
fœ¡SliûSegm’tInPic
;

1006 
	`READ_FLAG
Ð
fœ¡SliûSegm’tInPic
, "first_slice_segment_in_pic_flag" );

1007 ifÐ
pcSliû
->
	`g‘R­PicFÏg
())

1009 
	`READ_FLAG
Ð
uiCode
, "no_output_of_prior_pics_flag" );

1010 
pcSliû
->
	`£tNoOuutPriÜPicsFÏg
(
uiCode
 ? 
Œue
 : 
çl£
);

1012 
	`READ_UVLC
 ( 
uiCode
, "¦iû_pic_·¿m‘”_£t_id" ); 
pcSliû
->
	`£tPPSId
(uiCode);

1013 
µs
 = 
·¿m‘”S‘Mªag”
->
	`g‘PPS
(
uiCode
);

1015 
	`as£¹
(
µs
!=0);

1016 
¥s
 = 
·¿m‘”S‘Mªag”
->
	`g‘SPS
(
µs
->
	`g‘SPSId
());

1018 
	`as£¹
(
¥s
!=0);

1020 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
¥s
->
	`g‘ChromaFÜm©Idc
();

1021 cÚ¡ 
UIÁ
 
numV®idComp
=
	`g‘Numb”V®idCompÚ’ts
(
chFmt
);

1022 cÚ¡ 
BoÞ
 
bChroma
=(
chFmt
!=
CHROMA_400
);

1024 ifÐ
µs
->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
(è&& ( !
fœ¡SliûSegm’tInPic
 ))

1026 
	`READ_FLAG
Ð
uiCode
, "d•’d’t_¦iû_£gm’t_æag" ); 
pcSliû
->
	`£tD•’d’tSliûSegm’tFÏg
(uiCod? 
Œue
 : 
çl£
);

1030 
pcSliû
->
	`£tD•’d’tSliûSegm’tFÏg
(
çl£
);

1032 
IÁ
 
numCTUs
 = ((
¥s
->
	`g‘PicWidthInLumaSam¶es
()+¥s->
	`g‘MaxCUWidth
()-1)/¥s->g‘MaxCUWidth())*((¥s->
	`g‘PicHeightInLumaSam¶es
()+¥s->
	`g‘MaxCUHeight
()-1)/sps->getMaxCUHeight());

1033 
UIÁ
 
¦iûSegm’tAdd»ss
 = 0;

1034 
IÁ
 
b™sSliûSegm’tAdd»ss
 = 0;

1035 
numCTUs
>(1<<
b™sSliûSegm’tAdd»ss
))

1037 
b™sSliûSegm’tAdd»ss
++;

1040 if(!
fœ¡SliûSegm’tInPic
)

1042 
	`READ_CODE
Ð
b™sSliûSegm’tAdd»ss
, 
¦iûSegm’tAdd»ss
, "slice_segment_address" );

1045 
pcSliû
->
	`£tSliûSegm’tCurS¹CtuTsAddr
Ð
¦iûSegm’tAdd»ss
 );

1046 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
(
numCTUs
);

1048 ià(!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

1050 
pcSliû
->
	`£tSliûCurS¹CtuTsAddr
(
¦iûSegm’tAdd»ss
);

1051 
pcSliû
->
	`£tSliûCurEndCtuTsAddr
(
numCTUs
);

1054 if(!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

1056 
IÁ
 
i
 = 0; i < 
µs
->
	`g‘NumExŒaSliûH—d”B™s
(); i++)

1058 
	`READ_FLAG
(
uiCode
, "slice_reserved_flag[]");

1061 
	`READ_UVLC
 ( 
uiCode
, "¦iû_ty³" ); 
pcSliû
->
	`£tSliûTy³
((
SliûTy³
)uiCode);

1062 ifÐ
µs
->
	`g‘OuutFÏgP»£ÁFÏg
() )

1064 
	`READ_FLAG
Ð
uiCode
, "pic_ouut_æag" ); 
pcSliû
->
	`£tPicOuutFÏg
ÐuiCod? 
Œue
 : 
çl£
 );

1068 
pcSliû
->
	`£tPicOuutFÏg
Ð
Œue
 );

1075 ifÐ
pcSliû
->
	`g‘IdrPicFÏg
() )

1077 
pcSliû
->
	`£tPOC
(0);

1078 
TComReã»nûPiùu»S‘
* 
½s
 = 
pcSliû
->
	`g‘LoÿlRPS
();

1079 (*
½s
)=
	`TComReã»nûPiùu»S‘
();

1080 
pcSliû
->
	`£tRPS
(
½s
);

1084 
	`READ_CODE
(
¥s
->
	`g‘B™sFÜPOC
(), 
uiCode
, "slice_pic_order_cnt_lsb");

1085 
IÁ
 
iPOClsb
 = 
uiCode
;

1086 
IÁ
 
iP»vPOC
 = 
´evTid0POC
;

1087 
IÁ
 
iMaxPOClsb
 = 1<< 
¥s
->
	`g‘B™sFÜPOC
();

1088 
IÁ
 
iP»vPOClsb
 = 
iP»vPOC
 & (
iMaxPOClsb
 - 1);

1089 
IÁ
 
iP»vPOCmsb
 = 
iP»vPOC
-
iP»vPOClsb
;

1090 
IÁ
 
iPOCmsb
;

1091 ifÐÐ
iPOClsb
 < 
iP»vPOClsb
 ) && ( ( iP»vPOClsb - iPOClsb ) >ðÐ
iMaxPOClsb
 / 2 ) ) )

1093 
iPOCmsb
 = 
iP»vPOCmsb
 + 
iMaxPOClsb
;

1095 ifÐ(
iPOClsb
 > 
iP»vPOClsb
 ) && ( (iPOClsb - iP»vPOClsb ) > ( 
iMaxPOClsb
 / 2 ) ) )

1097 
iPOCmsb
 = 
iP»vPOCmsb
 - 
iMaxPOClsb
;

1101 
iPOCmsb
 = 
iP»vPOCmsb
;

1103 iàÐ
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


1104 || 
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


1105 || 
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 )

1108 
iPOCmsb
 = 0;

1110 
pcSliû
->
	`£tPOC
 (
iPOCmsb
+
iPOClsb
);

1112 
TComReã»nûPiùu»S‘
* 
½s
;

1113 
½s
 = 
pcSliû
->
	`g‘LoÿlRPS
();

1114 (*
½s
)=
	`TComReã»nûPiùu»S‘
();

1116 
pcSliû
->
	`£tRPS
(
½s
);

1117 
	`READ_FLAG
Ð
uiCode
, "short_term_ref_pic_set_sps_flag" );

1118 if(
uiCode
 == 0)

1120 
	`·r£ShÜtT”mRefPicS‘
(
¥s
,
½s
, sps->
	`g‘RPSLi¡
()->
	`g‘Numb”OfReã»nûPiùu»S‘s
());

1121 #ià
MCTS_EXTRACTION


1122 
pcSliû
->
	`£tRPSidx
(-1);

1127 
IÁ
 
numB™s
 = 0;

1128 (1 << 
numB™s
è< 
¥s
->
	`g‘RPSLi¡
()->
	`g‘Numb”OfReã»nûPiùu»S‘s
())

1130 
numB™s
++;

1132 ià(
numB™s
 > 0)

1134 
	`READ_CODE
Ð
numB™s
, 
uiCode
, "short_term_ref_pic_set_idx");

1135 #ià
MCTS_EXTRACTION


1136 
pcSliû
->
	`£tRPSidx
(
uiCode
);

1141 
uiCode
 = 0;

1144 *
½s
 = *(
¥s
->
	`g‘RPSLi¡
()->
	`g‘Reã»nûPiùu»S‘
(
uiCode
));

1146 if(
¥s
->
	`g‘LÚgT”mRefsP»£Á
())

1148 
IÁ
 
off£t
 = 
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
()+½s->
	`g‘Numb”OfPos™ivePiùu»s
();

1149 
UIÁ
 
numOfLŒp
 = 0;

1150 
UIÁ
 
numLŒpInSPS
 = 0;

1151 ià(
¥s
->
	`g‘NumLÚgT”mRefPicSPS
() > 0)

1153 
	`READ_UVLC
Ð
uiCode
, "num_long_term_sps");

1154 
numLŒpInSPS
 = 
uiCode
;

1155 
numOfLŒp
 +ð
numLŒpInSPS
;

1156 
½s
->
	`£tNumb”OfLÚg‹rmPiùu»s
(
numOfLŒp
);

1158 
IÁ
 
b™sFÜLŒpInSPS
 = 0;

1159 
¥s
->
	`g‘NumLÚgT”mRefPicSPS
(è> (1 << 
b™sFÜLŒpInSPS
))

1161 
b™sFÜLŒpInSPS
++;

1163 
	`READ_UVLC
Ð
uiCode
, "num_lÚg_‹rm_pics"); 
½s
->
	`£tNumb”OfLÚg‹rmPiùu»s
(uiCode);

1164 
numOfLŒp
 +ð
uiCode
;

1165 
½s
->
	`£tNumb”OfLÚg‹rmPiùu»s
(
numOfLŒp
);

1166 
IÁ
 
maxPicOrd”CÁLSB
 = 1 << 
¥s
->
	`g‘B™sFÜPOC
();

1167 
IÁ
 
´evD–MSB
 = 0, 
d–PocMSBCyþeLT
 = 0;

1168 
IÁ
 
j
=
off£t
+
½s
->
	`g‘Numb”OfLÚg‹rmPiùu»s
()-1, 
k
 = 0; k < 
numOfLŒp
; j--, k++)

1170 
IÁ
 
pocLsbLt
;

1171 ià(
k
 < 
numLŒpInSPS
)

1173 
uiCode
 = 0;

1174 ià(
b™sFÜLŒpInSPS
 > 0)

1176 
	`READ_CODE
(
b™sFÜLŒpInSPS
, 
uiCode
, "lt_idx_sps[i]");

1178 
BoÞ
 
u£dByCu¼FromSPS
=
¥s
->
	`g‘U£dByCu¼PicLtSPSFÏg
(
uiCode
);

1180 
pocLsbLt
 = 
¥s
->
	`g‘LtRefPicPocLsbSps
(
uiCode
);

1181 
½s
->
	`£tU£d
(
j
,
u£dByCu¼FromSPS
);

1185 
	`READ_CODE
(
¥s
->
	`g‘B™sFÜPOC
(), 
uiCode
, "poc_lsb_É"); 
pocLsbLt
= uiCode;

1186 
	`READ_FLAG
Ð
uiCode
, "u£d_by_cu¼_pic_É_æag"); 
½s
->
	`£tU£d
(
j
,uiCode);

1188 
	`READ_FLAG
(
uiCode
,"delta_poc_msb_present_flag");

1189 
BoÞ
 
mSBP»£ÁFÏg
 = 
uiCode
 ? 
Œue
 : 
çl£
;

1190 if(
mSBP»£ÁFÏg
)

1192 
	`READ_UVLC
Ð
uiCode
, "delta_poc_msb_cycle_lt[i]" );

1193 
BoÞ
 
d–FÏg
 = 
çl£
;

1195 ifÐ(
j
 =ð
off£t
+
½s
->
	`g‘Numb”OfLÚg‹rmPiùu»s
()-1è|| (j =ðoff£t+(
numOfLŒp
-
numLŒpInSPS
)-1) )

1197 
d–FÏg
 = 
Œue
;

1199 if(
d–FÏg
)

1201 
d–PocMSBCyþeLT
 = 
uiCode
;

1205 
d–PocMSBCyþeLT
 = 
uiCode
 + 
´evD–MSB
;

1208 
IÁ
 
pocLTCu¼
 = 
pcSliû
->
	`g‘POC
(è- 
d–PocMSBCyþeLT
 * 
maxPicOrd”CÁLSB


1209 - 
iPOClsb
 + 
pocLsbLt
;

1210 
½s
->
	`£tPOC
 (
j
, 
pocLTCu¼
);

1211 
½s
->
	`£tD–POC
(
j
, - 
pcSliû
->
	`g‘POC
(è+ 
pocLTCu¼
);

1212 
½s
->
	`£tCheckLTMSBP»£Á
(
j
,
Œue
);

1216 
½s
->
	`£tPOC
 (
j
, 
pocLsbLt
);

1217 
½s
->
	`£tD–POC
(
j
, - 
pcSliû
->
	`g‘POC
(è+ 
pocLsbLt
);

1218 
½s
->
	`£tCheckLTMSBP»£Á
(
j
,
çl£
);

1221 ifÐ
j
 =ð
off£t
+(
numOfLŒp
-
numLŒpInSPS
)-1 )

1223 
d–PocMSBCyþeLT
 = 0;

1226 
´evD–MSB
 = 
d–PocMSBCyþeLT
;

1228 
off£t
 +ð
½s
->
	`g‘Numb”OfLÚg‹rmPiùu»s
();

1229 
½s
->
	`£tNumb”OfPiùu»s
(
off£t
);

1231 iàÐ
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


1232 || 
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


1233 || 
pcSliû
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 )

1236 
½s
 = 
pcSliû
->
	`g‘LoÿlRPS
();

1237 (*
½s
)=
	`TComReã»nûPiùu»S‘
();

1238 
pcSliû
->
	`£tRPS
(
½s
);

1240 ià(
¥s
->
	`g‘SPSTempÜ®MVPEÇbËdFÏg
())

1242 
	`READ_FLAG
Ð
uiCode
, "slice_temporal_mvp_enabled_flag" );

1243 
pcSliû
->
	`£tEÇbËTMVPFÏg
Ð
uiCode
 =ð1 ? 
Œue
 : 
çl£
 );

1247 
pcSliû
->
	`£tEÇbËTMVPFÏg
(
çl£
);

1250 if(
¥s
->
	`g‘U£SAO
())

1252 
	`READ_FLAG
(
uiCode
, "¦iû_§o_luma_æag"); 
pcSliû
->
	`£tSaoEÇbËdFÏg
(
CHANNEL_TYPE_LUMA
, (
BoÞ
)uiCode);

1254 ià(
bChroma
)

1256 
	`READ_FLAG
(
uiCode
, "¦iû_§o_chroma_æag"); 
pcSliû
->
	`£tSaoEÇbËdFÏg
(
CHANNEL_TYPE_CHROMA
, (
BoÞ
)uiCode);

1260 ià(
pcSliû
->
	`g‘IdrPicFÏg
())

1262 
pcSliû
->
	`£tEÇbËTMVPFÏg
(
çl£
);

1264 ià(!
pcSliû
->
	`isIÁ¿
())

1267 
	`READ_FLAG
Ð
uiCode
, "num_ref_idx_active_override_flag");

1268 ià(
uiCode
)

1270 
	`READ_UVLC
 (
uiCode
, "num_»f_idx_l0_aùive_mšus1" ); 
pcSliû
->
	`£tNumRefIdx
Ð
REF_PIC_LIST_0
, uiCode + 1 );

1271 ià(
pcSliû
->
	`isIÁ”B
())

1273 
	`READ_UVLC
 (
uiCode
, "num_»f_idx_l1_aùive_mšus1" ); 
pcSliû
->
	`£tNumRefIdx
Ð
REF_PIC_LIST_1
, uiCode + 1 );

1277 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
, 0);

1282 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_0
, 
µs
->
	`g‘NumRefIdxL0DeçuÉAùive
());

1283 ià(
pcSliû
->
	`isIÁ”B
())

1285 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
, 
µs
->
	`g‘NumRefIdxL1DeçuÉAùive
());

1289 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
,0);

1294 
TComRefPicLi¡ModifiÿtiÚ
* 
»fPicLi¡ModifiÿtiÚ
 = 
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
();

1295 if(!
pcSliû
->
	`isIÁ¿
())

1297 ifÐ!
µs
->
	`g‘Li¡sModifiÿtiÚP»£ÁFÏg
(è|| 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
() <= 1 )

1299 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL0
( 0 );

1303 
	`READ_FLAG
Ð
uiCode
, "»f_pic_li¡_modifiÿtiÚ_æag_l0" ); 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL0
( uiCode ? 1 : 0 );

1306 if(
»fPicLi¡ModifiÿtiÚ
->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL0
())

1308 
uiCode
 = 0;

1309 
IÁ
 
i
 = 0;

1310 
IÁ
 
numRpsCu¼TempLi¡0
 = 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
();

1311 iàÐ
numRpsCu¼TempLi¡0
 > 1 )

1313 
IÁ
 
Ëngth
 = 1;

1314 
numRpsCu¼TempLi¡0
 --;

1315  
numRpsCu¼TempLi¡0
 >>= 1)

1317 
Ëngth
 ++;

1319 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
); i ++)

1321 
	`READ_CODE
Ð
Ëngth
, 
uiCode
, "list_entry_l0" );

1322 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicS‘IdxL0
(
i
, 
uiCode
 );

1327 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
); i ++)

1329 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicS‘IdxL0
(
i
, 0 );

1336 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL0
(0);

1338 if(
pcSliû
->
	`isIÁ”B
())

1340 ifÐ!
µs
->
	`g‘Li¡sModifiÿtiÚP»£ÁFÏg
(è|| 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
() <= 1 )

1342 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL1
( 0 );

1346 
	`READ_FLAG
Ð
uiCode
, "»f_pic_li¡_modifiÿtiÚ_æag_l1" ); 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL1
( uiCode ? 1 : 0 );

1348 if(
»fPicLi¡ModifiÿtiÚ
->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL1
())

1350 
uiCode
 = 0;

1351 
IÁ
 
i
 = 0;

1352 
IÁ
 
numRpsCu¼TempLi¡1
 = 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
();

1353 iàÐ
numRpsCu¼TempLi¡1
 > 1 )

1355 
IÁ
 
Ëngth
 = 1;

1356 
numRpsCu¼TempLi¡1
 --;

1357  
numRpsCu¼TempLi¡1
 >>= 1)

1359 
Ëngth
 ++;

1361 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
); i ++)

1363 
	`READ_CODE
Ð
Ëngth
, 
uiCode
, "list_entry_l1" );

1364 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicS‘IdxL1
(
i
, 
uiCode
 );

1369 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
); i ++)

1371 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicS‘IdxL1
(
i
, 0 );

1378 
»fPicLi¡ModifiÿtiÚ
->
	`£tRefPicLi¡ModifiÿtiÚFÏgL1
(0);

1380 ià(
pcSliû
->
	`isIÁ”B
())

1382 
	`READ_FLAG
Ð
uiCode
, "mvd_l1_z”o_æag" ); 
pcSliû
->
	`£tMvdL1Z”oFÏg
Ð(uiCod? 
Œue
 : 
çl£
) );

1385 
pcSliû
->
	`£tCabacIn™FÏg
Ð
çl£
 );

1386 if(
µs
->
	`g‘CabacIn™P»£ÁFÏg
(è&& !
pcSliû
->
	`isIÁ¿
())

1388 
	`READ_FLAG
(
uiCode
, "cabac_init_flag");

1389 
pcSliû
->
	`£tCabacIn™FÏg
Ð
uiCode
 ? 
Œue
 : 
çl£
 );

1392 iàÐ
pcSliû
->
	`g‘EÇbËTMVPFÏg
() )

1394 iàÐ
pcSliû
->
	`g‘SliûTy³
(è=ð
B_SLICE
 )

1396 
	`READ_FLAG
Ð
uiCode
, "collocated_from_l0_flag" );

1397 
pcSliû
->
	`£tCÞFromL0FÏg
(
uiCode
);

1401 
pcSliû
->
	`£tCÞFromL0FÏg
( 1 );

1404 iàÐ
pcSliû
->
	`g‘SliûTy³
(è!ð
I_SLICE
 &&

1405 ((
pcSliû
->
	`g‘CÞFromL0FÏg
(è=ð1 &&…cSliû->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
) > 1)||

1406 (
pcSliû
->
	`g‘CÞFromL0FÏg
(è=ð0 &&…cSliû->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
) > 1)))

1408 
	`READ_UVLC
Ð
uiCode
, "collocated_ref_idx" );

1409 
pcSliû
->
	`£tCÞRefIdx
(
uiCode
);

1413 
pcSliû
->
	`£tCÞRefIdx
(0);

1416 iàÐ(
µs
->
	`g‘U£WP
(è&& 
pcSliû
->
	`g‘SliûTy³
()==
P_SLICE
è|| (µs->
	`g‘WPBiP»d
(è&&…cSliû->g‘SliûTy³()==
B_SLICE
) )

1418 
	`xP¬£P»dWeightTabË
(
pcSliû
, 
¥s
);

1419 
pcSliû
->
	`š™WpSÿlšg
(
¥s
);

1421 ià(!
pcSliû
->
	`isIÁ¿
())

1423 
	`READ_UVLC
Ð
uiCode
, "five_minus_max_num_merge_cand");

1424 
pcSliû
->
	`£tMaxNumM”geCªd
(
MRG_MAX_NUM_CANDS
 - 
uiCode
);

1427 
	`READ_SVLC
Ð
iCode
, "slice_qp_delta" );

1428 
pcSliû
->
	`£tSliûQp
 (26 + 
µs
->
	`g‘PicIn™QPMšus26
(è+ 
iCode
);

1430 
	`as£¹
Ð
pcSliû
->
	`g‘SliûQp
(è>ð-
¥s
->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
) );

1431 
	`as£¹
Ð
pcSliû
->
	`g‘SliûQp
() <= 51 );

1433 ià(
µs
->
	`g‘SliûChromaQpFÏg
())

1435 ià(
numV®idComp
>
COMPONENT_Cb
)

1437 
	`READ_SVLC
Ð
iCode
, "slice_cb_qp_offset" );

1438 
pcSliû
->
	`£tSliûChromaQpD–
(
COMPONENT_Cb
, 
iCode
 );

1439 
	`as£¹
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cb
) >= -12 );

1440 
	`as£¹
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cb
) <= 12 );

1441 
	`as£¹
Ð(
µs
->
	`g‘QpOff£t
(
COMPONENT_Cb
è+ 
pcSliû
->
	`g‘SliûChromaQpD–
(COMPONENT_Cb)) >= -12 );

1442 
	`as£¹
Ð(
µs
->
	`g‘QpOff£t
(
COMPONENT_Cb
è+ 
pcSliû
->
	`g‘SliûChromaQpD–
(COMPONENT_Cb)) <= 12 );

1445 ià(
numV®idComp
>
COMPONENT_Cr
)

1447 
	`READ_SVLC
Ð
iCode
, "slice_cr_qp_offset" );

1448 
pcSliû
->
	`£tSliûChromaQpD–
(
COMPONENT_Cr
, 
iCode
 );

1449 
	`as£¹
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cr
) >= -12 );

1450 
	`as£¹
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cr
) <= 12 );

1451 
	`as£¹
Ð(
µs
->
	`g‘QpOff£t
(
COMPONENT_Cr
è+ 
pcSliû
->
	`g‘SliûChromaQpD–
(COMPONENT_Cr)) >= -12 );

1452 
	`as£¹
Ð(
µs
->
	`g‘QpOff£t
(
COMPONENT_Cr
è+ 
pcSliû
->
	`g‘SliûChromaQpD–
(COMPONENT_Cr)) <= 12 );

1456 ià(
µs
->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
())

1458 
	`READ_FLAG
(
uiCode
, "cu_chroma_qp_off£t_’abËd_æag"); 
pcSliû
->
	`£tU£ChromaQpAdj
(uiCode != 0);

1462 
pcSliû
->
	`£tU£ChromaQpAdj
(
çl£
);

1465 ià(
µs
->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
())

1467 if(
µs
->
	`g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
())

1469 
	`READ_FLAG
 ( 
uiCode
, "deblockšg_fž‹r_ov”ride_æag" ); 
pcSliû
->
	`£tDeblockšgFž‹rOv”rideFÏg
(uiCod? 
Œue
 : 
çl£
);

1473 
pcSliû
->
	`£tDeblockšgFž‹rOv”rideFÏg
(0);

1475 if(
pcSliû
->
	`g‘DeblockšgFž‹rOv”rideFÏg
())

1477 
	`READ_FLAG
 ( 
uiCode
, "¦iû_deblockšg_fž‹r_di§bËd_æag" ); 
pcSliû
->
	`£tDeblockšgFž‹rDi§bË
(uiCode ? 1 : 0);

1478 if(!
pcSliû
->
	`g‘DeblockšgFž‹rDi§bË
())

1480 
	`READ_SVLC
Ð
iCode
, "¦iû_b‘a_off£t_div2" ); 
pcSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
(iCode);

1481 
	`as£¹
(
pcSliû
->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() >= -6 &&

1482 
pcSliû
->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() <= 6);

1483 
	`READ_SVLC
Ð
iCode
, "¦iû_tc_off£t_div2" ); 
pcSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
(iCode);

1484 
	`as£¹
(
pcSliû
->
	`g‘DeblockšgFž‹rTcOff£tDiv2
() >= -6 &&

1485 
pcSliû
->
	`g‘DeblockšgFž‹rTcOff£tDiv2
() <= 6);

1490 
pcSliû
->
	`£tDeblockšgFž‹rDi§bË
 ( 
µs
->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() );

1491 
pcSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
µs
->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() );

1492 
pcSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
 ( 
µs
->
	`g‘DeblockšgFž‹rTcOff£tDiv2
() );

1497 
pcSliû
->
	`£tDeblockšgFž‹rDi§bË
 ( 
çl£
 );

1498 
pcSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
( 0 );

1499 
pcSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
 ( 0 );

1502 
BoÞ
 
isSAOEÇbËd
 = 
¥s
->
	`g‘U£SAO
(è&& (
pcSliû
->
	`g‘SaoEÇbËdFÏg
(
CHANNEL_TYPE_LUMA
è|| (
bChroma
 &&…cSliû->g‘SaoEÇbËdFÏg(
CHANNEL_TYPE_CHROMA
)));

1503 
BoÞ
 
isDBFEÇbËd
 = (!
pcSliû
->
	`g‘DeblockšgFž‹rDi§bË
());

1505 if(
µs
->
	`g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
(è&& ( 
isSAOEÇbËd
 || 
isDBFEÇbËd
 ))

1507 
	`READ_FLAG
Ð
uiCode
, "slice_loop_filter_across_slices_enabled_flag");

1511 
uiCode
 = 
µs
->
	`g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
()?1:0;

1513 
pcSliû
->
	`£tLFCrossSliûBound¬yFÏg
Ð(
uiCode
==1)?
Œue
:
çl£
);

1517 
¡d
::
veùÜ
<
UIÁ
> 
’ŒyPoštOff£t
;

1518 ifÐ
µs
->
	`g‘TžesEÇbËdFÏg
(è||…ps->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
() )

1520 
UIÁ
 
numEÁryPoštOff£ts
;

1521 
UIÁ
 
off£tL’Mšus1
;

1522 
	`READ_UVLC
(
numEÁryPoštOff£ts
, "num_entry_point_offsets");

1523 ià(
numEÁryPoštOff£ts
>0)

1525 
	`READ_UVLC
(
off£tL’Mšus1
, "offset_len_minus1");

1526 
’ŒyPoštOff£t
.
	`»size
(
numEÁryPoštOff£ts
);

1527 
UIÁ
 
idx
=0; idx<
numEÁryPoštOff£ts
; idx++)

1529 
	`READ_CODE
(
off£tL’Mšus1
+1, 
uiCode
, "entry_point_offset_minus1");

1530 
’ŒyPoštOff£t
[ 
idx
 ] = 
uiCode
 + 1;

1535 if(
µs
->
	`g‘SliûH—d”Ex‹nsiÚP»£ÁFÏg
())

1537 
	`READ_UVLC
(
uiCode
,"slice_segment_header_extension_length");

1538 
IÁ
 
i
=0; i<
uiCode
; i++)

1540 
UIÁ
 
ignÜed
;

1541 
	`READ_CODE
(8,
ignÜed
,"slice_segment_header_extension_data_byte");

1544 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


1545 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
STATS__BYTE_ALIGNMENT_BITS
,
m_pcB™¡»am
->
	`»adBy‹Alignm’t
(),0);

1547 
m_pcB™¡»am
->
	`»adBy‹Alignm’t
();

1550 
pcSliû
->
	`þ—rSub¡»amSizes
();

1552 ifÐ
µs
->
	`g‘TžesEÇbËdFÏg
(è||…ps->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
() )

1554 
IÁ
 
’dOfSliûH—d”LoÿtiÚ
 = 
m_pcB™¡»am
->
	`g‘By‹LoÿtiÚ
();

1557  
UIÁ
 
curBy‹Idx
 = 0; curBy‹Idx<
m_pcB™¡»am
->
	`numEmuÏtiÚP»v’tiÚBy‹sR—d
(); curByteIdx++ )

1559 iàÐ
m_pcB™¡»am
->
	`g‘EmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
Ð
curBy‹Idx
 ) < 
’dOfSliûH—d”LoÿtiÚ
 )

1561 
’dOfSliûH—d”LoÿtiÚ
++;

1565 
IÁ
 
curEÁryPoštOff£t
 = 0;

1566 
IÁ
 
´evEÁryPoštOff£t
 = 0;

1567 
UIÁ
 
idx
=0; idx<
’ŒyPoštOff£t
.
	`size
(); idx++)

1569 
curEÁryPoštOff£t
 +ð
’ŒyPoštOff£t
[ 
idx
 ];

1571 
IÁ
 
emuÏtiÚP»v’tiÚBy‹CouÁ
 = 0;

1572  
UIÁ
 
curBy‹Idx
 = 0; curBy‹Idx<
m_pcB™¡»am
->
	`numEmuÏtiÚP»v’tiÚBy‹sR—d
(); curByteIdx++ )

1574 iàÐ
m_pcB™¡»am
->
	`g‘EmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
Ð
curBy‹Idx
 ) >ðÐ
´evEÁryPoštOff£t
 + 
’dOfSliûH—d”LoÿtiÚ
 ) &&

1575 
m_pcB™¡»am
->
	`g‘EmuÏtiÚP»v’tiÚBy‹LoÿtiÚ
Ð
curBy‹Idx
 ) < ( 
curEÁryPoštOff£t
 + 
’dOfSliûH—d”LoÿtiÚ
 ) )

1577 
emuÏtiÚP»v’tiÚBy‹CouÁ
++;

1581 
’ŒyPoštOff£t
[ 
idx
 ] -ð
emuÏtiÚP»v’tiÚBy‹CouÁ
;

1582 
´evEÁryPoštOff£t
 = 
curEÁryPoštOff£t
;

1583 
pcSliû
->
	`addSub¡»amSize
(
’ŒyPoštOff£t
 [ 
idx
 ] );

1588 
	}
}

1590 
Void
 
	gTDecCavlc
::
	$·r£PTL
Ð
TComPTL
 *
½cPTL
, 
BoÞ
 
´ofžeP»£ÁFÏg
, 
IÁ
 
maxNumSubLay”sMšus1
 )

1592 
UIÁ
 
uiCode
;

1593 if(
´ofžeP»£ÁFÏg
)

1595 
	`·r£ProfžeT›r
(
½cPTL
->
	`g‘G’”®PTL
(), 
çl£
);

1597 
	`READ_CODE
Ð8, 
uiCode
, "g’”®_Ëv–_idc" ); 
½cPTL
->
	`g‘G’”®PTL
()->
	`£tLev–Idc
(
Lev–
::
	`Name
(uiCode));

1599 
IÁ
 
i
 = 0; i < 
maxNumSubLay”sMšus1
; i++)

1601 
	`READ_FLAG
Ð
uiCode
, "sub_Ïy”_´ofže_´e£Á_æag[i]" ); 
½cPTL
->
	`£tSubLay”ProfžeP»£ÁFÏg
(
i
, uiCode);

1602 
	`READ_FLAG
Ð
uiCode
, "sub_Ïy”_Ëv–_´e£Á_æag[i]" ); 
½cPTL
->
	`£tSubLay”Lev–P»£ÁFÏg
 (
i
, uiCode);

1605 ià(
maxNumSubLay”sMšus1
 > 0)

1607 
IÁ
 
i
 = 
maxNumSubLay”sMšus1
; i < 8; i++)

1609 
	`READ_CODE
(2, 
uiCode
, "reserved_zero_2bits");

1610 
	`as£¹
(
uiCode
 == 0);

1614 
IÁ
 
i
 = 0; i < 
maxNumSubLay”sMšus1
; i++)

1616 ifÐ
½cPTL
->
	`g‘SubLay”ProfžeP»£ÁFÏg
(
i
) )

1618 
	`·r£ProfžeT›r
(
½cPTL
->
	`g‘SubLay”PTL
(
i
), 
Œue
);

1620 if(
½cPTL
->
	`g‘SubLay”Lev–P»£ÁFÏg
(
i
))

1622 
	`READ_CODE
Ð8, 
uiCode
, "sub_Ïy”_Ëv–_idc[i]" ); 
½cPTL
->
	`g‘SubLay”PTL
(
i
)->
	`£tLev–Idc
(
Lev–
::
	`Name
(uiCode));

1625 
	}
}

1627 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


1628 
Void
 
	gTDecCavlc
::
	$·r£ProfžeT›r
(
ProfžeT›rLev–
 *
±l
, cÚ¡ 
BoÞ
 
bIsSubLay”
)

1629 
	#PTL_TRACE_TEXT
(
txt
è
bIsSubLay”
?("sub_Ïy”_"xtè: ("g’”®_"xt)

	)

1631 
Void
 
TDecCavlc
::
	$·r£ProfžeT›r
(
ProfžeT›rLev–
 *
±l
, cÚ¡ 
BoÞ
 )

1632 
	#PTL_TRACE_TEXT
(
txt
è
	)
txt

1635 
UIÁ
 
uiCode
;

1636 
	`READ_CODE
(2 , 
uiCode
, 
	`PTL_TRACE_TEXT
("´ofže_¥aû" )); 
±l
->
	`£tProfžeS·û
(uiCode);

1637 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("t›r_æag" )); 
±l
->
	`£tT›rFÏg
 (uiCod? 
Lev–
::
HIGH
 : Lev–::
MAIN
);

1638 
	`READ_CODE
(5 , 
uiCode
, 
	`PTL_TRACE_TEXT
("´ofže_idc" )); 
±l
->
	`£tProfžeIdc
 (
Profže
::
	`Name
(uiCode));

1639 
IÁ
 
j
 = 0; j < 32; j++)

1641 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("´ofže_com·tibž™y_æag[][j]" )); 
±l
->
	`£tProfžeCom·tibž™yFÏg
(
j
, uiCode ? 1 : 0);

1643 
	`READ_FLAG
(
uiCode
, 
	`PTL_TRACE_TEXT
("´og»ssive_sourû_æag" )); 
±l
->
	`£tProg»ssiveSourûFÏg
(uiCod? 
Œue
 : 
çl£
);

1645 
	`READ_FLAG
(
uiCode
, 
	`PTL_TRACE_TEXT
("š‹¾aûd_sourû_æag" )); 
±l
->
	`£tIÁ”ÏûdSourûFÏg
(uiCod? 
Œue
 : 
çl£
);

1647 
	`READ_FLAG
(
uiCode
, 
	`PTL_TRACE_TEXT
("nÚ_·cked_cÚ¡¿št_æag" )); 
±l
->
	`£tNÚPackedCÚ¡¿štFÏg
(uiCod? 
Œue
 : 
çl£
);

1649 
	`READ_FLAG
(
uiCode
, 
	`PTL_TRACE_TEXT
("äame_Úly_cÚ¡¿št_æag" )); 
±l
->
	`£tF¿meOÆyCÚ¡¿štFÏg
(uiCod? 
Œue
 : 
çl£
);

1651 ià(
±l
->
	`g‘ProfžeIdc
(è=ð
Profže
::
MAINREXT
 ||…Ž->
	`g‘ProfžeCom·tibž™yFÏg
(Profile::MAINREXT) ||

1652 
±l
->
	`g‘ProfžeIdc
(è=ð
Profže
::
HIGHTHROUGHPUTREXT
 ||…Ž->
	`g‘ProfžeCom·tibž™yFÏg
(Profile::HIGHTHROUGHPUTREXT))

1654 
UIÁ
 
maxB™D•th
=16;

1655 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_12b™_cÚ¡¿št_æag" )); ià(uiCodeè
maxB™D•th
=12;

1656 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_10b™_cÚ¡¿št_æag" )); ià(uiCodeè
maxB™D•th
=10;

1657 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_8b™_cÚ¡¿št_æag" )); ià(uiCodeè
maxB™D•th
=8;

1658 
±l
->
	`£tB™D•thCÚ¡¿št
(
maxB™D•th
);

1659 
ChromaFÜm©
 
chromaFmtCÚ¡¿št
=
CHROMA_444
;

1660 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_422chroma_cÚ¡¿št_æag" )); ià(uiCodeè
chromaFmtCÚ¡¿št
=
CHROMA_422
;

1661 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_420chroma_cÚ¡¿št_æag" )); ià(uiCodeè
chromaFmtCÚ¡¿št
=
CHROMA_420
;

1662 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("max_mÚochrome_cÚ¡¿št_æag" )); ià(uiCodeè
chromaFmtCÚ¡¿št
=
CHROMA_400
;

1663 
±l
->
	`£tChromaFÜm©CÚ¡¿št
(
chromaFmtCÚ¡¿št
);

1664 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("šŒa_cÚ¡¿št_æag" )); 
±l
->
	`£tIÁ¿CÚ¡¿štFÏg
(uiCode != 0);

1665 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("Úe_piùu»_Úly_cÚ¡¿št_æag")); 
±l
->
	`£tOÃPiùu»OÆyCÚ¡¿štFÏg
(uiCode != 0);

1666 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("low”_b™_¿‹_cÚ¡¿št_æag" )); 
±l
->
	`£tLow”B™R©eCÚ¡¿štFÏg
(uiCode != 0);

1667 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[0..15]" ));

1668 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[16..31]" ));

1669 
	`READ_CODE
(2, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[32..33]" ));

1673 
±l
->
	`£tB™D•thCÚ¡¿št
(ÕŽ->
	`g‘ProfžeIdc
(è=ð
Profže
::
MAIN10
)?10:8);

1674 
±l
->
	`£tChromaFÜm©CÚ¡¿št
(
CHROMA_420
);

1675 
±l
->
	`£tIÁ¿CÚ¡¿štFÏg
(
çl£
);

1676 
±l
->
	`£tLow”B™R©eCÚ¡¿štFÏg
(
Œue
);

1677 ià(
±l
->
	`g‘ProfžeIdc
(è=ð
Profže
::
MAIN10
 ||…Ž->
	`g‘ProfžeCom·tibž™yFÏg
(Profile::MAIN10))

1679 
	`READ_CODE
(7, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_7bits" ));

1680 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("Úe_piùu»_Úly_cÚ¡¿št_æag")); 
±l
->
	`£tOÃPiùu»OÆyCÚ¡¿štFÏg
(uiCode != 0);

1681 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[0..15]" ));

1682 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[16..31]" ));

1683 
	`READ_CODE
(3, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[32..34]" ));

1687 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[0..15]" ));

1688 
	`READ_CODE
(16, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[16..31]" ));

1689 
	`READ_CODE
(11, 
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[32..42]" ));

1693 ià((
±l
->
	`g‘ProfžeIdc
(è>ð
Profže
::
MAIN
 &&…Ž->g‘ProfžeIdc(è<ðProfže::
HIGHTHROUGHPUTREXT
) ||

1694 
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
Profže
::
MAIN
) ||

1695 
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
Profže
::
MAIN10
) ||

1696 
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
Profže
::
MAINSTILLPICTURE
) ||

1697 
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
Profže
::
MAINREXT
) ||

1698 
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
Profže
::
HIGHTHROUGHPUTREXT
) )

1700 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("šbld_æag" )); 
	`as£¹
(uiCode == 0);

1704 
	`READ_FLAG
Ð
uiCode
, 
	`PTL_TRACE_TEXT
("reserved_zero_bit" ));

1706 #undeà
PTL_TRACE_TEXT


1707 
	}
}

1709 
Void
 
	gTDecCavlc
::
	$·r£T”mš©šgB™
Ð
UIÁ
& 
ruiB™
 )

1711 
ruiB™
 = 
çl£
;

1712 
IÁ
 
iB™sLeá
 = 
m_pcB™¡»am
->
	`g‘NumB™sLeá
();

1713 if(
iB™sLeá
 <= 8)

1715 
UIÁ
 
uiP“kV®ue
 = 
m_pcB™¡»am
->
	`³ekB™s
(
iB™sLeá
);

1716 ià(
uiP“kV®ue
 =ð(1<<(
iB™sLeá
-1)))

1718 
ruiB™
 = 
Œue
;

1721 
	}
}

1723 
Void
 
	gTDecCavlc
::
	$·r£RemaššgBy‹s
Ð
BoÞ
 
noT¿žšgBy‹sEx³ùed
 )

1725 ià(
noT¿žšgBy‹sEx³ùed
)

1727 cÚ¡ 
UIÁ
 
numb”OfRemaššgSub¡»amBy‹s
=
m_pcB™¡»am
->
	`g‘NumB™sLeá
();

1728 
	`as£¹
 (
numb”OfRemaššgSub¡»amBy‹s
 == 0);

1732 
m_pcB™¡»am
->
	`g‘NumB™sLeá
())

1734 
UIÁ
 
ŒažšgNuÎBy‹
=
m_pcB™¡»am
->
	`»adBy‹
();

1735 ià(
ŒažšgNuÎBy‹
!=0)

1737 
	`´štf
("T¿žšg by‹ should b0, buˆha v®u%02x\n", 
ŒažšgNuÎBy‹
);

1738 
	`as£¹
(
ŒažšgNuÎBy‹
==0);

1742 
	}
}

1744 
Void
 
	gTDecCavlc
::
	$·r£SkFÏg
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1746 
	`as£¹
(0);

1747 
	}
}

1749 
Void
 
	gTDecCavlc
::
	$·r£CUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1751 
	`as£¹
(0);

1752 
	}
}

1754 
Void
 
	gTDecCavlc
::
	$·r£MVPIdx
Ð
IÁ
& )

1756 
	`as£¹
(0);

1757 
	}
}

1759 
Void
 
	gTDecCavlc
::
	$·r£S¶™FÏg
 ( 
TComD©aCU
* , 
UIÁ
 , UInt )

1761 
	`as£¹
(0);

1762 
	}
}

1764 
Void
 
	gTDecCavlc
::
	$·r£P¬tSize
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1766 
	`as£¹
(0);

1767 
	}
}

1769 
Void
 
	gTDecCavlc
::
	$·r£P»dMode
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1771 
	`as£¹
(0);

1772 
	}
}

1782 
Void
 
	gTDecCavlc
::
	$·r£IPCMInfo
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1784 
	`as£¹
(0);

1785 
	}
}

1787 
Void
 
	gTDecCavlc
::
	$·r£IÁ¿DœLumaAng
 ( 
TComD©aCU
* , 
UIÁ
 , UInt )

1789 
	`as£¹
(0);

1790 
	}
}

1792 
Void
 
	gTDecCavlc
::
	$·r£IÁ¿DœChroma
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1794 
	`as£¹
(0);

1795 
	}
}

1797 
Void
 
	gTDecCavlc
::
	$·r£IÁ”Dœ
Ð
TComD©aCU
* , 
UIÁ
& , UInt )

1799 
	`as£¹
(0);

1800 
	}
}

1802 
Void
 
	gTDecCavlc
::
	$·r£RefFrmIdx
Ð
TComD©aCU
* , 
IÁ
& , 
RefPicLi¡
 )

1804 
	`as£¹
(0);

1805 
	}
}

1807 
Void
 
	gTDecCavlc
::
	$·r£Mvd
Ð
TComD©aCU
* , 
UIÁ
 , UIÁ , UIÁ , 
RefPicLi¡
 )

1809 
	`as£¹
(0);

1810 
	}
}

1812 
Void
 
	gTDecCavlc
::
	$·r£CrossCompÚ’tP»diùiÚ
Ð
þass
 
TComTU
& , 
CompÚ’tID
 )

1814 
	`as£¹
(0);

1815 
	}
}

1817 
Void
 
	gTDecCavlc
::
	$·r£D–QP
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1819 
	`as£¹
(0);

1820 
	}
}

1822 
Void
 
	gTDecCavlc
::
	$·r£ChromaQpAdju¡m’t
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1824 
	`as£¹
(0);

1825 
	}
}

1827 
Void
 
	gTDecCavlc
::
	$·r£CÛffNxN
Ð
TComTU
 & , 
CompÚ’tID
 )

1829 
	`as£¹
(0);

1830 
	}
}

1832 
Void
 
	gTDecCavlc
::
	$·r£T¿nsfÜmSubdivFÏg
Ð
UIÁ
& , UInt )

1834 
	`as£¹
(0);

1835 
	}
}

1837 
Void
 
	gTDecCavlc
::
	$·r£QtCbf
Ð
TComTU
 & , cÚ¡ 
CompÚ’tID
 , cÚ¡ 
BoÞ
 )

1839 
	`as£¹
(0);

1840 
	}
}

1842 
Void
 
	gTDecCavlc
::
	$·r£QtRoÙCbf
Ð
UIÁ
 , UInt& )

1844 
	`as£¹
(0);

1845 
	}
}

1847 
Void
 
	gTDecCavlc
::
	$·r£T¿nsfÜmSkFÏgs
 (
TComTU
 & , 
CompÚ’tID
 )

1849 
	`as£¹
(0);

1850 
	}
}

1852 
Void
 
	gTDecCavlc
::
	$·r£M”geFÏg
 ( 
TComD©aCU
* , 
UIÁ
 , UInt , UInt )

1854 
	`as£¹
(0);

1855 
	}
}

1857 
Void
 
	gTDecCavlc
::
	$·r£M”geIndex
 ( 
TComD©aCU
* , 
UIÁ
& )

1859 
	`as£¹
(0);

1860 
	}
}

1867 
Void
 
	gTDecCavlc
::
	$xP¬£P»dWeightTabË
Ð
TComSliû
* 
pcSliû
, cÚ¡ 
TComSPS
 *
¥s
 )

1869 
WPSÿlšgP¬am
 *
wp
;

1870 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
¥s
->
	`g‘ChromaFÜm©Idc
();

1871 cÚ¡ 
IÁ
 
numV®idComp
 = 
	`IÁ
(
	`g‘Numb”V®idCompÚ’ts
(
chFmt
));

1872 cÚ¡ 
BoÞ
 
bChroma
 = (
chFmt
!=
CHROMA_400
);

1873 cÚ¡ 
SliûTy³
 
eSliûTy³
 = 
pcSliû
->
	`g‘SliûTy³
();

1874 cÚ¡ 
IÁ
 
iNbRef
 = (
eSliûTy³
 =ð
B_SLICE
 ) ? (2) : (1);

1875 
UIÁ
 
uiLog2WeightD’omLuma
=0, 
uiLog2WeightD’omChroma
=0;

1876 
UIÁ
 
uiTÙ®SigÇÎedWeightFÏgs
 = 0;

1878 
IÁ
 
iD–D’om
;

1880 
	`READ_UVLC
Ð
uiLog2WeightD’omLuma
, "luma_log2_weight_denom" );

1881 
	`as£¹
Ð
uiLog2WeightD’omLuma
 <= 7 );

1882 ifÐ
bChroma
 )

1884 
	`READ_SVLC
Ð
iD–D’om
, "delta_chroma_log2_weight_denom" );

1885 
	`as£¹
((
iD–D’om
 + (
IÁ
)
uiLog2WeightD’omLuma
)>=0);

1886 
	`as£¹
((
iD–D’om
 + (
IÁ
)
uiLog2WeightD’omLuma
)<=7);

1887 
uiLog2WeightD’omChroma
 = (
UIÁ
)(
iD–D’om
 + 
uiLog2WeightD’omLuma
);

1890  
IÁ
 
iNumRef
=0 ; iNumRef<
iNbRef
 ; iNumRef++ )

1892 
RefPicLi¡
 
eRefPicLi¡
 = ( 
iNumRef
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

1893  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1895 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1897 
wp
[
COMPONENT_Y
].
uiLog2WeightD’om
 = 
uiLog2WeightD’omLuma
;

1898 
IÁ
 
j
=1; j<
numV®idComp
; j++)

1900 
wp
[
j
].
uiLog2WeightD’om
 = 
uiLog2WeightD’omChroma
;

1903 
UIÁ
 
uiCode
;

1904 
	`READ_FLAG
Ð
uiCode
, 
iNumRef
==0?"luma_weight_l0_flag[i]":"luma_weight_l1_flag[i]" );

1905 
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
 = ( 
uiCode
 == 1 );

1906 
uiTÙ®SigÇÎedWeightFÏgs
 +ð
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
;

1908 iàÐ
bChroma
 )

1910 
UIÁ
 
uiCode
;

1911  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1913 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1914 
	`READ_FLAG
Ð
uiCode
, 
iNumRef
==0?"chroma_weight_l0_flag[i]":"chroma_weight_l1_flag[i]" );

1915 
IÁ
 
j
=1; j<
numV®idComp
; j++)

1917 
wp
[
j
].
bP»£ÁFÏg
 = ( 
uiCode
 == 1 );

1919 
uiTÙ®SigÇÎedWeightFÏgs
 +ð2*
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
;

1922  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1924 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1925 iàÐ
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
 )

1927 
IÁ
 
iD–Weight
;

1928 
	`READ_SVLC
Ð
iD–Weight
, 
iNumRef
==0?"delta_luma_weight_l0[i]":"delta_luma_weight_l1[i]" );

1929 
	`as£¹
Ð
iD–Weight
 >= -128 );

1930 
	`as£¹
Ð
iD–Weight
 <= 127 );

1931 
wp
[
COMPONENT_Y
].
iWeight
 = (
iD–Weight
 + (1<<wp[COMPONENT_Y].
uiLog2WeightD’om
));

1932 
	`READ_SVLC
Ð
wp
[
COMPONENT_Y
].
iOff£t
, 
iNumRef
==0?"luma_offset_l0[i]":"luma_offset_l1[i]" );

1933 
IÁ
 
¿nge
=
¥s
->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
(è? (1<<¥s->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
))/2 : 128;

1934 
	`as£¹
Ð
wp
[0].
iOff£t
 >ð-
¿nge
 );

1935 
	`as£¹
Ð
wp
[0].
iOff£t
 < 
¿nge
 );

1939 
wp
[
COMPONENT_Y
].
iWeight
 = (1 << wp[COMPONENT_Y].
uiLog2WeightD’om
);

1940 
wp
[
COMPONENT_Y
].
iOff£t
 = 0;

1942 iàÐ
bChroma
 )

1944 iàÐ
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
 )

1946 
IÁ
 
¿nge
=
¥s
->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
(è? (1<<¥s->
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
))/2 : 128;

1947  
IÁ
 
j
=1 ; j<
numV®idComp
 ; j++ )

1949 
IÁ
 
iD–Weight
;

1950 
	`READ_SVLC
Ð
iD–Weight
, 
iNumRef
==0?"delta_chroma_weight_l0[i]":"delta_chroma_weight_l1[i]" );

1951 
	`as£¹
Ð
iD–Weight
 >= -128 );

1952 
	`as£¹
Ð
iD–Weight
 <= 127 );

1953 
wp
[
j
].
iWeight
 = (
iD–Weight
 + (1<<wp[j].
uiLog2WeightD’om
));

1955 
IÁ
 
iD–Chroma
;

1956 
	`READ_SVLC
Ð
iD–Chroma
, 
iNumRef
==0?"delta_chroma_offset_l0[i]":"delta_chroma_offset_l1[i]" );

1957 
	`as£¹
Ð
iD–Chroma
 >ð-4*
¿nge
);

1958 
	`as£¹
Ð
iD–Chroma
 < 4*
¿nge
);

1959 
IÁ
 
´ed
 = ( 
¿nge
 - ( („ªge*
wp
[
j
].
iWeight
)>>(wp[j].
uiLog2WeightD’om
) ) );

1960 
wp
[
j
].
iOff£t
 = 
	`Cl3
(-
¿nge
,„ªge-1, (
iD–Chroma
 + 
´ed
) );

1965  
IÁ
 
j
=1 ; j<
numV®idComp
 ; j++ )

1967 
wp
[
j
].
iWeight
 = (1 << wp[j].
uiLog2WeightD’om
);

1968 
wp
[
j
].
iOff£t
 = 0;

1974  
IÁ
 
iRefIdx
=
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
è; iRefIdx<
MAX_NUM_REF
 ; iRefIdx++ )

1976 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1978 
wp
[0].
bP»£ÁFÏg
 = 
çl£
;

1979 
wp
[1].
bP»£ÁFÏg
 = 
çl£
;

1980 
wp
[2].
bP»£ÁFÏg
 = 
çl£
;

1983 
	`as£¹
(
uiTÙ®SigÇÎedWeightFÏgs
<=24);

1984 
	}
}

1989 
Void
 
	gTDecCavlc
::
	$·r£SÿlšgLi¡
(
TComSÿlšgLi¡
* 
sÿlšgLi¡
)

1991 
UIÁ
 
code
, 
sizeId
, 
li¡Id
;

1992 
BoÞ
 
sÿlšgLi¡P»dModeFÏg
;

1994 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

1996 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†istId++)

1998 ià((
sizeId
==
SCALING_LIST_32x32
è&& (
li¡Id
%(
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) != 0))

2000 
IÁ
 *
¤c
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡Add»ss
(
sizeId
, 
li¡Id
);

2001 cÚ¡ 
IÁ
 
size
 = 
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[
sizeId
]);

2002 cÚ¡ 
IÁ
 *
¤cNextSm®ËrSize
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡Add»ss
(
sizeId
-1, 
li¡Id
);

2003 
IÁ
 
i
=0; i<
size
; i++)

2005 
¤c
[
i
] = 
¤cNextSm®ËrSize
[i];

2007 
sÿlšgLi¡
->
	`£tSÿlšgLi¡DC
(
sizeId
,
li¡Id
,(sizeId > 
SCALING_LIST_8x8
è? sÿlšgLi¡->
	`g‘SÿlšgLi¡DC
(sizeId-1,†i¡Idè: 
¤c
[0]);

2011 
	`READ_FLAG
Ð
code
, "scaling_list_pred_mode_flag");

2012 
sÿlšgLi¡P»dModeFÏg
 = (
code
è? 
Œue
 : 
çl£
;

2013 
sÿlšgLi¡
->
	`£tSÿlšgLi¡P»dModeFÏg
(
sizeId
, 
li¡Id
, 
sÿlšgLi¡P»dModeFÏg
);

2014 if(!
sÿlšgLi¡P»dModeFÏg
)

2016 
	`READ_UVLC
Ð
code
, "scaling_list_pred_matrix_id_delta");

2018 ià(
sizeId
==
SCALING_LIST_32x32
)

2020 
code
*=(
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
);

2023 
sÿlšgLi¡
->
	`£tRefM©rixId
 (
sizeId
,
li¡Id
,(
UIÁ
)((
IÁ
)Öi¡Id)-(
code
)));

2024 ifÐ
sizeId
 > 
SCALING_LIST_8x8
 )

2026 
sÿlšgLi¡
->
	`£tSÿlšgLi¡DC
(
sizeId
,
li¡Id
,(Öi¡Id =ðsÿlšgLi¡->
	`g‘RefM©rixId
 (sizeId,li¡Id))? 16 :sÿlšgLi¡->
	`g‘SÿlšgLi¡DC
(sizeId, scalingList->getRefMatrixId (sizeId,listId))));

2028 
sÿlšgLi¡
->
	`´oûssRefM©rix
Ð
sizeId
, 
li¡Id
, sÿlšgLi¡->
	`g‘RefM©rixId
 (sizeId,listId));

2033 
	`xDecodeSÿlšgLi¡
(
sÿlšgLi¡
, 
sizeId
, 
li¡Id
);

2040 
	}
}

2046 
Void
 
	gTDecCavlc
::
	$xDecodeSÿlšgLi¡
(
TComSÿlšgLi¡
 *
sÿlšgLi¡
, 
UIÁ
 
sizeId
, UIÁ 
li¡Id
)

2048 
IÁ
 
i
,
cÛfNum
 = 
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[
sizeId
]);

2049 
IÁ
 
d©a
;

2050 
IÁ
 
sÿlšgLi¡DcCÛfMšus8
 = 0;

2051 
IÁ
 
ÃxtCÛf
 = 
SCALING_LIST_START_VALUE
;

2052 
UIÁ
* 
sÿn
 = 
g_sÿnOrd”
[
SCAN_UNGROUPED
][
SCAN_DIAG
][
sizeId
==0 ? 2 : 3][sizeId==0 ? 2 : 3];

2053 
IÁ
 *
d¡
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡Add»ss
(
sizeId
, 
li¡Id
);

2055 ifÐ
sizeId
 > 
SCALING_LIST_8x8
 )

2057 
	`READ_SVLC
Ð
sÿlšgLi¡DcCÛfMšus8
, "scaling_list_dc_coef_minus8");

2058 
sÿlšgLi¡
->
	`£tSÿlšgLi¡DC
(
sizeId
,
li¡Id
,
sÿlšgLi¡DcCÛfMšus8
 + 8);

2059 
ÃxtCÛf
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
);

2062 
i
 = 0; i < 
cÛfNum
; i++)

2064 
	`READ_SVLC
Ð
d©a
, "scaling_list_delta_coef");

2065 
ÃxtCÛf
 = (ÃxtCÛà+ 
d©a
 + 256 ) % 256;

2066 
d¡
[
sÿn
[
i
]] = 
ÃxtCÛf
;

2068 
	}
}

2070 
BoÞ
 
	gTDecCavlc
::
	$xMÜeRb¥D©a
()

2072 
IÁ
 
b™sLeá
 = 
m_pcB™¡»am
->
	`g‘NumB™sLeá
();

2075 ià(
b™sLeá
 > 8)

2077  
Œue
;

2080 
UCh¬
 
Ï¡By‹
 = 
m_pcB™¡»am
->
	`³ekB™s
(
b™sLeá
);

2081 
IÁ
 
út
 = 
b™sLeá
;

2084 (
út
>0è&& ((
Ï¡By‹
 & 1) == 0))

2086 
Ï¡By‹
 >>= 1;

2087 
út
--;

2090 
út
--;

2093 
	`as£¹
 (
út
>=0);

2096  (
út
>0);

2097 
	}
}

2099 
Void
 
	gTDecCavlc
::
	$·r£Ex¶ic™RdpcmMode
Ð
TComTU
& , 
CompÚ’tID
 )

2101 
	`as£¹
(0);

2102 
	}
}

	@source/Lib/TLibDecoder/TDecCAVLC.h

38 #iâdeà
__TDECCAVLC__


39 
	#__TDECCAVLC__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TDecEÁrÝy.h
"

46 
	~"SyÁaxEËm’tP¬£r.h
"

56 
þass
 
	gTDecCavlc
 : 
public
 
SyÁaxEËm’tP¬£r
,…ubliø
	gTDecEÁrÝyIf


58 
	gpublic
:

59 
TDecCavlc
();

60 
	gvœtu®
 ~
TDecCavlc
();

62 
	g´Ùeùed
:

64 
Void
 
·r£ShÜtT”mRefPicS‘
 (
TComSPS
* 
pcSPS
, 
TComReã»nûPiùu»S‘
* 
pcRPS
, 
IÁ
 
idx
);

66 
	gpublic
:

69 
Void
 
»£tEÁrÝy
 ( 
TComSliû
* ) { 
as£¹
(0); };

70 
Void
 
£tB™¡»am
 ( 
TComIÅutB™¡»am
* 
p
 ) { 
	gm_pcB™¡»am
 =…; }

71 
Void
 
·r£T¿nsfÜmSubdivFÏg
Ð
UIÁ
& 
ruiSubdivFÏg
, UIÁ 
uiLog2T¿nsfÜmBlockSize
 );

72 
Void
 
·r£QtCbf
 ( 
þass
 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 );

73 
Void
 
·r£QtRoÙCbf
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ& 
uiQtRoÙCbf
 );

74 
Void
 
·r£VPS
 ( 
TComVPS
* 
pcVPS
 );

75 
Void
 
·r£SPS
 ( 
TComSPS
* 
pcSPS
 );

76 
Void
 
·r£PPS
 ( 
TComPPS
* 
pcPPS
 );

77 
Void
 
·r£VUI
 ( 
TComVUI
* 
pcVUI
, 
TComSPS
* 
pcSPS
 );

78 
Void
 
·r£SEI
 ( 
SEIMes§ges
& );

79 
Void
 
·r£PTL
 ( 
TComPTL
 *
½cPTL
, 
BoÞ
 
´ofžeP»£ÁFÏg
, 
IÁ
 
maxNumSubLay”sMšus1
 );

80 
Void
 
·r£ProfžeT›r
 (
ProfžeT›rLev–
 *
±l
, cÚ¡ 
BoÞ
 
bIsSubLay”
);

81 
Void
 
·r£HrdP¬am‘”s
 (
TComHRD
 *
hrd
, 
BoÞ
 
ýrms_´e£Á_æag
, 
UIÁ
 
‹mpLev–High
);

82 
Void
 
·r£SliûH—d”
 ( 
TComSliû
* 
pcSliû
, 
P¬am‘”S‘Mªag”
 *
·¿m‘”S‘Mªag”
, cÚ¡ 
IÁ
 
´evTid0POC
);

83 
Void
 
·r£T”mš©šgB™
 ( 
UIÁ
& 
ruiB™
 );

84 
Void
 
·r£RemaššgBy‹s
 ( 
BoÞ
 
noT¿žšgBy‹sEx³ùed
 );

86 
Void
 
·r£MVPIdx
 ( 
IÁ
& 
riMVPIdx
 );

88 
Void
 
·r£SkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

89 
Void
 
·r£CUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

90 
Void
 
·r£M”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 );

91 
Void
 
·r£M”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiM”geIndex
 );

92 
Void
 
·r£S¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

93 
Void
 
·r£P¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

94 
Void
 
·r£P»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

96 
Void
 
·r£IÁ¿DœLumaAng
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

97 
Void
 
·r£IÁ¿DœChroma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

99 
Void
 
·r£IÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiIÁ”Dœ
, UIÁ 
uiAbsP¬tIdx
 );

100 
Void
 
·r£RefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
IÁ
& 
riRefFrmIdx
, 
RefPicLi¡
 
eRefLi¡
 );

101 
Void
 
·r£Mvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tAddr
,UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
, 
RefPicLi¡
 
eRefLi¡
 );

103 
Void
 
·r£CrossCompÚ’tP»diùiÚ
Ð
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

105 
Void
 
·r£D–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

106 
Void
 
·r£ChromaQpAdju¡m’t
Ð
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
);

108 
Void
 
·r£CÛffNxN
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

110 
Void
 
·r£T¿nsfÜmSkFÏgs
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 );

112 
Void
 
·r£IPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
);

114 
Void
 
xP¬£P»dWeightTabË
 ( 
TComSliû
* 
pcSliû
, cÚ¡ 
TComSPS
 *
¥s
 );

115 
Void
 
·r£SÿlšgLi¡
 ( 
TComSÿlšgLi¡
* 
sÿlšgLi¡
 );

116 
Void
 
xDecodeSÿlšgLi¡
 ( 
TComSÿlšgLi¡
 *
sÿlšgLi¡
, 
UIÁ
 
sizeId
, UIÁ 
li¡Id
);

118 
Void
 
·r£Ex¶ic™RdpcmMode
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

120 
	g´Ùeùed
:

121 
BoÞ
 
xMÜeRb¥D©a
();

	@source/Lib/TLibDecoder/TDecConformance.cpp

38 
	~"TDecCÚfÜmªû.h
"

39 
	~"TLibCommÚ/TComSliû.h
"

40 
	~"TLibCommÚ/TComPic.h
"

41 
	~"TLibCommÚ/TComPicSym.h
"

42 
	~"NAL»ad.h
"

43 
	~<m©h.h
>

45 #ià!
DPB_ENCODER_USAGE_CHECK


46 
UIÁ


47 
	gLev–T›rF—tu»s
::
	$g‘MaxPicWidthInLumaSam¶es
() const

49  
	`UIÁ
(
	`sq¹
(
maxLumaPs
*8.0));

50 
	}
}

52 
UIÁ


53 
	gLev–T›rF—tu»s
::
	$g‘MaxPicHeightInLumaSam¶es
() const

55  
	`UIÁ
(
	`sq¹
(
maxLumaPs
*8.0));

56 
	}
}

59 
UIÁ


60 
	gTDecCÚfÜmªûCheck
::
	$g‘MšLog2CtbSize
(cÚ¡ 
TComPTL
 &
±l
,

61 
UIÁ
 
Ïy”Plus1
)

63 cÚ¡ 
ProfžeT›rLev–
 *
pPTL
 = (
Ïy”Plus1
==0è? 
±l
.
	`g‘G’”®PTL
(è:…Ž.
	`g‘SubLay”PTL
(layerPlus1-1);

64  (
pPTL
->
	`g‘Lev–Idc
(è< 
Lev–
::
LEVEL5
) ? 4 : 5;

65 
	}
}

68 
UIÁ


69 
	gTDecCÚfÜmªûCheck
::
	$g‘MaxLog2CtbSize
(cÚ¡ 
TComPTL
 & ,

70 
UIÁ
 )

72  
MAX_CU_DEPTH
;

73 
	}
}

76 
	gTDecCÚfÜmªûCheck
::
	$TDecCÚfÜmªûCheck
()

77 #ià
MCTS_ENC_CHECK


78 :
	$m_tmùsCheckEÇbËd
(
çl£
)

79 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK


80 , 
	`m_numb”OfSliûsInPiùu»
(0)

81 , 
	$m_by‹sInPiùu»
(0)

84 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK


85 : 
	`m_numb”OfSliûsInPiùu»
(0)

86 , 
	$m_by‹sInPiùu»
(0)

90 
	}
}

92 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 != 0

94 #ià!
DPB_ENCODER_USAGE_CHECK


95 cÚ¡ 
UIÁ64
 
	gMAX_CNFUINT64
 = 
¡d
::
num”ic_lim™s
<UIÁ64>::
max
();

97 cÚ¡ 
Lev–T›rF—tu»s
 
	gmašLev–T›rInfo
[] =

99 { 
Lev–
::
LEVEL1
 , 36864, { 350, 0 }, 16, 1, 1, 552960ULL, { 128, 0 }, { 2, 2} },

100 { 
Lev–
::
LEVEL2
 , 122880, { 1500, 0 }, 16, 1, 1, 3686400ULL, { 1500, 0 }, { 2, 2} },

101 { 
Lev–
::
LEVEL2_1
, 245760, { 3000, 0 }, 20, 1, 1, 7372800ULL, { 3000, 0 }, { 2, 2} },

102 { 
Lev–
::
LEVEL3
 , 552960, { 6000, 0 }, 30, 2, 2, 16588800ULL, { 6000, 0 }, { 2, 2} },

103 { 
Lev–
::
LEVEL3_1
, 983040, { 10000, 0 }, 40, 3, 3, 33177600ULL, { 10000, 0 }, { 2, 2} },

104 { 
Lev–
::
LEVEL4
 , 2228224, { 12000, 30000 }, 75, 5, 5, 66846720ULL, { 12000, 30000 }, { 4, 4} },

105 { 
Lev–
::
LEVEL4_1
, 2228224, { 20000, 50000 }, 75, 5, 5, 133693440ULL, { 20000, 50000 }, { 4, 4} },

106 { 
Lev–
::
LEVEL5
 , 8912896, { 25000, 100000 }, 200, 11, 10, 267386880ULL, { 25000, 100000 }, { 6, 4} },

107 { 
Lev–
::
LEVEL5_1
, 8912896, { 40000, 160000 }, 200, 11, 10, 534773760ULL, { 40000, 160000 }, { 8, 4} },

108 { 
Lev–
::
LEVEL5_2
, 8912896, { 60000, 240000 }, 200, 11, 10, 1069547520ULL, { 60000, 240000 }, { 8, 4} },

109 { 
Lev–
::
LEVEL6
 , 35651584, { 60000, 240000 }, 600, 22, 20, 1069547520ULL, { 60000, 240000 }, { 8, 4} },

110 { 
Lev–
::
LEVEL6_1
, 35651584, { 120000, 480000 }, 600, 22, 20, 2139095040ULL, { 120000, 480000 }, { 8, 4} },

111 { 
Lev–
::
LEVEL6_2
, 35651584, { 240000, 800000 }, 600, 22, 20, 4278190080ULL, { 240000, 800000 }, { 6, 4} },

112 { 
Lev–
::
LEVEL8_5
, 
MAX_UINT
, { MAX_UINT, MAX_UINT }, MAX_UINT, MAX_UINT, MAX_UINT, 
MAX_CNFUINT64
, {MAX_UINT, MAX_UINT }, { 0, 0} },

113 { 
Lev–
::
NONE
 }

116 cÚ¡ 
ProfžeF—tu»s
 
	gv®idProfžes
[] =

118 { 
Profže
::
MAIN
, "Maš", 8, 
CHROMA_420
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

119 { 
Profže
::
MAIN10
, "Maš10", 10, 
CHROMA_420
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1
 , f®£, 256, 64, f®£, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

120 { 
Profže
::
MAIN10
, "Maš10 StžÈPiùu»", 10, 
CHROMA_420
, 
çl£
, 
Œue
, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1
 , f®£, 256, 64,ru, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

121 { 
Profže
::
MAINSTILLPICTURE
, "Maš StžÈPiùu»", 8, 
CHROMA_420
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1
 , f®£, 256, 64, 
Œue
 , 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

122 { 
Profže
::
MAINREXT
, "MÚochrome", 8, 
CHROMA_400
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 667, 733, 1000, 10 , 
mašLev–T›rInfo
 },

123 { 
Profže
::
MAINREXT
, "MÚochrom12", 12, 
CHROMA_400
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

124 { 
Profže
::
MAINREXT
, "MÚochrom16", 16, 
CHROMA_400
, 
çl£
, f®£, 
ENABLED
 , 
OPTIONAL
, OPTIONAL, 
DISABLED
, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1333, 1467, 2000, 10 , 
mašLev–T›rInfo
 },

125 { 
Profže
::
MAINREXT
, "Maš 12", 12, 
CHROMA_420
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1500, 1650, 2250, 10 , 
mašLev–T›rInfo
 },

126 { 
Profže
::
MAINREXT
, "Maš 4:2:2 10", 10, 
CHROMA_422
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, 
OPTIONAL
, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1667, 1833, 2500, 5 , 
mašLev–T›rInfo
 },

127 { 
Profže
::
MAINREXT
, "Maš 4:2:2 12", 12, 
CHROMA_422
, 
çl£
, f®£, 
ENABLED
 , 
DISABLED
, DISABLED, 
OPTIONAL
, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

128 { 
Profže
::
MAINREXT
, "Maš 4:4:4", 8, 
CHROMA_444
, 
çl£
, f®£, 
ENABLED
 , 
OPTIONAL
, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

129 { 
Profže
::
MAINREXT
, "Maš 4:4:4 10", 10, 
CHROMA_444
, 
çl£
, f®£, 
ENABLED
 , 
OPTIONAL
, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2500, 2750, 3750, 5 , 
mašLev–T›rInfo
 },

130 { 
Profže
::
MAINREXT
, "Maš 4:4:4 12", 12, 
CHROMA_444
, 
çl£
, f®£, 
ENABLED
 , 
OPTIONAL
, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 3000, 3300, 4500, 5 , 
mašLev–T›rInfo
 },

131 { 
Profže
::
MAINREXT
, "Maš IÁ¿", 8, 
CHROMA_420
, 
Œue
 , 
çl£
, 
OPTIONAL
, 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1500, 10 , 
mašLev–T›rInfo
 },

132 { 
Profže
::
MAINREXT
, "Maš 10 IÁ¿", 10, 
CHROMA_420
, 
Œue
 , 
çl£
, 
OPTIONAL
, 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1000, 1100, 1875, 10 , 
mašLev–T›rInfo
 },

133 { 
Profže
::
MAINREXT
, "Maš 12 IÁ¿", 12, 
CHROMA_420
, 
Œue
 , 
çl£
, 
OPTIONAL
, 
DISABLED
, DISABLED, DISABLED, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1500, 1650, 2250, 10 , 
mašLev–T›rInfo
 },

134 { 
Profže
::
MAINREXT
, "Maš 4:2:2 10 IÁ¿", 10, 
CHROMA_422
, 
Œue
 , 
çl£
, 
OPTIONAL
, 
DISABLED
, DISABLED, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 1667, 1833, 2500, 5 , 
mašLev–T›rInfo
 },

135 { 
Profže
::
MAINREXT
, "Maš 4:2:2 12 IÁ¿", 12, 
CHROMA_422
, 
Œue
 , 
çl£
, 
OPTIONAL
, 
DISABLED
, DISABLED, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

136 { 
Profže
::
MAINREXT
, "Maš 4:4:4 IÁ¿", 8, 
CHROMA_444
, 
Œue
 , 
çl£
, 
OPTIONAL
, OPTIONAL, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

137 { 
Profže
::
MAINREXT
, "Maš 4:4:4 10 IÁ¿", 10, 
CHROMA_444
, 
Œue
 , 
çl£
, 
OPTIONAL
, OPTIONAL, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 2500, 2750, 3750, 5 , 
mašLev–T›rInfo
 },

138 { 
Profže
::
MAINREXT
, "Maš 4:4:4 12 IÁ¿", 12, 
CHROMA_444
, 
Œue
 , 
çl£
, 
OPTIONAL
, OPTIONAL, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 3000, 3300, 4500, 5 , 
mašLev–T›rInfo
 },

139 { 
Profže
::
MAINREXT
, "Maš 4:4:4 16 IÁ¿", 16, 
CHROMA_444
, 
Œue
 , 
çl£
, 
OPTIONAL
, OPTIONAL, OPTIONAL, OPTIONAL, 
DISABLED
, 
HBR_1_OR_2
 , f®£, 256, 64, f®£, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

140 { 
Profže
::
MAINREXT
, "Maš 4:4:4 StžÈPiùu»", 8, 
CHROMA_444
, 
Œue
 ,ru, 
OPTIONAL
, OPTIONAL, 
DISABLED
, OPTIONAL, DISABLED, 
HBR_1_OR_2
 , 
çl£
, 256, 64,ru, 2000, 2200, 3000, 5 , 
mašLev–T›rInfo
 },

141 { 
Profže
::
MAINREXT
, "Maš 4:4:4 16 StžÈPiùu»", 16, 
CHROMA_444
, 
Œue
 ,ru, 
OPTIONAL
, OPTIONAL, OPTIONAL, OPTIONAL, 
DISABLED
, 
HBR_1_OR_2
 , 
çl£
, 256, 64,ru, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

142 { 
Profže
::
HIGHTHROUGHPUTREXT
, "High Throughpuˆ4:4:4 16 IÁ¿", 16, 
CHROMA_444
, 
Œue
 , 
çl£
, 
OPTIONAL
, OPTIONAL, OPTIONAL, OPTIONAL, 
ENABLED
 , 
HBR_12_OR_24
 ,ru, 256, 64, f®£, 4000, 4400, 6000, 5 , 
mašLev–T›rInfo
 },

143 { 
Profže
::
NONE
, 0 }

150 
Void


151 
	$checkSPS
(cÚ¡ 
TComSPS
 &
¥s
,

152 cÚ¡ 
ProfžeLev–T›rF—tu»s
 &
ã©u»s
)

159 cÚ¡ 
UIÁ
 
mšCbSizeY
 = 1<<(
¥s
.
	`g‘Log2MšCodšgBlockSize
());

161 ià(
¥s
.
	`g‘PicWidthInLumaSam¶es
(è% 
mšCbSizeY
 != 0 )

163 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "piùu» width (" << 
¥s
.
	`g‘PicWidthInLumaSam¶es
(è<< "èmu¡ b¨muÉË oàmšCbSizeY (=" << 
mšCbSizeY
 << ")\n";

164 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

167 ià(
¥s
.
	`g‘PicHeightInLumaSam¶es
(è% 
mšCbSizeY
 != 0 )

169 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "piùu» heighˆ(" << 
¥s
.
	`g‘PicHeightInLumaSam¶es
(è<< "èmu¡ b¨muÉË oàmšCbSizeY (=" << 
mšCbSizeY
 << ")\n";

170 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

174 ià(
¥s
.
	`g‘PicWidthInLumaSam¶es
(è> 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
	`g‘MaxPicWidthInLumaSam¶es
())

176 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "piùu» width (" << 
¥s
.
	`g‘PicWidthInLumaSam¶es
(è<< "èexûed thmaximum‡Îowed byhËv– (" << 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
	`g‘MaxPicWidthInLumaSam¶es
() << ")\n";

177 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

180 ià(
¥s
.
	`g‘PicHeightInLumaSam¶es
(è> 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
	`g‘MaxPicHeightInLumaSam¶es
())

182 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "piùu» heighˆ(" << 
¥s
.
	`g‘PicHeightInLumaSam¶es
(è<< "èexûed thmaximum‡Îowed byhËv– (" << 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
	`g‘MaxPicHeightInLumaSam¶es
() << ")\n";

183 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

186 ià(
¥s
.
	`g‘PicWidthInLumaSam¶es
(è* sps.
	`g‘PicHeightInLumaSam¶es
(è> 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxLumaPs
)

188 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "piùu» sam¶e (" << 
¥s
.
	`g‘PicWidthInLumaSam¶es
(è<< " * " << sps.
	`g‘PicHeightInLumaSam¶es
(è<< "èexûed thmaximum‡Îowed byhËv– (" << 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxLumaPs
 << ")\n";

189 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

191 
	}
}

194 
Void


195 
	$checkTžes
(cÚ¡ 
TComSPS
 &
¥s
,

196 cÚ¡ 
TComPPS
 &
µs
,

197 cÚ¡ 
TComPic
 &
pic
,

198 cÚ¡ 
ProfžeLev–T›rF—tu»s
 &
ã©u»s
)

200 ià(
µs
.
	`g‘TžesEÇbËdFÏg
())

203 cÚ¡ 
IÁ
 
mšWidthInCtus
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
mšTžeCÞumnWidthInLumaSam¶es
/ 
¥s
.
	`g‘MaxCUWidth
();

204 cÚ¡ 
IÁ
 
mšHeightInCtus
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
mšTžeRowHeightInLumaSam¶es
 / 
¥s
.
	`g‘MaxCUHeight
();

206 cÚ¡ 
IÁ
 
numCÞs
 = 
µs
.
	`g‘NumTžeCÞumnsMšus1
() + 1;

207 cÚ¡ 
IÁ
 
numRows
 = 
µs
.
	`g‘NumTžeRowsMšus1
() + 1;

208 ià(
numCÞs
 > 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxTžeCÞs
)

210 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "numb” oàtžcÞumn (" << 
numCÞs
 << "èexûed thmaximum‡Îowed byhËv– (" << 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxTžeCÞs
 << ")\n";

211 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

213 ià(
numRows
 > 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxTžeRows
)

215 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "numb” oàtžrow (" << 
numRows
 << "èexûed thmaximum‡Îowed byhËv– (" << 
ã©u»s
.
	`g‘Lev–T›rF—tu»s
()->
maxTžeRows
 << ")\n";

216 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

219 
IÁ
 
row
=0;„ow < 
numRows
;„ow++)

221 
IÁ
 
cÞ
=0; cÞ < 
numCÞs
; col++)

223 cÚ¡ 
IÁ
 
tžeIdx
 = 
row
 * 
numCÞs
 + 
cÞ
;

224 cÚ¡ 
TComTže
 &
tže
 = *(
pic
.
	`g‘PicSym
()->
	`g‘TComTže
(
tžeIdx
));

225 ià(
tže
.
	`g‘TžeWidthInCtus
(è< 
mšWidthInCtus
)

227 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "width oàtž(" << 
cÞ
 << ", " << 
row
 << "èi toØÇ¼ow fÜh´ofž-„—d " << 
tže
.
	`g‘TžeWidthInCtus
()*
¥s
.
	`g‘MaxCUWidth
(è<< "mu¡ b" << 
mšWidthInCtus
*sps.getMaxCUWidth() << "\n";

228 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

230 ià(
tže
.
	`g‘TžeHeightInCtus
(è< 
mšHeightInCtus
)

232 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "heighˆoàtž(" << 
cÞ
 << ", " << 
row
 << "èi toØthš fÜh´ofž-„—d " << 
tže
.
	`g‘TžeHeightInCtus
()*
¥s
.
	`g‘MaxCUHeight
(è<< " mu¡ b" << 
mšHeightInCtus
*sps.getMaxCUHeight() << "\n";

233 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

238 ià(
µs
.
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
(è&& !
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
bWaveäÚtsAndTžesCªBeU£dSimuÉªeou¦y
)

240 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
() << "profile does‚ot…ermitƒntropy coding sync‡ndileso be simultaneouslyƒnabled\n";

241 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

244 
	}
}

247 
Void


248 
	$checkPPS
(cÚ¡ 
TComSPS
 &
¥s
,

249 cÚ¡ 
TComPPS
 &
µs
,

250 cÚ¡ 
TComPic
 &
pic
,

251 cÚ¡ 
ProfžeLev–T›rF—tu»s
 &
ã©u»s
)

253 
TDecCÚfÜmªûCheck
::
checkRªge
<
IÁ
>(
µs
.
	`g‘PicIn™QPMšus26
(), "š™_qp_mšus26", -(
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
)-8)*6-26, 25);

254 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘MaxCuDQPD•th
(), "diff_cu_qp_d–_d•th", 0, 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
());

255 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘Log2P¬®ËlM”geLev–Mšus2
(), "log2_·¿Î–_m”ge_Ëv–_mšus2", 0, 
¥s
.
	`g‘Log2MšCodšgBlockSize
(è+ sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
() - 2);

257 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
), "log2_§o_off£t_sÿË_luma", 0, 
¡d
::
	`max
(
¥s
.
	`g‘B™D•th
(CHANNEL_TYPE_LUMA), 10)-10);

258 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_CHROMA
), "log2_§o_off£t_sÿË_chroma", 0, 
¡d
::
	`max
(
¥s
.
	`g‘B™D•th
(CHANNEL_TYPE_CHROMA), 10)-10);

260 
	`checkTžes
(
¥s
, 
µs
, 
pic
, 
ã©u»s
);

261 
	}
}

263 #ià!
DPB_ENCODER_USAGE_CHECK


264 
Void


265 
	gProfžeLev–T›rF—tu»s
::
	$aùiv©e
(cÚ¡ 
TComSPS
 &
¥s
)

267 cÚ¡ 
ProfžeT›rLev–
 &
±l
 = *(
¥s
.
	`g‘PTL
()->
	`g‘G’”®PTL
());

269 
m_t›r
 = 
±l
.
	`g‘T›rFÏg
();

271 
IÁ
 
i
=0; 
v®idProfžes
[i].
´ofže
 !ð
Profže
::
NONE
; i++)

273 ià(
±l
.
	`g‘ProfžeIdc
(è=ð
v®idProfžes
[
i
].
´ofže
 &&

274 
±l
.
	`g‘B™D•thCÚ¡¿št
(è=ð
v®idProfžes
[
i
].
maxB™D•th
 &&

275 
±l
.
	`g‘ChromaFÜm©CÚ¡¿št
(è=ð
v®idProfžes
[
i
].
maxChromaFÜm©
 &&

276 
±l
.
	`g‘IÁ¿CÚ¡¿štFÏg
(è=ð
v®idProfžes
[
i
].
g’”®IÁ¿CÚ¡¿štFÏg
 &&

277 
±l
.
	`g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(è=ð
v®idProfžes
[
i
].
g’”®OÃPiùu»OÆyCÚ¡¿štFÏg
 )

279 
m_pProfže
 = &(
v®idProfžes
[
i
]);

284 ià(
m_pProfže
 != 0)

287 cÚ¡ 
Lev–T›rF—tu»s
 *
pLTF
 = 
m_pProfže
->
pLev–T›rsLi¡Info
;

288 cÚ¡ 
Lev–
::
Name
 
¥sLev–Name
 = 
¥s
.
	`g‘PTL
()->
	`g‘G’”®PTL
()->
	`g‘Lev–Idc
();

289 ià(
¥sLev–Name
!=
Lev–
::
LEVEL8_5
 || 
m_pProfže
->
bCªU£Lev–8p5
)

291 
IÁ
 
i
=0; 
pLTF
[i].
Ëv–
!=
Lev–
::
NONE
; i++)

293 ià(
pLTF
[
i
].
Ëv–
 =ð
¥sLev–Name
)

295 
m_pLev–T›r
 = &(
pLTF
[
i
]);

302 cÚ¡ 
UIÁ
 
ùbSizeY
 = 
¥s
.
	`g‘MaxCUWidth
();

303 cÚ¡ 
UIÁ
 
b™D•thY
 = 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
);

304 cÚ¡ 
UIÁ
 
ùbWidthC
 = 
ùbSizeY
 >> 
	`g‘ChªÃlTy³SÿËX
(
CHANNEL_TYPE_CHROMA
, 
¥s
.
	`g‘ChromaFÜm©Idc
());

305 cÚ¡ 
UIÁ
 
ùbHeightC
 = 
ùbSizeY
 >> 
	`g‘ChªÃlTy³SÿËY
(
CHANNEL_TYPE_CHROMA
, 
¥s
.
	`g‘ChromaFÜm©Idc
());

306 cÚ¡ 
UIÁ
 
b™D•thC
 = 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
);

308 cÚ¡ 
UIÁ
 
¿wCtuB™s
 = 
ùbSizeY
*ùbSizeY*
b™D•thY
+2*(
ùbWidthC
*
ùbHeightC
)*
b™D•thC
;

309 
m_maxRawCtuB™s
=(
¿wCtuB™s
*5)/3;

312 
	}
}

316 
Void


317 
	$checkToÞAvažabž™y
(cÚ¡ 
TComSPS
 &
¥s
,

318 cÚ¡ 
TComPPS
 &
µs
,

319 cÚ¡ 
ProfžeLev–T›rF—tu»s
 &
ã©u»s
)

321 #ià
DPB_ENCODER_USAGE_CHECK


322 cÚ¡ 
ProfžeF—tu»s
::
TRISTATE
 
»xtToÞsEÇbËd
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
g’”®RExtToÞsEÇbËd
;

323 iàÐ
»xtToÞsEÇbËd
 !ð
ProfžeF—tu»s
::
OPTIONAL
)

325 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
»xtToÞsEÇbËd
 =ð
ProfžeF—tu»s
::
ENABLED
;

327 cÚ¡ 
TRISTATE
 
»xtToÞsEÇbËd
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
g’”®RExtToÞsEÇbËd
;

328 iàÐ
»xtToÞsEÇbËd
 !ð
OPTIONAL
)

330 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
»xtToÞsEÇbËd
 =ð
ENABLED
;

332 
¡d
::
¡ršg
 
æags
;

333 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
(è!ð
bWª‹dFÏgS‹
è
æags
+=",ransform_skip_rotation_enabled_flag";

334 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
(è!ð
bWª‹dFÏgS‹
è
æags
+=",ransform_skip_context_enabled_flag";

335 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_IMPLICIT
è!ð
bWª‹dFÏgS‹
è
æags
+=", implicit_rdpcm_enabled_flag";

336 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_EXPLICIT
è!ð
bWª‹dFÏgS‹
è
æags
+=",ƒxplicit_rdpcm_enabled_flag";

337 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘IÁ¿SmoÙhšgDi§bËdFÏg
(è!ð
bWª‹dFÏgS‹
è
æags
+=", intra_smoothing_disabled_flag";

338 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
(è!ð
bWª‹dFÏgS‹
è
æags
+=",…ersistent_rice_adaptation_enabled_flag";

339 #ià
DPB_ENCODER_USAGE_CHECK


340 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
(è!ð2 && 
»xtToÞsEÇbËd
==
ProfžeF—tu»s
::
DISABLED
 ) 
æags
+=",†og2_max_transform_skip_block_size_minus2";

342 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
(è!ð2 && 
»xtToÞsEÇbËd
==
DISABLED
 ) 
æags
+=",†og2_max_transform_skip_block_size_minus2";

345 ià(!
æags
.
	`em±y
())

347 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "thfÞlowšg fÏg mu¡‡Î b" << (
bWª‹dFÏgS‹
 ? "1" : "0"è<< " iÀth´ofž'" << 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
pNameSŒšg
 << "' cÚfÜmªû…ošt: " + 
æags
.
	`sub¡r
(2) + "\n";

348 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

353 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
()-2, "log2_max_ŒªsfÜm_sk_block_size_mšus2", 0, 
¥s
.
	`g‘QuadŒ“TULog2MaxSize
()-2);

356 #ià
DPB_ENCODER_USAGE_CHECK


357 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ex‹ndedP»cisiÚProûssšgFÏg
 !ð
ProfžeF—tu»s
::
OPTIONAL
)

359 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ex‹ndedP»cisiÚProûssšgFÏg
 =ð
ProfžeF—tu»s
::
ENABLED
;

361 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ex‹ndedP»cisiÚProûssšgFÏg
 !ð
OPTIONAL
)

363 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ex‹ndedP»cisiÚProûssšgFÏg
 =ð
ENABLED
;

365 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
(è!ð
bWª‹dFÏgS‹
)

367 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "ex‹nded_´ecisiÚ_´oûssšg_æag mu¡ b" << (
bWª‹dFÏgS‹
 ? "1" : "0"è<< " iÀth´ofž'" << 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
pNameSŒšg
 << "' conformance…oint\n";

368 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

372 #ià
DPB_ENCODER_USAGE_CHECK


373 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
chromaQpOff£tLi¡EÇbËdFÏg
 !ð
ProfžeF—tu»s
::
OPTIONAL
)

375 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
chromaQpOff£tLi¡EÇbËdFÏg
 =ð
ProfžeF—tu»s
::
ENABLED
;

377 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
chromaQpOff£tLi¡EÇbËdFÏg
 !ð
OPTIONAL
)

379 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
chromaQpOff£tLi¡EÇbËdFÏg
 =ð
ENABLED
;

381 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
(è!ð
bWª‹dFÏgS‹
)

383 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "chroma_qp_off£t_li¡_’abËd_æag mu¡ b" << (
bWª‹dFÏgS‹
 ? "1" : "0"è<< " iÀth´ofž'" << 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
pNameSŒšg
 << "' conformance…oint\n";

384 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

387 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
())

389 
TDecCÚfÜmªûCheck
::
checkRªge
<
UIÁ
>(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
(), "diff_cu_chroma_qp_off£t_d•th", 0, 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
());

392 #ià
DPB_ENCODER_USAGE_CHECK


393 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ÿbacBy·ssAlignm’tEÇbËdFÏg
 !ð
ProfžeF—tu»s
::
OPTIONAL
)

395 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ÿbacBy·ssAlignm’tEÇbËdFÏg
 =ð
ProfžeF—tu»s
::
ENABLED
;

397 ià(
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ÿbacBy·ssAlignm’tEÇbËdFÏg
 !ð
OPTIONAL
)

399 cÚ¡ 
BoÞ
 
bWª‹dFÏgS‹
 = 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
ÿbacBy·ssAlignm’tEÇbËdFÏg
 =ð
ENABLED
;

401 ià(
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘CabacBy·ssAlignm’tEÇbËdFÏg
(è!ð
bWª‹dFÏgS‹
)

403 
TDecCÚfÜmªûCheck
::
	`g‘SŒ—m
(è<< "ÿbac_by·ss_®ignm’t_’abËd_æag mu¡ b" << (
bWª‹dFÏgS‹
 ? "1" : "0"è<< " iÀth´ofž'" << 
ã©u»s
.
	`g‘ProfžeF—tu»s
()->
pNameSŒšg
 << "' conformance…oint\n";

404 
TDecCÚfÜmªûCheck
::
	`fšishW¬nšgR•Üt
();

407 
	}
}

410 
Void


411 
	gTDecCÚfÜmªûCheck
::
	$checkSliûAùiv©iÚ
(cÚ¡ 
TComSliû
 &
¦iû
,

412 cÚ¡ 
IÅutNALUn™
 &
Çlu
,

413 cÚ¡ 
TComPic
 &
pic
,

414 cÚ¡ 
BoÞ
 
bFœ¡SliûInSŒ—m
,

415 cÚ¡ 
BoÞ
 
bFœ¡SliûInSequ’û
,

416 cÚ¡ 
BoÞ
 
bFœ¡SliûInPiùu»
)

418 cÚ¡ 
TComSPS
 &
¥s
=*(
¦iû
.
	`g‘SPS
());

419 cÚ¡ 
TComPPS
 &
µs
=*(
¦iû
.
	`g‘PPS
());

421 ià(!
	`doCheckšg
()) ;

423 
m_aùiv©edF—tu»s
.
	`aùiv©e
(
¥s
);

425 ià(
m_aùiv©edF—tu»s
.
	`g‘ProfžeF—tu»s
(è=ð0 || m_aùiv©edF—tu»s.
	`g‘Lev–T›rF—tu»s
() == 0)

427 ià(
m_aùiv©edF—tu»s
.
	`g‘ProfžeF—tu»s
() == 0)

429 
	`g‘SŒ—m
() << "Unknown…rofile/constraint flag combination discovered\n";

433 
	`g‘SŒ—m
() << "Unknown†evel IDC discovered\n";

435 
	`fšishW¬nšgR•Üt
();

440 
	`checkSPS
(
¥s
, 
m_aùiv©edF—tu»s
);

441 
	`checkPPS
(
¥s
, 
µs
, 
pic
, 
m_aùiv©edF—tu»s
);

442 
	`checkToÞAvažabž™y
(
¥s
, 
µs
, 
m_aùiv©edF—tu»s
);

444 ià(
m_aùiv©edF—tu»s
.
	`g‘ProfžeF—tu»s
()->
	`ÚlyIRAPPiùu»s
(è&& (
Çlu
.
m_ÇlUn™Ty³
 < 
NAL_UNIT_CODED_SLICE_BLA_W_LP
 ||‚®u.m_ÇlUn™Ty³> 
NAL_UNIT_RESERVED_IRAP_VCL23
))

446 
	`g‘SŒ—m
() << "Bad NALU for‡n intra constrained…rofile\n";

447 
	`fšishW¬nšgR•Üt
();

450 ià(
bFœ¡SliûInSŒ—m
 || 
bFœ¡SliûInSequ’û
 || 
bFœ¡SliûInPiùu»
)

452 
m_numb”OfSliûsInPiùu»
=1;

453 
m_by‹sInPiùu»
=0;

457 
m_numb”OfSliûsInPiùu»
++;

458 ià(
m_numb”OfSliûsInPiùu»
 > 
m_aùiv©edF—tu»s
.
	`g‘Lev–T›rF—tu»s
()->
maxSliûSegm’tsP”Piùu»
)

460 
	`g‘SŒ—m
() << "Too many slice segments inhe…icture\n";

461 
	`fšishW¬nšgR•Üt
();

466 
m_by‹sInPiùu»
+=
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
().
	`size
();

467 ià(
m_by‹sInPiùu»
*8 > 
m_aùiv©edF—tu»s
.
	`g‘CpbSizeInB™s
())

469 
	`g‘SŒ—m
() << "Entire‡ccess unit must fit withinhe CPBƒven if split into multiple decoding units (section C.2.2 Timing of decoding unit‡rrival)\n";

470 
	`fšishW¬nšgR•Üt
();

473 
	}
}

476 
Void


477 
	gTDecCÚfÜmªûCheck
::
	$checkCtuDecodšg
(cÚ¡ 
UIÁ
 
numU£dB™s
)

479 ià(
numU£dB™s
 > 
m_aùiv©edF—tu»s
.
	`g‘MaxRawCtuB™s
())

481 
	`g‘SŒ—m
() << "CTUƒxceeds maximum RAW CTU bits†imits.\n";

482 
	`fšishW¬nšgR•Üt
();

484 
	}
}

	@source/Lib/TLibDecoder/TDecConformance.h

38 #iâdeà
__TDECCONFORMANCE__


39 
	#__TDECCONFORMANCE__


	)

42 #iâdeà
DECODER_PARTIAL_CONFORMANCE_CHECK


43 
	#DECODER_PARTIAL_CONFORMANCE_CHECK
 0

45 

	)

48 #ià
_MSC_VER
 > 1000

49 #´agm¨
Úû


52 
	~"TLibCommÚ/CommÚDef.h
"

53 #ià
DPB_ENCODER_USAGE_CHECK


54 
	~"TLibCommÚ/ProfžeLev–T›rF—tu»s.h
"

56 
	~<¡dio.h
>

57 
	~<io¡»am
>

58 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 == 2

59 
	~<¡dlib.h
>

64 
þass
 
	gTComSliû
;

65 #ià!
DPB_ENCODER_USAGE_CHECK


66 
þass
 
	gTComSPS
;

67 
þass
 
	gTComPPS
;

69 
þass
 
	gIÅutNALUn™
;

70 
þass
 
	gTComPTL
;

71 
þass
 
	gTComPic
;

73 #ià!
DPB_ENCODER_USAGE_CHECK


74 
	eTRISTATE


76 
	mDISABLED
=0,

77 
	mOPTIONAL
=1,

78 
	mENABLED
=2

79 } 
	tTRISTATE
;

82 
	eHBRFACTOREQN


84 
	mHBR_1
 = 0,

85 
	mHBR_1_OR_2
 = 1,

86 
	mHBR_12_OR_24
 = 2

87 } 
	tHBRFACTOREQN
;

90 
	sLev–T›rF—tu»s


92 
	mLev–
::
Name
 
Ëv–
;

93 
UIÁ
 
	mmaxLumaPs
;

94 
UIÁ
 
	mmaxCpb
[
Lev–
::
NUMBER_OF_TIERS
];

95 
UIÁ
 
	mmaxSliûSegm’tsP”Piùu»
;

96 
UIÁ
 
	mmaxTžeRows
;

97 
UIÁ
 
	mmaxTžeCÞs
;

98 
UIÁ64
 
	mmaxLumaSr
;

99 
UIÁ
 
	mmaxBr
[
Lev–
::
NUMBER_OF_TIERS
];

100 
UIÁ
 
	mmšCrBa£
[
Lev–
::
NUMBER_OF_TIERS
];

101 
UIÁ
 
g‘MaxPicWidthInLumaSam¶es
() const;

102 
UIÁ
 
g‘MaxPicHeightInLumaSam¶es
() const;

106 
	sProfžeF—tu»s


108 
	mProfže
::
Name
 
´ofže
;

109 cÚ¡ 
TCh¬
 *
	mpNameSŒšg
;

110 
UIÁ
 
	mmaxB™D•th
;

111 
ChromaFÜm©
 
	mmaxChromaFÜm©
;

112 
BoÞ
 
	mg’”®IÁ¿CÚ¡¿štFÏg
;

113 
BoÞ
 
	mg’”®OÃPiùu»OÆyCÚ¡¿štFÏg
;

114 
TRISTATE
 
	mg’”®Low”B™R©eCÚ¡¿št
;

115 
TRISTATE
 
	mg’”®RExtToÞsEÇbËd
;

116 
TRISTATE
 
	mex‹ndedP»cisiÚProûssšgFÏg
;

117 
TRISTATE
 
	mchromaQpOff£tLi¡EÇbËdFÏg
;

118 
TRISTATE
 
	mÿbacBy·ssAlignm’tEÇbËdFÏg
;

119 
HBRFACTOREQN
 
	mhbrFaùÜEqn
;

120 
BoÞ
 
	mbWaveäÚtsAndTžesCªBeU£dSimuÉªeou¦y
;

122 
UIÁ
 
	mmšTžeCÞumnWidthInLumaSam¶es
;

123 
UIÁ
 
	mmšTžeRowHeightInLumaSam¶es
;

124 
BoÞ
 
	mbCªU£Lev–8p5
;

125 
UIÁ
 
	mýbVþFaùÜ
;

126 
UIÁ
 
	mýbN®FaùÜ
;

127 
UIÁ
 
	mfÜm©C­abž™yFaùÜx1000
;

128 
UIÁ
 
	mmšCrSÿËFaùÜx10
;

129 cÚ¡ 
Lev–T›rF—tu»s
 *
	mpLev–T›rsLi¡Info
;

131 
BoÞ
 
chromaFÜm©V®id
(
ChromaFÜm©
 
chFmt
ècÚ¡ {  (
	m´ofže
 =ð
Profže
::
MAINREXT
 || 
´ofže
 =ðProfže::
HIGHTHROUGHPUTREXT
è? chFmt<=
maxChromaFÜm©
 : (chFmt == maxChromaFormat ); }

132 
BoÞ
 
ÚlyIRAPPiùu»s
(ècÚ¡ {  
	mg’”®IÁ¿CÚ¡¿štFÏg
; }

133 
UIÁ
 
g‘HbrFaùÜ
(
BoÞ
 
bLow”B™R©eCÚ¡¿štFÏg
) const

135  
	mhbrFaùÜEqn
==
HBR_1_OR_2
 ? (2-(
bLow”B™R©eCÚ¡¿štFÏg
?1:0)) :

136 (
hbrFaùÜEqn
==
HBR_12_OR_24
 ? 12*(2-(
bLow”B™R©eCÚ¡¿štFÏg
?1:0)) :

142 þas 
	cProfžeLev–T›rF—tu»s


144 
	m´iv©e
:

145 cÚ¡ 
ProfžeF—tu»s
 *
m_pProfže
;

146 cÚ¡ 
Lev–T›rF—tu»s
 *
	mm_pLev–T›r
;

147 
UIÁ
 
	mm_hbrFaùÜ
;

148 
	mLev–
::
T›r
 
m_t›r
;

149 
UIÁ
 
	mm_maxRawCtuB™s
;

150 
	mpublic
:

151 
	$ProfžeLev–T›rF—tu»s
(è: 
	`m_pProfže
(0), 
	`m_pLev–T›r
(0), 
	`m_hbrFaùÜ
(0), 
	`m_t›r
(
Lev–
::
MAIN
), 
	$m_maxRawCtuB™s
(0) { }

153 
Void
 
	`aùiv©e
(cÚ¡ 
TComSPS
 &
¥s
);

155 cÚ¡ 
ProfžeF—tu»s
 *
	$g‘ProfžeF—tu»s
(ècÚ¡ {  
m_pProfže
; 
	}
}

156 cÚ¡ 
Lev–T›rF—tu»s
 *
	$g‘Lev–T›rF—tu»s
(ècÚ¡ {  
m_pLev–T›r
; 
	}
}

157 
	gLev–
::
T›r
 
	$g‘T›r
(ècÚ¡ {  
m_t›r
; 
	}
}

158 
UIÁ64
 
	$g‘CpbSizeInB™s
(ècÚ¡ {  (
m_pLev–T›r
!=0 && 
m_pProfže
!=0è? 
	`UIÁ64
(m_pProfže->
ýbVþFaùÜ
è* m_pLev–T›r->
maxCpb
[
m_t›r
?1:0] : UIÁ64(0); 
	}
}

159 
DoubË
 
	$g‘MšCr
(ècÚ¡ {  (
m_pLev–T›r
!=0 && 
m_pProfže
!=0è? (m_pProfže->
mšCrSÿËFaùÜx10
 * m_pLev–T›r->
mšCrBa£
[
m_t›r
?1:0])/10.0 : 0.0 ; 
	}
}

160 
UIÁ
 
	$g‘MaxRawCtuB™s
(ècÚ¡ {  
m_maxRawCtuB™s
; 
	}
}

165 þas 
	cTDecCÚfÜmªûCheck


167 
	m´iv©e
:

168 #ià
MCTS_ENC_CHECK


169 
BoÞ
 
m_tmùsCheckEÇbËd
;

171 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK


172 
UIÁ
 
	mm_numb”OfSliûsInPiùu»
;

173 
UIÁ64
 
	mm_by‹sInPiùu»
;

175 
ProfžeLev–T›rF—tu»s
 
	mm_aùiv©edF—tu»s
;

177 
	mpublic
:

181 
šlše
 
BoÞ
 
	$doCheckšg
()

183  
DECODER_PARTIAL_CONFORMANCE_CHECK
 != 0;

186 
UIÁ
 
	`g‘MšLog2CtbSize
(cÚ¡ 
TComPTL
 &
±l
, UIÁ 
Ïy”Plus1
=0);

187 
UIÁ
 
	`g‘MaxLog2CtbSize
(cÚ¡ 
TComPTL
 &
±l
, UIÁ 
Ïy”Plus1
=0);

190 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 == 0

191 
šlše
 
¡d
::
o¡»am
 &
	$g‘SŒ—m
(è{  
¡d
::
cout
; 
	}
}

193 
šlše
 
Void
 
	$fšishW¬nšgR•Üt
(è{ 
	}
}

195 
	g‹m¶©e
 <
þass
 
	gT
>

196 
Void
 
	$checkRªge
(cÚ¡ 
T
& , cÚ¡ 
TCh¬
 *, cÚ¡ T& , cÚ¡ T& ) { 
	}
}

201 
šlše
 
	g¡d
::
o¡»am
 &
	$g‘SŒ—m
()

203 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 == 1

204 
¡d
::
cout
 << "WARNING: Conformance failure - ";

205  
¡d
::
cout
;

207 
¡d
::
û¼
 << "ERROR: Conformance failure - ";

208  
¡d
::
û¼
;

210 
	}
}

212 
šlše
 
Void
 
	$fšishW¬nšgR•Üt
()

214 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 == 2

215 
	`ex™
(1);

217 
	}
}

219 
	g‹m¶©e
 <
þass
 
	gT
>

220 
Void
 
	$checkRªge
(cÚ¡ 
T
& 
v®
, cÚ¡ 
TCh¬
 *
Çme
, cÚ¡ T& 
mšV®Inþusive
, cÚ¡ T& 
maxV®Inþusive
)

222 ià(
v®
<
mšV®Inþusive
 || v®>
maxV®Inþusive
)

224 
	`g‘SŒ—m
(è<< 
Çme
 << " mu¡ bšh¿ngoà" << 
mšV®Inþusive
 << "Ø" << 
maxV®Inþusive
 << " (šþusiveè- decoded v®uoà" << 
v®
 << "\n";

225 
	`fšishW¬nšgR•Üt
();

227 
	}
}

234 
TDecCÚfÜmªûCheck
();

236 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 == 0

237 
Void


238 
	$checkSliûAùiv©iÚ
(cÚ¡ 
TComSliû
 & ,

239 cÚ¡ 
IÅutNALUn™
 & ,

240 cÚ¡ 
TComPic
 & ,

241 cÚ¡ 
BoÞ
 ,

242 cÚ¡ 
BoÞ
 ,

243 cÚ¡ 
BoÞ
 ) { 
	}
}

245 
Void


246 
	$checkCtuDecodšg
(cÚ¡ 
UIÁ
 
numU£dB™s
è{ 
	}
}

248 
Void


249 
checkSliûAùiv©iÚ
(cÚ¡ 
TComSliû
 &
¦iû
,

250 cÚ¡ 
IÅutNALUn™
 &
Çlu
,

251 cÚ¡ 
TComPic
 &
pic
,

252 cÚ¡ 
BoÞ
 
bFœ¡SliûInSŒ—m
,

253 cÚ¡ 
BoÞ
 
bFœ¡SliûInSequ’û
,

254 cÚ¡ 
BoÞ
 
bFœ¡SliûInPiùu»
);

256 
Void


257 
checkCtuDecodšg
(cÚ¡ 
UIÁ
 
numU£dB™s
);

260 #ià
MCTS_ENC_CHECK


261 
Void
 
	$’abËTMùsCheck
(
BoÞ
 
’abËd
è{ 
m_tmùsCheckEÇbËd
 =ƒÇbËd; 
	}
};

262 
BoÞ
 
	$g‘TMùsCheck
(ècÚ¡ {  
m_tmùsCheckEÇbËd
; 
	}
}

263 
Void
 
	$æagTMùsE¼Ü
(cÚ¡ *
”rÜ
)

265 
	`årštf
(
¡d”r
, "TMCTS checkƒ¼Ü: %s\n", 
”rÜ
);

266 
	}
}

	@source/Lib/TLibDecoder/TDecCu.cpp

38 
	~"TDecCu.h
"

39 
	~"TLibCommÚ/TComTU.h
"

40 
	~"TLibCommÚ/TComP»diùiÚ.h
"

49 
	gTDecCu
::
	$TDecCu
()

51 
m_µcYuvResi
 = 
NULL
;

52 
m_µcYuvReco
 = 
NULL
;

53 
m_µcCU
 = 
NULL
;

54 
	}
}

56 
	gTDecCu
::~
	$TDecCu
()

58 
	}
}

60 #ià
MCTS_ENC_CHECK


61 
Void
 
TDecCu
::
	$š™
Ð
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TComTrQuªt
* 
pcTrQuªt
, 
TComP»diùiÚ
* 
pcP»diùiÚ
, 
TDecCÚfÜmªûCheck
* 
pCÚfÜmªûCheck
)

63 
Void
 
TDecCu
::
	$š™
(
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TComTrQuªt
* 
pcTrQuªt
, 
TComP»diùiÚ
* 
pcP»diùiÚ
)

66 
m_pcEÁrÝyDecod”
 = 
pcEÁrÝyDecod”
;

67 
m_pcTrQuªt
 = 
pcTrQuªt
;

68 
m_pcP»diùiÚ
 = 
pcP»diùiÚ
;

69 #ià
MCTS_ENC_CHECK


70 
m_pCÚfÜmªûCheck
 = 
pCÚfÜmªûCheck
;

72 
	}
}

80 
Void
 
	gTDecCu
::
	$ü—‹
Ð
UIÁ
 
uiMaxD•th
, UIÁ 
uiMaxWidth
, UIÁ 
uiMaxHeight
, 
ChromaFÜm©
 
chromaFÜm©IDC
 )

82 
m_uiMaxD•th
 = 
uiMaxD•th
+1;

84 
m_µcYuvResi
 = 
Ãw
 
TComYuv
*[
m_uiMaxD•th
-1];

85 
m_µcYuvReco
 = 
Ãw
 
TComYuv
*[
m_uiMaxD•th
-1];

86 
m_µcCU
 = 
Ãw
 
TComD©aCU
*[
m_uiMaxD•th
-1];

88  
UIÁ
 
ui
 = 0; u˜< 
m_uiMaxD•th
-1; ui++ )

90 
UIÁ
 
uiNumP¬t™iÚs
 = 1<<ÐÐ
m_uiMaxD•th
 - 
ui
 - 1 )<<1 );

91 
UIÁ
 
uiWidth
 = 
uiMaxWidth
 >> 
ui
;

92 
UIÁ
 
uiHeight
 = 
uiMaxHeight
 >> 
ui
;

102 
m_µcYuvResi
[
ui
] = 
Ãw
 
TComYuv
; m_µcYuvResi[ui]->
	`ü—‹
Ð
uiWidth
, 
uiHeight
, 
chromaFÜm©IDC
 );

103 
m_µcYuvReco
[
ui
] = 
Ãw
 
TComYuv
; m_µcYuvReco[ui]->
	`ü—‹
Ð
uiWidth
, 
uiHeight
, 
chromaFÜm©IDC
 );

104 
m_µcCU
 [
ui
] = 
Ãw
 
TComD©aCU
; m_µcCU [ui]->
	`ü—‹
Ð
chromaFÜm©IDC
, 
uiNumP¬t™iÚs
, 
uiWidth
, 
uiHeight
, 
Œue
, 
uiMaxWidth
 >> (
m_uiMaxD•th
 - 1) );

107 
m_bDecodeDQP
 = 
çl£
;

108 
m_IsChromaQpAdjCoded
 = 
çl£
;

111 
UIÁ
* 
piTmp
 = &
g_auiZsÿnToRa¡”
[0];

112 
	`š™ZsÿnToRa¡”
(
m_uiMaxD•th
, 1, 0, 
piTmp
);

113 
	`š™Ra¡”ToZsÿn
Ð
uiMaxWidth
, 
uiMaxHeight
, 
m_uiMaxD•th
 );

116 
	`š™Ra¡”ToP–XY
Ð
uiMaxWidth
, 
uiMaxHeight
, 
m_uiMaxD•th
 );

117 
	}
}

119 
Void
 
	gTDecCu
::
	$de¡roy
()

121  
UIÁ
 
ui
 = 0; u˜< 
m_uiMaxD•th
-1; ui++ )

123 
m_µcYuvResi
[
ui
]->
	`de¡roy
(); 
d–‘e
 m_µcYuvResi[ui]; m_µcYuvResi[ui] = 
NULL
;

124 
m_µcYuvReco
[
ui
]->
	`de¡roy
(); 
d–‘e
 m_µcYuvReco[ui]; m_µcYuvReco[ui] = 
NULL
;

125 
m_µcCU
 [
ui
]->
	`de¡roy
(); 
d–‘e
 m_µcCU [ui]; m_µcCU [ui] = 
NULL
;

128 
d–‘e
 [] 
m_µcYuvResi
; m_µcYuvRes˜ð
NULL
;

129 
d–‘e
 [] 
m_µcYuvReco
; m_µcYuvRecØð
NULL
;

130 
d–‘e
 [] 
m_µcCU
 ; m_µcCU = 
NULL
;

131 
	}
}

142 
Void
 
	gTDecCu
::
	$decodeCtu
Ð
TComD©aCU
* 
pCtu
, 
BoÞ
& 
isLa¡CtuOfSliûSegm’t
 )

144 iàÐ
pCtu
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

146 
	`£tdQPFÏg
(
Œue
);

149 iàÐ
pCtu
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

151 
	`£tIsChromaQpAdjCoded
(
Œue
);

155 
	`xDecodeCU
Ð
pCtu
, 0, 0, 
isLa¡CtuOfSliûSegm’t
);

156 
	}
}

162 
Void
 
	gTDecCu
::
	$decom´essCtu
Ð
TComD©aCU
* 
pCtu
 )

164 
	`xDecom´essCU
Ð
pCtu
, 0, 0 );

165 
	}
}

172 
BoÞ
 
	gTDecCu
::
	$xDecodeSliûEnd
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

174 
UIÁ
 
uiIsLa¡CtuOfSliûSegm’t
;

176 ià(
pcCU
->
	`isLa¡SubCUOfCtu
(
uiAbsP¬tIdx
))

178 
m_pcEÁrÝyDecod”
->
	`decodeT”mš©šgB™
Ð
uiIsLa¡CtuOfSliûSegm’t
 );

182 
uiIsLa¡CtuOfSliûSegm’t
=0;

185  
uiIsLa¡CtuOfSliûSegm’t
>0;

186 
	}
}

189 
Void
 
	gTDecCu
::
	$xDecodeCU
Ð
TComD©aCU
*cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ UIÁ 
uiD•th
, 
BoÞ
 &
isLa¡CtuOfSliûSegm’t
)

191 
TComPic
* 
pcPic
 = 
pcCU
->
	`g‘Pic
();

192 cÚ¡ 
TComSPS
 &
¥s
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
();

193 cÚ¡ 
TComPPS
 &
µs
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘PPS
();

194 cÚ¡ 
UIÁ
 
maxCuWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

195 cÚ¡ 
UIÁ
 
maxCuHeight
ð
¥s
.
	`g‘MaxCUHeight
();

196 
UIÁ
 
uiCurNumP¬ts
 = 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
<<1);

197 
UIÁ
 
uiQNumP¬ts
 = 
uiCurNumP¬ts
>>2;

200 
BoÞ
 
bBound¬y
 = 
çl£
;

201 
UIÁ
 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

202 
UIÁ
 
uiRP–X
 = 
uiLP–X
 + (
maxCuWidth
>>
uiD•th
) - 1;

203 
UIÁ
 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

204 
UIÁ
 
uiBP–Y
 = 
uiTP–Y
 + (
maxCuHeight
>>
uiD•th
) - 1;

206 ifÐÐ
uiRP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiBP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

208 
m_pcEÁrÝyDecod”
->
	`decodeS¶™FÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

212 
bBound¬y
 = 
Œue
;

214 ifÐÐÐ
uiD•th
 < 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 ) ) && ( uiD•th < 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
(èèè|| 
bBound¬y
 )

216 
UIÁ
 
uiIdx
 = 
uiAbsP¬tIdx
;

217 ifÐ
uiD•th
 =ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

219 
	`£tdQPFÏg
(
Œue
);

220 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘RefQP
(
uiAbsP¬tIdx
), uiAbsP¬tIdx, 
uiD•th
 );

223 ifÐ
uiD•th
 =ð
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
(è&& 
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

225 
	`£tIsChromaQpAdjCoded
(
Œue
);

228  
UIÁ
 
uiP¬tUn™Idx
 = 0; uiPartUnitIdx < 4; uiPartUnitIdx++ )

230 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiIdx
] ];

231 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiIdx
] ];

233 iàÐ!
isLa¡CtuOfSliûSegm’t
 && ( 
uiLP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiTP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

235 
	`xDecodeCU
Ð
pcCU
, 
uiIdx
, 
uiD•th
+1, 
isLa¡CtuOfSliûSegm’t
 );

239 
pcCU
->
	`£tOutsideCUP¬t
Ð
uiIdx
, 
uiD•th
+1 );

242 
uiIdx
 +ð
uiQNumP¬ts
;

244 ifÐ
uiD•th
 =ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

246 iàÐ
	`g‘dQPFÏg
() )

248 
UIÁ
 
uiQPSrcP¬tIdx
 = 
uiAbsP¬tIdx
;

249 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘RefQP
Ð
uiQPSrcP¬tIdx
 ), 
uiAbsP¬tIdx
, 
uiD•th
 );

255 ifÐ
uiD•th
 <ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

257 
	`£tdQPFÏg
(
Œue
);

258 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘RefQP
(
uiAbsP¬tIdx
), uiAbsP¬tIdx, 
uiD•th
 );

261 ifÐ
uiD•th
 <ð
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
(è&& 
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

263 
	`£tIsChromaQpAdjCoded
(
Œue
);

266 ià(
µs
.
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

268 
m_pcEÁrÝyDecod”
->
	`decodeCUT¿nsquªtBy·ssFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

272 ifÐ!
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
())

274 
m_pcEÁrÝyDecod”
->
	`decodeSkFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

278 ifÐ
pcCU
->
	`isSk³d
(
uiAbsP¬tIdx
) )

280 
m_µcCU
[
uiD•th
]->
	`cÝyIÁ”P»dInfoFrom
Ð
pcCU
, 
uiAbsP¬tIdx
, 
REF_PIC_LIST_0
 );

281 
m_µcCU
[
uiD•th
]->
	`cÝyIÁ”P»dInfoFrom
Ð
pcCU
, 
uiAbsP¬tIdx
, 
REF_PIC_LIST_1
 );

282 
TComMvF›ld
 
cMvF›ldNeighbours
[
MRG_MAX_NUM_CANDS
 << 1];

283 
UCh¬
 
uhIÁ”DœNeighbours
[
MRG_MAX_NUM_CANDS
];

284 
IÁ
 
numV®idM”geCªd
 = 0;

285  
UIÁ
 
ui
 = 0; u˜< 
m_µcCU
[
uiD•th
]->
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
(); ++ui )

287 
uhIÁ”DœNeighbours
[
ui
] = 0;

289 
m_pcEÁrÝyDecod”
->
	`decodeM”geIndex
Ð
pcCU
, 0, 
uiAbsP¬tIdx
, 
uiD•th
 );

290 
UIÁ
 
uiM”geIndex
 = 
pcCU
->
	`g‘M”geIndex
(
uiAbsP¬tIdx
);

291 #ià
MCTS_ENC_CHECK


292 
UIÁ
 
numS·tŸlM”geCªdid©es
 = 0;

293 
m_µcCU
[
uiD•th
]->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
, 
uiM”geIndex
 );

294 iàÐ
m_pCÚfÜmªûCheck
->
	`g‘TMùsCheck
(è&& 
m_µcCU
[
uiD•th
]->
	`isLa¡CÞumnCTUInTže
(è&& (
uiM”geIndex
 >ð
numS·tŸlM”geCªdid©es
) )

296 
m_pCÚfÜmªûCheck
->
	`æagTMùsE¼Ü
("Merge Index using‚on-spatial merge candidate (Skip)");

299 
m_µcCU
[
uiD•th
]->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
uiM”geIndex
 );

301 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð
uhIÁ”DœNeighbours
[
uiM”geIndex
], 
uiAbsP¬tIdx
, 0, 
uiD•th
 );

303 
TComMv
 
	`cTmpMv
( 0, 0 );

304  
UIÁ
 
uiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

306 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) ) > 0 )

308 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð0, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiAbsP¬tIdx
, 0, 
uiD•th
);

309 
pcCU
->
	`£tMVPNumSubP¬ts
Ð0, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiAbsP¬tIdx
, 0, 
uiD•th
);

310 
pcCU
->
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`£tAÎMvd
Ð
cTmpMv
, 
SIZE_2Nx2N
, 
uiAbsP¬tIdx
, 
uiD•th
 );

311 
pcCU
->
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[ 2*
uiM”geIndex
 + uiRefLi¡Idx ], 
SIZE_2Nx2N
, 
uiAbsP¬tIdx
, 
uiD•th
 );

314 
	`xFšishDecodeCU
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
isLa¡CtuOfSliûSegm’t
 );

318 
m_pcEÁrÝyDecod”
->
	`decodeP»dMode
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

319 
m_pcEÁrÝyDecod”
->
	`decodeP¬tSize
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

321 ià(
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) &&…cCU->
	`g‘P¬t™iÚSize
ÐuiAbsP¬tIdx ) =ð
SIZE_2Nx2N
 )

323 
m_pcEÁrÝyDecod”
->
	`decodeIPCMInfo
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

325 if(
pcCU
->
	`g‘IPCMFÏg
(
uiAbsP¬tIdx
))

327 
	`xFšishDecodeCU
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
isLa¡CtuOfSliûSegm’t
 );

333 
m_pcEÁrÝyDecod”
->
	`decodeP»dInfo
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
m_µcCU
[uiDepth]);

336 
BoÞ
 
bCodeDQP
 = 
	`g‘dQPFÏg
();

337 
BoÞ
 
isChromaQpAdjCoded
 = 
	`g‘IsChromaQpAdjCoded
();

338 
m_pcEÁrÝyDecod”
->
	`decodeCÛff
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
bCodeDQP
, 
isChromaQpAdjCoded
 );

339 
	`£tIsChromaQpAdjCoded
Ð
isChromaQpAdjCoded
 );

340 
	`£tdQPFÏg
Ð
bCodeDQP
 );

341 
	`xFšishDecodeCU
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
isLa¡CtuOfSliûSegm’t
 );

342 
	}
}

344 
Void
 
	gTDecCu
::
	$xFšishDecodeCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 &
isLa¡CtuOfSliûSegm’t
)

346 ifÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
())

348 
pcCU
->
	`£tQPSubP¬ts
Ð
	`g‘dQPFÏg
()?pcCU->
	`g‘RefQP
(
uiAbsP¬tIdx
):pcCU->
	`g‘CodedQP
(), uiAbsP¬tIdx, 
uiD•th
 );

351 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
(è&& !
	`g‘IsChromaQpAdjCoded
())

353 
pcCU
->
	`£tChromaQpAdjSubP¬ts
ÐpcCU->
	`g‘CodedChromaQpAdj
(), 
uiAbsP¬tIdx
, 
uiD•th
 );

356 
isLa¡CtuOfSliûSegm’t
 = 
	`xDecodeSliûEnd
Ð
pcCU
, 
uiAbsP¬tIdx
 );

357 
	}
}

359 
Void
 
	gTDecCu
::
	$xDecom´essCU
Ð
TComD©aCU
* 
pCtu
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

361 
TComPic
* 
pcPic
 = 
pCtu
->
	`g‘Pic
();

362 
TComSliû
 * 
pcSliû
 = 
pCtu
->
	`g‘Sliû
();

363 cÚ¡ 
TComSPS
 &
¥s
=*(
pcSliû
->
	`g‘SPS
());

365 
BoÞ
 
bBound¬y
 = 
çl£
;

366 
UIÁ
 
uiLP–X
 = 
pCtu
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

367 
UIÁ
 
uiRP–X
 = 
uiLP–X
 + (
¥s
.
	`g‘MaxCUWidth
()>>
uiD•th
) - 1;

368 
UIÁ
 
uiTP–Y
 = 
pCtu
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

369 
UIÁ
 
uiBP–Y
 = 
uiTP–Y
 + (
¥s
.
	`g‘MaxCUHeight
()>>
uiD•th
) - 1;

371 ifÐÐ
uiRP–X
 >ð
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè|| ( 
uiBP–Y
 >ð¥s.
	`g‘PicHeightInLumaSam¶es
() ) )

373 
bBound¬y
 = 
Œue
;

376 ifÐÐÐ
uiD•th
 < 
pCtu
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 ) ) && ( uiD•th < 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
(èèè|| 
bBound¬y
 )

378 
UIÁ
 
uiNextD•th
 = 
uiD•th
 + 1;

379 
UIÁ
 
uiQNumP¬ts
 = 
pCtu
->
	`g‘TÙ®NumP¬t
(è>> (
uiNextD•th
<<1);

380 
UIÁ
 
uiIdx
 = 
uiAbsP¬tIdx
;

381  
UIÁ
 
uiP¬tIdx
 = 0; uiPartIdx < 4; uiPartIdx++ )

383 
uiLP–X
 = 
pCtu
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiIdx
] ];

384 
uiTP–Y
 = 
pCtu
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiIdx
] ];

386 ifÐÐ
uiLP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiTP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

388 
	`xDecom´essCU
(
pCtu
, 
uiIdx
, 
uiNextD•th
 );

391 
uiIdx
 +ð
uiQNumP¬ts
;

397 
m_µcYuvResi
[
uiD•th
]->
	`þ—r
();

399 
m_µcCU
[
uiD•th
]->
	`cÝySubCU
Ð
pCtu
, 
uiAbsP¬tIdx
 );

401  
m_µcCU
[
uiD•th
]->
	`g‘P»diùiÚMode
(0) )

403 
MODE_INTER
:

404 
	`xRecÚIÁ”
Ð
m_µcCU
[
uiD•th
], uiDepth );

406 
MODE_INTRA
:

407 
	`xRecÚIÁ¿QT
Ð
m_µcCU
[
uiD•th
], uiDepth );

410 
	`as£¹
(0);

414 #ià
DEBUG_STRING


415 cÚ¡ 
P»dMode
 
´edMode
=
m_µcCU
[
uiD•th
]->
	`g‘P»diùiÚMode
(0);

416 ià(
DebugO±iÚLi¡
::
DebugSŒšg_SŒuùu»
.
	`g‘IÁ
()&
	`DebugSŒšgG‘P»dModeMask
(
´edMode
))

418 
P¬tSize
 
eSize
=
m_µcCU
[
uiD•th
]->
	`g‘P¬t™iÚSize
(0);

419 
¡d
::
o¡»am
 &
	`ss
(¡d::
cout
);

421 
ss
 <<"###: " << (
´edMode
==
MODE_INTRA
?"IÁ¿ ":"IÁ” "è<< 
·¹SizeToSŒšg
[
eSize
] << " CU‡ˆ" << 
m_µcCU
[
uiD•th
]->
	`g‘CUP–X
(è<< ", " << m_µcCU[uiD•th]->
	`g‘CUP–Y
(è<< " width=" << 
	`UIÁ
(m_µcCU[uiD•th]->
	`g‘Width
(0)è<< 
¡d
::
’dl
;

425 iàÐ
m_µcCU
[
uiD•th
]->
	`isLos¦essCoded
(0è&& (m_µcCU[uiD•th]->
	`g‘IPCMFÏg
(0è=ð
çl£
))

427 
	`xFžlPCMBufãr
(
m_µcCU
[
uiD•th
], uiDepth);

430 
	`xCÝyToPic
Ð
m_µcCU
[
uiD•th
], 
pcPic
, 
uiAbsP¬tIdx
, uiDepth );

431 
	}
}

433 
Void
 
	gTDecCu
::
	$xRecÚIÁ”
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 )

437 #ià
MCTS_ENC_CHECK


438 ià(
m_pCÚfÜmªûCheck
->
	`g‘TMùsCheck
(è&& !
m_pcP»diùiÚ
->
	`checkTMùsMvp
(
pcCU
))

440 
m_pCÚfÜmªûCheck
->
	`æagTMùsE¼Ü
("motion vector‡crossile boundaries");

443 
m_pcP»diùiÚ
->
	`mÙiÚCom³n§tiÚ
Ð
pcCU
, 
m_µcYuvReco
[
uiD•th
] );

445 #ià
DEBUG_STRING


446 cÚ¡ 
IÁ
 
debugP»dModeMask
=
	`DebugSŒšgG‘P»dModeMask
(
MODE_INTER
);

447 ià(
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
	`g‘IÁ
()&
debugP»dModeMask
)

449 
	`´štBlockToSŒ—m
(
¡d
::
cout
, "###š‹r-´ed: ", *(
m_µcYuvReco
[
uiD•th
]));

454 
	`xDecodeIÁ”Textu»
Ð
pcCU
, 
uiD•th
 );

456 #ià
DEBUG_STRING


457 ià(
DebugO±iÚLi¡
::
DebugSŒšg_Resi
.
	`g‘IÁ
()&
debugP»dModeMask
)

459 
	`´štBlockToSŒ—m
(
¡d
::
cout
, "###š‹r-»si: ", *(
m_µcYuvResi
[
uiD•th
]));

464 iàÐ
pcCU
->
	`g‘QtRoÙCbf
( 0) )

466 
m_µcYuvReco
[
uiD•th
]->
	`addCl
Ðm_µcYuvReco[uiD•th], 
m_µcYuvResi
[uiD•th], 0, 
pcCU
->
	`g‘Width
Ð0 ),…cCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
() );

470 
m_µcYuvReco
[
uiD•th
]->
	`cÝyP¬tToP¬tYuv
Ðm_µcYuvReco[uiD•th],0, 
pcCU
->
	`g‘Width
Ð0 ),pcCU->
	`g‘Height
( 0 ));

472 #ià
DEBUG_STRING


473 ià(
DebugO±iÚLi¡
::
DebugSŒšg_Reco
.
	`g‘IÁ
()&
debugP»dModeMask
)

475 
	`´štBlockToSŒ—m
(
¡d
::
cout
, "###š‹r-»co: ", *(
m_µcYuvReco
[
uiD•th
]));

479 
	}
}

482 
Void


483 
	gTDecCu
::
	$xIÁ¿RecBlk
Ð
TComYuv
* 
pcRecoYuv
,

484 
TComYuv
* 
pcP»dYuv
,

485 
TComYuv
* 
pcResiYuv
,

486 cÚ¡ 
CompÚ’tID
 
compID
,

487 
TComTU
 &
rTu
)

489 ià(!
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

493 cÚ¡ 
BoÞ
 
bIsLuma
 = 
	`isLuma
(
compID
);

496 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

497 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

498 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

500 cÚ¡ 
TComReùªgË
 &
tuReù
 =
rTu
.
	`g‘Reù
(
compID
);

501 cÚ¡ 
UIÁ
 
uiWidth
 = 
tuReù
.
width
;

502 cÚ¡ 
UIÁ
 
uiHeight
 = 
tuReù
.
height
;

503 cÚ¡ 
UIÁ
 
uiSŒide
 = 
pcRecoYuv
->
	`g‘SŒide
 (
compID
);

504 
P–
* 
piP»d
 = 
pcP»dYuv
->
	`g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

505 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
rTu
.
	`G‘ChromaFÜm©
();

507 ià(
uiWidth
 !ð
uiHeight
)

513 
TComTURecur£
 
	`subTURecur£
(
rTu
, 
çl£
, 
TComTU
::
VERTICAL_SPLIT
, 
Œue
, 
compID
);

518 
	`xIÁ¿RecBlk
(
pcRecoYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
compID
, 
subTURecur£
);

519 } 
subTURecur£
.
	`ÃxtSeùiÚ
(
rTu
));

526 cÚ¡ 
UIÁ
 
uiChP»dMode
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
	`toChªÃlTy³
(
compID
), 
uiAbsP¬tIdx
 );

527 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
.
	`g‘MaxTÙ®CUD•th
(è- sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

528 cÚ¡ 
UIÁ
 
uiChCodedMode
 = (
uiChP»dMode
==
DM_CHROMA_IDX
 && !
bIsLuma
è? 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
chFmt
, 
·¹sP”MšCU
)) : uiChPredMode;

529 cÚ¡ 
UIÁ
 
uiChFš®Mode
 = ((
chFmt
 =ð
CHROMA_422
è&& !
bIsLuma
è? 
g_chroma422IÁ¿AngËM­pšgTabË
[
uiChCodedMode
] : uiChCodedMode;

532 cÚ¡ 
BoÞ
 
bU£Fž‹»dP»diùiÚs
=
TComP»diùiÚ
::
	`fž‹ršgIÁ¿Reã»nûSam¶es
(
compID
, 
uiChFš®Mode
, 
uiWidth
, 
uiHeight
, 
chFmt
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘IÁ¿SmoÙhšgDi§bËdFÏg
());

534 #ià
DEBUG_STRING


535 
¡d
::
o¡»am
 &
	`ss
(¡d::
cout
);

538 
	`DEBUG_STRING_NEW
(
sTemp
)

539 
m_pcP»diùiÚ
->
	`š™IÁ¿P©‹ºChTy³
Ð
rTu
, 
compID
, 
bU£Fž‹»dP»diùiÚs
 
	`DEBUG_STRING_PASS_INTO
(
sTemp
) );

544 
m_pcP»diùiÚ
->
	`´edIÁ¿Ang
Ð
compID
, 
uiChFš®Mode
, 0 , 0, 
piP»d
, 
uiSŒide
, 
rTu
, 
bU£Fž‹»dP»diùiÚs
 );

546 #ià
DEBUG_STRING


547 
ss
 << 
sTemp
;

551 
P–
* 
piResi
 = 
pcResiYuv
->
	`g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

552 
TCÛff
* 
pcCÛff
 = 
pcCU
->
	`g‘CÛff
(
compID
è+ 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

554 cÚ¡ 
QpP¬am
 
	`cQP
(*
pcCU
, 
compID
);

557 
	`DEBUG_STRING_NEW
(
sDebug
);

558 #ià
DEBUG_STRING


559 cÚ¡ 
IÁ
 
debugP»dModeMask
=
	`DebugSŒšgG‘P»dModeMask
(
MODE_INTRA
);

560 
¡d
::
¡ršg
 *
psDebug
=(
DebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
.
	`g‘IÁ
()&
debugP»dModeMask
è? &
sDebug
 : 0;

563 ià(
pcCU
->
	`g‘Cbf
(
uiAbsP¬tIdx
, 
compID
, 
rTu
.
	`G‘T¿nsfÜmD•thR–
()) != 0)

565 
m_pcTrQuªt
->
	`švT¿nsfÜmNxN
Ð
rTu
, 
compID
, 
piResi
, 
uiSŒide
, 
pcCÛff
, 
cQP
 
	`DEBUG_STRING_PASS_INTO
(
psDebug
) );

569 
UIÁ
 
y
 = 0; y < 
uiHeight
; y++)

571 
UIÁ
 
x
 = 0; x < 
uiWidth
; x++)

573 
piResi
[(
y
 * 
uiSŒide
è+ 
x
] = 0;

578 #ià
DEBUG_STRING


579 ià(
psDebug
)

581 
ss
 << (*
psDebug
);

586 cÚ¡ 
UIÁ
 
uiRecIP»dSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
compID
);

588 cÚ¡ 
BoÞ
 
u£CrossCompÚ’tP»diùiÚ
 = 
	`isChroma
(
compID
è&& (
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
uiAbsP¬tIdx
, compID) != 0);

589 cÚ¡ 
P–
* 
pResiLuma
 = 
pcResiYuv
->
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 );

590 cÚ¡ 
IÁ
 
¡rideLuma
 = 
pcResiYuv
->
	`g‘SŒide
Ð
COMPONENT_Y
 );

592 
P–
* 
pP»d
 = 
piP»d
;

593 
P–
* 
pResi
 = 
piResi
;

594 
P–
* 
pReco
 = 
pcRecoYuv
->
	`g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

595 
P–
* 
pRecIP»d
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
compID
,…cCU->
	`g‘CtuRsAddr
(),…cCU->
	`g‘ZÜd”IdxInCtu
(è+ 
uiAbsP¬tIdx
 );

598 #ià
DEBUG_STRING


599 cÚ¡ 
BoÞ
 
bDebugP»d
=((
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
	`g‘IÁ
()&
debugP»dModeMask
è&& 
	`DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

600 cÚ¡ 
BoÞ
 
bDebugResi
=((
DebugO±iÚLi¡
::
DebugSŒšg_Resi
.
	`g‘IÁ
()&
debugP»dModeMask
è&& 
	`DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

601 cÚ¡ 
BoÞ
 
bDebugReco
=((
DebugO±iÚLi¡
::
DebugSŒšg_Reco
.
	`g‘IÁ
()&
debugP»dModeMask
è&& 
	`DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

602 ià(
bDebugP»d
 || 
bDebugResi
 || 
bDebugReco
)

604 
ss
 << "###: " << "CompID: " << 
compID
 << "…»d mod(ch/fš): " << 
uiChP»dMode
 << "/" << 
uiChFš®Mode
 << "‡bsP¬tIdx: " << 
rTu
.
	`G‘AbsP¬tIdxTU
(è<< 
¡d
::
’dl
;

608 cÚ¡ 
IÁ
 
þbd
 = 
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

609 #ià
O0043_BEST_EFFORT_DECODING


610 cÚ¡ 
IÁ
 
b™D•thD–
 = 
¥s
.
	`g‘SŒ—mB™D•th
(
	`toChªÃlTy³
(
compID
)è- 
þbd
;

613 ifÐ
u£CrossCompÚ’tP»diùiÚ
 )

615 
TComTrQuªt
::
	`üossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
, 
pResiLuma
, 
piResi
,…iResi, 
uiWidth
, 
uiHeight
, 
¡rideLuma
, 
uiSŒide
, uiSŒide, 
Œue
 );

618  
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

620 #ià
DEBUG_STRING


621 ià(
bDebugP»d
 || 
bDebugResi
 || 
bDebugReco
)

623 
ss
 << "###: ";

626 ià(
bDebugP»d
)

628 
ss
 << " -…red: ";

629  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

631 
ss
 << 
pP»d
[ 
uiX
 ] << ", ";

634 ià(
bDebugResi
)

636 
ss
 << " -„esi: ";

640  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

642 #ià
DEBUG_STRING


643 ià(
bDebugResi
)

645 
ss
 << 
pResi
[ 
uiX
 ] << ", ";

648 #ià
O0043_BEST_EFFORT_DECODING


649 
pReco
 [ 
uiX
 ] = 
	`ClBD
Ð
rightShiáEv’Roundšg
<
P–
>(
pP»d
[ uiX ] + 
pResi
[ uiX ], 
b™D•thD–
), 
þbd
 );

651 
pReco
 [ 
uiX
 ] = 
	`ClBD
Ð
pP»d
[ uiX ] + 
pResi
[ uiX ], 
þbd
 );

653 
pRecIP»d
[ 
uiX
 ] = 
pReco
[ uiX ];

655 #ià
DEBUG_STRING


656 ià(
bDebugReco
)

658 
ss
 << " -„eco: ";

659  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

661 
ss
 << 
pReco
[ 
uiX
 ] << ", ";

665 ià(
bDebugP»d
 || 
bDebugResi
 || 
bDebugReco
)

667 
ss
 << "\n";

670 
pP»d
 +ð
uiSŒide
;

671 
pResi
 +ð
uiSŒide
;

672 
pReco
 +ð
uiSŒide
;

673 
pRecIP»d
 +ð
uiRecIP»dSŒide
;

675 
	}
}

678 
Void


679 
	gTDecCu
::
	$xRecÚIÁ¿QT
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 )

681 ià(
pcCU
->
	`g‘IPCMFÏg
(0))

683 
	`xRecÚPCM
Ð
pcCU
, 
uiD•th
 );

686 cÚ¡ 
UIÁ
 
numChTy³
 = 
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()!=
CHROMA_400
 ? 2 : 1;

687 
UIÁ
 
chTy³
=
CHANNEL_TYPE_LUMA
; chTy³<
numChTy³
; chType++)

689 cÚ¡ 
ChªÃlTy³
 
chªTy³
=
	`ChªÃlTy³
(
chTy³
);

690 cÚ¡ 
BoÞ
 
NxNPUHas4P¬ts
 = ::
	`isChroma
(
chªTy³
è? 
	`’abË4ChromaPUsInIÁ¿NxNCU
(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()è: 
Œue
;

691 cÚ¡ 
UIÁ
 
uiIn™TrD•th
 = ( 
pcCU
->
	`g‘P¬t™iÚSize
(0è!ð
SIZE_2Nx2N
 && 
NxNPUHas4P¬ts
 ? 1 : 0 );

693 
TComTURecur£
 
	`tuRecur£CU
(
pcCU
, 0);

694 
TComTURecur£
 
	`tuRecur£W™hPU
(
tuRecur£CU
, 
çl£
, (
uiIn™TrD•th
==0)?
TComTU
::
DONT_SPLIT
 : TComTU::
QUAD_SPLIT
);

698 
	`xIÁ¿RecQT
Ð
m_µcYuvReco
[
uiD•th
], m_µcYuvReco[uiD•th], 
m_µcYuvResi
[uiD•th], 
chªTy³
, 
tuRecur£W™hPU
 );

699 } 
tuRecur£W™hPU
.
	`ÃxtSeùiÚ
(
tuRecur£CU
));

701 
	}
}

715 
Void


716 
	gTDecCu
::
	$xIÁ¿RecQT
(
TComYuv
* 
pcRecoYuv
,

717 
TComYuv
* 
pcP»dYuv
,

718 
TComYuv
* 
pcResiYuv
,

719 cÚ¡ 
ChªÃlTy³
 
chTy³
,

720 
TComTU
 &
rTu
)

722 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

723 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

724 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

725 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

726 ifÐ
uiTrMode
 =ð
uiTrD•th
 )

728 ià(
	`isLuma
(
chTy³
))

730 
	`xIÁ¿RecBlk
Ð
pcRecoYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
COMPONENT_Y
, 
rTu
 );

734 cÚ¡ 
UIÁ
 
numV®idComp
=
	`g‘Numb”V®idCompÚ’ts
(
rTu
.
	`G‘ChromaFÜm©
());

735 
UIÁ
 
compID
=
COMPONENT_Cb
; compID<
numV®idComp
; compID++)

737 
	`xIÁ¿RecBlk
Ð
pcRecoYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
	`CompÚ’tID
(
compID
), 
rTu
 );

743 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

746 
	`xIÁ¿RecQT
Ð
pcRecoYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
chTy³
, 
tuRecur£Chžd
 );

747 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

749 
	}
}

751 
Void
 
	gTDecCu
::
	$xCÝyToPic
Ð
TComD©aCU
* 
pcCU
, 
TComPic
* 
pcPic
, 
UIÁ
 
uiZÜd”Idx
, UIÁ 
uiD•th
 )

753 
UIÁ
 
uiCtuRsAddr
 = 
pcCU
->
	`g‘CtuRsAddr
();

755 
m_µcYuvReco
[
uiD•th
]->
	`cÝyToPicYuv
 ( 
pcPic
->
	`g‘PicYuvRec
 (), 
uiCtuRsAddr
, 
uiZÜd”Idx
 );

758 
	}
}

760 
Void
 
	gTDecCu
::
	$xDecodeIÁ”Textu»
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 )

763 
TComTURecur£
 
	`tuRecur
(
pcCU
, 0, 
uiD•th
);

765 
UIÁ
 
ch
=0; ch<
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

767 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

768 
	`DEBUG_STRING_OUTPUT
(
¡d
::
cout
, 
debug_»Üd”_d©a_š‹r_tok’
[
compID
])

770 
m_pcTrQuªt
->
	`švRecurT¿nsfÜmNxN
 ( 
compID
, 
m_µcYuvResi
[
uiD•th
], 
tuRecur
 );

773 
	`DEBUG_STRING_OUTPUT
(
¡d
::
cout
, 
debug_»Üd”_d©a_š‹r_tok’
[
MAX_NUM_COMPONENT
])

774 
	}
}

787 
Void
 
	gTDecCu
::
	$xDecodePCMTextu»
Ð
TComD©aCU
* 
pcCU
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ 
P–
 *
piPCM
, P–* 
piReco
, cÚ¡ UIÁ 
uiSŒide
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
)

789 
P–
* 
piPicReco
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
(
compID
,…cCU->
	`g‘CtuRsAddr
(),…cCU->
	`g‘ZÜd”IdxInCtu
()+
uiP¬tIdx
);

790 cÚ¡ 
UIÁ
 
uiPicSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
compID
);

791 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

792 cÚ¡ 
UIÁ
 
uiPcmLeáShiáB™
 = 
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
)è- sps.
	`g‘PCMB™D•th
(toChannelType(compID));

794 
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

796 
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

798 
piReco
[
uiX
] = (
piPCM
[uiX] << 
uiPcmLeáShiáB™
);

799 
piPicReco
[
uiX
] = 
piReco
[uiX];

801 
piPCM
 +ð
uiWidth
;

802 
piReco
 +ð
uiSŒide
;

803 
piPicReco
 +ð
uiPicSŒide
;

805 
	}
}

812 
Void
 
	gTDecCu
::
	$xRecÚPCM
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 )

814 cÚ¡ 
UIÁ
 
maxCuWidth
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
();

815 cÚ¡ 
UIÁ
 
maxCuHeight
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
();

816 
UIÁ
 
ch
=0; ch < 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

818 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

819 cÚ¡ 
UIÁ
 
width
 = (
maxCuWidth
 >>(
uiD•th
+
m_µcYuvResi
[uiD•th]->
	`g‘CompÚ’tSÿËX
(
compID
)));

820 cÚ¡ 
UIÁ
 
height
 = (
maxCuHeight
>>(
uiD•th
+
m_µcYuvResi
[uiD•th]->
	`g‘CompÚ’tSÿËY
(
compID
)));

821 cÚ¡ 
UIÁ
 
¡ride
 = 
m_µcYuvResi
[
uiD•th
]->
	`g‘SŒide
(
compID
);

822 
P–
 * 
pPCMChªÃl
 = 
pcCU
->
	`g‘PCMSam¶e
(
compID
);

823 
P–
 * 
pRecChªÃl
 = 
m_µcYuvReco
[
uiD•th
]->
	`g‘Addr
(
compID
);

824 
	`xDecodePCMTextu»
Ð
pcCU
, 0, 
pPCMChªÃl
, 
pRecChªÃl
, 
¡ride
, 
width
, 
height
, 
compID
 );

826 
	}
}

832 
Void
 
	gTDecCu
::
	$xFžlPCMBufãr
(
TComD©aCU
* 
pCU
, 
UIÁ
 
d•th
)

834 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
pCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

835 cÚ¡ 
UIÁ
 
numV®idComp
 = 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
);

836 cÚ¡ 
UIÁ
 
maxCuWidth
 = 
pCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
();

837 cÚ¡ 
UIÁ
 
maxCuHeight
 = 
pCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
();

839 
UIÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
numV®idComp
; componentIndex++)

841 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

843 cÚ¡ 
UIÁ
 
width
 = 
maxCuWidth
 >> (
d•th
 + 
	`g‘CompÚ’tSÿËX
(
compÚ’t
, 
fÜm©
));

844 cÚ¡ 
UIÁ
 
height
 = 
maxCuHeight
 >> (
d•th
 + 
	`g‘CompÚ’tSÿËY
(
compÚ’t
, 
fÜm©
));

846 
P–
 *
sourû
 = 
m_µcYuvReco
[
d•th
]->
	`g‘Addr
(
compÚ’t
, 0, 
width
);

847 
P–
 *
de¡š©iÚ
 = 
pCU
->
	`g‘PCMSam¶e
(
compÚ’t
);

849 cÚ¡ 
UIÁ
 
sourûSŒide
 = 
m_µcYuvReco
[
d•th
]->
	`g‘SŒide
(
compÚ’t
);

851 
IÁ
 
lše
 = 0;†š< 
height
;†ine++)

853 
IÁ
 
cÞumn
 = 0; cÞumÀ< 
width
; column++)

855 
de¡š©iÚ
[
cÞumn
] = 
sourû
[column];

858 
sourû
 +ð
sourûSŒide
;

859 
de¡š©iÚ
 +ð
width
;

862 
	}
}

	@source/Lib/TLibDecoder/TDecCu.h

38 #iâdeà
__TDECCU__


39 
	#__TDECCU__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/TComTrQuªt.h
"

46 
	~"TDecEÁrÝy.h
"

47 
	~"TDecCÚfÜmªû.h
"

57 þas 
	cTDecCu


59 
	m´iv©e
:

60 
UIÁ
 
m_uiMaxD•th
;

61 
TComYuv
** 
	mm_µcYuvResi
;

62 
TComYuv
** 
	mm_µcYuvReco
;

63 
TComD©aCU
** 
	mm_µcCU
;

66 
TComTrQuªt
* 
	mm_pcTrQuªt
;

67 
TComP»diùiÚ
* 
	mm_pcP»diùiÚ
;

68 
TDecEÁrÝy
* 
	mm_pcEÁrÝyDecod”
;

69 #ià
MCTS_ENC_CHECK


70 
TDecCÚfÜmªûCheck
* 
	mm_pCÚfÜmªûCheck
;

73 
BoÞ
 
	mm_bDecodeDQP
;

74 
BoÞ
 
	mm_IsChromaQpAdjCoded
;

76 
	mpublic
:

77 
TDecCu
();

78 
	mvœtu®
 ~
TDecCu
();

81 #ià
MCTS_ENC_CHECK


82 
Void
 
š™
 (
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TComTrQuªt
* 
pcTrQuªt
, 
TComP»diùiÚ
* 
pcP»diùiÚ
, 
TDecCÚfÜmªûCheck
* 
pCÚfÜmªûCheck
);

84 
Void
 
š™
 ( 
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TComTrQuªt
* 
pcTrQuªt
, 
TComP»diùiÚ
* 
pcP»diùiÚ
 );

88 
Void
 
ü—‹
 ( 
UIÁ
 
uiMaxD•th
, UIÁ 
uiMaxWidth
, UIÁ 
uiMaxHeight
, 
ChromaFÜm©
 
chromaFÜm©IDC
 );

91 
Void
 
de¡roy
 ();

94 
Void
 
decodeCtu
 ( 
TComD©aCU
* 
pCtu
, 
BoÞ
 &
isLa¡CtuOfSliûSegm’t
 );

97 
Void
 
decom´essCtu
 ( 
TComD©aCU
* 
pCtu
 );

99 
	m´Ùeùed
:

101 
Void
 
xDecodeCU
 ( 
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
, cÚ¡ UIÁ 
uiD•th
, 
BoÞ
 &
isLa¡CtuOfSliûSegm’t
);

102 
Void
 
xFšishDecodeCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 &
isLa¡CtuOfSliûSegm’t
);

103 
BoÞ
 
xDecodeSliûEnd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

104 
Void
 
xDecom´essCU
 ( 
TComD©aCU
* 
pCtu
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

106 
Void
 
xRecÚIÁ”
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 );

108 
Void
 
xRecÚIÁ¿QT
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 );

109 
Void
 
xIÁ¿RecBlk
 ( 
TComYuv
* 
pcRecoYuv
, TComYuv* 
pcP»dYuv
, TComYuv* 
pcResiYuv
, cÚ¡ 
CompÚ’tID
 
compÚ’t
, 
TComTU
 &
rTu
 );

110 
Void
 
xIÁ¿RecQT
 ( 
TComYuv
* 
pcRecoYuv
, TComYuv* 
pcP»dYuv
, TComYuv* 
pcResiYuv
, cÚ¡ 
ChªÃlTy³
 
chTy³
, 
TComTU
 &
rTu
 );

112 
Void
 
xRecÚPCM
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 );

114 
Void
 
xDecodeIÁ”Textu»
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 );

115 
Void
 
xDecodePCMTextu»
 ( 
TComD©aCU
* 
pcCU
, cÚ¡ 
UIÁ
 
uiP¬tIdx
, cÚ¡ 
P–
 *
piPCM
, P–* 
piReco
, cÚ¡ UIÁ 
uiSŒide
, cÚ¡ UIÁ 
uiWidth
, cÚ¡ UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
);

117 
Void
 
xCÝyToPic
 ( 
TComD©aCU
* 
pcCU
, 
TComPic
* 
pcPic
, 
UIÁ
 
uiZÜd”Idx
, UIÁ 
uiD•th
 );

119 
BoÞ
 
	$g‘dQPFÏg
 (è{  
m_bDecodeDQP
; }

120 
Void
 
	$£tdQPFÏg
 ( 
BoÞ
 
b
 ) { 
m_bDecodeDQP
 = b; 
	}
}

121 
BoÞ
 
	$g‘IsChromaQpAdjCoded
 (è{  
m_IsChromaQpAdjCoded
; 
	}
}

122 
Void
 
	$£tIsChromaQpAdjCoded
 ( 
BoÞ
 
b
 ) { 
m_IsChromaQpAdjCoded
 = b; 
	}
}

124 
Void
 
xFžlPCMBufãr
 (
TComD©aCU
* 
pCU
, 
UIÁ
 
d•th
);

	@source/Lib/TLibDecoder/TDecEntropy.cpp

38 
	~"TDecEÁrÝy.h
"

39 
	~"TLibCommÚ/TComTU.h
"

40 
	~"TLibCommÚ/TComP»diùiÚ.h
"

42 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


43 
	~"../TLibCommÚ/Debug.h
"

44 cÚ¡ 
BoÞ
 
	gbDebugRQT
 = 
DebugO±iÚLi¡
::
DebugRQT
.
g‘IÁ
()!=0;

45 cÚ¡ 
BoÞ
 
	gbDebugP»dEÇbËd
 = 
DebugO±iÚLi¡
::
DebugP»d
.
g‘IÁ
()!=0;

51 
Void
 
	gTDecEÁrÝy
::
	$£tEÁrÝyDecod”
 ( 
TDecEÁrÝyIf
* 
p
 )

53 
m_pcEÁrÝyDecod”If
 = 
p
;

54 
	}
}

56 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

58 
Void
 
	gTDecEÁrÝy
::
	$decodeSkFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

60 
m_pcEÁrÝyDecod”If
->
	`·r£SkFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

61 
	}
}

64 
Void
 
	gTDecEÁrÝy
::
	$decodeCUT¿nsquªtBy·ssFÏg
(
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

66 
m_pcEÁrÝyDecod”If
->
	`·r£CUT¿nsquªtBy·ssFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

67 
	}
}

77 
Void
 
	gTDecEÁrÝy
::
	$decodeM”geFÏg
Ð
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 )

80 
m_pcEÁrÝyDecod”If
->
	`·r£M”geFÏg
Ð
pcSubCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
uiPUIdx
 );

81 
	}
}

90 
Void
 
	gTDecEÁrÝy
::
	$decodeM”geIndex
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiP¬tIdx
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

92 
UIÁ
 
uiM”geIndex
 = 0;

93 
m_pcEÁrÝyDecod”If
->
	`·r£M”geIndex
Ð
pcCU
, 
uiM”geIndex
 );

94 
pcCU
->
	`£tM”geIndexSubP¬ts
Ð
uiM”geIndex
, 
uiAbsP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
 );

95 
	}
}

97 
Void
 
	gTDecEÁrÝy
::
	$decodeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

99 
m_pcEÁrÝyDecod”If
->
	`·r£S¶™FÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

100 
	}
}

102 
Void
 
	gTDecEÁrÝy
::
	$decodeP»dMode
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

104 
m_pcEÁrÝyDecod”If
->
	`·r£P»dMode
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

105 
	}
}

107 
Void
 
	gTDecEÁrÝy
::
	$decodeP¬tSize
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

109 
m_pcEÁrÝyDecod”If
->
	`·r£P¬tSize
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

110 
	}
}

112 
Void
 
	gTDecEÁrÝy
::
	$decodeP»dInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, TComD©aCU* 
pcSubCU
 )

114 ifÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

116 
	`decodeIÁ¿DœModeLuma
 ( 
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

117 ià(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()!=
CHROMA_400
)

119 
	`decodeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

120 ià(
	`’abË4ChromaPUsInIÁ¿NxNCU
(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()è&&…cCU->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 )==
SIZE_NxN
)

122 
UIÁ
 
uiP¬tOff£t
 = ( 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> (…cCU->
	`g‘D•th
(
uiAbsP¬tIdx
) << 1 ) ) >> 2;

123 
	`decodeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
, 
uiD•th
+1 );

124 
	`decodeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
*2, 
uiD•th
+1 );

125 
	`decodeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
*3, 
uiD•th
+1 );

131 
	`decodePUWi£
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
pcSubCU
 );

133 
	}
}

141 
Void
 
	gTDecEÁrÝy
::
	$decodeIPCMInfo
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

143 if(!
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£PCM
()

144 || 
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è> (1<<pcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMLog2MaxSize
())

145 || 
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è< (1<<pcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMLog2MšSize
()) )

150 
m_pcEÁrÝyDecod”If
->
	`·r£IPCMInfo
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

151 
	}
}

153 
Void
 
	gTDecEÁrÝy
::
	$decodeIÁ¿DœModeLuma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

155 
m_pcEÁrÝyDecod”If
->
	`·r£IÁ¿DœLumaAng
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

156 
	}
}

158 
Void
 
	gTDecEÁrÝy
::
	$decodeIÁ¿DœModeChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

160 
m_pcEÁrÝyDecod”If
->
	`·r£IÁ¿DœChroma
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

161 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


162 ià(
bDebugP»dEÇbËd
)

164 
UIÁ
 
cdœ
=
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_CHROMA
, 
uiAbsP¬tIdx
);

165 ià(
cdœ
==36)

167 
cdœ
=
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
uiAbsP¬tIdx
);

169 
	`´štf
("codšg chrom¨IÁ¿ dœ: %d, uiAbsP¬tIdx: %d,†um¨dœ: %d\n", 
cdœ
, 
uiAbsP¬tIdx
, 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, uiAbsPartIdx));

172 
	}
}

182 
Void
 
	gTDecEÁrÝy
::
	$decodePUWi£
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, TComD©aCU* 
pcSubCU
 )

184 
P¬tSize
 
eP¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 );

185 
UIÁ
 
uiNumPU
 = ( 
eP¬tSize
 =ð
SIZE_2Nx2N
 ? 1 : (ƒP¬tSiz=ð
SIZE_NxN
 ? 4 : 2 ) );

186 
UIÁ
 
uiPUOff£t
 = ( 
g_auiPUOff£t
[
	`UIÁ
Ð
eP¬tSize
 )] << ( ( 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTÙ®CUD•th
(è- 
uiD•th
 ) << 1 ) ) >> 4;

188 
TComMvF›ld
 
cMvF›ldNeighbours
[
MRG_MAX_NUM_CANDS
 << 1];

189 
UCh¬
 
uhIÁ”DœNeighbours
[
MRG_MAX_NUM_CANDS
];

191  
UIÁ
 
ui
 = 0; u˜< 
pcCU
->
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
(); ui++ )

193 
uhIÁ”DœNeighbours
[
ui
] = 0;

195 
IÁ
 
numV®idM”geCªd
 = 0;

196 
BoÞ
 
hasM”gedCªdLi¡
 = 
çl£
;

198 #ià
MCTS_ENC_CHECK


199 
UIÁ
 
numS·tŸlM”geCªdid©es
 = 0;

201 
pcSubCU
->
	`cÝyIÁ”P»dInfoFrom
Ð
pcCU
, 
uiAbsP¬tIdx
, 
REF_PIC_LIST_0
 );

202 
pcSubCU
->
	`cÝyIÁ”P»dInfoFrom
Ð
pcCU
, 
uiAbsP¬tIdx
, 
REF_PIC_LIST_1
 );

203  
UIÁ
 
uiP¬tIdx
 = 0, 
uiSubP¬tIdx
 = 
uiAbsP¬tIdx
; uiP¬tIdx < 
uiNumPU
; uiP¬tIdx++, uiSubP¬tIdx +ð
uiPUOff£t
 )

205 
	`decodeM”geFÏg
Ð
pcCU
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

206 iàÐ
pcCU
->
	`g‘M”geFÏg
Ð
uiSubP¬tIdx
 ) )

208 
	`decodeM”geIndex
Ð
pcCU
, 
uiP¬tIdx
, 
uiSubP¬tIdx
, 
uiD•th
 );

209 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


210 ià(
bDebugP»dEÇbËd
)

212 
¡d
::
cout
 << "Coded m”gæag, CU‡bsP¬tIdx: " << 
uiAbsP¬tIdx
 << " PU(" << 
uiP¬tIdx
 << "èabsP¬tIdx: " << 
uiSubP¬tIdx
;

213 
¡d
::
cout
 << " m”gšdex: " << (
UIÁ
)
pcCU
->
	`g‘M”geIndex
(
uiSubP¬tIdx
è<< std::
’dl
;

217 cÚ¡ 
UIÁ
 
uiM”geIndex
 = 
pcCU
->
	`g‘M”geIndex
(
uiSubP¬tIdx
);

218 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘Log2P¬®ËlM”geLev–Mšus2
(è&& 
eP¬tSize
 !ð
SIZE_2Nx2N
 && 
pcSubCU
->
	`g‘Width
( 0 ) <= 8 )

220 iàÐ!
hasM”gedCªdLi¡
 )

222 
pcSubCU
->
	`£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 0, 
uiD•th
 );

223 #ià
MCTS_ENC_CHECK


224 
numS·tŸlM”geCªdid©es
 = 0;

225 
pcSubCU
->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
 );

227 
pcSubCU
->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
 );

229 
pcSubCU
->
	`£tP¬tSizeSubP¬ts
Ð
eP¬tSize
, 0, 
uiD•th
 );

230 
hasM”gedCªdLi¡
 = 
Œue
;

235 #ià
MCTS_ENC_CHECK


236 
numS·tŸlM”geCªdid©es
 = 0;

237 
pcSubCU
->
	`g‘IÁ”M”geCªdid©es
Ð
uiSubP¬tIdx
-
uiAbsP¬tIdx
, 
uiP¬tIdx
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
, 
uiM”geIndex
 );

239 
pcSubCU
->
	`g‘IÁ”M”geCªdid©es
Ð
uiSubP¬tIdx
-
uiAbsP¬tIdx
, 
uiP¬tIdx
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
uiM”geIndex
 );

243 #ià
MCTS_ENC_CHECK


244 ià(
m_pCÚfÜmªûCheck
->
	`g‘TMùsCheck
(è&& 
pcSubCU
->
	`isLa¡CÞumnCTUInTže
(è&& (
uiM”geIndex
 >ð
numS·tŸlM”geCªdid©es
) )

246 
m_pCÚfÜmªûCheck
->
	`æagTMùsE¼Ü
("Merge Index using‚on-spatial merge candidate (Merge)");

250 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð
uhIÁ”DœNeighbours
[
uiM”geIndex
], 
uiSubP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
 );

252 
TComMv
 
	`cTmpMv
( 0, 0 );

253  
UIÁ
 
uiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

255 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) ) > 0 )

257 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð0, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiSubP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
);

258 
pcCU
->
	`£tMVPNumSubP¬ts
Ð0, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiSubP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
);

259 
pcCU
->
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`£tAÎMvd
Ð
cTmpMv
, 
eP¬tSize
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

260 
pcCU
->
	`g‘CUMvF›ld
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) )->
	`£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[ 2*
uiM”geIndex
 + uiRefLi¡Idx ], 
eP¬tSize
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

267 
	`decodeIÁ”DœPU
Ð
pcCU
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

268  
UIÁ
 
uiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

270 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) ) > 0 )

272 
	`decodeRefFrmIdxPU
Ð
pcCU
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

273 
	`decodeMvdPU
 ( 
pcCU
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

274 
	`decodeMVPIdxPU
 ( 
pcSubCU
, 
uiSubP¬tIdx
-
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

275 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


276 ià(
bDebugP»dEÇbËd
)

278 
¡d
::
cout
 << "»fLi¡Idx: " << 
uiRefLi¡Idx
 << std::
’dl
;

279 
¡d
::
cout
 << "MVD hÜizÚl: " << 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
uiRefLi¡Idx
))->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘HÜ
(è<< std::
’dl
;

280 
¡d
::
cout
 << "MVD v”tiÿl: " << 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
uiRefLi¡Idx
))->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘V”
(è<< std::
’dl
;

281 
¡d
::
cout
 << "MVPIdxPU: " << 
pcCU
->
	`g‘MVPIdx
(
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiSubP¬tIdx
è<< std::
’dl
;

282 
¡d
::
cout
 << "IÁ”Dœ: " << (
UIÁ
)
pcCU
->
	`g‘IÁ”Dœ
(
uiSubP¬tIdx
è<< std::
’dl
;

289 iàÐ(
pcCU
->
	`g‘IÁ”Dœ
(
uiSubP¬tIdx
è=ð3è&& 
pcSubCU
->
	`isB»dRe¡riùiÚ
(
uiP¬tIdx
) )

291 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎMv
Ð
	`TComMv
(0,0), 
eP¬tSize
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
);

292 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎRefIdx
Ð-1, 
eP¬tSize
, 
uiSubP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
);

293 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð1, 
uiSubP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
);

297 
	}
}

306 
Void
 
	gTDecEÁrÝy
::
	$decodeIÁ”DœPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
 )

308 
UIÁ
 
uiIÁ”Dœ
;

310 iàÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ”P
() )

312 
uiIÁ”Dœ
 = 1;

316 
m_pcEÁrÝyDecod”If
->
	`·r£IÁ”Dœ
Ð
pcCU
, 
uiIÁ”Dœ
, 
uiAbsP¬tIdx
 );

319 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð
uiIÁ”Dœ
, 
uiAbsP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
 );

320 
	}
}

322 
Void
 
	gTDecEÁrÝy
::
	$decodeRefFrmIdxPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

324 
IÁ
 
iRefFrmIdx
 = 0;

325 
IÁ
 
iP¬£RefFrmIdx
 = 
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
eRefLi¡
 );

327 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
eRefLi¡
 ) > 1 && 
iP¬£RefFrmIdx
 )

329 
m_pcEÁrÝyDecod”If
->
	`·r£RefFrmIdx
Ð
pcCU
, 
iRefFrmIdx
, 
eRefLi¡
 );

331 iàÐ!
iP¬£RefFrmIdx
 )

333 
iRefFrmIdx
 = 
NOT_VALID
;

337 
iRefFrmIdx
 = 0;

340 
P¬tSize
 
eP¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 );

341 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 )->
	`£tAÎRefIdx
Ð
iRefFrmIdx
, 
eP¬tSize
, 
uiAbsP¬tIdx
, 
uiD•th
, 
uiP¬tIdx
 );

342 
	}
}

352 
Void
 
	gTDecEÁrÝy
::
	$decodeMvdPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

354 iàÐ
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
eRefLi¡
 ) )

356 
m_pcEÁrÝyDecod”If
->
	`·r£Mvd
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiP¬tIdx
, 
uiD•th
, 
eRefLi¡
 );

358 
	}
}

360 
Void
 
	gTDecEÁrÝy
::
	$decodeMVPIdxPU
Ð
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiP¬tAddr
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

362 
IÁ
 
iMVPIdx
 = -1;

364 
TComMv
 
	`cZ”oMv
( 0, 0 );

365 
TComMv
 
cMv
 = 
cZ”oMv
;

366 
IÁ
 
iRefIdx
 = -1;

368 
TComCUMvF›ld
* 
pcSubCUMvF›ld
 = 
pcSubCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 );

369 
AMVPInfo
* 
pAMVPInfo
 = 
pcSubCUMvF›ld
->
	`g‘AMVPInfo
();

371 
iRefIdx
 = 
pcSubCUMvF›ld
->
	`g‘RefIdx
(
uiP¬tAddr
);

372 
cMv
 = 
cZ”oMv
;

374 iàÐ(
pcSubCU
->
	`g‘IÁ”Dœ
(
uiP¬tAddr
è& ( 1 << 
eRefLi¡
 )) )

376 
m_pcEÁrÝyDecod”If
->
	`·r£MVPIdx
Ð
iMVPIdx
 );

378 
pcSubCU
->
	`fžlMvpCªd
(
uiP¬tIdx
, 
uiP¬tAddr
, 
eRefLi¡
, 
iRefIdx
, 
pAMVPInfo
);

379 #ià
MCTS_ENC_CHECK


380 ià((
iRefIdx
 >ð0è&& 
m_pCÚfÜmªûCheck
->
	`g‘TMùsCheck
(è&& 
pcSubCU
->
	`isLa¡CÞumnCTUInTže
(è&& (
iMVPIdx
 =ð
pAMVPInfo
->
numS·tŸlMVPCªdid©es
))

382 
m_pCÚfÜmªûCheck
->
	`æagTMùsE¼Ü
("Merge Index using‚on-spatial merge candidate (AMVP)");

385 
pcSubCU
->
	`£tMVPNumSubP¬ts
(
pAMVPInfo
->
iN
, 
eRefLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
, 
uiD•th
);

386 
pcSubCU
->
	`£tMVPIdxSubP¬ts
Ð
iMVPIdx
, 
eRefLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
, 
uiD•th
 );

387 iàÐ
iRefIdx
 >= 0 )

389 
m_pcP»diùiÚ
->
	`g‘MvP»dAMVP
Ð
pcSubCU
, 
uiP¬tIdx
, 
uiP¬tAddr
, 
eRefLi¡
, 
cMv
);

390 
cMv
 +ð
pcSubCUMvF›ld
->
	`g‘Mvd
Ð
uiP¬tAddr
 );

393 
P¬tSize
 
eP¬tSize
 = 
pcSubCU
->
	`g‘P¬t™iÚSize
Ð
uiP¬tAddr
 );

394 
pcSubCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 )->
	`£tAÎMv
(
cMv
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
uiP¬tIdx
);

395 
	}
}

397 
Void
 
	gTDecEÁrÝy
::
	$xDecodeT¿nsfÜm
 ( 
BoÞ
& 
bCodeDQP
, BoÞ& 
isChromaQpAdjCoded
, 
TComTU
 &
rTu
, cÚ¡ 
IÁ
 
quadŒ“TULog2MšSizeInCU
 )

399 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

400 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

401 cÚ¡ 
UIÁ
 
uiD•th
=
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

402 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

404 
UIÁ
 
uiSubdiv
;

405 cÚ¡ 
UIÁ
 
numV®idCompÚ’t
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

406 cÚ¡ 
BoÞ
 
bChroma
 = 
	`isChromaEÇbËd
(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
());

408 cÚ¡ 
UIÁ
 
uiLog2T¿foSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

409 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


410 ià(
bDebugRQT
)

412 
	`´štf
("x..codeTransform: offsetLuma=%d offsetChroma=%d‡bsPartIdx=%d, uiDepth=%d\n width=%d, height=%d, uiTrIdx=%d, uiInnerQuadIdx=%d\n",

413 
rTu
.
	`g‘CÛffic›ÁOff£t
(
COMPONENT_Y
),„Tu.g‘CÛffic›ÁOff£t(
COMPONENT_Cb
), 
uiAbsP¬tIdx
, 
uiD•th
,„Tu.
	`g‘Reù
(COMPONENT_Y).
width
,„Tu.g‘Reù(COMPONENT_Y).
height
,„Tu.
	`G‘T¿nsfÜmD•thR–
(),„Tu.
	`G‘SeùiÚNumb”
());

414 
	`fæush
(
¡dout
);

418 ifÐ
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
è&&…cCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè=ð
SIZE_NxN
 && 
uiD•th
 =ðpcCU->
	`g‘D•th
(uiAbsPartIdx) )

420 
uiSubdiv
 = 1;

422 ifÐ(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TUMaxD•thIÁ”
(è=ð1è&& (pcCU->
	`isIÁ”
(
uiAbsP¬tIdx
)è&& (…cCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè!ð
SIZE_2Nx2N
 ) && (
uiD•th
 =ðpcCU->
	`g‘D•th
(uiAbsPartIdx)) )

424 
uiSubdiv
 = (
uiLog2T¿foSize
 >
quadŒ“TULog2MšSizeInCU
);

426 ifÐ
uiLog2T¿foSize
 > 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
() )

428 
uiSubdiv
 = 1;

430 ifÐ
uiLog2T¿foSize
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MšSize
() )

432 
uiSubdiv
 = 0;

434 ifÐ
uiLog2T¿foSize
 =ð
quadŒ“TULog2MšSizeInCU
 )

436 
uiSubdiv
 = 0;

440 
	`as£¹
Ð
uiLog2T¿foSize
 > 
quadŒ“TULog2MšSizeInCU
 );

441 
m_pcEÁrÝyDecod”If
->
	`·r£T¿nsfÜmSubdivFÏg
Ð
uiSubdiv
, 5 - 
uiLog2T¿foSize
 );

444 
IÁ
 
chª
=
COMPONENT_Cb
; chª<
numV®idCompÚ’t
; chan++)

446 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
chª
);

447 cÚ¡ 
UIÁ
 
ŒD•thTÙ®Adj
=
rTu
.
	`G‘T¿nsfÜmD•thTÙ®Adj
(
compID
);

449 cÚ¡ 
BoÞ
 
bFœ¡CbfOfCU
 = 
uiTrD•th
 == 0;

451 ifÐ
bFœ¡CbfOfCU
 )

453 
pcCU
->
	`£tCbfSubP¬ts
Ð0, 
compID
, 
rTu
.
	`G‘AbsP¬tIdxTU
(compID), 
ŒD•thTÙ®Adj
);

455 ifÐ
bFœ¡CbfOfCU
 || 
rTu
.
	`ProûssšgAÎQuad¿Ás
(
compID
) )

457 ifÐ
bFœ¡CbfOfCU
 || 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
compID
, 
uiTrD•th
 - 1 ) )

459 
m_pcEÁrÝyDecod”If
->
	`·r£QtCbf
Ð
rTu
, 
compID
, (
uiSubdiv
 == 0) );

464 ifÐ
uiSubdiv
 )

466 cÚ¡ 
UIÁ
 
uiQP¬tNum
 = 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> ((
uiD•th
+1) << 1);

467 
UIÁ
 
uiYUVCbf
[
MAX_NUM_COMPONENT
] = {0,0,0};

469 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
Œue
);

473 
	`xDecodeT¿nsfÜm
Ð
bCodeDQP
, 
isChromaQpAdjCoded
, 
tuRecur£Chžd
, 
quadŒ“TULog2MšSizeInCU
 );

474 
UIÁ
 
chždTUAbsP¬tIdx
=
tuRecur£Chžd
.
	`G‘AbsP¬tIdxTU
();

475 
UIÁ
 
ch
=0; ch<
numV®idCompÚ’t
; ch++)

477 
uiYUVCbf
[
ch
] |ð
pcCU
->
	`g‘Cbf
(
chždTUAbsP¬tIdx
 , 
	`CompÚ’tID
(ch), 
uiTrD•th
+1 );

479 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
) );

481 
UIÁ
 
ch
=0; ch<
numV®idCompÚ’t
; ch++)

483 
UCh¬
 *
pBa£
 = 
pcCU
->
	`g‘Cbf
Ð
	`CompÚ’tID
(
ch
èè+ 
uiAbsP¬tIdx
;

484 cÚ¡ 
UCh¬
 
æag
 = 
uiYUVCbf
[
ch
] << 
uiTrD•th
;

486  
UIÁ
 
ui
 = 0; u˜< 4 * 
uiQP¬tNum
; ++ui )

488 
pBa£
[
ui
] |ð
æag
;

494 
	`as£¹
Ð
uiD•th
 >ð
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 ) );

495 
pcCU
->
	`£tTrIdxSubP¬ts
Ð
uiTrD•th
, 
uiAbsP¬tIdx
, 
uiD•th
 );

498 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

499 
	`DTRACE_CABAC_T
( "\tTrIdx:‡bspart=" );

500 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 );

501 
	`DTRACE_CABAC_T
( "\tdepth=" );

502 
	`DTRACE_CABAC_V
Ð
uiD•th
 );

503 
	`DTRACE_CABAC_T
( "\ttrdepth=" );

504 
	`DTRACE_CABAC_V
Ð
uiTrD•th
 );

505 
	`DTRACE_CABAC_T
( "\n" );

508 
pcCU
->
	`£tCbfSubP¬ts
 ( 0, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
uiD•th
 );

510 ifÐ(!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
)è&& 
uiD•th
 =ðpcCU->
	`g‘D•th
ÐuiAbsP¬tIdx ) && ((!
bChroma
è|| (!pcCU->
	`g‘Cbf
ÐuiAbsP¬tIdx, 
COMPONENT_Cb
, 0 ) && !pcCU->g‘CbfÐuiAbsP¬tIdx, 
COMPONENT_Cr
, 0 )) ))

512 
pcCU
->
	`£tCbfSubP¬ts
Ð1 << 
uiTrD•th
, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
uiD•th
 );

516 
m_pcEÁrÝyDecod”If
->
	`·r£QtCbf
Ð
rTu
, 
COMPONENT_Y
, 
Œue
 );

521 
UIÁ
 
cbf
[
MAX_NUM_COMPONENT
]={0,0,0};

522 
BoÞ
 
v®idCbf
 = 
çl£
;

523 
BoÞ
 
v®idChromaCbf
 = 
çl£
;

524 cÚ¡ 
UIÁ
 
uiTrIdx
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

526 
UIÁ
 
ch
=0; ch<
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

528 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

530 
cbf
[
compID
] = 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, compID, 
uiTrIdx
 );

532 ià(
cbf
[
compID
] != 0)

534 
v®idCbf
 = 
Œue
;

535 ià(
	`isChroma
(
compID
))

537 
v®idChromaCbf
 = 
Œue
;

542 iàÐ
v®idCbf
 )

546 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

548 iàÐ
bCodeDQP
 )

550 cÚ¡ 
UIÁ
 
uiAbsP¬tIdxCU
=
rTu
.
	`G‘AbsP¬tIdxCU
();

551 
	`decodeQP
Ð
pcCU
, 
uiAbsP¬tIdxCU
);

552 
bCodeDQP
 = 
çl£
;

556 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

558 iàÐ
v®idChromaCbf
 && 
isChromaQpAdjCoded
 && !
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
rTu
.
	`G‘AbsP¬tIdxCU
()) )

560 
	`decodeChromaQpAdju¡m’t
Ð
pcCU
, 
rTu
.
	`G‘AbsP¬tIdxCU
() );

561 
isChromaQpAdjCoded
 = 
çl£
;

565 cÚ¡ 
UIÁ
 
numV®idComp
=
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

567 
UIÁ
 
ch
=
COMPONENT_Y
; ch<
numV®idComp
; ch++)

569 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

571 ifÐ
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
) )

573 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


574 ià(
bDebugRQT
)

576 
	`´štf
("C®ÈNxN fÜ chª %d width=%d height=%d cbf=%d\n", 
compID
, 
rTu
.
	`g‘Reù
(compID).
width
,„Tu.g‘Reù(compID).
height
, 1);

580 ià(
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
)

583 
TComTURecur£
 
	`subTUI‹¿tÜ
(
rTu
, 
çl£
, 
TComTU
::
VERTICAL_SPLIT
, 
Œue
, 
compID
);

587 cÚ¡ 
UIÁ
 
subTUCBF
 = 
pcCU
->
	`g‘Cbf
(
subTUI‹¿tÜ
.
	`G‘AbsP¬tIdxTU
(), 
compID
, (
uiTrIdx
 + 1));

589 ià(
subTUCBF
 != 0)

591 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


592 ià(
bDebugRQT
)

594 
	`´štf
("C®ÈNxN fÜ chª %d width=%d height=%d cbf=%d\n", 
compID
, 
subTUI‹¿tÜ
.
	`g‘Reù
(compID).
width
, subTUI‹¿tÜ.g‘Reù(compID).
height
, 1);

597 
m_pcEÁrÝyDecod”If
->
	`·r£CÛffNxN
Ð
subTUI‹¿tÜ
, 
compID
 );

599 } 
subTUI‹¿tÜ
.
	`ÃxtSeùiÚ
(
rTu
));

603 if(
	`isChroma
(
compID
è&& (
cbf
[
COMPONENT_Y
] != 0))

605 
m_pcEÁrÝyDecod”If
->
	`·r£CrossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
 );

608 if(
cbf
[
compID
] != 0)

610 
m_pcEÁrÝyDecod”If
->
	`·r£CÛffNxN
Ð
rTu
, 
compID
 );

618 
	}
}

620 
Void
 
	gTDecEÁrÝy
::
	$decodeQP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

622 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

624 
m_pcEÁrÝyDecod”If
->
	`·r£D–QP
Ð
pcCU
, 
uiAbsP¬tIdx
,…cCU->
	`g‘D•th
( uiAbsPartIdx ) );

626 
	}
}

628 
Void
 
	gTDecEÁrÝy
::
	$decodeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

630 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

632 
m_pcEÁrÝyDecod”If
->
	`·r£ChromaQpAdju¡m’t
Ð
pcCU
, 
uiAbsP¬tIdx
,…cCU->
	`g‘D•th
( uiAbsPartIdx ) );

634 
	}
}

638 
Void
 
	gTDecEÁrÝy
::
	$decodeCÛff
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
& 
bCodeDQP
, BoÞ& 
isChromaQpAdjCoded
 )

640 ifÐ
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
) )

645 
UIÁ
 
uiQtRoÙCbf
 = 1;

646 ifÐ!Ð
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
è=ð
SIZE_2Nx2N
 &&…cCU->
	`g‘M”geFÏg
( uiAbsPartIdx ) ) )

648 
m_pcEÁrÝyDecod”If
->
	`·r£QtRoÙCbf
Ð
uiAbsP¬tIdx
, 
uiQtRoÙCbf
 );

650 iàÐ!
uiQtRoÙCbf
 )

652 cÚ¡ 
UIÁ
 
cbfZ”o
[
MAX_NUM_COMPONENT
]={0,0,0};

653 
pcCU
->
	`£tCbfSubP¬ts
Ð
cbfZ”o
, 
uiAbsP¬tIdx
, 
uiD•th
 );

654 
pcCU
->
	`£tTrIdxSubP¬ts
Ð0 , 
uiAbsP¬tIdx
, 
uiD•th
 );

660 
TComTURecur£
 
	`tuRecur£
(
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
);

662 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


663 ià(
bDebugRQT
)

665 
	`´štf
("..codeCÛff: uiAbsP¬tIdx=%d, PU fÜm©=%d, 2Nx2N=%d, NxN=%d\n", 
uiAbsP¬tIdx
, 
pcCU
->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdx), 
SIZE_2Nx2N
, 
SIZE_NxN
);

669 
IÁ
 
quadŒ“TULog2MšSizeInCU
 = 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
);

671 
	`xDecodeT¿nsfÜm
Ð
bCodeDQP
, 
isChromaQpAdjCoded
, 
tuRecur£
, 
quadŒ“TULog2MšSizeInCU
 );

672 
	}
}

	@source/Lib/TLibDecoder/TDecEntropy.h

38 #iâdeà
__TDECENTROPY__


39 
	#__TDECENTROPY__


	)

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComB™SŒ—m.h
"

43 
	~"TLibCommÚ/TComSliû.h
"

44 
	~"TLibCommÚ/TComPic.h
"

45 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

46 
	~"TLibCommÚ/TComReùªgË.h
"

47 
	~"TDecCÚfÜmªû.h
"

49 
þass
 
	gTDecSbac
;

50 
þass
 
	gTDecCavlc
;

51 
þass
 
	gP¬am‘”S‘Mªag”Decod”
;

52 
þass
 
	gTComP»diùiÚ
;

62 þas 
	cTDecEÁrÝyIf


64 
	mpublic
:

66 
vœtu®
 
Void
 
»£tEÁrÝy
 ( 
TComSliû
* 
pcSliû
 ) = 0;

67 
vœtu®
 
Void
 
£tB™¡»am
 ( 
TComIÅutB™¡»am
* 
p
 ) = 0;

69 
vœtu®
 
Void
 
·r£VPS
 ( 
TComVPS
* 
pcVPS
 ) = 0;

70 
vœtu®
 
Void
 
·r£SPS
 ( 
TComSPS
* 
pcSPS
 ) = 0;

71 
vœtu®
 
Void
 
·r£PPS
 ( 
TComPPS
* 
pcPPS
 ) = 0;

73 
vœtu®
 
Void
 
·r£SliûH—d”
 ( 
TComSliû
* 
pcSliû
, 
P¬am‘”S‘Mªag”
 *
·¿m‘”S‘Mªag”
, cÚ¡ 
IÁ
 
´evTid0POC
) = 0;

75 
vœtu®
 
Void
 
·r£T”mš©šgB™
 ( 
UIÁ
& 
ružsLa¡
 ) = 0;

76 
vœtu®
 
Void
 
·r£RemaššgBy‹s
Ð
BoÞ
 
noT¿žšgBy‹sEx³ùed
 ) = 0;

78 
vœtu®
 
Void
 
·r£MVPIdx
 ( 
IÁ
& 
riMVPIdx
 ) = 0;

80 
	mpublic
:

81 
vœtu®
 
Void
 
·r£SkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

82 
vœtu®
 
Void
 
·r£CUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

83 
vœtu®
 
Void
 
·r£S¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

84 
vœtu®
 
Void
 
·r£M”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 ) = 0;

85 
vœtu®
 
Void
 
·r£M”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiM”geIndex
 ) = 0;

86 
vœtu®
 
Void
 
·r£P¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

87 
vœtu®
 
Void
 
·r£P»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

89 
vœtu®
 
Void
 
·r£IÁ¿DœLumaAng
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

90 
vœtu®
 
Void
 
·r£IÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

92 
vœtu®
 
Void
 
·r£IÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiIÁ”Dœ
, UIÁ 
uiAbsP¬tIdx
 ) = 0;

93 
vœtu®
 
Void
 
·r£RefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
IÁ
& 
riRefFrmIdx
, 
RefPicLi¡
 
eRefLi¡
 ) = 0;

94 
vœtu®
 
Void
 
·r£Mvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tAddr
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
, 
RefPicLi¡
 
eRefLi¡
 ) = 0;

96 
vœtu®
 
Void
 
·r£CrossCompÚ’tP»diùiÚ
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 ) = 0;

98 
vœtu®
 
Void
 
·r£T¿nsfÜmSubdivFÏg
Ð
UIÁ
& 
ruiSubdivFÏg
, UIÁ 
uiLog2T¿nsfÜmBlockSize
 ) = 0;

99 
vœtu®
 
Void
 
·r£QtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 ) = 0;

100 
vœtu®
 
Void
 
·r£QtRoÙCbf
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ& 
uiQtRoÙCbf
 ) = 0;

102 
vœtu®
 
Void
 
·r£D–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

103 
vœtu®
 
Void
 
·r£ChromaQpAdju¡m’t
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

105 
vœtu®
 
Void
 
·r£IPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
) = 0;

107 
vœtu®
 
Void
 
·r£CÛffNxN
Ð
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 ) = 0;

109 
vœtu®
 
Void
 
·r£T¿nsfÜmSkFÏgs
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 ) = 0;

111 
vœtu®
 
Void
 
·r£Ex¶ic™RdpcmMode
 ( 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 ) = 0;

113 
	mvœtu®
 ~
	$TDecEÁrÝyIf
() {}

114 
	}
};

117 þas 
	cTDecEÁrÝy


119 
	m´iv©e
:

120 
TDecEÁrÝyIf
* 
m_pcEÁrÝyDecod”If
;

121 
TComP»diùiÚ
* 
	mm_pcP»diùiÚ
;

122 #ià
MCTS_ENC_CHECK


123 
TDecCÚfÜmªûCheck
* 
	mm_pCÚfÜmªûCheck
;

129 
	mpublic
:

130 #ià
MCTS_ENC_CHECK


131 
Void
 
	$š™
 (
TComP»diùiÚ
* 
p
, 
TDecCÚfÜmªûCheck
* 
pCÚfÜmªûCheck
è{
m_pcP»diùiÚ
 =…; 
m_pCÚfÜmªûCheck
=pConformanceCheck;}

133 
Void
 
	$š™
 (
TComP»diùiÚ
* 
p
è{
m_pcP»diùiÚ
 =…;
	}
}

135 
Void
 
decodePUWi£
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, TComD©aCU* 
pcSubCU
 );

136 
Void
 
decodeIÁ”DœPU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
 );

137 
Void
 
decodeRefFrmIdxPU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

138 
Void
 
decodeMvdPU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

139 
Void
 
decodeMVPIdxPU
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiP¬tAddr
, UIÁ 
uiD•th
, UIÁ 
uiP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

141 
Void
 
£tEÁrÝyDecod”
 ( 
TDecEÁrÝyIf
* 
p
 );

142 
Void
 
	$£tB™¡»am
 ( 
TComIÅutB™¡»am
* 
p
 ) { 
m_pcEÁrÝyDecod”If
->
	`£tB™¡»am
Õ); 
	}
}

143 
Void
 
	$»£tEÁrÝy
 ( 
TComSliû
* 
p
è{ 
m_pcEÁrÝyDecod”If
->
	`»£tEÁrÝy
Õ); 
	}
}

145 
Void
 
	$decodeVPS
 ( 
TComVPS
* 
pcVPS
 ) { 
m_pcEÁrÝyDecod”If
->
	`·r£VPS
ÕcVPS); 
	}
}

146 
Void
 
	$decodeSPS
 ( 
TComSPS
* 
pcSPS
 ) { 
m_pcEÁrÝyDecod”If
->
	`·r£SPS
ÕcSPS); 
	}
}

147 
Void
 
	$decodePPS
 ( 
TComPPS
* 
pcPPS
 ) { 
m_pcEÁrÝyDecod”If
->
	`·r£PPS
ÕcPPS); 
	}
}

148 
Void
 
	$decodeSliûH—d”
 ( 
TComSliû
* 
pcSliû
, 
P¬am‘”S‘Mªag”
 *
·¿m‘”S‘Mªag”
, cÚ¡ 
IÁ
 
´evTid0POC
è{ 
m_pcEÁrÝyDecod”If
->
	`·r£SliûH—d”
ÕcSliû,…¬am‘”S‘Mªag”,…»vTid0POC); 
	}
}

150 
Void
 
	$decodeT”mš©šgB™
 ( 
UIÁ
& 
ruiIsLa¡
 ) { 
m_pcEÁrÝyDecod”If
->
	`·r£T”mš©šgB™
ÔuiIsLa¡); 
	}
}

151 
Void
 
	$decodeRemaššgBy‹s
Ð
BoÞ
 
noT¿žšgBy‹sEx³ùed
 ) { 
m_pcEÁrÝyDecod”If
->
	`·r£RemaššgBy‹s
ÒoT¿žšgBy‹sEx³ùed); 
	}
}

153 
TDecEÁrÝyIf
* 
	$g‘EÁrÝyDecod”
(è{  
m_pcEÁrÝyDecod”If
; 
	}
}

155 
	gpublic
:

156 
Void
 
decodeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

157 
Void
 
decodeSkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

158 
Void
 
decodeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

159 
Void
 
decodeM”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 );

160 
Void
 
decodeM”geIndex
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiP¬tIdx
, UIÁ 
uiP¬tAddr
, UIÁ 
uiD•th
 );

161 
Void
 
decodeP»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

162 
Void
 
decodeP¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

164 
Void
 
decodeIPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

166 
Void
 
decodeP»dInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, TComD©aCU* 
pcSubCU
 );

168 
Void
 
decodeIÁ¿DœModeLuma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

169 
Void
 
decodeIÁ¿DœModeChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

171 
Void
 
decodeQP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

172 
Void
 
decodeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

174 
	g´iv©e
:

176 
Void
 
xDecodeT¿nsfÜm
 ( 
BoÞ
& 
bCodeDQP
, BoÞ& 
isChromaQpAdjCoded
, 
TComTU
 &
rTu
, cÚ¡ 
IÁ
 
quadŒ“TULog2MšSizeInCU
 );

178 
	gpublic
:

180 
Void
 
decodeCÛff
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
& 
bCodeDQP
, BoÞ& 
isChromaQpAdjCoded
 );

	@source/Lib/TLibDecoder/TDecGop.cpp

38 
	~"TDecGÝ.h
"

39 
	~"TDecCAVLC.h
"

40 
	~"TDecSbac.h
"

41 
	~"TDecBšCod”.h
"

42 
	~"TDecBšCod”CABAC.h
"

43 
	~"libmd5/MD5.h
"

44 
	~"TLibCommÚ/SEI.h
"

46 
	~<time.h
>

50 
Void
 
ÿlcAndPrštHashStus
(
TComPicYuv
& 
pic
, cÚ¡ 
SEIDecodedPiùu»Hash
* 
piùu»HashSEI
, cÚ¡ 
B™D•ths
 &
b™D•ths
, 
UIÁ
 &
numChecksumE¼Üs
);

55 
	gTDecGÝ
::
	$TDecGÝ
()

56 : 
	$m_numb”OfChecksumE¼ÜsD‘eùed
(0)

58 
m_dDecTime
 = 0;

59 
	}
}

61 
	gTDecGÝ
::~
	$TDecGÝ
()

64 
	}
}

66 
Void
 
TDecGÝ
::
	$ü—‹
()

69 
	}
}

72 
Void
 
TDecGÝ
::
	$de¡roy
()

74 
	}
}

76 
Void
 
TDecGÝ
::
	$š™
Ð
TDecEÁrÝy
* 
pcEÁrÝyDecod”
,

77 
TDecSbac
* 
pcSbacDecod”
,

78 
TDecBšCABAC
* 
pcBšCABAC
,

79 
TDecCavlc
* 
pcCavlcDecod”
,

80 
TDecSliû
* 
pcSliûDecod”
,

81 
TComLoÝFž‹r
* 
pcLoÝFž‹r
,

82 
TComSam¶eAd­tiveOff£t
* 
pcSAO


85 
m_pcEÁrÝyDecod”
 = 
pcEÁrÝyDecod”
;

86 
m_pcSbacDecod”
 = 
pcSbacDecod”
;

87 
m_pcBšCABAC
 = 
pcBšCABAC
;

88 
m_pcCavlcDecod”
 = 
pcCavlcDecod”
;

89 
m_pcSliûDecod”
 = 
pcSliûDecod”
;

90 
m_pcLoÝFž‹r
 = 
pcLoÝFž‹r
;

91 
m_pcSAO
 = 
pcSAO
;

92 
m_numb”OfChecksumE¼ÜsD‘eùed
 = 0;

93 
	}
}

103 
Void
 
	gTDecGÝ
::
	$decom´essSliû
(
TComIÅutB™¡»am
* 
pcB™¡»am
, 
TComPic
* 
pcPic
)

105 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
ÕcPic->
	`g‘Cu¼SliûIdx
());

108 
TComIÅutB™¡»am
 **
µcSub¡»ams
 = 
NULL
;

111 
þock_t
 
iBefÜeTime
 = 
	`þock
();

112 
m_pcSbacDecod”
->
	`š™
Ð(
TDecBšIf
*)
m_pcBšCABAC
 );

113 
m_pcEÁrÝyDecod”
->
	`£tEÁrÝyDecod”
 (
m_pcSbacDecod”
);

115 cÚ¡ 
UIÁ
 
uiNumSub¡»ams
 = 
pcSliû
->
	`g‘Numb”OfSub¡»amSizes
()+1;

118 
µcSub¡»ams
 = 
Ãw
 
TComIÅutB™¡»am
*[
uiNumSub¡»ams
];

119  
UIÁ
 
ui
 = 0 ; u˜< 
uiNumSub¡»ams
 ; ui++ )

121 
µcSub¡»ams
[
ui
] = 
pcB™¡»am
->
	`exŒaùSub¡»am
(ui+1 < 
uiNumSub¡»ams
 ? (
pcSliû
->
	`g‘Sub¡»amSize
(ui)<<3è:…cB™¡»am->
	`g‘NumB™sLeá
());

124 
m_pcSliûDecod”
->
	`decom´essSliû
Ð
µcSub¡»ams
, 
pcPic
, 
m_pcSbacDecod”
);

126 
UIÁ
 
ui
 = 0; u˜< 
uiNumSub¡»ams
; ui++)

128 
d–‘e
 
µcSub¡»ams
[
ui
];

130 
d–‘e
[] 
µcSub¡»ams
;

132 
m_dDecTime
 +ð(
DoubË
)(
	`þock
()-
iBefÜeTime
è/ 
CLOCKS_PER_SEC
;

133 
	}
}

135 
Void
 
	gTDecGÝ
::
	$fž‹rPiùu»
(
TComPic
* 
pcPic
)

137 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
ÕcPic->
	`g‘Cu¼SliûIdx
());

140 
þock_t
 
iBefÜeTime
 = 
	`þock
();

143 
BoÞ
 
bLFCrossTžeBound¬y
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘LoÝFž‹rAüossTžesEÇbËdFÏg
();

144 
m_pcLoÝFž‹r
->
	`£tCfg
(
bLFCrossTžeBound¬y
);

145 
m_pcLoÝFž‹r
->
	`loÝFž‹rPic
Ð
pcPic
 );

147 ifÐ
pcSliû
->
	`g‘SPS
()->
	`g‘U£SAO
() )

149 
m_pcSAO
->
	`»cÚ¡ruùBlkSAOP¬ams
(
pcPic
,…cPic->
	`g‘PicSym
()->
	`g‘SAOBlkP¬am
());

150 
m_pcSAO
->
	`SAOProûss
(
pcPic
);

151 
m_pcSAO
->
	`PCMLFDi§bËProûss
(
pcPic
);

154 
pcPic
->
	`com´essMÙiÚ
();

155 
TCh¬
 
c
 = (
pcSliû
->
	`isIÁ¿
(è? 'I' :…cSliû->
	`isIÁ”P
() ? 'P' : 'B');

156 ià(!
pcSliû
->
	`isReã»nûd
())

158 
c
 += 32;

162 
	`´štf
("POC %4d TId: %1d ( %c-SLICE, QP%3d ) ", 
pcSliû
->
	`g‘POC
(),

163 
pcSliû
->
	`g‘TLay”
(),

164 
c
,

165 
pcSliû
->
	`g‘SliûQp
() );

167 
m_dDecTime
 +ð(
DoubË
)(
	`þock
()-
iBefÜeTime
è/ 
CLOCKS_PER_SEC
;

168 
	`´štf
 ("[DT %6.3f] ", 
m_dDecTime
 );

169 
m_dDecTime
 = 0;

171 
IÁ
 
iRefLi¡
 = 0; iRefList < 2; iRefList++)

173 
	`´štf
 ("[L%d ", 
iRefLi¡
);

174 
IÁ
 
iRefIndex
 = 0; iRefIndex < 
pcSliû
->
	`g‘NumRefIdx
(
	`RefPicLi¡
(
iRefLi¡
)); iRefIndex++)

176 
	`´štf
 ("%d ", 
pcSliû
->
	`g‘RefPOC
(
	`RefPicLi¡
(
iRefLi¡
), 
iRefIndex
));

178 
	`´štf
 ("] ");

180 ià(
m_decodedPiùu»HashSEIEÇbËd
)

182 
SEIMes§ges
 
piùu»Hashes
 = 
	`g‘SeisByTy³
(
pcPic
->
	`g‘SEIs
(), 
SEI
::
DECODED_PICTURE_HASH
 );

183 cÚ¡ 
SEIDecodedPiùu»Hash
 *
hash
 = ( 
piùu»Hashes
.
	`size
(è> 0 ) ? (SEIDecodedPiùu»Hash*è*Õiùu»Hashes.
	`begš
()è: 
NULL
;

184 ià(
piùu»Hashes
.
	`size
() > 1)

186 
	`´štf
 ("Warning: Got multiple decoded…icture hash SEI messages. Using first.");

188 
	`ÿlcAndPrštHashStus
(*(
pcPic
->
	`g‘PicYuvRec
()), 
hash
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•ths
(), 
m_numb”OfChecksumE¼ÜsD‘eùed
);

191 
	`´štf
("\n");

193 
pcPic
->
	`£tOuutM¬k
ÕcPic->
	`g‘Sliû
(0)->
	`g‘PicOuutFÏg
(è? 
Œue
 : 
çl£
);

194 
pcPic
->
	`£tRecÚM¬k
(
Œue
);

195 
	}
}

208 
Void
 
	$ÿlcAndPrštHashStus
(
TComPicYuv
& 
pic
, cÚ¡ 
SEIDecodedPiùu»Hash
* 
piùu»HashSEI
, cÚ¡ 
B™D•ths
 &
b™D•ths
, 
UIÁ
 &
numChecksumE¼Üs
)

211 
TComPiùu»Hash
 
»cÚ_dige¡
;

212 
IÁ
 
numCh¬
=0;

213 cÚ¡ 
TCh¬
* 
hashTy³
 = "\0";

215 ià(
piùu»HashSEI
)

217 
piùu»HashSEI
->
m‘hod
)

219 
HASHTYPE_MD5
:

221 
hashTy³
 = "MD5";

222 
numCh¬
 = 
	`ÿlcMD5
(
pic
, 
»cÚ_dige¡
, 
b™D•ths
);

225 
HASHTYPE_CRC
:

227 
hashTy³
 = "CRC";

228 
numCh¬
 = 
	`ÿlcCRC
(
pic
, 
»cÚ_dige¡
, 
b™D•ths
);

231 
HASHTYPE_CHECKSUM
:

233 
hashTy³
 = "Checksum";

234 
numCh¬
 = 
	`ÿlcChecksum
(
pic
, 
»cÚ_dige¡
, 
b™D•ths
);

239 
	`as£¹
 (!"unknown hashype");

246 cÚ¡ 
TCh¬
* 
ok
 = "(unk)";

247 
BoÞ
 
mism©ch
 = 
çl£
;

249 ià(
piùu»HashSEI
)

251 
ok
 = "(OK)";

252 ià(
»cÚ_dige¡
 !ð
piùu»HashSEI
->
m_piùu»Hash
)

254 
ok
 = "(***ERROR***)";

255 
mism©ch
 = 
Œue
;

259 
	`´štf
("[%s:%s,%s] ", 
hashTy³
, 
	`hashToSŒšg
(
»cÚ_dige¡
, 
numCh¬
).
	`c_¡r
(), 
ok
);

261 ià(
mism©ch
)

263 
numChecksumE¼Üs
++;

264 
	`´štf
("[rx%s:%s] ", 
hashTy³
, 
	`hashToSŒšg
(
piùu»HashSEI
->
m_piùu»Hash
, 
numCh¬
).
	`c_¡r
());

266 
	}
}

	@source/Lib/TLibDecoder/TDecGop.h

38 #iâdeà
__TDECGOP__


39 
	#__TDECGOP__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 
	~"TLibCommÚ/TComLi¡.h
"

48 
	~"TLibCommÚ/TComPicYuv.h
"

49 
	~"TLibCommÚ/TComPic.h
"

50 
	~"TLibCommÚ/TComLoÝFž‹r.h
"

51 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

53 
	~"TDecEÁrÝy.h
"

54 
	~"TDecSliû.h
"

55 
	~"TDecBšCod”.h
"

56 
	~"TDecBšCod”CABAC.h
"

66 þas 
	cTDecGÝ


68 
	m´iv©e
:

69 
TComLi¡
<
TComPic
*> 
m_cLi¡Pic
;

72 
TDecEÁrÝy
* 
	mm_pcEÁrÝyDecod”
;

73 
TDecSbac
* 
	mm_pcSbacDecod”
;

74 
TDecBšCABAC
* 
	mm_pcBšCABAC
;

75 
TDecCavlc
* 
	mm_pcCavlcDecod”
;

76 
TDecSliû
* 
	mm_pcSliûDecod”
;

77 
TComLoÝFž‹r
* 
	mm_pcLoÝFž‹r
;

79 
TComSam¶eAd­tiveOff£t
* 
	mm_pcSAO
;

80 
DoubË
 
	mm_dDecTime
;

81 
IÁ
 
	mm_decodedPiùu»HashSEIEÇbËd
;

82 
UIÁ
 
	mm_numb”OfChecksumE¼ÜsD‘eùed
;

84 
	mpublic
:

85 
TDecGÝ
();

86 
	mvœtu®
 ~
TDecGÝ
();

88 
Void
 
š™
 ( 
TDecEÁrÝy
* 
pcEÁrÝyDecod”
,

89 
TDecSbac
* 
pcSbacDecod”
,

90 
TDecBšCABAC
* 
pcBšCABAC
,

91 
TDecCavlc
* 
pcCavlcDecod”
,

92 
TDecSliû
* 
pcSliûDecod”
,

93 
TComLoÝFž‹r
* 
pcLoÝFž‹r
,

94 
TComSam¶eAd­tiveOff£t
* 
pcSAO


96 
Void
 
ü—‹
 ();

97 
Void
 
de¡roy
 ();

98 
Void
 
decom´essSliû
(
TComIÅutB™¡»am
* 
pcB™¡»am
, 
TComPic
* 
pcPic
 );

99 
Void
 
fž‹rPiùu»
 (
TComPic
* 
pcPic
 );

101 
Void
 
	$£tDecodedPiùu»HashSEIEÇbËd
(
IÁ
 
’abËd
è{ 
m_decodedPiùu»HashSEIEÇbËd
 =ƒnabled; }

102 
UIÁ
 
	$g‘Numb”OfChecksumE¼ÜsD‘eùed
(ècÚ¡ {  
m_numb”OfChecksumE¼ÜsD‘eùed
; 
	}
}

	@source/Lib/TLibDecoder/TDecSbac.cpp

38 
	~"TDecSbac.h
"

39 
	~"TLibCommÚ/TComTU.h
"

40 
	~"TLibCommÚ/TComTrQuªt.h
"

42 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


43 
	~"TLibCommÚ/TComCodšgSti¡ics.h
"

45 
	#RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
a
è, 
	)
a

47 
	#RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
a
)

	)

53 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


54 
	~"../TLibCommÚ/Debug.h
"

62 
	gTDecSbac
::
	$TDecSbac
()

64 : 
	`m_pcB™¡»am
 ( 0 )

65 , 
	`m_pcTDecBšIf
 ( 
NULL
 )

66 , 
	`m_numCÚ‹xtMod–s
 ( 0 )

67 , 
	`m_cCUS¶™FÏgSCMod–
 ( 1, 1, 
NUM_SPLIT_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

68 , 
	`m_cCUSkFÏgSCMod–
 ( 1, 1, 
NUM_SKIP_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

69 , 
	`m_cCUM”geFÏgExtSCMod–
 ( 1, 1, 
NUM_MERGE_FLAG_EXT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

70 , 
	`m_cCUM”geIdxExtSCMod–
 ( 1, 1, 
NUM_MERGE_IDX_EXT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

71 , 
	`m_cCUP¬tSizeSCMod–
 ( 1, 1, 
NUM_PART_SIZE_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

72 , 
	`m_cCUP»dModeSCMod–
 ( 1, 1, 
NUM_PRED_MODE_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

73 , 
	`m_cCUIÁ¿P»dSCMod–
 ( 1, 1, 
NUM_INTRA_PREDICT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

74 , 
	`m_cCUChromaP»dSCMod–
 ( 1, 1, 
NUM_CHROMA_PRED_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

75 , 
	`m_cCUD–QpSCMod–
 ( 1, 1, 
NUM_DELTA_QP_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

76 , 
	`m_cCUIÁ”DœSCMod–
 ( 1, 1, 
NUM_INTER_DIR_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

77 , 
	`m_cCURefPicSCMod–
 ( 1, 1, 
NUM_REF_NO_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

78 , 
	`m_cCUMvdSCMod–
 ( 1, 1, 
NUM_MV_RES_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

79 , 
	`m_cCUQtCbfSCMod–
 ( 1, 
NUM_QT_CBF_CTX_SETS
, 
NUM_QT_CBF_CTX_PER_SET
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

80 , 
	`m_cCUT¿nsSubdivFÏgSCMod–
 ( 1, 1, 
NUM_TRANS_SUBDIV_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

81 , 
	`m_cCUQtRoÙCbfSCMod–
 ( 1, 1, 
NUM_QT_ROOT_CBF_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

82 , 
	`m_cCUSigCÛffGroupSCMod–
 ( 1, 2, 
NUM_SIG_CG_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

83 , 
	`m_cCUSigSCMod–
 ( 1, 1, 
NUM_SIG_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

84 , 
	`m_cCuCtxLa¡X
 ( 1, 
NUM_CTX_LAST_FLAG_SETS
, 
NUM_CTX_LAST_FLAG_XY
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

85 , 
	`m_cCuCtxLa¡Y
 ( 1, 
NUM_CTX_LAST_FLAG_SETS
, 
NUM_CTX_LAST_FLAG_XY
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

86 , 
	`m_cCUOÃSCMod–
 ( 1, 1, 
NUM_ONE_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

87 , 
	`m_cCUAbsSCMod–
 ( 1, 1, 
NUM_ABS_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

88 , 
	`m_cMVPIdxSCMod–
 ( 1, 1, 
NUM_MVP_IDX_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

89 , 
	`m_cSaoM”geSCMod–
 ( 1, 1, 
NUM_SAO_MERGE_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

90 , 
	`m_cSaoTy³IdxSCMod–
 ( 1, 1, 
NUM_SAO_TYPE_IDX_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

91 , 
	`m_cT¿nsfÜmSkSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_TRANSFORMSKIP_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

92 , 
	`m_CUT¿nsquªtBy·ssFÏgSCMod–
 ( 1, 1, 
NUM_CU_TRANSQUANT_BYPASS_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

93 , 
	`m_ex¶ic™RdpcmFÏgSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_EXPLICIT_RDPCM_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

94 , 
	`m_ex¶ic™RdpcmDœSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_EXPLICIT_RDPCM_DIR_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

95 , 
	`m_cCrossCompÚ’tP»diùiÚSCMod–
 ( 1, 1, 
NUM_CROSS_COMPONENT_PREDICTION_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

96 , 
	`m_ChromaQpAdjFÏgSCMod–
 ( 1, 1, 
NUM_CHROMA_QP_ADJ_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

97 , 
	`m_ChromaQpAdjIdcSCMod–
 ( 1, 1, 
NUM_CHROMA_QP_ADJ_IDC_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

99 
	`as£¹
Ð
m_numCÚ‹xtMod–s
 <ð
MAX_NUM_CTX_MOD
 );

100 
	}
}

102 
	gTDecSbac
::~
	$TDecSbac
()

104 
	}
}

110 
Void
 
TDecSbac
::
	$»£tEÁrÝy
(
TComSliû
* 
pSliû
)

112 
SliûTy³
 
¦iûTy³
 = 
pSliû
->
	`g‘SliûTy³
();

113 
IÁ
 
qp
 = 
pSliû
->
	`g‘SliûQp
();

115 ià(
pSliû
->
	`g‘PPS
()->
	`g‘CabacIn™P»£ÁFÏg
(è&&…Sliû->
	`g‘CabacIn™FÏg
())

117 
¦iûTy³
)

119 
P_SLICE
:

120 
¦iûTy³
 = 
B_SLICE
;

122 
B_SLICE
:

123 
¦iûTy³
 = 
P_SLICE
;

126 
	`as£¹
(0);

131 
m_cCUS¶™FÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SPLIT_FLAG
 );

132 
m_cCUSkFÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SKIP_FLAG
 );

133 
m_cCUM”geFÏgExtSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_MERGE_FLAG_EXT
 );

134 
m_cCUM”geIdxExtSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_MERGE_IDX_EXT
 );

135 
m_cCUP¬tSizeSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_PART_SIZE
 );

136 
m_cCUP»dModeSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_PRED_MODE
 );

137 
m_cCUIÁ¿P»dSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_INTRA_PRED_MODE
 );

138 
m_cCUChromaP»dSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_PRED_MODE
 );

139 
m_cCUIÁ”DœSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_INTER_DIR
 );

140 
m_cCUMvdSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_MVD
 );

141 
m_cCURefPicSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_REF_PIC
 );

142 
m_cCUD–QpSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_DQP
 );

143 
m_cCUQtCbfSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_QT_CBF
 );

144 
m_cCUQtRoÙCbfSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_QT_ROOT_CBF
 );

145 
m_cCUSigCÛffGroupSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SIG_CG_FLAG
 );

146 
m_cCUSigSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SIG_FLAG
 );

147 
m_cCuCtxLa¡X
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_LAST
 );

148 
m_cCuCtxLa¡Y
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_LAST
 );

149 
m_cCUOÃSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_ONE_FLAG
 );

150 
m_cCUAbsSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_ABS_FLAG
 );

151 
m_cMVPIdxSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_MVP_IDX
 );

152 
m_cSaoM”geSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SAO_MERGE_FLAG
 );

153 
m_cSaoTy³IdxSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_SAO_TYPE_IDX
 );

154 
m_cCUT¿nsSubdivFÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_TRANS_SUBDIV_FLAG
 );

155 
m_cT¿nsfÜmSkSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_TRANSFORMSKIP_FLAG
 );

156 
m_CUT¿nsquªtBy·ssFÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_CU_TRANSQUANT_BYPASS_FLAG
 );

157 
m_ex¶ic™RdpcmFÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_FLAG
);

158 
m_ex¶ic™RdpcmDœSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_DIR
);

159 
m_cCrossCompÚ’tP»diùiÚSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_CROSS_COMPONENT_PREDICTION
 );

160 
m_ChromaQpAdjFÏgSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_FLAG
 );

161 
m_ChromaQpAdjIdcSCMod–
.
	`š™Bufãr
 ( 
¦iûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_IDC
 );

163 
UIÁ
 
¡©i¡icIndex
 = 0; sti¡icIndex < 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
 ; statisticIndex++)

165 
m_gÞombRiûAd­tiÚSti¡ics
[
¡©i¡icIndex
] = 0;

168 
m_pcTDecBšIf
->
	`¡¬t
();

169 
	}
}

171 
Void
 
	gTDecSbac
::
	$·r£T”mš©šgB™
Ð
UIÁ
& 
ruiB™
 )

173 
m_pcTDecBšIf
->
	`decodeBšTrm
Ð
ruiB™
 );

174 iàÐ
ruiB™
 == 1 )

176 
m_pcTDecBšIf
->
	`fšish
();

178 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


179 
TComCodšgSti¡ics
::
	`Inüem’tSti¡icEP
(
STATS__TRAILING_BITS
, 
m_pcB™¡»am
->
	`»adOutT¿žšgB™s
(),0);

181 
m_pcB™¡»am
->
	`»adOutT¿žšgB™s
();

184 
	}
}

186 
Void
 
	gTDecSbac
::
	$·r£RemaššgBy‹s
Ð
BoÞ
 
noT¿žšgBy‹sEx³ùed
 )

188 ià(
noT¿žšgBy‹sEx³ùed
)

190 cÚ¡ 
UIÁ
 
numb”OfRemaššgSub¡»amBy‹s
=
m_pcB™¡»am
->
	`g‘NumB™sLeá
();

191 
	`as£¹
 (
numb”OfRemaššgSub¡»amBy‹s
 == 0);

195 
m_pcB™¡»am
->
	`g‘NumB™sLeá
())

197 
UIÁ
 
ŒažšgNuÎBy‹
=
m_pcB™¡»am
->
	`»adBy‹
();

198 ià(
ŒažšgNuÎBy‹
!=0)

200 
	`´štf
("T¿žšg by‹ should b0, buˆha v®u%02x\n", 
ŒažšgNuÎBy‹
);

201 
	`as£¹
(
ŒažšgNuÎBy‹
==0);

205 
	}
}

207 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


208 
Void
 
	gTDecSbac
::
	$xR—dUÇryMaxSymbÞ
Ð
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

210 
Void
 
TDecSbac
::
	$xR—dUÇryMaxSymbÞ
Ð
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
 )

213 ià(
uiMaxSymbÞ
 == 0)

215 
ruiSymbÞ
 = 0;

219 
m_pcTDecBšIf
->
	`decodeBš
Ð
ruiSymbÞ
, 
pcSCMod–
[0] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

221 ifÐ
ruiSymbÞ
 =ð0 || 
uiMaxSymbÞ
 == 1 )

226 
UIÁ
 
uiSymbÞ
 = 0;

227 
UIÁ
 
uiCÚt
;

231 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiCÚt
, 
pcSCMod–
[ 
iOff£t
 ] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

232 
uiSymbÞ
++;

233 }  
uiCÚt
 && ( 
uiSymbÞ
 < 
uiMaxSymbÞ
 - 1 ) );

235 ifÐ
uiCÚt
 && ( 
uiSymbÞ
 =ð
uiMaxSymbÞ
 - 1 ) )

237 
uiSymbÞ
++;

240 
ruiSymbÞ
 = 
uiSymbÞ
;

241 
	}
}

243 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


244 
Void
 
	gTDecSbac
::
	$xR—dEpExGÞomb
Ð
UIÁ
& 
ruiSymbÞ
, UIÁ 
uiCouÁ
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

246 
Void
 
TDecSbac
::
	$xR—dEpExGÞomb
Ð
UIÁ
& 
ruiSymbÞ
, UIÁ 
uiCouÁ
 )

249 
UIÁ
 
uiSymbÞ
 = 0;

250 
UIÁ
 
uiB™
 = 1;

252  
uiB™
 )

254 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiB™
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

255 
uiSymbÞ
 +ð
uiB™
 << 
uiCouÁ
++;

258 iàÐ--
uiCouÁ
 )

260 
UIÁ
 
bšs
;

261 
m_pcTDecBšIf
->
	`decodeBšsEP
Ð
bšs
, 
uiCouÁ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

262 
uiSymbÞ
 +ð
bšs
;

265 
ruiSymbÞ
 = 
uiSymbÞ
;

266 
	}
}

268 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


269 
Void
 
	gTDecSbac
::
	$xR—dUÇrySymbÞ
Ð
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

271 
Void
 
TDecSbac
::
	$xR—dUÇrySymbÞ
Ð
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
 )

274 
m_pcTDecBšIf
->
	`decodeBš
Ð
ruiSymbÞ
, 
pcSCMod–
[0] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
));

276 ifÐ!
ruiSymbÞ
 )

281 
UIÁ
 
uiSymbÞ
 = 0;

282 
UIÁ
 
uiCÚt
;

286 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiCÚt
, 
pcSCMod–
[ 
iOff£t
 ] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
));

287 
uiSymbÞ
++;

288 }  
uiCÚt
 );

290 
ruiSymbÞ
 = 
uiSymbÞ
;

291 
	}
}

300 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


301 
Void
 
	gTDecSbac
::
	$xR—dCÛfRemašExGÞomb
 ( 
UIÁ
 &
rSymbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 )

303 
Void
 
TDecSbac
::
	$xR—dCÛfRemašExGÞomb
 ( 
UIÁ
 &
rSymbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 )

306 
UIÁ
 
´efix
 = 0;

307 
UIÁ
 
codeWÜd
 = 0;

309 ià(
u£Lim™edP»fixL’gth
)

311 cÚ¡ 
UIÁ
 
lÚge¡PossibËP»fix
 = (32 - (
COEF_REMAIN_BIN_REDUCTION
 + 
maxLog2TrDyÇmicRªge
)) + COEF_REMAIN_BIN_REDUCTION;

315 
´efix
++;

316 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
codeWÜd
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

317 } (
codeWÜd
 !ð0è&& (
´efix
 < 
lÚge¡PossibËP»fix
));

323 
´efix
++;

324 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
codeWÜd
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
) );

325 }  
codeWÜd
);

328 
codeWÜd
 = 1 - codeWord;

329 
´efix
 -ð
codeWÜd
;

330 
codeWÜd
=0;

332 ià(
´efix
 < 
COEF_REMAIN_BIN_REDUCTION
 )

334 
m_pcTDecBšIf
->
	`decodeBšsEP
(
codeWÜd
,
rP¬am
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
));

335 
rSymbÞ
 = (
´efix
<<
rP¬am
è+ 
codeWÜd
;

337 ià(
u£Lim™edP»fixL’gth
)

339 cÚ¡ 
UIÁ
 
maximumP»fixL’gth
 = (32 - (
COEF_REMAIN_BIN_REDUCTION
 + 
maxLog2TrDyÇmicRªge
));

341 cÚ¡ 
UIÁ
 
´efixL’gth
 = 
´efix
 - 
COEF_REMAIN_BIN_REDUCTION
;

342 cÚ¡ 
UIÁ
 
suffixL’gth
 = (
´efixL’gth
 =ð
maximumP»fixL’gth
è? (
maxLog2TrDyÇmicRªge
 - 
rP¬am
) :…refixLength;

344 
m_pcTDecBšIf
->
	`decodeBšsEP
(
codeWÜd
, (
suffixL’gth
 + 
rP¬am
è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
));

346 
rSymbÞ
 = 
codeWÜd
 + ((((1 << 
´efixL’gth
è- 1è+ 
COEF_REMAIN_BIN_REDUCTION
è<< 
rP¬am
);

350 
m_pcTDecBšIf
->
	`decodeBšsEP
(
codeWÜd
,
´efix
-
COEF_REMAIN_BIN_REDUCTION
+
rP¬am
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
whichSt
));

351 
rSymbÞ
 = (((1<<(
´efix
-
COEF_REMAIN_BIN_REDUCTION
))+COEF_REMAIN_BIN_REDUCTION-1)<<
rP¬am
)+
codeWÜd
;

353 
	}
}

364 
Void
 
	gTDecSbac
::
	$·r£IPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

366 
UIÁ
 
uiSymbÞ
;

368 
m_pcTDecBšIf
->
	`decodeBšTrm
(
uiSymbÞ
);

370 ià(
uiSymbÞ
 == 1)

372 
BoÞ
 
bIpcmFÏg
 = 
Œue
;

373 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

375 
pcCU
->
	`£tP¬tSizeSubP¬ts
 ( 
SIZE_2Nx2N
, 
uiAbsP¬tIdx
, 
uiD•th
 );

376 
pcCU
->
	`£tSizeSubP¬ts
 ( 
¥s
.
	`g‘MaxCUWidth
()>>
uiD•th
, sps.
	`g‘MaxCUHeight
()>>uiD•th, 
uiAbsP¬tIdx
, uiDepth );

377 
pcCU
->
	`£tTrIdxSubP¬ts
 ( 0, 
uiAbsP¬tIdx
, 
uiD•th
 );

378 
pcCU
->
	`£tIPCMFÏgSubP¬ts
 ( 
bIpcmFÏg
, 
uiAbsP¬tIdx
, 
uiD•th
 );

380 cÚ¡ 
UIÁ
 
mšCÛffSizeY
 = 
pcCU
->
	`g‘Pic
()->
	`g‘MšCUWidth
(è*…cCU->g‘Pic()->
	`g‘MšCUHeight
();

381 cÚ¡ 
UIÁ
 
off£tY
 = 
mšCÛffSizeY
 * 
uiAbsP¬tIdx
;

382 
UIÁ
 
ch
=0; ch < 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

384 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

385 cÚ¡ 
UIÁ
 
off£t
 = 
off£tY
 >> (
pcCU
->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compID
è+…cCU->g‘Pic()->
	`g‘CompÚ’tSÿËY
(compID));

386 
P–
 * 
pPCMSam¶e
 = 
pcCU
->
	`g‘PCMSam¶e
(
compID
è+ 
off£t
;

387 cÚ¡ 
UIÁ
 
width
 = 
pcCU
->
	`g‘Width
 (
uiAbsP¬tIdx
è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compID
);

388 cÚ¡ 
UIÁ
 
height
 = 
pcCU
->
	`g‘Height
(
uiAbsP¬tIdx
è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËY
(
compID
);

389 cÚ¡ 
UIÁ
 
§m¶eB™s
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMB™D•th
(
	`toChªÃlTy³
(
compID
));

390 
UIÁ
 
y
=0; y<
height
; y++)

392 
UIÁ
 
x
=0; x<
width
; x++)

394 
UIÁ
 
§m¶e
;

395 
m_pcTDecBšIf
->
	`xR—dPCMCode
(
§m¶eB™s
, 
§m¶e
);

396 
pPCMSam¶e
[
x
] = 
§m¶e
;

398 
pPCMSam¶e
 +ð
width
;

402 
m_pcTDecBšIf
->
	`¡¬t
();

404 
	}
}

406 
Void
 
	gTDecSbac
::
	$·r£CUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

408 
UIÁ
 
uiSymbÞ
;

409 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_CUT¿nsquªtBy·ssFÏgSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__TQ_BYPASS_FLAG
) );

410 
pcCU
->
	`£tCUT¿nsquªtBy·ssSubP¬ts
(
uiSymbÞ
 ? 
Œue
 : 
çl£
, 
uiAbsP¬tIdx
, 
uiD•th
);

411 
	}
}

419 
Void
 
	gTDecSbac
::
	$·r£SkFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

421 ifÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
() )

426 
UIÁ
 
uiSymbÞ
 = 0;

427 
UIÁ
 
uiCtxSk
 = 
pcCU
->
	`g‘CtxSkFÏg
Ð
uiAbsP¬tIdx
 );

428 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUSkFÏgSCMod–
.
	`g‘
Ð0, 0, 
uiCtxSk
 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SKIP_FLAG
) );

429 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

430 
	`DTRACE_CABAC_T
( "\tSkipFlag" );

431 
	`DTRACE_CABAC_T
( "\tuiCtxSkip: ");

432 
	`DTRACE_CABAC_V
Ð
uiCtxSk
 );

433 
	`DTRACE_CABAC_T
( "\tuiSymbol: ");

434 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 );

435 
	`DTRACE_CABAC_T
( "\n");

437 ifÐ
uiSymbÞ
 )

439 
pcCU
->
	`£tSkFÏgSubP¬ts
Ð
Œue
, 
uiAbsP¬tIdx
, 
uiD•th
 );

440 
pcCU
->
	`£tP»dModeSubP¬ts
Ð
MODE_INTER
, 
uiAbsP¬tIdx
, 
uiD•th
 );

441 
pcCU
->
	`£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 
uiAbsP¬tIdx
, 
uiD•th
 );

442 
pcCU
->
	`£tSizeSubP¬ts
ÐpcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
uiD•th
,…cCU->g‘Sliû()->g‘SPS()->
	`g‘MaxCUHeight
()>>uiD•th, 
uiAbsP¬tIdx
, uiDepth );

443 
pcCU
->
	`£tM”geFÏgSubP¬ts
Ð
Œue
 , 
uiAbsP¬tIdx
, 0, 
uiD•th
 );

445 
	}
}

455 
Void
 
	gTDecSbac
::
	$·r£M”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 )

457 
UIÁ
 
uiSymbÞ
;

458 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *
m_cCUM”geFÏgExtSCMod–
.
	`g‘
Ð0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MERGE_FLAG
) );

459 
pcCU
->
	`£tM”geFÏgSubP¬ts
Ð
uiSymbÞ
 ? 
Œue
 : 
çl£
, 
uiAbsP¬tIdx
, 
uiPUIdx
, 
uiD•th
 );

461 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

462 
	`DTRACE_CABAC_T
( "\tMergeFlag: " );

463 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 );

464 
	`DTRACE_CABAC_T
( "\tAddress: " );

465 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() );

466 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx: " );

467 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 );

468 
	`DTRACE_CABAC_T
( "\n" );

469 
	}
}

471 
Void
 
	gTDecSbac
::
	$·r£M”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiM”geIndex
 )

473 
UIÁ
 
uiUÇryIdx
 = 0;

474 
UIÁ
 
uiNumCªd
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
();

475 iàÐ
uiNumCªd
 > 1 )

477  ; 
uiUÇryIdx
 < 
uiNumCªd
 - 1; ++uiUnaryIdx )

479 
UIÁ
 
uiSymbÞ
 = 0;

480 iàÐ
uiUÇryIdx
==0 )

482 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUM”geIdxExtSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MERGE_INDEX
) );

486 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiSymbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MERGE_INDEX
) );

488 ifÐ
uiSymbÞ
 == 0 )

494 
ruiM”geIndex
 = 
uiUÇryIdx
;

496 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

497 
	`DTRACE_CABAC_T
( "\tparseMergeIndex()" )

498 
	`DTRACE_CABAC_T
( "\tuiMRGIdx= " )

499 
	`DTRACE_CABAC_V
Ð
ruiM”geIndex
 )

500 
	`DTRACE_CABAC_T
( "\n" )

501 
	}
}

503 
Void
 
	gTDecSbac
::
	$·r£MVPIdx
 ( 
IÁ
& 
riMVPIdx
 )

505 
UIÁ
 
uiSymbÞ
;

506 
	`xR—dUÇryMaxSymbÞ
(
uiSymbÞ
, 
m_cMVPIdxSCMod–
.
	`g‘
(0), 1, 
AMVP_MAX_NUM_CANDS
-1 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVP_IDX
) );

507 
riMVPIdx
 = 
uiSymbÞ
;

508 
	}
}

510 
Void
 
	gTDecSbac
::
	$·r£S¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

512 ifÐ
uiD•th
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Log2DiffMaxMšCodšgBlockSize
() )

514 
pcCU
->
	`£tD•thSubP¬ts
Ð
uiD•th
, 
uiAbsP¬tIdx
 );

517 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


518 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__SPLIT_FLAG
, 
g_aucCÚv”tToB™
[
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
uiD•th
]+2);

521 
UIÁ
 
uiSymbÞ
;

522 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUS¶™FÏgSCMod–
.
	`g‘
Ð0, 0, 
pcCU
->
	`g‘CtxS¶™FÏg
Ð
uiAbsP¬tIdx
, 
uiD•th
 ) ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

523 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

524 
	`DTRACE_CABAC_T
( "\tSplitFlag\n" )

525 
pcCU
->
	`£tD•thSubP¬ts
Ð
uiD•th
 + 
uiSymbÞ
, 
uiAbsP¬tIdx
 );

528 
	}
}

536 
Void
 
	gTDecSbac
::
	$·r£P¬tSize
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

538 
UIÁ
 
uiSymbÞ
, 
uiMode
 = 0;

539 
P¬tSize
 
eMode
;

540 cÚ¡ 
UCh¬
 
cuWidth
 =
	`UCh¬
(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
uiD•th
);

541 cÚ¡ 
UCh¬
 
cuHeight
=
	`UCh¬
(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUHeight
()>>
uiD•th
);

542 cÚ¡ 
IÁ
 
log2DiffMaxMšCodšgBlockSize
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Log2DiffMaxMšCodšgBlockSize
();

544 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


545 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__PART_SIZE
, 
g_aucCÚv”tToB™
[
cuWidth
]+2);

548 
	`as£¹
 ( 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Log2DiffMaxMšCodšgBlockSize
(è=ð
log2DiffMaxMšCodšgBlockSize
);

549 iàÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

551 
uiSymbÞ
 = 1;

552 ifÐ
uiD•th
 =ð
log2DiffMaxMšCodšgBlockSize
 )

554 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUP¬tSizeSCMod–
.
	`g‘
Ð0, 0, 0è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

556 
eMode
 = 
uiSymbÞ
 ? 
SIZE_2Nx2N
 : 
SIZE_NxN
;

557 
UIÁ
 
uiTrLev–
 = 0;

558 
UIÁ
 
uiWidthInB™
 = 
g_aucCÚv”tToB™
[
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
)]+2;

559 
UIÁ
 
uiTrSizeInB™
 = 
g_aucCÚv”tToB™
[
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTrSize
()]+2;

560 
uiTrLev–
 = 
uiWidthInB™
 >ð
uiTrSizeInB™
 ? uiWidthInBit - uiTrSizeInBit : 0;

561 ifÐ
eMode
 =ð
SIZE_NxN
 )

563 
pcCU
->
	`£tTrIdxSubP¬ts
Ð1+
uiTrLev–
, 
uiAbsP¬tIdx
, 
uiD•th
 );

567 
pcCU
->
	`£tTrIdxSubP¬ts
Ð
uiTrLev–
, 
uiAbsP¬tIdx
, 
uiD•th
 );

572 
UIÁ
 
uiMaxNumB™s
 = 2;

574 ifÐ
uiD•th
 =ð
log2DiffMaxMšCodšgBlockSize
 && !Ð
cuWidth
 =ð8 && 
cuHeight
 == 8 ) )

576 
uiMaxNumB™s
 ++;

579  
UIÁ
 
ui
 = 0; u˜< 
uiMaxNumB™s
; ui++ )

581 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUP¬tSizeSCMod–
.
	`g‘
Ð0, 0, 
ui
è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

582 iàÐ
uiSymbÞ
 )

586 
uiMode
++;

588 
eMode
 = (
P¬tSize
è
uiMode
;

589 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£AMP
(è&& 
uiD•th
 < 
log2DiffMaxMšCodšgBlockSize
 )

591 ià(
eMode
 =ð
SIZE_2NxN
)

593 
m_pcTDecBšIf
->
	`decodeBš
(
uiSymbÞ
, 
m_cCUP¬tSizeSCMod–
.
	`g‘
Ð0, 0, 3 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
));

594 ià(
uiSymbÞ
 == 0)

596 
m_pcTDecBšIf
->
	`decodeBšEP
(
uiSymbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

597 
eMode
 = (
uiSymbÞ
 =ð0? 
SIZE_2NxnU
 : 
SIZE_2NxnD
);

600 ià(
eMode
 =ð
SIZE_Nx2N
)

602 
m_pcTDecBšIf
->
	`decodeBš
(
uiSymbÞ
, 
m_cCUP¬tSizeSCMod–
.
	`g‘
Ð0, 0, 3 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

603 ià(
uiSymbÞ
 == 0)

605 
m_pcTDecBšIf
->
	`decodeBšEP
(
uiSymbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

606 
eMode
 = (
uiSymbÞ
 =ð0? 
SIZE_nLx2N
 : 
SIZE_nRx2N
);

611 
pcCU
->
	`£tP¬tSizeSubP¬ts
Ð
eMode
, 
uiAbsP¬tIdx
, 
uiD•th
 );

612 
pcCU
->
	`£tSizeSubP¬ts
Ð
cuWidth
, 
cuHeight
, 
uiAbsP¬tIdx
, 
uiD•th
 );

613 
	}
}

622 
Void
 
	gTDecSbac
::
	$·r£P»dMode
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

624 ifÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
() )

626 
pcCU
->
	`£tP»dModeSubP¬ts
Ð
MODE_INTRA
, 
uiAbsP¬tIdx
, 
uiD•th
 );

630 
UIÁ
 
uiSymbÞ
;

631 
IÁ
 
iP»dMode
 = 
MODE_INTER
;

632 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUP»dModeSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__PRED_MODE
) );

633 
iP»dMode
 +ð
uiSymbÞ
;

634 
pcCU
->
	`£tP»dModeSubP¬ts
Ð(
P»dMode
)
iP»dMode
, 
uiAbsP¬tIdx
, 
uiD•th
 );

635 
	}
}

638 
Void
 
	gTDecSbac
::
	$·r£IÁ¿DœLumaAng
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
 )

640 
P¬tSize
 
mode
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
absP¬tIdx
 );

641 
UIÁ
 
·¹Num
 = 
mode
==
SIZE_NxN
?4:1;

642 
UIÁ
 
·¹Off£t
 = ( 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> (…cCU->
	`g‘D•th
(
absP¬tIdx
) << 1 ) ) >> 2;

643 
UIÁ
 
mpmP»d
[4],
symbÞ
;

644 
IÁ
 
j
,
šŒaP»dMode
;

645 ià(
mode
==
SIZE_NxN
)

647 
d•th
++;

649 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


650 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__INTRA_DIR_ANG
, 
g_aucCÚv”tToB™
[
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
d•th
]+2, 
CHANNEL_TYPE_LUMA
);

652 
j
=0;j<
·¹Num
;j++)

654 
m_pcTDecBšIf
->
	`decodeBš
Ð
symbÞ
, 
m_cCUIÁ¿P»dSCMod–
.
	`g‘
Ð0, 0, 0è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

655 
mpmP»d
[
j
] = 
symbÞ
;

657 
j
=0;j<
·¹Num
;j++)

659 
IÁ
 
´eds
[
NUM_MOST_PROBABLE_MODES
] = {-1, -1, -1};

660 
pcCU
->
	`g‘IÁ¿DœP»diùÜ
(
absP¬tIdx
+
·¹Off£t
*
j
, 
´eds
, 
COMPONENT_Y
);

661 ià(
mpmP»d
[
j
])

663 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
symbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

664 ià(
symbÞ
)

666 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
symbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

667 
symbÞ
++;

669 
šŒaP»dMode
 = 
´eds
[
symbÞ
];

673 
m_pcTDecBšIf
->
	`decodeBšsEP
Ð
symbÞ
, 5 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

674 
šŒaP»dMode
 = 
symbÞ
;

677 ià(
´eds
[0] >…reds[1])

679 
¡d
::
	`sw­
(
´eds
[0],…reds[1]);

681 ià(
´eds
[0] >…reds[2])

683 
¡d
::
	`sw­
(
´eds
[0],…reds[2]);

685 ià(
´eds
[1] >…reds[2])

687 
¡d
::
	`sw­
(
´eds
[1],…reds[2]);

689  
UIÁ
 
i
 = 0; i < 
NUM_MOST_PROBABLE_MODES
; i++ )

691 
šŒaP»dMode
 +ðÐšŒaP»dMod>ð
´eds
[
i
] );

694 
pcCU
->
	`£tIÁ¿DœSubP¬ts
(
CHANNEL_TYPE_LUMA
, (
UCh¬
)
šŒaP»dMode
, 
absP¬tIdx
+
·¹Off£t
*
j
, 
d•th
 );

696 
	}
}

699 
Void
 
	gTDecSbac
::
	$·r£IÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

701 
UIÁ
 
uiSymbÞ
;

702 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


703 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__INTRA_DIR_ANG
, 
g_aucCÚv”tToB™
[
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
uiD•th
]+2, 
CHANNEL_TYPE_CHROMA
);

706 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, 
m_cCUChromaP»dSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

707 ifÐ
uiSymbÞ
 == 0 )

709 
uiSymbÞ
 = 
DM_CHROMA_IDX
;

713 
UIÁ
 
uiIP»dMode
;

714 
m_pcTDecBšIf
->
	`decodeBšsEP
Ð
uiIP»dMode
, 2 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

715 
UIÁ
 
uiAÎowedChromaDœ
[ 
NUM_CHROMA_MODE
 ];

716 
pcCU
->
	`g‘AÎowedChromaDœ
Ð
uiAbsP¬tIdx
, 
uiAÎowedChromaDœ
 );

717 
uiSymbÞ
 = 
uiAÎowedChromaDœ
[ 
uiIP»dMode
 ];

720 
pcCU
->
	`£tIÁ¿DœSubP¬ts
Ð
CHANNEL_TYPE_CHROMA
, 
uiSymbÞ
, 
uiAbsP¬tIdx
, 
uiD•th
 );

721 
	}
}

724 
Void
 
	gTDecSbac
::
	$·r£IÁ”Dœ
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiIÁ”Dœ
, UIÁ 
uiAbsP¬tIdx
 )

726 
UIÁ
 
uiSymbÞ
;

727 cÚ¡ 
UIÁ
 
uiCtx
 = 
pcCU
->
	`g‘CtxIÁ”Dœ
Ð
uiAbsP¬tIdx
 );

728 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCUIÁ”DœSCMod–
.
	`g‘
( 0 );

730 
uiSymbÞ
 = 0;

731 ià(
pcCU
->
	`g‘P¬t™iÚSize
(
uiAbsP¬tIdx
è=ð
SIZE_2Nx2N
 ||…cCU->
	`g‘Height
(uiAbsPartIdx) != 8 )

733 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *Ð
pCtx
 + 
uiCtx
 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__INTER_DIR
) );

736 ifÐ
uiSymbÞ
 )

738 
uiSymbÞ
 = 2;

742 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *Ð
pCtx
 + 4 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__INTER_DIR
) );

743 
	`as£¹
(
uiSymbÞ
 == 0 || uiSymbol == 1);

746 
uiSymbÞ
++;

747 
ruiIÁ”Dœ
 = 
uiSymbÞ
;

749 
	}
}

751 
Void
 
	gTDecSbac
::
	$·r£RefFrmIdx
Ð
TComD©aCU
* 
pcCU
, 
IÁ
& 
riRefFrmIdx
, 
RefPicLi¡
 
eRefLi¡
 )

753 
UIÁ
 
uiSymbÞ
;

755 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCURefPicSCMod–
.
	`g‘
( 0 );

756 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__REF_FRM_IDX
) );

758 ifÐ
uiSymbÞ
 )

760 
UIÁ
 
uiRefNum
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
eRefLi¡
 ) - 2;

761 
pCtx
++;

762 
UIÁ
 
ui
;

763  
ui
 = 0; u˜< 
uiRefNum
; ++ui )

765 ifÐ
ui
 == 0 )

767 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__REF_FRM_IDX
) );

771 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiSymbÞ
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__REF_FRM_IDX
) );

773 ifÐ
uiSymbÞ
 == 0 )

778 
uiSymbÞ
 = 
ui
 + 1;

780 
riRefFrmIdx
 = 
uiSymbÞ
;

783 
	}
}

785 
Void
 
	gTDecSbac
::
	$·r£Mvd
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
, 
RefPicLi¡
 
eRefLi¡
 )

787 
UIÁ
 
uiSymbÞ
;

788 
UIÁ
 
uiHÜAbs
;

789 
UIÁ
 
uiV”Abs
;

790 
UIÁ
 
uiHÜSign
 = 0;

791 
UIÁ
 
uiV”Sign
 = 0;

792 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCUMvdSCMod–
.
	`g‘
( 0 );

794 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
(è&& 
eRefLi¡
 =ð
REF_PIC_LIST_1
 &&…cCU->
	`g‘IÁ”Dœ
(
uiAbsP¬tIdx
)==3)

796 
uiHÜAbs
=0;

797 
uiV”Abs
=0;

801 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiHÜAbs
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD
) );

802 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiV”Abs
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD
) );

804 cÚ¡ 
BoÞ
 
bHÜAbsGr0
 = 
uiHÜAbs
 != 0;

805 cÚ¡ 
BoÞ
 
bV”AbsGr0
 = 
uiV”Abs
 != 0;

806 
pCtx
++;

808 ifÐ
bHÜAbsGr0
 )

810 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD
) );

811 
uiHÜAbs
 +ð
uiSymbÞ
;

814 ifÐ
bV”AbsGr0
 )

816 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
, *
pCtx
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD
) );

817 
uiV”Abs
 +ð
uiSymbÞ
;

820 ifÐ
bHÜAbsGr0
 )

822 ifÐ2 =ð
uiHÜAbs
 )

824 
	`xR—dEpExGÞomb
Ð
uiSymbÞ
, 1 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD_EP
) );

825 
uiHÜAbs
 +ð
uiSymbÞ
;

828 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiHÜSign
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD_EP
) );

831 ifÐ
bV”AbsGr0
 )

833 ifÐ2 =ð
uiV”Abs
 )

835 
	`xR—dEpExGÞomb
Ð
uiSymbÞ
, 1 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD_EP
) );

836 
uiV”Abs
 +ð
uiSymbÞ
;

839 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiV”Sign
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__MVD_EP
) );

844 cÚ¡ 
TComMv
 
	`cMv
Ð
uiHÜSign
 ? -
	`IÁ
Ð
uiHÜAbs
 ): uiHÜAbs, 
uiV”Sign
 ? -IÁÐ
uiV”Abs
 ) : uiVerAbs );

845 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 )->
	`£tAÎMvd
Ð
cMv
,…cCU->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 ), uiAbsP¬tIdx, 
uiD•th
, 
uiP¬tIdx
 );

847 
	}
}

849 
Void
 
	gTDecSbac
::
	$·r£CrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 )

851 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

853 ifÐ
	`isLuma
(
compID
è|| !
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
() )

858 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

860 ià(!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
è|| (pcCU->
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_CHROMA
, uiAbsP¬tIdx ) =ð
DM_CHROMA_IDX
))

862 
SCh¬
 
®pha
 = 0;

863 
UIÁ
 
symbÞ
 = 0;

865 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

866 
	`DTRACE_CABAC_T
("\tparseCrossComponentPrediction()")

867 
	`DTRACE_CABAC_T
( "\tAddr=" )

868 
	`DTRACE_CABAC_V
Ð
compID
 )

869 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

870 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 )

871 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


872 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__CROSS_COMPONENT_PREDICTION
, (
g_aucCÚv”tToB™
[
rTu
.
	`g‘Reù
(
compID
).
width
] + 2), compID);

874 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCrossCompÚ’tP»diùiÚSCMod–
.
	`g‘
(0, 0è+ ((
compID
 =ð
COMPONENT_Cr
è? (
NUM_CROSS_COMPONENT_PREDICTION_CTX
 >> 1) : 0);

875 
m_pcTDecBšIf
->
	`decodeBš
Ð
symbÞ
, 
pCtx
[0] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

877 if(
symbÞ
 != 0)

880 
UIÁ
 
sign
 = 0;

881 
m_pcTDecBšIf
->
	`decodeBš
Ð
symbÞ
, 
pCtx
[1] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

883 ià(
symbÞ
 != 0)

887 
	`xR—dUÇryMaxSymbÞ
Ð
symbÞ
, (
pCtx
 + 2), 1, 2 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

888 
symbÞ
 += 1;

890 
m_pcTDecBšIf
->
	`decodeBš
Ð
sign
, 
pCtx
[4] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

892 
®pha
 = (
sign
 !ð0è? -(1 << 
symbÞ
) : (1 << symbol);

894 
	`DTRACE_CABAC_T
( "\tAlpha=" )

895 
	`DTRACE_CABAC_V
Ð
®pha
 )

896 
	`DTRACE_CABAC_T
( "\n" )

898 
pcCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
Ð
®pha
, 
compID
, 
uiAbsP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
( compID ) );

900 
	}
}

902 
Void
 
	gTDecSbac
::
	$·r£T¿nsfÜmSubdivFÏg
Ð
UIÁ
& 
ruiSubdivFÏg
, UIÁ 
uiLog2T¿nsfÜmBlockSize
 )

904 
m_pcTDecBšIf
->
	`decodeBš
Ð
ruiSubdivFÏg
, 
m_cCUT¿nsSubdivFÏgSCMod–
.
	`g‘
Ð0, 0, 
uiLog2T¿nsfÜmBlockSize
 )

905 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
	`TComCodšgSti¡icsCÏssTy³
(
STATS__CABAC_BITS__TRANSFORM_SUBDIV_FLAG
, 5-
uiLog2T¿nsfÜmBlockSize
))

907 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

908 
	`DTRACE_CABAC_T
( "\tparseTransformSubdivFlag()" )

909 
	`DTRACE_CABAC_T
( "\tsymbol=" )

910 
	`DTRACE_CABAC_V
Ð
ruiSubdivFÏg
 )

911 
	`DTRACE_CABAC_T
( "\tctx=" )

912 
	`DTRACE_CABAC_V
Ð
uiLog2T¿nsfÜmBlockSize
 )

913 
	`DTRACE_CABAC_T
( "\n" )

914 
	}
}

916 
Void
 
	gTDecSbac
::
	$·r£QtRoÙCbf
Ð
UIÁ
 
uiAbsP¬tIdx
, UIÁ& 
uiQtRoÙCbf
 )

918 
UIÁ
 
uiSymbÞ
;

919 cÚ¡ 
UIÁ
 
uiCtx
 = 0;

920 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSymbÞ
 , 
m_cCUQtRoÙCbfSCMod–
.
	`g‘
Ð0, 0, 
uiCtx
 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__QT_ROOT_CBF
) );

921 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

922 
	`DTRACE_CABAC_T
( "\tparseQtRootCbf()" )

923 
	`DTRACE_CABAC_T
( "\tsymbol=" )

924 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 )

925 
	`DTRACE_CABAC_T
( "\tctx=" )

926 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

927 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

928 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 )

929 
	`DTRACE_CABAC_T
( "\n" )

931 
uiQtRoÙCbf
 = 
uiSymbÞ
;

932 
	}
}

934 
Void
 
	gTDecSbac
::
	$·r£D–QP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

936 
IÁ
 
qp
;

937 
UIÁ
 
uiDQp
;

938 
IÁ
 
iDQp
;

940 
UIÁ
 
uiSymbÞ
;

942 
	`xR—dUÇryMaxSymbÞ
 (
uiDQp
, &
m_cCUD–QpSCMod–
.
	`g‘
Ð0, 0, 0 ), 1, 
CU_DQP_TU_CMAX
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__DELTA_QP_EP
) );

944 ifÐ
uiDQp
 >ð
CU_DQP_TU_CMAX
)

946 
	`xR—dEpExGÞomb
Ð
uiSymbÞ
, 
CU_DQP_EG_k
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__DELTA_QP_EP
));

947 
uiDQp
+=
uiSymbÞ
;

950 iàÐ
uiDQp
 > 0 )

952 
UIÁ
 
uiSign
;

953 
IÁ
 
qpBdOff£tY
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
);

954 
m_pcTDecBšIf
->
	`decodeBšEP
(
uiSign
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__DELTA_QP_EP
));

955 
iDQp
 = 
uiDQp
;

956 if(
uiSign
)

958 
iDQp
 = -iDQp;

960 
qp
 = (((
IÁ
è
pcCU
->
	`g‘RefQP
Ð
uiAbsP¬tIdx
 ) + 
iDQp
 + 52 + 2*
qpBdOff£tY
 )%(52+qpBdOffsetY)) - qpBdOffsetY;

964 
qp
 = 
pcCU
->
	`g‘RefQP
(
uiAbsP¬tIdx
);

967 
pcCU
->
	`£tQPSubP¬ts
(
qp
, 
uiAbsP¬tIdx
, 
uiD•th
);

968 
pcCU
->
	`£tCodedQP
(
qp
);

969 
	}
}

974 
Void
 
	gTDecSbac
::
	$·r£ChromaQpAdju¡m’t
Ð
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
 )

976 
UIÁ
 
symbÞ
;

977 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


978 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__CHROMA_QP_ADJUSTMENT
, 
g_aucCÚv”tToB™
[
cu
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
d•th
]+2, 
CHANNEL_TYPE_CHROMA
);

981 
IÁ
 
chromaQpOff£tLi¡L’
 = 
cu
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡L’
();

984 
m_pcTDecBšIf
->
	`decodeBš
Ð
symbÞ
, 
m_ChromaQpAdjFÏgSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

986 ià(
symbÞ
 && 
chromaQpOff£tLi¡L’
 > 1)

989 
	`xR—dUÇryMaxSymbÞ
Ð
symbÞ
, &
m_ChromaQpAdjIdcSCMod–
.
	`g‘
Ð0, 0, 0 ), 0, 
chromaQpOff£tLi¡L’
 - 1 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

990 
symbÞ
++;

995 
cu
->
	`£tChromaQpAdjSubP¬ts
Ð
symbÞ
, 
absP¬tIdx
, 
d•th
 );

996 
cu
->
	`£tCodedChromaQpAdj
(
symbÞ
);

997 
	}
}

999 
Void
 
	gTDecSbac
::
	$·r£QtCbf
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 )

1001 
TComD©aCU
* 
pcCU
 = 
rTu
.
	`g‘CU
();

1003 cÚ¡ 
UIÁ
 
absP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

1004 cÚ¡ 
UIÁ
 
TUD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1005 cÚ¡ 
UIÁ
 
uiCtx
 = 
pcCU
->
	`g‘CtxQtCbf
Ð
rTu
, 
	`toChªÃlTy³
(
compID
) );

1006 cÚ¡ 
UIÁ
 
cÚ‹xtS‘
 = 
	`toChªÃlTy³
(
compID
);

1008 cÚ¡ 
UIÁ
 
width
 = 
rTu
.
	`g‘Reù
(
compID
).width;

1009 cÚ¡ 
UIÁ
 
height
 = 
rTu
.
	`g‘Reù
(
compID
).height;

1010 cÚ¡ 
BoÞ
 
ÿnQuadS¶™
 = (
width
 >ð(
MIN_TU_SIZE
 * 2)è&& (
height
 >= (MIN_TU_SIZE * 2));

1011 cÚ¡ 
UIÁ
 
cov”edP¬tIdxes
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
);

1027 cÚ¡ 
UIÁ
 
lowe¡TUD•th
 = 
TUD•th
 + ((!
lowe¡Lev–
 && !
ÿnQuadS¶™
) ? 1 : 0);

1028 
UIÁ
 
lowe¡TUCBF
 = 0;

1030 ià((
width
 !ð
height
è&& (
lowe¡Lev–
 || !
ÿnQuadS¶™
))

1032 cÚ¡ 
UIÁ
 
subTUD•th
 = 
lowe¡TUD•th
 + 1;

1033 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
) >> 1;

1035 
UIÁ
 
combšedSubTUCBF
 = 0;

1037 
UIÁ
 
subTU
 = 0; subTU < 2; subTU++)

1039 
UIÁ
 
uiCbf
 = 
MAX_UINT
;

1040 
m_pcTDecBšIf
->
	`decodeBš
(
uiCbf
, 
m_cCUQtCbfSCMod–
.
	`g‘
(0, 
cÚ‹xtS‘
, 
uiCtx
è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
	`TComCodšgSti¡icsCÏssTy³
(
STATS__CABAC_BITS__QT_CBF
, 
g_aucCÚv”tToB™
[
rTu
.
	`g‘Reù
(
compID
).
width
]+2, compID)));

1042 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
absP¬tIdx
 + (
subTU
 * 
·¹IdxesP”SubTU
);

1043 
pcCU
->
	`£tCbfP¬tRªge
((
uiCbf
 << 
subTUD•th
), 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

1044 
combšedSubTUCBF
 |ð
uiCbf
;

1046 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1047 
	`DTRACE_CABAC_T
( "\tparseQtCbf()" )

1048 
	`DTRACE_CABAC_T
( "\tsub-TU=" )

1049 
	`DTRACE_CABAC_V
Ð
subTU
 )

1050 
	`DTRACE_CABAC_T
( "\tsymbol=" )

1051 
	`DTRACE_CABAC_V
Ð
uiCbf
 )

1052 
	`DTRACE_CABAC_T
( "\tctx=" )

1053 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

1054 
	`DTRACE_CABAC_T
( "\tetype=" )

1055 
	`DTRACE_CABAC_V
Ð
compID
 )

1056 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

1057 
	`DTRACE_CABAC_V
Ð
subTUAbsP¬tIdx
 )

1058 
	`DTRACE_CABAC_T
( "\n" )

1062 ià(
combšedSubTUCBF
 != 0)

1064 
pcCU
->
	`b™wi£OrCbfP¬tRªge
((
combšedSubTUCBF
 << 
lowe¡TUD•th
), 
compID
, 
absP¬tIdx
, 
cov”edP¬tIdxes
);

1065 
lowe¡TUCBF
 = 
combšedSubTUCBF
;

1070 
UIÁ
 
uiCbf
 = 
MAX_UINT
;

1071 
m_pcTDecBšIf
->
	`decodeBš
(
uiCbf
, 
m_cCUQtCbfSCMod–
.
	`g‘
(0, 
cÚ‹xtS‘
, 
uiCtx
è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
	`TComCodšgSti¡icsCÏssTy³
(
STATS__CABAC_BITS__QT_CBF
, 
g_aucCÚv”tToB™
[
rTu
.
	`g‘Reù
(
compID
).
width
]+2, compID)));

1073 
pcCU
->
	`£tCbfSubP¬ts
((
uiCbf
 << 
lowe¡TUD•th
), 
compID
, 
absP¬tIdx
, 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®Adj
(compID));

1075 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1076 
	`DTRACE_CABAC_T
( "\tparseQtCbf()" )

1077 
	`DTRACE_CABAC_T
( "\tsymbol=" )

1078 
	`DTRACE_CABAC_V
Ð
uiCbf
 )

1079 
	`DTRACE_CABAC_T
( "\tctx=" )

1080 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

1081 
	`DTRACE_CABAC_T
( "\tetype=" )

1082 
	`DTRACE_CABAC_V
Ð
compID
 )

1083 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

1084 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
) )

1085 
	`DTRACE_CABAC_T
( "\n" )

1087 
lowe¡TUCBF
 = 
uiCbf
;

1091 ià(
lowe¡TUCBF
 != 0)

1093 
UIÁ
 
d•th
 = 
TUD•th
; d•th < 
lowe¡TUD•th
; depth++)

1095 
pcCU
->
	`b™wi£OrCbfP¬tRªge
((
lowe¡TUCBF
 << 
d•th
), 
compID
, 
absP¬tIdx
, 
cov”edP¬tIdxes
);

1098 
	}
}

1101 
Void
 
	gTDecSbac
::
	$·r£T¿nsfÜmSkFÏgs
 (
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
)

1103 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1104 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
(
compÚ’t
);

1106 ià(
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
))

1111 ià(!
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
compÚ’t
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
()))

1116 
UIÁ
 
u£T¿nsfÜmSk
;

1118 
m_pcTDecBšIf
->
	`decodeBš
Ð
u£T¿nsfÜmSk
 , 
m_cT¿nsfÜmSkSCMod–
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
), 0 )

1119 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
	`TComCodšgSti¡icsCÏssTy³
(
STATS__CABAC_BITS__TRANSFORM_SKIP_FLAGS
, 
compÚ’t
))

1122 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1123 
	`DTRACE_CABAC_T
("\tparseTransformSkip()");

1124 
	`DTRACE_CABAC_T
( "\tsymbol=" )

1125 
	`DTRACE_CABAC_V
Ð
u£T¿nsfÜmSk
 )

1126 
	`DTRACE_CABAC_T
( "\tAddr=" )

1127 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() )

1128 
	`DTRACE_CABAC_T
( "\tetype=" )

1129 
	`DTRACE_CABAC_V
Ð
compÚ’t
 )

1130 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

1131 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘AbsP¬tIdxTU
() )

1132 
	`DTRACE_CABAC_T
( "\n" )

1134 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
Ð
u£T¿nsfÜmSk
, 
compÚ’t
, 
uiAbsP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(component));

1135 
	}
}

1148 
Void
 
	gTDecSbac
::
	$·r£La¡SignifiÿÁXY
Ð
UIÁ
& 
uiPosLa¡X
, UIÁ& 
uiPosLa¡Y
, 
IÁ
 
width
, IÁ 
height
, 
CompÚ’tID
 
compÚ’t
, UIÁ 
uiSÿnIdx
 )

1150 
UIÁ
 
uiLa¡
;

1152 
CÚ‹xtMod–
 *
pCtxX
 = 
m_cCuCtxLa¡X
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
) );

1153 
CÚ‹xtMod–
 *
pCtxY
 = 
m_cCuCtxLa¡Y
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
) );

1155 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


1156 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__CABAC_BITS__LAST_SIG_X_Y
, 
g_aucCÚv”tToB™
[
width
]+2, 
compÚ’t
);

1160 iàÐ
uiSÿnIdx
 =ð
SCAN_VER
 )

1162 
	`sw­
Ð
width
, 
height
 );

1165 
IÁ
 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
;

1166 
	`g‘La¡SignifiÿÁCÚ‹xtP¬am‘”s
(
compÚ’t
, 
width
, 
height
, 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
);

1172  
uiPosLa¡X
 = 0; uiPosLa¡X < 
g_uiGroupIdx
[ 
width
 - 1 ]; uiPosLastX++ )

1174 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiLa¡
, *Ð
pCtxX
 + 
blkSizeOff£tX
 + (
uiPosLa¡X
 >>
shiáX
èè
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

1176 ifÐ!
uiLa¡
 )

1184  
uiPosLa¡Y
 = 0; uiPosLa¡Y < 
g_uiGroupIdx
[ 
height
 - 1 ]; uiPosLastY++ )

1186 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiLa¡
, *Ð
pCtxY
 + 
blkSizeOff£tY
 + (
uiPosLa¡Y
 >>
shiáY
)è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

1188 ifÐ!
uiLa¡
 )

1196 iàÐ
uiPosLa¡X
 > 3 )

1198 
UIÁ
 
uiTemp
 = 0;

1199 
UIÁ
 
uiCouÁ
 = ( 
uiPosLa¡X
 - 2 ) >> 1;

1200  
IÁ
 
i
 = 
uiCouÁ
 - 1; i >= 0; i-- )

1202 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiLa¡
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

1203 
uiTemp
 +ð
uiLa¡
 << 
i
;

1205 
uiPosLa¡X
 = 
g_uiMšInGroup
[ uiPosLa¡X ] + 
uiTemp
;

1207 iàÐ
uiPosLa¡Y
 > 3 )

1209 
UIÁ
 
uiTemp
 = 0;

1210 
UIÁ
 
uiCouÁ
 = ( 
uiPosLa¡Y
 - 2 ) >> 1;

1211  
IÁ
 
i
 = 
uiCouÁ
 - 1; i >= 0; i-- )

1213 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiLa¡
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
) );

1214 
uiTemp
 +ð
uiLa¡
 << 
i
;

1216 
uiPosLa¡Y
 = 
g_uiMšInGroup
[ uiPosLa¡Y ] + 
uiTemp
;

1219 ifÐ
uiSÿnIdx
 =ð
SCAN_VER
 )

1221 
	`sw­
Ð
uiPosLa¡X
, 
uiPosLa¡Y
 );

1223 
	}
}

1225 
Void
 
	gTDecSbac
::
	$·r£CÛffNxN
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 )

1227 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1228 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

1229 cÚ¡ 
TComReùªgË
 &
rReù
=
rTu
.
	`g‘Reù
(
compID
);

1230 cÚ¡ 
UIÁ
 
uiWidth
=
rReù
.
width
;

1231 cÚ¡ 
UIÁ
 
uiHeight
=
rReù
.
height
;

1232 
TCÛff
* 
pcCÛf
=(
pcCU
->
	`g‘CÛff
(
compID
)+
rTu
.
	`g‘CÛffic›ÁOff£t
(compID));

1233 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

1235 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1236 
	`DTRACE_CABAC_T
( "\tparseCoeffNxN()\teType=" )

1237 
	`DTRACE_CABAC_V
Ð
compID
 )

1238 
	`DTRACE_CABAC_T
( "\twidth=" )

1239 
	`DTRACE_CABAC_V
Ð
uiWidth
 )

1240 
	`DTRACE_CABAC_T
( "\theight=" )

1241 
	`DTRACE_CABAC_V
Ð
uiHeight
 )

1242 
	`DTRACE_CABAC_T
( "\tdepth=" )

1244 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
() )

1245 
	`DTRACE_CABAC_T
( "\tabspartidx=" )

1247 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
) )

1248 
	`DTRACE_CABAC_T
( "\ttoCU-X=" )

1249 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CUP–X
() )

1250 
	`DTRACE_CABAC_T
( "\ttoCU-Y=" )

1251 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CUP–Y
() )

1252 
	`DTRACE_CABAC_T
( "\tCU-addr=" )

1253 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() )

1254 
	`DTRACE_CABAC_T
( "\tinCU-X=" )

1256 
	`DTRACE_CABAC_V
Ð
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
)] ] )

1257 
	`DTRACE_CABAC_T
( "\tinCU-Y=" )

1259 
	`DTRACE_CABAC_V
Ð
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
)] ] )

1260 
	`DTRACE_CABAC_T
( "\tpredmode=" )

1261 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘P»diùiÚMode
Ð
uiAbsP¬tIdx
 ) )

1262 
	`DTRACE_CABAC_T
( "\n" )

1266 ifÐ
uiWidth
 > 
¥s
.
	`g‘MaxTrSize
() )

1268 
¡d
::
û¼
 << "ERROR:…¬£CÛffNxN wa ·s£d‡ TU w™h dim’siÚ Ïrg”hªhmaximum‡Îowed size" << std::
’dl
;

1269 
	`as£¹
(
çl£
);

1270 
	`ex™
(1);

1277 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

1278 cÚ¡ 
UIÁ
 
uiLog2BlockWidth
 = 
g_aucCÚv”tToB™
[ 
uiWidth
 ] + 2;

1279 cÚ¡ 
UIÁ
 
uiLog2BlockHeight
 = 
g_aucCÚv”tToB™
[ 
uiHeight
 ] + 2;

1280 cÚ¡ 
UIÁ
 
uiMaxNumCÛff
 = 
uiWidth
 * 
uiHeight
;

1281 cÚ¡ 
UIÁ
 
uiMaxNumCÛffM1
 = 
uiMaxNumCÛff
 - 1;

1283 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = 
	`toChªÃlTy³
(
compID
);

1284 cÚ¡ 
BoÞ
 
ex‹ndedP»cisiÚ
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
();

1286 cÚ¡ 
BoÞ
 
®ignCABACBefÜeBy·ss
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘CabacBy·ssAlignm’tEÇbËdFÏg
();

1287 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
¥s
.
	`g‘MaxLog2TrDyÇmicRªge
(
chªÃlTy³
);

1289 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


1290 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_group
(
STATS__CABAC_BITS__SIG_COEFF_GROUP_FLAG
, 
uiLog2BlockWidth
, 
compID
);

1291 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_m­
(
STATS__CABAC_BITS__SIG_COEFF_MAP_FLAG
, 
uiLog2BlockWidth
, 
compID
);

1292 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_gt1
(
STATS__CABAC_BITS__GT1_FLAG
, 
uiLog2BlockWidth
, 
compID
);

1293 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_gt2
(
STATS__CABAC_BITS__GT2_FLAG
, 
uiLog2BlockWidth
, 
compID
);

1296 
BoÞ
 
beV®id
;

1297 ià(
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
))

1299 
beV®id
 = 
çl£
;

1300 if((!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
)è&&…cCU->
	`isRDPCMEÇbËd
(uiAbsPartIdx))

1302 
	`·r£Ex¶ic™RdpcmMode
(
rTu
, 
compID
);

1307 
beV®id
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘SignD©aHidšgEÇbËdFÏg
();

1310 
UIÁ
 
absSum
 = 0;

1314 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
())

1316 
	`·r£T¿nsfÜmSkFÏgs
(
rTu
, 
compID
);

1318 if(
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
è&& (!pcCU->
	`isIÁ¿
(uiAbsP¬tIdx)è&&…cCU->
	`isRDPCMEÇbËd
(uiAbsPartIdx) )

1320 
	`·r£Ex¶ic™RdpcmMode
(
rTu
, 
compID
);

1321 if(
pcCU
->
	`g‘Ex¶ic™RdpcmMode
(
compID
, 
uiAbsP¬tIdx
è!ð
RDPCM_OFF
)

1324 
beV®id
 = 
çl£
;

1329 
IÁ
 
uiIÁ¿Mode
 = -1;

1330 cÚ¡ 
BoÞ
 
bIsLuma
 = 
	`isLuma
(
compID
);

1331 
IÁ
 
isIÁ¿
 = 
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
) ? 1 : 0;

1332 iàÐ
isIÁ¿
 && 
pcCU
->
	`isRDPCMEÇbËd
(
uiAbsP¬tIdx
) )

1334 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
.
	`g‘MaxTÙ®CUD•th
(è- sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

1335 
uiIÁ¿Mode
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
	`toChªÃlTy³
(
compID
), 
uiAbsP¬tIdx
 );

1336 
uiIÁ¿Mode
 = (uiIÁ¿Mode==
DM_CHROMA_IDX
 && !
bIsLuma
è? 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
rTu
.
	`G‘ChromaFÜm©
(), 
·¹sP”MšCU
)) : uiIntraMode;

1337 
uiIÁ¿Mode
 = ((
rTu
.
	`G‘ChromaFÜm©
(è=ð
CHROMA_422
è&& !
bIsLuma
è? 
g_chroma422IÁ¿AngËM­pšgTabË
[uiIntraMode] : uiIntraMode;

1339 
BoÞ
 
ŒªsfÜmSk
 = 
pcCU
->
	`g‘T¿nsfÜmSk
Ð
uiAbsP¬tIdx
,
compID
);

1340 
BoÞ
 
rdpcm_lossy
 = ( 
ŒªsfÜmSk
 && ( (
uiIÁ¿Mode
 =ð
HOR_IDX
è|| (uiIÁ¿Mod=ð
VER_IDX
) ) );

1341 iàÐ
rdpcm_lossy
 )

1343 
beV®id
 = 
çl£
;

1349 cÚ¡ 
BoÞ
 
bU£GÞombRiûP¬am‘”Ad­tiÚ
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
();

1350 
UIÁ
 &
cu¼’tGÞombRiûSti¡ic
 = 
m_gÞombRiûAd­tiÚSti¡ics
[
rTu
.
	`g‘GÞombRiûSti¡icsIndex
(
compID
)];

1353 
TUEÁrÝyCodšgP¬am‘”s
 
codšgP¬am‘”s
;

1354 
	`g‘TUEÁrÝyCodšgP¬am‘”s
(
codšgP¬am‘”s
, 
rTu
, 
compID
);

1357 
UIÁ
 
uiPosLa¡X
, 
uiPosLa¡Y
;

1358 
	`·r£La¡SignifiÿÁXY
Ð
uiPosLa¡X
, 
uiPosLa¡Y
, 
uiWidth
, 
uiHeight
, 
compID
, 
codšgP¬am‘”s
.
sÿnTy³
 );

1359 
UIÁ
 
uiBlkPosLa¡
 = 
uiPosLa¡X
 + (
uiPosLa¡Y
<<
uiLog2BlockWidth
);

1360 
pcCÛf
[ 
uiBlkPosLa¡
 ] = 1;

1363 
UIÁ
 
uiSÿnPosLa¡
;

1364  
uiSÿnPosLa¡
 = 0; uiSÿnPosLa¡ < 
uiMaxNumCÛffM1
; uiScanPosLast++ )

1366 
UIÁ
 
uiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
uiSÿnPosLa¡
 ];

1367 ifÐ
uiBlkPosLa¡
 =ð
uiBlkPos
 )

1373 
CÚ‹xtMod–
 * cÚ¡ 
ba£CÛffGroupCtx
 = 
m_cCUSigCÛffGroupSCMod–
.
	`g‘
Ð0, 
	`isChroma
(
chTy³
) );

1374 
CÚ‹xtMod–
 * cÚ¡ 
ba£Ctx
 = 
m_cCUSigSCMod–
.
	`g‘
Ð0, 0 ) + 
	`g‘SignifiÿnûM­CÚ‹xtOff£t
(
compID
);

1376 cÚ¡ 
IÁ
 
iLa¡SÿnS‘
 = 
uiSÿnPosLa¡
 >> 
MLS_CG_SIZE
;

1377 
UIÁ
 
c1
 = 1;

1378 
UIÁ
 
uiGoRiûP¬am
 = 0;

1381 
UIÁ
 
uiSigCÛffGroupFÏg
[ 
MLS_GRP_NUM
 ];

1382 
	`mem£t
Ð
uiSigCÛffGroupFÏg
, 0, (
UIÁ
è* 
MLS_GRP_NUM
 );

1384 
IÁ
 
iSÿnPosSig
 = (IÁè
uiSÿnPosLa¡
;

1385  
IÁ
 
iSubS‘
 = 
iLa¡SÿnS‘
; iSubSet >= 0; iSubSet-- )

1387 
IÁ
 
iSubPos
 = 
iSubS‘
 << 
MLS_CG_SIZE
;

1388 
uiGoRiûP¬am
 = 
cu¼’tGÞombRiûSti¡ic
 / 
RExt__GOLOMB_RICE_INCREMENT_DIVISOR
;

1389 
BoÞ
 
upd©eGÞombRiûSti¡ics
 = 
bU£GÞombRiûP¬am‘”Ad­tiÚ
;

1390 
IÁ
 
numNÚZ”o
 = 0;

1392 
IÁ
 
Ï¡NZPosInCG
 = -1;

1393 
IÁ
 
fœ¡NZPosInCG
 = 1 << 
MLS_CG_SIZE
;

1395 
BoÞ
 
esÿ³D©aP»£ÁInGroup
 = 
çl£
;

1397 
IÁ
 
pos
[1 << 
MLS_CG_SIZE
];

1399 ifÐ
iSÿnPosSig
 =ð(
IÁ
è
uiSÿnPosLa¡
 )

1401 
Ï¡NZPosInCG
 = 
iSÿnPosSig
;

1402 
fœ¡NZPosInCG
 = 
iSÿnPosSig
;

1403 
iSÿnPosSig
--;

1404 
pos
[ 
numNÚZ”o
 ] = 
uiBlkPosLa¡
;

1405 
numNÚZ”o
 = 1;

1409 
IÁ
 
iCGBlkPos
 = 
codšgP¬am‘”s
.
sÿnCG
[ 
iSubS‘
 ];

1410 
IÁ
 
iCGPosY
 = 
iCGBlkPos
 / 
codšgP¬am‘”s
.
widthInGroups
;

1411 
IÁ
 
iCGPosX
 = 
iCGBlkPos
 - (
iCGPosY
 * 
codšgP¬am‘”s
.
widthInGroups
);

1413 ifÐ
iSubS‘
 =ð
iLa¡SÿnS‘
 || iSubSet == 0)

1415 
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] = 1;

1419 
UIÁ
 
uiSigCÛffGroup
;

1420 
UIÁ
 
uiCtxSig
 = 
TComTrQuªt
::
	`g‘SigCÛffGroupCtxInc
Ð
uiSigCÛffGroupFÏg
, 
iCGPosX
, 
iCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
 );

1421 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSigCÛffGroup
, 
ba£CÛffGroupCtx
[ 
uiCtxSig
 ] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_group
) );

1422 
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] = 
uiSigCÛffGroup
;

1426 cÚ¡ 
IÁ
 
·‰”nSigCtx
 = 
TComTrQuªt
::
	`ÿlcP©‹ºSigCtx
(
uiSigCÛffGroupFÏg
, 
iCGPosX
, 
iCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
);

1428 
UIÁ
 
uiBlkPos
, 
uiSig
, 
uiCtxSig
;

1429  ; 
iSÿnPosSig
 >ð
iSubPos
; iScanPosSig-- )

1431 
uiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
iSÿnPosSig
 ];

1432 
uiSig
 = 0;

1434 ifÐ
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] )

1436 ifÐ
iSÿnPosSig
 > 
iSubPos
 || 
iSubS‘
 =ð0 || 
numNÚZ”o
 )

1438 
uiCtxSig
 = 
TComTrQuªt
::
	`g‘SigCtxInc
Ð
·‰”nSigCtx
, 
codšgP¬am‘”s
, 
iSÿnPosSig
, 
uiLog2BlockWidth
, 
uiLog2BlockHeight
, 
chTy³
 );

1439 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiSig
, 
ba£Ctx
[ 
uiCtxSig
 ] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_m­
) );

1443 
uiSig
 = 1;

1446 
pcCÛf
[ 
uiBlkPos
 ] = 
uiSig
;

1447 ifÐ
uiSig
 )

1449 
pos
[ 
numNÚZ”o
 ] = 
uiBlkPos
;

1450 
numNÚZ”o
 ++;

1451 ifÐ
Ï¡NZPosInCG
 == -1 )

1453 
Ï¡NZPosInCG
 = 
iSÿnPosSig
;

1455 
fœ¡NZPosInCG
 = 
iSÿnPosSig
;

1459 ifÐ
numNÚZ”o
 > 0 )

1461 
BoÞ
 
signHidd’
 = ( 
Ï¡NZPosInCG
 - 
fœ¡NZPosInCG
 >ð
SBH_THRESHOLD
 );

1463 
absSum
 = 0;

1465 cÚ¡ 
UIÁ
 
uiCtxS‘
 = 
	`g‘CÚ‹xtS‘Index
(
compID
, 
iSubS‘
, (
c1
 == 0));

1466 
c1
 = 1;

1467 
UIÁ
 
uiBš
;

1469 
CÚ‹xtMod–
 *
ba£CtxMod
 = 
m_cCUOÃSCMod–
.
	`g‘
Ð0, 0 ) + (
NUM_ONE_FLAG_CTX_PER_SET
 * 
uiCtxS‘
);

1471 
IÁ
 
absCÛff
[1 << 
MLS_CG_SIZE
];

1473  
IÁ
 
i
 = 0; i < 
numNÚZ”o
; i++)

1475 
absCÛff
[
i
] = 1;

1477 
IÁ
 
numC1FÏg
 = 
	`mš
(
numNÚZ”o
, 
C1FLAG_NUMBER
);

1478 
IÁ
 
fœ¡C2FÏgIdx
 = -1;

1480  
IÁ
 
idx
 = 0; idx < 
numC1FÏg
; idx++ )

1482 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiBš
, 
ba£CtxMod
[
c1
] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_gt1
) );

1483 ifÐ
uiBš
 == 1 )

1485 
c1
 = 0;

1486 ià(
fœ¡C2FÏgIdx
 == -1)

1488 
fœ¡C2FÏgIdx
 = 
idx
;

1492 
esÿ³D©aP»£ÁInGroup
 = 
Œue
;

1495 ifÐ(
c1
 < 3) && (c1 > 0) )

1497 
c1
++;

1499 
absCÛff
[ 
idx
 ] = 
uiBš
 + 1;

1502 ià(
c1
 == 0)

1504 
ba£CtxMod
 = 
m_cCUAbsSCMod–
.
	`g‘
Ð0, 0 ) + (
NUM_ABS_FLAG_CTX_PER_SET
 * 
uiCtxS‘
);

1505 iàÐ
fœ¡C2FÏgIdx
 != -1)

1507 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiBš
, 
ba£CtxMod
[0] 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_gt2
) );

1508 
absCÛff
[ 
fœ¡C2FÏgIdx
 ] = 
uiBš
 + 2;

1509 ià(
uiBš
 != 0)

1511 
esÿ³D©aP»£ÁInGroup
 = 
Œue
;

1516 
esÿ³D©aP»£ÁInGroup
 =ƒsÿ³D©aP»£ÁInGrou°|| (
numNÚZ”o
 > 
C1FLAG_NUMBER
);

1518 cÚ¡ 
BoÞ
 
®ignGroup
 = 
esÿ³D©aP»£ÁInGroup
 && 
®ignCABACBefÜeBy·ss
;

1520 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


1521 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_signs
((
®ignGroup
 ? 
STATS__CABAC_BITS__ALIGNED_SIGN_BIT
 : 
STATS__CABAC_BITS__SIGN_BIT
 ), 
uiLog2BlockWidth
, 
compID
);

1522 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³_escs
 ((
®ignGroup
 ? 
STATS__CABAC_BITS__ALIGNED_ESCAPE_BITS
 : 
STATS__CABAC_BITS__ESCAPE_BITS
), 
uiLog2BlockWidth
, 
compID
);

1525 ià(
®ignGroup
)

1527 
m_pcTDecBšIf
->
	`®ign
();

1530 
UIÁ
 
cÛffSigns
;

1531 iàÐ
signHidd’
 && 
beV®id
 )

1533 
m_pcTDecBšIf
->
	`decodeBšsEP
Ð
cÛffSigns
, 
numNÚZ”o
-1 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_signs
) );

1534 
cÛffSigns
 <<ð32 - (
numNÚZ”o
-1);

1538 
m_pcTDecBšIf
->
	`decodeBšsEP
Ð
cÛffSigns
, 
numNÚZ”o
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_signs
) );

1539 
cÛffSigns
 <<ð32 - 
numNÚZ”o
;

1542 
IÁ
 
iFœ¡CÛff2
 = 1;

1543 ià(
esÿ³D©aP»£ÁInGroup
)

1545  
IÁ
 
idx
 = 0; idx < 
numNÚZ”o
; idx++ )

1547 
UIÁ
 
ba£Lev–
 = (
idx
 < 
C1FLAG_NUMBER
)? (2 + 
iFœ¡CÛff2
) : 1;

1549 ifÐ
absCÛff
[ 
idx
 ] =ð
ba£Lev–
)

1551 
UIÁ
 
uiLev–
;

1552 
	`xR—dCÛfRemašExGÞomb
Ð
uiLev–
, 
uiGoRiûP¬am
, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³_escs
) );

1554 
absCÛff
[ 
idx
 ] = 
uiLev–
 + 
ba£Lev–
;

1556 ià(
absCÛff
[
idx
] > (3 << 
uiGoRiûP¬am
))

1558 
uiGoRiûP¬am
 = 
bU£GÞombRiûP¬am‘”Ad­tiÚ
 ? (uiGoRiûP¬am + 1è: (
¡d
::
mš
<
UIÁ
>((uiGoRiceParam + 1), 4));

1561 ià(
upd©eGÞombRiûSti¡ics
)

1563 cÚ¡ 
UIÁ
 
š™ŸlGÞombRiûP¬am‘”
 = 
cu¼’tGÞombRiûSti¡ic
 / 
RExt__GOLOMB_RICE_INCREMENT_DIVISOR
;

1565 ià(
uiLev–
 >ð(3 << 
š™ŸlGÞombRiûP¬am‘”
))

1567 
cu¼’tGÞombRiûSti¡ic
++;

1569 ià(((
uiLev–
 * 2è< (1 << 
š™ŸlGÞombRiûP¬am‘”
)è&& (
cu¼’tGÞombRiûSti¡ic
 > 0))

1571 
cu¼’tGÞombRiûSti¡ic
--;

1574 
upd©eGÞombRiûSti¡ics
 = 
çl£
;

1578 if(
absCÛff
[ 
idx
 ] >= 2)

1580 
iFœ¡CÛff2
 = 0;

1585  
IÁ
 
idx
 = 0; idx < 
numNÚZ”o
; idx++ )

1587 
IÁ
 
blkPos
 = 
pos
[ 
idx
 ];

1589 
pcCÛf
[ 
blkPos
 ] = 
absCÛff
[ 
idx
 ];

1590 
absSum
 +ð
absCÛff
[ 
idx
 ];

1592 iàÐ
idx
 =ð
numNÚZ”o
-1 && 
signHidd’
 && 
beV®id
 )

1595 ià(
absSum
&0x1)

1597 
pcCÛf
[ 
blkPos
 ] = -pcCoef[ blkPos ];

1602 
IÁ
 
sign
 = 
¡©ic_ÿ¡
<IÁ>Ð
cÛffSigns
 ) >> 31;

1603 
pcCÛf
[ 
blkPos
 ] = (…cCÛf[ blkPo ] ^ 
sign
 ) - sign;

1604 
cÛffSigns
 <<= 1;

1610 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


1611 
	`´štSBACCÛffD©a
(
uiPosLa¡X
, 
uiPosLa¡Y
, 
uiWidth
, 
uiHeight
, 
compID
, 
uiAbsP¬tIdx
, 
codšgP¬am‘”s
.
sÿnTy³
, 
pcCÛf
);

1615 
	}
}

1617 
Void
 
	gTDecSbac
::
	$·r£SaoMaxUvlc
 ( 
UIÁ
& 
v®
, UIÁ 
maxSymbÞ
 )

1619 ià(
maxSymbÞ
 == 0)

1621 
v®
 = 0;

1625 
UIÁ
 
code
;

1626 
IÁ
 
i
;

1627 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
code
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1628 iàÐ
code
 == 0 )

1630 
v®
 = 0;

1634 
i
=1;

1637 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
code
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1638 iàÐ
code
 == 0 )

1642 
i
++;

1643 ià(
i
 =ð
maxSymbÞ
)

1649 
v®
 = 
i
;

1650 
	}
}

1652 
Void
 
	gTDecSbac
::
	$·r£SaoUæc
 (
UIÁ
 
uiL’gth
, UIÁ& 
riV®
)

1654 
m_pcTDecBšIf
->
	`decodeBšsEP
 ( 
riV®
, 
uiL’gth
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1655 
	}
}

1657 
Void
 
	gTDecSbac
::
	$·r£SaoM”ge
 (
UIÁ
& 
ruiV®
)

1659 
UIÁ
 
uiCode
;

1660 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiCode
, 
m_cSaoM”geSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1661 
ruiV®
 = (
IÁ
)
uiCode
;

1662 
	}
}

1664 
Void
 
	gTDecSbac
::
	$·r£SaoTy³Idx
 (
UIÁ
& 
ruiV®
)

1666 
UIÁ
 
uiCode
;

1667 
m_pcTDecBšIf
->
	`decodeBš
Ð
uiCode
, 
m_cSaoTy³IdxSCMod–
.
	`g‘
Ð0, 0, 0 ) 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1668 ià(
uiCode
 == 0)

1670 
ruiV®
 = 0;

1674 
m_pcTDecBšIf
->
	`decodeBšEP
Ð
uiCode
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1675 ià(
uiCode
 == 0)

1677 
ruiV®
 = 1;

1681 
ruiV®
 = 2;

1684 
	}
}

1686 
Void
 
	gTDecSbac
::
	$·r£SaoSign
(
UIÁ
& 
v®
)

1688 
m_pcTDecBšIf
->
	`decodeBšEP
 ( 
v®
 
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
STATS__CABAC_BITS__SAO
) );

1689 
	}
}

1691 
Void
 
	gTDecSbac
::
	$·r£SAOBlkP¬am
 (
SAOBlkP¬am
& 
§oBlkP¬am


1692 , 
BoÞ
* 
¦iûEÇbËd


1693 , 
BoÞ
 
ËáM”geAvaž


1694 , 
BoÞ
 
aboveM”geAvaž


1695 , cÚ¡ 
B™D•ths
 &
b™D•ths


1698 
UIÁ
 
uiSymbÞ
;

1700 
BoÞ
 
isLeáM”ge
 = 
çl£
;

1701 
BoÞ
 
isAboveM”ge
ð
çl£
;

1703 if(
ËáM”geAvaž
)

1705 
	`·r£SaoM”ge
(
uiSymbÞ
);

1706 
isLeáM”ge
 = (
uiSymbÞ
?
Œue
:
çl£
);

1709 ifÐ
aboveM”geAvaž
 && !
isLeáM”ge
)

1711 
	`·r£SaoM”ge
(
uiSymbÞ
);

1712 
isAboveM”ge
 = (
uiSymbÞ
?
Œue
:
çl£
);

1715 if(
isLeáM”ge
 || 
isAboveM”ge
)

1717 
UIÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
MAX_NUM_COMPONENT
; componentIndex++)

1719 
§oBlkP¬am
[
compÚ’tIndex
].
modeIdc
 = (
¦iûEÇbËd
[compÚ’tIndex]è? 
SAO_MODE_MERGE
 : 
SAO_MODE_OFF
;

1720 
§oBlkP¬am
[
compÚ’tIndex
].
ty³Idc
 = (
isLeáM”ge
)?
SAO_MERGE_LEFT
:
SAO_MERGE_ABOVE
;

1725 
IÁ
 
compId
=
COMPONENT_Y
; compId < 
MAX_NUM_COMPONENT
; compId++)

1727 cÚ¡ 
CompÚ’tID
 
compIdx
=
	`CompÚ’tID
(
compId
);

1728 cÚ¡ 
CompÚ’tID
 
fœ¡CompOfChTy³
 = 
	`g‘Fœ¡CompÚ’tOfChªÃl
(
	`toChªÃlTy³
(
compIdx
));

1729 
SAOOff£t
& 
ùbP¬am
 = 
§oBlkP¬am
[
compIdx
];

1730 #ià
O0043_BEST_EFFORT_DECODING


1731 cÚ¡ 
IÁ
 
b™D•thOrig
 = 
b™D•ths
.
¡»am
[
	`toChªÃlTy³
(
compIdx
)];

1732 cÚ¡ 
IÁ
 
fÜûB™D•thAdju¡
 = 
b™D•thOrig
 - 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compIdx
)];

1734 cÚ¡ 
IÁ
 
b™D•thOrig
 = 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compIdx
)];

1736 cÚ¡ 
IÁ
 
maxOff£tQV®
=
TComSam¶eAd­tiveOff£t
::
	`g‘MaxOff£tQV®
(
b™D•thOrig
);

1737 if(!
¦iûEÇbËd
[
compIdx
])

1740 
ùbP¬am
.
modeIdc
 = 
SAO_MODE_OFF
;

1745 if(
compIdx
 =ð
fœ¡CompOfChTy³
)

1747 
	`·r£SaoTy³Idx
(
uiSymbÞ
);

1749 
	`as£¹
(
uiSymbÞ
 ==0 || uiSymbol ==1 || uiSymbol ==2);

1751 if(
uiSymbÞ
 ==0)

1753 
ùbP¬am
.
modeIdc
 = 
SAO_MODE_OFF
;

1755 if(
uiSymbÞ
 == 1)

1757 
ùbP¬am
.
modeIdc
 = 
SAO_MODE_NEW
;

1758 
ùbP¬am
.
ty³Idc
 = 
SAO_TYPE_START_BO
;

1762 
ùbP¬am
.
modeIdc
 = 
SAO_MODE_NEW
;

1763 
ùbP¬am
.
ty³Idc
 = 
SAO_TYPE_START_EO
;

1769 
ùbP¬am
.
modeIdc
 = 
§oBlkP¬am
[
COMPONENT_Cb
].modeIdc;

1770 
ùbP¬am
.
ty³Idc
 = 
§oBlkP¬am
[
COMPONENT_Cb
].typeIdc;

1773 if(
ùbP¬am
.
modeIdc
 =ð
SAO_MODE_NEW
)

1775 
IÁ
 
off£t
[4];

1776 
IÁ
 
i
=0; i< 4; i++)

1778 
	`·r£SaoMaxUvlc
(
uiSymbÞ
, 
maxOff£tQV®
 );

1779 
off£t
[
i
] = (
IÁ
)
uiSymbÞ
;

1782 if(
ùbP¬am
.
ty³Idc
 =ð
SAO_TYPE_START_BO
)

1784 
IÁ
 
i
=0; i< 4; i++)

1786 if(
off£t
[
i
] != 0)

1788 
	`·r£SaoSign
(
uiSymbÞ
);

1789 if(
uiSymbÞ
)

1791 #ià
O0043_BEST_EFFORT_DECODING


1792 
off£t
[
i
] >>ð
fÜûB™D•thAdju¡
;

1794 
off£t
[
i
] = -offset[i];

1798 
	`·r£SaoUæc
(
NUM_SAO_BO_CLASSES_LOG2
, 
uiSymbÞ
 );

1799 
ùbP¬am
.
ty³AuxInfo
 = 
uiSymbÞ
;

1801 
IÁ
 
i
=0; i<4; i++)

1803 
ùbP¬am
.
off£t
[(ùbP¬am.
ty³AuxInfo
+
i
)%
MAX_NUM_SAO_CLASSES
] = offset[i];

1809 
ùbP¬am
.
ty³AuxInfo
 = 0;

1811 if(
fœ¡CompOfChTy³
 =ð
compIdx
)

1813 
	`·r£SaoUæc
(
NUM_SAO_EO_TYPES_LOG2
, 
uiSymbÞ
 );

1814 
ùbP¬am
.
ty³Idc
 +ð
uiSymbÞ
;

1818 
ùbP¬am
.
ty³Idc
 = 
§oBlkP¬am
[
fœ¡CompOfChTy³
].typeIdc;

1820 
ùbP¬am
.
off£t
[
SAO_CLASS_EO_FULL_VALLEY
] = offset[0];

1821 
ùbP¬am
.
off£t
[
SAO_CLASS_EO_HALF_VALLEY
] = offset[1];

1822 
ùbP¬am
.
off£t
[
SAO_CLASS_EO_PLAIN
 ] = 0;

1823 
ùbP¬am
.
off£t
[
SAO_CLASS_EO_HALF_PEAK
 ] = -offset[2];

1824 
ùbP¬am
.
off£t
[
SAO_CLASS_EO_FULL_PEAK
 ] = -offset[3];

1829 
	}
}

1836 
Void
 
	gTDecSbac
::
	$xCÝyCÚ‹xtsFrom
ÐcÚ¡ 
TDecSbac
* 
pSrc
 )

1838 
	`memýy
(
m_cÚ‹xtMod–s
, 
pSrc
->m_cÚ‹xtMod–s, 
m_numCÚ‹xtMod–s
*(m_contextModels[0]));

1839 
	`memýy
(
m_gÞombRiûAd­tiÚSti¡ics
, 
pSrc
->m_gÞombRiûAd­tiÚSti¡ics, ((
UIÁ
è* 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
));

1840 
	}
}

1842 
Void
 
	gTDecSbac
::
	$xCÝyFrom
ÐcÚ¡ 
TDecSbac
* 
pSrc
 )

1844 
m_pcTDecBšIf
->
	`cÝyS‹
Ð
pSrc
->m_pcTDecBinIf );

1845 
	`xCÝyCÚ‹xtsFrom
Ð
pSrc
 );

1846 
	}
}

1848 
Void
 
	gTDecSbac
::
	$lßd
 ( cÚ¡ 
TDecSbac
* 
pSrc
 )

1850 
	`xCÝyFrom
(
pSrc
);

1851 
	}
}

1853 
Void
 
	gTDecSbac
::
	$lßdCÚ‹xts
 ( cÚ¡ 
TDecSbac
* 
pSrc
 )

1855 
	`xCÝyCÚ‹xtsFrom
(
pSrc
);

1856 
	}
}

1862 
Void
 
	gTDecSbac
::
	$·r£Ex¶ic™RdpcmMode
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 )

1864 
TComD©aCU
* 
cu
 = 
rTu
.
	`g‘CU
();

1865 cÚ¡ 
UIÁ
 
absP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

1866 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

1867 cÚ¡ 
UIÁ
 
tuHeight
 = 
g_aucCÚv”tToB™
[
»ù
.
height
];

1868 cÚ¡ 
UIÁ
 
tuWidth
 = 
g_aucCÚv”tToB™
[
»ù
.
width
];

1869 
UIÁ
 
code
 = 0;

1871 
	`as£¹
(
tuHeight
 =ð
tuWidth
);

1873 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


1874 cÚ¡ 
TComCodšgSti¡icsCÏssTy³
 
	`ùy³
(
STATS__EXPLICIT_RDPCM_BITS
, 
g_aucCÚv”tToB™
[
cu
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxCUWidth
()>>
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
()]+2);

1877 
m_pcTDecBšIf
->
	`decodeBš
(
code
, 
m_ex¶ic™RdpcmFÏgSCMod–
.
	`g‘
 (0, 
	`toChªÃlTy³
(
compID
), 0è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
));

1879 if(
code
 == 0)

1881 
cu
->
	`£tEx¶ic™RdpcmModeP¬tRªge
Ð
RDPCM_OFF
, 
compID
, 
absP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(compID));

1885 
m_pcTDecBšIf
->
	`decodeBš
(
code
, 
m_ex¶ic™RdpcmDœSCMod–
.
	`g‘
 (0, 
	`toChªÃlTy³
(
compID
), 0è
	`RExt__DECODER_DEBUG_BIT_STATISTICS_PASS_OPT_ARG
(
ùy³
));

1886 if(
code
 == 0)

1888 
cu
->
	`£tEx¶ic™RdpcmModeP¬tRªge
Ð
RDPCM_HOR
, 
compID
, 
absP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(compID));

1892 
cu
->
	`£tEx¶ic™RdpcmModeP¬tRªge
Ð
RDPCM_VER
, 
compID
, 
absP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(compID));

1895 
	}
}

	@source/Lib/TLibDecoder/TDecSbac.h

38 #iâdeà
__TDECSBAC__


39 
	#__TDECSBAC__


	)

42 #ià
_MSC_VER
 > 1000

43 #´agm¨
Úû


47 
	~"TDecEÁrÝy.h
"

48 
	~"TDecBšCod”.h
"

49 
	~"TLibCommÚ/CÚ‹xtTabËs.h
"

50 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

51 
	~"TLibCommÚ/CÚ‹xtMod–3DBufãr.h
"

60 
þass
 
	gSEImes§ges
;

63 þas 
	cTDecSbac
 : 
public
 
TDecEÁrÝyIf


65 
public
:

66 
TDecSbac
();

67 
	mvœtu®
 ~
TDecSbac
();

69 
Void
 
	$š™
 ( 
TDecBšIf
* 
p
 ) { 
m_pcTDecBšIf
 =…; }

70 
Void
 
	$unš™
 ( ) { 
m_pcTDecBšIf
 = 0; 
	}
}

72 
Void
 
lßd
 ( cÚ¡ 
TDecSbac
* 
pSrc
 );

73 
Void
 
lßdCÚ‹xts
 ( cÚ¡ 
TDecSbac
* 
pSrc
 );

74 
Void
 
xCÝyFrom
 ( cÚ¡ 
TDecSbac
* 
pSrc
 );

75 
Void
 
xCÝyCÚ‹xtsFrom
 ( cÚ¡ 
TDecSbac
* 
pSrc
 );

77 
Void
 
»£tEÁrÝy
 (
TComSliû
* 
pSliû
 );

78 
Void
 
	$£tB™¡»am
 ( 
TComIÅutB™¡»am
* 
p
 ) { 
m_pcB™¡»am
 =…; 
m_pcTDecBšIf
->
	`š™
Ð°); 
	}
}

79 
Void
 
	$·r£VPS
 ( 
TComVPS
* ) {
	}
}

80 
Void
 
	$·r£SPS
 ( 
TComSPS
* ) {
	}
}

81 
Void
 
	$·r£PPS
 ( 
TComPPS
* ) {
	}
}

83 
Void
 
	$·r£SliûH—d”
 ( 
TComSliû
* , 
P¬am‘”S‘Mªag”
* , cÚ¡ 
IÁ
 ) {
	}
}

84 
Void
 
·r£T”mš©šgB™
 ( 
UIÁ
& 
ruiB™
 );

85 
Void
 
·r£RemaššgBy‹s
 ( 
BoÞ
 
noT¿žšgBy‹sEx³ùed
);

86 
Void
 
·r£MVPIdx
 ( 
IÁ
& 
riMVPIdx
 );

87 
Void
 
·r£SaoMaxUvlc
 ( 
UIÁ
& 
v®
, UIÁ 
maxSymbÞ
 );

88 
Void
 
·r£SaoM”ge
 ( 
UIÁ
& 
ruiV®
 );

89 
Void
 
·r£SaoTy³Idx
 ( 
UIÁ
& 
ruiV®
 );

90 
Void
 
·r£SaoUæc
 ( 
UIÁ
 
uiL’gth
, UIÁ& 
ruiV®
 );

91 
Void
 
·r£SAOBlkP¬am
 (
SAOBlkP¬am
& 
§oBlkP¬am
, 
BoÞ
* 
¦iûEÇbËd
, BoÞ 
ËáM”geAvaž
, BoÞ 
aboveM”geAvaž
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

92 
Void
 
·r£SaoSign
 (
UIÁ
& 
v®
);

94 
	g´iv©e
:

95 #ià
RExt__DECODER_DEBUG_BIT_STATISTICS


96 
Void
 
xR—dUÇrySymbÞ
 ( 
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

97 
Void
 
xR—dUÇryMaxSymbÞ
 ( 
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

98 
Void
 
xR—dEpExGÞomb
 ( 
UIÁ
& 
ruiSymbÞ
, UIÁ 
uiCouÁ
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

99 
Void
 
xR—dCÛfRemašExGÞomb
 ( 
UIÁ
 &
rSymbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
, cÚ¡ 
þass
 
TComCodšgSti¡icsCÏssTy³
 &
whichSt
 );

101 
Void
 
xR—dUÇrySymbÞ
 ( 
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
 );

102 
Void
 
xR—dUÇryMaxSymbÞ
 ( 
UIÁ
& 
ruiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
 );

103 
Void
 
xR—dEpExGÞomb
 ( 
UIÁ
& 
ruiSymbÞ
, UIÁ 
uiCouÁ
 );

104 
Void
 
xR—dCÛfRemašExGÞomb
 ( 
UIÁ
 &
rSymbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 );

106 
	g´iv©e
:

107 
TComIÅutB™¡»am
* 
m_pcB™¡»am
;

108 
TDecBšIf
* 
	gm_pcTDecBšIf
;

110 
	gpublic
:

112 
Void
 
·r£SkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

113 
Void
 
·r£CUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

114 
Void
 
·r£S¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

115 
Void
 
·r£M”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiPUIdx
 );

116 
Void
 
·r£M”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiM”geIndex
 );

117 
Void
 
·r£P¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

118 
Void
 
·r£P»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

120 
Void
 
·r£IÁ¿DœLumaAng
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

121 
Void
 
·r£IÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

123 
Void
 
·r£IÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiIÁ”Dœ
, UIÁ 
uiAbsP¬tIdx
 );

124 
Void
 
·r£RefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
IÁ
& 
riRefFrmIdx
, 
RefPicLi¡
 
eRefLi¡
 );

125 
Void
 
·r£Mvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiP¬tIdx
, UIÁ 
uiD•th
, 
RefPicLi¡
 
eRefLi¡
 );

127 
Void
 
·r£CrossCompÚ’tP»diùiÚ
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

129 
Void
 
·r£T¿nsfÜmSubdivFÏg
Ð
UIÁ
& 
ruiSubdivFÏg
, UIÁ 
uiLog2T¿nsfÜmBlockSize
 );

130 
Void
 
·r£QtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 );

131 
Void
 
·r£QtRoÙCbf
 ( 
UIÁ
 
uiAbsP¬tIdx
, UIÁ& 
uiQtRoÙCbf
 );

133 
Void
 
·r£D–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

134 
Void
 
·r£ChromaQpAdju¡m’t
Ð
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
, UIÁ 
d•th
 );

136 
Void
 
·r£IPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
);

138 
Void
 
·r£La¡SignifiÿÁXY
Ð
UIÁ
& 
uiPosLa¡X
, UIÁ& 
uiPosLa¡Y
, 
IÁ
 
width
, IÁ 
height
, 
CompÚ’tID
 
compÚ’t
, UIÁ 
uiSÿnIdx
 );

139 
Void
 
·r£CÛffNxN
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

140 
Void
 
·r£T¿nsfÜmSkFÏgs
 ( 
þass
 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 );

142 
Void
 
	$·r£SÿlšgLi¡
 ( 
TComSÿlšgLi¡
* ) {
	}
}

144 
Void
 
·r£Ex¶ic™RdpcmMode
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

146 
	g´iv©e
:

147 
CÚ‹xtMod–
 
m_cÚ‹xtMod–s
[
MAX_NUM_CTX_MOD
];

148 
IÁ
 
	gm_numCÚ‹xtMod–s
;

149 
CÚ‹xtMod–3DBufãr
 
	gm_cCUS¶™FÏgSCMod–
;

150 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSkFÏgSCMod–
;

151 
CÚ‹xtMod–3DBufãr
 
	gm_cCUM”geFÏgExtSCMod–
;

152 
CÚ‹xtMod–3DBufãr
 
	gm_cCUM”geIdxExtSCMod–
;

153 
CÚ‹xtMod–3DBufãr
 
	gm_cCUP¬tSizeSCMod–
;

154 
CÚ‹xtMod–3DBufãr
 
	gm_cCUP»dModeSCMod–
;

155 
CÚ‹xtMod–3DBufãr
 
	gm_cCUIÁ¿P»dSCMod–
;

156 
CÚ‹xtMod–3DBufãr
 
	gm_cCUChromaP»dSCMod–
;

157 
CÚ‹xtMod–3DBufãr
 
	gm_cCUD–QpSCMod–
;

158 
CÚ‹xtMod–3DBufãr
 
	gm_cCUIÁ”DœSCMod–
;

159 
CÚ‹xtMod–3DBufãr
 
	gm_cCURefPicSCMod–
;

160 
CÚ‹xtMod–3DBufãr
 
	gm_cCUMvdSCMod–
;

161 
CÚ‹xtMod–3DBufãr
 
	gm_cCUQtCbfSCMod–
;

162 
CÚ‹xtMod–3DBufãr
 
	gm_cCUT¿nsSubdivFÏgSCMod–
;

163 
CÚ‹xtMod–3DBufãr
 
	gm_cCUQtRoÙCbfSCMod–
;

165 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSigCÛffGroupSCMod–
;

166 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSigSCMod–
;

167 
CÚ‹xtMod–3DBufãr
 
	gm_cCuCtxLa¡X
;

168 
CÚ‹xtMod–3DBufãr
 
	gm_cCuCtxLa¡Y
;

169 
CÚ‹xtMod–3DBufãr
 
	gm_cCUOÃSCMod–
;

170 
CÚ‹xtMod–3DBufãr
 
	gm_cCUAbsSCMod–
;

172 
CÚ‹xtMod–3DBufãr
 
	gm_cMVPIdxSCMod–
;

174 
CÚ‹xtMod–3DBufãr
 
	gm_cSaoM”geSCMod–
;

175 
CÚ‹xtMod–3DBufãr
 
	gm_cSaoTy³IdxSCMod–
;

176 
CÚ‹xtMod–3DBufãr
 
	gm_cT¿nsfÜmSkSCMod–
;

177 
CÚ‹xtMod–3DBufãr
 
	gm_CUT¿nsquªtBy·ssFÏgSCMod–
;

178 
CÚ‹xtMod–3DBufãr
 
	gm_ex¶ic™RdpcmFÏgSCMod–
;

179 
CÚ‹xtMod–3DBufãr
 
	gm_ex¶ic™RdpcmDœSCMod–
;

180 
CÚ‹xtMod–3DBufãr
 
	gm_cCrossCompÚ’tP»diùiÚSCMod–
;

182 
CÚ‹xtMod–3DBufãr
 
	gm_ChromaQpAdjFÏgSCMod–
;

183 
CÚ‹xtMod–3DBufãr
 
	gm_ChromaQpAdjIdcSCMod–
;

185 
UIÁ
 
	gm_gÞombRiûAd­tiÚSti¡ics
[
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
];

	@source/Lib/TLibDecoder/TDecSlice.cpp

38 
	~"TDecSliû.h
"

39 
	~"TDecCÚfÜmªû.h
"

48 
	gTDecSliû
::
	$TDecSliû
()

50 
	}
}

52 
TDecSliû
::~
	$TDecSliû
()

54 
	}
}

56 
Void
 
TDecSliû
::
	$ü—‹
()

58 
	}
}

60 
Void
 
TDecSliû
::
	$de¡roy
()

62 
	}
}

64 
Void
 
TDecSliû
::
	$š™
(
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TDecCu
* 
pcCuDecod”
, 
TDecCÚfÜmªûCheck
 *
pDecCÚfÜmªûCheck
)

66 
m_pcEÁrÝyDecod”
 = 
pcEÁrÝyDecod”
;

67 
m_pcCuDecod”
 = 
pcCuDecod”
;

68 
m_pDecCÚfÜmªûCheck
 = 
pDecCÚfÜmªûCheck
;

69 
	}
}

71 
Void
 
	gTDecSliû
::
	$decom´essSliû
(
TComIÅutB™¡»am
** 
µcSub¡»ams
, 
TComPic
* 
pcPic
, 
TDecSbac
* 
pcSbacDecod”
)

73 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
ÕcPic->
	`g‘Cu¼SliûIdx
());

75 cÚ¡ 
IÁ
 
¡¬tCtuTsAddr
 = 
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
();

76 cÚ¡ 
IÁ
 
¡¬tCtuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
¡¬tCtuTsAddr
);

77 cÚ¡ 
UIÁ
 
numCtusInF¿me
 = 
pcPic
->
	`g‘Numb”OfCtusInF¿me
();

79 cÚ¡ 
UIÁ
 
äameWidthInCtus
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘F¿meWidthInCtus
();

80 cÚ¡ 
BoÞ
 
d•SliûSegm’tsEÇbËd
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
();

81 cÚ¡ 
BoÞ
 
waveäÚtsEÇbËd
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
();

83 
m_pcEÁrÝyDecod”
->
	`£tEÁrÝyDecod”
 ( 
pcSbacDecod”
 );

84 
m_pcEÁrÝyDecod”
->
	`£tB™¡»am
 ( 
µcSub¡»ams
[0] );

85 
m_pcEÁrÝyDecod”
->
	`»£tEÁrÝy
 (
pcSliû
);

88 
pcPic
->
	`£tPicYuvP»d
( 0 );

89 
pcPic
->
	`£tPicYuvResi
( 0 );

91 #ià
ENC_DEC_TRACE


92 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûEÇbË
;

94 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

95 
	`DTRACE_CABAC_T
( "\tPOC: " );

96 
	`DTRACE_CABAC_V
Ð
pcPic
->
	`g‘POC
() );

97 
	`DTRACE_CABAC_T
( "\n" );

99 #ià
ENC_DEC_TRACE


100 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

105 cÚ¡ 
UIÁ
 
subSŒ—mOff£t
=
pcPic
->
	`g‘Sub¡»amFÜCtuAddr
(
¡¬tCtuRsAddr
, 
Œue
, 
pcSliû
);

108 ià(
d•SliûSegm’tsEÇbËd
)

111 cÚ¡ 
UIÁ
 
¡¬tTžeIdx
=
pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
(
¡¬tCtuRsAddr
);

112 cÚ¡ 
TComTže
 *
pCu¼’tTže
=
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
¡¬tTžeIdx
);

113 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pCu¼’tTže
->
	`g‘Fœ¡CtuRsAddr
();

115 ifÐ
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& 
¡¬tCtuRsAddr
 !ð
fœ¡CtuRsAddrOfTže
)

117 iàÐ
pCu¼’tTže
->
	`g‘TžeWidthInCtus
(è>ð2 || !
waveäÚtsEÇbËd
)

119 
pcSbacDecod”
->
	`lßdCÚ‹xts
(&
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
);

126 
BoÞ
 
isLa¡CtuOfSliûSegm’t
 = 
çl£
;

127  
UIÁ
 
ùuTsAddr
 = 
¡¬tCtuTsAddr
; !
isLa¡CtuOfSliûSegm’t
 && ctuTsAdd¸< 
numCtusInF¿me
; ctuTsAddr++)

129 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
ùuTsAddr
);

130 cÚ¡ 
TComTže
 &
cu¼’tTže
 = *(
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
ÕcPic->g‘PicSym()->
	`g‘TžeIdxM­
(
ùuRsAddr
)));

131 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
cu¼’tTže
.
	`g‘Fœ¡CtuRsAddr
();

132 cÚ¡ 
UIÁ
 
tžeXPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 % 
äameWidthInCtus
;

133 cÚ¡ 
UIÁ
 
tžeYPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 / 
äameWidthInCtus
;

134 cÚ¡ 
UIÁ
 
ùuXPosInCtus
 = 
ùuRsAddr
 % 
äameWidthInCtus
;

135 cÚ¡ 
UIÁ
 
ùuYPosInCtus
 = 
ùuRsAddr
 / 
äameWidthInCtus
;

136 cÚ¡ 
UIÁ
 
uiSubSŒm
=
pcPic
->
	`g‘Sub¡»amFÜCtuAddr
(
ùuRsAddr
, 
Œue
, 
pcSliû
)-
subSŒ—mOff£t
;

137 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

138 
pCtu
->
	`š™Ctu
Ð
pcPic
, 
ùuRsAddr
 );

140 
m_pcEÁrÝyDecod”
->
	`£tB™¡»am
Ð
µcSub¡»ams
[
uiSubSŒm
] );

143 ià(
ùuRsAddr
 =ð
fœ¡CtuRsAddrOfTže
)

145 ià(
ùuTsAddr
 !ð
¡¬tCtuTsAddr
)

147 
m_pcEÁrÝyDecod”
->
	`»£tEÁrÝy
(
pcSliû
);

150 ià(
ùuXPosInCtus
 =ð
tžeXPosInCtus
 && 
waveäÚtsEÇbËd
)

153 ià(
ùuTsAddr
 !ð
¡¬tCtuTsAddr
)

155 
m_pcEÁrÝyDecod”
->
	`»£tEÁrÝy
(
pcSliû
);

157 
TComD©aCU
 *
pCtuUp
 = 
pCtu
->
	`g‘CtuAbove
();

158 iàÐ
pCtuUp
 && ((
ùuRsAddr
%
äameWidthInCtus
+1) < frameWidthInCtus) )

160 
TComD©aCU
 *
pCtuTR
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 - 
äameWidthInCtus
 + 1 );

161 iàÐ
pCtu
->
	`CUIsFromSameSliûAndTže
(
pCtuTR
) )

164 
pcSbacDecod”
->
	`lßdCÚ‹xts
Ð&
m_’ŒÝyCodšgSyncCÚ‹xtS‹
 );

169 #ià
ENC_DEC_TRACE


170 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûEÇbË
;

173 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 != 0

174 cÚ¡ 
UIÁ
 
numRemaššgB™sPriÜToCtu
=
µcSub¡»ams
[
uiSubSŒm
]->
	`g‘NumB™sLeá
();

177 iàÐ
pcSliû
->
	`g‘SPS
()->
	`g‘U£SAO
() )

179 
SAOBlkP¬am
& 
§oblkP¬am
 = (
pcPic
->
	`g‘PicSym
()->
	`g‘SAOBlkP¬am
())[
ùuRsAddr
];

180 
BoÞ
 
bIsSAOSliûEÇbËd
 = 
çl£
;

181 
BoÞ
 
¦iûEÇbËd
[
MAX_NUM_COMPONENT
];

182 
IÁ
 
comp
=0; com°< 
MAX_NUM_COMPONENT
; comp++)

184 
CompÚ’tID
 
compId
=
	`CompÚ’tID
(
comp
);

185 
¦iûEÇbËd
[
compId
] = 
pcSliû
->
	`g‘SaoEÇbËdFÏg
(
	`toChªÃlTy³
(compId)è&& (
comp
 < 
pcPic
->
	`g‘Numb”V®idCompÚ’ts
());

186 ià(
¦iûEÇbËd
[
compId
])

188 
bIsSAOSliûEÇbËd
=
Œue
;

190 
§oblkP¬am
[
compId
].
modeIdc
 = 
SAO_MODE_OFF
;

192 ià(
bIsSAOSliûEÇbËd
)

194 
BoÞ
 
ËáM”geAvaž
 = 
çl£
;

195 
BoÞ
 
aboveM”geAvaž
ð
çl£
;

198 
IÁ
 
rx
 = (
ùuRsAddr
 % 
äameWidthInCtus
);

199 if(
rx
 > 0)

201 
ËáM”geAvaž
 = 
pcPic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, ctuRsAddr-1);

204 
IÁ
 
ry
 = (
ùuRsAddr
 / 
äameWidthInCtus
);

205 if(
ry
 > 0)

207 
aboveM”geAvaž
 = 
pcPic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, ctuRsAddr-
äameWidthInCtus
);

210 
pcSbacDecod”
->
	`·r£SAOBlkP¬am
Ð
§oblkP¬am
, 
¦iûEÇbËd
, 
ËáM”geAvaž
, 
aboveM”geAvaž
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•ths
());

214 
m_pcCuDecod”
->
	`decodeCtu
 ( 
pCtu
, 
isLa¡CtuOfSliûSegm’t
 );

216 #ià
DECODER_PARTIAL_CONFORMANCE_CHECK
 != 0

217 cÚ¡ 
UIÁ
 
numRemaššgB™sPo¡Ctu
=
µcSub¡»ams
[
uiSubSŒm
]->
	`g‘NumB™sLeá
();

218 ià(
TDecCÚfÜmªûCheck
::
	`doCheckšg
(è&& 
m_pDecCÚfÜmªûCheck
)

220 
m_pDecCÚfÜmªûCheck
->
	`checkCtuDecodšg
(
numRemaššgB™sPriÜToCtu
-
numRemaššgB™sPo¡Ctu
);

224 
m_pcCuDecod”
->
	`decom´essCtu
 ( 
pCtu
 );

226 #ià
ENC_DEC_TRACE


227 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

231 iàÐ
ùuXPosInCtus
 =ð
tžeXPosInCtus
+1 && 
waveäÚtsEÇbËd
)

233 
m_’ŒÝyCodšgSyncCÚ‹xtS‹
.
	`lßdCÚ‹xts
Ð
pcSbacDecod”
 );

236 ià(
isLa¡CtuOfSliûSegm’t
)

238 #ià
DECODER_CHECK_SUBSTREAM_AND_SLICE_TRAILING_BYTES


239 
pcSbacDecod”
->
	`·r£RemaššgBy‹s
(
çl£
);

241 if(!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

243 
pcSliû
->
	`£tSliûCurEndCtuTsAddr
Ð
ùuTsAddr
+1 );

245 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
Ð
ùuTsAddr
+1 );

247 iàÐ
ùuXPosInCtus
 + 1 =ð
tžeXPosInCtus
 + 
cu¼’tTže
.
	`g‘TžeWidthInCtus
() &&

248 Ð
ùuYPosInCtus
 + 1 =ð
tžeYPosInCtus
 + 
cu¼’tTže
.
	`g‘TžeHeightInCtus
(è|| 
waveäÚtsEÇbËd
)

253 
UIÁ
 
bšV®
;

254 
pcSbacDecod”
->
	`·r£T”mš©šgB™
Ð
bšV®
 );

255 
	`as£¹
Ð
bšV®
 );

256 #ià
DECODER_CHECK_SUBSTREAM_AND_SLICE_TRAILING_BYTES


257 
pcSbacDecod”
->
	`·r£RemaššgBy‹s
(
Œue
);

263 
	`as£¹
(
isLa¡CtuOfSliûSegm’t
 =ð
Œue
);

266 ifÐ
d•SliûSegm’tsEÇbËd
 )

268 
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
.
	`lßdCÚ‹xts
Ð
pcSbacDecod”
 );

271 
	}
}

	@source/Lib/TLibDecoder/TDecSlice.h

38 #iâdeà
__TDECSLICE__


39 
	#__TDECSLICE__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 
	~"TLibCommÚ/TComPic.h
"

48 
	~"TDecEÁrÝy.h
"

49 
	~"TDecCu.h
"

50 
	~"TDecSbac.h
"

51 
	~"TDecBšCod”CABAC.h
"

60 
þass
 
	gTDecCÚfÜmªûCheck
;

63 þas 
	cTDecSliû


65 
	m´iv©e
:

67 
TDecEÁrÝy
* 
m_pcEÁrÝyDecod”
;

68 
TDecCu
* 
	mm_pcCuDecod”
;

69 
TDecCÚfÜmªûCheck
 *
	mm_pDecCÚfÜmªûCheck
;

71 
TDecSbac
 
	mm_Ï¡SliûSegm’tEndCÚ‹xtS‹
;

72 
TDecSbac
 
	mm_’ŒÝyCodšgSyncCÚ‹xtS‹
;

73 
	mpublic
:

74 
TDecSliû
();

75 
	mvœtu®
 ~
TDecSliû
();

77 
Void
 
š™
 ( 
TDecEÁrÝy
* 
pcEÁrÝyDecod”
, 
TDecCu
* 
pcMbDecod”
, 
TDecCÚfÜmªûCheck
 *
pDecCÚfÜmªûCheck
 );

78 
Void
 
ü—‹
 ();

79 
Void
 
de¡roy
 ();

81 
Void
 
decom´essSliû
 ( 
TComIÅutB™¡»am
** 
µcSub¡»ams
, 
TComPic
* 
pcPic
, 
TDecSbac
* 
pcSbacDecod”
 );

	@source/Lib/TLibDecoder/TDecTop.cpp

38 
	~"NAL»ad.h
"

39 
	~"TDecTÝ.h
"

40 
	~"TDecCÚfÜmªû.h
"

45 
	gTDecTÝ
::
	$TDecTÝ
()

46 : 
	`m_iMaxRefPicNum
(0)

47 , 
	`m_assocŸ‹dIRAPTy³
(
NAL_UNIT_INVALID
)

48 , 
	`m_pocCRA
(0)

49 , 
	`m_pocRªdomAcûss
(
MAX_INT
)

50 , 
	`m_cLi¡Pic
()

51 , 
	`m_·¿m‘”S‘Mªag”
()

52 , 
	`m_­cSliûPžÙ
(
NULL
)

53 , 
	`m_SEIs
()

54 , 
	`m_cP»diùiÚ
()

55 , 
	`m_cTrQuªt
()

56 , 
	`m_cGÝDecod”
()

57 , 
	`m_cSliûDecod”
()

58 , 
	`m_cCuDecod”
()

59 , 
	`m_cEÁrÝyDecod”
()

60 , 
	`m_cCavlcDecod”
()

61 , 
	`m_cSbacDecod”
()

62 , 
	`m_cBšCABAC
()

63 , 
	`m_£iR—d”
()

64 , 
	`m_cLoÝFž‹r
()

65 , 
	`m_cSAO
()

66 , 
	`m_pcPic
(
NULL
)

67 , 
	`m_´evPOC
(
MAX_INT
)

68 , 
	`m_´evTid0POC
(0)

69 , 
	$m_bFœ¡SliûInPiùu»
(
Œue
)

70 #ià
FGS_RDD5_ENABLE


71 , 
	`m_bFœ¡Piùu»InSequ’û
(
Œue
)

72 , 
	`m_g¿šCh¬aù”i¡ic
()

73 , 
	$m_g¿šBuf
()

75 , 
	`m_bFœ¡SliûInSequ’û
(
Œue
)

76 , 
	`m_´evSliûSk³d
(
çl£
)

77 , 
	`m_sk³dPOC
(0)

78 , 
	`m_bFœ¡SliûInB™¡»am
(
Œue
)

79 , 
	`m_Ï¡POCNoOuutPriÜPics
(-1)

80 , 
	`m_isNoOuutPriÜPics
(
çl£
)

81 , 
	$m_üaNoRa¦OuutFÏg
(
çl£
)

82 #ià
O0043_BEST_EFFORT_DECODING


83 , 
	$m_fÜûDecodeB™D•th
(8)

85 , 
	`m_pDecodedSEIOuutSŒ—m
(
NULL
)

86 , 
	$m_w¬nšgMes§geSkPiùu»
(
çl£
)

87 #ià
MCTS_ENC_CHECK


88 , 
	$m_tmùsCheckEÇbËd
(
çl£
)

90 , 
	$m_´efixSEINALUs
()

92 #ià
ENC_DEC_TRACE


93 ià(
g_hT¿û
 =ð
NULL
)

95 
g_hT¿û
 = 
	`fÝ’
( "TraceDec.txt", "wb" );

97 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

98 
g_nSymbÞCouÁ”
 = 0;

100 
	}
}

102 
	gTDecTÝ
::~
	$TDecTÝ
()

104 #ià
ENC_DEC_TRACE


105 ià(
g_hT¿û
 !ð
¡dout
)

107 
	`fþo£
Ð
g_hT¿û
 );

110 !
m_´efixSEINALUs
.
	`em±y
())

112 
d–‘e
 
m_´efixSEINALUs
.
	`äÚt
();

113 
m_´efixSEINALUs
.
	`pÝ_äÚt
();

115 
	}
}

117 
Void
 
	gTDecTÝ
::
	$ü—‹
()

119 
m_cGÝDecod”
.
	`ü—‹
();

120 
m_­cSliûPžÙ
 = 
Ãw
 
TComSliû
;

121 
m_uiSliûIdx
 = 0;

122 
	}
}

124 
Void
 
	gTDecTÝ
::
	$de¡roy
()

126 
m_cGÝDecod”
.
	`de¡roy
();

128 
d–‘e
 
m_­cSliûPžÙ
;

129 
m_­cSliûPžÙ
 = 
NULL
;

131 
m_cSliûDecod”
.
	`de¡roy
();

132 
	}
}

134 
Void
 
	gTDecTÝ
::
	$š™
()

137 
	`š™ROM
();

138 
m_cGÝDecod”
.
	`š™
Ð&
m_cEÁrÝyDecod”
, &
m_cSbacDecod”
, &
m_cBšCABAC
, &
m_cCavlcDecod”
, &
m_cSliûDecod”
, &
m_cLoÝFž‹r
, &
m_cSAO
);

139 
m_cSliûDecod”
.
	`š™
Ð&
m_cEÁrÝyDecod”
, &
m_cCuDecod”
, &
m_cÚfÜmªûCheck
 );

140 #ià
MCTS_ENC_CHECK


141 
m_cEÁrÝyDecod”
.
	`š™
(&
m_cP»diùiÚ
, &
m_cÚfÜmªûCheck
 );

143 
m_cEÁrÝyDecod”
.
	`š™
(&
m_cP»diùiÚ
);

145 
	}
}

147 
Void
 
	gTDecTÝ
::
	$d–‘ePicBufãr
 ( )

149 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

150 
IÁ
 
iSize
 = 
	`IÁ
Ð
m_cLi¡Pic
.
	`size
() );

152 
IÁ
 
i
 = 0; i < 
iSize
; i++ )

154 
TComPic
* 
pcPic
 = *(
™”Pic
++);

155 
pcPic
->
	`de¡roy
();

157 
d–‘e
 
pcPic
;

158 
pcPic
 = 
NULL
;

161 
m_cSAO
.
	`de¡roy
();

163 
m_cLoÝFž‹r
. 
	`de¡roy
();

166 
	`de¡royROM
();

167 
	}
}

169 
Void
 
	gTDecTÝ
::
	$xG‘NewPicBufãr
 ( cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
TComPic
*& 
½cPic
, cÚ¡ 
UIÁ
 
‹mpÜ®Lay”
 )

171 
m_iMaxRefPicNum
 = 
¥s
.
	`g‘MaxDecPicBufãršg
(
‹mpÜ®Lay”
);

172 ià(
m_cLi¡Pic
.
	`size
(è< (
UIÁ
)
m_iMaxRefPicNum
)

174 
½cPic
 = 
Ãw
 
	`TComPic
();

176 #ià
REDUCED_ENCODER_MEMORY


177 
½cPic
->
	`ü—‹
 ( 
¥s
, 
µs
, 
çl£
, 
Œue
);

179 
½cPic
->
	`ü—‹
 ( 
¥s
, 
µs
, 
Œue
);

182 
m_cLi¡Pic
.
	`pushBack
Ð
½cPic
 );

187 
BoÞ
 
bBufãrIsAvažabË
 = 
çl£
;

188 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

189 
™”Pic
 !ð
m_cLi¡Pic
.
	`’d
())

191 
½cPic
 = *(
™”Pic
++);

192 iàÐ
½cPic
->
	`g‘RecÚM¬k
(è=ð
çl£
 &&„pcPic->
	`g‘OuutM¬k
() == false)

194 
½cPic
->
	`£tOuutM¬k
(
çl£
);

195 
bBufãrIsAvažabË
 = 
Œue
;

199 iàÐ
½cPic
->
	`g‘Sliû
Ð0 )->
	`isReã»nûd
(è=ð
çl£
 &&„pcPic->
	`g‘OuutM¬k
() == false)

201 
½cPic
->
	`£tOuutM¬k
(
çl£
);

202 
½cPic
->
	`£tRecÚM¬k
Ð
çl£
 );

203 
½cPic
->
	`g‘PicYuvRec
()->
	`£tBÜd”Ex‹nsiÚ
Ð
çl£
 );

204 
bBufãrIsAvažabË
 = 
Œue
;

209 iàÐ!
bBufãrIsAvažabË
 )

212 
m_iMaxRefPicNum
++;

213 
½cPic
 = 
Ãw
 
	`TComPic
();

214 
m_cLi¡Pic
.
	`pushBack
Ð
½cPic
 );

216 
½cPic
->
	`de¡roy
();

217 #ià
REDUCED_ENCODER_MEMORY


218 
½cPic
->
	`ü—‹
 ( 
¥s
, 
µs
, 
çl£
, 
Œue
);

220 
½cPic
->
	`ü—‹
 ( 
¥s
, 
µs
, 
Œue
);

222 
	}
}

224 
Void
 
	gTDecTÝ
::
execu‹LoÝFž‹rs
(
IÁ
& 
poc
, 
TComLi¡
<
TComPic
*>*& 
½cLi¡Pic
)

226 ià(!
	gm_pcPic
)

232 
TComPic
* 
	gpcPic
 = 
m_pcPic
;

236 
	gm_cGÝDecod”
.
fž‹rPiùu»
(
pcPic
);

238 
	gTComSliû
::
sÜtPicLi¡
Ð
m_cLi¡Pic
 );

239 
	gpoc
 = 
pcPic
->
g‘Sliû
(
m_uiSliûIdx
-1)->
g‘POC
();

240 
	g½cLi¡Pic
 = &
m_cLi¡Pic
;

241 
	gm_cCuDecod”
.
de¡roy
();

242 
	gm_bFœ¡SliûInPiùu»
 = 
Œue
;

247 
Void
 
	gTDecTÝ
::
checkNoOuutPriÜPics
 (
TComLi¡
<
TComPic
*>* 
pcLi¡Pic
)

249 ià(!
pcLi¡Pic
 || !
m_isNoOuutPriÜPics
)

254 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
pcLi¡Pic
->
begš
();

256 
	g™”Pic
 !ð
pcLi¡Pic
->
’d
())

258 
TComPic
* 
pcPicTmp
 = *(
™”Pic
++);

259 ià(
	gm_Ï¡POCNoOuutPriÜPics
 !ð
pcPicTmp
->
g‘POC
())

261 
pcPicTmp
->
£tOuutM¬k
(
çl£
);

266 
Void
 
	gTDecTÝ
::
	$xC»©eLo¡Piùu»
(
IÁ
 
iLo¡Poc
)

268 
	`´štf
("\nš£¹šg†o¡…oø: %d\n",
iLo¡Poc
);

269 
TComPic
 *
cFžlPic
;

270 
	`xG‘NewPicBufãr
(*(
m_·¿m‘”S‘Mªag”
.
	`g‘Fœ¡SPS
()), *(m_·¿m‘”S‘Mªag”.
	`g‘Fœ¡PPS
()), 
cFžlPic
, 0);

271 
cFžlPic
->
	`g‘Sliû
(0)->
	`š™Sliû
();

273 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

274 
IÁ
 
þo£¡Poc
 = 1000000;

275  
™”Pic
 !ð
m_cLi¡Pic
.
	`’d
())

277 
TComPic
 * 
½cPic
 = *(
™”Pic
++);

278 if(
	`abs
(
½cPic
->
	`g‘PicSym
()->
	`g‘Sliû
(0)->
	`g‘POC
(è-
iLo¡Poc
)<
þo£¡Poc
&&absÔpcPic->g‘PicSym()->g‘Sliû(0)->g‘POC(è-iLo¡Poc)!=0&&½cPic->g‘PicSym()->g‘Sliû(0)->g‘POC()!=
m_­cSliûPžÙ
->getPOC())

280 
þo£¡Poc
=
	`abs
(
½cPic
->
	`g‘PicSym
()->
	`g‘Sliû
(0)->
	`g‘POC
(è-
iLo¡Poc
);

283 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

284  
™”Pic
 !ð
m_cLi¡Pic
.
	`’d
())

286 
TComPic
 *
½cPic
 = *(
™”Pic
++);

287 if(
	`abs
(
½cPic
->
	`g‘PicSym
()->
	`g‘Sliû
(0)->
	`g‘POC
(è-
iLo¡Poc
)==
þo£¡Poc
&&½cPic->g‘PicSym()->g‘Sliû(0)->g‘POC()!=
m_­cSliûPžÙ
->getPOC())

289 
	`´štf
("cÝyšg…iùu» %dØ%d (%d)\n",
½cPic
->
	`g‘PicSym
()->
	`g‘Sliû
(0)->
	`g‘POC
(è,
iLo¡Poc
,
m_­cSliûPžÙ
->getPOC());

290 
½cPic
->
	`g‘PicYuvRec
()->
	`cÝyToPic
(
cFžlPic
->getPicYuvRec());

294 
cFžlPic
->
	`£tCu¼SliûIdx
(0);

295 
IÁ
 
ùuRsAddr
=0; ctuRsAddr<
cFžlPic
->
	`g‘Numb”OfCtusInF¿me
(); ctuRsAddr++)

297 
cFžlPic
->
	`g‘Ctu
(
ùuRsAddr
)->
	`š™Ctu
(cFillPic, ctuRsAddr);

299 
cFžlPic
->
	`g‘Sliû
(0)->
	`£tReã»nûd
(
Œue
);

300 
cFžlPic
->
	`g‘Sliû
(0)->
	`£tPOC
(
iLo¡Poc
);

301 
	`xUpd©eP»viousTid0POC
(
cFžlPic
->
	`g‘Sliû
(0));

302 
cFžlPic
->
	`£tRecÚM¬k
(
Œue
);

303 
cFžlPic
->
	`£tOuutM¬k
(
Œue
);

304 if(
m_pocRªdomAcûss
 =ð
MAX_INT
)

306 
m_pocRªdomAcûss
 = 
iLo¡Poc
;

308 
	}
}

310 #ià
MCTS_EXTRACTION


311 
Void
 
	gTDecTÝ
::
	$xAùiv©eP¬am‘”S‘s
(
BoÞ
 
bSkCabacAndRecÚ¡ruùiÚ
)

313 
Void
 
TDecTÝ
::
	$xAùiv©eP¬am‘”S‘s
()

316 ià(
m_bFœ¡SliûInPiùu»
)

318 cÚ¡ 
TComPPS
 *
µs
 = 
m_·¿m‘”S‘Mªag”
.
	`g‘PPS
(
m_­cSliûPžÙ
->
	`g‘PPSId
());

319 
	`as£¹
 (
µs
 != 0);

321 cÚ¡ 
TComSPS
 *
¥s
 = 
m_·¿m‘”S‘Mªag”
.
	`g‘SPS
(
µs
->
	`g‘SPSId
());

322 
	`as£¹
 (
¥s
 != 0);

324 
m_·¿m‘”S‘Mªag”
.
	`þ—rSPSChªgedFÏg
(
¥s
->
	`g‘SPSId
());

325 
m_·¿m‘”S‘Mªag”
.
	`þ—rPPSChªgedFÏg
(
µs
->
	`g‘PPSId
());

327 ià(
çl£
 =ð
m_·¿m‘”S‘Mªag”
.
	`aùiv©ePPS
(
m_­cSliûPžÙ
->
	`g‘PPSId
(),m_­cSliûPžÙ->
	`isIRAP
()))

329 
	`´štf
 ("Parameter set‡ctivation failed!");

330 
	`as£¹
 (0);

333 
	`xP¬£P»fixSEImes§ges
();

334 #ià
MCTS_ENC_CHECK


335 
	`xAÇly£P»fixSEImes§ges
();

338 #ià
RExt__HIGH_BIT_DEPTH_SUPPORT
==0

339 ià(
¥s
->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
(è|| sps->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
)>12 || sps->g‘B™D•th(
CHANNEL_TYPE_CHROMA
)>12 )

341 
	`´štf
("High bit depth support must beƒnabled‡t compile-time in ordero decodehis bitstream\n");

342 
	`as£¹
 (0);

343 
	`ex™
(1);

352 
	`xG‘NewPicBufãr
 (*(
¥s
), *(
µs
), 
m_pcPic
, 
m_­cSliûPžÙ
->
	`g‘TLay”
());

353 
m_­cSliûPžÙ
->
	`­¶yReã»nûPiùu»S‘
(
m_cLi¡Pic
, m_­cSliûPžÙ->
	`g‘RPS
());

354 #ià
FGS_RDD5_ENABLE


356 
m_pcPic
->
	`ü—‹G¿šSyÁhesiz”
(
m_bFœ¡Piùu»InSequ’û
, &
m_g¿šCh¬aù”i¡ic
, &
m_g¿šBuf
, 
¥s
);

357 
m_bFœ¡Piùu»InSequ’û
 = 
çl£
;

360 
	`as£¹
(
m_pcPic
->
	`g‘NumAÎoÿ‹dSliû
(è=ð(
m_uiSliûIdx
 + 1));

361 
m_­cSliûPžÙ
 = 
m_pcPic
->
	`g‘PicSym
()->
	`sw­SliûObjeù
(m_­cSliûPžÙ, 
m_uiSliûIdx
);

364 
TComSliû
 *
pSliû
 = 
m_pcPic
->
	`g‘Sliû
(
m_uiSliûIdx
);

367 
µs
=
pSliû
->
	`g‘PPS
();

368 
¥s
=
pSliû
->
	`g‘SPS
();

371 
m_cSAO
.
	`ü—‹
Ð
¥s
->
	`g‘PicWidthInLumaSam¶es
(), sps->
	`g‘PicHeightInLumaSam¶es
(), sps->
	`g‘ChromaFÜm©Idc
(), sps->
	`g‘MaxCUWidth
(), sps->
	`g‘MaxCUHeight
(), sps->
	`g‘MaxTÙ®CUD•th
(), 
µs
->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
),…ps->g‘PpsRªgeEx‹nsiÚ().g‘Log2SaoOff£tSÿË(
CHANNEL_TYPE_CHROMA
) );

372 
m_cLoÝFž‹r
.
	`ü—‹
Ð
¥s
->
	`g‘MaxTÙ®CUD•th
() );

373 
m_cP»diùiÚ
.
	`š™TempBuff
(
¥s
->
	`g‘ChromaFÜm©Idc
());

376 
BoÞ
 
isF›ld
 = 
çl£
;

377 
BoÞ
 
isTÝF›ld
 = 
çl£
;

379 if(!
m_SEIs
.
	`em±y
())

382 
SEIMes§ges
 
piùu»TimšgSEIs
 = 
	`g‘SeisByTy³
(
m_SEIs
, 
SEI
::
PICTURE_TIMING
);

383 ià(
piùu»TimšgSEIs
.
	`size
()>0)

385 
SEIPiùu»Timšg
* 
piùu»Timšg
 = (SEIPiùu»Timšg*è*(
piùu»TimšgSEIs
.
	`begš
());

386 
isF›ld
 = (
piùu»Timšg
->
m_picSŒuù
 == 1) || (pictureTiming->m_picStruct == 2) || (pictureTiming->m_picStruct == 9) || (pictureTiming->m_picStruct == 10) || (pictureTiming->m_picStruct == 11) || (pictureTiming->m_picStruct == 12);

387 
isTÝF›ld
 = (
piùu»Timšg
->
m_picSŒuù
 == 1) || (pictureTiming->m_picStruct == 9) || (pictureTiming->m_picStruct == 11);

392 
m_pcPic
->
	`£tF›ld
(
isF›ld
);

393 
m_pcPic
->
	`£tTÝF›ld
(
isTÝF›ld
);

396 
m_pcPic
->
	`£tSEIs
(
m_SEIs
);

397 
m_SEIs
.
	`þ—r
();

398 #ià
MCTS_EXTRACTION


399 ià(!
bSkCabacAndRecÚ¡ruùiÚ
)

403 
m_cCuDecod”
.
	`ü—‹
 ( 
¥s
->
	`g‘MaxTÙ®CUD•th
(), sps->
	`g‘MaxCUWidth
(), sps->
	`g‘MaxCUHeight
(), sps->
	`g‘ChromaFÜm©Idc
() );

404 #ià
MCTS_ENC_CHECK


405 
m_cCuDecod”
.
	`š™
 ( &
m_cEÁrÝyDecod”
, &
m_cTrQuªt
, &
m_cP»diùiÚ
, &
m_cÚfÜmªûCheck
 );

407 
m_cCuDecod”
.
	`š™
(&
m_cEÁrÝyDecod”
, &
m_cTrQuªt
, &
m_cP»diùiÚ
);

409 
m_cTrQuªt
.
	`š™
 ( 
¥s
->
	`g‘MaxTrSize
() );

411 
m_cSliûDecod”
.
	`ü—‹
();

413 #ià
MCTS_EXTRACTION


419 
m_pcPic
->
	`®loÿ‹NewSliû
();

420 
	`as£¹
(
m_pcPic
->
	`g‘NumAÎoÿ‹dSliû
(è=ð(
m_uiSliûIdx
 + 1));

421 
m_­cSliûPžÙ
 = 
m_pcPic
->
	`g‘PicSym
()->
	`sw­SliûObjeù
(m_­cSliûPžÙ, 
m_uiSliûIdx
);

423 
TComSliû
 *
pSliû
 = 
m_pcPic
->
	`g‘Sliû
(
m_uiSliûIdx
);

425 cÚ¡ 
TComSPS
 *
¥s
 = 
pSliû
->
	`g‘SPS
();

426 cÚ¡ 
TComPPS
 *
µs
 = 
pSliû
->
	`g‘PPS
();

429 ià(
m_·¿m‘”S‘Mªag”
.
	`g‘SPSChªgedFÏg
(
¥s
->
	`g‘SPSId
()) )

431 
	`´štf
("Error -‡‚ew SPS has been decoded while…rocessing‡…icture\n");

432 
	`ex™
(1);

434 ià(
m_·¿m‘”S‘Mªag”
.
	`g‘PPSChªgedFÏg
(
µs
->
	`g‘PPSId
()) )

436 
	`´štf
("Error -‡‚ew PPS has been decoded while…rocessing‡…icture\n");

437 
	`ex™
(1);

440 
	`xP¬£P»fixSEImes§ges
();

441 #ià
MCTS_ENC_CHECK


442 
	`xAÇly£P»fixSEImes§ges
();

445 if(!
m_SEIs
.
	`em±y
())

448 
SEIMes§ges
 &
picSEI
 = 
m_pcPic
->
	`g‘SEIs
();

449 
SEIMes§ges
 
decodšgUn™Infos
 = 
	`exŒaùSeisByTy³
 (
m_SEIs
, 
SEI
::
DECODING_UNIT_INFO
);

450 
picSEI
.
	`š£¹
ÕicSEI.
	`’d
(), 
decodšgUn™Infos
.
	`begš
(), decodingUnitInfos.end());

451 
	`d–‘eSEIs
(
m_SEIs
);

454 
	}
}

457 
Void
 
	gTDecTÝ
::
	$xP¬£P»fixSEIsFÜUnknownVCLN®
()

459 !
m_´efixSEINALUs
.
	`em±y
())

462 
	`´štf
("Discarding Prefix SEI‡ssociated with unknown VCL NAL unit.\n");

463 
d–‘e
 
m_´efixSEINALUs
.
	`äÚt
();

466 
	}
}

469 
Void
 
	gTDecTÝ
::
	$xP¬£P»fixSEImes§ges
()

471 !
m_´efixSEINALUs
.
	`em±y
())

473 
IÅutNALUn™
 &
Çlu
=*
m_´efixSEINALUs
.
	`äÚt
();

474 
m_£iR—d”
.
	`·r£SEImes§ge
Ð&(
Çlu
.
	`g‘B™¡»am
()), 
m_SEIs
,‚®u.
m_ÇlUn™Ty³
, 
m_·¿m‘”S‘Mªag”
.
	`g‘AùiveSPS
(), 
m_pDecodedSEIOuutSŒ—m
 );

475 
d–‘e
 
m_´efixSEINALUs
.
	`äÚt
();

476 
m_´efixSEINALUs
.
	`pÝ_äÚt
();

478 
	}
}

480 #ià
MCTS_ENC_CHECK


481 
Void
 
	gTDecTÝ
::
	$xAÇly£P»fixSEImes§ges
()

483 ià(
m_tmùsCheckEÇbËd
)

485 
SEIMes§ges
 
mùsSEIs
 = 
	`g‘SeisByTy³
(
m_SEIs
, 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
);

486 
SEIMes§ges
::
™”©Ü
 
™
 = 
mùsSEIs
.
	`begš
(); iˆ!ðmùsSEIs.
	`’d
(); it++)

488 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
 *
mùs
 = (SEITempMÙiÚCÚ¡¿šedTžeS‘s*)(*
™
);

489 ià(!
mùs
->
m_—ch_tže_Úe_tže_£t_æag
)

491 
	`´štf
("cannot (yet) check Temporal constrained MCTS ifƒach_tile_one_tile_set_flag is‚otƒnabled\n");

492 
	`ex™
(1);

496 
	`´štf
("MCTS checkƒnabled!\n");

497 
m_cÚfÜmªûCheck
.
	`’abËTMùsCheck
(
Œue
);

501 
	}
}

504 #ià
MCTS_EXTRACTION


505 
BoÞ
 
	gTDecTÝ
::
	$xDecodeSliû
(
IÅutNALUn™
 &
Çlu
, 
IÁ
 &
iSkF¿me
, IÁ 
iPOCLa¡Di¥Ïy
, 
BoÞ
 
bSkCabacAndRecÚ¡ruùiÚ
)

507 
BoÞ
 
TDecTÝ
::
	$xDecodeSliû
(
IÅutNALUn™
 &
Çlu
, 
IÁ
 &
iSkF¿me
, IÁ 
iPOCLa¡Di¥Ïy
)

510 
m_­cSliûPžÙ
->
	`š™Sliû
();

513 ià(
m_bFœ¡SliûInPiùu»
)

515 
m_uiSliûIdx
 = 0;

519 
m_­cSliûPžÙ
->
	`cÝySliûInfo
Ð
m_pcPic
->
	`g‘PicSym
()->
	`g‘Sliû
(
m_uiSliûIdx
-1) );

521 
m_­cSliûPžÙ
->
	`£tSliûIdx
(
m_uiSliûIdx
);

523 
m_­cSliûPžÙ
->
	`£tN®Un™Ty³
(
Çlu
.
m_ÇlUn™Ty³
);

524 
BoÞ
 
nÚReã»nûFÏg
 = (
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_TRAIL_N
 ||

525 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_TSA_N
 ||

526 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_STSA_N
 ||

527 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RADL_N
 ||

528 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_N
);

529 
m_­cSliûPžÙ
->
	`£tTempÜ®Lay”NÚReã»nûFÏg
(
nÚReã»nûFÏg
);

530 
m_­cSliûPžÙ
->
	`£tReã»nûd
(
Œue
);

531 
m_­cSliûPžÙ
->
	`£tTLay”Info
(
Çlu
.
m_‹mpÜ®Id
);

533 #ià
ENC_DEC_TRACE


534 cÚ¡ 
UIÁ64
 
Üigš®SymbÞCouÁ
 = 
g_nSymbÞCouÁ”
;

537 
m_cEÁrÝyDecod”
.
	`decodeSliûH—d”
 (
m_­cSliûPžÙ
, &
m_·¿m‘”S‘Mªag”
, 
m_´evTid0POC
);

540 if(
m_­cSliûPžÙ
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& 
m_´evSliûSk³d
)

542 
m_­cSliûPžÙ
->
	`£tPOC
(
m_sk³dPOC
);

545 
	`xUpd©eP»viousTid0POC
(
m_­cSliûPžÙ
);

547 
m_­cSliûPžÙ
->
	`£tAssocŸ‹dIRAPPOC
(
m_pocCRA
);

548 
m_­cSliûPžÙ
->
	`£tAssocŸ‹dIRAPTy³
(
m_assocŸ‹dIRAPTy³
);

551 ià(
m_­cSliûPžÙ
->
	`g‘R­PicFÏg
())

553 ià((
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è>ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 && m_­cSliûPžÙ->g‘N®Un™Ty³(è<ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
) ||

554 (
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 && 
m_bFœ¡SliûInSequ’û
) ||

555 (
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 && m_­cSliûPžÙ->
	`g‘HªdËC¿AsBÏFÏg
()))

557 
m_­cSliûPžÙ
->
	`£tNoRa¦OuutFÏg
(
Œue
);

560 ià(!
m_bFœ¡SliûInB™¡»am
 && 
m_­cSliûPžÙ
->
	`g‘R­PicFÏg
(è&& m_­cSliûPžÙ->
	`g‘NoRa¦OuutFÏg
())

562 ià(
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
)

564 
m_­cSliûPžÙ
->
	`£tNoOuutPriÜPicsFÏg
(
Œue
);

569 
m_­cSliûPžÙ
->
	`£tNoOuutPriÜPicsFÏg
(
çl£
);

572 if(
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
)

574 
m_üaNoRa¦OuutFÏg
 = 
m_­cSliûPžÙ
->
	`g‘NoRa¦OuutFÏg
();

577 ià(
m_­cSliûPžÙ
->
	`g‘R­PicFÏg
(è&& m_­cSliûPžÙ->
	`g‘NoOuutPriÜPicsFÏg
())

579 
m_Ï¡POCNoOuutPriÜPics
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

580 
m_isNoOuutPriÜPics
 = 
Œue
;

584 
m_isNoOuutPriÜPics
 = 
çl£
;

588 ià(
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_N
 || m_­cSliûPžÙ->g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_RASL_R
)

590 iàÐ
m_üaNoRa¦OuutFÏg
 )

592 
m_­cSliûPžÙ
->
	`£tPicOuutFÏg
(
çl£
);

596 ià(
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 && 
m_üaNoRa¦OuutFÏg
)

598 
TComPPS
 *
µs
 = 
m_·¿m‘”S‘Mªag”
.
	`g‘PPS
(
m_­cSliûPžÙ
->
	`g‘PPSId
());

599 
	`as£¹
 (
µs
 != 0);

600 
TComSPS
 *
¥s
 = 
m_·¿m‘”S‘Mªag”
.
	`g‘SPS
(
µs
->
	`g‘SPSId
());

601 
	`as£¹
 (
¥s
 != 0);

602 
IÁ
 
iMaxPOClsb
 = 1 << 
¥s
->
	`g‘B™sFÜPOC
();

603 
m_­cSliûPžÙ
->
	`£tPOC
Ðm_­cSliûPžÙ->
	`g‘POC
(è& (
iMaxPOClsb
 - 1) );

604 
	`xUpd©eP»viousTid0POC
(
m_­cSliûPžÙ
);

609 ià(
	`isRªdomAcûssSkPiùu»
(
iSkF¿me
, 
iPOCLa¡Di¥Ïy
))

611 
m_´evSliûSk³d
 = 
Œue
;

612 
m_sk³dPOC
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

613  
çl£
;

616 ià(
	`isSkPiùu»FÜBLA
(
iPOCLa¡Di¥Ïy
))

618 
m_´evSliûSk³d
 = 
Œue
;

619 
m_sk³dPOC
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

620  
çl£
;

624 
m_´evSliûSk³d
 = 
çl£
;

627 ià(!
m_­cSliûPžÙ
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& m_­cSliûPžÙ->
	`g‘POC
()!=
m_´evPOC
 && !
m_bFœ¡SliûInSequ’û
 && (m_­cSliûPžÙ->
	`g‘SliûCurS¹CtuTsAddr
() != 0))

629 
	`´štf
 ("Warning,he first slice of‡…icture might have been†ost!\n");

633 ià(!
m_­cSliûPžÙ
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& (m_­cSliûPžÙ->
	`g‘SliûCurS¹CtuTsAddr
(è=ð0 && !
m_bFœ¡SliûInPiùu»
) )

635 ià(
m_´evPOC
 >ð
m_pocRªdomAcûss
)

637 
m_´evPOC
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

638 #ià
ENC_DEC_TRACE


640 
g_nSymbÞCouÁ”
 = 
Üigš®SymbÞCouÁ
;

642  
Œue
;

644 
m_´evPOC
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

649 
IÁ
 
lo¡Poc
;

650 (
lo¡Poc
=
m_­cSliûPžÙ
->
	`checkTh©AÎRefPicsA»AvažabË
(
m_cLi¡Pic
, m_­cSliûPžÙ->
	`g‘RPS
(), 
Œue
, 
m_pocRªdomAcûss
)) > 0)

652 
	`xC»©eLo¡Piùu»
(
lo¡Poc
-1);

656 ià(!
m_­cSliûPžÙ
->
	`g‘D•’d’tSliûSegm’tFÏg
())

658 
m_´evPOC
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

662 #ià
MCTS_EXTRACTION


663 
	`xAùiv©eP¬am‘”S‘s
(
bSkCabacAndRecÚ¡ruùiÚ
);

665 
	`xAùiv©eP¬am‘”S‘s
();

669 
TComSliû
* 
pcSliû
 = 
m_pcPic
->
	`g‘PicSym
()->
	`g‘Sliû
(
m_uiSliûIdx
);

671 ià(
TDecCÚfÜmªûCheck
::
	`doCheckšg
())

673 
m_cÚfÜmªûCheck
.
	`checkSliûAùiv©iÚ
(*
pcSliû
, 
Çlu
, *
m_pcPic
, 
m_bFœ¡SliûInB™¡»am
, 
m_bFœ¡SliûInSequ’û
, 
m_bFœ¡SliûInPiùu»
);

676 
m_bFœ¡SliûInSequ’û
 = 
çl£
;

677 
m_bFœ¡SliûInB™¡»am
 = 
çl£
;

681 
pcSliû
->
	`£tSliûSegm’tCurS¹CtuTsAddr
Ð
m_pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
ÕcSliû->
	`g‘SliûSegm’tCurS¹CtuTsAddr
()) );

682 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
Ð
m_pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
ÕcSliû->
	`g‘SliûSegm’tCurEndCtuTsAddr
()) );

683 if(!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

685 
pcSliû
->
	`£tSliûCurS¹CtuTsAddr
(
m_pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
ÕcSliû->
	`g‘SliûCurS¹CtuTsAddr
()));

686 
pcSliû
->
	`£tSliûCurEndCtuTsAddr
(
m_pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
ÕcSliû->
	`g‘SliûCurEndCtuTsAddr
()));

689 
m_pcPic
->
	`£tTLay”
(
Çlu
.
m_‹mpÜ®Id
);

691 ià(!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

693 
pcSliû
->
	`checkCRA
ÕcSliû->
	`g‘RPS
(), 
m_pocCRA
, 
m_assocŸ‹dIRAPTy³
, 
m_cLi¡Pic
);

694 #ià
MCTS_EXTRACTION


695 ià(
bSkCabacAndRecÚ¡ruùiÚ
)

697 
m_bFœ¡SliûInPiùu»
 = 
çl£
;

698 
m_uiSliûIdx
++;

699  
çl£
;

703 
pcSliû
->
	`£tRefPicLi¡
Ð
m_cLi¡Pic
, 
Œue
 );

707 ià(
pcSliû
->
	`isIÁ”B
(è&&…cSliû->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
) == 0)

709 
IÁ
 
iNumRefIdx
 = 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
);

710 
pcSliû
->
	`£tNumRefIdx
 ( 
REF_PIC_LIST_1
, 
iNumRefIdx
 );

712 
IÁ
 
iRefIdx
 = 0; iRefIdx < 
iNumRefIdx
; iRefIdx++)

714 
pcSliû
->
	`£tRefPic
ÕcSliû->
	`g‘RefPic
(
REF_PIC_LIST_0
, 
iRefIdx
), 
REF_PIC_LIST_1
, iRefIdx);

717 ià(!
pcSliû
->
	`isIÁ¿
())

719 
BoÞ
 
bLowD–ay
 = 
Œue
;

720 
IÁ
 
iCu¼POC
 = 
pcSliû
->
	`g‘POC
();

721 
IÁ
 
iRefIdx
 = 0;

723 
iRefIdx
 = 0; iRefIdx < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
è&& 
bLowD–ay
; iRefIdx++)

725 iàÐ
pcSliû
->
	`g‘RefPic
(
REF_PIC_LIST_0
, 
iRefIdx
)->
	`g‘POC
(è> 
iCu¼POC
 )

727 
bLowD–ay
 = 
çl£
;

730 ià(
pcSliû
->
	`isIÁ”B
())

732 
iRefIdx
 = 0; iRefIdx < 
pcSliû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
è&& 
bLowD–ay
; iRefIdx++)

734 iàÐ
pcSliû
->
	`g‘RefPic
(
REF_PIC_LIST_1
, 
iRefIdx
)->
	`g‘POC
(è> 
iCu¼POC
 )

736 
bLowD–ay
 = 
çl£
;

741 
pcSliû
->
	`£tCheckLDC
(
bLowD–ay
);

745 
pcSliû
->
	`£tRefPOCLi¡
();

748 
m_pcPic
->
	`£tCu¼SliûIdx
(
m_uiSliûIdx
);

749 if(
pcSliû
->
	`g‘SPS
()->
	`g‘SÿlšgLi¡FÏg
())

751 
TComSÿlšgLi¡
 
sÿlšgLi¡
;

752 if(
pcSliû
->
	`g‘PPS
()->
	`g‘SÿlšgLi¡P»£ÁFÏg
())

754 
sÿlšgLi¡
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘SÿlšgLi¡
();

756 ià(
pcSliû
->
	`g‘SPS
()->
	`g‘SÿlšgLi¡P»£ÁFÏg
())

758 
sÿlšgLi¡
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘SÿlšgLi¡
();

762 
sÿlšgLi¡
.
	`£tDeçuÉSÿlšgLi¡
();

764 
m_cTrQuªt
.
	`£tSÿlšgLi¡Dec
(
sÿlšgLi¡
);

765 
m_cTrQuªt
.
	`£tU£SÿlšgLi¡
(
Œue
);

769 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
] =

771 
pcSliû
->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
CHANNEL_TYPE_LUMA
),

772 
pcSliû
->
	`g‘SPS
()->
	`g‘MaxLog2TrDyÇmicRªge
(
CHANNEL_TYPE_CHROMA
)

774 
m_cTrQuªt
.
	`£tFÏtSÿlšgLi¡
(
maxLog2TrDyÇmicRªge
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•ths
());

775 
m_cTrQuªt
.
	`£tU£SÿlšgLi¡
(
çl£
);

779 
m_cGÝDecod”
.
	`decom´essSliû
(&(
Çlu
.
	`g‘B™¡»am
()), 
m_pcPic
);

781 
m_bFœ¡SliûInPiùu»
 = 
çl£
;

782 
m_uiSliûIdx
++;

784  
çl£
;

785 
	}
}

787 
Void
 
	gTDecTÝ
::
xDecodeVPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
)

789 
TComVPS
* 
vps
 = 
Ãw
 TComVPS();

791 
	gm_cEÁrÝyDecod”
.
decodeVPS
Ð
vps
 );

792 
	gm_·¿m‘”S‘Mªag”
.
¡ÜeVPS
(
vps
, 
ÇluD©a
);

795 
Void
 
	gTDecTÝ
::
xDecodeSPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
)

797 
TComSPS
* 
¥s
 = 
Ãw
 TComSPS();

798 #ià
O0043_BEST_EFFORT_DECODING


799 
	g¥s
->
£tFÜûDecodeB™D•th
(
m_fÜûDecodeB™D•th
);

801 
	gm_cEÁrÝyDecod”
.
decodeSPS
Ð
¥s
 );

802 
	gm_·¿m‘”S‘Mªag”
.
¡ÜeSPS
(
¥s
, 
ÇluD©a
);

805 
Void
 
	gTDecTÝ
::
xDecodePPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
)

807 
TComPPS
* 
µs
 = 
Ãw
 TComPPS();

808 
	gm_cEÁrÝyDecod”
.
decodePPS
Ð
µs
 );

809 
	gm_·¿m‘”S‘Mªag”
.
¡ÜePPS
Ð
µs
, 
ÇluD©a
);

812 #ià
MCTS_EXTRACTION


813 
BoÞ
 
	gTDecTÝ
::
	$decode
(
IÅutNALUn™
& 
Çlu
, 
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
, 
BoÞ
 
bSkCabacAndRecÚ¡ruùiÚ
)

815 
BoÞ
 
TDecTÝ
::
	$decode
(
IÅutNALUn™
& 
Çlu
, 
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
)

819 ià(
Çlu
.
m_nuhLay”Id
 > 0)

821 
	`årštf
 (
¡d”r
, "W¬nšg: found NAL un™ w™h‚uh_Ïy”_idƒqu®Ø%d. IgnÜšg.\n", 
Çlu
.
m_nuhLay”Id
);

822  
çl£
;

825 
m_cEÁrÝyDecod”
.
	`£tEÁrÝyDecod”
 (&
m_cCavlcDecod”
);

826 
m_cEÁrÝyDecod”
.
	`£tB™¡»am
 (&(
Çlu
.
	`g‘B™¡»am
()));

828 
Çlu
.
m_ÇlUn™Ty³
)

830 
NAL_UNIT_VPS
:

831 
	`xDecodeVPS
(
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
());

832  
çl£
;

834 
NAL_UNIT_SPS
:

835 
	`xDecodeSPS
(
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
());

836  
çl£
;

838 
NAL_UNIT_PPS
:

839 
	`xDecodePPS
(
Çlu
.
	`g‘B™¡»am
().
	`g‘Fifo
());

840  
çl£
;

842 
NAL_UNIT_PREFIX_SEI
:

844 
m_´efixSEINALUs
.
	`push_back
(
Ãw
 
	`IÅutNALUn™
(
Çlu
));

845  
çl£
;

847 
NAL_UNIT_SUFFIX_SEI
:

848 ià(
m_pcPic
)

850 
m_£iR—d”
.
	`·r£SEImes§ge
Ð&(
Çlu
.
	`g‘B™¡»am
()), 
m_pcPic
->
	`g‘SEIs
(),‚®u.
m_ÇlUn™Ty³
, 
m_·¿m‘”S‘Mªag”
.
	`g‘AùiveSPS
(), 
m_pDecodedSEIOuutSŒ—m
 );

854 
	`´štf
 ("Note:„eceived suffix SEI but‚o…icture currently‡ctive.\n");

856  
çl£
;

858 
NAL_UNIT_CODED_SLICE_TRAIL_R
:

859 
NAL_UNIT_CODED_SLICE_TRAIL_N
:

860 
NAL_UNIT_CODED_SLICE_TSA_R
:

861 
NAL_UNIT_CODED_SLICE_TSA_N
:

862 
NAL_UNIT_CODED_SLICE_STSA_R
:

863 
NAL_UNIT_CODED_SLICE_STSA_N
:

864 
NAL_UNIT_CODED_SLICE_BLA_W_LP
:

865 
NAL_UNIT_CODED_SLICE_BLA_W_RADL
:

866 
NAL_UNIT_CODED_SLICE_BLA_N_LP
:

867 
NAL_UNIT_CODED_SLICE_IDR_W_RADL
:

868 
NAL_UNIT_CODED_SLICE_IDR_N_LP
:

869 
NAL_UNIT_CODED_SLICE_CRA
:

870 
NAL_UNIT_CODED_SLICE_RADL_N
:

871 
NAL_UNIT_CODED_SLICE_RADL_R
:

872 
NAL_UNIT_CODED_SLICE_RASL_N
:

873 
NAL_UNIT_CODED_SLICE_RASL_R
:

874 #ià
MCTS_EXTRACTION


875  
	`xDecodeSliû
(
Çlu
, 
iSkF¿me
, 
iPOCLa¡Di¥Ïy
, 
bSkCabacAndRecÚ¡ruùiÚ
);

877  
	`xDecodeSliû
(
Çlu
, 
iSkF¿me
, 
iPOCLa¡Di¥Ïy
);

881 
NAL_UNIT_EOS
:

882 
m_assocŸ‹dIRAPTy³
 = 
NAL_UNIT_INVALID
;

883 
m_pocCRA
 = 0;

884 
m_pocRªdomAcûss
 = 
MAX_INT
;

885 
m_´evPOC
 = 
MAX_INT
;

886 
m_´evSliûSk³d
 = 
çl£
;

887 
m_sk³dPOC
 = 0;

888  
çl£
;

890 
NAL_UNIT_ACCESS_UNIT_DELIMITER
:

892 
AUDR—d”
 
audR—d”
;

893 
UIÁ
 
picTy³
;

894 
audR—d”
.
	`·r£AcûssUn™D–im™”
(&(
Çlu
.
	`g‘B™¡»am
()),
picTy³
);

895 
	`´štf
 ("Note: found NAL_UNIT_ACCESS_UNIT_DELIMITER\n");

896  
çl£
;

899 
NAL_UNIT_EOB
:

900  
çl£
;

902 
NAL_UNIT_FILLER_DATA
:

904 
FDR—d”
 
fdR—d”
;

905 
UIÁ
 
size
;

906 
fdR—d”
.
	`·r£FžËrD©a
(&(
Çlu
.
	`g‘B™¡»am
()),
size
);

907 
	`´štf
 ("NÙe: found NAL_UNIT_FILLER_DATA w™h %u by‹ ·ylßd.\n", 
size
);

908  
çl£
;

911 
NAL_UNIT_RESERVED_VCL_N10
:

912 
NAL_UNIT_RESERVED_VCL_R11
:

913 
NAL_UNIT_RESERVED_VCL_N12
:

914 
NAL_UNIT_RESERVED_VCL_R13
:

915 
NAL_UNIT_RESERVED_VCL_N14
:

916 
NAL_UNIT_RESERVED_VCL_R15
:

918 
NAL_UNIT_RESERVED_IRAP_VCL22
:

919 
NAL_UNIT_RESERVED_IRAP_VCL23
:

921 
NAL_UNIT_RESERVED_VCL24
:

922 
NAL_UNIT_RESERVED_VCL25
:

923 
NAL_UNIT_RESERVED_VCL26
:

924 
NAL_UNIT_RESERVED_VCL27
:

925 
NAL_UNIT_RESERVED_VCL28
:

926 
NAL_UNIT_RESERVED_VCL29
:

927 
NAL_UNIT_RESERVED_VCL30
:

928 
NAL_UNIT_RESERVED_VCL31
:

929 
	`´štf
 ("Note: found„eserved VCL NAL unit.\n");

930 
	`xP¬£P»fixSEIsFÜUnknownVCLN®
();

931  
çl£
;

933 
NAL_UNIT_RESERVED_NVCL41
:

934 
NAL_UNIT_RESERVED_NVCL42
:

935 
NAL_UNIT_RESERVED_NVCL43
:

936 
NAL_UNIT_RESERVED_NVCL44
:

937 
NAL_UNIT_RESERVED_NVCL45
:

938 
NAL_UNIT_RESERVED_NVCL46
:

939 
NAL_UNIT_RESERVED_NVCL47
:

940 
	`´štf
 ("Note: found„eserved NAL unit.\n");

941  
çl£
;

942 
NAL_UNIT_UNSPECIFIED_48
:

943 
NAL_UNIT_UNSPECIFIED_49
:

944 
NAL_UNIT_UNSPECIFIED_50
:

945 
NAL_UNIT_UNSPECIFIED_51
:

946 
NAL_UNIT_UNSPECIFIED_52
:

947 
NAL_UNIT_UNSPECIFIED_53
:

948 
NAL_UNIT_UNSPECIFIED_54
:

949 
NAL_UNIT_UNSPECIFIED_55
:

950 
NAL_UNIT_UNSPECIFIED_56
:

951 
NAL_UNIT_UNSPECIFIED_57
:

952 
NAL_UNIT_UNSPECIFIED_58
:

953 
NAL_UNIT_UNSPECIFIED_59
:

954 
NAL_UNIT_UNSPECIFIED_60
:

955 
NAL_UNIT_UNSPECIFIED_61
:

956 
NAL_UNIT_UNSPECIFIED_62
:

957 
NAL_UNIT_UNSPECIFIED_63
:

958 
	`´štf
 ("Note: found unspecified NAL unit.\n");

959  
çl£
;

961 
	`as£¹
 (0);

965  
çl£
;

966 
	}
}

974 
BoÞ
 
	gTDecTÝ
::
	$isSkPiùu»FÜBLA
(
IÁ
& 
iPOCLa¡Di¥Ïy
)

976 ià((
m_assocŸ‹dIRAPTy³
 =ð
NAL_UNIT_CODED_SLICE_BLA_N_LP
 || m_assocŸ‹dIRAPTy³ =ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 || m_assocŸ‹dIRAPTy³ =ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
) &&

977 
m_­cSliûPžÙ
->
	`g‘POC
(è< 
m_pocCRA
 && (m_­cSliûPžÙ->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_R
 || m_­cSliûPžÙ->g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_RASL_N
))

979 
iPOCLa¡Di¥Ïy
++;

980  
Œue
;

982  
çl£
;

983 
	}
}

998 
BoÞ
 
	gTDecTÝ
::
	$isRªdomAcûssSkPiùu»
(
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
)

1000 ià(
iSkF¿me
)

1002 
iSkF¿me
--;

1003  
Œue
;

1005 ià(
m_pocRªdomAcûss
 =ð
MAX_INT
)

1007 iàÐ
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA


1008 || 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


1009 || 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


1010 || 
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL
 )

1013 
m_pocRªdomAcûss
 = 
m_­cSliûPžÙ
->
	`g‘POC
();

1015 iàÐ
m_­cSliûPžÙ
->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 || m_­cSliûPžÙ->g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 )

1017 
m_pocRªdomAcûss
 = -
MAX_INT
;

1021 if(!
m_w¬nšgMes§geSkPiùu»
)

1023 
	`´štf
("\nWarning:his is‚ot‡ valid„andom‡ccess…oint‡ndhe data is discarded untilhe first CRA…icture");

1024 
m_w¬nšgMes§geSkPiùu»
 = 
Œue
;

1026  
Œue
;

1030 ià(
m_­cSliûPžÙ
->
	`g‘POC
(è< 
m_pocRªdomAcûss
 && (m_­cSliûPžÙ->
	`g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_R
 || m_­cSliûPžÙ->g‘N®Un™Ty³(è=ð
NAL_UNIT_CODED_SLICE_RASL_N
))

1032 
iPOCLa¡Di¥Ïy
++;

1033  
Œue
;

1036  
çl£
;

1037 
	}
}

	@source/Lib/TLibDecoder/TDecTop.h

38 #iâdeà
__TDECTOP__


39 
	#__TDECTOP__


	)

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComLi¡.h
"

43 
	~"TLibCommÚ/TComPicYuv.h
"

44 
	~"TLibCommÚ/TComPic.h
"

45 
	~"TLibCommÚ/TComTrQuªt.h
"

46 
	~"TLibCommÚ/TComP»diùiÚ.h
"

47 
	~"TLibCommÚ/SEI.h
"

49 
	~"TDecGÝ.h
"

50 
	~"TDecEÁrÝy.h
"

51 
	~"TDecSbac.h
"

52 
	~"TDecCAVLC.h
"

53 
	~"SEI»ad.h
"

54 
	~"TDecCÚfÜmªû.h
"

56 
þass
 
	gIÅutNALUn™
;

66 þas 
	cTDecTÝ


68 
	m´iv©e
:

69 
IÁ
 
m_iMaxRefPicNum
;

71 
N®Un™Ty³
 
	mm_assocŸ‹dIRAPTy³
;

72 
IÁ
 
	mm_pocCRA
;

73 
IÁ
 
	mm_pocRªdomAcûss
;

75 
	mTComLi¡
<
	mTComPic
*> 
	mm_cLi¡Pic
;

76 
P¬am‘”S‘Mªag”
 
	mm_·¿m‘”S‘Mªag”
;

77 
TComSliû
* 
	mm_­cSliûPžÙ
;

79 
SEIMes§ges
 
	mm_SEIs
;

82 
TComP»diùiÚ
 
	mm_cP»diùiÚ
;

83 
TComTrQuªt
 
	mm_cTrQuªt
;

84 
TDecGÝ
 
	mm_cGÝDecod”
;

85 
TDecSliû
 
	mm_cSliûDecod”
;

86 
TDecCu
 
	mm_cCuDecod”
;

87 
TDecEÁrÝy
 
	mm_cEÁrÝyDecod”
;

88 
TDecCavlc
 
	mm_cCavlcDecod”
;

89 
TDecSbac
 
	mm_cSbacDecod”
;

90 
TDecBšCABAC
 
	mm_cBšCABAC
;

91 
SEIR—d”
 
	mm_£iR—d”
;

92 
TComLoÝFž‹r
 
	mm_cLoÝFž‹r
;

93 
TComSam¶eAd­tiveOff£t
 
	mm_cSAO
;

94 
TDecCÚfÜmªûCheck
 
	mm_cÚfÜmªûCheck
;

96 
BoÞ
 
isSkPiùu»FÜBLA
(
IÁ
& 
iPOCLa¡Di¥Ïy
);

97 
BoÞ
 
isRªdomAcûssSkPiùu»
(
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
);

98 
TComPic
* 
	mm_pcPic
;

99 
UIÁ
 
	mm_uiSliûIdx
;

100 
IÁ
 
	mm_´evPOC
;

101 
IÁ
 
	mm_´evTid0POC
;

102 
BoÞ
 
	mm_bFœ¡SliûInPiùu»
;

103 #ià
FGS_RDD5_ENABLE


104 
BoÞ
 
	mm_bFœ¡Piùu»InSequ’û
;

105 
SEIFžmG¿šSyÁhesiz”
 
	mm_g¿šCh¬aù”i¡ic
;

106 
TComPicYuv
 
	mm_g¿šBuf
;

108 
BoÞ
 
	mm_bFœ¡SliûInSequ’û
;

109 
BoÞ
 
	mm_´evSliûSk³d
;

110 
IÁ
 
	mm_sk³dPOC
;

111 
BoÞ
 
	mm_bFœ¡SliûInB™¡»am
;

112 
IÁ
 
	mm_Ï¡POCNoOuutPriÜPics
;

113 
BoÞ
 
	mm_isNoOuutPriÜPics
;

114 
BoÞ
 
	mm_üaNoRa¦OuutFÏg
;

115 #ià
O0043_BEST_EFFORT_DECODING


116 
UIÁ
 
	mm_fÜûDecodeB™D•th
;

118 
	m¡d
::
o¡»am
 *
m_pDecodedSEIOuutSŒ—m
;

120 
BoÞ
 
	mm_w¬nšgMes§geSkPiùu»
;

122 #ià
MCTS_ENC_CHECK


123 
BoÞ
 
	mm_tmùsCheckEÇbËd
;

126 
	m¡d
::
li¡
<
IÅutNALUn™
*> 
m_´efixSEINALUs
;

127 
	mpublic
:

128 
TDecTÝ
();

129 
	mvœtu®
 ~
TDecTÝ
();

131 
Void
 
ü—‹
 ();

132 
Void
 
de¡roy
 ();

134 
Void
 
	$£tDecodedPiùu»HashSEIEÇbËd
(
IÁ
 
’abËd
è{ 
m_cGÝDecod”
.
	`£tDecodedPiùu»HashSEIEÇbËd
(enabled); }

135 #ià
MCTS_ENC_CHECK


136 
Void
 
	$£tTMùsCheckEÇbËd
(
BoÞ
 
’abËd
è{ 
m_tmùsCheckEÇbËd
 =ƒÇbËd; 
	}
}

139 
Void
 
š™
();

140 #ià
MCTS_EXTRACTION


141 
	gSEIMes§ges
& 
	$g‘SEIs
(è{  
m_SEIs
; 
	}
}

142 
TComSliû
* 
	$g‘ApcSliûPžÙ
(è{  
m_­cSliûPžÙ
; 
	}
}

143 
TComPic
* 
	$g‘PcPic
(ècÚ¡ {  
m_pcPic
; 
	}
}

144 
BoÞ
 
decode
(
IÅutNALUn™
& 
Çlu
, 
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
, BoÞ 
bSkCabacAndRecÚ¡ruùiÚ
=
çl£
);

146 
BoÞ
 
decode
(
IÅutNALUn™
& 
Çlu
, 
IÁ
& 
iSkF¿me
, IÁ& 
iPOCLa¡Di¥Ïy
);

148 
Void
 
d–‘ePicBufãr
();

151 
Void
 
execu‹LoÝFž‹rs
(
IÁ
& 
poc
, 
TComLi¡
<
TComPic
*>*& 
½cLi¡Pic
);

152 
Void
 
checkNoOuutPriÜPics
 (
TComLi¡
<
TComPic
*>* 
½cLi¡Pic
);

154 
BoÞ
 
	$g‘NoOuutPriÜPicsFÏg
 (è{  
m_isNoOuutPriÜPics
; 
	}
}

155 
Void
 
	$£tNoOuutPriÜPicsFÏg
 (
BoÞ
 
v®
è{ 
m_isNoOuutPriÜPics
 = v®; 
	}
}

156 
Void
 
	$£tFœ¡SliûInPiùu»
 (
boÞ
 
v®
è{ 
m_bFœ¡SliûInPiùu»
 = v®; 
	}
}

157 
BoÞ
 
	$g‘Fœ¡SliûInSequ’û
 (è{  
m_bFœ¡SliûInSequ’û
; 
	}
}

158 
Void
 
	$£tFœ¡SliûInSequ’û
 (
boÞ
 
v®
è{ 
m_bFœ¡SliûInSequ’û
 = v®; 
	}
}

159 #ià
O0043_BEST_EFFORT_DECODING


160 
Void
 
	$£tFÜûDecodeB™D•th
(
UIÁ
 
b™D•th
è{ 
m_fÜûDecodeB™D•th
 = b™D•th; 
	}
}

162 
Void
 
	$£tDecodedSEIMes§geOuutSŒ—m
(
¡d
::
o¡»am
 *
pOpSŒ—m
è{ 
m_pDecodedSEIOuutSŒ—m
 =…OpSŒ—m; 
	}
}

163 
UIÁ
 
	$g‘Numb”OfChecksumE¼ÜsD‘eùed
(ècÚ¡ {  
m_cGÝDecod”
.
	`g‘Numb”OfChecksumE¼ÜsD‘eùed
(); 
	}
}

165 
	g´Ùeùed
:

166 
Void
 
xG‘NewPicBufãr
 (cÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
TComPic
*& 
½cPic
, cÚ¡ 
UIÁ
 
‹mpÜ®Lay”
);

167 
Void
 
xC»©eLo¡Piùu»
 (
IÁ
 
iLo¡POC
);

169 #ià
MCTS_EXTRACTION


170 
BoÞ
 
xDecodeSliû
(
IÅutNALUn™
 &
Çlu
, 
IÁ
 &
iSkF¿me
, IÁ 
iPOCLa¡Di¥Ïy
, BoÞ 
bSkCabacAndRecÚ¡ruùiÚ
);

171 
Void
 
xAùiv©eP¬am‘”S‘s
(
BoÞ
 
bSkCabacAndRecÚ¡ruùiÚ
);

173 
BoÞ
 
xDecodeSliû
(
IÅutNALUn™
 &
Çlu
, 
IÁ
 &
iSkF¿me
, IÁ 
iPOCLa¡Di¥Ïy
);

174 
Void
 
xAùiv©eP¬am‘”S‘s
();

176 
Void
 
xDecodeVPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
);

177 
Void
 
xDecodeSPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
);

178 
Void
 
xDecodePPS
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
> &
ÇluD©a
);

179 
Void
 
	$xUpd©eP»viousTid0POC
Ð
TComSliû
 *
pSliû
 ) { ià(ÕSliû->
	`g‘TLay”
()==0è&& (pSliû->
	`isReã»nûN®u
(è&& (pSliû->
	`g‘N®Un™Ty³
()!=
NAL_UNIT_CODED_SLICE_RASL_R
)&& (pSliû->g‘N®Un™Ty³()!=
NAL_UNIT_CODED_SLICE_RADL_R
))è{ 
m_´evTid0POC
õSliû->
	`g‘POC
(); } 
	}
}

180 #ià
MCTS_EXTRACTION


181 
	gpublic
:

183 
TComLi¡
<
TComPic
*>* 
	$g‘RpcLi¡Pic
(è{  &
m_cLi¡Pic
; 
	}
};

184 
Void
 
xP¬£P»fixSEImes§ges
();

185 #ià
MCTS_EXTRACTION


186 
	g´iv©e
:

188 #ià
MCTS_ENC_CHECK


189 
Void
 
xAÇly£P»fixSEImes§ges
();

191 
Void
 
xP¬£P»fixSEIsFÜUnknownVCLN®
();

	@source/Lib/TLibEncoder/AnnexBwrite.h

34 #´agm¨
Úû


36 #iâdeà
__ANNEXBWRITE__


37 
	#__ANNEXBWRITE__


	)

39 
	~<o¡»am
>

40 
	~"TLibCommÚ/AcûssUn™.h
"

41 
	~"NALwr™e.h
"

53 
	g¡d
::
veùÜ
<
UIÁ
> 
	$wr™eAÂexB
(
¡d
::
o¡»am
& 
out
, cÚ¡ 
AcûssUn™
& 
au
)

55 
¡d
::
veùÜ
<
UIÁ
> 
ªÃxBsizes
;

57 
AcûssUn™
::
cÚ¡_™”©Ü
 
™
 = 
au
.
	`begš
(); iˆ!ðau.
	`’d
(); it++)

59 cÚ¡ 
NALUn™EBSP
& 
Çlu
 = **
™
;

60 
UIÁ
 
size
 = 0;

62 cÚ¡ 
UCh¬
 
¡¬t_code_´efix
[] = {0,0,0,1};

63 ià(
™
 =ð
au
.
	`begš
(è|| 
Çlu
.
m_ÇlUn™Ty³
 =ð
NAL_UNIT_VPS
 ||‚®u.m_ÇlUn™Ty³ =ð
NAL_UNIT_SPS
 ||‚®u.m_ÇlUn™Ty³ =ð
NAL_UNIT_PPS
)

73 
out
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
¡¬t_code_´efix
), 4);

74 
size
 += 4;

78 
out
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
¡¬t_code_´efix
+1), 3);

79 
size
 += 3;

81 
out
 << 
Çlu
.
m_ÇlUn™D©a
.
	`¡r
();

82 
size
 +ð
	`UIÁ
(
Çlu
.
m_ÇlUn™D©a
.
	`¡r
().
	`size
());

84 
ªÃxBsizes
.
	`push_back
(
size
);

87  
ªÃxBsizes
;

88 
	}
}

	@source/Lib/TLibEncoder/NALwrite.cpp

34 
	~<veùÜ
>

35 
	~<®gÜ™hm
>

36 
	~<o¡»am
>

38 
	~"TLibCommÚ/NAL.h
"

39 
	~"TLibCommÚ/TComB™SŒ—m.h
"

40 
	~"NALwr™e.h
"

42 
usšg
 
Çme¥aû
 
	g¡d
;

47 cÚ¡ 
UCh¬
 
	gemuÏtiÚ_´ev’tiÚ_th»e_by‹
[] = {3};

49 
Void
 
	$wr™eN®Un™H—d”
(
o¡»am
& 
out
, 
OuutNALUn™
& 
Çlu
)

51 
TComOuutB™¡»am
 
bsNALUH—d”
;

53 
bsNALUH—d”
.
	`wr™e
(0,1);

54 
bsNALUH—d”
.
	`wr™e
(
Çlu
.
m_ÇlUn™Ty³
, 6);

55 
bsNALUH—d”
.
	`wr™e
(
Çlu
.
m_nuhLay”Id
, 6);

56 
bsNALUH—d”
.
	`wr™e
(
Çlu
.
m_‹mpÜ®Id
+1, 3);

58 
out
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
bsNALUH—d”
.
	`g‘By‹SŒ—m
()), bsNALUH—d”.
	`g‘By‹SŒ—mL’gth
());

59 
	}
}

64 
Void
 
	$wr™e
(
o¡»am
& 
out
, 
OuutNALUn™
& 
Çlu
)

66 
	`wr™eN®Un™H—d”
(
out
, 
Çlu
);

87 
veùÜ
<
ušt8_t
>& 
rb¥
 = 
Çlu
.
m_B™¡»am
.
	`g‘FIFO
();

89 
veùÜ
<
ušt8_t
> 
ouutBufãr
;

90 
ouutBufãr
.
	`»size
(
rb¥
.
	`size
()*2+1);

91 
¡d
::
size_t
 
ouutAmouÁ
 = 0;

92 
IÁ
 
z”oCouÁ
 = 0;

93 
veùÜ
<
ušt8_t
>::
™”©Ü
 
™
 = 
rb¥
.
	`begš
(); iˆ!ðrb¥.
	`’d
(); it++)

95 cÚ¡ 
ušt8_t
 
v
=(*
™
);

96 ià(
z”oCouÁ
==2 && 
v
<=3)

98 
ouutBufãr
[
ouutAmouÁ
++]=
emuÏtiÚ_´ev’tiÚ_th»e_by‹
[0];

99 
z”oCouÁ
=0;

102 ià(
v
==0)

104 
z”oCouÁ
++;

108 
z”oCouÁ
=0;

110 
ouutBufãr
[
ouutAmouÁ
++]=
v
;

118 ià(
z”oCouÁ
>0)

120 
ouutBufãr
[
ouutAmouÁ
++]=
emuÏtiÚ_´ev’tiÚ_th»e_by‹
[0];

122 
out
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(&(*
ouutBufãr
.
	`begš
())), 
ouutAmouÁ
);

123 
	}
}

	@source/Lib/TLibEncoder/NALwrite.h

34 #´agm¨
Úû


36 #iâdeà
__NALWRITE__


37 
	#__NALWRITE__


	)

39 
	~<o¡»am
>

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComB™SŒ—m.h
"

43 
	~"TLibCommÚ/NAL.h
"

52 
	gOuutNALUn™
 : 
public
 
NALUn™


59 
OuutNALUn™
(

60 
N®Un™Ty³
 
ÇlUn™Ty³
,

61 
UIÁ
 
‹mpÜ®ID
 = 0,

62 
UIÁ
 
»£rved_z”o_6b™s
 = 0)

63 : 
NALUn™
(
ÇlUn™Ty³
, 
‹mpÜ®ID
, 
»£rved_z”o_6b™s
)

64 , 
m_B™¡»am
()

67 
	gOuutNALUn™
& 
	gÝ”©Ü
=(cÚ¡ 
NALUn™
& 
¤c
)

69 
m_B™¡»am
.
þ—r
();

70 
	g¡©ic_ÿ¡
<
	gNALUn™
*>(
	gthis
)->
	gÝ”©Ü
=(
¤c
);

71  *
	gthis
;

74 
TComOuutB™¡»am
 
	gm_B™¡»am
;

77 
Void
 
wr™e
(
¡d
::
o¡»am
& 
out
, 
OuutNALUn™
& 
Çlu
);

79 
šlše
 
	gNALUn™EBSP
::
	$NALUn™EBSP
(
OuutNALUn™
& 
Çlu
)

80 : 
	$NALUn™
(
Çlu
)

82 
	`wr™e
(
m_ÇlUn™D©a
, 
Çlu
);

83 
	}
}

	@source/Lib/TLibEncoder/SEIEncoder.cpp

34 
	~"TLibCommÚ/CommÚDef.h
"

35 
	~"TLibCommÚ/SEI.h
"

36 
	~"TEncGOP.h
"

37 
	~"TEncTÝ.h
"

42 
Void
 
	gSEIEncod”
::
	$š™SEIAùiveP¬am‘”S‘s
 (
SEIAùiveP¬am‘”S‘s
 *
£iAùiveP¬am‘”S‘s
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
)

44 
	`as£¹
 (
m_isIn™Ÿlized
);

45 
	`as£¹
 (
£iAùiveP¬am‘”S‘s
!=
NULL
);

46 
	`as£¹
 (
vps
!=
NULL
);

47 
	`as£¹
 (
¥s
!=
NULL
);

49 
£iAùiveP¬am‘”S‘s
->
aùiveVPSId
 = 
vps
->
	`g‘VPSId
();

50 
£iAùiveP¬am‘”S‘s
->
m_£lfCÚšedCvsFÏg
 = 
çl£
;

51 
£iAùiveP¬am‘”S‘s
->
m_noP¬am‘”S‘Upd©eFÏg
 = 
çl£
;

52 
£iAùiveP¬am‘”S‘s
->
numSpsIdsMšus1
 = 0;

53 
£iAùiveP¬am‘”S‘s
->
aùiveSeqP¬am‘”S‘Id
.
	`»size
(£iAùiveP¬am‘”S‘s->
numSpsIdsMšus1
 + 1);

54 
£iAùiveP¬am‘”S‘s
->
aùiveSeqP¬am‘”S‘Id
[0] = 
¥s
->
	`g‘SPSId
();

55 
	}
}

57 
Void
 
	gSEIEncod”
::
	$š™SEIF¿mePackšg
(
SEIF¿mePackšg
 *
£iF¿mePackšg
, 
IÁ
 
cu¼PicNum
)

59 
	`as£¹
 (
m_isIn™Ÿlized
);

60 
	`as£¹
 (
£iF¿mePackšg
!=
NULL
);

62 
£iF¿mePackšg
->
m_¬¿ngem’tId
 = 
m_pcCfg
->
	`g‘F¿mePackšgA¼ªgem’tSEIId
();

63 
£iF¿mePackšg
->
m_¬¿ngem’tCªûlFÏg
 = 0;

64 
£iF¿mePackšg
->
m_¬¿ngem’tTy³
 = 
m_pcCfg
->
	`g‘F¿mePackšgA¼ªgem’tSEITy³
();

65 
	`as£¹
((
£iF¿mePackšg
->
m_¬¿ngem’tTy³
 > 2) && (seiFramePacking->m_arrangementType < 6) );

66 
£iF¿mePackšg
->
m_qušcunxSam¶šgFÏg
 = 
m_pcCfg
->
	`g‘F¿mePackšgA¼ªgem’tSEIQušcunx
();

67 
£iF¿mePackšg
->
m_cÚ‹ÁIÁ”´‘©iÚTy³
 = 
m_pcCfg
->
	`g‘F¿mePackšgA¼ªgem’tSEIIÁ”´‘©iÚ
();

68 
£iF¿mePackšg
->
m_¥©ŸlFlpšgFÏg
 = 0;

69 
£iF¿mePackšg
->
m_äame0Fl³dFÏg
 = 0;

70 
£iF¿mePackšg
->
m_f›ldV›wsFÏg
 = (£iF¿mePackšg->
m_¬¿ngem’tTy³
 == 2);

71 
£iF¿mePackšg
->
m_cu¼’tF¿meIsF¿me0FÏg
 = ((£iF¿mePackšg->
m_¬¿ngem’tTy³
 =ð5è&& (
cu¼PicNum
&1) );

72 
£iF¿mePackšg
->
m_äame0S–fCÚšedFÏg
 = 0;

73 
£iF¿mePackšg
->
m_äame1S–fCÚšedFÏg
 = 0;

74 
£iF¿mePackšg
->
m_äame0GridPos™iÚX
 = 0;

75 
£iF¿mePackšg
->
m_äame0GridPos™iÚY
 = 0;

76 
£iF¿mePackšg
->
m_äame1GridPos™iÚX
 = 0;

77 
£iF¿mePackšg
->
m_äame1GridPos™iÚY
 = 0;

78 
£iF¿mePackšg
->
m_¬¿ngem’tRe£rvedBy‹
 = 0;

79 
£iF¿mePackšg
->
m_¬¿ngem’tP”si¡’ûFÏg
 = 
Œue
;

80 
£iF¿mePackšg
->
m_up§m¶edA¥eùR©io
 = 0;

81 
	}
}

83 
Void
 
	gSEIEncod”
::
	$š™SEISegm’‹dReùF¿mePackšg
(
SEISegm’‹dReùF¿mePackšg
 *
£iSegm’‹dReùF¿mePackšg
)

85 
	`as£¹
 (
m_isIn™Ÿlized
);

86 
	`as£¹
 (
£iSegm’‹dReùF¿mePackšg
!=
NULL
);

88 
£iSegm’‹dReùF¿mePackšg
->
m_¬¿ngem’tCªûlFÏg
 = 
m_pcCfg
->
	`g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEICªûl
();

89 
£iSegm’‹dReùF¿mePackšg
->
m_cÚ‹ÁIÁ”´‘©iÚTy³
 = 
m_pcCfg
->
	`g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEITy³
();

90 
£iSegm’‹dReùF¿mePackšg
->
m_¬¿ngem’tP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEIP”si¡’û
();

91 
	}
}

93 
Void
 
	gSEIEncod”
::
	$š™SEIDi¥ÏyOr›Á©iÚ
(
SEIDi¥ÏyOr›Á©iÚ
* 
£iDi¥ÏyOr›Á©iÚ
)

95 
	`as£¹
 (
m_isIn™Ÿlized
);

96 
	`as£¹
 (
£iDi¥ÏyOr›Á©iÚ
!=
NULL
);

98 
£iDi¥ÏyOr›Á©iÚ
->
ÿnûlFÏg
 = 
çl£
;

99 
£iDi¥ÏyOr›Á©iÚ
->
hÜFl
 = 
çl£
;

100 
£iDi¥ÏyOr›Á©iÚ
->
v”Fl
 = 
çl£
;

101 
£iDi¥ÏyOr›Á©iÚ
->
ªtiþockwi£RÙ©iÚ
 = 
m_pcCfg
->
	`g‘Di¥ÏyOr›Á©iÚSEIAngË
();

102 
	}
}

104 
Void
 
	gSEIEncod”
::
	$š™SEITÚeM­pšgInfo
(
SEITÚeM­pšgInfo
 *
£iTÚeM­pšgInfo
)

106 
	`as£¹
 (
m_isIn™Ÿlized
);

107 
	`as£¹
 (
£iTÚeM­pšgInfo
!=
NULL
);

109 
£iTÚeM­pšgInfo
->
m_tÚeM­Id
 = 
m_pcCfg
->
	`g‘TMISEITÚeM­Id
();

110 
£iTÚeM­pšgInfo
->
m_tÚeM­CªûlFÏg
 = 
m_pcCfg
->
	`g‘TMISEITÚeM­CªûlFÏg
();

111 
£iTÚeM­pšgInfo
->
m_tÚeM­P”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘TMISEITÚeM­P”si¡’ûFÏg
();

113 
£iTÚeM­pšgInfo
->
m_codedD©aB™D•th
 = 
m_pcCfg
->
	`g‘TMISEICodedD©aB™D•th
();

114 
	`as£¹
(
£iTÚeM­pšgInfo
->
m_codedD©aB™D•th
 >= 8 && seiToneMappingInfo->m_codedDataBitDepth <= 14);

115 
£iTÚeM­pšgInfo
->
m_rg‘B™D•th
 = 
m_pcCfg
->
	`g‘TMISEIT¬g‘B™D•th
();

116 
	`as£¹
(
£iTÚeM­pšgInfo
->
m_rg‘B™D•th
 >= 1 && seiToneMappingInfo->m_targetBitDepth <= 17);

117 
£iTÚeM­pšgInfo
->
m_mod–Id
 = 
m_pcCfg
->
	`g‘TMISEIMod–ID
();

118 
	`as£¹
(
£iTÚeM­pšgInfo
->
m_mod–Id
 >=0 &&seiToneMappingInfo->m_modelId<=4);

120  
£iTÚeM­pšgInfo
->
m_mod–Id
)

124 
£iTÚeM­pšgInfo
->
m_mšV®ue
 = 
m_pcCfg
->
	`g‘TMISEIMšV®ue
();

125 
£iTÚeM­pšgInfo
->
m_maxV®ue
 = 
m_pcCfg
->
	`g‘TMISEIMaxV®ue
();

130 
£iTÚeM­pšgInfo
->
m_sigmoidMidpošt
 = 
m_pcCfg
->
	`g‘TMISEISigmoidMidpošt
();

131 
£iTÚeM­pšgInfo
->
m_sigmoidWidth
 = 
m_pcCfg
->
	`g‘TMISEISigmoidWidth
();

136 
UIÁ
 
num
 = 1u<<(
£iTÚeM­pšgInfo
->
m_rg‘B™D•th
);

137 
£iTÚeM­pšgInfo
->
m_¡¬tOfCodedIÁ”v®
.
	`»size
(
num
);

138 
IÁ
* 
±mp
 = 
m_pcCfg
->
	`g‘TMISEIS¹OfCodedIÁ”va
();

139 if(
±mp
)

141 
IÁ
 
i
=0; i<
num
;i++)

143 
£iTÚeM­pšgInfo
->
m_¡¬tOfCodedIÁ”v®
[
i
] = 
±mp
[i];

150 
£iTÚeM­pšgInfo
->
m_numPivÙs
 = 
m_pcCfg
->
	`g‘TMISEINumPivÙs
();

151 
£iTÚeM­pšgInfo
->
m_codedPivÙV®ue
.
	`»size
(£iTÚeM­pšgInfo->
m_numPivÙs
);

152 
£iTÚeM­pšgInfo
->
m_rg‘PivÙV®ue
.
	`»size
(£iTÚeM­pšgInfo->
m_numPivÙs
);

153 
IÁ
* 
±mpcoded
 = 
m_pcCfg
->
	`g‘TMISEICodedPivÙV®ue
();

154 
IÁ
* 
±m±¬g‘
 = 
m_pcCfg
->
	`g‘TMISEIT¬g‘PivÙV®ue
();

155 if(
±mpcoded
&&
±m±¬g‘
)

157 
IÁ
 
i
=0; i<(
£iTÚeM­pšgInfo
->
m_numPivÙs
);i++)

159 
£iTÚeM­pšgInfo
->
m_codedPivÙV®ue
[
i
]=
±mpcoded
[i];

160 
£iTÚeM­pšgInfo
->
m_rg‘PivÙV®ue
[
i
]=
±m±¬g‘
[i];

167 
£iTÚeM­pšgInfo
->
m_ÿm”aIsoS³edIdc
 = 
m_pcCfg
->
	`g‘TMISEICam”aIsoS³edIdc
();

168 
£iTÚeM­pšgInfo
->
m_ÿm”aIsoS³edV®ue
 = 
m_pcCfg
->
	`g‘TMISEICam”aIsoS³edV®ue
();

169 
	`as£¹
Ð
£iTÚeM­pšgInfo
->
m_ÿm”aIsoS³edV®ue
 !=0 );

170 
£iTÚeM­pšgInfo
->
m_exposu»IndexIdc
 = 
m_pcCfg
->
	`g‘TMISEIExposurIndexIdc
();

171 
£iTÚeM­pšgInfo
->
m_exposu»IndexV®ue
 = 
m_pcCfg
->
	`g‘TMISEIExposurIndexV®ue
();

172 
	`as£¹
Ð
£iTÚeM­pšgInfo
->
m_exposu»IndexV®ue
 !=0 );

173 
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueSignFÏg
 = 
m_pcCfg
->
	`g‘TMISEIExposu»Com³n§tiÚV®ueSignFÏg
();

174 
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueNum”©Ü
 = 
m_pcCfg
->
	`g‘TMISEIExposu»Com³n§tiÚV®ueNum”©Ü
();

175 
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueD’omIdc
 = 
m_pcCfg
->
	`g‘TMISEIExposu»Com³n§tiÚV®ueD’omIdc
();

176 
£iTÚeM­pšgInfo
->
m_»fSü“nLumšªûWh™e
 = 
m_pcCfg
->
	`g‘TMISEIRefSü“nLumšªûWh™e
();

177 
£iTÚeM­pšgInfo
->
m_ex‹ndedRªgeWh™eLev–
 = 
m_pcCfg
->
	`g‘TMISEIEx‹ndedRªgeWh™eLev–
();

178 
	`as£¹
Ð
£iTÚeM­pšgInfo
->
m_ex‹ndedRªgeWh™eLev–
 >= 100 );

179 
£iTÚeM­pšgInfo
->
m_nomš®BÏckLev–LumaCodeV®ue
 = 
m_pcCfg
->
	`g‘TMISEINomš®BÏckLev–LumaCodeV®ue
();

180 
£iTÚeM­pšgInfo
->
m_nomš®Wh™eLev–LumaCodeV®ue
 = 
m_pcCfg
->
	`g‘TMISEINomš®Wh™eLev–LumaCodeV®ue
();

181 
	`as£¹
Ð
£iTÚeM­pšgInfo
->
m_nomš®Wh™eLev–LumaCodeV®ue
 > seiTÚeM­pšgInfo->
m_nomš®BÏckLev–LumaCodeV®ue
 );

182 
£iTÚeM­pšgInfo
->
m_ex‹ndedWh™eLev–LumaCodeV®ue
 = 
m_pcCfg
->
	`g‘TMISEIEx‹ndedWh™eLev–LumaCodeV®ue
();

183 
	`as£¹
Ð
£iTÚeM­pšgInfo
->
m_ex‹ndedWh™eLev–LumaCodeV®ue
 >ð£iTÚeM­pšgInfo->
m_nomš®Wh™eLev–LumaCodeV®ue
 );

188 
	`as£¹
(!"Undefined SEIToneMapModelId");

192 
	}
}

194 
Void
 
	gSEIEncod”
::
	$š™SEISOPDesütiÚ
(
SEISOPDesütiÚ
 *
sÝDesütiÚSEI
, 
TComSliû
 *
¦iû
, 
IÁ
 
picInGOP
, IÁ 
Ï¡Idr
, IÁ 
cu¼GOPSize
)

196 
	`as£¹
 (
m_isIn™Ÿlized
);

197 
	`as£¹
 (
sÝDesütiÚSEI
 !ð
NULL
);

198 
	`as£¹
 (
¦iû
 !ð
NULL
);

200 
IÁ
 
sÝCu¼POC
 = 
¦iû
->
	`g‘POC
();

201 
sÝDesütiÚSEI
->
m_sÝSeqP¬am‘”S‘Id
 = 
¦iû
->
	`g‘SPS
()->
	`g‘SPSId
();

203 
IÁ
 
i
 = 0;

204 
IÁ
 
´evEÁryId
 = 
picInGOP
;

205 
IÁ
 
j
 = 
picInGOP
; j < 
cu¼GOPSize
; j++)

207 
IÁ
 
d–POC
 = 
m_pcCfg
->
	`g‘GOPEÁry
(
j
).
m_POC
 - m_pcCfg->g‘GOPEÁry(
´evEÁryId
).m_POC;

208 ià((
sÝCu¼POC
 + 
d–POC
è< 
m_pcCfg
->
	`g‘F¿mesToBeEncoded
())

210 
sÝCu¼POC
 +ð
d–POC
;

211 
sÝDesütiÚSEI
->
m_sÝDescVþN®uTy³
[
i
] = 
m_pcEncGOP
->
	`g‘N®Un™Ty³
(
sÝCu¼POC
, 
Ï¡Idr
, 
¦iû
->
	`g‘Pic
()->
	`isF›ld
());

212 
sÝDesütiÚSEI
->
m_sÝDescTempÜ®Id
[
i
] = 
m_pcCfg
->
	`g‘GOPEÁry
(
j
).
m_‹mpÜ®Id
;

213 
sÝDesütiÚSEI
->
m_sÝDescStRpsIdx
[
i
] = 
m_pcEncTÝ
->
	`g‘Reã»nûPiùu»S‘IdxFÜSOP
(
sÝCu¼POC
, 
j
);

214 
sÝDesütiÚSEI
->
m_sÝDescPocD–
[
i
] = 
d–POC
;

216 
´evEÁryId
 = 
j
;

217 
i
++;

221 
sÝDesütiÚSEI
->
m_numPicsInSÝMšus1
 = 
i
 - 1;

222 
	}
}

224 
Void
 
	gSEIEncod”
::
	$š™SEIBufãršgP”iod
(
SEIBufãršgP”iod
 *
bufãršgP”iodSEI
, 
TComSliû
 *
¦iû
)

226 
	`as£¹
 (
m_isIn™Ÿlized
);

227 
	`as£¹
 (
bufãršgP”iodSEI
 !ð
NULL
);

228 
	`as£¹
 (
¦iû
 !ð
NULL
);

230 
UIÁ
 
uiIn™ŸlCpbRemov®D–ay
 = (90000/2);

231 
bufãršgP”iodSEI
->
m_š™ŸlCpbRemov®D–ay
 [0][0] = 
uiIn™ŸlCpbRemov®D–ay
;

232 
bufãršgP”iodSEI
->
m_š™ŸlCpbRemov®D–ayOff£t
[0][0] = 
uiIn™ŸlCpbRemov®D–ay
;

233 
bufãršgP”iodSEI
->
m_š™ŸlCpbRemov®D–ay
 [0][1] = 
uiIn™ŸlCpbRemov®D–ay
;

234 
bufãršgP”iodSEI
->
m_š™ŸlCpbRemov®D–ayOff£t
[0][1] = 
uiIn™ŸlCpbRemov®D–ay
;

236 
DoubË
 
dTmp
 = (DoubË)
¦iû
->
	`g‘SPS
()->
	`g‘VuiP¬am‘”s
()->
	`g‘TimšgInfo
()->
	`g‘NumUn™sInTick
(è/ (DoubË)¦iû->g‘SPS()->g‘VuiP¬am‘”s()->g‘TimšgInfo()->
	`g‘TimeSÿË
();

238 
UIÁ
 
uiTmp
 = (UIÁ)Ð
dTmp
 * 90000.0 );

239 
uiIn™ŸlCpbRemov®D–ay
 -ð
uiTmp
;

240 
uiIn™ŸlCpbRemov®D–ay
 -ð
uiTmp
 / ( 
¦iû
->
	`g‘SPS
()->
	`g‘VuiP¬am‘”s
()->
	`g‘HrdP¬am‘”s
()->
	`g‘TickDivisÜMšus2
() + 2 );

241 
bufãršgP”iodSEI
->
m_š™ŸlAÉCpbRemov®D–ay
 [0][0] = 
uiIn™ŸlCpbRemov®D–ay
;

242 
bufãršgP”iodSEI
->
m_š™ŸlAÉCpbRemov®D–ayOff£t
[0][0] = 
uiIn™ŸlCpbRemov®D–ay
;

243 
bufãršgP”iodSEI
->
m_š™ŸlAÉCpbRemov®D–ay
 [0][1] = 
uiIn™ŸlCpbRemov®D–ay
;

244 
bufãršgP”iodSEI
->
m_š™ŸlAÉCpbRemov®D–ayOff£t
[0][1] = 
uiIn™ŸlCpbRemov®D–ay
;

246 
bufãršgP”iodSEI
->
m_¿pCpbP¬amsP»£ÁFÏg
 = 0;

248 
bufãršgP”iodSEI
->
m_cÚÿ‹ÇtiÚFÏg
 = 0;

250 
bufãršgP”iodSEI
->
m_auCpbRemov®D–ayD–
 = 1;

251 
bufãršgP”iodSEI
->
m_ýbD–ayOff£t
 = 0;

252 
bufãršgP”iodSEI
->
m_dpbD–ayOff£t
 = 0;

253 
	}
}

258 
Void
 
	gSEIEncod”
::
	$š™SEISÿÏbËNe¡šg
(
SEISÿÏbËNe¡šg
 *
sÿÏbËNe¡šgSEI
, 
SEIMes§ges
 &
Ã¡edSEIs
)

260 
	`as£¹
 (
m_isIn™Ÿlized
);

261 
	`as£¹
 (
sÿÏbËNe¡šgSEI
 !ð
NULL
);

263 
sÿÏbËNe¡šgSEI
->
m_b™SŒ—mSub£tFÏg
 = 1;

264 
sÿÏbËNe¡šgSEI
->
m_Ã¡šgOpFÏg
 = 0;

265 
sÿÏbËNe¡šgSEI
->
m_Ã¡šgNumOpsMšus1
 = 0;

266 
sÿÏbËNe¡šgSEI
->
m_®lLay”sFÏg
 = 0;

267 
sÿÏbËNe¡šgSEI
->
m_Ã¡šgNoOpMaxTempÜ®IdPlus1
 = 6 + 1;

268 
sÿÏbËNe¡šgSEI
->
m_Ã¡šgNumLay”sMšus1
 = 1 - 1;

269 
sÿÏbËNe¡šgSEI
->
m_Ã¡šgLay”Id
[0] = 0;

271 
sÿÏbËNe¡šgSEI
->
m_Ã¡edSEIs
.
	`þ—r
();

272 
SEIMes§ges
::
™”©Ü
 
™
=
Ã¡edSEIs
.
	`begš
(); it!òe¡edSEIs.
	`’d
(); it++)

274 
sÿÏbËNe¡šgSEI
->
m_Ã¡edSEIs
.
	`push_back
((*
™
));

276 
	}
}

278 
Void
 
	gSEIEncod”
::
	$š™SEIRecov”yPošt
(
SEIRecov”yPošt
 *
»cov”yPoštSEI
, 
TComSliû
 *
¦iû
)

280 
	`as£¹
 (
m_isIn™Ÿlized
);

281 
	`as£¹
 (
»cov”yPoštSEI
 !ð
NULL
);

282 
	`as£¹
 (
¦iû
 !ð
NULL
);

284 
»cov”yPoštSEI
->
m_»cov”yPocCÁ
 = 0;

285 
»cov”yPoštSEI
->
m_exaùM©chšgFÏg
 = ( 
¦iû
->
	`g‘POC
(è=ð0 ) ? (
Œue
è: (
çl£
);

286 
»cov”yPoštSEI
->
m_brok’LškFÏg
 = 
çl£
;

287 
	}
}

290 
Void
 
	gSEIEncod”
::
	$š™DecodedPiùu»HashSEI
(
SEIDecodedPiùu»Hash
 *
decodedPiùu»HashSEI
, 
TComPic
 *
pcPic
, 
¡d
::
¡ršg
 &
rHashSŒšg
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

292 
	`as£¹
 (
m_isIn™Ÿlized
);

293 
	`as£¹
 (
decodedPiùu»HashSEI
!=
NULL
);

294 
	`as£¹
 (
pcPic
!=
NULL
);

296 
decodedPiùu»HashSEI
->
m‘hod
 = 
m_pcCfg
->
	`g‘DecodedPiùu»HashSEITy³
();

297 
m_pcCfg
->
	`g‘DecodedPiùu»HashSEITy³
())

299 
HASHTYPE_MD5
:

301 
UIÁ
 
numCh¬
=
	`ÿlcMD5
(*
pcPic
->
	`g‘PicYuvRec
(), 
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
b™D•ths
);

302 
rHashSŒšg
 = 
	`hashToSŒšg
(
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
numCh¬
);

305 
HASHTYPE_CRC
:

307 
UIÁ
 
numCh¬
=
	`ÿlcCRC
(*
pcPic
->
	`g‘PicYuvRec
(), 
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
b™D•ths
);

308 
rHashSŒšg
 = 
	`hashToSŒšg
(
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
numCh¬
);

311 
HASHTYPE_CHECKSUM
:

314 
UIÁ
 
numCh¬
=
	`ÿlcChecksum
(*
pcPic
->
	`g‘PicYuvRec
(), 
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
b™D•ths
);

315 
rHashSŒšg
 = 
	`hashToSŒšg
(
decodedPiùu»HashSEI
->
m_piùu»Hash
, 
numCh¬
);

319 
	}
}

321 
Void
 
	gSEIEncod”
::
	$š™TempÜ®Lev–0IndexSEI
(
SEITempÜ®Lev–0Index
 *
‹mpÜ®Lev–0IndexSEI
, 
TComSliû
 *
¦iû
)

323 
	`as£¹
 (
m_isIn™Ÿlized
);

324 
	`as£¹
 (
‹mpÜ®Lev–0IndexSEI
!=
NULL
);

325 
	`as£¹
 (
¦iû
!=
NULL
);

327 ià(
¦iû
->
	`g‘R­PicFÏg
())

329 
m_Ž0Idx
 = 0;

330 
m_¿pIdx
 = (m_rapIdx + 1) & 0xFF;

334 
m_Ž0Idx
 = (m_Ž0Idx + (
¦iû
->
	`g‘TLay”
() ? 0 : 1)) & 0xFF;

336 
‹mpÜ®Lev–0IndexSEI
->
Ž0Idx
 = 
m_Ž0Idx
;

337 
‹mpÜ®Lev–0IndexSEI
->
¿pIdx
 = 
m_¿pIdx
;

338 
	}
}

340 
Void
 
	gSEIEncod”
::
	$š™SEITempMÙiÚCÚ¡¿šedTžeS‘s
 (
SEITempMÙiÚCÚ¡¿šedTžeS‘s
 *
£i
, cÚ¡ 
TComPPS
 *
µs
)

342 
	`as£¹
 (
m_isIn™Ÿlized
);

343 
	`as£¹
 (
£i
!=
NULL
);

344 
	`as£¹
 (
µs
!=
NULL
);

346 if(
µs
->
	`g‘TžesEÇbËdFÏg
())

348 #ià
MCTS_ENC_CHECK


349 ià(
m_pcCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
())

351 
£i
->
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
 = 
Œue
;

352 
£i
->
m_—ch_tže_Úe_tže_£t_æag
 = 
Œue
;

353 
£i
->
m_lim™ed_tže_£t_di¥Ïy_æag
 = 
çl£
;

354 
£i
->
m_max_mcs_t›r_Ëv–_idc_´e£Á_æag
 = 
çl£
;

355 
£i
->
	`£tNumb”OfTžeS‘s
(0);

360 
£i
->
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
 = 
çl£
;

361 
£i
->
m_—ch_tže_Úe_tže_£t_æag
 = 
çl£
;

362 
£i
->
m_lim™ed_tže_£t_di¥Ïy_æag
 = 
çl£
;

363 
£i
->
	`£tNumb”OfTžeS‘s
((
µs
->
	`g‘NumTžeCÞumnsMšus1
(è+ 1è* (µs->
	`g‘NumTžeRowsMšus1
() + 1));

365 
IÁ
 
i
=0; i < 
£i
->
	`g‘Numb”OfTžeS‘s
(); i++)

367 
£i
->
	`tžeS‘D©a
(
i
).
m_mùs_id
 = i;

368 
£i
->
	`tžeS‘D©a
(
i
).
	`£tNumb”OfTžeReùs
(1);

370 
IÁ
 
j
=0; j<
£i
->
	`tžeS‘D©a
(
i
).
	`g‘Numb”OfTžeReùs
(); j++)

372 
£i
->
	`tžeS‘D©a
(
i
).
	`tÝLeáTžeIndex
(
j
) = i+j;

373 
£i
->
	`tžeS‘D©a
(
i
).
	`bÙtomRightTžeIndex
(
j
) = i+j;

376 
£i
->
	`tžeS‘D©a
(
i
).
m_exaù_§m¶e_v®ue_m©ch_æag
 = 
çl£
;

377 
£i
->
	`tžeS‘D©a
(
i
).
m_mùs_t›r_Ëv–_idc_´e£Á_æag
 = 
çl£
;

379 #ià
MCTS_ENC_CHECK


385 
	`as£¹
(!"Tile is‚otƒnabled");

387 
	}
}

389 #ià
MCTS_EXTRACTION
 && 
MCTS_ENC_CHECK


390 
Void
 
	gSEIEncod”
::
	$š™SEIMCTSExŒaùiÚInfo
(
SEIMCTSExŒaùiÚInfoS‘
 *
£i
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
)

392 
	`as£¹
(
m_isIn™Ÿlized
);

393 
	`as£¹
(
£i
 !ð
NULL
);

394 
	`as£¹
(
vps
 !ð
NULL
);

395 
	`as£¹
(
¥s
 !ð
NULL
);

396 
	`as£¹
(
µs
 !ð
NULL
);

398 
TComVPS
 
Ã¡edVPS
 = *
vps
;

399 
TComSPS
 
Ã¡edSPS
 = *
¥s
;

400 
TComPPS
 
Ã¡edPPS
 = *
µs
;

402 ià(
µs
->
	`g‘TžesEÇbËdFÏg
())

404 ià(
m_pcCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
())

406 
UIÁ
 
numTžes
 = (
µs
->
	`g‘NumTžeCÞumnsMšus1
(è+ 1è* (µs->
	`g‘NumTžeRowsMšus1
() + 1);

407 
UIÁ
 
bÙtomTžeRowHeightSam¶eOff£t
 = ( 
¥s
->
	`g‘PicHeightInLumaSam¶es
(è% sps->
	`g‘MaxCUHeight
() ) ? sps->getMaxCUHeight() - (sps->getPicHeightInLumaSamples() % sps->getMaxCUHeight()) : 0;

408 
UIÁ
 
rightmo¡TžeCÞumnWidthSam¶eOff£t
 = ( 
¥s
->
	`g‘PicWidthInLumaSam¶es
(è% sps->
	`g‘MaxCUWidth
() ) ? sps->getMaxCUWidth() - (sps->getPicWidthInLumaSamples() % sps->getMaxCUWidth()) : 0;

409 
TComPicSym
 *
picSym
 = (*(
m_pcEncTÝ
->
	`g‘Li¡Pic
()->
	`begš
()))->
	`g‘PicSym
();

412  
UIÁ
 
mùsIdx
 = 0; mùsIdx < 
numTžes
; mctsIdx++)

414 
boÞ
 
su™abËEISfound
 = 
çl£
;

415 
boÞ
 
isRightmo¡TžeCÞumn
 = (
mùsIdx
 + 1è% (
picSym
->
	`g‘NumTžeCÞumnsMšus1
() + 1) == 0 ;

416 
boÞ
 
isBÙtomTžeRow
 = 
mùsIdx
 / (
picSym
->
	`g‘NumTžeCÞumnsMšus1
(è+ 1è=ðpicSym->
	`g‘NumTžeRowsMšus1
();

417 
UIÁ
 
curMùsHeight
 = 
picSym
->
	`g‘TComTže
(
mùsIdx
)->
	`g‘TžeHeightInCtus
(è* 
¥s
->
	`g‘MaxCUHeight
(è- (
isBÙtomTžeRow
 ? 
bÙtomTžeRowHeightSam¶eOff£t
 : 0);

418 
UIÁ
 
curMùsWidth
 = 
picSym
->
	`g‘TComTže
(
mùsIdx
)->
	`g‘TžeWidthInCtus
(è* 
¥s
->
	`g‘MaxCUWidth
(è- (
isRightmo¡TžeCÞumn
 ? 
rightmo¡TžeCÞumnWidthSam¶eOff£t
 : 0);

420 
¡d
::
veùÜ
< 
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
>::
™”©Ü
 
EIS™”
 = 
£i
->
m_MCTSExŒaùiÚInfoS‘s
.
	`begš
(); EIS™” !ð£i->m_MCTSExŒaùiÚInfoS‘s.
	`’d
(è&& !
su™abËEISfound
; EISiter++)

422 iàÐÐ
EIS™”
->
mùsHeight
 =ð
curMùsHeight
è&& ( EIS™”->
mùsWidth
 =ð
curMùsWidth
) )

424 
EIS™”
->
m_idxOfMùsInS‘
.
	`push_back
(
¡d
::
veùÜ
<
UIÁ
>(1, 
mùsIdx
 ));

425 
su™abËEISfound
 = 
Œue
;

428 ià(!
su™abËEISfound
)

430 
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
 
ÃwEIS
;

431 
ÃwEIS
.
mùsHeight
 = 
curMùsHeight
;

432 
ÃwEIS
.
mùsWidth
 = 
curMùsWidth
;

433 
ÃwEIS
.
m_idxOfMùsInS‘
.
	`push_back
(
¡d
::
veùÜ
<
UIÁ
>(1, 
mùsIdx
));

434 
£i
->
m_MCTSExŒaùiÚInfoS‘s
.
	`push_back
(
ÃwEIS
);

439 
¡d
::
veùÜ
<
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
>::
™”©Ü
 
EIS™”
 = 
£i
->
m_MCTSExŒaùiÚInfoS‘s
.
	`begš
(); EIS™” !ð£i->m_MCTSExŒaùiÚInfoS‘s.
	`’d
(); EISiter++)

441 
EIS™”
->
m_¦iûReÜd”šgEÇbËdFÏg
 = 
çl£
;

443 
TComOuutB™¡»am
 
vps_rb¥
;

444 
TComOuutB™¡»am
 
¥s_rb¥
;

445 
TComOuutB™¡»am
 
µs_rb¥
;

447 
Ã¡edSPS
.
	`£tPicHeightInLumaSam¶es
(
EIS™”
->
mùsHeight
);

448 
Ã¡edSPS
.
	`£tPicWidthInLumaSam¶es
(
EIS™”
->
mùsWidth
);

449 
Ã¡edPPS
.
	`£tTžesEÇbËdFÏg
(
çl£
);

451 
m_pcEncGOP
->
	`g’”©eVPS_RBSP
(&
vps_rb¥
, &
Ã¡edVPS
);

452 
m_pcEncGOP
->
	`g’”©eSPS_RBSP
(&
¥s_rb¥
, &
Ã¡edSPS
);

453 
m_pcEncGOP
->
	`g’”©ePPS_RBSP
(&
µs_rb¥
, &
Ã¡edPPS
);

455 
EIS™”
->
m_vpsRb¥D©a
.
	`»size
(1);

456 
j
 = 0; j < 
EIS™”
->
m_vpsRb¥D©a
.
	`size
(); j++)

458 
EIS™”
->
m_vpsRb¥D©aL’gth
.
	`push_back
(
vps_rb¥
.
	`g‘By‹SŒ—mL’gth
());

459 
EIS™”
->
m_vpsRb¥D©a
[
j
] = 
vps_rb¥
.
	`g‘FIFO
();

462 
EIS™”
->
m_¥sRb¥D©a
.
	`»size
(1);

463 
j
 = 0; j < 
EIS™”
->
m_¥sRb¥D©a
.
	`size
(); j++)

465 
EIS™”
->
m_¥sRb¥D©aL’gth
.
	`push_back
(
¥s_rb¥
.
	`g‘By‹SŒ—mL’gth
());

466 
EIS™”
->
m_¥sRb¥D©a
[
j
] = 
¥s_rb¥
.
	`g‘FIFO
();

468 
EIS™”
->
m_µsRb¥D©a
.
	`»size
(1);

469 
EIS™”
->
m_µsNuhTempÜ®IdPlus1
.
	`»size
(1);

470 
j
 = 0; j < 
EIS™”
->
m_µsRb¥D©a
.
	`size
(); j++)

472 
EIS™”
->
m_µsRb¥D©aL’gth
.
	`push_back
(
µs_rb¥
.
	`g‘By‹SŒ—mL’gth
());

473 
EIS™”
->
m_µsRb¥D©a
[
j
] = 
µs_rb¥
.
	`g‘FIFO
();

474 
EIS™”
->
m_µsNuhTempÜ®IdPlus1
[
j
] = 1;

480 
	`as£¹
(!"MCTS‚ot‡ctivated");

485 
	`as£¹
(!"Tiles is‚otƒnabled");

487 
	}
}

491 
Void
 
	gSEIEncod”
::
	$š™SEIKÃeFunùiÚInfo
(
SEIKÃeFunùiÚInfo
 *
£iKÃeFunùiÚInfo
)

493 
	`as£¹
 (
m_isIn™Ÿlized
);

494 
	`as£¹
 (
£iKÃeFunùiÚInfo
!=
NULL
);

496 cÚ¡ 
TEncCfg
::
TEncSEIKÃeFunùiÚInfÜm©iÚ
 &
kÃe
=
m_pcCfg
->
	`g‘KÃeFunùiÚInfÜm©iÚSEI
();

497 
£iKÃeFunùiÚInfo
->
m_kÃeId
 = 
kÃe
.
m_kÃeFunùiÚId
;

498 
£iKÃeFunùiÚInfo
->
m_kÃeCªûlFÏg
 = 
kÃe
.
m_kÃeFunùiÚCªûlFÏg
;

499 iàÐ!
£iKÃeFunùiÚInfo
->
m_kÃeCªûlFÏg
 )

501 
£iKÃeFunùiÚInfo
->
m_kÃeP”si¡’ûFÏg
 = 
kÃe
.
m_kÃeFunùiÚP”si¡’ûFÏg
;

502 
£iKÃeFunùiÚInfo
->
m_kÃeIÅutD¿nge
 = 
kÃe
.
m_šputDRªge
;

503 
£iKÃeFunùiÚInfo
->
m_kÃeIÅutDi¥Lumšªû
 = 
kÃe
.
m_šputDi¥Lumšªû
;

504 
£iKÃeFunùiÚInfo
->
m_kÃeOuutD¿nge
 = 
kÃe
.
m_ouutDRªge
;

505 
£iKÃeFunùiÚInfo
->
m_kÃeOuutDi¥Lumšªû
 = 
kÃe
.
m_ouutDi¥Lumšªû
;

507 
	`as£¹
(
kÃe
.
m_kÃeSEIKÃePoštPaœs
.
	`size
()>0);

508 
£iKÃeFunùiÚInfo
->
m_kÃeNumKÃePoštsMšus1
 = (
IÁ
è
kÃe
.
m_kÃeSEIKÃePoštPaœs
.
	`size
()-1;

509 
£iKÃeFunùiÚInfo
->
m_kÃeIÅutKÃePošt
.
	`»size
(£iKÃeFunùiÚInfo->
m_kÃeNumKÃePoštsMšus1
+1);

510 
£iKÃeFunùiÚInfo
->
m_kÃeOuutKÃePošt
.
	`»size
(£iKÃeFunùiÚInfo->
m_kÃeNumKÃePoštsMšus1
+1);

511 
IÁ
 
i
=0; i<=
£iKÃeFunùiÚInfo
->
m_kÃeNumKÃePoštsMšus1
; i++)

513 
£iKÃeFunùiÚInfo
->
m_kÃeIÅutKÃePošt
[
i
] = 
kÃe
.
m_kÃeSEIKÃePoštPaœs
[i].
šputKÃePošt
;

514 
£iKÃeFunùiÚInfo
->
m_kÃeOuutKÃePošt
[
i
] = 
kÃe
.
m_kÃeSEIKÃePoštPaœs
[i].
ouutKÃePošt
;

517 
	}
}

518 
Void
 
	gSEIEncod”
::
	$š™SEICÚ‹ÁCÞourVÞume
(
SEICÚ‹ÁCÞourVÞume
 *
£iCÚ‹ÁCÞourVÞume
)

520 
	`as£¹
(
m_isIn™Ÿlized
);

521 
	`as£¹
(
£iCÚ‹ÁCÞourVÞume
 !ð
NULL
);

522 
£iCÚ‹ÁCÞourVÞume
->
m_ccvCªûlFÏg
 = 
m_pcCfg
->
	`g‘CcvSEICªûlFÏg
();

523 
£iCÚ‹ÁCÞourVÞume
->
m_ccvP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘CcvSEIP”si¡’ûFÏg
();

525 
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘CcvSEIPrim¬›sP»£ÁFÏg
();

526 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ueP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘CcvSEIMšLumšªûV®ueP»£ÁFÏg
();

527 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ueP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘CcvSEIMaxLumšªûV®ueP»£ÁFÏg
();

528 
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ueP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘CcvSEIAvgLumšªûV®ueP»£ÁFÏg
();

532 ià(
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sP»£ÁFÏg
 =ð
Œue
)

534 
IÁ
 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

536 
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sX
[
i
] = (
IÁ
è(50000.0 * 
m_pcCfg
->
	`g‘CcvSEIPrim¬›sX
(i));

537 
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sY
[
i
] = (
IÁ
è(50000.0 * 
m_pcCfg
->
	`g‘CcvSEIPrim¬›sY
(i));

541 ià(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

543 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ue
 = (
IÁ
è(10000000 * 
m_pcCfg
->
	`g‘CcvSEIMšLumšªûV®ue
());

545 ià(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

547 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ue
 = (
IÁ
è(10000000 * 
m_pcCfg
->
	`g‘CcvSEIMaxLumšªûV®ue
());

549 ià(
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

551 
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ue
 = (
IÁ
è(10000000 * 
m_pcCfg
->
	`g‘CcvSEIAvgLumšªûV®ue
());

553 
	}
}

555 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


556 
Void
 
	gSEIEncod”
::
	$š™SEIShu‰”IÁ”v®Info
(
SEIShu‰”IÁ”v®Info
 *
£iShu‰”IÁ”v®Info
)

558 
	`as£¹
(
m_isIn™Ÿlized
);

559 
	`as£¹
(
£iShu‰”IÁ”v®Info
 !ð
NULL
);

560 
£iShu‰”IÁ”v®Info
->
m_siiTimeSÿË
 = 
m_pcCfg
->
	`g‘SiiSEITimeSÿË
();

561 
£iShu‰”IÁ”v®Info
->
m_siiFixedSIw™hšCLVS
 = 
m_pcCfg
->
	`g‘SiiSEIFixedSIw™hšCLVS
();

562 ià(
£iShu‰”IÁ”v®Info
->
m_siiFixedSIw™hšCLVS
 =ð
Œue
)

564 
£iShu‰”IÁ”v®Info
->
m_siiNumUn™sInShu‰”IÁ”v®
 = 
m_pcCfg
->
	`g‘SiiSEINumUn™sInShu‰”IÁ”v®
();

568 
£iShu‰”IÁ”v®Info
->
m_siiMaxSubLay”sMšus1
 = 
m_pcCfg
->
	`g‘SiiSEIMaxSubLay”sMšus1
();

569 
£iShu‰”IÁ”v®Info
->
m_siiSubLay”NumUn™sInSI
.
	`»size
(£iShu‰”IÁ”v®Info->
m_siiMaxSubLay”sMšus1
+1);

570 
IÁ
 
i
 = 0; i <ð
£iShu‰”IÁ”v®Info
->
m_siiMaxSubLay”sMšus1
; i++)

572 
£iShu‰”IÁ”v®Info
->
m_siiSubLay”NumUn™sInSI
[
i
] = 
m_pcCfg
->
	`g‘SiiSEISubLay”NumUn™sInSI
(i);

575 
	}
}

578 #ià
SEI_ENCODER_CONTROL


579 
Void
 
	gSEIEncod”
::
	$š™SEIFžmG¿šCh¬aù”i¡ics
(
SEIFžmG¿šCh¬aù”i¡ics
 *
£iFžmG¿š
)

581 
	`as£¹
(
m_isIn™Ÿlized
);

582 
	`as£¹
(
£iFžmG¿š
 !ð
NULL
);

584 
£iFžmG¿š
->
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEICªûlFÏg
();

585 
£iFžmG¿š
->
m_fžmG¿šCh¬aù”i¡icsP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIP”si¡’ûFÏg
();

586 
£iFžmG¿š
->
m_fžmG¿šMod–Id
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIMod–ID
();

587 
£iFžmG¿š
->
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIS•CÞourDescP»£Á
();

588 
£iFžmG¿š
->
m_bËndšgModeId
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIBËndšgModeID
();

589 
£iFžmG¿š
->
m_log2SÿËFaùÜ
 = 
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEILog2SÿËFaùÜ
();

590 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

592 
£iFžmG¿š
->
m_compMod–
[
i
].
bP»£ÁFÏg
 = 
m_pcCfg
->
	`g‘FGCSEICompMod–P»£Á
(i);

593 #ià
FGS_RDD5_ENABLE


594 ià(
£iFžmG¿š
->
m_compMod–
[
i
].
bP»£ÁFÏg
)

596 
£iFžmG¿š
->
m_compMod–
[
i
].
numMod–V®ues
 = 1 + 
m_pcCfg
->
	`g‘FGCSEINumMod–V®uesMšus1
(i);

597 
£iFžmG¿š
->
m_compMod–
[
i
].
š‹ns™yV®ues
.
	`»size
(1 + 
m_pcCfg
->
	`g‘FGCSEINumIÁ’s™yIÁ”v®Mšus1
(i));

598 
UIÁ
 
j
 = 0; j <ð
m_pcCfg
->
	`g‘FGCSEINumIÁ’s™yIÁ”v®Mšus1
(
i
); j++)

600 
£iFžmG¿š
->
m_compMod–
[
i
].
š‹ns™yV®ues
[
j
].
š‹ns™yIÁ”v®Low”Bound
 = 
m_pcCfg
->
	`g‘FGCSEIIÁ’s™yIÁ”v®Low”Bound
(i, j);

601 
£iFžmG¿š
->
m_compMod–
[
i
].
š‹ns™yV®ues
[
j
].
š‹ns™yIÁ”v®Uµ”Bound
 = 
m_pcCfg
->
	`g‘FGCSEIIÁ’s™yIÁ”v®Uµ”Bound
(i, j);

602 
£iFžmG¿š
->
m_compMod–
[
i
].
š‹ns™yV®ues
[
j
].
compMod–V®ue
.
	`»size
(£iFžmG¿š->m_compMod–[i].
numMod–V®ues
);

603 
UIÁ
 
k
 = 0; k < 
£iFžmG¿š
->
m_compMod–
[
i
].
numMod–V®ues
; k++)

605 
£iFžmG¿š
->
m_compMod–
[
i
].
š‹ns™yV®ues
[
j
].
compMod–V®ue
[
k
] = 
m_pcCfg
->
	`g‘FGCSEICompMod–V®ue
(i, j, k);

611 
	}
}

613 
Void
 
	gSEIEncod”
::
	$š™SEICÚ‹ÁLightLev–
(
SEICÚ‹ÁLightLev–Info
 *
£iCLL
)

615 
	`as£¹
(
m_isIn™Ÿlized
);

616 
	`as£¹
(
£iCLL
 !ð
NULL
);

618 
£iCLL
->
m_maxCÚ‹ÁLightLev–
 = 
m_pcCfg
->
	`g‘CLLSEIMaxCÚ‹ÁLightLev–
();

619 
£iCLL
->
m_maxPicAv”ageLightLev–
 = 
m_pcCfg
->
	`g‘CLLSEIMaxPicAvgLightLev–
();

620 
	}
}

622 
Void
 
	gSEIEncod”
::
	$š™SEIAmb›ÁV›wšgEnvœÚm’t
(
SEIAmb›ÁV›wšgEnvœÚm’t
 *
£iAmbV›wEnvœÚm’t
)

624 
	`as£¹
(
m_isIn™Ÿlized
);

625 
	`as£¹
(
£iAmbV›wEnvœÚm’t
 !ð
NULL
);

627 
£iAmbV›wEnvœÚm’t
->
m_amb›ÁIÎumšªû
 = 
m_pcCfg
->
	`g‘Amb›ÁV›wšgEnvœÚm’tSEIIÎumšªû
();

628 
£iAmbV›wEnvœÚm’t
->
m_amb›ÁLightX
 = 
m_pcCfg
->
	`g‘Amb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightX
();

629 
£iAmbV›wEnvœÚm’t
->
m_amb›ÁLightY
 = 
m_pcCfg
->
	`g‘Amb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightY
();

630 
	}
}

633 
Void
 
	gSEIEncod”
::
	$š™SEIE½
(
SEIEquœeùªguÏrProjeùiÚ
* 
£iEquœeùªguÏrProjeùiÚ
)

635 
	`as£¹
 (
m_isIn™Ÿlized
);

636 
	`as£¹
 (
£iEquœeùªguÏrProjeùiÚ
!=
NULL
);

638 
£iEquœeùªguÏrProjeùiÚ
->
m_”pCªûlFÏg
 = 
m_pcCfg
->
	`g‘E½SEICªûlFÏg
();

639 ià(!
£iEquœeùªguÏrProjeùiÚ
->
m_”pCªûlFÏg
)

641 
£iEquœeùªguÏrProjeùiÚ
->
m_”pP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘E½SEIP”si¡’ûFÏg
();

642 
£iEquœeùªguÏrProjeùiÚ
->
m_”pGu¬dBªdFÏg
 = 
m_pcCfg
->
	`g‘E½SEIGu¬dBªdFÏg
();

643 ià(
£iEquœeùªguÏrProjeùiÚ
->
m_”pGu¬dBªdFÏg
 == 1)

645 
£iEquœeùªguÏrProjeùiÚ
->
m_”pGu¬dBªdTy³
 = 
m_pcCfg
->
	`g‘E½SEIGu¬dBªdTy³
();

646 
£iEquœeùªguÏrProjeùiÚ
->
m_”pLeáGu¬dBªdWidth
 = 
m_pcCfg
->
	`g‘E½SEILeáGu¬dBªdWidth
();

647 
£iEquœeùªguÏrProjeùiÚ
->
m_”pRightGu¬dBªdWidth
 = 
m_pcCfg
->
	`g‘E½SEIRightGu¬dBªdWidth
();

650 
	}
}

652 
Void
 
	gSEIEncod”
::
	$š™SEISph”eRÙ©iÚ
(
SEISph”eRÙ©iÚ
* 
£iSph”eRÙ©iÚ
)

654 
	`as£¹
 (
m_isIn™Ÿlized
);

655 
	`as£¹
 (
£iSph”eRÙ©iÚ
!=
NULL
);

657 
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚCªûlFÏg
 = 
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEICªûlFÏg
();

658 iàÐ!
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚCªûlFÏg
 )

660 
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEIP”si¡’ûFÏg
();

661 
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚYaw
 = 
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEIYaw
();

662 
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚP™ch
 = 
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEIP™ch
();

663 
£iSph”eRÙ©iÚ
->
m_¥h”eRÙ©iÚRÞl
 = 
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEIRÞl
();

665 
	}
}

667 
Void
 
	gSEIEncod”
::
	$š™SEIOmniV›wpÜt
(
SEIOmniV›wpÜt
* 
£iOmniV›wpÜt
)

669 
	`as£¹
 (
m_isIn™Ÿlized
);

670 
	`as£¹
 (
£iOmniV›wpÜt
!=
NULL
);

672 
£iOmniV›wpÜt
->
m_omniV›wpÜtId
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIId
();

673 
£iOmniV›wpÜt
->
m_omniV›wpÜtCªûlFÏg
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEICªûlFÏg
();

674 iàÐ!
£iOmniV›wpÜt
->
m_omniV›wpÜtCªûlFÏg
 )

676 
£iOmniV›wpÜt
->
m_omniV›wpÜtP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIP”si¡’ûFÏg
();

677 
£iOmniV›wpÜt
->
m_omniV›wpÜtCÁMšus1
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEICÁMšus1
();

679 
£iOmniV›wpÜt
->
m_omniV›wpÜtRegiÚs
.
	`»size
(£iOmniV›wpÜt->
m_omniV›wpÜtCÁMšus1
+1);

680 
UIÁ
 
i
 = 0; i <ð
£iOmniV›wpÜt
->
m_omniV›wpÜtCÁMšus1
; i++)

682 
SEIOmniV›wpÜt
::
OmniV›wpÜt
 &
v›wpÜt
 = 
£iOmniV›wpÜt
->
m_omniV›wpÜtRegiÚs
[
i
];

683 
v›wpÜt
.
azimuthC’Œe
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIAzimuthC’Œe
(
i
);

684 
v›wpÜt
.
–ev©iÚC’Œe
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIEËv©iÚC’Œe
(
i
);

685 
v›wpÜt
.
tžtC’Œe
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEITžtC’Œe
(
i
);

686 
v›wpÜt
.
hÜRªge
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIHÜRªge
(
i
);

687 
v›wpÜt
.
v”Rªge
 = 
m_pcCfg
->
	`g‘OmniV›wpÜtSEIV”Rªge
(
i
);

690 
	}
}

692 
Void
 
	gSEIEncod”
::
	$š™SEICubem­ProjeùiÚ
(
SEICubem­ProjeùiÚ
 *
£iCubem­ProjeùiÚ
)

694 
	`as£¹
(
m_isIn™Ÿlized
);

695 
	`as£¹
(
£iCubem­ProjeùiÚ
 !ð
NULL
);

696 
£iCubem­ProjeùiÚ
->
m_cmpCªûlFÏg
 = 
m_pcCfg
->
	`g‘CmpSEICmpCªûlFÏg
();

697 
£iCubem­ProjeùiÚ
->
m_cmpP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘CmpSEICmpP”si¡’ûFÏg
();

698 
	}
}

700 
Void
 
	gSEIEncod”
::
	$š™SEIRegiÚWi£Packšg
(
SEIRegiÚWi£Packšg
 *
£iRegiÚWi£Packšg
)

702 
	`as£¹
 (
m_isIn™Ÿlized
);

703 
	`as£¹
 (
£iRegiÚWi£Packšg
!=
NULL
);

704 
£iRegiÚWi£Packšg
->
m_rwpCªûlFÏg
 = 
m_pcCfg
->
	`g‘RwpSEIRwpCªûlFÏg
();

705 
£iRegiÚWi£Packšg
->
m_rwpP”si¡’ûFÏg
 = 
m_pcCfg
->
	`g‘RwpSEIRwpP”si¡’ûFÏg
();

706 
£iRegiÚWi£Packšg
->
m_cÚ¡™u’tPiùu»M©chšgFÏg
 = 
m_pcCfg
->
	`g‘RwpSEICÚ¡™u’tPiùu»M©chšgFÏg
();

707 
£iRegiÚWi£Packšg
->
m_numPackedRegiÚs
 = 
m_pcCfg
->
	`g‘RwpSEINumPackedRegiÚs
();

708 
£iRegiÚWi£Packšg
->
m_´ojPiùu»Width
 = 
m_pcCfg
->
	`g‘RwpSEIProjPiùu»Width
();

709 
£iRegiÚWi£Packšg
->
m_´ojPiùu»Height
 = 
m_pcCfg
->
	`g‘RwpSEIProjPiùu»Height
();

710 
£iRegiÚWi£Packšg
->
m_·ckedPiùu»Width
 = 
m_pcCfg
->
	`g‘RwpSEIPackedPiùu»Width
();

711 
£iRegiÚWi£Packšg
->
m_·ckedPiùu»Height
 = 
m_pcCfg
->
	`g‘RwpSEIPackedPiùu»Height
();

712 
£iRegiÚWi£Packšg
->
m_rwpT¿nsfÜmTy³
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

713 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdFÏg
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

714 
£iRegiÚWi£Packšg
->
m_´ojRegiÚWidth
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

715 
£iRegiÚWi£Packšg
->
m_´ojRegiÚHeight
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

716 
£iRegiÚWi£Packšg
->
m_rwpProjRegiÚTÝ
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

717 
£iRegiÚWi£Packšg
->
m_´ojRegiÚLeá
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

718 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚWidth
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

719 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚHeight
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

720 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚTÝ
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

721 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚLeá
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

722 
£iRegiÚWi£Packšg
->
m_rwpLeáGu¬dBªdWidth
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

723 
£iRegiÚWi£Packšg
->
m_rwpRightGu¬dBªdWidth
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

724 
£iRegiÚWi£Packšg
->
m_rwpTÝGu¬dBªdHeight
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

725 
£iRegiÚWi£Packšg
->
m_rwpBÙtomGu¬dBªdHeight
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

726 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
.
	`»size
(£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

727 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdTy³
.
	`»size
(4*£iRegiÚWi£Packšg->
m_numPackedRegiÚs
);

728  
IÁ
 
i
=0; i < 
£iRegiÚWi£Packšg
->
m_numPackedRegiÚs
; i++ )

730 
£iRegiÚWi£Packšg
->
m_rwpT¿nsfÜmTy³
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpT¿nsfÜmTy³
(i);

731 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdFÏg
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpGu¬dBªdFÏg
(i);

732 
£iRegiÚWi£Packšg
->
m_´ojRegiÚWidth
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIProjRegiÚWidth
(i);

733 
£iRegiÚWi£Packšg
->
m_´ojRegiÚHeight
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIProjRegiÚHeight
(i);

734 
£iRegiÚWi£Packšg
->
m_rwpProjRegiÚTÝ
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpSEIProjRegiÚTÝ
(i);

735 
£iRegiÚWi£Packšg
->
m_´ojRegiÚLeá
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIProjRegiÚLeá
(i);

736 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚWidth
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIPackedRegiÚWidth
(i);

737 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚHeight
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIPackedRegiÚHeight
(i);

738 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚTÝ
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIPackedRegiÚTÝ
(i);

739 
£iRegiÚWi£Packšg
->
m_·ckedRegiÚLeá
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIPackedRegiÚLeá
(i);

740 ifÐ
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdFÏg
[
i
] )

742 
£iRegiÚWi£Packšg
->
m_rwpLeáGu¬dBªdWidth
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpLeáGu¬dBªdWidth
(i);

743 
£iRegiÚWi£Packšg
->
m_rwpRightGu¬dBªdWidth
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpRightGu¬dBªdWidth
(i);

744 
£iRegiÚWi£Packšg
->
m_rwpTÝGu¬dBªdHeight
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpTÝGu¬dBªdHeight
(i);

745 
£iRegiÚWi£Packšg
->
m_rwpBÙtomGu¬dBªdHeight
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpBÙtomGu¬dBªdHeight
(i);

746 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
[
i
] = 
m_pcCfg
->
	`g‘RwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
(i);

747  
IÁ
 
j
=0; j < 4; j++ )

749 
£iRegiÚWi£Packšg
->
m_rwpGu¬dBªdTy³
[
i
*4 + 
j
] = 
m_pcCfg
->
	`g‘RwpSEIRwpGu¬dBªdTy³
(i*4 + j);

753 
	}
}

755 
Void
 
	gSEIEncod”
::
	$š™SEIFisheyeVideoInfo
(
SEIFisheyeVideoInfo
 *
£iFisheyeVideoInfo
)

757 
	`as£¹
(
m_isIn™Ÿlized
);

758 
	`as£¹
(
£iFisheyeVideoInfo
 !ð
NULL
);

759 
£iFisheyeVideoInfo
->
v®ues
 = 
m_pcCfg
->
	`g‘FviSEID©a
();

760 
	}
}

762 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

763 
Void
 
»adTok’V®ue
(
T
 &
»tuºedV®ue
,

764 
BoÞ
 &
çžed
,

765 
¡d
::
i¡»am
 &
is
,

766 cÚ¡ 
TCh¬
 *
pTok’
,

767 
	$BoÞ
 (*
·r£Fn
è(
¡d
::
i¡»am
 &, 
T
 &)

770 
»tuºedV®ue
=
	`T
();

771 ià(
çžed
)

776 
IÁ
 
c
;

778 (
c
=
is
.
	`g‘
())!=
EOF
 && 
	`is¥aû
(c));

780 
c
=='#')

783 (
c
=
is
.
	`g‘
())!=
EOF
 && (c!=10 && c!=13));

785 (
c
=
is
.
	`g‘
())!=
EOF
 && 
	`is¥aû
(c));

788 
çžed
=(
c
!=
pTok’
[0]);

790 
IÁ
 
pos
;

791 
pos
=1;!
çžed
 && 
pTok’
[pos]!=0 && 
is
.
	`g‘
()==pToken[pos];…os++);

792 
çžed
|=(
pTok’
[
pos
]!=0);

794 !
çžed
 && (
c
=
is
.
	`g‘
())!=
EOF
 && 
	`is¥aû
(c));

795 
çžed
|=(
c
!=':');

797 ià(!
çžed
)

799 
çžed
=
	`·r£Fn
(
is
, 
»tuºedV®ue
);

801 ià(
çžed
)

803 
¡d
::
û¼
 << "UÇbËØ»adok’ '" << 
pTok’
 << "'\n";

805 
	}
}

807 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

808 
BoÞ
 
	$»adTok’V®ueP¬sšg
(
¡d
::
i¡»am
 &
is
, 
T
 & 
»tuºedV®ue
)

810 
is
 >> 
»tuºedV®ue
;

811 
BoÞ
 
çžed
=!
is
.
	`good
();

812 ià(!
çžed
)

814 
IÁ
 
c
=
is
.
	`g‘
();

815 
çžed
=(
c
!=
EOF
 && !
	`is¥aû
(c));

817  
çžed
;

818 
	}
}

820 
	g‹m¶©e
 <>

821 
BoÞ
 
	$»adTok’V®ueP¬sšg
(
¡d
::
i¡»am
 &
is
, std::
¡ršg
 & 
»tuºedV®ue
)

823 
IÁ
 
c
;

827 
c
=
is
.
	`g‘
();

828 } 
	`is¥aû
(
c
è&& c!=10 && c!=13 && c!=
EOF
);

830 
IÁ
 
cu¼’tQuÙeSymbÞ
=0;

831 
IÁ
 
ŒažšgS·ûs
=0;

833 
c
!=
EOF
 && c!=0 && c!=10 && c!=13)

835 ià(
cu¼’tQuÙeSymbÞ
==0 && (
c
=='"' || c=='\''))

837 
cu¼’tQuÙeSymbÞ
=
c
;

839 ià(
c
==
cu¼’tQuÙeSymbÞ
)

841 
cu¼’tQuÙeSymbÞ
=0;

843 ià(
	`is¥aû
(
c
è&& !
cu¼’tQuÙeSymbÞ
)

845 
ŒažšgS·ûs
++;

849 ià(
c
=='\\')

851 
c
=
is
.
	`g‘
();

852 ià(
c
==
EOF
 || c==10 || c==13 || c==0)

854  
Œue
;

857 ià(
ŒažšgS·ûs
)

859 
»tuºedV®ue
+=
	`¡ršg
(
ŒažšgS·ûs
, ' ');

860 
ŒažšgS·ûs
=0;

862 
»tuºedV®ue
+=
c
;

864 
c
=
is
.
	`g‘
();

867  
cu¼’tQuÙeSymbÞ
!=0;

868 
	}
}

870 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

871 
Void
 
	$»adTok’V®ue
(
T
 &
»tuºedV®ue
,

872 
BoÞ
 &
çžed
,

873 
¡d
::
i¡»am
 &
is
,

874 cÚ¡ 
TCh¬
 *
pTok’
)

876 
	`»adTok’V®ue
(
»tuºedV®ue
, 
çžed
, 
is
, 
pTok’
, 
»adTok’V®ueP¬sšg
);

877 
	}
}

879 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

880 
Void
 
	$»adTok’V®ueAndV®id©e
(
T
 &
»tuºedV®ue
,

881 
BoÞ
 &
çžed
,

882 
¡d
::
i¡»am
 &
is
,

883 cÚ¡ 
TCh¬
 *
pTok’
,

884 cÚ¡ 
T
 &
mšInþusive
,

885 cÚ¡ 
T
 &
maxInþusive
)

887 
	`»adTok’V®ue
(
»tuºedV®ue
, 
çžed
, 
is
, 
pTok’
);

888 ià(!
çžed
)

890 ià(
»tuºedV®ue
<
mšInþusive
 ||„‘uºedV®ue>
maxInþusive
)

892 
çžed
=
Œue
;

893 
¡d
::
û¼
 << "V®ufÜok’ " << 
pTok’
 << " mu¡ bšh¿ng" << 
mšInþusive
 << "Ø" << 
maxInþusive
 << " (šþusive); v®u»ad: " << 
»tuºedV®ue
 << std::
’dl
;

896 
	}
}

899 
Void
 
	$»adTok’V®ueAndV®id©e
(
BoÞ
 &
»tuºedV®ue
,

900 
BoÞ
 &
çžed
,

901 
¡d
::
i¡»am
 &
is
,

902 cÚ¡ 
TCh¬
 *
pTok’
)

904 
	`»adTok’V®ue
(
»tuºedV®ue
, 
çžed
, 
is
, 
pTok’
);

905 
	}
}

909 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

910 
Void
 
»adTok’V®ue
(
¡d
::
veùÜ
<
T
> &
»tuºedV®ue
,

911 
BoÞ
 &
çžed
,

912 
¡d
::
i¡»am
 &
is
,

913 cÚ¡ 
TCh¬
 *
pTok’
,

914 cÚ¡ 
UIÁ
 &
numV®ues
)

916 
	g»tuºedV®ue
=
¡d
::
veùÜ
<
T
>();

917 ià(
	gçžed
)

922 
IÁ
 
	gc
;

924 (
	gc
=
is
.
g‘
())!=
EOF
 && 
is¥aû
(
c
));

926 
	gc
=='#')

929 (
c
=
is
.
g‘
())!=
EOF
 && (c!=10 && c!=13));

931 (
	gc
=
is
.
g‘
())!=
EOF
 && 
is¥aû
(
c
));

934 
	gçžed
=(
c
!=
pTok’
[0]);

936 
IÁ
 
	gpos
;

937 
	gpos
=1;!
	gçžed
 && 
	gpTok’
[
pos
]!=0 && 
is
.
g‘
()==
pTok’
[pos];…os++);

938 
	gçžed
|=(
pTok’
[
pos
]!=0);

940 !
	gçžed
 && (
	gc
=
is
.
g‘
())!=
EOF
 && 
is¥aû
(
c
));

941 
	gçžed
|=(
c
!=':');

943 
UIÁ
 
	gi
 = 0; i < 
	gnumV®ues
; i++)

945 ià(!
	gçžed
)

947 
	gis
 >> 
	g»tuºedV®ue
[
i
];

948 
	gçžed
=!
is
.
good
();

949 ià(!
	gçžed
)

951 
	gc
=
is
.
g‘
();

952 
	gçžed
=(
c
!=
EOF
 && !
is¥aû
(c));

955 ià(
	gçžed
)

957 
	g¡d
::
û¼
 << "UÇbËØ»adok’ '" << 
pTok’
 << "[" << 
i
 << "]'\n";

962 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

963 
Void
 
»adTok’V®ueAndV®id©e
(
¡d
::
veùÜ
<
T
> &
»tuºedV®ue
,

964 
BoÞ
 &
çžed
,

965 
¡d
::
i¡»am
 &
is
,

966 cÚ¡ 
TCh¬
 *
pTok’
,

967 cÚ¡ 
T
 &
mšInþusive
,

968 cÚ¡ 
T
 &
maxInþusive
,

969 cÚ¡ 
UIÁ
 &
numV®ues
)

971 
	g»adTok’V®ue
<
	gIÁ
>(
	g»tuºedV®ue
, 
	gçžed
, 
	gis
, 
	gpTok’
, 
	gnumV®ues
);

972 ià(!
	gçžed
)

974 
UIÁ
 
	gi
 = 0; i < 
	gnumV®ues
; i++)

976 ià(
	g»tuºedV®ue
[
i
]<
	gmšInþusive
 ||„‘uºedV®ue[i]>
	gmaxInþusive
)

978 
	gçžed
=
Œue
;

979 
	g¡d
::
û¼
 << "V®ufÜok’ " << 
pTok’
 << "[" << 
i
 << "] mu¡ bšh¿ng" << 
mšInþusive
 << "Ø" << 
maxInþusive
 << " (šþusive); v®u»ad: " << 
»tuºedV®ue
[i] << 
¡d
::
’dl
;

985 
BoÞ
 
	gSEIEncod”
::
	$š™SEICÞourRem­pšgInfo
(
SEICÞourRem­pšgInfo
* 
£iCÞourRem­pšgInfo
, 
IÁ
 
cu¼POC
)

987 
	`as£¹
 (
m_isIn™Ÿlized
);

988 
	`as£¹
 (
£iCÞourRem­pšgInfo
!=
NULL
);

991 ifÐ!
m_pcCfg
->
	`g‘CÞourRem­InfoSEIFžeRoÙ
().
	`em±y
())

993 
BoÞ
 
çžed
=
çl£
;

996 
¡d
::
¡ršg
 
	`cÞourRem­SEIFžeW™hPoc
(
m_pcCfg
->
	`g‘CÞourRem­InfoSEIFžeRoÙ
());

998 
¡d
::
¡ršg¡»am
 
suffix
;

999 
suffix
 << "_" << 
cu¼POC
 << ".txt";

1000 
cÞourRem­SEIFžeW™hPoc
+=
suffix
.
	`¡r
();

1003 
¡d
::
if¡»am
 
	`fic
(
cÞourRem­SEIFžeW™hPoc
.
	`c_¡r
());

1004 ià(!
fic
.
	`good
(è|| !fic.
	`is_Ý’
())

1006 
¡d
::
û¼
 << "NØCÞou¸Rem­pšg InfÜm©iÚ SEI…¬am‘” fž" << 
cÞourRem­SEIFžeW™hPoc
 << " fÜ POC " << 
cu¼POC
 << std::
’dl
;

1007  
çl£
;

1011 
	`»adCÞourRem­SEI
(
fic
, 
£iCÞourRem­pšgInfo
, 
çžed
 );

1013 ifÐ
çžed
 )

1015 
¡d
::
û¼
 << "E¼Ü whž»adšg CÞou¸Rem­pšg InfÜm©iÚ SEI…¬am‘” fž'" << 
cÞourRem­SEIFžeW™hPoc
 << "'" << std::
’dl
;

1016 
	`ex™
(
EXIT_FAILURE
);

1019  
Œue
;

1020 
	}
}

1022 
Void
 
	gSEIEncod”
::
	$»adRNSEIWšdow
(
¡d
::
i¡»am
 &
fic
, 
RNSEIWšdowVec
::
™”©Ü
 
»giÚI‹r
, 
BoÞ
 &
çžed
 )

1024 
IÁ
 
»giÚId
;

1025 
IÁ
 
offLeá
, 
offRight
, 
offTÝ
, 
offBÙtom
;

1026 
fic
 >> 
»giÚId
 >> 
offLeá
 >> 
offRight
 >> 
offTÝ
 >> 
offBÙtom
;

1027 (*
»giÚI‹r
).
	`£tRegiÚId
(
»giÚId
);

1028 (*
»giÚI‹r
).
	`£tWšdow
(
offLeá
, 
offRight
, 
offTÝ
, 
offBÙtom
);

1029 
	}
}

1030 
Void
 
	gSEIEncod”
::
	$»adCÞourRem­SEI
(
¡d
::
i¡»am
 &
fic
, 
SEICÞourRem­pšgInfo
 *
£iCÞourRem­pšgInfo
, 
BoÞ
 &
çžed
 )

1032 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
£iCÞourRem­pšgInfo
->
m_cÞourRem­Id
, 
çžed
, 
fic
, "cÞour_»m­_id", 
	`UIÁ
(0), UInt(0x7fffffff) );

1033 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­CªûlFÏg
, 
çžed
, 
fic
, "colour_remap_cancel_flag" );

1034 ifÐ!
£iCÞourRem­pšgInfo
->
m_cÞourRem­CªûlFÏg
 )

1036 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­P”si¡’ûFÏg
, 
çžed
, 
fic
, "colour_remap_persistence_flag" );

1037 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
, 
çžed
, 
fic
, "colour_remap_video_signal_info_present_flag");

1038 ifÐ
£iCÞourRem­pšgInfo
->
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
 )

1040 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­FuÎRªgeFÏg
, 
çžed
, 
fic
, "colour_remap_full_range_flag" );

1041 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­Prim¬›s
, 
çžed
, 
fic
, "cÞour_»m­_´im¬›s", 
	`IÁ
(0), Int(255) );

1042 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­T¿nsãrFunùiÚ
, 
çžed
, 
fic
, "cÞour_»m­_Œªsãr_funùiÚ", 
	`IÁ
(0), Int(255) );

1043 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­M©rixCÛffic›Ás
, 
çžed
, 
fic
, "cÞour_»m­_m©rix_cÛffic›Ás", 
	`IÁ
(0), Int(255) );

1045 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­IÅutB™D•th
, 
çžed
, 
fic
, "cÞour_»m­_šput_b™_d•th", 
	`IÁ
(8), Int(16) );

1046 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­B™D•th
, 
çžed
, 
fic
, "cÞour_»m­_b™_d•th", 
	`IÁ
(8), Int(16) );

1048 cÚ¡ 
IÁ
 
maximumIÅutV®ue
 = (1 << (((
£iCÞourRem­pšgInfo
->
m_cÞourRem­IÅutB™D•th
 + 7) >> 3) << 3)) - 1;

1049 cÚ¡ 
IÁ
 
maximumRem­³dV®ue
 = (1 << (((
£iCÞourRem­pšgInfo
->
m_cÞourRem­B™D•th
 + 7) >> 3) << 3)) - 1;

1051  
IÁ
 
c
=0 ; c<3 ; c++ )

1053 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_´eLutNumV®Mšus1
[
c
], 
çžed
, 
fic
, "´e_lut_num_v®_mšus1[c]", 
	`IÁ
(0), Int(32) );

1054 ifÐ
£iCÞourRem­pšgInfo
->
m_´eLutNumV®Mšus1
[
c
]>0 )

1056 
£iCÞourRem­pšgInfo
->
m_´eLut
[
c
].
	`»size
(£iCÞourRem­pšgInfo->
m_´eLutNumV®Mšus1
[c]+1);

1057  
IÁ
 
i
=0 ; i<=
£iCÞourRem­pšgInfo
->
m_´eLutNumV®Mšus1
[
c
] ; i++ )

1059 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_´eLut
[
c
][
i
].
codedV®ue
, 
çžed
, 
fic
, "´e_lut_coded_v®ue[c][i]", 
	`IÁ
(0), 
maximumIÅutV®ue
 );

1060 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_´eLut
[
c
][
i
].
rg‘V®ue
, 
çžed
, 
fic
, "´e_lut_rg‘_v®ue[c][i]", 
	`IÁ
(0), 
maximumRem­³dV®ue
 );

1064 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­M©rixP»£ÁFÏg
, 
çžed
, 
fic
, "colour_remap_matrix_present_flag" );

1065 ifÐ
£iCÞourRem­pšgInfo
->
m_cÞourRem­M©rixP»£ÁFÏg
 )

1067 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_log2M©rixD’om
, 
çžed
, 
fic
, "log2_m©rix_d’om", 
	`IÁ
(0), Int(15) );

1068  
IÁ
 
c
=0 ; c<3 ; c++ )

1070  
IÁ
 
i
=0 ; i<3 ; i++ )

1072 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_cÞourRem­CÛffs
[
c
][
i
], 
çžed
, 
fic
, "colour_remap_coeffs[c][i]", -32768, 32767 );

1076  
IÁ
 
c
=0 ; c<3 ; c++ )

1078 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_po¡LutNumV®Mšus1
[
c
], 
çžed
, 
fic
, "po¡_lut_num_v®_mšus1[c]", 
	`IÁ
(0), Int(32) );

1079 ifÐ
£iCÞourRem­pšgInfo
->
m_po¡LutNumV®Mšus1
[
c
]>0 )

1081 
£iCÞourRem­pšgInfo
->
m_po¡Lut
[
c
].
	`»size
(£iCÞourRem­pšgInfo->
m_po¡LutNumV®Mšus1
[c]+1);

1082  
IÁ
 
i
=0 ; i<=
£iCÞourRem­pšgInfo
->
m_po¡LutNumV®Mšus1
[
c
] ; i++ )

1084 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_po¡Lut
[
c
][
i
].
codedV®ue
, 
çžed
, 
fic
, "po¡_lut_coded_v®ue[c][i]", 
	`IÁ
(0), 
maximumRem­³dV®ue
 );

1085 
	`»adTok’V®ueAndV®id©e
(
£iCÞourRem­pšgInfo
->
m_po¡Lut
[
c
][
i
].
rg‘V®ue
, 
çžed
, 
fic
, "po¡_lut_rg‘_v®ue[c][i]", 
	`IÁ
(0), 
maximumRem­³dV®ue
 );

1090 
	}
}

1091 
Void
 
	gSEIEncod”
::
	$»adTÚeM­pšgInfoSEI
(
¡d
::
i¡»am
 &
fic
, 
SEITÚeM­pšgInfo
 *
£iTÚeM­pšgInfo
 , 
BoÞ
 &
çžed
 )

1093 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_tÚeM­Id
, 
çžed
, 
fic
, "SEITÚeM­Id", 
	`IÁ
(0), Int(255) );

1094 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_tÚeM­CªûlFÏg
, 
çžed
, 
fic
, "SEIToneMapCancelFlag");

1095 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_tÚeM­P”si¡’ûFÏg
, 
çžed
, 
fic
, "SEIToneMapPersistenceFlag");

1096 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_codedD©aB™D•th
, 
çžed
, 
fic
, "SEITÚeM­CodedD©aB™D•th", 
	`IÁ
(8), Int(14) );

1097 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_rg‘B™D•th
, 
çžed
, 
fic
, "SEITÚeM­T¬g‘B™D•th", 
	`IÁ
(8), Int(14) );

1098 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_mod–Id
, 
çžed
, 
fic
, "SEITÚeM­Mod–Id", 
	`IÁ
(0), Int(4) );

1099 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_mšV®ue
, 
çžed
, 
fic
, "SEITÚeM­MšV®ue", 
	`IÁ
(0), Int((1<<14)-1) );

1100 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_maxV®ue
, 
çžed
, 
fic
, "SEITÚeM­MaxV®ue", 
	`IÁ
(0), Int((1<<14)-1) );

1101 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_sigmoidMidpošt
, 
çžed
, 
fic
, "SEITÚeM­SigmoidMidpošt", 
	`IÁ
(0), Int((1<<14)-1) );

1102 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_sigmoidWidth
, 
çžed
, 
fic
, "SEITÚeM­SigmoidWidth", 
	`IÁ
(0), Int((1<<14)-1) );

1103 
»adTok’V®ueAndV®id©e
<
IÁ
>(
£iTÚeM­pšgInfo
->
m_¡¬tOfCodedIÁ”v®
, 
çžed
, 
fic
, "SEITÚeM­S¹OfCodedIÁ”v®", 
	`IÁ
(0), IÁ((1<<16)-1), 
	`UIÁ
(1<<£iTÚeM­pšgInfo->
m_rg‘B™D•th
) );

1104 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_numPivÙs
, 
çžed
, 
fic
, "SEITÚeM­NumPivÙs", 
	`IÁ
(0), Int((1<<16)-1) );

1105 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_codedPivÙV®ue
, 
çžed
, 
fic
, "SEITÚeM­CodedPivÙV®ue", 
	`IÁ
(0), IÁ((1<<16)-1), seiTÚeM­pšgInfo->
m_numPivÙs
 );

1106 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_rg‘PivÙV®ue
, 
çžed
, 
fic
, "SEITÚeM­T¬g‘PivÙV®ue", 
	`IÁ
(0), IÁ((1<<16)-1), seiTÚeM­pšgInfo->
m_numPivÙs
 );

1107 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_ÿm”aIsoS³edIdc
, 
çžed
, 
fic
, "SEITÚeM­Cam”aIsoS³edIdc", 
	`IÁ
(0), Int(255) );

1108 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_ÿm”aIsoS³edV®ue
, 
çžed
, 
fic
, "SEITÚeM­Cam”aIsoS³edV®ue", 
	`IÁ
(0), Int((~0)-1) );

1109 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_exposu»IndexIdc
, 
çžed
, 
fic
, "SEITÚeM­Exposu»IndexIdc", 
	`IÁ
(0), Int(255) );

1110 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_exposu»IndexV®ue
, 
çžed
, 
fic
, "SEITÚeM­Exposu»IndexV®ue", 
	`IÁ
(0), Int((~0)-1) );

1111 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueSignFÏg
, 
çžed
, 
fic
, "SEIToneMapExposureCompensationValueSignFlag");

1112 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueNum”©Ü
, 
çžed
, 
fic
, "SEITÚeM­Exposu»Com³n§tiÚV®ueNum”©Ü", 
	`IÁ
(0), Int((1<<16)-1) );

1113 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_exposu»Com³n§tiÚV®ueD’omIdc
, 
çžed
, 
fic
, "SEITÚeM­Exposu»Com³n§tiÚV®ueD’omIdc", 
	`IÁ
(0), Int((1<<16)-1) );

1114 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_»fSü“nLumšªûWh™e
, 
çžed
, 
fic
, "SEITÚeM­RefSü“nLumšªûWh™e", 
	`IÁ
(0), Int(10000) );

1115 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_ex‹ndedRªgeWh™eLev–
, 
çžed
, 
fic
, "SEITÚeM­Ex‹ndedRªgeWh™eLev–", 
	`IÁ
(100), Int(10000) );

1116 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_nomš®BÏckLev–LumaCodeV®ue
, 
çžed
, 
fic
, "SEITÚeM­Nomš®BÏckLev–LumaCodeV®ue", 
	`IÁ
(0), Int((1<<16)-1) );

1117 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_nomš®Wh™eLev–LumaCodeV®ue
, 
çžed
, 
fic
, "SEITÚeM­Nomš®Wh™eLev–LumaCodeV®ue", 
	`IÁ
(0), Int((1<<16)-1) );

1118 
	`»adTok’V®ueAndV®id©e
(
£iTÚeM­pšgInfo
->
m_ex‹ndedWh™eLev–LumaCodeV®ue
, 
çžed
, 
fic
, "SEITÚeM­Ex‹ndedWh™eLev–LumaCodeV®ue", 
	`IÁ
(0), Int((1<<16)-1) );

1119 
	}
}

1120 
Void
 
	gSEIEncod”
::
	$»adChromaRe§m¶šgFž‹rHštSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIChromaRe§m¶šgFž‹rHšt
 *
£iChromaRe§m¶šgFž‹rHšt
, 
BoÞ
 &
çžed
 )

1122 
IÁ
 
hÜFžTy³
, 
v”FžTy³
;

1123 
	`»adTok’V®ueAndV®id©e
(
hÜFžTy³
, 
çžed
, 
fic
, "SEIChromaRe§m¶šgHÜizÚlFž‹rTy³", 
	`IÁ
(0), Int(2) );

1124 
	`»adTok’V®ueAndV®id©e
(
v”FžTy³
, 
çžed
, 
fic
, "SEIChromaRe§m¶šgV”tiÿlFž‹rTy³", 
	`IÁ
(0), Int(2) );

1125 if(
hÜFžTy³
 =ð1 || 
v”FžTy³
 == 1)

1127 
cout
 << "Encoder support‚eeded for scanning‡dditional syntaxƒlements of chroma„esampling filter hint SEI message.\n";

1128 
cout
 << "Addn. code‚eeded in„eadChromaResamplingFilterHintSEI()‡nd initSEIChromaResamplingFilterHint().\n";

1129 
	`ex™
(1);

1131 
	`š™SEIChromaRe§m¶šgFž‹rHšt
(
£iChromaRe§m¶šgFž‹rHšt
, 
hÜFžTy³
, 
v”FžTy³
);

1132 
	}
}

1133 
Void
 
	gSEIEncod”
::
	$»adKÃeFunùiÚInfoSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIKÃeFunùiÚInfo
 *
£iKÃeFunùiÚInfo
, 
BoÞ
 &
çžed
 )

1135 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeId
, 
çžed
, 
fic
, "SEIKÃeFunùiÚId", 
	`IÁ
(0), Int(255));

1136 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeCªûlFÏg
, 
çžed
, 
fic
, "SEIKneeFunctionCancelFlag" );

1137 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeP”si¡’ûFÏg
, 
çžed
, 
fic
, "SEIKneeFunctionPersistenceFlag" );

1138 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeIÅutD¿nge
, 
çžed
, 
fic
, "SEIKÃeFunùiÚIÅutD¿nge", 
	`IÁ
(0), Int(1000) );

1139 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeIÅutDi¥Lumšªû
, 
çžed
, 
fic
, "SEIKÃeFunùiÚIÅutDi¥Lumšªû", 
	`IÁ
(0), Int(10000) );

1140 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeOuutD¿nge
, 
çžed
, 
fic
, "SEIKÃeFunùiÚOuutD¿nge", 
	`IÁ
(0), Int(1000) );

1141 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeOuutDi¥Lumšªû
, 
çžed
, 
fic
, "SEIKÃeFunùiÚOuutDi¥Lumšªû",
	`IÁ
(0), Int(10000) );

1142 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeNumKÃePoštsMšus1
, 
çžed
, 
fic
, "SEIKÃeFunùiÚNumKÃePoštsMšus1",
	`IÁ
(0), Int(998) );

1143 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeIÅutKÃePošt
, 
çžed
, 
fic
, "SEIKÃeFunùiÚIÅutKÃePoštV®ue",
	`IÁ
(0), IÁ(1000), seiKÃeFunùiÚInfo->
m_kÃeNumKÃePoštsMšus1
+1 );

1144 
	`»adTok’V®ueAndV®id©e
(
£iKÃeFunùiÚInfo
->
m_kÃeOuutKÃePošt
, 
çžed
, 
fic
, "SEIKÃeFunùiÚIÅutKÃePoštV®ue",
	`IÁ
(0), IÁ(1000), seiKÃeFunùiÚInfo->
m_kÃeNumKÃePoštsMšus1
+1 );

1146 
	}
}

1147 
Void
 
	gSEIEncod”
::
	$»adCÚ‹ÁCÞourVÞumeSEI
(
¡d
::
i¡»am
 &
fic
, 
SEICÚ‹ÁCÞourVÞume
 *
£iCÚ‹ÁCÞourVÞume
, 
BoÞ
 &
çžed
 )

1149 
DoubË
 
dCode
, 
´im¬›s
[2][
MAX_NUM_COMPONENT
];

1150 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvCªûlFÏg
, 
çžed
, 
fic
, "SEICCVCancelFlag" );

1151 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvP”si¡’ûFÏg
, 
çžed
, 
fic
, "SEICCVPersistenceFlag" );

1152 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sP»£ÁFÏg
, 
çžed
, 
fic
, "SEICCVPrimariesPresent" );

1153 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[0][0], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sX0", 
	`DoubË
(-100), Double(100));

1154 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[1][1], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sY0", 
	`DoubË
(-100), Double(100));

1155 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[0][2], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sX1", 
	`DoubË
(-100), Double(100));

1156 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[1][0], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sY1", 
	`DoubË
(-100), Double(100));

1157 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[0][1], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sX2", 
	`DoubË
(-100), Double(100));

1158 
	`»adTok’V®ueAndV®id©e
(
´im¬›s
[1][2], 
çžed
, 
fic
, "m_ccvSEIPrim¬›sY2", 
	`DoubË
(-100), Double(100));

1159 if(
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sP»£ÁFÏg
)

1161 
IÁ
 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

1163 
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sX
[
i
] = (
IÁ
è(50000.0 * 
´im¬›s
[0][i]);

1164 
£iCÚ‹ÁCÞourVÞume
->
m_ccvPrim¬›sY
[
i
] = (
IÁ
è(50000.0 * 
´im¬›s
[1][i]);

1167 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ueP»£ÁFÏg
, 
çžed
, 
fic
, "SEICCVMinLuminanceValuePresent" );

1168 
	`»adTok’V®ueAndV®id©e
(
dCode
, 
çžed
, 
fic
, "SEICCVMšLumšªûV®ue", 
	`DoubË
(0), Double(429.4967295));

1169 if(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ueP»£ÁFÏg
)

1171 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMšLumšªûV®ue
 = (
IÁ
è(10000000 * 
dCode
);

1173 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ueP»£ÁFÏg
, 
çžed
, 
fic
, "SEICCVMaxLuminanceValuePresent" );

1174 
	`»adTok’V®ueAndV®id©e
(
dCode
, 
çžed
, 
fic
, "SEICCVMaxLumšªûV®ue", 
	`DoubË
(0), Double(429.4967295));

1175 if(
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ueP»£ÁFÏg
)

1177 
£iCÚ‹ÁCÞourVÞume
->
m_ccvMaxLumšªûV®ue
 = (
IÁ
è(10000000 * 
dCode
);

1179 
	`»adTok’V®ueAndV®id©e
(
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ueP»£ÁFÏg
, 
çžed
, 
fic
, "SEICCVAvgLuminanceValuePresent" );

1180 
	`»adTok’V®ueAndV®id©e
(
dCode
, 
çžed
, 
fic
, "SEICCVAvgLumšªûV®ue", 
	`DoubË
(0), Double(429.4967295));

1181 if(
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ueP»£ÁFÏg
)

1183 
£iCÚ‹ÁCÞourVÞume
->
m_ccvAvgLumšªûV®ue
 = (
IÁ
è(10000000 * 
dCode
);

1185 
	}
}

1186 
BoÞ
 
	gSEIEncod”
::
	$š™SEIRegiÚ®Ne¡šg
(
SEIRegiÚ®Ne¡šg
* 
£iRegiÚ®Ne¡šg
, 
IÁ
 
cu¼POC
)

1188 
	`as£¹
 (
m_isIn™Ÿlized
);

1189 
	`as£¹
 (
£iRegiÚ®Ne¡šg
!=
NULL
);

1190 
IÁ
 
numRegiÚs
;

1191 
RNSEIWšdowVec
 
»giÚs
;

1194 ifÐ!
m_pcCfg
->
	`g‘RegiÚ®Ne¡šgSEIFžeRoÙ
().
	`em±y
())

1196 
BoÞ
 
çžed
=
çl£
;

1199 
¡d
::
¡ršg
 
	`»giÚ®Ne¡šgSEIFžeW™hPoc
(
m_pcCfg
->
	`g‘RegiÚ®Ne¡šgSEIFžeRoÙ
());

1201 
¡d
::
¡ršg¡»am
 
suffix
;

1202 
suffix
 << "_" << 
cu¼POC
 << ".txt";

1203 
»giÚ®Ne¡šgSEIFžeW™hPoc
+=
suffix
.
	`¡r
();

1206 
¡d
::
if¡»am
 
	`fic
(
»giÚ®Ne¡šgSEIFžeW™hPoc
.
	`c_¡r
());

1207 ià(!
fic
.
	`good
(è|| !fic.
	`is_Ý’
())

1209 
¡d
::
û¼
 << "NØRegiÚ® Ne¡šg InfÜm©iÚ SEI…¬am‘” fž" << 
»giÚ®Ne¡šgSEIFžeW™hPoc
 << " fÜ POC " << 
cu¼POC
 << std::
’dl
;

1210  
çl£
;

1213 
IÁ
 
·ylßdTy³
, 
numSEIs
;

1214 
	`»adTok’V®ueAndV®id©e
Ð
numSEIs
, 
çžed
, 
fic
, "num_seis", 0, 255 );

1216 
IÁ
 
i
 = 0; i < 
numSEIs
; i++)

1218 
RegiÚ®SEI
 *
»gSEI
 = 
NULL
;

1220 
	`»adTok’V®ueAndV®id©e
Ð
numRegiÚs
, 
çžed
, 
fic
, "num_regions", 0, 255 );

1221 
»giÚs
.
	`»size
(
numRegiÚs
);

1222 
RNSEIWšdowVec
::
™”©Ü
 
»giÚI‹r
;

1223 
»giÚI‹r
 = 
»giÚs
.
	`begš
();„egiÚI‹¸!ð»giÚs.
	`’d
();„egionIter++)

1225 
	`»adRNSEIWšdow
(
fic
, 
»giÚI‹r
, 
çžed
);

1228 
	`»adTok’V®ueAndV®id©e
Ð
·ylßdTy³
, 
çžed
, 
fic
, "payloadType", 0, 255 );

1229 if(!
RegiÚ®SEI
::
	`checkRegiÚ®Ne¡edSEIPaylßdTy³
(
SEI
::
	`PaylßdTy³
(
·ylßdTy³
)))

1231 
cout
 << "PaylßdTy³ " << 
·ylßdTy³
 << "‚ot supported in„egional‚esting SEI message. Exiting.\n";

1232 
	`ex™
(1);

1236 
SEI
::
	`PaylßdTy³
(
·ylßdTy³
))

1238 
SEI
::
FILM_GRAIN_CHARACTERISTICS
:

1239 
SEI
::
POST_FILTER_HINT
:

1240 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
:

1241 
SEI
::
USER_DATA_UNREGISTERED
:

1243 
cout
 << "Encod” suµÜˆfÜ " << 
SEI
::
	`g‘SEIMes§geSŒšg
(SEI::
	`PaylßdTy³
(
·ylßdTy³
)) <<

1245 
	`ex™
(1);

1247 
SEI
::
TONE_MAPPING_INFO
:

1249 
SEITÚeM­pšgInfo
 *
£iTÚeM­pšgInfo
 = 
Ãw
 SEIToneMappingInfo;

1250 
	`»adTÚeM­pšgInfoSEI
(
fic
, 
£iTÚeM­pšgInfo
, 
çžed
);

1251 
»gSEI
 = 
Ãw
 
	`RegiÚ®SEI
(
£iTÚeM­pšgInfo
, 
»giÚs
);

1254 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
:

1256 
SEIChromaRe§m¶šgFž‹rHšt
 *
£iChromaRe§m¶šgFž‹rHšt
 = 
Ãw
 SEIChromaResamplingFilterHint;

1257 
	`»adChromaRe§m¶šgFž‹rHštSEI
(
fic
, 
£iChromaRe§m¶šgFž‹rHšt
, 
çžed
);

1258 
»gSEI
 = 
Ãw
 
	`RegiÚ®SEI
(
£iChromaRe§m¶šgFž‹rHšt
, 
»giÚs
);

1261 
SEI
::
KNEE_FUNCTION_INFO
:

1263 
SEIKÃeFunùiÚInfo
 *
£iKÃeFunùiÚInfo
 = 
Ãw
 SEIKneeFunctionInfo;

1264 
	`»adKÃeFunùiÚInfoSEI
(
fic
, 
£iKÃeFunùiÚInfo
, 
çžed
);

1265 
»gSEI
 = 
Ãw
 
	`RegiÚ®SEI
(
£iKÃeFunùiÚInfo
, 
»giÚs
);

1268 
SEI
::
COLOUR_REMAPPING_INFO
:

1270 
SEICÞourRem­pšgInfo
 *
£iCÞourRem­pšgInfo
 = 
Ãw
 SEIColourRemappingInfo;

1271 
	`»adCÞourRem­SEI
(
fic
, 
£iCÞourRem­pšgInfo
, 
çžed
);

1272 
»gSEI
 = 
Ãw
 
	`RegiÚ®SEI
(
£iCÞourRem­pšgInfo
, 
»giÚs
);

1275 
SEI
::
CONTENT_COLOUR_VOLUME
:

1277 
SEICÚ‹ÁCÞourVÞume
 *
£iCÚ‹ÁCÞourVÞume
 = 
Ãw
 SEIContentColourVolume;

1278 
	`»adCÚ‹ÁCÞourVÞumeSEI
(
fic
, 
£iCÚ‹ÁCÞourVÞume
, 
çžed
);

1279 
»gSEI
 = 
Ãw
 
	`RegiÚ®SEI
(
£iCÚ‹ÁCÞourVÞume
, 
»giÚs
);

1283 
cout
 << "UÇbËØ»adh·ylßdTy³ " << 
·ylßdTy³
 << " iÀ" << 
»giÚ®Ne¡šgSEIFžeW™hPoc
 << 
¡d
::
’dl
;

1284 
	`ex™
(1);

1286 ifÐ
çžed
 )

1288 
¡d
::
û¼
 << "E¼Ü whž»adšg„egiÚ®‚e¡šg SEI…¬am‘” fž'" << 
»giÚ®Ne¡šgSEIFžeW™hPoc
 << "'" << std::
’dl
;

1289 
	`ex™
(
EXIT_FAILURE
);

1292 if(
»gSEI
)

1294 
£iRegiÚ®Ne¡šg
->
	`addRegiÚ®SEI
(
»gSEI
);

1295 
d–‘e
 
»gSEI
;

1303  
Œue
;

1304 
	}
}

1307 
Void
 
	gSEIEncod”
::
	$»adAÂÙ©edRegiÚSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIAÂÙ©edRegiÚs
 *
£iAÂoRegiÚ
, 
BoÞ
 &
çžed
)

1309 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_ÿnûlFÏg
, 
çžed
, 
fic
, "SEIArCancelFlag");

1310 ià(!
£iAÂoRegiÚ
->
m_hdr
.
m_ÿnûlFÏg
)

1312 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_nÙO±imizedFÜV›wšgFÏg
, 
çžed
, 
fic
, "SEIArNotOptForViewingFlag");

1313 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_ŒueMÙiÚFÏg
, 
çžed
, 
fic
, "SEIArTrueMotionFlag");

1314 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_ocþudedObjeùFÏg
, 
çžed
, 
fic
, "SEIArOccludedObjsFlag");

1315 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
, 
çžed
, 
fic
, "SEIArPartialObjsFlagPresentFlag");

1316 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùLab–P»£ÁFÏg
, 
çžed
, 
fic
, "SEIArObjLabelPresentFlag");

1317 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
, 
çžed
, 
fic
, "SEIArObjConfInfoPresentFlag");

1318 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1320 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùCÚfid’ûL’gth
, 
çžed
, 
fic
, "SEIArObjD‘CÚfL’gth", 
	`UIÁ
(0), UInt(255));

1322 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1324 
	`»adTok’V®ueAndV®id©e
(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
, 
çžed
, 
fic
, "SEIArObjLabelLangPresentFlag");

1325 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
)

1327 
	`»adTok’V®ue
(
£iAÂoRegiÚ
->
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
, 
çžed
, 
fic
, "SEIArLabelLanguage");

1329 
UIÁ
 
numLab–Upd©es
=0;

1330 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
numLab–Upd©es
, 
çžed
, 
fic
, "SEIArNumLab–Upd©es", 
	`UIÁ
(0), UInt(255));

1331 
£iAÂoRegiÚ
->
m_ªnÙ©edLab–s
.
	`»size
(
numLab–Upd©es
);

1332 autØ
™
=
£iAÂoRegiÚ
->
m_ªnÙ©edLab–s
.
	`begš
(); it!=£iAÂoRegiÚ->m_ªnÙ©edLab–s.
	`’d
(); it++)

1334 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚLab–
 &
¬
=
™
->
£cÚd
;

1335 
	`»adTok’V®ueAndV®id©e
(
™
->
fœ¡
, 
çžed
, 
fic
, "SEIArLab–Idc[c]", 
	`UIÁ
(0), UInt(255));

1336 
boÞ
 
ÿnûlFÏg
;

1337 
	`»adTok’V®ueAndV®id©e
(
ÿnûlFÏg
, 
çžed
, 
fic
, "SEIArLabelCancelFlag[c]");

1338 
¬
.
Ïb–V®id
=!
ÿnûlFÏg
;

1339 ià(
¬
.
Ïb–V®id
)

1341 
	`»adTok’V®ue
(
¬
.
Ïb–
, 
çžed
, 
fic
, "SEIArLabel[c]");

1345 
UIÁ
 
numObjeùUpd©es
=0;

1346 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
numObjeùUpd©es
, 
çžed
, 
fic
, "SEIArNumObjUpd©es", 
	`UIÁ
(0), UInt(255));

1347 
£iAÂoRegiÚ
->
m_ªnÙ©edRegiÚs
.
	`»size
(
numObjeùUpd©es
);

1348 autØ
™
=
£iAÂoRegiÚ
->
m_ªnÙ©edRegiÚs
.
	`begš
(); it!=£iAÂoRegiÚ->m_ªnÙ©edRegiÚs.
	`’d
(); it++)

1350 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
 &
¬
 = 
™
->
£cÚd
;

1351 
	`»adTok’V®ueAndV®id©e
(
™
->
fœ¡
, 
çžed
, 
fic
, "SEIArObjIdx[c]", 
	`UIÁ
(0), UInt(255));

1352 
	`»adTok’V®ueAndV®id©e
(
¬
.
objeùCªûlFÏg
, 
çžed
, 
fic
, "SEIArObjCancelFlag[c]");

1353 
¬
.
objeùLab–V®id
=
çl£
;

1354 
¬
.
boundšgBoxV®id
=
çl£
;

1355 ià(!
¬
.
objeùCªûlFÏg
)

1357 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1359 
	`»adTok’V®ueAndV®id©e
(
¬
.
objeùLab–V®id
, 
çžed
, 
fic
, "SEIArObjLabelUpdateFlag[c]");

1360 ià(
¬
.
objeùLab–V®id
)

1362 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
objLab–Idx
, 
çžed
, 
fic
, "SEIArObjeùLab–Idc[c]", 
	`UIÁ
(0), UInt(255));

1364 
	`»adTok’V®ueAndV®id©e
(
¬
.
boundšgBoxV®id
, 
çžed
, 
fic
, "SEIArBoundBoxUpdateFlag[c]");

1365 ià(
¬
.
boundšgBoxV®id
)

1367 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
boundšgBoxTÝ
, 
çžed
, 
fic
, "SEIArObjTÝ[c]", 
	`UIÁ
(0), UInt(0x7fffffff));

1368 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
boundšgBoxLeá
, 
çžed
, 
fic
, "SEIArObjLeá[c]", 
	`UIÁ
(0), UInt(0x7fffffff));

1369 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
boundšgBoxWidth
, 
çžed
, 
fic
, "SEIArObjWidth[c]", 
	`UIÁ
(0), UInt(0x7fffffff));

1370 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
boundšgBoxHeight
, 
çžed
, 
fic
, "SEIArObjHeight[c]", 
	`UIÁ
(0), UInt(0x7fffffff));

1371 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
)

1373 
	`»adTok’V®ueAndV®id©e
(
¬
.
·¹ŸlObjeùFÏg
, 
çžed
, 
fic
, "SEIArObjPartUpdateFlag[c]");

1375 ià(
£iAÂoRegiÚ
->
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1377 
»adTok’V®ueAndV®id©e
<
UIÁ
>(
¬
.
objeùCÚfid’û
, 
çžed
, 
fic
, "SEIArObjD‘CÚf[c]", 
	`UIÁ
(0), UIÁ(1<<
£iAÂoRegiÚ
->
m_hdr
.
m_objeùCÚfid’ûL’gth
)-1);

1384 
	}
}

1386 
BoÞ
 
	gSEIEncod”
::
	$š™SEIAÂÙ©edRegiÚs
(
SEIAÂÙ©edRegiÚs
* 
SEIAÂoReg
, 
IÁ
 
cu¼POC
)

1388 
	`as£¹
(
m_isIn™Ÿlized
);

1389 
	`as£¹
(
SEIAÂoReg
 !ð
NULL
);

1392 ià(!
m_pcCfg
->
	`g‘AÂÙ©edRegiÚSEIFžeRoÙ
().
	`em±y
())

1394 
BoÞ
 
çžed
 = 
çl£
;

1396 
¡d
::
¡ršg
 
	`AÂoRegiÚSEIFžeW™hPoc
(
m_pcCfg
->
	`g‘AÂÙ©edRegiÚSEIFžeRoÙ
());

1398 
¡d
::
¡ršg¡»am
 
suffix
;

1399 
suffix
 << "_" << 
cu¼POC
 << ".txt";

1400 
AÂoRegiÚSEIFžeW™hPoc
 +ð
suffix
.
	`¡r
();

1402 
¡d
::
if¡»am
 
	`fic
(
AÂoRegiÚSEIFžeW™hPoc
.
	`c_¡r
());

1403 ià(!
fic
.
	`good
(è|| !fic.
	`is_Ý’
())

1405 
¡d
::
û¼
 << "NØAÂÙ©ed RegiÚ SEI…¬am‘” fž" << 
AÂoRegiÚSEIFžeW™hPoc
 << " fÜ POC " << 
cu¼POC
 << std::
’dl
;

1406  
çl£
;

1409 
	`»adAÂÙ©edRegiÚSEI
(
fic
, 
SEIAÂoReg
, 
çžed
);

1410 ià(
çžed
)

1412 
¡d
::
û¼
 << "E¼Ü whž»adšg AÂÙ©ed RegiÚ SEI…¬am‘” fž'" << 
AÂoRegiÚSEIFžeW™hPoc
 << "'" << std::
’dl
;

1413 
	`ex™
(
EXIT_FAILURE
);

1416  
Œue
;

1417 
	}
}

1418 
Void
 
	gSEIEncod”
::
	$š™SEIChromaRe§m¶šgFž‹rHšt
(
SEIChromaRe§m¶šgFž‹rHšt
 *
£iChromaRe§m¶šgFž‹rHšt
, 
IÁ
 
iHÜFž‹rIndex
, IÁ 
iV”Fž‹rIndex
)

1420 
	`as£¹
 (
m_isIn™Ÿlized
);

1421 
	`as£¹
 (
£iChromaRe§m¶šgFž‹rHšt
!=
NULL
);

1423 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”ChromaFž‹rIdc
 = 
iV”Fž‹rIndex
;

1424 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜChromaFž‹rIdc
 = 
iHÜFž‹rIndex
;

1425 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹ršgF›ldProûssšgFÏg
 = 1;

1426 
£iChromaRe§m¶šgFž‹rHšt
->
m_rg‘FÜm©Idc
 = 3;

1427 
£iChromaRe§m¶šgFž‹rHšt
->
m_³rãùRecÚ¡ruùiÚFÏg
 = 
çl£
;

1430 ià(
£iChromaRe§m¶šgFž‹rHšt
->
m_v”ChromaFž‹rIdc
 == 1)

1432 cÚ¡ 
IÁ
 
numV”tiÿlFž‹rs
 = 3;

1433 cÚ¡ 
IÁ
 
v”T­L’gthMšus1
[] = {5,3,3};

1435 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
.
	`»size
(
numV”tiÿlFž‹rs
);

1436 
IÁ
 
i
 = 0; i < 
numV”tiÿlFž‹rs
; i ++)

1438 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[
i
].
	`»size
(
v”T­L’gthMšus1
[i]+1);

1441 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][0] = -3;

1442 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][1] = 13;

1443 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][2] = 31;

1444 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][3] = 23;

1445 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][4] = 3;

1446 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[0][5] = -3;

1448 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[1][0] = -1;

1449 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[1][1] = 25;

1450 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[1][2] = 247;

1451 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[1][3] = -15;

1453 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[2][0] = -20;

1454 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[2][1] = 186;

1455 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[2][2] = 100;

1456 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
[2][3] = -10;

1460 
£iChromaRe§m¶šgFž‹rHšt
->
m_v”Fž‹rCÛff
.
	`»size
(0);

1463 ià(
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜChromaFž‹rIdc
 == 1)

1465 
IÁ
 cÚ¡ 
numHÜizÚlFž‹rs
 = 1;

1466 cÚ¡ 
IÁ
 
hÜT­L’gthMšus1
[] = {3};

1468 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
.
	`»size
(
numHÜizÚlFž‹rs
);

1469 
IÁ
 
i
 = 0; i < 
numHÜizÚlFž‹rs
; i ++)

1471 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
[
i
].
	`»size
(
hÜT­L’gthMšus1
[i]+1);

1473 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
[0][0] = 1;

1474 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
[0][1] = 6;

1475 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
[0][2] = 1;

1479 
£iChromaRe§m¶šgFž‹rHšt
->
m_hÜFž‹rCÛff
.
	`»size
(0);

1481 
	}
}

1483 
Void
 
	gSEIEncod”
::
	$š™SEITimeCode
(
SEITimeCode
 *
£iTimeCode
)

1485 
	`as£¹
 (
m_isIn™Ÿlized
);

1486 
	`as£¹
 (
£iTimeCode
!=
NULL
);

1488 
£iTimeCode
->
numClockTs
 = 
m_pcCfg
->
	`g‘Numb”OfTime£ts
();

1489 
IÁ
 
i
 = 0; i < 
£iTimeCode
->
numClockTs
; i++)

1491 
£iTimeCode
->
timeS‘A¼ay
[
i
] = 
m_pcCfg
->
	`g‘TimeS‘
(i);

1493 
	}
}

1495 
Void
 
	gSEIEncod”
::
	$š™SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
 *
£iAÉT¿nsCh¬aù”i¡ics
)

1497 
	`as£¹
 (
m_isIn™Ÿlized
);

1498 
	`as£¹
 (
£iAÉT¿nsCh¬aù”i¡ics
!=
NULL
);

1500 
£iAÉT¿nsCh¬aù”i¡ics
->
m_´eã¼edT¿nsãrCh¬aù”i¡ics
 = 
m_pcCfg
->
	`g‘SEIP»ã¼edT¿nsãrCh¬aù”i¡ics
();

1501 
	}
}

1503 
Void
 
	gSEIEncod”
::
	$š™SEIG»’M‘ad©aInfo
(
SEIG»’M‘ad©aInfo
 *
£iG»’M‘ad©aInfo
, 
UIÁ
 
u
)

1505 
	`as£¹
 (
m_isIn™Ÿlized
);

1506 
	`as£¹
 (
£iG»’M‘ad©aInfo
!=
NULL
);

1508 
£iG»’M‘ad©aInfo
->
m_g»’M‘ad©aTy³
 = 
m_pcCfg
->
	`g‘SEIG»’M‘ad©aTy³
();

1509 
£iG»’M‘ad©aInfo
->
m_xsdM‘ricTy³
 = 
m_pcCfg
->
	`g‘SEIXSDM‘ricTy³
();

1510 
£iG»’M‘ad©aInfo
->
m_xsdM‘ricV®ue
 = 
u
;

1511 
	}
}

	@source/Lib/TLibEncoder/SEIEncoder.h

34 #´agm¨
Úû


36 #iâdeà
__SEIENCODER__


37 
	#__SEIENCODER__


	)

39 
	~"TLibCommÚ/SEI.h
"

42 
þass
 
	gTEncCfg
;

43 
þass
 
	gTEncTÝ
;

44 
þass
 
	gTEncGOP
;

48 þas 
	cSEIEncod”


50 
	mpublic
:

51 
	$SEIEncod”
()

52 :
	`m_pcCfg
(
NULL
)

53 ,
	`m_pcEncTÝ
(
NULL
)

54 ,
	`m_pcEncGOP
(
NULL
)

55 ,
	`m_Ž0Idx
(0)

56 ,
	`m_¿pIdx
(0)

57 ,
	$m_isIn™Ÿlized
(
çl£
)

59 
vœtu®
 ~
	$SEIEncod”
(){
	}
};

61 
Void
 
	$š™
(
TEncCfg
* 
’cCfg
, 
TEncTÝ
 *
’cTÝ
, 
TEncGOP
 *
’cGOP
)

63 
m_pcCfg
 = 
’cCfg
;

64 
m_pcEncGOP
 = 
’cGOP
;

65 
m_pcEncTÝ
 = 
’cTÝ
;

66 
m_isIn™Ÿlized
 = 
Œue
;

67 
	}
};

70 
Void
 
š™SEIAùiveP¬am‘”S‘s
 (
SEIAùiveP¬am‘”S‘s
 *
£i
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
);

71 
Void
 
š™SEIF¿mePackšg
(
SEIF¿mePackšg
 *
£i
, 
IÁ
 
cu¼PicNum
);

72 
Void
 
š™SEIDi¥ÏyOr›Á©iÚ
(
SEIDi¥ÏyOr›Á©iÚ
 *
£i
);

73 
Void
 
š™SEITÚeM­pšgInfo
(
SEITÚeM­pšgInfo
 *
£i
);

74 
Void
 
š™SEISOPDesütiÚ
(
SEISOPDesütiÚ
 *
£i
, 
TComSliû
 *
¦iû
, 
IÁ
 
picInGOP
, IÁ 
Ï¡Idr
, IÁ 
cu¼GOPSize
);

75 
Void
 
š™SEIBufãršgP”iod
(
SEIBufãršgP”iod
 *
£i
, 
TComSliû
 *
¦iû
);

76 
Void
 
š™SEISÿÏbËNe¡šg
(
SEISÿÏbËNe¡šg
 *
£i
, 
SEIMes§ges
 &
Ã¡edSEIs
);

77 
Void
 
š™SEIRecov”yPošt
(
SEIRecov”yPošt
 *
£i
, 
TComSliû
 *
¦iû
);

78 
Void
 
š™SEISegm’‹dReùF¿mePackšg
(
SEISegm’‹dReùF¿mePackšg
 *
£i
);

79 
Void
 
š™SEITempMÙiÚCÚ¡¿šedTžeS‘s
 (
SEITempMÙiÚCÚ¡¿šedTžeS‘s
 *
£i
, cÚ¡ 
TComPPS
 *
µs
);

80 #ià
MCTS_EXTRACTION


81 
Void
 
š™SEIMCTSExŒaùiÚInfo
(
SEIMCTSExŒaùiÚInfoS‘
 *
£i
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
);

83 
Void
 
š™SEIKÃeFunùiÚInfo
(
SEIKÃeFunùiÚInfo
 *
£i
);

84 
Void
 
š™SEICÚ‹ÁCÞourVÞume
(
SEICÚ‹ÁCÞourVÞume
 *
£i
);

85 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


86 
Void
 
š™SEIShu‰”IÁ”v®Info
(
SEIShu‰”IÁ”v®Info
 *
£i
);

88 #ià
SEI_ENCODER_CONTROL


89 
Void
 
š™SEIFžmG¿šCh¬aù”i¡ics
(
SEIFžmG¿šCh¬aù”i¡ics
 *
£i
);

90 
Void
 
š™SEICÚ‹ÁLightLev–
(
SEICÚ‹ÁLightLev–Info
 *
£i
);

91 
Void
 
š™SEIAmb›ÁV›wšgEnvœÚm’t
(
SEIAmb›ÁV›wšgEnvœÚm’t
 *
£i
);

93 
Void
 
š™SEIE½
(
SEIEquœeùªguÏrProjeùiÚ
 *
£i
);

94 
Void
 
š™SEISph”eRÙ©iÚ
(
SEISph”eRÙ©iÚ
 *
£i
);

95 
Void
 
š™SEIOmniV›wpÜt
(
SEIOmniV›wpÜt
 *
£i
);

96 
Void
 
š™SEICubem­ProjeùiÚ
(
SEICubem­ProjeùiÚ
 *
£i
);

97 
Void
 
š™SEIRegiÚWi£Packšg
(
SEIRegiÚWi£Packšg
 *
£i
);

98 
Void
 
š™SEIFisheyeVideoInfo
(
SEIFisheyeVideoInfo
 *
£i
);

99 
Void
 
š™SEIChromaRe§m¶šgFž‹rHšt
(
SEIChromaRe§m¶šgFž‹rHšt
 *
£i
, 
IÁ
 
iHÜFž‹rIndex
, IÁ 
iV”Fž‹rIndex
);

100 
Void
 
š™SEITimeCode
(
SEITimeCode
 *
£i
);

101 
BoÞ
 
š™SEICÞourRem­pšgInfo
(
SEICÞourRem­pšgInfo
 *
£i
, 
IÁ
 
cu¼POC
);

102 
Void
 
š™SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
 *
£i
);

103 
Void
 
»adTÚeM­pšgInfoSEI
(
¡d
::
i¡»am
 &
fic
, 
SEITÚeM­pšgInfo
 *
£iTÚeM­pšgInfo
 , 
BoÞ
 &
çžed
 );

104 
Void
 
»adChromaRe§m¶šgFž‹rHštSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIChromaRe§m¶šgFž‹rHšt
 *
£iChromaRe§m¶šgFž‹rHšt
, 
BoÞ
 &
çžed
 );

105 
Void
 
»adKÃeFunùiÚInfoSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIKÃeFunùiÚInfo
 *
£iKÃeFunùiÚInfo
, 
BoÞ
 &
çžed
 );

106 
Void
 
»adCÞourRem­SEI
(
¡d
::
i¡»am
 &
fic
, 
SEICÞourRem­pšgInfo
 *
£iCÞÜRem­pšgInfo
, 
BoÞ
 &
çžed
 );

107 
Void
 
»adCÚ‹ÁCÞourVÞumeSEI
(
¡d
::
i¡»am
 &
fic
, 
SEICÚ‹ÁCÞourVÞume
 *
£iCÚ‹ÁCÞourVÞume
, 
BoÞ
 &
çžed
 );

108 
BoÞ
 
š™SEIRegiÚ®Ne¡šg
(
SEIRegiÚ®Ne¡šg
 *
£i
, 
IÁ
 
cu¼POC
);

109 
Void
 
»adRNSEIWšdow
(
¡d
::
i¡»am
 &
fic
, 
RNSEIWšdowVec
::
™”©Ü
 
»giÚI‹r
, 
BoÞ
 &
çžed
 );

110 
BoÞ
 
š™SEIAÂÙ©edRegiÚs
(
SEIAÂÙ©edRegiÚs
 *
£i
, 
IÁ
 
cu¼POC
);

111 
Void
 
»adAÂÙ©edRegiÚSEI
(
¡d
::
i¡»am
 &
fic
, 
SEIAÂÙ©edRegiÚs
 *
£iAÂoRegiÚ
, 
BoÞ
 &
çžed
);

113 
Void
 
š™DecodedPiùu»HashSEI
(
SEIDecodedPiùu»Hash
 *
£i
, 
TComPic
 *
pcPic
, 
¡d
::
¡ršg
 &
rHashSŒšg
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

114 
Void
 
š™TempÜ®Lev–0IndexSEI
(
SEITempÜ®Lev–0Index
 *
£i
, 
TComSliû
 *
¦iû
);

115 
Void
 
š™SEIG»’M‘ad©aInfo
(
SEIG»’M‘ad©aInfo
 *
£i
, 
UIÁ
 
u
);

117 
	g´iv©e
:

118 
TEncCfg
* 
m_pcCfg
;

119 
TEncTÝ
* 
	gm_pcEncTÝ
;

120 
TEncGOP
* 
	gm_pcEncGOP
;

123 
UIÁ
 
	gm_Ž0Idx
;

124 
UIÁ
 
	gm_¿pIdx
;

126 
BoÞ
 
	gm_isIn™Ÿlized
;

	@source/Lib/TLibEncoder/SEIwrite.cpp

34 
	~"TLibCommÚ/TComB™CouÁ”.h
"

35 
	~"TLibCommÚ/TComB™SŒ—m.h
"

36 
	~"TLibCommÚ/SEI.h
"

37 
	~"TLibCommÚ/TComSliû.h
"

38 
	~"TLibCommÚ/TComPicYuv.h
"

39 
	~"SEIwr™e.h
"

44 #ià
ENC_DEC_TRACE


45 
Void
 
	$xT¿ûSEIH—d”
()

47 
	`årštf
Ð
g_hT¿û
, "=========== SEI message ===========\n");

48 
	}
}

50 
Void
 
	$xT¿ûSEIMes§geTy³
(
SEI
::
PaylßdTy³
 
·ylßdTy³
)

52 
	`årštf
Ð
g_hT¿û
, "==========ð% SEI mes§g===========\n", 
SEI
::
	`g‘SEIMes§geSŒšg
(
·ylßdTy³
));

53 
	}
}

56 
Void
 
	gSEIWr™”
::
	$xWr™eSEI·ylßdD©a
(
TComB™If
& 
bs
, cÚ¡ 
SEI
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

58 
£i
.
	`·ylßdTy³
())

60 
SEI
::
BUFFERING_PERIOD
:

61 
	`xWr™eSEIBufãršgP”iod
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIBufãršgP”iod
*>(&
£i
), 
¥s
);

63 
SEI
::
PICTURE_TIMING
:

64 
	`xWr™eSEIPiùu»Timšg
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIPiùu»Timšg
*>(&
£i
), 
¥s
);

66 
SEI
::
PAN_SCAN_RECT
:

67 
	`xWr™eSEIPªSÿnReù
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIPªSÿnReù
*>(&
£i
));

69 
SEI
::
FILLER_PAYLOAD
:

70 
	`xWr™eSEIFžËrPaylßd
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIFžËrPaylßd
*>(&
£i
));

72 
SEI
::
USER_DATA_REGISTERED_ITU_T_T35
:

73 
	`xWr™eSEIU£rD©aRegi¡”ed
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIU£rD©aRegi¡”ed
*>(&
£i
));

75 
SEI
::
USER_DATA_UNREGISTERED
:

76 
	`xWr™eSEIU£rD©aUÄegi¡”ed
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIU£rD©aUÄegi¡”ed
*>(&
£i
));

78 
SEI
::
RECOVERY_POINT
:

79 
	`xWr™eSEIRecov”yPošt
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIRecov”yPošt
*>(&
£i
));

81 
SEI
::
SCENE_INFO
:

82 
	`xWr™eSEISûÃInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEISûÃInfo
*>(&
£i
));

84 
SEI
::
PICTURE_SNAPSHOT
:

85 
	`xWr™eSEIPiùu»SÇpshÙ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIPiùu»SÇpshÙ
*>(&
£i
));

87 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_START
:

88 
	`xWr™eSEIProg»ssiveRefšem’tSegm’tS¹
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tS¹
*>(&
£i
));

90 
SEI
::
PROGRESSIVE_REFINEMENT_SEGMENT_END
:

91 
	`xWr™eSEIProg»ssiveRefšem’tSegm’tEnd
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tEnd
*>(&
£i
));

93 
SEI
::
FILM_GRAIN_CHARACTERISTICS
:

94 
	`xWr™eSEIFžmG¿šCh¬aù”i¡ics
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
*>(&
£i
));

96 
SEI
::
POST_FILTER_HINT
:

97 
	`xWr™eSEIPo¡Fž‹rHšt
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIPo¡Fž‹rHšt
*>(&
£i
), 
¥s
);

99 
SEI
::
TONE_MAPPING_INFO
:

100 
	`xWr™eSEITÚeM­pšgInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEITÚeM­pšgInfo
*>(&
£i
));

102 
SEI
::
FRAME_PACKING
:

103 
	`xWr™eSEIF¿mePackšg
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIF¿mePackšg
*>(&
£i
));

105 
SEI
::
DISPLAY_ORIENTATION
:

106 
	`xWr™eSEIDi¥ÏyOr›Á©iÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIDi¥ÏyOr›Á©iÚ
*>(&
£i
));

108 
SEI
::
GREEN_METADATA
:

109 
	`xWr™eSEIG»’M‘ad©aInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIG»’M‘ad©aInfo
*>(&
£i
));

111 
SEI
::
SOP_DESCRIPTION
:

112 
	`xWr™eSEISOPDesütiÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEISOPDesütiÚ
*>(&
£i
));

114 
SEI
::
ACTIVE_PARAMETER_SETS
:

115 
	`xWr™eSEIAùiveP¬am‘”S‘s
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIAùiveP¬am‘”S‘s
*>(& 
£i
));

117 
SEI
::
DECODING_UNIT_INFO
:

118 
	`xWr™eSEIDecodšgUn™Info
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIDecodšgUn™Info
*>(& 
£i
), 
¥s
);

120 
SEI
::
TEMPORAL_LEVEL0_INDEX
:

121 
	`xWr™eSEITempÜ®Lev–0Index
(*
¡©ic_ÿ¡
<cÚ¡ 
SEITempÜ®Lev–0Index
*>(&
£i
));

123 
SEI
::
DECODED_PICTURE_HASH
:

124 
	`xWr™eSEIDecodedPiùu»Hash
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIDecodedPiùu»Hash
*>(&
£i
));

126 
SEI
::
SCALABLE_NESTING
:

127 
	`xWr™eSEISÿÏbËNe¡šg
(
bs
, *
¡©ic_ÿ¡
<cÚ¡ 
SEISÿÏbËNe¡šg
*>(&
£i
), 
¥s
);

129 
SEI
::
REGION_REFRESH_INFO
:

130 
	`xWr™eSEIRegiÚReäeshInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIRegiÚReäeshInfo
*>(&
£i
));

132 
SEI
::
NO_DISPLAY
:

133 
	`xWr™eSEINoDi¥Ïy
(*
¡©ic_ÿ¡
<cÚ¡ 
SEINoDi¥Ïy
*>(&
£i
));

135 
SEI
::
TIME_CODE
:

136 
	`xWr™eSEITimeCode
(*
¡©ic_ÿ¡
<cÚ¡ 
SEITimeCode
*>(&
£i
));

138 
SEI
::
MASTERING_DISPLAY_COLOUR_VOLUME
:

139 
	`xWr™eSEIMa¡”šgDi¥ÏyCÞourVÞume
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIMa¡”šgDi¥ÏyCÞourVÞume
*>(&
£i
));

141 
SEI
::
SEGM_RECT_FRAME_PACKING
:

142 
	`xWr™eSEISegm’‹dReùF¿mePackšg
(*
¡©ic_ÿ¡
<cÚ¡ 
SEISegm’‹dReùF¿mePackšg
*>(&
£i
));

144 
SEI
::
TEMP_MOTION_CONSTRAINED_TILE_SETS
:

145 
	`xWr™eSEITempMÙiÚCÚ¡¿šedTžeS‘s
(*
¡©ic_ÿ¡
<cÚ¡ 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
*>(&
£i
));

147 #ià
MCTS_EXTRACTION


148 
SEI
::
MCTS_EXTRACTION_INFO_SET
:

149 
	`xWr™eSEIMCTSExŒaùiÚInfoS‘
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIMCTSExŒaùiÚInfoS‘
*>(&
£i
));

152 
SEI
::
CHROMA_RESAMPLING_FILTER_HINT
:

153 
	`xWr™eSEIChromaRe§m¶šgFž‹rHšt
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIChromaRe§m¶šgFž‹rHšt
*>(&
£i
));

155 
SEI
::
KNEE_FUNCTION_INFO
:

156 
	`xWr™eSEIKÃeFunùiÚInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIKÃeFunùiÚInfo
*>(&
£i
));

158 
SEI
::
COLOUR_REMAPPING_INFO
:

159 
	`xWr™eSEICÞourRem­pšgInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEICÞourRem­pšgInfo
*>(&
£i
));

161 
SEI
::
DEINTERLACE_FIELD_IDENTIFICATION
:

162 
	`xWr™eSEIDeš‹¾aûF›ldId’tifiÿtiÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
*>(&
£i
));

164 
SEI
::
CONTENT_LIGHT_LEVEL_INFO
:

165 
	`xWr™eSEICÚ‹ÁLightLev–Info
(*
¡©ic_ÿ¡
<cÚ¡ 
SEICÚ‹ÁLightLev–Info
*>(&
£i
));

167 
SEI
::
DEPENDENT_RAP_INDICATION
:

168 
	`xWr™eSEID•’d’tRAPIndiÿtiÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEID•’d’tRAPIndiÿtiÚ
*>(&
£i
));

170 
SEI
::
CODED_REGION_COMPLETION
:

171 
	`xWr™eSEICodedRegiÚCom¶‘iÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEICodedRegiÚCom¶‘iÚ
*>(&
£i
));

173 
SEI
::
ALTERNATIVE_TRANSFER_CHARACTERISTICS
:

174 
	`xWr™eSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
*>(&
£i
));

176 
SEI
::
AMBIENT_VIEWING_ENVIRONMENT
:

177 
	`xWr™eSEIAmb›ÁV›wšgEnvœÚm’t
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIAmb›ÁV›wšgEnvœÚm’t
*>(&
£i
));

179 
SEI
::
CONTENT_COLOUR_VOLUME
:

180 
	`xWr™eSEICÚ‹ÁCÞourVÞume
(*
¡©ic_ÿ¡
<cÚ¡ 
SEICÚ‹ÁCÞourVÞume
*>(&
£i
));

182 
SEI
::
EQUIRECTANGULAR_PROJECTION
:

183 
	`xWr™eSEIEquœeùªguÏrProjeùiÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIEquœeùªguÏrProjeùiÚ
*>(&
£i
));

185 
SEI
::
SPHERE_ROTATION
:

186 
	`xWr™eSEISph”eRÙ©iÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEISph”eRÙ©iÚ
*>(&
£i
));

188 
SEI
::
OMNI_VIEWPORT
:

189 
	`xWr™eSEIOmniV›wpÜt
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIOmniV›wpÜt
*>(&
£i
));

191 
SEI
::
CUBEMAP_PROJECTION
:

192 
	`xWr™eSEICubem­ProjeùiÚ
(*
¡©ic_ÿ¡
<cÚ¡ 
SEICubem­ProjeùiÚ
*>(&
£i
));

194 
SEI
::
REGION_WISE_PACKING
:

195 
	`xWr™eSEIRegiÚWi£Packšg
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIRegiÚWi£Packšg
*>(&
£i
));

197 
SEI
::
FISHEYE_VIDEO_INFO
:

198 
	`xWr™eSEIFisheyeVideoInfo
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIFisheyeVideoInfo
*>(&
£i
));

200 
SEI
::
REGIONAL_NESTING
:

201 
	`xWr™eSEIRegiÚ®Ne¡šg
(
bs
, *
¡©ic_ÿ¡
<cÚ¡ 
SEIRegiÚ®Ne¡šg
*>(&
£i
), 
¥s
);

204 
SEI
::
ANNOTATED_REGIONS
:

205 
	`xWr™eSEIAÂÙ©edRegiÚs
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIAÂÙ©edRegiÚs
*>(&
£i
), 
¥s
);

208 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


209 
SEI
::
SHUTTER_INTERVAL_INFO
:

210 
	`xWr™eSEIShu‰”IÁ”v®
(*
¡©ic_ÿ¡
<cÚ¡ 
SEIShu‰”IÁ”v®Info
*>(&
£i
));

214 
	`as£¹
(!"Tryingo write unhandled SEI message");

217 
	`xWr™eBy‹Align
();

218 
	}
}

223 
Void
 
	gSEIWr™”
::
	$wr™eSEImes§ges
(
TComB™If
& 
bs
, cÚ¡ 
SEIMes§ges
 &
£iLi¡
, cÚ¡ 
TComSPS
 *
¥s
, 
BoÞ
 
isNe¡ed
)

225 #ià
ENC_DEC_TRACE


226 ià(
g_HLST¿ûEÇbË
)

227 
	`xT¿ûSEIH—d”
();

230 
TComB™CouÁ”
 
bs_couÁ
;

232 
SEIMes§ges
::
cÚ¡_™”©Ü
 
£i
=
£iLi¡
.
	`begš
(); sei!=£iLi¡.
	`’d
(); sei++)

234 
	`xWr™eSEImes§ge
(
bs
, *
£i
, 
¥s
);

236 ià(!
isNe¡ed
)

238 
	`xWr™eRb¥T¿žšgB™s
();

240 
	}
}

242 
Void
 
	gSEIWr™”
::
	$xWr™eSEImes§ge
(
TComB™If
& 
bs
, cÚ¡ 
SEI
 *
£i
, cÚ¡ 
TComSPS
 *
¥s
)

244 #ià
ENC_DEC_TRACE


245 ià(
g_HLST¿ûEÇbË
)

246 
	`xT¿ûSEIH—d”
();

249 
TComB™CouÁ”
 
bs_couÁ
;

253 
bs_couÁ
.
	`»£tB™s
();

254 
	`£tB™¡»am
(&
bs_couÁ
);

256 #ià
ENC_DEC_TRACE


257 
BoÞ
 
ŒaûEÇbË
 = 
g_HLST¿ûEÇbË
;

258 
g_HLST¿ûEÇbË
 = 
çl£
;

260 
	`xWr™eSEI·ylßdD©a
(
bs_couÁ
, *
£i
, 
¥s
);

261 #ià
ENC_DEC_TRACE


262 
g_HLST¿ûEÇbË
 = 
ŒaûEÇbË
;

264 
UIÁ
 
·ylßd_d©a_num_b™s
 = 
bs_couÁ
.
	`g‘Numb”OfWr™‹nB™s
();

265 
	`as£¹
(0 =ð
·ylßd_d©a_num_b™s
 % 8);

267 
	`£tB™¡»am
(&
bs
);

268 
UIÁ
 
·ylßdTy³
 = 
£i
->
	`·ylßdTy³
();

269 ; 
·ylßdTy³
 >= 0xff;…ayloadType -= 0xff)

271 
	`WRITE_CODE
(0xff, 8, "payload_type");

273 
	`WRITE_CODE
(
·ylßdTy³
, 8, "payload_type");

275 
UIÁ
 
·ylßdSize
 = 
·ylßd_d©a_num_b™s
/8;

276 ; 
·ylßdSize
 >= 0xff;…ayloadSize -= 0xff)

278 
	`WRITE_CODE
(0xff, 8, "payload_size");

280 
	`WRITE_CODE
(
·ylßdSize
, 8, "payload_size");

283 #ià
ENC_DEC_TRACE


284 ià(
g_HLST¿ûEÇbË
)

285 #ià
MCTS_EXTRACTION


286 
	`xT¿ûSEIMes§geTy³
(
£i
->
	`·ylßdTy³
());

293 
	`xWr™eSEI·ylßdD©a
(
bs
, *
£i
, 
¥s
);

294 
	}
}

296 
Void
 
	gSEIWr™”
::
	$xWr™eSEIBufãršgP”iod
(cÚ¡ 
SEIBufãršgP”iod
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

298 
IÁ
 
i
, 
ÇlOrVþ
;

299 cÚ¡ 
TComVUI
 *
vui
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

300 cÚ¡ 
TComHRD
 *
hrd
 = 
vui
->
	`g‘HrdP¬am‘”s
();

302 
	`WRITE_UVLC
Ð
£i
.
m_bpSeqP¬am‘”S‘Id
, "bp_seq_parameter_set_id" );

303 ifÐ!
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

305 
	`WRITE_FLAG
Ð
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
, "irap_cpb_params_present_flag" );

307 ifÐ
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
 )

309 
	`WRITE_CODE
Ð
£i
.
m_ýbD–ayOff£t
, 
hrd
->
	`g‘CpbRemov®D–ayL’gthMšus1
() + 1, "cpb_delay_offset" );

310 
	`WRITE_CODE
Ð
£i
.
m_dpbD–ayOff£t
, 
hrd
->
	`g‘DpbOuutD–ayL’gthMšus1
() + 1, "dpb_delay_offset" );

312 
	`WRITE_FLAG
Ð
£i
.
m_cÚÿ‹ÇtiÚFÏg
, "concatenation_flag");

313 
	`WRITE_CODE
Ð
£i
.
m_auCpbRemov®D–ayD–
 - 1, ( 
hrd
->
	`g‘CpbRemov®D–ayL’gthMšus1
() + 1 ), "au_cpb_removal_delay_delta_minus1" );

314  
ÇlOrVþ
 = 0;‚alOrVcl < 2;‚alOrVcl ++ )

316 ifÐÐÐ
ÇlOrVþ
 =ð0 ) && ( 
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() ) ) ||

317 ÐÐ
ÇlOrVþ
 =ð1 ) && ( 
hrd
->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) )

319  
i
 = 0; i < ( 
hrd
->
	`g‘CpbCÁMšus1
( 0 ) + 1 ); i ++ )

321 
	`WRITE_CODE
Ð
£i
.
m_š™ŸlCpbRemov®D–ay
[
i
][
ÇlOrVþ
],Ð
hrd
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
() + 1 ) , "initial_cpb_removal_delay" );

322 
	`WRITE_CODE
Ð
£i
.
m_š™ŸlCpbRemov®D–ayOff£t
[
i
][
ÇlOrVþ
],Ð
hrd
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
() + 1 ), "initial_cpb_removal_delay_offset" );

323 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
(è|| 
£i
.
m_¿pCpbP¬amsP»£ÁFÏg
 )

325 
	`WRITE_CODE
Ð
£i
.
m_š™ŸlAÉCpbRemov®D–ay
[
i
][
ÇlOrVþ
], ( 
hrd
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
() + 1 ) , "initial_alt_cpb_removal_delay" );

326 
	`WRITE_CODE
Ð
£i
.
m_š™ŸlAÉCpbRemov®D–ayOff£t
[
i
][
ÇlOrVþ
], ( 
hrd
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
() + 1 ),"initial_alt_cpb_removal_delay_offset" );

331 
	}
}

334 
Void
 
	gSEIWr™”
::
	$xWr™eSEIPiùu»Timšg
(cÚ¡ 
SEIPiùu»Timšg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

336 
IÁ
 
i
;

337 cÚ¡ 
TComVUI
 *
vui
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

338 cÚ¡ 
TComHRD
 *
hrd
 = 
vui
->
	`g‘HrdP¬am‘”s
();

340 ifÐ
vui
->
	`g‘F¿meF›ldInfoP»£ÁFÏg
() )

342 
	`WRITE_CODE
Ð
£i
.
m_picSŒuù
, 4, "pic_struct" );

343 
	`WRITE_CODE
Ð
£i
.
m_sourûSÿnTy³
, 2, "source_scan_type" );

344 
	`WRITE_FLAG
Ð
£i
.
m_du¶iÿ‹FÏg
 ? 1 : 0, "duplicate_flag" );

347 ifÐ
hrd
->
	`g‘CpbDpbD–aysP»£ÁFÏg
() )

349 
	`WRITE_CODE
Ð
£i
.
m_auCpbRemov®D–ay
 - 1, ( 
hrd
->
	`g‘CpbRemov®D–ayL’gthMšus1
() + 1 ), "au_cpb_removal_delay_minus1" );

350 
	`WRITE_CODE
Ð
£i
.
m_picDpbOuutD–ay
, ( 
hrd
->
	`g‘DpbOuutD–ayL’gthMšus1
() + 1 ), "pic_dpb_output_delay" );

351 if(
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
())

353 
	`WRITE_CODE
(
£i
.
m_picDpbOuutDuD–ay
, 
hrd
->
	`g‘DpbOuutD–ayDuL’gthMšus1
()+1, "pic_dpb_output_du_delay" );

355 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
(è&& hrd->
	`g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
() )

357 
	`WRITE_UVLC
Ð
£i
.
m_numDecodšgUn™sMšus1
, "num_decoding_units_minus1" );

358 
	`WRITE_FLAG
Ð
£i
.
m_duCommÚCpbRemov®D–ayFÏg
, "du_common_cpb_removal_delay_flag" );

359 ifÐ
£i
.
m_duCommÚCpbRemov®D–ayFÏg
 )

361 
	`WRITE_CODE
Ð
£i
.
m_duCommÚCpbRemov®D–ayMšus1
, ( 
hrd
->
	`g‘DuCpbRemov®D–ayL’gthMšus1
() + 1 ), "du_common_cpb_removal_delay_minus1" );

363  
i
 = 0; i <ð
£i
.
m_numDecodšgUn™sMšus1
; i ++ )

365 
	`WRITE_UVLC
Ð
£i
.
m_numN®usInDuMšus1
[ 
i
 ], "num_nalus_in_du_minus1");

366 ifÐÐ!
£i
.
m_duCommÚCpbRemov®D–ayFÏg
 ) && ( 
i
 < sei.
m_numDecodšgUn™sMšus1
 ) )

368 
	`WRITE_CODE
Ð
£i
.
m_duCpbRemov®D–ayMšus1
[ 
i
 ], ( 
hrd
->
	`g‘DuCpbRemov®D–ayL’gthMšus1
() + 1 ), "du_cpb_removal_delay_minus1" );

373 
	}
}

376 
Void
 
	gSEIWr™”
::
	$xWr™eSEIPªSÿnReù
(cÚ¡ 
SEIPªSÿnReù
 &
£i
)

378 
	`WRITE_UVLC
Ð
£i
.
m_·nSÿnReùId
, "pan_scan_rect_id" );

379 cÚ¡ 
UIÁ
 
numRegiÚs
 = (UIÁè
£i
.
m_·nSÿnReùRegiÚs
.
	`size
();

380 iàÐ!
£i
.
m_·nSÿnReùCªûlFÏg
 && 
numRegiÚs
>0 )

382 
	`WRITE_FLAG
Ð
£i
.
m_·nSÿnReùCªûlFÏg
, "pan_scan_rect_cancel_flag" );

383 
	`WRITE_UVLC
Ð
numRegiÚs
 - 1, "pan_scan_cnt_minus1" );

384 
UIÁ
 
»giÚ
=0;„egiÚ<
numRegiÚs
;„egion++)

386 cÚ¡ 
SEIPªSÿnReù
::
PªSÿnReù
 &
»ù
=
£i
.
m_·nSÿnReùRegiÚs
[
»giÚ
];

387 
	`WRITE_SVLC
Ð
»ù
.
ËáOff£t
, "pan_scan_rect_left_offset[i]" );

388 
	`WRITE_SVLC
Ð
»ù
.
rightOff£t
, "pan_scan_rect_rioht_offset[i]" );

389 
	`WRITE_SVLC
Ð
»ù
.
tÝOff£t
, "pan_scan_rect_top_offset[i]" );

390 
	`WRITE_SVLC
Ð
»ù
.
bÙtomOff£t
, "pan_scan_rect_bottom_offset[i]" );

392 
	`WRITE_FLAG
Ð
£i
.
m_·nSÿnReùP”si¡’ûFÏg
, "pan_scan_rect_persistence_flag" );

394 
	}
}

397 
Void
 
	gSEIWr™”
::
	$xWr™eSEIFžËrPaylßd
(cÚ¡ 
SEIFžËrPaylßd
 &
£i
)

399 
UIÁ
 
k
=0; k<
£i
.
m_numFžËrFFBy‹s
; k++)

401 
	`WRITE_CODE
( 0xff, 8, "ff_byte" );

403 
	}
}

406 
Void
 
	gSEIWr™”
::
	$xWr™eSEIU£rD©aRegi¡”ed
(cÚ¡ 
SEIU£rD©aRegi¡”ed
 &
£i
)

408 
	`WRITE_CODE
Ð(
£i
.
m_™uCouÁryCode
>255) ? 0xff : sei.m_ituCountryCode, 8, "itu_t_t35_country_code" );

409 ià(
£i
.
m_™uCouÁryCode
>=255)

411 
	`as£¹
(
£i
.
m_™uCouÁryCode
 < 255+256);

412 
	`WRITE_CODE
Ð
£i
.
m_™uCouÁryCode
-255, 8, "itu_t_t35_country_code_extension_byte" );

414 
UIÁ
 
i
=0; i<
£i
.
m_u£rD©a
.
	`size
(); i++)

416 
	`WRITE_CODE
Ð
£i
.
m_u£rD©a
[
i
], 8, "itu_t_t35_payload_byte" );

418 
	}
}

421 
Void
 
	gSEIWr™”
::
	$xWr™eSEIU£rD©aUÄegi¡”ed
(cÚ¡ 
SEIU£rD©aUÄegi¡”ed
 &
£i
)

423 
UIÁ
 
i
 = 0; i < 
ISO_IEC_11578_LEN
; i++)

425 
	`WRITE_CODE
(
£i
.
m_uuid_iso_›c_11578
[
i
], 8 , "sei.uuid_iso_iec_11578[i]");

428 
¡d
::
size_t
 
i
 = 0; i < 
£i
.
m_u£rD©a
.
	`size
(); i++)

430 
	`WRITE_CODE
(
£i
.
m_u£rD©a
[
i
], 8 , "user_data");

432 
	}
}

435 
Void
 
	gSEIWr™”
::
	$xWr™eSEIRecov”yPošt
(cÚ¡ 
SEIRecov”yPošt
& 
£i
)

437 
	`WRITE_SVLC
Ð
£i
.
m_»cov”yPocCÁ
, "recovery_poc_cnt" );

438 
	`WRITE_FLAG
Ð
£i
.
m_exaùM©chšgFÏg
, "exact_matching_flag" );

439 
	`WRITE_FLAG
Ð
£i
.
m_brok’LškFÏg
, "broken_link_flag" );

440 
	}
}

443 
Void
 
	gSEIWr™”
::
	$xWr™eSEISûÃInfo
(cÚ¡ 
SEISûÃInfo
 &
£i
)

445 
	`WRITE_FLAG
Ð
£i
.
m_bSûÃInfoP»£ÁFÏg
, "scene_info_present_flag" );

446 ià(
£i
.
m_bSûÃInfoP»£ÁFÏg
)

448 
	`WRITE_FLAG
Ð
£i
.
m_bP»vSûÃIdV®idFÏg
, "prev_scene_id_valid_flag" );

449 
	`WRITE_UVLC
Ð
£i
.
m_sûÃId
, "scene_id" );

450 
	`WRITE_UVLC
Ð
£i
.
m_sûÃT¿ns™iÚTy³
, "scene_transition_type" );

451 ià(
£i
.
m_sûÃT¿ns™iÚTy³
 > 3)

453 
	`WRITE_UVLC
Ð
£i
.
m_£cÚdSûÃId
, "second_scene_id" );

456 
	}
}

459 
Void
 
	gSEIWr™”
::
	$xWr™eSEIPiùu»SÇpshÙ
(cÚ¡ 
SEIPiùu»SÇpshÙ
 &
£i
)

461 
	`WRITE_UVLC
Ð
£i
.
m_¢­shÙId
, "snapshot_id" );

462 
	}
}

465 
Void
 
	gSEIWr™”
::
	$xWr™eSEIProg»ssiveRefšem’tSegm’tS¹
(cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tS¹
 &
£i
)

467 
	`WRITE_UVLC
Ð
£i
.
m_´og»ssiveRefšem’tId
, "progressive_refinement_id" );

468 
	`WRITE_UVLC
Ð
£i
.
m_picOrd”CÁD–
, "pic_order_cnt_delta" );

469 
	}
}

472 
Void
 
	gSEIWr™”
::
	$xWr™eSEIProg»ssiveRefšem’tSegm’tEnd
(cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tEnd
 &
£i
)

474 
	`WRITE_UVLC
Ð
£i
.
m_´og»ssiveRefšem’tId
, "progressive_refinement_id" );

475 
	}
}

478 
Void
 
	gSEIWr™”
::
	$xWr™eSEIFžmG¿šCh¬aù”i¡ics
(cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
 &
£i
)

480 
	`WRITE_FLAG
Ð
£i
.
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
, "film_grain_characteristics_cancel_flag" );

481 ià(!
£i
.
m_fžmG¿šCh¬aù”i¡icsCªûlFÏg
)

483 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šMod–Id
, 2, "film_grain_model_id" );

484 
	`WRITE_FLAG
Ð
£i
.
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
, "separate_colour_description_present_flag" );

485 ià(
£i
.
m_£·¿‹CÞourDesütiÚP»£ÁFÏg
)

487 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šB™D•thLumaMšus8
, 3, "film_grain_bit_depth_luma_minus8" );

488 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šB™D•thChromaMšus8
, 3, "film_grain_bit_depth_chroma_minus8" );

489 
	`WRITE_FLAG
Ð
£i
.
m_fžmG¿šFuÎRªgeFÏg
, "film_grain_full_range_flag" );

490 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šCÞourPrim¬›s
, 8, "film_grain_colour_primaries" );

491 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šT¿nsãrCh¬aù”i¡ics
, 8, "film_grain_transfer_characteristics" );

492 
	`WRITE_CODE
Ð
£i
.
m_fžmG¿šM©rixCÛffs
, 8, "film_grain_matrix_coeffs" );

494 
	`WRITE_CODE
Ð
£i
.
m_bËndšgModeId
, 2, "blending_mode_id" );

495 
	`WRITE_CODE
Ð
£i
.
m_log2SÿËFaùÜ
, 4, "log2_scale_factor" );

496 
IÁ
 
c
=0; c<3; c++)

498 cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
::
CompMod–
 &
cm
=
£i
.
m_compMod–
[
c
];

499 cÚ¡ 
UIÁ
 
numIÁ’s™yIÁ”v®s
 = (UIÁè
cm
.
š‹ns™yV®ues
.
	`size
();

500 cÚ¡ 
UIÁ
 
numMod–V®ues
 = 
cm
.numModelValues;

501 
	`WRITE_FLAG
Ð
£i
.
m_compMod–
[
c
].
bP»£ÁFÏg
 && 
numIÁ’s™yIÁ”v®s
>0 && 
numMod–V®ues
>0, "comp_model_present_flag[c]" );

503 
IÁ
 
c
=0; c<3; c++)

505 cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
::
CompMod–
 &
cm
=
£i
.
m_compMod–
[
c
];

506 cÚ¡ 
UIÁ
 
numIÁ’s™yIÁ”v®s
 = (UIÁè
cm
.
š‹ns™yV®ues
.
	`size
();

507 cÚ¡ 
UIÁ
 
numMod–V®ues
 = 
cm
.numModelValues;

508 ià(
cm
.
bP»£ÁFÏg
 && 
numIÁ’s™yIÁ”v®s
>0 && 
numMod–V®ues
>0)

510 
	`as£¹
(
numIÁ’s™yIÁ”v®s
<=256);

511 
	`as£¹
(
numMod–V®ues
<=8);

512 
	`WRITE_CODE
Ð
numIÁ’s™yIÁ”v®s
-1, 8, "num_intensity_intervals_minus1[c]");

513 
	`WRITE_CODE
Ð
numMod–V®ues
-1, 3, "num_model_values_minus1[c]");

514 
UIÁ
 
š‹rv®
=0; iÁ”v®<
numIÁ’s™yIÁ”v®s
; interval++)

516 cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
::
CompMod–IÁ’s™yV®ues
 &
cmiv
=
cm
.
š‹ns™yV®ues
[
š‹rv®
];

517 
	`WRITE_CODE
Ð
cmiv
.
š‹ns™yIÁ”v®Low”Bound
, 8, "intensity_interval_lower_bound[c][i]" );

518 
	`WRITE_CODE
Ð
cmiv
.
š‹ns™yIÁ”v®Uµ”Bound
, 8, "intensity_interval_upper_bound[c][i]" );

519 
	`as£¹
(
cmiv
.
compMod–V®ue
.
	`size
(è=ð
numMod–V®ues
);

520 
UIÁ
 
j
=0; j<
cm
.
numMod–V®ues
; j++)

522 
	`WRITE_SVLC
(
cmiv
.
compMod–V®ue
[
j
], "comp_model_value[c][i]" );

527 
	`WRITE_FLAG
Ð
£i
.
m_fžmG¿šCh¬aù”i¡icsP”si¡’ûFÏg
, "film_grain_characteristics_persistence_flag" );

529 
	}
}

532 
Void
 
	gSEIWr™”
::
	$xWr™eSEIPo¡Fž‹rHšt
(cÚ¡ 
SEIPo¡Fž‹rHšt
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

534 
	`WRITE_UVLC
Ð
£i
.
m_fž‹rHštSizeY
, "filter_hint_size_y" );

535 
	`WRITE_UVLC
Ð
£i
.
m_fž‹rHštSizeX
, "filter_hint_size_x" );

536 
	`WRITE_CODE
Ð
£i
.
m_fž‹rHštTy³
, 2, "filter_hint_type" );

537 
	`as£¹
Ð(
¥s
->
	`g‘ChromaFÜm©Idc
(è=ð
CHROMA_400
è=ð
£i
.
m_bIsMÚochrome
 );

538 cÚ¡ 
UIÁ
 
numChromaChªÃls
 = 
£i
.
m_bIsMÚochrome
 ? 1:3;

539 
	`as£¹
Ð
£i
.
m_fž‹rHštV®ues
.
	`size
(è=ð
numChromaChªÃls
*£i.
m_fž‹rHštSizeX
*£i.
m_fž‹rHštSizeY
 );

540 
¡d
::
size_t
 
i
=0; i<
£i
.
m_fž‹rHštV®ues
.
	`size
(); i++)

542 
	`WRITE_SVLC
Ð
£i
.
m_fž‹rHštV®ues
[
i
], "filter_hint_value[][][]" );

544 
	}
}

547 
Void
 
	gSEIWr™”
::
	$xWr™eSEITÚeM­pšgInfo
(cÚ¡ 
SEITÚeM­pšgInfo
& 
£i
)

549 
IÁ
 
i
;

550 
	`WRITE_UVLC
Ð
£i
.
m_tÚeM­Id
, "tone_map_id" );

551 
	`WRITE_FLAG
Ð
£i
.
m_tÚeM­CªûlFÏg
, "tone_map_cancel_flag" );

552 ifÐ!
£i
.
m_tÚeM­CªûlFÏg
 )

554 
	`WRITE_FLAG
Ð
£i
.
m_tÚeM­P”si¡’ûFÏg
, "tone_map_persistence_flag" );

555 
	`WRITE_CODE
Ð
£i
.
m_codedD©aB™D•th
, 8, "coded_data_bit_depth" );

556 
	`WRITE_CODE
Ð
£i
.
m_rg‘B™D•th
, 8, "target_bit_depth" );

557 
	`WRITE_UVLC
Ð
£i
.
m_mod–Id
, "model_id" );

558 
£i
.
m_mod–Id
)

562 
	`WRITE_CODE
Ð
£i
.
m_mšV®ue
, 32, "min_value" );

563 
	`WRITE_CODE
Ð
£i
.
m_maxV®ue
, 32, "max_value" );

568 
	`WRITE_CODE
Ð
£i
.
m_sigmoidMidpošt
, 32, "sigmoid_midpoint" );

569 
	`WRITE_CODE
Ð
£i
.
m_sigmoidWidth
, 32, "sigmoid_width" );

574 
UIÁ
 
num
 = 1u << 
£i
.
m_rg‘B™D•th
;

575 
i
 = 0; i < 
num
; i++)

577 
	`WRITE_CODE
Ð
£i
.
m_¡¬tOfCodedIÁ”v®
[
i
], (Ð£i.
m_codedD©aB™D•th
 + 7 ) >> 3 ) << 3, "start_of_coded_interval" );

583 
	`WRITE_CODE
Ð
£i
.
m_numPivÙs
, 16, "num_pivots" );

584 
i
 = 0; i < 
£i
.
m_numPivÙs
; i++ )

586 
	`WRITE_CODE
Ð
£i
.
m_codedPivÙV®ue
[
i
], (Ð£i.
m_codedD©aB™D•th
 + 7 ) >> 3 ) << 3, "coded_pivot_value" );

587 
	`WRITE_CODE
Ð
£i
.
m_rg‘PivÙV®ue
[
i
], (Ð£i.
m_rg‘B™D•th
 + 7 ) >> 3 ) << 3, "target_pivot_value");

593 
	`WRITE_CODE
Ð
£i
.
m_ÿm”aIsoS³edIdc
, 8, "camera_iso_speed_idc" );

594 ifÐ
£i
.
m_ÿm”aIsoS³edIdc
 == 255)

596 
	`WRITE_CODE
Ð
£i
.
m_ÿm”aIsoS³edV®ue
, 32, "camera_iso_speed_value" );

598 
	`WRITE_CODE
Ð
£i
.
m_exposu»IndexIdc
, 8, "exposure_index_idc" );

599 ifÐ
£i
.
m_exposu»IndexIdc
 == 255)

601 
	`WRITE_CODE
Ð
£i
.
m_exposu»IndexV®ue
, 32, "exposure_index_value" );

603 
	`WRITE_FLAG
Ð
£i
.
m_exposu»Com³n§tiÚV®ueSignFÏg
, "exposure_compensation_value_sign_flag" );

604 
	`WRITE_CODE
Ð
£i
.
m_exposu»Com³n§tiÚV®ueNum”©Ü
, 16, "exposure_compensation_value_numerator" );

605 
	`WRITE_CODE
Ð
£i
.
m_exposu»Com³n§tiÚV®ueD’omIdc
, 16, "exposure_compensation_value_denom_idc" );

606 
	`WRITE_CODE
Ð
£i
.
m_»fSü“nLumšªûWh™e
, 32, "ref_screen_luminance_white" );

607 
	`WRITE_CODE
Ð
£i
.
m_ex‹ndedRªgeWh™eLev–
, 32, "extended_range_white_level" );

608 
	`WRITE_CODE
Ð
£i
.
m_nomš®BÏckLev–LumaCodeV®ue
, 16, "nominal_black_level_luma_code_value" );

609 
	`WRITE_CODE
Ð
£i
.
m_nomš®Wh™eLev–LumaCodeV®ue
, 16, "nominal_white_level_luma_code_value" );

610 
	`WRITE_CODE
Ð
£i
.
m_ex‹ndedWh™eLev–LumaCodeV®ue
, 16, "extended_white_level_luma_code_value" );

615 
	`as£¹
(!"Undefined SEIToneMapModelId");

620 
	}
}

623 
Void
 
	gSEIWr™”
::
	$xWr™eSEIF¿mePackšg
(cÚ¡ 
SEIF¿mePackšg
& 
£i
)

625 
	`WRITE_UVLC
Ð
£i
.
m_¬¿ngem’tId
, "frame_packing_arrangement_id" );

626 
	`WRITE_FLAG
Ð
£i
.
m_¬¿ngem’tCªûlFÏg
, "frame_packing_arrangement_cancel_flag" );

628 ifÐ
£i
.
m_¬¿ngem’tCªûlFÏg
 == 0 )

630 
	`WRITE_CODE
Ð
£i
.
m_¬¿ngem’tTy³
, 7, "frame_packing_arrangement_type" );

632 
	`WRITE_FLAG
Ð
£i
.
m_qušcunxSam¶šgFÏg
, "quincunx_sampling_flag" );

633 
	`WRITE_CODE
Ð
£i
.
m_cÚ‹ÁIÁ”´‘©iÚTy³
, 6, "content_interpretation_type" );

634 
	`WRITE_FLAG
Ð
£i
.
m_¥©ŸlFlpšgFÏg
, "spatial_flipping_flag" );

635 
	`WRITE_FLAG
Ð
£i
.
m_äame0Fl³dFÏg
, "frame0_flipped_flag" );

636 
	`WRITE_FLAG
Ð
£i
.
m_f›ldV›wsFÏg
, "field_views_flag" );

637 
	`WRITE_FLAG
Ð
£i
.
m_cu¼’tF¿meIsF¿me0FÏg
, "current_frame_is_frame0_flag" );

639 
	`WRITE_FLAG
Ð
£i
.
m_äame0S–fCÚšedFÏg
, "frame0_self_contained_flag" );

640 
	`WRITE_FLAG
Ð
£i
.
m_äame1S–fCÚšedFÏg
, "frame1_self_contained_flag" );

642 if(
£i
.
m_qušcunxSam¶šgFÏg
 =ð0 && sei.
m_¬¿ngem’tTy³
 != 5)

644 
	`WRITE_CODE
Ð
£i
.
m_äame0GridPos™iÚX
, 4, "frame0_grid_position_x" );

645 
	`WRITE_CODE
Ð
£i
.
m_äame0GridPos™iÚY
, 4, "frame0_grid_position_y" );

646 
	`WRITE_CODE
Ð
£i
.
m_äame1GridPos™iÚX
, 4, "frame1_grid_position_x" );

647 
	`WRITE_CODE
Ð
£i
.
m_äame1GridPos™iÚY
, 4, "frame1_grid_position_y" );

650 
	`WRITE_CODE
Ð
£i
.
m_¬¿ngem’tRe£rvedBy‹
, 8, "frame_packing_arrangement_reserved_byte" );

651 
	`WRITE_FLAG
Ð
£i
.
m_¬¿ngem’tP”si¡’ûFÏg
, "frame_packing_arrangement_persistence_flag" );

654 
	`WRITE_FLAG
Ð
£i
.
m_up§m¶edA¥eùR©io
, "upsampled_aspect_ratio" );

655 
	}
}

658 
Void
 
	gSEIWr™”
::
	$xWr™eSEIDi¥ÏyOr›Á©iÚ
(cÚ¡ 
SEIDi¥ÏyOr›Á©iÚ
 &
£i
)

660 
	`WRITE_FLAG
Ð
£i
.
ÿnûlFÏg
, "display_orientation_cancel_flag" );

661 ifÐ!
£i
.
ÿnûlFÏg
 )

663 
	`WRITE_FLAG
Ð
£i
.
hÜFl
, "hor_flip" );

664 
	`WRITE_FLAG
Ð
£i
.
v”Fl
, "ver_flip" );

665 
	`WRITE_CODE
Ð
£i
.
ªtiþockwi£RÙ©iÚ
, 16, "anticlockwise_rotation" );

666 
	`WRITE_FLAG
Ð
£i
.
³rsi¡’ûFÏg
, "display_orientation_persistence_flag" );

668 
	}
}

671 
Void
 
	gSEIWr™”
::
	$xWr™eSEIG»’M‘ad©aInfo
(cÚ¡ 
SEIG»’M‘ad©aInfo
& 
£i
)

673 
	`WRITE_CODE
(
£i
.
m_g»’M‘ad©aTy³
, 8, "green_metadata_type");

675 
	`WRITE_CODE
(
£i
.
m_xsdM‘ricTy³
, 8, "xsd_metric_type");

676 
	`WRITE_CODE
(
£i
.
m_xsdM‘ricV®ue
, 16, "xsd_metric_value");

677 
	}
}

680 
Void
 
	gSEIWr™”
::
	$xWr™eSEISOPDesütiÚ
(cÚ¡ 
SEISOPDesütiÚ
& 
£i
)

682 
	`WRITE_UVLC
Ð
£i
.
m_sÝSeqP¬am‘”S‘Id
, "sop_seq_parameter_set_id" );

683 
	`WRITE_UVLC
Ð
£i
.
m_numPicsInSÝMšus1
, "num_pics_in_sop_minus1" );

684 
UIÁ
 
i
 = 0; i <ð
£i
.
m_numPicsInSÝMšus1
; i++)

686 
	`WRITE_CODE
Ð
£i
.
m_sÝDescVþN®uTy³
[
i
], 6, "sop_desc_vcl_nalu_type" );

687 
	`WRITE_CODE
Ð
£i
.
m_sÝDescTempÜ®Id
[
i
], 3, "sop_desc_temporal_id" );

688 ià(
£i
.
m_sÝDescVþN®uTy³
[
i
] !ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 && sei.m_sÝDescVþN®uTy³[i] !ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
)

690 
	`WRITE_UVLC
Ð
£i
.
m_sÝDescStRpsIdx
[
i
], "sop_desc_st_rps_idx" );

692 ià(
i
 > 0)

694 
	`WRITE_SVLC
Ð
£i
.
m_sÝDescPocD–
[
i
], "sop_desc_poc_delta" );

697 
	}
}

700 
Void
 
	gSEIWr™”
::
	$xWr™eSEIAùiveP¬am‘”S‘s
(cÚ¡ 
SEIAùiveP¬am‘”S‘s
& 
£i
)

702 
	`WRITE_CODE
(
£i
.
aùiveVPSId
, 4, "active_video_parameter_set_id");

703 
	`WRITE_FLAG
(
£i
.
m_£lfCÚšedCvsFÏg
, "self_contained_cvs_flag");

704 
	`WRITE_FLAG
(
£i
.
m_noP¬am‘”S‘Upd©eFÏg
, "no_parameter_set_update_flag");

705 
	`WRITE_UVLC
(
£i
.
numSpsIdsMšus1
, "num_sps_ids_minus1");

707 
	`as£¹
 (
£i
.
aùiveSeqP¬am‘”S‘Id
.
	`size
(è=ð(£i.
numSpsIdsMšus1
 + 1));

709 
IÁ
 
i
 = 0; i < 
£i
.
aùiveSeqP¬am‘”S‘Id
.
	`size
(); i++)

711 
	`WRITE_UVLC
(
£i
.
aùiveSeqP¬am‘”S‘Id
[
i
], "active_seq_parameter_set_id");

713 
	}
}

716 
Void
 
	gSEIWr™”
::
	$xWr™eSEIDecodšgUn™Info
(cÚ¡ 
SEIDecodšgUn™Info
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

718 cÚ¡ 
TComVUI
 *
vui
 = 
¥s
->
	`g‘VuiP¬am‘”s
();

719 
	`WRITE_UVLC
(
£i
.
m_decodšgUn™Idx
, "decoding_unit_idx");

720 if(
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
())

722 
	`WRITE_CODE
Ð
£i
.
m_duS±CpbRemov®D–ay
, (
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘DuCpbRemov®D–ayL’gthMšus1
() + 1), "du_spt_cpb_removal_delay_increment");

724 
	`WRITE_FLAG
Ð
£i
.
m_dpbOuutDuD–ayP»£ÁFÏg
, "dpb_output_du_delay_present_flag");

725 if(
£i
.
m_dpbOuutDuD–ayP»£ÁFÏg
)

727 
	`WRITE_CODE
(
£i
.
m_picS±DpbOuutDuD–ay
, 
vui
->
	`g‘HrdP¬am‘”s
()->
	`g‘DpbOuutD–ayDuL’gthMšus1
() + 1, "pic_spt_dpb_output_du_delay");

729 
	}
}

732 
Void
 
	gSEIWr™”
::
	$xWr™eSEITempÜ®Lev–0Index
(cÚ¡ 
SEITempÜ®Lev–0Index
 &
£i
)

734 
	`WRITE_CODE
Ð
£i
.
Ž0Idx
, 8 , "tl0_idx" );

735 
	`WRITE_CODE
Ð
£i
.
¿pIdx
, 8 , "rap_idx" );

736 
	}
}

739 
Void
 
	gSEIWr™”
::
	$xWr™eSEIDecodedPiùu»Hash
(cÚ¡ 
SEIDecodedPiùu»Hash
& 
£i
)

741 cÚ¡ 
TCh¬
 *
ŒaûSŒšg
="\0";

742 
£i
.
m‘hod
)

744 
HASHTYPE_MD5
: 
ŒaûSŒšg
="picture_md5"; ;

745 
HASHTYPE_CRC
: 
ŒaûSŒšg
="picture_crc"; ;

746 
HASHTYPE_CHECKSUM
: 
ŒaûSŒšg
="picture_checksum"; ;

747 : 
	`as£¹
(
çl£
); ;

750 ià(
ŒaûSŒšg
 != 0)

752 
	`WRITE_CODE
(
£i
.
m‘hod
, 8, "hash_type");

753 
UIÁ
 
i
=0; i<
	`UIÁ
(
£i
.
m_piùu»Hash
.
hash
.
	`size
()); i++)

755 
	`WRITE_CODE
(
£i
.
m_piùu»Hash
.
hash
[
i
], 8, 
ŒaûSŒšg
);

758 
	}
}

761 
Void
 
	gSEIWr™”
::
	$xWr™eSEISÿÏbËNe¡šg
(
TComB™If
& 
bs
, cÚ¡ 
SEISÿÏbËNe¡šg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

763 
	`WRITE_FLAG
Ð
£i
.
m_b™SŒ—mSub£tFÏg
, "bitstream_subset_flag" );

764 
	`WRITE_FLAG
Ð
£i
.
m_Ã¡šgOpFÏg
, "nesting_op_flag " );

765 ià(
£i
.
m_Ã¡šgOpFÏg
)

767 
	`WRITE_FLAG
Ð
£i
.
m_deçuÉOpFÏg
, "default_op_flag" );

768 
	`WRITE_UVLC
Ð
£i
.
m_Ã¡šgNumOpsMšus1
, "nesting_num_ops_minus1" );

769 
UIÁ
 
i
 = (
£i
.
m_deçuÉOpFÏg
 ? 1 : 0); i <ð£i.
m_Ã¡šgNumOpsMšus1
; i++)

771 
	`WRITE_CODE
Ð
£i
.
m_Ã¡šgMaxTempÜ®IdPlus1
[
i
], 3, "nesting_max_temporal_id_plus1" );

772 
	`WRITE_UVLC
Ð
£i
.
m_Ã¡šgOpIdx
[
i
], "nesting_op_idx" );

777 
	`WRITE_FLAG
Ð
£i
.
m_®lLay”sFÏg
, "all_layers_flag" );

778 ià(!
£i
.
m_®lLay”sFÏg
)

780 
	`WRITE_CODE
Ð
£i
.
m_Ã¡šgNoOpMaxTempÜ®IdPlus1
, 3, "nesting_no_op_max_temporal_id_plus1" );

781 
	`WRITE_UVLC
Ð
£i
.
m_Ã¡šgNumLay”sMšus1
, "nesting_num_layers" );

782 
UIÁ
 
i
 = 0; i <ð
£i
.
m_Ã¡šgNumLay”sMšus1
; i++)

784 
	`WRITE_CODE
Ð
£i
.
m_Ã¡šgLay”Id
[
i
], 6, "nesting_layer_id" );

790  
m_pcB™If
->
	`g‘Numb”OfWr™‹nB™s
() % 8 != 0 )

792 
	`WRITE_FLAG
( 0, "nesting_zero_bit" );

796 
	`wr™eSEImes§ges
(
bs
, 
£i
.
m_Ã¡edSEIs
, 
¥s
, 
Œue
);

797 
	}
}

800 
Void
 
	gSEIWr™”
::
	$xWr™eSEIRegiÚReäeshInfo
(cÚ¡ 
SEIRegiÚReäeshInfo
 &
£i
)

802 
	`WRITE_FLAG
Ð
£i
.
m_gdrFÜegroundFÏg
, "gdr_foreground_flag");

803 
	}
}

806 
Void
 
	gSEIWr™”
::
	$xWr™eSEINoDi¥Ïy
(cÚ¡ 
SEINoDi¥Ïy
& )

809 
	}
}

812 
Void
 
SEIWr™”
::
	$xWr™eSEITimeCode
(cÚ¡ 
SEITimeCode
& 
£i
)

814 
	`WRITE_CODE
(
£i
.
numClockTs
, 2, "num_clock_ts");

815 
IÁ
 
i
 = 0; i < 
£i
.
numClockTs
; i++)

817 cÚ¡ 
TComSEITimeS‘
 &
cu¼’tTimeS‘
 = 
£i
.
timeS‘A¼ay
[
i
];

818 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
þockTimeSmpFÏg
, "clock_time_stamp_flag");

819 if(
cu¼’tTimeS‘
.
þockTimeSmpFÏg
)

821 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
numUn™F›ldBa£dFÏg
, "units_field_based_flag");

822 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
couÁšgTy³
, 5, "counting_type");

823 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
fuÎTimeSmpFÏg
, "full_timestamp_flag");

824 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
discÚtšu™yFÏg
, "discontinuity_flag");

825 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
útDrÝ³dFÏg
, "cnt_dropped_flag");

826 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
numb”OfF¿mes
, 9, "n_frames");

827 if(
cu¼’tTimeS‘
.
fuÎTimeSmpFÏg
)

829 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
£cÚdsV®ue
, 6, "seconds_value");

830 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
mšu‹sV®ue
, 6, "minutes_value");

831 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
hoursV®ue
, 5, "hours_value");

835 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
£cÚdsFÏg
, "seconds_flag");

836 if(
cu¼’tTimeS‘
.
£cÚdsFÏg
)

838 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
£cÚdsV®ue
, 6, "seconds_value");

839 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
mšu‹sFÏg
, "minutes_flag");

840 if(
cu¼’tTimeS‘
.
mšu‹sFÏg
)

842 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
mšu‹sV®ue
, 6, "minutes_value");

843 
	`WRITE_FLAG
(
cu¼’tTimeS‘
.
hoursFÏg
, "hours_flag");

844 if(
cu¼’tTimeS‘
.
hoursFÏg
)

846 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
hoursV®ue
, 5, "hours_value");

851 
	`WRITE_CODE
(
cu¼’tTimeS‘
.
timeOff£tL’gth
, 5, "time_offset_length");

852 if(
cu¼’tTimeS‘
.
timeOff£tL’gth
 > 0)

854 if(
cu¼’tTimeS‘
.
timeOff£tV®ue
 >= 0)

856 
	`WRITE_CODE
((
UIÁ
)
cu¼’tTimeS‘
.
timeOff£tV®ue
, cu¼’tTimeS‘.
timeOff£tL’gth
, "time_offset_value");

861 
UIÁ
 
off£tV®ue
 = ~(
cu¼’tTimeS‘
.
timeOff£tV®ue
) + 1;

862 
off£tV®ue
 |ð(1 << (
cu¼’tTimeS‘
.
timeOff£tL’gth
-1));

863 
	`WRITE_CODE
(
off£tV®ue
, 
cu¼’tTimeS‘
.
timeOff£tL’gth
, "time_offset_value");

868 
	}
}

871 
Void
 
	gSEIWr™”
::
	$xWr™eSEIMa¡”šgDi¥ÏyCÞourVÞume
(cÚ¡ 
SEIMa¡”šgDi¥ÏyCÞourVÞume
& 
£i
)

873 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[0][0], 16, "display_primaries_x[0]" );

874 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[0][1], 16, "display_primaries_y[0]" );

876 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[1][0], 16, "display_primaries_x[1]" );

877 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[1][1], 16, "display_primaries_y[1]" );

879 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[2][0], 16, "display_primaries_x[2]" );

880 
	`WRITE_CODE
Ð
£i
.
v®ues
.
´im¬›s
[2][1], 16, "display_primaries_y[2]" );

882 
	`WRITE_CODE
Ð
£i
.
v®ues
.
wh™ePošt
[0], 16, "white_point_x" );

883 
	`WRITE_CODE
Ð
£i
.
v®ues
.
wh™ePošt
[1], 16, "white_point_y" );

885 
	`WRITE_CODE
Ð
£i
.
v®ues
.
maxLumšªû
, 32, "max_display_mastering_luminance" );

886 
	`WRITE_CODE
Ð
£i
.
v®ues
.
mšLumšªû
, 32, "min_display_mastering_luminance" );

887 
	}
}

890 
Void
 
	gSEIWr™”
::
	$xWr™eSEISegm’‹dReùF¿mePackšg
(cÚ¡ 
SEISegm’‹dReùF¿mePackšg
& 
£i
)

892 
	`WRITE_FLAG
Ð
£i
.
m_¬¿ngem’tCªûlFÏg
, "segmented_rect_frame_packing_arrangement_cancel_flag" );

893 ifÐ
£i
.
m_¬¿ngem’tCªûlFÏg
 == 0 )

895 
	`WRITE_CODE
Ð
£i
.
m_cÚ‹ÁIÁ”´‘©iÚTy³
, 2, "segmented_rect_content_interpretation_type" );

896 
	`WRITE_FLAG
Ð
£i
.
m_¬¿ngem’tP”si¡’ûFÏg
, "segmented_rect_frame_packing_arrangement_persistence" );

898 
	}
}

901 
Void
 
	gSEIWr™”
::
	$xWr™eSEITempMÙiÚCÚ¡¿šedTžeS‘s
(cÚ¡ 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
& 
£i
)

904 
	`WRITE_FLAG
((
£i
.
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
 ? 1 : 0), "mc_all_tiles_exact_sample_value_match_flag");

905 
	`WRITE_FLAG
((
£i
.
m_—ch_tže_Úe_tže_£t_æag
 ? 1 : 0), "each_tile_one_tile_set_flag" );

907 if(!
£i
.
m_—ch_tže_Úe_tže_£t_æag
)

909 
	`WRITE_FLAG
((
£i
.
m_lim™ed_tže_£t_di¥Ïy_æag
 ? 1 : 0), "limited_tile_set_display_flag");

910 
	`WRITE_UVLC
((
£i
.
	`g‘Numb”OfTžeS‘s
() - 1), "num_sets_in_message_minus1" );

912 if(
£i
.
	`g‘Numb”OfTžeS‘s
() > 0)

914 
IÁ
 
i
 = 0; i < 
£i
.
	`g‘Numb”OfTžeS‘s
(); i++)

916 
	`WRITE_UVLC
(
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_id
, "mcts_id");

918 if(
£i
.
m_lim™ed_tže_£t_di¥Ïy_æag
)

920 
	`WRITE_FLAG
((
£i
.
	`tžeS‘D©a
(
i
).
m_di¥Ïy_tže_£t_æag
 ? 1 : 0), "display_tile_set_flag");

923 
	`WRITE_UVLC
((
£i
.
	`tžeS‘D©a
(
i
).
	`g‘Numb”OfTžeReùs
() - 1), "num_tile_rects_in_set_minus1");

925 
IÁ
 
j
 = 0; j < 
£i
.
	`tžeS‘D©a
(
i
).
	`g‘Numb”OfTžeReùs
(); j++)

927 
	`WRITE_UVLC
(
£i
.
	`tžeS‘D©a
(
i
).
	`tÝLeáTžeIndex
 (
j
), "top_left_tile_index");

928 
	`WRITE_UVLC
(
£i
.
	`tžeS‘D©a
(
i
).
	`bÙtomRightTžeIndex
(
j
), "bottom_right_tile_index");

931 if(!
£i
.
m_mc_®l_tžes_exaù_§m¶e_v®ue_m©ch_æag
)

933 
	`WRITE_FLAG
((
£i
.
	`tžeS‘D©a
(
i
).
m_exaù_§m¶e_v®ue_m©ch_æag
 ? 1 : 0), "exact_sample_value_match_flag");

936 
	`WRITE_FLAG
((
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_Ëv–_idc_´e£Á_æag
 ? 1 : 0), "mcts_tier_level_idc_present_flag");

938 if(
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_Ëv–_idc_´e£Á_æag
)

940 
	`WRITE_FLAG
((
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_t›r_æag
 ? 1 : 0), "mcts_tier_flag");

941 
	`WRITE_CODE
Ð
£i
.
	`tžeS‘D©a
(
i
).
m_mùs_Ëv–_idc
, 8, "mcts_level_idc");

948 
	`WRITE_FLAG
((
£i
.
m_max_mcs_t›r_Ëv–_idc_´e£Á_æag
 ? 1 : 0), "max_mcs_tier_level_idc_present_flag");

950 if(
£i
.
m_max_mcs_t›r_Ëv–_idc_´e£Á_æag
)

952 
	`WRITE_FLAG
((
£i
.
m_max_mùs_t›r_æag
 ? 1 : 0), "max_mcts_tier_flag");

953 
	`WRITE_CODE
Ð
£i
.
m_max_mùs_Ëv–_idc
, 8, "max_mcts_level_idc");

956 
	}
}

958 #ià
MCTS_EXTRACTION


959 
Void
 
	gSEIWr™”
::
	$xWr™eSEIMCTSExŒaùiÚInfoS‘
(cÚ¡ 
SEIMCTSExŒaùiÚInfoS‘
& 
£i
)

961 
	`as£¹
(!
£i
.
m_MCTSExŒaùiÚInfoS‘s
.
	`em±y
());

962 
	`WRITE_UVLC
(((
UIÁ
)
£i
.
m_MCTSExŒaùiÚInfoS‘s
.
	`size
() - 1), "num_sets_in_message_minus1");

963 
¡d
::
veùÜ
<
SEIMCTSExŒaùiÚInfoS‘
::
MCTSExŒaùiÚInfo
>::
cÚ¡_™”©Ü
 
MCTSEIS™”
 = 
£i
.
m_MCTSExŒaùiÚInfoS‘s
.
	`begš
();

964 
MCTSEIS™”
 !ð
£i
.
m_MCTSExŒaùiÚInfoS‘s
.
	`’d
(); MCTSEISiter++)

966 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_idxOfMùsInS‘
.
	`size
() - 1), "num_mcts_sets_minus1[ i ]");

967  
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_idxOfMùsInS‘
.
	`size
(); j++)

969 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_idxOfMùsInS‘
[
j
].
	`size
() - 1), "num_mcts_in_set_minus1[ i ][ j ]");

970 
IÁ
 
k
 = 0; k < 
MCTSEIS™”
->
m_idxOfMùsInS‘
[
j
].
	`size
(); k++)

972 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_idxOfMùsInS‘
[
j
][
k
]), "idx_of_mcts_in_set[ i ][ j ][ k ]");

975 
	`WRITE_FLAG
((
MCTSEIS™”
->
m_¦iûReÜd”šgEÇbËdFÏg
? 1 : 0 ), "slice_reordering_enabled_flag[ i ]");

976 iàÐ
MCTSEIS™”
->
m_¦iûReÜd”šgEÇbËdFÏg
 )

978 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_ouutSliûSegm’tAdd»ss
.
	`size
() - 1), "num_slice_segments_minus1[ i ]");

979 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_ouutSliûSegm’tAdd»ss
.
	`size
(); j++)

981 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_ouutSliûSegm’tAdd»ss
[
j
]), "output_slice_segment_address[ i ][ j ]");

984 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_vpsRb¥D©aL’gth
.
	`size
() - 1), "num_vps_in_info_set_minus1[i]");

985 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_vpsRb¥D©aL’gth
.
	`size
(); j++)

987 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_vpsRb¥D©aL’gth
[
j
]), "vps_rbsp_data_length[i][j]");

989 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_¥sRb¥D©aL’gth
.
	`size
() - 1), "num_sps_in_info_set_minus1[i]");

990 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_¥sRb¥D©aL’gth
.
	`size
(); j++)

992 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_¥sRb¥D©aL’gth
[
j
]), "sps_rbsp_data_length[i][j]");

994 
	`WRITE_UVLC
(((
UIÁ
)
MCTSEIS™”
->
m_µsRb¥D©aL’gth
.
	`size
() - 1), "num_sps_in_info_set_minus1[i]");

995 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_µsRb¥D©aL’gth
.
	`size
(); j++)

997 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_µsNuhTempÜ®IdPlus1
[
j
]), "pps_nuh_temporal_id_plus1[i][j]");

998 
	`WRITE_UVLC
((
MCTSEIS™”
->
m_µsRb¥D©aL’gth
[
j
]), "pps_rbsp_data_length[i][j]");

1001 
m_pcB™If
->
	`g‘Numb”OfWr™‹nB™s
() % 8 != 0)

1003 
	`WRITE_FLAG
(0, "mcts_alignment_bit_equal_to_zero");

1005 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_vpsRb¥D©a
.
	`size
(); j++)

1007 
IÁ
 
k
 = 0; k < 
MCTSEIS™”
->
m_vpsRb¥D©aL’gth
[
j
]; k++)

1009 
	`WRITE_CODE
((
MCTSEIS™”
->
m_vpsRb¥D©a
[
j
][
k
]), 8, "vps_rbsp_data_byte[ i ][ j ][ k ]");

1012 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_¥sRb¥D©a
.
	`size
(); j++)

1014 
IÁ
 
k
 = 0; k < 
MCTSEIS™”
->
m_¥sRb¥D©aL’gth
[
j
]; k++)

1016 
	`WRITE_CODE
((
MCTSEIS™”
->
m_¥sRb¥D©a
[
j
][
k
]), 8, "sps_rbsp_data_byte[ i ][ j ][ k ]");

1019 
IÁ
 
j
 = 0; j < 
MCTSEIS™”
->
m_µsRb¥D©a
.
	`size
(); j++)

1021 
IÁ
 
k
 = 0; k < 
MCTSEIS™”
->
m_µsRb¥D©aL’gth
[
j
]; k++)

1023 
	`WRITE_CODE
((
MCTSEIS™”
->
m_µsRb¥D©a
[
j
][
k
]), 8, "pps_rbsp_data_byte[ i ][ j ][ k ]");

1027 
	}
}

1031 
Void
 
	gSEIWr™”
::
	$xWr™eSEIChromaRe§m¶šgFž‹rHšt
(cÚ¡ 
SEIChromaRe§m¶šgFž‹rHšt
 &
£i
)

1033 
	`WRITE_CODE
(
£i
.
m_v”ChromaFž‹rIdc
, 8, "ver_chroma_filter_idc");

1034 
	`WRITE_CODE
(
£i
.
m_hÜChromaFž‹rIdc
, 8, "hor_chroma_filter_idc");

1035 
	`WRITE_FLAG
(
£i
.
m_v”Fž‹ršgF›ldProûssšgFÏg
, "ver_filtering_field_processing_flag");

1036 if(
£i
.
m_v”ChromaFž‹rIdc
 =ð1 || sei.
m_hÜChromaFž‹rIdc
 == 1)

1038 
	`WRITE_UVLC
(
£i
.
m_rg‘FÜm©Idc
, "target_format_idc");

1039 if(
£i
.
m_v”ChromaFž‹rIdc
 == 1)

1041 cÚ¡ 
IÁ
 
numV”tiÿlFž‹r
 = (IÁ)
£i
.
m_v”Fž‹rCÛff
.
	`size
();

1042 
	`WRITE_UVLC
(
numV”tiÿlFž‹r
, "num_vertical_filters");

1043 if(
numV”tiÿlFž‹r
 > 0)

1045 
IÁ
 
i
 = 0; i < 
numV”tiÿlFž‹r
; i ++)

1047 cÚ¡ 
IÁ
 
v”T­L’gthMšus1
 = (IÁè
£i
.
m_v”Fž‹rCÛff
[
i
].
	`size
() - 1;

1048 
	`WRITE_UVLC
(
v”T­L’gthMšus1
, "ver_tap_length_minus_1");

1049 
IÁ
 
j
 = 0; j < (
v”T­L’gthMšus1
 + 1); j ++)

1051 
	`WRITE_SVLC
(
£i
.
m_v”Fž‹rCÛff
[
i
][
j
], "ver_filter_coeff");

1056 if(
£i
.
m_hÜChromaFž‹rIdc
 == 1)

1058 cÚ¡ 
IÁ
 
numHÜizÚlFž‹r
 = (IÁè
£i
.
m_hÜFž‹rCÛff
.
	`size
();

1059 
	`WRITE_UVLC
(
numHÜizÚlFž‹r
, "num_horizontal_filters");

1060 if(
numHÜizÚlFž‹r
 > 0)

1062 
IÁ
 
i
 = 0; i < 
numHÜizÚlFž‹r
; i ++)

1064 cÚ¡ 
IÁ
 
hÜT­L’gthMšus1
 = (IÁè
£i
.
m_hÜFž‹rCÛff
[
i
].
	`size
() - 1;

1065 
	`WRITE_UVLC
(
hÜT­L’gthMšus1
, "hor_tap_length_minus_1");

1066 
IÁ
 
j
 = 0; j < (
hÜT­L’gthMšus1
 + 1); j ++)

1068 
	`WRITE_SVLC
(
£i
.
m_hÜFž‹rCÛff
[
i
][
j
], "hor_filter_coeff");

1074 
	}
}

1077 
Void
 
	gSEIWr™”
::
	$xWr™eSEIKÃeFunùiÚInfo
(cÚ¡ 
SEIKÃeFunùiÚInfo
 &
£i
)

1079 
	`WRITE_UVLC
Ð
£i
.
m_kÃeId
, "knee_function_id" );

1080 
	`WRITE_FLAG
Ð
£i
.
m_kÃeCªûlFÏg
, "knee_function_cancel_flag" );

1081 iàÐ!
£i
.
m_kÃeCªûlFÏg
 )

1083 
	`WRITE_FLAG
Ð
£i
.
m_kÃeP”si¡’ûFÏg
, "knee_function_persistence_flag" );

1084 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeIÅutD¿nge
 , 32, "input_d_range" );

1085 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeIÅutDi¥Lumšªû
, 32, "input_disp_luminance" );

1086 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeOuutD¿nge
, 32, "output_d_range" );

1087 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeOuutDi¥Lumšªû
, 32, "output_disp_luminance" );

1088 
	`WRITE_UVLC
Ð
£i
.
m_kÃeNumKÃePoštsMšus1
, "num_knee_points_minus1" );

1089 
IÁ
 
i
 = 0; i <ð
£i
.
m_kÃeNumKÃePoštsMšus1
; i++ )

1091 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeIÅutKÃePošt
[
i
], 10,"input_knee_point" );

1092 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_kÃeOuutKÃePošt
[
i
], 10, "output_knee_point" );

1095 
	}
}

1097 
Void
 
	gSEIWr™”
::
	$xWr™eSEICÚ‹ÁCÞourVÞume
(cÚ¡ 
SEICÚ‹ÁCÞourVÞume
 &
£i
)

1099 
	`WRITE_FLAG
(
£i
.
m_ccvCªûlFÏg
, "ccv_cancel_flag");

1100 ià(!
£i
.
m_ccvCªûlFÏg
)

1102 
	`WRITE_FLAG
(
£i
.
m_ccvP”si¡’ûFÏg
, "ccv_persistence_flag");

1103 
	`WRITE_FLAG
(
£i
.
m_ccvPrim¬›sP»£ÁFÏg
, "ccv_primaries_present_flag");

1104 
	`WRITE_FLAG
(
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
, "ccv_min_luminance_value_present_flag");

1105 
	`WRITE_FLAG
(
£i
.
m_ccvMaxLumšªûV®ueP»£ÁFÏg
, "ccv_max_luminance_value_present_flag");

1106 
	`WRITE_FLAG
(
£i
.
m_ccvAvgLumšªûV®ueP»£ÁFÏg
, "ccv_avg_luminance_value_present_flag");

1108 ià(
£i
.
m_ccvPrim¬›sP»£ÁFÏg
 =ð
Œue
)

1110 
IÁ
 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

1112 
	`WRITE_SCODE
((
IÁ
è
£i
.
m_ccvPrim¬›sX
[
i
], 32, "ccv_primaries_x[i]");

1113 
	`WRITE_SCODE
((
IÁ
è
£i
.
m_ccvPrim¬›sY
[
i
], 32, "ccv_primaries_y[i]");

1117 ià(
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

1119 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_ccvMšLumšªûV®ue
, 32, "ccv_min_luminance_value" );

1121 ià(
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

1123 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_ccvMaxLumšªûV®ue
, 32, "ccv_max_luminance_value" );

1125 ià(
£i
.
m_ccvMšLumšªûV®ueP»£ÁFÏg
 =ð
Œue
)

1127 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_ccvAvgLumšªûV®ue
, 32, "ccv_avg_luminance_value" );

1130 
	}
}

1132 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


1133 
Void
 
	gSEIWr™”
::
	$xWr™eSEIShu‰”IÁ”v®
(cÚ¡ 
SEIShu‰”IÁ”v®Info
 &
£i
)

1135 
	`WRITE_CODE
(
£i
.
m_siiTimeSÿË
, 32, "sii_time_scale");

1136 
	`WRITE_FLAG
(
£i
.
m_siiFixedSIw™hšCLVS
, "fixed_shutter_interval_within_clvs_flag");

1137 ià(
£i
.
m_siiFixedSIw™hšCLVS
)

1139 
	`WRITE_CODE
(
£i
.
m_siiNumUn™sInShu‰”IÁ”v®
, 32, "sii_num_units_in_shutter_interval");

1143 
	`WRITE_CODE
(
£i
.
m_siiMaxSubLay”sMšus1
, 3, "sii_max_sub_layers_minus1");

1144 
UIÁ
 
i
 = 0; i <ð
£i
.
m_siiMaxSubLay”sMšus1
; i++)

1146 
	`WRITE_CODE
(
£i
.
m_siiSubLay”NumUn™sInSI
[
i
], 32, "sub_layer_num_units_in_shutter_interval[ i ]");

1149 
	}
}

1152 
Void
 
	gSEIWr™”
::
	$xWr™eSEIEquœeùªguÏrProjeùiÚ
(cÚ¡ 
SEIEquœeùªguÏrProjeùiÚ
 &
£i
)

1154 
	`WRITE_FLAG
Ð
£i
.
m_”pCªûlFÏg
, "erp_cancel_flag" );

1155 ifÐ!
£i
.
m_”pCªûlFÏg
 )

1157 
	`WRITE_FLAG
Ð
£i
.
m_”pP”si¡’ûFÏg
, "erp_persistence_flag" );

1158 
	`WRITE_FLAG
Ð
£i
.
m_”pGu¬dBªdFÏg
, "erp_guard_band_flag" );

1159 
	`WRITE_CODE
( 0, 2, "erp_reserved_zero_2bits" );

1160 iàÐ
£i
.
m_”pGu¬dBªdFÏg
 == 1)

1162 
	`WRITE_CODE
Ð
£i
.
m_”pGu¬dBªdTy³
, 3, "erp_guard_band_type" );

1163 
	`WRITE_CODE
Ð
£i
.
m_”pLeáGu¬dBªdWidth
, 8, "erp_left_guard_band_width" );

1164 
	`WRITE_CODE
Ð
£i
.
m_”pRightGu¬dBªdWidth
, 8, "erp_right_guard_band_width" );

1167 
	}
}

1169 
Void
 
	gSEIWr™”
::
	$xWr™eSEISph”eRÙ©iÚ
(cÚ¡ 
SEISph”eRÙ©iÚ
 &
£i
)

1171 
	`WRITE_FLAG
Ð
£i
.
m_¥h”eRÙ©iÚCªûlFÏg
, "sphere_rotation_cancel_flag" );

1172 ifÐ!
£i
.
m_¥h”eRÙ©iÚCªûlFÏg
 )

1174 
	`WRITE_FLAG
Ð
£i
.
m_¥h”eRÙ©iÚP”si¡’ûFÏg
, "sphere_rotation_persistence_flag" );

1175 
	`WRITE_CODE
( 0, 6, "sphere_rotation_reserved_zero_6bits" );

1176 
	`WRITE_SCODE
(
£i
.
m_¥h”eRÙ©iÚYaw
, 32, "sphere_rotation_yaw" );

1177 
	`WRITE_SCODE
(
£i
.
m_¥h”eRÙ©iÚP™ch
, 32, "sphere_rotation_pitch" );

1178 
	`WRITE_SCODE
(
£i
.
m_¥h”eRÙ©iÚRÞl
, 32, "sphere_rotation_roll" );

1180 
	}
}

1182 
Void
 
	gSEIWr™”
::
	$xWr™eSEIOmniV›wpÜt
(cÚ¡ 
SEIOmniV›wpÜt
 &
£i
)

1184 
	`WRITE_CODE
Ð
£i
.
m_omniV›wpÜtId
, 10, "omni_viewport_id" );

1185 
	`WRITE_FLAG
Ð
£i
.
m_omniV›wpÜtCªûlFÏg
, "omni_viewport_cancel_flag" );

1186 iàÐ!
£i
.
m_omniV›wpÜtCªûlFÏg
 )

1188 
	`WRITE_FLAG
Ð
£i
.
m_omniV›wpÜtP”si¡’ûFÏg
, "omni_viewport_persistence_flag" );

1189 cÚ¡ 
UIÁ
 
numRegiÚs
 = (UIÁè
£i
.
m_omniV›wpÜtRegiÚs
.
	`size
();

1190 
	`WRITE_CODE
Ð
numRegiÚs
 - 1, 4, "omni_viewport_cnt_minus1" );

1191 
UIÁ
 
»giÚ
=0;„egiÚ<
numRegiÚs
;„egion++)

1193 cÚ¡ 
SEIOmniV›wpÜt
::
OmniV›wpÜt
 &
v›wpÜt
=
£i
.
m_omniV›wpÜtRegiÚs
[
»giÚ
];

1194 
	`WRITE_SCODE
Ð
v›wpÜt
.
azimuthC’Œe
, 32, "omni_viewport_azimuth_centre" );

1195 
	`WRITE_SCODE
Ð
v›wpÜt
.
–ev©iÚC’Œe
, 32, "omni_viewport_elevation_centre" );

1196 
	`WRITE_SCODE
Ð
v›wpÜt
.
tžtC’Œe
, 32, "omni_viewport_tilt_center" );

1197 
	`WRITE_CODE
Ð
v›wpÜt
.
hÜRªge
, 32, "omni_viewport_hor_range[i]" );

1198 
	`WRITE_CODE
Ð
v›wpÜt
.
v”Rªge
, 32, "omni_viewport_ver_range[i]" );

1201 
	}
}

1202 
Void
 
	gSEIWr™”
::
	$xWr™eSEICubem­ProjeùiÚ
(cÚ¡ 
SEICubem­ProjeùiÚ
 &
£i
)

1204 
	`WRITE_FLAG
(
£i
.
m_cmpCªûlFÏg
, "cmp_cancel_flag");

1205 ià(!
£i
.
m_cmpCªûlFÏg
)

1207 
	`WRITE_FLAG
(
£i
.
m_cmpP”si¡’ûFÏg
, "cmp_persistence_flag");

1209 
	}
}

1210 
Void
 
	gSEIWr™”
::
	$xWr™eSEIRegiÚWi£Packšg
(cÚ¡ 
SEIRegiÚWi£Packšg
 &
£i
)

1212 
	`WRITE_FLAG
Ð
£i
.
m_rwpCªûlFÏg
, "rwp_cancel_flag" );

1213 if(!
£i
.
m_rwpCªûlFÏg
)

1215 
	`WRITE_FLAG
Ð
£i
.
m_rwpP”si¡’ûFÏg
, "rwp_persistence_flag" );

1216 
	`WRITE_FLAG
Ð
£i
.
m_cÚ¡™u’tPiùu»M©chšgFÏg
, "constituent_picture_matching_flag" );

1217 
	`WRITE_CODE
( 0, 5, "rwp_reserved_zero_5bits" );

1218 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_numPackedRegiÚs
, 8, "num_packed_regions" );

1219 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_´ojPiùu»Width
, 32, "proj_picture_width" );

1220 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_´ojPiùu»Height
, 32, "proj_picture_height" );

1221 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedPiùu»Width
, 16, "packed_picture_width" );

1222 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedPiùu»Height
, 16, "packed_picture_height" );

1223  
IÁ
 
i
=0; i < 
£i
.
m_numPackedRegiÚs
; i++ )

1225 
	`WRITE_CODE
( 0, 4, "rwp_reserved_zero_4bits" );

1226 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpT¿nsfÜmTy³
[
i
], 3, "rwp_tTransform_type" );

1227 
	`WRITE_FLAG
Ð
£i
.
m_rwpGu¬dBªdFÏg
[
i
], "rwp_guard_band_flag" );

1228 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_´ojRegiÚWidth
[
i
], 32, "proj_region_width" );

1229 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_´ojRegiÚHeight
[
i
], 32, "proj_region_height" );

1230 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpProjRegiÚTÝ
[
i
], 32, "rwp_proj_regionTop" );

1231 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_´ojRegiÚLeá
[
i
], 32, "proj_region_left" );

1232 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedRegiÚWidth
[
i
], 16, "packed_region_width" );

1233 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedRegiÚHeight
[
i
], 16, "packed_region_height" );

1234 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedRegiÚTÝ
[
i
], 16, "packed_region_top" );

1235 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_·ckedRegiÚLeá
[
i
], 16, "packed_region_left" );

1236 ifÐ
£i
.
m_rwpGu¬dBªdFÏg
[
i
] )

1238 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpLeáGu¬dBªdWidth
[
i
], 8, "rwp_left_guard_band_width");

1239 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpRightGu¬dBªdWidth
[
i
], 8, "rwp_right_guard_band_width");

1240 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpTÝGu¬dBªdHeight
[
i
], 8, "rwp_top_guard_band_height");

1241 
	`WRITE_CODE
Ð(
UIÁ
)
£i
. 
m_rwpBÙtomGu¬dBªdHeight
[
i
], 8, "rwp_bottom_guard_band_height");

1242 
	`WRITE_FLAG
Ð
£i
.
m_rwpGu¬dBªdNÙU£dFÜP»dFÏg
[
i
], "rwp_guard_band_not_used_forPred_flag" );

1243  
IÁ
 
j
=0; j < 4; j++ )

1245 
	`WRITE_CODE
Ð(
UIÁ
)
£i
.
m_rwpGu¬dBªdTy³
[
i
*4 + 
j
], 3, "rwp_guard_band_type");

1247 
	`WRITE_CODE
( 0, 3, "rwp_guard_band_reserved_zero_3bits" );

1251 
	}
}

1253 
Void
 
	gSEIWr™”
::
	$xWr™eSEIFisheyeVideoInfo
(cÚ¡ 
SEIFisheyeVideoInfo
 &
£i
)

1255 cÚ¡ 
TComSEIFisheyeVideoInfo
 &
šfo
=
£i
.
v®ues
;

1256 
	`WRITE_FLAG
(
šfo
.
m_fisheyeCªûlFÏg
, "fisheye_cancel_flag");

1257 ià(!
šfo
.
m_fisheyeCªûlFÏg
)

1259 
	`WRITE_FLAG
(
šfo
.
m_fisheyeP”si¡’ûFÏg
, "fisheye_persistence_flag");

1260 
	`WRITE_CODE
((
UIÁ
)
šfo
.
m_fisheyeV›wDim’siÚIdc
, 3, "fisheye_view_dimension_idc");

1261 
	`WRITE_CODE
(0, 3, "fisheye_reserved_zero_3bits");

1262 
	`as£¹
(
šfo
.
m_fisheyeAùiveA»as
.
	`size
());

1263 
	`WRITE_CODE
((
UIÁ
)
šfo
.
m_fisheyeAùiveA»as
.
	`size
()-1, 8, "fisheye_num_active_area_minus1");

1265 
¡d
::
size_t
 
i
 = 0; i < 
šfo
.
m_fisheyeAùiveA»as
.
	`size
(); i++)

1267 cÚ¡ 
TComSEIFisheyeVideoInfo
::
AùiveA»aInfo
 &
¬—
=
šfo
.
m_fisheyeAùiveA»as
[
i
];

1269 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCœcuÏrRegiÚC’ŒeX
, 32, "fisheye_circular_region_centre_x[i]");

1270 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCœcuÏrRegiÚC’ŒeY
, 32, "fisheye_circular_region_centre_y[i]");

1271 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeReùRegiÚTÝ
, 32, "fisheye_rect_region_top[i]");

1272 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeReùRegiÚLeá
, 32, "fisheye_rect_region_left[i]");

1273 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeReùRegiÚWidth
, 32, "fisheye_rect_region_width[i]");

1274 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeReùRegiÚHeight
, 32, "fisheye_rect_region_Height[i]");

1275 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCœcuÏrRegiÚRadius
, 32, "fisheye_circular_region_radius[i]");

1276 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeSûÃRadius
, 32, "fisheye_scene_radius[i]");

1278 
	`WRITE_SCODE
((
IÁ
)
¬—
.
m_fisheyeCam”aC’ŒeAzimuth
, 32, "fisheye_camera_centre_azimuth[i]");

1279 
	`WRITE_SCODE
((
IÁ
)
¬—
.
m_fisheyeCam”aC’ŒeEËv©iÚ
, 32, "fisheye_camera_centre_elevation[i]");

1280 
	`WRITE_SCODE
((
IÁ
)
¬—
.
m_fisheyeCam”aC’ŒeTžt
, 32, "fisheye_camera_centre_tilt[i]");

1282 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCam”aC’ŒeOff£tX
, 32, "fisheye_camera_centre_offset_x[i]");

1283 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCam”aC’ŒeOff£tY
, 32, "fisheye_camera_centre_offset_x[i]");

1284 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeCam”aC’ŒeOff£tZ
, 32, "fisheye_camera_centre_offset_z[i]");

1285 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyeF›ldOfV›w
, 32, "fisheye_field_of_view[i]");

1286 
	`WRITE_CODE
((
UIÁ
)
¬—
.
m_fisheyePÞynomŸlCÛff
.
	`size
(), 16, "fisheye_num_polynomial_coeffs[i]");

1288 
¡d
::
size_t
 
j
 = 0; j < 
¬—
.
m_fisheyePÞynomŸlCÛff
.
	`size
(); j++)

1290 
	`WRITE_SCODE
((
IÁ
)
¬—
.
m_fisheyePÞynomŸlCÛff
[
j
], 32, "fisheye_polynomial_coeff[i][j]");

1294 
	}
}

1296 
Void
 
	gSEIWr™”
::
	$xWr™eSEICÞourRem­pšgInfo
(cÚ¡ 
SEICÞourRem­pšgInfo
& 
£i
)

1298 
	`WRITE_UVLC
Ð
£i
.
m_cÞourRem­Id
, "colour_remap_id" );

1299 
	`WRITE_FLAG
Ð
£i
.
m_cÞourRem­CªûlFÏg
, "colour_remap_cancel_flag" );

1300 ifÐ!
£i
.
m_cÞourRem­CªûlFÏg
 )

1302 
	`WRITE_FLAG
Ð
£i
.
m_cÞourRem­P”si¡’ûFÏg
, "colour_remap_persistence_flag" );

1303 
	`WRITE_FLAG
Ð
£i
.
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
, "colour_remap_video_signal_info_present_flag" );

1304 iàÐ
£i
.
m_cÞourRem­VideoSigÇlInfoP»£ÁFÏg
 )

1306 
	`WRITE_FLAG
Ð
£i
.
m_cÞourRem­FuÎRªgeFÏg
, "colour_remap_full_range_flag" );

1307 
	`WRITE_CODE
Ð
£i
.
m_cÞourRem­Prim¬›s
, 8, "colour_remap_primaries" );

1308 
	`WRITE_CODE
Ð
£i
.
m_cÞourRem­T¿nsãrFunùiÚ
, 8, "colour_remap_transfer_function" );

1309 
	`WRITE_CODE
Ð
£i
.
m_cÞourRem­M©rixCÛffic›Ás
, 8, "colour_remap_matrix_coefficients" );

1311 
	`WRITE_CODE
Ð
£i
.
m_cÞourRem­IÅutB™D•th
, 8, "colour_remap_input_bit_depth" );

1312 
	`WRITE_CODE
Ð
£i
.
m_cÞourRem­B™D•th
, 8, "colour_remap_bit_depth" );

1313  
IÁ
 
c
=0 ; c<3 ; c++ )

1315 
	`WRITE_CODE
Ð
£i
.
m_´eLutNumV®Mšus1
[
c
], 8, "pre_lut_num_val_minus1[c]" );

1316 ifÐ
£i
.
m_´eLutNumV®Mšus1
[
c
]>0 )

1318  
IÁ
 
i
=0 ; i<=
£i
.
m_´eLutNumV®Mšus1
[
c
] ; i++ )

1320 
	`WRITE_CODE
Ð
£i
.
m_´eLut
[
c
][
i
].
codedV®ue
, (Ð£i.
m_cÞourRem­IÅutB™D•th
 + 7 ) >> 3 ) << 3, "pre_lut_coded_value[c][i]" );

1321 
	`WRITE_CODE
Ð
£i
.
m_´eLut
[
c
][
i
].
rg‘V®ue
, (Ð£i.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, "pre_lut_target_value[c][i]" );

1325 
	`WRITE_FLAG
Ð
£i
.
m_cÞourRem­M©rixP»£ÁFÏg
, "colour_remap_matrix_present_flag" );

1326 ifÐ
£i
.
m_cÞourRem­M©rixP»£ÁFÏg
 )

1328 
	`WRITE_CODE
Ð
£i
.
m_log2M©rixD’om
, 4, "log2_matrix_denom" );

1329  
IÁ
 
c
=0 ; c<3 ; c++ )

1331  
IÁ
 
i
=0 ; i<3 ; i++ )

1333 
	`WRITE_SVLC
Ð
£i
.
m_cÞourRem­CÛffs
[
c
][
i
], "colour_remap_coeffs[c][i]" );

1338  
IÁ
 
c
=0 ; c<3 ; c++ )

1340 
	`WRITE_CODE
Ð
£i
.
m_po¡LutNumV®Mšus1
[
c
], 8, "m_postLutNumValMinus1[c]" );

1341 ifÐ
£i
.
m_po¡LutNumV®Mšus1
[
c
]>0 )

1343  
IÁ
 
i
=0 ; i<=
£i
.
m_po¡LutNumV®Mšus1
[
c
] ; i++ )

1345 
	`WRITE_CODE
Ð
£i
.
m_po¡Lut
[
c
][
i
].
codedV®ue
, (Ð£i.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, "post_lut_coded_value[c][i]" );

1346 
	`WRITE_CODE
Ð
£i
.
m_po¡Lut
[
c
][
i
].
rg‘V®ue
, (Ð£i.
m_cÞourRem­B™D•th
 + 7 ) >> 3 ) << 3, "post_lut_target_value[c][i]" );

1351 
	}
}

1354 
Void
 
	gSEIWr™”
::
	$xWr™eSEIDeš‹¾aûF›ldId’tifiÿtiÚ
(cÚ¡ 
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
& 
£i
)

1356 
	`WRITE_FLAG
Ð
£i
.
m_deš‹¾aûdPiùu»SourûP¬™yFÏg
, "deinterlaced_picture_source_parity_flag" );

1357 
	}
}

1360 
Void
 
	gSEIWr™”
::
	$xWr™eSEICÚ‹ÁLightLev–Info
(cÚ¡ 
SEICÚ‹ÁLightLev–Info
& 
£i
)

1362 
	`WRITE_CODE
Ð
£i
.
m_maxCÚ‹ÁLightLev–
, 16, "max_content_light_level" );

1363 
	`WRITE_CODE
Ð
£i
.
m_maxPicAv”ageLightLev–
, 16, "max_pic_average_light_level" );

1364 
	}
}

1367 
Void
 
	gSEIWr™”
::
	$xWr™eSEID•’d’tRAPIndiÿtiÚ
(cÚ¡ 
SEID•’d’tRAPIndiÿtiÚ
& )

1370 
	}
}

1373 
Void
 
SEIWr™”
::
	$xWr™eSEICodedRegiÚCom¶‘iÚ
(cÚ¡ 
SEICodedRegiÚCom¶‘iÚ
& 
£i
)

1375 
	`WRITE_UVLC
Ð
£i
.
m_ÃxtSegm’tAdd»ss
, "next_segment_address" );

1376 ià(
£i
.
m_ÃxtSegm’tAdd»ss
)

1378 
	`WRITE_FLAG
Ð
£i
.
m_šd•’d’tSliûSegm’tFÏg
, "independent_slice_segment_flag" );

1380 
	}
}

1383 
Void
 
	gSEIWr™”
::
	$xWr™eSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(cÚ¡ 
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
& 
£i
)

1385 
	`WRITE_CODE
(
£i
.
m_´eã¼edT¿nsãrCh¬aù”i¡ics
, 8, "preferred_transfer_characteristics");

1386 
	}
}

1389 
Void
 
	gSEIWr™”
::
	$xWr™eSEIAmb›ÁV›wšgEnvœÚm’t
(cÚ¡ 
SEIAmb›ÁV›wšgEnvœÚm’t
& 
£i
)

1391 
	`WRITE_CODE
(
£i
.
m_amb›ÁIÎumšªû
, 32, "ambient_illuminance" );

1392 
	`WRITE_CODE
(
£i
.
m_amb›ÁLightX
, 16, "ambient_light_x" );

1393 
	`WRITE_CODE
(
£i
.
m_amb›ÁLightY
, 16, "ambient_light_y" );

1394 
	}
}

1396 
Void
 
	gSEIWr™”
::
	$xWr™eSEIRegiÚ®Ne¡šg
(
TComB™If
& 
bs
, cÚ¡ 
SEIRegiÚ®Ne¡šg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
)

1398 
	`WRITE_CODE
(
£i
.
	`g‘RNId
(), 16, "regional_nesting_id");

1399 
	`WRITE_CODE
(
£i
.
	`g‘NumReùRegiÚs
(), 8, "regional_nesting_num_rect_regions");

1400 cÚ¡ 
RNSEIWšdowVec
 
»giÚs
 = 
£i
.
	`g‘RegiÚs
();

1401 
RNSEIWšdowVec
::
cÚ¡_™”©Ü
 
™
 = 
»giÚs
.
	`begš
(); iˆ!ð»giÚs.
	`’d
(); it++)

1403 
	`as£¹
((*
™
).
	`g‘WšdowEÇbËdFÏg
());

1404 
	`WRITE_CODE
((*
™
).
	`g‘RegiÚId
(), 8, "regional_nesting_rect_region_id[i]");

1405 
	`WRITE_CODE
((*
™
).
	`g‘WšdowLeáOff£t
(), 16, "regional_nesting_rect_left_offset[i]");

1406 
	`WRITE_CODE
((*
™
).
	`g‘WšdowRightOff£t
(), 16, "regional_nesting_rect_right_offset[i]");

1407 
	`WRITE_CODE
((*
™
).
	`g‘WšdowTÝOff£t
(), 16, "regional_nesting_rect_top_offset[i]");

1408 
	`WRITE_CODE
((*
™
).
	`g‘WšdowBÙtomOff£t
(), 16, "regional_nesting_rect_bottom_offset[i]");

1410 
	`as£¹
(
£i
.
	`g‘NumRnSEIMes§ge
() >= 1);

1411 
	`WRITE_CODE
(
£i
.
	`g‘NumRnSEIMes§ge
()-1, 8, "num_sei_messages_in_regional_nesting_minus1");

1412 cÚ¡ 
¡d
::
veùÜ
<
SEIRegiÚ®Ne¡šg
::
SEILi¡OfIndiûs
> 
£iMes§ges
 = 
£i
.
	`g‘RnSEIMes§ges
();

1413 
¡d
::
veùÜ
<
SEIRegiÚ®Ne¡šg
::
SEILi¡OfIndiûs
>::
cÚ¡_™”©Ü
 
™
;

1414 
™
 = 
£iMes§ges
.
	`begš
(); iˆ!ð£iMes§ges.
	`’d
(); it++)

1416 
¡d
::
veùÜ
<
UIÁ
> 
li¡OfRegiÚs
 = (*
™
).
m_li¡OfIndiûs
;

1417 
SEI
 *
Ã¡edSEI
 = (*
™
).
m_£iMes§ge
;

1418 
	`WRITE_CODE
((
UIÁ
)
li¡OfRegiÚs
.
	`size
(), 8, "num_regions_for_sei_message[i]");

1419 
IÁ
 
j
 = 0; j < 
li¡OfRegiÚs
.
	`size
(); j++)

1421 
	`WRITE_CODE
(
li¡OfRegiÚs
[
j
], 8, "regional_nesting_sei_region_idx[i][j]");

1423 
	`xWr™eSEImes§ge
(
bs
, 
Ã¡edSEI
, 
¥s
);

1425 
	}
}

1427 
Void
 
	gSEIWr™”
::
	$xWr™eSEIAÂÙ©edRegiÚs
(cÚ¡ 
SEIAÂÙ©edRegiÚs
 &
£i
, cÚ¡ 
TComSPS
 *
¥s
)

1429 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_ÿnûlFÏg
, "ar_cancel_flag");

1430 ià(!
£i
.
m_hdr
.
m_ÿnûlFÏg
)

1432 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_nÙO±imizedFÜV›wšgFÏg
, "ar_not_optimized_for_viewing_flag");

1433 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_ŒueMÙiÚFÏg
, "ar_true_motion_flag");

1434 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_ocþudedObjeùFÏg
, "ar_occluded_object_flag");

1435 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
, "ar_partial_object_flag_present_flag");

1436 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
, "ar_object_label_present_flag");

1437 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
, "ar_object_confidence_info_present_flag");

1438 ià(
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1440 
	`as£¹
(
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
 <= 16 && sei.m_hdr.m_objectConfidenceLength>0);

1441 
	`WRITE_CODE
((
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
 - 1), 4, "ar_object_confidence_length_minus_1");

1443 ià(
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1445 
	`WRITE_FLAG
(
£i
.
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
, "ar_object_label_language_present_flag");

1446 ià(
£i
.
m_hdr
.
m_objeùLab–LªguageP»£ÁFÏg
)

1448 
	`xWr™eBy‹Align
();

1449 
	`as£¹
(
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
.
	`size
()<256);

1450 
UIÁ
 
j
 = 0; j < 
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
.
	`size
(); j++)

1452 
UCh¬
 
ch
 = 
£i
.
m_hdr
.
m_ªnÙ©edRegiÚsObjeùLab–Lªg
[
j
];

1453 
	`WRITE_CODE
(
ch
, 8, "ar_object_label_language");

1455 
	`WRITE_CODE
('\0', 8, "ar_label_language");

1458 
	`WRITE_UVLC
((
UIÁ
)
£i
.
m_ªnÙ©edLab–s
.
	`size
(), "ar_num_label_updates");

1459 
	`as£¹
(
£i
.
m_ªnÙ©edLab–s
.
	`size
()<256);

1460 autØ
™
=
£i
.
m_ªnÙ©edLab–s
.
	`begš
(); it!=£i.m_ªnÙ©edLab–s.
	`’d
(); it++)

1462 
	`as£¹
(
™
->
fœ¡
 < 256);

1463 
	`WRITE_UVLC
(
™
->
fœ¡
, "ar_label_idx[]");

1464 cÚ¡ 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚLab–
 &
¬
=
™
->
£cÚd
;

1465 
	`WRITE_FLAG
(!
¬
.
Ïb–V®id
, "ar_label_cancel_flag");

1466 ià(
¬
.
Ïb–V®id
)

1468 
	`xWr™eBy‹Align
();

1469 
	`as£¹
(
¬
.
Ïb–
.
	`size
()<256);

1470 
UIÁ
 
j
 = 0; j < 
¬
.
Ïb–
.
	`size
(); j++)

1472 
UCh¬
 
ch
 = 
¬
.
Ïb–
[
j
];

1473 
	`WRITE_CODE
(
ch
, 8, "ar_label[]");

1475 
	`WRITE_CODE
('\0', 8, "ar_label[]");

1478 
	`WRITE_UVLC
((
UIÁ
)
£i
.
m_ªnÙ©edRegiÚs
.
	`size
(), "ar_num_object_updates");

1479 
	`as£¹
(
£i
.
m_ªnÙ©edRegiÚs
.
	`size
()<256);

1480 autØ
™
=
£i
.
m_ªnÙ©edRegiÚs
.
	`begš
(); it!=£i.m_ªnÙ©edRegiÚs.
	`’d
(); it++)

1482 cÚ¡ 
SEIAÂÙ©edRegiÚs
::
AÂÙ©edRegiÚObjeù
 &
¬
 = 
™
->
£cÚd
;

1483 
	`WRITE_UVLC
(
™
->
fœ¡
, "ar_object_idx");

1484 
	`WRITE_FLAG
(
¬
.
objeùCªûlFÏg
, "ar_object_cancel_flag");

1485 ià(!
¬
.
objeùCªûlFÏg
)

1487 ià(
£i
.
m_hdr
.
m_objeùLab–P»£ÁFÏg
)

1489 
	`WRITE_FLAG
(
¬
.
objeùLab–V®id
, "ar_object_label_update_flag");

1490 ià(
¬
.
objeùLab–V®id
)

1492 
	`as£¹
(
¬
.
objLab–Idx
<256);

1493 
	`WRITE_UVLC
(
¬
.
objLab–Idx
, "ar_object_label_idx");

1496 
	`WRITE_FLAG
(
¬
.
boundšgBoxV®id
, "ar_object_bounding_box_update_flag");

1497 ià(
¬
.
boundšgBoxV®id
)

1499 
	`WRITE_CODE
(
¬
.
boundšgBoxTÝ
, 16, "ar_bounding_box_top");

1500 
	`WRITE_CODE
(
¬
.
boundšgBoxLeá
, 16, "ar_bounding_box_left");

1501 
	`WRITE_CODE
(
¬
.
boundšgBoxWidth
, 16, "ar_bounding_box_width");

1502 
	`WRITE_CODE
(
¬
.
boundšgBoxHeight
,16, "ar_bounding_box_height");

1503 ià(
£i
.
m_hdr
.
m_·¹ŸlObjeùFÏgP»£ÁFÏg
)

1505 
	`WRITE_UVLC
(
¬
.
·¹ŸlObjeùFÏg
, "ar_partial_object_flag");

1507 ià(
£i
.
m_hdr
.
m_objeùCÚfid’ûInfoP»£ÁFÏg
)

1509 
	`as£¹
(
¬
.
objeùCÚfid’û
 < (1<<
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
));

1510 
	`WRITE_CODE
(
¬
.
objeùCÚfid’û
, 
£i
.
m_hdr
.
m_objeùCÚfid’ûL’gth
, "ar_object_confidence");

1516 
	}
}

1517 
Void
 
	gSEIWr™”
::
	$xWr™eBy‹Align
()

1519 ifÐ
m_pcB™If
->
	`g‘Numb”OfWr™‹nB™s
() % 8 != 0)

1521 
	`WRITE_FLAG
( 1, "payload_bit_equal_to_one" );

1522  
m_pcB™If
->
	`g‘Numb”OfWr™‹nB™s
() % 8 != 0 )

1524 
	`WRITE_FLAG
( 0, "payload_bit_equal_to_zero" );

1527 
	}
}

	@source/Lib/TLibEncoder/SEIwrite.h

34 #´agm¨
Úû


36 #iâdeà
__SEIWRITE__


37 
	#__SEIWRITE__


	)

39 
	~"SyÁaxEËm’tWr™”.h
"

40 
	~"TLibCommÚ/SEI.h
"

42 
þass
 
	gTComB™If
;

46 þas 
	cSEIWr™”
:
public
 
SyÁaxEËm’tWr™”


48 
public
:

49 
	$SEIWr™”
() {};

50 
vœtu®
 ~
	$SEIWr™”
(è{
	}
};

52 
Void
 
wr™eSEImes§ges
(
TComB™If
& 
bs
, cÚ¡ 
SEIMes§ges
 &
£iLi¡
, cÚ¡ 
TComSPS
 *
¥s
, 
BoÞ
 
isNe¡ed
);

54 
	g´Ùeùed
:

55 
Void
 
xWr™eSEImes§ge
 (
TComB™If
& 
bs
, cÚ¡ 
SEI
 *
£i
, cÚ¡ 
TComSPS
 *
¥s
);

57 
Void
 
xWr™eSEIBufãršgP”iod
 (cÚ¡ 
SEIBufãršgP”iod
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

58 
Void
 
xWr™eSEIPiùu»Timšg
 (cÚ¡ 
SEIPiùu»Timšg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

59 
Void
 
xWr™eSEIPªSÿnReù
 (cÚ¡ 
SEIPªSÿnReù
& 
£i
);

60 
Void
 
xWr™eSEIFžËrPaylßd
 (cÚ¡ 
SEIFžËrPaylßd
& 
£i
);

61 
Void
 
xWr™eSEIU£rD©aRegi¡”ed
 (cÚ¡ 
SEIU£rD©aRegi¡”ed
& 
£i
);

62 
Void
 
xWr™eSEIU£rD©aUÄegi¡”ed
 (cÚ¡ 
SEIU£rD©aUÄegi¡”ed
 &
£i
);

63 
Void
 
xWr™eSEIRecov”yPošt
 (cÚ¡ 
SEIRecov”yPošt
& 
£i
);

64 
Void
 
xWr™eSEISûÃInfo
 (cÚ¡ 
SEISûÃInfo
& 
£i
);

65 
Void
 
xWr™eSEIPiùu»SÇpshÙ
 (cÚ¡ 
SEIPiùu»SÇpshÙ
& 
£i
);

66 
Void
 
xWr™eSEIProg»ssiveRefšem’tSegm’tS¹
 (cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tS¹
& 
£i
);

67 
Void
 
xWr™eSEIProg»ssiveRefšem’tSegm’tEnd
 (cÚ¡ 
SEIProg»ssiveRefšem’tSegm’tEnd
& 
£i
);

68 
Void
 
xWr™eSEIFžmG¿šCh¬aù”i¡ics
 (cÚ¡ 
SEIFžmG¿šCh¬aù”i¡ics
& 
£i
);

69 
Void
 
xWr™eSEIPo¡Fž‹rHšt
 (cÚ¡ 
SEIPo¡Fž‹rHšt
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

70 
Void
 
xWr™eSEITÚeM­pšgInfo
 (cÚ¡ 
SEITÚeM­pšgInfo
& 
£i
);

71 
Void
 
xWr™eSEIF¿mePackšg
 (cÚ¡ 
SEIF¿mePackšg
& 
£i
);

72 
Void
 
xWr™eSEIDi¥ÏyOr›Á©iÚ
 (cÚ¡ 
SEIDi¥ÏyOr›Á©iÚ
 &
£i
);

73 
Void
 
xWr™eSEIG»’M‘ad©aInfo
 (cÚ¡ 
SEIG»’M‘ad©aInfo
 &
£i
);

74 
Void
 
xWr™eSEISOPDesütiÚ
 (cÚ¡ 
SEISOPDesütiÚ
& 
£i
);

75 
Void
 
xWr™eSEIAùiveP¬am‘”S‘s
 (cÚ¡ 
SEIAùiveP¬am‘”S‘s
& 
£i
);

76 
Void
 
xWr™eSEIDecodšgUn™Info
 (cÚ¡ 
SEIDecodšgUn™Info
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

77 
Void
 
xWr™eSEITempÜ®Lev–0Index
 (cÚ¡ 
SEITempÜ®Lev–0Index
 &
£i
);

78 
Void
 
xWr™eSEIDecodedPiùu»Hash
 (cÚ¡ 
SEIDecodedPiùu»Hash
& 
£i
);

79 
Void
 
xWr™eSEISÿÏbËNe¡šg
 (
TComB™If
& 
bs
, cÚ¡ 
SEISÿÏbËNe¡šg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

80 
Void
 
xWr™eSEIRegiÚReäeshInfo
 (cÚ¡ 
SEIRegiÚReäeshInfo
 &
£i
);

81 
Void
 
xWr™eSEINoDi¥Ïy
 (cÚ¡ 
SEINoDi¥Ïy
 &
£i
);

82 
Void
 
xWr™eSEITimeCode
 (cÚ¡ 
SEITimeCode
& 
£i
);

83 
Void
 
xWr™eSEIMa¡”šgDi¥ÏyCÞourVÞume
 (cÚ¡ 
SEIMa¡”šgDi¥ÏyCÞourVÞume
& 
£i
);

84 
Void
 
xWr™eSEISegm’‹dReùF¿mePackšg
 (cÚ¡ 
SEISegm’‹dReùF¿mePackšg
& 
£i
);

85 
Void
 
xWr™eSEITempMÙiÚCÚ¡¿šedTžeS‘s
 (cÚ¡ 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
& 
£i
);

86 #ià
MCTS_EXTRACTION


87 
Void
 
xWr™eSEIMCTSExŒaùiÚInfoS‘
 (cÚ¡ 
SEIMCTSExŒaùiÚInfoS‘
& 
£i
);

89 
Void
 
xWr™eSEIChromaRe§m¶šgFž‹rHšt
 (cÚ¡ 
SEIChromaRe§m¶šgFž‹rHšt
& 
£i
);

90 
Void
 
xWr™eSEIKÃeFunùiÚInfo
 (cÚ¡ 
SEIKÃeFunùiÚInfo
 &
£i
);

91 
Void
 
xWr™eSEICÚ‹ÁCÞourVÞume
 (cÚ¡ 
SEICÚ‹ÁCÞourVÞume
 &
£i
);

92 
Void
 
xWr™eSEIEquœeùªguÏrProjeùiÚ
 (cÚ¡ 
SEIEquœeùªguÏrProjeùiÚ
 &
£i
);

93 
Void
 
xWr™eSEISph”eRÙ©iÚ
 (cÚ¡ 
SEISph”eRÙ©iÚ
 &
£i
);

94 
Void
 
xWr™eSEIOmniV›wpÜt
 (cÚ¡ 
SEIOmniV›wpÜt
& 
£i
);

95 
Void
 
xWr™eSEICubem­ProjeùiÚ
 (cÚ¡ 
SEICubem­ProjeùiÚ
 &
£i
);

96 
Void
 
xWr™eSEIRegiÚWi£Packšg
 (cÚ¡ 
SEIRegiÚWi£Packšg
 &
£i
);

97 
Void
 
xWr™eSEIFisheyeVideoInfo
 (cÚ¡ 
SEIFisheyeVideoInfo
 &
£i
);

98 
Void
 
xWr™eSEICÞourRem­pšgInfo
 (cÚ¡ 
SEICÞourRem­pšgInfo
& 
£i
);

99 
Void
 
xWr™eSEIDeš‹¾aûF›ldId’tifiÿtiÚ
 (cÚ¡ 
SEIDeš‹¾aûF›ldId’tifiÿtiÚ
& 
£i
);

100 
Void
 
xWr™eSEICÚ‹ÁLightLev–Info
 (cÚ¡ 
SEICÚ‹ÁLightLev–Info
& 
£i
);

101 
Void
 
xWr™eSEID•’d’tRAPIndiÿtiÚ
 (cÚ¡ 
SEID•’d’tRAPIndiÿtiÚ
& 
£i
);

102 
Void
 
xWr™eSEICodedRegiÚCom¶‘iÚ
 (cÚ¡ 
SEICodedRegiÚCom¶‘iÚ
& 
£i
);

103 
Void
 
xWr™eSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(cÚ¡ 
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
& 
£i
);

104 
Void
 
xWr™eSEIAmb›ÁV›wšgEnvœÚm’t
 (cÚ¡ 
SEIAmb›ÁV›wšgEnvœÚm’t
& 
£i
);

105 
Void
 
xWr™eSEIRegiÚ®Ne¡šg
 (
TComB™If
& 
bs
, cÚ¡ 
SEIRegiÚ®Ne¡šg
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

107 
Void
 
xWr™eSEIAÂÙ©edRegiÚs
 (cÚ¡ 
SEIAÂÙ©edRegiÚs
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

108 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


109 
Void
 
xWr™eSEIShu‰”IÁ”v®
 (cÚ¡ 
SEIShu‰”IÁ”v®Info
& 
£i
);

111 
Void
 
xWr™eSEI·ylßdD©a
(
TComB™If
& 
bs
, cÚ¡ 
SEI
& 
£i
, cÚ¡ 
TComSPS
 *
¥s
);

112 
Void
 
xWr™eBy‹Align
();

	@source/Lib/TLibEncoder/SyntaxElementWriter.cpp

38 
	~"TLibCommÚ/CommÚDef.h
"

39 
	~"SyÁaxEËm’tWr™”.h
"

44 #ià
ENC_DEC_TRACE


46 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eSCodeTr
 (
IÁ
 
v®ue
, 
UIÁ
 
Ëngth
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

48 
	`xWr™eSCode
 (
v®ue
,
Ëngth
);

49 ifÐ
g_HLST¿ûEÇbË
 )

51 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

52 ifÐ
Ëngth
<10 )

54 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %d\n", 
pSymbÞName
, 
Ëngth
, 
v®ue
 );

58 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè: %d\n", 
pSymbÞName
, 
Ëngth
, 
v®ue
 );

61 
	}
}

63 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eCodeTr
 (
UIÁ
 
v®ue
, UIÁ 
Ëngth
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

65 
	`xWr™eCode
 (
v®ue
,
Ëngth
);

66 ifÐ
g_HLST¿ûEÇbË
 )

68 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

69 ifÐ
Ëngth
<10 )

71 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè : %d\n", 
pSymbÞName
, 
Ëngth
, 
v®ue
 );

75 
	`årštf
Ð
g_hT¿û
, "%-50 u(%dè: %d\n", 
pSymbÞName
, 
Ëngth
, 
v®ue
 );

78 
	}
}

80 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eUvlcTr
 (
UIÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

82 
	`xWr™eUvlc
 (
v®ue
);

83 ifÐ
g_HLST¿ûEÇbË
 )

85 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

86 
	`årštf
Ð
g_hT¿û
, "%-50 ue(vè: %d\n", 
pSymbÞName
, 
v®ue
 );

88 
	}
}

90 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eSvlcTr
 (
IÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

92 
	`xWr™eSvlc
(
v®ue
);

93 ifÐ
g_HLST¿ûEÇbË
 )

95 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

96 
	`årštf
Ð
g_hT¿û
, "%-50 £(vè: %d\n", 
pSymbÞName
, 
v®ue
 );

98 
	}
}

100 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eFÏgTr
(
UIÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
)

102 
	`xWr™eFÏg
(
v®ue
);

103 ifÐ
g_HLST¿ûEÇbË
 )

105 
	`årštf
Ð
g_hT¿û
, "%8Îd ", 
g_nSymbÞCouÁ”
++ );

106 
	`årštf
Ð
g_hT¿û
, "%-50 u(1è : %d\n", 
pSymbÞName
, 
v®ue
 );

108 
	}
}

112 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eSCode
 ( 
IÁ
 
iCode
, 
UIÁ
 
uiL’gth
 )

114 
	`as£¹
 ( 
uiL’gth
 > 0 && uiLength<=32 );

115 
	`as£¹
Ð
uiL’gth
==32 || (
iCode
>=-(1<<(uiLength-1)) && iCode<(1<<(uiLength-1))) );

116 
m_pcB™If
->
	`wr™e
Ð
uiL’gth
==32 ? 
	`UIÁ
(
iCode
) : ( UInt(iCode)&((1<<uiLength)-1) ), uiLength );

117 
	}
}

119 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eCode
 ( 
UIÁ
 
uiCode
, UIÁ 
uiL’gth
 )

121 
	`as£¹
 ( 
uiL’gth
 > 0 );

122 
m_pcB™If
->
	`wr™e
Ð
uiCode
, 
uiL’gth
 );

123 
	}
}

125 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eUvlc
 ( 
UIÁ
 
uiCode
 )

127 
UIÁ
 
uiL’gth
 = 1;

128 
UIÁ
 
uiTemp
 = ++
uiCode
;

130 
	`as£¹
 ( 
uiTemp
 );

132  1 !ð
uiTemp
 )

134 
uiTemp
 >>= 1;

135 
uiL’gth
 += 2;

138 
m_pcB™If
->
	`wr™e
Ð0, 
uiL’gth
 >> 1);

139 
m_pcB™If
->
	`wr™e
Ð
uiCode
, (
uiL’gth
+1) >> 1);

140 
	}
}

142 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eSvlc
 ( 
IÁ
 
iCode
 )

144 
UIÁ
 
uiCode
;

146 
uiCode
 = 
	`xCÚv”tToUIÁ
Ð
iCode
 );

147 
	`xWr™eUvlc
Ð
uiCode
 );

148 
	}
}

150 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eFÏg
Ð
UIÁ
 
uiCode
 )

152 
m_pcB™If
->
	`wr™e
Ð
uiCode
, 1 );

153 
	}
}

155 
Void
 
	gSyÁaxEËm’tWr™”
::
	$xWr™eRb¥T¿žšgB™s
()

157 
	`WRITE_FLAG
( 1, "rbsp_stop_one_bit");

158 
IÁ
 
út
 = 0;

159 
m_pcB™If
->
	`g‘NumB™sUÁžBy‹AligÃd
())

161 
	`WRITE_FLAG
( 0, "rbsp_alignment_zero_bit");

162 
út
++;

164 
	`as£¹
(
út
<8);

165 
	}
}

	@source/Lib/TLibEncoder/SyntaxElementWriter.h

38 #iâdeà
__SYNTAXELEMENTWRITER__


39 
	#__SYNTAXELEMENTWRITER__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 
	~"TLibCommÚ/TComRom.h
"

52 #ià
ENC_DEC_TRACE


53 
	#WRITE_SCODE
Ð
v®ue
, 
Ëngth
, 
Çme
è
	`xWr™eSCodeTr
 ( v®ue,†’gth,‚am)

	)

54 
	#WRITE_CODE
Ð
v®ue
, 
Ëngth
, 
Çme
è
	`xWr™eCodeTr
 ( v®ue,†’gth,‚am)

	)

55 
	#WRITE_UVLC
Ð
v®ue
, 
Çme
è
	`xWr™eUvlcTr
 ( v®ue,‚am)

	)

56 
	#WRITE_SVLC
Ð
v®ue
, 
Çme
è
	`xWr™eSvlcTr
 ( v®ue,‚am)

	)

57 
	#WRITE_FLAG
Ð
v®ue
, 
Çme
è
	`xWr™eFÏgTr
 ( v®ue,‚am)

	)

60 
	#WRITE_SCODE
Ð
v®ue
, 
Ëngth
, 
Çme
è
	`xWr™eSCode
 ( v®ue,†’gth )

	)

61 
	#WRITE_CODE
Ð
v®ue
, 
Ëngth
, 
Çme
è
	`xWr™eCode
 ( v®ue,†’gth )

	)

62 
	#WRITE_UVLC
Ð
v®ue
, 
Çme
è
	`xWr™eUvlc
 ( v®u)

	)

63 
	#WRITE_SVLC
Ð
v®ue
, 
Çme
è
	`xWr™eSvlc
 ( v®u)

	)

64 
	#WRITE_FLAG
Ð
v®ue
, 
Çme
è
	`xWr™eFÏg
 ( v®u)

	)

68 þas 
	cSyÁaxEËm’tWr™”


70 
	m´Ùeùed
:

71 
TComB™If
* 
m_pcB™If
;

73 
	$SyÁaxEËm’tWr™”
()

74 :
	$m_pcB™If
(
NULL
)

76 
vœtu®
 ~
	$SyÁaxEËm’tWr™”
(è{
	}
};

78 
Void
 
	$£tB™¡»am
 ( 
TComB™If
* 
p
 ) { 
m_pcB™If
 =…; 
	}
}

80 
Void
 
xWr™eSCode
 ( 
IÁ
 
iCode
, 
UIÁ
 
uiL’gth
 );

81 
Void
 
xWr™eCode
 ( 
UIÁ
 
uiCode
, UIÁ 
uiL’gth
 );

82 
Void
 
xWr™eUvlc
 ( 
UIÁ
 
uiCode
 );

83 
Void
 
xWr™eSvlc
 ( 
IÁ
 
iCode
 );

84 
Void
 
xWr™eFÏg
 ( 
UIÁ
 
uiCode
 );

85 #ià
ENC_DEC_TRACE


86 
Void
 
xWr™eSCodeTr
 ( 
IÁ
 
v®ue
, 
UIÁ
 
Ëngth
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

87 
Void
 
xWr™eCodeTr
 ( 
UIÁ
 
v®ue
, UIÁ 
Ëngth
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

88 
Void
 
xWr™eUvlcTr
 ( 
UIÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

89 
Void
 
xWr™eSvlcTr
 ( 
IÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

90 
Void
 
xWr™eFÏgTr
 ( 
UIÁ
 
v®ue
, cÚ¡ 
TCh¬
 *
pSymbÞName
);

92 
Void
 
xWr™eRb¥T¿žšgB™s
();

94 
UIÁ
 
	$xCÚv”tToUIÁ
 ( 
IÁ
 
iV®ue
 ) {  ( iV®u<ð0è? -iV®ue<<1 : (iV®ue<<1)-1; 
	}
}

	@source/Lib/TLibEncoder/TEncAnalyze.h

38 #iâdeà
__TENCANALYZE__


39 
	#__TENCANALYZE__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~<¡dio.h
>

46 
	~<memÜy.h
>

47 
	~<as£¹.h
>

48 
	~"TLibCommÚ/CommÚDef.h
"

49 
	~"TLibCommÚ/TComChromaFÜm©.h
"

50 
	~"m©h.h
"

51 #ià
EXTENSION_360_VIDEO


52 
	~"TAµEncH–³r360/TExt360EncAÇlyze.h
"

63 þas 
	cTEncAÇlyze


65 
	mpublic
:

66 
	sOuutLogCÚŒÞ


68 
BoÞ
 
´štMSEBa£dSNR
;

69 
BoÞ
 
	m´štSequ’ûMSE
;

70 
BoÞ
 
	m´štF¿meMSE
;

71 
BoÞ
 
	m´štMSSSIM
;

72 
BoÞ
 
	m´štXPSNR
;

73 
BoÞ
 
	m´štHexP”POCPSNRs
;

76 
	sResuÉD©a


78 
ResuÉD©a
 (è: 
b™s
(0)

79 , 
xp¢r
(0)

81 
IÁ
 
	gi
=0; i<
	gMAX_NUM_COMPONENT
; i++)

83 
	gp¢r
[
i
]=0;

84 
	gMSEyuväame
[
i
]=0;

85 
	gMSSSIM
[
i
]=0;

88 
DoubË
 
	gp¢r
[
MAX_NUM_COMPONENT
];

89 
DoubË
 
	gb™s
;

90 
DoubË
 
	gMSEyuväame
[
MAX_NUM_COMPONENT
];

91 
DoubË
 
	gMSSSIM
[
MAX_NUM_COMPONENT
];

92 
DoubË
 
	gxp¢r
;

95 
	g´iv©e
:

96 
ResuÉD©a
 
m_ruÂšgTÙ®
;

97 
UIÁ
 
	gm_uiNumPic
;

98 
DoubË
 
	gm_dFrmR©e
;

100 #ià
EXTENSION_360_VIDEO


101 
TExt360EncAÇlyze
 
	gm_ext360
;

104 
	gpublic
:

105 
vœtu®
 ~
	$TEncAÇlyze
(è{
	}
}

106 
	$TEncAÇlyze
(è{ 
	`þ—r
(); 
	}
}

108 
Void
 
	$addResuÉ
ÐcÚ¡ 
ResuÉD©a
 &
»suÉ
)

110 
m_ruÂšgTÙ®
.
b™s
 +ð
»suÉ
.bits;

111 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
; i++)

113 
m_ruÂšgTÙ®
.
p¢r
[
i
] +ð
»suÉ
.psnr[i];

114 
m_ruÂšgTÙ®
.
MSEyuväame
[
i
] +ð
»suÉ
.MSEyuvframe[i];

115 
m_ruÂšgTÙ®
.
MSSSIM
[
i
] +ð
»suÉ
.MSSSIM[i];

118 
m_ruÂšgTÙ®
.
xp¢r
 +ð
»suÉ
.xpsnr;

119 
m_uiNumPic
++;

120 
	}
}

122 
DoubË
 
	$g‘P¢r
(
CompÚ’tID
 
compID
ècÚ¡ {  
m_ruÂšgTÙ®
.
p¢r
[compID]; 
	}
}

123 
DoubË
 
	$g‘Msssim
(
CompÚ’tID
 
compID
ècÚ¡ {  
m_ruÂšgTÙ®
.
MSSSIM
[compID]; 
	}
}

124 
DoubË
 
	$g‘xPSNR
(ècÚ¡ {  
m_ruÂšgTÙ®
.
xp¢r
;
	}
}

125 
DoubË
 
	$g‘B™s
(ècÚ¡ {  
m_ruÂšgTÙ®
.
b™s
; 
	}
}

126 
Void
 
	$£tB™s
(
DoubË
 
numB™s
è{ 
m_ruÂšgTÙ®
.
b™s
òumB™s; 
	}
}

127 
UIÁ
 
	$g‘NumPic
(ècÚ¡ {  
m_uiNumPic
; 
	}
}

128 #ià
EXTENSION_360_VIDEO


129 
	gTExt360EncAÇlyze
& 
	$g‘Ext360Info
(è{  
m_ext360
; 
	}
}

132 
Void
 
	$£tFrmR©e
 (
DoubË
 
dF¿meR©e
è{ 
m_dFrmR©e
 = dF¿meR©e; 
	}
}

133 
Void
 
	$þ—r
()

135 
m_ruÂšgTÙ®
=
	`ResuÉD©a
();

136 
m_uiNumPic
 = 0;

137 #ià
EXTENSION_360_VIDEO


138 
m_ext360
.
	`þ—r
();

140 
	}
}

143 
Void
 
	$ÿlcuÏ‹CombšedV®ues
(cÚ¡ 
ChromaFÜm©
 
chFmt
, 
DoubË
 &
PSNRyuv
, DoubË &
MSEyuv
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

145 
MSEyuv
 = 0;

146 
IÁ
 
sÿË
 = 0;

148 
IÁ
 
maximumB™D•th
 = 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
];

149 
UIÁ
 
chªÃlTy³Index
 = 1; chªÃlTy³Index < 
MAX_NUM_CHANNEL_TYPE
; channelTypeIndex++)

151 ià(
b™D•ths
.
»cÚ
[
chªÃlTy³Index
] > 
maximumB™D•th
)

153 
maximumB™D•th
 = 
b™D•ths
.
»cÚ
[
chªÃlTy³Index
];

157 cÚ¡ 
UIÁ
 
maxv®
 = 255 << (
maximumB™D•th
 - 8);

158 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
chFmt
);

160 
UIÁ
 
comp
=0; comp<
numb”V®idCompÚ’ts
; comp++)

162 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

163 cÚ¡ 
UIÁ
 
csx
 = 
	`g‘CompÚ’tSÿËX
(
compID
, 
chFmt
);

164 cÚ¡ 
UIÁ
 
csy
 = 
	`g‘CompÚ’tSÿËY
(
compID
, 
chFmt
);

165 cÚ¡ 
IÁ
 
sÿËChª
 = (4>>(
csx
+
csy
));

166 cÚ¡ 
UIÁ
 
b™D•thShiá
 = 2 * (
maximumB™D•th
 - 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)]);

168 cÚ¡ 
DoubË
 
chªÃlMSE
 = (
m_ruÂšgTÙ®
.
MSEyuväame
[
compID
] * 
	`DoubË
(1 << 
b™D•thShiá
)è/ DoubË(
	`g‘NumPic
());

170 
sÿË
 +ð
sÿËChª
;

171 
MSEyuv
 +ð
sÿËChª
 * 
chªÃlMSE
;

174 
MSEyuv
 /ð
	`DoubË
(
sÿË
);

175 
PSNRyuv
 = (
MSEyuv
==0 ? 999.99 : 10*
	`log10
((
maxv®
*maxval)/MSEyuv));

176 
	}
}

178 
Void
 
	$´štOut
 ( 
TCh¬
 
cD–im
, cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ 
OuutLogCÚŒÞ
 &
logù¾
, cÚ¡ 
B™D•ths
 &
b™D•ths
 )

180 
DoubË
 
dFps
 = 
m_dFrmR©e
;

181 
DoubË
 
dSÿË
 = 
dFps
 / 1000 / (DoubË)
m_uiNumPic
;

183 
DoubË
 
MSEBa£dSNR
[
MAX_NUM_COMPONENT
];

184 ià(
logù¾
.
´štMSEBa£dSNR
)

186 
UIÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
MAX_NUM_COMPONENT
; componentIndex++)

188 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

190 ià(
	`g‘NumPic
() == 0)

192 
MSEBa£dSNR
[
compID
] = 0 * 
dSÿË
;

197 cÚ¡ 
UIÁ
 
maxv®
 = 255 << (
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
compID
)] - 8);

198 cÚ¡ 
DoubË
 
MSE
 = 
m_ruÂšgTÙ®
.
MSEyuväame
[
compID
];

200 
MSEBa£dSNR
[
compID
] = (
MSE
 =ð0è? 999.99 : (10 * 
	`log10
((
maxv®
 * maxv®è/ (MSE / (
DoubË
)
	`g‘NumPic
())));

205 
chFmt
)

207 
CHROMA_400
:

208 ià(
logù¾
.
´štMSEBa£dSNR
)

210 
	`´štf
( " " );

213 
	`´štf
( "\tTotal Frames | " "Bitrate " "Y-PSNR " );

215 ià(
logù¾
.
´štMSSSIM
)

217 
	`´štf
( " Y-MS-SSIM ");

220 ià(
logù¾
.
´štXPSNR
)

222 
	`´štf
( " xPSNR ");

225 ià(
logù¾
.
´štSequ’ûMSE
)

227 
	`´štf
( " Y-MSE \n" );

231 
	`´štf
("\n");

235 ià(
logù¾
.
´štMSEBa£dSNR
)

237 
	`´štf
( "Average: ");

240 
	`´štf
( "\t %8d %c " "%12.4lf " "%8.4lf ",

241 
	`g‘NumPic
(), 
cD–im
,

242 
	`g‘B™s
(è* 
dSÿË
,

243 
	`g‘P¢r
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
() );

245 ià(
logù¾
.
´štMSSSIM
)

247 
	`´štf
(" %8.6là ", 
	`g‘Msssim
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
());

249 if(
logù¾
.
´štXPSNR
)

251 
	`´štf
(" %8.4lf ",

252 
	`g‘xPSNR
(è/ (
DoubË
)
	`g‘NumPic
());

255 ià(
logù¾
.
´štSequ’ûMSE
)

257 
	`´štf
Ð" %8.4là \n", 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Y
 ] / (
DoubË
)
	`g‘NumPic
() );

261 
	`´štf
("\n");

264 ià(
logù¾
.
´štMSEBa£dSNR
)

266 
	`´štf
( "From MSE:\t %8d %c " "%12.4lf " "%8.4lf\n",

267 
	`g‘NumPic
(), 
cD–im
,

268 
	`g‘B™s
(è* 
dSÿË
,

269 
MSEBa£dSNR
[
COMPONENT_Y
] );

273 
CHROMA_420
:

274 
CHROMA_422
:

275 
CHROMA_444
:

277 
DoubË
 
PSNRyuv
 = 
MAX_DOUBLE
;

278 
DoubË
 
MSEyuv
 = 
MAX_DOUBLE
;

280 
	`ÿlcuÏ‹CombšedV®ues
(
chFmt
, 
PSNRyuv
, 
MSEyuv
, 
b™D•ths
);

282 ià(
logù¾
.
´štMSEBa£dSNR
)

284 
	`´štf
( " " );

287 
	`´štf
( "\tTotal Frames | " "Bitrate " "Y-PSNR " "U-PSNR " "V-PSNR " "YUV-PSNR " );

289 ià(
logù¾
.
´štMSSSIM
)

291 
	`´štf
(" Y-MS-SSIM " "U-MS-SSIM " "V-MS-SSIM ");

293 ià(
logù¾
.
´štXPSNR
)

295 
	`´štf
( " xPSNR ");

298 #ià
EXTENSION_360_VIDEO


299 
m_ext360
.
	`´štH—d”
();

301 ià(
logù¾
.
´štSequ’ûMSE
)

303 
	`´štf
( " Y-MSE " "U-MSE " "V-MSE " "YUV-MSE \n" );

307 
	`´štf
("\n");

310 ià(
logù¾
.
´štMSEBa£dSNR
)

312 
	`´štf
( "Average: ");

315 
	`´štf
( "\t %8d %c " "%12.4lf " "%8.4lf " "%8.4lf " "%8.4lf " "%8.4lf ",

316 
	`g‘NumPic
(), 
cD–im
,

317 
	`g‘B™s
(è* 
dSÿË
,

318 
	`g‘P¢r
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
(),

319 
	`g‘P¢r
(
COMPONENT_Cb
è/ (
DoubË
)
	`g‘NumPic
(),

320 
	`g‘P¢r
(
COMPONENT_Cr
è/ (
DoubË
)
	`g‘NumPic
(),

321 
PSNRyuv
 );

323 ià(
logù¾
.
´štMSSSIM
)

325 
	`´štf
(" %8.6lf " "%8.6lf " "%8.6lf ",

326 
	`g‘Msssim
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
(),

327 
	`g‘Msssim
(
COMPONENT_Cb
è/ (
DoubË
)
	`g‘NumPic
(),

328 
	`g‘Msssim
(
COMPONENT_Cr
è/ (
DoubË
)
	`g‘NumPic
());

331 if(
logù¾
.
´štXPSNR
)

333 
	`´štf
(" %8.4lf ",

334 
	`g‘xPSNR
(è/ (
DoubË
)
	`g‘NumPic
());

337 #ià
EXTENSION_360_VIDEO


338 
m_ext360
.
	`´štPSNRs
(
	`g‘NumPic
());

341 ià(
logù¾
.
´štSequ’ûMSE
)

343 
	`´štf
( " %8.4lf " "%8.4lf " "%8.4lf " "%8.4lf \n",

344 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Y
 ] / (
DoubË
)
	`g‘NumPic
(),

345 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Cb
] / (
DoubË
)
	`g‘NumPic
(),

346 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Cr
] / (
DoubË
)
	`g‘NumPic
(),

347 
MSEyuv
 );

351 
	`´štf
("\n");

354 ià(
logù¾
.
´štMSEBa£dSNR
)

356 
	`´štf
( "From MSE:\t %8d %c " "%12.4lf " "%8.4lf " "%8.4lf " "%8.4lf " "%8.4lf\n",

357 
	`g‘NumPic
(), 
cD–im
,

358 
	`g‘B™s
(è* 
dSÿË
,

359 
MSEBa£dSNR
[
COMPONENT_Y
],

360 
MSEBa£dSNR
[
COMPONENT_Cb
],

361 
MSEBa£dSNR
[
COMPONENT_Cr
],

362 
PSNRyuv
 );

367 
	`årštf
(
¡d”r
, "Unknown format during…rint out\n");

368 
	`ex™
(1);

371 
	}
}

374 
Void
 
	$´štSumm¬y
(cÚ¡ 
ChromaFÜm©
 
chFmt
, cÚ¡ 
OuutLogCÚŒÞ
 &
logù¾
, cÚ¡ 
B™D•ths
 &
b™D•ths
, cÚ¡ 
¡d
::
¡ršg
 &
sFž’ame
)

376 
FILE
* 
pFže
 = 
	`fÝ’
 (
sFž’ame
.
	`c_¡r
(), "at");

378 
DoubË
 
dFps
 = 
m_dFrmR©e
;

379 
DoubË
 
dSÿË
 = 
dFps
 / 1000 / (DoubË)
m_uiNumPic
;

380 
chFmt
)

382 
CHROMA_400
:

383 
	`årštf
(
pFže
, "%f\t %f\n",

384 
	`g‘B™s
(è* 
dSÿË
,

385 
	`g‘P¢r
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
() );

387 
CHROMA_420
:

388 
CHROMA_422
:

389 
CHROMA_444
:

391 
DoubË
 
PSNRyuv
 = 
MAX_DOUBLE
;

392 
DoubË
 
MSEyuv
 = 
MAX_DOUBLE
;

394 
	`ÿlcuÏ‹CombšedV®ues
(
chFmt
, 
PSNRyuv
, 
MSEyuv
, 
b™D•ths
);

396 
	`årštf
(
pFže
, "%f\t %f\t %f\t %f\t %f",

397 
	`g‘B™s
(è* 
dSÿË
,

398 
	`g‘P¢r
(
COMPONENT_Y
è/ (
DoubË
)
	`g‘NumPic
(),

399 
	`g‘P¢r
(
COMPONENT_Cb
è/ (
DoubË
)
	`g‘NumPic
(),

400 
	`g‘P¢r
(
COMPONENT_Cr
è/ (
DoubË
)
	`g‘NumPic
(),

401 
PSNRyuv
 );

403 ià(
logù¾
.
´štSequ’ûMSE
)

405 
	`årštf
(
pFže
, "\t %f\t %f\t %f\t %f\n",

406 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Y
 ] / (
DoubË
)
	`g‘NumPic
(),

407 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Cb
] / (
DoubË
)
	`g‘NumPic
(),

408 
m_ruÂšgTÙ®
.
MSEyuväame
[
COMPONENT_Cr
] / (
DoubË
)
	`g‘NumPic
(),

409 
MSEyuv
 );

413 
	`årštf
(
pFže
, "\n");

420 
	`årštf
(
¡d”r
, "Unknown format during…rint out\n");

421 
	`ex™
(1);

425 
	`fþo£
(
pFže
);

426 
	}
}

429 
TEncAÇlyze
 
m_gcAÇlyzeAÎ
;

430 
TEncAÇlyze
 
m_gcAÇlyzeI
;

431 
TEncAÇlyze
 
m_gcAÇlyzeP
;

432 
TEncAÇlyze
 
m_gcAÇlyzeB
;

434 
TEncAÇlyze
 
m_gcAÇlyzeAÎ_š
;

	@source/Lib/TLibEncoder/TEncBinCoder.h

38 #iâdeà
__TENCBINCODER__


39 
	#__TENCBINCODER__


	)

41 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

42 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 
þass
 
	gTEncBšCABAC
;

49 þas 
	cTEncBšIf


51 
	mpublic
:

52 
vœtu®
 
Void
 
š™
 ( 
TComB™If
* 
pcTComB™If
 ) = 0;

53 
vœtu®
 
Void
 
unš™
 () = 0;

55 
vœtu®
 
Void
 
¡¬t
 () = 0;

56 
vœtu®
 
Void
 
fšish
 () = 0;

57 
vœtu®
 
Void
 
cÝyS‹
 ( cÚ¡ 
TEncBšIf
* 
pcTEncBšIf
 ) = 0;

58 
vœtu®
 
Void
 
æush
 () = 0;

60 
vœtu®
 
Void
 
»£tBac
 () = 0;

61 
vœtu®
 
Void
 
’codePCMAlignB™s
() = 0;

62 
vœtu®
 
Void
 
xWr™ePCMCode
 ( 
UIÁ
 
uiCode
, UIÁ 
uiL’gth
 ) = 0;

64 
vœtu®
 
Void
 
»£tB™s
 () = 0;

65 
vœtu®
 
UIÁ
 
g‘NumWr™‹nB™s
 () = 0;

67 
vœtu®
 
Void
 
’codeBš
 ( 
UIÁ
 
uiBš
, 
CÚ‹xtMod–
& 
rcCtxMod–
 ) = 0;

68 
vœtu®
 
Void
 
’codeBšEP
 ( 
UIÁ
 
uiBš
 ) = 0;

69 
vœtu®
 
Void
 
’codeBšsEP
 ( 
UIÁ
 
uiBšs
, 
IÁ
 
numBšs
 ) = 0;

70 
vœtu®
 
Void
 
’codeBšTrm
 ( 
UIÁ
 
uiBš
 ) = 0;

72 
vœtu®
 
Void
 
®ign
 () = 0;

74 
vœtu®
 
TEncBšCABAC
* 
	$g‘TEncBšCABAC
 () {  0; }

75 
vœtu®
 cÚ¡ 
TEncBšCABAC
* 
	$g‘TEncBšCABAC
 (ècÚ¡ {  0; 
	}
}

77 
	gvœtu®
 ~
	$TEncBšIf
(è{
	}
}

	@source/Lib/TLibEncoder/TEncBinCoderCABAC.cpp

38 
	~"TEncBšCod”CABAC.h
"

39 
	~"TLibCommÚ/TComRom.h
"

40 
	~"TLibCommÚ/Debug.h
"

46 
	gTEncBšCABAC
::
	$TEncBšCABAC
()

47 : 
	`m_pcTComB™If
( 0 )

48 , 
	$m_bšCouÁInüem’t
( 0 )

49 #ià
FAST_BIT_EST


50 , 
	$m_äacB™s
( 0 )

53 
	}
}

55 
	gTEncBšCABAC
::~
	$TEncBšCABAC
()

57 
	}
}

59 
Void
 
TEncBšCABAC
::
	$š™
Ð
TComB™If
* 
pcTComB™If
 )

61 
m_pcTComB™If
 = 
pcTComB™If
;

62 
	}
}

64 
Void
 
	gTEncBšCABAC
::
	$unš™
()

66 
m_pcTComB™If
 = 0;

67 
	}
}

69 
Void
 
	gTEncBšCABAC
::
	$¡¬t
()

71 
m_uiLow
 = 0;

72 
m_uiRªge
 = 510;

73 
m_b™sLeá
 = 23;

74 
m_numBufã»dBy‹s
 = 0;

75 
m_bufã»dBy‹
 = 0xff;

76 #ià
FAST_BIT_EST


77 
m_äacB™s
 = 0;

79 
	}
}

81 
Void
 
	gTEncBšCABAC
::
	$fšish
()

83 iàÐ
m_uiLow
 >> ( 32 - 
m_b™sLeá
 ) )

87 
m_pcTComB™If
->
	`wr™e
Ð
m_bufã»dBy‹
 + 1, 8 );

88  
m_numBufã»dBy‹s
 > 1 )

90 
m_pcTComB™If
->
	`wr™e
( 0x00, 8 );

91 
m_numBufã»dBy‹s
--;

93 
m_uiLow
 -ð1 << ( 32 - 
m_b™sLeá
 );

97 iàÐ
m_numBufã»dBy‹s
 > 0 )

99 
m_pcTComB™If
->
	`wr™e
Ð
m_bufã»dBy‹
, 8 );

101  
m_numBufã»dBy‹s
 > 1 )

103 
m_pcTComB™If
->
	`wr™e
( 0xff, 8 );

104 
m_numBufã»dBy‹s
--;

107 
m_pcTComB™If
->
	`wr™e
Ð
m_uiLow
 >> 8, 24 - 
m_b™sLeá
 );

108 
	}
}

110 
Void
 
	gTEncBšCABAC
::
	$æush
()

112 
	`’codeBšTrm
(1);

113 
	`fšish
();

114 
m_pcTComB™If
->
	`wr™e
(1, 1);

115 
m_pcTComB™If
->
	`wr™eAlignZ”o
();

117 
	`¡¬t
();

118 
	}
}

123 
Void
 
	gTEncBšCABAC
::
	$»£tBac
()

125 
	`¡¬t
();

126 
	}
}

131 
Void
 
	gTEncBšCABAC
::
	$’codePCMAlignB™s
()

133 
	`fšish
();

134 
m_pcTComB™If
->
	`wr™e
(1, 1);

135 
m_pcTComB™If
->
	`wr™eAlignZ”o
();

136 
	}
}

143 
Void
 
	gTEncBšCABAC
::
	$xWr™ePCMCode
(
UIÁ
 
uiCode
, UIÁ 
uiL’gth
)

145 
m_pcTComB™If
->
	`wr™e
(
uiCode
, 
uiL’gth
);

146 
	}
}

148 
Void
 
	gTEncBšCABAC
::
	$cÝyS‹
ÐcÚ¡ 
TEncBšIf
* 
pcTEncBšIf
 )

150 cÚ¡ 
TEncBšCABAC
* 
pcTEncBšCABAC
 = 
pcTEncBšIf
->
	`g‘TEncBšCABAC
();

151 
m_uiLow
 = 
pcTEncBšCABAC
->m_uiLow;

152 
m_uiRªge
 = 
pcTEncBšCABAC
->m_uiRange;

153 
m_b™sLeá
 = 
pcTEncBšCABAC
->m_bitsLeft;

154 
m_bufã»dBy‹
 = 
pcTEncBšCABAC
->m_bufferedByte;

155 
m_numBufã»dBy‹s
 = 
pcTEncBšCABAC
->m_numBufferedBytes;

156 #ià
FAST_BIT_EST


157 
m_äacB™s
 = 
pcTEncBšCABAC
->m_fracBits;

159 
	}
}

161 
Void
 
	gTEncBšCABAC
::
	$»£tB™s
()

163 
m_uiLow
 = 0;

164 
m_b™sLeá
 = 23;

165 
m_numBufã»dBy‹s
 = 0;

166 
m_bufã»dBy‹
 = 0xff;

167 iàÐ
m_bšCouÁInüem’t
 )

169 
m_uiBšsCoded
 = 0;

171 #ià
FAST_BIT_EST


172 
m_äacB™s
 &= 32767;

174 
	}
}

176 
UIÁ
 
	gTEncBšCABAC
::
	$g‘NumWr™‹nB™s
()

178  
m_pcTComB™If
->
	`g‘Numb”OfWr™‹nB™s
(è+ 8 * 
m_numBufã»dBy‹s
 + 23 - 
m_b™sLeá
;

179 
	}
}

187 
Void
 
	gTEncBšCABAC
::
	$’codeBš
Ð
UIÁ
 
bšV®ue
, 
CÚ‹xtMod–
 &
rcCtxMod–
 )

198 #ià
DEBUG_CABAC_BINS


199 cÚ¡ 
UIÁ
 
¡¬tšgRªge
 = 
m_uiRªge
;

202 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

203 
rcCtxMod–
.
	`£tBšsCoded
( 1 );

205 
UIÁ
 
uiLPS
 = 
TComCABACTabËs
::
sm_aucLPSTabË
[ 
rcCtxMod–
.
	`g‘S‹
(è][ ( 
m_uiRªge
 >> 6 ) & 3 ];

206 
m_uiRªge
 -ð
uiLPS
;

208 ifÐ
bšV®ue
 !ð
rcCtxMod–
.
	`g‘Mps
() )

210 
IÁ
 
numB™s
 = 
TComCABACTabËs
::
sm_aucR’ÜmTabË
[ 
uiLPS
 >> 3 ];

211 
m_uiLow
 = ( m_uiLow + 
m_uiRªge
 ) << 
numB™s
;

212 
m_uiRªge
 = 
uiLPS
 << 
numB™s
;

213 
rcCtxMod–
.
	`upd©eLPS
();

214 
m_b™sLeá
 -ð
numB™s
;

215 
	`‹¡AndWr™eOut
();

219 
rcCtxMod–
.
	`upd©eMPS
();

221 iàÐ
m_uiRªge
 < 256 )

223 
m_uiLow
 <<= 1;

224 
m_uiRªge
 <<= 1;

225 
m_b™sLeá
--;

226 
	`‹¡AndWr™eOut
();

230 #ià
DEBUG_CABAC_BINS


231 ià((
g_debugCouÁ”
 + 
debugCabacBšWšdow
è>ð
debugCabacBšT¬g‘Lše
)

233 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": codšg bš v®u" << 
bšV®ue
 << ",„ªgð[" << 
¡¬tšgRªge
 << "->" << 
m_uiRªge
 << "]\n";

236 ià(
g_debugCouÁ”
 >ð
debugCabacBšT¬g‘Lše
)

238 
UCh¬
 
b»akPoštThis
;

239 
b»akPoštThis
 = 7;

241 ià(
g_debugCouÁ”
 >ð(
debugCabacBšT¬g‘Lše
 + 
debugCabacBšWšdow
))

243 
	`ex™
(0);

246 
g_debugCouÁ”
++;

248 
	}
}

255 
Void
 
	gTEncBšCABAC
::
	$’codeBšEP
Ð
UIÁ
 
bšV®ue
 )

257 ià(
çl£
)

259 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

260 
	`DTRACE_CABAC_T
( "\tEPsymbol=" )

261 
	`DTRACE_CABAC_V
Ð
bšV®ue
 )

262 
	`DTRACE_CABAC_T
( "\n" )

265 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

267 ià(
m_uiRªge
 == 256)

269 
	`’codeAligÃdBšsEP
(
bšV®ue
, 1);

273 
m_uiLow
 <<= 1;

274 ifÐ
bšV®ue
 )

276 
m_uiLow
 +ð
m_uiRªge
;

278 
m_b™sLeá
--;

280 
	`‹¡AndWr™eOut
();

281 
	}
}

289 
Void
 
	gTEncBšCABAC
::
	$’codeBšsEP
Ð
UIÁ
 
bšV®ues
, 
IÁ
 
numBšs
 )

291 
m_uiBšsCoded
 +ð
numBšs
 & -
m_bšCouÁInüem’t
;

293 ià(
çl£
)

295  
IÁ
 
i
 = 0; i < 
numBšs
; i++ )

297 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

298 
	`DTRACE_CABAC_T
( "\tEPsymbol=" )

299 
	`DTRACE_CABAC_V
ÐÐ
bšV®ues
 >> ( 
numBšs
 - 1 - 
i
 ) ) & 1 )

300 
	`DTRACE_CABAC_T
( "\n" )

304 ià(
m_uiRªge
 == 256)

306 
	`’codeAligÃdBšsEP
(
bšV®ues
, 
numBšs
);

310  
numBšs
 > 8 )

312 
numBšs
 -= 8;

313 
UIÁ
 
·‰”n
 = 
bšV®ues
 >> 
numBšs
;

314 
m_uiLow
 <<= 8;

315 
m_uiLow
 +ð
m_uiRªge
 * 
·‰”n
;

316 
bšV®ues
 -ð
·‰”n
 << 
numBšs
;

317 
m_b™sLeá
 -= 8;

319 
	`‹¡AndWr™eOut
();

322 
m_uiLow
 <<ð
numBšs
;

323 
m_uiLow
 +ð
m_uiRªge
 * 
bšV®ues
;

324 
m_b™sLeá
 -ð
numBšs
;

326 
	`‹¡AndWr™eOut
();

327 
	}
}

329 
Void
 
	gTEncBšCABAC
::
	$®ign
()

331 
m_uiRªge
 = 256;

332 
	}
}

334 
Void
 
	gTEncBšCABAC
::
	$’codeAligÃdBšsEP
Ð
UIÁ
 
bšV®ues
, 
IÁ
 
numBšs
 )

336 
IÁ
 
bšsRemaššg
 = 
numBšs
;

338 
	`as£¹
(
m_uiRªge
 == 256);

340 
bšsRemaššg
 > 0)

342 cÚ¡ 
UIÁ
 
bšsToCode
 = 
¡d
::
mš
<UIÁ>(
bšsRemaššg
, 8);

343 cÚ¡ 
UIÁ
 
bšMask
 = (1 << 
bšsToCode
) - 1;

345 cÚ¡ 
UIÁ
 
ÃwBšs
 = (
bšV®ues
 >> (
bšsRemaššg
 - 
bšsToCode
)è& 
bšMask
;

362 
m_uiLow
 = (m_uiLow << 
bšsToCode
è+ (
ÃwBšs
 << 8);

364 
bšsRemaššg
 -ð
bšsToCode
;

365 
m_b™sLeá
 -ð
bšsToCode
;

367 
	`‹¡AndWr™eOut
();

369 
	}
}

376 
Void
 
	gTEncBšCABAC
::
	$’codeBšTrm
Ð
UIÁ
 
bšV®ue
 )

378 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

379 
m_uiRªge
 -= 2;

380 ifÐ
bšV®ue
 )

382 
m_uiLow
 +ð
m_uiRªge
;

383 
m_uiLow
 <<= 7;

384 
m_uiRªge
 = 2 << 7;

385 
m_b™sLeá
 -= 7;

387 iàÐ
m_uiRªge
 >= 256 )

393 
m_uiLow
 <<= 1;

394 
m_uiRªge
 <<= 1;

395 
m_b™sLeá
--;

398 
	`‹¡AndWr™eOut
();

399 
	}
}

401 
Void
 
	gTEncBšCABAC
::
	$‹¡AndWr™eOut
()

403 iàÐ
m_b™sLeá
 < 12 )

405 
	`wr™eOut
();

407 
	}
}

412 
Void
 
	gTEncBšCABAC
::
	$wr™eOut
()

414 
UIÁ
 
ËadBy‹
 = 
m_uiLow
 >> (24 - 
m_b™sLeá
);

415 
m_b™sLeá
 += 8;

416 
m_uiLow
 &ð0xffffffffu >> 
m_b™sLeá
;

418 iàÐ
ËadBy‹
 == 0xff )

420 
m_numBufã»dBy‹s
++;

424 iàÐ
m_numBufã»dBy‹s
 > 0 )

426 
UIÁ
 
ÿ¼y
 = 
ËadBy‹
 >> 8;

427 
UIÁ
 
by‹
 = 
m_bufã»dBy‹
 + 
ÿ¼y
;

428 
m_bufã»dBy‹
 = 
ËadBy‹
 & 0xff;

429 
m_pcTComB™If
->
	`wr™e
Ð
by‹
, 8 );

431 
by‹
 = ( 0xfà+ 
ÿ¼y
 ) & 0xff;

432  
m_numBufã»dBy‹s
 > 1 )

434 
m_pcTComB™If
->
	`wr™e
Ð
by‹
, 8 );

435 
m_numBufã»dBy‹s
--;

440 
m_numBufã»dBy‹s
 = 1;

441 
m_bufã»dBy‹
 = 
ËadBy‹
;

444 
	}
}

	@source/Lib/TLibEncoder/TEncBinCoderCABAC.h

38 #iâdeà
__TENCBINCODERCABAC__


39 
	#__TENCBINCODERCABAC__


	)

41 
	~"TLibCommÚ/TComCABACTabËs.h
"

42 
	~"TEncBšCod”.h
"

47 þas 
	cTEncBšCABAC
 : 
public
 
TEncBšIf


49 
public
:

50 
TEncBšCABAC
 ();

51 
	mvœtu®
 ~
TEncBšCABAC
();

53 
Void
 
š™
 ( 
TComB™If
* 
pcTComB™If
 );

54 
Void
 
unš™
 ();

56 
Void
 
¡¬t
 ();

57 
Void
 
fšish
 ();

58 
Void
 
cÝyS‹
 ( cÚ¡ 
TEncBšIf
* 
pcTEncBšIf
 );

59 
Void
 
æush
 ();

61 
Void
 
»£tBac
 ();

62 
Void
 
’codePCMAlignB™s
();

63 
Void
 
xWr™ePCMCode
 ( 
UIÁ
 
uiCode
, UIÁ 
uiL’gth
 );

65 
Void
 
»£tB™s
 ();

66 
UIÁ
 
g‘NumWr™‹nB™s
 ();

68 
Void
 
’codeBš
 ( 
UIÁ
 
bšV®ue
, 
CÚ‹xtMod–
& 
rcCtxMod–
 );

69 
Void
 
’codeBšEP
 ( 
UIÁ
 
bšV®ue
 );

70 
Void
 
’codeBšsEP
 ( 
UIÁ
 
bšV®ues
, 
IÁ
 
numBšs
 );

71 
Void
 
’codeBšTrm
 ( 
UIÁ
 
bšV®ue
 );

73 
Void
 
®ign
 ();

74 
Void
 
’codeAligÃdBšsEP
Ð
UIÁ
 
bšV®ues
, 
IÁ
 
numBšs
 );

76 
TEncBšCABAC
* 
	$g‘TEncBšCABAC
(è{  
this
; }

77 cÚ¡ 
TEncBšCABAC
* 
	$g‘TEncBšCABAC
(ècÚ¡ {  
this
; 
	}
}

79 
Void
 
	$£tBšsCoded
 ( 
UIÁ
 
uiV®
 ) { 
m_uiBšsCoded
 = uiV®; 
	}
}

80 
UIÁ
 
	$g‘BšsCoded
 (è{  
m_uiBšsCoded
; 
	}
}

81 
Void
 
	$£tBšCouÁšgEÇbËFÏg
 ( 
BoÞ
 
bFÏg
 ) { 
m_bšCouÁInüem’t
 = bFÏg ? 1 : 0; 
	}
}

82 
BoÞ
 
	$g‘BšCouÁšgEÇbËFÏg
 (è{  
m_bšCouÁInüem’t
 !ð0; 
	}
}

84 #ià
FAST_BIT_EST


85 
	g´Ùeùed
:

87 
´iv©e
:

89 
Void
 
‹¡AndWr™eOut
();

90 
Void
 
wr™eOut
();

92 
TComB™If
* 
	gm_pcTComB™If
;

93 
UIÁ
 
	gm_uiLow
;

94 
UIÁ
 
	gm_uiRªge
;

95 
UIÁ
 
	gm_bufã»dBy‹
;

96 
IÁ
 
	gm_numBufã»dBy‹s
;

97 
IÁ
 
	gm_b™sLeá
;

98 
UIÁ
 
	gm_uiBšsCoded
;

99 
IÁ
 
	gm_bšCouÁInüem’t
;

100 #ià
FAST_BIT_EST


101 
UIÁ64
 
	gm_äacB™s
;

	@source/Lib/TLibEncoder/TEncBinCoderCABACCounter.cpp

38 
	~"TEncBšCod”CABACCouÁ”.h
"

39 
	~"TLibCommÚ/TComRom.h
"

40 
	~"TLibCommÚ/Debug.h
"

43 #ià
FAST_BIT_EST


49 
	gTEncBšCABACCouÁ”
::
	$TEncBšCABACCouÁ”
()

51 
	}
}

53 
TEncBšCABACCouÁ”
::~
	$TEncBšCABACCouÁ”
()

55 
	}
}

57 
Void
 
TEncBšCABACCouÁ”
::
	$fšish
()

59 
m_pcTComB™If
->
	`wr™e
(0, 
	`UIÁ
(
m_äacB™s
 >> 15) );

60 
m_äacB™s
 &= 32767;

61 
	}
}

63 
UIÁ
 
	gTEncBšCABACCouÁ”
::
	$g‘NumWr™‹nB™s
()

65  
m_pcTComB™If
->
	`g‘Numb”OfWr™‹nB™s
(è+ 
	`UIÁ
Ð
m_äacB™s
 >> 15 );

66 
	}
}

74 
Void
 
	gTEncBšCABACCouÁ”
::
	$’codeBš
Ð
UIÁ
 
bšV®ue
, 
CÚ‹xtMod–
 &
rcCtxMod–
 )

76 #ià
DEBUG_ENCODER_SEARCH_BINS


77 cÚ¡ 
UIÁ64
 
¡¬tšgF¿cB™s
 = 
m_äacB™s
;

80 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

81 
m_äacB™s
 +ð
rcCtxMod–
.
	`g‘EÁrÝyB™s
Ð
bšV®ue
 );

82 
rcCtxMod–
.
	`upd©e
Ð
bšV®ue
 );

84 #ià
DEBUG_ENCODER_SEARCH_BINS


85 ià((
g_debugCouÁ”
 + 
debugEncod”S—rchBšWšdow
è>ð
debugEncod”S—rchBšT¬g‘Lše
)

87 
¡d
::
cout
 << 
g_debugCouÁ”
 << ": codšg bš v®u" << 
bšV®ue
 << ", f¿cB™ ð[" << 
¡¬tšgF¿cB™s
 << "->" << 
m_äacB™s
 << "]\n";

90 ià(
g_debugCouÁ”
 >ð
debugEncod”S—rchBšT¬g‘Lše
)

92 
UCh¬
 
b»akPoštThis
;

93 
b»akPoštThis
 = 7;

95 ià(
g_debugCouÁ”
 >ð(
debugEncod”S—rchBšT¬g‘Lše
 + 
debugEncod”S—rchBšWšdow
))

97 
	`ex™
(0);

99 
g_debugCouÁ”
++;

101 
	}
}

108 
Void
 
	gTEncBšCABACCouÁ”
::
	$’codeBšEP
Ð
UIÁ
 )

110 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

111 
m_äacB™s
 += 32768;

112 
	}
}

120 
Void
 
	gTEncBšCABACCouÁ”
::
	$’codeBšsEP
Ð
UIÁ
 , 
IÁ
 
numBšs
 )

122 
m_uiBšsCoded
 +ð
numBšs
 & -
m_bšCouÁInüem’t
;

123 
m_äacB™s
 +ð32768 * 
numBšs
;

124 
	}
}

131 
Void
 
	gTEncBšCABACCouÁ”
::
	$’codeBšTrm
Ð
UIÁ
 
bšV®ue
 )

133 
m_uiBšsCoded
 +ð
m_bšCouÁInüem’t
;

134 
m_äacB™s
 +ð
CÚ‹xtMod–
::
	`g‘EÁrÝyB™sTrm
Ð
bšV®ue
 );

135 
	}
}

137 
Void
 
	gTEncBšCABACCouÁ”
::
	$®ign
()

139 
m_äacB™s
 = (m_fracBits + 32767) & (~32767);

140 
	}
}

	@source/Lib/TLibEncoder/TEncBinCoderCABACCounter.h

38 #iâdeà
__TENCBINCODERCABACCOUNTER__


39 
	#__TENCBINCODERCABACCOUNTER__


	)

42 
	~"TEncBšCod”CABAC.h
"

44 #ià
FAST_BIT_EST


50 þas 
	cTEncBšCABACCouÁ”
 : 
public
 
TEncBšCABAC


52 
public
:

53 
TEncBšCABACCouÁ”
 ();

54 
	mvœtu®
 ~
TEncBšCABACCouÁ”
();

56 
Void
 
fšish
 ();

57 
UIÁ
 
g‘NumWr™‹nB™s
 ();

59 
Void
 
’codeBš
 ( 
UIÁ
 
bšV®ue
, 
CÚ‹xtMod–
& 
rcCtxMod–
 );

60 
Void
 
’codeBšEP
 ( 
UIÁ
 
bšV®ue
 );

61 
Void
 
’codeBšsEP
 ( 
UIÁ
 
bšV®ues
, 
IÁ
 
numBšs
 );

62 
Void
 
’codeBšTrm
 ( 
UIÁ
 
bšV®ue
 );

64 
Void
 
®ign
 ();

66 
	m´iv©e
:

	@source/Lib/TLibEncoder/TEncCavlc.cpp

38 
	~"../TLibCommÚ/CommÚDef.h
"

39 
	~"TEncCavlc.h
"

40 
	~"SEIwr™e.h
"

45 #ià
ENC_DEC_TRACE


46 #ià
MCTS_EXTRACTION


47 
Void
 
	$xT¿ûVPSH—d”Enc
()

49 
Void
 
	$xT¿ûVPSH—d”
()

52 
	`årštf
Ð
g_hT¿û
, "=========== Video Parameter Set ===========\n" );

53 
	}
}

55 #ià
MCTS_EXTRACTION


56 
Void
 
	$xT¿ûSPSH—d”Enc
()

58 
Void
 
	$xT¿ûSPSH—d”
()

61 
	`årštf
Ð
g_hT¿û
, "=========== Sequence Parameter Set ===========\n" );

62 
	}
}

64 #ià
MCTS_EXTRACTION


65 
Void
 
	$xT¿ûPPSH—d”Enc
()

67 
Void
 
	$xT¿ûPPSH—d”
()

70 
	`årštf
Ð
g_hT¿û
, "=========== Picture Parameter Set ===========\n");

71 
	}
}

73 #ià
MCTS_EXTRACTION


74 
Void
 
	$xT¿ûSliûH—d”Enc
()

76 
Void
 
	$xT¿ûSliûH—d”
()

79 
	`årštf
Ð
g_hT¿û
, "=========== Slice ===========\n");

80 
	}
}

82 #ià
MCTS_EXTRACTION


83 
Void
 
	$xT¿ûAcûssUn™D–im™”Enc
()

85 
Void
 
	$xT¿ûAcûssUn™D–im™”
()

88 
	`årštf
Ð
g_hT¿û
, "=========== Access Unit Delimiter ===========\n");

89 
	}
}

93 
Void
 
	gAUDWr™”
::
	$codeAUD
(
TComB™If
& 
bs
, cÚ¡ 
IÁ
 
piùu»Ty³
)

95 #ià
ENC_DEC_TRACE


96 #ià
MCTS_EXTRACTION


97 
	`xT¿ûAcûssUn™D–im™”Enc
();

99 
	`xT¿ûAcûssUn™D–im™”
();

103 
	`as£¹
 (
piùu»Ty³
 < 3);

104 
	`£tB™¡»am
(&
bs
);

105 
	`WRITE_CODE
(
piùu»Ty³
, 3, "pic_type");

106 
	`xWr™eRb¥T¿žšgB™s
();

107 
	}
}

113 
	gTEncCavlc
::
	$TEncCavlc
()

115 
m_pcB™If
 = 
NULL
;

116 
	}
}

118 
	gTEncCavlc
::~
	$TEncCavlc
()

120 
	}
}

127 
Void
 
TEncCavlc
::
	$»£tEÁrÝy
(cÚ¡ 
TComSliû
* )

129 
	}
}

132 
Void
 
TEncCavlc
::
	$codeShÜtT”mRefPicS‘
ÐcÚ¡ 
TComReã»nûPiùu»S‘
* 
½s
, 
BoÞ
 
ÿÎedFromSliûH—d”
, 
IÁ
 
idx
)

134 #ià
PRINT_RPS_INFO


135 
IÁ
 
Ï¡B™s
 = 
	`g‘Numb”OfWr™‹nB™s
();

137 ià(
idx
 > 0)

139 
	`WRITE_FLAG
Ð
½s
->
	`g‘IÁ”RPSP»diùiÚ
(), "inter_ref_pic_set_prediction_flag" );

141 ià(
½s
->
	`g‘IÁ”RPSP»diùiÚ
())

143 
IÁ
 
d–RPS
 = 
½s
->
	`g‘D–RPS
();

144 if(
ÿÎedFromSliûH—d”
)

146 
	`WRITE_UVLC
Ð
½s
->
	`g‘D–RIdxMšus1
(), "delta_idx_minus1" );

149 
	`WRITE_CODE
Ð(
d–RPS
 >=0 ? 0: 1), 1, "delta_rps_sign" );

150 
	`WRITE_UVLC
Ð
	`abs
(
d–RPS
) - 1, "abs_delta_rps_minus1");

152 
IÁ
 
j
=0; j < 
½s
->
	`g‘NumRefIdc
(); j++)

154 
IÁ
 
»fIdc
 = 
½s
->
	`g‘RefIdc
(
j
);

155 
	`WRITE_CODE
Ð(
»fIdc
==1? 1: 0), 1, "used_by_curr_pic_flag" );

156 ià(
»fIdc
 != 1)

158 
	`WRITE_CODE
Ð
»fIdc
>>1, 1, "use_delta_flag" );

164 
	`WRITE_UVLC
Ð
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(), "num_negative_pics" );

165 
	`WRITE_UVLC
Ð
½s
->
	`g‘Numb”OfPos™ivePiùu»s
(), "num_positive_pics" );

166 
IÁ
 
´ev
 = 0;

167 
IÁ
 
j
=0 ; j < 
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(); j++)

169 
	`WRITE_UVLC
Ð
´ev
-
½s
->
	`g‘D–POC
(
j
)-1, "delta_poc_s0_minus1" );

170 
´ev
 = 
½s
->
	`g‘D–POC
(
j
);

171 
	`WRITE_FLAG
Ð
½s
->
	`g‘U£d
(
j
), "used_by_curr_pic_s0_flag");

173 
´ev
 = 0;

174 
IÁ
 
j
=
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(); j <„ps->g‘Numb”OfNeg©ivePiùu»s()+½s->
	`g‘Numb”OfPos™ivePiùu»s
(); j++)

176 
	`WRITE_UVLC
Ð
½s
->
	`g‘D–POC
(
j
)-
´ev
-1, "delta_poc_s1_minus1" );

177 
´ev
 = 
½s
->
	`g‘D–POC
(
j
);

178 
	`WRITE_FLAG
Ð
½s
->
	`g‘U£d
(
j
), "used_by_curr_pic_s1_flag" );

182 #ià
PRINT_RPS_INFO


183 
	`´štf
("œps=%d (%2d b™sè", 
½s
->
	`g‘IÁ”RPSP»diùiÚ
(), 
	`g‘Numb”OfWr™‹nB™s
(è- 
Ï¡B™s
);

184 
½s
->
	`´štD–POC
();

186 
	}
}

189 
Void
 
	gTEncCavlc
::
	$codePPS
ÐcÚ¡ 
TComPPS
* 
pcPPS
 )

191 #ià
ENC_DEC_TRACE


192 #ià
MCTS_EXTRACTION


193 
	`xT¿ûPPSH—d”Enc
();

195 
	`xT¿ûPPSH—d”
();

199 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘PPSId
(), "pps_pic_parameter_set_id" );

200 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘SPSId
(), "pps_seq_parameter_set_id" );

201 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
() ? 1 : 0, "dependent_slice_segments_enabled_flag" );

202 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘OuutFÏgP»£ÁFÏg
() ? 1 : 0, "output_flag_present_flag" );

203 
	`WRITE_CODE
Ð
pcPPS
->
	`g‘NumExŒaSliûH—d”B™s
(), 3, "num_extra_slice_header_bits");

204 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘SignD©aHidšgEÇbËdFÏg
(), "sign_data_hiding_enabled_flag" );

205 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘CabacIn™P»£ÁFÏg
() ? 1 : 0, "cabac_init_present_flag" );

206 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘NumRefIdxL0DeçuÉAùive
()-1, "num_ref_idx_l0_default_active_minus1");

207 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘NumRefIdxL1DeçuÉAùive
()-1, "num_ref_idx_l1_default_active_minus1");

209 
	`WRITE_SVLC
Ð
pcPPS
->
	`g‘PicIn™QPMšus26
(), "init_qp_minus26");

210 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘CÚ¡¿šedIÁ¿P»d
() ? 1 : 0, "constrained_intra_pred_flag" );

211 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘U£T¿nsfÜmSk
() ? 1 : 0, "transform_skip_enabled_flag" );

212 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘U£DQP
() ? 1 : 0, "cu_qp_delta_enabled_flag" );

213 iàÐ
pcPPS
->
	`g‘U£DQP
() )

215 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘MaxCuDQPD•th
(), "diff_cu_qp_delta_depth" );

218 
	`WRITE_SVLC
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cb
), "pps_cb_qp_offset" );

219 
	`WRITE_SVLC
Ð
pcPPS
->
	`g‘QpOff£t
(
COMPONENT_Cr
), "pps_cr_qp_offset" );

221 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘SliûChromaQpFÏg
() ? 1 : 0, "pps_slice_chroma_qp_offsets_present_flag" );

223 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘U£WP
() ? 1 : 0, "weighted_pred_flag" );

224 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘WPBiP»d
() ? 1 : 0, "weighted_bipred_flag" );

225 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
() ? 1 : 0, "transquant_bypass_enabled_flag" );

226 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘TžesEÇbËdFÏg
() ? 1 : 0, "tiles_enabled_flag" );

227 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
() ? 1 : 0, "entropy_coding_sync_enabled_flag" );

228 ifÐ
pcPPS
->
	`g‘TžesEÇbËdFÏg
() )

230 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘NumTžeCÞumnsMšus1
(), "num_tile_columns_minus1" );

231 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘NumTžeRowsMšus1
(), "num_tile_rows_minus1" );

232 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘TžeUnifÜmS·cšgFÏg
(), "uniform_spacing_flag" );

233 ifÐ!
pcPPS
->
	`g‘TžeUnifÜmS·cšgFÏg
() )

235 
UIÁ
 
i
=0; i<
pcPPS
->
	`g‘NumTžeCÞumnsMšus1
(); i++)

237 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘TžeCÞumnWidth
(
i
)-1, "column_width_minus1" );

239 
UIÁ
 
i
=0; i<
pcPPS
->
	`g‘NumTžeRowsMšus1
(); i++)

241 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘TžeRowHeight
(
i
)-1, "row_height_minus1" );

244 
	`as£¹
 ((
pcPPS
->
	`g‘NumTžeCÞumnsMšus1
(è+…cPPS->
	`g‘NumTžeRowsMšus1
()) != 0);

245 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘LoÝFž‹rAüossTžesEÇbËdFÏg
()?1 : 0, "loop_filter_across_tiles_enabled_flag");

247 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
()?1 : 0, "pps_loop_filter_across_slices_enabled_flag");

248 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
()?1 : 0, "deblocking_filter_control_present_flag");

249 if(
pcPPS
->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
())

251 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
() ? 1 : 0, "deblocking_filter_override_enabled_flag" );

252 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() ? 1 : 0, "pps_deblocking_filter_disabled_flag" );

253 if(!
pcPPS
->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
())

255 
	`WRITE_SVLC
Ð
pcPPS
->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
(), "pps_beta_offset_div2" );

256 
	`WRITE_SVLC
Ð
pcPPS
->
	`g‘DeblockšgFž‹rTcOff£tDiv2
(), "pps_tc_offset_div2" );

259 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
() ? 1 : 0, "pps_scaling_list_data_present_flag" );

260 ifÐ
pcPPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
() )

262 
	`codeSÿlšgLi¡
Ð
pcPPS
->
	`g‘SÿlšgLi¡
() );

264 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘Li¡sModifiÿtiÚP»£ÁFÏg
(), "lists_modification_present_flag");

265 
	`WRITE_UVLC
Ð
pcPPS
->
	`g‘Log2P¬®ËlM”geLev–Mšus2
(), "log2_parallel_merge_level_minus2");

266 
	`WRITE_FLAG
Ð
pcPPS
->
	`g‘SliûH—d”Ex‹nsiÚP»£ÁFÏg
() ? 1 : 0, "slice_segment_header_extension_present_flag");

268 
BoÞ
 
µs_ex‹nsiÚ_´e£Á_æag
=
çl£
;

269 
BoÞ
 
µs_ex‹nsiÚ_æags
[
NUM_PPS_EXTENSION_FLAGS
]={
çl£
};

271 
µs_ex‹nsiÚ_æags
[
PPS_EXT__REXT
] = 
pcPPS
->
	`g‘PpsRªgeEx‹nsiÚ
().
	`£‰šgsDifãrFromDeçuÉs
ÕcPPS->
	`g‘U£T¿nsfÜmSk
());

275 
IÁ
 
i
=0; i<
NUM_PPS_EXTENSION_FLAGS
; i++)

277 
µs_ex‹nsiÚ_´e£Á_æag
|=
µs_ex‹nsiÚ_æags
[
i
];

280 
	`WRITE_FLAG
Ð(
µs_ex‹nsiÚ_´e£Á_æag
?1:0), "pps_extension_present_flag" );

282 ià(
µs_ex‹nsiÚ_´e£Á_æag
)

284 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


285 cÚ¡ 
TCh¬
 *
syÁaxSŒšgs
[]={ "pps_range_extension_flag",

295 
IÁ
 
i
=0; i<
NUM_PPS_EXTENSION_FLAGS
; i++)

297 
	`WRITE_FLAG
Ð
µs_ex‹nsiÚ_æags
[
i
]?1:0, 
syÁaxSŒšgs
[i] );

300 
IÁ
 
i
=0; i<
NUM_PPS_EXTENSION_FLAGS
; i++)

302 ià(
µs_ex‹nsiÚ_æags
[
i
])

304 
	`PPSEx‹nsiÚFÏgIndex
(
i
))

306 
PPS_EXT__REXT
:

308 cÚ¡ 
TComPPSRExt
 &
µsRªgeEx‹nsiÚ
 = 
pcPPS
->
	`g‘PpsRªgeEx‹nsiÚ
();

309 ià(
pcPPS
->
	`g‘U£T¿nsfÜmSk
())

311 
	`WRITE_UVLC
Ð
µsRªgeEx‹nsiÚ
.
	`g‘Log2MaxT¿nsfÜmSkBlockSize
()-2, "log2_max_transform_skip_block_size_minus2");

314 
	`WRITE_FLAG
((
µsRªgeEx‹nsiÚ
.
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
() ? 1 : 0), "cross_component_prediction_enabled_flag" );

316 
	`WRITE_FLAG
(
	`UIÁ
(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
()), "chroma_qp_offset_list_enabled_flag" );

317 ià(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
())

319 
	`WRITE_UVLC
(
µsRªgeEx‹nsiÚ
.
	`g‘DiffCuChromaQpOff£tD•th
(), "diff_cu_chroma_qp_offset_depth");

320 
	`WRITE_UVLC
(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡L’
() - 1, "chroma_qp_offset_list_len_minus1");

322 
IÁ
 
cuChromaQpOff£tIdx
 = 0; cuChromaQpOff£tIdx < 
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡L’
(); cuChromaQpOffsetIdx++)

324 
	`WRITE_SVLC
(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡EÁry
(
cuChromaQpOff£tIdx
+1).
u
.
comp
.
CbOff£t
, "cb_qp_offset_list[i]");

325 
	`WRITE_SVLC
(
µsRªgeEx‹nsiÚ
.
	`g‘ChromaQpOff£tLi¡EÁry
(
cuChromaQpOff£tIdx
+1).
u
.
comp
.
CrOff£t
, "cr_qp_offset_list[i]");

329 
	`WRITE_UVLC
Ð
µsRªgeEx‹nsiÚ
.
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
), "log2_sao_offset_scale_luma" );

330 
	`WRITE_UVLC
Ð
µsRªgeEx‹nsiÚ
.
	`g‘Log2SaoOff£tSÿË
(
CHANNEL_TYPE_CHROMA
), "log2_sao_offset_scale_chroma" );

334 
	`as£¹
(
µs_ex‹nsiÚ_æags
[
i
]==
çl£
);

340 
	`xWr™eRb¥T¿žšgB™s
();

341 
	}
}

343 
Void
 
	gTEncCavlc
::
	$codeVUI
ÐcÚ¡ 
TComVUI
 *
pcVUI
, cÚ¡ 
TComSPS
* 
pcSPS
 )

345 #ià
ENC_DEC_TRACE


346 
	`årštf
Ð
g_hT¿û
, "----------- vui_parameters -----------\n");

348 
	`WRITE_FLAG
(
pcVUI
->
	`g‘A¥eùR©ioInfoP»£ÁFÏg
(), "aspect_ratio_info_present_flag");

349 ià(
pcVUI
->
	`g‘A¥eùR©ioInfoP»£ÁFÏg
())

351 
	`WRITE_CODE
(
pcVUI
->
	`g‘A¥eùR©ioIdc
(), 8, "aspect_ratio_idc" );

352 ià(
pcVUI
->
	`g‘A¥eùR©ioIdc
() == 255)

354 
	`WRITE_CODE
(
pcVUI
->
	`g‘S¬Width
(), 16, "sar_width");

355 
	`WRITE_CODE
(
pcVUI
->
	`g‘S¬Height
(), 16, "sar_height");

358 
	`WRITE_FLAG
(
pcVUI
->
	`g‘Ov”sÿnInfoP»£ÁFÏg
(), "overscan_info_present_flag");

359 ià(
pcVUI
->
	`g‘Ov”sÿnInfoP»£ÁFÏg
())

361 
	`WRITE_FLAG
(
pcVUI
->
	`g‘Ov”sÿnAµrÝrŸ‹FÏg
(), "overscan_appropriate_flag");

363 
	`WRITE_FLAG
(
pcVUI
->
	`g‘VideoSigÇlTy³P»£ÁFÏg
(), "video_signal_type_present_flag");

364 ià(
pcVUI
->
	`g‘VideoSigÇlTy³P»£ÁFÏg
())

366 
	`WRITE_CODE
(
pcVUI
->
	`g‘VideoFÜm©
(), 3, "video_format");

367 
	`WRITE_FLAG
(
pcVUI
->
	`g‘VideoFuÎRªgeFÏg
(), "video_full_range_flag");

368 
	`WRITE_FLAG
(
pcVUI
->
	`g‘CÞourDesütiÚP»£ÁFÏg
(), "colour_description_present_flag");

369 ià(
pcVUI
->
	`g‘CÞourDesütiÚP»£ÁFÏg
())

371 
	`WRITE_CODE
(
pcVUI
->
	`g‘CÞourPrim¬›s
(), 8, "colour_primaries");

372 
	`WRITE_CODE
(
pcVUI
->
	`g‘T¿nsãrCh¬aù”i¡ics
(), 8, "transfer_characteristics");

373 
	`WRITE_CODE
(
pcVUI
->
	`g‘M©rixCÛffic›Ás
(), 8, "matrix_coeffs");

377 
	`WRITE_FLAG
(
pcVUI
->
	`g‘ChromaLocInfoP»£ÁFÏg
(), "chroma_loc_info_present_flag");

378 ià(
pcVUI
->
	`g‘ChromaLocInfoP»£ÁFÏg
())

380 
	`WRITE_UVLC
(
pcVUI
->
	`g‘ChromaSam¶eLocTy³TÝF›ld
(), "chroma_sample_loc_type_top_field");

381 
	`WRITE_UVLC
(
pcVUI
->
	`g‘ChromaSam¶eLocTy³BÙtomF›ld
(), "chroma_sample_loc_type_bottom_field");

384 
	`WRITE_FLAG
(
pcVUI
->
	`g‘NeuŒ®ChromaIndiÿtiÚFÏg
(), "neutral_chroma_indication_flag");

385 
	`WRITE_FLAG
(
pcVUI
->
	`g‘F›ldSeqFÏg
(), "field_seq_flag");

386 
	`WRITE_FLAG
(
pcVUI
->
	`g‘F¿meF›ldInfoP»£ÁFÏg
(), "frame_field_info_present_flag");

388 
Wšdow
 
deçuÉDi¥ÏyWšdow
 = 
pcVUI
->
	`g‘DeçuÉDi¥ÏyWšdow
();

389 
	`WRITE_FLAG
(
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowEÇbËdFÏg
(), "default_display_window_flag");

390 ifÐ
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowEÇbËdFÏg
() )

392 
	`WRITE_UVLC
(
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowLeáOff£t
(è/ 
TComSPS
::
	`g‘WšUn™X
(
pcSPS
->
	`g‘ChromaFÜm©Idc
()), "def_disp_win_left_offset");

393 
	`WRITE_UVLC
(
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowRightOff£t
(è/ 
TComSPS
::
	`g‘WšUn™X
(
pcSPS
->
	`g‘ChromaFÜm©Idc
()), "def_disp_win_right_offset");

394 
	`WRITE_UVLC
(
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowTÝOff£t
(è/ 
TComSPS
::
	`g‘WšUn™Y
(
pcSPS
->
	`g‘ChromaFÜm©Idc
()), "def_disp_win_top_offset");

395 
	`WRITE_UVLC
(
deçuÉDi¥ÏyWšdow
.
	`g‘WšdowBÙtomOff£t
()/ 
TComSPS
::
	`g‘WšUn™Y
(
pcSPS
->
	`g‘ChromaFÜm©Idc
()), "def_disp_win_bottom_offset");

397 cÚ¡ 
TimšgInfo
 *
timšgInfo
 = 
pcVUI
->
	`g‘TimšgInfo
();

398 
	`WRITE_FLAG
(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
(), "vui_timing_info_present_flag");

399 if(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
())

401 
	`WRITE_CODE
(
timšgInfo
->
	`g‘NumUn™sInTick
(), 32, "vui_num_units_in_tick");

402 
	`WRITE_CODE
(
timšgInfo
->
	`g‘TimeSÿË
(), 32, "vui_time_scale");

403 
	`WRITE_FLAG
(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
(), "vui_poc_proportional_to_timing_flag");

404 if(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
())

406 
	`WRITE_UVLC
(
timšgInfo
->
	`g‘NumTicksPocDiffOÃMšus1
(), "vui_num_ticks_poc_diff_one_minus1");

408 
	`WRITE_FLAG
(
pcVUI
->
	`g‘HrdP¬am‘”sP»£ÁFÏg
(), "vui_hrd_parameters_present_flag");

409 ifÐ
pcVUI
->
	`g‘HrdP¬am‘”sP»£ÁFÏg
() )

411 
	`codeHrdP¬am‘”s
(
pcVUI
->
	`g‘HrdP¬am‘”s
(), 1, 
pcSPS
->
	`g‘MaxTLay”s
() - 1 );

415 
	`WRITE_FLAG
(
pcVUI
->
	`g‘B™¡»amRe¡riùiÚFÏg
(), "bitstream_restriction_flag");

416 ià(
pcVUI
->
	`g‘B™¡»amRe¡riùiÚFÏg
())

418 
	`WRITE_FLAG
(
pcVUI
->
	`g‘TžesFixedSŒuùu»FÏg
(), "tiles_fixed_structure_flag");

419 
	`WRITE_FLAG
(
pcVUI
->
	`g‘MÙiÚVeùÜsOv”PicBound¬›sFÏg
(), "motion_vectors_over_pic_boundaries_flag");

420 
	`WRITE_FLAG
(
pcVUI
->
	`g‘Re¡riùedRefPicLi¡sFÏg
(), "restricted_ref_pic_lists_flag");

421 
	`WRITE_UVLC
(
pcVUI
->
	`g‘MšS·tŸlSegm’tiÚIdc
(), "min_spatial_segmentation_idc");

422 
	`WRITE_UVLC
(
pcVUI
->
	`g‘MaxBy‹sP”PicD’om
(), "max_bytes_per_pic_denom");

423 
	`WRITE_UVLC
(
pcVUI
->
	`g‘MaxB™sP”MšCuD’om
(), "max_bits_per_min_cu_denom");

424 
	`WRITE_UVLC
(
pcVUI
->
	`g‘Log2MaxMvL’gthHÜizÚl
(), "log2_max_mv_length_horizontal");

425 
	`WRITE_UVLC
(
pcVUI
->
	`g‘Log2MaxMvL’gthV”tiÿl
(), "log2_max_mv_length_vertical");

427 
	}
}

429 
Void
 
	gTEncCavlc
::
	$codeHrdP¬am‘”s
ÐcÚ¡ 
TComHRD
 *
hrd
, 
BoÞ
 
commÚInfP»£ÁFÏg
, 
UIÁ
 
maxNumSubLay”sMšus1
 )

431 ifÐ
commÚInfP»£ÁFÏg
 )

433 
	`WRITE_FLAG
Ð
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() ? 1 : 0 , "nal_hrd_parameters_present_flag" );

434 
	`WRITE_FLAG
Ð
hrd
->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ? 1 : 0 , "vcl_hrd_parameters_present_flag" );

435 ifÐ
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
(è|| hrd->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() )

437 
	`WRITE_FLAG
Ð
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() ? 1 : 0, "sub_pic_hrd_params_present_flag" );

438 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

440 
	`WRITE_CODE
Ð
hrd
->
	`g‘TickDivisÜMšus2
(), 8, "tick_divisor_minus2" );

441 
	`WRITE_CODE
Ð
hrd
->
	`g‘DuCpbRemov®D–ayL’gthMšus1
(), 5, "du_cpb_removal_delay_increment_length_minus1" );

442 
	`WRITE_FLAG
Ð
hrd
->
	`g‘SubPicCpbP¬amsInPicTimšgSEIFÏg
() ? 1 : 0, "sub_pic_cpb_params_in_pic_timing_sei_flag" );

443 
	`WRITE_CODE
Ð
hrd
->
	`g‘DpbOuutD–ayDuL’gthMšus1
(), 5, "dpb_output_delay_du_length_minus1" );

445 
	`WRITE_CODE
Ð
hrd
->
	`g‘B™R©eSÿË
(), 4, "bit_rate_scale" );

446 
	`WRITE_CODE
Ð
hrd
->
	`g‘CpbSizeSÿË
(), 4, "cpb_size_scale" );

447 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

449 
	`WRITE_CODE
Ð
hrd
->
	`g‘DuCpbSizeSÿË
(), 4, "du_cpb_size_scale" );

451 
	`WRITE_CODE
Ð
hrd
->
	`g‘In™ŸlCpbRemov®D–ayL’gthMšus1
(), 5, "initial_cpb_removal_delay_length_minus1" );

452 
	`WRITE_CODE
Ð
hrd
->
	`g‘CpbRemov®D–ayL’gthMšus1
(), 5, "au_cpb_removal_delay_length_minus1" );

453 
	`WRITE_CODE
Ð
hrd
->
	`g‘DpbOuutD–ayL’gthMšus1
(), 5, "dpb_output_delay_length_minus1" );

456 
IÁ
 
i
, 
j
, 
ÇlOrVþ
;

457  
i
 = 0; i <ð
maxNumSubLay”sMšus1
; i ++ )

459 
	`WRITE_FLAG
Ð
hrd
->
	`g‘FixedPicR©eFÏg
Ð
i
 ) ? 1 : 0, "fixed_pic_rate_general_flag");

460 
BoÞ
 
fixedPixR©eW™hšCvsFÏg
 = 
Œue
;

461 ifÐ!
hrd
->
	`g‘FixedPicR©eFÏg
Ð
i
 ) )

463 
fixedPixR©eW™hšCvsFÏg
 = 
hrd
->
	`g‘FixedPicR©eW™hšCvsFÏg
Ð
i
 );

464 
	`WRITE_FLAG
Ð
hrd
->
	`g‘FixedPicR©eW™hšCvsFÏg
Ð
i
 ) ? 1 : 0, "fixed_pic_rate_within_cvs_flag");

466 ifÐ
fixedPixR©eW™hšCvsFÏg
 )

468 
	`WRITE_UVLC
Ð
hrd
->
	`g‘PicDu¿tiÚInTcMšus1
Ð
i
 ), "elemental_duration_in_tc_minus1");

472 
	`WRITE_FLAG
Ð
hrd
->
	`g‘LowD–ayHrdFÏg
Ð
i
 ) ? 1 : 0, "low_delay_hrd_flag");

474 ià(!
hrd
->
	`g‘LowD–ayHrdFÏg
Ð
i
 ))

476 
	`WRITE_UVLC
Ð
hrd
->
	`g‘CpbCÁMšus1
Ð
i
 ), "cpb_cnt_minus1");

479  
ÇlOrVþ
 = 0;‚alOrVcl < 2;‚alOrVcl ++ )

481 ifÐÐÐ
ÇlOrVþ
 =ð0 ) && ( 
hrd
->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() ) ) ||

482 ÐÐ
ÇlOrVþ
 =ð1 ) && ( 
hrd
->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) )

484  
j
 = 0; j <ðÐ
hrd
->
	`g‘CpbCÁMšus1
Ð
i
 ) ); j ++ )

486 
	`WRITE_UVLC
Ð
hrd
->
	`g‘B™R©eV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
 ), "bit_rate_value_minus1");

487 
	`WRITE_UVLC
Ð
hrd
->
	`g‘CpbSizeV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
 ), "cpb_size_value_minus1");

488 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

490 
	`WRITE_UVLC
Ð
hrd
->
	`g‘DuCpbSizeV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
 ), "cpb_size_du_value_minus1");

491 
	`WRITE_UVLC
Ð
hrd
->
	`g‘DuB™R©eV®ueMšus1
Ð
i
, 
j
, 
ÇlOrVþ
 ), "bit_rate_du_value_minus1");

493 
	`WRITE_FLAG
Ð
hrd
->
	`g‘CbrFÏg
Ð
i
, 
j
, 
ÇlOrVþ
 ) ? 1 : 0, "cbr_flag");

498 
	}
}

500 
Void
 
	gTEncCavlc
::
	$codeSPS
ÐcÚ¡ 
TComSPS
* 
pcSPS
 )

503 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
pcSPS
->
	`g‘ChromaFÜm©Idc
();

504 cÚ¡ 
BoÞ
 
chromaEÇbËd
 = 
	`isChromaEÇbËd
(
fÜm©
);

506 #ià
ENC_DEC_TRACE


507 #ià
MCTS_EXTRACTION


508 
	`xT¿ûSPSH—d”Enc
();

510 
	`xT¿ûSPSH—d”
();

513 
	`WRITE_CODE
Ð
pcSPS
->
	`g‘VPSId
 (), 4, "sps_video_parameter_set_id" );

514 
	`WRITE_CODE
Ð
pcSPS
->
	`g‘MaxTLay”s
() - 1, 3, "sps_max_sub_layers_minus1" );

515 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘TempÜ®IdNe¡šgFÏg
() ? 1 : 0, "sps_temporal_id_nesting_flag" );

516 
	`codePTL
(
pcSPS
->
	`g‘PTL
(), 1,…cSPS->
	`g‘MaxTLay”s
() - 1);

517 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘SPSId
 (), "sps_seq_parameter_set_id" );

518 
	`WRITE_UVLC
Ð
	`IÁ
(
pcSPS
->
	`g‘ChromaFÜm©Idc
 ()), "chroma_format_idc" );

519 ifÐ
fÜm©
 =ð
CHROMA_444
 )

521 
	`WRITE_FLAG
( 0, "separate_colour_plane_flag");

524 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘PicWidthInLumaSam¶es
 (), "pic_width_in_luma_samples" );

525 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘PicHeightInLumaSam¶es
(), "pic_height_in_luma_samples" );

526 
Wšdow
 
cÚf
 = 
pcSPS
->
	`g‘CÚfÜmªûWšdow
();

528 
	`WRITE_FLAG
Ð
cÚf
.
	`g‘WšdowEÇbËdFÏg
(), "conformance_window_flag" );

529 ià(
cÚf
.
	`g‘WšdowEÇbËdFÏg
())

531 
	`WRITE_UVLC
Ð
cÚf
.
	`g‘WšdowLeáOff£t
(è/ 
TComSPS
::
	`g‘WšUn™X
(
pcSPS
->
	`g‘ChromaFÜm©Idc
() ), "conf_win_left_offset" );

532 
	`WRITE_UVLC
Ð
cÚf
.
	`g‘WšdowRightOff£t
(è/ 
TComSPS
::
	`g‘WšUn™X
(
pcSPS
->
	`g‘ChromaFÜm©Idc
() ), "conf_win_right_offset" );

533 
	`WRITE_UVLC
Ð
cÚf
.
	`g‘WšdowTÝOff£t
(è/ 
TComSPS
::
	`g‘WšUn™Y
(
pcSPS
->
	`g‘ChromaFÜm©Idc
() ), "conf_win_top_offset" );

534 
	`WRITE_UVLC
Ð
cÚf
.
	`g‘WšdowBÙtomOff£t
(è/ 
TComSPS
::
	`g‘WšUn™Y
(
pcSPS
->
	`g‘ChromaFÜm©Idc
() ), "conf_win_bottom_offset" );

537 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) - 8, "bit_depth_luma_minus8" );

539 
	`WRITE_UVLC
Ð
chromaEÇbËd
 ? (
pcSPS
->
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
) - 8):0, "bit_depth_chroma_minus8" );

541 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘B™sFÜPOC
()-4, "log2_max_pic_order_cnt_lsb_minus4" );

543 cÚ¡ 
BoÞ
 
subLay”Ord”šgInfoP»£ÁFÏg
 = 1;

544 
	`WRITE_FLAG
(
subLay”Ord”šgInfoP»£ÁFÏg
, "sps_sub_layer_ordering_info_present_flag");

545 
UIÁ
 
i
=0; i <ð
pcSPS
->
	`g‘MaxTLay”s
()-1; i++)

547 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘MaxDecPicBufãršg
(
i
) - 1, "sps_max_dec_pic_buffering_minus1[i]" );

548 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘NumReÜd”Pics
(
i
), "sps_max_num_reorder_pics[i]" );

549 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘MaxL©’cyInü—£Plus1
(
i
), "sps_max_latency_increase_plus1[i]" );

550 ià(!
subLay”Ord”šgInfoP»£ÁFÏg
)

555 
	`as£¹
Ð
pcSPS
->
	`g‘MaxCUWidth
(è=ðpcSPS->
	`g‘MaxCUHeight
() );

556 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘Log2MšCodšgBlockSize
() - 3, "log2_min_luma_coding_block_size_minus3" );

557 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘Log2DiffMaxMšCodšgBlockSize
(), "log2_diff_max_min_luma_coding_block_size" );

558 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘QuadŒ“TULog2MšSize
() - 2, "log2_min_luma_transform_block_size_minus2" );

559 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘QuadŒ“TULog2MaxSize
(è-…cSPS->
	`g‘QuadŒ“TULog2MšSize
(), "log2_diff_max_min_luma_transform_block_size" );

560 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘QuadŒ“TUMaxD•thIÁ”
() - 1, "max_transform_hierarchy_depth_inter" );

561 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘QuadŒ“TUMaxD•thIÁ¿
() - 1, "max_transform_hierarchy_depth_intra" );

562 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘SÿlšgLi¡FÏg
() ? 1 : 0, "scaling_list_enabled_flag" );

563 if(
pcSPS
->
	`g‘SÿlšgLi¡FÏg
())

565 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
() ? 1 : 0, "sps_scaling_list_data_present_flag" );

566 if(
pcSPS
->
	`g‘SÿlšgLi¡P»£ÁFÏg
())

568 
	`codeSÿlšgLi¡
Ð
pcSPS
->
	`g‘SÿlšgLi¡
() );

571 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘U£AMP
() ? 1 : 0, "amp_enabled_flag" );

572 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘U£SAO
() ? 1 : 0, "sample_adaptive_offset_enabled_flag");

574 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘U£PCM
() ? 1 : 0, "pcm_enabled_flag");

575 ifÐ
pcSPS
->
	`g‘U£PCM
() )

577 
	`WRITE_CODE
Ð
pcSPS
->
	`g‘PCMB™D•th
(
CHANNEL_TYPE_LUMA
) - 1, 4, "pcm_sample_bit_depth_luma_minus1" );

578 
	`WRITE_CODE
Ð
chromaEÇbËd
 ? (
pcSPS
->
	`g‘PCMB™D•th
(
CHANNEL_TYPE_CHROMA
) - 1) : 0, 4, "pcm_sample_bit_depth_chroma_minus1" );

579 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘PCMLog2MšSize
() - 3, "log2_min_pcm_luma_coding_block_size_minus3" );

580 
	`WRITE_UVLC
Ð
pcSPS
->
	`g‘PCMLog2MaxSize
(è-…cSPS->
	`g‘PCMLog2MšSize
(), "log2_diff_max_min_pcm_luma_coding_block_size" );

581 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘PCMFž‹rDi§bËFÏg
()?1 : 0, "pcm_loop_filter_disable_flag");

584 
	`as£¹
Ð
pcSPS
->
	`g‘MaxTLay”s
() > 0 );

586 cÚ¡ 
TComRPSLi¡
* 
½sLi¡
 = 
pcSPS
->
	`g‘RPSLi¡
();

588 
	`WRITE_UVLC
(
½sLi¡
->
	`g‘Numb”OfReã»nûPiùu»S‘s
(), "num_short_term_ref_pic_sets" );

589 
IÁ
 
i
=0; i < 
½sLi¡
->
	`g‘Numb”OfReã»nûPiùu»S‘s
(); i++)

591 cÚ¡ 
TComReã»nûPiùu»S‘
*
½s
 = 
½sLi¡
->
	`g‘Reã»nûPiùu»S‘
(
i
);

592 
	`codeShÜtT”mRefPicS‘
Ð
½s
,
çl£
, 
i
);

594 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘LÚgT”mRefsP»£Á
() ? 1 : 0, "long_term_ref_pics_present_flag" );

595 ià(
pcSPS
->
	`g‘LÚgT”mRefsP»£Á
())

597 
	`WRITE_UVLC
(
pcSPS
->
	`g‘NumLÚgT”mRefPicSPS
(), "num_long_term_ref_pics_sps" );

598 
UIÁ
 
k
 = 0; k < 
pcSPS
->
	`g‘NumLÚgT”mRefPicSPS
(); k++)

600 
	`WRITE_CODE
Ð
pcSPS
->
	`g‘LtRefPicPocLsbSps
(
k
),…cSPS->
	`g‘B™sFÜPOC
(), "lt_ref_pic_poc_lsb_sps");

601 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘U£dByCu¼PicLtSPSFÏg
(
k
), "used_by_curr_pic_lt_sps_flag[i]");

604 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘SPSTempÜ®MVPEÇbËdFÏg
() ? 1 : 0, "sps_temporal_mvp_enabled_flag" );

606 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘U£SŒÚgIÁ¿SmoÙhšg
(), "strong_intra_smoothing_enable_flag" );

608 
	`WRITE_FLAG
Ð
pcSPS
->
	`g‘VuiP¬am‘”sP»£ÁFÏg
(), "vui_parameters_present_flag" );

609 ià(
pcSPS
->
	`g‘VuiP¬am‘”sP»£ÁFÏg
())

611 
	`codeVUI
(
pcSPS
->
	`g‘VuiP¬am‘”s
(),…cSPS);

614 
BoÞ
 
¥s_ex‹nsiÚ_´e£Á_æag
=
çl£
;

615 
BoÞ
 
¥s_ex‹nsiÚ_æags
[
NUM_SPS_EXTENSION_FLAGS
]={
çl£
};

617 
¥s_ex‹nsiÚ_æags
[
SPS_EXT__REXT
] = 
pcSPS
->
	`g‘SpsRªgeEx‹nsiÚ
().
	`£‰šgsDifãrFromDeçuÉs
();

621 
IÁ
 
i
=0; i<
NUM_SPS_EXTENSION_FLAGS
; i++)

623 
¥s_ex‹nsiÚ_´e£Á_æag
|=
¥s_ex‹nsiÚ_æags
[
i
];

626 
	`WRITE_FLAG
Ð(
¥s_ex‹nsiÚ_´e£Á_æag
?1:0), "sps_extension_present_flag" );

628 ià(
¥s_ex‹nsiÚ_´e£Á_æag
)

630 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


631 cÚ¡ 
TCh¬
 *
syÁaxSŒšgs
[]={ "sps_range_extension_flag",

641 
IÁ
 
i
=0; i<
NUM_SPS_EXTENSION_FLAGS
; i++)

643 
	`WRITE_FLAG
Ð
¥s_ex‹nsiÚ_æags
[
i
]?1:0, 
syÁaxSŒšgs
[i] );

646 
IÁ
 
i
=0; i<
NUM_SPS_EXTENSION_FLAGS
; i++)

648 ià(
¥s_ex‹nsiÚ_æags
[
i
])

650 
	`SPSEx‹nsiÚFÏgIndex
(
i
))

652 
SPS_EXT__REXT
:

654 cÚ¡ 
TComSPSRExt
 &
¥sRªgeEx‹nsiÚ
=
pcSPS
->
	`g‘SpsRªgeEx‹nsiÚ
();

656 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
() ? 1 : 0), "transform_skip_rotation_enabled_flag");

657 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
() ? 1 : 0), "transform_skip_context_enabled_flag");

658 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_IMPLICIT
) ? 1 : 0), "implicit_rdpcm_enabled_flag" );

659 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘RdpcmEÇbËdFÏg
(
RDPCM_SIGNAL_EXPLICIT
) ? 1 : 0), "explicit_rdpcm_enabled_flag" );

660 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
() ? 1 : 0), "extended_precision_processing_flag" );

661 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘IÁ¿SmoÙhšgDi§bËdFÏg
() ? 1 : 0), "intra_smoothing_disabled_flag" );

662 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
() ? 1 : 0), "high_precision_offsets_enabled_flag" );

663 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
() ? 1 : 0), "persistent_rice_adaptation_enabled_flag" );

664 
	`WRITE_FLAG
Ð(
¥sRªgeEx‹nsiÚ
.
	`g‘CabacBy·ssAlignm’tEÇbËdFÏg
() ? 1 : 0), "cabac_bypass_alignment_enabled_flag" );

668 
	`as£¹
(
¥s_ex‹nsiÚ_æags
[
i
]==
çl£
);

674 
	`xWr™eRb¥T¿žšgB™s
();

675 
	}
}

677 
Void
 
	gTEncCavlc
::
	$codeVPS
ÐcÚ¡ 
TComVPS
* 
pcVPS
 )

679 #ià
ENC_DEC_TRACE


680 #ià
MCTS_EXTRACTION


681 
	`xT¿ûVPSH—d”Enc
();

683 
	`xT¿ûVPSH—d”
();

686 
	`WRITE_CODE
Ð
pcVPS
->
	`g‘VPSId
(), 4, "vps_video_parameter_set_id" );

687 
	`WRITE_FLAG
( 1, "vps_base_layer_internal_flag" );

688 
	`WRITE_FLAG
( 1, "vps_base_layer_available_flag" );

689 
	`WRITE_CODE
( 0, 6, "vps_max_layers_minus1" );

690 
	`WRITE_CODE
Ð
pcVPS
->
	`g‘MaxTLay”s
() - 1, 3, "vps_max_sub_layers_minus1" );

691 
	`WRITE_FLAG
Ð
pcVPS
->
	`g‘TempÜ®Ne¡šgFÏg
(), "vps_temporal_id_nesting_flag" );

692 
	`as£¹
 (
pcVPS
->
	`g‘MaxTLay”s
()>1||pcVPS->
	`g‘TempÜ®Ne¡šgFÏg
());

693 
	`WRITE_CODE
( 0xffff, 16, "vps_reserved_0xffff_16bits" );

694 
	`codePTL
Ð
pcVPS
->
	`g‘PTL
(), 
Œue
,…cVPS->
	`g‘MaxTLay”s
() - 1 );

695 cÚ¡ 
BoÞ
 
subLay”Ord”šgInfoP»£ÁFÏg
 = 1;

696 
	`WRITE_FLAG
(
subLay”Ord”šgInfoP»£ÁFÏg
, "vps_sub_layer_ordering_info_present_flag");

697 
UIÁ
 
i
=0; i <ð
pcVPS
->
	`g‘MaxTLay”s
()-1; i++)

699 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘MaxDecPicBufãršg
(
i
) - 1, "vps_max_dec_pic_buffering_minus1[i]" );

700 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘NumReÜd”Pics
(
i
), "vps_max_num_reorder_pics[i]" );

701 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘MaxL©’cyInü—£
(
i
), "vps_max_latency_increase_plus1[i]" );

702 ià(!
subLay”Ord”šgInfoP»£ÁFÏg
)

708 
	`as£¹
Ð
pcVPS
->
	`g‘NumHrdP¬am‘”s
(è<ð
MAX_VPS_NUM_HRD_PARAMETERS
 );

709 
	`as£¹
Ð
pcVPS
->
	`g‘MaxNuhRe£rvedZ”oLay”Id
(è< 
MAX_VPS_NUH_RESERVED_ZERO_LAYER_ID_PLUS1
 );

710 
	`WRITE_CODE
Ð
pcVPS
->
	`g‘MaxNuhRe£rvedZ”oLay”Id
(), 6, "vps_max_layer_id" );

711 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘MaxOpS‘s
() - 1, "vps_num_layer_sets_minus1" );

712  
UIÁ
 
ÝsIdx
 = 1; opsIdx <ðÐ
pcVPS
->
	`g‘MaxOpS‘s
() - 1 ); opsIdx ++ )

715  
UIÁ
 
i
 = 0; i <ð
pcVPS
->
	`g‘MaxNuhRe£rvedZ”oLay”Id
(); i ++ )

719 
	`WRITE_FLAG
Ð
pcVPS
->
	`g‘Lay”IdInþudedFÏg
Ð
ÝsIdx
, 
i
 ) ? 1 : 0, "layer_id_included_flag[opsIdx][i]" );

722 cÚ¡ 
TimšgInfo
 *
timšgInfo
 = 
pcVPS
->
	`g‘TimšgInfo
();

723 
	`WRITE_FLAG
(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
(), "vps_timing_info_present_flag");

724 if(
timšgInfo
->
	`g‘TimšgInfoP»£ÁFÏg
())

726 
	`WRITE_CODE
(
timšgInfo
->
	`g‘NumUn™sInTick
(), 32, "vps_num_units_in_tick");

727 
	`WRITE_CODE
(
timšgInfo
->
	`g‘TimeSÿË
(), 32, "vps_time_scale");

728 
	`WRITE_FLAG
(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
(), "vps_poc_proportional_to_timing_flag");

729 if(
timšgInfo
->
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
())

731 
	`WRITE_UVLC
(
timšgInfo
->
	`g‘NumTicksPocDiffOÃMšus1
(), "vps_num_ticks_poc_diff_one_minus1");

733 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘NumHrdP¬am‘”s
(), "vps_num_hrd_parameters" );

735 ifÐ
pcVPS
->
	`g‘NumHrdP¬am‘”s
() > 0 )

737  
UIÁ
 
i
 = 0; i < 
pcVPS
->
	`g‘NumHrdP¬am‘”s
(); i ++ )

740 
	`WRITE_UVLC
Ð
pcVPS
->
	`g‘HrdOpS‘Idx
Ð
i
 ), "hrd_layer_set_idx" );

741 ifÐ
i
 > 0 )

743 
	`WRITE_FLAG
Ð
pcVPS
->
	`g‘C´msP»£ÁFÏg
Ð
i
 ) ? 1 : 0, "cprms_present_flag[i]" );

745 
	`codeHrdP¬am‘”s
(
pcVPS
->
	`g‘HrdP¬am‘”s
(
i
),…cVPS->
	`g‘C´msP»£ÁFÏg
Ð˜),…cVPS->
	`g‘MaxTLay”s
() - 1);

749 
	`WRITE_FLAG
( 0, "vps_extension_flag" );

752 
	`xWr™eRb¥T¿žšgB™s
();

753 
	}
}

755 
Void
 
	gTEncCavlc
::
	$codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 )

757 #ià
ENC_DEC_TRACE


758 #ià
MCTS_EXTRACTION


759 
	`xT¿ûSliûH—d”Enc
();

761 
	`xT¿ûSliûH—d”
();

765 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘ChromaFÜm©Idc
();

766 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
);

767 cÚ¡ 
BoÞ
 
chromaEÇbËd
 = 
	`isChromaEÇbËd
(
fÜm©
);

770 
IÁ
 
maxSliûSegm’tAdd»ss
 = 
pcSliû
->
	`g‘Pic
()->
	`g‘Numb”OfCtusInF¿me
();

771 
IÁ
 
b™sSliûSegm’tAdd»ss
 = 0;

772 
maxSliûSegm’tAdd»ss
>(1<<
b™sSliûSegm’tAdd»ss
))

774 
b™sSliûSegm’tAdd»ss
++;

776 cÚ¡ 
IÁ
 
ùuTsAdd»ss
 = 
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
();

779 cÚ¡ 
IÁ
 
¦iûSegm’tRsAdd»ss
 = 
pcSliû
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
ùuTsAdd»ss
);

781 
	`WRITE_FLAG
Ð
¦iûSegm’tRsAdd»ss
==0, "first_slice_segment_in_pic_flag" );

782 iàÐ
pcSliû
->
	`g‘R­PicFÏg
() )

784 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘NoOuutPriÜPicsFÏg
() ? 1 : 0, "no_output_of_prior_pics_flag" );

786 
	`WRITE_UVLC
Ð
pcSliû
->
	`g‘PPS
()->
	`g‘PPSId
(), "slice_pic_parameter_set_id" );

787 iàÐ
pcSliû
->
	`g‘PPS
()->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
(è&& (
¦iûSegm’tRsAdd»ss
!=0) )

789 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
() ? 1 : 0, "dependent_slice_segment_flag" );

791 if(
¦iûSegm’tRsAdd»ss
>0)

793 
	`WRITE_CODE
Ð
¦iûSegm’tRsAdd»ss
, 
b™sSliûSegm’tAdd»ss
, "slice_segment_address" );

795 iàÐ!
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
() )

797 
IÁ
 
i
 = 0; i < 
pcSliû
->
	`g‘PPS
()->
	`g‘NumExŒaSliûH—d”B™s
(); i++)

799 
	`WRITE_FLAG
(0, "slice_reserved_flag[]");

802 
	`WRITE_UVLC
Ð
pcSliû
->
	`g‘SliûTy³
(), "slice_type" );

804 ifÐ
pcSliû
->
	`g‘PPS
()->
	`g‘OuutFÏgP»£ÁFÏg
() )

806 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘PicOuutFÏg
() ? 1 : 0, "pic_output_flag" );

809 ifÐ!
pcSliû
->
	`g‘IdrPicFÏg
() )

811 
IÁ
 
picOrd”CÁLSB
 = (
pcSliû
->
	`g‘POC
()-pcSliû->
	`g‘La¡IDR
()+(1<<pcSliû->
	`g‘SPS
()->
	`g‘B™sFÜPOC
())) & ((1<<pcSlice->getSPS()->getBitsForPOC())-1);

812 
	`WRITE_CODE
Ð
picOrd”CÁLSB
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™sFÜPOC
(), "slice_pic_order_cnt_lsb");

813 cÚ¡ 
TComReã»nûPiùu»S‘
* 
½s
 = 
pcSliû
->
	`g‘RPS
();

818 ià(
pcSliû
->
	`isIRAP
())

820 
IÁ
 
picIdx
 = 0;…icIdx < 
½s
->
	`g‘Numb”OfPiùu»s
();…icIdx++)

822 
	`as£¹
 (!
½s
->
	`g‘U£d
(
picIdx
));

826 if(
pcSliû
->
	`g‘RPSidx
() < 0)

828 
	`WRITE_FLAG
( 0, "short_term_ref_pic_set_sps_flag");

829 
	`codeShÜtT”mRefPicS‘
Ð
½s
, 
Œue
, 
pcSliû
->
	`g‘SPS
()->
	`g‘RPSLi¡
()->
	`g‘Numb”OfReã»nûPiùu»S‘s
());

833 
	`WRITE_FLAG
( 1, "short_term_ref_pic_set_sps_flag");

834 
IÁ
 
numB™s
 = 0;

835 (1 << 
numB™s
è< 
pcSliû
->
	`g‘SPS
()->
	`g‘RPSLi¡
()->
	`g‘Numb”OfReã»nûPiùu»S‘s
())

837 
numB™s
++;

839 ià(
numB™s
 > 0)

841 
	`WRITE_CODE
Ð
pcSliû
->
	`g‘RPSidx
(), 
numB™s
, "short_term_ref_pic_set_idx" );

844 if(
pcSliû
->
	`g‘SPS
()->
	`g‘LÚgT”mRefsP»£Á
())

846 
IÁ
 
numLŒpInSH
 = 
½s
->
	`g‘Numb”OfLÚg‹rmPiùu»s
();

847 
IÁ
 
É½InSPS
[
MAX_NUM_REF_PICS
];

848 
IÁ
 
numLŒpInSPS
 = 0;

849 
UIÁ
 
É½Index
;

850 
IÁ
 
couÁ”
 = 0;

857 
IÁ
 
k
 = 
½s
->
	`g‘Numb”OfPiùu»s
()-1; k >„ps->g‘Numb”OfPiùu»s()-½s->
	`g‘Numb”OfLÚg‹rmPiùu»s
()-1; k--)

859 ià(
	`fšdM©chšgLTRP
(
pcSliû
, &
É½Index
, 
½s
->
	`g‘POC
(
k
),„ps->
	`g‘U£d
(k)))

861 
É½InSPS
[
numLŒpInSPS
] = 
É½Index
;

862 
numLŒpInSPS
++;

866 
couÁ”
++;

869 
numLŒpInSH
 -ð
numLŒpInSPS
;

871 
	`as£¹
 (
numLŒpInSH
==0 || 
numLŒpInSPS
==0);

873 
IÁ
 
b™sFÜLŒpInSPS
 = 0;

874 
pcSliû
->
	`g‘SPS
()->
	`g‘NumLÚgT”mRefPicSPS
(è> (1 << 
b™sFÜLŒpInSPS
))

876 
b™sFÜLŒpInSPS
++;

878 ià(
pcSliû
->
	`g‘SPS
()->
	`g‘NumLÚgT”mRefPicSPS
() > 0)

880 
	`WRITE_UVLC
Ð
numLŒpInSPS
, "num_long_term_sps");

882 
	`WRITE_UVLC
Ð
numLŒpInSH
, "num_long_term_pics");

885 
IÁ
 
´evD–MSB
 = 0, 
´evLSB
 = 0;

886 
IÁ
 
off£t
 = 
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
(è+„ps->
	`g‘Numb”OfPos™ivePiùu»s
();

887 
couÁ”
 = 0;

890 
IÁ
 
i
=
½s
->
	`g‘Numb”OfPiùu»s
()-1 ; i > 
off£t
-1; i--, 
couÁ”
++)

892 ià(
couÁ”
 < 
numLŒpInSPS
)

894 ià(
b™sFÜLŒpInSPS
 > 0)

896 
	`WRITE_CODE
Ð
É½InSPS
[
couÁ”
], 
b™sFÜLŒpInSPS
, "lt_idx_sps[i]");

901 
	`WRITE_CODE
Ð
½s
->
	`g‘PocLSBLT
(
i
), 
pcSliû
->
	`g‘SPS
()->
	`g‘B™sFÜPOC
(), "poc_lsb_lt");

902 
	`WRITE_FLAG
Ð
½s
->
	`g‘U£d
(
i
), "used_by_curr_pic_lt_flag");

904 
	`WRITE_FLAG
Ð
½s
->
	`g‘D–PocMSBP»£ÁFÏg
(
i
), "delta_poc_msb_present_flag");

906 if(
½s
->
	`g‘D–PocMSBP»£ÁFÏg
(
i
))

908 
BoÞ
 
d–FÏg
 = 
çl£
;

910 ifÐ(
i
 =ð
½s
->
	`g‘Numb”OfPiùu»s
()-1è|| (˜=ð½s->g‘Numb”OfPiùu»s()-1-
numLŒpInSPS
è|| (½s->
	`g‘PocLSBLT
(iè!ð
´evLSB
) )

912 
d–FÏg
 = 
Œue
;

914 if(
d–FÏg
)

916 
	`WRITE_UVLC
Ð
½s
->
	`g‘D–PocMSBCyþeLT
(
i
), "delta_poc_msb_cycle_lt[i]" );

920 
IÁ
 
difã»nûInD–MSB
 = 
½s
->
	`g‘D–PocMSBCyþeLT
(
i
è- 
´evD–MSB
;

921 
	`as£¹
(
difã»nûInD–MSB
 >= 0);

922 
	`WRITE_UVLC
Ð
difã»nûInD–MSB
, "delta_poc_msb_cycle_lt[i]" );

924 
´evLSB
 = 
½s
->
	`g‘PocLSBLT
(
i
);

925 
´evD–MSB
 = 
½s
->
	`g‘D–PocMSBCyþeLT
(
i
);

929 ià(
pcSliû
->
	`g‘SPS
()->
	`g‘SPSTempÜ®MVPEÇbËdFÏg
())

931 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘EÇbËTMVPFÏg
() ? 1 : 0, "slice_temporal_mvp_enabled_flag" );

934 if(
pcSliû
->
	`g‘SPS
()->
	`g‘U£SAO
())

936 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘SaoEÇbËdFÏg
(
CHANNEL_TYPE_LUMA
), "slice_sao_luma_flag" );

937 ià(
chromaEÇbËd
)

939 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘SaoEÇbËdFÏg
(
CHANNEL_TYPE_CHROMA
), "slice_sao_chroma_flag" );

945 ià(!
pcSliû
->
	`isIÁ¿
())

947 
BoÞ
 
ov”rideFÏg
 = (
pcSliû
->
	`g‘NumRefIdx
Ð
REF_PIC_LIST_0
 )!õcSliû->
	`g‘PPS
()->
	`g‘NumRefIdxL0DeçuÉAùive
()||ÕcSliû->
	`isIÁ”B
()&&pcSliû->g‘NumRefIdxÐ
REF_PIC_LIST_1
 )!õcSliû->g‘PPS()->
	`g‘NumRefIdxL1DeçuÉAùive
()));

948 
	`WRITE_FLAG
Ð
ov”rideFÏg
 ? 1 : 0, "num_ref_idx_active_override_flag");

949 ià(
ov”rideFÏg
)

951 
	`WRITE_UVLC
Ð
pcSliû
->
	`g‘NumRefIdx
Ð
REF_PIC_LIST_0
 ) - 1, "num_ref_idx_l0_active_minus1" );

952 ià(
pcSliû
->
	`isIÁ”B
())

954 
	`WRITE_UVLC
Ð
pcSliû
->
	`g‘NumRefIdx
Ð
REF_PIC_LIST_1
 ) - 1, "num_ref_idx_l1_active_minus1" );

958 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
, 0);

964 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_0
, 0);

965 
pcSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
, 0);

968 ifÐ
pcSliû
->
	`g‘PPS
()->
	`g‘Li¡sModifiÿtiÚP»£ÁFÏg
(è&&…cSliû->
	`g‘NumRpsCu¼TempLi¡
() > 1)

970 
TComRefPicLi¡ModifiÿtiÚ
* 
»fPicLi¡ModifiÿtiÚ
 = 
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
();

971 if(!
pcSliû
->
	`isIÁ¿
())

973 
	`WRITE_FLAG
(
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
()->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL0
() ? 1 : 0, "ref_pic_list_modification_flag_l0" );

974 ià(
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
()->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL0
())

976 
IÁ
 
numRpsCu¼TempLi¡0
 = 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
();

977 ià(
numRpsCu¼TempLi¡0
 > 1)

979 
IÁ
 
Ëngth
 = 1;

980 
numRpsCu¼TempLi¡0
 --;

981  
numRpsCu¼TempLi¡0
 >>= 1)

983 
Ëngth
 ++;

985 
IÁ
 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
Ð
REF_PIC_LIST_0
 ); i++)

987 
	`WRITE_CODE
Ð
»fPicLi¡ModifiÿtiÚ
->
	`g‘RefPicS‘IdxL0
(
i
), 
Ëngth
, "list_entry_l0");

992 if(
pcSliû
->
	`isIÁ”B
())

994 
	`WRITE_FLAG
(
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
()->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL1
() ? 1 : 0, "ref_pic_list_modification_flag_l1" );

995 ià(
pcSliû
->
	`g‘RefPicLi¡ModifiÿtiÚ
()->
	`g‘RefPicLi¡ModifiÿtiÚFÏgL1
())

997 
IÁ
 
numRpsCu¼TempLi¡1
 = 
pcSliû
->
	`g‘NumRpsCu¼TempLi¡
();

998 iàÐ
numRpsCu¼TempLi¡1
 > 1 )

1000 
IÁ
 
Ëngth
 = 1;

1001 
numRpsCu¼TempLi¡1
 --;

1002  
numRpsCu¼TempLi¡1
 >>= 1)

1004 
Ëngth
 ++;

1006 
IÁ
 
i
 = 0; i < 
pcSliû
->
	`g‘NumRefIdx
Ð
REF_PIC_LIST_1
 ); i++)

1008 
	`WRITE_CODE
Ð
»fPicLi¡ModifiÿtiÚ
->
	`g‘RefPicS‘IdxL1
(
i
), 
Ëngth
, "list_entry_l1");

1015 ià(
pcSliû
->
	`isIÁ”B
())

1017 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘MvdL1Z”oFÏg
() ? 1 : 0, "mvd_l1_zero_flag");

1020 if(!
pcSliû
->
	`isIÁ¿
())

1022 ià(!
pcSliû
->
	`isIÁ¿
(è&&…cSliû->
	`g‘PPS
()->
	`g‘CabacIn™P»£ÁFÏg
())

1024 #ià
MCTS_EXTRACTION


1025 
BoÞ
 
’cCabacIn™FÏg
 = 
pcSliû
->
	`g‘CabacIn™FÏg
();

1027 
SliûTy³
 
¦iûTy³
 = 
pcSliû
->
	`g‘SliûTy³
();

1028 
SliûTy³
 
’cCABACTabËIdx
 = 
pcSliû
->
	`g‘EncCABACTabËIdx
();

1029 
BoÞ
 
’cCabacIn™FÏg
 = (
¦iûTy³
!=
’cCABACTabËIdx
 &&ƒncCABACTabËIdx!=
I_SLICE
è? 
Œue
 : 
çl£
;

1030 
pcSliû
->
	`£tCabacIn™FÏg
Ð
’cCabacIn™FÏg
 );

1033 
	`WRITE_FLAG
Ð
’cCabacIn™FÏg
?1:0, "cabac_init_flag" );

1037 iàÐ
pcSliû
->
	`g‘EÇbËTMVPFÏg
() )

1039 iàÐ
pcSliû
->
	`g‘SliûTy³
(è=ð
B_SLICE
 )

1041 
	`WRITE_FLAG
Ð
pcSliû
->
	`g‘CÞFromL0FÏg
(), "collocated_from_l0_flag" );

1044 iàÐ
pcSliû
->
	`g‘SliûTy³
(è!ð
I_SLICE
 &&

1045 ((
pcSliû
->
	`g‘CÞFromL0FÏg
()==1 &&…cSliû->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
)>1)||

1046 (
pcSliû
->
	`g‘CÞFromL0FÏg
()==0 &&…cSliû->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
)>1)))

1048 
	`WRITE_UVLC
Ð
pcSliû
->
	`g‘CÞRefIdx
(), "collocated_ref_idx" );

1051 iàÐ(
pcSliû
->
	`g‘PPS
()->
	`g‘U£WP
(è&&…cSliû->
	`g‘SliûTy³
()==
P_SLICE
è|| (pcSliû->g‘PPS()->
	`g‘WPBiP»d
(è&&…cSliû->g‘SliûTy³()==
B_SLICE
) )

1053 
	`xCodeP»dWeightTabË
Ð
pcSliû
 );

1055 
	`as£¹
(
pcSliû
->
	`g‘MaxNumM”geCªd
()<=
MRG_MAX_NUM_CANDS
);

1056 ià(!
pcSliû
->
	`isIÁ¿
())

1058 
	`WRITE_UVLC
(
MRG_MAX_NUM_CANDS
 - 
pcSliû
->
	`g‘MaxNumM”geCªd
(), "five_minus_max_num_merge_cand");

1060 
IÁ
 
iCode
 = 
pcSliû
->
	`g‘SliûQp
(è- (…cSliû->
	`g‘PPS
()->
	`g‘PicIn™QPMšus26
() + 26 );

1061 
	`WRITE_SVLC
Ð
iCode
, "slice_qp_delta" );

1062 ià(
pcSliû
->
	`g‘PPS
()->
	`g‘SliûChromaQpFÏg
())

1064 ià(
numb”V®idCompÚ’ts
 > 
COMPONENT_Cb
)

1066 
	`WRITE_SVLC
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cb
), "slice_cb_qp_offset" );

1068 ià(
numb”V®idCompÚ’ts
 > 
COMPONENT_Cr
)

1070 
	`WRITE_SVLC
Ð
pcSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cr
), "slice_cr_qp_offset" );

1072 
	`as£¹
(
numb”V®idCompÚ’ts
 <ð
COMPONENT_Cr
+1);

1075 ià(
pcSliû
->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
())

1077 
	`WRITE_FLAG
(
pcSliû
->
	`g‘U£ChromaQpAdj
(), "cu_chroma_qp_offset_enabled_flag");

1080 ià(
pcSliû
->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
())

1082 ià(
pcSliû
->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
() )

1084 
	`WRITE_FLAG
(
pcSliû
->
	`g‘DeblockšgFž‹rOv”rideFÏg
(), "deblocking_filter_override_flag");

1086 ià(
pcSliû
->
	`g‘DeblockšgFž‹rOv”rideFÏg
())

1088 
	`WRITE_FLAG
(
pcSliû
->
	`g‘DeblockšgFž‹rDi§bË
(), "slice_deblocking_filter_disabled_flag");

1089 if(!
pcSliû
->
	`g‘DeblockšgFž‹rDi§bË
())

1091 
	`WRITE_SVLC
 (
pcSliû
->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
(), "slice_beta_offset_div2");

1092 
	`WRITE_SVLC
 (
pcSliû
->
	`g‘DeblockšgFž‹rTcOff£tDiv2
(), "slice_tc_offset_div2");

1097 
BoÞ
 
isSAOEÇbËd
 = 
pcSliû
->
	`g‘SPS
()->
	`g‘U£SAO
(è&& (pcSliû->
	`g‘SaoEÇbËdFÏg
(
CHANNEL_TYPE_LUMA
è|| (
chromaEÇbËd
 &&…cSliû->g‘SaoEÇbËdFÏg(
CHANNEL_TYPE_CHROMA
)));

1098 
BoÞ
 
isDBFEÇbËd
 = (!
pcSliû
->
	`g‘DeblockšgFž‹rDi§bË
());

1100 if(
pcSliû
->
	`g‘PPS
()->
	`g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
(è&& ( 
isSAOEÇbËd
 || 
isDBFEÇbËd
 ))

1102 
	`WRITE_FLAG
(
pcSliû
->
	`g‘LFCrossSliûBound¬yFÏg
()?1:0, "slice_loop_filter_across_slices_enabled_flag");

1105 if(
pcSliû
->
	`g‘PPS
()->
	`g‘SliûH—d”Ex‹nsiÚP»£ÁFÏg
())

1107 
	`WRITE_UVLC
(0,"slice_segment_header_extension_length");

1109 
	}
}

1111 
Void
 
	gTEncCavlc
::
	$codePTL
ÐcÚ¡ 
TComPTL
* 
pcPTL
, 
BoÞ
 
´ofžeP»£ÁFÏg
, 
IÁ
 
maxNumSubLay”sMšus1
)

1113 if(
´ofžeP»£ÁFÏg
)

1115 
	`codeProfžeT›r
(
pcPTL
->
	`g‘G’”®PTL
(), 
çl£
);

1117 
	`WRITE_CODE
Ð
	`IÁ
(
pcPTL
->
	`g‘G’”®PTL
()->
	`g‘Lev–Idc
()), 8, "general_level_idc" );

1119 
IÁ
 
i
 = 0; i < 
maxNumSubLay”sMšus1
; i++)

1121 
	`WRITE_FLAG
Ð
pcPTL
->
	`g‘SubLay”ProfžeP»£ÁFÏg
(
i
), "sub_layer_profile_present_flag[i]" );

1122 
	`WRITE_FLAG
Ð
pcPTL
->
	`g‘SubLay”Lev–P»£ÁFÏg
(
i
), "sub_layer_level_present_flag[i]" );

1125 ià(
maxNumSubLay”sMšus1
 > 0)

1127 
IÁ
 
i
 = 
maxNumSubLay”sMšus1
; i < 8; i++)

1129 
	`WRITE_CODE
(0, 2, "reserved_zero_2bits");

1133 
IÁ
 
i
 = 0; i < 
maxNumSubLay”sMšus1
; i++)

1135 ifÐ
pcPTL
->
	`g‘SubLay”ProfžeP»£ÁFÏg
(
i
) )

1137 
	`codeProfžeT›r
(
pcPTL
->
	`g‘SubLay”PTL
(
i
), 
Œue
);

1139 ifÐ
pcPTL
->
	`g‘SubLay”Lev–P»£ÁFÏg
(
i
) )

1141 
	`WRITE_CODE
Ð
	`IÁ
(
pcPTL
->
	`g‘SubLay”PTL
(
i
)->
	`g‘Lev–Idc
()), 8, "sub_layer_level_idc[i]" );

1144 
	}
}

1146 #ià
ENC_DEC_TRACE
 || 
RExt__DECODER_DEBUG_BIT_STATISTICS


1147 
Void
 
	gTEncCavlc
::
	$codeProfžeT›r
ÐcÚ¡ 
ProfžeT›rLev–
* 
±l
, cÚ¡ 
BoÞ
 
bIsSubLay”
 )

1148 
	#PTL_TRACE_TEXT
(
txt
è
bIsSubLay”
?("sub_Ïy”_"xtè: ("g’”®_"xt)

	)

1150 
Void
 
TEncCavlc
::
	$codeProfžeT›r
ÐcÚ¡ 
ProfžeT›rLev–
* 
±l
, cÚ¡ 
BoÞ
 )

1151 
	#PTL_TRACE_TEXT
(
txt
è
	)
txt

1154 
	`WRITE_CODE
Ð
±l
->
	`g‘ProfžeS·û
(), 2 , 
	`PTL_TRACE_TEXT
("profile_space" ));

1155 
	`WRITE_FLAG
Ð
±l
->
	`g‘T›rFÏg
()==
Lev–
::
HIGH
, 
	`PTL_TRACE_TEXT
("tier_flag" ));

1156 
	`WRITE_CODE
Ð
	`IÁ
(
±l
->
	`g‘ProfžeIdc
()), 5 , 
	`PTL_TRACE_TEXT
("profile_idc" ));

1157 
IÁ
 
j
 = 0; j < 32; j++)

1159 
	`WRITE_FLAG
Ð
±l
->
	`g‘ProfžeCom·tibž™yFÏg
(
j
), 
	`PTL_TRACE_TEXT
("profile_compatibility_flag[][j]" ));

1162 
	`WRITE_FLAG
(
±l
->
	`g‘Prog»ssiveSourûFÏg
(), 
	`PTL_TRACE_TEXT
("progressive_source_flag" ));

1163 
	`WRITE_FLAG
(
±l
->
	`g‘IÁ”ÏûdSourûFÏg
(), 
	`PTL_TRACE_TEXT
("interlaced_source_flag" ));

1164 
	`WRITE_FLAG
(
±l
->
	`g‘NÚPackedCÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("non_packed_constraint_flag" ));

1165 
	`WRITE_FLAG
(
±l
->
	`g‘F¿meOÆyCÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("frame_only_constraint_flag" ));

1167 ià(
±l
->
	`g‘ProfžeIdc
(è=ð
Profže
::
MAINREXT
 ||…Ž->g‘ProfžeIdc(è=ðProfže::
HIGHTHROUGHPUTREXT
 )

1169 cÚ¡ 
UIÁ
 
b™D•thCÚ¡¿št
=
±l
->
	`g‘B™D•thCÚ¡¿št
();

1170 
	`WRITE_FLAG
(
b™D•thCÚ¡¿št
<=12, 
	`PTL_TRACE_TEXT
("max_12bit_constraint_flag" ));

1171 
	`WRITE_FLAG
(
b™D•thCÚ¡¿št
<=10, 
	`PTL_TRACE_TEXT
("max_10bit_constraint_flag" ));

1172 
	`WRITE_FLAG
(
b™D•thCÚ¡¿št
<ð8, 
	`PTL_TRACE_TEXT
("max_8bit_constraint_flag" ));

1173 cÚ¡ 
ChromaFÜm©
 
chromaFmtCÚ¡¿št
=
±l
->
	`g‘ChromaFÜm©CÚ¡¿št
();

1174 
	`WRITE_FLAG
(
chromaFmtCÚ¡¿št
==
CHROMA_422
||chromaFmtCÚ¡¿št==
CHROMA_420
||chromaFmtCÚ¡¿št==
CHROMA_400
, 
	`PTL_TRACE_TEXT
("max_422chroma_constraint_flag" ));

1175 
	`WRITE_FLAG
(
chromaFmtCÚ¡¿št
==
CHROMA_420
||chromaFmtCÚ¡¿št==
CHROMA_400
, 
	`PTL_TRACE_TEXT
("max_420chroma_constraint_flag" ));

1176 
	`WRITE_FLAG
(
chromaFmtCÚ¡¿št
==
CHROMA_400
, 
	`PTL_TRACE_TEXT
("max_monochrome_constraint_flag"));

1177 
	`WRITE_FLAG
(
±l
->
	`g‘IÁ¿CÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("intra_constraint_flag" ));

1178 
	`WRITE_FLAG
(
±l
->
	`g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("one_picture_only_constraint_flag"));

1179 
	`WRITE_FLAG
(
±l
->
	`g‘Low”B™R©eCÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("lower_bit_rate_constraint_flag" ));

1180 
	`WRITE_CODE
(0 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[0..15]" ));

1181 
	`WRITE_CODE
(0 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[16..31]" ));

1182 
	`WRITE_CODE
(0 , 2, 
	`PTL_TRACE_TEXT
("reserved_zero_34bits[32..33]" ));

1184 ià(
±l
->
	`g‘ProfžeIdc
(è=ð
Profže
::
MAIN10
)

1186 
	`WRITE_CODE
(0x00 , 7, 
	`PTL_TRACE_TEXT
("reserved_zero_7bits" ));

1187 
	`WRITE_FLAG
(
±l
->
	`g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(), 
	`PTL_TRACE_TEXT
("one_picture_only_constraint_flag"));

1188 
	`WRITE_CODE
(0x0000 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[0..15]" ));

1189 
	`WRITE_CODE
(0x0000 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[16..31]" ));

1190 
	`WRITE_CODE
(0x0 , 3, 
	`PTL_TRACE_TEXT
("reserved_zero_35bits[32..34]" ));

1194 
	`WRITE_CODE
(0x0000 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[0..15]" ));

1195 
	`WRITE_CODE
(0x0000 , 16, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[16..31]" ));

1196 
	`WRITE_CODE
(0x000 , 11, 
	`PTL_TRACE_TEXT
("reserved_zero_43bits[32..42]" ));

1198 
	`WRITE_FLAG
(
çl£
, 
	`PTL_TRACE_TEXT
("inbld_flag" ));

1199 #undeà
PTL_TRACE_TEXT


1200 
	}
}

1207 
Void
 
	gTEncCavlc
::
	$codeTžesWPPEÁryPošt
Ð
TComSliû
* 
pSliû
 )

1209 ià(!
pSliû
->
	`g‘PPS
()->
	`g‘TžesEÇbËdFÏg
(è&& !pSliû->g‘PPS()->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
())

1213 
UIÁ
 
maxOff£t
 = 0;

1214 
IÁ
 
idx
=0; idx<
pSliû
->
	`g‘Numb”OfSub¡»amSizes
(); idx++)

1216 
UIÁ
 
off£t
=
pSliû
->
	`g‘Sub¡»amSize
(
idx
);

1217 iàÐ
off£t
 > 
maxOff£t
 )

1219 
maxOff£t
 = 
off£t
;

1224 
UIÁ
 
off£tL’Mšus1
 = 0;

1225 
maxOff£t
 >ð(1u << (
off£tL’Mšus1
 + 1)))

1227 
off£tL’Mšus1
++;

1228 
	`as£¹
(
off£tL’Mšus1
 + 1 < 32);

1231 
	`WRITE_UVLC
(
pSliû
->
	`g‘Numb”OfSub¡»amSizes
(), "num_entry_point_offsets");

1232 ià(
pSliû
->
	`g‘Numb”OfSub¡»amSizes
()>0)

1234 
	`WRITE_UVLC
(
off£tL’Mšus1
, "offset_len_minus1");

1236 
UIÁ
 
idx
=0; idx<
pSliû
->
	`g‘Numb”OfSub¡»amSizes
(); idx++)

1238 
	`WRITE_CODE
(
pSliû
->
	`g‘Sub¡»amSize
(
idx
)-1, 
off£tL’Mšus1
+1, "entry_point_offset_minus1");

1241 
	}
}

1243 
Void
 
	gTEncCavlc
::
	$codeT”mš©šgB™
 ( 
UIÁ
 )

1245 
	}
}

1247 
Void
 
TEncCavlc
::
	$codeSliûFšish
 ()

1249 
	}
}

1251 
Void
 
TEncCavlc
::
	$codeMVPIdx
 ( 
TComD©aCU
* , 
UIÁ
 , 
RefPicLi¡
 )

1253 
	`as£¹
(0);

1254 
	}
}

1256 
Void
 
	gTEncCavlc
::
	$codeP¬tSize
Ð
TComD©aCU
* , 
UIÁ
 , UInt )

1258 
	`as£¹
(0);

1259 
	}
}

1261 
Void
 
	gTEncCavlc
::
	$codeP»dMode
Ð
TComD©aCU
* , 
UIÁ
 )

1263 
	`as£¹
(0);

1264 
	}
}

1266 
Void
 
	gTEncCavlc
::
	$codeM”geFÏg
 ( 
TComD©aCU
* , 
UIÁ
 )

1268 
	`as£¹
(0);

1269 
	}
}

1271 
Void
 
	gTEncCavlc
::
	$codeM”geIndex
 ( 
TComD©aCU
* , 
UIÁ
 )

1273 
	`as£¹
(0);

1274 
	}
}

1276 
Void
 
	gTEncCavlc
::
	$codeIÁ”ModeFÏg
Ð
TComD©aCU
* , 
UIÁ
 , UInt , UInt )

1278 
	`as£¹
(0);

1279 
	}
}

1281 
Void
 
	gTEncCavlc
::
	$codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* , 
UIÁ
 )

1283 
	`as£¹
(0);

1284 
	}
}

1286 
Void
 
	gTEncCavlc
::
	$codeSkFÏg
Ð
TComD©aCU
* , 
UIÁ
 )

1288 
	`as£¹
(0);

1289 
	}
}

1291 
Void
 
	gTEncCavlc
::
	$codeS¶™FÏg
 ( 
TComD©aCU
* , 
UIÁ
 , UInt )

1293 
	`as£¹
(0);

1294 
	}
}

1296 
Void
 
	gTEncCavlc
::
	$codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 , UInt )

1298 
	`as£¹
(0);

1299 
	}
}

1301 
Void
 
	gTEncCavlc
::
	$codeQtCbf
Ð
TComTU
& , cÚ¡ 
CompÚ’tID
 , cÚ¡ 
BoÞ
 )

1303 
	`as£¹
(0);

1304 
	}
}

1306 
Void
 
	gTEncCavlc
::
	$codeQtRoÙCbf
Ð
TComD©aCU
* , 
UIÁ
 )

1308 
	`as£¹
(0);

1309 
	}
}

1311 
Void
 
	gTEncCavlc
::
	$codeQtCbfZ”o
Ð
TComTU
& , cÚ¡ 
ChªÃlTy³
 )

1313 
	`as£¹
(0);

1314 
	}
}

1315 
Void
 
	gTEncCavlc
::
	$codeQtRoÙCbfZ”o
( )

1317 
	`as£¹
(0);

1318 
	}
}

1320 
Void
 
	gTEncCavlc
::
	$codeT¿nsfÜmSkFÏgs
 (
TComTU
& , 
CompÚ’tID
 )

1322 
	`as£¹
(0);

1323 
	}
}

1330 
Void
 
	gTEncCavlc
::
	$codeIPCMInfo
Ð
TComD©aCU
* , 
UIÁ
 )

1332 
	`as£¹
(0);

1333 
	}
}

1335 
Void
 
	gTEncCavlc
::
	$codeIÁ¿DœLumaAng
Ð
TComD©aCU
* , 
UIÁ
 , 
BoÞ
 )

1337 
	`as£¹
(0);

1338 
	}
}

1340 
Void
 
	gTEncCavlc
::
	$codeIÁ¿DœChroma
Ð
TComD©aCU
* , 
UIÁ
 )

1342 
	`as£¹
(0);

1343 
	}
}

1345 
Void
 
	gTEncCavlc
::
	$codeIÁ”Dœ
Ð
TComD©aCU
* , 
UIÁ
 )

1347 
	`as£¹
(0);

1348 
	}
}

1350 
Void
 
	gTEncCavlc
::
	$codeRefFrmIdx
Ð
TComD©aCU
* , 
UIÁ
 , 
RefPicLi¡
 )

1352 
	`as£¹
(0);

1353 
	}
}

1355 
Void
 
	gTEncCavlc
::
	$codeMvd
Ð
TComD©aCU
* , 
UIÁ
 , 
RefPicLi¡
 )

1357 
	`as£¹
(0);

1358 
	}
}

1360 
Void
 
	gTEncCavlc
::
	$codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
& , 
CompÚ’tID
 )

1362 
	`as£¹
(0);

1363 
	}
}

1365 
Void
 
	gTEncCavlc
::
	$codeD–QP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

1367 
IÁ
 
iDQp
 = 
pcCU
->
	`g‘QP
Ð
uiAbsP¬tIdx
 ) -…cCU->
	`g‘RefQP
( uiAbsPartIdx );

1369 
IÁ
 
qpBdOff£tY
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
);

1370 
iDQp
 = (iDQ°+ 78 + 
qpBdOff£tY
 + (qpBdOffsetY/2)) % (52 + qpBdOffsetY) - 26 - (qpBdOffsetY/2);

1372 
	`xWr™eSvlc
Ð
iDQp
 );

1375 
	}
}

1377 
Void
 
	gTEncCavlc
::
	$codeChromaQpAdju¡m’t
Ð
TComD©aCU
* , 
UIÁ
 )

1379 
	`as£¹
(0);

1380 
	}
}

1382 
Void
 
	gTEncCavlc
::
	$codeCÛffNxN
 ( 
TComTU
& , 
TCÛff
* , cÚ¡ 
CompÚ’tID
 )

1384 
	`as£¹
(0);

1385 
	}
}

1387 
Void
 
	gTEncCavlc
::
	$e¡B™
Ð
e¡B™sSbacSŒuù
* , 
IÁ
 , IÁ , 
ChªÃlTy³
 , 
COEFF_SCAN_TYPE
 )

1391 
	}
}

1398 
Void
 
	gTEncCavlc
::
	$xCodeP»dWeightTabË
Ð
TComSliû
* 
pcSliû
 )

1400 
WPSÿlšgP¬am
 *
wp
;

1401 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
pcSliû
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

1402 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
);

1403 cÚ¡ 
BoÞ
 
bChroma
 = 
	`isChromaEÇbËd
(
fÜm©
);

1404 cÚ¡ 
IÁ
 
iNbRef
 = (
pcSliû
->
	`g‘SliûTy³
(è=ð
B_SLICE
 ) ? (2) : (1);

1405 
BoÞ
 
bD’omCoded
 = 
çl£
;

1406 
UIÁ
 
uiTÙ®SigÇÎedWeightFÏgs
 = 0;

1408 iàÐ(
pcSliû
->
	`g‘SliûTy³
()==
P_SLICE
 &&…cSliû->
	`g‘PPS
()->
	`g‘U£WP
()è|| (pcSliû->g‘SliûTy³()==
B_SLICE
 &&…cSliû->g‘PPS()->
	`g‘WPBiP»d
()) )

1410  
IÁ
 
iNumRef
=0 ; iNumRef<
iNbRef
 ; iNumRef++ )

1412 
RefPicLi¡
 
eRefPicLi¡
 = ( 
iNumRef
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

1416  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1418 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1419 iàÐ!
bD’omCoded
 )

1421 
IÁ
 
iD–D’om
;

1422 
	`WRITE_UVLC
Ð
wp
[
COMPONENT_Y
].
uiLog2WeightD’om
, "luma_log2_weight_denom" );

1424 ifÐ
bChroma
 )

1426 
	`as£¹
(
wp
[
COMPONENT_Cb
].
uiLog2WeightD’om
 =ðwp[
COMPONENT_Cr
].uiLog2WeightDenom);

1427 
iD–D’om
 = (
wp
[
COMPONENT_Cb
].
uiLog2WeightD’om
 - wp[
COMPONENT_Y
].uiLog2WeightDenom);

1428 
	`WRITE_SVLC
Ð
iD–D’om
, "delta_chroma_log2_weight_denom" );

1430 
bD’omCoded
 = 
Œue
;

1432 
	`WRITE_FLAG
Ð
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
, 
iNumRef
==0?"luma_weight_l0_flag[i]":"luma_weight_l1_flag[i]" );

1433 
uiTÙ®SigÇÎedWeightFÏgs
 +ð
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
;

1435 ià(
bChroma
)

1437  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1439 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1440 
	`as£¹
(
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
 =ðwp[
COMPONENT_Cr
].bPresentFlag);

1441 
	`WRITE_FLAG
Ð
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
, 
iNumRef
==0?"chroma_weight_l0_flag[i]":"chroma_weight_l1_flag[i]" );

1442 
uiTÙ®SigÇÎedWeightFÏgs
 +ð2*
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
;

1446  
IÁ
 
iRefIdx
=0 ; iRefIdx<
pcSliû
->
	`g‘NumRefIdx
(
eRefPicLi¡
) ; iRefIdx++ )

1448 
pcSliû
->
	`g‘WpSÿlšg
(
eRefPicLi¡
, 
iRefIdx
, 
wp
);

1449 iàÐ
wp
[
COMPONENT_Y
].
bP»£ÁFÏg
 )

1451 
IÁ
 
iD–Weight
 = (
wp
[
COMPONENT_Y
].
iWeight
 - (1<<wp[COMPONENT_Y].
uiLog2WeightD’om
));

1452 
	`WRITE_SVLC
Ð
iD–Weight
, 
iNumRef
==0?"delta_luma_weight_l0[i]":"delta_luma_weight_l1[i]" );

1453 
	`WRITE_SVLC
Ð
wp
[
COMPONENT_Y
].
iOff£t
, 
iNumRef
==0?"luma_offset_l0[i]":"luma_offset_l1[i]" );

1456 iàÐ
bChroma
 )

1458 iàÐ
wp
[
COMPONENT_Cb
].
bP»£ÁFÏg
 )

1460  
IÁ
 
j
 = 
COMPONENT_Cb
 ; j < 
numb”V®idCompÚ’ts
 ; j++ )

1462 
	`as£¹
(
wp
[
COMPONENT_Cb
].
uiLog2WeightD’om
 =ðwp[
COMPONENT_Cr
].uiLog2WeightDenom);

1463 
IÁ
 
iD–Weight
 = (
wp
[
j
].
iWeight
 - (1<<wp[
COMPONENT_Cb
].
uiLog2WeightD’om
));

1464 
	`WRITE_SVLC
Ð
iD–Weight
, 
iNumRef
==0?"delta_chroma_weight_l0[i]":"delta_chroma_weight_l1[i]" );

1466 
IÁ
 
¿nge
=
pcSliû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
(è? (1<<pcSliû->g‘SPS()->
	`g‘B™D•th
(
CHANNEL_TYPE_CHROMA
))/2 : 128;

1467 
IÁ
 
´ed
 = ( 
¿nge
 - ( („ªge*
wp
[
j
].
iWeight
)>>(wp[j].
uiLog2WeightD’om
) ) );

1468 
IÁ
 
iD–Chroma
 = (
wp
[
j
].
iOff£t
 - 
´ed
);

1469 
	`WRITE_SVLC
Ð
iD–Chroma
, 
iNumRef
==0?"delta_chroma_offset_l0[i]":"delta_chroma_offset_l1[i]" );

1475 
	`as£¹
(
uiTÙ®SigÇÎedWeightFÏgs
<=24);

1477 
	}
}

1482 
Void
 
	gTEncCavlc
::
	$codeSÿlšgLi¡
ÐcÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
 )

1485 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

1487 cÚ¡ 
IÁ
 
´edLi¡S‹p
 = (
sizeId
 =ð
SCALING_LIST_32x32
? (
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) : 1);

1489 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†i¡Id+=
´edLi¡S‹p
)

1491 
BoÞ
 
sÿlšgLi¡P»dModeFÏg
 = 
sÿlšgLi¡
.
	`g‘SÿlšgLi¡P»dModeFÏg
(
sizeId
, 
li¡Id
);

1492 
	`WRITE_FLAG
Ð
sÿlšgLi¡P»dModeFÏg
, "scaling_list_pred_mode_flag" );

1493 if(!
sÿlšgLi¡P»dModeFÏg
)

1495 ià(
sizeId
 =ð
SCALING_LIST_32x32
)

1498 
	`WRITE_UVLC
Ð((
IÁ
)
li¡Id
 - (IÁ)
sÿlšgLi¡
.
	`g‘RefM©rixId
 (
sizeId
,li¡Id)è/ (
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
), "scaling_list_pred_matrix_id_delta");

1502 
	`WRITE_UVLC
Ð(
IÁ
)
li¡Id
 - (IÁ)
sÿlšgLi¡
.
	`g‘RefM©rixId
 (
sizeId
,listId), "scaling_list_pred_matrix_id_delta");

1507 
	`xCodeSÿlšgLi¡
(&
sÿlšgLi¡
, 
sizeId
, 
li¡Id
);

1512 
	}
}

1518 
Void
 
	gTEncCavlc
::
	$xCodeSÿlšgLi¡
(cÚ¡ 
TComSÿlšgLi¡
* 
sÿlšgLi¡
, 
UIÁ
 
sizeId
, UIÁ 
li¡Id
)

1520 
IÁ
 
cÛfNum
 = 
	`mš
(
MAX_MATRIX_COEF_NUM
,(IÁ)
g_sÿlšgLi¡Size
[
sizeId
]);

1521 
UIÁ
* 
sÿn
 = 
g_sÿnOrd”
[
SCAN_UNGROUPED
][
SCAN_DIAG
][
sizeId
==0 ? 2 : 3][sizeId==0 ? 2 : 3];

1522 
IÁ
 
ÃxtCÛf
 = 
SCALING_LIST_START_VALUE
;

1523 
IÁ
 
d©a
;

1524 cÚ¡ 
IÁ
 *
¤c
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡Add»ss
(
sizeId
, 
li¡Id
);

1525 ifÐ
sizeId
 > 
SCALING_LIST_8x8
 )

1527 
	`WRITE_SVLC
Ð
sÿlšgLi¡
->
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
) - 8, "scaling_list_dc_coef_minus8");

1528 
ÃxtCÛf
 = 
sÿlšgLi¡
->
	`g‘SÿlšgLi¡DC
(
sizeId
,
li¡Id
);

1530 
IÁ
 
i
=0;i<
cÛfNum
;i++)

1532 
d©a
 = 
¤c
[
sÿn
[
i
]] - 
ÃxtCÛf
;

1533 
ÃxtCÛf
 = 
¤c
[
sÿn
[
i
]];

1534 if(
d©a
 > 127)

1536 
d©a
 = data - 256;

1538 if(
d©a
 < -128)

1540 
d©a
 = data + 256;

1543 
	`WRITE_SVLC
Ð
d©a
, "scaling_list_delta_coef");

1545 
	}
}

1547 
BoÞ
 
	gTEncCavlc
::
	$fšdM©chšgLTRP
 ( 
TComSliû
* 
pcSliû
, 
UIÁ
 *
É½sIndex
, 
IÁ
 
É½POC
, 
BoÞ
 
u£dFÏg
 )

1550 
IÁ
 
lsb
 = 
É½POC
 & ((1<<
pcSliû
->
	`g‘SPS
()->
	`g‘B™sFÜPOC
())-1);

1551 
IÁ
 
k
 = 0; k < 
pcSliû
->
	`g‘SPS
()->
	`g‘NumLÚgT”mRefPicSPS
(); k++)

1553 iàÐ(
lsb
 =ð
pcSliû
->
	`g‘SPS
()->
	`g‘LtRefPicPocLsbSps
(
k
)è&& (
u£dFÏg
 =ðpcSliû->g‘SPS()->
	`g‘U£dByCu¼PicLtSPSFÏg
(k)) )

1555 *
É½sIndex
 = 
k
;

1556  
Œue
;

1559  
çl£
;

1560 
	}
}

1562 
Void
 
	gTEncCavlc
::
	$codeEx¶ic™RdpcmMode
Ð
TComTU
& , cÚ¡ 
CompÚ’tID
 )

1564 
	`as£¹
(0);

1565 
	}
}

	@source/Lib/TLibEncoder/TEncCavlc.h

38 #iâdeà
__TENCCAVLC__


39 
	#__TENCCAVLC__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~"TLibCommÚ/TComB™SŒ—m.h
"

47 
	~"TLibCommÚ/TComRom.h
"

48 
	~"TEncEÁrÝy.h
"

49 
	~"SyÁaxEËm’tWr™”.h
"

54 
þass
 
	gTEncTÝ
;

60 þas 
	cAUDWr™”
 : 
public
 
SyÁaxEËm’tWr™”


62 
public
:

63 
	$AUDWr™”
() {};

64 
vœtu®
 ~
	$AUDWr™”
(è{
	}
};

66 
Void
 
codeAUD
(
TComB™If
& 
bs
, cÚ¡ 
IÁ
 
piùu»Ty³
);

70 
þass
 
	gTEncCavlc
 : 
public
 
SyÁaxEËm’tWr™”
,…ubliø
	gTEncEÁrÝyIf


72 
	gpublic
:

73 
TEncCavlc
();

74 
	gvœtu®
 ~
TEncCavlc
();

76 
	g´Ùeùed
:

77 
Void
 
codeShÜtT”mRefPicS‘
 ( cÚ¡ 
TComReã»nûPiùu»S‘
* 
pcRPS
, 
BoÞ
 
ÿÎedFromSliûH—d”
, 
IÁ
 
idx
 );

78 
BoÞ
 
fšdM©chšgLTRP
 ( 
TComSliû
* 
pcSliû
, 
UIÁ
 *
É½sIndex
, 
IÁ
 
É½POC
, BoÞ 
u£dFÏg
 );

80 
	gpublic
:

82 
Void
 
»£tEÁrÝy
 (cÚ¡ 
TComSliû
 *
pSliû
);

83 
SliûTy³
 
d‘”mšeCabacIn™Idx
 (cÚ¡ 
TComSliû
* ) { 
as£¹
(0);  
	gI_SLICE
; };

85 
Void
 
£tB™¡»am
 ( 
TComB™If
* 
p
 ) { 
	gm_pcB™If
 =…; }

86 
Void
 
»£tB™s
 (è{ 
	gm_pcB™If
->resetBits(); }

87 
UIÁ
 
g‘Numb”OfWr™‹nB™s
(è{  
	gm_pcB™If
->getNumberOfWrittenBits(); }

88 
Void
 
codeVPS
 ( cÚ¡ 
TComVPS
* 
pcVPS
 );

89 
Void
 
codeVUI
 ( cÚ¡ 
TComVUI
 *
pcVUI
, cÚ¡ 
TComSPS
* 
pcSPS
 );

90 
Void
 
codeSPS
 ( cÚ¡ 
TComSPS
* 
pcSPS
 );

91 
Void
 
codePPS
 ( cÚ¡ 
TComPPS
* 
pcPPS
 );

92 
Void
 
codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 );

93 
Void
 
codePTL
 ( cÚ¡ 
TComPTL
* 
pcPTL
, 
BoÞ
 
´ofžeP»£ÁFÏg
, 
IÁ
 
maxNumSubLay”sMšus1
);

94 
Void
 
codeProfžeT›r
 ( cÚ¡ 
ProfžeT›rLev–
* 
±l
, cÚ¡ 
BoÞ
 
bIsSubLay”
 );

95 
Void
 
codeHrdP¬am‘”s
 ( cÚ¡ 
TComHRD
 *
hrd
, 
BoÞ
 
commÚInfP»£ÁFÏg
, 
UIÁ
 
maxNumSubLay”sMšus1
 );

96 
Void
 
codeTžesWPPEÁryPošt
Ð
TComSliû
* 
pSliû
 );

97 
Void
 
codeT”mš©šgB™
 ( 
UIÁ
 
užsLa¡
 );

98 
Void
 
codeSliûFšish
 ();

100 
Void
 
codeMVPIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

101 
Void
 
codeSAOBlkP¬am
(
SAOBlkP¬am
& , cÚ¡ 
B™D•ths
& , 
BoÞ
* , BoÞ , BoÞ , BoÞ = 
çl£
){
´štf
("Úly suµÜ‹d iÀCABAC"); 
as£¹
(0); 
ex™
(-1);}

102 
Void
 
codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

103 
Void
 
codeSkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

104 
Void
 
codeM”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

105 
Void
 
codeM”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

107 
Void
 
codeAlfCŒlFÏg
 ( 
CompÚ’tID
 , 
UIÁ
 ) {
´štf
("NÙ suµÜ‹d\n"); 
as£¹
(0);}

108 
Void
 
codeIÁ”ModeFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiEncMode
 );

109 
Void
 
codeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

111 
Void
 
codeP¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

112 
Void
 
codeP»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

114 
Void
 
codeIPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

116 
Void
 
codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 );

117 
Void
 
codeQtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 );

118 
Void
 
codeQtRoÙCbf
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

119 
Void
 
codeQtCbfZ”o
 ( 
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 );

120 
Void
 
codeQtRoÙCbfZ”o
 ( );

121 
Void
 
codeIÁ¿DœLumaAng
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
isMuÉË
);

122 
Void
 
codeIÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

123 
Void
 
codeIÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

124 
Void
 
codeRefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

125 
Void
 
codeMvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

127 
Void
 
codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

129 
Void
 
codeD–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

130 
Void
 
codeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

132 
Void
 
codeCÛffNxN
 ( 
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
 );

133 
Void
 
codeT¿nsfÜmSkFÏgs
 ( 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 );

135 
Void
 
e¡B™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
 );

137 
Void
 
xCodeP»dWeightTabË
 ( 
TComSliû
* 
pcSliû
 );

139 
Void
 
codeSÿlšgLi¡
 ( cÚ¡ 
TComSÿlšgLi¡
 &
sÿlšgLi¡
 );

140 
Void
 
xCodeSÿlšgLi¡
 ( cÚ¡ 
TComSÿlšgLi¡
* 
sÿlšgLi¡
, 
UIÁ
 
sizeId
, UIÁ 
li¡Id
);

142 
Void
 
codeEx¶ic™RdpcmMode
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
 );

	@source/Lib/TLibEncoder/TEncCfg.h

38 #iâdeà
__TENCCFG__


39 
	#__TENCCFG__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/CommÚDef.h
"

46 
	~"TLibCommÚ/TComSliû.h
"

47 
	~<as£¹.h
>

49 
	sGOPEÁry


51 
IÁ
 
	mm_POC
;

52 
IÁ
 
	mm_QPOff£t
;

53 
DoubË
 
	mm_QPOff£tMod–Off£t
;

54 
DoubË
 
	mm_QPOff£tMod–SÿË
;

55 
IÁ
 
	mm_CbQPoff£t
;

56 
IÁ
 
	mm_CrQPoff£t
;

57 
DoubË
 
	mm_QPFaùÜ
;

58 
IÁ
 
	mm_tcOff£tDiv2
;

59 
IÁ
 
	mm_b‘aOff£tDiv2
;

60 
IÁ
 
	mm_‹mpÜ®Id
;

61 
BoÞ
 
	mm_»fPic
;

62 
IÁ
 
	mm_numRefPicsAùive
;

63 
SCh¬
 
	mm_¦iûTy³
;

64 
IÁ
 
	mm_numRefPics
;

65 
IÁ
 
	mm_»ã»nûPics
[
MAX_NUM_REF_PICS
];

66 
IÁ
 
	mm_u£dByCu¼Pic
[
MAX_NUM_REF_PICS
];

67 
IÁ
 
	mm_š‹rRPSP»diùiÚ
;

68 
IÁ
 
	mm_d–RPS
;

69 
IÁ
 
	mm_numRefIdc
;

70 
IÁ
 
	mm_»fIdc
[
MAX_NUM_REF_PICS
+1];

71 
BoÞ
 
	mm_isEncoded
;

72 
GOPEÁry
()

73 : 
m_POC
(-1)

74 , 
m_QPOff£t
(0)

75 , 
m_QPOff£tMod–Off£t
(0)

76 , 
m_QPOff£tMod–SÿË
(0)

77 , 
m_CbQPoff£t
(0)

78 , 
m_CrQPoff£t
(0)

79 , 
m_QPFaùÜ
(0)

80 , 
m_tcOff£tDiv2
(0)

81 , 
m_b‘aOff£tDiv2
(0)

82 , 
m_‹mpÜ®Id
(0)

83 , 
m_»fPic
(
çl£
)

84 , 
m_numRefPicsAùive
(0)

85 , 
m_¦iûTy³
('P')

86 , 
m_numRefPics
(0)

87 , 
m_š‹rRPSP»diùiÚ
(
çl£
)

88 , 
m_d–RPS
(0)

89 , 
m_numRefIdc
(0)

90 , 
m_isEncoded
(
çl£
)

92 ::
mem£t
Ð
m_»ã»nûPics
, 0, (m_referencePics) );

93 ::
mem£t
Ð
m_u£dByCu¼Pic
, 0, (m_usedByCurrPic) );

94 ::
mem£t
Ð
m_»fIdc
, 0, (m_refIdc) );

98 
	g¡d
::
i¡ršg¡»am
 &
Ý”©Ü
>>(
¡d
::i¡ršg¡»am &
š
, 
	gGOPEÁry
 &
	g’Œy
);

107 þas 
	cTEncCfg


109 
	mpublic
:

111 
	sTEncSEIKÃeFunùiÚInfÜm©iÚ


113 
	sKÃePoštPaœ


115 
IÁ
 
šputKÃePošt
;

116 
IÁ
 
	mouutKÃePošt
;

119 
IÁ
 
	mm_kÃeFunùiÚId
;

120 
BoÞ
 
	mm_kÃeFunùiÚCªûlFÏg
;

121 
BoÞ
 
	mm_kÃeFunùiÚP”si¡’ûFÏg
;

122 
IÁ
 
	mm_šputDRªge
;

123 
IÁ
 
	mm_šputDi¥Lumšªû
;

124 
IÁ
 
	mm_ouutDRªge
;

125 
IÁ
 
	mm_ouutDi¥Lumšªû
;

126 
	m¡d
::
veùÜ
<
KÃePoštPaœ
> 
m_kÃeSEIKÃePoštPaœs
;

129 
	g´Ùeùed
:

131 
IÁ
 
m_iF¿meR©e
;

132 
IÁ
 
	gm_F¿meSk
;

133 
UIÁ
 
	gm_‹mpÜ®Sub§m¶eR©io
;

134 
IÁ
 
	gm_iSourûWidth
;

135 
IÁ
 
	gm_iSourûHeight
;

136 
Wšdow
 
	gm_cÚfÜmªûWšdow
;

137 
IÁ
 
	gm_äamesToBeEncoded
;

138 
DoubË
 
	gm_adLambdaModif›r
[ 
MAX_TLAYER
 ];

139 
	g¡d
::
veùÜ
<
DoubË
> 
m_adIÁ¿LambdaModif›r
;

140 
DoubË
 
	gm_dIÁ¿QpFaùÜ
;

142 
BoÞ
 
	gm_´štMSEBa£dSequ’ûPSNR
;

143 
BoÞ
 
	gm_´štHexP¢r
;

144 
BoÞ
 
	gm_´štF¿meMSE
;

145 
BoÞ
 
	gm_´štSequ’ûMSE
;

146 
BoÞ
 
	gm_´štMSSSIM
;

147 
BoÞ
 
	gm_bXPSNREÇbËFÏg
;

148 
DoubË
 
	gm_dXPSNRWeight
[
MAX_NUM_COMPONENT
];

149 
BoÞ
 
	gm_ÿbacZ”oWÜdPaddšgEÇbËd
;

152 
	gProfže
::
Name
 
m_´ofže
;

153 
	gLev–
::
T›r
 
m_Ëv–T›r
;

154 
	gLev–
::
Name
 
m_Ëv–
;

155 
BoÞ
 
	gm_´og»ssiveSourûFÏg
;

156 
BoÞ
 
	gm_š‹¾aûdSourûFÏg
;

157 
BoÞ
 
	gm_nÚPackedCÚ¡¿štFÏg
;

158 
BoÞ
 
	gm_äameOÆyCÚ¡¿štFÏg
;

159 
UIÁ
 
	gm_b™D•thCÚ¡¿štV®ue
;

160 
ChromaFÜm©
 
	gm_chromaFÜm©CÚ¡¿štV®ue
;

161 
BoÞ
 
	gm_šŒaCÚ¡¿štFÏg
;

162 
BoÞ
 
	gm_ÚePiùu»OÆyCÚ¡¿štFÏg
;

163 
BoÞ
 
	gm_low”B™R©eCÚ¡¿štFÏg
;

166 
UIÁ
 
	gm_uiIÁ¿P”iod
;

167 
UIÁ
 
	gm_uiDecodšgReäeshTy³
;

168 
BoÞ
 
	gm_bReWr™eP¬amS‘sFÏg
;

169 
IÁ
 
	gm_iGOPSize
;

170 
GOPEÁry
 
	gm_GOPLi¡
[
MAX_GOP
];

171 
IÁ
 
	gm_exŒaRPSs
;

172 
IÁ
 
	gm_maxDecPicBufãršg
[
MAX_TLAYER
];

173 
IÁ
 
	gm_numReÜd”Pics
[
MAX_TLAYER
];

175 
IÁ
 
	gm_iQP
;

176 
IÁ
 
	gm_šŒaQPOff£t
;

177 
IÁ
 
	gm_ÏmbdaFromQPEÇbË
;

178 
IÁ
 
	gm_aiPad
[2];

180 
BoÞ
 
	gm_AcûssUn™D–im™”
;

182 
IÁ
 
	gm_iMaxRefPicNum
;

185 
IÁ
 
	gm_maxTempLay”
;

186 
BoÞ
 
	gm_u£AMP
;

187 
UIÁ
 
	gm_maxCUWidth
;

188 
UIÁ
 
	gm_maxCUHeight
;

189 
UIÁ
 
	gm_maxTÙ®CUD•th
;

190 
UIÁ
 
	gm_log2DiffMaxMšCodšgBlockSize
;

193 
UIÁ
 
	gm_uiQuadŒ“TULog2MaxSize
;

194 
UIÁ
 
	gm_uiQuadŒ“TULog2MšSize
;

195 
UIÁ
 
	gm_uiQuadŒ“TUMaxD•thIÁ”
;

196 
UIÁ
 
	gm_uiQuadŒ“TUMaxD•thIÁ¿
;

199 
BoÞ
 
	gm_bLoÝFž‹rDi§bË
;

200 
BoÞ
 
	gm_loÝFž‹rOff£tInPPS
;

201 
IÁ
 
	gm_loÝFž‹rB‘aOff£tDiv2
;

202 
IÁ
 
	gm_loÝFž‹rTcOff£tDiv2
;

203 
IÁ
 
	gm_deblockšgFž‹rM‘ric
;

204 
BoÞ
 
	gm_bU£SAO
;

205 
BoÞ
 
	gm_bTe¡SAODi§bËAtPiùu»Lev–
;

206 
DoubË
 
	gm_§oEncodšgR©e
;

207 
DoubË
 
	gm_§oEncodšgR©eChroma
;

208 
IÁ
 
	gm_maxNumOff£tsP”Pic
;

209 
BoÞ
 
	gm_§oCtuBound¬y
;

210 
BoÞ
 
	gm_»£tEncod”S‹Aá”IRAP
;

213 
BoÞ
 
	gm_bDi§bËIÁ¿PUsInIÁ”Sliûs
;

214 
MES—rchM‘hod
 
	gm_mÙiÚE¡im©iÚS—rchM‘hod
;

215 
IÁ
 
	gm_iS—rchRªge
;

216 
IÁ
 
	gm_b»dS—rchRªge
;

217 
BoÞ
 
	gm_bClFÜBiP»dMeEÇbËd
;

218 
BoÞ
 
	gm_bFa¡MEAssumšgSmoÙh”MVEÇbËd
;

219 
IÁ
 
	gm_mšS—rchWšdow
;

220 
BoÞ
 
	gm_bRe¡riùMESam¶šg
;

223 
IÁ
 
	gm_iMaxD–QP
;

224 
IÁ
 
	gm_iMaxCuDQPD•th
;

225 
IÁ
 
	gm_diffCuChromaQpOff£tD•th
;

227 
IÁ
 
	gm_chromaCbQpOff£t
;

228 
IÁ
 
	gm_chromaCrQpOff£t
;

229 
WCGChromaQPCÚŒÞ
 
	gm_wcgChromaQpCÚŒÞ
;

230 
UIÁ
 
	gm_¦iûChromaQpOff£tP”iodic™y
;

231 
IÁ
 
	gm_¦iûChromaQpOff£tIÁ¿OrP”iodic
[2 ];

233 
ChromaFÜm©
 
	gm_chromaFÜm©IDC
;

235 #ià
ADAPTIVE_QP_SELECTION


236 
BoÞ
 
	gm_bU£Ad­tQpS–eù
;

238 
BoÞ
 
	gm_ex‹ndedP»cisiÚProûssšgFÏg
;

239 
BoÞ
 
	gm_highP»cisiÚOff£tsEÇbËdFÏg
;

240 
BoÞ
 
	gm_bU£Ad­tiveQP
;

241 
IÁ
 
	gm_iQPAd­tiÚRªge
;

244 
IÁ
 
	gm_b™D•th
[
MAX_NUM_CHANNEL_TYPE
];

245 
BoÞ
 
	gm_bU£ASR
;

246 
BoÞ
 
	gm_bU£HADME
;

247 
BoÞ
 
	gm_u£RDOQ
;

248 
BoÞ
 
	gm_u£RDOQTS
;

249 
BoÞ
 
	gm_u£S–eùiveRDOQ
;

250 
UIÁ
 
	gm_rdP’®ty
;

251 
Fa¡IÁ”S—rchMode
 
	gm_ç¡IÁ”S—rchMode
;

252 
BoÞ
 
	gm_bU£E¬lyCU
;

253 
BoÞ
 
	gm_u£Fa¡DecisiÚFÜM”ge
;

254 
BoÞ
 
	gm_bU£CbfFa¡Mode
;

255 
BoÞ
 
	gm_u£E¬lySkD‘eùiÚ
;

256 
BoÞ
 
	gm_üossCompÚ’tP»diùiÚEÇbËdFÏg
;

257 
BoÞ
 
	gm_»cÚBa£dCrossCP»diùiÚE¡im©e
;

258 
UIÁ
 
	gm_log2SaoOff£tSÿË
[
MAX_NUM_CHANNEL_TYPE
];

259 
BoÞ
 
	gm_u£T¿nsfÜmSk
;

260 
BoÞ
 
	gm_u£T¿nsfÜmSkFa¡
;

261 
UIÁ
 
	gm_log2MaxT¿nsfÜmSkBlockSize
;

262 
BoÞ
 
	gm_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
;

263 
BoÞ
 
	gm_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
;

264 
BoÞ
 
	gm_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
;

265 
BoÞ
 
	gm_ÿbacBy·ssAlignm’tEÇbËdFÏg
;

266 
BoÞ
 
	gm_rdpcmEÇbËdFÏg
[
NUMBER_OF_RDPCM_SIGNALLING_MODES
];

267 
LumaLev–ToD–QPM­pšg
 
	gm_lumaLev–ToD–QPM­pšg
;

268 
IÁ
* 
	gm_aidQP
;

269 
UIÁ
 
	gm_uiD–QpRD
;

270 
BoÞ
 
	gm_bFa¡D–QP
;

272 
BoÞ
 
	gm_bU£CÚ¡¿šedIÁ¿P»d
;

273 
BoÞ
 
	gm_bFa¡UDIU£MPMEÇbËd
;

274 
BoÞ
 
	gm_bFa¡MEFÜG’BLowD–ayEÇbËd
;

275 
BoÞ
 
	gm_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
;

276 
BoÞ
 
	gm_u£PCM
;

277 
IÁ
 
	gm_PCMB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

278 
UIÁ
 
	gm_pcmLog2MaxSize
;

279 
UIÁ
 
	gm_uiPCMLog2MšSize
;

281 
SliûCÚ¡¿št
 
	gm_¦iûMode
;

282 
IÁ
 
	gm_¦iûArgum’t
;

284 
SliûCÚ¡¿št
 
	gm_¦iûSegm’tMode
;

285 
IÁ
 
	gm_¦iûSegm’tArgum’t
;

286 
BoÞ
 
	gm_bLFCrossSliûBound¬yFÏg
;

288 
BoÞ
 
	gm_bPCMIÅutB™D•thFÏg
;

289 
BoÞ
 
	gm_bPCMFž‹rDi§bËFÏg
;

290 
BoÞ
 
	gm_šŒaSmoÙhšgDi§bËdFÏg
;

291 
BoÞ
 
	gm_loÝFž‹rAüossTžesEÇbËdFÏg
;

292 
BoÞ
 
	gm_tžeUnifÜmS·cšgFÏg
;

293 
IÁ
 
	gm_iNumCÞumnsMšus1
;

294 
IÁ
 
	gm_iNumRowsMšus1
;

295 
	g¡d
::
veùÜ
<
IÁ
> 
m_tžeCÞumnWidth
;

296 
	g¡d
::
veùÜ
<
IÁ
> 
m_tžeRowHeight
;

298 
BoÞ
 
	gm_’ŒÝyCodšgSyncEÇbËdFÏg
;

300 
HashTy³
 
	gm_decodedPiùu»HashSEITy³
;

301 
BoÞ
 
	gm_bufãršgP”iodSEIEÇbËd
;

302 
BoÞ
 
	gm_piùu»TimšgSEIEÇbËd
;

303 
BoÞ
 
	gm_»cov”yPoštSEIEÇbËd
;

304 
BoÞ
 
	gm_tÚeM­pšgInfoSEIEÇbËd
;

305 
IÁ
 
	gm_tÚeM­Id
;

306 
BoÞ
 
	gm_tÚeM­CªûlFÏg
;

307 
BoÞ
 
	gm_tÚeM­P”si¡’ûFÏg
;

308 
IÁ
 
	gm_codedD©aB™D•th
;

309 
IÁ
 
	gm_rg‘B™D•th
;

310 
IÁ
 
	gm_mod–Id
;

311 
IÁ
 
	gm_mšV®ue
;

312 
IÁ
 
	gm_maxV®ue
;

313 
IÁ
 
	gm_sigmoidMidpošt
;

314 
IÁ
 
	gm_sigmoidWidth
;

315 
IÁ
 
	gm_numPivÙs
;

316 
IÁ
 
	gm_ÿm”aIsoS³edIdc
;

317 
IÁ
 
	gm_ÿm”aIsoS³edV®ue
;

318 
IÁ
 
	gm_exposu»IndexIdc
;

319 
IÁ
 
	gm_exposu»IndexV®ue
;

320 
BoÞ
 
	gm_exposu»Com³n§tiÚV®ueSignFÏg
;

321 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueNum”©Ü
;

322 
IÁ
 
	gm_exposu»Com³n§tiÚV®ueD’omIdc
;

323 
IÁ
 
	gm_»fSü“nLumšªûWh™e
;

324 
IÁ
 
	gm_ex‹ndedRªgeWh™eLev–
;

325 
IÁ
 
	gm_nomš®BÏckLev–LumaCodeV®ue
;

326 
IÁ
 
	gm_nomš®Wh™eLev–LumaCodeV®ue
;

327 
IÁ
 
	gm_ex‹ndedWh™eLev–LumaCodeV®ue
;

328 
IÁ
* 
	gm_¡¬tOfCodedIÁ”v®
;

329 
IÁ
* 
	gm_codedPivÙV®ue
;

330 
IÁ
* 
	gm_rg‘PivÙV®ue
;

331 
BoÞ
 
	gm_äamePackšgSEIEÇbËd
;

332 
IÁ
 
	gm_äamePackšgSEITy³
;

333 
IÁ
 
	gm_äamePackšgSEIId
;

334 
IÁ
 
	gm_äamePackšgSEIQušcunx
;

335 
IÁ
 
	gm_äamePackšgSEIIÁ”´‘©iÚ
;

336 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEIEÇbËd
;

337 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEICªûl
;

338 
IÁ
 
	gm_£gm’‹dReùF¿mePackšgSEITy³
;

339 
BoÞ
 
	gm_£gm’‹dReùF¿mePackšgSEIP”si¡’û
;

340 
IÁ
 
	gm_di¥ÏyOr›Á©iÚSEIAngË
;

341 
BoÞ
 
	gm_‹mpÜ®Lev–0IndexSEIEÇbËd
;

342 
BoÞ
 
	gm_g¿du®DecodšgReäeshInfoEÇbËd
;

343 
IÁ
 
	gm_noDi¥ÏySEITLay”
;

344 
BoÞ
 
	gm_decodšgUn™InfoSEIEÇbËd
;

345 
BoÞ
 
	gm_SOPDesütiÚSEIEÇbËd
;

346 
BoÞ
 
	gm_sÿÏbËNe¡šgSEIEÇbËd
;

347 
BoÞ
 
	gm_tmùsSEIEÇbËd
;

348 #ià
MCTS_ENC_CHECK


349 
BoÞ
 
	gm_tmùsSEITžeCÚ¡¿št
;

351 #ià
MCTS_EXTRACTION


352 
BoÞ
 
	gm_tmùsExŒaùiÚSEIEÇbËd
;

354 
BoÞ
 
	gm_timeCodeSEIEÇbËd
;

355 
IÁ
 
	gm_timeCodeSEINumTs
;

356 
TComSEITimeS‘
 
	gm_timeS‘A¼ay
[
MAX_TIMECODE_SEI_SETS
];

357 
BoÞ
 
	gm_kÃeSEIEÇbËd
;

358 
TEncSEIKÃeFunùiÚInfÜm©iÚ
 
	gm_kÃeFunùiÚInfÜm©iÚSEI
;

359 
	g¡d
::
¡ršg
 
m_cÞourRem­SEIFžeRoÙ
;

360 
TComSEIMa¡”šgDi¥Ïy
 
	gm_ma¡”šgDi¥Ïy
;

361 
BoÞ
 
	gm_®‹º©iveT¿nsãrCh¬aù”i¡icsSEIEÇbËd
;

362 
UCh¬
 
	gm_´eã¼edT¿nsãrCh¬aù”i¡ics
;

363 
BoÞ
 
	gm_g»’M‘ad©aInfoSEIEÇbËd
;

364 
UCh¬
 
	gm_g»’M‘ad©aTy³
;

365 
UCh¬
 
	gm_xsdM‘ricTy³
;

366 
BoÞ
 
	gm_ccvSEIEÇbËd
;

367 
BoÞ
 
	gm_ccvSEICªûlFÏg
;

368 
BoÞ
 
	gm_ccvSEIP”si¡’ûFÏg
;

369 
BoÞ
 
	gm_ccvSEIPrim¬›sP»£ÁFÏg
;

370 
BoÞ
 
	gm_ccvSEIMšLumšªûV®ueP»£ÁFÏg
;

371 
BoÞ
 
	gm_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
;

372 
BoÞ
 
	gm_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
;

373 
DoubË
 
	gm_ccvSEIPrim¬›sX
[
MAX_NUM_COMPONENT
];

374 
DoubË
 
	gm_ccvSEIPrim¬›sY
[
MAX_NUM_COMPONENT
];

375 
DoubË
 
	gm_ccvSEIMšLumšªûV®ue
;

376 
DoubË
 
	gm_ccvSEIMaxLumšªûV®ue
;

377 
DoubË
 
	gm_ccvSEIAvgLumšªûV®ue
;

378 
BoÞ
 
	gm_”pSEIEÇbËd
;

379 
BoÞ
 
	gm_”pSEICªûlFÏg
;

380 
BoÞ
 
	gm_”pSEIP”si¡’ûFÏg
;

381 
BoÞ
 
	gm_”pSEIGu¬dBªdFÏg
;

382 
UIÁ
 
	gm_”pSEIGu¬dBªdTy³
;

383 
UIÁ
 
	gm_”pSEILeáGu¬dBªdWidth
;

384 
UIÁ
 
	gm_”pSEIRightGu¬dBªdWidth
;

385 
BoÞ
 
	gm_¥h”eRÙ©iÚSEIEÇbËd
;

386 
BoÞ
 
	gm_¥h”eRÙ©iÚSEICªûlFÏg
;

387 
BoÞ
 
	gm_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
;

388 
IÁ
 
	gm_¥h”eRÙ©iÚSEIYaw
;

389 
IÁ
 
	gm_¥h”eRÙ©iÚSEIP™ch
;

390 
IÁ
 
	gm_¥h”eRÙ©iÚSEIRÞl
;

391 
BoÞ
 
	gm_omniV›wpÜtSEIEÇbËd
;

392 
UIÁ
 
	gm_omniV›wpÜtSEIId
;

393 
BoÞ
 
	gm_omniV›wpÜtSEICªûlFÏg
;

394 
BoÞ
 
	gm_omniV›wpÜtSEIP”si¡’ûFÏg
;

395 
UIÁ
 
	gm_omniV›wpÜtSEICÁMšus1
;

396 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEIAzimuthC’Œe
;

397 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEIEËv©iÚC’Œe
;

398 
	g¡d
::
veùÜ
<
IÁ
> 
m_omniV›wpÜtSEITžtC’Œe
;

399 
	g¡d
::
veùÜ
<
UIÁ
> 
m_omniV›wpÜtSEIHÜRªge
;

400 
	g¡d
::
veùÜ
<
UIÁ
> 
m_omniV›wpÜtSEIV”Rªge
;

401 
BoÞ
 
	gm_gÝBa£dTempÜ®Fž‹rEÇbËd
;

402 
BoÞ
 
	gm_cmpSEIEÇbËd
;

403 
BoÞ
 
	gm_cmpSEICmpCªûlFÏg
;

404 
BoÞ
 
	gm_cmpSEICmpP”si¡’ûFÏg
;

405 
BoÞ
 
	gm_rwpSEIEÇbËd
;

406 
BoÞ
 
	gm_rwpSEIRwpCªûlFÏg
;

407 
BoÞ
 
	gm_rwpSEIRwpP”si¡’ûFÏg
;

408 
BoÞ
 
	gm_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
;

409 
IÁ
 
	gm_rwpSEINumPackedRegiÚs
;

410 
IÁ
 
	gm_rwpSEIProjPiùu»Width
;

411 
IÁ
 
	gm_rwpSEIProjPiùu»Height
;

412 
IÁ
 
	gm_rwpSEIPackedPiùu»Width
;

413 
IÁ
 
	gm_rwpSEIPackedPiùu»Height
;

414 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpT¿nsfÜmTy³
;

415 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpSEIRwpGu¬dBªdFÏg
;

416 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚWidth
;

417 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚHeight
;

418 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIRwpSEIProjRegiÚTÝ
;

419 
	g¡d
::
veùÜ
<
UIÁ
> 
m_rwpSEIProjRegiÚLeá
;

420 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚWidth
;

421 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚHeight
;

422 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚTÝ
;

423 
	g¡d
::
veùÜ
<
UShÜt
> 
m_rwpSEIPackedRegiÚLeá
;

424 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpLeáGu¬dBªdWidth
;

425 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpRightGu¬dBªdWidth
;

426 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpTÝGu¬dBªdHeight
;

427 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
;

428 
	g¡d
::
veùÜ
<
BoÞ
> 
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
;

429 
	g¡d
::
veùÜ
<
UCh¬
> 
m_rwpSEIRwpGu¬dBªdTy³
;

430 
	g¡d
::
¡ršg
 
m_¬SEIFžeRoÙ
;

431 
BoÞ
 
	gm_fviSEIEÇbËd
;

432 
TComSEIFisheyeVideoInfo
 
	gm_fisheyeVideoInfo
;

433 
	g¡d
::
¡ršg
 
m_»giÚ®Ne¡šgSEIFžeRoÙ
;

434 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


435 
BoÞ
 
	gm_siiSEIEÇbËd
;

436 
UIÁ
 
	gm_siiSEINumUn™sInShu‰”IÁ”v®
;

437 
UIÁ
 
	gm_siiSEITimeSÿË
;

438 
	g¡d
::
veùÜ
<
UIÁ
> 
m_siiSEISubLay”NumUn™sInSI
;

440 #ià
SEI_ENCODER_CONTROL


442 
BoÞ
 
	gm_fgcSEIEÇbËd
;

443 
BoÞ
 
	gm_fgcSEICªûlFÏg
;

444 
BoÞ
 
	gm_fgcSEIP”si¡’ûFÏg
;

445 
UCh¬
 
	gm_fgcSEIMod–ID
;

446 
BoÞ
 
	gm_fgcSEIS•CÞourDescP»£ÁFÏg
;

447 
UCh¬
 
	gm_fgcSEIBËndšgModeID
;

448 
UCh¬
 
	gm_fgcSEILog2SÿËFaùÜ
;

449 
BoÞ
 
	gm_fgcSEICompMod–P»£Á
[
MAX_NUM_COMPONENT
];

450 #ià
FGS_RDD5_ENABLE


451 
UCh¬
 
	gm_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[
MAX_NUM_COMPONENT
];

452 
UCh¬
 
	gm_fgcSEINumMod–V®uesMšus1
[
MAX_NUM_COMPONENT
];

453 
UCh¬
 
	gm_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
];

454 
UCh¬
 
	gm_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
];

455 
UIÁ
 
	gm_fgcSEICompMod–V®ue
[
MAX_NUM_COMPONENT
][
MAX_NUM_INTENSITIES
][
MAX_NUM_MODEL_VALUES
];

458 
BoÞ
 
	gm_þlSEIEÇbËd
;

459 
UShÜt
 
	gm_þlSEIMaxCÚ‹ÁLev–
;

460 
UShÜt
 
	gm_þlSEIMaxPicAvgLev–
;

462 
BoÞ
 
	gm_aveSEIEÇbËd
;

463 
UIÁ
 
	gm_aveSEIAmb›ÁIÎumšªû
;

464 
UShÜt
 
	gm_aveSEIAmb›ÁLightX
;

465 
UShÜt
 
	gm_aveSEIAmb›ÁLightY
;

468 
BoÞ
 
	gm_u£Weigh‹dP»d
;

469 
BoÞ
 
	gm_u£Weigh‹dBiP»d
;

470 
Weigh‹dP»diùiÚM‘hod
 
	gm_weigh‹dP»diùiÚM‘hod
;

471 
UIÁ
 
	gm_log2P¬®ËlM”geLev–Mšus2
;

472 
UIÁ
 
	gm_maxNumM”geCªd
;

473 
SÿlšgLi¡Mode
 
	gm_u£SÿlšgLi¡Id
;

474 
	g¡d
::
¡ršg
 
m_sÿlšgLi¡FžeName
;

475 
IÁ
 
	gm_TMVPModeId
;

476 
BoÞ
 
	gm_SignD©aHidšgEÇbËdFÏg
;

477 
BoÞ
 
	gm_RCEÇbËR©eCÚŒÞ
;

478 
IÁ
 
	gm_RCT¬g‘B™¿‹
;

479 
IÁ
 
	gm_RCK“pH›¿rchiÿlB™
;

480 
BoÞ
 
	gm_RCLCULev–RC
;

481 
BoÞ
 
	gm_RCU£LCUS•¬©eMod–
;

482 
IÁ
 
	gm_RCIn™ŸlQP
;

483 
BoÞ
 
	gm_RCFÜûIÁ¿QP
;

484 
BoÞ
 
	gm_RCCpbS©u¿tiÚEÇbËd
;

485 
UIÁ
 
	gm_RCCpbSize
;

486 
DoubË
 
	gm_RCIn™ŸlCpbFuÎÃss
;

487 
BoÞ
 
	gm_T¿nsquªtBy·ssEÇbËdFÏg
;

488 
BoÞ
 
	gm_CUT¿nsquªtBy·ssFÏgFÜû
;

490 
Co¡Mode
 
	gm_co¡Mode
;

492 
TComVPS
 
	gm_cVPS
;

493 
BoÞ
 
	gm_»ÿlcuÏ‹QPAccÜdšgToLambda
;

494 
IÁ
 
	gm_aùiveP¬am‘”S‘sSEIEÇbËd
;

495 
BoÞ
 
	gm_vuiP¬am‘”sP»£ÁFÏg
;

496 
BoÞ
 
	gm_a¥eùR©ioInfoP»£ÁFÏg
;

497 
BoÞ
 
	gm_chromaRe§m¶šgFž‹rHštEÇbËd
;

498 
IÁ
 
	gm_chromaRe§m¶šgHÜFž‹rIdc
;

499 
IÁ
 
	gm_chromaRe§m¶šgV”Fž‹rIdc
;

500 
IÁ
 
	gm_a¥eùR©ioIdc
;

501 
IÁ
 
	gm_§rWidth
;

502 
IÁ
 
	gm_§rHeight
;

503 
BoÞ
 
	gm_ov”sÿnInfoP»£ÁFÏg
;

504 
BoÞ
 
	gm_ov”sÿnAµrÝrŸ‹FÏg
;

505 
BoÞ
 
	gm_videoSigÇlTy³P»£ÁFÏg
;

506 
IÁ
 
	gm_videoFÜm©
;

507 
BoÞ
 
	gm_videoFuÎRªgeFÏg
;

508 
BoÞ
 
	gm_cÞourDesütiÚP»£ÁFÏg
;

509 
IÁ
 
	gm_cÞourPrim¬›s
;

510 
IÁ
 
	gm_ŒªsãrCh¬aù”i¡ics
;

511 
IÁ
 
	gm_m©rixCÛffic›Ás
;

512 
BoÞ
 
	gm_chromaLocInfoP»£ÁFÏg
;

513 
IÁ
 
	gm_chromaSam¶eLocTy³TÝF›ld
;

514 
IÁ
 
	gm_chromaSam¶eLocTy³BÙtomF›ld
;

515 
BoÞ
 
	gm_ÃuŒ®ChromaIndiÿtiÚFÏg
;

516 
Wšdow
 
	gm_deçuÉDi¥ÏyWšdow
;

517 
BoÞ
 
	gm_äameF›ldInfoP»£ÁFÏg
;

518 
BoÞ
 
	gm_pocPrÝÜtiÚ®ToTimšgFÏg
;

519 
IÁ
 
	gm_numTicksPocDiffOÃMšus1
;

520 
BoÞ
 
	gm_b™¡»amRe¡riùiÚFÏg
;

521 
BoÞ
 
	gm_tžesFixedSŒuùu»FÏg
;

522 
BoÞ
 
	gm_mÙiÚVeùÜsOv”PicBound¬›sFÏg
;

523 
IÁ
 
	gm_mšS·tŸlSegm’tiÚIdc
;

524 
IÁ
 
	gm_maxBy‹sP”PicD’om
;

525 
IÁ
 
	gm_maxB™sP”MšCuD’om
;

526 
IÁ
 
	gm_log2MaxMvL’gthHÜizÚl
;

527 
IÁ
 
	gm_log2MaxMvL’gthV”tiÿl
;

529 
BoÞ
 
	gm_u£SŒÚgIÁ¿SmoÙhšg
;

530 
BoÞ
 
	gm_bEffic›ÁF›ldIRAPEÇbËd
;

531 
BoÞ
 
	gm_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
;

533 
	g¡d
::
¡ršg
 
m_summ¬yOutFž’ame
;

534 
	g¡d
::
¡ršg
 
m_summ¬yPicFž’ameBa£
;

535 
UIÁ
 
	gm_summ¬yV”bo£Ãss
;

537 
	gpublic
:

538 
	$TEncCfg
()

539 : 
	`m_tžeCÞumnWidth
()

540 , 
	$m_tžeRowHeight
()

542 
m_PCMB™D•th
[
CHANNEL_TYPE_LUMA
]=8;

543 
m_PCMB™D•th
[
CHANNEL_TYPE_CHROMA
]=8;

544 
	}
}

546 
	gvœtu®
 ~
	$TEncCfg
()

547 {
	}
}

549 
Void
 
	$£tProfže
(
Profže
::
Name
 
´ofže
è{ 
m_´ofže
 =…rofže; 
	}
}

550 
Void
 
	$£tLev–
(
Lev–
::
T›r
 
t›r
, Lev–::
Name
 
Ëv–
è{ 
m_Ëv–T›r
 =›r; 
m_Ëv–
 =†ev–; 
	}
}

552 
Void
 
	$£tF¿meR©e
 ( 
IÁ
 
i
 ) { 
m_iF¿meR©e
 = i; 
	}
}

553 
Void
 
	$£tF¿meSk
 ( 
UIÁ
 
i
 ) { 
m_F¿meSk
 = i; 
	}
}

554 
Void
 
	$£tTempÜ®Sub§m¶eR©io
 ( 
UIÁ
 
i
 ) { 
m_‹mpÜ®Sub§m¶eR©io
 = i; 
	}
}

555 
Void
 
	$£tSourûWidth
 ( 
IÁ
 
i
 ) { 
m_iSourûWidth
 = i; 
	}
}

556 
Void
 
	$£tSourûHeight
 ( 
IÁ
 
i
 ) { 
m_iSourûHeight
 = i; 
	}
}

558 
	gWšdow
 &
	$g‘CÚfÜmªûWšdow
(è{  
m_cÚfÜmªûWšdow
; 
	}
}

559 
Void
 
	$£tCÚfÜmªûWšdow
 (
IÁ
 
cÚfLeá
, IÁ 
cÚfRight
, IÁ 
cÚfTÝ
, IÁ 
cÚfBÙtom
 ) { 
m_cÚfÜmªûWšdow
.
	`£tWšdow
 (cÚfLeá, cÚfRight, cÚfTÝ, cÚfBÙtom); 
	}
}

561 
Void
 
	$£tF¿mesToBeEncoded
 ( 
IÁ
 
i
 ) { 
m_äamesToBeEncoded
 = i; 
	}
}

563 
BoÞ
 
	$g‘PrštMSEBa£dSequ’ûPSNR
 (ècÚ¡ {  
m_´štMSEBa£dSequ’ûPSNR
; 
	}
}

564 
Void
 
	$£tPrštMSEBa£dSequ’ûPSNR
 (
BoÞ
 
v®ue
è{ 
m_´štMSEBa£dSequ’ûPSNR
 = v®ue; 
	}
}

566 
BoÞ
 
	$g‘PrštHexP¢r
 (ècÚ¡ {  
m_´štHexP¢r
; 
	}
}

567 
Void
 
	$£tPrštHexP¢r
 (
BoÞ
 
v®ue
è{ 
m_´štHexP¢r
 = v®ue; 
	}
}

569 
BoÞ
 
	$g‘PrštF¿meMSE
 (ècÚ¡ {  
m_´štF¿meMSE
; 
	}
}

570 
Void
 
	$£tPrštF¿meMSE
 (
BoÞ
 
v®ue
è{ 
m_´štF¿meMSE
 = v®ue; 
	}
}

572 
BoÞ
 
	$g‘PrštSequ’ûMSE
 (ècÚ¡ {  
m_´štSequ’ûMSE
; 
	}
}

573 
Void
 
	$£tPrštSequ’ûMSE
 (
BoÞ
 
v®ue
è{ 
m_´štSequ’ûMSE
 = v®ue; 
	}
}

575 
BoÞ
 
	$g‘PrštMSSSIM
 (ècÚ¡ {  
m_´štMSSSIM
; 
	}
}

576 
Void
 
	$£tPrštMSSSIM
 (
BoÞ
 
v®ue
è{ 
m_´štMSSSIM
 = v®ue; 
	}
}

578 
BoÞ
 
	$g‘XPSNREÇbËFÏg
 (ècÚ¡ {  
m_bXPSNREÇbËFÏg
;
	}
}

579 
DoubË
 
	$g‘XPSNRWeight
 (cÚ¡ 
CompÚ’tID
 
id
ècÚ¡ {  
m_dXPSNRWeight
[id];
	}
}

581 
Void
 
	$£tXPSNREÇbËFÏg
 ( 
BoÞ
 
i
 ) { 
m_bXPSNREÇbËFÏg
 = i; 
	}
}

582 
Void
 
	$£tXPSNRWeight
 ( 
DoubË
 
dV®ue
, 
CompÚ’tID
 
id
è{ 
m_dXPSNRWeight
[id] = dV®ue;
	}
}

584 
BoÞ
 
	$g‘CabacZ”oWÜdPaddšgEÇbËd
(ècÚ¡ {  
m_ÿbacZ”oWÜdPaddšgEÇbËd
; 
	}
}

585 
Void
 
	$£tCabacZ”oWÜdPaddšgEÇbËd
(
BoÞ
 
v®ue
è{ 
m_ÿbacZ”oWÜdPaddšgEÇbËd
 = v®ue; 
	}
}

588 
Void
 
	$£tIÁ¿P”iod
 ( 
IÁ
 
i
 ) { 
m_uiIÁ¿P”iod
 = (
UIÁ
)i; 
	}
}

589 
Void
 
	$£tDecodšgReäeshTy³
 ( 
IÁ
 
i
 ) { 
m_uiDecodšgReäeshTy³
 = (
UIÁ
)i; 
	}
}

590 
Void
 
	$£tReWr™eP¬amS‘sFÏg
 ( 
BoÞ
 
b
 ) { 
m_bReWr™eP¬amS‘sFÏg
 = b; 
	}
}

591 
Void
 
	$£tGOPSize
 ( 
IÁ
 
i
 ) { 
m_iGOPSize
 = i; 
	}
}

592 
Void
 
	$£tGÝLi¡
 ( cÚ¡ 
GOPEÁry
 
GOPLi¡
[
MAX_GOP
] ) {  
IÁ
 
i
 = 0; i < MAX_GOP; i++ ) 
m_GOPLi¡
[i] = GOPLi¡[i]; 
	}
}

593 
Void
 
	$£tExŒaRPSs
 ( 
IÁ
 
i
 ) { 
m_exŒaRPSs
 = i; 
	}
}

594 cÚ¡ 
	gGOPEÁry
 &
	$g‘GOPEÁry
 ( 
IÁ
 
i
 ) cÚ¡ {  
m_GOPLi¡
[i]; 
	}
}

595 
Void
 
	$£tEncodedFÏg
 ( 
IÁ
 
i
, 
BoÞ
 
v®ue
 ) { 
m_GOPLi¡
[i].
m_isEncoded
 = v®ue; 
	}
}

596 
Void
 
	$£tMaxDecPicBufãršg
 ( 
UIÁ
 
u
, UIÁ 
Žay”
 ) { 
m_maxDecPicBufãršg
[Žay”] = u; 
	}
}

597 
Void
 
	$£tNumReÜd”Pics
 ( 
IÁ
 
i
, 
UIÁ
 
Žay”
 ) { 
m_numReÜd”Pics
[Žay”] = i; 
	}
}

599 
Void
 
	$£tQP
 ( 
IÁ
 
i
 ) { 
m_iQP
 = i; 
	}
}

600 
Void
 
	$£tIÁ¿QPOff£t
 ( 
IÁ
 
i
 ) { 
m_šŒaQPOff£t
 = i; 
	}
}

601 
Void
 
	$£tLambdaFromQPEÇbË
 ( 
BoÞ
 
b
 ) { 
m_ÏmbdaFromQPEÇbË
 = b; 
	}
}

602 
Void
 
	$£tPad
 ( 
IÁ
* 
iPad
 ) {  IÁ 
i
 = 0; i < 2; i++ ) 
m_aiPad
[i] = iPad[i]; 
	}
}

604 
IÁ
 
	$g‘MaxRefPicNum
 (è{  
m_iMaxRefPicNum
; 
	}
}

605 
Void
 
	$£tMaxRefPicNum
 ( 
IÁ
 
iMaxRefPicNum
 ) { 
m_iMaxRefPicNum
 = iMaxRefPicNum; 
	}
}

607 
IÁ
 
	$g‘MaxTempLay”
 (è{  
m_maxTempLay”
; 
	}
}

608 
Void
 
	$£tMaxTempLay”
 ( 
IÁ
 
maxTempLay”
 ) { 
m_maxTempLay”
 = maxTempLay”; 
	}
}

609 
Void
 
	$£tMaxCUWidth
 ( 
UIÁ
 
u
 ) { 
m_maxCUWidth
 = u; 
	}
}

610 
Void
 
	$£tMaxCUHeight
 ( 
UIÁ
 
u
 ) { 
m_maxCUHeight
 = u; 
	}
}

611 
Void
 
	$£tMaxTÙ®CUD•th
 ( 
UIÁ
 
u
 ) { 
m_maxTÙ®CUD•th
 = u; 
	}
}

612 
Void
 
	$£tLog2DiffMaxMšCodšgBlockSize
Ð
UIÁ
 
u
 ) { 
m_log2DiffMaxMšCodšgBlockSize
 = u; 
	}
}

615 
Void
 
	$£tQuadŒ“TULog2MaxSize
 ( 
UIÁ
 
u
 ) { 
m_uiQuadŒ“TULog2MaxSize
 = u; 
	}
}

616 
Void
 
	$£tQuadŒ“TULog2MšSize
 ( 
UIÁ
 
u
 ) { 
m_uiQuadŒ“TULog2MšSize
 = u; 
	}
}

617 
Void
 
	$£tQuadŒ“TUMaxD•thIÁ”
 ( 
UIÁ
 
u
 ) { 
m_uiQuadŒ“TUMaxD•thIÁ”
 = u; 
	}
}

618 
Void
 
	$£tQuadŒ“TUMaxD•thIÁ¿
 ( 
UIÁ
 
u
 ) { 
m_uiQuadŒ“TUMaxD•thIÁ¿
 = u; 
	}
}

620 
Void
 
	$£tU£AMP
Ð
BoÞ
 
b
 ) { 
m_u£AMP
 = b; 
	}
}

623 
Void
 
	$£tLoÝFž‹rDi§bË
 ( 
BoÞ
 
b
 ) { 
m_bLoÝFž‹rDi§bË
 = b; 
	}
}

624 
Void
 
	$£tLoÝFž‹rOff£tInPPS
 ( 
BoÞ
 
b
 ) { 
m_loÝFž‹rOff£tInPPS
 = b; 
	}
}

625 
Void
 
	$£tLoÝFž‹rB‘aOff£t
 ( 
IÁ
 
i
 ) { 
m_loÝFž‹rB‘aOff£tDiv2
 = i; 
	}
}

626 
Void
 
	$£tLoÝFž‹rTcOff£t
 ( 
IÁ
 
i
 ) { 
m_loÝFž‹rTcOff£tDiv2
 = i; 
	}
}

627 
Void
 
	$£tDeblockšgFž‹rM‘ric
 ( 
IÁ
 
i
 ) { 
m_deblockšgFž‹rM‘ric
 = i; 
	}
}

630 
Void
 
	$£tDi§bËIÁ¿PUsInIÁ”Sliûs
 ( 
BoÞ
 
b
 ) { 
m_bDi§bËIÁ¿PUsInIÁ”Sliûs
 = b; 
	}
}

631 
Void
 
	$£tMÙiÚE¡im©iÚS—rchM‘hod
 ( 
MES—rchM‘hod
 
e
 ) { 
m_mÙiÚE¡im©iÚS—rchM‘hod
 =ƒ; 
	}
}

632 
Void
 
	$£tS—rchRªge
 ( 
IÁ
 
i
 ) { 
m_iS—rchRªge
 = i; 
	}
}

633 
Void
 
	$£tB»dS—rchRªge
 ( 
IÁ
 
i
 ) { 
m_b»dS—rchRªge
 = i; 
	}
}

634 
Void
 
	$£tClFÜBiP»dMeEÇbËd
 ( 
BoÞ
 
b
 ) { 
m_bClFÜBiP»dMeEÇbËd
 = b; 
	}
}

635 
Void
 
	$£tFa¡MEAssumšgSmoÙh”MVEÇbËd
 ( 
BoÞ
 
b
 ) { 
m_bFa¡MEAssumšgSmoÙh”MVEÇbËd
 = b; 
	}
}

636 
Void
 
	$£tMšS—rchWšdow
 ( 
IÁ
 
i
 ) { 
m_mšS—rchWšdow
 = i; 
	}
}

637 
Void
 
	$£tRe¡riùMESam¶šg
 ( 
BoÞ
 
b
 ) { 
m_bRe¡riùMESam¶šg
 = b; 
	}
}

640 
Void
 
	$£tMaxD–QP
 ( 
IÁ
 
i
 ) { 
m_iMaxD–QP
 = i; 
	}
}

641 
Void
 
	$£tMaxCuDQPD•th
 ( 
IÁ
 
i
 ) { 
m_iMaxCuDQPD•th
 = i; 
	}
}

643 
IÁ
 
	$g‘DiffCuChromaQpOff£tD•th
 (ècÚ¡ {  
m_diffCuChromaQpOff£tD•th
; 
	}
}

644 
Void
 
	$£tDiffCuChromaQpOff£tD•th
 (
IÁ
 
v®ue
è{ 
m_diffCuChromaQpOff£tD•th
 = v®ue; 
	}
}

646 
Void
 
	$£tChromaCbQpOff£t
 ( 
IÁ
 
i
 ) { 
m_chromaCbQpOff£t
 = i; 
	}
}

647 
Void
 
	$£tChromaCrQpOff£t
 ( 
IÁ
 
i
 ) { 
m_chromaCrQpOff£t
 = i; 
	}
}

648 
Void
 
	$£tWCGChromaQpCÚŒÞ
 ( cÚ¡ 
WCGChromaQPCÚŒÞ
 &
ù¾
 ) { 
m_wcgChromaQpCÚŒÞ
 = cŒl; 
	}
}

649 cÚ¡ 
	gWCGChromaQPCÚŒÞ
 &
	$g‘WCGChromaQPCÚŒÞ
 (ècÚ¡ {  
m_wcgChromaQpCÚŒÞ
; 
	}
}

650 
Void
 
	$£tSliûChromaOff£tQpIÁ¿OrP”iodic
Ð
UIÁ
 
³riodic™y
, 
IÁ
 
¦iûChromaQpOff£tIÁ¿OrP”iodic
[2]è{ 
m_¦iûChromaQpOff£tP”iodic™y
 =…”iodic™y; 
	`memýy
(
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
, sliûChromaQpOff£tIÁ¿OrP”iodic, (m_¦iûChromaQpOff£tIÁ¿OrP”iodic)); 
	}
}

651 
IÁ
 
	$g‘SliûChromaOff£tQpIÁ¿OrP”iodic
Ð
BoÞ
 
bIsCr
ècÚ¡ {  
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[bIsCr?1:0]; 
	}
}

652 
UIÁ
 
	$g‘SliûChromaOff£tQpP”iodic™y
(ècÚ¡ {  
m_¦iûChromaQpOff£tP”iodic™y
; 
	}
}

654 
Void
 
	$£tChromaFÜm©Idc
 ( 
ChromaFÜm©
 
cf
 ) { 
m_chromaFÜm©IDC
 = cf; 
	}
}

655 
ChromaFÜm©
 
	$g‘ChromaFÜm©Idc
 ( ) {  
m_chromaFÜm©IDC
; 
	}
}

657 
Void
 
	$£tLumaLev–ToD–QPCÚŒÞs
ÐcÚ¡ 
LumaLev–ToD–QPM­pšg
 &
lumaLev–ToD–QPM­pšg
 ) { 
m_lumaLev–ToD–QPM­pšg
öumaLev–ToD–QPM­pšg; 
	}
}

658 cÚ¡ 
	gLumaLev–ToD–QPM­pšg
& 
	$g‘LumaLev–ToD–QPM­pšg
(ècÚ¡ {  
m_lumaLev–ToD–QPM­pšg
; 
	}
}

660 #ià
ADAPTIVE_QP_SELECTION


661 
Void
 
	$£tU£Ad­tQpS–eù
 ( 
BoÞ
 
i
 ) { 
m_bU£Ad­tQpS–eù
 = i; 
	}
}

662 
BoÞ
 
	$g‘U£Ad­tQpS–eù
 (è{  
m_bU£Ad­tQpS–eù
; 
	}
}

665 
BoÞ
 
	$g‘Ex‹ndedP»cisiÚProûssšgFÏg
 (ècÚ¡ {  
m_ex‹ndedP»cisiÚProûssšgFÏg
; 
	}
}

666 
Void
 
	$£tEx‹ndedP»cisiÚProûssšgFÏg
 (
BoÞ
 
v®ue
è{ 
m_ex‹ndedP»cisiÚProûssšgFÏg
 = v®ue; 
	}
}

668 
BoÞ
 
	$g‘HighP»cisiÚOff£tsEÇbËdFÏg
(ècÚ¡ {  
m_highP»cisiÚOff£tsEÇbËdFÏg
; 
	}
}

669 
Void
 
	$£tHighP»cisiÚOff£tsEÇbËdFÏg
(
BoÞ
 
v®ue
è{ 
m_highP»cisiÚOff£tsEÇbËdFÏg
 = v®ue; 
	}
}

671 
Void
 
	$£tU£Ad­tiveQP
 ( 
BoÞ
 
b
 ) { 
m_bU£Ad­tiveQP
 = b; 
	}
}

672 
Void
 
	$£tQPAd­tiÚRªge
 ( 
IÁ
 
i
 ) { 
m_iQPAd­tiÚRªge
 = i; 
	}
}

675 
IÁ
 
	$g‘F¿meR©e
 (è{  
m_iF¿meR©e
; 
	}
}

676 
UIÁ
 
	$g‘F¿meSk
 (è{  
m_F¿meSk
; 
	}
}

677 
UIÁ
 
	$g‘TempÜ®Sub§m¶eR©io
 (è{  
m_‹mpÜ®Sub§m¶eR©io
; 
	}
}

678 
IÁ
 
	$g‘SourûWidth
 (è{  
m_iSourûWidth
; 
	}
}

679 
IÁ
 
	$g‘SourûHeight
 (è{  
m_iSourûHeight
; 
	}
}

680 
IÁ
 
	$g‘F¿mesToBeEncoded
 (è{  
m_äamesToBeEncoded
; 
	}
}

683 
Void
 
	$£tLambdaModif›r
 ( 
UIÁ
 
uiIndex
, 
DoubË
 
dV®ue
 ) { 
m_adLambdaModif›r
[ uiIndex ] = dV®ue; 
	}
}

684 
DoubË
 
	$g‘LambdaModif›r
 ( 
UIÁ
 
uiIndex
 ) cÚ¡ {  
m_adLambdaModif›r
[ uiIndex ]; 
	}
}

685 
Void
 
£tIÁ¿LambdaModif›r
 ( cÚ¡ 
¡d
::
veùÜ
<
DoubË
> &
dV®ue
 ) { 
m_adIÁ¿LambdaModif›r
 = dValue; }

686 cÚ¡ 
	g¡d
::
veùÜ
<
DoubË
>& 
	$g‘IÁ¿LambdaModif›r
(ècÚ¡ {  
m_adIÁ¿LambdaModif›r
; 
	}
}

687 
Void
 
	$£tIÁ¿QpFaùÜ
 ( 
DoubË
 
dV®ue
 ) { 
m_dIÁ¿QpFaùÜ
 = dV®ue; 
	}
}

688 
DoubË
 
	$g‘IÁ¿QpFaùÜ
 (ècÚ¡ {  
m_dIÁ¿QpFaùÜ
; 
	}
}

691 
UIÁ
 
	$g‘IÁ¿P”iod
 (è{  
m_uiIÁ¿P”iod
; 
	}
}

692 
UIÁ
 
	$g‘DecodšgReäeshTy³
 (è{  
m_uiDecodšgReäeshTy³
; 
	}
}

693 
BoÞ
 
	$g‘ReWr™eP¬amS‘sFÏg
 (è{  
m_bReWr™eP¬amS‘sFÏg
; 
	}
}

694 
IÁ
 
	$g‘GOPSize
 (è{  
m_iGOPSize
; 
	}
}

695 
IÁ
 
	$g‘MaxDecPicBufãršg
 (
UIÁ
 
Žay”
è{  
m_maxDecPicBufãršg
[Žay”]; 
	}
}

696 
IÁ
 
	$g‘NumReÜd”Pics
 (
UIÁ
 
Žay”
è{  
m_numReÜd”Pics
[Žay”]; 
	}
}

697 
IÁ
 
	$g‘IÁ¿QPOff£t
 (ècÚ¡ {  
m_šŒaQPOff£t
; 
	}
}

698 
IÁ
 
	$g‘LambdaFromQPEÇbË
 (ècÚ¡ {  
m_ÏmbdaFromQPEÇbË
; 
	}
}

699 
	g´Ùeùed
:

700 
IÁ
 
	$g‘Ba£QP
 (ècÚ¡ {  
m_iQP
; 
	}
}

701 
	gpublic
:

702 
IÁ
 
	$g‘QPFÜPiùu»
 (cÚ¡ 
UIÁ
 
gÝIndex
, cÚ¡ 
TComSliû
 *
pSliû
) const;

703 
IÁ
 
	$g‘Pad
 ( 
IÁ
 
i
 ) { 
	`as£¹
 (˜< 2 );  
m_aiPad
[i]; 
	}
}

705 
BoÞ
 
	$g‘AcûssUn™D–im™”
(ècÚ¡ {  
m_AcûssUn™D–im™”
; 
	}
}

706 
Void
 
	$£tAcûssUn™D–im™”
(
BoÞ
 
v®
){ 
m_AcûssUn™D–im™”
 = v®; 
	}
}

709 
UIÁ
 
	$g‘QuadŒ“TULog2MaxSize
 (ècÚ¡ {  
m_uiQuadŒ“TULog2MaxSize
; 
	}
}

710 
UIÁ
 
	$g‘QuadŒ“TULog2MšSize
 (ècÚ¡ {  
m_uiQuadŒ“TULog2MšSize
; 
	}
}

711 
UIÁ
 
	$g‘QuadŒ“TUMaxD•thIÁ”
 (ècÚ¡ {  
m_uiQuadŒ“TUMaxD•thIÁ”
; 
	}
}

712 
UIÁ
 
	$g‘QuadŒ“TUMaxD•thIÁ¿
 (ècÚ¡ {  
m_uiQuadŒ“TUMaxD•thIÁ¿
; 
	}
}

715 
BoÞ
 
	$g‘LoÝFž‹rDi§bË
 (è{  
m_bLoÝFž‹rDi§bË
; 
	}
}

716 
BoÞ
 
	$g‘LoÝFž‹rOff£tInPPS
 (è{  
m_loÝFž‹rOff£tInPPS
; 
	}
}

717 
IÁ
 
	$g‘LoÝFž‹rB‘aOff£t
 (è{  
m_loÝFž‹rB‘aOff£tDiv2
; 
	}
}

718 
IÁ
 
	$g‘LoÝFž‹rTcOff£t
 (è{  
m_loÝFž‹rTcOff£tDiv2
; 
	}
}

719 
IÁ
 
	$g‘DeblockšgFž‹rM‘ric
 (è{  
m_deblockšgFž‹rM‘ric
; 
	}
}

722 
BoÞ
 
	$g‘Di§bËIÁ¿PUsInIÁ”Sliûs
 (ècÚ¡ {  
m_bDi§bËIÁ¿PUsInIÁ”Sliûs
; 
	}
}

723 
MES—rchM‘hod
 
	$g‘MÙiÚE¡im©iÚS—rchM‘hod
 ( ) cÚ¡ {  
m_mÙiÚE¡im©iÚS—rchM‘hod
; 
	}
}

724 
IÁ
 
	$g‘S—rchRªge
 (ècÚ¡ {  
m_iS—rchRªge
; 
	}
}

725 
BoÞ
 
	$g‘ClFÜBiP»dMeEÇbËd
 (ècÚ¡ {  
m_bClFÜBiP»dMeEÇbËd
; 
	}
}

726 
BoÞ
 
	$g‘Fa¡MEAssumšgSmoÙh”MVEÇbËd
 (ècÚ¡ {  
m_bFa¡MEAssumšgSmoÙh”MVEÇbËd
; 
	}
}

727 
IÁ
 
	$g‘MšS—rchWšdow
 (ècÚ¡ {  
m_mšS—rchWšdow
; 
	}
}

728 
BoÞ
 
	$g‘Re¡riùMESam¶šg
 (ècÚ¡ {  
m_bRe¡riùMESam¶šg
; 
	}
}

731 
IÁ
 
	$g‘MaxD–QP
 (ècÚ¡ {  
m_iMaxD–QP
; 
	}
}

732 
IÁ
 
	$g‘MaxCuDQPD•th
 (ècÚ¡ {  
m_iMaxCuDQPD•th
; 
	}
}

733 
BoÞ
 
	$g‘U£Ad­tiveQP
 (ècÚ¡ {  
m_bU£Ad­tiveQP
; 
	}
}

734 
IÁ
 
	$g‘QPAd­tiÚRªge
 (ècÚ¡ {  
m_iQPAd­tiÚRªge
; 
	}
}

737 
Void
 
	$£tB™D•th
ÐcÚ¡ 
ChªÃlTy³
 
chTy³
, 
IÁ
 
š‹º®B™D•thFÜChªÃl
 ) { 
m_b™D•th
[chTy³] = iÁ”ÇlB™D•thFÜChªÃl; 
	}
}

738 
Void
 
	$£tU£ASR
 ( 
BoÞ
 
b
 ) { 
m_bU£ASR
 = b; 
	}
}

739 
Void
 
	$£tU£HADME
 ( 
BoÞ
 
b
 ) { 
m_bU£HADME
 = b; 
	}
}

740 
Void
 
	$£tU£RDOQ
 ( 
BoÞ
 
b
 ) { 
m_u£RDOQ
 = b; 
	}
}

741 
Void
 
	$£tU£RDOQTS
 ( 
BoÞ
 
b
 ) { 
m_u£RDOQTS
 = b; 
	}
}

742 
Void
 
	$£tU£S–eùiveRDOQ
 ( 
BoÞ
 
b
 ) { 
m_u£S–eùiveRDOQ
 = b; 
	}
}

743 
Void
 
	$£tRD³ÇÉy
 ( 
UIÁ
 
u
 ) { 
m_rdP’®ty
 = u; 
	}
}

744 
Void
 
	$£tFa¡IÁ”S—rchMode
 ( 
Fa¡IÁ”S—rchMode
 
m
 ) { 
m_ç¡IÁ”S—rchMode
 = m; 
	}
}

745 
Void
 
	$£tU£E¬lyCU
 ( 
BoÞ
 
b
 ) { 
m_bU£E¬lyCU
 = b; 
	}
}

746 
Void
 
	$£tU£Fa¡DecisiÚFÜM”ge
 ( 
BoÞ
 
b
 ) { 
m_u£Fa¡DecisiÚFÜM”ge
 = b; 
	}
}

747 
Void
 
	$£tU£CbfFa¡Mode
 ( 
BoÞ
 
b
 ) { 
m_bU£CbfFa¡Mode
 = b; 
	}
}

748 
Void
 
	$£tU£E¬lySkD‘eùiÚ
 ( 
BoÞ
 
b
 ) { 
m_u£E¬lySkD‘eùiÚ
 = b; 
	}
}

749 
Void
 
	$£tU£CÚ¡¿šedIÁ¿P»d
 ( 
BoÞ
 
b
 ) { 
m_bU£CÚ¡¿šedIÁ¿P»d
 = b; 
	}
}

750 
Void
 
	$£tFa¡UDIU£MPMEÇbËd
 ( 
BoÞ
 
b
 ) { 
m_bFa¡UDIU£MPMEÇbËd
 = b; 
	}
}

751 
Void
 
	$£tFa¡MEFÜG’BLowD–ayEÇbËd
 ( 
BoÞ
 
b
 ) { 
m_bFa¡MEFÜG’BLowD–ayEÇbËd
 = b; 
	}
}

752 
Void
 
	$£tU£BLambdaFÜNÚKeyLowD–ayPiùu»s
 ( 
BoÞ
 
b
 ) { 
m_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
 = b; 
	}
}

754 
Void
 
	$£tPCMIÅutB™D•thFÏg
 ( 
BoÞ
 
b
 ) { 
m_bPCMIÅutB™D•thFÏg
 = b; 
	}
}

755 
Void
 
	$£tPCMFž‹rDi§bËFÏg
 ( 
BoÞ
 
b
 ) { 
m_bPCMFž‹rDi§bËFÏg
 = b; 
	}
}

756 
Void
 
	$£tU£PCM
 ( 
BoÞ
 
b
 ) { 
m_u£PCM
 = b; 
	}
}

757 
Void
 
	$£tPCMB™D•th
ÐcÚ¡ 
ChªÃlTy³
 
chTy³
, 
IÁ
 
pcmB™D•thFÜChªÃl
 ) { 
m_PCMB™D•th
[chTy³] =…cmB™D•thFÜChªÃl; 
	}
}

758 
Void
 
	$£tPCMLog2MaxSize
 ( 
UIÁ
 
u
 ) { 
m_pcmLog2MaxSize
 = u; 
	}
}

759 
Void
 
	$£tPCMLog2MšSize
 ( 
UIÁ
 
u
 ) { 
m_uiPCMLog2MšSize
 = u; 
	}
}

760 
Void
 
	$£tdQPs
 ( 
IÁ
* 
p
 ) { 
m_aidQP
 =…; 
	}
}

761 
Void
 
	$£tD–QpRD
 ( 
UIÁ
 
u
 ) {
m_uiD–QpRD
 = u; 
	}
}

762 
Void
 
	$£tFa¡D–Qp
 ( 
BoÞ
 
b
 ) {
m_bFa¡D–QP
 = b; 
	}
}

763 
BoÞ
 
	$g‘U£ASR
 (è{  
m_bU£ASR
; 
	}
}

764 
BoÞ
 
	$g‘U£HADME
 (è{  
m_bU£HADME
; 
	}
}

765 
BoÞ
 
	$g‘U£RDOQ
 (è{  
m_u£RDOQ
; 
	}
}

766 
BoÞ
 
	$g‘U£RDOQTS
 (è{  
m_u£RDOQTS
; 
	}
}

767 
BoÞ
 
	$g‘U£S–eùiveRDOQ
 (è{  
m_u£S–eùiveRDOQ
; 
	}
}

768 
IÁ
 
	$g‘RD³ÇÉy
 (è{  
m_rdP’®ty
; 
	}
}

769 
Fa¡IÁ”S—rchMode
 
	$g‘Fa¡IÁ”S—rchMode
(ècÚ¡{  
m_ç¡IÁ”S—rchMode
; 
	}
}

770 
BoÞ
 
	$g‘U£E¬lyCU
 (è{  
m_bU£E¬lyCU
; 
	}
}

771 
BoÞ
 
	$g‘U£Fa¡DecisiÚFÜM”ge
 (è{  
m_u£Fa¡DecisiÚFÜM”ge
; 
	}
}

772 
BoÞ
 
	$g‘U£CbfFa¡Mode
 (è{  
m_bU£CbfFa¡Mode
; 
	}
}

773 
BoÞ
 
	$g‘U£E¬lySkD‘eùiÚ
 (è{  
m_u£E¬lySkD‘eùiÚ
; 
	}
}

774 
BoÞ
 
	$g‘U£CÚ¡¿šedIÁ¿P»d
 (è{  
m_bU£CÚ¡¿šedIÁ¿P»d
; 
	}
}

775 
BoÞ
 
	$g‘Fa¡UDIU£MPMEÇbËd
 (è{  
m_bFa¡UDIU£MPMEÇbËd
; 
	}
}

776 
BoÞ
 
	$g‘Fa¡MEFÜG’BLowD–ayEÇbËd
 (è{  
m_bFa¡MEFÜG’BLowD–ayEÇbËd
; 
	}
}

777 
BoÞ
 
	$g‘U£BLambdaFÜNÚKeyLowD–ayPiùu»s
 (è{  
m_bU£BLambdaFÜNÚKeyLowD–ayPiùu»s
; 
	}
}

778 
BoÞ
 
	$g‘PCMIÅutB™D•thFÏg
 (è{  
m_bPCMIÅutB™D•thFÏg
; 
	}
}

779 
BoÞ
 
	$g‘PCMFž‹rDi§bËFÏg
 (è{  
m_bPCMFž‹rDi§bËFÏg
; 
	}
}

780 
BoÞ
 
	$g‘U£PCM
 (è{  
m_u£PCM
; 
	}
}

781 
UIÁ
 
	$g‘PCMLog2MaxSize
 (è{  
m_pcmLog2MaxSize
; 
	}
}

782 
UIÁ
 
	$g‘PCMLog2MšSize
 (è{  
m_uiPCMLog2MšSize
; 
	}
}

784 
BoÞ
 
	$g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
 (ècÚ¡ {  
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
; 
	}
}

785 
Void
 
	$£tCrossCompÚ’tP»diùiÚEÇbËdFÏg
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
 = v®ue; 
	}
}

786 
BoÞ
 
	$g‘U£RecÚBa£dCrossCP»diùiÚE¡im©e
 (ècÚ¡ {  
m_»cÚBa£dCrossCP»diùiÚE¡im©e
; 
	}
}

787 
Void
 
	$£tU£RecÚBa£dCrossCP»diùiÚE¡im©e
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_»cÚBa£dCrossCP»diùiÚE¡im©e
 = v®ue; 
	}
}

788 
Void
 
	$£tLog2SaoOff£tSÿË
(
ChªÃlTy³
 
ty³
, 
UIÁ
 
uiB™Shiá
è{ 
m_log2SaoOff£tSÿË
[ty³] = uiB™Shiá; 
	}
}

790 
BoÞ
 
	$g‘U£T¿nsfÜmSk
 (è{  
m_u£T¿nsfÜmSk
; 
	}
}

791 
Void
 
	$£tU£T¿nsfÜmSk
 ( 
BoÞ
 
b
 ) { 
m_u£T¿nsfÜmSk
 = b; 
	}
}

792 
BoÞ
 
	$g‘T¿nsfÜmSkRÙ©iÚEÇbËdFÏg
 (ècÚ¡ {  
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
; 
	}
}

793 
Void
 
	$£tT¿nsfÜmSkRÙ©iÚEÇbËdFÏg
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
 = v®ue; 
	}
}

794 
BoÞ
 
	$g‘T¿nsfÜmSkCÚ‹xtEÇbËdFÏg
 (ècÚ¡ {  
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
; 
	}
}

795 
Void
 
	$£tT¿nsfÜmSkCÚ‹xtEÇbËdFÏg
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
 = v®ue; 
	}
}

796 
BoÞ
 
	$g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
 (ècÚ¡ {  
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
; 
	}
}

797 
Void
 
	$£tP”si¡’tRiûAd­tiÚEÇbËdFÏg
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
 = v®ue; 
	}
}

798 
BoÞ
 
	$g‘CabacBy·ssAlignm’tEÇbËdFÏg
 (ècÚ¡ {  
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
; 
	}
}

799 
Void
 
	$£tCabacBy·ssAlignm’tEÇbËdFÏg
 (cÚ¡ 
BoÞ
 
v®ue
è{ 
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
 = v®ue; 
	}
}

800 
BoÞ
 
	$g‘RdpcmEÇbËdFÏg
 (cÚ¡ 
RDPCMSigÇÎšgMode
 
sigÇÎšgMode
ècÚ¡ {  
m_rdpcmEÇbËdFÏg
[sigÇÎšgMode]; 
	}
}

801 
Void
 
	$£tRdpcmEÇbËdFÏg
 (cÚ¡ 
RDPCMSigÇÎšgMode
 
sigÇÎšgMode
, cÚ¡ 
BoÞ
 
v®ue
è{ 
m_rdpcmEÇbËdFÏg
[sigÇÎšgMode] = v®ue; 
	}
}

802 
BoÞ
 
	$g‘U£T¿nsfÜmSkFa¡
 (è{  
m_u£T¿nsfÜmSkFa¡
; 
	}
}

803 
Void
 
	$£tU£T¿nsfÜmSkFa¡
 ( 
BoÞ
 
b
 ) { 
m_u£T¿nsfÜmSkFa¡
 = b; 
	}
}

804 
UIÁ
 
	$g‘Log2MaxT¿nsfÜmSkBlockSize
 (ècÚ¡ {  
m_log2MaxT¿nsfÜmSkBlockSize
; 
	}
}

805 
Void
 
	$£tLog2MaxT¿nsfÜmSkBlockSize
 ( 
UIÁ
 
u
 ) { 
m_log2MaxT¿nsfÜmSkBlockSize
 = u; 
	}
}

806 
BoÞ
 
	$g‘IÁ¿SmoÙhšgDi§bËdFÏg
 (ècÚ¡ {  
m_šŒaSmoÙhšgDi§bËdFÏg
; 
	}
}

807 
Void
 
	$£tIÁ¿SmoÙhšgDi§bËdFÏg
 (
BoÞ
 
bV®ue
è{ 
m_šŒaSmoÙhšgDi§bËdFÏg
=bV®ue; 
	}
}

809 cÚ¡ 
IÁ
* 
	$g‘dQPs
 (ècÚ¡ {  
m_aidQP
; 
	}
}

810 
UIÁ
 
	$g‘D–QpRD
 (ècÚ¡ {  
m_uiD–QpRD
; 
	}
}

811 
BoÞ
 
	$g‘Fa¡D–Qp
 (ècÚ¡ {  
m_bFa¡D–QP
; 
	}
}

814 
Void
 
	$£tSliûMode
 ( 
SliûCÚ¡¿št
 
i
 ) { 
m_¦iûMode
 = i; 
	}
}

815 
Void
 
	$£tSliûArgum’t
 ( 
IÁ
 
i
 ) { 
m_¦iûArgum’t
 = i; 
	}
}

816 
SliûCÚ¡¿št
 
	$g‘SliûMode
 (ècÚ¡ {  
m_¦iûMode
; 
	}
}

817 
IÁ
 
	$g‘SliûArgum’t
 (è{  
m_¦iûArgum’t
; 
	}
}

819 
Void
 
	$£tSliûSegm’tMode
 ( 
SliûCÚ¡¿št
 
i
 ) { 
m_¦iûSegm’tMode
 = i; 
	}
}

820 
Void
 
	$£tSliûSegm’tArgum’t
 ( 
IÁ
 
i
 ) { 
m_¦iûSegm’tArgum’t
 = i; 
	}
}

821 
SliûCÚ¡¿št
 
	$g‘SliûSegm’tMode
 (ècÚ¡ {  
m_¦iûSegm’tMode
; 
	}
}

822 
IÁ
 
	$g‘SliûSegm’tArgum’t
 (è{  
m_¦iûSegm’tArgum’t
;
	}
}

823 
Void
 
	$£tLFCrossSliûBound¬yFÏg
 ( 
BoÞ
 
bV®ue
 ) { 
m_bLFCrossSliûBound¬yFÏg
 = bV®ue; 
	}
}

824 
BoÞ
 
	$g‘LFCrossSliûBound¬yFÏg
 (è{  
m_bLFCrossSliûBound¬yFÏg
; 
	}
}

826 
Void
 
	$£tU£SAO
 (
BoÞ
 
bV®
è{ 
m_bU£SAO
 = bV®; 
	}
}

827 
BoÞ
 
	$g‘U£SAO
 (è{  
m_bU£SAO
; 
	}
}

828 
Void
 
	$£tTe¡SAODi§bËAtPiùu»Lev–
 (
BoÞ
 
bV®
è{ 
m_bTe¡SAODi§bËAtPiùu»Lev–
 = bV®; 
	}
}

829 
BoÞ
 
	$g‘Te¡SAODi§bËAtPiùu»Lev–
 ( ) cÚ¡ {  
m_bTe¡SAODi§bËAtPiùu»Lev–
; 
	}
}

831 
Void
 
	$£tSaoEncodšgR©e
(
DoubË
 
v
è{ 
m_§oEncodšgR©e
 = v; 
	}
}

832 
DoubË
 
	$g‘SaoEncodšgR©e
(ècÚ¡ {  
m_§oEncodšgR©e
; 
	}
}

833 
Void
 
	$£tSaoEncodšgR©eChroma
(
DoubË
 
v
è{ 
m_§oEncodšgR©eChroma
 = v; 
	}
}

834 
DoubË
 
	$g‘SaoEncodšgR©eChroma
(ècÚ¡ {  
m_§oEncodšgR©eChroma
; 
	}
}

835 
Void
 
	$£tMaxNumOff£tsP”Pic
 (
IÁ
 
iV®
è{ 
m_maxNumOff£tsP”Pic
 = iV®; 
	}
}

836 
IÁ
 
	$g‘MaxNumOff£tsP”Pic
 (è{  
m_maxNumOff£tsP”Pic
; 
	}
}

837 
Void
 
	$£tSaoCtuBound¬y
 (
BoÞ
 
v®
è{ 
m_§oCtuBound¬y
 = v®; 
	}
}

838 
BoÞ
 
	$g‘SaoCtuBound¬y
 (è{  
m_§oCtuBound¬y
; 
	}
}

839 
Void
 
	$£tRe£tEncod”S‹Aá”IRAP
(
BoÞ
 
b
è{ 
m_»£tEncod”S‹Aá”IRAP
 = b; 
	}
}

840 
BoÞ
 
	$g‘Re£tEncod”S‹Aá”IRAP
(ècÚ¡ {  
m_»£tEncod”S‹Aá”IRAP
; 
	}
}

841 
Void
 
	$£tLFCrossTžeBound¬yFÏg
 ( 
BoÞ
 
v®
 ) { 
m_loÝFž‹rAüossTžesEÇbËdFÏg
 = v®; 
	}
}

842 
BoÞ
 
	$g‘LFCrossTžeBound¬yFÏg
 (è{  
m_loÝFž‹rAüossTžesEÇbËdFÏg
; 
	}
}

843 
Void
 
	$£tTžeUnifÜmS·cšgFÏg
 ( 
BoÞ
 
b
 ) { 
m_tžeUnifÜmS·cšgFÏg
 = b; 
	}
}

844 
BoÞ
 
	$g‘TžeUnifÜmS·cšgFÏg
 (è{  
m_tžeUnifÜmS·cšgFÏg
; 
	}
}

845 
Void
 
	$£tNumCÞumnsMšus1
 ( 
IÁ
 
i
 ) { 
m_iNumCÞumnsMšus1
 = i; 
	}
}

846 
IÁ
 
	$g‘NumCÞumnsMšus1
 (è{  
m_iNumCÞumnsMšus1
; 
	}
}

847 
Void
 
£tCÞumnWidth
 ( cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
cÞumnWidth
 ) { 
m_tžeCÞumnWidth
 = columnWidth; }

848 
UIÁ
 
	$g‘CÞumnWidth
 ( 
UIÁ
 
cÞumnIdx
 ) {  
m_tžeCÞumnWidth
[cÞumnIdx]; 
	}
}

849 
Void
 
	$£tNumRowsMšus1
 ( 
IÁ
 
i
 ) { 
m_iNumRowsMšus1
 = i; 
	}
}

850 
IÁ
 
	$g‘NumRowsMšus1
 (è{  
m_iNumRowsMšus1
; 
	}
}

851 
Void
 
£tRowHeight
 ( cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
rowHeight
è{ 
m_tžeRowHeight
 =„owHeight; }

852 
UIÁ
 
	$g‘RowHeight
 ( 
UIÁ
 
rowIdx
 ) {  
m_tžeRowHeight
[rowIdx]; 
	}
}

853 
Void
 
xCheckGSP¬am‘”s
();

854 
Void
 
	$£tEÁrÝyCodšgSyncEÇbËdFÏg
(
BoÞ
 
b
è{ 
m_’ŒÝyCodšgSyncEÇbËdFÏg
 = b; 
	}
}

855 
BoÞ
 
	$g‘EÁrÝyCodšgSyncEÇbËdFÏg
(ècÚ¡ {  
m_’ŒÝyCodšgSyncEÇbËdFÏg
; 
	}
}

856 
Void
 
	$£tDecodedPiùu»HashSEITy³
(
HashTy³
 
m
è{ 
m_decodedPiùu»HashSEITy³
 = m; 
	}
}

857 
HashTy³
 
	$g‘DecodedPiùu»HashSEITy³
(ècÚ¡ {  
m_decodedPiùu»HashSEITy³
; 
	}
}

858 
Void
 
	$£tBufãršgP”iodSEIEÇbËd
(
BoÞ
 
b
è{ 
m_bufãršgP”iodSEIEÇbËd
 = b; 
	}
}

859 
BoÞ
 
	$g‘BufãršgP”iodSEIEÇbËd
(ècÚ¡ {  
m_bufãršgP”iodSEIEÇbËd
; 
	}
}

860 
Void
 
	$£tPiùu»TimšgSEIEÇbËd
(
BoÞ
 
b
è{ 
m_piùu»TimšgSEIEÇbËd
 = b; 
	}
}

861 
BoÞ
 
	$g‘Piùu»TimšgSEIEÇbËd
(ècÚ¡ {  
m_piùu»TimšgSEIEÇbËd
; 
	}
}

862 
Void
 
	$£tRecov”yPoštSEIEÇbËd
(
BoÞ
 
b
è{ 
m_»cov”yPoštSEIEÇbËd
 = b; 
	}
}

863 
BoÞ
 
	$g‘Recov”yPoštSEIEÇbËd
(ècÚ¡ {  
m_»cov”yPoštSEIEÇbËd
; 
	}
}

864 
Void
 
	$£tTÚeM­pšgInfoSEIEÇbËd
(
BoÞ
 
b
è{ 
m_tÚeM­pšgInfoSEIEÇbËd
 = b; 
	}
}

865 
BoÞ
 
	$g‘TÚeM­pšgInfoSEIEÇbËd
(è{  
m_tÚeM­pšgInfoSEIEÇbËd
; 
	}
}

866 
Void
 
	$£tTMISEITÚeM­Id
(
IÁ
 
b
è{ 
m_tÚeM­Id
 = b; 
	}
}

867 
IÁ
 
	$g‘TMISEITÚeM­Id
(è{  
m_tÚeM­Id
; 
	}
}

868 
Void
 
	$£tTMISEITÚeM­CªûlFÏg
(
BoÞ
 
b
è{ 
m_tÚeM­CªûlFÏg
=b; 
	}
}

869 
BoÞ
 
	$g‘TMISEITÚeM­CªûlFÏg
(è{  
m_tÚeM­CªûlFÏg
; 
	}
}

870 
Void
 
	$£tTMISEITÚeM­P”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_tÚeM­P”si¡’ûFÏg
 = b; 
	}
}

871 
BoÞ
 
	$g‘TMISEITÚeM­P”si¡’ûFÏg
(è{  
m_tÚeM­P”si¡’ûFÏg
; 
	}
}

872 
Void
 
	$£tTMISEICodedD©aB™D•th
(
IÁ
 
b
è{ 
m_codedD©aB™D•th
 = b; 
	}
}

873 
IÁ
 
	$g‘TMISEICodedD©aB™D•th
(è{  
m_codedD©aB™D•th
; 
	}
}

874 
Void
 
	$£tTMISEIT¬g‘B™D•th
(
IÁ
 
b
è{ 
m_rg‘B™D•th
 = b; 
	}
}

875 
IÁ
 
	$g‘TMISEIT¬g‘B™D•th
(è{  
m_rg‘B™D•th
; 
	}
}

876 
Void
 
	$£tTMISEIMod–ID
(
IÁ
 
b
è{ 
m_mod–Id
 = b; 
	}
}

877 
IÁ
 
	$g‘TMISEIMod–ID
(è{  
m_mod–Id
; 
	}
}

878 
Void
 
	$£tTMISEIMšV®ue
(
IÁ
 
b
è{ 
m_mšV®ue
 = b; 
	}
}

879 
IÁ
 
	$g‘TMISEIMšV®ue
(è{  
m_mšV®ue
; 
	}
}

880 
Void
 
	$£tTMISEIMaxV®ue
(
IÁ
 
b
è{ 
m_maxV®ue
 = b; 
	}
}

881 
IÁ
 
	$g‘TMISEIMaxV®ue
(è{  
m_maxV®ue
; 
	}
}

882 
Void
 
	$£tTMISEISigmoidMidpošt
(
IÁ
 
b
è{ 
m_sigmoidMidpošt
 = b; 
	}
}

883 
IÁ
 
	$g‘TMISEISigmoidMidpošt
(è{  
m_sigmoidMidpošt
; 
	}
}

884 
Void
 
	$£tTMISEISigmoidWidth
(
IÁ
 
b
è{ 
m_sigmoidWidth
 = b; 
	}
}

885 
IÁ
 
	$g‘TMISEISigmoidWidth
(è{  
m_sigmoidWidth
; 
	}
}

886 
Void
 
	$£tTMISEIS¹OfCodedIÁ”va
Ð
IÁ
* 
p
 ) { 
m_¡¬tOfCodedIÁ”v®
 =…; 
	}
}

887 
IÁ
* 
	$g‘TMISEIS¹OfCodedIÁ”va
(è{  
m_¡¬tOfCodedIÁ”v®
; 
	}
}

888 
Void
 
	$£tTMISEINumPivÙs
(
IÁ
 
b
è{ 
m_numPivÙs
 = b; 
	}
}

889 
IÁ
 
	$g‘TMISEINumPivÙs
(è{  
m_numPivÙs
; 
	}
}

890 
Void
 
	$£tTMISEICodedPivÙV®ue
Ð
IÁ
* 
p
 ) { 
m_codedPivÙV®ue
 =…; 
	}
}

891 
IÁ
* 
	$g‘TMISEICodedPivÙV®ue
(è{  
m_codedPivÙV®ue
; 
	}
}

892 
Void
 
	$£tTMISEIT¬g‘PivÙV®ue
Ð
IÁ
* 
p
 ) { 
m_rg‘PivÙV®ue
 =…; 
	}
}

893 
IÁ
* 
	$g‘TMISEIT¬g‘PivÙV®ue
(è{  
m_rg‘PivÙV®ue
; 
	}
}

894 
Void
 
	$£tTMISEICam”aIsoS³edIdc
(
IÁ
 
b
è{ 
m_ÿm”aIsoS³edIdc
 = b; 
	}
}

895 
IÁ
 
	$g‘TMISEICam”aIsoS³edIdc
(è{  
m_ÿm”aIsoS³edIdc
; 
	}
}

896 
Void
 
	$£tTMISEICam”aIsoS³edV®ue
(
IÁ
 
b
è{ 
m_ÿm”aIsoS³edV®ue
 = b; 
	}
}

897 
IÁ
 
	$g‘TMISEICam”aIsoS³edV®ue
(è{  
m_ÿm”aIsoS³edV®ue
; 
	}
}

898 
Void
 
	$£tTMISEIExposu»IndexIdc
(
IÁ
 
b
è{ 
m_exposu»IndexIdc
 = b; 
	}
}

899 
IÁ
 
	$g‘TMISEIExposurIndexIdc
(è{  
m_exposu»IndexIdc
; 
	}
}

900 
Void
 
	$£tTMISEIExposu»IndexV®ue
(
IÁ
 
b
è{ 
m_exposu»IndexV®ue
 = b; 
	}
}

901 
IÁ
 
	$g‘TMISEIExposurIndexV®ue
(è{  
m_exposu»IndexV®ue
; 
	}
}

902 
Void
 
	$£tTMISEIExposu»Com³n§tiÚV®ueSignFÏg
(
BoÞ
 
b
è{ 
m_exposu»Com³n§tiÚV®ueSignFÏg
 = b; 
	}
}

903 
BoÞ
 
	$g‘TMISEIExposu»Com³n§tiÚV®ueSignFÏg
(è{  
m_exposu»Com³n§tiÚV®ueSignFÏg
; 
	}
}

904 
Void
 
	$£tTMISEIExposu»Com³n§tiÚV®ueNum”©Ü
(
IÁ
 
b
è{ 
m_exposu»Com³n§tiÚV®ueNum”©Ü
 = b; 
	}
}

905 
IÁ
 
	$g‘TMISEIExposu»Com³n§tiÚV®ueNum”©Ü
(è{  
m_exposu»Com³n§tiÚV®ueNum”©Ü
; 
	}
}

906 
Void
 
	$£tTMISEIExposu»Com³n§tiÚV®ueD’omIdc
(
IÁ
 
b
è{ 
m_exposu»Com³n§tiÚV®ueD’omIdc
 =b; 
	}
}

907 
IÁ
 
	$g‘TMISEIExposu»Com³n§tiÚV®ueD’omIdc
(è{  
m_exposu»Com³n§tiÚV®ueD’omIdc
; 
	}
}

908 
Void
 
	$£tTMISEIRefSü“nLumšªûWh™e
(
IÁ
 
b
è{ 
m_»fSü“nLumšªûWh™e
 = b; 
	}
}

909 
IÁ
 
	$g‘TMISEIRefSü“nLumšªûWh™e
(è{  
m_»fSü“nLumšªûWh™e
; 
	}
}

910 
Void
 
	$£tTMISEIEx‹ndedRªgeWh™eLev–
(
IÁ
 
b
è{ 
m_ex‹ndedRªgeWh™eLev–
 = b; 
	}
}

911 
IÁ
 
	$g‘TMISEIEx‹ndedRªgeWh™eLev–
(è{  
m_ex‹ndedRªgeWh™eLev–
; 
	}
}

912 
Void
 
	$£tTMISEINomš®BÏckLev–LumaCodeV®ue
(
IÁ
 
b
è{ 
m_nomš®BÏckLev–LumaCodeV®ue
 = b; 
	}
}

913 
IÁ
 
	$g‘TMISEINomš®BÏckLev–LumaCodeV®ue
(è{  
m_nomš®BÏckLev–LumaCodeV®ue
; 
	}
}

914 
Void
 
	$£tTMISEINomš®Wh™eLev–LumaCodeV®ue
(
IÁ
 
b
è{ 
m_nomš®Wh™eLev–LumaCodeV®ue
 = b; 
	}
}

915 
IÁ
 
	$g‘TMISEINomš®Wh™eLev–LumaCodeV®ue
(è{  
m_nomš®Wh™eLev–LumaCodeV®ue
; 
	}
}

916 
Void
 
	$£tTMISEIEx‹ndedWh™eLev–LumaCodeV®ue
(
IÁ
 
b
è{ 
m_ex‹ndedWh™eLev–LumaCodeV®ue
 =b; 
	}
}

917 
IÁ
 
	$g‘TMISEIEx‹ndedWh™eLev–LumaCodeV®ue
(è{  
m_ex‹ndedWh™eLev–LumaCodeV®ue
; 
	}
}

918 
Void
 
	$£tF¿mePackšgA¼ªgem’tSEIEÇbËd
(
BoÞ
 
b
è{ 
m_äamePackšgSEIEÇbËd
 = b; 
	}
}

919 
BoÞ
 
	$g‘F¿mePackšgA¼ªgem’tSEIEÇbËd
(ècÚ¡ {  
m_äamePackšgSEIEÇbËd
; 
	}
}

920 
Void
 
	$£tF¿mePackšgA¼ªgem’tSEITy³
(
IÁ
 
b
è{ 
m_äamePackšgSEITy³
 = b; 
	}
}

921 
IÁ
 
	$g‘F¿mePackšgA¼ªgem’tSEITy³
(è{  
m_äamePackšgSEITy³
; 
	}
}

922 
Void
 
	$£tF¿mePackšgA¼ªgem’tSEIId
(
IÁ
 
b
è{ 
m_äamePackšgSEIId
 = b; 
	}
}

923 
IÁ
 
	$g‘F¿mePackšgA¼ªgem’tSEIId
(è{  
m_äamePackšgSEIId
; 
	}
}

924 
Void
 
	$£tF¿mePackšgA¼ªgem’tSEIQušcunx
(
IÁ
 
b
è{ 
m_äamePackšgSEIQušcunx
 = b; 
	}
}

925 
IÁ
 
	$g‘F¿mePackšgA¼ªgem’tSEIQušcunx
(è{  
m_äamePackšgSEIQušcunx
; 
	}
}

926 
Void
 
	$£tF¿mePackšgA¼ªgem’tSEIIÁ”´‘©iÚ
(
IÁ
 
b
è{ 
m_äamePackšgSEIIÁ”´‘©iÚ
 = b; 
	}
}

927 
IÁ
 
	$g‘F¿mePackšgA¼ªgem’tSEIIÁ”´‘©iÚ
(è{  
m_äamePackšgSEIIÁ”´‘©iÚ
; 
	}
}

928 
Void
 
	$£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEIEÇbËd
(
BoÞ
 
b
è{ 
m_£gm’‹dReùF¿mePackšgSEIEÇbËd
 = b; 
	}
}

929 
BoÞ
 
	$g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEIEÇbËd
(ècÚ¡ {  
m_£gm’‹dReùF¿mePackšgSEIEÇbËd
; 
	}
}

930 
Void
 
	$£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEICªûl
(
IÁ
 
b
è{ 
m_£gm’‹dReùF¿mePackšgSEICªûl
 = b; 
	}
}

931 
IÁ
 
	$g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEICªûl
(è{  
m_£gm’‹dReùF¿mePackšgSEICªûl
; 
	}
}

932 
Void
 
	$£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEITy³
(
IÁ
 
b
è{ 
m_£gm’‹dReùF¿mePackšgSEITy³
 = b; 
	}
}

933 
IÁ
 
	$g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEITy³
(è{  
m_£gm’‹dReùF¿mePackšgSEITy³
; 
	}
}

934 
Void
 
	$£tSegm’‹dReùF¿mePackšgA¼ªgem’tSEIP”si¡’û
(
IÁ
 
b
è{ 
m_£gm’‹dReùF¿mePackšgSEIP”si¡’û
 = b; 
	}
}

935 
IÁ
 
	$g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEIP”si¡’û
(è{  
m_£gm’‹dReùF¿mePackšgSEIP”si¡’û
; 
	}
}

936 
Void
 
	$£tDi¥ÏyOr›Á©iÚSEIAngË
(
IÁ
 
b
è{ 
m_di¥ÏyOr›Á©iÚSEIAngË
 = b; 
	}
}

937 
IÁ
 
	$g‘Di¥ÏyOr›Á©iÚSEIAngË
(è{  
m_di¥ÏyOr›Á©iÚSEIAngË
; 
	}
}

938 
Void
 
	$£tTempÜ®Lev–0IndexSEIEÇbËd
(
BoÞ
 
b
è{ 
m_‹mpÜ®Lev–0IndexSEIEÇbËd
 = b; 
	}
}

939 
BoÞ
 
	$g‘TempÜ®Lev–0IndexSEIEÇbËd
(ècÚ¡ {  
m_‹mpÜ®Lev–0IndexSEIEÇbËd
; 
	}
}

940 
Void
 
	$£tG¿du®DecodšgReäeshInfoEÇbËd
(
BoÞ
 
b
è{ 
m_g¿du®DecodšgReäeshInfoEÇbËd
 = b; 
	}
}

941 
BoÞ
 
	$g‘G¿du®DecodšgReäeshInfoEÇbËd
(ècÚ¡ {  
m_g¿du®DecodšgReäeshInfoEÇbËd
; 
	}
}

942 
Void
 
	$£tNoDi¥ÏySEITLay”
(
IÁ
 
b
è{ 
m_noDi¥ÏySEITLay”
 = b; 
	}
}

943 
IÁ
 
	$g‘NoDi¥ÏySEITLay”
(è{  
m_noDi¥ÏySEITLay”
; 
	}
}

944 
Void
 
	$£tDecodšgUn™InfoSEIEÇbËd
(
BoÞ
 
b
è{ 
m_decodšgUn™InfoSEIEÇbËd
 = b; 
	}
}

945 
BoÞ
 
	$g‘DecodšgUn™InfoSEIEÇbËd
(ècÚ¡ {  
m_decodšgUn™InfoSEIEÇbËd
; 
	}
}

946 
Void
 
	$£tSOPDesütiÚSEIEÇbËd
(
BoÞ
 
b
è{ 
m_SOPDesütiÚSEIEÇbËd
 = b; 
	}
}

947 
BoÞ
 
	$g‘SOPDesütiÚSEIEÇbËd
(ècÚ¡ {  
m_SOPDesütiÚSEIEÇbËd
; 
	}
}

948 
Void
 
	$£tSÿÏbËNe¡šgSEIEÇbËd
(
BoÞ
 
b
è{ 
m_sÿÏbËNe¡šgSEIEÇbËd
 = b; 
	}
}

949 
BoÞ
 
	$g‘SÿÏbËNe¡šgSEIEÇbËd
(ècÚ¡ {  
m_sÿÏbËNe¡šgSEIEÇbËd
; 
	}
}

950 
Void
 
	$£tTMCTSSEIEÇbËd
(
BoÞ
 
b
è{ 
m_tmùsSEIEÇbËd
 = b; 
	}
}

951 
BoÞ
 
	$g‘TMCTSSEIEÇbËd
(è{  
m_tmùsSEIEÇbËd
; 
	}
}

952 #ià
MCTS_ENC_CHECK


953 
Void
 
	$£tTMCTSSEITžeCÚ¡¿št
(
BoÞ
 
b
è{ 
m_tmùsSEITžeCÚ¡¿št
 = b; 
	}
}

954 
BoÞ
 
	$g‘TMCTSSEITžeCÚ¡¿št
(è{  
m_tmùsSEITžeCÚ¡¿št
; 
	}
}

956 #ià
MCTS_EXTRACTION


957 
Void
 
	$£tTMCTSExŒaùiÚSEIEÇbËd
(
BoÞ
 
b
è{ 
m_tmùsExŒaùiÚSEIEÇbËd
 = b; 
	}
}

958 
BoÞ
 
	$g‘TMCTSExŒaùiÚSEIEÇbËd
(ècÚ¡ {  
m_tmùsExŒaùiÚSEIEÇbËd
; 
	}
}

960 
Void
 
	$£tTimeCodeSEIEÇbËd
(
BoÞ
 
b
è{ 
m_timeCodeSEIEÇbËd
 = b; 
	}
}

961 
BoÞ
 
	$g‘TimeCodeSEIEÇbËd
(è{  
m_timeCodeSEIEÇbËd
; 
	}
}

962 
Void
 
	$£tNumb”OfTimeS‘s
(
IÁ
 
v®ue
è{ 
m_timeCodeSEINumTs
 = v®ue; 
	}
}

963 
IÁ
 
	$g‘Numb”OfTime£ts
(è{  
m_timeCodeSEINumTs
; 
	}
}

964 
Void
 
	$£tTimeS‘
(
TComSEITimeS‘
 
–em’t
, 
IÁ
 
šdex
è{ 
m_timeS‘A¼ay
[šdex] =ƒËm’t; 
	}
}

965 
	gTComSEITimeS‘
 &
	$g‘TimeS‘
(
IÁ
 
šdex
è{  
m_timeS‘A¼ay
[šdex]; 
	}
}

966 cÚ¡ 
	gTComSEITimeS‘
 &
	$g‘TimeS‘
(
IÁ
 
šdex
ècÚ¡ {  
m_timeS‘A¼ay
[šdex]; 
	}
}

967 
Void
 
	$£tKÃeSEIEÇbËd
(
IÁ
 
b
è{ 
m_kÃeSEIEÇbËd
 = b; 
	}
}

968 
BoÞ
 
	$g‘KÃeSEIEÇbËd
(è{  
m_kÃeSEIEÇbËd
; 
	}
}

969 
Void
 
	$£tKÃeFunùiÚInfÜm©iÚSEI
(cÚ¡ 
TEncSEIKÃeFunùiÚInfÜm©iÚ
 &
£ikÃe
è{ 
m_kÃeFunùiÚInfÜm©iÚSEI
 = seikÃe; 
	}
}

970 cÚ¡ 
	gTEncSEIKÃeFunùiÚInfÜm©iÚ
 &
	$g‘KÃeFunùiÚInfÜm©iÚSEI
(ècÚ¡ {  
m_kÃeFunùiÚInfÜm©iÚSEI
; 
	}
}

972 
Void
 
	$£tCcvSEIEÇbËd
(
BoÞ
 
b
è{ 
m_ccvSEIEÇbËd
 = b; 
	}
}

973 
BoÞ
 
	$g‘CcvSEIEÇbËd
(è{  
m_ccvSEIEÇbËd
; 
	}
}

974 
Void
 
	$£tCcvSEICªûlFÏg
(
BoÞ
 
b
è{ 
m_ccvSEICªûlFÏg
 = b; 
	}
}

975 
BoÞ
 
	$g‘CcvSEICªûlFÏg
(è{  
m_ccvSEICªûlFÏg
; 
	}
}

976 
Void
 
	$£tCcvSEIP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_ccvSEIP”si¡’ûFÏg
 = b; 
	}
}

977 
BoÞ
 
	$g‘CcvSEIP”si¡’ûFÏg
(è{  
m_ccvSEIP”si¡’ûFÏg
; 
	}
}

978 
Void
 
	$£tCcvSEIPrim¬›sP»£ÁFÏg
(
BoÞ
 
b
è{ 
m_ccvSEIPrim¬›sP»£ÁFÏg
 = b; 
	}
}

979 
BoÞ
 
	$g‘CcvSEIPrim¬›sP»£ÁFÏg
(è{  
m_ccvSEIPrim¬›sP»£ÁFÏg
; 
	}
}

980 
Void
 
	$£tCcvSEIMšLumšªûV®ueP»£ÁFÏg
(
BoÞ
 
b
è{ 
m_ccvSEIMšLumšªûV®ueP»£ÁFÏg
 = b; 
	}
}

981 
BoÞ
 
	$g‘CcvSEIMšLumšªûV®ueP»£ÁFÏg
(è{  
m_ccvSEIMšLumšªûV®ueP»£ÁFÏg
; 
	}
}

982 
Void
 
	$£tCcvSEIMaxLumšªûV®ueP»£ÁFÏg
(
BoÞ
 
b
è{ 
m_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
 = b; 
	}
}

983 
BoÞ
 
	$g‘CcvSEIMaxLumšªûV®ueP»£ÁFÏg
(è{  
m_ccvSEIMaxLumšªûV®ueP»£ÁFÏg
; 
	}
}

984 
Void
 
	$£tCcvSEIAvgLumšªûV®ueP»£ÁFÏg
(
BoÞ
 
b
è{ 
m_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
 = b; 
	}
}

985 
BoÞ
 
	$g‘CcvSEIAvgLumšªûV®ueP»£ÁFÏg
(è{  
m_ccvSEIAvgLumšªûV®ueP»£ÁFÏg
; 
	}
}

986 
Void
 
	$£tCcvSEIPrim¬›sX
(
DoubË
 
dV®ue
, 
IÁ
 
šdex
è{ 
m_ccvSEIPrim¬›sX
[šdex] = dV®ue; 
	}
}

987 
DoubË
 
	$g‘CcvSEIPrim¬›sX
(
IÁ
 
šdex
è{  
m_ccvSEIPrim¬›sX
[šdex]; 
	}
}

988 
Void
 
	$£tCcvSEIPrim¬›sY
(
DoubË
 
dV®ue
, 
IÁ
 
šdex
è{ 
m_ccvSEIPrim¬›sY
[šdex] = dV®ue; 
	}
}

989 
DoubË
 
	$g‘CcvSEIPrim¬›sY
(
IÁ
 
šdex
è{  
m_ccvSEIPrim¬›sY
[šdex]; 
	}
}

990 
Void
 
	$£tCcvSEIMšLumšªûV®ue
 (
DoubË
 
dV®ue
è{ 
m_ccvSEIMšLumšªûV®ue
 = dV®ue; 
	}
}

991 
DoubË
 
	$g‘CcvSEIMšLumšªûV®ue
 (è{  
m_ccvSEIMšLumšªûV®ue
; 
	}
}

992 
Void
 
	$£tCcvSEIMaxLumšªûV®ue
 (
DoubË
 
dV®ue
è{ 
m_ccvSEIMaxLumšªûV®ue
 = dV®ue; 
	}
}

993 
DoubË
 
	$g‘CcvSEIMaxLumšªûV®ue
 (è{  
m_ccvSEIMaxLumšªûV®ue
; 
	}
}

994 
Void
 
	$£tCcvSEIAvgLumšªûV®ue
 (
DoubË
 
dV®ue
è{ 
m_ccvSEIAvgLumšªûV®ue
 = dV®ue; 
	}
}

995 
DoubË
 
	$g‘CcvSEIAvgLumšªûV®ue
 (è{  
m_ccvSEIAvgLumšªûV®ue
; 
	}
}

997 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


998 
Void
 
	$£tSiiSEIEÇbËd
(
BoÞ
 
b
è{ 
m_siiSEIEÇbËd
 = b; 
	}
}

999 
BoÞ
 
	$g‘SiiSEIEÇbËd
(è{  
m_siiSEIEÇbËd
; 
	}
}

1000 
Void
 
	$£tSiiSEINumUn™sInShu‰”IÁ”v®
(
UIÁ
 
v®ue
è{ 
m_siiSEINumUn™sInShu‰”IÁ”v®
 = v®ue; 
	}
}

1001 
UIÁ
 
	$g‘SiiSEINumUn™sInShu‰”IÁ”v®
(è{  
m_siiSEINumUn™sInShu‰”IÁ”v®
; 
	}
}

1002 
Void
 
	$£tSiiSEITimeSÿË
(
UIÁ
 
v®ue
è{ 
m_siiSEITimeSÿË
 = v®ue; 
	}
}

1003 
UIÁ
 
	$g‘SiiSEITimeSÿË
(è{  
m_siiSEITimeSÿË
; 
	}
}

1004 
UIÁ
 
	$g‘SiiSEIMaxSubLay”sMšus1
(è{  
	`UIÁ
(
¡d
::
	`max
(1u, UIÁ(
m_siiSEISubLay”NumUn™sInSI
.
	`size
()))-1 ); 
	}
}

1005 
BoÞ
 
	$g‘SiiSEIFixedSIw™hšCLVS
(è{  
m_siiSEISubLay”NumUn™sInSI
.
	`em±y
(); 
	}
}

1006 
Void
 
£tSiiSEISubLay”NumUn™sInSI
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
b
è{ 
m_siiSEISubLay”NumUn™sInSI
 = b; }

1007 
UIÁ
 
	$g‘SiiSEISubLay”NumUn™sInSI
(
UIÁ
 
idx
ècÚ¡ {  
m_siiSEISubLay”NumUn™sInSI
[idx]; 
	}
}

1009 #ià
SEI_ENCODER_CONTROL


1011 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEIEÇbËd
 (
BoÞ
 
b
è{ 
m_fgcSEIEÇbËd
 = b; 
	}
}

1012 
BoÞ
 
	$g‘FžmG¿šCh¬aù”¡icsSEIEÇbËd
(è{  
m_fgcSEIEÇbËd
; 
	}
}

1013 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEICªûlFÏg
(
BoÞ
 
b
è{ 
m_fgcSEICªûlFÏg
 = b; 
	}
}

1014 
BoÞ
 
	$g‘FžmG¿šCh¬aù”¡icsSEICªûlFÏg
(è{  
m_fgcSEICªûlFÏg
; 
	}
}

1015 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEIP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_fgcSEIP”si¡’ûFÏg
 = b; 
	}
}

1016 
BoÞ
 
	$g‘FžmG¿šCh¬aù”¡icsSEIP”si¡’ûFÏg
(è{  
m_fgcSEIP”si¡’ûFÏg
; 
	}
}

1017 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEIMod–ID
(
UCh¬
 
v
 ) { 
m_fgcSEIMod–ID
 = v; 
	}
}

1018 
UCh¬
 
	$g‘FžmG¿šCh¬aù”¡icsSEIMod–ID
(è{  
m_fgcSEIMod–ID
; 
	}
}

1019 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEIS•CÞourDescP»£Á
(
BoÞ
 
b
è{ 
m_fgcSEIS•CÞourDescP»£ÁFÏg
 = b; 
	}
}

1020 
BoÞ
 
	$g‘FžmG¿šCh¬aù”¡icsSEIS•CÞourDescP»£Á
(è{  
m_fgcSEIS•CÞourDescP»£ÁFÏg
; 
	}
}

1021 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEIBËndšgModeID
(
UCh¬
 
v
 ) { 
m_fgcSEIBËndšgModeID
 = v; 
	}
}

1022 
UCh¬
 
	$g‘FžmG¿šCh¬aù”¡icsSEIBËndšgModeID
(è{  
m_fgcSEIBËndšgModeID
; 
	}
}

1023 
Void
 
	$£tFžmG¿šCh¬aù”¡icsSEILog2SÿËFaùÜ
(
UCh¬
 
v
 ) { 
m_fgcSEILog2SÿËFaùÜ
 = v; 
	}
}

1024 
UCh¬
 
	$g‘FžmG¿šCh¬aù”¡icsSEILog2SÿËFaùÜ
(è{  
m_fgcSEILog2SÿËFaùÜ
; 
	}
}

1025 
Void
 
	$£tFGCSEICompMod–P»£Á
(
BoÞ
 
b
, 
IÁ
 
šdex
è{ 
m_fgcSEICompMod–P»£Á
[šdex] = b; 
	}
}

1026 
BoÞ
 
	$g‘FGCSEICompMod–P»£Á
(
IÁ
 
šdex
è{  
m_fgcSEICompMod–P»£Á
[šdex]; 
	}
}

1027 #ià
FGS_RDD5_ENABLE


1028 
Void
 
	$£tFGCSEINumIÁ’s™yIÁ”v®Mšus1
(
UCh¬
 
v
, 
IÁ
 
šdex
è{ 
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[šdex] = v; 
	}
}

1029 
UCh¬
 
	$g‘FGCSEINumIÁ’s™yIÁ”v®Mšus1
(
IÁ
 
šdex
è{  
m_fgcSEINumIÁ’s™yIÁ”v®Mšus1
[šdex]; 
	}
}

1030 
Void
 
	$£tFGCSEINumMod–V®uesMšus1
(
UCh¬
 
v
, 
IÁ
 
šdex
è{ 
m_fgcSEINumMod–V®uesMšus1
[šdex] = v; 
	}
}

1031 
UCh¬
 
	$g‘FGCSEINumMod–V®uesMšus1
(
IÁ
 
šdex
è{  
m_fgcSEINumMod–V®uesMšus1
[šdex]; 
	}
}

1032 
Void
 
	$£tFGCSEIIÁ’s™yIÁ”v®Low”Bound
(
UCh¬
 
v
, 
IÁ
 
šdex
, IÁ 
ùr
è{ 
m_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[šdex][ùr] = v; 
	}
}

1033 
UCh¬
 
	$g‘FGCSEIIÁ’s™yIÁ”v®Low”Bound
(
IÁ
 
šdex
, IÁ 
ùr
è{  
m_fgcSEIIÁ’s™yIÁ”v®Low”Bound
[šdex][ùr]; 
	}
}

1034 
Void
 
	$£tFGCSEIIÁ’s™yIÁ”v®Uµ”Bound
(
UCh¬
 
v
, 
IÁ
 
šdex
, IÁ 
ùr
è{ 
m_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[šdex][ùr] = v; 
	}
}

1035 
UCh¬
 
	$g‘FGCSEIIÁ’s™yIÁ”v®Uµ”Bound
(
IÁ
 
šdex
, IÁ 
ùr
è{  
m_fgcSEIIÁ’s™yIÁ”v®Uµ”Bound
[šdex][ùr]; 
	}
}

1036 
Void
 
	$£tFGCSEICompMod–V®ue
(
UIÁ
 
v
, 
IÁ
 
šdex
, IÁ 
ùr
, IÁ 
mod–CŒ
è{ 
m_fgcSEICompMod–V®ue
[šdex][ùr][mod–CŒ] = v; 
	}
}

1037 
UIÁ
 
	$g‘FGCSEICompMod–V®ue
(
IÁ
 
šdex
, IÁ 
ùr
, IÁ 
mod–CŒ
è{  
m_fgcSEICompMod–V®ue
[šdex][ùr][mod–CŒ]; 
	}
}

1040 
Void
 
	$£tCLLSEIEÇbËd
(
BoÞ
 
b
è{ 
m_þlSEIEÇbËd
 = b; 
	}
}

1041 
BoÞ
 
	$g‘CLLSEIEÇbËd
(è{  
m_þlSEIEÇbËd
; 
	}
}

1042 
Void
 
	$£tCLLSEIMaxCÚ‹ÁLightLev–
 (
UShÜt
 
v
è{ 
m_þlSEIMaxCÚ‹ÁLev–
 = v; 
	}
}

1043 
UShÜt
 
	$g‘CLLSEIMaxCÚ‹ÁLightLev–
(è{  
m_þlSEIMaxCÚ‹ÁLev–
; 
	}
}

1044 
Void
 
	$£tCLLSEIMaxPicAvgLightLev–
(
UShÜt
 
v
è{ 
m_þlSEIMaxPicAvgLev–
 = v; 
	}
}

1045 
UShÜt
 
	$g‘CLLSEIMaxPicAvgLightLev–
(è{  
m_þlSEIMaxPicAvgLev–
; 
	}
}

1047 
Void
 
	$£tAmb›ÁV›wšgEnvœÚm’tSEIEÇbËd
 (
BoÞ
 
b
è{ 
m_aveSEIEÇbËd
 = b; 
	}
}

1048 
BoÞ
 
	$g‘Amb›ÁV›wšgEnvœÚm’tSEIEÇbËd
 (è{  
m_aveSEIEÇbËd
; 
	}
}

1049 
Void
 
	$£tAmb›ÁV›wšgEnvœÚm’tSEIIÎumšªû
(
UIÁ
 
v
 ) { 
m_aveSEIAmb›ÁIÎumšªû
 = v; 
	}
}

1050 
UIÁ
 
	$g‘Amb›ÁV›wšgEnvœÚm’tSEIIÎumšªû
(è{  
m_aveSEIAmb›ÁIÎumšªû
; 
	}
}

1051 
Void
 
	$£tAmb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightX
(
UShÜt
 
v
 ) { 
m_aveSEIAmb›ÁLightX
 = v; 
	}
}

1052 
UShÜt
 
	$g‘Amb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightX
(è{  
m_aveSEIAmb›ÁLightX
; 
	}
}

1053 
Void
 
	$£tAmb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightY
(
UShÜt
 
v
 ) { 
m_aveSEIAmb›ÁLightY
 = v; 
	}
}

1054 
UShÜt
 
	$g‘Amb›ÁV›wšgEnvœÚm’tSEIAmb›ÁLightY
(è{  
m_aveSEIAmb›ÁLightY
; 
	}
}

1056 
Void
 
	$£tE½SEIEÇbËd
(
BoÞ
 
b
è{ 
m_”pSEIEÇbËd
 = b; 
	}
}

1057 
BoÞ
 
	$g‘E½SEIEÇbËd
(è{  
m_”pSEIEÇbËd
; 
	}
}

1058 
Void
 
	$£tE½SEICªûlFÏg
(
BoÞ
 
b
è{ 
m_”pSEICªûlFÏg
 = b; 
	}
}

1059 
BoÞ
 
	$g‘E½SEICªûlFÏg
(è{  
m_”pSEICªûlFÏg
; 
	}
}

1060 
Void
 
	$£tE½SEIP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_”pSEIP”si¡’ûFÏg
 = b; 
	}
}

1061 
BoÞ
 
	$g‘E½SEIP”si¡’ûFÏg
(è{  
m_”pSEIP”si¡’ûFÏg
; 
	}
}

1062 
Void
 
	$£tE½SEIGu¬dBªdFÏg
(
BoÞ
 
b
è{ 
m_”pSEIGu¬dBªdFÏg
 = b; 
	}
}

1063 
BoÞ
 
	$g‘E½SEIGu¬dBªdFÏg
(è{  
m_”pSEIGu¬dBªdFÏg
; 
	}
}

1064 
Void
 
	$£tE½SEIGu¬dBªdTy³
(
UIÁ
 
b
è{ 
m_”pSEIGu¬dBªdTy³
 = b; 
	}
}

1065 
UIÁ
 
	$g‘E½SEIGu¬dBªdTy³
(è{  
m_”pSEIGu¬dBªdTy³
; 
	}
}

1066 
Void
 
	$£tE½SEILeáGu¬dBªdWidth
(
UIÁ
 
b
è{ 
m_”pSEILeáGu¬dBªdWidth
 = b; 
	}
}

1067 
UIÁ
 
	$g‘E½SEILeáGu¬dBªdWidth
(è{  
m_”pSEILeáGu¬dBªdWidth
; 
	}
}

1068 
Void
 
	$£tE½SEIRightGu¬dBªdWidth
(
UIÁ
 
b
è{ 
m_”pSEIRightGu¬dBªdWidth
 = b; 
	}
}

1069 
UIÁ
 
	$g‘E½SEIRightGu¬dBªdWidth
(è{  
m_”pSEIRightGu¬dBªdWidth
; 
	}
}

1070 
Void
 
	$£tSph”eRÙ©iÚSEIEÇbËd
(
BoÞ
 
b
è{ 
m_¥h”eRÙ©iÚSEIEÇbËd
 = b; 
	}
}

1071 
BoÞ
 
	$g‘Sph”eRÙ©iÚSEIEÇbËd
(è{  
m_¥h”eRÙ©iÚSEIEÇbËd
; 
	}
}

1072 
Void
 
	$£tSph”eRÙ©iÚSEICªûlFÏg
(
BoÞ
 
b
è{ 
m_¥h”eRÙ©iÚSEICªûlFÏg
 = b; 
	}
}

1073 
BoÞ
 
	$g‘Sph”eRÙ©iÚSEICªûlFÏg
(è{  
m_¥h”eRÙ©iÚSEICªûlFÏg
; 
	}
}

1074 
Void
 
	$£tSph”eRÙ©iÚSEIP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
 = b; 
	}
}

1075 
BoÞ
 
	$g‘Sph”eRÙ©iÚSEIP”si¡’ûFÏg
(è{  
m_¥h”eRÙ©iÚSEIP”si¡’ûFÏg
; 
	}
}

1076 
Void
 
	$£tSph”eRÙ©iÚSEIYaw
(
IÁ
 
b
è{ 
m_¥h”eRÙ©iÚSEIYaw
 = b; 
	}
}

1077 
IÁ
 
	$g‘Sph”eRÙ©iÚSEIYaw
(è{  
m_¥h”eRÙ©iÚSEIYaw
; 
	}
}

1078 
Void
 
	$£tSph”eRÙ©iÚSEIP™ch
(
IÁ
 
b
è{ 
m_¥h”eRÙ©iÚSEIP™ch
 = b; 
	}
}

1079 
IÁ
 
	$g‘Sph”eRÙ©iÚSEIP™ch
(è{  
m_¥h”eRÙ©iÚSEIP™ch
; 
	}
}

1080 
Void
 
	$£tSph”eRÙ©iÚSEIRÞl
(
IÁ
 
b
è{ 
m_¥h”eRÙ©iÚSEIRÞl
 = b; 
	}
}

1081 
IÁ
 
	$g‘Sph”eRÙ©iÚSEIRÞl
(è{  
m_¥h”eRÙ©iÚSEIRÞl
; 
	}
}

1082 
Void
 
	$£tOmniV›wpÜtSEIEÇbËd
(
BoÞ
 
b
è{ 
m_omniV›wpÜtSEIEÇbËd
 = b; 
	}
}

1083 
BoÞ
 
	$g‘OmniV›wpÜtSEIEÇbËd
(è{  
m_omniV›wpÜtSEIEÇbËd
; 
	}
}

1084 
Void
 
	$£tOmniV›wpÜtSEIId
(
UIÁ
 
b
è{ 
m_omniV›wpÜtSEIId
 = b; 
	}
}

1085 
UIÁ
 
	$g‘OmniV›wpÜtSEIId
(è{  
m_omniV›wpÜtSEIId
; 
	}
}

1086 
Void
 
	$£tOmniV›wpÜtSEICªûlFÏg
(
BoÞ
 
b
è{ 
m_omniV›wpÜtSEICªûlFÏg
 = b; 
	}
}

1087 
BoÞ
 
	$g‘OmniV›wpÜtSEICªûlFÏg
(è{  
m_omniV›wpÜtSEICªûlFÏg
; 
	}
}

1088 
Void
 
	$£tOmniV›wpÜtSEIP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_omniV›wpÜtSEIP”si¡’ûFÏg
 = b; 
	}
}

1089 
BoÞ
 
	$g‘OmniV›wpÜtSEIP”si¡’ûFÏg
(è{  
m_omniV›wpÜtSEIP”si¡’ûFÏg
; 
	}
}

1090 
Void
 
	$£tOmniV›wpÜtSEICÁMšus1
(
UIÁ
 
b
è{ 
m_omniV›wpÜtSEICÁMšus1
 = b; 
	}
}

1091 
UIÁ
 
	$g‘OmniV›wpÜtSEICÁMšus1
(è{  
m_omniV›wpÜtSEICÁMšus1
; 
	}
}

1092 
Void
 
£tOmniV›wpÜtSEIAzimuthC’Œe
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
vi
è{ 
m_omniV›wpÜtSEIAzimuthC’Œe
 = vi; }

1093 
IÁ
 
	$g‘OmniV›wpÜtSEIAzimuthC’Œe
(
IÁ
 
idx
è{  
m_omniV›wpÜtSEIAzimuthC’Œe
[idx]; 
	}
}

1094 
Void
 
£tOmniV›wpÜtSEIEËv©iÚC’Œe
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
vi
){ 
m_omniV›wpÜtSEIEËv©iÚC’Œe
 = vi; }

1095 
IÁ
 
	$g‘OmniV›wpÜtSEIEËv©iÚC’Œe
(
IÁ
 
idx
è{  
m_omniV›wpÜtSEIEËv©iÚC’Œe
[idx]; 
	}
}

1096 
Void
 
£tOmniV›wpÜtSEITžtC’Œe
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
>& 
vi
è{ 
m_omniV›wpÜtSEITžtC’Œe
 = vi; }

1097 
IÁ
 
	$g‘OmniV›wpÜtSEITžtC’Œe
(
IÁ
 
idx
è{  
m_omniV›wpÜtSEITžtC’Œe
[idx]; 
	}
}

1098 
Void
 
£tOmniV›wpÜtSEIHÜRªge
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
vi
è{ 
m_omniV›wpÜtSEIHÜRªge
 = vi; }

1099 
UIÁ
 
	$g‘OmniV›wpÜtSEIHÜRªge
(
IÁ
 
idx
è{  
m_omniV›wpÜtSEIHÜRªge
[idx]; 
	}
}

1100 
Void
 
£tOmniV›wpÜtSEIV”Rªge
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
vi
è{ 
m_omniV›wpÜtSEIV”Rªge
 = vi; }

1101 
UIÁ
 
	$g‘OmniV›wpÜtSEIV”Rªge
(
IÁ
 
idx
è{  
m_omniV›wpÜtSEIV”Rªge
[idx]; 
	}
}

1102 
Void
 
	$£tGÝBa£dTempÜ®Fž‹rEÇbËd
(
BoÞ
 
æag
è{ 
m_gÝBa£dTempÜ®Fž‹rEÇbËd
 = fÏg; 
	}
}

1103 
BoÞ
 
	$g‘GÝBa£dTempÜ®Fž‹rEÇbËd
(ècÚ¡ {  
m_gÝBa£dTempÜ®Fž‹rEÇbËd
; 
	}
}

1104 
Void
 
	$£tCmpSEIEÇbËd
(
BoÞ
 
b
è{ 
m_cmpSEIEÇbËd
 = b; 
	}
}

1105 
BoÞ
 
	$g‘CmpSEIEÇbËd
(è{  
m_cmpSEIEÇbËd
; 
	}
}

1106 
Void
 
	$£tCmpSEICmpCªûlFÏg
(
BoÞ
 
b
è{ 
m_cmpSEICmpCªûlFÏg
 = b; 
	}
}

1107 
BoÞ
 
	$g‘CmpSEICmpCªûlFÏg
(è{  
m_cmpSEICmpCªûlFÏg
; 
	}
}

1108 
Void
 
	$£tCmpSEICmpP”si¡’ûFÏg
(
BoÞ
 
b
è{ 
m_cmpSEICmpP”si¡’ûFÏg
 = b; 
	}
}

1109 
BoÞ
 
	$g‘CmpSEICmpP”si¡’ûFÏg
(è{  
m_cmpSEICmpP”si¡’ûFÏg
; 
	}
}

1110 
Void
 
	$£tRwpSEIEÇbËd
(
BoÞ
 
b
è{ 
m_rwpSEIEÇbËd
 = b; 
	}
}

1111 
BoÞ
 
	$g‘RwpSEIEÇbËd
(è{  
m_rwpSEIEÇbËd
; 
	}
}

1112 
Void
 
	$£tRwpSEIRwpCªûlFÏg
(
BoÞ
 
b
è{ 
m_rwpSEIRwpCªûlFÏg
 = b; 
	}
}

1113 
BoÞ
 
	$g‘RwpSEIRwpCªûlFÏg
(è{  
m_rwpSEIRwpCªûlFÏg
; 
	}
}

1114 
Void
 
	$£tRwpSEIRwpP”si¡’ûFÏg
 (
BoÞ
 
b
è{ 
m_rwpSEIRwpP”si¡’ûFÏg
 = b; 
	}
}

1115 
BoÞ
 
	$g‘RwpSEIRwpP”si¡’ûFÏg
 (è{  
m_rwpSEIRwpP”si¡’ûFÏg
; 
	}
}

1116 
Void
 
	$£tRwpSEICÚ¡™u’tPiùu»M©chšgFÏg
 (
BoÞ
 
b
è{ 
m_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
 = b; 
	}
}

1117 
BoÞ
 
	$g‘RwpSEICÚ¡™u’tPiùu»M©chšgFÏg
 (è{  
m_rwpSEICÚ¡™u’tPiùu»M©chšgFÏg
; 
	}
}

1118 
Void
 
	$£tRwpSEINumPackedRegiÚs
 (
IÁ
 
v®ue
è{ 
m_rwpSEINumPackedRegiÚs
 = v®ue; 
	}
}

1119 
IÁ
 
	$g‘RwpSEINumPackedRegiÚs
 (è{  
m_rwpSEINumPackedRegiÚs
; 
	}
}

1120 
Void
 
	$£tRwpSEIProjPiùu»Width
 (
IÁ
 
v®ue
è{ 
m_rwpSEIProjPiùu»Width
 = v®ue; 
	}
}

1121 
IÁ
 
	$g‘RwpSEIProjPiùu»Width
 (è{  
m_rwpSEIProjPiùu»Width
; 
	}
}

1122 
Void
 
	$£tRwpSEIProjPiùu»Height
 (
IÁ
 
v®ue
è{ 
m_rwpSEIProjPiùu»Height
 = v®ue; 
	}
}

1123 
IÁ
 
	$g‘RwpSEIProjPiùu»Height
 (è{  
m_rwpSEIProjPiùu»Height
; 
	}
}

1124 
Void
 
	$£tRwpSEIPackedPiùu»Width
 (
IÁ
 
v®ue
è{ 
m_rwpSEIPackedPiùu»Width
 = v®ue; 
	}
}

1125 
IÁ
 
	$g‘RwpSEIPackedPiùu»Width
 (è{  
m_rwpSEIPackedPiùu»Width
; 
	}
}

1126 
Void
 
	$£tRwpSEIPackedPiùu»Height
 (
IÁ
 
v®ue
è{ 
m_rwpSEIPackedPiùu»Height
 = v®ue; 
	}
}

1127 
IÁ
 
	$g‘RwpSEIPackedPiùu»Height
 (è{  
m_rwpSEIPackedPiùu»Height
; 
	}
}

1128 
Void
 
£tRwpSEIRwpT¿nsfÜmTy³
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpT¿nsfÜmTy³
è{ 
m_rwpSEIRwpT¿nsfÜmTy³
 =rwpTransformType; }

1129 
UCh¬
 
	$g‘RwpSEIRwpT¿nsfÜmTy³
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpT¿nsfÜmTy³
[idx]; 
	}
}

1130 
Void
 
£tRwpSEIRwpGu¬dBªdFÏg
(cÚ¡ 
¡d
::
veùÜ
<
BoÞ
>& 
rwpGu¬dBªdFÏg
è{ 
m_rwpSEIRwpGu¬dBªdFÏg
 =„wpGuardBandFlag; }

1131 
BoÞ
 
	$g‘RwpSEIRwpGu¬dBªdFÏg
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpGu¬dBªdFÏg
[idx]; 
	}
}

1132 
Void
 
£tRwpSEIProjRegiÚWidth
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
´ojRegiÚWidth
è{ 
m_rwpSEIProjRegiÚWidth
 =…rojRegionWidth; }

1133 
UIÁ
 
	$g‘RwpSEIProjRegiÚWidth
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIProjRegiÚWidth
[idx]; 
	}
}

1134 
Void
 
£tRwpSEIProjRegiÚHeight
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
´ojRegiÚHeight
è{ 
m_rwpSEIProjRegiÚHeight
 =…rojRegionHeight; }

1135 
UIÁ
 
	$g‘RwpSEIProjRegiÚHeight
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIProjRegiÚHeight
[idx]; 
	}
}

1136 
Void
 
£tRwpSEIRwpSEIProjRegiÚTÝ
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
´ojRegiÚTÝ
è{ 
m_rwpSEIRwpSEIProjRegiÚTÝ
 =…rojRegionTop; }

1137 
UIÁ
 
	$g‘RwpSEIRwpSEIProjRegiÚTÝ
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpSEIProjRegiÚTÝ
[idx]; 
	}
}

1138 
Void
 
£tRwpSEIProjRegiÚLeá
(cÚ¡ 
¡d
::
veùÜ
<
UIÁ
>& 
´ojRegiÚLeá
è{ 
m_rwpSEIProjRegiÚLeá
 =…rojRegionLeft; }

1139 
UIÁ
 
	$g‘RwpSEIProjRegiÚLeá
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIProjRegiÚLeá
[idx]; 
	}
}

1140 
Void
 
£tRwpSEIPackedRegiÚWidth
(cÚ¡ 
¡d
::
veùÜ
<
UShÜt
>& 
·ckedRegiÚWidth
è{ 
m_rwpSEIPackedRegiÚWidth
 =…ackedRegionWidth; }

1141 
UShÜt
 
	$g‘RwpSEIPackedRegiÚWidth
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIPackedRegiÚWidth
[idx]; 
	}
}

1142 
Void
 
£tRwpSEIPackedRegiÚHeight
(cÚ¡ 
¡d
::
veùÜ
<
UShÜt
>& 
·ckedRegiÚHeight
è{ 
m_rwpSEIPackedRegiÚHeight
 =…ackedRegionHeight; }

1143 
UShÜt
 
	$g‘RwpSEIPackedRegiÚHeight
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIPackedRegiÚHeight
[idx]; 
	}
}

1144 
Void
 
£tRwpSEIPackedRegiÚTÝ
(cÚ¡ 
¡d
::
veùÜ
<
UShÜt
>& 
·ckedRegiÚTÝ
è{ 
m_rwpSEIPackedRegiÚTÝ
 =…ackedRegionTop; }

1145 
UShÜt
 
	$g‘RwpSEIPackedRegiÚTÝ
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIPackedRegiÚTÝ
[idx]; 
	}
}

1146 
Void
 
£tRwpSEIPackedRegiÚLeá
(cÚ¡ 
¡d
::
veùÜ
<
UShÜt
>& 
·ckedRegiÚLeá
è{ 
m_rwpSEIPackedRegiÚLeá
 =…ackedRegionLeft; }

1147 
UShÜt
 
	$g‘RwpSEIPackedRegiÚLeá
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIPackedRegiÚLeá
[idx]; 
	}
}

1148 
Void
 
£tRwpSEIRwpLeáGu¬dBªdWidth
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpLeáGu¬dBªdWidth
è{ 
m_rwpSEIRwpLeáGu¬dBªdWidth
 =„wpLeftGuardBandWidth; }

1149 
UCh¬
 
	$g‘RwpSEIRwpLeáGu¬dBªdWidth
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpLeáGu¬dBªdWidth
[idx]; 
	}
}

1150 
Void
 
£tRwpSEIRwpRightGu¬dBªdWidth
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpRightGu¬dBªdWidth
è{ 
m_rwpSEIRwpRightGu¬dBªdWidth
 =„wpRightGuardBandWidth; }

1151 
UCh¬
 
	$g‘RwpSEIRwpRightGu¬dBªdWidth
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpRightGu¬dBªdWidth
[idx]; 
	}
}

1152 
Void
 
£tRwpSEIRwpTÝGu¬dBªdHeight
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpTÝGu¬dBªdHeight
è{ 
m_rwpSEIRwpTÝGu¬dBªdHeight
 =„wpTopGuardBandHeight; }

1153 
UCh¬
 
	$g‘RwpSEIRwpTÝGu¬dBªdHeight
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpTÝGu¬dBªdHeight
[idx]; 
	}
}

1154 
Void
 
£tRwpSEIRwpBÙtomGu¬dBªdHeight
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpBÙtomGu¬dBªdHeight
è{ 
m_rwpSEIRwpBÙtomGu¬dBªdHeight
 =„wpBottomGuardBandHeight; }

1155 
UCh¬
 
	$g‘RwpSEIRwpBÙtomGu¬dBªdHeight
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpBÙtomGu¬dBªdHeight
[idx]; 
	}
}

1156 
Void
 
£tRwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
(cÚ¡ 
¡d
::
veùÜ
<
BoÞ
>& 
rwpGu¬dBªdNÙU£dFÜP»dFÏg
){ 
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
 =„wpGuardBandNotUsedForPredFlag; }

1157 
BoÞ
 
	$g‘RwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpGu¬dBªdNÙU£dFÜP»dFÏg
[idx]; 
	}
}

1158 
Void
 
£tRwpSEIRwpGu¬dBªdTy³
(cÚ¡ 
¡d
::
veùÜ
<
UCh¬
>& 
rwpGu¬dBªdTy³
è{ 
m_rwpSEIRwpGu¬dBªdTy³
 =„wpGuardBandType; }

1159 
UCh¬
 
	$g‘RwpSEIRwpGu¬dBªdTy³
(
UIÁ
 
idx
ècÚ¡ {  
m_rwpSEIRwpGu¬dBªdTy³
[idx]; 
	}
}

1160 
Void
 
	$£tFviSEIDi§bËd
(è{ 
m_fviSEIEÇbËd
 = 
çl£
; 
	}
}

1161 
Void
 
	$£tFviSEIEÇbËd
(cÚ¡ 
TComSEIFisheyeVideoInfo
& 
fvi
è{ 
m_fisheyeVideoInfo
=fvi; 
m_fviSEIEÇbËd
=
Œue
; 
	}
}

1162 
BoÞ
 
	$g‘FviSEIEÇbËd
(ècÚ¡ {  
m_fviSEIEÇbËd
; 
	}
}

1163 cÚ¡ 
	gTComSEIFisheyeVideoInfo
& 
	$g‘FviSEID©a
(ècÚ¡ {  
m_fisheyeVideoInfo
; 
	}
}

1164 
Void
 
	$£tCÞourRem­InfoSEIFžeRoÙ
ÐcÚ¡ 
¡d
::
¡ršg
 &
s
 ) { 
m_cÞourRem­SEIFžeRoÙ
 = s; 
	}
}

1165 cÚ¡ 
	g¡d
::
¡ršg
 &
	$g‘CÞourRem­InfoSEIFžeRoÙ
(ècÚ¡ {  
m_cÞourRem­SEIFžeRoÙ
; 
	}
}

1166 
Void
 
	$£tMa¡”šgDi¥ÏySEI
(cÚ¡ 
TComSEIMa¡”šgDi¥Ïy
 &
¤c
è{ 
m_ma¡”šgDi¥Ïy
 = src; 
	}
}

1167 
Void
 
	$£tSEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡icsSEIEÇbË
Ð
BoÞ
 
b
è{ 
m_®‹º©iveT¿nsãrCh¬aù”i¡icsSEIEÇbËd
 = b; 
	}
}

1168 
BoÞ
 
	$g‘SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡icsSEIEÇbË
ÐècÚ¡ {  
m_®‹º©iveT¿nsãrCh¬aù”i¡icsSEIEÇbËd
; 
	}
}

1169 
Void
 
	$£tSEIP»ã¼edT¿nsãrCh¬aù”i¡ics
(
UCh¬
 
v
è{ 
m_´eã¼edT¿nsãrCh¬aù”i¡ics
 = v; 
	}
}

1170 
UCh¬
 
	$g‘SEIP»ã¼edT¿nsãrCh¬aù”i¡ics
(ècÚ¡ {  
m_´eã¼edT¿nsãrCh¬aù”i¡ics
; 
	}
}

1171 
Void
 
	$£tSEIG»’M‘ad©aInfoSEIEÇbË
Ð
BoÞ
 
b
è{ 
m_g»’M‘ad©aInfoSEIEÇbËd
 = b; 
	}
}

1172 
BoÞ
 
	$g‘SEIG»’M‘ad©aInfoSEIEÇbË
ÐècÚ¡ {  
m_g»’M‘ad©aInfoSEIEÇbËd
; 
	}
}

1173 
Void
 
	$£tSEIG»’M‘ad©aTy³
(
UCh¬
 
v
è{ 
m_g»’M‘ad©aTy³
 = v; 
	}
}

1174 
UCh¬
 
	$g‘SEIG»’M‘ad©aTy³
(ècÚ¡ {  
m_g»’M‘ad©aTy³
; 
	}
}

1175 
Void
 
	$£tSEIXSDM‘ricTy³
(
UCh¬
 
v
è{ 
m_xsdM‘ricTy³
 = v; 
	}
}

1176 
UCh¬
 
	$g‘SEIXSDM‘ricTy³
(ècÚ¡ {  
m_xsdM‘ricTy³
; 
	}
}

1177 
Void
 
	$£tRegiÚ®Ne¡šgSEIFžeRoÙ
ÐcÚ¡ 
¡d
::
¡ršg
 &
s
 ) { 
m_»giÚ®Ne¡šgSEIFžeRoÙ
 = s; 
	}
}

1178 cÚ¡ 
	g¡d
::
¡ršg
 &
	$g‘RegiÚ®Ne¡šgSEIFžeRoÙ
(ècÚ¡ {  
m_»giÚ®Ne¡šgSEIFžeRoÙ
; 
	}
}

1180 
Void
 
	$£tAÂÙ©edRegiÚSEIFžeRoÙ
(cÚ¡ 
¡d
::
¡ršg
 &
s
è{ 
m_¬SEIFžeRoÙ
 = s; 
	}
}

1181 cÚ¡ 
	g¡d
::
¡ršg
 &
	$g‘AÂÙ©edRegiÚSEIFžeRoÙ
(ècÚ¡ {  
m_¬SEIFžeRoÙ
; 
	}
}

1183 cÚ¡ 
	gTComSEIMa¡”šgDi¥Ïy
 &
	$g‘Ma¡”šgDi¥ÏySEI
(ècÚ¡ {  
m_ma¡”šgDi¥Ïy
; 
	}
}

1184 
Void
 
	$£tU£WP
 ( 
BoÞ
 
b
 ) { 
m_u£Weigh‹dP»d
 = b; 
	}
}

1185 
Void
 
	$£tWPBiP»d
 ( 
BoÞ
 
b
 ) { 
m_u£Weigh‹dBiP»d
 = b; 
	}
}

1186 
BoÞ
 
	$g‘U£WP
 (è{  
m_u£Weigh‹dP»d
; 
	}
}

1187 
BoÞ
 
	$g‘WPBiP»d
 (è{  
m_u£Weigh‹dBiP»d
; 
	}
}

1188 
Void
 
	$£tLog2P¬®ËlM”geLev–Mšus2
 ( 
UIÁ
 
u
 ) { 
m_log2P¬®ËlM”geLev–Mšus2
 = u; 
	}
}

1189 
UIÁ
 
	$g‘Log2P¬®ËlM”geLev–Mšus2
 (è{  
m_log2P¬®ËlM”geLev–Mšus2
; 
	}
}

1190 
Void
 
	$£tMaxNumM”geCªd
 ( 
UIÁ
 
u
 ) { 
m_maxNumM”geCªd
 = u; 
	}
}

1191 
UIÁ
 
	$g‘MaxNumM”geCªd
 (è{  
m_maxNumM”geCªd
; 
	}
}

1192 
Void
 
	$£tU£SÿlšgLi¡Id
 ( 
SÿlšgLi¡Mode
 
u
 ) { 
m_u£SÿlšgLi¡Id
 = u; 
	}
}

1193 
SÿlšgLi¡Mode
 
	$g‘U£SÿlšgLi¡Id
 (è{  
m_u£SÿlšgLi¡Id
; 
	}
}

1194 
Void
 
	$£tSÿlšgLi¡FžeName
 ( cÚ¡ 
¡d
::
¡ršg
 &
s
 ) { 
m_sÿlšgLi¡FžeName
 = s; 
	}
}

1195 cÚ¡ 
	g¡d
::
¡ršg
& 
	$g‘SÿlšgLi¡FžeName
 (ècÚ¡ {  
m_sÿlšgLi¡FžeName
; 
	}
}

1196 
Void
 
	$£tTMVPModeId
 ( 
IÁ
 
u
 ) { 
m_TMVPModeId
 = u; 
	}
}

1197 
IÁ
 
	$g‘TMVPModeId
 (è{  
m_TMVPModeId
; 
	}
}

1198 
Weigh‹dP»diùiÚM‘hod
 
	$g‘Weigh‹dP»diùiÚM‘hod
(ècÚ¡ {  
m_weigh‹dP»diùiÚM‘hod
; 
	}
}

1199 
Void
 
	$£tWeigh‹dP»diùiÚM‘hod
Ð
Weigh‹dP»diùiÚM‘hod
 
m
 ) { 
m_weigh‹dP»diùiÚM‘hod
 = m; 
	}
}

1200 
Void
 
	$£tSignD©aHidšgEÇbËdFÏg
Ð
BoÞ
 
b
 ) { 
m_SignD©aHidšgEÇbËdFÏg
 = b; 
	}
}

1201 
BoÞ
 
	$g‘SignD©aHidšgEÇbËdFÏg
(è{  
m_SignD©aHidšgEÇbËdFÏg
; 
	}
}

1202 
BoÞ
 
	$g‘U£R©eCŒl
 (è{  
m_RCEÇbËR©eCÚŒÞ
; 
	}
}

1203 
Void
 
	$£tU£R©eCŒl
 ( 
BoÞ
 
b
 ) { 
m_RCEÇbËR©eCÚŒÞ
 = b; 
	}
}

1204 
IÁ
 
	$g‘T¬g‘B™¿‹
 (è{  
m_RCT¬g‘B™¿‹
; 
	}
}

1205 
Void
 
	$£tT¬g‘B™¿‹
 ( 
IÁ
 
b™¿‹
 ) { 
m_RCT¬g‘B™¿‹
 = b™¿‹; 
	}
}

1206 
IÁ
 
	$g‘K“pH›rB™
 (è{  
m_RCK“pH›¿rchiÿlB™
; 
	}
}

1207 
Void
 
	$£tK“pH›rB™
 ( 
IÁ
 
i
 ) { 
m_RCK“pH›¿rchiÿlB™
 = i; 
	}
}

1208 
BoÞ
 
	$g‘LCULev–RC
 (è{  
m_RCLCULev–RC
; 
	}
}

1209 
Void
 
	$£tLCULev–RC
 ( 
BoÞ
 
b
 ) { 
m_RCLCULev–RC
 = b; 
	}
}

1210 
BoÞ
 
	$g‘U£LCUS•¬©eMod–
 (è{  
m_RCU£LCUS•¬©eMod–
; 
	}
}

1211 
Void
 
	$£tU£LCUS•¬©eMod–
 ( 
BoÞ
 
b
 ) { 
m_RCU£LCUS•¬©eMod–
 = b; 
	}
}

1212 
IÁ
 
	$g‘In™ŸlQP
 (è{  
m_RCIn™ŸlQP
; 
	}
}

1213 
Void
 
	$£tIn™ŸlQP
 ( 
IÁ
 
QP
 ) { 
m_RCIn™ŸlQP
 = QP; 
	}
}

1214 
BoÞ
 
	$g‘FÜûIÁ¿QP
 (è{  
m_RCFÜûIÁ¿QP
; 
	}
}

1215 
Void
 
	$£tFÜûIÁ¿QP
 ( 
BoÞ
 
b
 ) { 
m_RCFÜûIÁ¿QP
 = b; 
	}
}

1216 
BoÞ
 
	$g‘CpbS©u¿tiÚEÇbËd
(è{  
m_RCCpbS©u¿tiÚEÇbËd
;
	}
}

1217 
Void
 
	$£tCpbS©u¿tiÚEÇbËd
Ð
BoÞ
 
b
 ) { 
m_RCCpbS©u¿tiÚEÇbËd
 = b; 
	}
}

1218 
UIÁ
 
	$g‘CpbSize
 (è{  
m_RCCpbSize
;
	}
}

1219 
Void
 
	$£tCpbSize
 ( 
UIÁ
 
ui
 ) { 
m_RCCpbSize
 = ui; 
	}
}

1220 
DoubË
 
	$g‘In™ŸlCpbFuÎÃss
 (è{  
m_RCIn™ŸlCpbFuÎÃss
; 
	}
}

1221 
Void
 
	$£tIn™ŸlCpbFuÎÃss
 (
DoubË
 
f
è{ 
m_RCIn™ŸlCpbFuÎÃss
 = f; 
	}
}

1222 
BoÞ
 
	$g‘T¿nsquªtBy·ssEÇbËdFÏg
(è{  
m_T¿nsquªtBy·ssEÇbËdFÏg
; 
	}
}

1223 
Void
 
	$£tT¿nsquªtBy·ssEÇbËdFÏg
(
BoÞ
 
æag
è{ 
m_T¿nsquªtBy·ssEÇbËdFÏg
 = fÏg; 
	}
}

1224 
BoÞ
 
	$g‘CUT¿nsquªtBy·ssFÏgFÜûV®ue
(è{  
m_CUT¿nsquªtBy·ssFÏgFÜû
; 
	}
}

1225 
Void
 
	$£tCUT¿nsquªtBy·ssFÏgFÜûV®ue
(
BoÞ
 
æag
è{ 
m_CUT¿nsquªtBy·ssFÏgFÜû
 = fÏg; 
	}
}

1226 
Co¡Mode
 
	$g‘Co¡Mode
ÐècÚ¡ {  
m_co¡Mode
; 
	}
}

1227 
Void
 
	$£tCo¡Mode
(
Co¡Mode
 
m
 ) { 
m_co¡Mode
 = m; 
	}
}

1229 
Void
 
	$£tVPS
(
TComVPS
 *
p
è{ 
m_cVPS
 = *p; 
	}
}

1230 
TComVPS
 * 
	$g‘VPS
(è{  &
m_cVPS
; 
	}
}

1231 
Void
 
	$£tU£ReÿlcuÏ‹QPAccÜdšgToLambda
 (
BoÞ
 
b
è{ 
m_»ÿlcuÏ‹QPAccÜdšgToLambda
 = b; 
	}
}

1232 
BoÞ
 
	$g‘U£ReÿlcuÏ‹QPAccÜdšgToLambda
 (è{  
m_»ÿlcuÏ‹QPAccÜdšgToLambda
; 
	}
}

1234 
Void
 
	$£tU£SŒÚgIÁ¿SmoÙhšg
 ( 
BoÞ
 
b
 ) { 
m_u£SŒÚgIÁ¿SmoÙhšg
 = b; 
	}
}

1235 
BoÞ
 
	$g‘U£SŒÚgIÁ¿SmoÙhšg
 (è{  
m_u£SŒÚgIÁ¿SmoÙhšg
; 
	}
}

1237 
Void
 
	$£tEffic›ÁF›ldIRAPEÇbËd
Ð
BoÞ
 
b
 ) { 
m_bEffic›ÁF›ldIRAPEÇbËd
 = b; 
	}
}

1238 
BoÞ
 
	$g‘Effic›ÁF›ldIRAPEÇbËd
ÐècÚ¡ {  
m_bEffic›ÁF›ldIRAPEÇbËd
; 
	}
}

1240 
Void
 
	$£tH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
Ð
BoÞ
 
b
 ) { 
m_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
 = b; 
	}
}

1241 
BoÞ
 
	$g‘H¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
ÐècÚ¡ {  
m_bH¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
; 
	}
}

1243 
Void
 
	$£tAùiveP¬am‘”S‘sSEIEÇbËd
 ( 
IÁ
 
b
 ) { 
m_aùiveP¬am‘”S‘sSEIEÇbËd
 = b; 
	}
}

1244 
IÁ
 
	$g‘AùiveP¬am‘”S‘sSEIEÇbËd
 (è{  
m_aùiveP¬am‘”S‘sSEIEÇbËd
; 
	}
}

1245 
BoÞ
 
	$g‘VuiP¬am‘”sP»£ÁFÏg
(è{  
m_vuiP¬am‘”sP»£ÁFÏg
; 
	}
}

1246 
Void
 
	$£tVuiP¬am‘”sP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_vuiP¬am‘”sP»£ÁFÏg
 = i; 
	}
}

1247 
BoÞ
 
	$g‘A¥eùR©ioInfoP»£ÁFÏg
(è{  
m_a¥eùR©ioInfoP»£ÁFÏg
; 
	}
}

1248 
Void
 
	$£tA¥eùR©ioInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_a¥eùR©ioInfoP»£ÁFÏg
 = i; 
	}
}

1249 
IÁ
 
	$g‘A¥eùR©ioIdc
(è{  
m_a¥eùR©ioIdc
; 
	}
}

1250 
Void
 
	$£tA¥eùR©ioIdc
(
IÁ
 
i
è{ 
m_a¥eùR©ioIdc
 = i; 
	}
}

1251 
IÁ
 
	$g‘S¬Width
(è{  
m_§rWidth
; 
	}
}

1252 
Void
 
	$£tS¬Width
(
IÁ
 
i
è{ 
m_§rWidth
 = i; 
	}
}

1253 
IÁ
 
	$g‘S¬Height
(è{  
m_§rHeight
; 
	}
}

1254 
Void
 
	$£tS¬Height
(
IÁ
 
i
è{ 
m_§rHeight
 = i; 
	}
}

1255 
BoÞ
 
	$g‘Ov”sÿnInfoP»£ÁFÏg
(è{  
m_ov”sÿnInfoP»£ÁFÏg
; 
	}
}

1256 
Void
 
	$£tOv”sÿnInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_ov”sÿnInfoP»£ÁFÏg
 = i; 
	}
}

1257 
BoÞ
 
	$g‘Ov”sÿnAµrÝrŸ‹FÏg
(è{  
m_ov”sÿnAµrÝrŸ‹FÏg
; 
	}
}

1258 
Void
 
	$£tOv”sÿnAµrÝrŸ‹FÏg
(
BoÞ
 
i
è{ 
m_ov”sÿnAµrÝrŸ‹FÏg
 = i; 
	}
}

1259 
BoÞ
 
	$g‘VideoSigÇlTy³P»£ÁFÏg
(è{  
m_videoSigÇlTy³P»£ÁFÏg
; 
	}
}

1260 
Void
 
	$£tVideoSigÇlTy³P»£ÁFÏg
(
BoÞ
 
i
è{ 
m_videoSigÇlTy³P»£ÁFÏg
 = i; 
	}
}

1261 
IÁ
 
	$g‘VideoFÜm©
(è{  
m_videoFÜm©
; 
	}
}

1262 
Void
 
	$£tVideoFÜm©
(
IÁ
 
i
è{ 
m_videoFÜm©
 = i; 
	}
}

1263 
BoÞ
 
	$g‘VideoFuÎRªgeFÏg
(è{  
m_videoFuÎRªgeFÏg
; 
	}
}

1264 
Void
 
	$£tVideoFuÎRªgeFÏg
(
BoÞ
 
i
è{ 
m_videoFuÎRªgeFÏg
 = i; 
	}
}

1265 
BoÞ
 
	$g‘CÞourDesütiÚP»£ÁFÏg
(è{  
m_cÞourDesütiÚP»£ÁFÏg
; 
	}
}

1266 
Void
 
	$£tCÞourDesütiÚP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_cÞourDesütiÚP»£ÁFÏg
 = i; 
	}
}

1267 
IÁ
 
	$g‘CÞourPrim¬›s
(è{  
m_cÞourPrim¬›s
; 
	}
}

1268 
Void
 
	$£tCÞourPrim¬›s
(
IÁ
 
i
è{ 
m_cÞourPrim¬›s
 = i; 
	}
}

1269 
IÁ
 
	$g‘T¿nsãrCh¬aù”i¡ics
(è{  
m_ŒªsãrCh¬aù”i¡ics
; 
	}
}

1270 
Void
 
	$£tT¿nsãrCh¬aù”i¡ics
(
IÁ
 
i
è{ 
m_ŒªsãrCh¬aù”i¡ics
 = i; 
	}
}

1271 
IÁ
 
	$g‘M©rixCÛffic›Ás
(è{  
m_m©rixCÛffic›Ás
; 
	}
}

1272 
Void
 
	$£tM©rixCÛffic›Ás
(
IÁ
 
i
è{ 
m_m©rixCÛffic›Ás
 = i; 
	}
}

1273 
BoÞ
 
	$g‘ChromaLocInfoP»£ÁFÏg
(è{  
m_chromaLocInfoP»£ÁFÏg
; 
	}
}

1274 
Void
 
	$£tChromaLocInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_chromaLocInfoP»£ÁFÏg
 = i; 
	}
}

1275 
IÁ
 
	$g‘ChromaSam¶eLocTy³TÝF›ld
(è{  
m_chromaSam¶eLocTy³TÝF›ld
; 
	}
}

1276 
Void
 
	$£tChromaSam¶eLocTy³TÝF›ld
(
IÁ
 
i
è{ 
m_chromaSam¶eLocTy³TÝF›ld
 = i; 
	}
}

1277 
IÁ
 
	$g‘ChromaSam¶eLocTy³BÙtomF›ld
(è{  
m_chromaSam¶eLocTy³BÙtomF›ld
; 
	}
}

1278 
Void
 
	$£tChromaSam¶eLocTy³BÙtomF›ld
(
IÁ
 
i
è{ 
m_chromaSam¶eLocTy³BÙtomF›ld
 = i; 
	}
}

1279 
BoÞ
 
	$g‘NeuŒ®ChromaIndiÿtiÚFÏg
(è{  
m_ÃuŒ®ChromaIndiÿtiÚFÏg
; 
	}
}

1280 
Void
 
	$£tNeuŒ®ChromaIndiÿtiÚFÏg
(
BoÞ
 
i
è{ 
m_ÃuŒ®ChromaIndiÿtiÚFÏg
 = i; 
	}
}

1281 
	gWšdow
 &
	$g‘DeçuÉDi¥ÏyWšdow
(è{  
m_deçuÉDi¥ÏyWšdow
; 
	}
}

1282 
Void
 
	$£tDeçuÉDi¥ÏyWšdow
 (
IÁ
 
off£tLeá
, IÁ 
off£tRight
, IÁ 
off£tTÝ
, IÁ 
off£tBÙtom
 ) { 
m_deçuÉDi¥ÏyWšdow
.
	`£tWšdow
 (off£tLeá, off£tRight, off£tTÝ, off£tBÙtom); 
	}
}

1283 
BoÞ
 
	$g‘F¿meF›ldInfoP»£ÁFÏg
(è{  
m_äameF›ldInfoP»£ÁFÏg
; 
	}
}

1284 
Void
 
	$£tF¿meF›ldInfoP»£ÁFÏg
(
BoÞ
 
i
è{ 
m_äameF›ldInfoP»£ÁFÏg
 = i; 
	}
}

1285 
BoÞ
 
	$g‘PocPrÝÜtiÚ®ToTimšgFÏg
(è{  
m_pocPrÝÜtiÚ®ToTimšgFÏg
; 
	}
}

1286 
Void
 
	$£tPocPrÝÜtiÚ®ToTimšgFÏg
(
BoÞ
 
x
è{ 
m_pocPrÝÜtiÚ®ToTimšgFÏg
 = x; 
	}
}

1287 
IÁ
 
	$g‘NumTicksPocDiffOÃMšus1
(è{  
m_numTicksPocDiffOÃMšus1
; 
	}
}

1288 
Void
 
	$£tNumTicksPocDiffOÃMšus1
(
IÁ
 
x
è{ 
m_numTicksPocDiffOÃMšus1
 = x; 
	}
}

1289 
BoÞ
 
	$g‘B™¡»amRe¡riùiÚFÏg
(è{  
m_b™¡»amRe¡riùiÚFÏg
; 
	}
}

1290 
Void
 
	$£tB™¡»amRe¡riùiÚFÏg
(
BoÞ
 
i
è{ 
m_b™¡»amRe¡riùiÚFÏg
 = i; 
	}
}

1291 
BoÞ
 
	$g‘TžesFixedSŒuùu»FÏg
(è{  
m_tžesFixedSŒuùu»FÏg
; 
	}
}

1292 
Void
 
	$£tTžesFixedSŒuùu»FÏg
(
BoÞ
 
i
è{ 
m_tžesFixedSŒuùu»FÏg
 = i; 
	}
}

1293 
BoÞ
 
	$g‘MÙiÚVeùÜsOv”PicBound¬›sFÏg
(è{  
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
; 
	}
}

1294 
Void
 
	$£tMÙiÚVeùÜsOv”PicBound¬›sFÏg
(
BoÞ
 
i
è{ 
m_mÙiÚVeùÜsOv”PicBound¬›sFÏg
 = i; 
	}
}

1295 
IÁ
 
	$g‘MšS·tŸlSegm’tiÚIdc
(è{  
m_mšS·tŸlSegm’tiÚIdc
; 
	}
}

1296 
Void
 
	$£tMšS·tŸlSegm’tiÚIdc
(
IÁ
 
i
è{ 
m_mšS·tŸlSegm’tiÚIdc
 = i; 
	}
}

1297 
IÁ
 
	$g‘MaxBy‹sP”PicD’om
(è{  
m_maxBy‹sP”PicD’om
; 
	}
}

1298 
Void
 
	$£tMaxBy‹sP”PicD’om
(
IÁ
 
i
è{ 
m_maxBy‹sP”PicD’om
 = i; 
	}
}

1299 
IÁ
 
	$g‘MaxB™sP”MšCuD’om
(è{  
m_maxB™sP”MšCuD’om
; 
	}
}

1300 
Void
 
	$£tMaxB™sP”MšCuD’om
(
IÁ
 
i
è{ 
m_maxB™sP”MšCuD’om
 = i; 
	}
}

1301 
IÁ
 
	$g‘Log2MaxMvL’gthHÜizÚl
(è{  
m_log2MaxMvL’gthHÜizÚl
; 
	}
}

1302 
Void
 
	$£tLog2MaxMvL’gthHÜizÚl
(
IÁ
 
i
è{ 
m_log2MaxMvL’gthHÜizÚl
 = i; 
	}
}

1303 
IÁ
 
	$g‘Log2MaxMvL’gthV”tiÿl
(è{  
m_log2MaxMvL’gthV”tiÿl
; 
	}
}

1304 
Void
 
	$£tLog2MaxMvL’gthV”tiÿl
(
IÁ
 
i
è{ 
m_log2MaxMvL’gthV”tiÿl
 = i; 
	}
}

1306 
BoÞ
 
	$g‘Prog»ssiveSourûFÏg
(ècÚ¡ {  
m_´og»ssiveSourûFÏg
; 
	}
}

1307 
Void
 
	$£tProg»ssiveSourûFÏg
(
BoÞ
 
b
è{ 
m_´og»ssiveSourûFÏg
 = b; 
	}
}

1309 
BoÞ
 
	$g‘IÁ”ÏûdSourûFÏg
(ècÚ¡ {  
m_š‹¾aûdSourûFÏg
; 
	}
}

1310 
Void
 
	$£tIÁ”ÏûdSourûFÏg
(
BoÞ
 
b
è{ 
m_š‹¾aûdSourûFÏg
 = b; 
	}
}

1312 
BoÞ
 
	$g‘NÚPackedCÚ¡¿štFÏg
(ècÚ¡ {  
m_nÚPackedCÚ¡¿štFÏg
; 
	}
}

1313 
Void
 
	$£tNÚPackedCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_nÚPackedCÚ¡¿štFÏg
 = b; 
	}
}

1315 
BoÞ
 
	$g‘F¿meOÆyCÚ¡¿štFÏg
(ècÚ¡ {  
m_äameOÆyCÚ¡¿štFÏg
; 
	}
}

1316 
Void
 
	$£tF¿meOÆyCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_äameOÆyCÚ¡¿štFÏg
 = b; 
	}
}

1318 
UIÁ
 
	$g‘B™D•thCÚ¡¿štV®ue
(ècÚ¡ {  
m_b™D•thCÚ¡¿štV®ue
; 
	}
}

1319 
Void
 
	$£tB™D•thCÚ¡¿štV®ue
(
UIÁ
 
v
è{ 
m_b™D•thCÚ¡¿štV®ue
=v; 
	}
}

1321 
ChromaFÜm©
 
	$g‘ChromaFÜm©CÚ¡¿štV®ue
(ècÚ¡ {  
m_chromaFÜm©CÚ¡¿štV®ue
; 
	}
}

1322 
Void
 
	$£tChromaFÜm©CÚ¡¿štV®ue
(
ChromaFÜm©
 
v
è{ 
m_chromaFÜm©CÚ¡¿štV®ue
=v; 
	}
}

1324 
BoÞ
 
	$g‘IÁ¿CÚ¡¿štFÏg
(ècÚ¡ {  
m_šŒaCÚ¡¿štFÏg
; 
	}
}

1325 
Void
 
	$£tIÁ¿CÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_šŒaCÚ¡¿štFÏg
=b; 
	}
}

1327 
BoÞ
 
	$g‘OÃPiùu»OÆyCÚ¡¿štFÏg
(ècÚ¡ {  
m_ÚePiùu»OÆyCÚ¡¿štFÏg
; 
	}
}

1328 
Void
 
	$£tOÃPiùu»OÆyCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_ÚePiùu»OÆyCÚ¡¿štFÏg
=b; 
	}
}

1330 
BoÞ
 
	$g‘Low”B™R©eCÚ¡¿štFÏg
(ècÚ¡ {  
m_low”B™R©eCÚ¡¿štFÏg
; 
	}
}

1331 
Void
 
	$£tLow”B™R©eCÚ¡¿štFÏg
(
BoÞ
 
b
è{ 
m_low”B™R©eCÚ¡¿štFÏg
=b; 
	}
}

1333 
BoÞ
 
	$g‘ChromaRe§m¶šgFž‹rHštEÇbËd
(è{  
m_chromaRe§m¶šgFž‹rHštEÇbËd
;
	}
}

1334 
Void
 
	$£tChromaRe§m¶šgFž‹rHštEÇbËd
(
BoÞ
 
i
è{ 
m_chromaRe§m¶šgFž‹rHštEÇbËd
 = i;
	}
}

1335 
IÁ
 
	$g‘ChromaRe§m¶šgHÜFž‹rIdc
(è{  
m_chromaRe§m¶šgHÜFž‹rIdc
;
	}
}

1336 
Void
 
	$£tChromaRe§m¶šgHÜFž‹rIdc
(
IÁ
 
i
è{ 
m_chromaRe§m¶šgHÜFž‹rIdc
 = i;
	}
}

1337 
IÁ
 
	$g‘ChromaRe§m¶šgV”Fž‹rIdc
(è{  
m_chromaRe§m¶šgV”Fž‹rIdc
;
	}
}

1338 
Void
 
	$£tChromaRe§m¶šgV”Fž‹rIdc
(
IÁ
 
i
è{ 
m_chromaRe§m¶šgV”Fž‹rIdc
 = i;
	}
}

1340 
Void
 
	$£tSumm¬yOutFž’ame
(cÚ¡ 
¡d
::
¡ršg
 &
s
è{ 
m_summ¬yOutFž’ame
 = s; 
	}
}

1341 cÚ¡ 
	g¡d
::
¡ršg
& 
	$g‘Summ¬yOutFž’ame
(ècÚ¡ {  
m_summ¬yOutFž’ame
; 
	}
}

1342 
Void
 
	$£tSumm¬yPicFž’ameBa£
(cÚ¡ 
¡d
::
¡ršg
 &
s
è{ 
m_summ¬yPicFž’ameBa£
 = s; 
	}
}

1343 cÚ¡ 
	g¡d
::
¡ršg
& 
	$g‘Summ¬yPicFž’ameBa£
(ècÚ¡ {  
m_summ¬yPicFž’ameBa£
; 
	}
}

1345 
Void
 
	$£tSumm¬yV”bo£Ãss
(
UIÁ
 
v
è{ 
m_summ¬yV”bo£Ãss
 = v; 
	}
}

1346 
UIÁ
 
	$g‘Summ¬yV”bo£Ãss
ÐècÚ¡ {  
m_summ¬yV”bo£Ãss
; 
	}
}

	@source/Lib/TLibEncoder/TEncCu.cpp

38 
	~<¡dio.h
>

39 
	~"TEncTÝ.h
"

40 
	~"TEncCu.h
"

41 
	~"TEncAÇlyze.h
"

42 
	~"TLibCommÚ/Debug.h
"

44 
	~<cm©h
>

45 
	~<®gÜ™hm
>

46 
usšg
 
Çme¥aû
 
	g¡d
;

62 
Void
 
	gTEncCu
::
	$ü—‹
(
UCh¬
 
uhTÙ®D•th
, 
UIÁ
 
uiMaxWidth
, UIÁ 
uiMaxHeight
, 
ChromaFÜm©
 
chromaFÜm©
)

64 
IÁ
 
i
;

66 
m_uhTÙ®D•th
 = 
uhTÙ®D•th
 + 1;

67 
m_µcBe¡CU
 = 
Ãw
 
TComD©aCU
*[
m_uhTÙ®D•th
-1];

68 
m_µcTempCU
 = 
Ãw
 
TComD©aCU
*[
m_uhTÙ®D•th
-1];

70 
m_µcP»dYuvBe¡
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

71 
m_µcResiYuvBe¡
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

72 
m_µcRecoYuvBe¡
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

73 
m_µcP»dYuvTemp
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

74 
m_µcResiYuvTemp
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

75 
m_µcRecoYuvTemp
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

76 
m_µcOrigYuv
 = 
Ãw
 
TComYuv
*[
m_uhTÙ®D•th
-1];

78 
UIÁ
 
uiNumP¬t™iÚs
;

79  
i
=0 ; i<
m_uhTÙ®D•th
-1 ; i++)

81 
uiNumP¬t™iÚs
 = 1<<ÐÐ
m_uhTÙ®D•th
 - 
i
 - 1 )<<1 );

82 
UIÁ
 
uiWidth
 = 
uiMaxWidth
 >> 
i
;

83 
UIÁ
 
uiHeight
 = 
uiMaxHeight
 >> 
i
;

85 
m_µcBe¡CU
[
i
] = 
Ãw
 
TComD©aCU
; m_µcBe¡CU[i]->
	`ü—‹
Ð
chromaFÜm©
, 
uiNumP¬t™iÚs
, 
uiWidth
, 
uiHeight
, 
çl£
, 
uiMaxWidth
 >> (
m_uhTÙ®D•th
 - 1) );

86 
m_µcTempCU
[
i
] = 
Ãw
 
TComD©aCU
; m_µcTempCU[i]->
	`ü—‹
Ð
chromaFÜm©
, 
uiNumP¬t™iÚs
, 
uiWidth
, 
uiHeight
, 
çl£
, 
uiMaxWidth
 >> (
m_uhTÙ®D•th
 - 1) );

88 
m_µcP»dYuvBe¡
[
i
] = 
Ãw
 
TComYuv
; m_µcP»dYuvBe¡[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

89 
m_µcResiYuvBe¡
[
i
] = 
Ãw
 
TComYuv
; m_µcResiYuvBe¡[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

90 
m_µcRecoYuvBe¡
[
i
] = 
Ãw
 
TComYuv
; m_µcRecoYuvBe¡[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

92 
m_µcP»dYuvTemp
[
i
] = 
Ãw
 
TComYuv
; m_µcP»dYuvTemp[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

93 
m_µcResiYuvTemp
[
i
] = 
Ãw
 
TComYuv
; m_µcResiYuvTemp[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

94 
m_µcRecoYuvTemp
[
i
] = 
Ãw
 
TComYuv
; m_µcRecoYuvTemp[i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

96 
m_µcOrigYuv
 [
i
] = 
Ãw
 
TComYuv
; m_µcOrigYuv [i]->
	`ü—‹
(
uiWidth
, 
uiHeight
, 
chromaFÜm©
);

99 
m_bEncodeDQP
 = 
çl£
;

100 
m_¡žlToCodeChromaQpOff£tFÏg
 = 
çl£
;

101 
m_cuChromaQpOff£tIdxPlus1
 = 0;

102 
m_bFa¡D–QP
 = 
çl£
;

105 
UIÁ
* 
piTmp
 = &
g_auiZsÿnToRa¡”
[0];

106 
	`š™ZsÿnToRa¡”
Ð
m_uhTÙ®D•th
, 1, 0, 
piTmp
);

107 
	`š™Ra¡”ToZsÿn
Ð
uiMaxWidth
, 
uiMaxHeight
, 
m_uhTÙ®D•th
 );

110 
	`š™Ra¡”ToP–XY
Ð
uiMaxWidth
, 
uiMaxHeight
, 
m_uhTÙ®D•th
 );

111 
	}
}

113 
Void
 
	gTEncCu
::
	$de¡roy
()

115 
IÁ
 
i
;

117  
i
=0 ; i<
m_uhTÙ®D•th
-1 ; i++)

119 if(
m_µcBe¡CU
[
i
])

121 
m_µcBe¡CU
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcBe¡CU[i]; m_µcBe¡CU[i] = 
NULL
;

123 if(
m_µcTempCU
[
i
])

125 
m_µcTempCU
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcTempCU[i]; m_µcTempCU[i] = 
NULL
;

127 if(
m_µcP»dYuvBe¡
[
i
])

129 
m_µcP»dYuvBe¡
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcP»dYuvBe¡[i]; m_µcP»dYuvBe¡[i] = 
NULL
;

131 if(
m_µcResiYuvBe¡
[
i
])

133 
m_µcResiYuvBe¡
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcResiYuvBe¡[i]; m_µcResiYuvBe¡[i] = 
NULL
;

135 if(
m_µcRecoYuvBe¡
[
i
])

137 
m_µcRecoYuvBe¡
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcRecoYuvBe¡[i]; m_µcRecoYuvBe¡[i] = 
NULL
;

139 if(
m_µcP»dYuvTemp
[
i
])

141 
m_µcP»dYuvTemp
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcP»dYuvTemp[i]; m_µcP»dYuvTemp[i] = 
NULL
;

143 if(
m_µcResiYuvTemp
[
i
])

145 
m_µcResiYuvTemp
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcResiYuvTemp[i]; m_µcResiYuvTemp[i] = 
NULL
;

147 if(
m_µcRecoYuvTemp
[
i
])

149 
m_µcRecoYuvTemp
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcRecoYuvTemp[i]; m_µcRecoYuvTemp[i] = 
NULL
;

151 if(
m_µcOrigYuv
[
i
])

153 
m_µcOrigYuv
[
i
]->
	`de¡roy
(); 
d–‘e
 m_µcOrigYuv[i]; m_µcOrigYuv[i] = 
NULL
;

156 if(
m_µcBe¡CU
)

158 
d–‘e
 [] 
m_µcBe¡CU
;

159 
m_µcBe¡CU
 = 
NULL
;

161 if(
m_µcTempCU
)

163 
d–‘e
 [] 
m_µcTempCU
;

164 
m_µcTempCU
 = 
NULL
;

167 if(
m_µcP»dYuvBe¡
)

169 
d–‘e
 [] 
m_µcP»dYuvBe¡
;

170 
m_µcP»dYuvBe¡
 = 
NULL
;

172 if(
m_µcResiYuvBe¡
)

174 
d–‘e
 [] 
m_µcResiYuvBe¡
;

175 
m_µcResiYuvBe¡
 = 
NULL
;

177 if(
m_µcRecoYuvBe¡
)

179 
d–‘e
 [] 
m_µcRecoYuvBe¡
;

180 
m_µcRecoYuvBe¡
 = 
NULL
;

182 if(
m_µcP»dYuvTemp
)

184 
d–‘e
 [] 
m_µcP»dYuvTemp
;

185 
m_µcP»dYuvTemp
 = 
NULL
;

187 if(
m_µcResiYuvTemp
)

189 
d–‘e
 [] 
m_µcResiYuvTemp
;

190 
m_µcResiYuvTemp
 = 
NULL
;

192 if(
m_µcRecoYuvTemp
)

194 
d–‘e
 [] 
m_µcRecoYuvTemp
;

195 
m_µcRecoYuvTemp
 = 
NULL
;

197 if(
m_µcOrigYuv
)

199 
d–‘e
 [] 
m_µcOrigYuv
;

200 
m_µcOrigYuv
 = 
NULL
;

202 
	}
}

206 
Void
 
	gTEncCu
::
	$š™
Ð
TEncTÝ
* 
pcEncTÝ
 )

208 
m_pcEncCfg
 = 
pcEncTÝ
;

209 
m_pcP»dS—rch
 = 
pcEncTÝ
->
	`g‘P»dS—rch
();

210 
m_pcTrQuªt
 = 
pcEncTÝ
->
	`g‘TrQuªt
();

211 
m_pcRdCo¡
 = 
pcEncTÝ
->
	`g‘RdCo¡
();

213 
m_pcEÁrÝyCod”
 = 
pcEncTÝ
->
	`g‘EÁrÝyCod”
();

214 
m_pcBšCABAC
 = 
pcEncTÝ
->
	`g‘BšCABAC
();

216 
m_µpcRDSbacCod”
 = 
pcEncTÝ
->
	`g‘RDSbacCod”
();

217 
m_pcRDGoOnSbacCod”
 = 
pcEncTÝ
->
	`g‘RDGoOnSbacCod”
();

219 
m_pcR©eCŒl
 = 
pcEncTÝ
->
	`g‘R©eCŒl
();

220 
m_lumaQPOff£t
 = 0;

221 
	`š™LumaD–QpLUT
();

222 
	}
}

231 
Void
 
	gTEncCu
::
	$com´essCtu
Ð
TComD©aCU
* 
pCtu
 )

234 
m_µcBe¡CU
[0]->
	`š™Ctu
Ð
pCtu
->
	`g‘Pic
(),…Ctu->
	`g‘CtuRsAddr
() );

235 
m_µcTempCU
[0]->
	`š™Ctu
Ð
pCtu
->
	`g‘Pic
(),…Ctu->
	`g‘CtuRsAddr
() );

236 
m_bEncodeDQP
 = 
çl£
;

239 
	`DEBUG_STRING_NEW
(
sDebug
)

241 
	`xCom´essCU
Ð
m_µcBe¡CU
[0], 
m_µcTempCU
[0], 0 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

242 
	`DEBUG_STRING_OUTPUT
(
¡d
::
cout
, 
sDebug
)

244 #ià
ADAPTIVE_QP_SELECTION


245 ifÐ
m_pcEncCfg
->
	`g‘U£Ad­tQpS–eù
() )

247 if(
pCtu
->
	`g‘Sliû
()->
	`g‘SliûTy³
()!=
I_SLICE
)

249 
	`xCtuCÞËùARLSts
Ð
pCtu
 );

253 
	}
}

256 
Void
 
	gTEncCu
::
	$’codeCtu
 ( 
TComD©aCU
* 
pCtu
 )

258 iàÐ
pCtu
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

260 
	`£tdQPFÏg
(
Œue
);

263 iàÐ
pCtu
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

265 
	`£tCodeChromaQpAdjFÏg
(
Œue
);

269 
	`xEncodeCU
Ð
pCtu
, 0, 0 );

270 
	}
}

276 
Void
 
	gTEncCu
::
	$š™LumaD–QpLUT
()

278 cÚ¡ 
LumaLev–ToD–QPM­pšg
 &
m­pšg
=
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
();

280 iàÐ!
m­pšg
.
	`isEÇbËd
() )

287 
IÁ
 
Ï¡D–QPV®ue
=0;

288 
¡d
::
size_t
 
ÃxtS·r£Index
=0;

289 
IÁ
 
šdex
=0; index<
LUMA_LEVEL_TO_DQP_LUT_MAXSIZE
; index++)

291 
ÃxtS·r£Index
 < 
m­pšg
.m­pšg.
	`size
(è&& 
šdex
>=m­pšg.m­pšg[ÃxtS·r£Index].
fœ¡
)

293 
Ï¡D–QPV®ue
=
m­pšg
.m­pšg[
ÃxtS·r£Index
].
£cÚd
;

294 
ÃxtS·r£Index
++;

296 
m_lumaLev–ToD–QPLUT
[
šdex
]=
Ï¡D–QPV®ue
;

298 
	}
}

300 
IÁ
 
	gTEncCu
::
	$ÿlcuÏ‹LumaDQP
(
TComD©aCU
 *
pCU
, cÚ¡ 
UIÁ
 
absP¬tIdx
, cÚ¡ 
TComYuv
 * 
pOrgYuv
)

302 cÚ¡ 
P–
 *
pY
 = 
pOrgYuv
->
	`g‘Addr
(
COMPONENT_Y
, 
absP¬tIdx
);

303 cÚ¡ 
IÁ
 
¡ride
 = 
pOrgYuv
->
	`g‘SŒide
(
COMPONENT_Y
);

304 
IÁ
 
width
 = 
pCU
->
	`g‘Width
(
absP¬tIdx
);

305 
IÁ
 
height
 = 
pCU
->
	`g‘Height
(
absP¬tIdx
);

306 
DoubË
 
avg
 = 0;

309 cÚ¡ 
TComSPS
* 
pSPS
 = 
pCU
->
	`g‘Sliû
()->
	`g‘SPS
();

310 iàÐ
pCU
->
	`g‘CUP–X
(è+ 
width
 > 
pSPS
->
	`g‘PicWidthInLumaSam¶es
() )

312 
width
 = 
pSPS
->
	`g‘PicWidthInLumaSam¶es
(è- 
pCU
->
	`g‘CUP–X
();

314 iàÐ
pCU
->
	`g‘CUP–Y
(è+ 
height
 > 
pSPS
->
	`g‘PicHeightInLumaSam¶es
() )

316 
height
 = 
pSPS
->
	`g‘PicHeightInLumaSam¶es
(è- 
pCU
->
	`g‘CUP–Y
();

320 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
mode
 =ð
LUMALVL_TO_DQP_AVG_METHOD
 )

323 
IÁ
 
sum
 = 0;

324 
IÁ
 
y
 = 0; y < 
height
; y++)

326 
IÁ
 
x
 = 0; x < 
width
; x++)

328 
sum
 +ð
pY
[
x
];

330 
pY
 +ð
¡ride
;

332 
avg
 = (
DoubË
)
sum
/(
width
*
height
);

337 
IÁ
 
maxV®
 = 0;

338 
IÁ
 
y
 = 0; y < 
height
; y++)

340 
IÁ
 
x
 = 0; x < 
width
; x++)

342 ià(
pY
[
x
] > 
maxV®
)

344 
maxV®
 = 
pY
[
x
];

347 
pY
 +ð
¡ride
;

350 
avg
 = (
DoubË
)
maxV®
 * 
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
maxM‘hodWeight
;

353 
IÁ
 
lumaIdx
 = 
Cl3
<IÁ>(0, 
	`IÁ
(
LUMA_LEVEL_TO_DQP_LUT_MAXSIZE
)-1, IÁ(
avg
+0.5) );

354 
IÁ
 
QP
 = 
m_lumaLev–ToD–QPLUT
[
lumaIdx
];

355  
QP
;

356 
	}
}

359 #ià
AMP_ENC_SPEEDUP


360 #ià
AMP_MRG


361 
Void
 
	gTEncCu
::
	$d”iveTe¡ModeAMP
 (
TComD©aCU
 *
pcBe¡CU
, 
P¬tSize
 
eP¬’tP¬tSize
, 
BoÞ
 &
bTe¡AMP_HÜ
, BoÞ &
bTe¡AMP_V”
, BoÞ &
bTe¡M”geAMP_HÜ
, BoÞ &
bTe¡M”geAMP_V”
)

363 
Void
 
TEncCu
::
	$d”iveTe¡ModeAMP
 (
TComD©aCU
 *
pcBe¡CU
, 
P¬tSize
 
eP¬’tP¬tSize
, 
BoÞ
 &
bTe¡AMP_HÜ
, BoÞ &
bTe¡AMP_V”
)

366 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxN
 )

368 
bTe¡AMP_HÜ
 = 
Œue
;

370 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_Nx2N
 )

372 
bTe¡AMP_V”
 = 
Œue
;

374 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 &&…cBe¡CU->
	`g‘M”geFÏg
(0è=ð
çl£
 &&…cBe¡CU->
	`isSk³d
(0) == false )

376 
bTe¡AMP_HÜ
 = 
Œue
;

377 
bTe¡AMP_V”
 = 
Œue
;

380 #ià
AMP_MRG


382 iàÐ
eP¬’tP¬tSize
 >ð
SIZE_2NxnU
 &&ƒP¬’tP¬tSiz<ð
SIZE_nRx2N
 )

384 
bTe¡M”geAMP_HÜ
 = 
Œue
;

385 
bTe¡M”geAMP_V”
 = 
Œue
;

388 iàÐ
eP¬’tP¬tSize
 =ð
NUMBER_OF_PART_SIZES
 )

390 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxN
 )

392 
bTe¡M”geAMP_HÜ
 = 
Œue
;

394 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_Nx2N
 )

396 
bTe¡M”geAMP_V”
 = 
Œue
;

400 iàÐ
pcBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 &&…cBe¡CU->
	`isSk³d
(0è=ð
çl£
 )

402 
bTe¡M”geAMP_HÜ
 = 
Œue
;

403 
bTe¡M”geAMP_V”
 = 
Œue
;

406 iàÐ
pcBe¡CU
->
	`g‘Width
(0) == 64 )

408 
bTe¡AMP_HÜ
 = 
çl£
;

409 
bTe¡AMP_V”
 = 
çl£
;

413 iàÐ
eP¬’tP¬tSize
 >ð
SIZE_2NxnU
 &&ƒP¬’tP¬tSiz<ð
SIZE_nRx2N
 )

415 
bTe¡AMP_HÜ
 = 
Œue
;

416 
bTe¡AMP_V”
 = 
Œue
;

419 iàÐ
eP¬’tP¬tSize
 =ð
SIZE_2Nx2N
 )

421 
bTe¡AMP_HÜ
 = 
çl£
;

422 
bTe¡AMP_V”
 = 
çl£
;

425 
	}
}

435 #ià
AMP_ENC_SPEEDUP


436 
Void
 
	gTEncCu
::
xCom´essCU
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, cÚ¡ 
UIÁ
 
uiD•th
 
DEBUG_STRING_FN_DECLARE
(
sDebug_
), 
P¬tSize
 
eP¬’tP¬tSize
 )

438 
Void
 
	gTEncCu
::
	$xCom´essCU
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, cÚ¡ 
UIÁ
 
uiD•th
 )

441 
TComPic
* 
pcPic
 = 
½cBe¡CU
->
	`g‘Pic
();

442 
	`DEBUG_STRING_NEW
(
sDebug
)

443 cÚ¡ 
TComPPS
 &
µs
=*(
½cTempCU
->
	`g‘Sliû
()->
	`g‘PPS
());

444 cÚ¡ 
TComSPS
 &
¥s
=*(
½cTempCU
->
	`g‘Sliû
()->
	`g‘SPS
());

447 cÚ¡ 
UIÁ
 
ç¡D–QPCuMaxSize
 = 
	`Cl3
(
¥s
.
	`g‘MaxCUHeight
()>>¥s.
	`g‘Log2DiffMaxMšCodšgBlockSize
(), sps.getMaxCUHeight(), 32u);

450 
m_µcOrigYuv
[
uiD•th
]->
	`cÝyFromPicYuv
Ð
pcPic
->
	`g‘PicYuvOrg
(), 
½cBe¡CU
->
	`g‘CtuRsAddr
(),„pcBe¡CU->
	`g‘ZÜd”IdxInCtu
() );

453 
BoÞ
 
doNÙBlockPu
 = 
Œue
;

454 
BoÞ
 
—¾yD‘eùiÚSkMode
 = 
çl£
;

456 cÚ¡ 
UIÁ
 
uiLP–X
 = 
½cBe¡CU
->
	`g‘CUP–X
();

457 cÚ¡ 
UIÁ
 
uiRP–X
 = 
uiLP–X
 + 
½cBe¡CU
->
	`g‘Width
(0) - 1;

458 cÚ¡ 
UIÁ
 
uiTP–Y
 = 
½cBe¡CU
->
	`g‘CUP–Y
();

459 cÚ¡ 
UIÁ
 
uiBP–Y
 = 
uiTP–Y
 + 
½cBe¡CU
->
	`g‘Height
(0) - 1;

460 cÚ¡ 
UIÁ
 
uiWidth
 = 
½cBe¡CU
->
	`g‘Width
(0);

462 
IÁ
 
iBa£QP
 = 
	`xCompu‹QP
Ð
½cBe¡CU
, 
uiD•th
 );

463 
IÁ
 
iMšQP
;

464 
IÁ
 
iMaxQP
;

465 
BoÞ
 
isAddLowe¡QP
 = 
çl£
;

467 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
½cBe¡CU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

469 ifÐ
uiD•th
 <ð
µs
.
	`g‘MaxCuDQPD•th
() )

471 
IÁ
 
idQP
 = 
m_pcEncCfg
->
	`g‘MaxD–QP
();

472 
iMšQP
 = 
	`Cl3
Ð-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
-
idQP
 );

473 
iMaxQP
 = 
	`Cl3
Ð-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
+
idQP
 );

477 
iMšQP
 = 
½cTempCU
->
	`g‘QP
(0);

478 
iMaxQP
 = 
½cTempCU
->
	`g‘QP
(0);

481 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
() )

483 iàÐ
uiD•th
 <ð
µs
.
	`g‘MaxCuDQPD•th
() )

486 
m_lumaQPOff£t
 = 
	`ÿlcuÏ‹LumaDQP
(
½cTempCU
, 0, 
m_µcOrigYuv
[
uiD•th
]);

488 
iMšQP
 = 
	`Cl3
(-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
 - 
m_lumaQPOff£t
);

489 
iMaxQP
 = 
iMšQP
;

492 iàÐ
m_pcEncCfg
->
	`g‘U£R©eCŒl
() )

494 
iMšQP
 = 
m_pcR©eCŒl
->
	`g‘RCQP
();

495 
iMaxQP
 = 
m_pcR©eCŒl
->
	`g‘RCQP
();

500 cÚ¡ 
IÁ
 
lowe¡QP
 = 
iMšQP
;

502 iàÐ(
µs
.
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
()) )

504 
isAddLowe¡QP
 = 
Œue
;

505 
iMšQP
 = iMinQP - 1;

506 iàÐ
m_pcEncCfg
->
	`g‘CUT¿nsquªtBy·ssFÏgFÜûV®ue
() )

508 
iMaxQP
 = 
iMšQP
;

512 
TComSliû
 * 
pcSliû
 = 
½cTempCU
->
	`g‘Pic
()->
	`g‘Sliû
ÔpcTempCU->g‘Pic()->
	`g‘Cu¼SliûIdx
());

514 cÚ¡ 
BoÞ
 
bBound¬y
 = !Ð
uiRP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(è&& 
uiBP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() );

516 iàÐ!
bBound¬y
 )

518 
IÁ
 
iQP
=
iMšQP
; iQP<=
iMaxQP
; iQP++)

520 cÚ¡ 
BoÞ
 
bIsLos¦essMode
 = 
isAddLowe¡QP
 && (
iQP
 =ð
iMšQP
);

522 ià(
bIsLos¦essMode
)

524 
iQP
 = 
lowe¡QP
;

526 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
(è&& 
uiD•th
 <ð
µs
.
	`g‘MaxCuDQPD•th
() )

528 
	`g‘SliûEncod”
()->
	`upd©eLambda
(
pcSliû
, 
iQP
);

531 
m_cuChromaQpOff£tIdxPlus1
 = 0;

532 ià(
pcSliû
->
	`g‘U£ChromaQpAdj
())

539 
IÁ
 
lgMšCuSize
 = 
¥s
.
	`g‘Log2MšCodšgBlockSize
() +

540 
¡d
::
max
<
IÁ
>(0, 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
()-
	`IÁ
(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
()));

541 
m_cuChromaQpOff£tIdxPlus1
 = ((
uiLP–X
 >> 
lgMšCuSize
è+ (
uiTP–Y
 >>†gMšCuSize)è% (
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡L’
() + 1);

544 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

547 ifÐ
½cBe¡CU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è!ð
I_SLICE
 )

550 if(
m_pcEncCfg
->
	`g‘U£E¬lySkD‘eùiÚ
())

552 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2Nx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

553 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

556 
	`xCheckRDCo¡M”ge2Nx2N
Ð
½cBe¡CU
, 
½cTempCU
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
), &
—¾yD‘eùiÚSkMode
 );

557 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

559 if(!
m_pcEncCfg
->
	`g‘U£E¬lySkD‘eùiÚ
())

562 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2Nx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

563 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

564 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
())

566 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

571 ià(
bIsLos¦essMode
)

573 
iQP
 = 
iMšQP
;

577 if(!
—¾yD‘eùiÚSkMode
)

579 
IÁ
 
iQP
=
iMšQP
; iQP<=
iMaxQP
; iQP++)

581 cÚ¡ 
BoÞ
 
bIsLos¦essMode
 = 
isAddLowe¡QP
 && (
iQP
 =ð
iMšQP
);

583 ià(
bIsLos¦essMode
)

585 
iQP
 = 
lowe¡QP
;

588 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

591 ifÐ
½cBe¡CU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è!ð
I_SLICE
 )

595 if(!Ð(
½cBe¡CU
->
	`g‘Width
(0)==8è&& (½cBe¡CU->
	`g‘Height
(0)==8) ))

597 ifÐ
uiD•th
 =ð
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
(è&& 
doNÙBlockPu
)

599 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_NxN
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

600 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

604 if(
doNÙBlockPu
)

606 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_Nx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

607 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

608 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_Nx2N
 )

610 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

613 if(
doNÙBlockPu
)

615 
	`xCheckRDCo¡IÁ”
 ( 
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxN
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

616 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

617 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxN
)

619 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

624 if(
¥s
.
	`g‘U£AMP
(è&& 
uiD•th
 < sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
() )

626 #ià
AMP_ENC_SPEEDUP


627 
BoÞ
 
bTe¡AMP_HÜ
 = 
çl£
, 
bTe¡AMP_V”
 = false;

629 #ià
AMP_MRG


630 
BoÞ
 
bTe¡M”geAMP_HÜ
 = 
çl£
, 
bTe¡M”geAMP_V”
 = false;

632 
	`d”iveTe¡ModeAMP
 (
½cBe¡CU
, 
eP¬’tP¬tSize
, 
bTe¡AMP_HÜ
, 
bTe¡AMP_V”
, 
bTe¡M”geAMP_HÜ
, 
bTe¡M”geAMP_V”
);

634 
	`d”iveTe¡ModeAMP
 (
½cBe¡CU
, 
eP¬’tP¬tSize
, 
bTe¡AMP_HÜ
, 
bTe¡AMP_V”
);

638 iàÐ
bTe¡AMP_HÜ
 )

640 if(
doNÙBlockPu
)

642 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnU
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

643 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

644 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxnU
 )

646 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

649 if(
doNÙBlockPu
)

651 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnD
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

652 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

653 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxnD
 )

655 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

659 #ià
AMP_MRG


660 iàÐ
bTe¡M”geAMP_HÜ
 )

662 if(
doNÙBlockPu
)

664 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnU
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
), 
Œue
 );

665 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

666 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxnU
 )

668 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

671 if(
doNÙBlockPu
)

673 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnD
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
), 
Œue
 );

674 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

675 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2NxnD
 )

677 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

684 iàÐ
bTe¡AMP_V”
 )

686 if(
doNÙBlockPu
)

688 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nLx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

689 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

690 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_nLx2N
 )

692 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

695 if(
doNÙBlockPu
)

697 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nRx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

698 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

701 #ià
AMP_MRG


702 iàÐ
bTe¡M”geAMP_V”
 )

704 if(
doNÙBlockPu
)

706 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nLx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
), 
Œue
 );

707 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

708 if(
m_pcEncCfg
->
	`g‘U£CbfFa¡Mode
(è&& 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_nLx2N
 )

710 
doNÙBlockPu
 = 
½cBe¡CU
->
	`g‘QtRoÙCbf
( 0 ) != 0;

713 if(
doNÙBlockPu
)

715 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nRx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
), 
Œue
 );

716 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

722 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnU
 );

723 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

724 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2NxnD
 );

725 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

726 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nLx2N
 );

727 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

729 
	`xCheckRDCo¡IÁ”
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_nRx2N
 );

730 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

738 #ià
MCTS_ENC_CHECK


739 iàÐ
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è|| (
½cBe¡CU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
) ||

740 ((!
m_pcEncCfg
->
	`g‘Di§bËIÁ¿PUsInIÁ”Sliûs
()) && (

741 (
½cBe¡CU
->
	`g‘Cbf
(0, 
COMPONENT_Y
) != 0) ||

742 ((
½cBe¡CU
->
	`g‘Cbf
(0, 
COMPONENT_Cb
è!ð0è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cb)) ||

743 ((
½cBe¡CU
->
	`g‘Cbf
(0, 
COMPONENT_Cr
è!ð0è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cr))

747 if((
½cBe¡CU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
) ||

748 ((!
m_pcEncCfg
->
	`g‘Di§bËIÁ¿PUsInIÁ”Sliûs
()) && (

749 (
½cBe¡CU
->
	`g‘Cbf
Ð0, 
COMPONENT_Y
 ) != 0) ||

750 ((
½cBe¡CU
->
	`g‘Cbf
Ð0, 
COMPONENT_Cb
 ) !ð0è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cb)) ||

751 ((
½cBe¡CU
->
	`g‘Cbf
Ð0, 
COMPONENT_Cr
 ) !ð0è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cr))

755 
	`xCheckRDCo¡IÁ¿
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_2Nx2N
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

756 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

757 ifÐ
uiD•th
 =ð
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
() )

759 ifÐ
½cTempCU
->
	`g‘Width
(0è> ( 1 << 
¥s
.
	`g‘QuadŒ“TULog2MšSize
() ) )

761 
	`xCheckRDCo¡IÁ¿
Ð
½cBe¡CU
, 
½cTempCU
, 
SIZE_NxN
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

762 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

768 if(
¥s
.
	`g‘U£PCM
()

769 && 
½cTempCU
->
	`g‘Width
(0è<ð(1<<
¥s
.
	`g‘PCMLog2MaxSize
())

770 && 
½cTempCU
->
	`g‘Width
(0è>ð(1<<
¥s
.
	`g‘PCMLog2MšSize
()) )

772 
UIÁ
 
uiRawB™s
 = 
	`g‘TÙ®B™s
(
½cBe¡CU
->
	`g‘Width
(0),„pcBe¡CU->
	`g‘Height
(0),„pcBe¡CU->
	`g‘Pic
()->
	`g‘ChromaFÜm©
(), 
¥s
.
	`g‘B™D•ths
().
»cÚ
);

773 
UIÁ
 
uiBe¡B™s
 = 
½cBe¡CU
->
	`g‘TÙ®B™s
();

774 if((
uiBe¡B™s
 > 
uiRawB™s
è|| (
½cBe¡CU
->
	`g‘TÙ®Co¡
(è> 
m_pcRdCo¡
->
	`ÿlcRdCo¡
(uiRawBits, 0)))

776 
	`xCheckIÁ¿PCM
 (
½cBe¡CU
, 
½cTempCU
);

777 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

781 ià(
bIsLos¦essMode
)

783 
iQP
 = 
iMšQP
;

788 ifÐ
½cBe¡CU
->
	`g‘TÙ®Co¡
()!=
MAX_DOUBLE
 )

790 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_NEXT_BEST
]);

791 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

792 
m_pcEÁrÝyCod”
->
	`’codeS¶™FÏg
Ð
½cBe¡CU
, 0, 
uiD•th
, 
Œue
 );

793 
½cBe¡CU
->
	`g‘TÙ®B™s
(è+ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

794 
½cBe¡CU
->
	`g‘TÙ®Bšs
(è+ð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

795 
½cBe¡CU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cBe¡CU->
	`g‘TÙ®B™s
(),„pcBe¡CU->
	`g‘TÙ®Di¡ÜtiÚ
() );

796 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_NEXT_BEST
]);

801 ifÐ
½cBe¡CU
->
	`g‘TÙ®Co¡
()!=
MAX_DOUBLE
 &&„pcBe¡CU->
	`isLos¦essCoded
(0è&& (½cBe¡CU->
	`g‘IPCMFÏg
(0è=ð
çl£
))

803 
	`xFžlPCMBufãr
(
½cBe¡CU
, 
m_µcOrigYuv
[
uiD•th
]);

806 ifÐ
uiD•th
 =ð
µs
.
	`g‘MaxCuDQPD•th
() )

808 
IÁ
 
idQP
 = 
m_pcEncCfg
->
	`g‘MaxD–QP
();

809 
iMšQP
 = 
	`Cl3
Ð-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
-
idQP
 );

810 
iMaxQP
 = 
	`Cl3
Ð-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
+
idQP
 );

812 ifÐ
uiD•th
 < 
µs
.
	`g‘MaxCuDQPD•th
() )

814 
iMšQP
 = 
iBa£QP
;

815 
iMaxQP
 = 
iBa£QP
;

819 cÚ¡ 
IÁ
 
iS¹QP
 = 
½cTempCU
->
	`g‘QP
(0);

820 
iMšQP
 = 
iS¹QP
;

821 
iMaxQP
 = 
iS¹QP
;

824 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
() )

826 
iMšQP
 = 
	`Cl3
(-
¥s
.
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£QP
 - 
m_lumaQPOff£t
);

827 
iMaxQP
 = 
iMšQP
;

830 iàÐ
m_pcEncCfg
->
	`g‘U£R©eCŒl
() )

832 
iMšQP
 = 
m_pcR©eCŒl
->
	`g‘RCQP
();

833 
iMaxQP
 = 
m_pcR©eCŒl
->
	`g‘RCQP
();

836 iàÐ
m_pcEncCfg
->
	`g‘CUT¿nsquªtBy·ssFÏgFÜûV®ue
() )

838 
iMaxQP
 = 
iMšQP
;

841 cÚ¡ 
BoÞ
 
bSubB¿nch
 = 
bBound¬y
 || !Ð
m_pcEncCfg
->
	`g‘U£E¬lyCU
(è&& 
½cBe¡CU
->
	`g‘TÙ®Co¡
()!=
MAX_DOUBLE
 &&„pcBe¡CU->
	`isSk³d
(0) );

843 ifÐ
bSubB¿nch
 && 
uiD•th
 < 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
(è&& (!
	`g‘Fa¡D–Qp
(è|| 
uiWidth
 > 
ç¡D–QPCuMaxSize
 || 
bBound¬y
))

846 
DoubË
 
¥l™TÙ®Co¡
 = 0;

848 
IÁ
 
iQP
=
iMšQP
; iQP<=
iMaxQP
; iQP++)

850 cÚ¡ 
BoÞ
 
bIsLos¦essMode
 = 
çl£
;

852 
½cTempCU
->
	`š™E¡D©a
Ð
uiD•th
, 
iQP
, 
bIsLos¦essMode
 );

854 
UCh¬
 
uhNextD•th
 = 
uiD•th
+1;

855 
TComD©aCU
* 
pcSubBe¡P¬tCU
 = 
m_µcBe¡CU
[
uhNextD•th
];

856 
TComD©aCU
* 
pcSubTempP¬tCU
 = 
m_µcTempCU
[
uhNextD•th
];

857 
	`DEBUG_STRING_NEW
(
sTempDebug
)

859  
UIÁ
 
uiP¬tUn™Idx
 = 0; uiPartUnitIdx < 4; uiPartUnitIdx++ )

861 
pcSubBe¡P¬tCU
->
	`š™SubCU
Ð
½cTempCU
, 
uiP¬tUn™Idx
, 
uhNextD•th
, 
iQP
 );

862 
pcSubTempP¬tCU
->
	`š™SubCU
Ð
½cTempCU
, 
uiP¬tUn™Idx
, 
uhNextD•th
, 
iQP
 );

864 ifÐÐ
pcSubBe¡P¬tCU
->
	`g‘CUP–X
(è< 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& (…cSubBe¡P¬tCU->
	`g‘CUP–Y
(è< sps.
	`g‘PicHeightInLumaSam¶es
() ) )

866 iàÐ0 =ð
uiP¬tUn™Idx
)

868 
m_µpcRDSbacCod”
[
uhNextD•th
][
CI_CURR_BEST
]->
	`lßd
(m_µpcRDSbacCod”[
uiD•th
][CI_CURR_BEST]);

872 
m_µpcRDSbacCod”
[
uhNextD•th
][
CI_CURR_BEST
]->
	`lßd
(m_µpcRDSbacCod”[uhNextD•th][
CI_NEXT_BEST
]);

875 #ià
AMP_ENC_SPEEDUP


876 
	`DEBUG_STRING_NEW
(
sChžd
)

877 iàÐ!(
½cBe¡CU
->
	`g‘TÙ®Co¡
()!=
MAX_DOUBLE
 &&„pcBe¡CU->
	`isIÁ”
(0)) )

879 
	`xCom´essCU
Ð
pcSubBe¡P¬tCU
, 
pcSubTempP¬tCU
, 
uhNextD•th
 
	`DEBUG_STRING_PASS_INTO
(
sChžd
), 
NUMBER_OF_PART_SIZES
 );

884 
	`xCom´essCU
Ð
pcSubBe¡P¬tCU
, 
pcSubTempP¬tCU
, 
uhNextD•th
 
	`DEBUG_STRING_PASS_INTO
(
sChžd
), 
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0) );

886 
	`DEBUG_STRING_APPEND
(
sTempDebug
, 
sChžd
)

888 
	`xCom´essCU
Ð
pcSubBe¡P¬tCU
, 
pcSubTempP¬tCU
, 
uhNextD•th
 );

891 
½cTempCU
->
	`cÝyP¬tFrom
Ð
pcSubBe¡P¬tCU
, 
uiP¬tUn™Idx
, 
uhNextD•th
 );

892 
	`xCÝyYuv2Tmp
Ð
pcSubBe¡P¬tCU
->
	`g‘TÙ®NumP¬t
()*
uiP¬tUn™Idx
, 
uhNextD•th
 );

893 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
(è&& 
µs
.
	`g‘MaxCuDQPD•th
() >= 1 )

895 
¥l™TÙ®Co¡
 +ð
pcSubBe¡P¬tCU
->
	`g‘TÙ®Co¡
();

900 
pcSubBe¡P¬tCU
->
	`cÝyToPic
Ð
uhNextD•th
 );

901 
½cTempCU
->
	`cÝyP¬tFrom
Ð
pcSubBe¡P¬tCU
, 
uiP¬tUn™Idx
, 
uhNextD•th
 );

905 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
uhNextD•th
][
CI_NEXT_BEST
]);

906 ifÐ!
bBound¬y
 )

908 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

909 
m_pcEÁrÝyCod”
->
	`’codeS¶™FÏg
Ð
½cTempCU
, 0, 
uiD•th
, 
Œue
 );

910 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
(è&& 
µs
.
	`g‘MaxCuDQPD•th
() >= 1 )

912 
IÁ
 
¥l™B™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

913 
DoubË
 
¥l™B™Co¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
¥l™B™s
, 0 );

914 
¥l™TÙ®Co¡
 +ð
¥l™B™Co¡
;

917 
½cTempCU
->
	`g‘TÙ®B™s
(è+ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

918 
½cTempCU
->
	`g‘TÙ®Bšs
(è+ð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

921 iàÐ
m_pcEncCfg
->
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
(è&& 
µs
.
	`g‘MaxCuDQPD•th
() >= 1 )

923 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
¥l™TÙ®Co¡
;

927 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cTempCU->
	`g‘TÙ®B™s
(),„pcTempCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

930 ifÐ
uiD•th
 =ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

932 
BoÞ
 
hasResidu®
 = 
çl£
;

933  
UIÁ
 
uiBlkIdx
 = 0; uiBlkIdx < 
½cTempCU
->
	`g‘TÙ®NumP¬t
(); uiBlkIdx ++)

935 ifÐÐ
½cTempCU
->
	`g‘Cbf
(
uiBlkIdx
, 
COMPONENT_Y
)

936 || (
½cTempCU
->
	`g‘Cbf
(
uiBlkIdx
, 
COMPONENT_Cb
è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cb))

937 || (
½cTempCU
->
	`g‘Cbf
(
uiBlkIdx
, 
COMPONENT_Cr
è&& (
numb”V®idCompÚ’ts
 > COMPONENT_Cr)) ) )

939 
hasResidu®
 = 
Œue
;

944 iàÐ
hasResidu®
 )

946 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

947 
m_pcEÁrÝyCod”
->
	`’codeQP
Ð
½cTempCU
, 0, 
çl£
 );

948 
½cTempCU
->
	`g‘TÙ®B™s
(è+ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

949 
½cTempCU
->
	`g‘TÙ®Bšs
(è+ð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

950 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cTempCU->
	`g‘TÙ®B™s
(),„pcTempCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

952 
BoÞ
 
foundNÚZ”oCbf
 = 
çl£
;

953 
½cTempCU
->
	`£tQPSubCUs
Ð½cTempCU->
	`g‘RefQP
Ð0 ), 0, 
uiD•th
, 
foundNÚZ”oCbf
 );

954 
	`as£¹
Ð
foundNÚZ”oCbf
 );

958 
½cTempCU
->
	`£tQPSubP¬ts
Ð½cTempCU->
	`g‘RefQP
Ð0 ), 0, 
uiD•th
 );

962 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_TEMP_BEST
]);

969 ià(
½cBe¡CU
->
	`g‘TÙ®Co¡
()!=
MAX_DOUBLE
)

971 cÚ¡ 
BoÞ
 
isEndOfSliû
 = 
pcSliû
->
	`g‘SliûMode
()==
FIXED_NUMBER_OF_BYTES


972 && ((
pcSliû
->
	`g‘SliûB™s
()+
½cBe¡CU
->
	`g‘TÙ®B™s
())>pcSliû->
	`g‘SliûArgum’t
()<<3)

973 && 
½cBe¡CU
->
	`g‘CtuRsAddr
(è!ð
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
pcSliû
->
	`g‘SliûCurS¹CtuTsAddr
())

974 && 
½cBe¡CU
->
	`g‘CtuRsAddr
(è!ð
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
());

975 cÚ¡ 
BoÞ
 
isEndOfSliûSegm’t
 = 
pcSliû
->
	`g‘SliûSegm’tMode
()==
FIXED_NUMBER_OF_BYTES


976 && ((
pcSliû
->
	`g‘SliûSegm’tB™s
()+
½cBe¡CU
->
	`g‘TÙ®B™s
()è>…cSliû->
	`g‘SliûSegm’tArgum’t
()<<3)

977 && 
½cBe¡CU
->
	`g‘CtuRsAddr
(è!ð
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
());

979 if(
isEndOfSliû
||
isEndOfSliûSegm’t
)

981 
½cBe¡CU
->
	`g‘TÙ®Co¡
()=
MAX_DOUBLE
;

985 
	`xCheckBe¡Mode
Ð
½cBe¡CU
, 
½cTempCU
, 
uiD•th
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
èDEBUG_STRING_PASS_INTO(
sTempDebug
èDEBUG_STRING_PASS_INTO(
çl£
) );

990 
	`DEBUG_STRING_APPEND
(
sDebug_
, 
sDebug
);

992 
½cBe¡CU
->
	`cÝyToPic
(
uiD•th
);

994 
	`xCÝyYuv2Pic
Ð
½cBe¡CU
->
	`g‘Pic
(),„pcBe¡CU->
	`g‘CtuRsAddr
(),„pcBe¡CU->
	`g‘ZÜd”IdxInCtu
(), 
uiD•th
, uiDepth );

995 ià(
bBound¬y
)

1002 
	`as£¹
Ð
½cBe¡CU
->
	`g‘P¬t™iÚSize
 ( 0 ) !ð
NUMBER_OF_PART_SIZES
 );

1003 
	`as£¹
Ð
½cBe¡CU
->
	`g‘P»diùiÚMode
Ð0 ) !ð
NUMBER_OF_PREDICTION_MODES
 );

1004 
	`as£¹
Ð
½cBe¡CU
->
	`g‘TÙ®Co¡
 ( ) !ð
MAX_DOUBLE
 );

1005 
	}
}

1013 
Void
 
	gTEncCu
::
	$fšishCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

1015 
TComPic
* 
pcPic
 = 
pcCU
->
	`g‘Pic
();

1016 
TComSliû
 * 
pcSliû
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Sliû
ÕcCU->g‘Pic()->
	`g‘Cu¼SliûIdx
());

1019 cÚ¡ 
IÁ
 
cu¼’tCTUTsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
(
pcCU
->
	`g‘CtuRsAddr
());

1020 cÚ¡ 
BoÞ
 
isLa¡SubCUOfCtu
 = 
pcCU
->
	`isLa¡SubCUOfCtu
(
uiAbsP¬tIdx
);

1021 iàÐ
isLa¡SubCUOfCtu
 )

1025 ià(
pcSliû
->
	`g‘SliûSegm’tCurEndCtuTsAddr
(è!ð
cu¼’tCTUTsAddr
+1)

1027 
m_pcEÁrÝyCod”
->
	`’codeT”mš©šgB™
( 0 );

1030 
	}
}

1037 
IÁ
 
	gTEncCu
::
	$xCompu‹QP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 )

1039 
IÁ
 
iBa£Qp
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SliûQp
();

1040 
IÁ
 
iQpOff£t
 = 0;

1041 iàÐ
m_pcEncCfg
->
	`g‘U£Ad­tiveQP
() )

1043 
TEncPic
* 
pcEPic
 = 
dyÇmic_ÿ¡
<TEncPic*>Ð
pcCU
->
	`g‘Pic
() );

1044 
UIÁ
 
uiAQD•th
 = 
	`mš
Ð
uiD•th
, 
pcEPic
->
	`g‘MaxAQD•th
()-1 );

1045 
TEncPicQPAd­tiÚLay”
* 
pcAQLay”
 = 
pcEPic
->
	`g‘AQLay”
Ð
uiAQD•th
 );

1046 
UIÁ
 
uiAQUPosX
 = 
pcCU
->
	`g‘CUP–X
(è/ 
pcAQLay”
->
	`g‘AQP¬tWidth
();

1047 
UIÁ
 
uiAQUPosY
 = 
pcCU
->
	`g‘CUP–Y
(è/ 
pcAQLay”
->
	`g‘AQP¬tHeight
();

1048 
UIÁ
 
uiAQUSŒide
 = 
pcAQLay”
->
	`g‘AQP¬tSŒide
();

1049 
TEncQPAd­tiÚUn™
* 
acAQU
 = 
pcAQLay”
->
	`g‘QPAd­tiÚUn™
();

1051 
DoubË
 
dMaxQSÿË
 = 
	`pow
(2.0, 
m_pcEncCfg
->
	`g‘QPAd­tiÚRªge
()/6.0);

1052 
DoubË
 
dAvgAù
 = 
pcAQLay”
->
	`g‘AvgAùiv™y
();

1053 
DoubË
 
dCUAù
 = 
acAQU
[
uiAQUPosY
 * 
uiAQUSŒide
 + 
uiAQUPosX
].
	`g‘Aùiv™y
();

1054 
DoubË
 
dNÜmAù
 = (
dMaxQSÿË
*
dCUAù
 + 
dAvgAù
) / (dCUAct + dMaxQScale*dAvgAct);

1055 
DoubË
 
dQpOff£t
 = 
	`log
(
dNÜmAù
) /†og(2.0) * 6.0;

1056 
iQpOff£t
 = 
	`IÁ
(
	`æoÜ
Ð
dQpOff£t
 + 0.49999 ));

1059  
	`Cl3
(-
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
iBa£Qp
+
iQpOff£t
 );

1060 
	}
}

1068 
Void
 
	gTEncCu
::
	$xEncodeCU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

1070 
TComPic
 *cÚ¡ 
pcPic
 = 
pcCU
->
	`g‘Pic
();

1071 
TComSliû
 *cÚ¡ 
pcSliû
 = 
pcCU
->
	`g‘Sliû
();

1072 cÚ¡ 
TComSPS
 &
¥s
 =*(
pcSliû
->
	`g‘SPS
());

1073 cÚ¡ 
TComPPS
 &
µs
 =*(
pcSliû
->
	`g‘PPS
());

1075 cÚ¡ 
UIÁ
 
maxCUWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

1076 cÚ¡ 
UIÁ
 
maxCUHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

1078 
BoÞ
 
bBound¬y
 = 
çl£
;

1079 
UIÁ
 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

1080 cÚ¡ 
UIÁ
 
uiRP–X
 = 
uiLP–X
 + (
maxCUWidth
>>
uiD•th
) - 1;

1081 
UIÁ
 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

1082 cÚ¡ 
UIÁ
 
uiBP–Y
 = 
uiTP–Y
 + (
maxCUHeight
>>
uiD•th
) - 1;

1084 ifÐÐ
uiRP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiBP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

1086 
m_pcEÁrÝyCod”
->
	`’codeS¶™FÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

1090 
bBound¬y
 = 
Œue
;

1093 ifÐÐÐ
uiD•th
 < 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 ) ) && ( uiD•th < 
¥s
.
	`g‘Log2DiffMaxMšCodšgBlockSize
(èèè|| 
bBound¬y
 )

1095 
UIÁ
 
uiQNumP¬ts
 = ( 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(è>> (
uiD•th
<<1) )>>2;

1096 ifÐ
uiD•th
 =ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

1098 
	`£tdQPFÏg
(
Œue
);

1101 ifÐ
uiD•th
 =ð
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
(è&& 
pcSliû
->
	`g‘U£ChromaQpAdj
())

1103 
	`£tCodeChromaQpAdjFÏg
(
Œue
);

1106  
UIÁ
 
uiP¬tUn™Idx
 = 0; uiP¬tUn™Idx < 4; uiP¬tUn™Idx++, 
uiAbsP¬tIdx
+=
uiQNumP¬ts
 )

1108 
uiLP–X
 = 
pcCU
->
	`g‘CUP–X
(è+ 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

1109 
uiTP–Y
 = 
pcCU
->
	`g‘CUP–Y
(è+ 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
] ];

1110 ifÐÐ
uiLP–X
 < 
¥s
.
	`g‘PicWidthInLumaSam¶es
(èè&& ( 
uiTP–Y
 < sps.
	`g‘PicHeightInLumaSam¶es
() ) )

1112 
	`xEncodeCU
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
+1 );

1118 ifÐ
uiD•th
 <ð
µs
.
	`g‘MaxCuDQPD•th
(è&&…ps.
	`g‘U£DQP
())

1120 
	`£tdQPFÏg
(
Œue
);

1123 ifÐ
uiD•th
 <ð
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘DiffCuChromaQpOff£tD•th
(è&& 
pcSliû
->
	`g‘U£ChromaQpAdj
())

1125 
	`£tCodeChromaQpAdjFÏg
(
Œue
);

1128 ià(
µs
.
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

1130 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1133 ifÐ!
pcSliû
->
	`isIÁ¿
() )

1135 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1138 ifÐ
pcCU
->
	`isSk³d
Ð
uiAbsP¬tIdx
 ) )

1140 
m_pcEÁrÝyCod”
->
	`’codeM”geIndex
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1141 
	`fšishCU
(
pcCU
,
uiAbsP¬tIdx
);

1145 
m_pcEÁrÝyCod”
->
	`’codeP»dMode
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1146 
m_pcEÁrÝyCod”
->
	`’codeP¬tSize
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

1148 ià(
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) &&…cCU->
	`g‘P¬t™iÚSize
ÐuiAbsP¬tIdx ) =ð
SIZE_2Nx2N
 )

1150 
m_pcEÁrÝyCod”
->
	`’codeIPCMInfo
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1152 if(
pcCU
->
	`g‘IPCMFÏg
(
uiAbsP¬tIdx
))

1155 
	`fšishCU
(
pcCU
,
uiAbsP¬tIdx
);

1161 
m_pcEÁrÝyCod”
->
	`’codeP»dInfo
Ð
pcCU
, 
uiAbsP¬tIdx
 );

1164 
BoÞ
 
bCodeDQP
 = 
	`g‘dQPFÏg
();

1165 
BoÞ
 
codeChromaQpAdj
 = 
	`g‘CodeChromaQpAdjFÏg
();

1166 
m_pcEÁrÝyCod”
->
	`’codeCÛff
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
, 
bCodeDQP
, 
codeChromaQpAdj
 );

1167 
	`£tCodeChromaQpAdjFÏg
Ð
codeChromaQpAdj
 );

1168 
	`£tdQPFÏg
Ð
bCodeDQP
 );

1171 
	`fšishCU
(
pcCU
,
uiAbsP¬tIdx
);

1172 
	}
}

1174 
IÁ
 
	$xC®cHADs8x8_ISliû
(
P–
 *
piOrg
, 
IÁ
 
iSŒideOrg
)

1176 
IÁ
 
k
, 
i
, 
j
, 
jj
;

1177 
IÁ
 
diff
[64], 
m1
[8][8], 
m2
[8][8], 
m3
[8][8], 
iSumHad
 = 0;

1179  
k
 = 0; k < 64; k += 8 )

1181 
diff
[
k
+0] = 
piOrg
[0] ;

1182 
diff
[
k
+1] = 
piOrg
[1] ;

1183 
diff
[
k
+2] = 
piOrg
[2] ;

1184 
diff
[
k
+3] = 
piOrg
[3] ;

1185 
diff
[
k
+4] = 
piOrg
[4] ;

1186 
diff
[
k
+5] = 
piOrg
[5] ;

1187 
diff
[
k
+6] = 
piOrg
[6] ;

1188 
diff
[
k
+7] = 
piOrg
[7] ;

1190 
piOrg
 +ð
iSŒideOrg
;

1194 
j
=0; j < 8; j++)

1196 
jj
 = 
j
 << 3;

1197 
m2
[
j
][0] = 
diff
[
jj
 ] + diff[jj+4];

1198 
m2
[
j
][1] = 
diff
[
jj
+1] + diff[jj+5];

1199 
m2
[
j
][2] = 
diff
[
jj
+2] + diff[jj+6];

1200 
m2
[
j
][3] = 
diff
[
jj
+3] + diff[jj+7];

1201 
m2
[
j
][4] = 
diff
[
jj
 ] - diff[jj+4];

1202 
m2
[
j
][5] = 
diff
[
jj
+1] - diff[jj+5];

1203 
m2
[
j
][6] = 
diff
[
jj
+2] - diff[jj+6];

1204 
m2
[
j
][7] = 
diff
[
jj
+3] - diff[jj+7];

1206 
m1
[
j
][0] = 
m2
[j][0] + m2[j][2];

1207 
m1
[
j
][1] = 
m2
[j][1] + m2[j][3];

1208 
m1
[
j
][2] = 
m2
[j][0] - m2[j][2];

1209 
m1
[
j
][3] = 
m2
[j][1] - m2[j][3];

1210 
m1
[
j
][4] = 
m2
[j][4] + m2[j][6];

1211 
m1
[
j
][5] = 
m2
[j][5] + m2[j][7];

1212 
m1
[
j
][6] = 
m2
[j][4] - m2[j][6];

1213 
m1
[
j
][7] = 
m2
[j][5] - m2[j][7];

1215 
m2
[
j
][0] = 
m1
[j][0] + m1[j][1];

1216 
m2
[
j
][1] = 
m1
[j][0] - m1[j][1];

1217 
m2
[
j
][2] = 
m1
[j][2] + m1[j][3];

1218 
m2
[
j
][3] = 
m1
[j][2] - m1[j][3];

1219 
m2
[
j
][4] = 
m1
[j][4] + m1[j][5];

1220 
m2
[
j
][5] = 
m1
[j][4] - m1[j][5];

1221 
m2
[
j
][6] = 
m1
[j][6] + m1[j][7];

1222 
m2
[
j
][7] = 
m1
[j][6] - m1[j][7];

1226 
i
=0; i < 8; i++)

1228 
m3
[0][
i
] = 
m2
[0][i] + m2[4][i];

1229 
m3
[1][
i
] = 
m2
[1][i] + m2[5][i];

1230 
m3
[2][
i
] = 
m2
[2][i] + m2[6][i];

1231 
m3
[3][
i
] = 
m2
[3][i] + m2[7][i];

1232 
m3
[4][
i
] = 
m2
[0][i] - m2[4][i];

1233 
m3
[5][
i
] = 
m2
[1][i] - m2[5][i];

1234 
m3
[6][
i
] = 
m2
[2][i] - m2[6][i];

1235 
m3
[7][
i
] = 
m2
[3][i] - m2[7][i];

1237 
m1
[0][
i
] = 
m3
[0][i] + m3[2][i];

1238 
m1
[1][
i
] = 
m3
[1][i] + m3[3][i];

1239 
m1
[2][
i
] = 
m3
[0][i] - m3[2][i];

1240 
m1
[3][
i
] = 
m3
[1][i] - m3[3][i];

1241 
m1
[4][
i
] = 
m3
[4][i] + m3[6][i];

1242 
m1
[5][
i
] = 
m3
[5][i] + m3[7][i];

1243 
m1
[6][
i
] = 
m3
[4][i] - m3[6][i];

1244 
m1
[7][
i
] = 
m3
[5][i] - m3[7][i];

1246 
m2
[0][
i
] = 
m1
[0][i] + m1[1][i];

1247 
m2
[1][
i
] = 
m1
[0][i] - m1[1][i];

1248 
m2
[2][
i
] = 
m1
[2][i] + m1[3][i];

1249 
m2
[3][
i
] = 
m1
[2][i] - m1[3][i];

1250 
m2
[4][
i
] = 
m1
[4][i] + m1[5][i];

1251 
m2
[5][
i
] = 
m1
[4][i] - m1[5][i];

1252 
m2
[6][
i
] = 
m1
[6][i] + m1[7][i];

1253 
m2
[7][
i
] = 
m1
[6][i] - m1[7][i];

1256 
i
 = 0; i < 8; i++)

1258 
j
 = 0; j < 8; j++)

1260 
iSumHad
 +ð
	`abs
(
m2
[
i
][
j
]);

1263 
iSumHad
 -ð
	`abs
(
m2
[0][0]);

1264 
iSumHad
 =(iSumHad+2)>>2;

1265 (
iSumHad
);

1266 
	}
}

1268 
IÁ
 
	gTEncCu
::
	$upd©eCtuD©aISliû
(
TComD©aCU
* 
pCtu
, 
IÁ
 
width
, IÁ 
height
)

1270 
IÁ
 
xBl
, 
yBl
;

1271 cÚ¡ 
IÁ
 
iBlkSize
 = 8;

1273 
P–
* 
pOrgIn™
 = 
pCtu
->
	`g‘Pic
()->
	`g‘PicYuvOrg
()->
	`g‘Addr
(
COMPONENT_Y
,…Ctu->
	`g‘CtuRsAddr
(), 0);

1274 
IÁ
 
iSŒideOrig
 = 
pCtu
->
	`g‘Pic
()->
	`g‘PicYuvOrg
()->
	`g‘SŒide
(
COMPONENT_Y
);

1275 
P–
 *
pOrg
;

1277 
IÁ
 
iSumHad
 = 0;

1278  
yBl
=0; (yBl+
iBlkSize
)<=
height
; yBl+= iBlkSize)

1280  
xBl
=0; (xBl+
iBlkSize
)<=
width
; xBl+= iBlkSize)

1282 
pOrg
 = 
pOrgIn™
 + 
iSŒideOrig
*
yBl
 + 
xBl
;

1283 
iSumHad
 +ð
	`xC®cHADs8x8_ISliû
(
pOrg
, 
iSŒideOrig
);

1286 (
iSumHad
);

1287 
	}
}

1294 
Void
 
	gTEncCu
::
xCheckRDCo¡M”ge2Nx2N
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
 
DEBUG_STRING_FN_DECLARE
(
sDebug
), 
BoÞ
 *
—¾yD‘eùiÚSkMode
 )

1296 
as£¹
Ð
½cTempCU
->
g‘Sliû
()->
g‘SliûTy³
(è!ð
I_SLICE
 );

1297 if(
g‘Fa¡D–Qp
())

1301 
TComMvF›ld
 
	gcMvF›ldNeighbours
[2 * 
MRG_MAX_NUM_CANDS
];

1302 
UCh¬
 
	guhIÁ”DœNeighbours
[
MRG_MAX_NUM_CANDS
];

1303 
IÁ
 
	gnumV®idM”geCªd
 = 0;

1304 cÚ¡ 
BoÞ
 
	gbT¿nsquªtBy·ssFÏg
 = 
½cTempCU
->
g‘CUT¿nsquªtBy·ss
(0);

1306  
UIÁ
 
	gui
 = 0; u˜< 
	g½cTempCU
->
g‘Sliû
()->
g‘MaxNumM”geCªd
(); ++ui )

1308 
	guhIÁ”DœNeighbours
[
ui
] = 0;

1310 
UCh¬
 
	guhD•th
 = 
½cTempCU
->
g‘D•th
( 0 );

1311 
	g½cTempCU
->
£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 0, 
uhD•th
 );

1312 #ià
MCTS_ENC_CHECK


1313 
UIÁ
 
	gnumS·tŸlM”geCªdid©es
 = 0;

1314 
	g½cTempCU
->
g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
 );

1316 
	g½cTempCU
->
g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
,
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
 );

1319 
IÁ
 
	gm”geCªdBufãr
[
MRG_MAX_NUM_CANDS
];

1320  
UIÁ
 
	gui
 = 0; u˜< 
	gnumV®idM”geCªd
; ++ui )

1322 
	gm”geCªdBufãr
[
ui
] = 0;

1324 #ià
MCTS_ENC_CHECK


1325 ià(
	gm_pcEncCfg
->
g‘TMCTSSEITžeCÚ¡¿št
(è&& 
	g½cTempCU
->
isLa¡CÞumnCTUInTže
())

1327 
	gnumV®idM”geCªd
 = 
numS·tŸlM”geCªdid©es
;

1331 
BoÞ
 
	gbe¡IsSk
 = 
çl£
;

1333 
UIÁ
 
	g™”©iÚ
;

1334 iàÐ
	g½cTempCU
->
isLos¦essCoded
(0))

1336 
	g™”©iÚ
 = 1;

1340 
	g™”©iÚ
 = 2;

1342 
DEBUG_STRING_NEW
(
be¡SŒ
)

1344  
UIÁ
 
	guiNoResidu®
 = 0; uiNoResidu® < 
	g™”©iÚ
; ++uiNoResidual )

1346  
UIÁ
 
	guiM”geCªd
 = 0; uiM”geCªd < 
	gnumV®idM”geCªd
; ++uiMergeCand )

1348 if(!(
	guiNoResidu®
==1 && 
m”geCªdBufãr
[
uiM”geCªd
]==1))

1350 ifÐ!(
be¡IsSk
 && 
uiNoResidu®
 == 0) )

1352 
DEBUG_STRING_NEW
(
tmpSŒ
)

1354 
½cTempCU
->
£tP»dModeSubP¬ts
Ð
MODE_INTER
, 0, 
uhD•th
 );

1355 
	g½cTempCU
->
£tCUT¿nsquªtBy·ssSubP¬ts
Ð
bT¿nsquªtBy·ssFÏg
, 0, 
uhD•th
 );

1356 
	g½cTempCU
->
£tChromaQpAdjSubP¬ts
Ð
bT¿nsquªtBy·ssFÏg
 ? 0 : 
m_cuChromaQpOff£tIdxPlus1
, 0, 
uhD•th
 );

1357 
	g½cTempCU
->
£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 0, 
uhD•th
 );

1358 
	g½cTempCU
->
£tM”geFÏgSubP¬ts
Ð
Œue
, 0, 0, 
uhD•th
 );

1359 
	g½cTempCU
->
£tM”geIndexSubP¬ts
Ð
uiM”geCªd
, 0, 0, 
uhD•th
 );

1360 
	g½cTempCU
->
£tIÁ”DœSubP¬ts
Ð
uhIÁ”DœNeighbours
[
uiM”geCªd
], 0, 0, 
uhD•th
 );

1361 
	g½cTempCU
->
g‘CUMvF›ld
Ð
REF_PIC_LIST_0
 )->
£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[0 + 2*
uiM”geCªd
], 
SIZE_2Nx2N
, 0, 0 );

1362 
	g½cTempCU
->
g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[1 + 2*
uiM”geCªd
], 
SIZE_2Nx2N
, 0, 0 );

1364 #ià
MCTS_ENC_CHECK


1365 iàÐ
	gm_pcEncCfg
->
g‘TMCTSSEITžeCÚ¡¿št
 (è&& (!(
	gm_pcP»dS—rch
->
checkTMùsMvp
(
½cTempCU
))))

1372 
	gm_pcP»dS—rch
->
mÙiÚCom³n§tiÚ
 ( 
½cTempCU
, 
m_µcP»dYuvTemp
[
uhD•th
] );

1374 
	gm_pcP»dS—rch
->
’codeResAndC®cRdIÁ”CU
Ð
½cTempCU
,

1375 
m_µcOrigYuv
 [
uhD•th
],

1376 
m_µcP»dYuvTemp
[
uhD•th
],

1377 
m_µcResiYuvTemp
[
uhD•th
],

1378 
m_µcResiYuvBe¡
[
uhD•th
],

1379 
m_µcRecoYuvTemp
[
uhD•th
],

1380 (
uiNoResidu®
 !ð0è
DEBUG_STRING_PASS_INTO
(
tmpSŒ
) );

1382 #ià
DEBUG_STRING


1383 
DebugIÁ”P»dResiReco
(
tmpSŒ
, *(
m_µcP»dYuvTemp
[
uhD•th
]), *(
m_µcResiYuvBe¡
[uhD•th]), *(
m_µcRecoYuvTemp
[uhD•th]), 
DebugSŒšgG‘P»dModeMask
(
½cTempCU
->
g‘P»diùiÚMode
(0)));

1386 ià((
	guiNoResidu®
 =ð0è&& (
½cTempCU
->
g‘QtRoÙCbf
(0) == 0))

1389 
m”geCªdBufãr
[
uiM”geCªd
] = 1;

1392 
IÁ
 
	gÜgQP
 = 
½cTempCU
->
g‘QP
( 0 );

1393 
xCheckDQP
Ð
½cTempCU
 );

1394 
xCheckBe¡Mode
(
½cBe¡CU
, 
½cTempCU
, 
uhD•th
 
DEBUG_STRING_PASS_INTO
(
be¡SŒ
èDEBUG_STRING_PASS_INTO(
tmpSŒ
));

1396 
	g½cTempCU
->
š™E¡D©a
Ð
uhD•th
, 
ÜgQP
, 
bT¿nsquªtBy·ssFÏg
 );

1398 ifÐ
	gm_pcEncCfg
->
g‘U£Fa¡DecisiÚFÜM”ge
(è&& !
	gbe¡IsSk
 )

1400 
	gbe¡IsSk
 = 
½cBe¡CU
->
g‘QtRoÙCbf
(0) == 0;

1406 if(
	guiNoResidu®
 =ð0 && 
m_pcEncCfg
->
g‘U£E¬lySkD‘eùiÚ
())

1408 if(
½cBe¡CU
->
g‘QtRoÙCbf
( 0 ) == 0)

1410 ifÐ
½cBe¡CU
->
g‘M”geFÏg
( 0 ))

1412 *
—¾yD‘eùiÚSkMode
 = 
Œue
;

1414 if(
	gm_pcEncCfg
->
g‘MÙiÚE¡im©iÚS—rchM‘hod
(è!ð
MESEARCH_SELECTIVE
)

1416 
IÁ
 
absouÉe_MV
=0;

1417  
UIÁ
 
	guiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

1419 iàÐ
	g½cBe¡CU
->
g‘Sliû
()->
g‘NumRefIdx
Ð
RefPicLi¡
Ð
uiRefLi¡Idx
 ) ) > 0 )

1421 
TComCUMvF›ld
* 
	gpcCUMvF›ld
 = 
½cBe¡CU
->
g‘CUMvF›ld
(
RefPicLi¡
Ð
uiRefLi¡Idx
 ));

1422 
IÁ
 
	giHÜ
 = 
pcCUMvF›ld
->
g‘Mvd
Ð0 ).
g‘AbsHÜ
();

1423 
IÁ
 
	giV”
 = 
pcCUMvF›ld
->
g‘Mvd
Ð0 ).
g‘AbsV”
();

1424 
	gabsouÉe_MV
+=
iHÜ
+
iV”
;

1428 if(
	gabsouÉe_MV
 == 0)

1430 *
—¾yD‘eùiÚSkMode
 = 
Œue
;

1436 
DEBUG_STRING_APPEND
(
sDebug
, 
be¡SŒ
)

1440 #ià
AMP_MRG


1441 
Void
 
	gTEncCu
::
xCheckRDCo¡IÁ”
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
P¬tSize
 
eP¬tSize
 
DEBUG_STRING_FN_DECLARE
(
sDebug
), 
BoÞ
 
bU£MRG
)

1443 
Void
 
	gTEncCu
::
	$xCheckRDCo¡IÁ”
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
P¬tSize
 
eP¬tSize
 )

1446 
	`DEBUG_STRING_NEW
(
sTe¡
)

1448 if(
	`g‘Fa¡D–Qp
())

1450 cÚ¡ 
TComSPS
 &
¥s
=*(
½cTempCU
->
	`g‘Sliû
()->
	`g‘SPS
());

1451 cÚ¡ 
UIÁ
 
ç¡D–QPCuMaxSize
 = 
	`Cl3
(
¥s
.
	`g‘MaxCUHeight
()>>(¥s.
	`g‘Log2DiffMaxMšCodšgBlockSize
()), sps.getMaxCUHeight(), 32u);

1452 if(
eP¬tSize
 !ð
SIZE_2Nx2N
 || 
½cTempCU
->
	`g‘Width
Ð0 ) > 
ç¡D–QPCuMaxSize
)

1459 
UCh¬
 
uhD•th
 = 
½cTempCU
->
	`g‘D•th
( 0 );

1461 
½cTempCU
->
	`£tP¬tSizeSubP¬ts
 ( 
eP¬tSize
, 0, 
uhD•th
 );

1462 
½cTempCU
->
	`£tP»dModeSubP¬ts
 ( 
MODE_INTER
, 0, 
uhD•th
 );

1463 
½cTempCU
->
	`£tChromaQpAdjSubP¬ts
Ð½cTempCU->
	`g‘CUT¿nsquªtBy·ss
(0è? 0 : 
m_cuChromaQpOff£tIdxPlus1
, 0, 
uhD•th
 );

1465 #ià
MCTS_ENC_CHECK


1466 
½cTempCU
->
	`£tTMùsMvpIsV®id
(
Œue
);

1469 #ià
AMP_MRG


1470 
½cTempCU
->
	`£tM”geAMP
 (
Œue
);

1471 
m_pcP»dS—rch
->
	`´edIÁ”S—rch
 ( 
½cTempCU
, 
m_µcOrigYuv
[
uhD•th
], 
m_µcP»dYuvTemp
[uhD•th], 
m_µcResiYuvTemp
[uhD•th], 
m_µcRecoYuvTemp
[uhD•th] 
	`DEBUG_STRING_PASS_INTO
(
sTe¡
), 
çl£
, 
bU£MRG
 );

1473 
m_pcP»dS—rch
->
	`´edIÁ”S—rch
 ( 
½cTempCU
, 
m_µcOrigYuv
[
uhD•th
], 
m_µcP»dYuvTemp
[uhD•th], 
m_µcResiYuvTemp
[uhD•th], 
m_µcRecoYuvTemp
[uhDepth] );

1476 #ià
AMP_MRG


1477 iàÐ!
½cTempCU
->
	`g‘M”geAMP
() )

1483 #ià
MCTS_ENC_CHECK


1484 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& (!
½cTempCU
->
	`g‘TMùsMvpIsV®id
()))

1490 
m_pcP»dS—rch
->
	`’codeResAndC®cRdIÁ”CU
Ð
½cTempCU
, 
m_µcOrigYuv
[
uhD•th
], 
m_µcP»dYuvTemp
[uhD•th], 
m_µcResiYuvTemp
[uhD•th], 
m_µcResiYuvBe¡
[uhD•th], 
m_µcRecoYuvTemp
[uhD•th], 
çl£
 
	`DEBUG_STRING_PASS_INTO
(
sTe¡
) );

1491 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cTempCU->
	`g‘TÙ®B™s
(),„pcTempCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

1493 #ià
DEBUG_STRING


1494 
	`DebugIÁ”P»dResiReco
(
sTe¡
, *(
m_µcP»dYuvTemp
[
uhD•th
]), *(
m_µcResiYuvBe¡
[uhD•th]), *(
m_µcRecoYuvTemp
[uhD•th]), 
	`DebugSŒšgG‘P»dModeMask
(
½cTempCU
->
	`g‘P»diùiÚMode
(0)));

1497 
	`xCheckDQP
Ð
½cTempCU
 );

1498 
	`xCheckBe¡Mode
(
½cBe¡CU
, 
½cTempCU
, 
uhD•th
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
èDEBUG_STRING_PASS_INTO(
sTe¡
));

1499 
	}
}

1501 
Void
 
	gTEncCu
::
xCheckRDCo¡IÁ¿
Ð
TComD©aCU
 *&
½cBe¡CU
,

1502 
TComD©aCU
 *&
½cTempCU
,

1503 
P¬tSize
 
eSize


1504 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
) )

1506 
	`DEBUG_STRING_NEW
(
sTe¡
)

1508 if(
	`g‘Fa¡D–Qp
())

1510 cÚ¡ 
TComSPS
 &
¥s
=*(
½cTempCU
->
	`g‘Sliû
()->
	`g‘SPS
());

1511 cÚ¡ 
UIÁ
 
ç¡D–QPCuMaxSize
 = 
	`Cl3
(
¥s
.
	`g‘MaxCUHeight
()>>(¥s.
	`g‘Log2DiffMaxMšCodšgBlockSize
()), sps.getMaxCUHeight(), 32u);

1512 if(
½cTempCU
->
	`g‘Width
Ð0 ) > 
ç¡D–QPCuMaxSize
)

1518 
UIÁ
 
uiD•th
 = 
½cTempCU
->
	`g‘D•th
( 0 );

1520 
½cTempCU
->
	`£tSkFÏgSubP¬ts
Ð
çl£
, 0, 
uiD•th
 );

1522 
½cTempCU
->
	`£tP¬tSizeSubP¬ts
Ð
eSize
, 0, 
uiD•th
 );

1523 
½cTempCU
->
	`£tP»dModeSubP¬ts
Ð
MODE_INTRA
, 0, 
uiD•th
 );

1524 
½cTempCU
->
	`£tChromaQpAdjSubP¬ts
Ð½cTempCU->
	`g‘CUT¿nsquªtBy·ss
(0è? 0 : 
m_cuChromaQpOff£tIdxPlus1
, 0, 
uiD•th
 );

1526 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE];

1528 
m_pcP»dS—rch
->
	`e¡IÁ¿P»dLumaQT
Ð
½cTempCU
, 
m_µcOrigYuv
[
uiD•th
], 
m_µcP»dYuvTemp
[uiD•th], 
m_µcResiYuvTemp
[uiD•th], 
m_µcRecoYuvTemp
[uiD•th], 
»siLuma
 
	`DEBUG_STRING_PASS_INTO
(
sTe¡
) );

1530 
m_µcRecoYuvTemp
[
uiD•th
]->
	`cÝyToPicCompÚ’t
(
COMPONENT_Y
, 
½cTempCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
(),„pcTempCU->
	`g‘CtuRsAddr
(),„pcTempCU->
	`g‘ZÜd”IdxInCtu
() );

1532 ià(
½cBe¡CU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()!=
CHROMA_400
)

1534 
m_pcP»dS—rch
->
	`e¡IÁ¿P»dChromaQT
Ð
½cTempCU
, 
m_µcOrigYuv
[
uiD•th
], 
m_µcP»dYuvTemp
[uiD•th], 
m_µcResiYuvTemp
[uiD•th], 
m_µcRecoYuvTemp
[uiD•th], 
»siLuma
 
	`DEBUG_STRING_PASS_INTO
(
sTe¡
) );

1537 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

1539 iàÐ
½cTempCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

1541 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
Ð
½cTempCU
, 0, 
Œue
 );

1544 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
 ( 
½cTempCU
, 0, 
Œue
 );

1545 
m_pcEÁrÝyCod”
->
	`’codeP»dMode
Ð
½cTempCU
, 0, 
Œue
 );

1546 
m_pcEÁrÝyCod”
->
	`’codeP¬tSize
Ð
½cTempCU
, 0, 
uiD•th
, 
Œue
 );

1547 
m_pcEÁrÝyCod”
->
	`’codeP»dInfo
Ð
½cTempCU
, 0 );

1548 
m_pcEÁrÝyCod”
->
	`’codeIPCMInfo
(
½cTempCU
, 0, 
Œue
 );

1551 
BoÞ
 
bCodeDQP
 = 
	`g‘dQPFÏg
();

1552 
BoÞ
 
codeChromaQpAdjFÏg
 = 
	`g‘CodeChromaQpAdjFÏg
();

1553 
m_pcEÁrÝyCod”
->
	`’codeCÛff
Ð
½cTempCU
, 0, 
uiD•th
, 
bCodeDQP
, 
codeChromaQpAdjFÏg
 );

1554 
	`£tCodeChromaQpAdjFÏg
Ð
codeChromaQpAdjFÏg
 );

1555 
	`£tdQPFÏg
Ð
bCodeDQP
 );

1557 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_TEMP_BEST
]);

1559 
½cTempCU
->
	`g‘TÙ®B™s
(èð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

1560 
½cTempCU
->
	`g‘TÙ®Bšs
(èð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

1561 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cTempCU->
	`g‘TÙ®B™s
(),„pcTempCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

1563 
	`xCheckDQP
Ð
½cTempCU
 );

1565 
	`xCheckBe¡Mode
(
½cBe¡CU
, 
½cTempCU
, 
uiD•th
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
èDEBUG_STRING_PASS_INTO(
sTe¡
));

1566 
	}
}

1576 
Void
 
	gTEncCu
::
	$xCheckIÁ¿PCM
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
 )

1578 if(
	`g‘Fa¡D–Qp
())

1580 cÚ¡ 
TComSPS
 &
¥s
=*(
½cTempCU
->
	`g‘Sliû
()->
	`g‘SPS
());

1581 cÚ¡ 
UIÁ
 
ç¡D–QPCuMaxPCMSize
 = 
	`Cl3
((UIÁ)1<<
¥s
.
	`g‘PCMLog2MšSize
(), (UIÁ)1<<¥s.
	`g‘PCMLog2MaxSize
(), 32u);

1582 ià(
½cTempCU
->
	`g‘Width
Ð0 ) > 
ç¡D–QPCuMaxPCMSize
)

1588 
UIÁ
 
uiD•th
 = 
½cTempCU
->
	`g‘D•th
( 0 );

1590 
½cTempCU
->
	`£tSkFÏgSubP¬ts
Ð
çl£
, 0, 
uiD•th
 );

1592 
½cTempCU
->
	`£tIPCMFÏg
(0, 
Œue
);

1593 
½cTempCU
->
	`£tIPCMFÏgSubP¬ts
 (
Œue
, 0,„pcTempCU->
	`g‘D•th
(0));

1594 
½cTempCU
->
	`£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 0, 
uiD•th
 );

1595 
½cTempCU
->
	`£tP»dModeSubP¬ts
Ð
MODE_INTRA
, 0, 
uiD•th
 );

1596 
½cTempCU
->
	`£tTrIdxSubP¬ts
 ( 0, 0, 
uiD•th
 );

1597 
½cTempCU
->
	`£tChromaQpAdjSubP¬ts
Ð½cTempCU->
	`g‘CUT¿nsquªtBy·ss
(0è? 0 : 
m_cuChromaQpOff£tIdxPlus1
, 0, 
uiD•th
 );

1599 
m_pcP»dS—rch
->
	`IPCMS—rch
Ð
½cTempCU
, 
m_µcOrigYuv
[
uiD•th
], 
m_µcP»dYuvTemp
[uiD•th], 
m_µcResiYuvTemp
[uiD•th], 
m_µcRecoYuvTemp
[uiDepth]);

1601 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
]);

1603 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

1605 iàÐ
½cTempCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

1607 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
Ð
½cTempCU
, 0, 
Œue
 );

1610 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
 ( 
½cTempCU
, 0, 
Œue
 );

1611 
m_pcEÁrÝyCod”
->
	`’codeP»dMode
 ( 
½cTempCU
, 0, 
Œue
 );

1612 
m_pcEÁrÝyCod”
->
	`’codeP¬tSize
 ( 
½cTempCU
, 0, 
uiD•th
, 
Œue
 );

1613 
m_pcEÁrÝyCod”
->
	`’codeIPCMInfo
 ( 
½cTempCU
, 0, 
Œue
 );

1615 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_TEMP_BEST
]);

1617 
½cTempCU
->
	`g‘TÙ®B™s
(èð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

1618 
½cTempCU
->
	`g‘TÙ®Bšs
(èð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

1619 
½cTempCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð½cTempCU->
	`g‘TÙ®B™s
(),„pcTempCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

1621 
	`xCheckDQP
Ð
½cTempCU
 );

1622 
	`DEBUG_STRING_NEW
(
a
)

1623 
	`DEBUG_STRING_NEW
(
b
)

1624 
	`xCheckBe¡Mode
(
½cBe¡CU
, 
½cTempCU
, 
uiD•th
 
	`DEBUG_STRING_PASS_INTO
(
a
èDEBUG_STRING_PASS_INTO(
b
));

1625 
	}
}

1632 
Void
 
	gTEncCu
::
xCheckBe¡Mode
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
UIÁ
 
uiD•th
 
	$DEBUG_STRING_FN_DECLARE
(
sP¬’t
è
	$DEBUG_STRING_FN_DECLARE
(
sTe¡
è
	$DEBUG_STRING_PASS_INTO
(
BoÞ
 
bAddSizeInfo
) )

1634 ifÐ
½cTempCU
->
	`g‘TÙ®Co¡
(è< 
½cBe¡CU
->getTotalCost() )

1636 
TComYuv
* 
pcYuv
;

1638 
TComD©aCU
* 
pcCU
 = 
½cBe¡CU
;

1639 
½cBe¡CU
 = 
½cTempCU
;

1640 
½cTempCU
 = 
pcCU
;

1643 
pcYuv
 = 
m_µcP»dYuvBe¡
[
uiD•th
];

1644 
m_µcP»dYuvBe¡
[
uiD•th
] = 
m_µcP»dYuvTemp
[uiDepth];

1645 
m_µcP»dYuvTemp
[
uiD•th
] = 
pcYuv
;

1648 
pcYuv
 = 
m_µcRecoYuvBe¡
[
uiD•th
];

1649 
m_µcRecoYuvBe¡
[
uiD•th
] = 
m_µcRecoYuvTemp
[uiDepth];

1650 
m_µcRecoYuvTemp
[
uiD•th
] = 
pcYuv
;

1652 
pcYuv
 = 
NULL
;

1653 
pcCU
 = 
NULL
;

1656 
m_µpcRDSbacCod”
[
uiD•th
][
CI_TEMP_BEST
]->
	`¡Üe
(m_µpcRDSbacCod”[uiD•th][
CI_NEXT_BEST
]);

1659 #ià
DEBUG_STRING


1660 
	`DEBUG_STRING_SWAP
(
sP¬’t
, 
sTe¡
)

1661 cÚ¡ 
P»dMode
 
´edMode
=
½cBe¡CU
->
	`g‘P»diùiÚMode
(0);

1662 ià((
DebugO±iÚLi¡
::
DebugSŒšg_SŒuùu»
.
	`g‘IÁ
()&
	`DebugSŒšgG‘P»dModeMask
(
´edMode
)è&& 
bAddSizeInfo
)

1664 
¡d
::
¡ršg¡»am
 
	`ss
(¡ršg¡»am::
out
);

1665 
ss
 <<"###: " << (
´edMode
==
MODE_INTRA
?"IÁ¿ ":"IÁ” "è<< 
·¹SizeToSŒšg
[
½cBe¡CU
->
	`g‘P¬t™iÚSize
(0)] << " CU‡ˆ" <<„pcBe¡CU->
	`g‘CUP–X
(è<< ", " <<„pcBe¡CU->
	`g‘CUP–Y
(è<< " width=" << 
	`UIÁ
ÔpcBe¡CU->
	`g‘Width
(0)è<< 
¡d
::
’dl
;

1666 
sP¬’t
+=
ss
.
	`¡r
();

1670 
	}
}

1672 
Void
 
	gTEncCu
::
	$xCheckDQP
Ð
TComD©aCU
* 
pcCU
 )

1674 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
( 0 );

1676 cÚ¡ 
TComPPS
 &
µs
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
());

1677 iàÐ
µs
.
	`g‘U£DQP
(è&& 
uiD•th
 <ðµs.
	`g‘MaxCuDQPD•th
() )

1679 iàÐ
pcCU
->
	`g‘QtRoÙCbf
( 0) )

1681 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

1682 
m_pcEÁrÝyCod”
->
	`’codeQP
Ð
pcCU
, 0, 
çl£
 );

1683 
pcCU
->
	`g‘TÙ®B™s
(è+ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

1684 
pcCU
->
	`g‘TÙ®Bšs
(è+ð((
TEncBšCABAC
 *)((
TEncSbac
*)
m_pcEÁrÝyCod”
->
m_pcEÁrÝyCod”If
)->
	`g‘EncBšIf
())->
	`g‘BšsCoded
();

1685 
pcCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
ÐpcCU->
	`g‘TÙ®B™s
(),…cCU->
	`g‘TÙ®Di¡ÜtiÚ
() );

1689 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘RefQP
Ð0 ), 0, 
uiD•th
 );

1692 
	}
}

1694 
Void
 
	gTEncCu
::
	$xCÝyAMVPInfo
 (
AMVPInfo
* 
pSrc
, AMVPInfo* 
pD¡
)

1696 
pD¡
->
iN
 = 
pSrc
->iN;

1697 
IÁ
 
i
 = 0; i < 
pSrc
->
iN
; i++)

1699 
pD¡
->
m_acMvCªd
[
i
] = 
pSrc
->m_acMvCand[i];

1701 
	}
}

1702 
Void
 
	gTEncCu
::
	$xCÝyYuv2Pic
(
TComPic
* 
½cPic
, 
UIÁ
 
uiCUAddr
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiSrcD•th
 )

1704 
UIÁ
 
uiAbsP¬tIdxInRa¡”
 = 
g_auiZsÿnToRa¡”
[
uiAbsP¬tIdx
];

1705 
UIÁ
 
uiSrcBlkWidth
 = 
½cPic
->
	`g‘NumP¬tInCtuWidth
(è>> (
uiSrcD•th
);

1706 
UIÁ
 
uiBlkWidth
 = 
½cPic
->
	`g‘NumP¬tInCtuWidth
(è>> (
uiD•th
);

1707 
UIÁ
 
uiP¬tIdxX
 = ( ( 
uiAbsP¬tIdxInRa¡”
 % 
½cPic
->
	`g‘NumP¬tInCtuWidth
(èè% 
uiSrcBlkWidth
è/ 
uiBlkWidth
;

1708 
UIÁ
 
uiP¬tIdxY
 = ( ( 
uiAbsP¬tIdxInRa¡”
 / 
½cPic
->
	`g‘NumP¬tInCtuWidth
(èè% 
uiSrcBlkWidth
è/ 
uiBlkWidth
;

1709 
UIÁ
 
uiP¬tIdx
 = 
uiP¬tIdxY
 * ( 
uiSrcBlkWidth
 / 
uiBlkWidth
 ) + 
uiP¬tIdxX
;

1710 
m_µcRecoYuvBe¡
[
uiSrcD•th
]->
	`cÝyToPicYuv
Ð
½cPic
->
	`g‘PicYuvRec
 (), 
uiCUAddr
, 
uiAbsP¬tIdx
, 
uiD•th
 - uiSrcD•th, 
uiP¬tIdx
);

1712 
m_µcP»dYuvBe¡
[
uiSrcD•th
]->
	`cÝyToPicYuv
Ð
½cPic
->
	`g‘PicYuvP»d
 (), 
uiCUAddr
, 
uiAbsP¬tIdx
, 
uiD•th
 - uiSrcD•th, 
uiP¬tIdx
);

1713 
	}
}

1715 
Void
 
	gTEncCu
::
	$xCÝyYuv2Tmp
Ð
UIÁ
 
uiP¬tUn™Idx
, UIÁ 
uiNextD•th
 )

1717 
UIÁ
 
uiCu¼D•th
 = 
uiNextD•th
 - 1;

1718 
m_µcRecoYuvBe¡
[
uiNextD•th
]->
	`cÝyToP¬tYuv
Ð
m_µcRecoYuvTemp
[
uiCu¼D•th
], 
uiP¬tUn™Idx
 );

1719 
m_µcP»dYuvBe¡
[
uiNextD•th
]->
	`cÝyToP¬tYuv
Ðm_µcP»dYuvBe¡[
uiCu¼D•th
], 
uiP¬tUn™Idx
);

1720 
	}
}

1726 
Void
 
	gTEncCu
::
	$xFžlPCMBufãr
 ( 
TComD©aCU
* 
pCU
, 
TComYuv
* 
pOrgYuv
 )

1728 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
pCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

1729 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
);

1730 
UIÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
numb”V®idCompÚ’ts
; componentIndex++)

1732 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

1734 cÚ¡ 
UIÁ
 
width
 = 
pCU
->
	`g‘Width
(0è>> 
	`g‘CompÚ’tSÿËX
(
compÚ’t
, 
fÜm©
);

1735 cÚ¡ 
UIÁ
 
height
 = 
pCU
->
	`g‘Height
(0è>> 
	`g‘CompÚ’tSÿËY
(
compÚ’t
, 
fÜm©
);

1737 
P–
 *
sourû
 = 
pOrgYuv
->
	`g‘Addr
(
compÚ’t
, 0, 
width
);

1738 
P–
 *
de¡š©iÚ
 = 
pCU
->
	`g‘PCMSam¶e
(
compÚ’t
);

1740 cÚ¡ 
UIÁ
 
sourûSŒide
 = 
pOrgYuv
->
	`g‘SŒide
(
compÚ’t
);

1742 
IÁ
 
lše
 = 0;†š< 
height
;†ine++)

1744 
IÁ
 
cÞumn
 = 0; cÞumÀ< 
width
; column++)

1746 
de¡š©iÚ
[
cÞumn
] = 
sourû
[column];

1749 
sourû
 +ð
sourûSŒide
;

1750 
de¡š©iÚ
 +ð
width
;

1753 
	}
}

1755 #ià
ADAPTIVE_QP_SELECTION


1758 
IÁ
 
	gTEncCu
::
	$xTuCÞËùARLSts
(
TCÛff
* 
½cCÛff
, TCÛff* 
½cA¾CÛff
, 
IÁ
 
NumCÛffInCU
, 
DoubË
* 
cSum
, 
UIÁ
* 
numSam¶es
 )

1760  
IÁ
 
n
 = 0;‚ < 
NumCÛffInCU
;‚++ )

1762 
TCÛff
 
u
 = 
	`abs
Ð
½cCÛff
[ 
n
 ] );

1763 
TCÛff
 
absc
 = 
½cA¾CÛff
[ 
n
 ];

1765 ifÐ
u
 != 0 )

1767 ifÐ
u
 < 
LEVEL_RANGE
 )

1769 
cSum
[ 
u
 ] +ðÐ
DoubË
 )
absc
;

1770 
numSam¶es
[ 
u
 ]++;

1774 
cSum
[ 
LEVEL_RANGE
 ] +ðÐ
DoubË
 )
absc
 - ( DoubË )Ð
u
 << 
ARL_C_PRECISION
 );

1775 
numSam¶es
[ 
LEVEL_RANGE
 ]++;

1781 
	}
}

1784 
Void
 
	gTEncCu
::
	$xCtuCÞËùARLSts
(
TComD©aCU
* 
pCtu
 )

1786 
DoubË
 
cSum
[ 
LEVEL_RANGE
 + 1 ];

1787 
UIÁ
 
numSam¶es
[ 
LEVEL_RANGE
 + 1 ];

1789 
TCÛff
* 
pCÛffY
 = 
pCtu
->
	`g‘CÛff
(
COMPONENT_Y
);

1790 
TCÛff
* 
pA¾CÛffY
 = 
pCtu
->
	`g‘A¾CÛff
(
COMPONENT_Y
);

1791 cÚ¡ 
TComSPS
 &
¥s
 = *(
pCtu
->
	`g‘Sliû
()->
	`g‘SPS
());

1793 cÚ¡ 
UIÁ
 
uiMšCUWidth
 = 
¥s
.
	`g‘MaxCUWidth
(è>> sps.
	`g‘MaxTÙ®CUD•th
();

1794 cÚ¡ 
UIÁ
 
uiMšNumCÛffInCU
 = 1 << 
uiMšCUWidth
;

1796 
	`mem£t
Ð
cSum
, 0, Ð
DoubË
 )*(
LEVEL_RANGE
+1) );

1797 
	`mem£t
Ð
numSam¶es
, 0, Ð
UIÁ
 )*(
LEVEL_RANGE
+1) );

1800 
IÁ
 
i
 = 0; i < 
pCtu
->
	`g‘TÙ®NumP¬t
(); i ++ )

1802 
UIÁ
 
uiTrIdx
 = 
pCtu
->
	`g‘T¿nsfÜmIdx
(
i
);

1804 if(
pCtu
->
	`isIÁ”
(
i
è&&…Ctu->
	`g‘Cbf
Ði, 
COMPONENT_Y
, 
uiTrIdx
 ) )

1806 
	`xTuCÞËùARLSts
(
pCÛffY
, 
pA¾CÛffY
, 
uiMšNumCÛffInCU
, 
cSum
, 
numSam¶es
);

1809 
pCÛffY
 +ð
uiMšNumCÛffInCU
;

1810 
pA¾CÛffY
 +ð
uiMšNumCÛffInCU
;

1813 
IÁ
 
u
=1; u<
LEVEL_RANGE
;u++)

1815 
m_pcTrQuªt
->
	`g‘SliûSumC
()[
u
] +ð
cSum
[ u ] ;

1816 
m_pcTrQuªt
->
	`g‘SliûNSam¶es
()[
u
] +ð
numSam¶es
[ u ] ;

1818 
m_pcTrQuªt
->
	`g‘SliûSumC
()[
LEVEL_RANGE
] +ð
cSum
[ LEVEL_RANGE ] ;

1819 
m_pcTrQuªt
->
	`g‘SliûNSam¶es
()[
LEVEL_RANGE
] +ð
numSam¶es
[ LEVEL_RANGE ] ;

1820 
	}
}

	@source/Lib/TLibEncoder/TEncCu.h

38 #iâdeà
__TENCCU__


39 
	#__TENCCU__


	)

42 
	~"TLibCommÚ/CommÚDef.h
"

43 
	~"TLibCommÚ/TComYuv.h
"

44 
	~"TLibCommÚ/TComP»diùiÚ.h
"

45 
	~"TLibCommÚ/TComTrQuªt.h
"

46 
	~"TLibCommÚ/TComB™CouÁ”.h
"

47 
	~"TLibCommÚ/TComD©aCU.h
"

49 
	~"TEncEÁrÝy.h
"

50 
	~"TEncS—rch.h
"

51 
	~"TEncR©eCŒl.h
"

55 
þass
 
	gTEncTÝ
;

56 
þass
 
	gTEncSbac
;

57 
þass
 
	gTEncCavlc
;

58 
þass
 
	gTEncSliû
;

65 þas 
	cTEncCu


67 
	m´iv©e
:

69 
TComD©aCU
** 
m_µcBe¡CU
;

70 
TComD©aCU
** 
	mm_µcTempCU
;

71 
UCh¬
 
	mm_uhTÙ®D•th
;

73 
TComYuv
** 
	mm_µcP»dYuvBe¡
;

74 
TComYuv
** 
	mm_µcResiYuvBe¡
;

75 
TComYuv
** 
	mm_µcRecoYuvBe¡
;

76 
TComYuv
** 
	mm_µcP»dYuvTemp
;

77 
TComYuv
** 
	mm_µcResiYuvTemp
;

78 
TComYuv
** 
	mm_µcRecoYuvTemp
;

79 
TComYuv
** 
	mm_µcOrigYuv
;

82 
BoÞ
 
	mm_bEncodeDQP
;

83 
BoÞ
 
	mm_bFa¡D–QP
;

84 
BoÞ
 
	mm_¡žlToCodeChromaQpOff£tFÏg
;

85 
IÁ
 
	mm_cuChromaQpOff£tIdxPlus1
;

86 
IÁ
 
	mm_lumaLev–ToD–QPLUT
[
LUMA_LEVEL_TO_DQP_LUT_MAXSIZE
];

87 
IÁ
 
	mm_lumaQPOff£t
;

88 
TEncSliû
* 
	mm_pcSliûEncod”
;

91 
TEncCfg
* 
	mm_pcEncCfg
;

92 
TEncS—rch
* 
	mm_pcP»dS—rch
;

93 
TComTrQuªt
* 
	mm_pcTrQuªt
;

94 
TComRdCo¡
* 
	mm_pcRdCo¡
;

96 
TEncEÁrÝy
* 
	mm_pcEÁrÝyCod”
;

97 
TEncBšCABAC
* 
	mm_pcBšCABAC
;

100 
TEncSbac
*** 
	mm_µpcRDSbacCod”
;

101 
TEncSbac
* 
	mm_pcRDGoOnSbacCod”
;

102 
TEncR©eCŒl
* 
	mm_pcR©eCŒl
;

104 
	mpublic
:

106 
Void
 
š™
 ( 
TEncTÝ
* 
pcEncTÝ
 );

108 
Void
 
	$£tSliûEncod”
Ð
TEncSliû
* 
pSliûEncod”
 ) { 
m_pcSliûEncod”
 =…SliceEncoder; }

109 
TEncSliû
* 
	$g‘SliûEncod”
(è{  
m_pcSliûEncod”
; 
	}
}

110 
Void
 
š™LumaD–QpLUT
();

111 
IÁ
 
ÿlcuÏ‹LumaDQP
Ð
TComD©aCU
 *
pCU
, cÚ¡ 
UIÁ
 
absP¬tIdx
, cÚ¡ 
TComYuv
 * 
pOrgYuv
 );

114 
Void
 
ü—‹
 ( 
UCh¬
 
uhTÙ®D•th
, 
UIÁ
 
iMaxWidth
, UIÁ 
iMaxHeight
, 
ChromaFÜm©
 
chromaFÜm©
 );

117 
Void
 
de¡roy
 ();

120 
Void
 
com´essCtu
 ( 
TComD©aCU
* 
pCtu
 );

123 
Void
 
’codeCtu
 ( 
TComD©aCU
* 
pCtu
 );

125 
IÁ
 
upd©eCtuD©aISliû
 ( 
TComD©aCU
* 
pCtu
, IÁ 
width
, IÁ 
height
 );

127 
Void
 
	$£tFa¡D–Qp
 ( 
BoÞ
 
b
è{ 
m_bFa¡D–QP
 = b; 
	}
}

129 
	g´Ùeùed
:

130 
Void
 
fšishCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

131 #ià
AMP_ENC_SPEEDUP


132 
Void
 
xCom´essCU
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, cÚ¡ 
UIÁ
 
uiD•th
 
DEBUG_STRING_FN_DECLARE
(
sDebug
), 
P¬tSize
 
eP¬’tP¬tSize
 = 
NUMBER_OF_PART_SIZES
 );

134 
Void
 
xCom´essCU
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, cÚ¡ 
UIÁ
 
uiD•th
 );

136 
Void
 
xEncodeCU
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

138 
IÁ
 
xCompu‹QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiD•th
 );

139 
Void
 
xCheckBe¡Mode
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
UIÁ
 
uiD•th
 
	$DEBUG_STRING_FN_DECLARE
(
sP¬’t
è
	$DEBUG_STRING_FN_DECLARE
(
sTe¡
è
	`DEBUG_STRING_PASS_INTO
(
BoÞ
 
bAddSizeInfo
=
Œue
));

141 
Void
 
	`xCheckRDCo¡M”ge2Nx2N
Ð
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
 
	`DEBUG_STRING_FN_DECLARE
(
sDebug
), 
BoÞ
 *
—¾yD‘eùiÚSkMode
 );

143 #ià
AMP_MRG


144 
Void
 
	`xCheckRDCo¡IÁ”
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
P¬tSize
 
eP¬tSize
 
	`DEBUG_STRING_FN_DECLARE
(
sDebug
), 
BoÞ
 
bU£MRG
 = 
çl£
 );

146 
Void
 
	`xCheckRDCo¡IÁ”
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
, 
P¬tSize
 
eP¬tSize
 );

149 
Void
 
	`xCheckRDCo¡IÁ¿
 ( 
TComD©aCU
 *&
½cBe¡CU
,

150 
TComD©aCU
 *&
½cTempCU
,

151 
P¬tSize
 
eP¬tSize


152 
	`DEBUG_STRING_FN_DECLARE
(
sDebug
)

155 
Void
 
	`xCheckDQP
 ( 
TComD©aCU
* 
pcCU
 );

157 
Void
 
	`xCheckIÁ¿PCM
 ( 
TComD©aCU
*& 
½cBe¡CU
, TComD©aCU*& 
½cTempCU
 );

158 
Void
 
	`xCÝyAMVPInfo
 ( 
AMVPInfo
* 
pSrc
, AMVPInfo* 
pD¡
 );

159 
Void
 
	`xCÝyYuv2Pic
 (
TComPic
* 
½cPic
, 
UIÁ
 
uiCUAddr
, UIÁ 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, UIÁ 
uiSrcD•th
 );

160 
Void
 
	`xCÝyYuv2Tmp
 ( 
UIÁ
 
uhP¬tUn™Idx
, UIÁ 
uiD•th
 );

162 
BoÞ
 
	$g‘dQPFÏg
 (è{  
m_bEncodeDQP
; 
	}
}

163 
Void
 
	$£tdQPFÏg
 ( 
BoÞ
 
b
 ) { 
m_bEncodeDQP
 = b; 
	}
}

165 
BoÞ
 
	$g‘Fa¡D–Qp
 (ècÚ¡ {  
m_bFa¡D–QP
; 
	}
}

167 
BoÞ
 
	$g‘CodeChromaQpAdjFÏg
(è{  
m_¡žlToCodeChromaQpOff£tFÏg
; 
	}
}

168 
Void
 
	$£tCodeChromaQpAdjFÏg
Ð
BoÞ
 
b
 ) { 
m_¡žlToCodeChromaQpOff£tFÏg
 = b; 
	}
}

170 #ià
ADAPTIVE_QP_SELECTION


172 
Void
 
xCtuCÞËùARLSts
(
TComD©aCU
* 
pCtu
);

173 
IÁ
 
xTuCÞËùARLSts
(
TCÛff
* 
½cCÛff
, TCÛff* 
½cA¾CÛff
, IÁ 
NumCÛffInCU
, 
DoubË
* 
cSum
, 
UIÁ
* 
numSam¶es
 );

176 #ià
AMP_ENC_SPEEDUP


177 #ià
AMP_MRG


178 
Void
 
d”iveTe¡ModeAMP
 (
TComD©aCU
 *
pcBe¡CU
, 
P¬tSize
 
eP¬’tP¬tSize
, 
BoÞ
 &
bTe¡AMP_HÜ
, BoÞ &
bTe¡AMP_V”
, BoÞ &
bTe¡M”geAMP_HÜ
, BoÞ &
bTe¡M”geAMP_V”
);

180 
Void
 
d”iveTe¡ModeAMP
 (
TComD©aCU
 *
pcBe¡CU
, 
P¬tSize
 
eP¬’tP¬tSize
, 
BoÞ
 &
bTe¡AMP_HÜ
, BoÞ &
bTe¡AMP_V”
);

184 
Void
 
xFžlPCMBufãr
 ( 
TComD©aCU
* 
pCU
, 
TComYuv
* 
pOrgYuv
 );

	@source/Lib/TLibEncoder/TEncEntropy.cpp

38 
	~"TEncEÁrÝy.h
"

39 
	~"TLibCommÚ/CommÚDef.h
"

40 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

41 
	~"TLibCommÚ/TComTU.h
"

43 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


44 
	~"../TLibCommÚ/Debug.h
"

45 cÚ¡ 
BoÞ
 
	gbDebugP»dEÇbËd
 = 
DebugO±iÚLi¡
::
DebugP»d
.
g‘IÁ
()!=0;

51 
Void
 
	gTEncEÁrÝy
::
	$£tEÁrÝyCod”
 ( 
TEncEÁrÝyIf
* 
e
 )

53 
m_pcEÁrÝyCod”If
 = 
e
;

54 
	}
}

56 
Void
 
	gTEncEÁrÝy
::
	$’codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 )

58 
m_pcEÁrÝyCod”If
->
	`codeSliûH—d”
Ð
pcSliû
 );

60 
	}
}

62 
Void
 
	gTEncEÁrÝy
::
	$’codeTžesWPPEÁryPošt
Ð
TComSliû
* 
pSliû
 )

64 
m_pcEÁrÝyCod”If
->
	`codeTžesWPPEÁryPošt
Ð
pSliû
 );

65 
	}
}

67 
Void
 
	gTEncEÁrÝy
::
	$’codeT”mš©šgB™
 ( 
UIÁ
 
uiIsLa¡
 )

69 
m_pcEÁrÝyCod”If
->
	`codeT”mš©šgB™
Ð
uiIsLa¡
 );

72 
	}
}

74 
Void
 
	gTEncEÁrÝy
::
	$’codeSliûFšish
()

76 
m_pcEÁrÝyCod”If
->
	`codeSliûFšish
();

77 
	}
}

79 
Void
 
	gTEncEÁrÝy
::
	$’codePPS
ÐcÚ¡ 
TComPPS
* 
pcPPS
 )

81 
m_pcEÁrÝyCod”If
->
	`codePPS
Ð
pcPPS
 );

83 
	}
}

85 
Void
 
	gTEncEÁrÝy
::
	$’codeSPS
ÐcÚ¡ 
TComSPS
* 
pcSPS
 )

87 
m_pcEÁrÝyCod”If
->
	`codeSPS
Ð
pcSPS
 );

89 
	}
}

91 
Void
 
	gTEncEÁrÝy
::
	$’codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

93 ifÐ
bRD
 )

95 
uiAbsP¬tIdx
 = 0;

97 
m_pcEÁrÝyCod”If
->
	`codeCUT¿nsquªtBy·ssFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
 );

98 
	}
}

100 
Void
 
	gTEncEÁrÝy
::
	$’codeVPS
ÐcÚ¡ 
TComVPS
* 
pcVPS
 )

102 
m_pcEÁrÝyCod”If
->
	`codeVPS
Ð
pcVPS
 );

104 
	}
}

106 
Void
 
	gTEncEÁrÝy
::
	$’codeSkFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

108 iàÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
() )

112 ifÐ
bRD
 )

114 
uiAbsP¬tIdx
 = 0;

116 
m_pcEÁrÝyCod”If
->
	`codeSkFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
 );

117 
	}
}

120 
Void
 
	gTEncEÁrÝy
::
	$’codeM”geFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

123 
m_pcEÁrÝyCod”If
->
	`codeM”geFÏg
Ð
pcCU
, 
uiAbsP¬tIdx
 );

124 
	}
}

127 
Void
 
	gTEncEÁrÝy
::
	$’codeM”geIndex
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

129 ifÐ
bRD
 )

131 
uiAbsP¬tIdx
 = 0;

132 
	`as£¹
Ð
pcCU
->
	`g‘P¬t™iÚSize
(
uiAbsP¬tIdx
è=ð
SIZE_2Nx2N
 );

134 
m_pcEÁrÝyCod”If
->
	`codeM”geIndex
Ð
pcCU
, 
uiAbsP¬tIdx
 );

135 
	}
}

139 
Void
 
	gTEncEÁrÝy
::
	$’codeP»dMode
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

141 ifÐ
bRD
 )

143 
uiAbsP¬tIdx
 = 0;

146 iàÐ
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
() )

151 
m_pcEÁrÝyCod”If
->
	`codeP»dMode
Ð
pcCU
, 
uiAbsP¬tIdx
 );

152 
	}
}

155 
Void
 
	gTEncEÁrÝy
::
	$’codeS¶™FÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 
bRD
 )

157 ifÐ
bRD
 )

159 
uiAbsP¬tIdx
 = 0;

162 
m_pcEÁrÝyCod”If
->
	`codeS¶™FÏg
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

163 
	}
}

166 
Void
 
	gTEncEÁrÝy
::
	$’codeP¬tSize
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 
bRD
 )

168 ifÐ
bRD
 )

170 
uiAbsP¬tIdx
 = 0;

173 
m_pcEÁrÝyCod”If
->
	`codeP¬tSize
Ð
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
 );

174 
	}
}

182 
Void
 
	gTEncEÁrÝy
::
	$’codeIPCMInfo
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

184 if(!
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£PCM
()

185 || 
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è> (1<<pcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMLog2MaxSize
())

186 || 
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è< (1<<pcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMLog2MšSize
()))

191 ifÐ
bRD
 )

193 
uiAbsP¬tIdx
 = 0;

196 
m_pcEÁrÝyCod”If
->
	`codeIPCMInfo
 ( 
pcCU
, 
uiAbsP¬tIdx
 );

198 
	}
}

200 
Void
 
	gTEncEÁrÝy
::
	$xEncodeT¿nsfÜm
Ð
BoÞ
& 
bCodeDQP
, BoÞ& 
codeChromaQpAdj
, 
TComTU
 &
rTu
 )

203 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

204 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

205 cÚ¡ 
UIÁ
 
numV®idCompÚ’t
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

206 cÚ¡ 
BoÞ
 
bChroma
 = 
	`isChromaEÇbËd
(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
());

207 cÚ¡ 
UIÁ
 
uiTrIdx
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

208 cÚ¡ 
UIÁ
 
uiD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

209 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


210 cÚ¡ 
BoÞ
 
bDebugRQT
=
pcCU
->
	`g‘Sliû
()->
	`g‘Fš®ized
(è&& 
DebugO±iÚLi¡
::
DebugRQT
.
	`g‘IÁ
()!=0;

211 ià(
bDebugRQT
)

213 
	`´štf
("x..codeTransform: offsetLuma=%d offsetChroma=%d‡bsPartIdx=%d, uiDepth=%d\n width=%d, height=%d, uiTrIdx=%d, uiInnerQuadIdx=%d\n",

214 
rTu
.
	`g‘CÛffic›ÁOff£t
(
COMPONENT_Y
),„Tu.g‘CÛffic›ÁOff£t(
COMPONENT_Cb
), 
uiAbsP¬tIdx
, 
uiD•th
,„Tu.
	`g‘Reù
(COMPONENT_Y).
width
,„Tu.g‘Reù(COMPONENT_Y).
height
,„Tu.
	`G‘T¿nsfÜmD•thR–
(),„Tu.
	`G‘SeùiÚNumb”
());

217 cÚ¡ 
UIÁ
 
uiSubdiv
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 ) > 
uiTrIdx
;

218 cÚ¡ 
UIÁ
 
uiLog2T¿foSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

221 
UIÁ
 
cbf
[
MAX_NUM_COMPONENT
] = {0,0,0};

222 
BoÞ
 
bHaveACodedBlock
 = 
çl£
;

223 
BoÞ
 
bHaveACodedChromaBlock
 = 
çl£
;

225 
UIÁ
 
ch
=0; ch<
numV®idCompÚ’t
; ch++)

227 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

229 
cbf
[
compID
] = 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, compID , 
uiTrIdx
 );

231 ià(
cbf
[
ch
] != 0)

233 
bHaveACodedBlock
 = 
Œue
;

234 ià(
	`isChroma
(
compID
))

236 
bHaveACodedChromaBlock
 = 
Œue
;

241 ifÐ
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
è&&…cCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè=ð
SIZE_NxN
 && 
uiD•th
 =ðpcCU->
	`g‘D•th
(uiAbsPartIdx) )

243 
	`as£¹
Ð
uiSubdiv
 );

245 ifÐ
pcCU
->
	`isIÁ”
(
uiAbsP¬tIdx
è&& (pcCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè!ð
SIZE_2Nx2N
è&& 
uiD•th
 =ðpcCU->
	`g‘D•th
(uiAbsP¬tIdxè&& (pcCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TUMaxD•thIÁ”
() == 1) )

247 iàÐ
uiLog2T¿foSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) )

249 
	`as£¹
Ð
uiSubdiv
 );

253 
	`as£¹
(!
uiSubdiv
 );

256 ifÐ
uiLog2T¿foSize
 > 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
() )

258 
	`as£¹
Ð
uiSubdiv
 );

260 ifÐ
uiLog2T¿foSize
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MšSize
() )

262 
	`as£¹
Ð!
uiSubdiv
 );

264 ifÐ
uiLog2T¿foSize
 =ð
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) )

266 
	`as£¹
Ð!
uiSubdiv
 );

270 
	`as£¹
Ð
uiLog2T¿foSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) );

271 
m_pcEÁrÝyCod”If
->
	`codeT¿nsfÜmSubdivFÏg
Ð
uiSubdiv
, 5 - 
uiLog2T¿foSize
 );

274 cÚ¡ 
UIÁ
 
uiTrD•thCu¼
 = 
uiD•th
 - 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 );

275 cÚ¡ 
BoÞ
 
bFœ¡CbfOfCU
 = 
uiTrD•thCu¼
 == 0;

277 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numV®idCompÚ’t
; ch++)

279 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

280 ifÐ
bFœ¡CbfOfCU
 || 
rTu
.
	`ProûssšgAÎQuad¿Ás
(
compID
) )

282 ifÐ
bFœ¡CbfOfCU
 || 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
compID
, 
uiTrD•thCu¼
 - 1 ) )

284 
m_pcEÁrÝyCod”If
->
	`codeQtCbf
Ð
rTu
, 
compID
, (
uiSubdiv
 == 0) );

289 
	`as£¹
Ð
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
compID
, 
uiTrD•thCu¼
 ) ==…cCU->getCbf( uiAbsPartIdx, compID, uiTrDepthCurr - 1 ) );

293 ifÐ
uiSubdiv
 )

295 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
Œue
);

298 
	`xEncodeT¿nsfÜm
Ð
bCodeDQP
, 
codeChromaQpAdj
, 
tuRecur£Chžd
 );

299 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

304 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

305 
	`DTRACE_CABAC_T
( "\tTrIdx:‡bspart=" );

306 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 );

307 
	`DTRACE_CABAC_T
( "\tdepth=" );

308 
	`DTRACE_CABAC_V
Ð
uiD•th
 );

309 
	`DTRACE_CABAC_T
( "\ttrdepth=" );

310 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 ) );

311 
	`DTRACE_CABAC_T
( "\n" );

314 ifÐ!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
è&& 
uiD•th
 =ðpcCU->
	`g‘D•th
ÐuiAbsP¬tIdx ) && (!
bChroma
 || (!pcCU->
	`g‘Cbf
ÐuiAbsP¬tIdx, 
COMPONENT_Cb
, 0 ) && !pcCU->g‘CbfÐuiAbsP¬tIdx, 
COMPONENT_Cr
, 0 ) ) ) )

316 
	`as£¹
Ð
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
COMPONENT_Y
, 0 ) );

321 
m_pcEÁrÝyCod”If
->
	`codeQtCbf
Ð
rTu
, 
COMPONENT_Y
, 
Œue
 );

324 iàÐ
bHaveACodedBlock
 )

327 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

329 iàÐ
bCodeDQP
 )

331 
	`’codeQP
Ð
pcCU
, 
rTu
.
	`G‘AbsP¬tIdxCU
() );

332 
bCodeDQP
 = 
çl£
;

336 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘U£ChromaQpAdj
() )

338 iàÐ
bHaveACodedChromaBlock
 && 
codeChromaQpAdj
 && !
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
rTu
.
	`G‘AbsP¬tIdxCU
()) )

340 
	`’codeChromaQpAdju¡m’t
Ð
pcCU
, 
rTu
.
	`G‘AbsP¬tIdxCU
() );

341 
codeChromaQpAdj
 = 
çl£
;

345 cÚ¡ 
UIÁ
 
numV®idComp
=
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

347 
UIÁ
 
ch
=
COMPONENT_Y
; ch<
numV®idComp
; ch++)

349 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

351 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

353 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


354 ià(
bDebugRQT
)

356 
	`´štf
("C®ÈNxN fÜ chª %d width=%d height=%d cbf=%d\n", 
compID
, 
rTu
.
	`g‘Reù
(compID).
width
,„Tu.g‘Reù(compID).
height
, 1);

360 ià(
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
)

363 
TComTURecur£
 
	`subTUI‹¿tÜ
(
rTu
, 
çl£
, 
TComTU
::
VERTICAL_SPLIT
, 
Œue
, 
compID
);

367 cÚ¡ 
UCh¬
 
subTUCBF
 = 
pcCU
->
	`g‘Cbf
(
subTUI‹¿tÜ
.
	`G‘AbsP¬tIdxTU
(
compID
), compID, (
uiTrIdx
 + 1));

369 ià(
subTUCBF
 != 0)

371 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


372 ià(
bDebugRQT
)

374 
	`´štf
("C®ÈNxN fÜ chª %d width=%d height=%d cbf=%d\n", 
compID
, 
subTUI‹¿tÜ
.
	`g‘Reù
(compID).
width
, subTUI‹¿tÜ.g‘Reù(compID).
height
, 1);

377 
m_pcEÁrÝyCod”If
->
	`codeCÛffNxN
Ð
subTUI‹¿tÜ
, (
pcCU
->
	`g‘CÛff
(
compID
è+ subTUI‹¿tÜ.
	`g‘CÛffic›ÁOff£t
(compID)), compID );

380 
subTUI‹¿tÜ
.
	`ÃxtSeùiÚ
(
rTu
));

384 ià(
	`isChroma
(
compID
è&& (
cbf
[
COMPONENT_Y
] != 0))

386 
m_pcEÁrÝyCod”If
->
	`codeCrossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
 );

389 ià(
cbf
[
compID
] != 0)

391 
m_pcEÁrÝyCod”If
->
	`codeCÛffNxN
Ð
rTu
, (
pcCU
->
	`g‘CÛff
(
compID
è+„Tu.
	`g‘CÛffic›ÁOff£t
(compID)), compID );

398 
	}
}

402 
Void
 
	gTEncEÁrÝy
::
	$’codeIÁ¿DœModeLuma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
isMuÉËPU
 )

404 
m_pcEÁrÝyCod”If
->
	`codeIÁ¿DœLumaAng
Ð
pcCU
, 
absP¬tIdx
 , 
isMuÉËPU
);

405 
	}
}

409 
Void
 
	gTEncEÁrÝy
::
	$’codeIÁ¿DœModeChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

411 
m_pcEÁrÝyCod”If
->
	`codeIÁ¿DœChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 );

413 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


414 ià(
bDebugP»dEÇbËd
 && 
pcCU
->
	`g‘Sliû
()->
	`g‘Fš®ized
())

416 
UIÁ
 
cdœ
=
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_CHROMA
, 
uiAbsP¬tIdx
);

417 ià(
cdœ
==36)

419 
cdœ
=
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
uiAbsP¬tIdx
);

421 
	`´štf
("codšg chrom¨IÁ¿ dœ: %d, uiAbsP¬tIdx: %d,†um¨dœ: %d\n", 
cdœ
, 
uiAbsP¬tIdx
, 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, uiAbsPartIdx));

424 
	}
}

427 
Void
 
	gTEncEÁrÝy
::
	$’codeP»dInfo
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

429 ifÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

431 
	`’codeIÁ¿DœModeLuma
 ( 
pcCU
, 
uiAbsP¬tIdx
,
Œue
 );

432 ià(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()!=
CHROMA_400
)

434 
	`’codeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 );

436 ià(
	`’abË4ChromaPUsInIÁ¿NxNCU
(
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()è&&…cCU->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 )==
SIZE_NxN
)

438 
UIÁ
 
uiP¬tOff£t
 = ( 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> (…cCU->
	`g‘D•th
(
uiAbsP¬tIdx
) << 1 ) ) >> 2;

439 
	`’codeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
 );

440 
	`’codeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
*2 );

441 
	`’codeIÁ¿DœModeChroma
Ð
pcCU
, 
uiAbsP¬tIdx
 + 
uiP¬tOff£t
*3 );

447 
	`’codePUWi£
Ð
pcCU
, 
uiAbsP¬tIdx
 );

449 
	}
}

451 
Void
 
	gTEncEÁrÝy
::
	$’codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 )

453 
m_pcEÁrÝyCod”If
->
	`codeCrossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
 );

454 
	}
}

457 
Void
 
	gTEncEÁrÝy
::
	$’codePUWi£
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

459 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


460 cÚ¡ 
BoÞ
 
bDebugP»d
 = 
bDebugP»dEÇbËd
 && 
pcCU
->
	`g‘Sliû
()->
	`g‘Fš®ized
();

463 
P¬tSize
 
eP¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 );

464 
UIÁ
 
uiNumPU
 = ( 
eP¬tSize
 =ð
SIZE_2Nx2N
 ? 1 : (ƒP¬tSiz=ð
SIZE_NxN
 ? 4 : 2 ) );

465 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 );

466 
UIÁ
 
uiPUOff£t
 = ( 
g_auiPUOff£t
[
	`UIÁ
Ð
eP¬tSize
 )] << ( ( 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘MaxTÙ®CUD•th
(è- 
uiD•th
 ) << 1 ) ) >> 4;

468  
UIÁ
 
uiP¬tIdx
 = 0, 
uiSubP¬tIdx
 = 
uiAbsP¬tIdx
; uiP¬tIdx < 
uiNumPU
; uiP¬tIdx++, uiSubP¬tIdx +ð
uiPUOff£t
 )

470 
	`’codeM”geFÏg
Ð
pcCU
, 
uiSubP¬tIdx
 );

471 iàÐ
pcCU
->
	`g‘M”geFÏg
Ð
uiSubP¬tIdx
 ) )

473 
	`’codeM”geIndex
Ð
pcCU
, 
uiSubP¬tIdx
 );

474 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


475 ià(
bDebugP»d
)

477 
¡d
::
cout
 << "Coded m”gæag, CU‡bsP¬tIdx: " << 
uiAbsP¬tIdx
 << " PU(" << 
uiP¬tIdx
 << "èabsP¬tIdx: " << 
uiSubP¬tIdx
;

478 
¡d
::
cout
 << " m”gšdex: " << (
UIÁ
)
pcCU
->
	`g‘M”geIndex
(
uiSubP¬tIdx
è<< std::
’dl
;

484 
	`’codeIÁ”DœPU
Ð
pcCU
, 
uiSubP¬tIdx
 );

485  
UIÁ
 
uiRefLi¡Idx
 = 0; uiRefListIdx < 2; uiRefListIdx++ )

487 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) ) > 0 )

489 
	`’codeRefFrmIdxPU
 ( 
pcCU
, 
uiSubP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

490 
	`’codeMvdPU
 ( 
pcCU
, 
uiSubP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

491 
	`’codeMVPIdxPU
 ( 
pcCU
, 
uiSubP¬tIdx
, 
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ) );

492 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


493 ià(
bDebugP»d
)

495 
¡d
::
cout
 << "»fLi¡Idx: " << 
uiRefLi¡Idx
 << std::
’dl
;

496 
¡d
::
cout
 << "MVD hÜizÚl: " << 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
uiRefLi¡Idx
))->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘HÜ
(è<< std::
’dl
;

497 
¡d
::
cout
 << "MVD v”tiÿl: " << 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(
uiRefLi¡Idx
))->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘V”
(è<< std::
’dl
;

498 
¡d
::
cout
 << "MVPIdxPU: " << 
pcCU
->
	`g‘MVPIdx
(
	`RefPicLi¡
Ð
uiRefLi¡Idx
 ), 
uiSubP¬tIdx
è<< std::
’dl
;

499 
¡d
::
cout
 << "IÁ”Dœ: " << (
UIÁ
)
pcCU
->
	`g‘IÁ”Dœ
(
uiSubP¬tIdx
è<< std::
’dl
;

508 
	}
}

510 
Void
 
	gTEncEÁrÝy
::
	$’codeIÁ”DœPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

512 iàÐ!
pcCU
->
	`g‘Sliû
()->
	`isIÁ”B
() )

517 
m_pcEÁrÝyCod”If
->
	`codeIÁ”Dœ
Ð
pcCU
, 
uiAbsP¬tIdx
 );

520 
	}
}

523 
Void
 
	gTEncEÁrÝy
::
	$’codeRefFrmIdxPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

525 
	`as£¹
Ð
pcCU
->
	`isIÁ”
Ð
uiAbsP¬tIdx
 ) );

527 iàÐÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
eRefLi¡
 ) == 1 ) )

532 iàÐ
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
eRefLi¡
 ) )

534 
m_pcEÁrÝyCod”If
->
	`codeRefFrmIdx
Ð
pcCU
, 
uiAbsP¬tIdx
, 
eRefLi¡
 );

538 
	}
}

541 
Void
 
	gTEncEÁrÝy
::
	$’codeMvdPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

543 
	`as£¹
Ð
pcCU
->
	`isIÁ”
Ð
uiAbsP¬tIdx
 ) );

545 iàÐ
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
eRefLi¡
 ) )

547 
m_pcEÁrÝyCod”If
->
	`codeMvd
Ð
pcCU
, 
uiAbsP¬tIdx
, 
eRefLi¡
 );

550 
	}
}

552 
Void
 
	gTEncEÁrÝy
::
	$’codeMVPIdxPU
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

554 iàÐ(
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) & ( 1 << 
eRefLi¡
 )) )

556 
m_pcEÁrÝyCod”If
->
	`codeMVPIdx
Ð
pcCU
, 
uiAbsP¬tIdx
, 
eRefLi¡
 );

560 
	}
}

562 
Void
 
	gTEncEÁrÝy
::
	$’codeQtCbf
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 )

564 
m_pcEÁrÝyCod”If
->
	`codeQtCbf
Ð
rTu
, 
compID
, 
lowe¡Lev–
 );

565 
	}
}

567 
Void
 
	gTEncEÁrÝy
::
	$’codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 )

569 
m_pcEÁrÝyCod”If
->
	`codeT¿nsfÜmSubdivFÏg
Ð
uiSymbÞ
, 
uiCtx
 );

570 
	}
}

572 
Void
 
	gTEncEÁrÝy
::
	$’codeQtRoÙCbf
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

574 
m_pcEÁrÝyCod”If
->
	`codeQtRoÙCbf
Ð
pcCU
, 
uiAbsP¬tIdx
 );

575 
	}
}

577 
Void
 
	gTEncEÁrÝy
::
	$’codeQtCbfZ”o
Ð
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 )

579 
m_pcEÁrÝyCod”If
->
	`codeQtCbfZ”o
Ð
rTu
, 
chTy³
 );

580 
	}
}

582 
Void
 
	gTEncEÁrÝy
::
	$’codeQtRoÙCbfZ”o
( )

584 
m_pcEÁrÝyCod”If
->
	`codeQtRoÙCbfZ”o
( );

585 
	}
}

588 
Void
 
	gTEncEÁrÝy
::
	$’codeQP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 )

590 ifÐ
bRD
 )

592 
uiAbsP¬tIdx
 = 0;

595 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£DQP
() )

597 
m_pcEÁrÝyCod”If
->
	`codeD–QP
Ð
pcCU
, 
uiAbsP¬tIdx
 );

599 
	}
}

602 
Void
 
	gTEncEÁrÝy
::
	$’codeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
šRd
 )

604 ifÐ
šRd
 )

606 
absP¬tIdx
 = 0;

609 
m_pcEÁrÝyCod”If
->
	`codeChromaQpAdju¡m’t
Ð
cu
, 
absP¬tIdx
 );

610 
	}
}

615 
Void
 
	gTEncEÁrÝy
::
	$’codeCÛff
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
& 
bCodeDQP
, BoÞ& 
codeChromaQpAdj
 )

617 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


618 cÚ¡ 
BoÞ
 
bDebugRQT
=
pcCU
->
	`g‘Sliû
()->
	`g‘Fš®ized
(è&& 
DebugO±iÚLi¡
::
DebugRQT
.
	`g‘IÁ
()!=0;

621 ifÐ
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
) )

623 ià(
çl£
)

625 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

626 
	`DTRACE_CABAC_T
( "\tdecodeTransformIdx()\tCUDepth=" )

627 
	`DTRACE_CABAC_V
Ð
uiD•th
 )

628 
	`DTRACE_CABAC_T
( "\n" )

633 ifÐ!(
pcCU
->
	`g‘M”geFÏg
Ð
uiAbsP¬tIdx
 ) &&…cCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè=ð
SIZE_2Nx2N
 ) )

635 
m_pcEÁrÝyCod”If
->
	`codeQtRoÙCbf
Ð
pcCU
, 
uiAbsP¬tIdx
 );

637 iàÐ!
pcCU
->
	`g‘QtRoÙCbf
Ð
uiAbsP¬tIdx
 ) )

643 
TComTURecur£
 
	`tuRecur£
(
pcCU
, 
uiAbsP¬tIdx
, 
uiD•th
);

644 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


645 ià(
bDebugRQT
)

647 
	`´štf
("..codeCÛff: uiAbsP¬tIdx=%d, PU fÜm©=%d, 2Nx2N=%d, NxN=%d\n", 
uiAbsP¬tIdx
, 
pcCU
->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdx), 
SIZE_2Nx2N
, 
SIZE_NxN
);

651 
	`xEncodeT¿nsfÜm
Ð
bCodeDQP
, 
codeChromaQpAdj
, 
tuRecur£
 );

652 
	}
}

654 
Void
 
	gTEncEÁrÝy
::
	$’codeCÛffNxN
Ð
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
)

656 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

658 ià(
pcCU
->
	`g‘Cbf
(
rTu
.
	`G‘AbsP¬tIdxTU
(), 
compID
,„Tu.
	`G‘T¿nsfÜmD•thR–
()) != 0)

660 ià(
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
)

663 
TComTURecur£
 
	`subTUI‹¿tÜ
(
rTu
, 
çl£
, 
TComTU
::
VERTICAL_SPLIT
, 
Œue
, 
compID
);

665 cÚ¡ 
UIÁ
 
subTUSize
 = 
subTUI‹¿tÜ
.
	`g‘Reù
(
compID
).
width
 * subTUI‹¿tÜ.g‘Reù(compID).
height
;

669 cÚ¡ 
UCh¬
 
subTUCBF
 = 
pcCU
->
	`g‘Cbf
(
subTUI‹¿tÜ
.
	`G‘AbsP¬tIdxTU
(
compID
), compID, (subTUI‹¿tÜ.
	`G‘T¿nsfÜmD•thR–
() + 1));

671 ià(
subTUCBF
 != 0)

673 
m_pcEÁrÝyCod”If
->
	`codeCÛffNxN
Ð
subTUI‹¿tÜ
, (
pcCÛf
 + (subTUI‹¿tÜ.
	`G‘SeùiÚNumb”
(è* 
subTUSize
)), 
compID
);

676 
subTUI‹¿tÜ
.
	`ÃxtSeùiÚ
(
rTu
));

680 
m_pcEÁrÝyCod”If
->
	`codeCÛffNxN
(
rTu
, 
pcCÛf
, 
compID
);

683 
	}
}

685 
Void
 
	gTEncEÁrÝy
::
	$e¡im©eB™
 (
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, cÚ¡ 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
 )

687 cÚ¡ 
UIÁ
 
heightAtEÁrÝyCodšg
 = (
width
 !ð
height
) ? (height >> 1) : height;

689 
m_pcEÁrÝyCod”If
->
	`e¡B™
 ( 
pcE¡B™sSbac
, 
width
, 
heightAtEÁrÝyCodšg
, 
chTy³
, 
sÿnTy³
 );

690 
	}
}

692 
IÁ
 
	gTEncEÁrÝy
::
	$couÁNÚZ”oCÛffs
Ð
TCÛff
* 
pcCÛf
, 
UIÁ
 
uiSize
 )

694 
IÁ
 
couÁ
 = 0;

696  
IÁ
 
i
 = 0; i < 
uiSize
; i++ )

698 
couÁ
 +ð
pcCÛf
[
i
] != 0;

701  
couÁ
;

702 
	}
}

	@source/Lib/TLibEncoder/TEncEntropy.h

38 #iâdeà
__TENCENTROPY__


39 
	#__TENCENTROPY__


	)

41 
	~"TLibCommÚ/TComSliû.h
"

42 
	~"TLibCommÚ/TComD©aCU.h
"

43 
	~"TLibCommÚ/TComB™SŒ—m.h
"

44 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

45 
	~"TLibCommÚ/TComPic.h
"

46 
	~"TLibCommÚ/TComTrQuªt.h
"

47 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

48 
	~"TLibCommÚ/TComChromaFÜm©.h
"

50 
þass
 
	gTEncSbac
;

51 
þass
 
	gTEncCavlc
;

52 
þass
 
	gSEI
;

59 þas 
	cTEncEÁrÝyIf


61 
	mpublic
:

62 
vœtu®
 
Void
 
»£tEÁrÝy
 (cÚ¡ 
TComSliû
 *
pSliû
) = 0;

63 
vœtu®
 
SliûTy³
 
d‘”mšeCabacIn™Idx
 (cÚ¡ 
TComSliû
 *
pSliû
) = 0;

64 
vœtu®
 
Void
 
£tB™¡»am
 ( 
TComB™If
* 
p
 ) = 0;

65 
vœtu®
 
Void
 
»£tB™s
 () = 0;

66 
vœtu®
 
UIÁ
 
g‘Numb”OfWr™‹nB™s
() = 0;

68 
vœtu®
 
Void
 
codeVPS
 ( cÚ¡ 
TComVPS
* 
pcVPS
 ) = 0;

69 
vœtu®
 
Void
 
codeSPS
 ( cÚ¡ 
TComSPS
* 
pcSPS
 ) = 0;

70 
vœtu®
 
Void
 
codePPS
 ( cÚ¡ 
TComPPS
* 
pcPPS
 ) = 0;

71 
vœtu®
 
Void
 
codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 ) = 0;

73 
vœtu®
 
Void
 
codeTžesWPPEÁryPošt
 ( 
TComSliû
* 
pSliû
 ) = 0;

74 
vœtu®
 
Void
 
codeT”mš©šgB™
 ( 
UIÁ
 
užsLa¡
 ) = 0;

75 
vœtu®
 
Void
 
codeSliûFšish
 () = 0;

76 
vœtu®
 
Void
 
codeMVPIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 ) = 0;

78 
	mpublic
:

79 
vœtu®
 
Void
 
codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

80 
vœtu®
 
Void
 
codeSkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

81 
vœtu®
 
Void
 
codeM”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

82 
vœtu®
 
Void
 
codeM”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

83 
vœtu®
 
Void
 
codeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

85 
vœtu®
 
Void
 
codeP¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 ) = 0;

86 
vœtu®
 
Void
 
codeP»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

88 
vœtu®
 
Void
 
codeIPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

90 
vœtu®
 
Void
 
codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 ) = 0;

91 
vœtu®
 
Void
 
codeQtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 ) = 0;

92 
vœtu®
 
Void
 
codeQtRoÙCbf
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

93 
vœtu®
 
Void
 
codeQtCbfZ”o
 ( 
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 ) = 0;

94 
vœtu®
 
Void
 
codeQtRoÙCbfZ”o
 ( ) = 0;

95 
vœtu®
 
Void
 
codeIÁ¿DœLumaAng
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
isMuÉËPU
 ) = 0;

97 
vœtu®
 
Void
 
codeIÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

98 
vœtu®
 
Void
 
codeIÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

99 
vœtu®
 
Void
 
codeRefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 ) = 0;

100 
vœtu®
 
Void
 
codeMvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 ) = 0;

102 
vœtu®
 
Void
 
codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 ) = 0;

104 
vœtu®
 
Void
 
codeD–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

105 
vœtu®
 
Void
 
codeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 ) = 0;

106 
vœtu®
 
Void
 
codeCÛffNxN
 ( 
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
 ) = 0;

107 
vœtu®
 
Void
 
codeT¿nsfÜmSkFÏgs
 ( 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 ) = 0;

108 
vœtu®
 
Void
 
codeSAOBlkP¬am
 (
SAOBlkP¬am
& 
§oBlkP¬am
, cÚ¡ 
B™D•ths
 &
b™D•ths
, 
BoÞ
* 
¦iûEÇbËd
, BoÞ 
ËáM”geAvaž
, BoÞ 
aboveM”geAvaž
, BoÞ 
ÚlyE¡M”geInfo
 = 
çl£
) =0;

109 
vœtu®
 
Void
 
e¡B™
 (
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
) = 0;

110 
vœtu®
 
Void
 
codeEx¶ic™RdpcmMode
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
 ) = 0;

112 
	mvœtu®
 ~
	$TEncEÁrÝyIf
() {}

113 
	}
};

116 þas 
	cTEncEÁrÝy


118 
	mpublic
:

119 
Void
 
£tEÁrÝyCod”
 ( 
TEncEÁrÝyIf
* 
e
 );

120 
Void
 
	$£tB™¡»am
 ( 
TComB™If
* 
p
 ) { 
m_pcEÁrÝyCod”If
->
	`£tB™¡»am
(p); }

121 
Void
 
	$»£tB™s
 (è{ 
m_pcEÁrÝyCod”If
->
	`»£tB™s
(); 
	}
}

122 
UIÁ
 
	$g‘Numb”OfWr™‹nB™s
 (è{  
m_pcEÁrÝyCod”If
->
	`g‘Numb”OfWr™‹nB™s
(); 
	}
}

123 
Void
 
	$»£tEÁrÝy
 (cÚ¡ 
TComSliû
 *
pSliû
è{ 
m_pcEÁrÝyCod”If
->
	`»£tEÁrÝy
ÕSliû); 
	}
}

124 
SliûTy³
 
	$d‘”mšeCabacIn™Idx
 (cÚ¡ 
TComSliû
 *
pSliû
è{  
m_pcEÁrÝyCod”If
->
	`d‘”mšeCabacIn™Idx
ÕSliû); 
	}
}

126 
Void
 
’codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 );

127 
Void
 
’codeTžesWPPEÁryPošt
Ð
TComSliû
* 
pSliû
 );

128 
Void
 
’codeT”mš©šgB™
 ( 
UIÁ
 
uiIsLa¡
 );

129 
Void
 
’codeSliûFšish
 ();

130 
TEncEÁrÝyIf
* 
	gm_pcEÁrÝyCod”If
;

132 
	gpublic
:

133 
Void
 
’codeVPS
 ( cÚ¡ 
TComVPS
* 
pcVPS
);

135 
Void
 
’codeSPS
 ( cÚ¡ 
TComSPS
* 
pcSPS
 );

136 
Void
 
’codePPS
 ( cÚ¡ 
TComPPS
* 
pcPPS
 );

137 
Void
 
’codeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 
bRD
 = 
çl£
 );

138 
Void
 
’codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

139 
Void
 
’codeSkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

140 
Void
 
’codePUWi£
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

141 
Void
 
’codeIÁ”DœPU
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

142 
Void
 
’codeRefFrmIdxPU
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

143 
Void
 
’codeMvdPU
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

144 
Void
 
’codeMVPIdxPU
 ( 
TComD©aCU
* 
pcSubCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

145 
Void
 
’codeM”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

146 
Void
 
’codeM”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

147 
Void
 
’codeP»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

148 
Void
 
’codeP¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
 
bRD
 = 
çl£
 );

149 
Void
 
’codeIPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

150 
Void
 
’codeP»dInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

151 
Void
 
’codeIÁ¿DœModeLuma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
isMuÉËPU
 = 
çl£
 );

153 
Void
 
’codeIÁ¿DœModeChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

155 
Void
 
’codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 );

156 
Void
 
’codeQtCbf
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 );

158 
Void
 
’codeQtCbfZ”o
 ( 
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 );

159 
Void
 
’codeQtRoÙCbfZ”o
 ( );

160 
Void
 
’codeQtRoÙCbf
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

161 
Void
 
’codeQP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

162 
Void
 
’codeChromaQpAdju¡m’t
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
BoÞ
 
bRD
 = 
çl£
 );

164 
Void
 
’codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

166 
	g´iv©e
:

167 
Void
 
xEncodeT¿nsfÜm
 ( 
BoÞ
& 
bCodeDQP
, BoÞ& 
codeChromaQpAdj
, 
TComTU
 &
rTu
 );

169 
	gpublic
:

170 
Void
 
’codeCÛff
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
, 
BoÞ
& 
bCodeDQP
, BoÞ& 
codeChromaQpAdj
 );

172 
Void
 
’codeCÛffNxN
 ( 
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
 );

174 
Void
 
e¡im©eB™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
);

176 
Void
 
	$’codeSAOBlkP¬am
(
SAOBlkP¬am
& 
§oBlkP¬am
, cÚ¡ 
B™D•ths
 &
b™D•ths
, 
BoÞ
* 
¦iûEÇbËd
, BoÞ 
ËáM”geAvaž
, BoÞ 
aboveM”geAvaž
){
m_pcEÁrÝyCod”If
->
	`codeSAOBlkP¬am
(§oBlkP¬am, b™D•ths, sliûEÇbËd,†eáM”geAvaž,‡boveM”geAvaž, 
çl£
);
	}
}

178 
IÁ
 
couÁNÚZ”oCÛffs
Ð
TCÛff
* 
pcCÛf
, 
UIÁ
 
uiSize
 );

	@source/Lib/TLibEncoder/TEncGOP.cpp

38 
	~<li¡
>

39 
	~<®gÜ™hm
>

40 
	~<funùiÚ®
>

41 
	~<cš‰y³s
>

43 
	~"TEncTÝ.h
"

44 
	~"TEncGOP.h
"

45 
	~"TEncAÇlyze.h
"

46 
	~"libmd5/MD5.h
"

47 
	~"TLibCommÚ/SEI.h
"

48 
	~"TLibCommÚ/NAL.h
"

49 
	~"NALwr™e.h
"

50 
	~<time.h
>

51 
	~<m©h.h
>

53 
	~<deque
>

54 
usšg
 
Çme¥aû
 
	g¡d
;

62 
IÁ
 
	$g‘LSB
(
IÁ
 
poc
, IÁ 
maxLSB
)

64 ià(
poc
 >= 0)

66  
poc
 % 
maxLSB
;

70  (
maxLSB
 - ((-
poc
) % maxLSB)) % maxLSB;

72 
	}
}

74 
	gTEncGOP
::
	$TEncGOP
()

76 
m_iLa¡IDR
 = 0;

77 
m_RASPOCfÜRe£tEncod”
 = 
MAX_INT
;

79 
m_iGÝSize
 = 0;

80 
m_iNumPicCoded
 = 0;

81 
m_bFœ¡
 = 
Œue
;

82 
m_iLa¡Recov”yPicPOC
 = 0;

84 
m_pcCfg
 = 
NULL
;

85 
m_pcSliûEncod”
 = 
NULL
;

86 
m_pcLi¡Pic
 = 
NULL
;

88 
m_pcEÁrÝyCod”
 = 
NULL
;

89 
m_pcCavlcCod”
 = 
NULL
;

90 
m_pcSbacCod”
 = 
NULL
;

91 
m_pcBšCABAC
 = 
NULL
;

93 
m_bSeqFœ¡
 = 
Œue
;

95 
m_bReäeshP’dšg
 = 0;

96 
m_pocCRA
 = 0;

97 
m_numLÚgT”mRefPicSPS
 = 0;

98 ::
	`mem£t
(
m_ÉRefPicPocLsbSps
, 0, (m_ltRefPicPocLsbSps));

99 ::
	`mem£t
(
m_ÉRefPicU£dByCu¼PicFÏg
, 0, (m_ltRefPicUsedByCurrPicFlag));

100 
m_Ï¡BPSEI
 = 0;

101 
m_bufãršgP”iodSEIP»£ÁInAU
 = 
çl£
;

102 
m_assocŸ‹dIRAPTy³
 = 
NAL_UNIT_CODED_SLICE_IDR_N_LP
;

103 
m_assocŸ‹dIRAPPOC
 = 0;

104 
m_pcDeblockšgTempPicYuv
 = 
NULL
;

105 
	}
}

107 
	gTEncGOP
::~
	$TEncGOP
()

109 
	}
}

113 
Void
 
TEncGOP
::
	$ü—‹
()

115 
m_bLÚg‹rmTe¡Piùu»HasB“nCoded
 = 0;

116 
m_bLÚg‹rmTe¡Piùu»HasB“nCoded2
 = 0;

117 
	}
}

119 
Void
 
	gTEncGOP
::
	$de¡roy
()

121 ià(
m_pcDeblockšgTempPicYuv
)

123 
m_pcDeblockšgTempPicYuv
->
	`de¡roy
();

124 
d–‘e
 
m_pcDeblockšgTempPicYuv
;

125 
m_pcDeblockšgTempPicYuv
 = 
NULL
;

127 
	}
}

129 
Void
 
	gTEncGOP
::
	$š™
 ( 
TEncTÝ
* 
pcTEncTÝ
 )

131 
m_pcEncTÝ
 = 
pcTEncTÝ
;

132 
m_pcCfg
 = 
pcTEncTÝ
;

133 
m_£iEncod”
.
	`š™
(
m_pcCfg
, 
pcTEncTÝ
, 
this
);

134 
m_pcSliûEncod”
 = 
pcTEncTÝ
->
	`g‘SliûEncod”
();

135 
m_pcLi¡Pic
 = 
pcTEncTÝ
->
	`g‘Li¡Pic
();

137 
m_pcEÁrÝyCod”
 = 
pcTEncTÝ
->
	`g‘EÁrÝyCod”
();

138 
m_pcCavlcCod”
 = 
pcTEncTÝ
->
	`g‘CavlcCod”
();

139 
m_pcSbacCod”
 = 
pcTEncTÝ
->
	`g‘SbacCod”
();

140 
m_pcBšCABAC
 = 
pcTEncTÝ
->
	`g‘BšCABAC
();

141 
m_pcLoÝFž‹r
 = 
pcTEncTÝ
->
	`g‘LoÝFž‹r
();

143 
m_pcSAO
 = 
pcTEncTÝ
->
	`g‘SAO
();

144 
m_pcR©eCŒl
 = 
pcTEncTÝ
->
	`g‘R©eCŒl
();

145 
m_Ï¡BPSEI
 = 0;

146 
m_tÙ®Coded
 = 0;

148 
	}
}

150 #ià
MCTS_EXTRACTION


151 
Void
 
	gTEncGOP
::
	$g’”©eVPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComVPS
 *
vps
)

153 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(
rb¥
);

154 
m_pcEÁrÝyCod”
->
	`’codeVPS
(
vps
);

155 
	}
}

157 
Void
 
	gTEncGOP
::
	$g’”©eSPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComSPS
 *
¥s
)

159 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(
rb¥
);

160 
m_pcEÁrÝyCod”
->
	`’codeSPS
(
¥s
);

161 
	}
}

163 
Void
 
	gTEncGOP
::
	$g’”©ePPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComPPS
 *
µs
)

165 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(
rb¥
);

166 
m_pcEÁrÝyCod”
->
	`’codePPS
(
µs
);

167 
	}
}

170 
IÁ
 
	gTEncGOP
::
	$xWr™eVPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComVPS
 *
vps
)

172 
OuutNALUn™
 
	`Çlu
(
NAL_UNIT_VPS
);

173 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(&
Çlu
.
m_B™¡»am
);

174 
m_pcEÁrÝyCod”
->
	`’codeVPS
(
vps
);

175 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
Çlu
));

176  (
IÁ
)(
acûssUn™
.
	`back
()->
m_ÇlUn™D©a
.
	`¡r
().
	`size
()) * 8;

177 
	}
}

179 
IÁ
 
	gTEncGOP
::
	$xWr™eSPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComSPS
 *
¥s
)

181 
OuutNALUn™
 
	`Çlu
(
NAL_UNIT_SPS
);

182 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(&
Çlu
.
m_B™¡»am
);

183 
m_pcEÁrÝyCod”
->
	`’codeSPS
(
¥s
);

184 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
Çlu
));

185  (
IÁ
)(
acûssUn™
.
	`back
()->
m_ÇlUn™D©a
.
	`¡r
().
	`size
()) * 8;

187 
	}
}

189 
IÁ
 
	gTEncGOP
::
	$xWr™ePPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComPPS
 *
µs
)

191 
OuutNALUn™
 
	`Çlu
(
NAL_UNIT_PPS
);

192 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(&
Çlu
.
m_B™¡»am
);

193 
m_pcEÁrÝyCod”
->
	`’codePPS
(
µs
);

194 
acûssUn™
.
	`push_back
(
Ãw
 
	`NALUn™EBSP
(
Çlu
));

195  (
IÁ
)(
acûssUn™
.
	`back
()->
m_ÇlUn™D©a
.
	`¡r
().
	`size
()) * 8;

196 
	}
}

199 
IÁ
 
	gTEncGOP
::
	$xWr™eP¬am‘”S‘s
 (
AcûssUn™
 &
acûssUn™
, 
TComSliû
 *
¦iû
, cÚ¡ 
BoÞ
 
bSeqFœ¡
)

201 
IÁ
 
aùu®TÙ®B™s
 = 0;

203 ià(
bSeqFœ¡
)

205 
aùu®TÙ®B™s
 +ð
	`xWr™eVPS
(
acûssUn™
, 
m_pcEncTÝ
->
	`g‘VPS
());

207 ià(
m_pcEncTÝ
->
	`SPSN“dsWr™šg
(
¦iû
->
	`g‘SPS
()->
	`g‘SPSId
()))

209 
	`as£¹
(
bSeqFœ¡
);

210 
aùu®TÙ®B™s
 +ð
	`xWr™eSPS
(
acûssUn™
, 
¦iû
->
	`g‘SPS
());

212 ià(
m_pcEncTÝ
->
	`PPSN“dsWr™šg
(
¦iû
->
	`g‘PPS
()->
	`g‘PPSId
()))

214 
aùu®TÙ®B™s
 +ð
	`xWr™ePPS
(
acûssUn™
, 
¦iû
->
	`g‘PPS
());

217  
aùu®TÙ®B™s
;

218 
	}
}

220 
Void
 
	gTEncGOP
::
	$xWr™eAcûssUn™D–im™”
 (
AcûssUn™
 &
acûssUn™
, 
TComSliû
 *
¦iû
)

222 
AUDWr™”
 
audWr™”
;

223 
OuutNALUn™
 
	`Çlu
(
NAL_UNIT_ACCESS_UNIT_DELIMITER
);

225 
IÁ
 
picTy³
 = 
¦iû
->
	`isIÁ¿
(è? 0 : (¦iû->
	`isIÁ”P
() ? 1 : 2);

227 
audWr™”
.
	`codeAUD
(
Çlu
.
m_B™¡»am
, 
picTy³
);

228 
acûssUn™
.
	`push_äÚt
(
Ãw
 
	`NALUn™EBSP
(
Çlu
));

229 
	}
}

232 
Void
 
	gTEncGOP
::
	$xWr™eSEI
 (
N®Un™Ty³
 
ÇluTy³
, 
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, AcûssUn™::
™”©Ü
 &
auPos
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
)

235 ià(
£iMes§ges
.
	`em±y
())

239 
OuutNALUn™
 
	`Çlu
(
ÇluTy³
, 
‹mpÜ®Id
);

240 
m_£iWr™”
.
	`wr™eSEImes§ges
(
Çlu
.
m_B™¡»am
, 
£iMes§ges
, 
¥s
, 
çl£
);

241 
auPos
 = 
acûssUn™
.
	`š£¹
×uPos, 
Ãw
 
	`NALUn™EBSP
(
Çlu
));

242 
auPos
++;

243 
	}
}

245 
Void
 
	gTEncGOP
::
	$xWr™eSEIS•¬©–y
 (
N®Un™Ty³
 
ÇluTy³
, 
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, AcûssUn™::
™”©Ü
 &
auPos
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
)

248 ià(
£iMes§ges
.
	`em±y
())

252 
SEIMes§ges
::
cÚ¡_™”©Ü
 
£i
 = 
£iMes§ges
.
	`begš
(); sei!=£iMes§ges.
	`’d
(); sei++ )

254 
SEIMes§ges
 
tmpMes§ges
;

255 
tmpMes§ges
.
	`push_back
(*
£i
);

256 
OuutNALUn™
 
	`Çlu
(
ÇluTy³
, 
‹mpÜ®Id
);

257 
m_£iWr™”
.
	`wr™eSEImes§ges
(
Çlu
.
m_B™¡»am
, 
tmpMes§ges
, 
¥s
, 
çl£
);

258 
auPos
 = 
acûssUn™
.
	`š£¹
×uPos, 
Ãw
 
	`NALUn™EBSP
(
Çlu
));

259 
auPos
++;

261 
	}
}

263 
Void
 
	gTEncGOP
::
	$xCË¬SEIs
(
SEIMes§ges
& 
£iMes§ges
, 
BoÞ
 
d–‘eMes§ges
)

265 ià(
d–‘eMes§ges
)

267 
	`d–‘eSEIs
(
£iMes§ges
);

271 
£iMes§ges
.
	`þ—r
();

273 
	}
}

276 
Void
 
	gTEncGOP
::
	$xWr™eL—dšgSEIOrd”ed
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
BoÞ
 
‹¡Wr™e
)

278 
AcûssUn™
::
™”©Ü
 
™N®u
 = 
acûssUn™
.
	`begš
();

280  (
™N®u
!=
acûssUn™
.
	`’d
())&&

281 Ð(*
™N®u
)->
m_ÇlUn™Ty³
==
NAL_UNIT_ACCESS_UNIT_DELIMITER


282 || (*
™N®u
)->
m_ÇlUn™Ty³
==
NAL_UNIT_VPS


283 || (*
™N®u
)->
m_ÇlUn™Ty³
==
NAL_UNIT_SPS


284 || (*
™N®u
)->
m_ÇlUn™Ty³
==
NAL_UNIT_PPS


287 
™N®u
++;

290 
SEIMes§ges
 
loÿlMes§ges
 = 
£iMes§ges
;

291 
SEIMes§ges
 
cu¼’tMes§ges
;

293 #ià
ENC_DEC_TRACE


294 
g_HLST¿ûEÇbË
 = !
‹¡Wr™e
;

299 
cu¼’tMes§ges
 = 
	`exŒaùSeisByTy³
(
loÿlMes§ges
, 
SEI
::
ACTIVE_PARAMETER_SETS
);

300 
	`as£¹
 (
cu¼’tMes§ges
.
	`size
() <= 1);

301 
	`xWr™eSEI
(
NAL_UNIT_PREFIX_SEI
, 
cu¼’tMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

302 
	`xCË¬SEIs
(
cu¼’tMes§ges
, !
‹¡Wr™e
);

305 
cu¼’tMes§ges
 = 
	`exŒaùSeisByTy³
(
loÿlMes§ges
, 
SEI
::
BUFFERING_PERIOD
);

306 
	`as£¹
 (
cu¼’tMes§ges
.
	`size
() <= 1);

307 
	`xWr™eSEI
(
NAL_UNIT_PREFIX_SEI
, 
cu¼’tMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

308 
	`xCË¬SEIs
(
cu¼’tMes§ges
, !
‹¡Wr™e
);

311 
cu¼’tMes§ges
 = 
	`exŒaùSeisByTy³
(
loÿlMes§ges
, 
SEI
::
PICTURE_TIMING
);

312 
	`as£¹
 (
cu¼’tMes§ges
.
	`size
() <= 1);

313 
	`xWr™eSEI
(
NAL_UNIT_PREFIX_SEI
, 
cu¼’tMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

314 
	`xCË¬SEIs
(
cu¼’tMes§ges
, !
‹¡Wr™e
);

317 ià(!
duInfoSeiMes§ges
.
	`em±y
())

319 
cu¼’tMes§ges
.
	`push_back
(
duInfoSeiMes§ges
.
	`äÚt
());

320 ià(!
‹¡Wr™e
)

322 
duInfoSeiMes§ges
.
	`pÝ_äÚt
();

324 
	`xWr™eSEI
(
NAL_UNIT_PREFIX_SEI
, 
cu¼’tMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

325 
	`xCË¬SEIs
(
cu¼’tMes§ges
, !
‹¡Wr™e
);

329 
cu¼’tMes§ges
 = 
	`exŒaùSeisByTy³
(
loÿlMes§ges
, 
SEI
::
SCALABLE_NESTING
);

330 
	`xWr™eSEIS•¬©–y
(
NAL_UNIT_PREFIX_SEI
, 
cu¼’tMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

331 
	`xCË¬SEIs
(
cu¼’tMes§ges
, !
‹¡Wr™e
);

334 
	`xWr™eSEIS•¬©–y
(
NAL_UNIT_PREFIX_SEI
, 
loÿlMes§ges
, 
acûssUn™
, 
™N®u
, 
‹mpÜ®Id
, 
¥s
);

335 
	`xCË¬SEIs
(
loÿlMes§ges
, !
‹¡Wr™e
);

337 ià(!
‹¡Wr™e
)

339 
£iMes§ges
.
	`þ—r
();

341 
	}
}

344 
Void
 
	gTEncGOP
::
xWr™eL—dšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
deque
<
DUD©a
> &
duD©a
)

346 
AcûssUn™
 
‹¡AU
;

347 
SEIMes§ges
 
	gpicTimšgSEIs
 = 
g‘SeisByTy³
(
£iMes§ges
, 
SEI
::
PICTURE_TIMING
);

348 
as£¹
 (
picTimšgSEIs
.
size
() < 2);

349 
SEIPiùu»Timšg
 * 
	gpicTimšg
 = 
picTimšgSEIs
.
em±y
(è? 
NULL
 : (SEIPiùu»Timšg*èpicTimšgSEIs.
äÚt
();

352 
xWr™eL—dšgSEIOrd”ed
(
£iMes§ges
, 
duInfoSeiMes§ges
, 
‹¡AU
, 
‹mpÜ®Id
, 
¥s
, 
Œue
);

354 
xUpd©eDuD©a
(
‹¡AU
, 
duD©a
);

355 
xUpd©eTimšgSEI
(
picTimšg
, 
duD©a
, 
¥s
);

356 
xUpd©eDuInfoSEI
(
duInfoSeiMes§ges
, 
picTimšg
);

358 
xWr™eL—dšgSEIOrd”ed
(
£iMes§ges
, 
duInfoSeiMes§ges
, 
acûssUn™
, 
‹mpÜ®Id
, 
¥s
, 
çl£
);

363 
Void
 
	gTEncGOP
::
	$xWr™eT¿žšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
)

366 
AcûssUn™
::
™”©Ü
 
pos
 = 
acûssUn™
.
	`’d
();

367 
	`xWr™eSEIS•¬©–y
(
NAL_UNIT_SUFFIX_SEI
, 
£iMes§ges
, 
acûssUn™
, 
pos
, 
‹mpÜ®Id
, 
¥s
);

368 
	`d–‘eSEIs
(
£iMes§ges
);

369 
	}
}

371 
Void
 
	gTEncGOP
::
xWr™eDuSEIMes§ges
 (
SEIMes§ges
& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
deque
<
DUD©a
> &
duD©a
)

373 cÚ¡ 
TComHRD
 *
hrd
 = 
¥s
->
g‘VuiP¬am‘”s
()->
g‘HrdP¬am‘”s
();

375 ifÐ
	gm_pcCfg
->
g‘DecodšgUn™InfoSEIEÇbËd
(è&& 
	ghrd
->
g‘SubPicCpbP¬amsP»£ÁFÏg
() )

377 
IÁ
 
	gÇluIdx
 = 0;

378 
	gAcûssUn™
::
™”©Ü
 
Çlu
 = 
acûssUn™
.
begš
();

381 
	gÇluIdx
 < 
	gduD©a
[0].
	gaccumN®sDU
 && 
	gÇlu
!=
acûssUn™
.
’d
())

383 
ÇluIdx
++;

384 
	gÇlu
++;

387 
	gSEIMes§ges
::
™”©Ü
 
duSEI
 = 
duInfoSeiMes§ges
.
begš
();

389 
IÁ
 
	gduIdx
 = 1; duIdx < 
	gduD©a
.
size
(); duIdx++)

391 ià(
	gduSEI
 =ð
duInfoSeiMes§ges
.
’d
())

394 
as£¹
 (
çl£
);

398 
SEIMes§ges
 
	gtmpSEI
;

399 
	gtmpSEI
.
push_back
(*
duSEI
);

400 
xWr™eSEI
(
NAL_UNIT_PREFIX_SEI
, 
tmpSEI
, 
acûssUn™
, 
Çlu
, 
‹mpÜ®Id
, 
¥s
);

402 
	gÇluIdx
++;

403 (
	gÇluIdx
 < 
	gduD©a
[
duIdx
].
	gaccumN®sDU
è&& 
	gÇlu
!=
acûssUn™
.
’d
())

405 
ÇluIdx
++;

406 
	gÇlu
++;

408 
	gduSEI
++;

411 
d–‘eSEIs
(
duInfoSeiMes§ges
);

414 #ià
MCTS_EXTRACTION


415 
Void
 
	gTEncGOP
::
	$xC»©eIRAPL—dšgSEIMes§ges
(
SEIMes§ges
& 
£iMes§ges
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
)

417 
Void
 
TEncGOP
::
	$xC»©eIRAPL—dšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
)

420 
OuutNALUn™
 
	`Çlu
(
NAL_UNIT_PREFIX_SEI
);

422 if(
m_pcCfg
->
	`g‘AùiveP¬am‘”S‘sSEIEÇbËd
())

424 
SEIAùiveP¬am‘”S‘s
 *
£i
 = 
Ãw
 SEIActiveParameterSets;

425 
m_£iEncod”
.
	`š™SEIAùiveP¬am‘”S‘s
 (
£i
, 
m_pcCfg
->
	`g‘VPS
(), 
¥s
);

426 
£iMes§ges
.
	`push_back
(
£i
);

429 if(
m_pcCfg
->
	`g‘F¿mePackšgA¼ªgem’tSEIEÇbËd
())

431 
SEIF¿mePackšg
 *
£i
 = 
Ãw
 SEIFramePacking;

432 
m_£iEncod”
.
	`š™SEIF¿mePackšg
 (
£i
, 
m_iNumPicCoded
);

433 
£iMes§ges
.
	`push_back
(
£i
);

436 if(
m_pcCfg
->
	`g‘Segm’‹dReùF¿mePackšgA¼ªgem’tSEIEÇbËd
())

438 
SEISegm’‹dReùF¿mePackšg
 *
£i
 = 
Ãw
 SEISegmentedRectFramePacking;

439 
m_£iEncod”
.
	`š™SEISegm’‹dReùF¿mePackšg
(
£i
);

440 
£iMes§ges
.
	`push_back
(
£i
);

443 ià(
m_pcCfg
->
	`g‘Di¥ÏyOr›Á©iÚSEIAngË
())

445 
SEIDi¥ÏyOr›Á©iÚ
 *
£i
 = 
Ãw
 SEIDisplayOrientation;

446 
m_£iEncod”
.
	`š™SEIDi¥ÏyOr›Á©iÚ
(
£i
);

447 
£iMes§ges
.
	`push_back
(
£i
);

450 if(
m_pcCfg
->
	`g‘TÚeM­pšgInfoSEIEÇbËd
())

452 
SEITÚeM­pšgInfo
 *
£i
 = 
Ãw
 SEIToneMappingInfo;

453 
m_£iEncod”
.
	`š™SEITÚeM­pšgInfo
 (
£i
);

454 
£iMes§ges
.
	`push_back
(
£i
);

457 if(
m_pcCfg
->
	`g‘TMCTSSEIEÇbËd
())

459 
SEITempMÙiÚCÚ¡¿šedTžeS‘s
 *
£i
 = 
Ãw
 SEITempMotionConstrainedTileSets;

460 
m_£iEncod”
.
	`š™SEITempMÙiÚCÚ¡¿šedTžeS‘s
(
£i
, 
µs
);

461 
£iMes§ges
.
	`push_back
(
£i
);

463 #ià
MCTS_EXTRACTION


464 ià(
m_pcCfg
->
	`g‘TMCTSExŒaùiÚSEIEÇbËd
())

466 
SEIMCTSExŒaùiÚInfoS‘
 *
£i
 = 
Ãw
 SEIMCTSExtractionInfoSet;

467 
m_£iEncod”
.
	`š™SEIMCTSExŒaùiÚInfo
(
£i
, 
vps
, 
¥s
, 
µs
);

468 
£iMes§ges
.
	`push_back
(
£i
);

471 if(
m_pcCfg
->
	`g‘TimeCodeSEIEÇbËd
())

473 
SEITimeCode
 *
£iTimeCode
 = 
Ãw
 SEITimeCode;

474 
m_£iEncod”
.
	`š™SEITimeCode
(
£iTimeCode
);

475 
£iMes§ges
.
	`push_back
(
£iTimeCode
);

478 if(
m_pcCfg
->
	`g‘KÃeSEIEÇbËd
())

480 
SEIKÃeFunùiÚInfo
 *
£i
 = 
Ãw
 SEIKneeFunctionInfo;

481 
m_£iEncod”
.
	`š™SEIKÃeFunùiÚInfo
(
£i
);

482 
£iMes§ges
.
	`push_back
(
£i
);

485 ià(
m_pcCfg
->
	`g‘CcvSEIEÇbËd
())

487 
SEICÚ‹ÁCÞourVÞume
 *
£iCÚ‹ÁCÞourVÞume
 = 
Ãw
 SEIContentColourVolume;

488 
m_£iEncod”
.
	`š™SEICÚ‹ÁCÞourVÞume
(
£iCÚ‹ÁCÞourVÞume
);

489 
£iMes§ges
.
	`push_back
(
£iCÚ‹ÁCÞourVÞume
);

492 #ià
SHUTTER_INTERVAL_SEI_MESSAGE


493 ià(
m_pcCfg
->
	`g‘SiiSEIEÇbËd
())

495 
SEIShu‰”IÁ”v®Info
 *
£iShu‰”IÁ”v®
 = 
Ãw
 SEIShutterIntervalInfo;

496 
m_£iEncod”
.
	`š™SEIShu‰”IÁ”v®Info
(
£iShu‰”IÁ”v®
);

497 
£iMes§ges
.
	`push_back
(
£iShu‰”IÁ”v®
);

501 #ià
SEI_ENCODER_CONTROL


502 #ià!
FGS_RDD5_ENABLE


504 ià(
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIEÇbËd
())

506 
SEIFžmG¿šCh¬aù”i¡ics
 *
£iFGC
 = 
Ãw
 SEIFilmGrainCharacteristics;

507 
m_£iEncod”
.
	`š™SEIFžmG¿šCh¬aù”i¡ics
(
£iFGC
);

508 
£iMes§ges
.
	`push_back
(
£iFGC
);

512 ià(
m_pcCfg
->
	`g‘CLLSEIEÇbËd
())

514 
SEICÚ‹ÁLightLev–Info
 *
£iCLL
 = 
Ãw
 SEIContentLightLevelInfo;

515 
m_£iEncod”
.
	`š™SEICÚ‹ÁLightLev–
(
£iCLL
);

516 
£iMes§ges
.
	`push_back
(
£iCLL
);

519 ià(
m_pcCfg
->
	`g‘Amb›ÁV›wšgEnvœÚm’tSEIEÇbËd
())

521 
SEIAmb›ÁV›wšgEnvœÚm’t
 *
£iAVE
 = 
Ãw
 SEIAmbientViewingEnvironment;

522 
m_£iEncod”
.
	`š™SEIAmb›ÁV›wšgEnvœÚm’t
(
£iAVE
);

523 
£iMes§ges
.
	`push_back
(
£iAVE
);

526 ià(
m_pcCfg
->
	`g‘E½SEIEÇbËd
())

528 
SEIEquœeùªguÏrProjeùiÚ
 *
£i
 = 
Ãw
 SEIEquirectangularProjection;

529 
m_£iEncod”
.
	`š™SEIE½
(
£i
);

530 
£iMes§ges
.
	`push_back
(
£i
);

533 ià(
m_pcCfg
->
	`g‘Sph”eRÙ©iÚSEIEÇbËd
())

535 
SEISph”eRÙ©iÚ
 *
£i
 = 
Ãw
 SEISphereRotation;

536 
m_£iEncod”
.
	`š™SEISph”eRÙ©iÚ
(
£i
);

537 
£iMes§ges
.
	`push_back
(
£i
);

540 ià(
m_pcCfg
->
	`g‘OmniV›wpÜtSEIEÇbËd
())

542 
SEIOmniV›wpÜt
 *
£i
 = 
Ãw
 SEIOmniViewport;

543 
m_£iEncod”
.
	`š™SEIOmniV›wpÜt
(
£i
);

544 
£iMes§ges
.
	`push_back
(
£i
);

546 ià(
m_pcCfg
->
	`g‘CmpSEIEÇbËd
())

548 
SEICubem­ProjeùiÚ
 *
£iCubem­ProjeùiÚ
 = 
Ãw
 SEICubemapProjection;

549 
m_£iEncod”
.
	`š™SEICubem­ProjeùiÚ
(
£iCubem­ProjeùiÚ
);

550 
£iMes§ges
.
	`push_back
(
£iCubem­ProjeùiÚ
);

552 ià(
m_pcCfg
->
	`g‘RwpSEIEÇbËd
())

554 
SEIRegiÚWi£Packšg
 *
£iRegiÚWi£Packšg
 = 
Ãw
 SEIRegionWisePacking;

555 
m_£iEncod”
.
	`š™SEIRegiÚWi£Packšg
(
£iRegiÚWi£Packšg
);

556 
£iMes§ges
.
	`push_back
(
£iRegiÚWi£Packšg
);

558 ià(
m_pcCfg
->
	`g‘FviSEIEÇbËd
())

560 
SEIFisheyeVideoInfo
 *
£i
 = 
Ãw
 SEIFisheyeVideoInfo;

561 
m_£iEncod”
.
	`š™SEIFisheyeVideoInfo
(
£i
);

562 
£iMes§ges
.
	`push_back
(
£i
);

565 if(
m_pcCfg
->
	`g‘Ma¡”šgDi¥ÏySEI
().
cÞourVÞumeSEIEÇbËd
)

567 cÚ¡ 
TComSEIMa¡”šgDi¥Ïy
 &
£iCfg
=
m_pcCfg
->
	`g‘Ma¡”šgDi¥ÏySEI
();

568 
SEIMa¡”šgDi¥ÏyCÞourVÞume
 *
£i
 = 
Ãw
 SEIMasteringDisplayColourVolume;

569 
£i
->
v®ues
 = 
£iCfg
;

570 
£iMes§ges
.
	`push_back
(
£i
);

572 if(
m_pcCfg
->
	`g‘ChromaRe§m¶šgFž‹rHštEÇbËd
())

574 
SEIChromaRe§m¶šgFž‹rHšt
 *
£iChromaRe§m¶šgFž‹rHšt
 = 
Ãw
 SEIChromaResamplingFilterHint;

575 
m_£iEncod”
.
	`š™SEIChromaRe§m¶šgFž‹rHšt
(
£iChromaRe§m¶šgFž‹rHšt
, 
m_pcCfg
->
	`g‘ChromaRe§m¶šgHÜFž‹rIdc
(), m_pcCfg->
	`g‘ChromaRe§m¶šgV”Fž‹rIdc
());

576 
£iMes§ges
.
	`push_back
(
£iChromaRe§m¶šgFž‹rHšt
);

578 if(
m_pcCfg
->
	`g‘SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡icsSEIEÇbË
())

580 
SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
 *
£iAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
 = 
Ãw
 SEIAlternativeTransferCharacteristics;

581 
m_£iEncod”
.
	`š™SEIAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
(
£iAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
);

582 
£iMes§ges
.
	`push_back
(
£iAÉ”ÇtiveT¿nsãrCh¬aù”i¡ics
);

584 
	}
}

586 
Void
 
	gTEncGOP
::
	$xC»©eP”Piùu»SEIMes§ges
 (
IÁ
 
picInGOP
, 
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
, 
TComSliû
 *
¦iû
)

588 ifÐÐ
m_pcCfg
->
	`g‘BufãršgP”iodSEIEÇbËd
(èè&& ( 
¦iû
->
	`g‘SliûTy³
(è=ð
I_SLICE
 ) &&

589 Ð
¦iû
->
	`g‘SPS
()->
	`g‘VuiP¬am‘”sP»£ÁFÏg
() ) &&

590 ÐÐ
¦iû
->
	`g‘SPS
()->
	`g‘VuiP¬am‘”s
()->
	`g‘HrdP¬am‘”s
()->
	`g‘N®HrdP¬am‘”sP»£ÁFÏg
() )

591 || ( 
¦iû
->
	`g‘SPS
()->
	`g‘VuiP¬am‘”s
()->
	`g‘HrdP¬am‘”s
()->
	`g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) )

593 
SEIBufãršgP”iod
 *
bufãršgP”iodSEI
 = 
Ãw
 
	`SEIBufãršgP”iod
();

594 
m_£iEncod”
.
	`š™SEIBufãršgP”iod
(
bufãršgP”iodSEI
, 
¦iû
);

595 
£iMes§ges
.
	`push_back
(
bufãršgP”iodSEI
);

596 
m_bufãršgP”iodSEIP»£ÁInAU
 = 
Œue
;

598 ià(
m_pcCfg
->
	`g‘SÿÏbËNe¡šgSEIEÇbËd
())

600 
SEIBufãršgP”iod
 *
bufãršgP”iodSEIcÝy
 = 
Ãw
 
	`SEIBufãršgP”iod
();

601 
bufãršgP”iodSEI
->
	`cÝyTo
(*
bufãršgP”iodSEIcÝy
);

602 
Ã¡edSeiMes§ges
.
	`push_back
(
bufãršgP”iodSEIcÝy
);

606 ià(
picInGOP
 ==0 && 
m_pcCfg
->
	`g‘SOPDesütiÚSEIEÇbËd
() )

608 
SEISOPDesütiÚ
* 
sÝDesütiÚSEI
 = 
Ãw
 
	`SEISOPDesütiÚ
();

609 
m_£iEncod”
.
	`š™SEISOPDesütiÚ
(
sÝDesütiÚSEI
, 
¦iû
, 
picInGOP
, 
m_iLa¡IDR
, 
m_iGÝSize
);

610 
£iMes§ges
.
	`push_back
(
sÝDesütiÚSEI
);

613 ifÐÐ
m_pcEncTÝ
->
	`g‘Recov”yPoštSEIEÇbËd
(èè&& ( 
¦iû
->
	`g‘SliûTy³
(è=ð
I_SLICE
 ) )

615 ifÐ
m_pcEncTÝ
->
	`g‘G¿du®DecodšgReäeshInfoEÇbËd
(è&& !
¦iû
->
	`g‘R­PicFÏg
() )

618 
SEIRegiÚReäeshInfo
 *
g¿du®DecodšgReäeshInfoSEI
 = 
Ãw
 
	`SEIRegiÚReäeshInfo
();

619 
g¿du®DecodšgReäeshInfoSEI
->
m_gdrFÜegroundFÏg
 = 
Œue
;

620 
£iMes§ges
.
	`push_back
(
g¿du®DecodšgReäeshInfoSEI
);

623 
SEIRecov”yPošt
 *
»cov”yPoštSEI
 = 
Ãw
 
	`SEIRecov”yPošt
();

624 
m_£iEncod”
.
	`š™SEIRecov”yPošt
(
»cov”yPoštSEI
, 
¦iû
);

625 
£iMes§ges
.
	`push_back
(
»cov”yPoštSEI
);

627 ià(
m_pcCfg
->
	`g‘TempÜ®Lev–0IndexSEIEÇbËd
())

629 
SEITempÜ®Lev–0Index
 *
‹mpÜ®Lev–0IndexSEI
 = 
Ãw
 
	`SEITempÜ®Lev–0Index
();

630 
m_£iEncod”
.
	`š™TempÜ®Lev–0IndexSEI
(
‹mpÜ®Lev–0IndexSEI
, 
¦iû
);

631 
£iMes§ges
.
	`push_back
(
‹mpÜ®Lev–0IndexSEI
);

634 ifÐ
m_pcEncTÝ
->
	`g‘NoDi¥ÏySEITLay”
(è&& ( 
¦iû
->
	`g‘TLay”
() >= m_pcEncTop->getNoDisplaySEITLayer() ) )

636 
SEINoDi¥Ïy
 *
£iNoDi¥Ïy
 = 
Ãw
 SEINoDisplay;

637 
£iNoDi¥Ïy
->
m_noDi¥Ïy
 = 
Œue
;

638 
£iMes§ges
.
	`push_back
(
£iNoDi¥Ïy
);

642 ià(!
m_pcCfg
->
	`g‘CÞourRem­InfoSEIFžeRoÙ
().
	`em±y
())

644 
SEICÞourRem­pšgInfo
 *
£iCÞourRem­pšgInfo
 = 
Ãw
 
	`SEICÞourRem­pšgInfo
();

645 cÚ¡ 
BoÞ
 
sucûss
 = 
m_£iEncod”
.
	`š™SEICÞourRem­pšgInfo
(
£iCÞourRem­pšgInfo
, 
¦iû
->
	`g‘POC
() );

647 if(
sucûss
)

649 
£iMes§ges
.
	`push_back
(
£iCÞourRem­pšgInfo
);

653 
d–‘e
 
£iCÞourRem­pšgInfo
;

658 ià(!
m_pcCfg
->
	`g‘AÂÙ©edRegiÚSEIFžeRoÙ
().
	`em±y
())

660 
SEIAÂÙ©edRegiÚs
 *
£iAÂÙ©edRegiÚs
 = 
Ãw
 
	`SEIAÂÙ©edRegiÚs
();

661 cÚ¡ 
BoÞ
 
sucûss
 = 
m_£iEncod”
.
	`š™SEIAÂÙ©edRegiÚs
(
£iAÂÙ©edRegiÚs
, 
¦iû
->
	`g‘POC
());

663 ià(
sucûss
)

665 
£iMes§ges
.
	`push_back
(
£iAÂÙ©edRegiÚs
);

669 
d–‘e
 
£iAÂÙ©edRegiÚs
;

673 ià(!
m_pcCfg
->
	`g‘RegiÚ®Ne¡šgSEIFžeRoÙ
().
	`em±y
())

675 
SEIRegiÚ®Ne¡šg
 *
£iRegiÚ®Ne¡šg
ð
Ãw
 
	`SEIRegiÚ®Ne¡šg
();

676 cÚ¡ 
BoÞ
 
sucûss
 = 
m_£iEncod”
.
	`š™SEIRegiÚ®Ne¡šg
(
£iRegiÚ®Ne¡šg
, 
¦iû
->
	`g‘POC
() );

678 if(
sucûss
)

680 
£iMes§ges
.
	`push_back
(
£iRegiÚ®Ne¡šg
);

684 
d–‘e
 
£iRegiÚ®Ne¡šg
;

687 #ià
FGS_RDD5_ENABLE


689 ià(
m_pcCfg
->
	`g‘FžmG¿šCh¬aù”¡icsSEIEÇbËd
())

691 
SEIFžmG¿šCh¬aù”i¡ics
 *
fgcSEI
 = 
Ãw
 SEIFilmGrainCharacteristics;

692 
m_£iEncod”
.
	`š™SEIFžmG¿šCh¬aù”i¡ics
(
fgcSEI
);

693 
£iMes§ges
.
	`push_back
(
fgcSEI
);

696 
	}
}

698 
Void
 
	gTEncGOP
::
	$xC»©eSÿÏbËNe¡šgSEI
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
)

700 
SEIMes§ges
 
tmpMes§ges
;

701 !
Ã¡edSeiMes§ges
.
	`em±y
())

703 
SEI
* 
£i
=
Ã¡edSeiMes§ges
.
	`äÚt
();

704 
Ã¡edSeiMes§ges
.
	`pÝ_äÚt
();

705 
tmpMes§ges
.
	`push_back
(
£i
);

706 
SEISÿÏbËNe¡šg
 *
Ã¡šgSEI
 = 
Ãw
 
	`SEISÿÏbËNe¡šg
();

707 
m_£iEncod”
.
	`š™SEISÿÏbËNe¡šg
(
Ã¡šgSEI
, 
tmpMes§ges
);

708 
£iMes§ges
.
	`push_back
(
Ã¡šgSEI
);

709 
tmpMes§ges
.
	`þ—r
();

711 
	}
}

713 
Void
 
	gTEncGOP
::
xC»©ePiùu»TimšgSEI
 (
IÁ
 
IRAPGOPid
, 
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
TComSliû
 *
¦iû
, 
BoÞ
 
isF›ld
, 
¡d
::
deque
<
DUD©a
> &
duD©a
)

715 cÚ¡ 
TComVUI
 *
vui
 = 
¦iû
->
g‘SPS
()->
g‘VuiP¬am‘”s
();

716 cÚ¡ 
TComHRD
 *
	ghrd
 = 
vui
->
g‘HrdP¬am‘”s
();

719 ifÐÐ
	gm_pcCfg
->
g‘Piùu»TimšgSEIEÇbËd
(è|| m_pcCfg->
g‘DecodšgUn™InfoSEIEÇbËd
() ) &&

720 Ð
	g¦iû
->
g‘SPS
()->
g‘VuiP¬am‘”sP»£ÁFÏg
() ) &&

721 Ð
	ghrd
->
g‘N®HrdP¬am‘”sP»£ÁFÏg
(è|| hrd->
g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) )

723 
IÁ
 
	gpicS±DpbOuutDuD–ay
 = 0;

724 
SEIPiùu»Timšg
 *
	gpiùu»TimšgSEI
 = 
Ãw
 SEIPictureTiming();

727 ifÐ
	ghrd
->
g‘SubPicCpbP¬amsP»£ÁFÏg
() )

729 
UIÁ
 
	gnumDU
 = (UIÁè
duD©a
.
size
();

730 
	gpiùu»TimšgSEI
->
	gm_numDecodšgUn™sMšus1
 = ( 
numDU
 - 1 );

731 
	gpiùu»TimšgSEI
->
	gm_duCommÚCpbRemov®D–ayFÏg
 = 
çl£
;

732 
	gpiùu»TimšgSEI
->
	gm_numN®usInDuMšus1
.
»size
Ð
numDU
 );

733 
	gpiùu»TimšgSEI
->
	gm_duCpbRemov®D–ayMšus1
.
»size
Ð
numDU
 );

735 
	gpiùu»TimšgSEI
->
	gm_auCpbRemov®D–ay
 = 
¡d
::
mš
<
IÁ
>(¡d::
max
<IÁ>(1, 
	gm_tÙ®Coded
 - 
	gm_Ï¡BPSEI
), 
	g¡©ic_ÿ¡
<
	gIÁ
>(
pow
(2, 
¡©ic_ÿ¡
<
DoubË
>(
hrd
->
g‘CpbRemov®D–ayL’gthMšus1
()+1))));

736 
	gpiùu»TimšgSEI
->
	gm_picDpbOuutD–ay
 = 
¦iû
->
g‘SPS
()->
g‘NumReÜd”Pics
(¦iû->g‘SPS()->
g‘MaxTLay”s
()-1è+ sliû->
g‘POC
(è- 
m_tÙ®Coded
;

737 if(
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
(è&& 
	gIRAPGOPid
 > 0 && IRAPGOPid < 
	gm_iGÝSize
)

740 
	gpiùu»TimšgSEI
->
	gm_picDpbOuutD–ay
 ++;

742 
IÁ
 
	gçùÜ
 = 
hrd
->
g‘TickDivisÜMšus2
() + 2;

743 
	gpiùu»TimšgSEI
->
	gm_picDpbOuutDuD–ay
 = 
çùÜ
 * 
piùu»TimšgSEI
->
m_picDpbOuutD–ay
;

744 ifÐ
	gm_pcCfg
->
g‘DecodšgUn™InfoSEIEÇbËd
() )

746 
	gpicS±DpbOuutDuD–ay
 = 
çùÜ
 * 
piùu»TimšgSEI
->
m_picDpbOuutD–ay
;

748 ià(
	gm_bufãršgP”iodSEIP»£ÁInAU
)

750 
	gm_Ï¡BPSEI
 = 
m_tÙ®Coded
;

753 ifÐ
	ghrd
->
g‘SubPicCpbP¬amsP»£ÁFÏg
() )

755 
IÁ
 
	gi
;

756 
UIÁ64
 
	gui64Tmp
;

757 
UIÁ
 
	guiP»v
 = 0;

758 
UIÁ
 
	gnumDU
 = ( 
piùu»TimšgSEI
->
m_numDecodšgUn™sMšus1
 + 1 );

759 
	g¡d
::
veùÜ
<
UIÁ
> &
rDuCpbRemov®D–ayMšus1
 = 
piùu»TimšgSEI
->
m_duCpbRemov®D–ayMšus1
;

760 
UIÁ
 
	gmaxDiff
 = ( 
hrd
->
g‘TickDivisÜMšus2
() + 2 ) - 1;

762  
	gi
 = 0; i < 
	gnumDU
; i ++ )

764 
	gpiùu»TimšgSEI
->
	gm_numN®usInDuMšus1
[ 
i
 ] = ( i =ð0 ) ? ( 
duD©a
[i].
accumN®sDU
 - 1 ) : ( duData[i].accumNalsDU- duData[i-1].accumNalsDU - 1 );

767 ifÐ
	gnumDU
 == 1 )

769 
rDuCpbRemov®D–ayMšus1
[ 0 ] = 0;

773 
	grDuCpbRemov®D–ayMšus1
[ 
numDU
 - 1 ] = 0;

774 
UIÁ
 
	gtmp
 = 0;

775 
UIÁ
 
	gaccum
 = 0;

777  
	gi
 = ( 
numDU
 - 2 ); i >= 0; i -- )

779 
	gui64Tmp
 = ( ( ( 
duD©a
[
numDU
 - 1].
accumB™sDU
 - duD©a[
i
].accumB™sDU ) * ( 
vui
->
g‘TimšgInfo
()->
g‘TimeSÿË
(è/ vui->g‘TimšgInfo()->
g‘NumUn™sInTick
(èè* ( 
hrd
->
g‘TickDivisÜMšus2
(è+ 2 ) ) / ( 
m_pcCfg
->
g‘T¬g‘B™¿‹
() ) );

780 ifÐ(
	gUIÁ
)
	gui64Tmp
 > 
	gmaxDiff
 )

782 
	gtmp
 ++;

785 
	guiP»v
 = 0;

787 
UIÁ
 
	gæag
 = 0;

788  
	gi
 = ( 
numDU
 - 2 ); i >= 0; i -- )

790 
	gæag
 = 0;

791 
	gui64Tmp
 = ( ( ( 
duD©a
[
numDU
 - 1].
accumB™sDU
 - duD©a[
i
].accumB™sDU ) * ( 
vui
->
g‘TimšgInfo
()->
g‘TimeSÿË
(è/ vui->g‘TimšgInfo()->
g‘NumUn™sInTick
(èè* ( 
hrd
->
g‘TickDivisÜMšus2
(è+ 2 ) ) / ( 
m_pcCfg
->
g‘T¬g‘B™¿‹
() ) );

793 ifÐ(
	gUIÁ
)
	gui64Tmp
 > 
	gmaxDiff
 )

795 if(
	guiP»v
 >ð
maxDiff
 - 
tmp
)

797 
ui64Tmp
 = 
uiP»v
 + 1;

798 
	gæag
 = 1;

800 
	gui64Tmp
 = 
maxDiff
 - 
tmp
 + 1;

802 
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] = (
UIÁ
)
ui64Tmp
 - 
uiP»v
 - 1;

803 ifÐ(
	gIÁ
)
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] < 0 )

805 
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] = 0;

807 ià(
	gtmp
 > 0 && 
	gæag
 == 1)

809 
tmp
 --;

811 
	gaccum
 +ð
rDuCpbRemov®D–ayMšus1
[ 
i
 ] + 1;

812 
	guiP»v
 = 
accum
;

817 ifÐ
	gm_pcCfg
->
g‘Piùu»TimšgSEIEÇbËd
() )

819 
	gpiùu»TimšgSEI
->
	gm_picSŒuù
 = (
isF›ld
 && 
¦iû
->
g‘Pic
()->
isTÝF›ld
())? 1 : isField? 2 : 0;

820 
	g£iMes§ges
.
push_back
(
piùu»TimšgSEI
);

822 iàÐ
	gm_pcCfg
->
g‘SÿÏbËNe¡šgSEIEÇbËd
() )

824 
SEIPiùu»Timšg
 *
	gpiùu»TimšgSEIcÝy
 = 
Ãw
 SEIPictureTiming();

825 
	gpiùu»TimšgSEI
->
cÝyTo
(*
piùu»TimšgSEIcÝy
);

826 
	gÃ¡edSeiMes§ges
.
push_back
(
piùu»TimšgSEIcÝy
);

830 ifÐ
	gm_pcCfg
->
g‘DecodšgUn™InfoSEIEÇbËd
(è&& 
	ghrd
->
g‘SubPicCpbP¬amsP»£ÁFÏg
() )

832  
IÁ
 
	gi
 = 0; i < ( 
	gpiùu»TimšgSEI
->
	gm_numDecodšgUn™sMšus1
 + 1 ); i ++ )

834 
SEIDecodšgUn™Info
 *
	gduInfoSEI
 = 
Ãw
 SEIDecodingUnitInfo();

835 
	gduInfoSEI
->
	gm_decodšgUn™Idx
 = 
i
;

836 
	gduInfoSEI
->
	gm_duS±CpbRemov®D–ay
 = 
piùu»TimšgSEI
->
m_duCpbRemov®D–ayMšus1
[
i
] + 1;

837 
	gduInfoSEI
->
	gm_dpbOuutDuD–ayP»£ÁFÏg
 = 
çl£
;

838 
	gduInfoSEI
->
	gm_picS±DpbOuutDuD–ay
 = 
picS±DpbOuutDuD–ay
;

840 
	gduInfoSeiMes§ges
.
push_back
(
duInfoSEI
);

844 ifÐ!
	gm_pcCfg
->
g‘Piùu»TimšgSEIEÇbËd
(è&& 
	gpiùu»TimšgSEI
 )

846 
d–‘e
 
	gpiùu»TimšgSEI
;

851 
Void
 
	gTEncGOP
::
xUpd©eDuD©a
(
AcûssUn™
 &
‹¡AU
, 
¡d
::
deque
<
DUD©a
> &
duD©a
)

853 ià(
duD©a
.
em±y
())

858 
UIÁ
 
	gnumN®Un™s
 = (UIÁ)
‹¡AU
.
size
();

859 
UIÁ
 
	gnumRBSPBy‹s
 = 0;

860 
	gAcûssUn™
::
cÚ¡_™”©Ü
 
™
 = 
‹¡AU
.
begš
(); 
	g™
 !ð‹¡AU.
’d
(); it++)

862 
	gnumRBSPBy‹s
 +ð
UIÁ
((*
™
)->
m_ÇlUn™D©a
.
¡r
().
size
());

864 
	gduD©a
[0].
	gaccumB™sDU
 +ðÐ
numRBSPBy‹s
 << 3 );

865 
	gduD©a
[0].
	gaccumN®sDU
 +ð
numN®Un™s
;

869 
IÁ
 
	gi
=1; i<
	gduD©a
.
size
(); i++)

871 ià(
	gm_pcCfg
->
g‘DecodšgUn™InfoSEIEÇbËd
())

873 
	gnumN®Un™s
 += 1;

874 
	gnumRBSPBy‹s
 += ( 5 << 3 );

876 
	gduD©a
[
i
].
	gaccumB™sDU
 +ð
numRBSPBy‹s
;

877 
	gduD©a
[
i
].
	gaccumN®sDU
 +ð
numN®Un™s
;

881 ià(
	gm_pcCfg
->
g‘DecodedPiùu»HashSEITy³
()!=
HASHTYPE_NONE
)

883 
duD©a
.
back
().
accumB™sDU
 += ( 20 << 3 );

884 
	gduD©a
.
back
().
	gaccumN®sDU
 += 1;

888 
Void
 
	gTEncGOP
::
xUpd©eTimšgSEI
(
SEIPiùu»Timšg
 *
piùu»TimšgSEI
, 
¡d
::
deque
<
DUD©a
> &
duD©a
, cÚ¡ 
TComSPS
 *
¥s
)

890 ià(!
	gpiùu»TimšgSEI
)

894 cÚ¡ 
TComVUI
 *
	gvui
 = 
¥s
->
g‘VuiP¬am‘”s
();

895 cÚ¡ 
TComHRD
 *
	ghrd
 = 
vui
->
g‘HrdP¬am‘”s
();

896 ifÐ
	ghrd
->
g‘SubPicCpbP¬amsP»£ÁFÏg
() )

898 
IÁ
 
	gi
;

899 
UIÁ64
 
	gui64Tmp
;

900 
UIÁ
 
	guiP»v
 = 0;

901 
UIÁ
 
	gnumDU
 = ( 
piùu»TimšgSEI
->
m_numDecodšgUn™sMšus1
 + 1 );

902 
	g¡d
::
veùÜ
<
UIÁ
> &
rDuCpbRemov®D–ayMšus1
 = 
piùu»TimšgSEI
->
m_duCpbRemov®D–ayMšus1
;

903 
UIÁ
 
	gmaxDiff
 = ( 
hrd
->
g‘TickDivisÜMšus2
() + 2 ) - 1;

905  
	gi
 = 0; i < 
	gnumDU
; i ++ )

907 
	gpiùu»TimšgSEI
->
	gm_numN®usInDuMšus1
[ 
i
 ] = ( i =ð0 ) ? ( 
duD©a
[i].
accumN®sDU
 - 1 ) : ( duData[i].accumNalsDU- duData[i-1].accumNalsDU - 1 );

910 ifÐ
	gnumDU
 == 1 )

912 
rDuCpbRemov®D–ayMšus1
[ 0 ] = 0;

916 
	grDuCpbRemov®D–ayMšus1
[ 
numDU
 - 1 ] = 0;

917 
UIÁ
 
	gtmp
 = 0;

918 
UIÁ
 
	gaccum
 = 0;

920  
	gi
 = ( 
numDU
 - 2 ); i >= 0; i -- )

922 
	gui64Tmp
 = ( ( ( 
duD©a
[
numDU
 - 1].
accumB™sDU
 - duD©a[
i
].accumB™sDU ) * ( 
vui
->
g‘TimšgInfo
()->
g‘TimeSÿË
(è/ vui->g‘TimšgInfo()->
g‘NumUn™sInTick
(èè* ( 
hrd
->
g‘TickDivisÜMšus2
(è+ 2 ) ) / ( 
m_pcCfg
->
g‘T¬g‘B™¿‹
() ) );

923 ifÐ(
	gUIÁ
)
	gui64Tmp
 > 
	gmaxDiff
 )

925 
	gtmp
 ++;

928 
	guiP»v
 = 0;

930 
UIÁ
 
	gæag
 = 0;

931  
	gi
 = ( 
numDU
 - 2 ); i >= 0; i -- )

933 
	gæag
 = 0;

934 
	gui64Tmp
 = ( ( ( 
duD©a
[
numDU
 - 1].
accumB™sDU
 - duD©a[
i
].accumB™sDU ) * ( 
vui
->
g‘TimšgInfo
()->
g‘TimeSÿË
(è/ vui->g‘TimšgInfo()->
g‘NumUn™sInTick
(èè* ( 
hrd
->
g‘TickDivisÜMšus2
(è+ 2 ) ) / ( 
m_pcCfg
->
g‘T¬g‘B™¿‹
() ) );

936 ifÐ(
	gUIÁ
)
	gui64Tmp
 > 
	gmaxDiff
 )

938 if(
	guiP»v
 >ð
maxDiff
 - 
tmp
)

940 
ui64Tmp
 = 
uiP»v
 + 1;

941 
	gæag
 = 1;

943 
	gui64Tmp
 = 
maxDiff
 - 
tmp
 + 1;

945 
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] = (
UIÁ
)
ui64Tmp
 - 
uiP»v
 - 1;

946 ifÐ(
	gIÁ
)
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] < 0 )

948 
	grDuCpbRemov®D–ayMšus1
[ 
i
 ] = 0;

950 ià(
	gtmp
 > 0 && 
	gæag
 == 1)

952 
tmp
 --;

954 
	gaccum
 +ð
rDuCpbRemov®D–ayMšus1
[ 
i
 ] + 1;

955 
	guiP»v
 = 
accum
;

960 
Void
 
	gTEncGOP
::
	$xUpd©eDuInfoSEI
(
SEIMes§ges
 &
duInfoSeiMes§ges
, 
SEIPiùu»Timšg
 *
piùu»TimšgSEI
)

962 ià(
duInfoSeiMes§ges
.
	`em±y
(è|| (
piùu»TimšgSEI
 =ð
NULL
))

967 
IÁ
 
i
=0;

969 
SEIMes§ges
::
™”©Ü
 
du
 = 
duInfoSeiMes§ges
.
	`begš
(); du!ðduInfoSeiMes§ges.
	`’d
(); du++)

971 
SEIDecodšgUn™Info
 *
duInfoSEI
 = (SEIDecodšgUn™Info*è(*
du
);

972 
duInfoSEI
->
m_decodšgUn™Idx
 = 
i
;

973 
duInfoSEI
->
m_duS±CpbRemov®D–ay
 = 
piùu»TimšgSEI
->
m_duCpbRemov®D–ayMšus1
[
i
] + 1;

974 
duInfoSEI
->
m_dpbOuutDuD–ayP»£ÁFÏg
 = 
çl£
;

975 
i
++;

977 
	}
}

979 
Void


980 
	$ÿbac_z”o_wÜd_·ddšg
(
TComSliû
 *cÚ¡ 
pcSliû
, 
TComPic
 *cÚ¡ 
pcPic
, cÚ¡ 
¡d
::
size_t
 
bšCouÁsInN®Un™s
, cÚ¡ std::size_ˆ
numBy‹sInVþN®Un™s
, std::
o¡ršg¡»am
 &
ÇlUn™D©a
, cÚ¡ 
BoÞ
 
ÿbacZ”oWÜdPaddšgEÇbËd
)

982 cÚ¡ 
TComSPS
 &
¥s
=*(
pcSliû
->
	`g‘SPS
());

983 cÚ¡ 
IÁ
 
log2subWidthCxsubHeightC
 = (
pcPic
->
	`g‘CompÚ’tSÿËX
(
COMPONENT_Cb
)+pcPic->
	`g‘CompÚ’tSÿËY
(COMPONENT_Cb));

984 cÚ¡ 
IÁ
 
mšCuWidth
 = 
pcPic
->
	`g‘MšCUWidth
();

985 cÚ¡ 
IÁ
 
mšCuHeight
 = 
pcPic
->
	`g‘MšCUHeight
();

986 cÚ¡ 
IÁ
 
·ddedWidth
 = ((
¥s
.
	`g‘PicWidthInLumaSam¶es
(è+ 
mšCuWidth
 - 1) / minCuWidth) * minCuWidth;

987 cÚ¡ 
IÁ
 
·ddedHeight
ð((
¥s
.
	`g‘PicHeightInLumaSam¶es
(è+ 
mšCuHeight
 - 1) / minCuHeight) * minCuHeight;

988 cÚ¡ 
IÁ
 
¿wB™s
 = 
·ddedWidth
 * 
·ddedHeight
 *

989 (
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
è+ ((2*¥s.g‘B™D•th(
CHANNEL_TYPE_CHROMA
))>>
log2subWidthCxsubHeightC
));

990 cÚ¡ 
¡d
::
size_t
 
th»shÞd
 = (32/3)*
numBy‹sInVþN®Un™s
 + (
¿wB™s
/32);

991 ià(
bšCouÁsInN®Un™s
 >ð
th»shÞd
)

994 cÚ¡ 
¡d
::
size_t
 
rg‘NumBy‹sInVþN®Un™s
 = ((
bšCouÁsInN®Un™s
 - (
¿wB™s
/32))*3+31)/32;

996 ià(
rg‘NumBy‹sInVþN®Un™s
>
numBy‹sInVþN®Un™s
)

998 cÚ¡ 
¡d
::
size_t
 
numb”OfAdd™iÚ®By‹sN“ded
=
rg‘NumBy‹sInVþN®Un™s
 - 
numBy‹sInVþN®Un™s
;

999 cÚ¡ 
¡d
::
size_t
 
numb”OfAdd™iÚ®CabacZ”oWÜds
=(
numb”OfAdd™iÚ®By‹sN“ded
+2)/3;

1000 cÚ¡ 
¡d
::
size_t
 
numb”OfAdd™iÚ®CabacZ”oBy‹s
=
numb”OfAdd™iÚ®CabacZ”oWÜds
*3;

1001 ià(
ÿbacZ”oWÜdPaddšgEÇbËd
)

1003 
¡d
::
veùÜ
<
UCh¬
> 
	`z”oBy‹sPaddšg
(
numb”OfAdd™iÚ®CabacZ”oBy‹s
, 
	`UCh¬
(0));

1004 
¡d
::
size_t
 
i
=0; i<
numb”OfAdd™iÚ®CabacZ”oWÜds
; i++)

1006 
z”oBy‹sPaddšg
[
i
*3+2]=3;

1008 
ÇlUn™D©a
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(&(
z”oBy‹sPaddšg
[0])), 
numb”OfAdd™iÚ®CabacZ”oBy‹s
);

1009 
	`´štf
("Addšg %d by‹ oà·ddšg\n", 
	`UIÁ
(
numb”OfAdd™iÚ®CabacZ”oWÜds
*3));

1013 
	`´štf
("Snd¬d would‚Üm®ly„equœaddšg %d by‹ oà·ddšg\n", 
	`UIÁ
(
numb”OfAdd™iÚ®CabacZ”oWÜds
*3));

1017 
	}
}

1019 þas 
	cEffic›ÁF›ldIRAPM­pšg


1021 
	m´iv©e
:

1022 
IÁ
 
IRAPGOPid
;

1023 
BoÞ
 
	mIRAPtoReÜd”
;

1024 
BoÞ
 
	msw­IRAPFÜw¬d
;

1026 
	mpublic
:

1027 
	$Effic›ÁF›ldIRAPM­pšg
() :

1028 
	`IRAPGOPid
(-1),

1029 
	`IRAPtoReÜd”
(
çl£
),

1030 
	$sw­IRAPFÜw¬d
(
çl£
)

1033 
Void
 
	`š™Ÿlize
(cÚ¡ 
BoÞ
 
isF›ld
, cÚ¡ 
IÁ
 
gÝSize
, cÚ¡ IÁ 
POCLa¡
, cÚ¡ IÁ 
numPicRcvd
, cÚ¡ IÁ 
Ï¡IDR
, 
TEncGOP
 *
pEncGÝ
, 
TEncCfg
 *
pCfg
);

1035 
IÁ
 
	`adju¡GOPid
(cÚ¡ IÁ 
gÝID
);

1036 
IÁ
 
	`»¡ÜeGOPid
(cÚ¡ IÁ 
gÝID
);

1037 
IÁ
 
	$G‘IRAPGOPid
(ècÚ¡ {  
IRAPGOPid
; 
	}
}

1040 
Void
 
	gEffic›ÁF›ldIRAPM­pšg
::
	$š™Ÿlize
(cÚ¡ 
BoÞ
 
isF›ld
, cÚ¡ 
IÁ
 
gÝSize
, cÚ¡ IÁ 
POCLa¡
, cÚ¡ IÁ 
numPicRcvd
, cÚ¡ IÁ 
Ï¡IDR
, 
TEncGOP
 *
pEncGÝ
, 
TEncCfg
 *
pCfg
 )

1042 if(
isF›ld
)

1044 
IÁ
 
pocCu¼
;

1045  
IÁ
 
iGOPid
=0; iGOPid < 
gÝSize
; iGOPid++ )

1048 if(
POCLa¡
 == 0)

1050 
pocCu¼
=0;

1052 if(
POCLa¡
 =ð1 && 
isF›ld
)

1054 
pocCu¼
 = 1;

1058 
pocCu¼
 = 
POCLa¡
 - 
numPicRcvd
 + 
pCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_POC
 - 
isF›ld
;

1062 
N®Un™Ty³
 
tmpUn™Ty³
 = 
pEncGÝ
->
	`g‘N®Un™Ty³
(
pocCu¼
, 
Ï¡IDR
, 
isF›ld
);

1063 if(
tmpUn™Ty³
 >ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 &&mpUn™Ty³ <ð
NAL_UNIT_CODED_SLICE_CRA
)

1065 if(
pocCu¼
%2 =ð0 && 
iGOPid
 < 
gÝSize
-1 && 
pCfg
->
	`g‘GOPEÁry
(iGOPid).
m_POC
 ==…Cfg->getGOPEntry(iGOPid+1).m_POC-1)

1067 
IRAPGOPid
 = 
iGOPid
;

1068 
IRAPtoReÜd”
 = 
Œue
;

1069 
sw­IRAPFÜw¬d
 = 
Œue
;

1072 if(
pocCu¼
%2 !ð0 && 
iGOPid
 > 0 && 
pCfg
->
	`g‘GOPEÁry
(iGOPid).
m_POC
 ==…Cfg->getGOPEntry(iGOPid-1).m_POC+1)

1075 
IRAPGOPid
 = 
iGOPid
;

1076 
IRAPtoReÜd”
 = 
Œue
;

1077 
sw­IRAPFÜw¬d
 = 
çl£
;

1083 
	}
}

1085 
IÁ
 
	gEffic›ÁF›ldIRAPM­pšg
::
	$adju¡GOPid
(cÚ¡ 
IÁ
 
GOPid
)

1087 if(
IRAPtoReÜd”
)

1089 if(
sw­IRAPFÜw¬d
)

1091 if(
GOPid
 =ð
IRAPGOPid
)

1093  
IRAPGOPid
 +1;

1095 if(
GOPid
 =ð
IRAPGOPid
 +1)

1097  
IRAPGOPid
;

1102 if(
GOPid
 =ð
IRAPGOPid
 -1)

1104  
IRAPGOPid
;

1106 if(
GOPid
 =ð
IRAPGOPid
)

1108  
IRAPGOPid
 -1;

1112  
GOPid
;

1113 
	}
}

1115 
IÁ
 
	gEffic›ÁF›ldIRAPM­pšg
::
	$»¡ÜeGOPid
(cÚ¡ 
IÁ
 
GOPid
)

1117 if(
IRAPtoReÜd”
)

1119 if(
sw­IRAPFÜw¬d
)

1121 if(
GOPid
 =ð
IRAPGOPid
)

1123 
IRAPtoReÜd”
 = 
çl£
;

1124  
IRAPGOPid
 +1;

1126 if(
GOPid
 =ð
IRAPGOPid
 +1)

1128  
GOPid
 -1;

1133 if(
GOPid
 =ð
IRAPGOPid
)

1135  
IRAPGOPid
 -1;

1137 if(
GOPid
 =ð
IRAPGOPid
 -1)

1139 
IRAPtoReÜd”
 = 
çl£
;

1140  
IRAPGOPid
;

1144  
GOPid
;

1145 
	}
}

1148 
UIÁ
 
	$ÿlcuÏ‹CÞloÿ‹dFromL0FÏg
(cÚ¡ 
TComSliû
 *
pSliû
)

1150 cÚ¡ 
IÁ
 
»fIdx
 = 0;

1151 cÚ¡ 
TComPic
 *
»fPicL0
 = 
pSliû
->
	`g‘RefPic
(
REF_PIC_LIST_0
, 
»fIdx
);

1152 cÚ¡ 
TComPic
 *
»fPicL1
 = 
pSliû
->
	`g‘RefPic
(
REF_PIC_LIST_1
, 
»fIdx
);

1153  
»fPicL0
->
	`g‘Sliû
(0)->
	`g‘SliûQp
(è> 
»fPicL1
->getSlice(0)->getSliceQp();

1154 
	}
}

1157 
Void


1158 
	$´štHash
(cÚ¡ 
HashTy³
 
hashTy³
, cÚ¡ 
¡d
::
¡ršg
 &
dige¡SŒ
)

1160 cÚ¡ 
TCh¬
 *
decodedPiùu»HashModeName
;

1161 
hashTy³
)

1163 
HASHTYPE_MD5
:

1164 
decodedPiùu»HashModeName
 = "MD5";

1166 
HASHTYPE_CRC
:

1167 
decodedPiùu»HashModeName
 = "CRC";

1169 
HASHTYPE_CHECKSUM
:

1170 
decodedPiùu»HashModeName
 = "Checksum";

1173 
decodedPiùu»HashModeName
 = 
NULL
;

1176 ià(
decodedPiùu»HashModeName
 !ð
NULL
)

1178 ià(
dige¡SŒ
.
	`em±y
())

1180 
	`´štf
(" [%s:%s]", 
decodedPiùu»HashModeName
, "?");

1184 
	`´štf
(" [%s:%s]", 
decodedPiùu»HashModeName
, 
dige¡SŒ
.
	`c_¡r
());

1187 
	}
}

1193 
Void
 
	gTEncGOP
::
com´essGOP
Ð
IÁ
 
iPOCLa¡
, IÁ 
iNumPicRcvd
, 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
,

1194 
TComLi¡
<
TComPicYuv
*>& 
rcLi¡PicYuvRecOut
, 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sInGOP
,

1195 
BoÞ
 
isF›ld
, BoÞ 
isTff
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
 )

1199 
TComPic
* 
pcPic
 = 
NULL
;

1200 
TComPicYuv
* 
	gpcPicYuvRecOut
;

1201 
TComSliû
* 
	gpcSliû
;

1202 
TComOuutB™¡»am
 *
	gpcB™¡»amRedœeù
;

1203 
	gpcB™¡»amRedœeù
 = 
Ãw
 
TComOuutB™¡»am
;

1204 
	gAcûssUn™
::
™”©Ü
 
™LoÿtiÚToPushSliûH—d”NALU
;

1206 
xIn™GOP
Ð
iPOCLa¡
, 
iNumPicRcvd
, 
isF›ld
 );

1208 
	gm_iNumPicCoded
 = 0;

1209 
SEIMes§ges
 
	gËadšgSeiMes§ges
;

1210 
SEIMes§ges
 
	gÃ¡edSeiMes§ges
;

1211 
SEIMes§ges
 
	gduInfoSeiMes§ges
;

1212 
SEIMes§ges
 
	gŒažšgSeiMes§ges
;

1213 
	g¡d
::
deque
<
DUD©a
> 
duD©a
;

1214 
SEIDecodšgUn™Info
 
	gdecodšgUn™InfoSEI
;

1216 
Effic›ÁF›ldIRAPM­pšg
 
	geffF›ldIRAPM­
;

1217 ià(
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1219 
	geffF›ldIRAPM­
.
š™Ÿlize
(
isF›ld
, 
m_iGÝSize
, 
iPOCLa¡
, 
iNumPicRcvd
, 
m_iLa¡IDR
, 
this
, 
m_pcCfg
);

1223  
IÁ
 
	giGOPid
=0; iGOPid < 
	gm_iGÝSize
; iGOPid++ )

1225 
	gm_pcCfg
->
£tEncodedFÏg
(
iGOPid
, 
çl£
);

1228  
IÁ
 
	giGOPid
=0; iGOPid < 
	gm_iGÝSize
; iGOPid++ )

1230 ià(
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1232 
	giGOPid
=
effF›ldIRAPM­
.
adju¡GOPid
(
iGOPid
);

1236 
þock_t
 
	giBefÜeTime
 = 
þock
();

1240 
IÁ
 
	giTimeOff£t
;

1241 
IÁ
 
	gpocCu¼
;

1243 if(
	giPOCLa¡
 == 0)

1245 
pocCu¼
=0;

1246 
	giTimeOff£t
 = 1;

1248 if(
	giPOCLa¡
 =ð1 && 
isF›ld
)

1250 
pocCu¼
 = 1;

1251 
	giTimeOff£t
 = 1;

1255 
	gpocCu¼
 = 
iPOCLa¡
 - 
iNumPicRcvd
 + 
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_POC
 - ((
isF›ld
 && 
m_iGÝSize
>1) ? 1:0);

1256 
	giTimeOff£t
 = 
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_POC
;

1259 if(
	gpocCu¼
>=
m_pcCfg
->
g‘F¿mesToBeEncoded
())

1261 ià(
m_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1263 
iGOPid
=
effF›ldIRAPM­
.
»¡ÜeGOPid
(iGOPid);

1268 ifÐ
g‘N®Un™Ty³
(
pocCu¼
, 
m_iLa¡IDR
, 
isF›ld
è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL
 || g‘N®Un™Ty³ÕocCu¼, m_iLa¡IDR, isF›ldè=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
 )

1270 
m_iLa¡IDR
 = 
pocCu¼
;

1273 
	gacûssUn™sInGOP
.
push_back
(
AcûssUn™
());

1274 
	gAcûssUn™
& 
	gacûssUn™
 = 
acûssUn™sInGOP
.
back
();

1275 
xG‘Bufãr
Ð
rcLi¡Pic
, 
rcLi¡PicYuvRecOut
, 
iNumPicRcvd
, 
iTimeOff£t
, 
pcPic
, 
pcPicYuvRecOut
, 
pocCu¼
, 
isF›ld
 );

1277 #ià
REDUCED_ENCODER_MEMORY


1278 
	gpcPic
->
´•¬eFÜRecÚ¡ruùiÚ
();

1282 
	gpcPic
->
þ—rSliûBufãr
();

1283 
	gpcPic
->
®loÿ‹NewSliû
();

1284 
	gm_pcSliûEncod”
->
£tSliûIdx
(0);

1285 
	gpcPic
->
£tCu¼SliûIdx
(0);

1287 
	gm_pcSliûEncod”
->
š™EncSliû
 ( 
pcPic
, 
iPOCLa¡
, 
pocCu¼
, 
iGOPid
, 
pcSliû
, 
isF›ld
 );

1289 
	gpcSliû
->
£tLa¡IDR
(
m_iLa¡IDR
);

1290 
	gpcSliû
->
£tSliûIdx
(0);

1292 
	gpcSliû
->
£tLFCrossSliûBound¬yFÏg
Ð
pcSliû
->
g‘PPS
()->
g‘LoÝFž‹rAüossSliûsEÇbËdFÏg
() );

1294 if(
	gpcSliû
->
g‘SliûTy³
()==
B_SLICE
&&
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_¦iûTy³
=='P')

1296 
pcSliû
->
£tSliûTy³
(
P_SLICE
);

1298 if(
	gpcSliû
->
g‘SliûTy³
()==
B_SLICE
&&
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_¦iûTy³
=='I')

1300 
pcSliû
->
£tSliûTy³
(
I_SLICE
);

1304 
	gpcSliû
->
£tN®Un™Ty³
(
g‘N®Un™Ty³
(
pocCu¼
, 
m_iLa¡IDR
, 
isF›ld
));

1305 if(
	gpcSliû
->
g‘TempÜ®Lay”NÚReã»nûFÏg
())

1307 ià(
	gpcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_TRAIL_R
 &&

1308 !(
m_iGÝSize
 =ð1 && 
pcSliû
->
g‘SliûTy³
(è=ð
I_SLICE
))

1311 
pcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_TRAIL_N
);

1313 if(
	gpcSliû
->
g‘N®Un™Ty³
()==
NAL_UNIT_CODED_SLICE_RADL_R
)

1315 
pcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_RADL_N
);

1317 if(
	gpcSliû
->
g‘N®Un™Ty³
()==
NAL_UNIT_CODED_SLICE_RASL_R
)

1319 
pcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_RASL_N
);

1323 ià(
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1325 iàÐ
	gpcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


1326 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


1327 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


1328 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


1329 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


1330 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 )

1332 
m_assocŸ‹dIRAPTy³
 = 
pcSliû
->
g‘N®Un™Ty³
();

1333 
	gm_assocŸ‹dIRAPPOC
 = 
pocCu¼
;

1335 
	gpcSliû
->
£tAssocŸ‹dIRAPTy³
(
m_assocŸ‹dIRAPTy³
);

1336 
	gpcSliû
->
£tAssocŸ‹dIRAPPOC
(
m_assocŸ‹dIRAPPOC
);

1339 
	gpcSliû
->
decodšgReäeshM¬kšg
(
m_pocCRA
, 
m_bReäeshP’dšg
, 
rcLi¡Pic
, 
m_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
());

1340 
	gm_pcEncTÝ
->
£ËùReã»nûPiùu»S‘
(
pcSliû
, 
pocCu¼
, 
iGOPid
);

1341 ià(!
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1343 iàÐ
	gpcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_LP


1344 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_W_RADL


1345 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_BLA_N_LP


1346 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_W_RADL


1347 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_IDR_N_LP


1348 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
 )

1350 
m_assocŸ‹dIRAPTy³
 = 
pcSliû
->
g‘N®Un™Ty³
();

1351 
	gm_assocŸ‹dIRAPPOC
 = 
pocCu¼
;

1353 
	gpcSliû
->
£tAssocŸ‹dIRAPTy³
(
m_assocŸ‹dIRAPTy³
);

1354 
	gpcSliû
->
£tAssocŸ‹dIRAPPOC
(
m_assocŸ‹dIRAPPOC
);

1357 ià((
	gpcSliû
->
checkTh©AÎRefPicsA»AvažabË
(
rcLi¡Pic
, 
pcSliû
->
g‘RPS
(), 
çl£
, 
m_iLa¡Recov”yPicPOC
, 
m_pcCfg
->
g‘DecodšgReäeshTy³
(è=ð3è!ð0è|| (pcSliû->
isIRAP
())

1358 || (
m_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
(è&& 
isF›ld
 && 
pcSliû
->
g‘AssocŸ‹dIRAPTy³
(è>ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 &&…cSliû->g‘AssocŸ‹dIRAPTy³(è<ð
NAL_UNIT_CODED_SLICE_CRA
 &&…cSliû->
g‘AssocŸ‹dIRAPPOC
(è=ðpcSliû->
g‘POC
()+1)

1361 
pcSliû
->
ü—‹Ex¶ic™Reã»nûPiùu»S‘FromReã»nû
(
rcLi¡Pic
,…cSliû->
g‘RPS
(),…cSliû->
isIRAP
(), 
m_iLa¡Recov”yPicPOC
, 
m_pcCfg
->
g‘DecodšgReäeshTy³
(è=ð3, m_pcCfg->
g‘Effic›ÁF›ldIRAPEÇbËd
());

1364 
	gpcSliû
->
­¶yReã»nûPiùu»S‘
(
rcLi¡Pic
, 
pcSliû
->
g‘RPS
());

1366 if(
	gpcSliû
->
g‘TLay”
() > 0

1367 && !Ð
	gpcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RADL_N


1368 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RADL_R


1369 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_N


1370 || 
pcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_RASL_R
 )

1373 if(
pcSliû
->
isTempÜ®Lay”Sw™chšgPošt
(
rcLi¡Pic
è||…cSliû->
g‘SPS
()->
g‘TempÜ®IdNe¡šgFÏg
())

1375 if(
pcSliû
->
g‘TempÜ®Lay”NÚReã»nûFÏg
())

1377 
pcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_TSA_N
);

1381 
	gpcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_TSA_R
);

1384 if(
	gpcSliû
->
isS‹pwi£TempÜ®Lay”Sw™chšgPoštCªdid©e
(
rcLi¡Pic
))

1386 
BoÞ
 
	gisSTSA
=
Œue
;

1387 
IÁ
 
	gii
=
iGOPid
+1;(ii<
	gm_pcCfg
->
g‘GOPSize
(è&& 
	gisSTSA
==
Œue
);ii++)

1389 
IÁ
 
	glTid
ð
m_pcCfg
->
g‘GOPEÁry
(
ii
).
m_‹mpÜ®Id
;

1390 if(
	glTid
==
pcSliû
->
g‘TLay”
())

1392 cÚ¡ 
TComReã»nûPiùu»S‘
* 
nRPS
 = 
pcSliû
->
g‘SPS
()->
g‘RPSLi¡
()->
g‘Reã»nûPiùu»S‘
(
ii
);

1393 
IÁ
 
	gjj
=0;jj<
	gnRPS
->
g‘Numb”OfPiùu»s
();jj++)

1395 if(
	gnRPS
->
g‘U£d
(
jj
))

1397 
IÁ
 
	gtPoc
=
m_pcCfg
->
g‘GOPEÁry
(
ii
).
m_POC
+
nRPS
->
g‘D–POC
(
jj
);

1398 
IÁ
 
	gkk
=0;

1399 
	gkk
=0;kk<
	gm_pcCfg
->
g‘GOPSize
();kk++)

1401 if(
	gm_pcCfg
->
g‘GOPEÁry
(
kk
).
	gm_POC
==
tPoc
)

1406 
IÁ
 
	gtTid
=
m_pcCfg
->
g‘GOPEÁry
(
kk
).
m_‹mpÜ®Id
;

1407 if(
	gtTid
 >ð
pcSliû
->
g‘TLay”
())

1409 
isSTSA
=
çl£
;

1416 if(
	gisSTSA
==
Œue
)

1418 if(
pcSliû
->
g‘TempÜ®Lay”NÚReã»nûFÏg
())

1420 
pcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_STSA_N
);

1424 
	gpcSliû
->
£tN®Un™Ty³
(
NAL_UNIT_CODED_SLICE_STSA_R
);

1429 
¬¿ngeLÚg‹rmPiùu»sInRPS
(
pcSliû
, 
rcLi¡Pic
);

1430 
TComRefPicLi¡ModifiÿtiÚ
* 
	g»fPicLi¡ModifiÿtiÚ
 = 
pcSliû
->
g‘RefPicLi¡ModifiÿtiÚ
();

1431 
	g»fPicLi¡ModifiÿtiÚ
->
£tRefPicLi¡ModifiÿtiÚFÏgL0
(0);

1432 
	g»fPicLi¡ModifiÿtiÚ
->
£tRefPicLi¡ModifiÿtiÚFÏgL1
(0);

1433 
	gpcSliû
->
£tNumRefIdx
(
REF_PIC_LIST_0
,
mš
(
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_numRefPicsAùive
,
pcSliû
->
g‘RPS
()->
g‘Numb”OfPiùu»s
()));

1434 
	gpcSliû
->
£tNumRefIdx
(
REF_PIC_LIST_1
,
mš
(
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_numRefPicsAùive
,
pcSliû
->
g‘RPS
()->
g‘Numb”OfPiùu»s
()));

1437 
	gpcSliû
->
£tRefPicLi¡
 ( 
rcLi¡Pic
 );

1440 iàÐ(
	gpcSliû
->
g‘SliûTy³
(è=ð
B_SLICE
è&& (
pcSliû
->
g‘NumRefIdx
(
REF_PIC_LIST_1
) == 0) )

1442 
pcSliû
->
£tSliûTy³
 ( 
P_SLICE
 );

1446 ià(
	gpcSliû
->
g‘POC
(è> 
	gm_RASPOCfÜRe£tEncod”
 && 
	gm_pcCfg
->
g‘Re£tEncod”S‹Aá”IRAP
())

1449 
	gm_pcSliûEncod”
->
»£tEncod”DecisiÚs
();

1451 ià(
	gpcSliû
->
g‘SPS
()->
g‘U£SAO
())

1453 
	gm_pcSAO
->
»£tEncod”DecisiÚs
();

1455 
	gm_RASPOCfÜRe£tEncod”
=
MAX_INT
;

1457 ià(
	gpcSliû
->
isIRAP
())

1459 
	gm_RASPOCfÜRe£tEncod”
 = 
pcSliû
->
g‘POC
();

1462 
	gpcSliû
->
£tEncCABACTabËIdx
(
m_pcSliûEncod”
->
g‘EncCABACTabËIdx
());

1463 #ià
MCTS_EXTRACTION


1464 
SliûTy³
 
	g’cCABACTabËIdx
 = 
pcSliû
->
g‘EncCABACTabËIdx
();

1465 
BoÞ
 
	g’cCabacIn™FÏg
 = (
pcSliû
->
g‘SliûTy³
(è!ð
’cCABACTabËIdx
 &&ƒncCABACTabËIdx !ð
I_SLICE
è? 
Œue
 : 
çl£
;

1466 
	gpcSliû
->
£tCabacIn™FÏg
(
’cCabacIn™FÏg
);

1469 ià(
	gpcSliû
->
g‘SliûTy³
(è=ð
B_SLICE
)

1471 cÚ¡ 
UIÁ
 
uiCÞFromL0
 = 
ÿlcuÏ‹CÞloÿ‹dFromL0FÏg
(
pcSliû
);

1472 
	gpcSliû
->
£tCÞFromL0FÏg
(
uiCÞFromL0
);

1473 
BoÞ
 
	gbLowD–ay
 = 
Œue
;

1474 
IÁ
 
	giCu¼POC
 = 
pcSliû
->
g‘POC
();

1475 
IÁ
 
	giRefIdx
 = 0;

1477 
	giRefIdx
 = 0; iRefIdx < 
	gpcSliû
->
g‘NumRefIdx
(
REF_PIC_LIST_0
è&& 
	gbLowD–ay
; iRefIdx++)

1479 iàÐ
	gpcSliû
->
g‘RefPic
(
REF_PIC_LIST_0
, 
iRefIdx
)->
g‘POC
(è> 
	giCu¼POC
 )

1481 
	gbLowD–ay
 = 
çl£
;

1484 
	giRefIdx
 = 0; iRefIdx < 
	gpcSliû
->
g‘NumRefIdx
(
REF_PIC_LIST_1
è&& 
	gbLowD–ay
; iRefIdx++)

1486 iàÐ
	gpcSliû
->
g‘RefPic
(
REF_PIC_LIST_1
, 
iRefIdx
)->
g‘POC
(è> 
	giCu¼POC
 )

1488 
	gbLowD–ay
 = 
çl£
;

1492 
	gpcSliû
->
£tCheckLDC
(
bLowD–ay
);

1496 
	gpcSliû
->
£tCheckLDC
(
Œue
);

1501 
	gpcSliû
->
£tRefPOCLi¡
();

1503 
	gpcSliû
->
£tLi¡1IdxToLi¡0Idx
();

1505 ià(
	gm_pcEncTÝ
->
g‘TMVPModeId
() == 2)

1507 ià(
iGOPid
 == 0)

1509 
pcSliû
->
£tEÇbËTMVPFÏg
(0);

1514 
	gpcSliû
->
£tEÇbËTMVPFÏg
(1);

1517 ià(
	gm_pcEncTÝ
->
g‘TMVPModeId
() == 1)

1519 
pcSliû
->
£tEÇbËTMVPFÏg
(1);

1523 
	gpcSliû
->
£tEÇbËTMVPFÏg
(0);

1527 ià(
	gm_pcCfg
->
g‘U£ASR
(è&& 
	gpcSliû
->
g‘SliûTy³
()!=
I_SLICE
)

1529 
m_pcSliûEncod”
->
£tS—rchRªge
(
pcSliû
);

1532 
BoÞ
 
	gbGPBcheck
=
çl£
;

1533 iàÐ
	gpcSliû
->
g‘SliûTy³
(è=ð
B_SLICE
)

1535 iàÐ
pcSliû
->
g‘NumRefIdx
(
RefPicLi¡
( 0 ) ) ==…cSlice->getNumRefIdx(RefPicList( 1 ) ) )

1537 
bGPBcheck
=
Œue
;

1538 
IÁ
 
	gi
;

1539  
	gi
=0; i < 
	gpcSliû
->
g‘NumRefIdx
(
RefPicLi¡
( 1 ) ); i++ )

1541 iàÐ
	gpcSliû
->
g‘RefPOC
(
RefPicLi¡
(1), 
i
è!ð
pcSliû
->getRefPOC(RefPicList(0), i) )

1543 
	gbGPBcheck
=
çl£
;

1549 if(
	gbGPBcheck
)

1551 
	gpcSliû
->
£tMvdL1Z”oFÏg
(
Œue
);

1555 
	gpcSliû
->
£tMvdL1Z”oFÏg
(
çl£
);

1559 
DoubË
 
	gÏmbda
 = 0.0;

1560 
IÁ
 
	gaùu®H—dB™s
 = 0;

1561 
IÁ
 
	gaùu®TÙ®B™s
 = 0;

1562 
IÁ
 
	ge¡im©edB™s
 = 0;

1563 
IÁ
 
	gtmpB™sBefÜeWr™šg
 = 0;

1564 iàÐ
	gm_pcCfg
->
g‘U£R©eCŒl
() )

1566 
IÁ
 
	gäameLev–
 = 
m_pcR©eCŒl
->
g‘RCSeq
()->
g‘GOPID2Lev–
Ð
iGOPid
 );

1567 iàÐ
	gpcPic
->
g‘Sliû
(0)->
g‘SliûTy³
(è=ð
I_SLICE
 )

1569 
äameLev–
 = 0;

1571 
	gm_pcR©eCŒl
->
š™RCPic
Ð
äameLev–
 );

1572 
	ge¡im©edB™s
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
g‘T¬g‘B™s
();

1574 ià(
	gm_pcR©eCŒl
->
g‘CpbS©u¿tiÚEÇbËd
(è&& 
	gäameLev–
 != 0)

1576 
IÁ
 
e¡im©edCpbFuÎÃss
 = 
m_pcR©eCŒl
->
g‘CpbS‹
(è+ m_pcR©eCŒl->
g‘BufãršgR©e
();

1579 ià(
	ge¡im©edCpbFuÎÃss
 - 
	ge¡im©edB™s
 > (
	gIÁ
)(
	gm_pcR©eCŒl
->
g‘CpbSize
()*0.9f))

1581 
	ge¡im©edB™s
 = 
e¡im©edCpbFuÎÃss
 - (
IÁ
)(
m_pcR©eCŒl
->
g‘CpbSize
()*0.9f);

1584 
	ge¡im©edCpbFuÎÃss
 -ð
m_pcR©eCŒl
->
g‘BufãršgR©e
();

1586 ià(
	ge¡im©edCpbFuÎÃss
 - 
	ge¡im©edB™s
 < 
	gm_pcR©eCŒl
->
g‘RCPic
()->
g‘Low”Bound
())

1588 
	ge¡im©edB™s
 = 
max
(200, 
e¡im©edCpbFuÎÃss
 - 
m_pcR©eCŒl
->
g‘RCPic
()->
g‘Low”Bound
());

1591 
	gm_pcR©eCŒl
->
g‘RCPic
()->
£tT¬g‘B™s
(
e¡im©edB™s
);

1594 
IÁ
 
	g¦iûQP
 = 
m_pcCfg
->
g‘In™ŸlQP
();

1595 iàÐÐ
	gpcSliû
->
g‘POC
(è=ð0 && 
m_pcCfg
->
g‘In™ŸlQP
(è> 0 ) || ( 
äameLev–
 =ð0 && m_pcCfg->
g‘FÜûIÁ¿QP
() ) )

1597 
IÁ
 
Numb”BF¿mes
 = ( 
m_pcCfg
->
g‘GOPSize
() - 1 );

1598 
DoubË
 
	gdLambda_sÿË
 = 1.0 - 
Cl3
Ð0.0, 0.5, 0.05*(DoubË)
Numb”BF¿mes
 );

1599 
DoubË
 
	gdQPFaùÜ
 = 0.57*
dLambda_sÿË
;

1600 
IÁ
 
	gSHIFT_QP
 = 12;

1601 
IÁ
 
	gb™d•th_luma_qp_sÿË
 = 0;

1602 
DoubË
 
	gqp_‹mp
 = (DoubËè
¦iûQP
 + 
b™d•th_luma_qp_sÿË
 - 
SHIFT_QP
;

1603 
	gÏmbda
 = 
dQPFaùÜ
*
pow
Ð2.0, 
qp_‹mp
/3.0 );

1605 iàÐ
	gäameLev–
 == 0 )

1607 
m_pcSliûEncod”
->
ÿlCo¡SliûI
(
pcPic
);

1609 iàÐ
	gm_pcCfg
->
g‘IÁ¿P”iod
() != 1 )

1611 
IÁ
 
b™s
 = 
m_pcR©eCŒl
->
g‘RCSeq
()->
g‘LeáAv”ageB™s
();

1612 
	gb™s
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
g‘RefšeB™sFÜIÁ¿
Ð
b™s
 );

1614 ià(
	gm_pcR©eCŒl
->
g‘CpbS©u¿tiÚEÇbËd
() )

1616 
IÁ
 
	ge¡im©edCpbFuÎÃss
 = 
m_pcR©eCŒl
->
g‘CpbS‹
(è+ m_pcR©eCŒl->
g‘BufãršgR©e
();

1619 ià(
	ge¡im©edCpbFuÎÃss
 - 
	gb™s
 > (
	gIÁ
)(
	gm_pcR©eCŒl
->
g‘CpbSize
()*0.9f))

1621 
	gb™s
 = 
e¡im©edCpbFuÎÃss
 - (
IÁ
)(
m_pcR©eCŒl
->
g‘CpbSize
()*0.9f);

1624 
	ge¡im©edCpbFuÎÃss
 -ð
m_pcR©eCŒl
->
g‘BufãršgR©e
();

1626 ià(
	ge¡im©edCpbFuÎÃss
 - 
	gb™s
 < 
	gm_pcR©eCŒl
->
g‘RCPic
()->
g‘Low”Bound
())

1628 
	gb™s
 = 
e¡im©edCpbFuÎÃss
 - 
m_pcR©eCŒl
->
g‘RCPic
()->
g‘Low”Bound
();

1632 iàÐ
	gb™s
 < 200 )

1634 
	gb™s
 = 200;

1636 
	gm_pcR©eCŒl
->
g‘RCPic
()->
£tT¬g‘B™s
Ð
b™s
 );

1639 
	gli¡
<
	gTEncRCPic
*> 
	gli¡P»viousPiùu»
 = 
m_pcR©eCŒl
->
g‘PicLi¡
();

1640 
	gm_pcR©eCŒl
->
g‘RCPic
()->
g‘LCUIn™T¬g‘B™s
();

1641 
	gÏmbda
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
e¡im©ePicLambda
Ð
li¡P»viousPiùu»
, 
pcSliû
->
g‘SliûTy³
());

1642 
	g¦iûQP
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
e¡im©ePicQP
Ð
Ïmbda
, 
li¡P»viousPiùu»
 );

1646 
	gli¡
<
	gTEncRCPic
*> 
	gli¡P»viousPiùu»
 = 
m_pcR©eCŒl
->
g‘PicLi¡
();

1647 
	gÏmbda
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
e¡im©ePicLambda
Ð
li¡P»viousPiùu»
, 
pcSliû
->
g‘SliûTy³
());

1648 
	g¦iûQP
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
e¡im©ePicQP
Ð
Ïmbda
, 
li¡P»viousPiùu»
 );

1651 
	g¦iûQP
 = 
Cl3
Ð-
pcSliû
->
g‘SPS
()->
g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
, 
¦iûQP
 );

1652 
	gm_pcR©eCŒl
->
g‘RCPic
()->
£tPicE¡QP
Ð
¦iûQP
 );

1654 
	gm_pcSliûEncod”
->
»£tQP
Ð
pcPic
, 
¦iûQP
, 
Ïmbda
 );

1657 
UIÁ
 
	guiNumSliûSegm’ts
 = 1;

1660 cÚ¡ 
IÁ
 
	gnumSub¡»amsCÞumns
 = (
pcSliû
->
g‘PPS
()->
g‘NumTžeCÞumnsMšus1
() + 1);

1661 cÚ¡ 
IÁ
 
	gnumSub¡»amRows
 = 
pcSliû
->
g‘PPS
()->
g‘EÁrÝyCodšgSyncEÇbËdFÏg
(è? 
pcPic
->
g‘F¿meHeightInCtus
(è: (pcSliû->g‘PPS()->
g‘NumTžeRowsMšus1
() + 1);

1662 cÚ¡ 
IÁ
 
	gnumSub¡»ams
 = 
numSub¡»amRows
 * 
numSub¡»amsCÞumns
;

1663 
	g¡d
::
veùÜ
<
TComOuutB™¡»am
> 
sub¡»amsOut
(
numSub¡»ams
);

1667 cÚ¡ 
UIÁ
 
	gnumb”OfCtusInF¿me
=
pcPic
->
g‘PicSym
()->
g‘Numb”OfCtusInF¿me
();

1668 
	gpcSliû
->
£tSliûCurS¹CtuTsAddr
( 0 );

1669 
	gpcSliû
->
£tSliûSegm’tCurS¹CtuTsAddr
( 0 );

1671 
UIÁ
 
	gÃxtCtuTsAddr
 = 0;‚extCtuTsAdd¸< 
	gnumb”OfCtusInF¿me
; )

1673 
	gm_pcSliûEncod”
->
´ecom´essSliû
Ð
pcPic
 );

1674 
	gm_pcSliûEncod”
->
com´essSliû
 ( 
pcPic
, 
çl£
, false );

1676 cÚ¡ 
UIÁ
 
	gcurSliûSegm’tEnd
 = 
pcSliû
->
g‘SliûSegm’tCurEndCtuTsAddr
();

1677 ià(
	gcurSliûSegm’tEnd
 < 
	gnumb”OfCtusInF¿me
)

1679 cÚ¡ 
BoÞ
 
	gbNextSegm’tIsD•’d’tSliû
=
curSliûSegm’tEnd
<
pcSliû
->
g‘SliûCurEndCtuTsAddr
();

1680 cÚ¡ 
UIÁ
 
	g¦iûB™s
=
pcSliû
->
g‘SliûB™s
();

1681 
	gpcPic
->
®loÿ‹NewSliû
();

1683 
	gpcPic
->
£tCu¼SliûIdx
 ( 
uiNumSliûSegm’ts
 );

1684 
	gm_pcSliûEncod”
->
£tSliûIdx
 ( 
uiNumSliûSegm’ts
 );

1685 
	gpcSliû
 = 
pcPic
->
g‘Sliû
 ( 
uiNumSliûSegm’ts
 );

1686 
as£¹
(
pcSliû
->
g‘PPS
()!=0);

1687 
	gpcSliû
->
cÝySliûInfo
 ( 
pcPic
->
g‘Sliû
(
uiNumSliûSegm’ts
-1) );

1688 
	gpcSliû
->
£tSliûIdx
 ( 
uiNumSliûSegm’ts
 );

1689 ià(
	gbNextSegm’tIsD•’d’tSliû
)

1691 
	gpcSliû
->
£tSliûB™s
(
¦iûB™s
);

1695 
	gpcSliû
->
£tSliûCurS¹CtuTsAddr
 ( 
curSliûSegm’tEnd
 );

1696 
	gpcSliû
->
£tSliûB™s
(0);

1698 
	gpcSliû
->
£tD•’d’tSliûSegm’tFÏg
(
bNextSegm’tIsD•’d’tSliû
);

1699 
	gpcSliû
->
£tSliûSegm’tCurS¹CtuTsAddr
 ( 
curSliûSegm’tEnd
 );

1702 
	guiNumSliûSegm’ts
 ++;

1704 
	gÃxtCtuTsAddr
 = 
curSliûSegm’tEnd
;

1708 
	gduD©a
.
þ—r
();

1709 
	gpcSliû
 = 
pcPic
->
g‘Sliû
(0);

1712 ifÐ
	gpcSliû
->
g‘SPS
()->
g‘U£SAO
(è&& 
	gm_pcCfg
->
g‘SaoCtuBound¬y
() )

1714 
	gm_pcSAO
->
g‘P»DBFSti¡ics
(
pcPic
);

1718 
BoÞ
 
	gbLFCrossTžeBound¬y
 = 
pcSliû
->
g‘PPS
()->
g‘LoÝFž‹rAüossTžesEÇbËdFÏg
();

1719 
	gm_pcLoÝFž‹r
->
£tCfg
(
bLFCrossTžeBound¬y
);

1720 iàÐ
	gm_pcCfg
->
g‘DeblockšgFž‹rM‘ric
() )

1722 iàÐ
	gm_pcCfg
->
g‘DeblockšgFž‹rM‘ric
()==2 )

1724 
­¶yDeblockšgFž‹rP¬am‘”S–eùiÚ
(
pcPic
, 
uiNumSliûSegm’ts
, 
iGOPid
);

1728 
­¶yDeblockšgFž‹rM‘ric
(
pcPic
, 
uiNumSliûSegm’ts
);

1731 
	gm_pcLoÝFž‹r
->
loÝFž‹rPic
Ð
pcPic
 );

1735 
	gm_pcEÁrÝyCod”
->
£tEÁrÝyCod”
 ( 
m_pcCavlcCod”
 );

1739 
boÞ
 
	gwr™ePS
 = 
m_bSeqFœ¡
 || (
m_pcCfg
->
g‘ReWr™eP¬amS‘sFÏg
(è&& (
pcSliû
->
isIRAP
()));

1740 ià(
	gwr™ePS
)

1742 
	gm_pcEncTÝ
->
£tP¬amS‘Chªged
(
pcSliû
->
g‘SPS
()->
g‘SPSId
(),…cSliû->
g‘PPS
()->
g‘PPSId
());

1744 
	gaùu®TÙ®B™s
 +ð
xWr™eP¬am‘”S‘s
(
acûssUn™
, 
pcSliû
, 
wr™ePS
);

1746 ià(
	gwr™ePS
)

1749 
as£¹
(
ËadšgSeiMes§ges
.
em±y
());

1750 #ià
MCTS_EXTRACTION


1751 
xC»©eIRAPL—dšgSEIMes§ges
(
ËadšgSeiMes§ges
, 
m_pcEncTÝ
->
g‘VPS
(), 
pcSliû
->
g‘SPS
(),…cSliû->
g‘PPS
());

1753 
xC»©eIRAPL—dšgSEIMes§ges
(
ËadšgSeiMes§ges
, 
pcSliû
->
g‘SPS
(),…cSliû->
g‘PPS
());

1756 
	gm_bSeqFœ¡
 = 
çl£
;

1758 ià(
	gm_pcCfg
->
g‘AcûssUn™D–im™”
())

1760 
xWr™eAcûssUn™D–im™”
(
acûssUn™
, 
pcSliû
);

1764 
	gm_bufãršgP”iodSEIP»£ÁInAU
 = 
çl£
;

1766 
xC»©eP”Piùu»SEIMes§ges
(
iGOPid
, 
ËadšgSeiMes§ges
, 
Ã¡edSeiMes§ges
, 
pcSliû
);

1769 
	gm_pcEÁrÝyCod”
->
£tB™¡»am
(
NULL
);

1771 
	gpcSliû
 = 
pcPic
->
g‘Sliû
(0);

1773 ià(
	gpcSliû
->
g‘SPS
()->
g‘U£SAO
())

1775 
BoÞ
 
	g¦iûEÇbËd
[
MAX_NUM_COMPONENT
];

1776 
TComB™CouÁ”
 
	g‹mpB™CouÁ”
;

1777 
	g‹mpB™CouÁ”
.
»£tB™s
();

1778 
	gm_pcEncTÝ
->
g‘RDGoOnSbacCod”
()->
£tB™¡»am
(&
‹mpB™CouÁ”
);

1779 
	gm_pcSAO
->
š™RDOCabacCod”
(
m_pcEncTÝ
->
g‘RDGoOnSbacCod”
(), 
pcSliû
);

1780 
	gm_pcSAO
->
SAOProûss
(
pcPic
, 
¦iûEÇbËd
,…cPic->
g‘Sliû
(0)->
g‘Lambdas
(),

1781 
m_pcCfg
->
g‘Te¡SAODi§bËAtPiùu»Lev–
(),

1782 
m_pcCfg
->
g‘SaoEncodšgR©e
(),

1783 
m_pcCfg
->
g‘SaoEncodšgR©eChroma
(),

1784 
m_pcCfg
->
g‘SaoCtuBound¬y
());

1785 
	gm_pcSAO
->
PCMLFDi§bËProûss
(
pcPic
);

1786 
	gm_pcEncTÝ
->
g‘RDGoOnSbacCod”
()->
£tB™¡»am
(
NULL
);

1789 
IÁ
 
	gs
=0; s< 
	guiNumSliûSegm’ts
; s++)

1791 
	gpcPic
->
g‘Sliû
(
s
)->
£tSaoEÇbËdFÏg
(
CHANNEL_TYPE_LUMA
, 
¦iûEÇbËd
[
COMPONENT_Y
]);

1792 
as£¹
(
¦iûEÇbËd
[
COMPONENT_Cb
] =ð¦iûEÇbËd[
COMPONENT_Cr
]);

1793 
	gpcPic
->
g‘Sliû
(
s
)->
£tSaoEÇbËdFÏg
(
CHANNEL_TYPE_CHROMA
, 
¦iûEÇbËd
[
COMPONENT_Cb
]);

1798 
	g¡d
::
size_t
 
bšCouÁsInN®Un™s
 = 0;

1799 
	g¡d
::
size_t
 
numBy‹sInVþN®Un™s
 = 0;

1801  
UIÁ
 
	g¦iûSegm’tS¹CtuTsAddr
 = 0, 
	g¦iûIdxCouÁ
=0; sliûSegm’tS¹CtuTsAdd¸< 
	gpcPic
->
g‘PicSym
()->
g‘Numb”OfCtusInF¿me
(); sliûIdxCouÁ++, sliûSegm’tS¹CtuTsAddr=
pcSliû
->
g‘SliûSegm’tCurEndCtuTsAddr
() )

1803 
pcSliû
 = 
pcPic
->
g‘Sliû
(
¦iûIdxCouÁ
);

1804 if(
	g¦iûIdxCouÁ
 > 0 && 
	gpcSliû
->
g‘SliûTy³
()!ð
I_SLICE
)

1806 
pcSliû
->
checkCÞRefIdx
(
¦iûIdxCouÁ
, 
pcPic
);

1808 
	gpcPic
->
£tCu¼SliûIdx
(
¦iûIdxCouÁ
);

1809 
	gm_pcSliûEncod”
->
£tSliûIdx
(
¦iûIdxCouÁ
);

1811 
	gpcSliû
->
£tRPS
(
pcPic
->
g‘Sliû
(0)->
g‘RPS
());

1812 
	gpcSliû
->
£tRPSidx
(
pcPic
->
g‘Sliû
(0)->
g‘RPSidx
());

1814  
UIÁ
 
	gui
 = 0 ; u˜< 
	gnumSub¡»ams
; ui++ )

1816 
	gsub¡»amsOut
[
ui
].
þ—r
();

1819 
	gm_pcEÁrÝyCod”
->
£tEÁrÝyCod”
 ( 
m_pcCavlcCod”
 );

1820 
	gm_pcEÁrÝyCod”
->
»£tEÁrÝy
 ( 
pcSliû
 );

1822 
OuutNALUn™
 
Çlu
Ð
pcSliû
->
g‘N®Un™Ty³
(),…cSliû->
g‘TLay”
() );

1823 
	gm_pcEÁrÝyCod”
->
£tB™¡»am
(&
Çlu
.
m_B™¡»am
);

1825 
	gpcSliû
->
£tNoRa¦OuutFÏg
(
çl£
);

1826 ià(
	gpcSliû
->
isIRAP
())

1828 ià(
	gpcSliû
->
g‘N®Un™Ty³
(è>ð
NAL_UNIT_CODED_SLICE_BLA_W_LP
 && 
pcSliû
->g‘N®Un™Ty³(è<ð
NAL_UNIT_CODED_SLICE_IDR_N_LP
)

1830 
pcSliû
->
£tNoRa¦OuutFÏg
(
Œue
);

1834 ià(!
	gm_bFœ¡
 && 
	gpcSliû
->
isIRAP
(è&&…cSliû->
g‘NoRa¦OuutFÏg
())

1836 ià(
	gpcSliû
->
g‘N®Un™Ty³
(è=ð
NAL_UNIT_CODED_SLICE_CRA
)

1838 
pcSliû
->
£tNoOuutPriÜPicsFÏg
(
Œue
);

1843 
	gpcSliû
->
£tEncCABACTabËIdx
(
m_pcSliûEncod”
->
g‘EncCABACTabËIdx
());

1844 #ià
MCTS_EXTRACTION


1845 
	g’cCABACTabËIdx
 = 
pcSliû
->
g‘EncCABACTabËIdx
();

1846 
	g’cCabacIn™FÏg
 = (
pcSliû
->
g‘SliûTy³
(è!ð
’cCABACTabËIdx
 &&ƒncCABACTabËIdx !ð
I_SLICE
è? 
Œue
 : 
çl£
;

1847 
	gpcSliû
->
£tCabacIn™FÏg
(
’cCabacIn™FÏg
);

1849 
	gtmpB™sBefÜeWr™šg
 = 
m_pcEÁrÝyCod”
->
g‘Numb”OfWr™‹nB™s
();

1850 
	gm_pcEÁrÝyCod”
->
’codeSliûH—d”
(
pcSliû
);

1851 
	gaùu®H—dB™s
 +ðÐ
m_pcEÁrÝyCod”
->
g‘Numb”OfWr™‹nB™s
(è- 
tmpB™sBefÜeWr™šg
 );

1853 
	gpcSliû
->
£tFš®ized
(
Œue
);

1855 
	gpcSliû
->
þ—rSub¡»amSizes
( );

1857 
UIÁ
 
	gnumBšsCoded
 = 0;

1858 
	gm_pcSliûEncod”
->
’codeSliû
(
pcPic
, &(
sub¡»amsOut
[0]), 
numBšsCoded
);

1859 
	gbšCouÁsInN®Un™s
+=
numBšsCoded
;

1866 
	gm_pcEÁrÝyCod”
->
£tEÁrÝyCod”
 ( 
m_pcCavlcCod”
 );

1867 
	gm_pcEÁrÝyCod”
->
£tB™¡»am
(&
Çlu
.
m_B™¡»am
);

1868 
	gm_pcEÁrÝyCod”
->
’codeTžesWPPEÁryPošt
Ð
pcSliû
 );

1871 
TComOuutB™¡»am
 *
	gpcOut
 = 
pcB™¡»amRedœeù
;

1872 cÚ¡ 
IÁ
 
	gnumZ”oSub¡»amsAtS¹OfSliû
 = 
pcPic
->
g‘Sub¡»amFÜCtuAddr
(
pcSliû
->
g‘SliûSegm’tCurS¹CtuTsAddr
(), 
çl£
,…cSlice);

1873 cÚ¡ 
IÁ
 
	gnumSub¡»amsToCode
 = 
pcSliû
->
g‘Numb”OfSub¡»amSizes
()+1;

1874  
UIÁ
 
	gui
 = 0 ; u˜< 
	gnumSub¡»amsToCode
; ui++ )

1876 
	gpcOut
->
addSub¡»am
(&(
sub¡»amsOut
[
ui
+
numZ”oSub¡»amsAtS¹OfSliû
]));

1882 
BoÞ
 
	gbNALUAligÃdWr™‹nToLi¡
 = 
çl£
;

1883 
xA‰achSliûD©aToN®Un™
(
Çlu
, 
pcB™¡»amRedœeù
);

1884 
	gacûssUn™
.
push_back
(
Ãw
 
NALUn™EBSP
(
Çlu
));

1885 
	gaùu®TÙ®B™s
 +ð
UIÁ
(
acûssUn™
.
back
()->
m_ÇlUn™D©a
.
¡r
().
size
()) * 8;

1886 
	gnumBy‹sInVþN®Un™s
 +ð(
¡d
::
size_t
)(
acûssUn™
.
back
()->
m_ÇlUn™D©a
.
¡r
().
size
());

1887 
	gbNALUAligÃdWr™‹nToLi¡
 = 
Œue
;

1889 ià(!
	gbNALUAligÃdWr™‹nToLi¡
)

1891 
	gÇlu
.
	gm_B™¡»am
.
wr™eAlignZ”o
();

1892 
	gacûssUn™
.
push_back
(
Ãw
 
NALUn™EBSP
(
Çlu
));

1895 ifÐÐ
	gm_pcCfg
->
g‘Piùu»TimšgSEIEÇbËd
(è|| m_pcCfg->
g‘DecodšgUn™InfoSEIEÇbËd
() ) &&

1896 Ð
	gpcSliû
->
g‘SPS
()->
g‘VuiP¬am‘”sP»£ÁFÏg
() ) &&

1897 ÐÐ
	gpcSliû
->
g‘SPS
()->
g‘VuiP¬am‘”s
()->
g‘HrdP¬am‘”s
()->
g‘N®HrdP¬am‘”sP»£ÁFÏg
() )

1898 || ( 
	gpcSliû
->
g‘SPS
()->
g‘VuiP¬am‘”s
()->
g‘HrdP¬am‘”s
()->
g‘VþHrdP¬am‘”sP»£ÁFÏg
() ) ) &&

1899 Ð
	gpcSliû
->
g‘SPS
()->
g‘VuiP¬am‘”s
()->
g‘HrdP¬am‘”s
()->
g‘SubPicCpbP¬amsP»£ÁFÏg
() ) )

1901 
UIÁ
 
	gnumN®us
 = 0;

1902 
UIÁ
 
	gnumRBSPBy‹s
 = 0;

1903 
	gAcûssUn™
::
cÚ¡_™”©Ü
 
™
 = 
acûssUn™
.
begš
(); 
	g™
 !ðacûssUn™.
’d
(); it++)

1905 
	gnumRBSPBy‹s
 +ð
UIÁ
((*
™
)->
m_ÇlUn™D©a
.
¡r
().
size
());

1906 
	gnumN®us
 ++;

1908 
	gduD©a
.
push_back
(
DUD©a
());

1909 
	gduD©a
.
back
().
	gaccumB™sDU
 = ( 
numRBSPBy‹s
 << 3 );

1910 
	gduD©a
.
back
().
	gaccumN®sDU
 = 
numN®us
;

1915 
ÿbac_z”o_wÜd_·ddšg
(
pcSliû
, 
pcPic
, 
bšCouÁsInN®Un™s
, 
numBy‹sInVþN®Un™s
, 
acûssUn™
.
back
()->
m_ÇlUn™D©a
, 
m_pcCfg
->
g‘CabacZ”oWÜdPaddšgEÇbËd
());

1917 
	gpcPic
->
com´essMÙiÚ
();

1920 
DoubË
 
	gdEncTime
 = (DoubË)(
þock
()-
iBefÜeTime
è/ 
CLOCKS_PER_SEC
;

1922 
	g¡d
::
¡ršg
 
dige¡SŒ
;

1923 ià(
	gm_pcCfg
->
g‘DecodedPiùu»HashSEITy³
()!=
HASHTYPE_NONE
)

1925 
SEIDecodedPiùu»Hash
 *
decodedPiùu»HashSei
 = 
Ãw
 SEIDecodedPictureHash();

1926 
	gm_£iEncod”
.
š™DecodedPiùu»HashSEI
(
decodedPiùu»HashSei
, 
pcPic
, 
dige¡SŒ
, 
pcSliû
->
g‘SPS
()->
g‘B™D•ths
());

1927 
	gŒažšgSeiMes§ges
.
push_back
(
decodedPiùu»HashSei
);

1930 
	gm_pcCfg
->
£tEncodedFÏg
(
iGOPid
, 
Œue
);

1932 
DoubË
 
	gPSNR_Y
;

1934 
xC®cuÏ‹AddPSNRs
Ð
isF›ld
, 
isTff
, 
iGOPid
, 
pcPic
, 
acûssUn™
, 
rcLi¡Pic
, 
dEncTime
, 
_cÚv”siÚ
, 
¢r_cÚv”siÚ
, 
ouutLogCŒl
, &
PSNR_Y
 );

1937 ifÐ
	gm_pcCfg
->
g‘SEIG»’M‘ad©aInfoSEIEÇbË
(è&& 
	gpcSliû
->
g‘POC
(è=ðÐ
m_pcCfg
->
g‘F¿mesToBeEncoded
() - 1 ) )

1939 
SEIG»’M‘ad©aInfo
 *
£iG»’M‘ad©aInfo
 = 
Ãw
 SEIGreenMetadataInfo;

1940 
	gm_£iEncod”
.
š™SEIG»’M‘ad©aInfo
(
£iG»’M‘ad©aInfo
, (
UIÁ
)(
PSNR_Y
 * 100 + 0.5));

1941 
	gŒažšgSeiMes§ges
.
push_back
(
£iG»’M‘ad©aInfo
);

1944 
xWr™eT¿žšgSEIMes§ges
(
ŒažšgSeiMes§ges
, 
acûssUn™
, 
pcSliû
->
g‘TLay”
(),…cSliû->
g‘SPS
());

1946 
´štHash
(
m_pcCfg
->
g‘DecodedPiùu»HashSEITy³
(), 
dige¡SŒ
);

1948 iàÐ
	gm_pcCfg
->
g‘U£R©eCŒl
() )

1950 
DoubË
 
	gavgQP
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
ÿlAv”ageQP
();

1951 
DoubË
 
	gavgLambda
 = 
m_pcR©eCŒl
->
g‘RCPic
()->
ÿlAv”ageLambda
();

1952 iàÐ
	gavgLambda
 < 0.0 )

1954 
	gavgLambda
 = 
Ïmbda
;

1957 
	gm_pcR©eCŒl
->
g‘RCPic
()->
upd©eAá”Piùu»
Ð
aùu®H—dB™s
, 
aùu®TÙ®B™s
, 
avgQP
, 
avgLambda
, 
pcSliû
->
g‘SliûTy³
());

1958 
	gm_pcR©eCŒl
->
g‘RCPic
()->
addToPiùu»Ls™
Ð
m_pcR©eCŒl
->
g‘PicLi¡
() );

1960 
	gm_pcR©eCŒl
->
g‘RCSeq
()->
upd©eAá”Pic
Ð
aùu®TÙ®B™s
 );

1961 iàÐ
	gpcSliû
->
g‘SliûTy³
(è!ð
I_SLICE
 )

1963 
m_pcR©eCŒl
->
g‘RCGOP
()->
upd©eAá”Piùu»
Ð
aùu®TÙ®B™s
 );

1967 
	gm_pcR©eCŒl
->
g‘RCGOP
()->
upd©eAá”Piùu»
Ð
e¡im©edB™s
 );

1969 ià(
	gm_pcR©eCŒl
->
g‘CpbS©u¿tiÚEÇbËd
())

1971 
	gm_pcR©eCŒl
->
upd©eCpbS‹
(
aùu®TÙ®B™s
);

1972 
´štf
(" [CPB %6d b™s]", 
m_pcR©eCŒl
->
g‘CpbS‹
());

1976 
xC»©ePiùu»TimšgSEI
(
m_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
()?
effF›ldIRAPM­
.
G‘IRAPGOPid
():0, 
ËadšgSeiMes§ges
, 
Ã¡edSeiMes§ges
, 
duInfoSeiMes§ges
, 
pcSliû
, 
isF›ld
, 
duD©a
);

1977 ià(
	gm_pcCfg
->
g‘SÿÏbËNe¡šgSEIEÇbËd
())

1979 
xC»©eSÿÏbËNe¡šgSEI
 (
ËadšgSeiMes§ges
, 
Ã¡edSeiMes§ges
);

1981 
xWr™eL—dšgSEIMes§ges
(
ËadšgSeiMes§ges
, 
duInfoSeiMes§ges
, 
acûssUn™
, 
pcSliû
->
g‘TLay”
(),…cSliû->
g‘SPS
(), 
duD©a
);

1982 
xWr™eDuSEIMes§ges
(
duInfoSeiMes§ges
, 
acûssUn™
, 
pcSliû
->
g‘TLay”
(),…cSliû->
g‘SPS
(), 
duD©a
);

1984 
	gpcPic
->
g‘PicYuvRec
()->
cÝyToPic
(
pcPicYuvRecOut
);

1986 
	gpcPic
->
£tRecÚM¬k
 ( 
Œue
 );

1987 
	gm_bFœ¡
 = 
çl£
;

1988 
	gm_iNumPicCoded
++;

1989 
	gm_tÙ®Coded
 ++;

1991 
´štf
("\n");

1992 
fæush
(
¡dout
);

1994 ià(
	gm_pcCfg
->
g‘Effic›ÁF›ldIRAPEÇbËd
())

1996 
	giGOPid
=
effF›ldIRAPM­
.
»¡ÜeGOPid
(
iGOPid
);

1998 #ià
REDUCED_ENCODER_MEMORY


2000 
	gpcPic
->
»Ëa£RecÚ¡ruùiÚIÁ”medŸ‹D©a
();

2001 ià(!
	gisF›ld
)

2003 
	gpcPic
->
»Ëa£Encod”SourûImageD©a
();

2009 
d–‘e
 
	gpcB™¡»amRedœeù
;

2011 
as£¹
 ( (
m_iNumPicCoded
 =ð
iNumPicRcvd
) );

2014 
Void
 
	gTEncGOP
::
	$´štOutSumm¬y
(
UIÁ
 
uiNumAÎPicCoded
, 
BoÞ
 
isF›ld
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

2016 
	`as£¹
 (
uiNumAÎPicCoded
 =ð
m_gcAÇlyzeAÎ
.
	`g‘NumPic
());

2020 cÚ¡ 
IÁ
 
¿‹MuÉl›r
=(
isF›ld
?2:1);

2021 
m_gcAÇlyzeAÎ
.
	`£tFrmR©e
Ð
m_pcCfg
->
	`g‘F¿meR©e
()*
¿‹MuÉl›r
 / (
DoubË
)m_pcCfg->
	`g‘TempÜ®Sub§m¶eR©io
());

2022 
m_gcAÇlyzeI
.
	`£tFrmR©e
Ð
m_pcCfg
->
	`g‘F¿meR©e
()*
¿‹MuÉl›r
 / (
DoubË
)m_pcCfg->
	`g‘TempÜ®Sub§m¶eR©io
());

2023 
m_gcAÇlyzeP
.
	`£tFrmR©e
Ð
m_pcCfg
->
	`g‘F¿meR©e
()*
¿‹MuÉl›r
 / (
DoubË
)m_pcCfg->
	`g‘TempÜ®Sub§m¶eR©io
());

2024 
m_gcAÇlyzeB
.
	`£tFrmR©e
Ð
m_pcCfg
->
	`g‘F¿meR©e
()*
¿‹MuÉl›r
 / (
DoubË
)m_pcCfg->
	`g‘TempÜ®Sub§m¶eR©io
());

2025 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
m_pcCfg
->
	`g‘ChromaFÜm©Idc
();

2028 
	`´štf
( "\n\nSUMMARY --------------------------------------------------------\n" );

2029 
m_gcAÇlyzeAÎ
.
	`´štOut
('a', 
chFmt
, 
ouutLogCŒl
, 
b™D•ths
);

2031 
	`´štf
( "\n\nI Slices--------------------------------------------------------\n" );

2032 
m_gcAÇlyzeI
.
	`´štOut
('i', 
chFmt
, 
ouutLogCŒl
, 
b™D•ths
);

2034 
	`´štf
( "\n\nP Slices--------------------------------------------------------\n" );

2035 
m_gcAÇlyzeP
.
	`´štOut
('p', 
chFmt
, 
ouutLogCŒl
, 
b™D•ths
);

2037 
	`´štf
( "\n\nB Slices--------------------------------------------------------\n" );

2038 
m_gcAÇlyzeB
.
	`´štOut
('b', 
chFmt
, 
ouutLogCŒl
, 
b™D•ths
);

2040 ià(!
m_pcCfg
->
	`g‘Summ¬yOutFž’ame
().
	`em±y
())

2042 
m_gcAÇlyzeAÎ
.
	`´štSumm¬y
(
chFmt
, 
ouutLogCŒl
, 
b™D•ths
, 
m_pcCfg
->
	`g‘Summ¬yOutFž’ame
());

2045 ià(!
m_pcCfg
->
	`g‘Summ¬yPicFž’ameBa£
().
	`em±y
())

2047 
m_gcAÇlyzeI
.
	`´štSumm¬y
(
chFmt
, 
ouutLogCŒl
, 
b™D•ths
, 
m_pcCfg
->
	`g‘Summ¬yPicFž’ameBa£
()+"I.txt");

2048 
m_gcAÇlyzeP
.
	`´štSumm¬y
(
chFmt
, 
ouutLogCŒl
, 
b™D•ths
, 
m_pcCfg
->
	`g‘Summ¬yPicFž’ameBa£
()+"P.txt");

2049 
m_gcAÇlyzeB
.
	`´štSumm¬y
(
chFmt
, 
ouutLogCŒl
, 
b™D•ths
, 
m_pcCfg
->
	`g‘Summ¬yPicFž’ameBa£
()+"B.txt");

2052 if(
isF›ld
)

2055 
m_gcAÇlyzeAÎ_š
.
	`£tFrmR©e
Ð
m_pcCfg
->
	`g‘F¿meR©e
(è/ (
DoubË
)m_pcCfg->
	`g‘TempÜ®Sub§m¶eR©io
());

2056 
m_gcAÇlyzeAÎ_š
.
	`£tB™s
(
m_gcAÇlyzeAÎ
.
	`g‘B™s
());

2059 
	`´štf
( "\n\nSUMMARY INTERLACED ---------------------------------------------\n" );

2060 
m_gcAÇlyzeAÎ_š
.
	`´štOut
('a', 
chFmt
, 
ouutLogCŒl
, 
b™D•ths
);

2062 ià(!
m_pcCfg
->
	`g‘Summ¬yOutFž’ame
().
	`em±y
())

2064 
m_gcAÇlyzeAÎ_š
.
	`´štSumm¬y
(
chFmt
, 
ouutLogCŒl
, 
b™D•ths
, 
m_pcCfg
->
	`g‘Summ¬yOutFž’ame
());

2068 
	`´štf
("\nRVM: %.3lf\n" , 
	`xC®cuÏ‹RVM
());

2069 
	}
}

2071 
Void
 
	gTEncGOP
::
	$´eLoÝFž‹rPicAÎ
Ð
TComPic
* 
pcPic
, 
UIÁ64
& 
ruiDi¡
 )

2073 
BoÞ
 
bC®cDi¡
 = 
çl£
;

2074 
m_pcLoÝFž‹r
->
	`£tCfg
(
m_pcCfg
->
	`g‘LFCrossTžeBound¬yFÏg
());

2075 
m_pcLoÝFž‹r
->
	`loÝFž‹rPic
Ð
pcPic
 );

2077 ià(!
bC®cDi¡
)

2079 
ruiDi¡
 = 
	`xFšdDi¡ÜtiÚF¿me
(
pcPic
->
	`g‘PicYuvOrg
(),…cPic->
	`g‘PicYuvRec
(),…cPic->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
());

2081 
	}
}

2088 
Void
 
	gTEncGOP
::
	$xIn™GOP
Ð
IÁ
 
iPOCLa¡
, IÁ 
iNumPicRcvd
, 
BoÞ
 
isF›ld
 )

2090 
	`as£¹
Ð
iNumPicRcvd
 > 0 );

2092 iàÐÐ
isF›ld
 && (
iPOCLa¡
 == 0 || iPOCLast == 1) ) || (!isField && (iPOCLast == 0)) )

2094 
m_iGÝSize
 = 1;

2098 
m_iGÝSize
 = 
m_pcCfg
->
	`g‘GOPSize
();

2100 
	`as£¹
 (
m_iGÝSize
 > 0);

2103 
	}
}

2106 
Void
 
	gTEncGOP
::
xG‘Bufãr
Ð
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
,

2107 
TComLi¡
<
TComPicYuv
*>& 
rcLi¡PicYuvRecOut
,

2108 
IÁ
 
iNumPicRcvd
,

2109 
IÁ
 
iTimeOff£t
,

2110 
TComPic
*& 
½cPic
,

2111 
TComPicYuv
*& 
½cPicYuvRecOut
,

2112 
IÁ
 
pocCu¼
,

2113 
BoÞ
 
isF›ld
)

2115 
IÁ
 
	gi
;

2117 
	gTComLi¡
<
	gTComPicYuv
*>::
™”©Ü
 
™”PicYuvRec
 = 
rcLi¡PicYuvRecOut
.
’d
();

2119 ià(
	gisF›ld
 && 
	gpocCu¼
 > 1 && 
	gm_iGÝSize
!=1)

2121 
iTimeOff£t
--;

2124  
	gi
 = 0; i < (
	giNumPicRcvd
 - 
	giTimeOff£t
 + 1); i++ )

2126 
	g™”PicYuvRec
--;

2129 
	g½cPicYuvRecOut
 = *(
™”PicYuvRec
);

2132 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

2133 
	g™”Pic
 !ð
rcLi¡Pic
.
’d
())

2135 
½cPic
 = *(
™”Pic
);

2136 
	g½cPic
->
£tCu¼SliûIdx
(0);

2137 ià(
	g½cPic
->
g‘POC
(è=ð
pocCu¼
)

2141 
	g™”Pic
++;

2144 
as£¹
 (
½cPic
 !ð
NULL
);

2145 
as£¹
 (
½cPic
->
g‘POC
(è=ð
pocCu¼
);

2150 
UIÁ64
 
	gTEncGOP
::
	$xFšdDi¡ÜtiÚF¿me
 (
TComPicYuv
* 
pcPic0
, TComPicYuv* 
pcPic1
, cÚ¡ 
B™D•ths
 &
b™D•ths
)

2152 
UIÁ64
 
uiTÙ®Diff
 = 0;

2154 
IÁ
 
chª
=0; chª<
pcPic0
 ->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2156 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2157 
P–
* 
pSrc0
 = 
pcPic0
 ->
	`g‘Addr
(
ch
);

2158 
P–
* 
pSrc1
 = 
pcPic1
 ->
	`g‘Addr
(
ch
);

2159 
UIÁ
 
uiShiá
 = 2 * 
	`DISTORTION_PRECISION_ADJUSTMENT
(
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
ch
)]-8);

2161 cÚ¡ 
IÁ
 
iSŒide
 = 
pcPic0
->
	`g‘SŒide
(
ch
);

2162 cÚ¡ 
IÁ
 
iWidth
 = 
pcPic0
->
	`g‘Width
(
ch
);

2163 cÚ¡ 
IÁ
 
iHeight
 = 
pcPic0
->
	`g‘Height
(
ch
);

2165 
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

2167 
IÁ
 
x
 = 0; x < 
iWidth
; x++ )

2169 
IÁ”medŸ‹_IÁ
 
iTemp
 = 
pSrc0
[
x
] - 
pSrc1
[x];

2170 
uiTÙ®Diff
 +ð
	`UIÁ64
((
iTemp
*iTempè>> 
uiShiá
);

2172 
pSrc0
 +ð
iSŒide
;

2173 
pSrc1
 +ð
iSŒide
;

2177  
uiTÙ®Diff
;

2178 
	}
}

2180 
Void
 
	gTEncGOP
::
xC®cuÏ‹AddPSNRs
ÐcÚ¡ 
BoÞ
 
isF›ld
, cÚ¡ BoÞ 
isF›ldTÝF›ldFœ¡
, cÚ¡ 
IÁ
 
iGOPid
, 
TComPic
* 
pcPic
, cÚ¡ 
AcûssUn™
&
acûssUn™
, 
TComLi¡
<TComPic*> &
rcLi¡Pic
, cÚ¡ 
DoubË
 
dEncTime
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, DoubË* 
PSNR_Y
 )

2182 
xC®cuÏ‹AddPSNR
Ð
pcPic
,…cPic->
g‘PicYuvRec
(), 
acûssUn™
, 
dEncTime
, 
_cÚv”siÚ
, 
¢r_cÚv”siÚ
, 
ouutLogCŒl
, 
PSNR_Y
 );

2184 if(
	gisF›ld
)

2186 
BoÞ
 
	gbÙhF›ldsA»Encoded
 = 
çl£
;

2187 
IÁ
 
	gcÜ»¥ÚdšgF›ldPOC
 = 
pcPic
->
g‘POC
();

2188 
IÁ
 
	gcu¼’tPicGOPPoc
 = 
m_pcCfg
->
g‘GOPEÁry
(
iGOPid
).
m_POC
;

2189 if(
	gpcPic
->
g‘POC
() == 0)

2194 
bÙhF›ldsA»Encoded
 = 
çl£
;

2196 if(
	gpcPic
->
g‘POC
() == 1)

2199 
cÜ»¥ÚdšgF›ldPOC
 = 0;

2200 
	gbÙhF›ldsA»Encoded
 = 
Œue
;

2204 if(
	gpcPic
->
g‘POC
()%2 == 1)

2206 
cÜ»¥ÚdšgF›ldPOC
 -= 1;

2207 
	gcu¼’tPicGOPPoc
 -= 1;

2211 
	gcÜ»¥ÚdšgF›ldPOC
 += 1;

2212 
	gcu¼’tPicGOPPoc
 += 1;

2214 
IÁ
 
	gi
 = 0; i < 
	gm_iGÝSize
; i ++)

2216 if(
	gm_pcCfg
->
g‘GOPEÁry
(
i
).
	gm_POC
 =ð
cu¼’tPicGOPPoc
)

2218 
bÙhF›ldsA»Encoded
 = 
m_pcCfg
->
g‘GOPEÁry
(
i
).
m_isEncoded
;

2224 if(
	gbÙhF›ldsA»Encoded
)

2227 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

2228 (*
	g™”Pic
)->
g‘POC
(è!ð
cÜ»¥ÚdšgF›ldPOC
)

2230 
™”Pic
 ++;

2232 
TComPic
* 
	gcÜ»¥ÚdšgF›ldPic
 = *(
™”Pic
);

2234 ifÐ(
	gpcPic
->
isTÝF›ld
(è&& 
	gisF›ldTÝF›ldFœ¡
) || (!pcPic->isTopField() && !isFieldTopFieldFirst))

2236 
xC®cuÏ‹IÁ”ÏûdAddPSNR
(
pcPic
, 
cÜ»¥ÚdšgF›ldPic
,…cPic->
g‘PicYuvRec
(), cÜ»¥ÚdšgF›ldPic->g‘PicYuvRec(), 
¢r_cÚv”siÚ
, 
ouutLogCŒl
, 
PSNR_Y
 );

2240 
xC®cuÏ‹IÁ”ÏûdAddPSNR
(
cÜ»¥ÚdšgF›ldPic
, 
pcPic
, cÜ»¥ÚdšgF›ldPic->
g‘PicYuvRec
(),…cPic->g‘PicYuvRec(), 
¢r_cÚv”siÚ
, 
ouutLogCŒl
, 
PSNR_Y
 );

2246 
Void
 
	gTEncGOP
::
	$xC®cuÏ‹AddPSNR
Ð
TComPic
* 
pcPic
, 
TComPicYuv
* 
pcPicD
, cÚ¡ 
AcûssUn™
& 
acûssUn™
, 
DoubË
 
dEncTime
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, DoubË* 
PSNR_Y
 )

2248 
TEncAÇlyze
::
ResuÉD©a
 
»suÉ
;

2252 
TComPicYuv
 
cscd
;

2254 ià(
¢r_cÚv”siÚ
!=
IPCOLOURSPACE_UNCHANGED
)

2256 
cscd
.
	`ü—‹W™houtCUInfo
(
pcPicD
->
	`g‘Width
(
COMPONENT_Y
),…cPicD->
	`g‘Height
(COMPONENT_Y),…cPicD->
	`g‘ChromaFÜm©
() );

2257 
TVideoIOYuv
::
	`CÞourS·ûCÚv”t
(*
pcPicD
, 
cscd
, 
¢r_cÚv”siÚ
, 
çl£
);

2259 
TComPicYuv
 &
picd
=(
¢r_cÚv”siÚ
==
IPCOLOURSPACE_UNCHANGED
)?*
pcPicD
 : 
cscd
;

2263 
TComPicYuv
 
tmpTrueOrgInIÁ”ÇlM­
;

2264 cÚ¡ 
TComPicYuv
 *
pOrgPicYuv
=0;

2266 cÚ¡ 
boÞ
 
bOrgD©aHasB“nAdju¡ed
=
m_pcCfg
->
	`g‘GÝBa£dTempÜ®Fž‹rEÇbËd
();

2267 ià(
¢r_cÚv”siÚ
==
IPCOLOURSPACE_UNCHANGED
)

2270 ià(
bOrgD©aHasB“nAdju¡ed
)

2273 
tmpTrueOrgInIÁ”ÇlM­
.
	`ü—‹W™houtCUInfo
(
pcPicD
->
	`g‘Width
(
COMPONENT_Y
),…cPicD->
	`g‘Height
(COMPONENT_Y),…cPicD->
	`g‘ChromaFÜm©
());

2274 
TVideoIOYuv
::
	`CÞourS·ûCÚv”t
(*
pcPic
->
	`g‘PicYuvTrueOrg
(), 
tmpTrueOrgInIÁ”ÇlM­
, 
_cÚv”siÚ
, 
Œue
);

2275 
pOrgPicYuv
 = &
tmpTrueOrgInIÁ”ÇlM­
;

2280 
pOrgPicYuv
 = 
pcPic
->
	`g‘PicYuvOrg
();

2286 
pOrgPicYuv
 = 
pcPic
 ->
	`g‘PicYuvTrueOrg
();

2292 ià(
ouutLogCŒl
.
´štXPSNR
 && 
pcPicD
->
	`g‘ChromaFÜm©
(è!ð
CHROMA_400
)

2294 cÚ¡ 
P–
* 
pOrg
[
MAX_NUM_COMPONENT
];

2295 
DoubË
 
dWeightP–
[
MAX_NUM_COMPONENT
];

2296 
IÁ
 
iWeightSize
[
MAX_NUM_COMPONENT
] = {1, 1, 1};

2297 cÚ¡ 
P–
* 
pRec
[
MAX_NUM_COMPONENT
];

2298 
IÁ
 
iOrgSŒide
[
MAX_NUM_COMPONENT
], 
iRecSŒide
[MAX_NUM_COMPONENT];

2299 
IÁ
 
iWidth
[
MAX_NUM_COMPONENT
], 
iHeight
[MAX_NUM_COMPONENT], 
iSize
[MAX_NUM_COMPONENT];

2300 
UIÁ64
 
uiSSD‹mp
[
MAX_NUM_COMPONENT
];

2301 
UIÁ
 
uiShiáWidth
[
MAX_NUM_COMPONENT
], 
uiShiáHeight
[MAX_NUM_COMPONENT];

2302 
IÁ”medŸ‹_IÁ
 
iDiff
;

2304 
IÁ
 
chª
=0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2306 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2308 
iOrgSŒide
[
ch
] = 
pOrgPicYuv
->
	`g‘SŒide
(ch);

2309 
iRecSŒide
[
ch
] = 
picd
.
	`g‘SŒide
(ch);

2310 
iWidth
[
ch
] = 
pcPicD
->
	`g‘Width
 (chè- (
m_pcEncTÝ
->
	`g‘Pad
(0è>> 
pcPic
->
	`g‘CompÚ’tSÿËX
(ch));

2311 
iHeight
[
ch
] = 
pcPicD
->
	`g‘Height
(chè- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> (
pcPic
->
	`isF›ld
()?1:0)è>>…cPic->
	`g‘CompÚ’tSÿËY
(ch));

2312 
iSize
[
ch
] = 
iWidth
[ch]*
iHeight
[ch];

2313 
uiSSD‹mp
[
ch
] = 0;

2314 
uiShiáWidth
[
ch
] = (ch =ð
COMPONENT_Y
 || 
pcPicD
->
	`g‘ChromaFÜm©
(è=ð
CHROMA_444
) ? 0 : 1;

2315 
uiShiáHeight
[
ch
] = (ch =ð
COMPONENT_Y
 || 
pcPicD
->
	`g‘ChromaFÜm©
(è=ð
CHROMA_444
 ||…cPicD->g‘ChromaFÜm©(è=ð
CHROMA_422
) ? 0 : 1;

2316 
dWeightP–
[
ch
] = 
m_pcCfg
->
	`g‘XPSNRWeight
(ch);

2317 
pOrg
[
ch
] = 
pOrgPicYuv
->
	`g‘Addr
(ch);

2318 
pRec
[
ch
] = 
picd
.
	`g‘Addr
(ch);

2321 
DoubË
 
dSSD‹mp
=0;

2322 
¡d
::
veùÜ
<
DoubË
> 
	`vecSSEChroma
(
iSize
[
COMPONENT_Cb
], 
	`DoubË
(0));

2323 
IÁ
 
y
 = 0, 
t
ð0; y < 
iHeight
[
COMPONENT_Cb
]; y++ )

2325 
IÁ
 
x
 = 0; x < 
iWidth
[
COMPONENT_Cb
]; x++, 
t
++)

2327 
UIÁ64
 
uiSE_cb
, 
uiSE_ü
;

2328 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Cb
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Cb][x] );

2329 
uiSE_cb
 = 
iDiff
 * iDiff;

2330 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Cr
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Cr][x] );

2331 
uiSE_ü
 = 
iDiff
 * iDiff;

2332 
uiSSD‹mp
[
COMPONENT_Cb
] +ð
uiSE_cb
;

2333 
uiSSD‹mp
[
COMPONENT_Cr
] +ð
uiSE_ü
;

2334 
vecSSEChroma
[
t
] = 
dWeightP–
[
COMPONENT_Cb
] * (
DoubË
è
uiSE_cb
 + dWeightP–[
COMPONENT_Cr
] * (DoubËè
uiSE_ü
;

2336 
pOrg
[
COMPONENT_Cb
] +ð
iOrgSŒide
[COMPONENT_Cb];

2337 
pRec
[
COMPONENT_Cb
] +ð
iRecSŒide
[COMPONENT_Cb];

2338 
pOrg
[
COMPONENT_Cr
] +ð
iOrgSŒide
[COMPONENT_Cr];

2339 
pRec
[
COMPONENT_Cr
] +ð
iRecSŒide
[COMPONENT_Cr];

2342 
IÁ
 
y
 = 0; y < 
iHeight
[
COMPONENT_Y
]; y++ )

2344 
UIÁ
 
y_¡•_chroma
 = (
y
 >> 
uiShiáHeight
[
COMPONENT_Cb
]è* 
iWidth
[COMPONENT_Cb];

2345 
IÁ
 
x
 = 0; x < 
iWidth
[
COMPONENT_Y
]; x++)

2347 
UIÁ64
 
uiSE_y
;

2348 
UIÁ
 
x_¡•_chroma
 = (
x
 >> 
uiShiáWidth
[
COMPONENT_Cb
]);

2349 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Y
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Y][x] );

2350 
uiSE_y
 = 
iDiff
 * iDiff;

2351 
uiSSD‹mp
[
COMPONENT_Y
] +ð
uiSE_y
;

2352 
dSSD‹mp
 +ð
	`sq¹
(
dWeightP–
[
COMPONENT_Y
] * (
DoubË
è
uiSE_y
 + 
vecSSEChroma
[
y_¡•_chroma
+
x_¡•_chroma
]);

2354 
pOrg
[
COMPONENT_Y
] +ð
iOrgSŒide
[COMPONENT_Y];

2355 
pRec
[
COMPONENT_Y
] +ð
iRecSŒide
[COMPONENT_Y];

2358 
DoubË
 
fWV®ue
 = 0;

2359  
IÁ
 
chª
 = 0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2361 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2362 cÚ¡ 
UIÁ
 
maxv®
 = 255 << (
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
)) - 8);

2363 cÚ¡ 
DoubË
 
fRefV®ue
 = (DoubËè
maxv®
 * maxv® * 
iSize
[
ch
];

2364 
»suÉ
.
p¢r
[
ch
] = ( 
uiSSD‹mp
[ch] ? 10.0 * 
	`log10
Ð
fRefV®ue
 / (
DoubË
)uiSSDtemp[ch] ) : 999.99 );

2365 
»suÉ
.
MSEyuväame
[
ch
] = (
DoubË
)
uiSSD‹mp
[ch]/(
iSize
[ch]);

2366 
fWV®ue
 +ð(
DoubË
è
iWeightSize
[
ch
] * (DoubËè
iSize
[ch];

2368 cÚ¡ 
DoubË
 
maxv®
 = 255 << (
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(
COMPONENT_Y
)) - 8);

2369 
fWV®ue
 = 
	`DoubË
Ð
maxv®
 * fWValue);

2370 
»suÉ
.
xp¢r
 = 
dSSD‹mp
 ? 20.0 * 
	`log10
Ð
fWV®ue
 / dSSDtemp) : 999.99;

2374 
IÁ
 
chª
=0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2376 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2377 cÚ¡ 
P–
* 
pOrg
 = 
pOrgPicYuv
->
	`g‘Addr
(
ch
);

2378 cÚ¡ 
IÁ
 
iOrgSŒide
 = 
pOrgPicYuv
->
	`g‘SŒide
(
ch
);

2379 
P–
* 
pRec
 = 
picd
.
	`g‘Addr
(
ch
);

2380 cÚ¡ 
IÁ
 
iRecSŒide
 = 
picd
.
	`g‘SŒide
(
ch
);

2381 cÚ¡ 
IÁ
 
iWidth
 = 
pcPicD
->
	`g‘Width
 (
ch
è- (
m_pcEncTÝ
->
	`g‘Pad
(0è>> 
pcPic
->
	`g‘CompÚ’tSÿËX
(ch));

2382 cÚ¡ 
IÁ
 
iHeight
 = 
pcPicD
->
	`g‘Height
(
ch
è- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> (
pcPic
->
	`isF›ld
()?1:0)è>>…cPic->
	`g‘CompÚ’tSÿËY
(ch));

2384 
IÁ
 
iSize
 = 
iWidth
*
iHeight
;

2386 
UIÁ64
 
uiSSD‹mp
=0;

2387 
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

2389 
IÁ
 
x
 = 0; x < 
iWidth
; x++ )

2391 
IÁ”medŸ‹_IÁ
 
iDiff
 = (IÁ”medŸ‹_IÁ)Ð
pOrg
[
x
] - 
pRec
[x] );

2392 
uiSSD‹mp
 +ð
iDiff
 * iDiff;

2394 
pOrg
 +ð
iOrgSŒide
;

2395 
pRec
 +ð
iRecSŒide
;

2397 cÚ¡ 
IÁ
 
maxv®
 = 255 << (
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
)) - 8);

2398 cÚ¡ 
DoubË
 
fRefV®ue
 = (DoubËè
maxv®
 * maxv® * 
iSize
;

2399 
»suÉ
.
p¢r
[
ch
] = ( 
uiSSD‹mp
 ? 10.0 * 
	`log10
Ð
fRefV®ue
 / (
DoubË
)uiSSDtemp ) : 999.99 );

2400 
»suÉ
.
MSEyuväame
[
ch
] = (
DoubË
)
uiSSD‹mp
/(
iSize
);

2403 #ià
EXTENSION_360_VIDEO


2404 
m_ext360
.
	`ÿlcuÏ‹PSNRs
(
pcPic
);

2408 ià(
ouutLogCŒl
.
´štMSSSIM
)

2410 
IÁ
 
chª
=0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2412 cÚ¡ 
CompÚ’tID
 
ch
 = 
	`CompÚ’tID
(
chª
);

2413 cÚ¡ 
P–
* 
pOrg
 = 
pOrgPicYuv
->
	`g‘Addr
(
ch
);

2414 cÚ¡ 
IÁ
 
ÜgSŒide
 = 
pOrgPicYuv
->
	`g‘SŒide
(
ch
);

2415 cÚ¡ 
P–
* 
pRec
 = 
picd
.
	`g‘Addr
(
ch
);

2416 cÚ¡ 
IÁ
 
»cSŒide
 = 
picd
.
	`g‘SŒide
(
ch
);

2417 cÚ¡ 
IÁ
 
width
 = 
pcPicD
->
	`g‘Width
 (
ch
è- (
m_pcEncTÝ
->
	`g‘Pad
(0è>> 
pcPic
->
	`g‘CompÚ’tSÿËX
(ch));

2418 cÚ¡ 
IÁ
 
height
 = 
pcPicD
->
	`g‘Height
(
ch
è- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> (
pcPic
->
	`isF›ld
()?1:0)è>>…cPic->
	`g‘CompÚ’tSÿËY
(ch));

2419 cÚ¡ 
UIÁ
 
b™D•th
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
));

2421 
»suÉ
.
MSSSIM
[
ch
] = 
	`xC®cuÏ‹MSSSIM
 (
pOrg
, 
ÜgSŒide
, 
pRec
, 
»cSŒide
, 
width
, 
height
, 
b™D•th
);

2428 
UIÁ
 
numRBSPBy‹s
 = 0;

2429 
AcûssUn™
::
cÚ¡_™”©Ü
 
™
 = 
acûssUn™
.
	`begš
(); iˆ!ðacûssUn™.
	`’d
(); it++)

2431 
UIÁ
 
numRBSPBy‹s_Çl
 = 
	`UIÁ
((*
™
)->
m_ÇlUn™D©a
.
	`¡r
().
	`size
());

2432 ià(
m_pcCfg
->
	`g‘Summ¬yV”bo£Ãss
() > 0)

2434 
	`´štf
("*** %6 numBy‹sInNALun™: %u\n", 
	`ÇlUn™Ty³ToSŒšg
((*
™
)->
m_ÇlUn™Ty³
), 
numRBSPBy‹s_Çl
);

2436 ià((*
™
)->
m_ÇlUn™Ty³
 !ð
NAL_UNIT_PREFIX_SEI
 && (*™)->m_ÇlUn™Ty³ !ð
NAL_UNIT_SUFFIX_SEI
)

2438 
numRBSPBy‹s
 +ð
numRBSPBy‹s_Çl
;

2440 ià(
™
 =ð
acûssUn™
.
	`begš
(è|| (*™)->
m_ÇlUn™Ty³
 =ð
NAL_UNIT_VPS
 || (*™)->m_ÇlUn™Ty³ =ð
NAL_UNIT_SPS
 || (*™)->m_ÇlUn™Ty³ =ð
NAL_UNIT_PPS
)

2442 
numRBSPBy‹s
 += 4;

2446 
numRBSPBy‹s
 += 3;

2451 
UIÁ
 
uib™s
 = 
numRBSPBy‹s
 * 8;

2452 
m_vRVM_RP
.
	`push_back
Ð
uib™s
 );

2455 
»suÉ
.
b™s
=(
DoubË
)
uib™s
;

2456 
m_gcAÇlyzeAÎ
.
	`addResuÉ
 (
»suÉ
);

2458 #ià
EXTENSION_360_VIDEO


2459 
m_ext360
.
	`addResuÉ
(
m_gcAÇlyzeAÎ
);

2462 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(0);

2463 ià(
pcSliû
->
	`isIÁ¿
())

2465 
m_gcAÇlyzeI
.
	`addResuÉ
 (
»suÉ
);

2466 #ià
EXTENSION_360_VIDEO


2467 
m_ext360
.
	`addResuÉ
(
m_gcAÇlyzeI
);

2469 *
PSNR_Y
 = 
»suÉ
.
p¢r
[
COMPONENT_Y
];

2471 ià(
pcSliû
->
	`isIÁ”P
())

2473 
m_gcAÇlyzeP
.
	`addResuÉ
 (
»suÉ
);

2474 #ià
EXTENSION_360_VIDEO


2475 
m_ext360
.
	`addResuÉ
(
m_gcAÇlyzeP
);

2477 *
PSNR_Y
 = 
»suÉ
.
p¢r
[
COMPONENT_Y
];

2479 ià(
pcSliû
->
	`isIÁ”B
())

2481 
m_gcAÇlyzeB
.
	`addResuÉ
 (
»suÉ
);

2482 #ià
EXTENSION_360_VIDEO


2483 
m_ext360
.
	`addResuÉ
(
m_gcAÇlyzeB
);

2485 *
PSNR_Y
 = 
»suÉ
.
p¢r
[
COMPONENT_Y
];

2488 
TCh¬
 
c
 = (
pcSliû
->
	`isIÁ¿
(è? 'I' :…cSliû->
	`isIÁ”P
() ? 'P' : 'B');

2489 ià(!
pcSliû
->
	`isReã»nûd
())

2491 
c
 += 32;

2494 #ià
ADAPTIVE_QP_SELECTION


2495 
	`´štf
("POC %4d TId: %1d ( %c-SLICE,‚QP %d QP %d ) %10d bits",

2496 
pcSliû
->
	`g‘POC
(),

2497 
pcSliû
->
	`g‘TLay”
(),

2498 
c
,

2499 
pcSliû
->
	`g‘SliûQpBa£
(),

2500 
pcSliû
->
	`g‘SliûQp
(),

2501 
uib™s
 );

2503 
	`´štf
("POC %4d TId: %1d ( %c-SLICE, QP %d ) %10d bits",

2504 
pcSliû
->
	`g‘POC
()-pcSliû->
	`g‘La¡IDR
(),

2505 
pcSliû
->
	`g‘TLay”
(),

2506 
c
,

2507 
pcSliû
->
	`g‘SliûQp
(),

2508 
uib™s
 );

2511 
	`´štf
(" [Y %6.4làdB U %6.4làdB V %6.4làdB]", 
»suÉ
.
p¢r
[
COMPONENT_Y
],„esuÉ.p¢r[
COMPONENT_Cb
],„esuÉ.p¢r[
COMPONENT_Cr
] );

2513 ià(
ouutLogCŒl
.
´štHexP”POCPSNRs
)

2515 
ušt64_t
 
xP¢r
[
MAX_NUM_COMPONENT
];

2516 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

2518 
	`cÝy
(
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
»suÉ
.
p¢r
[
i
]),

2519 
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
»suÉ
.
p¢r
[
i
]) + (result.psnr[i]),

2520 
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
xP¢r
[
i
]));

2522 
	`´štf
(" [xY %16" 
PRIx64
 " xU %16" PRIx64 " xv %16" PRIx64 "]", 
xP¢r
[
COMPONENT_Y
], xP¢r[
COMPONENT_Cb
], xP¢r[
COMPONENT_Cr
]);

2525 ià(
ouutLogCŒl
.
´štMSSSIM
)

2527 
	`´štf
(" [MS-SSIM Y %1.6là U %1.6là V %1.6lf]", 
»suÉ
.
MSSSIM
[
COMPONENT_Y
],„esuÉ.MSSSIM[
COMPONENT_Cb
],„esuÉ.MSSSIM[
COMPONENT_Cr
] );

2529 ià(
ouutLogCŒl
.
´štXPSNR
)

2531 
	`´štf
(" [xPSNR %6.4làdB]", 
»suÉ
.
xp¢r
);

2533 ià(
ouutLogCŒl
.
´štF¿meMSE
)

2535 
	`´štf
(" [Y MSE %6.4là U MSE %6.4là V MSE %6.4lf]", 
»suÉ
.
MSEyuväame
[
COMPONENT_Y
],„esuÉ.MSEyuväame[
COMPONENT_Cb
],„esuÉ.MSEyuväame[
COMPONENT_Cr
] );

2537 #ià
EXTENSION_360_VIDEO


2538 
m_ext360
.
	`´štP”POCInfo
();

2540 
	`´štf
(" [ET %5.0à]", 
dEncTime
 );

2544 
IÁ
 
iRefLi¡
 = 0; iRefList < 2; iRefList++)

2546 
	`´štf
(" [L%d ", 
iRefLi¡
);

2547 
IÁ
 
iRefIndex
 = 0; iRefIndex < 
pcSliû
->
	`g‘NumRefIdx
(
	`RefPicLi¡
(
iRefLi¡
)); iRefIndex++)

2549 
	`´štf
 ("%d ", 
pcSliû
->
	`g‘RefPOC
(
	`RefPicLi¡
(
iRefLi¡
), 
iRefIndex
)-pcSliû->
	`g‘La¡IDR
());

2551 
	`´štf
("]");

2554 
cscd
.
	`de¡roy
();

2555 
	}
}

2557 
DoubË
 
	gTEncGOP
::
	$xC®cuÏ‹MSSSIM
 (cÚ¡ 
P–
 *
pOrg
, cÚ¡ 
IÁ
 
ÜgSŒide
, cÚ¡ P–* 
pRec
, cÚ¡ IÁ 
»cSŒide
, cÚ¡ IÁ 
width
, cÚ¡ IÁ 
height
, cÚ¡ 
UIÁ
 
b™D•th
)

2559 cÚ¡ 
IÁ
 
MAX_MSSSIM_SCALE
 = 5;

2560 cÚ¡ 
IÁ
 
WEIGHTING_MID_TAP
 = 5;

2561 cÚ¡ 
IÁ
 
WEIGHTING_SIZE
 = 
WEIGHTING_MID_TAP
*2+1;

2563 
UIÁ
 
maxSÿË
;

2566 ià(
width
 < 22 || 
height
 < 22)

2568 
maxSÿË
 = 1;

2570 ià(
width
 < 44 || 
height
 < 44)

2572 
maxSÿË
 = 2;

2574 ià(
width
 < 88 || 
height
 < 88)

2576 
maxSÿË
 = 3;

2578 ià(
width
 < 176 || 
height
 < 176)

2580 
maxSÿË
 = 4;

2584 
maxSÿË
 = 5;

2587 
	`as£¹
(
maxSÿË
>0 && maxSÿË<=
MAX_MSSSIM_SCALE
);

2590 
DoubË
 
weights
[
WEIGHTING_SIZE
][WEIGHTING_SIZE];

2592 
DoubË
 
cÛffSum
=0.0;

2593 
IÁ
 
y
=0; y<
WEIGHTING_SIZE
; y++)

2595 
IÁ
 
x
=0; x<
WEIGHTING_SIZE
; x++)

2597 
weights
[
y
][
x
]=
	`exp
(-((y-
WEIGHTING_MID_TAP
)*(y-WEIGHTING_MID_TAP)+(x-WEIGHTING_MID_TAP)*(x-WEIGHTING_MID_TAP))/(WEIGHTING_MID_TAP-0.5));

2598 
cÛffSum
 +=
weights
[
y
][
x
];

2602 
IÁ
 
y
=0; y<
WEIGHTING_SIZE
; y++)

2604 
IÁ
 
x
=0; x<
WEIGHTING_SIZE
; x++)

2606 
weights
[
y
][
x
] /=
cÛffSum
;

2612 cÚ¡ 
DoubË
 
expÚ’tWeights
[
MAX_MSSSIM_SCALE
][MAX_MSSSIM_SCALE] = {{1.0, 0, 0, 0, 0 },

2619 
¡d
::
veùÜ
<
DoubË
> 
Üigš®
[
MAX_MSSSIM_SCALE
];

2620 
¡d
::
veùÜ
<
DoubË
> 
»cÚ
[
MAX_MSSSIM_SCALE
];

2622 
UIÁ
 
sÿË
=0; sÿË<
maxSÿË
; scale++)

2624 cÚ¡ 
IÁ
 
sÿËdHeight
 = 
height
 >> 
sÿË
;

2625 cÚ¡ 
IÁ
 
sÿËdWidth
 = 
width
 >> 
sÿË
;

2626 
Üigš®
[
sÿË
].
	`»size
(
sÿËdHeight
*
sÿËdWidth
, 
	`DoubË
(0));

2627 
»cÚ
[
sÿË
].
	`»size
(
sÿËdHeight
*
sÿËdWidth
, 
	`DoubË
(0));

2631 
IÁ
 
y
=0; y<
height
; y++)

2633 
IÁ
 
x
=0; x<
width
; x++)

2635 
Üigš®
[0][
y
*
width
+
x
] = 
pOrg
[y*
ÜgSŒide
+x];

2636 
»cÚ
[0][ 
y
*
width
+
x
] = 
pRec
[y*
»cSŒide
+x];

2641 
UIÁ
 
sÿË
=1; sÿË<
maxSÿË
; scale++)

2643 cÚ¡ 
IÁ
 
sÿËdHeight
 = 
height
 >> 
sÿË
;

2644 cÚ¡ 
IÁ
 
sÿËdWidth
 = 
width
 >> 
sÿË
;

2645 
IÁ
 
y
=0; y<
sÿËdHeight
; y++)

2647 
IÁ
 
x
=0; x<
sÿËdWidth
; x++)

2649 
Üigš®
[
sÿË
][
y
*
sÿËdWidth
+
x
]= (original[scale-1][ 2*y *(2*scaledWidth)+2*x ] +

2650 
Üigš®
[
sÿË
-1][ 2*
y
 *(2*
sÿËdWidth
)+2*
x
+1] +

2651 
Üigš®
[
sÿË
-1][(2*
y
+1)*(2*
sÿËdWidth
)+2*
x
 ] +

2652 
Üigš®
[
sÿË
-1][(2*
y
+1)*(2*
sÿËdWidth
)+2*
x
+1]) / 4.0;

2653 
»cÚ
[
sÿË
][
y
*
sÿËdWidth
+
x
]= („econ[scale-1][ 2*y *(2*scaledWidth)+2*x ] +

2654 
»cÚ
[
sÿË
-1][ 2*
y
 *(2*
sÿËdWidth
)+2*
x
+1] +

2655 
»cÚ
[
sÿË
-1][(2*
y
+1)*(2*
sÿËdWidth
)+2*
x
 ] +

2656 
»cÚ
[
sÿË
-1][(2*
y
+1)*(2*
sÿËdWidth
)+2*
x
+1]) / 4.0;

2662 cÚ¡ 
UIÁ
 
maxV®ue
 = (1<<
b™D•th
)-1;

2663 cÚ¡ 
DoubË
 
c1
 = (0.01*
maxV®ue
)*(0.01*maxValue);

2664 cÚ¡ 
DoubË
 
c2
 = (0.03*
maxV®ue
)*(0.03*maxValue);

2666 
DoubË
 
fš®MSSSIM
 = 1.0;

2668 
UIÁ
 
sÿË
=0; sÿË<
maxSÿË
; scale++)

2670 cÚ¡ 
IÁ
 
sÿËdHeight
 = 
height
 >> 
sÿË
;

2671 cÚ¡ 
IÁ
 
sÿËdWidth
 = 
width
 >> 
sÿË
;

2672 cÚ¡ 
IÁ
 
blocksP”Row
 = 
sÿËdWidth
-
WEIGHTING_SIZE
+1;

2673 cÚ¡ 
IÁ
 
blocksP”CÞumn
 = 
sÿËdHeight
-
WEIGHTING_SIZE
+1;

2674 cÚ¡ 
IÁ
 
tÙ®Blocks
 = 
blocksP”Row
*
blocksP”CÞumn
;

2676 
DoubË
 
m—nSSIM
= 0.0;

2678 
IÁ
 
blockIndexY
=0; blockIndexY<
blocksP”CÞumn
; blockIndexY++)

2680 
IÁ
 
blockIndexX
=0; blockIndexX<
blocksP”Row
; blockIndexX++)

2682 
DoubË
 
muOrg
 =0.0;

2683 
DoubË
 
muRec
 =0.0;

2684 
DoubË
 
muOrigSqr
 =0.0;

2685 
DoubË
 
muRecSqr
 =0.0;

2686 
DoubË
 
muOrigMuÉRec
 =0.0;

2688 
IÁ
 
y
=0; y<
WEIGHTING_SIZE
; y++)

2690 
IÁ
 
x
=0;x<
WEIGHTING_SIZE
; x++)

2692 cÚ¡ 
DoubË
 
gaussŸnWeight
=
weights
[
y
][
x
];

2693 cÚ¡ 
IÁ
 
§m¶eOff£t
=(
blockIndexY
+
y
)*
sÿËdWidth
+(
blockIndexX
+
x
);

2694 cÚ¡ 
DoubË
 
ÜgP–
=
Üigš®
[
sÿË
][
§m¶eOff£t
];

2695 cÚ¡ 
DoubË
 
»cP–
ð
»cÚ
[
sÿË
][
§m¶eOff£t
];

2697 
muOrg
 +=
ÜgP–
* 
gaussŸnWeight
;

2698 
muRec
 +=
»cP–
* 
gaussŸnWeight
;

2699 
muOrigSqr
 +=
ÜgP–
*ÜgP–*
gaussŸnWeight
;

2700 
muRecSqr
 +=
»cP–
*»cP–*
gaussŸnWeight
;

2701 
muOrigMuÉRec
+=
ÜgP–
*
»cP–
*
gaussŸnWeight
;

2705 cÚ¡ 
DoubË
 
sigmaSqrOrig
 = 
muOrigSqr
 -(
muOrg
*muOrg);

2706 cÚ¡ 
DoubË
 
sigmaSqrRec
 = 
muRecSqr
 -(
muRec
*muRec);

2707 cÚ¡ 
DoubË
 
sigmaOrigRec
 = 
muOrigMuÉRec
-(
muOrg
*
muRec
);

2709 
DoubË
 
blockSSIMV®
 = ((2.0*
sigmaOrigRec
 + 
c2
)/(
sigmaSqrOrig
+
sigmaSqrRec
 + c2));

2710 if(
sÿË
 =ð
maxSÿË
-1)

2712 
blockSSIMV®
*=(2.0*
muOrg
*
muRec
 + 
c1
)/(muOrg*muOrg+muRec*muRec + c1);

2715 
m—nSSIM
 +ð
blockSSIMV®
;

2719 
m—nSSIM
 /=
tÙ®Blocks
;

2721 
fš®MSSSIM
 *ð
	`pow
(
m—nSSIM
, 
expÚ’tWeights
[
maxSÿË
-1][
sÿË
]);

2724  
fš®MSSSIM
;

2725 
	}
}

2728 
Void
 
	gTEncGOP
::
	$xC®cuÏ‹IÁ”ÏûdAddPSNR
Ð
TComPic
* 
pcPicOrgFœ¡F›ld
, TComPic* 
pcPicOrgSecÚdF›ld
,

2729 
TComPicYuv
* 
pcPicRecFœ¡F›ld
, TComPicYuv* 
pcPicRecSecÚdF›ld
,

2730 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, 
DoubË
* 
PSNR_Y
 )

2732 
TEncAÇlyze
::
ResuÉD©a
 
»suÉ
;

2733 cÚ¡ 
TComSPS
 &
¥s
=
pcPicOrgFœ¡F›ld
->
	`g‘PicSym
()->
	`g‘SPS
();

2734 
TComPic
 *
­cPicOrgF›lds
[2]={
pcPicOrgFœ¡F›ld
, 
pcPicOrgSecÚdF›ld
};

2735 
TComPicYuv
 *
­cPicRecF›lds
[2]={
pcPicRecFœ¡F›ld
, 
pcPicRecSecÚdF›ld
};

2737 
TComPicYuv
 
cscd
[2 ];

2738 ià(
cÚv”siÚ
!=
IPCOLOURSPACE_UNCHANGED
)

2740 
UIÁ
 
f›ldNum
=0; fieldNum<2; fieldNum++)

2742 
TComPicYuv
 &
»cÚF›ld
=*(
­cPicRecF›lds
[
f›ldNum
]);

2743 
cscd
[
f›ldNum
].
	`ü—‹W™houtCUInfo
(
»cÚF›ld
.
	`g‘Width
(
COMPONENT_Y
),„ecÚF›ld.
	`g‘Height
(COMPONENT_Y),„ecÚF›ld.
	`g‘ChromaFÜm©
() );

2744 
TVideoIOYuv
::
	`CÞourS·ûCÚv”t
(
»cÚF›ld
, 
cscd
[
f›ldNum
], 
cÚv”siÚ
, 
çl£
);

2745 
­cPicRecF›lds
[
f›ldNum
]=
cscd
+fieldNum;

2751 
	`as£¹
(
­cPicRecF›lds
[0]->
	`g‘ChromaFÜm©
()==apcPicRecFields[1]->getChromaFormat());

2752 cÚ¡ 
UIÁ
 
numV®idCompÚ’ts
=
­cPicRecF›lds
[0]->
	`g‘Numb”V®idCompÚ’ts
();

2753 cÚ¡ 
BoÞ
 
u£TrueOrg
 = 
cÚv”siÚ
 !ð
IPCOLOURSPACE_UNCHANGED
 || 
m_pcCfg
->
	`g‘GÝBa£dTempÜ®Fž‹rEÇbËd
();

2755 ià(
ouutLogCŒl
.
´štXPSNR
 && 
­cPicRecF›lds
[0]->
	`g‘ChromaFÜm©
(è!ð
CHROMA_400
 &&‡pcPicRecFields[1]->getChromaFormat() != CHROMA_400)

2758 
P–
* 
pOrg
[
MAX_NUM_COMPONENT
];

2759 
DoubË
 
dWeightP–
[
MAX_NUM_COMPONENT
];

2760 
IÁ
 
iWeightSize
[
MAX_NUM_COMPONENT
] = {1, 1, 1};

2761 
P–
* 
pRec
[
MAX_NUM_COMPONENT
];

2762 
IÁ
 
iOrgSŒide
[
MAX_NUM_COMPONENT
], 
iRecSŒide
[MAX_NUM_COMPONENT];

2763 
IÁ
 
iWidth
[
MAX_NUM_COMPONENT
], 
iHeight
[MAX_NUM_COMPONENT], 
iSize
[MAX_NUM_COMPONENT];

2764 
UIÁ64
 
uiSSD‹mp
[
MAX_NUM_COMPONENT
];

2765 
UIÁ
 
uiShiáWidth
[
MAX_NUM_COMPONENT
], 
uiShiáHeight
[MAX_NUM_COMPONENT];

2766 
IÁ”medŸ‹_IÁ
 
iDiff
;

2767 
DoubË
 
dSSD‹mp
 = 0.0;

2768 
DoubË
 
fWV®ue
 = 0.0;

2769 
UIÁ
 
f›ldNum
=0; fieldNum<2; fieldNum++)

2771 
TComPic
 *
pcPic
=
­cPicOrgF›lds
[
f›ldNum
];

2772 
TComPicYuv
 *
pcPicD
=
­cPicRecF›lds
[
f›ldNum
];

2773 
TComPicYuv
 *
pOrgPicYuv
 = 
u£TrueOrg
 ? 
pcPic
 ->
	`g‘PicYuvTrueOrg
(è:…cPiø->
	`g‘PicYuvOrg
();

2775 
IÁ
 
chª
=0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2777 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2778 
iOrgSŒide
[
ch
] = 
pOrgPicYuv
->
	`g‘SŒide
(ch);

2779 
iRecSŒide
[
ch
] = 
pcPicD
->
	`g‘SŒide
(ch);

2780 
iWidth
[
ch
] = 
pcPicD
->
	`g‘Width
 (chè- (
m_pcEncTÝ
->
	`g‘Pad
(0è>> 
pcPic
->
	`g‘CompÚ’tSÿËX
(ch));

2781 
iHeight
[
ch
] = 
pcPicD
->
	`g‘Height
(chè- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> 1è>> 
pcPic
->
	`g‘CompÚ’tSÿËY
(ch));

2782 
iSize
[
ch
] = 
iWidth
[ch]*
iHeight
[ch];

2783 
uiSSD‹mp
[
ch
] = 0;

2784 
uiShiáWidth
[
ch
] = (ch =ð
COMPONENT_Y
 || 
pcPicD
->
	`g‘ChromaFÜm©
(è=ð
CHROMA_444
) ? 0 : 1;

2785 
uiShiáHeight
[
ch
] = (ch =ð
COMPONENT_Y
 || 
pcPicD
->
	`g‘ChromaFÜm©
(è=ð
CHROMA_444
 ||…cPicD->g‘ChromaFÜm©(è=ð
CHROMA_422
) ? 0 : 1;

2786 
dWeightP–
[
ch
] = 
m_pcCfg
->
	`g‘XPSNRWeight
(ch);

2787 
pOrg
[
ch
] = 
pOrgPicYuv
->
	`g‘Addr
(ch);

2788 
pRec
[
ch
] = 
pcPicD
->
	`g‘Addr
(ch);

2790 
¡d
::
veùÜ
<
DoubË
> 
	`vecSSEChroma
(
iSize
[
COMPONENT_Cb
], 
	`DoubË
(0));

2792 
IÁ
 
y
 = 0, 
t
ð0; y < 
iHeight
[
COMPONENT_Cb
]; y++ )

2794 
IÁ
 
x
 = 0; x < 
iWidth
[
COMPONENT_Cb
]; x++, 
t
++)

2796 
UIÁ64
 
uiSE_cb
, 
uiSE_ü
;

2797 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Cb
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Cb][x] );

2798 
uiSE_cb
 = 
iDiff
 * iDiff;

2799 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Cr
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Cr][x] );

2800 
uiSE_ü
 = 
iDiff
 * iDiff;

2801 
uiSSD‹mp
[
COMPONENT_Cb
] +ð
uiSE_cb
;

2802 
uiSSD‹mp
[
COMPONENT_Cr
] +ð
uiSE_ü
;

2803 
vecSSEChroma
[
t
] = 
dWeightP–
[
COMPONENT_Cb
] * (
DoubË
è
uiSE_cb
 + dWeightP–[
COMPONENT_Cr
] * (DoubËè
uiSE_ü
;

2805 
pOrg
[
COMPONENT_Cb
] +ð
iOrgSŒide
[COMPONENT_Cb];

2806 
pRec
[
COMPONENT_Cb
] +ð
iRecSŒide
[COMPONENT_Cb];

2807 
pOrg
[
COMPONENT_Cr
] +ð
iOrgSŒide
[COMPONENT_Cr];

2808 
pRec
[
COMPONENT_Cr
] +ð
iRecSŒide
[COMPONENT_Cr];

2811 
IÁ
 
y
 = 0; y < 
iHeight
[
COMPONENT_Y
]; y++ )

2813 
UIÁ
 
y_¡•_chroma
 = (
y
 >> 
uiShiáHeight
[
COMPONENT_Cb
]è* 
iWidth
[COMPONENT_Cb];

2814 
IÁ
 
x
 = 0; x < 
iWidth
[
COMPONENT_Y
]; x++)

2816 
UIÁ64
 
uiSE_y
;

2817 
UIÁ
 
x_¡•_chroma
 = (
x
 >> 
uiShiáWidth
[
COMPONENT_Cb
]);

2818 
iDiff
 = (
IÁ”medŸ‹_IÁ
)Ð(IÁ”medŸ‹_IÁ)
pOrg
[
COMPONENT_Y
][
x
] - (IÁ”medŸ‹_IÁ)
pRec
[COMPONENT_Y][x] );

2819 
uiSE_y
 = 
iDiff
 * iDiff;

2820 
uiSSD‹mp
[
COMPONENT_Y
] +ð
uiSE_y
;

2821 
dSSD‹mp
 +ð
	`sq¹
(
dWeightP–
[
COMPONENT_Y
] * (
DoubË
è
uiSE_y
 + 
vecSSEChroma
[
y_¡•_chroma
+
x_¡•_chroma
]);

2823 
pOrg
[
COMPONENT_Y
] +ð
iOrgSŒide
[COMPONENT_Y];

2824 
pRec
[
COMPONENT_Y
] +ð
iRecSŒide
[COMPONENT_Y];

2827  
IÁ
 
chª
 = 0; chª<
pcPicD
->
	`g‘Numb”V®idCompÚ’ts
(); chan++)

2829 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2830 cÚ¡ 
UIÁ
 
maxv®
 = 255 << (
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
)) - 8);

2831 cÚ¡ 
DoubË
 
fRefV®ue
 = (DoubËè
maxv®
 * maxv® * 
iSize
[
ch
];

2832 
»suÉ
.
p¢r
[
ch
] = ( 
uiSSD‹mp
[ch] ? 10.0 * 
	`log10
Ð
fRefV®ue
 / (
DoubË
)uiSSDtemp[ch] ) : 999.99 );

2833 
»suÉ
.
MSEyuväame
[
ch
] = (
DoubË
)
uiSSD‹mp
[ch]/(
iSize
[ch]);

2834 
fWV®ue
 +ð(
DoubË
è
iWeightSize
[
ch
] * (DoubËè
iSize
[ch];

2837 cÚ¡ 
DoubË
 
maxv®
 = 255 << (
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
COMPONENT_Y
)) - 8);

2838 
fWV®ue
 = 
	`DoubË
Ð
maxv®
 * fWValue);

2839 
»suÉ
.
xp¢r
 = 
dSSD‹mp
 ? 20.0 * 
	`log10
Ð
fWV®ue
 / dSSDtemp) : 999.99;

2843 
IÁ
 
chª
=0; chª<
numV®idCompÚ’ts
; chan++)

2845 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2846 
	`as£¹
(
­cPicRecF›lds
[0]->
	`g‘Width
(
ch
)==apcPicRecFields[1]->getWidth(ch));

2847 
	`as£¹
(
­cPicRecF›lds
[0]->
	`g‘Height
(
ch
)==apcPicRecFields[1]->getHeight(ch));

2849 
UIÁ64
 
uiSSD‹mp
=0;

2850 cÚ¡ 
IÁ
 
iWidth
 = 
­cPicRecF›lds
[0]->
	`g‘Width
 (
ch
è- (
m_pcEncTÝ
->
	`g‘Pad
(0è>>‡pcPicRecF›lds[0]->
	`g‘CompÚ’tSÿËX
(ch));

2851 cÚ¡ 
IÁ
 
iHeight
 = 
­cPicRecF›lds
[0]->
	`g‘Height
(
ch
è- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> 1è>>‡pcPicRecF›lds[0]->
	`g‘CompÚ’tSÿËY
(ch));

2853 
IÁ
 
iSize
 = 
iWidth
*
iHeight
;

2855 
UIÁ
 
f›ldNum
=0; fieldNum<2; fieldNum++)

2857 
TComPic
 *
pcPic
=
­cPicOrgF›lds
[
f›ldNum
];

2858 
TComPicYuv
 *
pcPicD
=
­cPicRecF›lds
[
f›ldNum
];

2860 cÚ¡ 
P–
* 
pOrg
 = 
u£TrueOrg
 ? 
pcPic
 ->
	`g‘PicYuvTrueOrg
()->
	`g‘Addr
(
ch
è:…cPiø->
	`g‘PicYuvOrg
()->getAddr(ch);

2861 
P–
* 
pRec
 = 
pcPicD
->
	`g‘Addr
(
ch
);

2862 cÚ¡ 
IÁ
 
iSŒide
 = 
pcPicD
->
	`g‘SŒide
(
ch
);

2865 
IÁ
 
y
 = 0; y < 
iHeight
; y++ )

2867 
IÁ
 
x
 = 0; x < 
iWidth
; x++ )

2869 
IÁ”medŸ‹_IÁ
 
iDiff
 = (IÁ”medŸ‹_IÁ)Ð
pOrg
[
x
] - 
pRec
[x] );

2870 
uiSSD‹mp
 +ð
iDiff
 * iDiff;

2872 
pOrg
 +ð
iSŒide
;

2873 
pRec
 +ð
iSŒide
;

2876 cÚ¡ 
IÁ
 
maxv®
 = 255 << (
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
)) - 8);

2877 cÚ¡ 
DoubË
 
fRefV®ue
 = (DoubËè
maxv®
 * maxv® * 
iSize
*2;

2878 
»suÉ
.
p¢r
[
ch
] = ( 
uiSSD‹mp
 ? 10.0 * 
	`log10
Ð
fRefV®ue
 / (
DoubË
)uiSSDtemp ) : 999.99 );

2879 
»suÉ
.
MSEyuväame
[
ch
] = (
DoubË
)
uiSSD‹mp
/(
iSize
*2);

2883 ià(
ouutLogCŒl
.
´štMSSSIM
)

2885 
IÁ
 
chª
=0; chª<
numV®idCompÚ’ts
; chan++)

2887 cÚ¡ 
CompÚ’tID
 
ch
=
	`CompÚ’tID
(
chª
);

2888 
	`as£¹
(
­cPicRecF›lds
[0]->
	`g‘Width
(
ch
) ==apcPicRecFields[1]->getWidth(ch) );

2889 
	`as£¹
(
­cPicRecF›lds
[0]->
	`g‘Height
(
ch
)==apcPicRecFields[1]->getHeight(ch));

2891 
DoubË
 
sumOv”F›ldsMSSSIM
 = 0.0;

2892 cÚ¡ 
IÁ
 
width
 = 
­cPicRecF›lds
[0]->
	`g‘Width
 (
ch
è- ( 
m_pcEncTÝ
->
	`g‘Pad
(0è>>‡pcPicRecF›lds[0]->
	`g‘CompÚ’tSÿËX
(ch));

2893 cÚ¡ 
IÁ
 
height
 = 
­cPicRecF›lds
[0]->
	`g‘Height
(
ch
è- ((
m_pcEncTÝ
->
	`g‘Pad
(1è>> 1è>>‡pcPicRecF›lds[0]->
	`g‘CompÚ’tSÿËY
(ch));

2895 
UIÁ
 
f›ldNum
=0; fieldNum<2; fieldNum++)

2897 
TComPic
 *
pcPic
 = 
­cPicOrgF›lds
[
f›ldNum
];

2898 
TComPicYuv
 *
pcPicD
 = 
­cPicRecF›lds
[
f›ldNum
];

2900 cÚ¡ 
P–
* 
pOrg
 = 
u£TrueOrg
 ? 
pcPic
 ->
	`g‘PicYuvTrueOrg
()->
	`g‘Addr
(
ch
è:…cPiø->
	`g‘PicYuvOrg
()->getAddr(ch);

2901 cÚ¡ 
IÁ
 
ÜgSŒide
 = 
u£TrueOrg
 ? 
pcPic
 ->
	`g‘PicYuvTrueOrg
()->
	`g‘SŒide
(
ch
è:…cPiø->
	`g‘PicYuvOrg
()->getStride(ch);

2902 
P–
* 
pRec
 = 
pcPicD
->
	`g‘Addr
(
ch
);

2903 cÚ¡ 
IÁ
 
»cSŒide
 = 
pcPicD
->
	`g‘SŒide
(
ch
);

2904 cÚ¡ 
UIÁ
 
b™D•th
 = 
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
ch
));

2906 
sumOv”F›ldsMSSSIM
 +ð
	`xC®cuÏ‹MSSSIM
 (
pOrg
, 
ÜgSŒide
, 
pRec
, 
»cSŒide
, 
width
, 
height
, 
b™D•th
);

2909 
»suÉ
.
MSSSIM
[
ch
] = 
sumOv”F›ldsMSSSIM
/2;

2913 
»suÉ
.
b™s
 = 0;

2916 
m_gcAÇlyzeAÎ_š
.
	`addResuÉ
 (
»suÉ
);

2918 *
PSNR_Y
 = 
»suÉ
.
p¢r
[
COMPONENT_Y
];

2920 
	`´štf
("\À IÁ”Ïûd f¿m%d: [Y %6.4làdB U %6.4làdB V %6.4làdB]", 
pcPicOrgSecÚdF›ld
->
	`g‘POC
()/2 , 
»suÉ
.
p¢r
[
COMPONENT_Y
],„esuÉ.p¢r[
COMPONENT_Cb
],„esuÉ.p¢r[
COMPONENT_Cr
] );

2922 ià(
ouutLogCŒl
.
´štHexP”POCPSNRs
)

2924 
ušt64_t
 
xP¢r
[
MAX_NUM_COMPONENT
];

2925 
i
 = 0; i < 
MAX_NUM_COMPONENT
; i++)

2927 
	`cÝy
(
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
»suÉ
.
p¢r
[
i
]),

2928 
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
»suÉ
.
p¢r
[
i
]) + (result.psnr[i]),

2929 
»š‹½»t_ÿ¡
<
ušt8_t
 *>(&
xP¢r
[
i
]));

2931 
	`´štf
(" [xY %16" 
PRIx64
 " xU %16" PRIx64 " xv %16" PRIx64 "]", 
xP¢r
[
COMPONENT_Y
], xP¢r[
COMPONENT_Cb
], xP¢r[
COMPONENT_Cr
]);

2934 ià(
ouutLogCŒl
.
´štMSSSIM
)

2936 
	`´štf
(" [MS-SSIM Y %1.6là U %1.6là V %1.6lf]", 
»suÉ
.
MSSSIM
[
COMPONENT_Y
],„esuÉ.MSSSIM[
COMPONENT_Cb
],„esuÉ.MSSSIM[
COMPONENT_Cr
] );

2938 ià(
ouutLogCŒl
.
´štF¿meMSE
)

2940 
	`´štf
(" [Y MSE %6.4là U MSE %6.4là V MSE %6.4lf]", 
»suÉ
.
MSEyuväame
[
COMPONENT_Y
],„esuÉ.MSEyuväame[
COMPONENT_Cb
],„esuÉ.MSEyuväame[
COMPONENT_Cr
] );

2943 
UIÁ
 
f›ldNum
=0; fieldNum<2; fieldNum++)

2945 
cscd
[
f›ldNum
].
	`de¡roy
();

2947 
	}
}

2956 
N®Un™Ty³
 
	gTEncGOP
::
	$g‘N®Un™Ty³
(
IÁ
 
pocCu¼
, IÁ 
Ï¡IDR
, 
BoÞ
 
isF›ld
)

2958 ià(
pocCu¼
 == 0)

2960  
NAL_UNIT_CODED_SLICE_IDR_W_RADL
;

2963 if(
m_pcCfg
->
	`g‘Effic›ÁF›ldIRAPEÇbËd
(è&& 
isF›ld
 && 
pocCu¼
 == 1)

2966  
NAL_UNIT_CODED_SLICE_TRAIL_R
;

2969 if(
m_pcCfg
->
	`g‘DecodšgReäeshTy³
(è!ð3 && (
pocCu¼
 - 
isF›ld
è% m_pcCfg->
	`g‘IÁ¿P”iod
() == 0)

2971 ià(
m_pcCfg
->
	`g‘DecodšgReäeshTy³
() == 1)

2973  
NAL_UNIT_CODED_SLICE_CRA
;

2975 ià(
m_pcCfg
->
	`g‘DecodšgReäeshTy³
() == 2)

2977  
NAL_UNIT_CODED_SLICE_IDR_W_RADL
;

2980 if(
m_pocCRA
>0)

2982 if(
pocCu¼
<
m_pocCRA
)

2989  
NAL_UNIT_CODED_SLICE_RASL_R
;

2992 ià(
Ï¡IDR
>0)

2994 ià(
pocCu¼
 < 
Ï¡IDR
)

2996  
NAL_UNIT_CODED_SLICE_RADL_R
;

2999  
NAL_UNIT_CODED_SLICE_TRAIL_R
;

3000 
	}
}

3002 
DoubË
 
	gTEncGOP
::
	$xC®cuÏ‹RVM
()

3004 
DoubË
 
dRVM
 = 0;

3006 ifÐ
m_pcCfg
->
	`g‘GOPSize
(è=ð1 && m_pcCfg->
	`g‘IÁ¿P”iod
(è!ð1 && m_pcCfg->
	`g‘F¿mesToBeEncoded
(è> 
RVM_VCEGAM10_M
 * 2 )

3009 
¡d
::
veùÜ
<
DoubË
> 
vRL
 , 
vB
;

3010 
size_t
 
N
 = 
m_vRVM_RP
.
	`size
();

3011 
vRL
.
	`»size
Ð
N
 );

3012 
vB
.
	`»size
Ð
N
 );

3014 
IÁ
 
i
;

3015 
DoubË
 
dRavg
 = 0 , 
dBavg
 = 0;

3016 
vB
[
RVM_VCEGAM10_M
] = 0;

3017  
i
 = 
RVM_VCEGAM10_M
 + 1 ; i < 
N
 - RVM_VCEGAM10_M + 1 ; i++ )

3019 
vRL
[
i
] = 0;

3020  
IÁ
 
j
 = 
i
 - 
RVM_VCEGAM10_M
 ; j <= i + RVM_VCEGAM10_M - 1 ; j++ )

3022 
vRL
[
i
] +ð
m_vRVM_RP
[
j
];

3024 
vRL
[
i
] /ðÐ2 * 
RVM_VCEGAM10_M
 );

3025 
vB
[
i
] = vB[i-1] + 
m_vRVM_RP
[i] - 
vRL
[i];

3026 
dRavg
 +ð
m_vRVM_RP
[
i
];

3027 
dBavg
 +ð
vB
[
i
];

3030 
dRavg
 /ðÐ
N
 - 2 * 
RVM_VCEGAM10_M
 );

3031 
dBavg
 /ðÐ
N
 - 2 * 
RVM_VCEGAM10_M
 );

3033 
DoubË
 
dSigamB
 = 0;

3034  
i
 = 
RVM_VCEGAM10_M
 + 1 ; i < 
N
 - RVM_VCEGAM10_M + 1 ; i++ )

3036 
DoubË
 
tmp
 = 
vB
[
i
] - 
dBavg
;

3037 
dSigamB
 +ð
tmp
 *mp;

3039 
dSigamB
 = 
	`sq¹
ÐdSigamB / ( 
N
 - 2 * 
RVM_VCEGAM10_M
 ) );

3041 
DoubË
 
f
 = 
	`sq¹
Ð12.0 * ( 
RVM_VCEGAM10_M
 - 1 ) / ( RVM_VCEGAM10_M + 1 ) );

3043 
dRVM
 = 
dSigamB
 / 
dRavg
 * 
f
;

3046 Ð
dRVM
 );

3047 
	}
}

3054 
Void
 
	gTEncGOP
::
	$xA‰achSliûD©aToN®Un™
 (
OuutNALUn™
& 
rN®u
, 
TComOuutB™¡»am
* 
codedSliûD©a
)

3057 
rN®u
.
m_B™¡»am
.
	`wr™eBy‹Alignm’t
();

3060 ià(
codedSliûD©a
->
	`g‘Numb”OfWr™‹nB™s
() > 0)

3062 
rN®u
.
m_B™¡»am
.
	`addSub¡»am
(
codedSliûD©a
);

3065 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
(&
rN®u
.
m_B™¡»am
);

3067 
codedSliûD©a
->
	`þ—r
();

3068 
	}
}

3072 
Void
 
	gTEncGOP
::
¬¿ngeLÚg‹rmPiùu»sInRPS
(
TComSliû
 *
pcSliû
, 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
)

3074 if(
	gpcSliû
->
g‘RPS
()->
g‘Numb”OfLÚg‹rmPiùu»s
() == 0)

3079 
as£¹
 (
pcSliû
->
g‘RPSidx
()==-1);

3080 
TComReã»nûPiùu»S‘
 *
	g½s
 = 
pcSliû
->
g‘LoÿlRPS
();

3084 
IÁ
 
	glÚg‹rmPicsPoc
[
MAX_NUM_REF_PICS
], 
	glÚg‹rmPicsLSB
[MAX_NUM_REF_PICS], 
	gšdiûs
[MAX_NUM_REF_PICS];

3085 
IÁ
 
	glÚg‹rmPicsMSB
[
MAX_NUM_REF_PICS
];

3086 
BoÞ
 
	gmSBP»£ÁFÏg
[
MAX_NUM_REF_PICS
];

3087 ::
mem£t
(
lÚg‹rmPicsPoc
, 0, (longtermPicsPoc));

3088 ::
mem£t
(
lÚg‹rmPicsLSB
, 0, (longtermPicsLSB));

3089 ::
mem£t
(
lÚg‹rmPicsMSB
, 0, (longtermPicsMSB));

3090 ::
mem£t
(
šdiûs
 , 0, (indices));

3091 ::
mem£t
(
mSBP»£ÁFÏg
 , 0, (mSBPresentFlag));

3094 
IÁ
 
	goff£t
 = 
½s
->
g‘Numb”OfNeg©ivePiùu»s
(è+„ps->
g‘Numb”OfPos™ivePiùu»s
();

3095 
IÁ
 
	gi
, 
	gùr
 = 0;

3096 
IÁ
 
	gmaxPicOrd”CÁLSB
 = 1 << 
pcSliû
->
g‘SPS
()->
g‘B™sFÜPOC
();

3097 
	gi
 = 
½s
->
g‘Numb”OfPiùu»s
(è- 1; i >ð
off£t
; i--, 
	gùr
++)

3099 
	glÚg‹rmPicsPoc
[
ùr
] = 
½s
->
g‘POC
(
i
);

3100 
	glÚg‹rmPicsLSB
[
ùr
] = 
g‘LSB
(
lÚg‹rmPicsPoc
[ùr], 
maxPicOrd”CÁLSB
);

3101 
	gšdiûs
[
ùr
] = 
i
;

3102 
	glÚg‹rmPicsMSB
[
ùr
] = 
lÚg‹rmPicsPoc
[ùr] - 
lÚg‹rmPicsLSB
[ctr];

3104 
IÁ
 
	gnumLÚgPics
 = 
½s
->
g‘Numb”OfLÚg‹rmPiùu»s
();

3105 
as£¹
(
ùr
 =ð
numLÚgPics
);

3108 
	gi
 = 0; i < 
	gnumLÚgPics
; i++)

3110 
IÁ
 
	gj
 = 0; j < 
	gnumLÚgPics
 - 1; j++)

3112 if(
	glÚg‹rmPicsMSB
[
j
] <†ongtermPicsMSB[j+1])

3114 
	g¡d
::
sw­
(
lÚg‹rmPicsPoc
[
j
],†ongtermPicsPoc[j+1]);

3115 
	g¡d
::
sw­
(
lÚg‹rmPicsLSB
[
j
],†ongtermPicsLSB[j+1]);

3116 
	g¡d
::
sw­
(
lÚg‹rmPicsMSB
[
j
],†ongtermPicsMSB[j+1]);

3117 
	g¡d
::
sw­
(
šdiûs
[
j
] , indices[j+1] );

3122 
	gi
 = 0; i < 
	gnumLÚgPics
; i++)

3126 
	gTComLi¡
<
	gTComPic
*>::
™”©Ü
 
™”Pic
 = 
rcLi¡Pic
.
begš
();

3127 
TComPic
* 
	gpcPic
;

3128  
	g™”Pic
 !ð
rcLi¡Pic
.
’d
() )

3130 
pcPic
 = *
™”Pic
;

3131 ifÐ(
g‘LSB
(
pcPic
->
g‘POC
(), 
maxPicOrd”CÁLSB
è=ð
lÚg‹rmPicsLSB
[
i
]) &&

3132 (
pcPic
->
g‘Sliû
(0)->
isReã»nûd
()) &&

3133 (
pcPic
->
g‘POC
(è!ð
lÚg‹rmPicsPoc
[
i
]) )

3135 
mSBP»£ÁFÏg
[
i
] = 
Œue
;

3138 
	g™”Pic
++;

3143 
BoÞ
 
	g‹mpA¼ay
[
MAX_NUM_REF_PICS
]; ::
mem£t
(
‹mpA¼ay
, 0, (tempArray));

3144 
	gi
 = 0; i < 
	gnumLÚgPics
; i++)

3146 
	g‹mpA¼ay
[
i
] = 
½s
->
g‘U£d
(
šdiûs
[i]);

3149 
	gùr
 = 0;

3150 
IÁ
 
	gcu¼MSB
 = 0, 
	gcu¼LSB
 = 0;

3152 
	gcu¼LSB
 = 
g‘LSB
(
pcSliû
->
g‘POC
(), 
maxPicOrd”CÁLSB
);

3153 
	gcu¼MSB
 = 
pcSliû
->
g‘POC
(è- 
cu¼LSB
;

3155 
	gi
 = 
½s
->
g‘Numb”OfPiùu»s
(è- 1; i >ð
off£t
; i--, 
	gùr
++)

3157 
	g½s
->
£tPOC
 (
i
, 
lÚg‹rmPicsPoc
[
ùr
]);

3158 
	g½s
->
£tD–POC
 (
i
, - 
pcSliû
->
g‘POC
(è+ 
lÚg‹rmPicsPoc
[
ùr
]);

3159 
	g½s
->
£tU£d
 (
i
, 
‹mpA¼ay
[
ùr
]);

3160 
	g½s
->
£tPocLSBLT
 (
i
, 
lÚg‹rmPicsLSB
[
ùr
]);

3161 
	g½s
->
£tD–PocMSBCyþeLT
 (
i
, (
cu¼MSB
 - (
lÚg‹rmPicsPoc
[
ùr
] - 
lÚg‹rmPicsLSB
[ùr])è/ 
maxPicOrd”CÁLSB
);

3162 
	g½s
->
£tD–PocMSBP»£ÁFÏg
(
i
, 
mSBP»£ÁFÏg
[
ùr
]);

3164 
as£¹
(
½s
->
g‘D–PocMSBCyþeLT
(
i
) >= 0);

3166 
	gi
 = 
½s
->
g‘Numb”OfPiùu»s
(è- 1, 
	gùr
 = 1; i >ð
off£t
; i--, ctr++)

3168 
IÁ
 
	gj
 = 
½s
->
g‘Numb”OfPiùu»s
(è- 1 - 
ùr
; j >ð
off£t
; j--)

3172 
as£¹
Ð
½s
->
g‘POC
(
i
è!ð½s->g‘POC(
j
) );

3177 
Void
 
	gTEncGOP
::
	$­¶yDeblockšgFž‹rM‘ric
Ð
TComPic
* 
pcPic
, 
UIÁ
 
uiNumSliûs
 )

3179 
TComPicYuv
* 
pcPicYuvRec
 = 
pcPic
->
	`g‘PicYuvRec
();

3180 
P–
* 
Rec
 = 
pcPicYuvRec
->
	`g‘Addr
(
COMPONENT_Y
);

3181 
P–
* 
‹mpRec
 = 
Rec
;

3182 
IÁ
 
¡ride
 = 
pcPicYuvRec
->
	`g‘SŒide
(
COMPONENT_Y
);

3183 
UIÁ
 
log2maxTB
 = 
pcPic
->
	`g‘Sliû
(0)->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
();

3184 
UIÁ
 
maxTBsize
 = (1<<
log2maxTB
);

3185 cÚ¡ 
UIÁ
 
mšBlockA¹Size
 = 8;

3186 cÚ¡ 
UIÁ
 
picWidth
 = 
pcPicYuvRec
->
	`g‘Width
(
COMPONENT_Y
);

3187 cÚ¡ 
UIÁ
 
picHeight
 = 
pcPicYuvRec
->
	`g‘Height
(
COMPONENT_Y
);

3188 cÚ¡ 
UIÁ
 
noCÞ
 = (
picWidth
>>
log2maxTB
);

3189 cÚ¡ 
UIÁ
 
noRows
 = (
picHeight
>>
log2maxTB
);

3190 
	`as£¹
(
noCÞ
 > 1);

3191 
	`as£¹
(
noRows
 > 1);

3192 
¡d
::
veùÜ
<
UIÁ64
> 
	`cÞSAD
(
noCÞ
, 
	`UIÁ64
(0));

3193 
¡d
::
veùÜ
<
UIÁ64
> 
	`rowSAD
(
noRows
, 
	`UIÁ64
(0));

3194 
UIÁ
 
cÞIdx
 = 0;

3195 
UIÁ
 
rowIdx
 = 0;

3196 
P–
 
p0
, 
p1
, 
p2
, 
q0
, 
q1
, 
q2
;

3198 
IÁ
 
qp
 = 
pcPic
->
	`g‘Sliû
(0)->
	`g‘SliûQp
();

3199 cÚ¡ 
IÁ
 
b™D•thLuma
=
pcPic
->
	`g‘Sliû
(0)->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
);

3200 
IÁ
 
b™d•thSÿË
 = 1 << (
b™D•thLuma
-8);

3201 
IÁ
 
b‘a
 = 
TComLoÝFž‹r
::
	`g‘B‘a
Ð
qp
 ) * 
b™d•thSÿË
;

3202 cÚ¡ 
IÁ
 
thr2
 = (
b‘a
>>2);

3203 cÚ¡ 
IÁ
 
thr1
 = 2*
b™d•thSÿË
;

3204 
UIÁ
 
a
 = 0;

3206 ià(
maxTBsize
 > 
mšBlockA¹Size
)

3209 
IÁ
 
c
 = 
maxTBsize
; c < 
picWidth
; c += maxTBsize)

3211 
IÁ
 
r
 = 0;„ < 
picHeight
;„++)

3213 
p2
 = 
Rec
[
c
-3];

3214 
p1
 = 
Rec
[
c
-2];

3215 
p0
 = 
Rec
[
c
-1];

3216 
q0
 = 
Rec
[
c
];

3217 
q1
 = 
Rec
[
c
+1];

3218 
q2
 = 
Rec
[
c
+2];

3219 
a
 = ((
	`abs
(
p2
-(
p1
<<1)+
p0
)+abs(
q0
-(
q1
<<1)+
q2
))<<1);

3220 iàÐ
thr1
 < 
a
 &&‡ < 
thr2
)

3222 
cÞSAD
[
cÞIdx
] +ð
	`abs
(
p0
 - 
q0
);

3224 
Rec
 +ð
¡ride
;

3226 
cÞIdx
++;

3227 
Rec
 = 
‹mpRec
;

3231 
IÁ
 
r
 = 
maxTBsize
;„ < 
picHeight
;„ += maxTBsize)

3233 
IÁ
 
c
 = 0; c < 
picWidth
; c++)

3235 
p2
 = 
Rec
[
c
 + (
r
-3)*
¡ride
];

3236 
p1
 = 
Rec
[
c
 + (
r
-2)*
¡ride
];

3237 
p0
 = 
Rec
[
c
 + (
r
-1)*
¡ride
];

3238 
q0
 = 
Rec
[
c
 + 
r
*
¡ride
];

3239 
q1
 = 
Rec
[
c
 + (
r
+1)*
¡ride
];

3240 
q2
 = 
Rec
[
c
 + (
r
+2)*
¡ride
];

3241 
a
 = ((
	`abs
(
p2
-(
p1
<<1)+
p0
)+abs(
q0
-(
q1
<<1)+
q2
))<<1);

3242 ià(
thr1
 < 
a
 &&‡ < 
thr2
)

3244 
rowSAD
[
rowIdx
] +ð
	`abs
(
p0
 - 
q0
);

3247 
rowIdx
++;

3251 
UIÁ64
 
cÞSADsum
 = 0;

3252 
UIÁ64
 
rowSADsum
 = 0;

3253 
IÁ
 
c
 = 0; c < 
noCÞ
-1; c++)

3255 
cÞSADsum
 +ð
cÞSAD
[
c
];

3257 
IÁ
 
r
 = 0;„ < 
noRows
-1;„++)

3259 
rowSADsum
 +ð
rowSAD
[
r
];

3262 
cÞSADsum
 <<= 10;

3263 
rowSADsum
 <<= 10;

3264 
cÞSADsum
 /ð(
noCÞ
-1);

3265 
cÞSADsum
 /ð
picHeight
;

3266 
rowSADsum
 /ð(
noRows
-1);

3267 
rowSADsum
 /ð
picWidth
;

3269 
UIÁ64
 
avgSAD
 = ((
cÞSADsum
 + 
rowSADsum
)>>1);

3270 
avgSAD
 >>ð(
b™D•thLuma
-8);

3272 iàÐ
avgSAD
 > 2048 )

3274 
avgSAD
 >>= 9;

3275 
IÁ
 
off£t
 = 
	`Cl3
(2,6,(IÁ)
avgSAD
);

3276 
IÁ
 
i
=0; i<
uiNumSliûs
; i++)

3278 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
Œue
);

3279 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
(
çl£
);

3280 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
off£t
 );

3281 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rTcOff£tDiv2
Ð
off£t
 );

3286 
IÁ
 
i
=0; i<
uiNumSliûs
; i++)

3288 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
çl£
);

3289 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() );

3290 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() );

3291 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rTcOff£tDiv2
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rTcOff£tDiv2
() );

3294 
	}
}

3296 
Void
 
	gTEncGOP
::
	$­¶yDeblockšgFž‹rP¬am‘”S–eùiÚ
Ð
TComPic
* 
pcPic
, cÚ¡ 
UIÁ
 
numSliûs
, cÚ¡ 
IÁ
 
gÝID
 )

3298 
	eDBFÉP¬am


3300 
DBFLT_PARAM_AVAILABLE
 = 0,

3301 
DBFLT_DISABLE_FLAG
,

3302 
DBFLT_BETA_OFFSETD2
,

3303 
DBFLT_TC_OFFSETD2
,

3306 cÚ¡ 
IÁ
 
MAX_BETA_OFFSET
 = 3;

3307 cÚ¡ 
IÁ
 
MIN_BETA_OFFSET
 = -3;

3308 cÚ¡ 
IÁ
 
MAX_TC_OFFSET
 = 3;

3309 cÚ¡ 
IÁ
 
MIN_TC_OFFSET
 = -3;

3311 
TComPicYuv
* 
pcPicYuvRec
 = 
pcPic
->
	`g‘PicYuvRec
();

3312 
TComPicYuv
* 
pcPicYuvOrg
 = 
pcPic
 ->
	`g‘PicYuvOrg
();

3314 cÚ¡ 
IÁ
 
cu¼Qu®™yLay”
 = (
pcPic
->
	`g‘Sliû
(0)->
	`g‘SliûTy³
(è!ð
I_SLICE
è? 
m_pcCfg
->
	`g‘GOPEÁry
(
gÝID
).
m_‹mpÜ®Id
+1 : 0;

3315 
	`as£¹
(
cu¼Qu®™yLay”
 <
MAX_ENCODER_DEBLOCKING_QUALITY_LAYERS
);

3317 if(!
m_pcDeblockšgTempPicYuv
)

3319 
m_pcDeblockšgTempPicYuv
 = 
Ãw
 
TComPicYuv
;

3320 
m_pcDeblockšgTempPicYuv
->
	`ü—‹
Ð
m_pcEncTÝ
->
	`g‘SourûWidth
(), m_pcEncTÝ->
	`g‘SourûHeight
(), m_pcEncTÝ->
	`g‘ChromaFÜm©Idc
(), 
pcPic
->
	`g‘Sliû
(0)->
	`g‘SPS
()->
	`g‘MaxCUWidth
(),…cPic->g‘Sliû(0)->g‘SPS()->
	`g‘MaxCUHeight
(),…cPic->g‘Sliû(0)->g‘SPS()->
	`g‘MaxTÙ®CUD•th
(),
Œue
 );

3321 
	`mem£t
(
m_DBP¬am
, 0, (m_DBParam));

3325 
pcPicYuvRec
->
	`cÝyToPic
(
m_pcDeblockšgTempPicYuv
);

3327 cÚ¡ 
BoÞ
 
bNoFž‹ršg
 = 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_PARAM_AVAILABLE
] && m_DBP¬am[cu¼Qu®™yLay”][
DBFLT_DISABLE_FLAG
]==
çl£
 ;

3328 cÚ¡ 
IÁ
 
maxB‘aOff£tDiv2
 = 
bNoFž‹ršg
? 
	`Cl3
(
MIN_BETA_OFFSET
, 
MAX_BETA_OFFSET
, 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_BETA_OFFSETD2
]+1) : MAX_BETA_OFFSET;

3329 cÚ¡ 
IÁ
 
mšB‘aOff£tDiv2
 = 
bNoFž‹ršg
? 
	`Cl3
(
MIN_BETA_OFFSET
, 
MAX_BETA_OFFSET
, 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_BETA_OFFSETD2
]-1) : MIN_BETA_OFFSET;

3330 cÚ¡ 
IÁ
 
maxTcOff£tDiv2
 = 
bNoFž‹ršg
? 
	`Cl3
(
MIN_TC_OFFSET
, 
MAX_TC_OFFSET
, 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_TC_OFFSETD2
]+2) : MAX_TC_OFFSET;

3331 cÚ¡ 
IÁ
 
mšTcOff£tDiv2
 = 
bNoFž‹ršg
? 
	`Cl3
(
MIN_TC_OFFSET
, 
MAX_TC_OFFSET
, 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_TC_OFFSETD2
]-2) : MIN_TC_OFFSET;

3333 
UIÁ64
 
di¡B‘aP»vious
 = 
¡d
::
num”ic_lim™s
<UIÁ64>::
	`max
();

3334 
UIÁ64
 
di¡Mš
 = 
¡d
::
num”ic_lim™s
<UIÁ64>::
	`max
();

3335 
BoÞ
 
bDBFž‹rDi§bËdBe¡
 = 
Œue
;

3336 
IÁ
 
b‘aOff£tDiv2Be¡
 = 0;

3337 
IÁ
 
tcOff£tDiv2Be¡
 = 0;

3339 
IÁ
 
b‘aOff£tDiv2
=
maxB‘aOff£tDiv2
; b‘aOff£tDiv2>=
mšB‘aOff£tDiv2
; betaOffsetDiv2--)

3341 
UIÁ64
 
di¡TcMš
 = 
¡d
::
num”ic_lim™s
<UIÁ64>::
	`max
();

3342 
IÁ
 
tcOff£tDiv2
=
maxTcOff£tDiv2
;cOff£tDiv2 >ð
mšTcOff£tDiv2
;cOffsetDiv2--)

3344 
IÁ
 
i
=0; i<
numSliûs
; i++)

3346 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
Œue
);

3347 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
(
çl£
);

3348 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
b‘aOff£tDiv2
 );

3349 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rTcOff£tDiv2
Ð
tcOff£tDiv2
 );

3351 
m_pcDeblockšgTempPicYuv
->
	`cÝyToPic
(
pcPicYuvRec
);

3352 
m_pcLoÝFž‹r
->
	`loÝFž‹rPic
Ð
pcPic
 );

3353 cÚ¡ 
UIÁ64
 
di¡
 = 
	`xFšdDi¡ÜtiÚF¿me
(
pcPicYuvOrg
, 
pcPicYuvRec
, 
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
());

3354 if(
di¡
 < 
di¡Mš
)

3356 
di¡Mš
 = 
di¡
;

3357 
bDBFž‹rDi§bËdBe¡
 = 
çl£
;

3358 
b‘aOff£tDiv2Be¡
 = 
b‘aOff£tDiv2
;

3359 
tcOff£tDiv2Be¡
 = 
tcOff£tDiv2
;

3361 if(
di¡
 < 
di¡TcMš
)

3363 
di¡TcMš
 = 
di¡
;

3365 if(
tcOff£tDiv2
 <-2)

3370 if(
b‘aOff£tDiv2
<-1 && 
di¡TcMš
 >ð
di¡B‘aP»vious
)

3374 
di¡B‘aP»vious
 = 
di¡TcMš
;

3378 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_PARAM_AVAILABLE
] = 1;

3379 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_DISABLE_FLAG
] = 
bDBFž‹rDi§bËdBe¡
;

3380 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_BETA_OFFSETD2
] = 
b‘aOff£tDiv2Be¡
;

3381 
m_DBP¬am
[
cu¼Qu®™yLay”
][
DBFLT_TC_OFFSETD2
] = 
tcOff£tDiv2Be¡
;

3383 
m_pcDeblockšgTempPicYuv
->
	`cÝyToPic
(
pcPicYuvRec
);

3385 if(
bDBFž‹rDi§bËdBe¡
)

3387 
IÁ
 
i
=0; i<
numSliûs
; i++)

3389 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
Œue
);

3390 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
(
Œue
);

3393 if(
b‘aOff£tDiv2Be¡
 ==
pcPic
->
	`g‘Sliû
(0)->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
(è&& 
tcOff£tDiv2Be¡
=õcPic->g‘Sliû(0)->g‘PPS()->
	`g‘DeblockšgFž‹rTcOff£tDiv2
())

3395 
IÁ
 
i
=0; i<
numSliûs
; i++)

3397 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
çl£
);

3398 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() );

3399 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() );

3400 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rTcOff£tDiv2
ÐpcPic->g‘Sliû(i)->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rTcOff£tDiv2
() );

3405 
IÁ
 
i
=0; i<
numSliûs
; i++)

3407 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rOv”rideFÏg
(
Œue
);

3408 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rDi§bË
Ð
çl£
 );

3409 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
(
b‘aOff£tDiv2Be¡
);

3410 
pcPic
->
	`g‘Sliû
(
i
)->
	`£tDeblockšgFž‹rTcOff£tDiv2
(
tcOff£tDiv2Be¡
);

3413 
	}
}

	@source/Lib/TLibEncoder/TEncGOP.h

38 #iâdeà
__TENCGOP__


39 
	#__TENCGOP__


	)

41 
	~<li¡
>

43 
	~<¡dlib.h
>

45 
	~"TLibCommÚ/TComLi¡.h
"

46 
	~"TLibCommÚ/TComPic.h
"

47 
	~"TLibCommÚ/TComB™CouÁ”.h
"

48 
	~"TLibCommÚ/TComLoÝFž‹r.h
"

49 
	~"TLibCommÚ/AcûssUn™.h
"

50 
	~"TEncSam¶eAd­tiveOff£t.h
"

51 
	~"TEncSliû.h
"

52 
	~"TEncEÁrÝy.h
"

53 
	~"TEncCavlc.h
"

54 
	~"TEncSbac.h
"

55 
	~"SEIwr™e.h
"

56 
	~"SEIEncod”.h
"

57 #ià
EXTENSION_360_VIDEO


58 
	~"TAµEncH–³r360/TExt360EncGÝ.h
"

61 
	~"TEncAÇlyze.h
"

62 
	~"TEncR©eCŒl.h
"

63 
	~<veùÜ
>

68 
þass
 
	gTEncTÝ
;

74 þas 
	cTEncGOP


76 þas 
	cDUD©a


78 
	mpublic
:

79 
DUD©a
()

80 :
accumB™sDU
(0)

81 ,
accumN®sDU
(0) {};

83 
IÁ
 
	maccumB™sDU
;

84 
IÁ
 
	maccumN®sDU
;

87 
	g´iv©e
:

89 
TEncAÇlyze
 
m_gcAÇlyzeAÎ
;

90 
TEncAÇlyze
 
	gm_gcAÇlyzeI
;

91 
TEncAÇlyze
 
	gm_gcAÇlyzeP
;

92 
TEncAÇlyze
 
	gm_gcAÇlyzeB
;

94 
TEncAÇlyze
 
	gm_gcAÇlyzeAÎ_š
;

96 #ià
EXTENSION_360_VIDEO


97 
TExt360EncGÝ
 
	gm_ext360
;

98 
	gpublic
:

99 
TExt360EncGÝ
 &
	$g‘Ext360D©a
(è{  
m_ext360
; 
	}
}

100 
	g´iv©e
:

104 
BoÞ
 
m_bLÚg‹rmTe¡Piùu»HasB“nCoded
;

105 
BoÞ
 
	gm_bLÚg‹rmTe¡Piùu»HasB“nCoded2
;

106 
UIÁ
 
	gm_numLÚgT”mRefPicSPS
;

107 
UIÁ
 
	gm_ÉRefPicPocLsbSps
[
MAX_NUM_LONG_TERM_REF_PICS
];

108 
BoÞ
 
	gm_ÉRefPicU£dByCu¼PicFÏg
[
MAX_NUM_LONG_TERM_REF_PICS
];

109 
IÁ
 
	gm_iLa¡IDR
;

110 
IÁ
 
	gm_RASPOCfÜRe£tEncod”
;

111 
IÁ
 
	gm_iGÝSize
;

112 
IÁ
 
	gm_iNumPicCoded
;

113 
BoÞ
 
	gm_bFœ¡
;

114 
IÁ
 
	gm_iLa¡Recov”yPicPOC
;

117 
TEncTÝ
* 
	gm_pcEncTÝ
;

118 
TEncCfg
* 
	gm_pcCfg
;

119 
TEncSliû
* 
	gm_pcSliûEncod”
;

120 
	gTComLi¡
<
	gTComPic
*>* 
	gm_pcLi¡Pic
;

122 
TEncEÁrÝy
* 
	gm_pcEÁrÝyCod”
;

123 
TEncCavlc
* 
	gm_pcCavlcCod”
;

124 
TEncSbac
* 
	gm_pcSbacCod”
;

125 
TEncBšCABAC
* 
	gm_pcBšCABAC
;

126 
TComLoÝFž‹r
* 
	gm_pcLoÝFž‹r
;

128 
SEIWr™”
 
	gm_£iWr™”
;

131 
TEncSam¶eAd­tiveOff£t
* 
	gm_pcSAO
;

132 
TEncR©eCŒl
* 
	gm_pcR©eCŒl
;

134 
BoÞ
 
	gm_bSeqFœ¡
;

137 
BoÞ
 
	gm_bReäeshP’dšg
;

138 
IÁ
 
	gm_pocCRA
;

139 
N®Un™Ty³
 
	gm_assocŸ‹dIRAPTy³
;

140 
IÁ
 
	gm_assocŸ‹dIRAPPOC
;

142 
	g¡d
::
veùÜ
<
IÁ
> 
m_vRVM_RP
;

143 
UIÁ
 
	gm_Ï¡BPSEI
;

144 
UIÁ
 
	gm_tÙ®Coded
;

145 
BoÞ
 
	gm_bufãršgP”iodSEIP»£ÁInAU
;

146 
SEIEncod”
 
	gm_£iEncod”
;

147 
TComPicYuv
* 
	gm_pcDeblockšgTempPicYuv
;

148 
IÁ
 
	gm_DBP¬am
[
MAX_ENCODER_DEBLOCKING_QUALITY_LAYERS
][4];

150 
	gpublic
:

151 
TEncGOP
();

152 
	gvœtu®
 ~
TEncGOP
();

154 
Void
 
ü—‹
 ();

155 
Void
 
de¡roy
 ();

157 
Void
 
š™
 ( 
TEncTÝ
* 
pcTEncTÝ
 );

158 
Void
 
com´essGOP
 ( 
IÁ
 
iPOCLa¡
, IÁ 
iNumPicRcvd
, 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, TComLi¡<
TComPicYuv
*>& 
rcLi¡PicYuvRec
,

159 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sInGOP
, 
BoÞ
 
isF›ld
, BoÞ 
isTff
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
 );

160 
Void
 
xA‰achSliûD©aToN®Un™
 (
OuutNALUn™
& 
rN®u
, 
TComOuutB™¡»am
* 
pcB™¡»amRedœeù
);

163 
IÁ
 
	$g‘GOPSize
(è{  
m_iGÝSize
; 
	}
}

165 
	gTComLi¡
<
	gTComPic
*>* 
	$g‘Li¡Pic
(è{  
m_pcLi¡Pic
; 
	}
}

167 
Void
 
´štOutSumm¬y
 ( 
UIÁ
 
uiNumAÎPicCoded
, 
BoÞ
 
isF›ld
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, cÚ¡ 
B™D•ths
 &
b™D•ths
 );

169 
Void
 
´eLoÝFž‹rPicAÎ
 ( 
TComPic
* 
pcPic
, 
UIÁ64
& 
ruiDi¡
 );

171 
TEncSliû
* 
	$g‘SliûEncod”
(è{  
m_pcSliûEncod”
; 
	}
}

172 
N®Un™Ty³
 
g‘N®Un™Ty³
Ð
IÁ
 
pocCu¼
, IÁ 
Ï¡Idr
, 
BoÞ
 
isF›ld
 );

173 
Void
 
¬¿ngeLÚg‹rmPiùu»sInRPS
(
TComSliû
 *, 
TComLi¡
<
TComPic
*>& );

175 
	gTEncAÇlyze
& 
	$g‘AÇlyzeAÎD©a
(è{  
m_gcAÇlyzeAÎ
; 
	}
}

176 
	gTEncAÇlyze
& 
	$g‘AÇlyzeID©a
(è{  
m_gcAÇlyzeI
; 
	}
}

177 
	gTEncAÇlyze
& 
	$g‘AÇlyzePD©a
(è{  
m_gcAÇlyzeP
; 
	}
}

178 
	gTEncAÇlyze
& 
	$g‘AÇlyzeBD©a
(è{  
m_gcAÇlyzeB
; 
	}
}

180 #ià
MCTS_EXTRACTION


181 
Void
 
g’”©eVPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComVPS
 *
vps
);

182 
Void
 
g’”©eSPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComSPS
 *
¥s
);

183 
Void
 
g’”©ePPS_RBSP
(
TComB™If
* 
rb¥
, cÚ¡ 
TComPPS
 *
µs
);

186 
	g´Ùeùed
:

187 
TEncR©eCŒl
* 
	$g‘R©eCŒl
(è{  
m_pcR©eCŒl
; 
	}
}

189 
	g´Ùeùed
:

191 
Void
 
xIn™GOP
 ( 
IÁ
 
iPOCLa¡
, IÁ 
iNumPicRcvd
, 
BoÞ
 
isF›ld
 );

192 
Void
 
xG‘Bufãr
 ( 
TComLi¡
<
TComPic
*>& 
rcLi¡Pic
, TComLi¡<
TComPicYuv
*>& 
rcLi¡PicYuvRecOut
, 
IÁ
 
iNumPicRcvd
, IÁ 
iTimeOff£t
, TComPic*& 
½cPic
, TComPicYuv*& 
½cPicYuvRecOut
, IÁ 
pocCu¼
, 
BoÞ
 
isF›ld
 );

194 
Void
 
xC®cuÏ‹AddPSNRs
 ( cÚ¡ 
BoÞ
 
isF›ld
, cÚ¡ BoÞ 
isF›ldTÝF›ldFœ¡
, cÚ¡ 
IÁ
 
iGOPid
, 
TComPic
* 
pcPic
, cÚ¡ 
AcûssUn™
&
acûssUn™
, 
TComLi¡
<TComPic*> &
rcLi¡Pic
, 
DoubË
 
dEncTime
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, DoubË* 
PSNR_Y
 );

195 
Void
 
xC®cuÏ‹AddPSNR
 ( 
TComPic
* 
pcPic
, 
TComPicYuv
* 
pcPicD
, cÚ¡ 
AcûssUn™
&, 
DoubË
 
dEncTime
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
_cÚv”siÚ
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, DoubË* 
PSNR_Y
 );

196 
Void
 
xC®cuÏ‹IÁ”ÏûdAddPSNR
Ð
TComPic
* 
pcPicOrgFœ¡F›ld
, TComPic* 
pcPicOrgSecÚdF›ld
,

197 
TComPicYuv
* 
pcPicRecFœ¡F›ld
, TComPicYuv* 
pcPicRecSecÚdF›ld
,

198 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
¢r_cÚv”siÚ
, cÚ¡ 
TEncAÇlyze
::
OuutLogCÚŒÞ
 &
ouutLogCŒl
, 
DoubË
* 
PSNR_Y
 );

199 
DoubË
 
xC®cuÏ‹MSSSIM
 (cÚ¡ 
P–
 *
pOrg
, cÚ¡ 
IÁ
 
ÜgSŒide
, cÚ¡ P–* 
pRec
, cÚ¡ IÁ 
»cSŒide
, cÚ¡ IÁ 
width
, cÚ¡ IÁ 
height
, cÚ¡ 
UIÁ
 
b™D•th
);

201 
UIÁ64
 
xFšdDi¡ÜtiÚF¿me
 (
TComPicYuv
* 
pcPic0
, TComPicYuv* 
pcPic1
, cÚ¡ 
B™D•ths
 &
b™D•ths
);

203 
DoubË
 
xC®cuÏ‹RVM
();

205 
Void
 
xWr™eAcûssUn™D–im™”
 (
AcûssUn™
 &
acûssUn™
, 
TComSliû
 *
¦iû
);

206 #ià
MCTS_EXTRACTION


207 
Void
 
xC»©eIRAPL—dšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, cÚ¡ 
TComVPS
 *
vps
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
);

209 
Void
 
xC»©eIRAPL—dšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, cÚ¡ 
TComSPS
 *
¥s
, cÚ¡ 
TComPPS
 *
µs
);

211 
Void
 
xC»©eP”Piùu»SEIMes§ges
 (
IÁ
 
picInGOP
, 
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
, 
TComSliû
 *
¦iû
);

212 
Void
 
xC»©ePiùu»TimšgSEI
 (
IÁ
 
IRAPGOPid
, 
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
TComSliû
 *
¦iû
, 
BoÞ
 
isF›ld
, 
¡d
::
deque
<
DUD©a
> &
duD©a
);

213 
Void
 
xUpd©eDuD©a
(
AcûssUn™
 &
‹¡AU
, 
¡d
::
deque
<
DUD©a
> &
duD©a
);

214 
Void
 
xUpd©eTimšgSEI
(
SEIPiùu»Timšg
 *
piùu»TimšgSEI
, 
¡d
::
deque
<
DUD©a
> &
duD©a
, cÚ¡ 
TComSPS
 *
¥s
);

215 
Void
 
xUpd©eDuInfoSEI
(
SEIMes§ges
 &
duInfoSeiMes§ges
, 
SEIPiùu»Timšg
 *
piùu»TimšgSEI
);

217 
Void
 
xC»©eSÿÏbËNe¡šgSEI
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
Ã¡edSeiMes§ges
);

218 
Void
 
xWr™eSEI
 (
N®Un™Ty³
 
ÇluTy³
, 
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, AcûssUn™::
™”©Ü
 &
auPos
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
);

219 
Void
 
xWr™eSEIS•¬©–y
 (
N®Un™Ty³
 
ÇluTy³
, 
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, AcûssUn™::
™”©Ü
 &
auPos
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
);

220 
Void
 
xCË¬SEIs
(
SEIMes§ges
& 
£iMes§ges
, 
BoÞ
 
d–‘eMes§ges
);

221 
Void
 
xWr™eL—dšgSEIOrd”ed
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
BoÞ
 
‹¡Wr™e
);

222 
Void
 
xWr™eL—dšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, SEIMes§ges& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
deque
<
DUD©a
> &
duD©a
);

223 
Void
 
xWr™eT¿žšgSEIMes§ges
 (
SEIMes§ges
& 
£iMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
);

224 
Void
 
xWr™eDuSEIMes§ges
 (
SEIMes§ges
& 
duInfoSeiMes§ges
, 
AcûssUn™
 &
acûssUn™
, 
IÁ
 
‹mpÜ®Id
, cÚ¡ 
TComSPS
 *
¥s
, 
¡d
::
deque
<
DUD©a
> &
duD©a
);

226 
IÁ
 
xWr™eVPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComVPS
 *
vps
);

227 
IÁ
 
xWr™eSPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComSPS
 *
¥s
);

228 
IÁ
 
xWr™ePPS
 (
AcûssUn™
 &
acûssUn™
, cÚ¡ 
TComPPS
 *
µs
);

229 
IÁ
 
xWr™eP¬am‘”S‘s
 (
AcûssUn™
 &
acûssUn™
, 
TComSliû
 *
¦iû
, cÚ¡ 
BoÞ
 
bSeqFœ¡
);

231 
Void
 
­¶yDeblockšgFž‹rM‘ric
Ð
TComPic
* 
pcPic
, 
UIÁ
 
uiNumSliûs
 );

232 
Void
 
­¶yDeblockšgFž‹rP¬am‘”S–eùiÚ
Ð
TComPic
* 
pcPic
, cÚ¡ 
UIÁ
 
numSliûs
, cÚ¡ 
IÁ
 
gÝID
 );

	@source/Lib/TLibEncoder/TEncPic.cpp

38 
	~"TEncPic.h
"

45 
	gTEncQPAd­tiÚUn™
::
	$TEncQPAd­tiÚUn™
()

46 : 
	$m_dAùiv™y
(0.0)

48 
	}
}

52 
TEncQPAd­tiÚUn™
::~
	$TEncQPAd­tiÚUn™
()

54 
	}
}

58 
TEncPicQPAd­tiÚLay”
::
	$TEncPicQPAd­tiÚLay”
()

59 : 
	`m_uiAQP¬tWidth
(0)

60 , 
	`m_uiAQP¬tHeight
(0)

61 , 
	`m_uiNumAQP¬tInWidth
(0)

62 , 
	`m_uiNumAQP¬tInHeight
(0)

63 , 
	`m_acTEncAQU
(
NULL
)

64 , 
	$m_dAvgAùiv™y
(0.0)

66 
	}
}

70 
	gTEncPicQPAd­tiÚLay”
::~
	$TEncPicQPAd­tiÚLay”
()

72 
	`de¡roy
();

73 
	}
}

82 
Void
 
	gTEncPicQPAd­tiÚLay”
::
	$ü—‹
Ð
IÁ
 
iWidth
, IÁ 
iHeight
, 
UIÁ
 
uiAQP¬tWidth
, UIÁ 
uiAQP¬tHeight
 )

84 
m_uiAQP¬tWidth
 = 
uiAQP¬tWidth
;

85 
m_uiAQP¬tHeight
 = 
uiAQP¬tHeight
;

86 
m_uiNumAQP¬tInWidth
 = (
iWidth
 + 
m_uiAQP¬tWidth
-1) / m_uiAQPartWidth;

87 
m_uiNumAQP¬tInHeight
 = (
iHeight
 + 
m_uiAQP¬tHeight
-1) / m_uiAQPartHeight;

88 
m_acTEncAQU
 = 
Ãw
 
TEncQPAd­tiÚUn™
[ 
m_uiNumAQP¬tInWidth
 * 
m_uiNumAQP¬tInHeight
 ];

89 
	}
}

94 
Void
 
	gTEncPicQPAd­tiÚLay”
::
	$de¡roy
()

96 ià(
m_acTEncAQU
)

98 
d–‘e
[] 
m_acTEncAQU
;

99 
m_acTEncAQU
 = 
NULL
;

101 
	}
}

105 
	gTEncPic
::
	$TEncPic
()

106 : 
	`m_acAQLay”
(
NULL
)

107 , 
	$m_uiMaxAQD•th
(0)

109 
	}
}

113 
	gTEncPic
::~
	$TEncPic
()

115 
	`de¡roy
();

116 
	}
}

124 #ià
REDUCED_ENCODER_MEMORY


125 
Void
 
	gTEncPic
::
	$ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxAd­tiveQPD•th
 )

127 
TComPic
::
	`ü—‹
Ð
¥s
, 
µs
, 
Œue
, 
çl£
 );

129 
Void
 
TEncPic
::
	$ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxAd­tiveQPD•th
, 
BoÞ
 
bIsVœtu®
 )

131 
TComPic
::
	`ü—‹
Ð
¥s
, 
µs
, 
bIsVœtu®
 );

133 cÚ¡ 
IÁ
 
iWidth
 = 
¥s
.
	`g‘PicWidthInLumaSam¶es
();

134 cÚ¡ 
IÁ
 
iHeight
 = 
¥s
.
	`g‘PicHeightInLumaSam¶es
();

135 cÚ¡ 
UIÁ
 
uiMaxWidth
 = 
¥s
.
	`g‘MaxCUWidth
();

136 cÚ¡ 
UIÁ
 
uiMaxHeight
 = 
¥s
.
	`g‘MaxCUHeight
();

137 
m_uiMaxAQD•th
 = 
uiMaxAd­tiveQPD•th
;

138 iàÐ
uiMaxAd­tiveQPD•th
 > 0 )

140 
m_acAQLay”
 = 
Ãw
 
TEncPicQPAd­tiÚLay”
[ 
m_uiMaxAQD•th
 ];

141 
UIÁ
 
d
 = 0; d < 
m_uiMaxAQD•th
; d++)

143 
m_acAQLay”
[
d
].
	`ü—‹
Ð
iWidth
, 
iHeight
, 
uiMaxWidth
>>d, 
uiMaxHeight
>>d );

146 
	}
}

149 
Void
 
	gTEncPic
::
	$de¡roy
()

151 ià(
m_acAQLay”
)

153 
d–‘e
[] 
m_acAQLay”
;

154 
m_acAQLay”
 = 
NULL
;

156 
TComPic
::
	`de¡roy
();

157 
	}
}

	@source/Lib/TLibEncoder/TEncPic.h

38 #iâdeà
__TENCPIC__


39 
	#__TENCPIC__


	)

41 
	~"TLibCommÚ/CommÚDef.h
"

42 
	~"TLibCommÚ/TComPic.h
"

52 þas 
	cTEncQPAd­tiÚUn™


54 
	m´iv©e
:

55 
DoubË
 
m_dAùiv™y
;

57 
	mpublic
:

58 
TEncQPAd­tiÚUn™
();

59 ~
TEncQPAd­tiÚUn™
();

61 
Void
 
	$£tAùiv™y
Ð
DoubË
 
d
 ) { 
m_dAùiv™y
 = d; }

62 
DoubË
 
	$g‘Aùiv™y
(è{  
m_dAùiv™y
; 
	}
}

66 þas 
	cTEncPicQPAd­tiÚLay”


68 
	m´iv©e
:

69 
UIÁ
 
m_uiAQP¬tWidth
;

70 
UIÁ
 
	mm_uiAQP¬tHeight
;

71 
UIÁ
 
	mm_uiNumAQP¬tInWidth
;

72 
UIÁ
 
	mm_uiNumAQP¬tInHeight
;

73 
TEncQPAd­tiÚUn™
* 
	mm_acTEncAQU
;

74 
DoubË
 
	mm_dAvgAùiv™y
;

76 
	mpublic
:

77 
TEncPicQPAd­tiÚLay”
();

78 
	mvœtu®
 ~
TEncPicQPAd­tiÚLay”
();

80 
Void
 
ü—‹
Ð
IÁ
 
iWidth
, IÁ 
iHeight
, 
UIÁ
 
uiAQP¬tWidth
, UIÁ 
uiAQP¬tHeight
 );

81 
Void
 
de¡roy
();

83 
UIÁ
 
	$g‘AQP¬tWidth
(è{  
m_uiAQP¬tWidth
; }

84 
UIÁ
 
	$g‘AQP¬tHeight
(è{  
m_uiAQP¬tHeight
; 
	}
}

85 
UIÁ
 
	$g‘NumAQP¬tInWidth
(è{  
m_uiNumAQP¬tInWidth
; 
	}
}

86 
UIÁ
 
	$g‘NumAQP¬tInHeight
(è{  
m_uiNumAQP¬tInHeight
; 
	}
}

87 
UIÁ
 
	$g‘AQP¬tSŒide
(è{  
m_uiNumAQP¬tInWidth
; 
	}
}

88 
TEncQPAd­tiÚUn™
* 
	$g‘QPAd­tiÚUn™
(è{  
m_acTEncAQU
; 
	}
}

89 
DoubË
 
	$g‘AvgAùiv™y
(è{  
m_dAvgAùiv™y
; 
	}
}

91 
Void
 
	$£tAvgAùiv™y
Ð
DoubË
 
d
 ) { 
m_dAvgAùiv™y
 = d; 
	}
}

95 þas 
	cTEncPic
 : 
public
 
TComPic


97 
´iv©e
:

98 
TEncPicQPAd­tiÚLay”
* 
m_acAQLay”
;

99 
UIÁ
 
	mm_uiMaxAQD•th
;

101 
	mpublic
:

102 
TEncPic
();

103 
	mvœtu®
 ~
TEncPic
();

105 #ià
REDUCED_ENCODER_MEMORY


106 
Void
 
ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxAd­tiveQPD•th
 );

108 
Void
 
ü—‹
ÐcÚ¡ 
TComSPS
 &
¥s
, cÚ¡ 
TComPPS
 &
µs
, 
UIÁ
 
uiMaxAd­tiveQPD•th
, 
BoÞ
 
bIsVœtu®
 );

110 
vœtu®
 
Void
 
de¡roy
();

112 
TEncPicQPAd­tiÚLay”
* 
	$g‘AQLay”
Ð
UIÁ
 
uiD•th
 ) {  &
m_acAQLay”
[uiDepth]; }

113 
UIÁ
 
	$g‘MaxAQD•th
(è{  
m_uiMaxAQD•th
; 
	}
}

	@source/Lib/TLibEncoder/TEncPreanalyzer.cpp

38 
	~<cæßt
>

39 
	~<®gÜ™hm
>

41 
	~"TEncP»ª®yz”.h
"

43 
usšg
 
Çme¥aû
 
	g¡d
;

50 
	gTEncP»ª®yz”
::
	$TEncP»ª®yz”
()

52 
	}
}

56 
TEncP»ª®yz”
::~
	$TEncP»ª®yz”
()

58 
	}
}

64 
Void
 
TEncP»ª®yz”
::
	$xP»ª®yze
Ð
TEncPic
* 
pcEPic
 )

66 
TComPicYuv
* 
pcPicYuv
 = 
pcEPic
->
	`g‘PicYuvOrg
();

67 cÚ¡ 
IÁ
 
iWidth
 = 
pcPicYuv
->
	`g‘Width
(
COMPONENT_Y
);

68 cÚ¡ 
IÁ
 
iHeight
 = 
pcPicYuv
->
	`g‘Height
(
COMPONENT_Y
);

69 cÚ¡ 
IÁ
 
iSŒide
 = 
pcPicYuv
->
	`g‘SŒide
(
COMPONENT_Y
);

71  
UIÁ
 
d
 = 0; d < 
pcEPic
->
	`g‘MaxAQD•th
(); d++ )

73 cÚ¡ 
P–
* 
pLšeY
 = 
pcPicYuv
->
	`g‘Addr
(
COMPONENT_Y
);

74 
TEncPicQPAd­tiÚLay”
* 
pcAQLay”
 = 
pcEPic
->
	`g‘AQLay”
(
d
);

75 cÚ¡ 
UIÁ
 
uiAQP¬tWidth
 = 
pcAQLay”
->
	`g‘AQP¬tWidth
();

76 cÚ¡ 
UIÁ
 
uiAQP¬tHeight
 = 
pcAQLay”
->
	`g‘AQP¬tHeight
();

77 
TEncQPAd­tiÚUn™
* 
pcAQU
 = 
pcAQLay”
->
	`g‘QPAd­tiÚUn™
();

79 
DoubË
 
dSumAù
 = 0.0;

80  
UIÁ
 
y
 = 0; y < 
iHeight
; y +ð
uiAQP¬tHeight
 )

82 cÚ¡ 
UIÁ
 
uiCu¼AQP¬tHeight
 = 
	`mš
(
uiAQP¬tHeight
, 
iHeight
-
y
);

83  
UIÁ
 
x
 = 0; x < 
iWidth
; x +ð
uiAQP¬tWidth
, 
pcAQU
++ )

85 cÚ¡ 
UIÁ
 
uiCu¼AQP¬tWidth
 = 
	`mš
(
uiAQP¬tWidth
, 
iWidth
-
x
);

86 cÚ¡ 
P–
* 
pBlkY
 = &
pLšeY
[
x
];

87 
UIÁ64
 
uiSum
[4] = {0, 0, 0, 0};

88 
UIÁ64
 
uiSumSq
[4] = {0, 0, 0, 0};

89 
UIÁ
 
by
 = 0;

90  ; 
by
 < 
uiCu¼AQP¬tHeight
>>1; by++ )

92 
UIÁ
 
bx
 = 0;

93  ; 
bx
 < 
uiCu¼AQP¬tWidth
>>1; bx++ )

95 
uiSum
 [0] +ð
pBlkY
[
bx
];

96 
uiSumSq
[0] +ð
pBlkY
[
bx
] *…BlkY[bx];

98  ; 
bx
 < 
uiCu¼AQP¬tWidth
; bx++ )

100 
uiSum
 [1] +ð
pBlkY
[
bx
];

101 
uiSumSq
[1] +ð
pBlkY
[
bx
] *…BlkY[bx];

103 
pBlkY
 +ð
iSŒide
;

105  ; 
by
 < 
uiCu¼AQP¬tHeight
; by++ )

107 
UIÁ
 
bx
 = 0;

108  ; 
bx
 < 
uiCu¼AQP¬tWidth
>>1; bx++ )

110 
uiSum
 [2] +ð
pBlkY
[
bx
];

111 
uiSumSq
[2] +ð
pBlkY
[
bx
] *…BlkY[bx];

113  ; 
bx
 < 
uiCu¼AQP¬tWidth
; bx++ )

115 
uiSum
 [3] +ð
pBlkY
[
bx
];

116 
uiSumSq
[3] +ð
pBlkY
[
bx
] *…BlkY[bx];

118 
pBlkY
 +ð
iSŒide
;

121 
	`as£¹
 ((
uiCu¼AQP¬tWidth
&1)==0);

122 
	`as£¹
 ((
uiCu¼AQP¬tHeight
&1)==0);

123 cÚ¡ 
UIÁ
 
pix–WidthOfQuad¿Ás
 = 
uiCu¼AQP¬tWidth
 >>1;

124 cÚ¡ 
UIÁ
 
pix–HeightOfQuad¿Ás
 = 
uiCu¼AQP¬tHeight
>>1;

125 cÚ¡ 
UIÁ
 
numPixInAQP¬t
 = 
pix–WidthOfQuad¿Ás
 * 
pix–HeightOfQuad¿Ás
;

127 
DoubË
 
dMšV¬
 = 
DBL_MAX
;

128 ià(
numPixInAQP¬t
!=0)

130  
IÁ
 
i
=0; i<4; i++)

132 cÚ¡ 
DoubË
 
dAv”age
 = 
	`DoubË
(
uiSum
[
i
]è/ 
numPixInAQP¬t
;

133 cÚ¡ 
DoubË
 
dV¬Ÿnû
 = 
	`DoubË
(
uiSumSq
[
i
]è/ 
numPixInAQP¬t
 - 
dAv”age
 * dAverage;

134 
dMšV¬
 = 
	`mš
(dMšV¬, 
dV¬Ÿnû
);

139 
dMšV¬
 = 0.0;

141 cÚ¡ 
DoubË
 
dAùiv™y
 = 1.0 + 
dMšV¬
;

142 
pcAQU
->
	`£tAùiv™y
Ð
dAùiv™y
 );

143 
dSumAù
 +ð
dAùiv™y
;

145 
pLšeY
 +ð
iSŒide
 * 
uiCu¼AQP¬tHeight
;

148 cÚ¡ 
DoubË
 
dAvgAù
 = 
dSumAù
 / (
pcAQLay”
->
	`g‘NumAQP¬tInWidth
(è*…cAQLay”->
	`g‘NumAQP¬tInHeight
());

149 
pcAQLay”
->
	`£tAvgAùiv™y
Ð
dAvgAù
 );

151 
	}
}

	@source/Lib/TLibEncoder/TEncPreanalyzer.h

38 #iâdeà
__TENCPREANALYZER__


39 
	#__TENCPREANALYZER__


	)

41 
	~"TEncPic.h
"

51 þas 
	cTEncP»ª®yz”


53 
	mpublic
:

54 
TEncP»ª®yz”
();

55 
	mvœtu®
 ~
TEncP»ª®yz”
();

57 
Void
 
xP»ª®yze
Ð
TEncPic
* 
pcPic
 );

	@source/Lib/TLibEncoder/TEncRateCtrl.cpp

37 
	~"TEncR©eCŒl.h
"

38 
	~"../TLibCommÚ/TComPic.h
"

39 
	~"../TLibCommÚ/TComChromaFÜm©.h
"

41 
	~<cm©h
>

43 
usšg
 
Çme¥aû
 
	g¡d
;

46 
	gTEncRCSeq
::
	$TEncRCSeq
()

48 
m_tÙ®F¿mes
 = 0;

49 
m_rg‘R©e
 = 0;

50 
m_äameR©e
 = 0;

51 
m_rg‘B™s
 = 0;

52 
m_GOPSize
 = 0;

53 
m_picWidth
 = 0;

54 
m_picHeight
 = 0;

55 
m_LCUWidth
 = 0;

56 
m_LCUHeight
 = 0;

57 
m_numb”OfLev–
 = 0;

58 
m_numb”OfLCU
 = 0;

59 
m_av”ageB™s
 = 0;

60 
m_b™sR©io
 = 
NULL
;

61 
m_GOPID2Lev–
 = 
NULL
;

62 
m_picP¬a
 = 
NULL
;

63 
m_LCUP¬a
 = 
NULL
;

64 
m_numb”OfPix–
 = 0;

65 
m_äamesLeá
 = 0;

66 
m_b™sLeá
 = 0;

67 
m_u£LCUS•¬©eMod–
 = 
çl£
;

68 
m_ad­tiveB™
 = 0;

69 
m_Ï¡Lambda
 = 0.0;

70 
	}
}

72 
	gTEncRCSeq
::~
	$TEncRCSeq
()

74 
	`de¡roy
();

75 
	}
}

77 
Void
 
	gTEncRCSeq
::
	$ü—‹
Ð
IÁ
 
tÙ®F¿mes
, IÁ 
rg‘B™¿‹
, IÁ 
äameR©e
, IÁ 
GOPSize
, IÁ 
picWidth
, IÁ 
picHeight
, IÁ 
LCUWidth
, IÁ 
LCUHeight
, IÁ 
numb”OfLev–
, 
BoÞ
 
u£LCUS•¬©eMod–
, IÁ 
ad­tiveB™
 )

79 
	`de¡roy
();

80 
m_tÙ®F¿mes
 = 
tÙ®F¿mes
;

81 
m_rg‘R©e
 = 
rg‘B™¿‹
;

82 
m_äameR©e
 = 
äameR©e
;

83 
m_GOPSize
 = 
GOPSize
;

84 
m_picWidth
 = 
picWidth
;

85 
m_picHeight
 = 
picHeight
;

86 
m_LCUWidth
 = 
LCUWidth
;

87 
m_LCUHeight
 = 
LCUHeight
;

88 
m_numb”OfLev–
 = 
numb”OfLev–
;

89 
m_u£LCUS•¬©eMod–
 = 
u£LCUS•¬©eMod–
;

91 
m_numb”OfPix–
 = 
m_picWidth
 * 
m_picHeight
;

92 
m_rg‘B™s
 = (
IÁ64
)
m_tÙ®F¿mes
 * (IÁ64)
m_rg‘R©e
 / (IÁ64)
m_äameR©e
;

93 
m_£qT¬g‘Bµ
 = (
DoubË
)
m_rg‘R©e
 / (DoubË)
m_äameR©e
 / (DoubË)
m_numb”OfPix–
;

94 iàÐ
m_£qT¬g‘Bµ
 < 0.03 )

96 
m_®phaUpd©e
 = 0.01;

97 
m_b‘aUpd©e
 = 0.005;

99 iàÐ
m_£qT¬g‘Bµ
 < 0.08 )

101 
m_®phaUpd©e
 = 0.05;

102 
m_b‘aUpd©e
 = 0.025;

104 iàÐ
m_£qT¬g‘Bµ
 < 0.2 )

106 
m_®phaUpd©e
 = 0.1;

107 
m_b‘aUpd©e
 = 0.05;

109 iàÐ
m_£qT¬g‘Bµ
 < 0.5 )

111 
m_®phaUpd©e
 = 0.2;

112 
m_b‘aUpd©e
 = 0.1;

116 
m_®phaUpd©e
 = 0.4;

117 
m_b‘aUpd©e
 = 0.2;

120 
m_av”ageB™s
 = (
IÁ
)(
m_rg‘B™s
 / 
tÙ®F¿mes
);

121 
IÁ
 
picWidthInBU
 = ( 
m_picWidth
 % 
m_LCUWidth
 ) == 0 ? m_picWidth / m_LCUWidth : m_picWidth / m_LCUWidth + 1;

122 
IÁ
 
picHeightInBU
 = ( 
m_picHeight
 % 
m_LCUHeight
 ) == 0 ? m_picHeight / m_LCUHeight : m_picHeight / m_LCUHeight + 1;

123 
m_numb”OfLCU
 = 
picWidthInBU
 * 
picHeightInBU
;

125 
m_b™sR©io
 = 
Ãw
 
IÁ
[
m_GOPSize
];

126  
IÁ
 
i
=0; i<
m_GOPSize
; i++ )

128 
m_b™sR©io
[
i
] = 1;

131 
m_GOPID2Lev–
 = 
Ãw
 
IÁ
[
m_GOPSize
];

132  
IÁ
 
i
=0; i<
m_GOPSize
; i++ )

134 
m_GOPID2Lev–
[
i
] = 1;

137 
m_picP¬a
 = 
Ãw
 
TRCP¬am‘”
[
m_numb”OfLev–
];

138  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

140 
m_picP¬a
[
i
].
m_®pha
 = 0.0;

141 
m_picP¬a
[
i
].
m_b‘a
 = 0.0;

142 #ià
JVET_K0390_RATE_CTRL


143 
m_picP¬a
[
i
].
m_v®idPix
 = -1;

145 #ià
JVET_M0600_RATE_CTRL


146 
m_picP¬a
[
i
].
m_skR©io
 = 0.0;

150 iàÐ
m_u£LCUS•¬©eMod–
 )

152 
m_LCUP¬a
 = 
Ãw
 
TRCP¬am‘”
*[
m_numb”OfLev–
];

153  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

155 
m_LCUP¬a
[
i
] = 
Ãw
 
TRCP¬am‘”
[
m_numb”OfLCU
];

156  
IÁ
 
j
=0; j<
m_numb”OfLCU
; j++)

158 
m_LCUP¬a
[
i
][
j
].
m_®pha
 = 0.0;

159 
m_LCUP¬a
[
i
][
j
].
m_b‘a
 = 0.0;

160 #ià
JVET_K0390_RATE_CTRL


161 
m_LCUP¬a
[
i
][
j
].
m_v®idPix
 = -1;

163 #ià
JVET_M0600_RATE_CTRL


164 
m_LCUP¬a
[
i
][
j
].
m_skR©io
 = 0.0;

170 
m_äamesLeá
 = 
m_tÙ®F¿mes
;

171 
m_b™sLeá
 = 
m_rg‘B™s
;

172 
m_ad­tiveB™
 = 
ad­tiveB™
;

173 
m_Ï¡Lambda
 = 0.0;

174 
	}
}

176 
Void
 
	gTEncRCSeq
::
	$de¡roy
()

178 ià(
m_b™sR©io
 !ð
NULL
)

180 
d–‘e
[] 
m_b™sR©io
;

181 
m_b™sR©io
 = 
NULL
;

184 iàÐ
m_GOPID2Lev–
 !ð
NULL
 )

186 
d–‘e
[] 
m_GOPID2Lev–
;

187 
m_GOPID2Lev–
 = 
NULL
;

190 iàÐ
m_picP¬a
 !ð
NULL
 )

192 
d–‘e
[] 
m_picP¬a
;

193 
m_picP¬a
 = 
NULL
;

196 iàÐ
m_LCUP¬a
 !ð
NULL
 )

198  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

200 
d–‘e
[] 
m_LCUP¬a
[
i
];

202 
d–‘e
[] 
m_LCUP¬a
;

203 
m_LCUP¬a
 = 
NULL
;

205 
	}
}

207 
Void
 
	gTEncRCSeq
::
	$š™B™sR©io
Ð
IÁ
 
b™sR©io
[])

209 
IÁ
 
i
=0; i<
m_GOPSize
; i++)

211 
m_b™sR©io
[
i
] = 
b™sR©io
[i];

213 
	}
}

215 
Void
 
	gTEncRCSeq
::
	$š™GOPID2Lev–
Ð
IÁ
 
GOPID2Lev–
[] )

217  
IÁ
 
i
=0; i<
m_GOPSize
; i++ )

219 
m_GOPID2Lev–
[
i
] = 
GOPID2Lev–
[i];

221 
	}
}

223 
Void
 
	gTEncRCSeq
::
	$š™PicP¬a
Ð
TRCP¬am‘”
* 
picP¬a
 )

225 
	`as£¹
Ð
m_picP¬a
 !ð
NULL
 );

227 iàÐ
picP¬a
 =ð
NULL
 )

229  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

231 ià(
i
>0)

233 
m_picP¬a
[
i
].
m_®pha
 = 3.2003;

234 
m_picP¬a
[
i
].
m_b‘a
 = -1.367;

238 
m_picP¬a
[
i
].
m_®pha
 = 
ALPHA
;

239 
m_picP¬a
[
i
].
m_b‘a
 = 
BETA2
;

245  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

247 
m_picP¬a
[
i
] = 
picP¬a
[i];

250 
	}
}

252 
Void
 
	gTEncRCSeq
::
	$š™LCUP¬a
Ð
TRCP¬am‘”
** 
LCUP¬a
 )

254 iàÐ
m_LCUP¬a
 =ð
NULL
 )

258 iàÐ
LCUP¬a
 =ð
NULL
 )

260  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

262  
IÁ
 
j
=0; j<
m_numb”OfLCU
; j++)

264 
m_LCUP¬a
[
i
][
j
].
m_®pha
 = 
m_picP¬a
[i].m_alpha;

265 
m_LCUP¬a
[
i
][
j
].
m_b‘a
 = 
m_picP¬a
[i].m_beta;

271  
IÁ
 
i
=0; i<
m_numb”OfLev–
; i++ )

273  
IÁ
 
j
=0; j<
m_numb”OfLCU
; j++)

275 
m_LCUP¬a
[
i
][
j
] = 
LCUP¬a
[i][j];

279 
	}
}

281 
Void
 
	gTEncRCSeq
::
	$upd©eAá”Pic
 ( 
IÁ
 
b™s
 )

283 
m_b™sLeá
 -ð
b™s
;

284 
m_äamesLeá
--;

285 
	}
}

287 
Void
 
	gTEncRCSeq
::
	$£tAÎB™R©io
Ð
DoubË
 
basicLambda
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
 )

289 
IÁ
* 
b™sR©io
 = 
Ãw
 IÁ[
m_GOPSize
];

290  
IÁ
 
i
=0; i<
m_GOPSize
; i++ )

292 #ià
JVET_K0390_RATE_CTRL


293 
b™sR©io
[
i
] = (
IÁ
)Ð
equaCÛffA
[i] * 
	`pow
(
basicLambda
, 
equaCÛffB
[i]è* (
DoubË
)
	`g‘PicP¬a
(
	`g‘GOPID2Lev–
(i)).
m_v®idPix
);

295 
b™sR©io
[
i
] = (
IÁ
)Ð
equaCÛffA
[i] * 
	`pow
Ð
basicLambda
, 
equaCÛffB
[i] ) * 
m_numb”OfPix–
 );

298 
	`š™B™sR©io
Ð
b™sR©io
 );

299 
d–‘e
[] 
b™sR©io
;

300 
	}
}

303 
	gTEncRCGOP
::
	$TEncRCGOP
()

305 
m_’cRCSeq
 = 
NULL
;

306 
m_picT¬g‘B™InGOP
 = 
NULL
;

307 
m_numPic
 = 0;

308 
m_rg‘B™s
 = 0;

309 
m_picLeá
 = 0;

310 
m_b™sLeá
 = 0;

311 
	}
}

313 
	gTEncRCGOP
::~
	$TEncRCGOP
()

315 
	`de¡roy
();

316 
	}
}

318 
Void
 
	gTEncRCGOP
::
	$ü—‹
Ð
TEncRCSeq
* 
’cRCSeq
, 
IÁ
 
numPic
 )

320 
	`de¡roy
();

321 
IÁ
 
rg‘B™s
 = 
	`xE¡GOPT¬g‘B™s
Ð
’cRCSeq
, 
numPic
 );

323 iàÐ
’cRCSeq
->
	`g‘Ad­tiveB™s
(è> 0 &&ƒncRCSeq->
	`g‘La¡Lambda
() > 0.1 )

325 
DoubË
 
rg‘Bµ
 = (DoubË)
rg‘B™s
 / 
’cRCSeq
->
	`g‘NumPix–
();

326 
DoubË
 
basicLambda
 = 0.0;

327 
DoubË
* 
ÏmbdaR©io
 = 
Ãw
 DoubË[
’cRCSeq
->
	`g‘GOPSize
()];

328 
DoubË
* 
equaCÛffA
 = 
Ãw
 DoubË[
’cRCSeq
->
	`g‘GOPSize
()];

329 
DoubË
* 
equaCÛffB
 = 
Ãw
 DoubË[
’cRCSeq
->
	`g‘GOPSize
()];

331 iàÐ
’cRCSeq
->
	`g‘Ad­tiveB™s
() == 1 )

333 iàÐ
’cRCSeq
->
	`g‘La¡Lambda
() < 120.0 )

335 
ÏmbdaR©io
[1] = 0.725 * 
	`log
Ð
’cRCSeq
->
	`g‘La¡Lambda
() ) + 0.5793;

336 
ÏmbdaR©io
[0] = 1.3 *†ambdaRatio[1];

337 
ÏmbdaR©io
[2] = 1.3 *†ambdaRatio[1];

338 
ÏmbdaR©io
[3] = 1.0;

342 
ÏmbdaR©io
[0] = 5.0;

343 
ÏmbdaR©io
[1] = 4.0;

344 
ÏmbdaR©io
[2] = 5.0;

345 
ÏmbdaR©io
[3] = 1.0;

348 iàÐ
’cRCSeq
->
	`g‘Ad­tiveB™s
() == 2 )

350 iàÐ
’cRCSeq
->
	`g‘La¡Lambda
() < 90.0 )

352 
ÏmbdaR©io
[0] = 1.0;

353 
ÏmbdaR©io
[1] = 0.725 * 
	`log
Ð
’cRCSeq
->
	`g‘La¡Lambda
() ) + 0.7963;

354 
ÏmbdaR©io
[2] = 1.3 *†ambdaRatio[1];

355 
ÏmbdaR©io
[3] = 3.25 *†ambdaRatio[1];

356 
ÏmbdaR©io
[4] = 3.25 *†ambdaRatio[1];

357 
ÏmbdaR©io
[5] = 1.3 *†ambdaRatio[1];

358 
ÏmbdaR©io
[6] = 3.25 *†ambdaRatio[1];

359 
ÏmbdaR©io
[7] = 3.25 *†ambdaRatio[1];

363 
ÏmbdaR©io
[0] = 1.0;

364 
ÏmbdaR©io
[1] = 4.0;

365 
ÏmbdaR©io
[2] = 5.0;

366 
ÏmbdaR©io
[3] = 12.3;

367 
ÏmbdaR©io
[4] = 12.3;

368 
ÏmbdaR©io
[5] = 5.0;

369 
ÏmbdaR©io
[6] = 12.3;

370 
ÏmbdaR©io
[7] = 12.3;

373 #ià
JVET_K0390_RATE_CTRL


374 ià(
’cRCSeq
->
	`g‘Ad­tiveB™s
() == 3)

376 
DoubË
 
h›¿rQp
 = 4.2005 * 
	`log
(
’cRCSeq
->
	`g‘La¡Lambda
()) + 13.7122;

377 
DoubË
 
qpLev2
 = (
h›¿rQp
 + 0.0) + 0.2016 * (hierarQp + 0.0) - 4.8848;

378 
DoubË
 
qpLev3
 = (
h›¿rQp
 + 3.0) + 0.22286 * (hierarQp + 3.0) - 5.7476;

379 
DoubË
 
qpLev4
 = (
h›¿rQp
 + 4.0) + 0.2333 * (hierarQp + 4.0) - 5.9;

380 
DoubË
 
qpLev5
 = (
h›¿rQp
 + 5.0) + 0.3 * (hierarQp + 5.0) - 7.1444;

382 
DoubË
 
ÏmbdaLev1
 = 
	`exp
((
h›¿rQp
 - 13.7122) / 4.2005);

383 
DoubË
 
ÏmbdaLev2
 = 
	`exp
((
qpLev2
 - 13.7122) / 4.2005);

384 
DoubË
 
ÏmbdaLev3
 = 
	`exp
((
qpLev3
 - 13.7122) / 4.2005);

385 
DoubË
 
ÏmbdaLev4
 = 
	`exp
((
qpLev4
 - 13.7122) / 4.2005);

386 
DoubË
 
ÏmbdaLev5
 = 
	`exp
((
qpLev5
 - 13.7122) / 4.2005);

388 
ÏmbdaR©io
[0] = 1.0;

389 
ÏmbdaR©io
[1] = 
ÏmbdaLev2
 / 
ÏmbdaLev1
;

390 
ÏmbdaR©io
[2] = 
ÏmbdaLev3
 / 
ÏmbdaLev1
;

391 
ÏmbdaR©io
[3] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

392 
ÏmbdaR©io
[4] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

393 
ÏmbdaR©io
[5] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

394 
ÏmbdaR©io
[6] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

395 
ÏmbdaR©io
[7] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

396 
ÏmbdaR©io
[8] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

397 
ÏmbdaR©io
[9] = 
ÏmbdaLev3
 / 
ÏmbdaLev1
;

398 
ÏmbdaR©io
[10] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

399 
ÏmbdaR©io
[11] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

400 
ÏmbdaR©io
[12] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

401 
ÏmbdaR©io
[13] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

402 
ÏmbdaR©io
[14] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

403 
ÏmbdaR©io
[15] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

404 #ià
JVET_M0600_RATE_CTRL


405 cÚ¡ 
DoubË
 
qdfP¬aLev2A
 = 0.5847;

406 cÚ¡ 
DoubË
 
qdfP¬aLev2B
 = -0.0782;

407 cÚ¡ 
DoubË
 
qdfP¬aLev3A
 = 0.5468;

408 cÚ¡ 
DoubË
 
qdfP¬aLev3B
 = -0.1364;

409 cÚ¡ 
DoubË
 
qdfP¬aLev4A
 = 0.6539;

410 cÚ¡ 
DoubË
 
qdfP¬aLev4B
 = -0.203;

411 cÚ¡ 
DoubË
 
qdfP¬aLev5A
 = 0.8623;

412 cÚ¡ 
DoubË
 
qdfP¬aLev5B
 = -0.4676;

413 
DoubË
 
qdfLev1Lev2
 = 
	`Cl3
(0.12, 0.9, 
qdfP¬aLev2A
 * 
’cRCSeq
->
	`g‘PicP¬a
(2).
m_skR©io
 + 
qdfP¬aLev2B
);

414 
DoubË
 
qdfLev1Lev3
 = 
	`Cl3
(0.13, 0.9, 
qdfP¬aLev3A
 * 
’cRCSeq
->
	`g‘PicP¬a
(3).
m_skR©io
 + 
qdfP¬aLev3B
);

415 
DoubË
 
qdfLev1Lev4
 = 
	`Cl3
(0.15, 0.9, 
qdfP¬aLev4A
 * 
’cRCSeq
->
	`g‘PicP¬a
(4).
m_skR©io
 + 
qdfP¬aLev4B
);

416 
DoubË
 
qdfLev1Lev5
 = 
	`Cl3
(0.20, 0.9, 
qdfP¬aLev5A
 * 
’cRCSeq
->
	`g‘PicP¬a
(5).
m_skR©io
 + 
qdfP¬aLev5B
);

417 
DoubË
 
qdfLev2Lev3
 = 
	`Cl3
(0.09, 0.9, 
qdfLev1Lev3
 * (1 - 
qdfLev1Lev2
));

418 
DoubË
 
qdfLev2Lev4
 = 
	`Cl3
(0.12, 0.9, 
qdfLev1Lev4
 * (1 - 
qdfLev1Lev2
));

419 
DoubË
 
qdfLev2Lev5
 = 
	`Cl3
(0.14, 0.9, 
qdfLev1Lev5
 * (1 - 
qdfLev1Lev2
));

420 
DoubË
 
qdfLev3Lev4
 = 
	`Cl3
(0.06, 0.9, 
qdfLev1Lev4
 * (1 - 
qdfLev1Lev3
));

421 
DoubË
 
qdfLev3Lev5
 = 
	`Cl3
(0.09, 0.9, 
qdfLev1Lev5
 * (1 - 
qdfLev1Lev3
));

422 
DoubË
 
qdfLev4Lev5
 = 
	`Cl3
(0.10, 0.9, 
qdfLev1Lev5
 * (1 - 
qdfLev1Lev4
));

424 
ÏmbdaLev1
 = 1 / (1 + 2 * (
qdfLev1Lev2
 + 2 * 
qdfLev1Lev3
 + 4 * 
qdfLev1Lev4
 + 8 * 
qdfLev1Lev5
));

425 
ÏmbdaLev2
 = 1 / (1 + (3 * 
qdfLev2Lev3
 + 5 * 
qdfLev2Lev4
 + 8 * 
qdfLev2Lev5
));

426 
ÏmbdaLev3
 = 1 / (1 + 2 * 
qdfLev3Lev4
 + 4 * 
qdfLev3Lev5
);

427 
ÏmbdaLev4
 = 1 / (1 + 2 * 
qdfLev4Lev5
);

428 
ÏmbdaLev5
 = 1 / (1.0);

430 
ÏmbdaR©io
[0] = 1.0;

431 
ÏmbdaR©io
[1] = 
ÏmbdaLev2
 / 
ÏmbdaLev1
;

432 
ÏmbdaR©io
[2] = 
ÏmbdaLev3
 / 
ÏmbdaLev1
;

433 
ÏmbdaR©io
[3] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

434 
ÏmbdaR©io
[4] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

435 
ÏmbdaR©io
[5] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

436 
ÏmbdaR©io
[6] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

437 
ÏmbdaR©io
[7] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

438 
ÏmbdaR©io
[8] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

439 
ÏmbdaR©io
[9] = 
ÏmbdaLev3
 / 
ÏmbdaLev1
;

440 
ÏmbdaR©io
[10] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

441 
ÏmbdaR©io
[11] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

442 
ÏmbdaR©io
[12] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

443 
ÏmbdaR©io
[13] = 
ÏmbdaLev4
 / 
ÏmbdaLev1
;

444 
ÏmbdaR©io
[14] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

445 
ÏmbdaR©io
[15] = 
ÏmbdaLev5
 / 
ÏmbdaLev1
;

449 
	`xC®EquaCÛff
Ð
’cRCSeq
, 
ÏmbdaR©io
, 
equaCÛffA
, 
equaCÛffB
,ƒncRCSeq->
	`g‘GOPSize
() );

450 #ià
JVET_K0390_RATE_CTRL


451 
basicLambda
 = 
	`xSÞveEqua
(
’cRCSeq
, 
rg‘Bµ
, 
equaCÛffA
, 
equaCÛffB
,ƒncRCSeq->
	`g‘GOPSize
());

453 
basicLambda
 = 
	`xSÞveEqua
Ð
rg‘Bµ
, 
equaCÛffA
, 
equaCÛffB
, 
’cRCSeq
->
	`g‘GOPSize
() );

455 
’cRCSeq
->
	`£tAÎB™R©io
Ð
basicLambda
, 
equaCÛffA
, 
equaCÛffB
 );

457 
d–‘e
 []
ÏmbdaR©io
;

458 
d–‘e
 []
equaCÛffA
;

459 
d–‘e
 []
equaCÛffB
;

462 
m_picT¬g‘B™InGOP
 = 
Ãw
 
IÁ
[
numPic
];

463 
IÁ
 
i
;

464 
IÁ
 
tÙ®PicR©io
 = 0;

465 
IÁ
 
cu¼PicR©io
 = 0;

466  
i
=0; i<
numPic
; i++ )

468 
tÙ®PicR©io
 +ð
’cRCSeq
->
	`g‘B™R©io
Ð
i
 );

470  
i
=0; i<
numPic
; i++ )

472 
cu¼PicR©io
 = 
’cRCSeq
->
	`g‘B™R©io
Ð
i
 );

473 
m_picT¬g‘B™InGOP
[
i
] = (
IÁ
)Ð((
DoubË
)
rg‘B™s
è* 
cu¼PicR©io
 / 
tÙ®PicR©io
 );

476 
m_’cRCSeq
 = 
’cRCSeq
;

477 
m_numPic
 = 
numPic
;

478 
m_rg‘B™s
 = 
rg‘B™s
;

479 
m_picLeá
 = 
m_numPic
;

480 
m_b™sLeá
 = 
m_rg‘B™s
;

481 
	}
}

483 
Void
 
	gTEncRCGOP
::
	$xC®EquaCÛff
Ð
TEncRCSeq
* 
’cRCSeq
, 
DoubË
* 
ÏmbdaR©io
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
 )

485  
IÁ
 
i
=0; i<
GOPSize
; i++ )

487 
IÁ
 
äameLev–
 = 
’cRCSeq
->
	`g‘GOPID2Lev–
(
i
);

488 
DoubË
 
®pha
 = 
’cRCSeq
->
	`g‘PicP¬a
(
äameLev–
).
m_®pha
;

489 
DoubË
 
b‘a
 = 
’cRCSeq
->
	`g‘PicP¬a
(
äameLev–
).
m_b‘a
;

490 
equaCÛffA
[
i
] = 
	`pow
Ð1.0/
®pha
, 1.0/
b‘a
 ) *…owÐ
ÏmbdaR©io
[i], 1.0/beta );

491 
equaCÛffB
[
i
] = 1.0/
b‘a
;

493 
	}
}

495 #ià
JVET_K0390_RATE_CTRL


496 
DoubË
 
	gTEncRCGOP
::
	$xSÞveEqua
(
TEncRCSeq
* 
’cRCSeq
, 
DoubË
 
rg‘Bµ
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
)

498 
DoubË
 
TEncRCGOP
::
	$xSÞveEqua
Ð
DoubË
 
rg‘Bµ
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
 )

501 
DoubË
 
sÞutiÚ
 = 100.0;

502 
DoubË
 
mšNumb”
 = 0.1;

503 
DoubË
 
maxNumb”
 = 10000.0;

504  
IÁ
 
i
=0; i<
g_RCI‹¿tiÚNum
; i++ )

506 
DoubË
 
fx
 = 0.0;

507  
IÁ
 
j
=0; j<
GOPSize
; j++ )

509 #ià
JVET_K0390_RATE_CTRL


510 
DoubË
 
tmpBµ
 = 
equaCÛffA
[
j
] * 
	`pow
(
sÞutiÚ
, 
equaCÛffB
[j]);

511 
DoubË
 
aùu®Bµ
 = 
tmpBµ
 * (DoubË)
’cRCSeq
->
	`g‘PicP¬a
ÓncRCSeq->
	`g‘GOPID2Lev–
(
j
)).
m_v®idPix
 / (DoubËëncRCSeq->
	`g‘NumPix–
();

512 
fx
 +ð
aùu®Bµ
;

514 
fx
 +ð
equaCÛffA
[
j
] * 
	`pow
Ð
sÞutiÚ
, 
equaCÛffB
[j] );

518 iàÐ
	`çbs
Ð
fx
 - 
rg‘Bµ
 ) < 0.000001 )

523 iàÐ
fx
 > 
rg‘Bµ
 )

525 
mšNumb”
 = 
sÞutiÚ
;

526 
sÞutiÚ
 = ( sÞutiÚ + 
maxNumb”
 ) / 2.0;

530 
maxNumb”
 = 
sÞutiÚ
;

531 
sÞutiÚ
 = ( sÞutiÚ + 
mšNumb”
 ) / 2.0;

535 
sÞutiÚ
 = 
	`Cl3
( 0.1, 10000.0, solution );

536  
sÞutiÚ
;

537 
	}
}

539 
Void
 
	gTEncRCGOP
::
	$de¡roy
()

541 
m_’cRCSeq
 = 
NULL
;

542 iàÐ
m_picT¬g‘B™InGOP
 !ð
NULL
 )

544 
d–‘e
[] 
m_picT¬g‘B™InGOP
;

545 
m_picT¬g‘B™InGOP
 = 
NULL
;

547 
	}
}

549 
Void
 
	gTEncRCGOP
::
	$upd©eAá”Piùu»
Ð
IÁ
 
b™sCo¡
 )

551 
m_b™sLeá
 -ð
b™sCo¡
;

552 
m_picLeá
--;

553 
	}
}

555 
IÁ
 
	gTEncRCGOP
::
	$xE¡GOPT¬g‘B™s
Ð
TEncRCSeq
* 
’cRCSeq
, 
IÁ
 
GOPSize
 )

557 
IÁ
 
»®Inæu’ûPiùu»
 = 
	`mš
Ð
g_RCSmoÙhWšdowSize
, 
’cRCSeq
->
	`g‘F¿mesLeá
() );

558 
IÁ
 
av”ageT¬g‘B™sP”Pic
 = (IÁ)Ð
’cRCSeq
->
	`g‘T¬g‘B™s
(è/ƒncRCSeq->
	`g‘TÙ®F¿mes
() );

559 
IÁ
 
cu¼’tT¬g‘B™sP”Pic
 = (IÁ)ÐÐ
’cRCSeq
->
	`g‘B™sLeá
(è- 
av”ageT¬g‘B™sP”Pic
 * (’cRCSeq->
	`g‘F¿mesLeá
(è- 
»®Inæu’ûPiùu»
) ) /„ealInfluencePicture );

560 
IÁ
 
rg‘B™s
 = 
cu¼’tT¬g‘B™sP”Pic
 * 
GOPSize
;

562 iàÐ
rg‘B™s
 < 200 )

564 
rg‘B™s
 = 200;

567  
rg‘B™s
;

568 
	}
}

571 
	gTEncRCPic
::
	$TEncRCPic
()

573 
m_’cRCSeq
 = 
NULL
;

574 
m_’cRCGOP
 = 
NULL
;

576 
m_äameLev–
 = 0;

577 
m_numb”OfPix–
 = 0;

578 
m_numb”OfLCU
 = 0;

579 
m_rg‘B™s
 = 0;

580 
m_e¡H—d”B™s
 = 0;

581 
m_e¡PicQP
 = 0;

582 
m_e¡PicLambda
 = 0.0;

584 
m_LCULeá
 = 0;

585 
m_b™sLeá
 = 0;

586 
m_pix–sLeá
 = 0;

588 
m_LCUs
 = 
NULL
;

589 
m_picAùu®H—d”B™s
 = 0;

590 
m_picAùu®B™s
 = 0;

591 
m_picQP
 = 0;

592 
m_picLambda
 = 0.0;

593 #ià
JVET_K0390_RATE_CTRL


594 
m_picMSE
 = 0.0;

595 
m_v®idPix–sInPic
 = 0;

597 
	}
}

599 
	gTEncRCPic
::~
	$TEncRCPic
()

601 
	`de¡roy
();

602 
	}
}

604 
IÁ
 
	gTEncRCPic
::
	$xE¡PicT¬g‘B™s
Ð
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
 )

606 
IÁ
 
rg‘B™s
 = 0;

607 
IÁ
 
GOPb™sLeá
 = 
’cRCGOP
->
	`g‘B™sLeá
();

609 
IÁ
 
i
;

610 
IÁ
 
cu¼PicPos™iÚ
 = 
’cRCGOP
->
	`g‘NumPic
()-’cRCGOP->
	`g‘PicLeá
();

611 
IÁ
 
cu¼PicR©io
 = 
’cRCSeq
->
	`g‘B™R©io
Ð
cu¼PicPos™iÚ
 );

612 
IÁ
 
tÙ®PicR©io
 = 0;

613  
i
=
cu¼PicPos™iÚ
; i<
’cRCGOP
->
	`g‘NumPic
(); i++ )

615 
tÙ®PicR©io
 +ð
’cRCSeq
->
	`g‘B™R©io
Ð
i
 );

618 
rg‘B™s
 = 
	`IÁ
Ð((
DoubË
)
GOPb™sLeá
è* 
cu¼PicR©io
 / 
tÙ®PicR©io
 );

620 iàÐ
rg‘B™s
 < 100 )

622 
rg‘B™s
 = 100;

625 iàÐ
m_’cRCSeq
->
	`g‘F¿mesLeá
() > 16 )

627 
rg‘B™s
 = 
	`IÁ
Ð
g_RCWeightPicR¬g‘B™InBufãr
 *¬g‘B™ + 
g_RCWeightPicT¬g‘B™InGOP
 * 
m_’cRCGOP
->
	`g‘T¬g‘B™InGOP
Ð
cu¼PicPos™iÚ
 ) );

630  
rg‘B™s
;

631 
	}
}

633 
IÁ
 
	gTEncRCPic
::
xE¡PicH—d”B™s
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
, IÁ 
äameLev–
 )

635 
IÁ
 
	gnumP»viousPics
 = 0;

636 
IÁ
 
	gtÙ®P»viousB™s
 = 0;

638 
	gli¡
<
	gTEncRCPic
*>::
™”©Ü
 
™
;

639  
	g™
 = 
li¡P»viousPiùu»s
.
begš
(); iˆ!ðli¡P»viousPiùu»s.
’d
(); it++ )

641 iàÐ(*
	g™
)->
g‘F¿meLev–
(è=ð
äameLev–
 )

643 
tÙ®P»viousB™s
 +ð(*
™
)->
g‘PicAùu®H—d”B™s
();

644 
	gnumP»viousPics
++;

648 
IÁ
 
	ge¡H—d”B™s
 = 0;

649 iàÐ
	gnumP»viousPics
 > 0 )

651 
	ge¡H—d”B™s
 = 
tÙ®P»viousB™s
 / 
numP»viousPics
;

654  
	ge¡H—d”B™s
;

657 
IÁ
 
	gTEncRCPic
::
	$xE¡PicLow”Bound
(
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
)

659 
IÁ
 
low”Bound
 = 0;

660 
IÁ
 
GOPb™sLeá
 = 
’cRCGOP
->
	`g‘B™sLeá
();

662 cÚ¡ 
IÁ
 
ÃxtPicPos™iÚ
 = (
’cRCGOP
->
	`g‘NumPic
(è-ƒncRCGOP->
	`g‘PicLeá
() + 1) %ƒncRCGOP->getNumPic();

663 cÚ¡ 
IÁ
 
ÃxtPicR©io
 = 
’cRCSeq
->
	`g‘B™R©io
(
ÃxtPicPos™iÚ
);

665 
IÁ
 
tÙ®PicR©io
 = 0;

666 
IÁ
 
i
 = 
ÃxtPicPos™iÚ
; i < 
’cRCGOP
->
	`g‘NumPic
(); i++)

668 
tÙ®PicR©io
 +ð
’cRCSeq
->
	`g‘B™R©io
(
i
);

671 ià(
ÃxtPicPos™iÚ
 == 0)

673 
GOPb™sLeá
 = 
’cRCGOP
->
	`g‘T¬g‘B™s
();

677 
GOPb™sLeá
 -ð
m_rg‘B™s
;

680 
low”Bound
 = 
	`IÁ
(((
DoubË
)
GOPb™sLeá
è* 
ÃxtPicR©io
 / 
tÙ®PicR©io
);

682 ià(
low”Bound
 < 100)

684 
low”Bound
 = 100;

687 ià(
m_’cRCSeq
->
	`g‘F¿mesLeá
() > 16)

689 
low”Bound
 = 
	`IÁ
(
g_RCWeightPicR¬g‘B™InBufãr
 *†ow”Bound + 
g_RCWeightPicT¬g‘B™InGOP
 * 
m_’cRCGOP
->
	`g‘T¬g‘B™InGOP
(
ÃxtPicPos™iÚ
));

692  
low”Bound
;

693 
	}
}

695 
Void
 
	gTEncRCPic
::
addToPiùu»Ls™
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 )

697 iàÐ
li¡P»viousPiùu»s
.
size
(è> 
g_RCMaxPicLi¡Size
 )

699 
TEncRCPic
* 
p
 = 
li¡P»viousPiùu»s
.
äÚt
();

700 
	gli¡P»viousPiùu»s
.
pÝ_äÚt
();

701 
	gp
->
de¡roy
();

702 
d–‘e
 
	gp
;

705 
	gli¡P»viousPiùu»s
.
push_back
Ð
this
 );

708 
Void
 
	gTEncRCPic
::
ü—‹
Ð
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
, 
IÁ
 
äameLev–
, 
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 )

710 
de¡roy
();

711 
	gm_’cRCSeq
 = 
’cRCSeq
;

712 
	gm_’cRCGOP
 = 
’cRCGOP
;

714 
IÁ
 
	grg‘B™s
 = 
xE¡PicT¬g‘B™s
Ð
’cRCSeq
, 
’cRCGOP
 );

715 
IÁ
 
	ge¡H—d”B™s
 = 
xE¡PicH—d”B™s
Ð
li¡P»viousPiùu»s
, 
äameLev–
 );

717 iàÐ
	grg‘B™s
 < 
	ge¡H—d”B™s
 + 100 )

719 
	grg‘B™s
 = 
e¡H—d”B™s
 + 100;

722 
	gm_äameLev–
 = 
äameLev–
;

723 
	gm_numb”OfPix–
 = 
’cRCSeq
->
g‘NumPix–
();

724 
	gm_numb”OfLCU
 = 
’cRCSeq
->
g‘Numb”OfLCU
();

725 
	gm_e¡PicLambda
 = 100.0;

726 
	gm_rg‘B™s
 = 
rg‘B™s
;

727 
	gm_e¡H—d”B™s
 = 
e¡H—d”B™s
;

728 
	gm_b™sLeá
 = 
m_rg‘B™s
;

729 
IÁ
 
	gpicWidth
 = 
’cRCSeq
->
g‘PicWidth
();

730 
IÁ
 
	gpicHeight
 = 
’cRCSeq
->
g‘PicHeight
();

731 
IÁ
 
	gLCUWidth
 = 
’cRCSeq
->
g‘LCUWidth
();

732 
IÁ
 
	gLCUHeight
 = 
’cRCSeq
->
g‘LCUHeight
();

733 
IÁ
 
	gpicWidthInLCU
 = ( 
picWidth
 % 
LCUWidth
 ) == 0 ?…icWidth / LCUWidth :…icWidth / LCUWidth + 1;

734 
IÁ
 
	gpicHeightInLCU
 = ( 
picHeight
 % 
LCUHeight
 ) == 0 ?…icHeight / LCUHeight :…icHeight / LCUHeight + 1;

735 
	gm_low”Bound
 = 
xE¡PicLow”Bound
Ð
’cRCSeq
, 
’cRCGOP
 );

737 
	gm_LCULeá
 = 
m_numb”OfLCU
;

738 
	gm_b™sLeá
 -ð
m_e¡H—d”B™s
;

739 
	gm_pix–sLeá
 = 
m_numb”OfPix–
;

741 
	gm_LCUs
 = 
Ãw
 
TRCLCU
[
m_numb”OfLCU
];

742 
IÁ
 
	gi
, 
	gj
;

743 
IÁ
 
	gLCUIdx
;

744  
	gi
=0; i<
	gpicWidthInLCU
; i++ )

746  
	gj
=0; j<
	gpicHeightInLCU
; j++ )

748 
	gLCUIdx
 = 
j
*
picWidthInLCU
 + 
i
;

749 
	gm_LCUs
[
LCUIdx
].
	gm_aùu®B™s
 = 0;

750 #ià
JVET_K0390_RATE_CTRL


751 
	gm_LCUs
[
LCUIdx
].
	gm_aùu®SSE
 = 0.0;

752 
	gm_LCUs
[
LCUIdx
].
	gm_aùu®MSE
 = 0.0;

754 
	gm_LCUs
[
LCUIdx
].
	gm_QP
 = 0;

755 
	gm_LCUs
[
LCUIdx
].
	gm_Ïmbda
 = 0.0;

756 
	gm_LCUs
[
LCUIdx
].
	gm_rg‘B™s
 = 0;

757 
	gm_LCUs
[
LCUIdx
].
	gm_b™Weight
 = 1.0;

758 
IÁ
 
	gcu¼Width
 = ( (
i
 =ð
picWidthInLCU
 -1è? 
picWidth
 - 
LCUWidth
 *(picWidthInLCU -1) : LCUWidth );

759 
IÁ
 
	gcu¼Height
 = ( (
j
 =ð
picHeightInLCU
-1è? 
picHeight
 - 
LCUHeight
*(picHeightInLCU-1) : LCUHeight );

760 
	gm_LCUs
[
LCUIdx
].
	gm_numb”OfPix–
 = 
cu¼Width
 * 
cu¼Height
;

763 
	gm_picAùu®H—d”B™s
 = 0;

764 
	gm_picAùu®B™s
 = 0;

765 
	gm_picQP
 = 0;

766 
	gm_picLambda
 = 0.0;

769 
Void
 
	gTEncRCPic
::
	$de¡roy
()

771 ifÐ
m_LCUs
 !ð
NULL
 )

773 
d–‘e
[] 
m_LCUs
;

774 
m_LCUs
 = 
NULL
;

776 
m_’cRCSeq
 = 
NULL
;

777 
m_’cRCGOP
 = 
NULL
;

778 
	}
}

781 
DoubË
 
	gTEncRCPic
::
e¡im©ePicLambda
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
, 
SliûTy³
 
eSliûTy³
)

783 
DoubË
 
	g®pha
 = 
m_’cRCSeq
->
g‘PicP¬a
Ð
m_äameLev–
 ).
m_®pha
;

784 
DoubË
 
	gb‘a
 = 
m_’cRCSeq
->
g‘PicP¬a
Ð
m_äameLev–
 ).
m_b‘a
;

785 
DoubË
 
	gbµ
 = (DoubË)
m_rg‘B™s
/(DoubË)
m_numb”OfPix–
;

787 #ià
JVET_K0390_RATE_CTRL


788 
IÁ
 
	gÏ¡PicV®Pix
 = 0;

789 ià(
	gli¡P»viousPiùu»s
.
size
() > 0)

791 
	gÏ¡PicV®Pix
 = 
m_’cRCSeq
->
g‘PicP¬a
(
m_äameLev–
).
m_v®idPix
;

793 ià(
	gÏ¡PicV®Pix
 > 0)

795 
	gbµ
 = (
DoubË
)
m_rg‘B™s
 / (DoubË)
Ï¡PicV®Pix
;

799 
DoubË
 
	ge¡Lambda
;

800 ià(
	geSliûTy³
 =ð
I_SLICE
)

802 
e¡Lambda
 = 
ÿlcuÏ‹LambdaIÁ¿
(
®pha
, 
b‘a
, 
pow
(
m_tÙ®Co¡IÁ¿
/(
DoubË
)
m_numb”OfPix–
, 
BETA1
), 
bµ
);

806 
	ge¡Lambda
 = 
®pha
 * 
pow
Ð
bµ
, 
b‘a
 );

809 
DoubË
 
	gÏ¡Lev–Lambda
 = -1.0;

810 
DoubË
 
	gÏ¡PicLambda
 = -1.0;

811 
DoubË
 
	gÏ¡V®idLambda
 = -1.0;

812 
	gli¡
<
	gTEncRCPic
*>::
™”©Ü
 
™
;

813  
	g™
 = 
li¡P»viousPiùu»s
.
begš
(); iˆ!ðli¡P»viousPiùu»s.
’d
(); it++ )

815 iàÐ(*
	g™
)->
g‘F¿meLev–
(è=ð
m_äameLev–
 )

817 
Ï¡Lev–Lambda
 = (*
™
)->
g‘PicAùu®Lambda
();

819 
	gÏ¡PicLambda
 = (*
™
)->
g‘PicAùu®Lambda
();

821 iàÐ
	gÏ¡PicLambda
 > 0.0 )

823 
	gÏ¡V®idLambda
 = 
Ï¡PicLambda
;

827 iàÐ
	gÏ¡Lev–Lambda
 > 0.0 )

829 
	gÏ¡Lev–Lambda
 = 
Cl3
Ð0.1, 10000.0, 
Ï¡Lev–Lambda
 );

830 
	ge¡Lambda
 = 
Cl3
Ð
Ï¡Lev–Lambda
 * 
pow
Ð2.0, -3.0/3.0 ),†a¡Lev–Lambd¨*…owÐ2.0, 3.0/3.0 ), 
e¡Lambda
 );

833 iàÐ
	gÏ¡PicLambda
 > 0.0 )

835 
	gÏ¡PicLambda
 = 
Cl3
Ð0.1, 2000.0, 
Ï¡PicLambda
 );

836 
	ge¡Lambda
 = 
Cl3
Ð
Ï¡PicLambda
 * 
pow
Ð2.0, -10.0/3.0 ),†a¡PicLambd¨*…owÐ2.0, 10.0/3.0 ), 
e¡Lambda
 );

838 iàÐ
	gÏ¡V®idLambda
 > 0.0 )

840 
	gÏ¡V®idLambda
 = 
Cl3
Ð0.1, 2000.0, 
Ï¡V®idLambda
 );

841 
	ge¡Lambda
 = 
Cl3
Ð
Ï¡V®idLambda
 * 
pow
(2.0, -10.0/3.0),†a¡V®idLambd¨*…ow(2.0, 10.0/3.0), 
e¡Lambda
 );

845 
	ge¡Lambda
 = 
Cl3
Ð0.1, 10000.0, 
e¡Lambda
 );

848 iàÐ
	ge¡Lambda
 < 0.1 )

850 
	ge¡Lambda
 = 0.1;

852 #ià
JVET_K0390_RATE_CTRL


854 
	ge¡Lambda
 = 
DoubË
(
št64_t
(
e¡Lambda
 * (DoubË)
LAMBDA_PREC
 + 0.5)) / (Double)LAMBDA_PREC;

856 
	gm_e¡PicLambda
 = 
e¡Lambda
;

858 
DoubË
 
	gtÙ®Weight
 = 0.0;

860  
IÁ
 
	gi
=0; i<
	gm_numb”OfLCU
; i++ )

862 
DoubË
 
	g®phaLCU
, 
	gb‘aLCU
;

863 iàÐ
	gm_’cRCSeq
->
g‘U£LCUS•¬©eMod–
() )

865 
	g®phaLCU
 = 
m_’cRCSeq
->
g‘LCUP¬a
Ð
m_äameLev–
, 
i
 ).
	gm_®pha
;

866 
	gb‘aLCU
 = 
m_’cRCSeq
->
g‘LCUP¬a
Ð
m_äameLev–
, 
i
 ).
	gm_b‘a
;

870 
	g®phaLCU
 = 
m_’cRCSeq
->
g‘PicP¬a
Ð
m_äameLev–
 ).
m_®pha
;

871 
	gb‘aLCU
 = 
m_’cRCSeq
->
g‘PicP¬a
Ð
m_äameLev–
 ).
m_b‘a
;

874 
	gm_LCUs
[
i
].
	gm_b™Weight
 = 
m_LCUs
[i].
m_numb”OfPix–
 * 
pow
Ð
e¡Lambda
/
®phaLCU
, 1.0/
b‘aLCU
 );

876 iàÐ
	gm_LCUs
[
i
].
	gm_b™Weight
 < 0.01 )

878 
	gm_LCUs
[
i
].
	gm_b™Weight
 = 0.01;

880 
	gtÙ®Weight
 +ð
m_LCUs
[
i
].
m_b™Weight
;

882  
IÁ
 
	gi
=0; i<
	gm_numb”OfLCU
; i++ )

884 
DoubË
 
	gBUT¬g‘B™s
 = 
m_rg‘B™s
 * 
m_LCUs
[
i
].
m_b™Weight
 / 
tÙ®Weight
;

885 
	gm_LCUs
[
i
].
	gm_b™Weight
 = 
BUT¬g‘B™s
;

888  
	ge¡Lambda
;

891 
IÁ
 
	gTEncRCPic
::
e¡im©ePicQP
Ð
DoubË
 
Ïmbda
, 
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 )

893 
IÁ
 
	gQP
 = IÁÐ4.2005 * 
log
Ð
Ïmbda
 ) + 13.7122 + 0.5 );

895 
IÁ
 
	gÏ¡Lev–QP
 = 
g_RCInv®idQPV®ue
;

896 
IÁ
 
	gÏ¡PicQP
 = 
g_RCInv®idQPV®ue
;

897 
IÁ
 
	gÏ¡V®idQP
 = 
g_RCInv®idQPV®ue
;

898 
	gli¡
<
	gTEncRCPic
*>::
™”©Ü
 
™
;

899  
	g™
 = 
li¡P»viousPiùu»s
.
begš
(); iˆ!ðli¡P»viousPiùu»s.
’d
(); it++ )

901 iàÐ(*
	g™
)->
g‘F¿meLev–
(è=ð
m_äameLev–
 )

903 
Ï¡Lev–QP
 = (*
™
)->
g‘PicAùu®QP
();

905 
	gÏ¡PicQP
 = (*
™
)->
g‘PicAùu®QP
();

906 iàÐ
	gÏ¡PicQP
 > 
	gg_RCInv®idQPV®ue
 )

908 
	gÏ¡V®idQP
 = 
Ï¡PicQP
;

912 iàÐ
	gÏ¡Lev–QP
 > 
	gg_RCInv®idQPV®ue
 )

914 
	gQP
 = 
Cl3
Ð
Ï¡Lev–QP
 - 3,†a¡Lev–QP + 3, 
QP
 );

917 ifÐ
	gÏ¡PicQP
 > 
	gg_RCInv®idQPV®ue
 )

919 
	gQP
 = 
Cl3
Ð
Ï¡PicQP
 - 10,†a¡PicQP + 10, 
QP
 );

921 ifÐ
	gÏ¡V®idQP
 > 
	gg_RCInv®idQPV®ue
 )

923 
	gQP
 = 
Cl3
Ð
Ï¡V®idQP
 - 10,†a¡V®idQP + 10, 
QP
 );

926  
	gQP
;

929 
DoubË
 
	gTEncRCPic
::
	$g‘LCUT¬g‘Bµ
(
SliûTy³
 
eSliûTy³
)

931 
IÁ
 
LCUIdx
 = 
	`g‘LCUCoded
();

932 
DoubË
 
bµ
 = -1.0;

933 
IÁ
 
avgB™s
 = 0;

935 ià(
eSliûTy³
 =ð
I_SLICE
)

937 
IÁ
 
noOfLCUsLeá
 = 
m_numb”OfLCU
 - 
LCUIdx
 + 1;

938 
IÁ
 
b™¿‹Wšdow
 = 
	`mš
(4,
noOfLCUsLeá
);

939 
DoubË
 
MAD
 = 
	`g‘LCU
(
LCUIdx
).
m_co¡IÁ¿
;

941 ià(
m_»maššgCo¡IÁ¿
 > 0.1 )

943 
DoubË
 
weigh‹dB™sLeá
 = (
m_b™sLeá
*
b™¿‹Wšdow
+(m_b™sLeá-
	`g‘LCU
(
LCUIdx
).
m_rg‘B™sLeá
)*
noOfLCUsLeá
)/(Double)bitrateWindow;

944 
avgB™s
 = 
	`IÁ
Ð
MAD
*
weigh‹dB™sLeá
/
m_»maššgCo¡IÁ¿
 );

948 
avgB™s
 = 
	`IÁ
Ð
m_b™sLeá
 / 
m_LCULeá
 );

950 
m_»maššgCo¡IÁ¿
 -ð
MAD
;

954 
DoubË
 
tÙ®Weight
 = 0;

955  
IÁ
 
i
=
LCUIdx
; i<
m_numb”OfLCU
; i++ )

957 
tÙ®Weight
 +ð
m_LCUs
[
i
].
m_b™Weight
;

959 
IÁ
 
»®Inæu’ûLCU
 = 
	`mš
Ð
g_RCLCUSmoÙhWšdowSize
, 
	`g‘LCULeá
() );

960 
avgB™s
 = (
IÁ
)Ð
m_LCUs
[
LCUIdx
].
m_b™Weight
 - ( 
tÙ®Weight
 - 
m_b™sLeá
 ) / 
»®Inæu’ûLCU
 + 0.5 );

963 iàÐ
avgB™s
 < 1 )

965 
avgB™s
 = 1;

968 
bµ
 = ( 
DoubË
 )
avgB™s
/ÐDoubË )
m_LCUs
[ 
LCUIdx
 ].
m_numb”OfPix–
;

969 
m_LCUs
[ 
LCUIdx
 ].
m_rg‘B™s
 = 
avgB™s
;

971  
bµ
;

972 
	}
}

974 
DoubË
 
	gTEncRCPic
::
	$g‘LCUE¡Lambda
Ð
DoubË
 
bµ
 )

976 
IÁ
 
LCUIdx
 = 
	`g‘LCUCoded
();

977 
DoubË
 
®pha
;

978 
DoubË
 
b‘a
;

979 iàÐ
m_’cRCSeq
->
	`g‘U£LCUS•¬©eMod–
() )

981 
®pha
 = 
m_’cRCSeq
->
	`g‘LCUP¬a
Ð
m_äameLev–
, 
LCUIdx
 ).
m_®pha
;

982 
b‘a
 = 
m_’cRCSeq
->
	`g‘LCUP¬a
Ð
m_äameLev–
, 
LCUIdx
 ).
m_b‘a
;

986 
®pha
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_®pha
;

987 
b‘a
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_b‘a
;

990 
DoubË
 
e¡Lambda
 = 
®pha
 * 
	`pow
Ð
bµ
, 
b‘a
 );

992 
DoubË
 
þPicLambda
 = 
m_e¡PicLambda
;

995 
DoubË
 
þNeighbourLambda
 = -1.0;

996  
IÁ
 
i
=
LCUIdx
 - 1; i>=0; i-- )

998 iàÐ
m_LCUs
[
i
].
m_Ïmbda
 > 0 )

1000 
þNeighbourLambda
 = 
m_LCUs
[
i
].
m_Ïmbda
;

1005 iàÐ
þNeighbourLambda
 > 0.0 )

1007 
e¡Lambda
 = 
	`Cl3
Ð
þNeighbourLambda
 * 
	`pow
( 2.0, -1.0/3.0 ), clipNeighbourLambda *…ow( 2.0, 1.0/3.0 ),ƒstLambda );

1010 iàÐ
þPicLambda
 > 0.0 )

1012 
e¡Lambda
 = 
	`Cl3
Ð
þPicLambda
 * 
	`pow
( 2.0, -2.0/3.0 ), clipPicLambda *…ow( 2.0, 2.0/3.0 ),ƒstLambda );

1016 
e¡Lambda
 = 
	`Cl3
( 10.0, 1000.0,ƒstLambda );

1019 iàÐ
e¡Lambda
 < 0.1 )

1021 
e¡Lambda
 = 0.1;

1023 #ià
JVET_K0390_RATE_CTRL


1025 
e¡Lambda
 = 
	`DoubË
(
	`št64_t
Ó¡Lambd¨* (
DoubË
)
LAMBDA_PREC
 + 0.5)) / (Double)LAMBDA_PREC;

1027  
e¡Lambda
;

1028 
	}
}

1030 
IÁ
 
	gTEncRCPic
::
	$g‘LCUE¡QP
Ð
DoubË
 
Ïmbda
, 
IÁ
 
þPicQP
 )

1032 
IÁ
 
LCUIdx
 = 
	`g‘LCUCoded
();

1033 
IÁ
 
e¡QP
 = 
	`IÁ
Ð4.2005 * 
	`log
Ð
Ïmbda
 ) + 13.7122 + 0.5 );

1036 
IÁ
 
þNeighbourQP
 = 
g_RCInv®idQPV®ue
;

1037  
IÁ
 
i
=
LCUIdx
 - 1; i>=0; i-- )

1039 iàÐ(
	`g‘LCU
(
i
)).
m_QP
 > 
g_RCInv®idQPV®ue
 )

1041 
þNeighbourQP
 = 
	`g‘LCU
(
i
).
m_QP
;

1046 iàÐ
þNeighbourQP
 > 
g_RCInv®idQPV®ue
 )

1048 
e¡QP
 = 
	`Cl3
Ð
þNeighbourQP
 - 1, clipNeighbourQP + 1,ƒstQP );

1051 
e¡QP
 = 
	`Cl3
Ð
þPicQP
 - 2, clipPicQP + 2,ƒstQP );

1053  
e¡QP
;

1054 
	}
}

1056 #ià
JVET_M0600_RATE_CTRL


1057 
Void
 
	gTEncRCPic
::
	$upd©eAá”CTU
(
IÁ
 
LCUIdx
, IÁ 
b™s
, IÁ 
QP
, 
DoubË
 
Ïmbda
, DoubË 
skR©io
, 
BoÞ
 
upd©eLCUP¬am‘”
)

1059 
Void
 
TEncRCPic
::
	$upd©eAá”CTU
Ð
IÁ
 
LCUIdx
, IÁ 
b™s
, IÁ 
QP
, 
DoubË
 
Ïmbda
, 
BoÞ
 
upd©eLCUP¬am‘”
 )

1062 
m_LCUs
[
LCUIdx
].
m_aùu®B™s
 = 
b™s
;

1063 
m_LCUs
[
LCUIdx
].
m_QP
 = 
QP
;

1064 
m_LCUs
[
LCUIdx
].
m_Ïmbda
 = 
Ïmbda
;

1065 #ià
JVET_K0390_RATE_CTRL


1066 
m_LCUs
[
LCUIdx
].
m_aùu®SSE
 = m_LCUs[LCUIdx].
m_aùu®MSE
 * m_LCUs[LCUIdx].
m_numb”OfPix–
;

1069 
m_LCULeá
--;

1070 
m_b™sLeá
 -ð
b™s
;

1071 
m_pix–sLeá
 -ð
m_LCUs
[
LCUIdx
].
m_numb”OfPix–
;

1073 iàÐ!
upd©eLCUP¬am‘”
 )

1078 iàÐ!
m_’cRCSeq
->
	`g‘U£LCUS•¬©eMod–
() )

1083 
DoubË
 
®pha
 = 
m_’cRCSeq
->
	`g‘LCUP¬a
Ð
m_äameLev–
, 
LCUIdx
 ).
m_®pha
;

1084 
DoubË
 
b‘a
 = 
m_’cRCSeq
->
	`g‘LCUP¬a
Ð
m_äameLev–
, 
LCUIdx
 ).
m_b‘a
;

1086 
IÁ
 
LCUAùu®B™s
 = 
m_LCUs
[
LCUIdx
].
m_aùu®B™s
;

1087 
IÁ
 
LCUTÙ®Pix–s
 = 
m_LCUs
[
LCUIdx
].
m_numb”OfPix–
;

1088 
DoubË
 
bµ
 = ( DoubË )
LCUAùu®B™s
/ÐDoubË )
LCUTÙ®Pix–s
;

1089 
DoubË
 
ÿlLambda
 = 
®pha
 * 
	`pow
Ð
bµ
, 
b‘a
 );

1090 
DoubË
 
šputLambda
 = 
m_LCUs
[
LCUIdx
].
m_Ïmbda
;

1092 ifÐ
šputLambda
 < 0.01 || 
ÿlLambda
 < 0.01 || 
bµ
 < 0.0001 )

1094 
®pha
 *ðÐ1.0 - 
m_’cRCSeq
->
	`g‘AÍhaUpd©e
() / 2.0 );

1095 
b‘a
 *ðÐ1.0 - 
m_’cRCSeq
->
	`g‘B‘aUpd©e
() / 2.0 );

1097 
®pha
 = 
	`Cl3
Ð
g_RCAÍhaMšV®ue
, 
g_RCAÍhaMaxV®ue
,‡lpha );

1098 
b‘a
 = 
	`Cl3
Ð
g_RCB‘aMšV®ue
, 
g_RCB‘aMaxV®ue
, beta );

1100 
TRCP¬am‘”
 
rcP¬a
;

1101 
rcP¬a
.
m_®pha
 = 
®pha
;

1102 
rcP¬a
.
m_b‘a
 = 
b‘a
;

1103 #ià
JVET_M0600_RATE_CTRL


1104 
rcP¬a
.
m_skR©io
 = 
skR©io
;

1106 #ià
JVET_K0390_RATE_CTRL


1107 ià(
QP
 =ð
g_RCInv®idQPV®ue
 && 
m_’cRCSeq
->
	`g‘Ad­tiveB™s
() == 1)

1109 
rcP¬a
.
m_v®idPix
 = 0;

1113 
rcP¬a
.
m_v®idPix
 = 
LCUTÙ®Pix–s
;

1116 
DoubË
 
MSE
 = 
m_LCUs
[
LCUIdx
].
m_aùu®MSE
;

1117 
DoubË
 
upd©edK
 = 
bµ
 * 
šputLambda
 / 
MSE
;

1118 
DoubË
 
upd©edC
 = 
MSE
 / 
	`pow
(
bµ
, -
upd©edK
);

1119 
rcP¬a
.
m_®pha
 = 
upd©edC
 * 
upd©edK
;

1120 
rcP¬a
.
m_b‘a
 = -
upd©edK
 - 1.0;

1122 ià(
bµ
 > 0 && 
upd©edK
 > 0.0001)

1124 
m_’cRCSeq
->
	`£tLCUP¬a
(
m_äameLev–
, 
LCUIdx
, 
rcP¬a
);

1128 
rcP¬a
.
m_®pha
 = 
	`Cl3
(0.0001, 
g_RCAÍhaMaxV®ue
,„cPara.m_alpha);

1129 
m_’cRCSeq
->
	`£tLCUP¬a
(
m_äameLev–
, 
LCUIdx
, 
rcP¬a
);

1132 
m_’cRCSeq
->
	`£tLCUP¬a
Ð
m_äameLev–
, 
LCUIdx
, 
rcP¬a
 );

1137 
ÿlLambda
 = 
	`Cl3
Ð
šputLambda
 / 10.0, inputLambda * 10.0, calLambda );

1138 
®pha
 +ð
m_’cRCSeq
->
	`g‘AÍhaUpd©e
(è* ( 
	`log
Ð
šputLambda
 ) -†ogÐ
ÿlLambda
 ) ) *‡lpha;

1139 
DoubË
 
Êbµ
 = 
	`log
Ð
bµ
 );

1140 
Êbµ
 = 
	`Cl3
( -5.0, -0.1,†nbpp );

1141 
b‘a
 +ð
m_’cRCSeq
->
	`g‘B‘aUpd©e
(è* ( 
	`log
Ð
šputLambda
 ) -†ogÐ
ÿlLambda
 ) ) * 
Êbµ
;

1143 
®pha
 = 
	`Cl3
Ð
g_RCAÍhaMšV®ue
, 
g_RCAÍhaMaxV®ue
,‡lpha );

1144 
b‘a
 = 
	`Cl3
Ð
g_RCB‘aMšV®ue
, 
g_RCB‘aMaxV®ue
, beta );

1146 
TRCP¬am‘”
 
rcP¬a
;

1147 
rcP¬a
.
m_®pha
 = 
®pha
;

1148 
rcP¬a
.
m_b‘a
 = 
b‘a
;

1149 #ià
JVET_M0600_RATE_CTRL


1150 
rcP¬a
.
m_skR©io
 = 
skR©io
;

1152 #ià
JVET_K0390_RATE_CTRL


1153 ià(
QP
 =ð
g_RCInv®idQPV®ue
 && 
m_’cRCSeq
->
	`g‘Ad­tiveB™s
() == 1)

1155 
rcP¬a
.
m_v®idPix
 = 0;

1159 
rcP¬a
.
m_v®idPix
 = 
LCUTÙ®Pix–s
;

1162 
DoubË
 
MSE
 = 
m_LCUs
[
LCUIdx
].
m_aùu®MSE
;

1163 
DoubË
 
upd©edK
 = 
bµ
 * 
šputLambda
 / 
MSE
;

1164 
DoubË
 
upd©edC
 = 
MSE
 / 
	`pow
(
bµ
, -
upd©edK
);

1165 
rcP¬a
.
m_®pha
 = 
upd©edC
 * 
upd©edK
;

1166 
rcP¬a
.
m_b‘a
 = -
upd©edK
 - 1.0;

1168 ià(
bµ
 > 0 && 
upd©edK
 > 0.0001)

1170 
m_’cRCSeq
->
	`£tLCUP¬a
(
m_äameLev–
, 
LCUIdx
, 
rcP¬a
);

1174 
rcP¬a
.
m_®pha
 = 
	`Cl3
(0.0001, 
g_RCAÍhaMaxV®ue
,„cPara.m_alpha);

1175 
m_’cRCSeq
->
	`£tLCUP¬a
(
m_äameLev–
, 
LCUIdx
, 
rcP¬a
);

1178 
m_’cRCSeq
->
	`£tLCUP¬a
Ð
m_äameLev–
, 
LCUIdx
, 
rcP¬a
 );

1180 
	}
}

1182 
DoubË
 
	gTEncRCPic
::
	$ÿlAv”ageQP
()

1184 
IÁ
 
tÙ®QPs
 = 0;

1185 
IÁ
 
numTÙ®LCUs
 = 0;

1187 
IÁ
 
i
;

1188  
i
=0; i<
m_numb”OfLCU
; i++ )

1190 iàÐ
m_LCUs
[
i
].
m_QP
 > 0 )

1192 
tÙ®QPs
 +ð
m_LCUs
[
i
].
m_QP
;

1193 
numTÙ®LCUs
++;

1197 
DoubË
 
avgQP
 = 0.0;

1198 iàÐ
numTÙ®LCUs
 == 0 )

1200 
avgQP
 = 
g_RCInv®idQPV®ue
;

1204 
avgQP
 = ((
DoubË
)
tÙ®QPs
è/ ((DoubË)
numTÙ®LCUs
);

1206  
avgQP
;

1207 
	}
}

1209 
DoubË
 
	gTEncRCPic
::
	$ÿlAv”ageLambda
()

1211 
DoubË
 
tÙ®Lambdas
 = 0.0;

1212 
IÁ
 
numTÙ®LCUs
 = 0;

1213 #ià
JVET_K0390_RATE_CTRL


1214 
DoubË
 
tÙ®SSE
 = 0.0;

1215 
IÁ
 
tÙ®Pix–s
 = 0;

1217 
IÁ
 
i
;

1218  
i
=0; i<
m_numb”OfLCU
; i++ )

1220 iàÐ
m_LCUs
[
i
].
m_Ïmbda
 > 0.01 )

1222 #ià
JVET_K0390_RATE_CTRL


1223 ià(
m_LCUs
[
i
].
m_QP
 > 0 || 
m_’cRCSeq
->
	`g‘Ad­tiveB™s
() != 1)

1225 
m_v®idPix–sInPic
 +ð
m_LCUs
[
i
].
m_numb”OfPix–
;

1227 
tÙ®Lambdas
 +ð
	`log
(
m_LCUs
[
i
].
m_Ïmbda
);

1228 
numTÙ®LCUs
++;

1231 
tÙ®Lambdas
 +ð
	`log
Ð
m_LCUs
[
i
].
m_Ïmbda
 );

1232 
numTÙ®LCUs
++;

1235 #ià
JVET_K0390_RATE_CTRL


1236 ià(
m_LCUs
[
i
].
m_QP
 > 0 || 
m_’cRCSeq
->
	`g‘Ad­tiveB™s
() != 1)

1238 
tÙ®SSE
 +ð
m_LCUs
[
i
].
m_aùu®SSE
;

1239 
tÙ®Pix–s
 +ð
m_LCUs
[
i
].
m_numb”OfPix–
;

1244 #ià
JVET_K0390_RATE_CTRL


1245 
	`£tPicMSE
(
tÙ®Pix–s
 > 0 ? 
tÙ®SSE
 / (
DoubË
)totalPixels : 1.0);

1248 
DoubË
 
avgLambda
;

1249 ifÐ
numTÙ®LCUs
 == 0 )

1251 
avgLambda
 = -1.0;

1255 
avgLambda
 = 
	`pow
Ð2.7183, 
tÙ®Lambdas
 / 
numTÙ®LCUs
 );

1257  
avgLambda
;

1258 
	}
}

1261 
Void
 
	gTEncRCPic
::
	$upd©eAá”Piùu»
Ð
IÁ
 
aùu®H—d”B™s
, IÁ 
aùu®TÙ®B™s
, 
DoubË
 
av”ageQP
, DoubË 
av”ageLambda
, 
SliûTy³
 
eSliûTy³
)

1263 
m_picAùu®H—d”B™s
 = 
aùu®H—d”B™s
;

1264 
m_picAùu®B™s
 = 
aùu®TÙ®B™s
;

1265 iàÐ
av”ageQP
 > 0.0 )

1267 
m_picQP
 = 
	`IÁ
Ð
av”ageQP
 + 0.5 );

1271 
m_picQP
 = 
g_RCInv®idQPV®ue
;

1273 
m_picLambda
 = 
av”ageLambda
;

1275 
DoubË
 
®pha
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_®pha
;

1276 
DoubË
 
b‘a
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_b‘a
;

1277 #ià
JVET_M0600_RATE_CTRL


1278 
DoubË
 
skR©io
 = 0;

1279 
IÁ
 
numOfSkPix–
 = 0;

1280 
IÁ
 
LCUIdx
 = 0; LCUIdx < 
m_numb”OfLCU
; LCUIdx++)

1282 
numOfSkPix–
 +ð
	`IÁ
(
m_’cRCSeq
->
	`g‘LCUP¬a
(
m_äameLev–
, 
LCUIdx
).
m_skR©io
*
m_LCUs
[LCUIdx].
m_numb”OfPix–
);

1284 
skR©io
 = (
DoubË
)
numOfSkPix–
 / (DoubË)
m_numb”OfPix–
;

1286 ià(
eSliûTy³
 =ð
I_SLICE
)

1288 
	`upd©eAÍhaB‘aIÁ¿
(&
®pha
, &
b‘a
);

1293 
DoubË
 
picAùu®B™s
 = ( DoubË )
m_picAùu®B™s
;

1294 #ià
JVET_K0390_RATE_CTRL


1295 
DoubË
 
picAùu®Bµ
 = 
picAùu®B™s
 / (DoubË)
m_v®idPix–sInPic
;

1297 
DoubË
 
picAùu®Bµ
 = 
picAùu®B™s
/(DoubË)
m_numb”OfPix–
;

1299 
DoubË
 
ÿlLambda
 = 
®pha
 * 
	`pow
Ð
picAùu®Bµ
, 
b‘a
 );

1300 
DoubË
 
šputLambda
 = 
m_picLambda
;

1302 iàÐ
šputLambda
 < 0.01 || 
ÿlLambda
 < 0.01 || 
picAùu®Bµ
 < 0.0001 )

1304 
®pha
 *ðÐ1.0 - 
m_’cRCSeq
->
	`g‘AÍhaUpd©e
() / 2.0 );

1305 
b‘a
 *ðÐ1.0 - 
m_’cRCSeq
->
	`g‘B‘aUpd©e
() / 2.0 );

1307 
®pha
 = 
	`Cl3
Ð
g_RCAÍhaMšV®ue
, 
g_RCAÍhaMaxV®ue
,‡lpha );

1308 
b‘a
 = 
	`Cl3
Ð
g_RCB‘aMšV®ue
, 
g_RCB‘aMaxV®ue
, beta );

1310 
TRCP¬am‘”
 
rcP¬a
;

1311 
rcP¬a
.
m_®pha
 = 
®pha
;

1312 
rcP¬a
.
m_b‘a
 = 
b‘a
;

1313 #ià
JVET_M0600_RATE_CTRL


1314 
rcP¬a
.
m_skR©io
 = 
skR©io
;

1316 #ià
JVET_K0390_RATE_CTRL


1317 
DoubË
 
avgMSE
 = 
	`g‘PicMSE
();

1318 
DoubË
 
upd©edK
 = 
picAùu®Bµ
 * 
av”ageLambda
 / 
avgMSE
;

1319 
DoubË
 
upd©edC
 = 
avgMSE
 / 
	`pow
(
picAùu®Bµ
, -
upd©edK
);

1321 ià(
m_äameLev–
 > 0)

1323 
rcP¬a
.
m_®pha
 = 
upd©edC
 * 
upd©edK
;

1324 
rcP¬a
.
m_b‘a
 = -
upd©edK
 - 1.0;

1327 
rcP¬a
.
m_v®idPix
 = 
m_v®idPix–sInPic
;

1329 ià(
m_v®idPix–sInPic
 > 0)

1331 
m_’cRCSeq
->
	`£tPicP¬a
(
m_äameLev–
, 
rcP¬a
);

1334 
m_’cRCSeq
->
	`£tPicP¬a
Ð
m_äameLev–
, 
rcP¬a
 );

1340 
ÿlLambda
 = 
	`Cl3
Ð
šputLambda
 / 10.0, inputLambda * 10.0, calLambda );

1341 
®pha
 +ð
m_’cRCSeq
->
	`g‘AÍhaUpd©e
(è* ( 
	`log
Ð
šputLambda
 ) -†ogÐ
ÿlLambda
 ) ) *‡lpha;

1342 
DoubË
 
Êbµ
 = 
	`log
Ð
picAùu®Bµ
 );

1343 
Êbµ
 = 
	`Cl3
( -5.0, -0.1,†nbpp );

1345 
b‘a
 +ð
m_’cRCSeq
->
	`g‘B‘aUpd©e
(è* ( 
	`log
Ð
šputLambda
 ) -†ogÐ
ÿlLambda
 ) ) * 
Êbµ
;

1347 
®pha
 = 
	`Cl3
Ð
g_RCAÍhaMšV®ue
, 
g_RCAÍhaMaxV®ue
,‡lpha );

1348 
b‘a
 = 
	`Cl3
Ð
g_RCB‘aMšV®ue
, 
g_RCB‘aMaxV®ue
, beta );

1351 
TRCP¬am‘”
 
rcP¬a
;

1352 
rcP¬a
.
m_®pha
 = 
®pha
;

1353 
rcP¬a
.
m_b‘a
 = 
b‘a
;

1354 #ià
JVET_M0600_RATE_CTRL


1355 
rcP¬a
.
m_skR©io
 = 
skR©io
;

1358 #ià
JVET_K0390_RATE_CTRL


1359 
DoubË
 
picAùu®Bµ
 = (DoubË)
m_picAùu®B™s
 / (DoubË)
m_v®idPix–sInPic
;

1361 
DoubË
 
avgMSE
 = 
	`g‘PicMSE
();

1362 
DoubË
 
upd©edK
 = 
picAùu®Bµ
 * 
av”ageLambda
 / 
avgMSE
;

1363 
DoubË
 
upd©edC
 = 
avgMSE
 / 
	`pow
(
picAùu®Bµ
, -
upd©edK
);

1364 ià(
m_äameLev–
 > 0)

1366 
rcP¬a
.
m_®pha
 = 
upd©edC
 * 
upd©edK
;

1367 
rcP¬a
.
m_b‘a
 = -
upd©edK
 - 1.0;

1370 
rcP¬a
.
m_v®idPix
 = 
m_v®idPix–sInPic
;

1372 ià(
m_v®idPix–sInPic
 > 0)

1374 
m_’cRCSeq
->
	`£tPicP¬a
(
m_äameLev–
, 
rcP¬a
);

1377 
m_’cRCSeq
->
	`£tPicP¬a
Ð
m_äameLev–
, 
rcP¬a
 );

1380 iàÐ
m_äameLev–
 == 1 )

1382 
DoubË
 
cu¼Lambda
 = 
	`Cl3
Ð0.1, 10000.0, 
m_picLambda
 );

1383 
DoubË
 
upd©eLa¡Lambda
 = 
g_RCWeightHi¡ÜyLambda
 * 
m_’cRCSeq
->
	`g‘La¡Lambda
(è+ 
g_RCWeightCu¼’tLambda
 * 
cu¼Lambda
;

1384 
m_’cRCSeq
->
	`£tLa¡Lambda
Ð
upd©eLa¡Lambda
 );

1386 
	}
}

1388 
IÁ
 
	gTEncRCPic
::
	$g‘RefšeB™sFÜIÁ¿
Ð
IÁ
 
ÜgB™s
 )

1390 
DoubË
 
®pha
=0.25, 
b‘a
=0.5582;

1391 
IÁ
 
iIÁ¿B™s
;

1393 ià(
ÜgB™s
*40 < 
m_numb”OfPix–
)

1395 
®pha
=0.25;

1399 
®pha
=0.30;

1402 
iIÁ¿B™s
 = (
IÁ
)(
®pha
* 
	`pow
(
m_tÙ®Co¡IÁ¿
*4.0/(
DoubË
)
ÜgB™s
, 
b‘a
)*(Double)orgBits+0.5);

1404  
iIÁ¿B™s
;

1405 
	}
}

1407 
DoubË
 
	gTEncRCPic
::
	$ÿlcuÏ‹LambdaIÁ¿
(
DoubË
 
®pha
, DoubË 
b‘a
, DoubË 
MADP”Pix–
, DoubË 
b™sP”Pix–
)

1409  ( (
®pha
/256.0è* 
	`pow
Ð
MADP”Pix–
/
b™sP”Pix–
, 
b‘a
 ) );

1410 
	}
}

1412 
Void
 
	gTEncRCPic
::
	$upd©eAÍhaB‘aIÁ¿
(
DoubË
 *
®pha
, DoubË *
b‘a
)

1414 
DoubË
 
Êbµ
 = 
	`log
(
	`pow
(
m_tÙ®Co¡IÁ¿
 / (DoubË)
m_numb”OfPix–
, 
BETA1
));

1415 
DoubË
 
diffLambda
 = (*
b‘a
)*(
	`log
((DoubË)
m_picAùu®B™s
)-log((DoubË)
m_rg‘B™s
));

1417 
diffLambda
 = 
	`Cl3
(-0.125, 0.125, 0.25*diffLambda);

1418 *
®pha
 = (*®phaè* 
	`exp
(
diffLambda
);

1419 *
b‘a
 = (*b‘aè+ 
diffLambda
 / 
Êbµ
;

1420 
	}
}

1423 
Void
 
	gTEncRCPic
::
	$g‘LCUIn™T¬g‘B™s
()

1425 
IÁ
 
iAvgB™s
 = 0;

1427 
m_»maššgCo¡IÁ¿
 = 
m_tÙ®Co¡IÁ¿
;

1428 
IÁ
 
i
=
m_numb”OfLCU
-1; i>=0; i--)

1430 
iAvgB™s
 +ð
	`IÁ
(
m_rg‘B™s
 * 
	`g‘LCU
(
i
).
m_co¡IÁ¿
/
m_tÙ®Co¡IÁ¿
);

1431 
	`g‘LCU
(
i
).
m_rg‘B™sLeá
 = 
iAvgB™s
;

1433 
	}
}

1436 
DoubË
 
	gTEncRCPic
::
	$g‘LCUE¡LambdaAndQP
(
DoubË
 
bµ
, 
IÁ
 
þPicQP
, IÁ *
e¡QP
)

1438 
IÁ
 
LCUIdx
 = 
	`g‘LCUCoded
();

1440 
DoubË
 
®pha
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_®pha
;

1441 
DoubË
 
b‘a
 = 
m_’cRCSeq
->
	`g‘PicP¬a
Ð
m_äameLev–
 ).
m_b‘a
;

1443 
DoubË
 
co¡P”Pix–
 = 
	`g‘LCU
(
LCUIdx
).
m_co¡IÁ¿
/(DoubË)g‘LCU(LCUIdx).
m_numb”OfPix–
;

1444 
co¡P”Pix–
 = 
	`pow
(co¡P”Pix–, 
BETA1
);

1445 
DoubË
 
e¡Lambda
 = 
	`ÿlcuÏ‹LambdaIÁ¿
(
®pha
, 
b‘a
, 
co¡P”Pix–
, 
bµ
);

1447 
IÁ
 
þNeighbourQP
 = 
g_RCInv®idQPV®ue
;

1448 
IÁ
 
i
=
LCUIdx
-1; i>=0; i--)

1450 ià((
	`g‘LCU
(
i
)).
m_QP
 > 
g_RCInv®idQPV®ue
)

1452 
þNeighbourQP
 = 
	`g‘LCU
(
i
).
m_QP
;

1457 
IÁ
 
mšQP
 = 
þPicQP
 - 2;

1458 
IÁ
 
maxQP
 = 
þPicQP
 + 2;

1460 iàÐ
þNeighbourQP
 > 
g_RCInv®idQPV®ue
 )

1462 
maxQP
 = 
	`mš
(
þNeighbourQP
 + 1, maxQP);

1463 
mšQP
 = 
	`max
(
þNeighbourQP
 - 1, minQP);

1466 
DoubË
 
maxLambda
=
	`exp
(((DoubË)(
maxQP
+0.49)-13.7122)/4.2005);

1467 
DoubË
 
mšLambda
=
	`exp
(((DoubË)(
mšQP
-0.49)-13.7122)/4.2005);

1469 
e¡Lambda
 = 
	`Cl3
(
mšLambda
, 
maxLambda
,ƒstLambda);

1470 #ià
JVET_K0390_RATE_CTRL


1472 
e¡Lambda
 = 
	`DoubË
(
	`št64_t
Ó¡Lambd¨* (
DoubË
)
LAMBDA_PREC
 + 0.5)) / (Double)LAMBDA_PREC;

1474 *
e¡QP
 = 
	`IÁ
Ð4.2005 * 
	`log
(
e¡Lambda
) + 13.7122 + 0.5 );

1475 *
e¡QP
 = 
	`Cl3
(
mšQP
, 
maxQP
, *estQP);

1477  
e¡Lambda
;

1478 
	}
}

1480 
	gTEncR©eCŒl
::
	$TEncR©eCŒl
()

1482 
m_’cRCSeq
 = 
NULL
;

1483 
m_’cRCGOP
 = 
NULL
;

1484 
m_’cRCPic
 = 
NULL
;

1485 
	}
}

1487 
	gTEncR©eCŒl
::~
	$TEncR©eCŒl
()

1489 
	`de¡roy
();

1490 
	}
}

1492 
Void
 
	gTEncR©eCŒl
::
	$de¡roy
()

1494 iàÐ
m_’cRCSeq
 !ð
NULL
 )

1496 
d–‘e
 
m_’cRCSeq
;

1497 
m_’cRCSeq
 = 
NULL
;

1499 iàÐ
m_’cRCGOP
 !ð
NULL
 )

1501 
d–‘e
 
m_’cRCGOP
;

1502 
m_’cRCGOP
 = 
NULL
;

1504  
m_li¡RCPiùu»s
.
	`size
() > 0 )

1506 
TEncRCPic
* 
p
 = 
m_li¡RCPiùu»s
.
	`äÚt
();

1507 
m_li¡RCPiùu»s
.
	`pÝ_äÚt
();

1508 
d–‘e
 
p
;

1510 
	}
}

1512 
Void
 
	gTEncR©eCŒl
::
	$š™
Ð
IÁ
 
tÙ®F¿mes
, IÁ 
rg‘B™¿‹
, IÁ 
äameR©e
, IÁ 
GOPSize
, IÁ 
picWidth
, IÁ 
picHeight
, IÁ 
LCUWidth
, IÁ 
LCUHeight
, IÁ 
k“pH›rB™s
, 
BoÞ
 
u£LCUS•¬©eMod–
, 
GOPEÁry
 
GOPLi¡
[
MAX_GOP
] )

1514 
	`de¡roy
();

1516 
BoÞ
 
isLowd–ay
 = 
Œue
;

1517  
IÁ
 
i
=0; i<
GOPSize
-1; i++ )

1519 iàÐ
GOPLi¡
[
i
].
m_POC
 > GOPList[i+1].m_POC )

1521 
isLowd–ay
 = 
çl£
;

1526 
IÁ
 
numb”OfLev–
 = 1;

1527 
IÁ
 
ad­tiveB™
 = 0;

1528 iàÐ
k“pH›rB™s
 > 0 )

1530 
numb”OfLev–
 = 
	`IÁ
Ð
	`log
((
DoubË
)
GOPSize
)/log(2.0) + 0.5 ) + 1;

1532 #ià
JVET_K0390_RATE_CTRL


1533 ià(!
isLowd–ay
 && (
GOPSize
 == 16 || GOPSize == 8))

1535 iàÐ!
isLowd–ay
 && 
GOPSize
 == 8 )

1538 
numb”OfLev–
 = 
	`IÁ
Ð
	`log
((
DoubË
)
GOPSize
)/log(2.0) + 0.5 ) + 1;

1540 
numb”OfLev–
++;

1541 
numb”OfLev–
++;

1544 
IÁ
* 
b™sR©io
;

1545 
b™sR©io
 = 
Ãw
 
IÁ
[ 
GOPSize
 ];

1546  
IÁ
 
i
=0; i<
GOPSize
; i++ )

1548 
b™sR©io
[
i
] = 10;

1549 iàÐ!
GOPLi¡
[
i
].
m_»fPic
 )

1551 
b™sR©io
[
i
] = 2;

1555 iàÐ
k“pH›rB™s
 > 0 )

1557 
DoubË
 
bµ
 = (DoubË)Ð
rg‘B™¿‹
 / (DoubË)Ð
äameR©e
*
picWidth
*
picHeight
 ) );

1558 iàÐ
GOPSize
 =ð4 && 
isLowd–ay
 )

1560 iàÐ
bµ
 > 0.2 )

1562 
b™sR©io
[0] = 2;

1563 
b™sR©io
[1] = 3;

1564 
b™sR©io
[2] = 2;

1565 
b™sR©io
[3] = 6;

1567 ifÐ
bµ
 > 0.1 )

1569 
b™sR©io
[0] = 2;

1570 
b™sR©io
[1] = 3;

1571 
b™sR©io
[2] = 2;

1572 
b™sR©io
[3] = 10;

1574 iàÐ
bµ
 > 0.05 )

1576 
b™sR©io
[0] = 2;

1577 
b™sR©io
[1] = 3;

1578 
b™sR©io
[2] = 2;

1579 
b™sR©io
[3] = 12;

1583 
b™sR©io
[0] = 2;

1584 
b™sR©io
[1] = 3;

1585 
b™sR©io
[2] = 2;

1586 
b™sR©io
[3] = 14;

1589 iàÐ
k“pH›rB™s
 == 2 )

1591 
ad­tiveB™
 = 1;

1594 iàÐ
GOPSize
 =ð8 && !
isLowd–ay
 )

1596 iàÐ
bµ
 > 0.2 )

1598 
b™sR©io
[0] = 15;

1599 
b™sR©io
[1] = 5;

1600 
b™sR©io
[2] = 4;

1601 
b™sR©io
[3] = 1;

1602 
b™sR©io
[4] = 1;

1603 
b™sR©io
[5] = 4;

1604 
b™sR©io
[6] = 1;

1605 
b™sR©io
[7] = 1;

1607 iàÐ
bµ
 > 0.1 )

1609 
b™sR©io
[0] = 20;

1610 
b™sR©io
[1] = 6;

1611 
b™sR©io
[2] = 4;

1612 
b™sR©io
[3] = 1;

1613 
b™sR©io
[4] = 1;

1614 
b™sR©io
[5] = 4;

1615 
b™sR©io
[6] = 1;

1616 
b™sR©io
[7] = 1;

1618 iàÐ
bµ
 > 0.05 )

1620 
b™sR©io
[0] = 25;

1621 
b™sR©io
[1] = 7;

1622 
b™sR©io
[2] = 4;

1623 
b™sR©io
[3] = 1;

1624 
b™sR©io
[4] = 1;

1625 
b™sR©io
[5] = 4;

1626 
b™sR©io
[6] = 1;

1627 
b™sR©io
[7] = 1;

1631 
b™sR©io
[0] = 30;

1632 
b™sR©io
[1] = 8;

1633 
b™sR©io
[2] = 4;

1634 
b™sR©io
[3] = 1;

1635 
b™sR©io
[4] = 1;

1636 
b™sR©io
[5] = 4;

1637 
b™sR©io
[6] = 1;

1638 
b™sR©io
[7] = 1;

1641 iàÐ
k“pH›rB™s
 == 2 )

1643 
ad­tiveB™
 = 2;

1646 #ià
JVET_K0390_RATE_CTRL


1647 ià(
GOPSize
 =ð16 && !
isLowd–ay
)

1649 ià(
bµ
 > 0.2)

1651 
b™sR©io
[0] = 10;

1652 
b™sR©io
[1] = 8;

1653 
b™sR©io
[2] = 4;

1654 
b™sR©io
[3] = 2;

1655 
b™sR©io
[4] = 1;

1656 
b™sR©io
[5] = 1;

1657 
b™sR©io
[6] = 2;

1658 
b™sR©io
[7] = 1;

1659 
b™sR©io
[8] = 1;

1660 
b™sR©io
[9] = 4;

1661 
b™sR©io
[10] = 2;

1662 
b™sR©io
[11] = 1;

1663 
b™sR©io
[12] = 1;

1664 
b™sR©io
[13] = 2;

1665 
b™sR©io
[14] = 1;

1666 
b™sR©io
[15] = 1;

1668 ià(
bµ
 > 0.1)

1670 
b™sR©io
[0] = 15;

1671 
b™sR©io
[1] = 9;

1672 
b™sR©io
[2] = 4;

1673 
b™sR©io
[3] = 2;

1674 
b™sR©io
[4] = 1;

1675 
b™sR©io
[5] = 1;

1676 
b™sR©io
[6] = 2;

1677 
b™sR©io
[7] = 1;

1678 
b™sR©io
[8] = 1;

1679 
b™sR©io
[9] = 4;

1680 
b™sR©io
[10] = 2;

1681 
b™sR©io
[11] = 1;

1682 
b™sR©io
[12] = 1;

1683 
b™sR©io
[13] = 2;

1684 
b™sR©io
[14] = 1;

1685 
b™sR©io
[15] = 1;

1687 ià(
bµ
 > 0.05)

1689 
b™sR©io
[0] = 40;

1690 
b™sR©io
[1] = 17;

1691 
b™sR©io
[2] = 7;

1692 
b™sR©io
[3] = 2;

1693 
b™sR©io
[4] = 1;

1694 
b™sR©io
[5] = 1;

1695 
b™sR©io
[6] = 2;

1696 
b™sR©io
[7] = 1;

1697 
b™sR©io
[8] = 1;

1698 
b™sR©io
[9] = 7;

1699 
b™sR©io
[10] = 2;

1700 
b™sR©io
[11] = 1;

1701 
b™sR©io
[12] = 1;

1702 
b™sR©io
[13] = 2;

1703 
b™sR©io
[14] = 1;

1704 
b™sR©io
[15] = 1;

1708 
b™sR©io
[0] = 40;

1709 
b™sR©io
[1] = 15;

1710 
b™sR©io
[2] = 6;

1711 
b™sR©io
[3] = 3;

1712 
b™sR©io
[4] = 1;

1713 
b™sR©io
[5] = 1;

1714 
b™sR©io
[6] = 3;

1715 
b™sR©io
[7] = 1;

1716 
b™sR©io
[8] = 1;

1717 
b™sR©io
[9] = 6;

1718 
b™sR©io
[10] = 3;

1719 
b™sR©io
[11] = 1;

1720 
b™sR©io
[12] = 1;

1721 
b™sR©io
[13] = 3;

1722 
b™sR©io
[14] = 1;

1723 
b™sR©io
[15] = 1;

1726 ià(
k“pH›rB™s
 == 2)

1728 
ad­tiveB™
 = 3;

1734 
	`´štf
( "\n hierarchical bit‡llocation is‚ot support forhe specified coding structure currently.\n" );

1738 
IÁ
* 
GOPID2Lev–
 = 
Ãw
 IÁ[ 
GOPSize
 ];

1739  
IÁ
 
i
=0; i<
GOPSize
; i++ )

1741 
GOPID2Lev–
[
i
] = 1;

1742 iàÐ!
GOPLi¡
[
i
].
m_»fPic
 )

1744 
GOPID2Lev–
[
i
] = 2;

1748 iàÐ
k“pH›rB™s
 > 0 )

1750 iàÐ
GOPSize
 =ð4 && 
isLowd–ay
 )

1752 
GOPID2Lev–
[0] = 3;

1753 
GOPID2Lev–
[1] = 2;

1754 
GOPID2Lev–
[2] = 3;

1755 
GOPID2Lev–
[3] = 1;

1757 iàÐ
GOPSize
 =ð8 && !
isLowd–ay
 )

1759 
GOPID2Lev–
[0] = 1;

1760 
GOPID2Lev–
[1] = 2;

1761 
GOPID2Lev–
[2] = 3;

1762 
GOPID2Lev–
[3] = 4;

1763 
GOPID2Lev–
[4] = 4;

1764 
GOPID2Lev–
[5] = 3;

1765 
GOPID2Lev–
[6] = 4;

1766 
GOPID2Lev–
[7] = 4;

1768 #ià
JVET_K0390_RATE_CTRL


1769 ià(
GOPSize
 =ð16 && !
isLowd–ay
)

1771 
GOPID2Lev–
[0] = 1;

1772 
GOPID2Lev–
[1] = 2;

1773 
GOPID2Lev–
[2] = 3;

1774 
GOPID2Lev–
[3] = 4;

1775 
GOPID2Lev–
[4] = 5;

1776 
GOPID2Lev–
[5] = 5;

1777 
GOPID2Lev–
[6] = 4;

1778 
GOPID2Lev–
[7] = 5;

1779 
GOPID2Lev–
[8] = 5;

1780 
GOPID2Lev–
[9] = 3;

1781 
GOPID2Lev–
[10] = 4;

1782 
GOPID2Lev–
[11] = 5;

1783 
GOPID2Lev–
[12] = 5;

1784 
GOPID2Lev–
[13] = 4;

1785 
GOPID2Lev–
[14] = 5;

1786 
GOPID2Lev–
[15] = 5;

1791 iàÐ!
isLowd–ay
 && 
GOPSize
 == 8 )

1793 
GOPID2Lev–
[0] = 1;

1794 
GOPID2Lev–
[1] = 2;

1795 
GOPID2Lev–
[2] = 3;

1796 
GOPID2Lev–
[3] = 4;

1797 
GOPID2Lev–
[4] = 4;

1798 
GOPID2Lev–
[5] = 3;

1799 
GOPID2Lev–
[6] = 4;

1800 
GOPID2Lev–
[7] = 4;

1802 #ià
JVET_K0390_RATE_CTRL


1803 ià(
GOPSize
 =ð16 && !
isLowd–ay
)

1805 
GOPID2Lev–
[0] = 1;

1806 
GOPID2Lev–
[1] = 2;

1807 
GOPID2Lev–
[2] = 3;

1808 
GOPID2Lev–
[3] = 4;

1809 
GOPID2Lev–
[4] = 5;

1810 
GOPID2Lev–
[5] = 5;

1811 
GOPID2Lev–
[6] = 4;

1812 
GOPID2Lev–
[7] = 5;

1813 
GOPID2Lev–
[8] = 5;

1814 
GOPID2Lev–
[9] = 3;

1815 
GOPID2Lev–
[10] = 4;

1816 
GOPID2Lev–
[11] = 5;

1817 
GOPID2Lev–
[12] = 5;

1818 
GOPID2Lev–
[13] = 4;

1819 
GOPID2Lev–
[14] = 5;

1820 
GOPID2Lev–
[15] = 5;

1824 
m_’cRCSeq
 = 
Ãw
 
TEncRCSeq
;

1825 
m_’cRCSeq
->
	`ü—‹
Ð
tÙ®F¿mes
, 
rg‘B™¿‹
, 
äameR©e
, 
GOPSize
, 
picWidth
, 
picHeight
, 
LCUWidth
, 
LCUHeight
, 
numb”OfLev–
, 
u£LCUS•¬©eMod–
, 
ad­tiveB™
 );

1826 
m_’cRCSeq
->
	`š™B™sR©io
Ð
b™sR©io
 );

1827 
m_’cRCSeq
->
	`š™GOPID2Lev–
Ð
GOPID2Lev–
 );

1828 
m_’cRCSeq
->
	`š™PicP¬a
();

1829 iàÐ
u£LCUS•¬©eMod–
 )

1831 
m_’cRCSeq
->
	`š™LCUP¬a
();

1833 
m_CpbS©u¿tiÚEÇbËd
 = 
çl£
;

1834 
m_ýbSize
 = 
rg‘B™¿‹
;

1835 
m_ýbS‹
 = (
UIÁ
)(
m_ýbSize
*0.5f);

1836 
m_bufãršgR©e
 = (
IÁ
)(
rg‘B™¿‹
 / 
äameR©e
);

1838 
d–‘e
[] 
b™sR©io
;

1839 
d–‘e
[] 
GOPID2Lev–
;

1840 
	}
}

1842 
Void
 
	gTEncR©eCŒl
::
	$š™RCPic
Ð
IÁ
 
äameLev–
 )

1844 
m_’cRCPic
 = 
Ãw
 
TEncRCPic
;

1845 
m_’cRCPic
->
	`ü—‹
Ð
m_’cRCSeq
, 
m_’cRCGOP
, 
äameLev–
, 
m_li¡RCPiùu»s
 );

1846 
	}
}

1848 
Void
 
	gTEncR©eCŒl
::
	$š™RCGOP
Ð
IÁ
 
numb”OfPiùu»s
 )

1850 
m_’cRCGOP
 = 
Ãw
 
TEncRCGOP
;

1851 
m_’cRCGOP
->
	`ü—‹
Ð
m_’cRCSeq
, 
numb”OfPiùu»s
 );

1852 
	}
}

1854 
IÁ
 
	gTEncR©eCŒl
::
	$upd©eCpbS‹
(
IÁ
 
aùu®B™s
)

1856 
IÁ
 
ýbS‹
 = 1;

1858 
m_ýbS‹
 -ð
aùu®B™s
;

1859 ià(
m_ýbS‹
 < 0)

1861 
ýbS‹
 = -1;

1864 
m_ýbS‹
 +ð
m_bufãršgR©e
;

1865 ià(
m_ýbS‹
 > 
m_ýbSize
)

1867 
ýbS‹
 = 0;

1870  
ýbS‹
;

1871 
	}
}

1873 
Void
 
	gTEncR©eCŒl
::
	$š™HrdP¬am
(cÚ¡ 
TComHRD
* 
pcHrd
, 
IÁ
 
iF¿meR©e
, 
DoubË
 
fIn™ŸlCpbFuÎÃss
)

1875 
m_CpbS©u¿tiÚEÇbËd
 = 
Œue
;

1876 
m_ýbSize
 = (
pcHrd
->
	`g‘CpbSizeV®ueMšus1
(0, 0, 0è+ 1è<< (4 +…cHrd->
	`g‘CpbSizeSÿË
());

1877 
m_ýbS‹
 = (
UIÁ
)(
m_ýbSize
*
fIn™ŸlCpbFuÎÃss
);

1878 
m_bufãršgR©e
 = (
UIÁ
)(((
pcHrd
->
	`g‘B™R©eV®ueMšus1
(0, 0, 0è+ 1è<< (6 +…cHrd->
	`g‘B™R©eSÿË
())è/ 
iF¿meR©e
);

1879 
	`´štf
("\nHRD - [In™ŸÈCPB s‹ %6d] [CPB Siz%6d] [Bufãršg R©%6d]\n", 
m_ýbS‹
, 
m_ýbSize
, 
m_bufãršgR©e
);

1880 
	}
}

1882 
Void
 
	gTEncR©eCŒl
::
	$de¡royRCGOP
()

1884 
d–‘e
 
m_’cRCGOP
;

1885 
m_’cRCGOP
 = 
NULL
;

1886 
	}
}

	@source/Lib/TLibEncoder/TEncRateCtrl.h

38 #iâdeà
__TENCRATECTRL__


39 
	#__TENCRATECTRL__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


46 
	~"../TLibCommÚ/CommÚDef.h
"

47 
	~"../TLibCommÚ/TComD©aCU.h
"

49 
	~<veùÜ
>

50 
	~<®gÜ™hm
>

52 
usšg
 
Çme¥aû
 
	g¡d
;

57 
	~"../TLibEncod”/TEncCfg.h
"

58 
	~<li¡
>

59 
	~<ÿs£¹
>

61 cÚ¡ 
IÁ
 
	gg_RCInv®idQPV®ue
 = -999;

62 cÚ¡ 
IÁ
 
	gg_RCSmoÙhWšdowSize
 = 40;

63 cÚ¡ 
IÁ
 
	gg_RCMaxPicLi¡Size
 = 32;

64 cÚ¡ 
DoubË
 
	gg_RCWeightPicT¬g‘B™InGOP
 = 0.9;

65 cÚ¡ 
DoubË
 
	gg_RCWeightPicR¬g‘B™InBufãr
 = 1.0 - 
g_RCWeightPicT¬g‘B™InGOP
;

66 cÚ¡ 
IÁ
 
	gg_RCI‹¿tiÚNum
 = 20;

67 cÚ¡ 
DoubË
 
	gg_RCWeightHi¡ÜyLambda
 = 0.5;

68 cÚ¡ 
DoubË
 
	gg_RCWeightCu¼’tLambda
 = 1.0 - 
g_RCWeightHi¡ÜyLambda
;

69 cÚ¡ 
IÁ
 
	gg_RCLCUSmoÙhWšdowSize
 = 4;

70 cÚ¡ 
DoubË
 
	gg_RCAÍhaMšV®ue
 = 0.05;

71 cÚ¡ 
DoubË
 
	gg_RCAÍhaMaxV®ue
 = 500.0;

72 cÚ¡ 
DoubË
 
	gg_RCB‘aMšV®ue
 = -3.0;

73 cÚ¡ 
DoubË
 
	gg_RCB‘aMaxV®ue
 = -0.1;

74 #ià
JVET_K0390_RATE_CTRL


75 cÚ¡ 
IÁ
 
	gLAMBDA_PREC
 = 1000000;

78 
	#ALPHA
 6.7542;

	)

79 
	#BETA1
 1.2517

	)

80 
	#BETA2
 1.7860

	)

82 
	sTRCLCU


84 
IÁ
 
	mm_aùu®B™s
;

85 
IÁ
 
	mm_QP
;

86 
IÁ
 
	mm_rg‘B™s
;

87 
DoubË
 
	mm_Ïmbda
;

88 
DoubË
 
	mm_b™Weight
;

89 
IÁ
 
	mm_numb”OfPix–
;

90 
DoubË
 
	mm_co¡IÁ¿
;

91 
IÁ
 
	mm_rg‘B™sLeá
;

92 #ià
JVET_K0390_RATE_CTRL


93 
DoubË
 
	mm_aùu®SSE
;

94 
DoubË
 
	mm_aùu®MSE
;

98 
	sTRCP¬am‘”


100 
DoubË
 
	mm_®pha
;

101 
DoubË
 
	mm_b‘a
;

102 #ià
JVET_K0390_RATE_CTRL


103 
IÁ
 
	mm_v®idPix
;

105 #ià
JVET_M0600_RATE_CTRL


106 
DoubË
 
	mm_skR©io
;

110 þas 
	cTEncRCSeq


112 
	mpublic
:

113 
TEncRCSeq
();

114 ~
TEncRCSeq
();

116 
	mpublic
:

117 
Void
 
ü—‹
Ð
IÁ
 
tÙ®F¿mes
, IÁ 
rg‘B™¿‹
, IÁ 
äameR©e
, IÁ 
GOPSize
, IÁ 
picWidth
, IÁ 
picHeight
, IÁ 
LCUWidth
, IÁ 
LCUHeight
, IÁ 
numb”OfLev–
, 
BoÞ
 
u£LCUS•¬©eMod–
, IÁ 
ad­tiveB™
 );

118 
Void
 
de¡roy
();

119 
Void
 
š™B™sR©io
Ð
IÁ
 
b™sR©io
[] );

120 
Void
 
š™GOPID2Lev–
Ð
IÁ
 
GOPID2Lev–
[] );

121 
Void
 
š™PicP¬a
Ð
TRCP¬am‘”
* 
picP¬a
 = 
NULL
 );

122 
Void
 
š™LCUP¬a
Ð
TRCP¬am‘”
** 
LCUP¬a
 = 
NULL
 );

123 
Void
 
upd©eAá”Pic
 ( 
IÁ
 
b™s
 );

124 
Void
 
£tAÎB™R©io
Ð
DoubË
 
basicLambda
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
 );

126 
	mpublic
:

127 
IÁ
 
	$g‘TÙ®F¿mes
(è{  
m_tÙ®F¿mes
; }

128 
IÁ
 
	$g‘T¬g‘R©e
(è{  
m_rg‘R©e
; 
	}
}

129 
IÁ
 
	$g‘F¿meR©e
(è{  
m_äameR©e
; 
	}
}

130 
IÁ
 
	$g‘GOPSize
(è{  
m_GOPSize
; 
	}
}

131 
IÁ
 
	$g‘PicWidth
(è{  
m_picWidth
; 
	}
}

132 
IÁ
 
	$g‘PicHeight
(è{  
m_picHeight
; 
	}
}

133 
IÁ
 
	$g‘LCUWidth
(è{  
m_LCUWidth
; 
	}
}

134 
IÁ
 
	$g‘LCUHeight
(è{  
m_LCUHeight
; 
	}
}

135 
IÁ
 
	$g‘Numb”OfLev–
(è{  
m_numb”OfLev–
; 
	}
}

136 
IÁ
 
	$g‘Av”ageB™s
(è{  
m_av”ageB™s
; 
	}
}

137 
IÁ
 
	$g‘LeáAv”ageB™s
(è{ 
	`as£¹
Ð
m_äamesLeá
 > 0 );  (
IÁ
)(
m_b™sLeá
 / m_äamesLeá); 
	}
}

138 
BoÞ
 
	$g‘U£LCUS•¬©eMod–
(è{  
m_u£LCUS•¬©eMod–
; 
	}
}

140 
IÁ
 
	$g‘NumPix–
(è{  
m_numb”OfPix–
; 
	}
}

141 
IÁ64
 
	$g‘T¬g‘B™s
(è{  
m_rg‘B™s
; 
	}
}

142 
IÁ
 
	$g‘Numb”OfLCU
(è{  
m_numb”OfLCU
; 
	}
}

143 
IÁ
* 
	$g‘B™R©io
(è{  
m_b™sR©io
; 
	}
}

144 
IÁ
 
	$g‘B™R©io
Ð
IÁ
 
idx
 ) { 
	`as£¹
Ðidx<
m_GOPSize
);  
m_b™sR©io
[idx]; 
	}
}

145 
IÁ
* 
	$g‘GOPID2Lev–
(è{  
m_GOPID2Lev–
; 
	}
}

146 
IÁ
 
	$g‘GOPID2Lev–
Ð
IÁ
 
ID
 ) { 
	`as£¹
ÐID < 
m_GOPSize
 );  
m_GOPID2Lev–
[ID]; 
	}
}

147 
TRCP¬am‘”
* 
	$g‘PicP¬a
(è{  
m_picP¬a
; 
	}
}

148 
TRCP¬am‘”
 
	$g‘PicP¬a
Ð
IÁ
 
Ëv–
 ) { 
	`as£¹
ÐËv– < 
m_numb”OfLev–
 );  
m_picP¬a
[Ëv–]; 
	}
}

149 
Void
 
	$£tPicP¬a
Ð
IÁ
 
Ëv–
, 
TRCP¬am‘”
 
·¿
 ) { 
	`as£¹
ÐËv– < 
m_numb”OfLev–
 ); 
m_picP¬a
[Ëv–] =…¬a; 
	}
}

150 
TRCP¬am‘”
** 
	$g‘LCUP¬a
(è{  
m_LCUP¬a
; 
	}
}

151 
TRCP¬am‘”
* 
	$g‘LCUP¬a
Ð
IÁ
 
Ëv–
 ) { 
	`as£¹
ÐËv– < 
m_numb”OfLev–
 );  
m_LCUP¬a
[Ëv–]; 
	}
}

152 
TRCP¬am‘”
 
	$g‘LCUP¬a
Ð
IÁ
 
Ëv–
, IÁ 
LCUIdx
 ) { 
	`as£¹
ÐLCUIdx < 
m_numb”OfLCU
 );  
	`g‘LCUP¬a
Öev–)[LCUIdx]; 
	}
}

153 
Void
 
	$£tLCUP¬a
Ð
IÁ
 
Ëv–
, IÁ 
LCUIdx
, 
TRCP¬am‘”
 
·¿
 ) { 
	`as£¹
ÐËv– < 
m_numb”OfLev–
 );‡s£¹ÐLCUIdx < 
m_numb”OfLCU
 ); 
m_LCUP¬a
[Ëv–][LCUIdx] =…¬a; 
	}
}

155 
IÁ
 
	$g‘F¿mesLeá
(è{  
m_äamesLeá
; 
	}
}

156 
IÁ64
 
	$g‘B™sLeá
(è{  
m_b™sLeá
; 
	}
}

158 
DoubË
 
	$g‘SeqBµ
(è{  
m_£qT¬g‘Bµ
; 
	}
}

159 
DoubË
 
	$g‘AÍhaUpd©e
(è{  
m_®phaUpd©e
; 
	}
}

160 
DoubË
 
	$g‘B‘aUpd©e
(è{  
m_b‘aUpd©e
; 
	}
}

162 
IÁ
 
	$g‘Ad­tiveB™s
(è{  
m_ad­tiveB™
; 
	}
}

163 
DoubË
 
	$g‘La¡Lambda
(è{  
m_Ï¡Lambda
; 
	}
}

164 
Void
 
	$£tLa¡Lambda
Ð
DoubË
 
Ïmdba
 ) { 
m_Ï¡Lambda
 =†amdba; 
	}
}

166 
	g´iv©e
:

167 
IÁ
 
m_tÙ®F¿mes
;

168 
IÁ
 
	gm_rg‘R©e
;

169 
IÁ
 
	gm_äameR©e
;

170 
IÁ
 
	gm_GOPSize
;

171 
IÁ
 
	gm_picWidth
;

172 
IÁ
 
	gm_picHeight
;

173 
IÁ
 
	gm_LCUWidth
;

174 
IÁ
 
	gm_LCUHeight
;

175 
IÁ
 
	gm_numb”OfLev–
;

176 
IÁ
 
	gm_av”ageB™s
;

178 
IÁ
 
	gm_numb”OfPix–
;

179 
IÁ64
 
	gm_rg‘B™s
;

180 
IÁ
 
	gm_numb”OfLCU
;

181 
IÁ
* 
	gm_b™sR©io
;

182 
IÁ
* 
	gm_GOPID2Lev–
;

183 
TRCP¬am‘”
* 
	gm_picP¬a
;

184 
TRCP¬am‘”
** 
	gm_LCUP¬a
;

186 
IÁ
 
	gm_äamesLeá
;

187 
IÁ64
 
	gm_b™sLeá
;

188 
DoubË
 
	gm_£qT¬g‘Bµ
;

189 
DoubË
 
	gm_®phaUpd©e
;

190 
DoubË
 
	gm_b‘aUpd©e
;

191 
BoÞ
 
	gm_u£LCUS•¬©eMod–
;

193 
IÁ
 
	gm_ad­tiveB™
;

194 
DoubË
 
	gm_Ï¡Lambda
;

197 þas 
	cTEncRCGOP


199 
	mpublic
:

200 
TEncRCGOP
();

201 ~
TEncRCGOP
();

203 
	mpublic
:

204 
Void
 
ü—‹
Ð
TEncRCSeq
* 
’cRCSeq
, 
IÁ
 
numPic
 );

205 
Void
 
de¡roy
();

206 
Void
 
upd©eAá”Piùu»
Ð
IÁ
 
b™sCo¡
 );

208 
	m´iv©e
:

209 
IÁ
 
xE¡GOPT¬g‘B™s
Ð
TEncRCSeq
* 
’cRCSeq
, IÁ 
GOPSize
 );

210 
Void
 
xC®EquaCÛff
Ð
TEncRCSeq
* 
’cRCSeq
, 
DoubË
* 
ÏmbdaR©io
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
 );

211 #ià
JVET_K0390_RATE_CTRL


212 
DoubË
 
xSÞveEqua
(
TEncRCSeq
* 
’cRCSeq
, DoubË 
rg‘Bµ
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
);

214 
DoubË
 
xSÞveEqua
ÐDoubË 
rg‘Bµ
, DoubË* 
equaCÛffA
, DoubË* 
equaCÛffB
, 
IÁ
 
GOPSize
 );

216 
	mpublic
:

217 
TEncRCSeq
* 
	$g‘EncRCSeq
(è{  
m_’cRCSeq
; }

218 
IÁ
 
	$g‘NumPic
(è{  
m_numPic
;
	}
}

219 
IÁ
 
	$g‘T¬g‘B™s
(è{  
m_rg‘B™s
; 
	}
}

220 
IÁ
 
	$g‘PicLeá
(è{  
m_picLeá
; 
	}
}

221 
IÁ
 
	$g‘B™sLeá
(è{  
m_b™sLeá
; 
	}
}

222 
IÁ
 
	$g‘T¬g‘B™InGOP
Ð
IÁ
 
i
 ) {  
m_picT¬g‘B™InGOP
[i]; 
	}
}

224 
	g´iv©e
:

225 
TEncRCSeq
* 
m_’cRCSeq
;

226 
IÁ
* 
	gm_picT¬g‘B™InGOP
;

227 
IÁ
 
	gm_numPic
;

228 
IÁ
 
	gm_rg‘B™s
;

229 
IÁ
 
	gm_picLeá
;

230 
IÁ
 
	gm_b™sLeá
;

233 þas 
	cTEncRCPic


235 
	mpublic
:

236 
TEncRCPic
();

237 ~
TEncRCPic
();

239 
	mpublic
:

240 
Void
 
ü—‹
Ð
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
, 
IÁ
 
äameLev–
, 
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 );

241 
Void
 
de¡roy
();

243 
IÁ
 
e¡im©ePicQP
 ( 
DoubË
 
Ïmbda
, 
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 );

244 
IÁ
 
g‘RefšeB™sFÜIÁ¿
(IÁ 
ÜgB™s
);

245 
DoubË
 
ÿlcuÏ‹LambdaIÁ¿
(DoubË 
®pha
, DoubË 
b‘a
, DoubË 
MADP”Pix–
, DoubË 
b™sP”Pix–
);

246 
DoubË
 
e¡im©ePicLambda
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
, 
SliûTy³
 
eSliûTy³
);

248 
Void
 
upd©eAÍhaB‘aIÁ¿
(
DoubË
 *
®pha
, DoubË *
b‘a
);

250 
DoubË
 
g‘LCUT¬g‘Bµ
(
SliûTy³
 
eSliûTy³
);

251 
DoubË
 
g‘LCUE¡LambdaAndQP
(DoubË 
bµ
, 
IÁ
 
þPicQP
, IÁ *
e¡QP
);

252 
DoubË
 
g‘LCUE¡Lambda
ÐDoubË 
bµ
 );

253 
IÁ
 
g‘LCUE¡QP
Ð
DoubË
 
Ïmbda
, IÁ 
þPicQP
 );

254 #ià
JVET_M0600_RATE_CTRL


255 
upd©eAá”CTU
Ð
IÁ
 
LCUIdx
, IÁ 
b™s
, IÁ 
QP
, 
DoubË
 
Ïmbda
, DoubË 
skR©io
, 
BoÞ
 
upd©eLCUP¬am‘”
 = 
Œue
);

257 
Void
 
upd©eAá”CTU
Ð
IÁ
 
LCUIdx
, IÁ 
b™s
, IÁ 
QP
, 
DoubË
 
Ïmbda
, 
BoÞ
 
upd©eLCUP¬am‘”
 = 
Œue
 );

259 
Void
 
upd©eAá”Piùu»
Ð
IÁ
 
aùu®H—d”B™s
, IÁ 
aùu®TÙ®B™s
, 
DoubË
 
av”ageQP
, DoubË 
av”ageLambda
, 
SliûTy³
 
eSliûTy³
);

261 
Void
 
addToPiùu»Ls™
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
 );

262 
DoubË
 
ÿlAv”ageQP
();

263 
DoubË
 
ÿlAv”ageLambda
();

265 
	m´iv©e
:

266 
IÁ
 
xE¡PicT¬g‘B™s
Ð
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
 );

267 
IÁ
 
xE¡PicH—d”B™s
Ð
li¡
<
TEncRCPic
*>& 
li¡P»viousPiùu»s
, IÁ 
äameLev–
 );

268 
IÁ
 
xE¡PicLow”Bound
Ð
TEncRCSeq
* 
’cRCSeq
, 
TEncRCGOP
* 
’cRCGOP
 );

270 
	mpublic
:

271 
TEncRCSeq
* 
	$g‘RCSequ’û
(è{  
m_’cRCSeq
; }

272 
TEncRCGOP
* 
	$g‘RCGOP
(è{  
m_’cRCGOP
; 
	}
}

274 
IÁ
 
	$g‘F¿meLev–
(è{  
m_äameLev–
; 
	}
}

275 
IÁ
 
	$g‘Numb”OfPix–
(è{  
m_numb”OfPix–
; 
	}
}

276 
IÁ
 
	$g‘Numb”OfLCU
(è{  
m_numb”OfLCU
; 
	}
}

277 
IÁ
 
	$g‘T¬g‘B™s
(è{  
m_rg‘B™s
; 
	}
}

278 
IÁ
 
	$g‘E¡H—d”B™s
(è{  
m_e¡H—d”B™s
; 
	}
}

279 
IÁ
 
	$g‘LCULeá
(è{  
m_LCULeá
; 
	}
}

280 
IÁ
 
	$g‘B™sLeá
(è{  
m_b™sLeá
; 
	}
}

281 
IÁ
 
	$g‘Pix–sLeá
(è{  
m_pix–sLeá
; 
	}
}

282 
IÁ
 
	$g‘B™sCoded
(è{  
m_rg‘B™s
 - 
m_e¡H—d”B™s
 - 
m_b™sLeá
; 
	}
}

283 
IÁ
 
	$g‘LCUCoded
(è{  
m_numb”OfLCU
 - 
m_LCULeá
; 
	}
}

284 
IÁ
 
	$g‘Low”Bound
(è{  
m_low”Bound
; 
	}
}

285 
TRCLCU
* 
	$g‘LCU
(è{  
m_LCUs
; 
	}
}

286 
	gTRCLCU
& 
	$g‘LCU
Ð
IÁ
 
LCUIdx
 ) {  
m_LCUs
[LCUIdx]; 
	}
}

287 
IÁ
 
	$g‘PicAùu®H—d”B™s
(è{  
m_picAùu®H—d”B™s
; 
	}
}

288 
Void
 
	$£tB™Leá
(
IÁ
 
b™s
è{ 
m_b™sLeá
 = b™s; 
	}
}

289 
Void
 
	$£tT¬g‘B™s
Ð
IÁ
 
b™s
 ) { 
m_rg‘B™s
 = b™s; 
m_b™sLeá
 = b™s;
	}
}

290 
Void
 
	$£tTÙ®IÁ¿Co¡
(
DoubË
 
co¡
è{ 
m_tÙ®Co¡IÁ¿
 = co¡; 
	}
}

291 
Void
 
g‘LCUIn™T¬g‘B™s
();

293 
IÁ
 
	$g‘PicAùu®B™s
(è{  
m_picAùu®B™s
; 
	}
}

294 
IÁ
 
	$g‘PicAùu®QP
(è{  
m_picQP
; 
	}
}

295 
DoubË
 
	$g‘PicAùu®Lambda
(è{  
m_picLambda
; 
	}
}

296 
IÁ
 
	$g‘PicE¡QP
(è{  
m_e¡PicQP
; 
	}
}

297 
Void
 
	$£tPicE¡QP
Ð
IÁ
 
QP
 ) { 
m_e¡PicQP
 = QP; 
	}
}

298 
DoubË
 
	$g‘PicE¡Lambda
(è{  
m_e¡PicLambda
; 
	}
}

299 
Void
 
	$£tPicE¡Lambda
Ð
DoubË
 
Ïmbda
 ) { 
m_picLambda
 =†ambda; 
	}
}

301 #ià
JVET_K0390_RATE_CTRL


302 
DoubË
 
	$g‘PicMSE
(è{  
m_picMSE
; 
	}
}

303 
	$£tPicMSE
(
DoubË
 
avgMSE
è{ 
m_picMSE
 =‡vgMSE; 
	}
}

306 
	g´iv©e
:

307 
TEncRCSeq
* 
m_’cRCSeq
;

308 
TEncRCGOP
* 
	gm_’cRCGOP
;

310 
IÁ
 
	gm_äameLev–
;

311 
IÁ
 
	gm_numb”OfPix–
;

312 
IÁ
 
	gm_numb”OfLCU
;

313 
IÁ
 
	gm_rg‘B™s
;

314 
IÁ
 
	gm_e¡H—d”B™s
;

315 
IÁ
 
	gm_e¡PicQP
;

316 
IÁ
 
	gm_low”Bound
;

317 
DoubË
 
	gm_e¡PicLambda
;

319 
IÁ
 
	gm_LCULeá
;

320 
IÁ
 
	gm_b™sLeá
;

321 
IÁ
 
	gm_pix–sLeá
;

323 
TRCLCU
* 
	gm_LCUs
;

324 
IÁ
 
	gm_picAùu®H—d”B™s
;

325 
DoubË
 
	gm_tÙ®Co¡IÁ¿
;

326 
DoubË
 
	gm_»maššgCo¡IÁ¿
;

327 
IÁ
 
	gm_picAùu®B™s
;

328 
IÁ
 
	gm_picQP
;

329 
DoubË
 
	gm_picLambda
;

330 #ià
JVET_K0390_RATE_CTRL


331 
DoubË
 
	gm_picMSE
;

332 
IÁ
 
	gm_v®idPix–sInPic
;

336 þas 
	cTEncR©eCŒl


338 
	mpublic
:

339 
TEncR©eCŒl
();

340 ~
TEncR©eCŒl
();

342 
	mpublic
:

343 
Void
 
š™
Ð
IÁ
 
tÙ®F¿mes
, IÁ 
rg‘B™¿‹
, IÁ 
äameR©e
, IÁ 
GOPSize
, IÁ 
picWidth
, IÁ 
picHeight
, IÁ 
LCUWidth
, IÁ 
LCUHeight
, IÁ 
k“pH›rB™s
, 
BoÞ
 
u£LCUS•¬©eMod–
, 
GOPEÁry
 
GOPLi¡
[
MAX_GOP
] );

344 
Void
 
de¡roy
();

345 
Void
 
š™RCPic
Ð
IÁ
 
äameLev–
 );

346 
Void
 
š™RCGOP
Ð
IÁ
 
numb”OfPiùu»s
 );

347 
Void
 
de¡royRCGOP
();

349 
	mpublic
:

350 
Void
 
	$£tRCQP
 ( 
IÁ
 
QP
 ) { 
m_RCQP
 = QP; }

351 
IÁ
 
	$g‘RCQP
 (è{  
m_RCQP
; 
	}
}

352 
TEncRCSeq
* 
	$g‘RCSeq
(è{ 
	`as£¹
 ( 
m_’cRCSeq
 !ð
NULL
 );  m_’cRCSeq; 
	}
}

353 
TEncRCGOP
* 
	$g‘RCGOP
(è{ 
	`as£¹
 ( 
m_’cRCGOP
 !ð
NULL
 );  m_’cRCGOP; 
	}
}

354 
TEncRCPic
* 
	$g‘RCPic
(è{ 
	`as£¹
 ( 
m_’cRCPic
 !ð
NULL
 );  m_’cRCPic; 
	}
}

355 
	gli¡
<
	gTEncRCPic
*>& 
	$g‘PicLi¡
(è{  
m_li¡RCPiùu»s
; 
	}
}

356 
BoÞ
 
	$g‘CpbS©u¿tiÚEÇbËd
(è{  
m_CpbS©u¿tiÚEÇbËd
; 
	}
}

357 
UIÁ
 
	$g‘CpbS‹
(è{  
m_ýbS‹
; 
	}
}

358 
UIÁ
 
	$g‘CpbSize
(è{  
m_ýbSize
; 
	}
}

359 
UIÁ
 
	$g‘BufãršgR©e
(è{  
m_bufãršgR©e
; 
	}
}

360 
IÁ
 
upd©eCpbS‹
(IÁ 
aùu®B™s
);

361 
Void
 
š™HrdP¬am
(cÚ¡ 
TComHRD
* 
pcHrd
, 
IÁ
 
iF¿meR©e
, 
DoubË
 
fIn™ŸlCpbFuÎÃss
);

363 
	g´iv©e
:

364 
TEncRCSeq
* 
m_’cRCSeq
;

365 
TEncRCGOP
* 
	gm_’cRCGOP
;

366 
TEncRCPic
* 
	gm_’cRCPic
;

367 
	gli¡
<
	gTEncRCPic
*> 
	gm_li¡RCPiùu»s
;

368 
IÁ
 
	gm_RCQP
;

369 
BoÞ
 
	gm_CpbS©u¿tiÚEÇbËd
;

370 
IÁ
 
	gm_ýbS‹
;

371 
UIÁ
 
	gm_ýbSize
;

372 
UIÁ
 
	gm_bufãršgR©e
;

	@source/Lib/TLibEncoder/TEncSampleAdaptiveOffset.cpp

38 
	~"TEncSam¶eAd­tiveOff£t.h
"

39 
	~<¡ršg.h
>

40 
	~<¡dlib.h
>

41 
	~<¡dio.h
>

42 
	~<m©h.h
>

49 
šlše
 
DoubË
 
	$xRoundIbdi2
(
IÁ
 
b™D•th
, 
DoubË
 
x
)

51  ((
x
)>0è? (
IÁ
)(((IÁ)(x)+(1<<(
b™D•th
-8-1)))/(1<<(bitDepth-8))) : ((Int)(((Int)(x)-(1<<(bitDepth-8-1)))/(1<<(bitDepth-8))));

52 
	}
}

54 
šlše
 
DoubË
 
	$xRoundIbdi
(
IÁ
 
b™D•th
, 
DoubË
 
x
)

56  (
b™D•th
 > 8 ? 
	`xRoundIbdi2
(b™D•th, (
x
)è: ((x)>=0 ? ((
IÁ
)((x)+0.5)) : ((Int)((x)-0.5)))) ;

57 
	}
}

60 
	gTEncSam¶eAd­tiveOff£t
::
	$TEncSam¶eAd­tiveOff£t
()

62 
m_µpcRDSbacCod”
 = 
NULL
;

63 
m_pcRDGoOnSbacCod”
 = 
NULL
;

64 
m_µpcBšCod”CABAC
 = 
NULL
;

65 
m_¡©D©a
 = 
NULL
;

66 
m_´eDBF¡©D©a
 = 
NULL
;

67 
	}
}

69 
	gTEncSam¶eAd­tiveOff£t
::~
	$TEncSam¶eAd­tiveOff£t
()

71 
	`de¡royEncD©a
();

72 
	}
}

74 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$ü—‹EncD©a
(
BoÞ
 
isP»DBFSam¶esU£d
)

78 
m_µpcRDSbacCod”
 = 
Ãw
 
TEncSbac
* [
NUM_SAO_CABACSTATE_LABELS
];

79 #ià
FAST_BIT_EST


80 
m_µpcBšCod”CABAC
 = 
Ãw
 
TEncBšCABACCouÁ”
* [
NUM_SAO_CABACSTATE_LABELS
];

82 
m_µpcBšCod”CABAC
 = 
Ãw
 
TEncBšCABAC
* [
NUM_SAO_CABACSTATE_LABELS
];

85 
IÁ
 
cs
=0; c < 
NUM_SAO_CABACSTATE_LABELS
; cs++)

87 
m_µpcRDSbacCod”
[
cs
] = 
Ãw
 
TEncSbac
;

88 #ià
FAST_BIT_EST


89 
m_µpcBšCod”CABAC
[
cs
] = 
Ãw
 
TEncBšCABACCouÁ”
;

91 
m_µpcBšCod”CABAC
[
cs
] = 
Ãw
 
TEncBšCABAC
;

93 
m_µpcRDSbacCod”
 [
cs
]->
	`š™
Ð
m_µpcBšCod”CABAC
 [cs] );

98 
m_¡©D©a
 = 
Ãw
 
SAOStD©a
**[
m_numCTUsPic
];

99 
IÁ
 
i
=0; i< 
m_numCTUsPic
; i++)

101 
m_¡©D©a
[
i
] = 
Ãw
 
SAOStD©a
*[
MAX_NUM_COMPONENT
];

102 
IÁ
 
compIdx
=0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

104 
m_¡©D©a
[
i
][
compIdx
] = 
Ãw
 
SAOStD©a
[
NUM_SAO_NEW_TYPES
];

107 if(
isP»DBFSam¶esU£d
)

109 
m_´eDBF¡©D©a
 = 
Ãw
 
SAOStD©a
**[
m_numCTUsPic
];

110 
IÁ
 
i
=0; i< 
m_numCTUsPic
; i++)

112 
m_´eDBF¡©D©a
[
i
] = 
Ãw
 
SAOStD©a
*[
MAX_NUM_COMPONENT
];

113 
IÁ
 
compIdx
=0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

115 
m_´eDBF¡©D©a
[
i
][
compIdx
] = 
Ãw
 
SAOStD©a
[
NUM_SAO_NEW_TYPES
];

121 ::
	`mem£t
(
m_§oDi§bËdR©e
, 0, (m_saoDisabledRate));

123 
IÁ
 
ty³Idc
=0;y³Idø< 
NUM_SAO_NEW_TYPES
;ypeIdc++)

125 
m_skLšesR
[
COMPONENT_Y
 ][
ty³Idc
]= 5;

126 
m_skLšesR
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesR[
COMPONENT_Cr
][typeIdc]= 3;

128 
m_skLšesB
[
COMPONENT_Y
 ][
ty³Idc
]= 4;

129 
m_skLšesB
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesB[
COMPONENT_Cr
][typeIdc]= 2;

131 if(
isP»DBFSam¶esU£d
)

133 
ty³Idc
)

135 
SAO_TYPE_EO_0
:

137 
m_skLšesR
[
COMPONENT_Y
 ][
ty³Idc
]= 5;

138 
m_skLšesR
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesR[
COMPONENT_Cr
][typeIdc]= 3;

140 
m_skLšesB
[
COMPONENT_Y
 ][
ty³Idc
]= 3;

141 
m_skLšesB
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesB[
COMPONENT_Cr
][typeIdc]= 1;

144 
SAO_TYPE_EO_90
:

146 
m_skLšesR
[
COMPONENT_Y
 ][
ty³Idc
]= 4;

147 
m_skLšesR
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesR[
COMPONENT_Cr
][typeIdc]= 2;

149 
m_skLšesB
[
COMPONENT_Y
 ][
ty³Idc
]= 4;

150 
m_skLšesB
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesB[
COMPONENT_Cr
][typeIdc]= 2;

153 
SAO_TYPE_EO_135
:

154 
SAO_TYPE_EO_45
:

156 
m_skLšesR
[
COMPONENT_Y
 ][
ty³Idc
]= 5;

157 
m_skLšesR
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesR[
COMPONENT_Cr
][typeIdc]= 3;

159 
m_skLšesB
[
COMPONENT_Y
 ][
ty³Idc
]= 4;

160 
m_skLšesB
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesB[
COMPONENT_Cr
][typeIdc]= 2;

163 
SAO_TYPE_BO
:

165 
m_skLšesR
[
COMPONENT_Y
 ][
ty³Idc
]= 4;

166 
m_skLšesR
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesR[
COMPONENT_Cr
][typeIdc]= 2;

168 
m_skLšesB
[
COMPONENT_Y
 ][
ty³Idc
]= 3;

169 
m_skLšesB
[
COMPONENT_Cb
][
ty³Idc
]ðm_skLšesB[
COMPONENT_Cr
][typeIdc]= 1;

174 
	`´štf
("Not‡ supportedype");

175 
	`as£¹
(0);

176 
	`ex™
(-1);

182 
	}
}

184 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$de¡royEncD©a
()

186 if(
m_µpcRDSbacCod”
 !ð
NULL
)

188 
IÁ
 
cs
 = 0; c < 
NUM_SAO_CABACSTATE_LABELS
; cs ++ )

190 
d–‘e
 
m_µpcRDSbacCod”
[
cs
];

192 
d–‘e
[] 
m_µpcRDSbacCod”
; m_µpcRDSbacCod” = 
NULL
;

195 if(
m_µpcBšCod”CABAC
 !ð
NULL
)

197 
IÁ
 
cs
 = 0; c < 
NUM_SAO_CABACSTATE_LABELS
; cs ++ )

199 
d–‘e
 
m_µpcBšCod”CABAC
[
cs
];

201 
d–‘e
[] 
m_µpcBšCod”CABAC
; m_µpcBšCod”CABAC = 
NULL
;

204 if(
m_¡©D©a
 !ð
NULL
)

206 
IÁ
 
i
=0; i< 
m_numCTUsPic
; i++)

208 
IÁ
 
compIdx
=0; compIdx< 
MAX_NUM_COMPONENT
; compIdx++)

210 
d–‘e
[] 
m_¡©D©a
[
i
][
compIdx
];

212 
d–‘e
[] 
m_¡©D©a
[
i
];

214 
d–‘e
[] 
m_¡©D©a
; m_¡©D©¨ð
NULL
;

216 if(
m_´eDBF¡©D©a
 !ð
NULL
)

218 
IÁ
 
i
=0; i< 
m_numCTUsPic
; i++)

220 
IÁ
 
compIdx
=0; compIdx< 
MAX_NUM_COMPONENT
; compIdx++)

222 
d–‘e
[] 
m_´eDBF¡©D©a
[
i
][
compIdx
];

224 
d–‘e
[] 
m_´eDBF¡©D©a
[
i
];

226 
d–‘e
[] 
m_´eDBF¡©D©a
; m_´eDBF¡©D©¨ð
NULL
;

228 
	}
}

230 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$š™RDOCabacCod”
(
TEncSbac
* 
pcRDGoOnSbacCod”
, 
TComSliû
* 
pcSliû
)

232 
m_pcRDGoOnSbacCod”
 = 
pcRDGoOnSbacCod”
;

233 
m_pcRDGoOnSbacCod”
->
	`»£tEÁrÝy
(
pcSliû
);

234 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

236 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[
SAO_CABACSTATE_PIC_INIT
]);

237 
	}
}

240 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$SAOProûss
(
TComPic
* 
pPic
, 
BoÞ
* 
¦iûEÇbËd
, cÚ¡ 
DoubË
 *
Ïmbdas
, cÚ¡ BoÞ 
bTe¡SAODi§bËAtPiùu»Lev–
, cÚ¡ DoubË 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
, cÚ¡ BoÞ 
isP»DBFSam¶esU£d
 )

242 
TComPicYuv
* 
ÜgYuv
ð
pPic
->
	`g‘PicYuvOrg
();

243 
TComPicYuv
* 
»sYuv
ð
pPic
->
	`g‘PicYuvRec
();

244 
	`memýy
(
m_Ïmbda
, 
Ïmbdas
, (m_lambda));

245 
TComPicYuv
* 
¤cYuv
 = 
m_‹mpPicYuv
;

246 
»sYuv
->
	`cÝyToPic
(
¤cYuv
);

247 
¤cYuv
->
	`£tBÜd”Ex‹nsiÚ
(
çl£
);

248 
¤cYuv
->
	`ex‹ndPicBÜd”
();

251 
	`g‘Sti¡ics
(
m_¡©D©a
, 
ÜgYuv
, 
¤cYuv
, 
pPic
);

252 if(
isP»DBFSam¶esU£d
)

254 
	`addP»DBFSti¡ics
(
m_¡©D©a
);

258 
	`decidePicP¬ams
(
¦iûEÇbËd
, 
pPic
, 
§oEncodšgR©e
, 
§oEncodšgR©eChroma
);

260 
SAOBlkP¬am
* 
»cÚP¬ams
 = 
Ãw
 SAOBlkP¬am[
m_numCTUsPic
];

261 
	`decideBlkP¬ams
(
pPic
, 
¦iûEÇbËd
, 
m_¡©D©a
, 
¤cYuv
, 
»sYuv
, 
»cÚP¬ams
,…Pic->
	`g‘PicSym
()->
	`g‘SAOBlkP¬am
(), 
bTe¡SAODi§bËAtPiùu»Lev–
, 
§oEncodšgR©e
, 
§oEncodšgR©eChroma
);

262 
d–‘e
[] 
»cÚP¬ams
;

263 
	}
}

265 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$g‘P»DBFSti¡ics
(
TComPic
* 
pPic
)

267 
	`g‘Sti¡ics
(
m_´eDBF¡©D©a
, 
pPic
->
	`g‘PicYuvOrg
(),…Pic->
	`g‘PicYuvRec
(),…Pic, 
Œue
);

268 
	}
}

270 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$addP»DBFSti¡ics
(
SAOStD©a
*** 
blkSts
)

272 
IÁ
 
n
=0;‚< 
m_numCTUsPic
;‚++)

274 
IÁ
 
compIdx
=0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

276 
IÁ
 
ty³Idc
=0;y³Idø< 
NUM_SAO_NEW_TYPES
;ypeIdc++)

278 
blkSts
[
n
][
compIdx
][
ty³Idc
] +ð
m_´eDBF¡©D©a
[n][compIdx][typeIdc];

282 
	}
}

284 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$g‘Sti¡ics
(
SAOStD©a
*** 
blkSts
, 
TComPicYuv
* 
ÜgYuv
, TComPicYuv* 
¤cYuv
, 
TComPic
* 
pPic
, 
BoÞ
 
isC®cuÏ‹P»DeblockSam¶es
)

286 
BoÞ
 
isLeáAvaž
,
isRightAvaž
,
isAboveAvaž
,
isB–owAvaž
,
isAboveLeáAvaž
,
isAboveRightAvaž
,
isB–owLeáAvaž
,
isB–owRightAvaž
;

288 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

290 
IÁ
 
ùuRsAddr
ð0; ctuRsAdd¸< 
m_numCTUsPic
; ctuRsAddr++)

292 
IÁ
 
yPos
 = (
ùuRsAddr
 / 
m_numCTUInWidth
)*
m_maxCUHeight
;

293 
IÁ
 
xPos
 = (
ùuRsAddr
 % 
m_numCTUInWidth
)*
m_maxCUWidth
;

294 
IÁ
 
height
 = (
yPos
 + 
m_maxCUHeight
 > 
m_picHeight
)?(m_picHeight- yPos):m_maxCUHeight;

295 
IÁ
 
width
 = (
xPos
 + 
m_maxCUWidth
 > 
m_picWidth
 )?(m_picWidth - xPos):m_maxCUWidth;

297 
pPic
->
	`g‘PicSym
()->
	`d”iveLoÝFž‹rBound¬yAvažibž™y
(
ùuRsAddr
, 
isLeáAvaž
,
isRightAvaž
,
isAboveAvaž
,
isB–owAvaž
,
isAboveLeáAvaž
,
isAboveRightAvaž
,
isB–owLeáAvaž
,
isB–owRightAvaž
);

302 
isRightAvaž
 = (
xPos
 + 
m_maxCUWidth
 < 
m_picWidth
 );

303 
isB–owAvaž
 = (
yPos
 + 
m_maxCUHeight
 < 
m_picHeight
);

304 
isB–owRightAvaž
 = (
isRightAvaž
 && 
isB–owAvaž
);

305 
isB–owLeáAvaž
 = ((
xPos
 > 0è&& (
isB–owAvaž
));

306 
isAboveRightAvaž
 = ((
yPos
 > 0è&& (
isRightAvaž
));

308 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

310 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compIdx
);

312 cÚ¡ 
UIÁ
 
compÚ’tSÿËX
 = 
	`g‘CompÚ’tSÿËX
(
compÚ’t
, 
pPic
->
	`g‘ChromaFÜm©
());

313 cÚ¡ 
UIÁ
 
compÚ’tSÿËY
 = 
	`g‘CompÚ’tSÿËY
(
compÚ’t
, 
pPic
->
	`g‘ChromaFÜm©
());

315 
IÁ
 
¤cSŒide
 = 
¤cYuv
->
	`g‘SŒide
(
compÚ’t
);

316 
P–
* 
¤cBlk
 = 
¤cYuv
->
	`g‘Addr
(
compÚ’t
è+ ((
yPos
 >> 
compÚ’tSÿËY
è* 
¤cSŒide
è+ (
xPos
 >> 
compÚ’tSÿËX
);

318 
IÁ
 
ÜgSŒide
 = 
ÜgYuv
->
	`g‘SŒide
(
compÚ’t
);

319 
P–
* 
ÜgBlk
 = 
ÜgYuv
->
	`g‘Addr
(
compÚ’t
è+ ((
yPos
 >> 
compÚ’tSÿËY
è* 
ÜgSŒide
è+ (
xPos
 >> 
compÚ’tSÿËX
);

321 
	`g‘BlkSts
(
compÚ’t
, 
pPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•th
(
	`toChªÃlTy³
(compÚ’t)), 
blkSts
[
ùuRsAddr
][component]

322 , 
¤cBlk
, 
ÜgBlk
, 
¤cSŒide
, 
ÜgSŒide
, (
width
 >> 
compÚ’tSÿËX
), (
height
 >> 
compÚ’tSÿËY
)

323 , 
isLeáAvaž
, 
isRightAvaž
, 
isAboveAvaž
, 
isB–owAvaž
, 
isAboveLeáAvaž
, 
isAboveRightAvaž


324 , 
isC®cuÏ‹P»DeblockSam¶es


329 
	}
}

331 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$»£tEncod”DecisiÚs
()

333 
IÁ
 
compIdx
 = 0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

335 
IÁ
 
‹mpLay”
 = 1;empLay” < 
MAX_TLAYER
;empLayer++)

337 
m_§oDi§bËdR©e
[
compIdx
][
‹mpLay”
] = 0.0;

340 
	}
}

342 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$decidePicP¬ams
(
BoÞ
* 
¦iûEÇbËd
, cÚ¡ 
TComPic
* 
pic
, cÚ¡ 
DoubË
 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
)

344 cÚ¡ 
IÁ
 
picTempLay”
 = 
pic
->
	`g‘Sliû
(0)->
	`g‘D•th
();

347 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

348 
IÁ
 
compIdx
 = 0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

350 
¦iûEÇbËd
[
compIdx
] = 
çl£
;

353 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

356 
¦iûEÇbËd
[
compIdx
] = 
Œue
;

358 ià(
§oEncodšgR©e
>0.0)

360 ià(
§oEncodšgR©eChroma
>0.0)

363 ifÐ(
picTempLay”
 > 0)

364 && (
m_§oDi§bËdR©e
[
compIdx
][
picTempLay”
-1] > ((compIdx==
COMPONENT_Y
è? 
§oEncodšgR©e
 : 
§oEncodšgR©eChroma
)) )

366 
¦iûEÇbËd
[
compIdx
] = 
çl£
;

372 ifÐ(
picTempLay”
 > 0)

373 && (
m_§oDi§bËdR©e
[
COMPONENT_Y
][0] > 
§oEncodšgR©e
) )

375 
¦iûEÇbËd
[
compIdx
] = 
çl£
;

380 
	}
}

382 
IÁ64
 
	gTEncSam¶eAd­tiveOff£t
::
	$g‘Di¡ÜtiÚ
(cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idc
, IÁ 
ty³AuxInfo
, IÁ* 
švQuªtOff£t
, 
SAOStD©a
& 
¡©D©a
)

384 
IÁ64
 
di¡
 = 0;

385 
IÁ
 
shiá
 = 2 * 
	`DISTORTION_PRECISION_ADJUSTMENT
(
chªÃlB™D•th
 - 8);

387 
ty³Idc
)

389 
SAO_TYPE_EO_0
:

390 
SAO_TYPE_EO_90
:

391 
SAO_TYPE_EO_135
:

392 
SAO_TYPE_EO_45
:

394 
IÁ
 
off£tIdx
=0; off£tIdx<
NUM_SAO_EO_CLASSES
; offsetIdx++)

396 
di¡
 +ð
	`e¡SaoDi¡
Ð
¡©D©a
.
couÁ
[
off£tIdx
], 
švQuªtOff£t
[off£tIdx], stD©a.
diff
[off£tIdx], 
shiá
);

400 
SAO_TYPE_BO
:

402 
IÁ
 
off£tIdx
=
ty³AuxInfo
; offsetIdx<typeAuxInfo+4; offsetIdx++)

404 
IÁ
 
bªdIdx
 = 
off£tIdx
 % 
NUM_SAO_BO_CLASSES
 ;

405 
di¡
 +ð
	`e¡SaoDi¡
Ð
¡©D©a
.
couÁ
[
bªdIdx
], 
švQuªtOff£t
[bªdIdx], stD©a.
diff
[bªdIdx], 
shiá
);

411 
	`´štf
("Not‡ supportedype");

412 
	`as£¹
(0);

413 
	`ex™
(-1);

417  
di¡
;

418 
	}
}

420 
šlše
 
IÁ64
 
	gTEncSam¶eAd­tiveOff£t
::
	$e¡SaoDi¡
(
IÁ64
 
couÁ
, IÁ64 
off£t
, IÁ64 
diffSum
, 
IÁ
 
shiá
)

422  (Ð
couÁ
*
off£t
*off£t-
diffSum
*off£t*2 ) >> 
shiá
);

423 
	}
}

426 
šlše
 
IÁ
 
	gTEncSam¶eAd­tiveOff£t
::
	$e¡I‹rOff£t
(
IÁ
 
ty³Idx
, 
DoubË
 
Ïmbda
, IÁ 
off£tIÅut
, 
IÁ64
 
couÁ
, IÁ64 
diffSum
, IÁ 
shiá
, IÁ 
b™Inü—£
, IÁ64& 
be¡Di¡
, DoubË& 
be¡Co¡
, IÁ 
off£tTh
 )

428 
IÁ
 
™”Off£t
, 
‹mpOff£t
;

429 
IÁ64
 
‹mpDi¡
, 
‹mpR©e
;

430 
DoubË
 
‹mpCo¡
, 
‹mpMšCo¡
;

431 
IÁ
 
off£tOuut
 = 0;

432 
™”Off£t
 = 
off£tIÅut
;

434 
‹mpMšCo¡
 = 
Ïmbda
;

435 
™”Off£t
 != 0)

438 
‹mpR©e
 = (
ty³Idx
 =ð
SAO_TYPE_BO
è? (
	`abs
((
IÁ
)
™”Off£t
)+2) : (abs((Int)iterOffset)+1);

439 ià(
	`abs
((
IÁ
)
™”Off£t
)==
off£tTh
)

441 
‹mpR©e
 --;

444 
‹mpOff£t
 = 
™”Off£t
 << 
b™Inü—£
;

445 
‹mpDi¡
 = 
	`e¡SaoDi¡
Ð
couÁ
, 
‹mpOff£t
, 
diffSum
, 
shiá
);

446 
‹mpCo¡
 = ((
DoubË
)
‹mpDi¡
 + 
Ïmbda
 * (DoubËè
‹mpR©e
);

447 if(
‹mpCo¡
 < 
‹mpMšCo¡
)

449 
‹mpMšCo¡
 = 
‹mpCo¡
;

450 
off£tOuut
 = 
™”Off£t
;

451 
be¡Di¡
 = 
‹mpDi¡
;

452 
be¡Co¡
 = 
‹mpCo¡
;

454 
™”Off£t
 = (iterOffset > 0) ? (iterOffset-1):(iterOffset+1);

456  
off£tOuut
;

457 
	}
}

459 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$d”iveOff£ts
(
CompÚ’tID
 
compIdx
, cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idc
, 
SAOStD©a
& 
¡©D©a
, IÁ* 
quªtOff£ts
, IÁ& 
ty³AuxInfo
)

461 
IÁ
 
b™D•th
 = 
chªÃlB™D•th
;

462 
IÁ
 
shiá
 = 2 * 
	`DISTORTION_PRECISION_ADJUSTMENT
(
b™D•th
-8);

463 
IÁ
 
off£tTh
 = 
TComSam¶eAd­tiveOff£t
::
	`g‘MaxOff£tQV®
(
chªÃlB™D•th
);

465 ::
	`mem£t
(
quªtOff£ts
, 0, (
IÁ
)*
MAX_NUM_SAO_CLASSES
);

468 
IÁ
 
numCÏs£s
 = (
ty³Idc
 =ð
SAO_TYPE_BO
)?((IÁ)
NUM_SAO_BO_CLASSES
):((IÁ)
NUM_SAO_EO_CLASSES
);

469 
IÁ
 
þassIdx
=0; cÏssIdx< 
numCÏs£s
; classIdx++)

471 ifÐ(
ty³Idc
 !ð
SAO_TYPE_BO
è&& (
þassIdx
==
SAO_CLASS_EO_PLAIN
) )

476 if(
¡©D©a
.
couÁ
[
þassIdx
] == 0)

481 
quªtOff£ts
[
þassIdx
] = (
IÁ
è
	`xRoundIbdi
(
b™D•th
, (
DoubË
)Ð
¡©D©a
.
diff
[classIdx]<<(bitDepth-8))

483 (
DoubË
)Ð
¡©D©a
.
couÁ
[
þassIdx
]<< 
m_off£tS‹pLog2
[
compIdx
])

485 
quªtOff£ts
[
þassIdx
] = 
	`Cl3
(-
off£tTh
, offsetTh, quantOffsets[classIdx]);

489 
ty³Idc
)

491 
SAO_TYPE_EO_0
:

492 
SAO_TYPE_EO_90
:

493 
SAO_TYPE_EO_135
:

494 
SAO_TYPE_EO_45
:

496 
IÁ64
 
þassDi¡
;

497 
DoubË
 
þassCo¡
;

498 
IÁ
 
þassIdx
=0; cÏssIdx<
NUM_SAO_EO_CLASSES
; classIdx++)

500 if(
þassIdx
==
SAO_CLASS_EO_FULL_VALLEY
 && 
quªtOff£ts
[classIdx] < 0)

502 
quªtOff£ts
[
þassIdx
] =0;

504 if(
þassIdx
==
SAO_CLASS_EO_HALF_VALLEY
 && 
quªtOff£ts
[classIdx] < 0)

506 
quªtOff£ts
[
þassIdx
] =0;

508 if(
þassIdx
==
SAO_CLASS_EO_HALF_PEAK
 && 
quªtOff£ts
[classIdx] > 0)

510 
quªtOff£ts
[
þassIdx
] =0;

512 if(
þassIdx
==
SAO_CLASS_EO_FULL_PEAK
 && 
quªtOff£ts
[classIdx] > 0)

514 
quªtOff£ts
[
þassIdx
] =0;

517 ifÐ
quªtOff£ts
[
þassIdx
] != 0 )

519 
quªtOff£ts
[
þassIdx
] = 
	`e¡I‹rOff£t
Ð
ty³Idc
, 
m_Ïmbda
[
compIdx
], quªtOff£ts[þassIdx], 
¡©D©a
.
couÁ
[þassIdx], stD©a.
diff
[þassIdx], 
shiá
, 
m_off£tS‹pLog2
[compIdx], 
þassDi¡
 , 
þassCo¡
 , 
off£tTh
 );

523 
ty³AuxInfo
 =0;

526 
SAO_TYPE_BO
:

528 
IÁ64
 
di¡BOCÏs£s
[
NUM_SAO_BO_CLASSES
];

529 
DoubË
 
co¡BOCÏs£s
[
NUM_SAO_BO_CLASSES
];

530 ::
	`mem£t
(
di¡BOCÏs£s
, 0, (
IÁ64
)*
NUM_SAO_BO_CLASSES
);

531 
IÁ
 
þassIdx
=0; cÏssIdx< 
NUM_SAO_BO_CLASSES
; classIdx++)

533 
co¡BOCÏs£s
[
þassIdx
]ð
m_Ïmbda
[
compIdx
];

534 ifÐ
quªtOff£ts
[
þassIdx
] != 0 )

536 
quªtOff£ts
[
þassIdx
] = 
	`e¡I‹rOff£t
Ð
ty³Idc
, 
m_Ïmbda
[
compIdx
], quªtOff£ts[þassIdx], 
¡©D©a
.
couÁ
[þassIdx], stD©a.
diff
[þassIdx], 
shiá
, 
m_off£tS‹pLog2
[compIdx], 
di¡BOCÏs£s
[þassIdx], 
co¡BOCÏs£s
[þassIdx], 
off£tTh
 );

541 
DoubË
 
mšCo¡
 = 
MAX_DOUBLE
, 
co¡
;

542 
IÁ
 
bªd
=0; bªd< 
NUM_SAO_BO_CLASSES
- 4+ 1; band++)

544 
co¡
 = 
co¡BOCÏs£s
[
bªd
 ];

545 
co¡
 +ð
co¡BOCÏs£s
[
bªd
+1];

546 
co¡
 +ð
co¡BOCÏs£s
[
bªd
+2];

547 
co¡
 +ð
co¡BOCÏs£s
[
bªd
+3];

549 if(
co¡
 < 
mšCo¡
)

551 
mšCo¡
 = 
co¡
;

552 
ty³AuxInfo
 = 
bªd
;

556 
IÁ
 
þ—rQuªtOff£t
[
NUM_SAO_BO_CLASSES
];

557 ::
	`mem£t
(
þ—rQuªtOff£t
, 0, (
IÁ
)*
NUM_SAO_BO_CLASSES
);

558 
IÁ
 
i
=0; i< 4; i++)

560 
IÁ
 
bªd
 = (
ty³AuxInfo
+
i
)%
NUM_SAO_BO_CLASSES
;

561 
þ—rQuªtOff£t
[
bªd
] = 
quªtOff£ts
[band];

563 ::
	`memýy
(
quªtOff£ts
, 
þ—rQuªtOff£t
, (
IÁ
)*
NUM_SAO_BO_CLASSES
);

568 
	`´štf
("Not‡ supportedype");

569 
	`as£¹
(0);

570 
	`ex™
(-1);

576 
	}
}

578 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$d”iveModeNewRDO
(cÚ¡ 
B™D•ths
 &
b™D•ths
, 
IÁ
 
ùuRsAddr
, 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
], 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, SAOBlkP¬am& 
modeP¬am
, 
DoubË
& 
modeNÜmCo¡
, 
TEncSbac
** 
ÿbacCod”RDO
, IÁ 
šCabacLab–
)

580 
DoubË
 
mšCo¡
, 
co¡
;

581 
UIÁ
 
´eviousWr™‹nB™s
;

582 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

584 
IÁ64
 
di¡
[
MAX_NUM_COMPONENT
], 
modeDi¡
[MAX_NUM_COMPONENT];

585 
SAOOff£t
 
‹¡Off£t
[
MAX_NUM_COMPONENT
];

586 
IÁ
 
švQuªtOff£t
[
MAX_NUM_SAO_CLASSES
];

587 
IÁ
 
comp
=0; com°< 
MAX_NUM_COMPONENT
; comp++)

589 
modeDi¡
[
comp
] = 0;

593 
modeP¬am
[
COMPONENT_Y
].
modeIdc
 = 
SAO_MODE_OFF
;

594 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
šCabacLab–
]);

595 
m_pcRDGoOnSbacCod”
->
	`codeSAOBlkP¬am
(
modeP¬am
, 
b™D•ths
, 
¦iûEÇbËd
, (
m”geLi¡
[
SAO_MERGE_LEFT
]!ð
NULL
), (m”geLi¡[
SAO_MERGE_ABOVE
]!ðNULL), 
Œue
);

596 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_MID
]);

600 cÚ¡ 
CompÚ’tID
 
compIdx
 = 
COMPONENT_Y
;

602 
modeP¬am
[
compIdx
].
modeIdc
 = 
SAO_MODE_OFF
;

603 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

604 
m_pcRDGoOnSbacCod”
->
	`codeSAOOff£tP¬am
(
compIdx
, 
modeP¬am
[compIdx], 
¦iûEÇbËd
[compIdx], 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
]);

605 
modeDi¡
[
compIdx
] = 0;

606 
mšCo¡
ð
m_Ïmbda
[
compIdx
]*((
DoubË
)
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
());

607 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_TEMP
]);

608 if(
¦iûEÇbËd
[
compIdx
])

610 
IÁ
 
ty³Idc
=0;y³Idc< 
NUM_SAO_NEW_TYPES
;ypeIdc++)

612 
‹¡Off£t
[
compIdx
].
modeIdc
 = 
SAO_MODE_NEW
;

613 
‹¡Off£t
[
compIdx
].
ty³Idc
 =ypeIdc;

616 
	`d”iveOff£ts
(
compIdx
, 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
], 
ty³Idc
, 
blkSts
[
ùuRsAddr
][compIdx][ty³Idc], 
‹¡Off£t
[compIdx].
off£t
,e¡Off£t[compIdx].
ty³AuxInfo
);

619 
	`šv”tQuªtOff£ts
(
compIdx
, 
ty³Idc
, 
‹¡Off£t
[compIdx].
ty³AuxInfo
, 
švQuªtOff£t
,e¡Off£t[compIdx].
off£t
);

622 
di¡
[
compIdx
] = 
	`g‘Di¡ÜtiÚ
(
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
], 
‹¡Off£t
[compIdx].
ty³Idc
,e¡Off£t[compIdx].
ty³AuxInfo
, 
švQuªtOff£t
, 
blkSts
[
ùuRsAddr
][compIdx][typeIdc]);

625 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_MID
]);

626 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

627 
m_pcRDGoOnSbacCod”
->
	`codeSAOOff£tP¬am
(
compIdx
, 
‹¡Off£t
[compIdx], 
¦iûEÇbËd
[compIdx], 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_LUMA
]);

628 
IÁ
 
¿‹
 = 
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
();

629 
co¡
 = (
DoubË
)
di¡
[
compIdx
] + 
m_Ïmbda
[compIdx]*((DoubË)
¿‹
);

630 if(
co¡
 < 
mšCo¡
)

632 
mšCo¡
 = 
co¡
;

633 
modeDi¡
[
compIdx
] = 
di¡
[compIdx];

634 
modeP¬am
[
compIdx
]ð
‹¡Off£t
[compIdx];

635 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_TEMP
]);

639 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_TEMP
]);

640 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_MID
]);

645 
co¡
 = 0;

646 
´eviousWr™‹nB™s
 = 0;

647 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

648 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Cb
; compÚ’tIndex < 
numb”OfCompÚ’ts
; componentIndex++)

650 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

652 
modeP¬am
[
compÚ’t
].
modeIdc
 = 
SAO_MODE_OFF
;

653 
modeDi¡
 [
compÚ’t
] = 0;

654 
m_pcRDGoOnSbacCod”
->
	`codeSAOOff£tP¬am
(
compÚ’t
, 
modeP¬am
[compÚ’t], 
¦iûEÇbËd
[compÚ’t], 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_CHROMA
]);

656 cÚ¡ 
UIÁ
 
cu¼’tWr™‹nB™s
 = 
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
();

657 
co¡
 +ð
m_Ïmbda
[
compÚ’t
] * (
cu¼’tWr™‹nB™s
 - 
´eviousWr™‹nB™s
);

658 
´eviousWr™‹nB™s
 = 
cu¼’tWr™‹nB™s
;

661 
mšCo¡
 = 
co¡
;

665 
IÁ
 
ty³Idc
=0;y³Idc< 
NUM_SAO_NEW_TYPES
;ypeIdc++)

667 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_MID
]);

668 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

669 
´eviousWr™‹nB™s
 = 0;

670 
co¡
 = 0;

672 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Cb
; compÚ’tIndex < 
numb”OfCompÚ’ts
; componentIndex++)

674 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

675 if(!
¦iûEÇbËd
[
compÚ’t
])

677 
‹¡Off£t
[
compÚ’t
].
modeIdc
 = 
SAO_MODE_OFF
;

678 
di¡
[
compÚ’t
]= 0;

681 
‹¡Off£t
[
compÚ’t
].
modeIdc
 = 
SAO_MODE_NEW
;

682 
‹¡Off£t
[
compÚ’t
].
ty³Idc
 =ypeIdc;

685 
	`d”iveOff£ts
(
compÚ’t
, 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_CHROMA
], 
ty³Idc
, 
blkSts
[
ùuRsAddr
][compÚ’t][ty³Idc], 
‹¡Off£t
[compÚ’t].
off£t
,e¡Off£t[compÚ’t].
ty³AuxInfo
);

686 
	`šv”tQuªtOff£ts
(
compÚ’t
, 
ty³Idc
, 
‹¡Off£t
[compÚ’t].
ty³AuxInfo
, 
švQuªtOff£t
,e¡Off£t[compÚ’t].
off£t
);

687 
di¡
[
compÚ’t
] = 
	`g‘Di¡ÜtiÚ
(
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_CHROMA
], 
ty³Idc
, 
‹¡Off£t
[compÚ’t].
ty³AuxInfo
, 
švQuªtOff£t
, 
blkSts
[
ùuRsAddr
][component][typeIdc]);

689 
m_pcRDGoOnSbacCod”
->
	`codeSAOOff£tP¬am
(
compÚ’t
, 
‹¡Off£t
[compÚ’t], 
¦iûEÇbËd
[compÚ’t], 
b™D•ths
.
»cÚ
[
CHANNEL_TYPE_CHROMA
]);

691 cÚ¡ 
UIÁ
 
cu¼’tWr™‹nB™s
 = 
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
();

692 
co¡
 +ð
di¡
[
compÚ’t
] + (
m_Ïmbda
[compÚ’t] * (
cu¼’tWr™‹nB™s
 - 
´eviousWr™‹nB™s
));

693 
´eviousWr™‹nB™s
 = 
cu¼’tWr™‹nB™s
;

696 if(
co¡
 < 
mšCo¡
)

698 
mšCo¡
 = 
co¡
;

699 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Cb
; compÚ’tIndex < 
numb”OfCompÚ’ts
; componentIndex++)

701 
modeDi¡
[
compÚ’tIndex
] = 
di¡
[componentIndex];

702 
modeP¬am
[
compÚ’tIndex
] = 
‹¡Off£t
[componentIndex];

709 
modeNÜmCo¡
 = 0;

710 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Y
; compÚ’tIndex < 
numb”OfCompÚ’ts
; componentIndex++)

712 
modeNÜmCo¡
 +ð(
DoubË
)
modeDi¡
[
compÚ’tIndex
] / 
m_Ïmbda
[componentIndex];

715 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
šCabacLab–
]);

716 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

717 
m_pcRDGoOnSbacCod”
->
	`codeSAOBlkP¬am
(
modeP¬am
, 
b™D•ths
, 
¦iûEÇbËd
, (
m”geLi¡
[
SAO_MERGE_LEFT
]!ð
NULL
), (m”geLi¡[
SAO_MERGE_ABOVE
]!ðNULL), 
çl£
);

718 
modeNÜmCo¡
 +ð(
DoubË
)
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
();

719 
	}
}

721 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$d”iveModeM”geRDO
(cÚ¡ 
B™D•ths
 &
b™D•ths
, 
IÁ
 
ùuRsAddr
, 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
], 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, SAOBlkP¬am& 
modeP¬am
, 
DoubË
& 
modeNÜmCo¡
, 
TEncSbac
** 
ÿbacCod”RDO
, IÁ 
šCabacLab–
)

723 
modeNÜmCo¡
 = 
MAX_DOUBLE
;

725 
DoubË
 
co¡
;

726 
SAOBlkP¬am
 
‹¡BlkP¬am
;

727 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

729 
IÁ
 
m”geTy³
=0; m”geTy³< 
NUM_SAO_MERGE_TYPES
; mergeType++)

731 if(
m”geLi¡
[
m”geTy³
] =ð
NULL
)

736 
‹¡BlkP¬am
 = *(
m”geLi¡
[
m”geTy³
]);

738 
DoubË
 
nÜmDi¡
=0;

739 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

741 
‹¡BlkP¬am
[
compIdx
].
modeIdc
 = 
SAO_MODE_MERGE
;

742 
‹¡BlkP¬am
[
compIdx
].
ty³Idc
 = 
m”geTy³
;

744 
SAOOff£t
& 
m”gedOff£tP¬am
 = (*(
m”geLi¡
[
m”geTy³
]))[
compIdx
];

746 ifÐ
m”gedOff£tP¬am
.
modeIdc
 !ð
SAO_MODE_OFF
)

749 
nÜmDi¡
 +ð(((
DoubË
)
	`g‘Di¡ÜtiÚ
(
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(
	`CompÚ’tID
(
compIdx
))], 
m”gedOff£tP¬am
.
ty³Idc
, m”gedOff£tP¬am.
ty³AuxInfo
, m”gedOff£tP¬am.
off£t
, 
blkSts
[
ùuRsAddr
][compIdx][mergedOffsetParam.typeIdc]))

750 /
m_Ïmbda
[
compIdx
]

757 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
šCabacLab–
]);

758 
m_pcRDGoOnSbacCod”
->
	`»£tB™s
();

759 
m_pcRDGoOnSbacCod”
->
	`codeSAOBlkP¬am
(
‹¡BlkP¬am
, 
b™D•ths
, 
¦iûEÇbËd
, (
m”geLi¡
[
SAO_MERGE_LEFT
]!ð
NULL
), (m”geLi¡[
SAO_MERGE_ABOVE
]!ðNULL), 
çl£
);

760 
IÁ
 
¿‹
 = 
m_pcRDGoOnSbacCod”
->
	`g‘Numb”OfWr™‹nB™s
();

762 
co¡
 = 
nÜmDi¡
+(
DoubË
)
¿‹
;

764 if(
co¡
 < 
modeNÜmCo¡
)

766 
modeNÜmCo¡
 = 
co¡
;

767 
modeP¬am
 = 
‹¡BlkP¬am
;

768 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_TEMP
]);

772 
m_pcRDGoOnSbacCod”
->
	`lßd
(
ÿbacCod”RDO
[
SAO_CABACSTATE_BLK_TEMP
]);

773 
	}
}

775 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$decideBlkP¬ams
(
TComPic
* 
pic
, 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, 
TComPicYuv
* 
¤cYuv
, TComPicYuv* 
»sYuv
,

776 
SAOBlkP¬am
* 
»cÚP¬ams
, SAOBlkP¬am* 
codedP¬ams
, cÚ¡ 
BoÞ
 
bTe¡SAODi§bËAtPiùu»Lev–
,

777 cÚ¡ 
DoubË
 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
)

779 
BoÞ
 
®lBlksDi§bËd
 = 
Œue
;

780 cÚ¡ 
IÁ
 
numb”OfCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
);

781 
IÁ
 
compId
 = 
COMPONENT_Y
; compId < 
numb”OfCompÚ’ts
; compId++)

783 ià(
¦iûEÇbËd
[
compId
])

785 
®lBlksDi§bËd
 = 
çl£
;

789 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[ 
SAO_CABACSTATE_PIC_INIT
 ]);

791 
SAOBlkP¬am
 
modeP¬am
;

792 
DoubË
 
mšCo¡
, 
modeCo¡
;

795 
DoubË
 
tÙ®Co¡
 = 0;

797 
IÁ
 
ùuRsAddr
=0; ctuRsAddr< 
m_numCTUsPic
; ctuRsAddr++)

799 if(
®lBlksDi§bËd
)

801 
codedP¬ams
[
ùuRsAddr
].
	`»£t
();

805 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[ 
SAO_CABACSTATE_BLK_CUR
 ]);

808 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
] = { 
NULL
 };

809 
	`g‘M”geLi¡
(
pic
, 
ùuRsAddr
, 
»cÚP¬ams
, 
m”geLi¡
);

811 
mšCo¡
 = 
MAX_DOUBLE
;

812 
IÁ
 
mode
=0; mod< 
NUM_SAO_MODES
; mode++)

814 
mode
)

816 
SAO_MODE_OFF
:

821 
SAO_MODE_NEW
:

823 
	`d”iveModeNewRDO
(
pic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
(), 
ùuRsAddr
, 
m”geLi¡
, 
¦iûEÇbËd
, 
blkSts
, 
modeP¬am
, 
modeCo¡
, 
m_µpcRDSbacCod”
, 
SAO_CABACSTATE_BLK_CUR
);

827 
SAO_MODE_MERGE
:

829 
	`d”iveModeM”geRDO
(
pic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
(), 
ùuRsAddr
, 
m”geLi¡
, 
¦iûEÇbËd
, 
blkSts
 , 
modeP¬am
, 
modeCo¡
, 
m_µpcRDSbacCod”
, 
SAO_CABACSTATE_BLK_CUR
);

834 
	`´štf
("Not‡ supported SAO mode\n");

835 
	`as£¹
(0);

836 
	`ex™
(-1);

840 if(
modeCo¡
 < 
mšCo¡
)

842 
mšCo¡
 = 
modeCo¡
;

843 
codedP¬ams
[
ùuRsAddr
] = 
modeP¬am
;

844 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[ 
SAO_CABACSTATE_BLK_NEXT
 ]);

848 
tÙ®Co¡
 +ð
mšCo¡
;

850 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[ 
SAO_CABACSTATE_BLK_NEXT
 ]);

853 
»cÚP¬ams
[
ùuRsAddr
] = 
codedP¬ams
[ctuRsAddr];

854 
	`»cÚ¡ruùBlkSAOP¬am
(
»cÚP¬ams
[
ùuRsAddr
], 
m”geLi¡
);

855 
	`off£tCTU
(
ùuRsAddr
, 
¤cYuv
, 
»sYuv
, 
»cÚP¬ams
[ùuRsAddr], 
pic
);

858 ià(!
®lBlksDi§bËd
 && (
tÙ®Co¡
 >ð0è&& 
bTe¡SAODi§bËAtPiùu»Lev–
)

860 
IÁ
 
ùuRsAddr
 = 0; ctuRsAdd¸< 
m_numCTUsPic
; ctuRsAddr++)

862 
codedP¬ams
[
ùuRsAddr
].
	`»£t
();

865 
UIÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
MAX_NUM_COMPONENT
; componentIndex++)

867 
¦iûEÇbËd
[
compÚ’tIndex
] = 
çl£
;

870 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[ 
SAO_CABACSTATE_PIC_INIT
 ]);

873 ià(
§oEncodšgR©e
 > 0.0)

875 
IÁ
 
picTempLay”
 = 
pic
->
	`g‘Sliû
(0)->
	`g‘D•th
();

876 
IÁ
 
numCtusFÜSAOOff
[
MAX_NUM_COMPONENT
];

878 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

880 
numCtusFÜSAOOff
[
compIdx
] = 0;

881 
IÁ
 
ùuRsAddr
=0; ctuRsAddr< 
m_numCTUsPic
; ctuRsAddr++)

883 ifÐ
»cÚP¬ams
[
ùuRsAddr
][
compIdx
].
modeIdc
 =ð
SAO_MODE_OFF
)

885 
numCtusFÜSAOOff
[
compIdx
]++;

889 ià(
§oEncodšgR©eChroma
 > 0.0)

891 
IÁ
 
compIdx
 = 0; compIdx < 
numb”OfCompÚ’ts
; compIdx++)

893 
m_§oDi§bËdR©e
[
compIdx
][
picTempLay”
] = (
DoubË
)
numCtusFÜSAOOff
[compIdx]/(DoubË)
m_numCTUsPic
;

896 ià(
picTempLay”
 == 0)

898 
m_§oDi§bËdR©e
[
COMPONENT_Y
][0] = (
DoubË
)(
numCtusFÜSAOOff
[COMPONENT_Y]+numCtusFÜSAOOff[
COMPONENT_Cb
]+numCtusFÜSAOOff[
COMPONENT_Cr
])/(DoubË)(
m_numCTUsPic
*3);

901 
	}
}

904 
Void
 
	gTEncSam¶eAd­tiveOff£t
::
	$g‘BlkSts
(cÚ¡ 
CompÚ’tID
 
compIdx
, cÚ¡ 
IÁ
 
chªÃlB™D•th
, 
SAOStD©a
* 
¡©sD©aTy³s


905 , 
P–
* 
¤cBlk
, P–* 
ÜgBlk
, 
IÁ
 
¤cSŒide
, IÁ 
ÜgSŒide
, IÁ 
width
, IÁ 
height


906 , 
BoÞ
 
isLeáAvaž
, BoÞ 
isRightAvaž
, BoÞ 
isAboveAvaž
, BoÞ 
isB–owAvaž
, BoÞ 
isAboveLeáAvaž
, BoÞ 
isAboveRightAvaž


907 , 
BoÞ
 
isC®cuÏ‹P»DeblockSam¶es


910 if(
m_lšeBufWidth
 !ð
m_maxCUWidth
)

912 
m_lšeBufWidth
 = 
m_maxCUWidth
;

914 ià(
m_signLšeBuf1
)

916 
d–‘e
[] 
m_signLšeBuf1
;

917 
m_signLšeBuf1
 = 
NULL
;

919 
m_signLšeBuf1
 = 
Ãw
 
SCh¬
[
m_lšeBufWidth
+1];

921 ià(
m_signLšeBuf2
)

923 
d–‘e
[] 
m_signLšeBuf2
;

924 
m_signLšeBuf2
 = 
NULL
;

926 
m_signLšeBuf2
 = 
Ãw
 
SCh¬
[
m_lšeBufWidth
+1];

929 
IÁ
 
x
,
y
, 
¡¬tX
, 
¡¬tY
, 
’dX
, 
’dY
, 
edgeTy³
, 
fœ¡LšeS¹X
, 
fœ¡LšeEndX
;

930 
SCh¬
 
signLeá
, 
signRight
, 
signDown
;

931 
IÁ64
 *
diff
, *
couÁ
;

932 
P–
 *
¤cLše
, *
ÜgLše
;

933 
IÁ
* 
skLšesR
 = 
m_skLšesR
[
compIdx
];

934 
IÁ
* 
skLšesB
 = 
m_skLšesB
[
compIdx
];

936 
IÁ
 
ty³Idx
=0;y³Idx< 
NUM_SAO_NEW_TYPES
;ypeIdx++)

938 
SAOStD©a
& 
¡©sD©a
ð
¡©sD©aTy³s
[
ty³Idx
];

939 
¡©sD©a
.
	`»£t
();

941 
¤cLše
 = 
¤cBlk
;

942 
ÜgLše
 = 
ÜgBlk
;

943 
diff
 = 
¡©sD©a
.diff;

944 
couÁ
 = 
¡©sD©a
.count;

945 
ty³Idx
)

947 
SAO_TYPE_EO_0
:

949 
diff
 +=2;

950 
couÁ
+=2;

951 
’dY
 = (
isB–owAvaž
è? (
height
 - 
skLšesB
[
ty³Idx
]) : height;

952 
¡¬tX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isLeáAvaž
 ? 0 : 1)

953 : (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : (width - 1))

955 
’dX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : (width - 1))

956 : (
isRightAvaž
 ? 
width
 : (width - 1))

958 
y
=0; y<
’dY
; y++)

960 
signLeá
 = (
SCh¬
)
	`sgn
(
¤cLše
[
¡¬tX
] - srcLine[startX-1]);

961 
x
=
¡¬tX
; x<
’dX
; x++)

963 
signRight
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - srcLine[x+1]);

964 
edgeTy³
 = 
signRight
 + 
signLeá
;

965 
signLeá
 = -
signRight
;

967 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

968 
couÁ
[
edgeTy³
] ++;

970 
¤cLše
 +ð
¤cSŒide
;

971 
ÜgLše
 +ð
ÜgSŒide
;

973 if(
isC®cuÏ‹P»DeblockSam¶es
)

975 if(
isB–owAvaž
)

977 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1;

978 
’dX
 = 
isRightAvaž
 ? 
width
 : (width -1);

980 
y
=0; y<
skLšesB
[
ty³Idx
]; y++)

982 
signLeá
 = (
SCh¬
)
	`sgn
(
¤cLše
[
¡¬tX
] - srcLine[startX-1]);

983 
x
=
¡¬tX
; x<
’dX
; x++)

985 
signRight
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - srcLine[x+1]);

986 
edgeTy³
 = 
signRight
 + 
signLeá
;

987 
signLeá
 = -
signRight
;

989 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

990 
couÁ
[
edgeTy³
] ++;

992 
¤cLše
 +ð
¤cSŒide
;

993 
ÜgLše
 +ð
ÜgSŒide
;

999 
SAO_TYPE_EO_90
:

1001 
diff
 +=2;

1002 
couÁ
+=2;

1003 
SCh¬
 *
signUpLše
 = 
m_signLšeBuf1
;

1005 
¡¬tX
 = (!
isC®cuÏ‹P»DeblockSam¶es
) ? 0

1006 : (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : width)

1008 
¡¬tY
 = 
isAboveAvaž
 ? 0 : 1;

1009 
’dX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : width)

1010 : 
width


1012 
’dY
 = 
isB–owAvaž
 ? (
height
 - 
skLšesB
[
ty³Idx
]) : (height - 1);

1013 ià(!
isAboveAvaž
)

1015 
¤cLše
 +ð
¤cSŒide
;

1016 
ÜgLše
 +ð
ÜgSŒide
;

1019 
P–
* 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1020 
x
=
¡¬tX
; x<
’dX
; x++)

1022 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLše
[x] - 
¤cLšeAbove
[x]);

1025 
P–
* 
¤cLšeB–ow
;

1026 
y
=
¡¬tY
; y<
’dY
; y++)

1028 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1030 
x
=
¡¬tX
; x<
’dX
; x++)

1032 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x]);

1033 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

1034 
signUpLše
[
x
]ð-
signDown
;

1036 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1037 
couÁ
[
edgeTy³
] ++;

1039 
¤cLše
 +ð
¤cSŒide
;

1040 
ÜgLše
 +ð
ÜgSŒide
;

1042 if(
isC®cuÏ‹P»DeblockSam¶es
)

1044 if(
isB–owAvaž
)

1046 
¡¬tX
 = 0;

1047 
’dX
 = 
width
;

1049 
y
=0; y<
skLšesB
[
ty³Idx
]; y++)

1051 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1052 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1054 
x
=
¡¬tX
; x<
’dX
; x++)

1056 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x]è+ sgn(¤cLše[x] - 
¤cLšeAbove
[x]);

1057 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1058 
couÁ
[
edgeTy³
] ++;

1060 
¤cLše
 +ð
¤cSŒide
;

1061 
ÜgLše
 +ð
ÜgSŒide
;

1068 
SAO_TYPE_EO_135
:

1070 
diff
 +=2;

1071 
couÁ
+=2;

1072 
SCh¬
 *
signUpLše
, *
signDownLše
, *
signTmpLše
;

1074 
signUpLše
 = 
m_signLšeBuf1
;

1075 
signDownLše
ð
m_signLšeBuf2
;

1077 
¡¬tX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isLeáAvaž
 ? 0 : 1)

1078 : (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : (width - 1))

1081 
’dX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]): (width - 1))

1082 : (
isRightAvaž
 ? 
width
 : (width - 1))

1084 
’dY
 = 
isB–owAvaž
 ? (
height
 - 
skLšesB
[
ty³Idx
]) : (height - 1);

1087 
P–
* 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1088 
x
=
¡¬tX
; x<
’dX
+1; x++)

1090 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[x] - 
¤cLše
[x-1]);

1094 
P–
* 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1095 
fœ¡LšeS¹X
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isAboveLeáAvaž
 ? 0 : 1è: 
¡¬tX
;

1096 
fœ¡LšeEndX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isAboveAvaž
 ? 
’dX
 : 1) :ƒndX;

1097 
x
=
fœ¡LšeS¹X
; x<
fœ¡LšeEndX
; x++)

1099 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeAbove
[x-1]è- 
signUpLše
[x+1];

1100 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1101 
couÁ
[
edgeTy³
] ++;

1103 
¤cLše
 +ð
¤cSŒide
;

1104 
ÜgLše
 +ð
ÜgSŒide
;

1108 
y
=1; y<
’dY
; y++)

1110 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1112 
x
=
¡¬tX
; x<
’dX
; x++)

1114 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x+1]);

1115 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

1116 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1117 
couÁ
[
edgeTy³
] ++;

1119 
signDownLše
[
x
+1] = -
signDown
;

1121 
signDownLše
[
¡¬tX
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[¡¬tX] - 
¤cLše
[startX-1]);

1123 
signTmpLše
 = 
signUpLše
;

1124 
signUpLše
 = 
signDownLše
;

1125 
signDownLše
 = 
signTmpLše
;

1127 
¤cLše
 +ð
¤cSŒide
;

1128 
ÜgLše
 +ð
ÜgSŒide
;

1130 if(
isC®cuÏ‹P»DeblockSam¶es
)

1132 if(
isB–owAvaž
)

1134 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1 ;

1135 
’dX
 = 
isRightAvaž
 ? 
width
 : (width -1);

1137 
y
=0; y<
skLšesB
[
ty³Idx
]; y++)

1139 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1140 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1142 
x
=
¡¬tX
; x< 
’dX
; x++)

1144 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x+1]è+ sgn(¤cLše[x] - 
¤cLšeAbove
[x-1]);

1145 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1146 
couÁ
[
edgeTy³
] ++;

1148 
¤cLše
 +ð
¤cSŒide
;

1149 
ÜgLše
 +ð
ÜgSŒide
;

1155 
SAO_TYPE_EO_45
:

1157 
diff
 +=2;

1158 
couÁ
+=2;

1159 
SCh¬
 *
signUpLše
 = 
m_signLšeBuf1
+1;

1161 
¡¬tX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isLeáAvaž
 ? 0 : 1)

1162 : (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : (width - 1))

1164 
’dX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : (width - 1))

1165 : (
isRightAvaž
 ? 
width
 : (width - 1))

1167 
’dY
 = 
isB–owAvaž
 ? (
height
 - 
skLšesB
[
ty³Idx
]) : (height - 1);

1170 
P–
* 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1171 
x
=
¡¬tX
-1; x<
’dX
; x++)

1173 
signUpLše
[
x
] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[x] - 
¤cLše
[x+1]);

1178 
P–
* 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1179 
fœ¡LšeS¹X
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? (
isAboveAvaž
 ? 
¡¬tX
 : 
’dX
)

1180 : 
¡¬tX


1182 
fœ¡LšeEndX
 = (!
isC®cuÏ‹P»DeblockSam¶es
è? ((!
isRightAvaž
 && 
isAboveRightAvaž
è? 
width
 : 
’dX
)

1183 : 
’dX


1185 
x
=
fœ¡LšeS¹X
; x<
fœ¡LšeEndX
; x++)

1187 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeAbove
[x+1]è- 
signUpLše
[x-1];

1188 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1189 
couÁ
[
edgeTy³
] ++;

1192 
¤cLše
 +ð
¤cSŒide
;

1193 
ÜgLše
 +ð
ÜgSŒide
;

1196 
y
=1; y<
’dY
; y++)

1198 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1200 
x
=
¡¬tX
; x<
’dX
; x++)

1202 
signDown
 = (
SCh¬
)
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x-1]);

1203 
edgeTy³
 = 
signDown
 + 
signUpLše
[
x
];

1205 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1206 
couÁ
[
edgeTy³
] ++;

1208 
signUpLše
[
x
-1] = -
signDown
;

1210 
signUpLše
[
’dX
-1] = (
SCh¬
)
	`sgn
(
¤cLšeB–ow
[’dX-1] - 
¤cLše
[endX]);

1211 
¤cLše
 +ð
¤cSŒide
;

1212 
ÜgLše
 +ð
ÜgSŒide
;

1214 if(
isC®cuÏ‹P»DeblockSam¶es
)

1216 if(
isB–owAvaž
)

1218 
¡¬tX
 = 
isLeáAvaž
 ? 0 : 1 ;

1219 
’dX
 = 
isRightAvaž
 ? 
width
 : (width -1);

1221 
y
=0; y<
skLšesB
[
ty³Idx
]; y++)

1223 
¤cLšeB–ow
 = 
¤cLše
 + 
¤cSŒide
;

1224 
¤cLšeAbove
 = 
¤cLše
 - 
¤cSŒide
;

1226 
x
=
¡¬tX
; x<
’dX
; x++)

1228 
edgeTy³
 = 
	`sgn
(
¤cLše
[
x
] - 
¤cLšeB–ow
[x-1]è+ sgn(¤cLše[x] - 
¤cLšeAbove
[x+1]);

1229 
diff
 [
edgeTy³
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1230 
couÁ
[
edgeTy³
] ++;

1232 
¤cLše
 +ð
¤cSŒide
;

1233 
ÜgLše
 +ð
ÜgSŒide
;

1239 
SAO_TYPE_BO
:

1241 
¡¬tX
 = (!
isC®cuÏ‹P»DeblockSam¶es
)?0

1242 :Ð
isRightAvaž
?(
width
- 
skLšesR
[
ty³Idx
]):width)

1244 
’dX
 = (!
isC®cuÏ‹P»DeblockSam¶es
)?(
isRightAvaž
 ? (
width
 - 
skLšesR
[
ty³Idx
]) : width )

1245 :
width


1247 
’dY
 = 
isB–owAvaž
 ? (
height
- 
skLšesB
[
ty³Idx
]) : height;

1248 
IÁ
 
shiáB™s
 = 
chªÃlB™D•th
 - 
NUM_SAO_BO_CLASSES_LOG2
;

1249 
y
=0; y< 
’dY
; y++)

1251 
x
=
¡¬tX
; x< 
’dX
; x++)

1254 
IÁ
 
bªdIdx
ð
¤cLše
[
x
] >> 
shiáB™s
;

1255 
diff
 [
bªdIdx
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1256 
couÁ
[
bªdIdx
] ++;

1258 
¤cLše
 +ð
¤cSŒide
;

1259 
ÜgLše
 +ð
ÜgSŒide
;

1261 if(
isC®cuÏ‹P»DeblockSam¶es
)

1263 if(
isB–owAvaž
)

1265 
¡¬tX
 = 0;

1266 
’dX
 = 
width
;

1268 
y
ð0; y< 
skLšesB
[
ty³Idx
]; y++)

1270 
x
=
¡¬tX
; x< 
’dX
; x++)

1272 
IÁ
 
bªdIdx
ð
¤cLše
[
x
] >> 
shiáB™s
;

1273 
diff
 [
bªdIdx
] +ð(
ÜgLše
[
x
] - 
¤cLše
[x]);

1274 
couÁ
[
bªdIdx
] ++;

1276 
¤cLše
 +ð
¤cSŒide
;

1277 
ÜgLše
 +ð
ÜgSŒide
;

1287 
	`´štf
("Not‡ supported SAOypes\n");

1288 
	`as£¹
(0);

1289 
	`ex™
(-1);

1293 
	}
}

	@source/Lib/TLibEncoder/TEncSampleAdaptiveOffset.h

39 #iâdeà
__TENCSAMPLEADAPTIVEOFFSET__


40 
	#__TENCSAMPLEADAPTIVEOFFSET__


	)

42 
	~"TLibCommÚ/TComSam¶eAd­tiveOff£t.h
"

43 
	~"TLibCommÚ/TComPic.h
"

45 
	~"TEncEÁrÝy.h
"

46 
	~"TEncSbac.h
"

47 
	~"TLibCommÚ/TComB™CouÁ”.h
"

56 
	eSAOCabacS‹LabËsRDO


58 
	mSAO_CABACSTATE_PIC_INIT
 =0,

59 
	mSAO_CABACSTATE_BLK_CUR
,

60 
	mSAO_CABACSTATE_BLK_NEXT
,

61 
	mSAO_CABACSTATE_BLK_MID
,

62 
	mSAO_CABACSTATE_BLK_TEMP
,

63 
	mNUM_SAO_CABACSTATE_LABELS


66 
	sSAOStD©a


68 
IÁ64
 
	mdiff
[
MAX_NUM_SAO_CLASSES
];

69 
IÁ64
 
	mcouÁ
[
MAX_NUM_SAO_CLASSES
];

71 
SAOStD©a
(){}

72 ~
SAOStD©a
(){}

73 
Void
 
»£t
()

75 ::
mem£t
(
diff
, 0, (
IÁ64
)*
MAX_NUM_SAO_CLASSES
);

76 ::
mem£t
(
couÁ
, 0, (
IÁ64
)*
MAX_NUM_SAO_CLASSES
);

78 cÚ¡ 
	mSAOStD©a
& 
	mÝ”©Ü
=(cÚ¡ 
SAOStD©a
& 
¤c
)

80 ::
memýy
(
diff
, 
¤c
.diff, (
IÁ64
)*
MAX_NUM_SAO_CLASSES
);

81 ::
memýy
(
couÁ
, 
¤c
.couÁ, (
IÁ64
)*
MAX_NUM_SAO_CLASSES
);

82  *
	mthis
;

84 cÚ¡ 
	mSAOStD©a
& 
	mÝ”©Ü
+ð(cÚ¡ 
SAOStD©a
& 
¤c
)

86 
IÁ
 
i
=0; 
	mi
< 
	mMAX_NUM_SAO_CLASSES
; i++)

88 
	mdiff
[
i
] +ð
¤c
.
diff
[i];

89 
	mcouÁ
[
i
] +ð
¤c
.
couÁ
[i];

91  *
	mthis
;

95 þas 
	cTEncSam¶eAd­tiveOff£t
 : 
public
 
TComSam¶eAd­tiveOff£t


97 
public
:

98 
TEncSam¶eAd­tiveOff£t
();

99 
	mvœtu®
 ~
TEncSam¶eAd­tiveOff£t
();

102 
Void
 
ü—‹EncD©a
(
BoÞ
 
isP»DBFSam¶esU£d
);

103 
Void
 
de¡royEncD©a
();

104 
Void
 
š™RDOCabacCod”
(
TEncSbac
* 
pcRDGoOnSbacCod”
, 
TComSliû
* 
pcSliû
) ;

105 
Void
 
»£tEncod”DecisiÚs
();

106 
Void
 
SAOProûss
(
TComPic
* 
pPic
, 
BoÞ
* 
¦iûEÇbËd
, cÚ¡ 
DoubË
 *
Ïmbdas
, cÚ¡ BoÞ 
bTe¡SAODi§bËAtPiùu»Lev–
, cÚ¡ DoubË 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
, cÚ¡ BoÞ 
isP»DBFSam¶esU£d
);

107 
	mpublic
:

108 
Void
 
g‘P»DBFSti¡ics
(
TComPic
* 
pPic
);

109 
	m´iv©e
:

110 
Void
 
g‘Sti¡ics
(
SAOStD©a
*** 
blkSts
, 
TComPicYuv
* 
ÜgYuv
, TComPicYuv* 
¤cYuv
,
TComPic
* 
pPic
, 
BoÞ
 
isC®cuÏ‹P»DeblockSam¶es
 = 
çl£
);

111 
Void
 
decidePicP¬ams
(
BoÞ
* 
¦iûEÇbËd
, cÚ¡ 
TComPic
* 
pic
, cÚ¡ 
DoubË
 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
);

112 
Void
 
decideBlkP¬ams
(
TComPic
* 
pic
, 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, 
TComPicYuv
* 
¤cYuv
, TComPicYuv* 
»sYuv
, 
SAOBlkP¬am
* 
»cÚP¬ams
, SAOBlkP¬am* 
codedP¬ams
, cÚ¡ BoÞ 
bTe¡SAODi§bËAtPiùu»Lev–
, cÚ¡ 
DoubË
 
§oEncodšgR©e
, cÚ¡ DoubË 
§oEncodšgR©eChroma
);

113 
Void
 
g‘BlkSts
(cÚ¡ 
CompÚ’tID
 
compIdx
, cÚ¡ 
IÁ
 
chªÃlB™D•th
, 
SAOStD©a
* 
¡©sD©aTy³s
, 
P–
* 
¤cBlk
, P–* 
ÜgBlk
, IÁ 
¤cSŒide
, IÁ 
ÜgSŒide
, IÁ 
width
, IÁ 
height
, 
BoÞ
 
isLeáAvaž
, BoÞ 
isRightAvaž
, BoÞ 
isAboveAvaž
, BoÞ 
isB–owAvaž
, BoÞ 
isAboveLeáAvaž
, BoÞ 
isAboveRightAvaž
, BoÞ 
isC®cuÏ‹P»DeblockSam¶es
);

114 
Void
 
d”iveModeNewRDO
(cÚ¡ 
B™D•ths
 &
b™D•ths
, 
IÁ
 
ùuRsAddr
, 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
], 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, SAOBlkP¬am& 
modeP¬am
, 
DoubË
& 
modeNÜmCo¡
, 
TEncSbac
** 
ÿbacCod”RDO
, IÁ 
šCabacLab–
);

115 
Void
 
d”iveModeM”geRDO
(cÚ¡ 
B™D•ths
 &
b™D•ths
, 
IÁ
 
ùuRsAddr
, 
SAOBlkP¬am
* 
m”geLi¡
[
NUM_SAO_MERGE_TYPES
], 
BoÞ
* 
¦iûEÇbËd
, 
SAOStD©a
*** 
blkSts
, SAOBlkP¬am& 
modeP¬am
, 
DoubË
& 
modeNÜmCo¡
, 
TEncSbac
** 
ÿbacCod”RDO
, IÁ 
šCabacLab–
);

116 
IÁ64
 
g‘Di¡ÜtiÚ
(cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idc
, IÁ 
ty³AuxInfo
, IÁ* 
off£tV®
, 
SAOStD©a
& 
¡©D©a
);

117 
Void
 
d”iveOff£ts
(
CompÚ’tID
 
compIdx
, cÚ¡ 
IÁ
 
chªÃlB™D•th
, IÁ 
ty³Idc
, 
SAOStD©a
& 
¡©D©a
, IÁ* 
quªtOff£ts
, IÁ& 
ty³AuxInfo
);

118 
šlše
 
IÁ64
 
e¡SaoDi¡
(IÁ64 
couÁ
, IÁ64 
off£t
, IÁ64 
diffSum
, 
IÁ
 
shiá
);

119 
šlše
 
IÁ
 
e¡I‹rOff£t
(IÁ 
ty³Idx
, 
DoubË
 
Ïmbda
, IÁ 
off£tIÅut
, 
IÁ64
 
couÁ
, IÁ64 
diffSum
, IÁ 
shiá
, IÁ 
b™Inü—£
, IÁ64& 
be¡Di¡
, DoubË& 
be¡Co¡
, IÁ 
off£tTh
 );

120 
Void
 
addP»DBFSti¡ics
(
SAOStD©a
*** 
blkSts
);

121 
	m´iv©e
:

123 
TEncSbac
** 
m_µpcRDSbacCod”
;

124 
TEncSbac
* 
	mm_pcRDGoOnSbacCod”
;

125 #ià
FAST_BIT_EST


126 
TEncBšCABACCouÁ”
** 
	mm_µpcBšCod”CABAC
;

128 
TEncBšCABAC
** 
	mm_µpcBšCod”CABAC
;

130 
DoubË
 
	mm_Ïmbda
[
MAX_NUM_COMPONENT
];

133 
SAOStD©a
*** 
	mm_¡©D©a
;

134 
SAOStD©a
*** 
	mm_´eDBF¡©D©a
;

135 
DoubË
 
	mm_§oDi§bËdR©e
[
MAX_NUM_COMPONENT
][
MAX_TLAYER
];

136 
IÁ
 
	mm_skLšesR
[
MAX_NUM_COMPONENT
][
NUM_SAO_NEW_TYPES
];

137 
IÁ
 
	mm_skLšesB
[
MAX_NUM_COMPONENT
][
NUM_SAO_NEW_TYPES
];

	@source/Lib/TLibEncoder/TEncSbac.cpp

38 
	~"TEncTÝ.h
"

39 
	~"TEncSbac.h
"

40 
	~"TLibCommÚ/TComTU.h
"

42 
	~<m­
>

43 
	~<®gÜ™hm
>

45 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


46 
	~"../TLibCommÚ/Debug.h
"

57 
	gTEncSbac
::
	$TEncSbac
()

59 : 
	`m_pcB™If
 ( 
NULL
 )

60 , 
	`m_pcBšIf
 ( 
NULL
 )

61 , 
	`m_numCÚ‹xtMod–s
 ( 0 )

62 , 
	`m_cCUS¶™FÏgSCMod–
 ( 1, 1, 
NUM_SPLIT_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

63 , 
	`m_cCUSkFÏgSCMod–
 ( 1, 1, 
NUM_SKIP_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

64 , 
	`m_cCUM”geFÏgExtSCMod–
 ( 1, 1, 
NUM_MERGE_FLAG_EXT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

65 , 
	`m_cCUM”geIdxExtSCMod–
 ( 1, 1, 
NUM_MERGE_IDX_EXT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

66 , 
	`m_cCUP¬tSizeSCMod–
 ( 1, 1, 
NUM_PART_SIZE_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

67 , 
	`m_cCUP»dModeSCMod–
 ( 1, 1, 
NUM_PRED_MODE_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

68 , 
	`m_cCUIÁ¿P»dSCMod–
 ( 1, 1, 
NUM_INTRA_PREDICT_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

69 , 
	`m_cCUChromaP»dSCMod–
 ( 1, 1, 
NUM_CHROMA_PRED_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

70 , 
	`m_cCUD–QpSCMod–
 ( 1, 1, 
NUM_DELTA_QP_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

71 , 
	`m_cCUIÁ”DœSCMod–
 ( 1, 1, 
NUM_INTER_DIR_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

72 , 
	`m_cCURefPicSCMod–
 ( 1, 1, 
NUM_REF_NO_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

73 , 
	`m_cCUMvdSCMod–
 ( 1, 1, 
NUM_MV_RES_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

74 , 
	`m_cCUQtCbfSCMod–
 ( 1, 
NUM_QT_CBF_CTX_SETS
, 
NUM_QT_CBF_CTX_PER_SET
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

75 , 
	`m_cCUT¿nsSubdivFÏgSCMod–
 ( 1, 1, 
NUM_TRANS_SUBDIV_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

76 , 
	`m_cCUQtRoÙCbfSCMod–
 ( 1, 1, 
NUM_QT_ROOT_CBF_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

77 , 
	`m_cCUSigCÛffGroupSCMod–
 ( 1, 2, 
NUM_SIG_CG_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

78 , 
	`m_cCUSigSCMod–
 ( 1, 1, 
NUM_SIG_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

79 , 
	`m_cCuCtxLa¡X
 ( 1, 
NUM_CTX_LAST_FLAG_SETS
, 
NUM_CTX_LAST_FLAG_XY
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

80 , 
	`m_cCuCtxLa¡Y
 ( 1, 
NUM_CTX_LAST_FLAG_SETS
, 
NUM_CTX_LAST_FLAG_XY
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

81 , 
	`m_cCUOÃSCMod–
 ( 1, 1, 
NUM_ONE_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

82 , 
	`m_cCUAbsSCMod–
 ( 1, 1, 
NUM_ABS_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

83 , 
	`m_cMVPIdxSCMod–
 ( 1, 1, 
NUM_MVP_IDX_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

84 , 
	`m_cSaoM”geSCMod–
 ( 1, 1, 
NUM_SAO_MERGE_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

85 , 
	`m_cSaoTy³IdxSCMod–
 ( 1, 1, 
NUM_SAO_TYPE_IDX_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

86 , 
	`m_cT¿nsfÜmSkSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_TRANSFORMSKIP_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

87 , 
	`m_CUT¿nsquªtBy·ssFÏgSCMod–
 ( 1, 1, 
NUM_CU_TRANSQUANT_BYPASS_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

88 , 
	`m_ex¶ic™RdpcmFÏgSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_EXPLICIT_RDPCM_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

89 , 
	`m_ex¶ic™RdpcmDœSCMod–
 ( 1, 
MAX_NUM_CHANNEL_TYPE
, 
NUM_EXPLICIT_RDPCM_DIR_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

90 , 
	`m_cCrossCompÚ’tP»diùiÚSCMod–
 ( 1, 1, 
NUM_CROSS_COMPONENT_PREDICTION_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

91 , 
	`m_ChromaQpAdjFÏgSCMod–
 ( 1, 1, 
NUM_CHROMA_QP_ADJ_FLAG_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

92 , 
	`m_ChromaQpAdjIdcSCMod–
 ( 1, 1, 
NUM_CHROMA_QP_ADJ_IDC_CTX
 , 
m_cÚ‹xtMod–s
 + 
m_numCÚ‹xtMod–s
, m_numContextModels)

94 
	`as£¹
Ð
m_numCÚ‹xtMod–s
 <ð
MAX_NUM_CTX_MOD
 );

95 
	}
}

97 
	gTEncSbac
::~
	$TEncSbac
()

99 
	}
}

105 
Void
 
TEncSbac
::
	$»£tEÁrÝy
 (cÚ¡ 
TComSliû
 *
pSliû
)

107 
IÁ
 
iQp
 = 
pSliû
->
	`g‘SliûQp
();

108 
SliûTy³
 
eSliûTy³
 = 
pSliû
->
	`g‘SliûTy³
();

110 
SliûTy³
 
’cCABACTabËIdx
 = 
pSliû
->
	`g‘EncCABACTabËIdx
();

111 ià(!
pSliû
->
	`isIÁ¿
(è&& (
’cCABACTabËIdx
==
B_SLICE
 ||ƒncCABACTabËIdx==
P_SLICE
è&&…Sliû->
	`g‘PPS
()->
	`g‘CabacIn™P»£ÁFÏg
())

113 
eSliûTy³
 = 
’cCABACTabËIdx
;

116 
m_cCUS¶™FÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SPLIT_FLAG
 );

117 
m_cCUSkFÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SKIP_FLAG
 );

118 
m_cCUM”geFÏgExtSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_MERGE_FLAG_EXT
);

119 
m_cCUM”geIdxExtSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_MERGE_IDX_EXT
);

120 
m_cCUP¬tSizeSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_PART_SIZE
 );

121 
m_cCUP»dModeSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_PRED_MODE
 );

122 
m_cCUIÁ¿P»dSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_INTRA_PRED_MODE
 );

123 
m_cCUChromaP»dSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_CHROMA_PRED_MODE
 );

124 
m_cCUIÁ”DœSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_INTER_DIR
 );

125 
m_cCUMvdSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_MVD
 );

126 
m_cCURefPicSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_REF_PIC
 );

127 
m_cCUD–QpSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_DQP
 );

128 
m_cCUQtCbfSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_QT_CBF
 );

129 
m_cCUQtRoÙCbfSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_QT_ROOT_CBF
 );

130 
m_cCUSigCÛffGroupSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SIG_CG_FLAG
 );

131 
m_cCUSigSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SIG_FLAG
 );

132 
m_cCuCtxLa¡X
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_LAST
 );

133 
m_cCuCtxLa¡Y
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_LAST
 );

134 
m_cCUOÃSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_ONE_FLAG
 );

135 
m_cCUAbsSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_ABS_FLAG
 );

136 
m_cMVPIdxSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_MVP_IDX
 );

137 
m_cCUT¿nsSubdivFÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_TRANS_SUBDIV_FLAG
 );

138 
m_cSaoM”geSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SAO_MERGE_FLAG
 );

139 
m_cSaoTy³IdxSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_SAO_TYPE_IDX
 );

140 
m_cT¿nsfÜmSkSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_TRANSFORMSKIP_FLAG
 );

141 
m_CUT¿nsquªtBy·ssFÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_CU_TRANSQUANT_BYPASS_FLAG
 );

142 
m_ex¶ic™RdpcmFÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_FLAG
);

143 
m_ex¶ic™RdpcmDœSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_DIR
);

144 
m_cCrossCompÚ’tP»diùiÚSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_CROSS_COMPONENT_PREDICTION
 );

145 
m_ChromaQpAdjFÏgSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_FLAG
 );

146 
m_ChromaQpAdjIdcSCMod–
.
	`š™Bufãr
 ( 
eSliûTy³
, 
iQp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_IDC
 );

148 
UIÁ
 
¡©i¡icIndex
 = 0; sti¡icIndex < 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
 ; statisticIndex++)

150 
m_gÞombRiûAd­tiÚSti¡ics
[
¡©i¡icIndex
] = 0;

153 
m_pcBšIf
->
	`¡¬t
();

156 
	}
}

162 
SliûTy³
 
	gTEncSbac
::
	$d‘”mšeCabacIn™Idx
(cÚ¡ 
TComSliû
 *
pSliû
)

164 
IÁ
 
qp
 = 
pSliû
->
	`g‘SliûQp
();

166 ià(!
pSliû
->
	`isIÁ¿
())

168 
SliûTy³
 
aSliûTy³Choiûs
[] = {
B_SLICE
, 
P_SLICE
};

170 
UIÁ
 
be¡Co¡
 = 
MAX_UINT
;

171 
SliûTy³
 
be¡SliûTy³
 = 
aSliûTy³Choiûs
[0];

172 
UIÁ
 
idx
=0; idx<2; idx++)

174 
UIÁ
 
curCo¡
 = 0;

175 
SliûTy³
 
curSliûTy³
 = 
aSliûTy³Choiûs
[
idx
];

177 
curCo¡
 = 
m_cCUS¶™FÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SPLIT_FLAG
 );

178 
curCo¡
 +ð
m_cCUSkFÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SKIP_FLAG
 );

179 
curCo¡
 +ð
m_cCUM”geFÏgExtSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_MERGE_FLAG_EXT
);

180 
curCo¡
 +ð
m_cCUM”geIdxExtSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_MERGE_IDX_EXT
);

181 
curCo¡
 +ð
m_cCUP¬tSizeSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_PART_SIZE
 );

182 
curCo¡
 +ð
m_cCUP»dModeSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_PRED_MODE
 );

183 
curCo¡
 +ð
m_cCUIÁ¿P»dSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_INTRA_PRED_MODE
 );

184 
curCo¡
 +ð
m_cCUChromaP»dSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_PRED_MODE
 );

185 
curCo¡
 +ð
m_cCUIÁ”DœSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_INTER_DIR
 );

186 
curCo¡
 +ð
m_cCUMvdSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_MVD
 );

187 
curCo¡
 +ð
m_cCURefPicSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_REF_PIC
 );

188 
curCo¡
 +ð
m_cCUD–QpSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_DQP
 );

189 
curCo¡
 +ð
m_cCUQtCbfSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_QT_CBF
 );

190 
curCo¡
 +ð
m_cCUQtRoÙCbfSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_QT_ROOT_CBF
 );

191 
curCo¡
 +ð
m_cCUSigCÛffGroupSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SIG_CG_FLAG
 );

192 
curCo¡
 +ð
m_cCUSigSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SIG_FLAG
 );

193 
curCo¡
 +ð
m_cCuCtxLa¡X
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_LAST
 );

194 
curCo¡
 +ð
m_cCuCtxLa¡Y
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_LAST
 );

195 
curCo¡
 +ð
m_cCUOÃSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_ONE_FLAG
 );

196 
curCo¡
 +ð
m_cCUAbsSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_ABS_FLAG
 );

197 
curCo¡
 +ð
m_cMVPIdxSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_MVP_IDX
 );

198 
curCo¡
 +ð
m_cCUT¿nsSubdivFÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_TRANS_SUBDIV_FLAG
 );

199 
curCo¡
 +ð
m_cSaoM”geSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SAO_MERGE_FLAG
 );

200 
curCo¡
 +ð
m_cSaoTy³IdxSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_SAO_TYPE_IDX
 );

201 
curCo¡
 +ð
m_cT¿nsfÜmSkSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_TRANSFORMSKIP_FLAG
 );

202 
curCo¡
 +ð
m_CUT¿nsquªtBy·ssFÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_CU_TRANSQUANT_BYPASS_FLAG
 );

203 
curCo¡
 +ð
m_ex¶ic™RdpcmFÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_FLAG
);

204 
curCo¡
 +ð
m_ex¶ic™RdpcmDœSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_EXPLICIT_RDPCM_DIR
);

205 
curCo¡
 +ð
m_cCrossCompÚ’tP»diùiÚSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_CROSS_COMPONENT_PREDICTION
 );

206 
curCo¡
 +ð
m_ChromaQpAdjFÏgSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_FLAG
 );

207 
curCo¡
 +ð
m_ChromaQpAdjIdcSCMod–
.
	`ÿlcCo¡
 ( 
curSliûTy³
, 
qp
, (
UCh¬
*)
INIT_CHROMA_QP_ADJ_IDC
 );

209 ià(
curCo¡
 < 
be¡Co¡
)

211 
be¡SliûTy³
 = 
curSliûTy³
;

212 
be¡Co¡
 = 
curCo¡
;

215  
be¡SliûTy³
;

219  
I_SLICE
;

221 
	}
}

223 
Void
 
	gTEncSbac
::
	$codeVPS
ÐcÚ¡ 
TComVPS
* )

225 
	`as£¹
 (0);

227 
	}
}

229 
Void
 
	gTEncSbac
::
	$codeSPS
ÐcÚ¡ 
TComSPS
* )

231 
	`as£¹
 (0);

233 
	}
}

235 
Void
 
	gTEncSbac
::
	$codePPS
ÐcÚ¡ 
TComPPS
* )

237 
	`as£¹
 (0);

239 
	}
}

241 
Void
 
	gTEncSbac
::
	$codeSliûH—d”
Ð
TComSliû
* )

243 
	`as£¹
 (0);

245 
	}
}

247 
Void
 
	gTEncSbac
::
	$codeTžesWPPEÁryPošt
Ð
TComSliû
* )

249 
	`as£¹
 (0);

251 
	}
}

253 
Void
 
	gTEncSbac
::
	$codeT”mš©šgB™
Ð
UIÁ
 
užsLa¡
 )

255 
m_pcBšIf
->
	`’codeBšTrm
Ð
užsLa¡
 );

256 
	}
}

258 
Void
 
	gTEncSbac
::
	$codeSliûFšish
()

260 
m_pcBšIf
->
	`fšish
();

261 
	}
}

263 
Void
 
	gTEncSbac
::
	$xWr™eUÇrySymbÞ
Ð
UIÁ
 
uiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
 )

265 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
 ? 1 : 0, 
pcSCMod–
[0] );

267 ifÐ0 =ð
uiSymbÞ
)

272  
uiSymbÞ
-- )

274 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
 ? 1 : 0, 
pcSCMod–
[ 
iOff£t
 ] );

278 
	}
}

280 
Void
 
	gTEncSbac
::
	$xWr™eUÇryMaxSymbÞ
Ð
UIÁ
 
uiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
 )

282 ià(
uiMaxSymbÞ
 == 0)

287 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
 ? 1 : 0, 
pcSCMod–
[ 0 ] );

289 iàÐ
uiSymbÞ
 == 0 )

294 
BoÞ
 
bCodeLa¡
 = ( 
uiMaxSymbÞ
 > 
uiSymbÞ
 );

296  --
uiSymbÞ
 )

298 
m_pcBšIf
->
	`’codeBš
Ð1, 
pcSCMod–
[ 
iOff£t
 ] );

300 ifÐ
bCodeLa¡
 )

302 
m_pcBšIf
->
	`’codeBš
Ð0, 
pcSCMod–
[ 
iOff£t
 ] );

306 
	}
}

308 
Void
 
	gTEncSbac
::
	$xWr™eEpExGÞomb
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCouÁ
 )

310 
UIÁ
 
bšs
 = 0;

311 
IÁ
 
numBšs
 = 0;

313  
uiSymbÞ
 >ð(
UIÁ
)(1<<
uiCouÁ
) )

315 
bšs
 = 2 * bins + 1;

316 
numBšs
++;

317 
uiSymbÞ
 -ð1 << 
uiCouÁ
;

318 
uiCouÁ
 ++;

320 
bšs
 = 2 * bins + 0;

321 
numBšs
++;

323 
bšs
 = (bš << 
uiCouÁ
è| 
uiSymbÞ
;

324 
numBšs
 +ð
uiCouÁ
;

326 
	`as£¹
Ð
numBšs
 <= 32 );

327 
m_pcBšIf
->
	`’codeBšsEP
Ð
bšs
, 
numBšs
 );

328 
	}
}

337 
Void
 
	gTEncSbac
::
	$xWr™eCÛfRemašExGÞomb
 ( 
UIÁ
 
symbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 )

339 
IÁ
 
codeNumb”
 = (IÁ)
symbÞ
;

340 
UIÁ
 
Ëngth
;

342 ià(
codeNumb”
 < (
COEF_REMAIN_BIN_REDUCTION
 << 
rP¬am
))

344 
Ëngth
 = 
codeNumb”
>>
rP¬am
;

345 
m_pcBšIf
->
	`’codeBšsEP
Ð(1<<(
Ëngth
+1))-2 ,†ength+1);

346 
m_pcBšIf
->
	`’codeBšsEP
((
codeNumb”
%(1<<
rP¬am
)),rParam);

348 ià(
u£Lim™edP»fixL’gth
)

350 cÚ¡ 
UIÁ
 
maximumP»fixL’gth
 = (32 - (
COEF_REMAIN_BIN_REDUCTION
 + 
maxLog2TrDyÇmicRªge
));

352 
UIÁ
 
´efixL’gth
 = 0;

353 
UIÁ
 
suffixL’gth
 = 
MAX_UINT
;

354 
UIÁ
 
codeV®ue
 = (
symbÞ
 >> 
rP¬am
è- 
COEF_REMAIN_BIN_REDUCTION
;

356 ià(
codeV®ue
 >ð((1 << 
maximumP»fixL’gth
) - 1))

358 
´efixL’gth
 = 
maximumP»fixL’gth
;

359 
suffixL’gth
 = 
maxLog2TrDyÇmicRªge
 - 
rP¬am
;

363 
codeV®ue
 > ((2 << 
´efixL’gth
) - 2))

365 
´efixL’gth
++;

368 
suffixL’gth
 = 
´efixL’gth
 + 1;

371 cÚ¡ 
UIÁ
 
suffix
 = 
codeV®ue
 - ((1 << 
´efixL’gth
) - 1);

373 cÚ¡ 
UIÁ
 
tÙ®P»fixL’gth
 = 
´efixL’gth
 + 
COEF_REMAIN_BIN_REDUCTION
;

374 cÚ¡ 
UIÁ
 
´efix
 = (1 << 
tÙ®P»fixL’gth
) - 1;

375 cÚ¡ 
UIÁ
 
rP¬amB™Mask
 = (1 << 
rP¬am
) - 1;

377 
m_pcBšIf
->
	`’codeBšsEP
Ð
´efix
, 
tÙ®P»fixL’gth
 );

378 
m_pcBšIf
->
	`’codeBšsEP
(((
suffix
 << 
rP¬am
è| (
symbÞ
 & 
rP¬amB™Mask
)), (
suffixL’gth
 +„Param));

382 
Ëngth
 = 
rP¬am
;

383 
codeNumb”
 = codeNumb” - ( 
COEF_REMAIN_BIN_REDUCTION
 << 
rP¬am
);

385 
codeNumb”
 >ð(1<<
Ëngth
))

387 
codeNumb”
 -ð(1<<(
Ëngth
++));

390 
m_pcBšIf
->
	`’codeBšsEP
((1<<(
COEF_REMAIN_BIN_REDUCTION
+
Ëngth
+1-
rP¬am
))-2,COEF_REMAIN_BIN_REDUCTION+length+1-rParam);

391 
m_pcBšIf
->
	`’codeBšsEP
(
codeNumb”
,
Ëngth
);

393 
	}
}

396 
Void
 
	gTEncSbac
::
	$lßd
 ( cÚ¡ 
TEncSbac
* 
pSrc
)

398 
this
->
	`xCÝyFrom
(
pSrc
);

399 
	}
}

401 
Void
 
	gTEncSbac
::
	$lßdIÁ¿DœMode
ÐcÚ¡ 
TEncSbac
* 
pSrc
, cÚ¡ 
ChªÃlTy³
 
chTy³
 )

403 
m_pcBšIf
->
	`cÝyS‹
Ð
pSrc
->m_pcBinIf );

404 ià(
	`isLuma
(
chTy³
))

406 
this
->
m_cCUIÁ¿P»dSCMod–
 .
	`cÝyFrom
Ð&
pSrc
->m_cCUIntraPredSCModel );

410 
this
->
m_cCUChromaP»dSCMod–
 .
	`cÝyFrom
Ð&
pSrc
->m_cCUChromaPredSCModel );

412 
	}
}

415 
Void
 
	gTEncSbac
::
	$¡Üe
Ð
TEncSbac
* 
pDe¡
) const

417 
pDe¡
->
	`xCÝyFrom
Ð
this
 );

418 
	}
}

421 
Void
 
	gTEncSbac
::
	$xCÝyFrom
ÐcÚ¡ 
TEncSbac
* 
pSrc
 )

423 
m_pcBšIf
->
	`cÝyS‹
Ð
pSrc
->m_pcBinIf );

424 
	`xCÝyCÚ‹xtsFrom
(
pSrc
);

425 
	}
}

427 
Void
 
	gTEncSbac
::
	$codeMVPIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

429 
IÁ
 
iSymbÞ
 = 
pcCU
->
	`g‘MVPIdx
(
eRefLi¡
, 
uiAbsP¬tIdx
);

430 
IÁ
 
iNum
 = 
AMVP_MAX_NUM_CANDS
;

432 
	`xWr™eUÇryMaxSymbÞ
(
iSymbÞ
, 
m_cMVPIdxSCMod–
.
	`g‘
(0), 1, 
iNum
-1);

433 
	}
}

435 
Void
 
	gTEncSbac
::
	$codeP¬tSize
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

437 
P¬tSize
 
eSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiAbsP¬tIdx
 );

438 cÚ¡ 
UIÁ
 
log2DiffMaxMšCodšgBlockSize
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Log2DiffMaxMšCodšgBlockSize
();

440 iàÐ
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) )

442 ifÐ
uiD•th
 =ð
log2DiffMaxMšCodšgBlockSize
 )

444 
m_pcBšIf
->
	`’codeBš
Ð
eSize
 =ð
SIZE_2Nx2N
? 1 : 0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 0 ) );

449 
eSize
)

451 
SIZE_2Nx2N
:

453 
m_pcBšIf
->
	`’codeBš
Ð1, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 0) );

456 
SIZE_2NxN
:

457 
SIZE_2NxnU
:

458 
SIZE_2NxnD
:

460 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 0) );

461 
m_pcBšIf
->
	`’codeBš
Ð1, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 1) );

462 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£AMP
(è&& 
uiD•th
 < 
log2DiffMaxMšCodšgBlockSize
 )

464 ià(
eSize
 =ð
SIZE_2NxN
)

466 
m_pcBšIf
->
	`’codeBš
(1, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 3 ));

470 
m_pcBšIf
->
	`’codeBš
(0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 3 ));

471 
m_pcBšIf
->
	`’codeBšEP
((
eSize
 =ð
SIZE_2NxnU
? 0: 1));

476 
SIZE_Nx2N
:

477 
SIZE_nLx2N
:

478 
SIZE_nRx2N
:

480 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 0) );

481 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 1) );

483 ifÐ
uiD•th
 =ð
log2DiffMaxMšCodšgBlockSize
 && !Ð
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è=ð8 &&…cCU->
	`g‘Height
(uiAbsPartIdx) == 8 ) )

485 
m_pcBšIf
->
	`’codeBš
Ð1, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 2) );

488 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘U£AMP
(è&& 
uiD•th
 < 
log2DiffMaxMšCodšgBlockSize
 )

490 ià(
eSize
 =ð
SIZE_Nx2N
)

492 
m_pcBšIf
->
	`’codeBš
(1, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 3 ));

496 
m_pcBšIf
->
	`’codeBš
(0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 3 ));

497 
m_pcBšIf
->
	`’codeBšEP
((
eSize
 =ð
SIZE_nLx2N
? 0: 1));

502 
SIZE_NxN
:

504 ifÐ
uiD•th
 =ð
log2DiffMaxMšCodšgBlockSize
 && !Ð
pcCU
->
	`g‘Width
(
uiAbsP¬tIdx
è=ð8 &&…cCU->
	`g‘Height
(uiAbsPartIdx) == 8 ) )

506 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 0) );

507 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 1) );

508 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUP¬tSizeSCMod–
.
	`g‘
( 0, 0, 2) );

514 
	`as£¹
(0);

518 
	}
}

526 
Void
 
	gTEncSbac
::
	$codeP»dMode
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

529 
m_pcBšIf
->
	`’codeBš
Ð
pcCU
->
	`isIÁ¿
Ð
uiAbsP¬tIdx
 ) ? 1 : 0, 
m_cCUP»dModeSCMod–
.
	`g‘
( 0, 0, 0 ) );

530 
	}
}

532 
Void
 
	gTEncSbac
::
	$codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

534 
UIÁ
 
uiSymbÞ
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
);

535 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, 
m_CUT¿nsquªtBy·ssFÏgSCMod–
.
	`g‘
( 0, 0, 0 ) );

536 
	}
}

543 
Void
 
	gTEncSbac
::
	$codeSkFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

546 
UIÁ
 
uiSymbÞ
 = 
pcCU
->
	`isSk³d
Ð
uiAbsP¬tIdx
 ) ? 1 : 0;

547 
UIÁ
 
uiCtxSk
 = 
pcCU
->
	`g‘CtxSkFÏg
Ð
uiAbsP¬tIdx
 ) ;

548 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, 
m_cCUSkFÏgSCMod–
.
	`g‘
Ð0, 0, 
uiCtxSk
 ) );

549 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

550 
	`DTRACE_CABAC_T
( "\tSkipFlag" );

551 
	`DTRACE_CABAC_T
( "\tuiCtxSkip: ");

552 
	`DTRACE_CABAC_V
Ð
uiCtxSk
 );

553 
	`DTRACE_CABAC_T
( "\tuiSymbol: ");

554 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 );

555 
	`DTRACE_CABAC_T
( "\n");

556 
	}
}

563 
Void
 
	gTEncSbac
::
	$codeM”geFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

565 cÚ¡ 
UIÁ
 
uiSymbÞ
 = 
pcCU
->
	`g‘M”geFÏg
Ð
uiAbsP¬tIdx
 ) ? 1 : 0;

566 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, *
m_cCUM”geFÏgExtSCMod–
.
	`g‘
( 0 ) );

568 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

569 
	`DTRACE_CABAC_T
( "\tMergeFlag: " );

570 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 );

571 
	`DTRACE_CABAC_T
( "\tAddress: " );

572 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() );

573 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx: " );

574 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 );

575 
	`DTRACE_CABAC_T
( "\n" );

576 
	}
}

583 
Void
 
	gTEncSbac
::
	$codeM”geIndex
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

585 
UIÁ
 
uiUÇryIdx
 = 
pcCU
->
	`g‘M”geIndex
Ð
uiAbsP¬tIdx
 );

586 
UIÁ
 
uiNumCªd
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘MaxNumM”geCªd
();

587 iàÐ
uiNumCªd
 > 1 )

589  
UIÁ
 
ui
 = 0; u˜< 
uiNumCªd
 - 1; ++ui )

591 cÚ¡ 
UIÁ
 
uiSymbÞ
 = 
ui
 =ð
uiUÇryIdx
 ? 0 : 1;

592 iàÐ
ui
==0 )

594 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, 
m_cCUM”geIdxExtSCMod–
.
	`g‘
( 0, 0, 0 ) );

598 
m_pcBšIf
->
	`’codeBšEP
Ð
uiSymbÞ
 );

600 ifÐ
uiSymbÞ
 == 0 )

606 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

607 
	`DTRACE_CABAC_T
( "\tparseMergeIndex()" );

608 
	`DTRACE_CABAC_T
( "\tuiMRGIdx= " );

609 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘M”geIndex
Ð
uiAbsP¬tIdx
 ) );

610 
	`DTRACE_CABAC_T
( "\n" );

611 
	}
}

613 
Void
 
	gTEncSbac
::
	$codeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 )

615 ifÐ
uiD•th
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Log2DiffMaxMšCodšgBlockSize
() )

620 
UIÁ
 
uiCtx
 = 
pcCU
->
	`g‘CtxS¶™FÏg
Ð
uiAbsP¬tIdx
, 
uiD•th
 );

621 
UIÁ
 
uiCu¼S¶™FÏg
 = ( 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 ) > 
uiD•th
 ) ? 1 : 0;

623 
	`as£¹
Ð
uiCtx
 < 3 );

624 
m_pcBšIf
->
	`’codeBš
Ð
uiCu¼S¶™FÏg
, 
m_cCUS¶™FÏgSCMod–
.
	`g‘
Ð0, 0, 
uiCtx
 ) );

625 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

626 
	`DTRACE_CABAC_T
( "\tSplitFlag\n" )

628 
	}
}

630 
Void
 
	gTEncSbac
::
	$codeT¿nsfÜmSubdivFÏg
Ð
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 )

632 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, 
m_cCUT¿nsSubdivFÏgSCMod–
.
	`g‘
Ð0, 0, 
uiCtx
 ) );

633 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

634 
	`DTRACE_CABAC_T
( "\tparseTransformSubdivFlag()" )

635 
	`DTRACE_CABAC_T
( "\tsymbol=" )

636 
	`DTRACE_CABAC_V
Ð
uiSymbÞ
 )

637 
	`DTRACE_CABAC_T
( "\tctx=" )

638 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

639 
	`DTRACE_CABAC_T
( "\n" )

640 
	}
}

643 
Void
 
	gTEncSbac
::
	$codeIÁ¿DœLumaAng
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
isMuÉË
)

645 
UIÁ
 
dœ
[4],
j
;

646 
IÁ
 
´eds
[4][
NUM_MOST_PROBABLE_MODES
] = {{-1, -1, -1},{-1, -1, -1},{-1, -1, -1},{-1, -1, -1}};

647 
IÁ
 
´edIdx
[4] ={ -1,-1,-1,-1};

648 
P¬tSize
 
mode
 = 
pcCU
->
	`g‘P¬t™iÚSize
Ð
absP¬tIdx
 );

649 
UIÁ
 
·¹Num
 = 
isMuÉË
?(
mode
==
SIZE_NxN
?4:1):1;

650 
UIÁ
 
·¹Off£t
 = ( 
pcCU
->
	`g‘Pic
()->
	`g‘NumP¬t™iÚsInCtu
(è>> (…cCU->
	`g‘D•th
(
absP¬tIdx
) << 1 ) ) >> 2;

651 
j
=0;j<
·¹Num
;j++)

653 
dœ
[
j
] = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_LUMA
, 
absP¬tIdx
+
·¹Off£t
*j );

654 
pcCU
->
	`g‘IÁ¿DœP»diùÜ
(
absP¬tIdx
+
·¹Off£t
*
j
, 
´eds
[j], 
COMPONENT_Y
);

655 
UIÁ
 
i
 = 0; i < 
NUM_MOST_PROBABLE_MODES
; i++)

657 if(
dœ
[
j
] =ð
´eds
[j][
i
])

659 
´edIdx
[
j
] = 
i
;

662 
m_pcBšIf
->
	`’codeBš
((
´edIdx
[
j
] !ð-1)? 1 : 0, 
m_cCUIÁ¿P»dSCMod–
.
	`g‘
( 0, 0, 0 ) );

664 
j
=0;j<
·¹Num
;j++)

666 if(
´edIdx
[
j
] != -1)

668 
m_pcBšIf
->
	`’codeBšEP
Ð
´edIdx
[
j
] ? 1 : 0 );

669 ià(
´edIdx
[
j
])

671 
m_pcBšIf
->
	`’codeBšEP
Ð
´edIdx
[
j
]-1 );

676 ià(
´eds
[
j
][0] >…reds[j][1])

678 
¡d
::
	`sw­
(
´eds
[
j
][0],…reds[j][1]);

680 ià(
´eds
[
j
][0] >…reds[j][2])

682 
¡d
::
	`sw­
(
´eds
[
j
][0],…reds[j][2]);

684 ià(
´eds
[
j
][1] >…reds[j][2])

686 
¡d
::
	`sw­
(
´eds
[
j
][1],…reds[j][2]);

688 
IÁ
 
i
 = (
	`IÁ
(
NUM_MOST_PROBABLE_MODES
) - 1); i >= 0; i--)

690 
dœ
[
j
] = dœ[j] > 
´eds
[j][
i
] ? dir[j] - 1 : dir[j];

692 
m_pcBšIf
->
	`’codeBšsEP
Ð
dœ
[
j
], 5 );

696 
	}
}

698 
Void
 
	gTEncSbac
::
	$codeIÁ¿DœChroma
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

700 
UIÁ
 
uiIÁ¿DœChroma
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_CHROMA
, 
uiAbsP¬tIdx
 );

702 ifÐ
uiIÁ¿DœChroma
 =ð
DM_CHROMA_IDX
 )

704 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cCUChromaP»dSCMod–
.
	`g‘
( 0, 0, 0 ) );

708 
m_pcBšIf
->
	`’codeBš
Ð1, 
m_cCUChromaP»dSCMod–
.
	`g‘
( 0, 0, 0 ) );

710 
UIÁ
 
uiAÎowedChromaDœ
[ 
NUM_CHROMA_MODE
 ];

711 
pcCU
->
	`g‘AÎowedChromaDœ
Ð
uiAbsP¬tIdx
, 
uiAÎowedChromaDœ
 );

713  
IÁ
 
i
 = 0; i < 
NUM_CHROMA_MODE
 - 1; i++ )

715 ifÐ
uiIÁ¿DœChroma
 =ð
uiAÎowedChromaDœ
[
i
] )

717 
uiIÁ¿DœChroma
 = 
i
;

722 
m_pcBšIf
->
	`’codeBšsEP
Ð
uiIÁ¿DœChroma
, 2 );

726 
	}
}

729 
Void
 
	gTEncSbac
::
	$codeIÁ”Dœ
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

731 cÚ¡ 
UIÁ
 
uiIÁ”Dœ
 = 
pcCU
->
	`g‘IÁ”Dœ
Ð
uiAbsP¬tIdx
 ) - 1;

732 cÚ¡ 
UIÁ
 
uiCtx
 = 
pcCU
->
	`g‘CtxIÁ”Dœ
Ð
uiAbsP¬tIdx
 );

733 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCUIÁ”DœSCMod–
.
	`g‘
( 0 );

735 ià(
pcCU
->
	`g‘P¬t™iÚSize
(
uiAbsP¬tIdx
è=ð
SIZE_2Nx2N
 ||…cCU->
	`g‘Height
(uiAbsPartIdx) != 8 )

737 
m_pcBšIf
->
	`’codeBš
Ð
uiIÁ”Dœ
 =ð2 ? 1 : 0, *Ð
pCtx
 + 
uiCtx
 ) );

740 ià(
uiIÁ”Dœ
 < 2)

742 
m_pcBšIf
->
	`’codeBš
Ð
uiIÁ”Dœ
, *Ð
pCtx
 + 4 ) );

746 
	}
}

748 
Void
 
	gTEncSbac
::
	$codeRefFrmIdx
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

750 
IÁ
 
iRefF¿me
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 )->
	`g‘RefIdx
Ð
uiAbsP¬tIdx
 );

751 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCURefPicSCMod–
.
	`g‘
( 0 );

752 
m_pcBšIf
->
	`’codeBš
ÐÐ
iRefF¿me
 =ð0 ? 0 : 1 ), *
pCtx
 );

754 ifÐ
iRefF¿me
 > 0 )

756 
UIÁ
 
uiRefNum
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
Ð
eRefLi¡
 ) - 2;

757 
pCtx
++;

758 
iRefF¿me
--;

759  
UIÁ
 
ui
 = 0; u˜< 
uiRefNum
; ++ui )

761 cÚ¡ 
UIÁ
 
uiSymbÞ
 = 
ui
 =ð
iRefF¿me
 ? 0 : 1;

762 ifÐ
ui
 == 0 )

764 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, *
pCtx
 );

768 
m_pcBšIf
->
	`’codeBšEP
Ð
uiSymbÞ
 );

770 ifÐ
uiSymbÞ
 == 0 )

777 
	}
}

779 
Void
 
	gTEncSbac
::
	$codeMvd
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 )

781 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
(è&& 
eRefLi¡
 =ð
REF_PIC_LIST_1
 &&…cCU->
	`g‘IÁ”Dœ
(
uiAbsP¬tIdx
)==3)

786 cÚ¡ 
TComCUMvF›ld
* 
pcCUMvF›ld
 = 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefLi¡
 );

787 cÚ¡ 
IÁ
 
iHÜ
 = 
pcCUMvF›ld
->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘HÜ
();

788 cÚ¡ 
IÁ
 
iV”
 = 
pcCUMvF›ld
->
	`g‘Mvd
Ð
uiAbsP¬tIdx
 ).
	`g‘V”
();

789 
CÚ‹xtMod–
* 
pCtx
 = 
m_cCUMvdSCMod–
.
	`g‘
( 0 );

791 
m_pcBšIf
->
	`’codeBš
Ð
iHÜ
 !ð0 ? 1 : 0, *
pCtx
 );

792 
m_pcBšIf
->
	`’codeBš
Ð
iV”
 !ð0 ? 1 : 0, *
pCtx
 );

794 cÚ¡ 
BoÞ
 
bHÜAbsGr0
 = 
iHÜ
 != 0;

795 cÚ¡ 
BoÞ
 
bV”AbsGr0
 = 
iV”
 != 0;

796 cÚ¡ 
UIÁ
 
uiHÜAbs
 = 0 > 
iHÜ
 ? -iHor : iHor;

797 cÚ¡ 
UIÁ
 
uiV”Abs
 = 0 > 
iV”
 ? -iVer : iVer;

798 
pCtx
++;

800 ifÐ
bHÜAbsGr0
 )

802 
m_pcBšIf
->
	`’codeBš
Ð
uiHÜAbs
 > 1 ? 1 : 0, *
pCtx
 );

805 ifÐ
bV”AbsGr0
 )

807 
m_pcBšIf
->
	`’codeBš
Ð
uiV”Abs
 > 1 ? 1 : 0, *
pCtx
 );

810 ifÐ
bHÜAbsGr0
 )

812 ifÐ
uiHÜAbs
 > 1 )

814 
	`xWr™eEpExGÞomb
Ð
uiHÜAbs
-2, 1 );

817 
m_pcBšIf
->
	`’codeBšEP
Ð0 > 
iHÜ
 ? 1 : 0 );

820 ifÐ
bV”AbsGr0
 )

822 ifÐ
uiV”Abs
 > 1 )

824 
	`xWr™eEpExGÞomb
Ð
uiV”Abs
-2, 1 );

827 
m_pcBšIf
->
	`’codeBšEP
Ð0 > 
iV”
 ? 1 : 0 );

831 
	}
}

833 
Void
 
	gTEncSbac
::
	$codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 )

835 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

837 ifÐ
	`isLuma
(
compID
è|| !
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
() )

842 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

844 ià(!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
è|| (pcCU->
	`g‘IÁ¿Dœ
Ð
CHANNEL_TYPE_CHROMA
, uiAbsP¬tIdx ) =ð
DM_CHROMA_IDX
))

846 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

847 
	`DTRACE_CABAC_T
("\tparseCrossComponentPrediction()")

848 
	`DTRACE_CABAC_T
( "\tAddr=" )

849 
	`DTRACE_CABAC_V
Ð
compID
 )

850 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

851 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 )

853 
IÁ
 
®pha
 = 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
Ð
uiAbsP¬tIdx
, 
compID
 );

854 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCrossCompÚ’tP»diùiÚSCMod–
.
	`g‘
(0, 0è+ ((
compID
 =ð
COMPONENT_Cr
è? (
NUM_CROSS_COMPONENT_PREDICTION_CTX
 >> 1) : 0);

855 
m_pcBšIf
->
	`’codeBš
(((
®pha
 !ð0è? 1 : 0), 
pCtx
[0]);

857 ià(
®pha
 != 0)

859 cÚ¡ 
IÁ
 
log2AbsAÍhaMšus1TabË
[8] = { 0, 1, 1, 2, 2, 2, 3, 3 };

860 
	`as£¹
(
	`abs
(
®pha
) <= 8);

862 ià(
	`abs
(
®pha
)>1)

864 
m_pcBšIf
->
	`’codeBš
(1, 
pCtx
[1]);

865 
	`xWr™eUÇryMaxSymbÞ
Ð
log2AbsAÍhaMšus1TabË
[
	`abs
(
®pha
è- 1] - 1, (
pCtx
 + 2), 1, 2 );

869 
m_pcBšIf
->
	`’codeBš
(0, 
pCtx
[1]);

871 
m_pcBšIf
->
	`’codeBš
Ð((
®pha
 < 0è? 1 : 0), 
pCtx
[4] );

873 
	`DTRACE_CABAC_T
( "\tAlpha=" )

874 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
Ð
uiAbsP¬tIdx
, 
compID
 ) )

875 
	`DTRACE_CABAC_T
( "\n" )

877 
	}
}

879 
Void
 
	gTEncSbac
::
	$codeD–QP
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

881 
IÁ
 
iDQp
 = 
pcCU
->
	`g‘QP
Ð
uiAbsP¬tIdx
 ) -…cCU->
	`g‘RefQP
( uiAbsPartIdx );

883 
IÁ
 
qpBdOff£tY
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
);

884 
iDQp
 = (iDQ°+ 78 + 
qpBdOff£tY
 + (qpBdOffsetY/2)) % (52 + qpBdOffsetY) - 26 - (qpBdOffsetY/2);

886 
UIÁ
 
uiAbsDQp
 = (UIÁ)((
iDQp
 > 0)? iDQp : (-iDQp));

887 
UIÁ
 
TUV®ue
 = 
	`mš
((
IÁ
)
uiAbsDQp
, 
CU_DQP_TU_CMAX
);

888 
	`xWr™eUÇryMaxSymbÞ
Ð
TUV®ue
, &
m_cCUD–QpSCMod–
.
	`g‘
Ð0, 0, 0 ), 1, 
CU_DQP_TU_CMAX
);

889 ifÐ
uiAbsDQp
 >ð
CU_DQP_TU_CMAX
 )

891 
	`xWr™eEpExGÞomb
Ð
uiAbsDQp
 - 
CU_DQP_TU_CMAX
, 
CU_DQP_EG_k
 );

894 iàÐ
uiAbsDQp
 > 0)

896 
UIÁ
 
uiSign
 = (
iDQp
 > 0 ? 0 : 1);

897 
m_pcBšIf
->
	`’codeBšEP
(
uiSign
);

901 
	}
}

906 
Void
 
	gTEncSbac
::
	$codeChromaQpAdju¡m’t
Ð
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
 )

908 
IÁ
 
š‹º®Idc
 = 
cu
->
	`g‘ChromaQpAdj
Ð
absP¬tIdx
 );

909 
IÁ
 
chromaQpOff£tLi¡L’
 = 
cu
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡L’
();

912 
m_pcBšIf
->
	`’codeBš
Ð
š‹º®Idc
 > 0, 
m_ChromaQpAdjFÏgSCMod–
.
	`g‘
( 0, 0, 0 ) );

914 ià(
š‹º®Idc
 > 0 && 
chromaQpOff£tLi¡L’
 > 1)

916 
	`xWr™eUÇryMaxSymbÞ
Ð
š‹º®Idc
 - 1, &
m_ChromaQpAdjIdcSCMod–
.
	`g‘
Ð0, 0, 0 ), 0, 
chromaQpOff£tLi¡L’
 - 1 );

918 
	}
}

920 
Void
 
	gTEncSbac
::
	$codeQtCbf
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 )

922 
TComD©aCU
* 
pcCU
 = 
rTu
.
	`g‘CU
();

924 cÚ¡ 
UIÁ
 
absP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

925 cÚ¡ 
UIÁ
 
TUD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

926 
UIÁ
 
uiCtx
 = 
pcCU
->
	`g‘CtxQtCbf
Ð
rTu
, 
	`toChªÃlTy³
(
compID
) );

927 cÚ¡ 
UIÁ
 
cÚ‹xtS‘
 = 
	`toChªÃlTy³
(
compID
);

929 cÚ¡ 
UIÁ
 
width
 = 
rTu
.
	`g‘Reù
(
compID
).width;

930 cÚ¡ 
UIÁ
 
height
 = 
rTu
.
	`g‘Reù
(
compID
).height;

931 cÚ¡ 
BoÞ
 
ÿnQuadS¶™
 = (
width
 >ð(
MIN_TU_SIZE
 * 2)è&& (
height
 >= (MIN_TU_SIZE * 2));

947 cÚ¡ 
UIÁ
 
lowe¡TUD•th
 = 
TUD•th
 + ((!
lowe¡Lev–
 && !
ÿnQuadS¶™
) ? 1 : 0);

949 ià((
width
 !ð
height
è&& (
lowe¡Lev–
 || !
ÿnQuadS¶™
))

951 cÚ¡ 
UIÁ
 
subTUD•th
 = 
lowe¡TUD•th
 + 1;

952 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
) >> 1;

954 
UIÁ
 
subTU
 = 0; subTU < 2; subTU++)

956 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
absP¬tIdx
 + (
subTU
 * 
·¹IdxesP”SubTU
);

957 cÚ¡ 
UIÁ
 
uiCbf
 = 
pcCU
->
	`g‘Cbf
(
subTUAbsP¬tIdx
, 
compID
, 
subTUD•th
);

959 
m_pcBšIf
->
	`’codeBš
(
uiCbf
, 
m_cCUQtCbfSCMod–
.
	`g‘
(0, 
cÚ‹xtS‘
, 
uiCtx
));

961 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

962 
	`DTRACE_CABAC_T
( "\tparseQtCbf()" )

963 
	`DTRACE_CABAC_T
( "\tsub-TU=" )

964 
	`DTRACE_CABAC_V
Ð
subTU
 )

965 
	`DTRACE_CABAC_T
( "\tsymbol=" )

966 
	`DTRACE_CABAC_V
Ð
uiCbf
 )

967 
	`DTRACE_CABAC_T
( "\tctx=" )

968 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

969 
	`DTRACE_CABAC_T
( "\tetype=" )

970 
	`DTRACE_CABAC_V
Ð
compID
 )

971 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

972 
	`DTRACE_CABAC_V
Ð
subTUAbsP¬tIdx
 )

973 
	`DTRACE_CABAC_T
( "\n" )

978 cÚ¡ 
UIÁ
 
uiCbf
 = 
pcCU
->
	`g‘Cbf
Ð
absP¬tIdx
, 
compID
, 
lowe¡TUD•th
 );

979 
m_pcBšIf
->
	`’codeBš
Ð
uiCbf
 , 
m_cCUQtCbfSCMod–
.
	`g‘
Ð0, 
cÚ‹xtS‘
, 
uiCtx
 ) );

982 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

983 
	`DTRACE_CABAC_T
( "\tparseQtCbf()" )

984 
	`DTRACE_CABAC_T
( "\tsymbol=" )

985 
	`DTRACE_CABAC_V
Ð
uiCbf
 )

986 
	`DTRACE_CABAC_T
( "\tctx=" )

987 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

988 
	`DTRACE_CABAC_T
( "\tetype=" )

989 
	`DTRACE_CABAC_V
Ð
compID
 )

990 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

991 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
) )

992 
	`DTRACE_CABAC_T
( "\n" )

994 
	}
}

997 
Void
 
	gTEncSbac
::
	$codeT¿nsfÜmSkFÏgs
 (
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 )

999 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1000 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

1002 ià(
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
))

1007 ià(!
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
compÚ’t
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
()))

1012 
UIÁ
 
u£T¿nsfÜmSk
 = 
pcCU
->
	`g‘T¿nsfÜmSk
Ð
uiAbsP¬tIdx
,
compÚ’t
);

1013 
m_pcBšIf
->
	`’codeBš
Ð
u£T¿nsfÜmSk
, 
m_cT¿nsfÜmSkSCMod–
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
), 0 ) );

1015 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1016 
	`DTRACE_CABAC_T
("\tparseTransformSkip()");

1017 
	`DTRACE_CABAC_T
( "\tsymbol=" )

1018 
	`DTRACE_CABAC_V
Ð
u£T¿nsfÜmSk
 )

1019 
	`DTRACE_CABAC_T
( "\tAddr=" )

1020 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() )

1021 
	`DTRACE_CABAC_T
( "\tetype=" )

1022 
	`DTRACE_CABAC_V
Ð
compÚ’t
 )

1023 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

1024 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘AbsP¬tIdxTU
() )

1025 
	`DTRACE_CABAC_T
( "\n" )

1026 
	}
}

1034 
Void
 
	gTEncSbac
::
	$codeIPCMInfo
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

1036 
UIÁ
 
uiIPCM
 = (
pcCU
->
	`g‘IPCMFÏg
(
uiAbsP¬tIdx
è=ð
Œue
)? 1 : 0;

1038 
BoÞ
 
wr™ePCMSam¶eFÏg
 = 
pcCU
->
	`g‘IPCMFÏg
(
uiAbsP¬tIdx
);

1040 
m_pcBšIf
->
	`’codeBšTrm
 (
uiIPCM
);

1042 ià(
wr™ePCMSam¶eFÏg
)

1044 
m_pcBšIf
->
	`’codePCMAlignB™s
();

1046 cÚ¡ 
UIÁ
 
mšCÛffSizeY
 = 
pcCU
->
	`g‘Pic
()->
	`g‘MšCUWidth
(è*…cCU->g‘Pic()->
	`g‘MšCUHeight
();

1047 cÚ¡ 
UIÁ
 
off£tY
 = 
mšCÛffSizeY
 * 
uiAbsP¬tIdx
;

1048 
UIÁ
 
ch
=0; ch < 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

1050 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

1051 cÚ¡ 
UIÁ
 
off£t
 = 
off£tY
 >> (
pcCU
->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compID
è+…cCU->g‘Pic()->
	`g‘CompÚ’tSÿËY
(compID));

1052 
P–
 * 
pPCMSam¶e
 = 
pcCU
->
	`g‘PCMSam¶e
(
compID
è+ 
off£t
;

1053 cÚ¡ 
UIÁ
 
width
 = 
pcCU
->
	`g‘Width
 (
uiAbsP¬tIdx
è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compID
);

1054 cÚ¡ 
UIÁ
 
height
 = 
pcCU
->
	`g‘Height
(
uiAbsP¬tIdx
è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËY
(
compID
);

1055 cÚ¡ 
UIÁ
 
§m¶eB™s
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMB™D•th
(
	`toChªÃlTy³
(
compID
));

1056 
UIÁ
 
y
=0; y<
height
; y++)

1058 
UIÁ
 
x
=0; x<
width
; x++)

1060 
UIÁ
 
§m¶e
 = 
pPCMSam¶e
[
x
];

1061 
m_pcBšIf
->
	`xWr™ePCMCode
(
§m¶e
, 
§m¶eB™s
);

1063 
pPCMSam¶e
 +ð
width
;

1067 
m_pcBšIf
->
	`»£tBac
();

1069 
	}
}

1071 
Void
 
	gTEncSbac
::
	$codeQtRoÙCbf
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 )

1073 
UIÁ
 
uiCbf
 = 
pcCU
->
	`g‘QtRoÙCbf
Ð
uiAbsP¬tIdx
 );

1074 
UIÁ
 
uiCtx
 = 0;

1075 
m_pcBšIf
->
	`’codeBš
Ð
uiCbf
 , 
m_cCUQtRoÙCbfSCMod–
.
	`g‘
Ð0, 0, 
uiCtx
 ) );

1076 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1077 
	`DTRACE_CABAC_T
( "\tparseQtRootCbf()" )

1078 
	`DTRACE_CABAC_T
( "\tsymbol=" )

1079 
	`DTRACE_CABAC_V
Ð
uiCbf
 )

1080 
	`DTRACE_CABAC_T
( "\tctx=" )

1081 
	`DTRACE_CABAC_V
Ð
uiCtx
 )

1082 
	`DTRACE_CABAC_T
( "\tuiAbsPartIdx=" )

1083 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 )

1084 
	`DTRACE_CABAC_T
( "\n" )

1085 
	}
}

1087 
Void
 
	gTEncSbac
::
	$codeQtCbfZ”o
Ð
TComTU
 & 
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 )

1091 
UIÁ
 
uiCbf
 = 0;

1092 
UIÁ
 
uiCtx
 = 
rTu
.
	`g‘CU
()->
	`g‘CtxQtCbf
ÐrTu, 
chTy³
 );

1094 
m_pcBšIf
->
	`’codeBš
Ð
uiCbf
 , 
m_cCUQtCbfSCMod–
.
	`g‘
Ð0, 
chTy³
, 
uiCtx
 ) );

1095 
	}
}

1097 
Void
 
	gTEncSbac
::
	$codeQtRoÙCbfZ”o
( )

1101 
UIÁ
 
uiCbf
 = 0;

1102 
UIÁ
 
uiCtx
 = 0;

1103 
m_pcBšIf
->
	`’codeBš
Ð
uiCbf
 , 
m_cCUQtRoÙCbfSCMod–
.
	`g‘
Ð0, 0, 
uiCtx
 ) );

1104 
	}
}

1115 
Void
 
	gTEncSbac
::
	$codeLa¡SignifiÿÁXY
Ð
UIÁ
 
uiPosX
, UIÁ 
uiPosY
, 
IÁ
 
width
, IÁ 
height
, 
CompÚ’tID
 
compÚ’t
, UIÁ 
uiSÿnIdx
 )

1118 ifÐ
uiSÿnIdx
 =ð
SCAN_VER
 )

1120 
	`sw­
Ð
uiPosX
, 
uiPosY
 );

1121 
	`sw­
Ð
width
, 
height
 );

1124 
UIÁ
 
uiCtxLa¡
;

1125 
UIÁ
 
uiGroupIdxX
 = 
g_uiGroupIdx
[ 
uiPosX
 ];

1126 
UIÁ
 
uiGroupIdxY
 = 
g_uiGroupIdx
[ 
uiPosY
 ];

1128 
CÚ‹xtMod–
 *
pCtxX
 = 
m_cCuCtxLa¡X
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
) );

1129 
CÚ‹xtMod–
 *
pCtxY
 = 
m_cCuCtxLa¡Y
.
	`g‘
Ð0, 
	`toChªÃlTy³
(
compÚ’t
) );

1131 
IÁ
 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
;

1132 
	`g‘La¡SignifiÿÁCÚ‹xtP¬am‘”s
(
compÚ’t
, 
width
, 
height
, 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
);

1138  
uiCtxLa¡
 = 0; uiCtxLa¡ < 
uiGroupIdxX
; uiCtxLast++ )

1140 
m_pcBšIf
->
	`’codeBš
Ð1, *Ð
pCtxX
 + 
blkSizeOff£tX
 + (
uiCtxLa¡
 >>
shiáX
) ) );

1142 ifÐ
uiGroupIdxX
 < 
g_uiGroupIdx
[ 
width
 - 1 ])

1144 
m_pcBšIf
->
	`’codeBš
Ð0, *Ð
pCtxX
 + 
blkSizeOff£tX
 + (
uiCtxLa¡
 >>
shiáX
) ) );

1149  
uiCtxLa¡
 = 0; uiCtxLa¡ < 
uiGroupIdxY
; uiCtxLast++ )

1151 
m_pcBšIf
->
	`’codeBš
Ð1, *Ð
pCtxY
 + 
blkSizeOff£tY
 + (
uiCtxLa¡
 >>
shiáY
) ) );

1153 ifÐ
uiGroupIdxY
 < 
g_uiGroupIdx
[ 
height
 - 1 ])

1155 
m_pcBšIf
->
	`’codeBš
Ð0, *Ð
pCtxY
 + 
blkSizeOff£tY
 + (
uiCtxLa¡
 >>
shiáY
) ) );

1160 iàÐ
uiGroupIdxX
 > 3 )

1162 
UIÁ
 
uiCouÁ
 = ( 
uiGroupIdxX
 - 2 ) >> 1;

1163 
uiPosX
 = uiPosX - 
g_uiMšInGroup
[ 
uiGroupIdxX
 ];

1164 
IÁ
 
i
 = 
uiCouÁ
 - 1 ; i >= 0; i-- )

1166 
m_pcBšIf
->
	`’codeBšEP
ÐÐ
uiPosX
 >> 
i
 ) & 1 );

1169 iàÐ
uiGroupIdxY
 > 3 )

1171 
UIÁ
 
uiCouÁ
 = ( 
uiGroupIdxY
 - 2 ) >> 1;

1172 
uiPosY
 = uiPosY - 
g_uiMšInGroup
[ 
uiGroupIdxY
 ];

1173  
IÁ
 
i
 = 
uiCouÁ
 - 1 ; i >= 0; i-- )

1175 
m_pcBšIf
->
	`’codeBšEP
ÐÐ
uiPosY
 >> 
i
 ) & 1 );

1178 
	}
}

1181 
Void
 
	gTEncSbac
::
	$codeCÛffNxN
Ð
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
 )

1183 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1184 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

1185 cÚ¡ 
TComReùªgË
 &
tuReù
=
rTu
.
	`g‘Reù
(
compID
);

1186 cÚ¡ 
UIÁ
 
uiWidth
=
tuReù
.
width
;

1187 cÚ¡ 
UIÁ
 
uiHeight
=
tuReù
.
height
;

1188 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

1190 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ )

1191 
	`DTRACE_CABAC_T
( "\tparseCoeffNxN()\teType=" )

1192 
	`DTRACE_CABAC_V
Ð
compID
 )

1193 
	`DTRACE_CABAC_T
( "\twidth=" )

1194 
	`DTRACE_CABAC_V
Ð
uiWidth
 )

1195 
	`DTRACE_CABAC_T
( "\theight=" )

1196 
	`DTRACE_CABAC_V
Ð
uiHeight
 )

1197 
	`DTRACE_CABAC_T
( "\tdepth=" )

1199 
	`DTRACE_CABAC_V
Ð
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
() )

1200 
	`DTRACE_CABAC_T
( "\tabspartidx=" )

1201 
	`DTRACE_CABAC_V
Ð
uiAbsP¬tIdx
 )

1202 
	`DTRACE_CABAC_T
( "\ttoCU-X=" )

1203 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CUP–X
() )

1204 
	`DTRACE_CABAC_T
( "\ttoCU-Y=" )

1205 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CUP–Y
() )

1206 
	`DTRACE_CABAC_T
( "\tCU-addr=" )

1207 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘CtuRsAddr
() )

1208 
	`DTRACE_CABAC_T
( "\tinCU-X=" )

1210 
	`DTRACE_CABAC_V
Ð
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
)] ] )

1211 
	`DTRACE_CABAC_T
( "\tinCU-Y=" )

1213 
	`DTRACE_CABAC_V
Ð
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
)] ] )

1214 
	`DTRACE_CABAC_T
( "\tpredmode=" )

1215 
	`DTRACE_CABAC_V
Ð
pcCU
->
	`g‘P»diùiÚMode
Ð
uiAbsP¬tIdx
 ) )

1216 
	`DTRACE_CABAC_T
( "\n" )

1220 ifÐ
uiWidth
 > 
¥s
.
	`g‘MaxTrSize
() )

1222 
¡d
::
û¼
 << "ERROR: codeCÛffNxN wa ·s£d‡ TU w™h dim’siÚ Ïrg”hªhmaximum‡Îowed size" << std::
’dl
;

1223 
	`as£¹
(
çl£
);

1224 
	`ex™
(1);

1228 
UIÁ
 
uiNumSig
 = 
TEncEÁrÝy
::
	`couÁNÚZ”oCÛffs
(
pcCÛf
, 
uiWidth
 * 
uiHeight
);

1230 iàÐ
uiNumSig
 == 0 )

1232 
¡d
::
û¼
 << "ERROR: codeCÛffNxN c®Ëd fÜƒm±y TU!" << std::
’dl
;

1233 
	`as£¹
(
çl£
);

1234 
	`ex™
(1);

1241 cÚ¡ 
ChªÃlTy³
 
chTy³
 = 
	`toChªÃlTy³
(
compID
);

1242 cÚ¡ 
UIÁ
 
uiLog2BlockWidth
 = 
g_aucCÚv”tToB™
[ 
uiWidth
 ] + 2;

1243 cÚ¡ 
UIÁ
 
uiLog2BlockHeight
 = 
g_aucCÚv”tToB™
[ 
uiHeight
 ] + 2;

1245 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = 
	`toChªÃlTy³
(
compID
);

1246 cÚ¡ 
BoÞ
 
ex‹ndedP»cisiÚ
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘Ex‹ndedP»cisiÚProûssšgFÏg
();

1248 cÚ¡ 
BoÞ
 
®ignCABACBefÜeBy·ss
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘CabacBy·ssAlignm’tEÇbËdFÏg
();

1249 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 = 
¥s
.
	`g‘MaxLog2TrDyÇmicRªge
(
chªÃlTy³
);

1251 
BoÞ
 
beV®id
;

1254 
IÁ
 
uiIÁ¿Mode
 = -1;

1255 cÚ¡ 
BoÞ
 
bIsLuma
 = 
	`isLuma
(
compID
);

1256 
IÁ
 
isIÁ¿
 = 
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
) ? 1 : 0;

1257 iàÐ
isIÁ¿
 )

1259 
uiIÁ¿Mode
 = 
pcCU
->
	`g‘IÁ¿Dœ
Ð
	`toChªÃlTy³
(
compID
), 
uiAbsP¬tIdx
 );

1261 cÚ¡ 
UIÁ
 
·¹sP”MšCU
 = 1<<(2*(
¥s
.
	`g‘MaxTÙ®CUD•th
(è- sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
()));

1262 
uiIÁ¿Mode
 = (uiIÁ¿Mode==
DM_CHROMA_IDX
 && !
bIsLuma
è? 
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
	`g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
rTu
.
	`G‘ChromaFÜm©
(), 
·¹sP”MšCU
)) : uiIntraMode;

1263 
uiIÁ¿Mode
 = ((
rTu
.
	`G‘ChromaFÜm©
(è=ð
CHROMA_422
è&& !
bIsLuma
è? 
g_chroma422IÁ¿AngËM­pšgTabË
[uiIntraMode] : uiIntraMode;

1266 
IÁ
 
ŒªsfÜmSk
 = 
pcCU
->
	`g‘T¿nsfÜmSk
Ð
uiAbsP¬tIdx
,
compID
) ? 1 : 0;

1267 
BoÞ
 
rdpcm_lossy
 = ( 
ŒªsfÜmSk
 && 
isIÁ¿
 && ( (
uiIÁ¿Mode
 =ð
HOR_IDX
è|| (uiIÁ¿Mod=ð
VER_IDX
èèè&& 
pcCU
->
	`isRDPCMEÇbËd
(
uiAbsP¬tIdx
);

1269 iàÐ(
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiAbsP¬tIdx
)è|| 
rdpcm_lossy
 )

1271 
beV®id
 = 
çl£
;

1272 iàÐ(!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
)è&&…cCU->
	`isRDPCMEÇbËd
(uiAbsPartIdx))

1274 
	`codeEx¶ic™RdpcmMode
Ð
rTu
, 
compID
);

1279 
beV®id
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘SignD©aHidšgEÇbËdFÏg
();

1285 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
())

1287 
	`codeT¿nsfÜmSkFÏgs
(
rTu
, 
compID
);

1288 if(
pcCU
->
	`g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
è&& !pcCU->
	`isIÁ¿
(uiAbsP¬tIdxè&&…cCU->
	`isRDPCMEÇbËd
(uiAbsPartIdx))

1291 
	`codeEx¶ic™RdpcmMode
Ð
rTu
, 
compID
);

1293 if(
pcCU
->
	`g‘Ex¶ic™RdpcmMode
(
compID
, 
uiAbsP¬tIdx
è!ð
RDPCM_OFF
)

1296 
beV®id
 = 
çl£
;

1303 cÚ¡ 
BoÞ
 
bU£GÞombRiûP¬am‘”Ad­tiÚ
 = 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘P”si¡’tRiûAd­tiÚEÇbËdFÏg
();

1304 
UIÁ
 &
cu¼’tGÞombRiûSti¡ic
 = 
m_gÞombRiûAd­tiÚSti¡ics
[
rTu
.
	`g‘GÞombRiûSti¡icsIndex
(
compID
)];

1307 
TUEÁrÝyCodšgP¬am‘”s
 
codšgP¬am‘”s
;

1308 
	`g‘TUEÁrÝyCodšgP¬am‘”s
(
codšgP¬am‘”s
, 
rTu
, 
compID
);

1313 
IÁ
 
sÿnPosLa¡
 = -1;

1314 
IÁ
 
posLa¡
;

1317 
UIÁ
 
uiSigCÛffGroupFÏg
[ 
MLS_GRP_NUM
 ];

1319 
	`mem£t
Ð
uiSigCÛffGroupFÏg
, 0, (
UIÁ
è* 
MLS_GRP_NUM
 );

1322 
posLa¡
 = 
codšgP¬am‘”s
.
sÿn
[ ++
sÿnPosLa¡
 ];

1324 ifÐ
pcCÛf
[ 
posLa¡
 ] != 0 )

1327 
UIÁ
 
uiPosY
 = 
posLa¡
 >> 
uiLog2BlockWidth
;

1328 
UIÁ
 
uiPosX
 = 
posLa¡
 - ( 
uiPosY
 << 
uiLog2BlockWidth
 );

1330 
UIÁ
 
uiBlkIdx
 = (
codšgP¬am‘”s
.
widthInGroups
 * (
uiPosY
 >> 
MLS_CG_LOG2_HEIGHT
)è+ (
uiPosX
 >> 
MLS_CG_LOG2_WIDTH
);

1331 
uiSigCÛffGroupFÏg
[ 
uiBlkIdx
 ] = 1;

1333 
uiNumSig
--;

1335 }  
uiNumSig
 > 0 );

1338 
IÁ
 
posLa¡Y
 = 
posLa¡
 >> 
uiLog2BlockWidth
;

1339 
IÁ
 
posLa¡X
 = 
posLa¡
 - ( 
posLa¡Y
 << 
uiLog2BlockWidth
 );

1340 
	`codeLa¡SignifiÿÁXY
(
posLa¡X
, 
posLa¡Y
, 
uiWidth
, 
uiHeight
, 
compID
, 
codšgP¬am‘”s
.
sÿnTy³
);

1343 
CÚ‹xtMod–
 * cÚ¡ 
ba£CÛffGroupCtx
 = 
m_cCUSigCÛffGroupSCMod–
.
	`g‘
Ð0, 
chTy³
 );

1344 
CÚ‹xtMod–
 * cÚ¡ 
ba£Ctx
 = 
m_cCUSigSCMod–
.
	`g‘
Ð0, 0 ) + 
	`g‘SignifiÿnûM­CÚ‹xtOff£t
(
compID
);

1346 cÚ¡ 
IÁ
 
iLa¡SÿnS‘
 = 
sÿnPosLa¡
 >> 
MLS_CG_SIZE
;

1348 
UIÁ
 
c1
 = 1;

1349 
UIÁ
 
uiGoRiûP¬am
 = 0;

1350 
IÁ
 
iSÿnPosSig
 = 
sÿnPosLa¡
;

1352  
IÁ
 
iSubS‘
 = 
iLa¡SÿnS‘
; iSubSet >= 0; iSubSet-- )

1354 
IÁ
 
numNÚZ”o
 = 0;

1355 
IÁ
 
iSubPos
 = 
iSubS‘
 << 
MLS_CG_SIZE
;

1356 
uiGoRiûP¬am
 = 
cu¼’tGÞombRiûSti¡ic
 / 
RExt__GOLOMB_RICE_INCREMENT_DIVISOR
;

1357 
BoÞ
 
upd©eGÞombRiûSti¡ics
 = 
bU£GÞombRiûP¬am‘”Ad­tiÚ
;

1358 
UIÁ
 
cÛffSigns
 = 0;

1360 
IÁ
 
absCÛff
[1 << 
MLS_CG_SIZE
];

1362 
IÁ
 
Ï¡NZPosInCG
 = -1;

1363 
IÁ
 
fœ¡NZPosInCG
 = 1 << 
MLS_CG_SIZE
;

1365 
BoÞ
 
esÿ³D©aP»£ÁInGroup
 = 
çl£
;

1367 ifÐ
iSÿnPosSig
 =ð
sÿnPosLa¡
 )

1369 
absCÛff
[ 0 ] = 
	`IÁ
(
	`abs
Ð
pcCÛf
[ 
posLa¡
 ] ));

1370 
cÛffSigns
 = ( 
pcCÛf
[ 
posLa¡
 ] < 0 );

1371 
numNÚZ”o
 = 1;

1372 
Ï¡NZPosInCG
 = 
iSÿnPosSig
;

1373 
fœ¡NZPosInCG
 = 
iSÿnPosSig
;

1374 
iSÿnPosSig
--;

1378 
IÁ
 
iCGBlkPos
 = 
codšgP¬am‘”s
.
sÿnCG
[ 
iSubS‘
 ];

1379 
IÁ
 
iCGPosY
 = 
iCGBlkPos
 / 
codšgP¬am‘”s
.
widthInGroups
;

1380 
IÁ
 
iCGPosX
 = 
iCGBlkPos
 - (
iCGPosY
 * 
codšgP¬am‘”s
.
widthInGroups
);

1382 ifÐ
iSubS‘
 =ð
iLa¡SÿnS‘
 || iSubSet == 0)

1384 
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] = 1;

1388 
UIÁ
 
uiSigCÛffGroup
 = (
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] != 0);

1389 
UIÁ
 
uiCtxSig
 = 
TComTrQuªt
::
	`g‘SigCÛffGroupCtxInc
Ð
uiSigCÛffGroupFÏg
, 
iCGPosX
, 
iCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
 );

1390 
m_pcBšIf
->
	`’codeBš
Ð
uiSigCÛffGroup
, 
ba£CÛffGroupCtx
[ 
uiCtxSig
 ] );

1394 ifÐ
uiSigCÛffGroupFÏg
[ 
iCGBlkPos
 ] )

1396 cÚ¡ 
IÁ
 
·‰”nSigCtx
 = 
TComTrQuªt
::
	`ÿlcP©‹ºSigCtx
(
uiSigCÛffGroupFÏg
, 
iCGPosX
, 
iCGPosY
, 
codšgP¬am‘”s
.
widthInGroups
, codšgP¬am‘”s.
heightInGroups
);

1398 
UIÁ
 
uiBlkPos
, 
uiSig
, 
uiCtxSig
;

1399  ; 
iSÿnPosSig
 >ð
iSubPos
; iScanPosSig-- )

1401 
uiBlkPos
 = 
codšgP¬am‘”s
.
sÿn
[ 
iSÿnPosSig
 ];

1402 
uiSig
 = (
pcCÛf
[ 
uiBlkPos
 ] != 0);

1403 ifÐ
iSÿnPosSig
 > 
iSubPos
 || 
iSubS‘
 =ð0 || 
numNÚZ”o
 )

1405 
uiCtxSig
 = 
TComTrQuªt
::
	`g‘SigCtxInc
Ð
·‰”nSigCtx
, 
codšgP¬am‘”s
, 
iSÿnPosSig
, 
uiLog2BlockWidth
, 
uiLog2BlockHeight
, 
chTy³
 );

1406 
m_pcBšIf
->
	`’codeBš
Ð
uiSig
, 
ba£Ctx
[ 
uiCtxSig
 ] );

1408 ifÐ
uiSig
 )

1410 
absCÛff
[ 
numNÚZ”o
 ] = 
	`IÁ
(
	`abs
Ð
pcCÛf
[ 
uiBlkPos
 ] ));

1411 
cÛffSigns
 = 2 * cÛffSign + ( 
pcCÛf
[ 
uiBlkPos
 ] < 0 );

1412 
numNÚZ”o
++;

1413 ifÐ
Ï¡NZPosInCG
 == -1 )

1415 
Ï¡NZPosInCG
 = 
iSÿnPosSig
;

1417 
fœ¡NZPosInCG
 = 
iSÿnPosSig
;

1423 
iSÿnPosSig
 = 
iSubPos
 - 1;

1426 ifÐ
numNÚZ”o
 > 0 )

1428 
BoÞ
 
signHidd’
 = ( 
Ï¡NZPosInCG
 - 
fœ¡NZPosInCG
 >ð
SBH_THRESHOLD
 );

1430 cÚ¡ 
UIÁ
 
uiCtxS‘
 = 
	`g‘CÚ‹xtS‘Index
(
compID
, 
iSubS‘
, (
c1
 == 0));

1431 
c1
 = 1;

1433 
CÚ‹xtMod–
 *
ba£CtxMod
 = 
m_cCUOÃSCMod–
.
	`g‘
Ð0, 0 ) + (
NUM_ONE_FLAG_CTX_PER_SET
 * 
uiCtxS‘
);

1435 
IÁ
 
numC1FÏg
 = 
	`mš
(
numNÚZ”o
, 
C1FLAG_NUMBER
);

1436 
IÁ
 
fœ¡C2FÏgIdx
 = -1;

1437  
IÁ
 
idx
 = 0; idx < 
numC1FÏg
; idx++ )

1439 
UIÁ
 
uiSymbÞ
 = 
absCÛff
[ 
idx
 ] > 1;

1440 
m_pcBšIf
->
	`’codeBš
Ð
uiSymbÞ
, 
ba£CtxMod
[
c1
] );

1441 ifÐ
uiSymbÞ
 )

1443 
c1
 = 0;

1445 ià(
fœ¡C2FÏgIdx
 == -1)

1447 
fœ¡C2FÏgIdx
 = 
idx
;

1451 
esÿ³D©aP»£ÁInGroup
 = 
Œue
;

1454 ifÐ(
c1
 < 3) && (c1 > 0) )

1456 
c1
++;

1460 ià(
c1
 == 0)

1462 
ba£CtxMod
 = 
m_cCUAbsSCMod–
.
	`g‘
Ð0, 0 ) + (
NUM_ABS_FLAG_CTX_PER_SET
 * 
uiCtxS‘
);

1463 iàÐ
fœ¡C2FÏgIdx
 != -1)

1465 
UIÁ
 
symbÞ
 = 
absCÛff
[ 
fœ¡C2FÏgIdx
 ] > 2;

1466 
m_pcBšIf
->
	`’codeBš
Ð
symbÞ
, 
ba£CtxMod
[0] );

1467 ià(
symbÞ
 != 0)

1469 
esÿ³D©aP»£ÁInGroup
 = 
Œue
;

1474 
esÿ³D©aP»£ÁInGroup
 =ƒsÿ³D©aP»£ÁInGrou°|| (
numNÚZ”o
 > 
C1FLAG_NUMBER
);

1476 ià(
esÿ³D©aP»£ÁInGroup
 && 
®ignCABACBefÜeBy·ss
)

1478 
m_pcBšIf
->
	`®ign
();

1481 ifÐ
beV®id
 && 
signHidd’
 )

1483 
m_pcBšIf
->
	`’codeBšsEP
Ð(
cÛffSigns
 >> 1), 
numNÚZ”o
-1 );

1487 
m_pcBšIf
->
	`’codeBšsEP
Ð
cÛffSigns
, 
numNÚZ”o
 );

1490 
IÁ
 
iFœ¡CÛff2
 = 1;

1491 ià(
esÿ³D©aP»£ÁInGroup
)

1493  
IÁ
 
idx
 = 0; idx < 
numNÚZ”o
; idx++ )

1495 
UIÁ
 
ba£Lev–
 = (
idx
 < 
C1FLAG_NUMBER
)? (2 + 
iFœ¡CÛff2
 ) : 1;

1497 ifÐ
absCÛff
[ 
idx
 ] >ð
ba£Lev–
)

1499 cÚ¡ 
UIÁ
 
esÿ³CodeV®ue
 = 
absCÛff
[
idx
] - 
ba£Lev–
;

1501 
	`xWr™eCÛfRemašExGÞomb
Ð
esÿ³CodeV®ue
, 
uiGoRiûP¬am
, 
ex‹ndedP»cisiÚ
, 
maxLog2TrDyÇmicRªge
 );

1503 ià(
absCÛff
[
idx
] > (3 << 
uiGoRiûP¬am
))

1505 
uiGoRiûP¬am
 = 
bU£GÞombRiûP¬am‘”Ad­tiÚ
 ? (uiGoRiûP¬am + 1è: (
¡d
::
mš
<
UIÁ
>((uiGoRiceParam + 1), 4));

1508 ià(
upd©eGÞombRiûSti¡ics
)

1510 cÚ¡ 
UIÁ
 
š™ŸlGÞombRiûP¬am‘”
 = 
cu¼’tGÞombRiûSti¡ic
 / 
RExt__GOLOMB_RICE_INCREMENT_DIVISOR
;

1512 ià(
esÿ³CodeV®ue
 >ð(3 << 
š™ŸlGÞombRiûP¬am‘”
))

1514 
cu¼’tGÞombRiûSti¡ic
++;

1516 ià(((
esÿ³CodeV®ue
 * 2è< (1 << 
š™ŸlGÞombRiûP¬am‘”
)è&& (
cu¼’tGÞombRiûSti¡ic
 > 0))

1518 
cu¼’tGÞombRiûSti¡ic
--;

1521 
upd©eGÞombRiûSti¡ics
 = 
çl£
;

1525 if(
absCÛff
[ 
idx
 ] >= 2)

1527 
iFœ¡CÛff2
 = 0;

1533 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


1534 
	`´štSBACCÛffD©a
(
posLa¡X
, 
posLa¡Y
, 
uiWidth
, 
uiHeight
, 
compID
, 
uiAbsP¬tIdx
, 
codšgP¬am‘”s
.
sÿnTy³
, 
pcCÛf
, 
pcCU
->
	`g‘Sliû
()->
	`g‘Fš®ized
());

1538 
	}
}

1543 
Void
 
	gTEncSbac
::
	$codeSAOSign
Ð
UIÁ
 
code
 )

1545 
m_pcBšIf
->
	`’codeBšEP
Ð
code
 );

1546 
	}
}

1548 
Void
 
	gTEncSbac
::
	$codeSaoMaxUvlc
 ( 
UIÁ
 
code
, UIÁ 
maxSymbÞ
 )

1550 ià(
maxSymbÞ
 == 0)

1555 
IÁ
 
i
;

1556 
BoÞ
 
bCodeLa¡
 = ( 
maxSymbÞ
 > 
code
 );

1558 iàÐ
code
 == 0 )

1560 
m_pcBšIf
->
	`’codeBšEP
( 0 );

1564 
m_pcBšIf
->
	`’codeBšEP
( 1 );

1565  
i
=0; i<
code
-1; i++ )

1567 
m_pcBšIf
->
	`’codeBšEP
( 1 );

1569 ifÐ
bCodeLa¡
 )

1571 
m_pcBšIf
->
	`’codeBšEP
( 0 );

1574 
	}
}

1578 
Void
 
	gTEncSbac
::
	$codeSaoUæc
 ( 
UIÁ
 
uiL’gth
, UIÁ 
uiCode
 )

1580 
m_pcBšIf
->
	`’codeBšsEP
 ( 
uiCode
, 
uiL’gth
 );

1581 
	}
}

1585 
Void
 
	gTEncSbac
::
	$codeSaoM”ge
 ( 
UIÁ
 
uiCode
 )

1587 
m_pcBšIf
->
	`’codeBš
(((
uiCode
 =ð0è? 0 : 1), 
m_cSaoM”geSCMod–
.
	`g‘
( 0, 0, 0 ));

1588 
	}
}

1592 
Void
 
	gTEncSbac
::
	$codeSaoTy³Idx
 ( 
UIÁ
 
uiCode
)

1594 ià(
uiCode
 == 0)

1596 
m_pcBšIf
->
	`’codeBš
Ð0, 
m_cSaoTy³IdxSCMod–
.
	`g‘
( 0, 0, 0 ) );

1600 
m_pcBšIf
->
	`’codeBš
Ð1, 
m_cSaoTy³IdxSCMod–
.
	`g‘
( 0, 0, 0 ) );

1601 
m_pcBšIf
->
	`’codeBšEP
Ð
uiCode
 == 1 ? 0 : 1 );

1603 
	}
}

1605 
Void
 
	gTEncSbac
::
	$codeSAOOff£tP¬am
(
CompÚ’tID
 
compIdx
, 
SAOOff£t
& 
ùbP¬am
, 
BoÞ
 
¦iûEÇbËd
, cÚ¡ 
IÁ
 
chªÃlB™D•th
)

1607 
UIÁ
 
uiSymbÞ
;

1608 if(!
¦iûEÇbËd
)

1610 
	`as£¹
(
ùbP¬am
.
modeIdc
 =ð
SAO_MODE_OFF
);

1613 cÚ¡ 
BoÞ
 
bIsFœ¡CompOfChTy³
 = (
	`g‘Fœ¡CompÚ’tOfChªÃl
(
	`toChªÃlTy³
(
compIdx
)) == compIdx);

1616 if(
bIsFœ¡CompOfChTy³
)

1619 if(
ùbP¬am
.
modeIdc
 =ð
SAO_MODE_OFF
)

1621 
uiSymbÞ
 =0;

1623 if(
ùbP¬am
.
ty³Idc
 =ð
SAO_TYPE_BO
)

1625 
uiSymbÞ
 = 1;

1629 
	`as£¹
(
ùbP¬am
.
ty³Idc
 < 
SAO_TYPE_START_BO
);

1630 
uiSymbÞ
 = 2;

1632 
	`codeSaoTy³Idx
(
uiSymbÞ
);

1635 if(
ùbP¬am
.
modeIdc
 =ð
SAO_MODE_NEW
)

1637 
IÁ
 
numCÏs£s
 = (
ùbP¬am
.
ty³Idc
 =ð
SAO_TYPE_BO
)?4:
NUM_SAO_EO_CLASSES
;

1638 
IÁ
 
off£t
[4];

1639 
IÁ
 
k
=0;

1640 
IÁ
 
i
=0; i< 
numCÏs£s
; i++)

1642 if(
ùbP¬am
.
ty³Idc
 !ð
SAO_TYPE_BO
 && 
i
 =ð
SAO_CLASS_EO_PLAIN
)

1646 
IÁ
 
þassIdx
 = (
ùbP¬am
.
ty³Idc
 =ð
SAO_TYPE_BO
)?Ð(ùbP¬am.
ty³AuxInfo
+
i
)% 
NUM_SAO_BO_CLASSES
 ):i;

1647 
off£t
[
k
] = 
ùbP¬am
.off£t[
þassIdx
];

1648 
k
++;

1651 cÚ¡ 
IÁ
 
maxOff£tQV®
 = 
TComSam¶eAd­tiveOff£t
::
	`g‘MaxOff£tQV®
(
chªÃlB™D•th
);

1652 
IÁ
 
i
=0; i< 4; i++)

1654 
	`codeSaoMaxUvlc
((
off£t
[
i
]<0)?(-off£t[i]):(off£t[i]), 
maxOff£tQV®
 );

1658 if(
ùbP¬am
.
ty³Idc
 =ð
SAO_TYPE_BO
)

1660 
IÁ
 
i
=0; i< 4; i++)

1662 if(
off£t
[
i
] != 0)

1664 
	`codeSAOSign
((
off£t
[
i
]< 0)?1:0);

1668 
	`codeSaoUæc
(
NUM_SAO_BO_CLASSES_LOG2
, 
ùbP¬am
.
ty³AuxInfo
 );

1672 if(
bIsFœ¡CompOfChTy³
)

1674 
	`as£¹
(
ùbP¬am
.
ty³Idc
 - 
SAO_TYPE_START_EO
 >=0);

1675 
	`codeSaoUæc
(
NUM_SAO_EO_TYPES_LOG2
, 
ùbP¬am
.
ty³Idc
 - 
SAO_TYPE_START_EO
 );

1680 
	}
}

1683 
Void
 
	gTEncSbac
::
	$codeSAOBlkP¬am
(
SAOBlkP¬am
& 
§oBlkP¬am
, cÚ¡ 
B™D•ths
 &
b™D•ths


1684 , 
BoÞ
* 
¦iûEÇbËd


1685 , 
BoÞ
 
ËáM”geAvaž


1686 , 
BoÞ
 
aboveM”geAvaž


1687 , 
BoÞ
 
ÚlyE¡M”geInfo


1691 
BoÞ
 
isLeáM”ge
 = 
çl£
;

1692 
BoÞ
 
isAboveM”ge
ð
çl£
;

1694 if(
ËáM”geAvaž
)

1696 
isLeáM”ge
 = ((
§oBlkP¬am
[
COMPONENT_Y
].
modeIdc
 =ð
SAO_MODE_MERGE
è&& (§oBlkP¬am[COMPONENT_Y].
ty³Idc
 =ð
SAO_MERGE_LEFT
));

1697 
	`codeSaoM”ge
Ð
isLeáM”ge
?1:0 );

1700 ifÐ
aboveM”geAvaž
 && !
isLeáM”ge
)

1702 
isAboveM”ge
 = ((
§oBlkP¬am
[
COMPONENT_Y
].
modeIdc
 =ð
SAO_MODE_MERGE
è&& (§oBlkP¬am[COMPONENT_Y].
ty³Idc
 =ð
SAO_MERGE_ABOVE
));

1703 
	`codeSaoM”ge
Ð
isAboveM”ge
?1:0 );

1706 if(
ÚlyE¡M”geInfo
)

1711 if(!
isLeáM”ge
 && !
isAboveM”ge
)

1713 
IÁ
 
compIdx
=0; compIdx < 
MAX_NUM_COMPONENT
; compIdx++)

1715 
	`codeSAOOff£tP¬am
(
	`CompÚ’tID
(
compIdx
), 
§oBlkP¬am
[compIdx], 
¦iûEÇbËd
[compIdx], 
b™D•ths
.
»cÚ
[
	`toChªÃlTy³
(ComponentID(compIdx))]);

1718 
	}
}

1726 
Void
 
	gTEncSbac
::
	$e¡B™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
 )

1728 
	`e¡CBFB™
Ð
pcE¡B™sSbac
 );

1730 
	`e¡SignifiÿÁCÛffGroupM­B™
Ð
pcE¡B™sSbac
, 
chTy³
 );

1733 
	`e¡SignifiÿÁM­B™
Ð
pcE¡B™sSbac
, 
width
, 
height
, 
chTy³
 );

1736 
	`e¡La¡SignifiÿÁPos™iÚB™
Ð
pcE¡B™sSbac
, 
width
, 
height
, 
chTy³
, 
sÿnTy³
 );

1739 
	`e¡SignifiÿÁCÛffic›ÁsB™
Ð
pcE¡B™sSbac
, 
chTy³
 );

1741 
	`memýy
(
pcE¡B™sSbac
->
gÞombRiûAd­tiÚSti¡ics
, 
m_gÞombRiûAd­tiÚSti¡ics
, ((
UIÁ
è* 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
));

1742 
	}
}

1750 
Void
 
	gTEncSbac
::
	$e¡CBFB™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
 )

1752 
CÚ‹xtMod–
 *
pCtx
 = 
m_cCUQtCbfSCMod–
.
	`g‘
( 0 );

1754  
UIÁ
 
uiCtxInc
 = 0; uiCtxInø< (
NUM_QT_CBF_CTX_SETS
 * 
NUM_QT_CBF_CTX_PER_SET
); uiCtxInc++ )

1756 
pcE¡B™sSbac
->
blockCbpB™s
[ 
uiCtxInc
 ][ 0 ] = 
pCtx
[ uiCtxInø].
	`g‘EÁrÝyB™s
( 0 );

1757 
pcE¡B™sSbac
->
blockCbpB™s
[ 
uiCtxInc
 ][ 1 ] = 
pCtx
[ uiCtxInø].
	`g‘EÁrÝyB™s
( 1 );

1760 
pCtx
 = 
m_cCUQtRoÙCbfSCMod–
.
	`g‘
( 0 );

1762  
UIÁ
 
uiCtxInc
 = 0; uiCtxInc < 4; uiCtxInc++ )

1764 
pcE¡B™sSbac
->
blockRoÙCbpB™s
[ 
uiCtxInc
 ][ 0 ] = 
pCtx
[ uiCtxInø].
	`g‘EÁrÝyB™s
( 0 );

1765 
pcE¡B™sSbac
->
blockRoÙCbpB™s
[ 
uiCtxInc
 ][ 1 ] = 
pCtx
[ uiCtxInø].
	`g‘EÁrÝyB™s
( 1 );

1767 
	}
}

1776 
Void
 
	gTEncSbac
::
	$e¡SignifiÿÁCÛffGroupM­B™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
ChªÃlTy³
 
chTy³
 )

1778 
IÁ
 
fœ¡Ctx
 = 0, 
numCtx
 = 
NUM_SIG_CG_FLAG_CTX
;

1780  
IÁ
 
ùxIdx
 = 
fœ¡Ctx
; ctxIdx < fœ¡Ctx + 
numCtx
; ctxIdx++ )

1782  
UIÁ
 
uiBš
 = 0; uiBin < 2; uiBin++ )

1784 
pcE¡B™sSbac
->
signifiÿÁCÛffGroupB™s
[ 
ùxIdx
 ][ 
uiBš
 ] = 
m_cCUSigCÛffGroupSCMod–
.
	`g‘
Ð0, 
chTy³
, ctxIdx ).
	`g‘EÁrÝyB™s
( uiBin );

1787 
	}
}

1796 
Void
 
	gTEncSbac
::
	$e¡SignifiÿÁM­B™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
 )

1802 cÚ¡ 
UIÁ
 
fœ¡CompÚ’t
 = ((
	`isLuma
(
chTy³
)è? (
COMPONENT_Y
è: (
COMPONENT_Cb
));

1803 cÚ¡ 
UIÁ
 
Ï¡CompÚ’t
 = ((
	`isLuma
(
chTy³
)è? (
COMPONENT_Y
è: (
COMPONENT_Cb
));

1807 
IÁ
 
fœ¡Ctx
 = 
MAX_INT
;

1808 
IÁ
 
numCtx
 = 
MAX_INT
;

1810 ià((
width
 =ð4è&& (
height
 == 4))

1812 
fœ¡Ctx
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chTy³
][
CONTEXT_TYPE_4x4
];

1813 
numCtx
 = 
signifiÿnûM­CÚ‹xtS‘Size
 [
chTy³
][
CONTEXT_TYPE_4x4
];

1815 ià((
width
 =ð8è&& (
height
 == 8))

1817 
fœ¡Ctx
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chTy³
][
CONTEXT_TYPE_8x8
];

1818 
numCtx
 = 
signifiÿnûM­CÚ‹xtS‘Size
 [
chTy³
][
CONTEXT_TYPE_8x8
];

1822 
fœ¡Ctx
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chTy³
][
CONTEXT_TYPE_NxN
];

1823 
numCtx
 = 
signifiÿnûM­CÚ‹xtS‘Size
 [
chTy³
][
CONTEXT_TYPE_NxN
];

1830 
UIÁ
 
compÚ’t
 = 
fœ¡CompÚ’t
; compÚ’ˆ<ð
Ï¡CompÚ’t
; component++)

1832 cÚ¡ 
UIÁ
 
cÚ‹xtOff£t
 = 
	`g‘SignifiÿnûM­CÚ‹xtOff£t
(
	`CompÚ’tID
(
compÚ’t
));

1834 ià(
fœ¡Ctx
 > 0)

1836  
UIÁ
 
bš
 = 0; bin < 2; bin++ )

1838 
pcE¡B™sSbac
->
signifiÿÁB™s
[ 
cÚ‹xtOff£t
 ][ 
bš
 ] = 
m_cCUSigSCMod–
.
	`g‘
Ð0, 0, cÚ‹xtOff£ˆ).
	`g‘EÁrÝyB™s
( bin );

1844  
UIÁ
 
bš
 = 0; bin < 2; bin++ )

1846 cÚ¡ 
IÁ
 
ùxIdx
 = 
signifiÿnûM­CÚ‹xtS‘S¹
[
chTy³
][
CONTEXT_TYPE_SINGLE
];

1847 
pcE¡B™sSbac
->
signifiÿÁB™s
[ 
cÚ‹xtOff£t
 + 
ùxIdx
 ][ 
bš
 ] = 
m_cCUSigSCMod–
.
	`g‘
Ð0, 0, (cÚ‹xtOff£ˆ+ ctxIdxè).
	`g‘EÁrÝyB™s
( bin );

1850  
IÁ
 
ùxIdx
 = 
fœ¡Ctx
; ctxIdx < fœ¡Ctx + 
numCtx
; ctxIdx++ )

1852  
UIÁ
 
uiBš
 = 0; uiBin < 2; uiBin++ )

1854 
pcE¡B™sSbac
->
signifiÿÁB™s
[ 
cÚ‹xtOff£t
 + 
ùxIdx
 ][ 
uiBš
 ] = 
m_cCUSigSCMod–
.
	`g‘
Ð0, 0, (cÚ‹xtOff£ˆ+ ctxIdxè).
	`g‘EÁrÝyB™s
( uiBin );

1860 
	}
}

1870 
Void
 
	gTEncSbac
::
	$e¡La¡SignifiÿÁPos™iÚB™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
 )

1872 ià(
sÿnTy³
 =ð
SCAN_VER
)

1874 
	`sw­
(
width
, 
height
);

1881 cÚ¡ 
UIÁ
 
fœ¡CompÚ’t
 = ((
	`isLuma
(
chTy³
)è? (
COMPONENT_Y
è: (
COMPONENT_Cb
));

1882 cÚ¡ 
UIÁ
 
Ï¡CompÚ’t
 = ((
	`isLuma
(
chTy³
)è? (
COMPONENT_Y
è: (
COMPONENT_Cb
));

1888 
UIÁ
 
compÚ’tIndex
 = 
fœ¡CompÚ’t
; compÚ’tIndex <ð
Ï¡CompÚ’t
; componentIndex++)

1890 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

1892 
IÁ
 
iB™sX
 = 0, 
iB™sY
 = 0;

1894 
IÁ
 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
;

1895 
	`g‘La¡SignifiÿÁCÚ‹xtP¬am‘”s
(
	`CompÚ’tID
(
compÚ’t
), 
width
, 
height
, 
blkSizeOff£tX
, 
blkSizeOff£tY
, 
shiáX
, 
shiáY
);

1897 
IÁ
 
ùx
;

1899 cÚ¡ 
ChªÃlTy³
 
chªÃlTy³
 = 
	`toChªÃlTy³
(
	`CompÚ’tID
(
compÚ’t
));

1901 
CÚ‹xtMod–
 *cÚ¡ 
pCtxX
 = 
m_cCuCtxLa¡X
.
	`g‘
Ð0, 
chªÃlTy³
 );

1902 
CÚ‹xtMod–
 *cÚ¡ 
pCtxY
 = 
m_cCuCtxLa¡Y
.
	`g‘
Ð0, 
chªÃlTy³
 );

1903 
IÁ
 *cÚ¡ 
Ï¡XB™sA¼ay
 = 
pcE¡B™sSbac
->
Ï¡XB™s
[
chªÃlTy³
];

1904 
IÁ
 *cÚ¡ 
Ï¡YB™sA¼ay
 = 
pcE¡B™sSbac
->
Ï¡YB™s
[
chªÃlTy³
];

1910 
ùx
 = 0; ctx < 
g_uiGroupIdx
[ 
width
 - 1 ]; ctx++)

1912 
IÁ
 
ùxOff£t
 = 
blkSizeOff£tX
 + (
ùx
 >>
shiáX
);

1913 
Ï¡XB™sA¼ay
[ 
ùx
 ] = 
iB™sX
 + 
pCtxX
[ 
ùxOff£t
 ].
	`g‘EÁrÝyB™s
( 0 );

1914 
iB™sX
 +ð
pCtxX
[ 
ùxOff£t
 ].
	`g‘EÁrÝyB™s
( 1 );

1917 
Ï¡XB™sA¼ay
[
ùx
] = 
iB™sX
;

1923 
ùx
 = 0; ctx < 
g_uiGroupIdx
[ 
height
 - 1 ]; ctx++)

1925 
IÁ
 
ùxOff£t
 = 
blkSizeOff£tY
 + (
ùx
 >>
shiáY
);

1926 
Ï¡YB™sA¼ay
[ 
ùx
 ] = 
iB™sY
 + 
pCtxY
[ 
ùxOff£t
 ].
	`g‘EÁrÝyB™s
( 0 );

1927 
iB™sY
 +ð
pCtxY
[ 
ùxOff£t
 ].
	`g‘EÁrÝyB™s
( 1 );

1930 
Ï¡YB™sA¼ay
[
ùx
] = 
iB™sY
;

1935 
	}
}

1944 
Void
 
	gTEncSbac
::
	$e¡SignifiÿÁCÛffic›ÁsB™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
ChªÃlTy³
 
chTy³
 )

1946 
CÚ‹xtMod–
 *
ùxOÃ
 = 
m_cCUOÃSCMod–
.
	`g‘
(0, 0);

1947 
CÚ‹xtMod–
 *
ùxAbs
 = 
m_cCUAbsSCMod–
.
	`g‘
(0, 0);

1949 cÚ¡ 
UIÁ
 
ÚeS¹Index
 = ((
	`isLuma
(
chTy³
)è? (0è: (
NUM_ONE_FLAG_CTX_LUMA
));

1950 cÚ¡ 
UIÁ
 
ÚeStÝIndex
 = ((
	`isLuma
(
chTy³
)è? (
NUM_ONE_FLAG_CTX_LUMA
è: (
NUM_ONE_FLAG_CTX
));

1951 cÚ¡ 
UIÁ
 
absS¹Index
 = ((
	`isLuma
(
chTy³
)è? (0è: (
NUM_ABS_FLAG_CTX_LUMA
));

1952 cÚ¡ 
UIÁ
 
absStÝIndex
 = ((
	`isLuma
(
chTy³
)è? (
NUM_ABS_FLAG_CTX_LUMA
è: (
NUM_ABS_FLAG_CTX
));

1954 
IÁ
 
ùxIdx
 = 
ÚeS¹Index
; ctxIdx < 
ÚeStÝIndex
; ctxIdx++)

1956 
pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
ùxIdx
 ][ 0 ] = 
ùxOÃ
[ ctxIdx ].
	`g‘EÁrÝyB™s
( 0 );

1957 
pcE¡B™sSbac
->
m_g»©”OÃB™s
[ 
ùxIdx
 ][ 1 ] = 
ùxOÃ
[ ctxIdx ].
	`g‘EÁrÝyB™s
( 1 );

1960 
IÁ
 
ùxIdx
 = 
absS¹Index
; ctxIdx < 
absStÝIndex
; ctxIdx++)

1962 
pcE¡B™sSbac
->
m_Ëv–AbsB™s
[ 
ùxIdx
 ][ 0 ] = 
ùxAbs
[ ctxIdx ].
	`g‘EÁrÝyB™s
( 0 );

1963 
pcE¡B™sSbac
->
m_Ëv–AbsB™s
[ 
ùxIdx
 ][ 1 ] = 
ùxAbs
[ ctxIdx ].
	`g‘EÁrÝyB™s
( 1 );

1965 
	}
}

1972 
Void
 
	gTEncSbac
::
	$xCÝyCÚ‹xtsFrom
ÐcÚ¡ 
TEncSbac
* 
pSrc
 )

1974 
	`memýy
(
m_cÚ‹xtMod–s
, 
pSrc
->m_cÚ‹xtMod–s, 
m_numCÚ‹xtMod–s
*(m_contextModels[0]));

1975 
	`memýy
(
m_gÞombRiûAd­tiÚSti¡ics
, 
pSrc
->m_gÞombRiûAd­tiÚSti¡ics, ((
UIÁ
è* 
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
));

1976 
	}
}

1978 
Void
 
	gTEncSbac
::
	$lßdCÚ‹xts
 ( cÚ¡ 
TEncSbac
* 
pSrc
)

1980 
	`xCÝyCÚ‹xtsFrom
(
pSrc
);

1981 
	}
}

1987 
Void
 
	gTEncSbac
::
	$codeEx¶ic™RdpcmMode
Ð
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
 )

1989 
TComD©aCU
 *
cu
 = 
rTu
.
	`g‘CU
();

1990 cÚ¡ 
TComReùªgË
 &
»ù
 = 
rTu
.
	`g‘Reù
(
compID
);

1991 cÚ¡ 
UIÁ
 
absP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

1992 cÚ¡ 
UIÁ
 
tuHeight
 = 
g_aucCÚv”tToB™
[
»ù
.
height
];

1993 cÚ¡ 
UIÁ
 
tuWidth
 = 
g_aucCÚv”tToB™
[
»ù
.
width
];

1995 
	`as£¹
(
tuHeight
 =ð
tuWidth
);

1996 
	`as£¹
(
tuHeight
 < 4);

1998 
UIÁ
 
ex¶ic™RdpcmMode
 = 
cu
->
	`g‘Ex¶ic™RdpcmMode
(
compID
, 
absP¬tIdx
);

2000 ifÐ
ex¶ic™RdpcmMode
 =ð
RDPCM_OFF
 )

2002 
m_pcBšIf
->
	`’codeBš
 (0, 
m_ex¶ic™RdpcmFÏgSCMod–
.
	`g‘
 (0, 
	`toChªÃlTy³
(
compID
), 0));

2004 ifÐ
ex¶ic™RdpcmMode
 =ð
RDPCM_HOR
 ||ƒx¶ic™RdpcmMod=ð
RDPCM_VER
 )

2006 
m_pcBšIf
->
	`’codeBš
 (1, 
m_ex¶ic™RdpcmFÏgSCMod–
.
	`g‘
 (0, 
	`toChªÃlTy³
(
compID
), 0));

2007 if(
ex¶ic™RdpcmMode
 =ð
RDPCM_HOR
)

2009 
m_pcBšIf
->
	`’codeBš
 ( 0, 
m_ex¶ic™RdpcmDœSCMod–
.
	`g‘
(0, 
	`toChªÃlTy³
(
compID
), 0));

2013 
m_pcBšIf
->
	`’codeBš
 ( 1, 
m_ex¶ic™RdpcmDœSCMod–
.
	`g‘
(0, 
	`toChªÃlTy³
(
compID
), 0));

2018 
	`as£¹
(0);

2020 
	}
}

	@source/Lib/TLibEncoder/TEncSbac.h

38 #iâdeà
__TENCSBAC__


39 
	#__TENCSBAC__


	)

41 #ià
_MSC_VER
 > 1000

42 #´agm¨
Úû


45 
	~"TLibCommÚ/TComB™SŒ—m.h
"

46 
	~"TLibCommÚ/CÚ‹xtTabËs.h
"

47 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

48 
	~"TLibCommÚ/CÚ‹xtMod–3DBufãr.h
"

49 
	~"TEncEÁrÝy.h
"

50 
	~"TEncBšCod”.h
"

51 
	~"TEncBšCod”CABAC.h
"

52 #ià
FAST_BIT_EST


53 
	~"TEncBšCod”CABACCouÁ”.h
"

56 
þass
 
	gTEncTÝ
;

66 þas 
	cTEncSbac
 : 
public
 
TEncEÁrÝyIf


68 
public
:

69 
TEncSbac
();

70 
	mvœtu®
 ~
TEncSbac
();

72 
Void
 
	$š™
 ( 
TEncBšIf
* 
p
 ) { 
m_pcBšIf
 =…; }

73 
Void
 
	$unš™
 (è{ 
m_pcBšIf
 = 0; 
	}
}

76 
Void
 
»£tEÁrÝy
 (cÚ¡ 
TComSliû
 *
pSliû
);

77 
SliûTy³
 
d‘”mšeCabacIn™Idx
 (cÚ¡ 
TComSliû
 *
pSliû
);

78 
Void
 
	$£tB™¡»am
 ( 
TComB™If
* 
p
 ) { 
m_pcB™If
 =…; 
m_pcBšIf
->
	`š™
Ð°); 
	}
}

80 
Void
 
lßd
 ( cÚ¡ 
TEncSbac
* 
pSrc
 );

81 
Void
 
lßdIÁ¿DœMode
 ( cÚ¡ 
TEncSbac
* 
pSü
, cÚ¡ 
ChªÃlTy³
 
chTy³
 );

82 
Void
 
	$¡Üe
 ( 
TEncSbac
* 
pDe¡
 ) const;

83 
Void
 
	`lßdCÚ‹xts
 ( cÚ¡ 
TEncSbac
* 
pSrc
 );

84 
Void
 
	$»£tB™s
 (è{ 
m_pcBšIf
->
	`»£tB™s
(); 
m_pcB™If
->»£tB™s(); 
	}
}

85 
UIÁ
 
	$g‘Numb”OfWr™‹nB™s
 (è{  
m_pcBšIf
->
	`g‘NumWr™‹nB™s
(); 
	}
}

88 
Void
 
codeVPS
 ( cÚ¡ 
TComVPS
* 
pcVPS
 );

89 
Void
 
codeSPS
 ( cÚ¡ 
TComSPS
* 
pcSPS
 );

90 
Void
 
codePPS
 ( cÚ¡ 
TComPPS
* 
pcPPS
 );

91 
Void
 
codeSliûH—d”
 ( 
TComSliû
* 
pcSliû
 );

92 
Void
 
codeTžesWPPEÁryPošt
 ( 
TComSliû
* 
pSliû
 );

93 
Void
 
codeT”mš©šgB™
 ( 
UIÁ
 
užsLa¡
 );

94 
Void
 
codeSliûFšish
 ();

95 
Void
 
codeSaoMaxUvlc
 ( 
UIÁ
 
code
, UIÁ 
maxSymbÞ
 );

96 
Void
 
codeSaoM”ge
 ( 
UIÁ
 
uiCode
 );

97 
Void
 
codeSaoTy³Idx
 ( 
UIÁ
 
uiCode
);

98 
Void
 
codeSaoUæc
 ( 
UIÁ
 
uiL’gth
, UIÁ 
uiCode
 );

99 
Void
 
codeSAOSign
 ( 
UIÁ
 
uiCode
);

101 
Void
 
codeSAOOff£tP¬am
(
CompÚ’tID
 
compIdx
, 
SAOOff£t
& 
ùbP¬am
, 
BoÞ
 
¦iûEÇbËd
, cÚ¡ 
IÁ
 
chªÃlB™D•th
);

102 
Void
 
codeSAOBlkP¬am
(
SAOBlkP¬am
& 
§oBlkP¬am
, cÚ¡ 
B™D•ths
 &
b™D•ths


103 , 
BoÞ
* 
¦iûEÇbËd


104 , 
BoÞ
 
ËáM”geAvaž


105 , 
BoÞ
 
aboveM”geAvaž


106 , 
BoÞ
 
ÚlyE¡M”geInfo
 = 
çl£


109 
	g´iv©e
:

110 
Void
 
xWr™eUÇrySymbÞ
 ( 
UIÁ
 
uiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
 );

111 
Void
 
xWr™eUÇryMaxSymbÞ
 ( 
UIÁ
 
uiSymbÞ
, 
CÚ‹xtMod–
* 
pcSCMod–
, 
IÁ
 
iOff£t
, UIÁ 
uiMaxSymbÞ
 );

112 
Void
 
xWr™eEpExGÞomb
 ( 
UIÁ
 
uiSymbÞ
, UIÁ 
uiCouÁ
 );

113 
Void
 
xWr™eCÛfRemašExGÞomb
 ( 
UIÁ
 
symbÞ
, UIÁ &
rP¬am
, cÚ¡ 
BoÞ
 
u£Lim™edP»fixL’gth
, cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
 );

115 
Void
 
xCÝyFrom
 ( cÚ¡ 
TEncSbac
* 
pSrc
 );

116 
Void
 
xCÝyCÚ‹xtsFrom
 ( cÚ¡ 
TEncSbac
* 
pSrc
 );

118 
	g´Ùeùed
:

119 
TComB™If
* 
m_pcB™If
;

120 
TEncBšIf
* 
	gm_pcBšIf
;

124 
	gpublic
:

125 
Void
 
codeCUT¿nsquªtBy·ssFÏg
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

126 
Void
 
codeSkFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

127 
Void
 
codeM”geFÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

128 
Void
 
codeM”geIndex
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

129 
Void
 
codeS¶™FÏg
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

130 
Void
 
codeMVPIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

132 
Void
 
codeP¬tSize
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, UIÁ 
uiD•th
 );

133 
Void
 
codeP»dMode
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

134 
Void
 
codeIPCMInfo
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

135 
Void
 
codeT¿nsfÜmSubdivFÏg
 ( 
UIÁ
 
uiSymbÞ
, UIÁ 
uiCtx
 );

136 
Void
 
codeQtCbf
 ( 
TComTU
 & 
rTu
, cÚ¡ 
CompÚ’tID
 
compID
, cÚ¡ 
BoÞ
 
lowe¡Lev–
 );

137 
Void
 
codeQtRoÙCbf
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

138 
Void
 
codeQtCbfZ”o
 ( 
TComTU
 &
rTu
, cÚ¡ 
ChªÃlTy³
 
chTy³
 );

139 
Void
 
codeQtRoÙCbfZ”o
 ( );

140 
Void
 
codeIÁ¿DœLumaAng
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
absP¬tIdx
, 
BoÞ
 
isMuÉË
);

142 
Void
 
codeIÁ¿DœChroma
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

143 
Void
 
codeIÁ”Dœ
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

144 
Void
 
codeRefFrmIdx
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

145 
Void
 
codeMvd
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
RefPicLi¡
 
eRefLi¡
 );

147 
Void
 
codeCrossCompÚ’tP»diùiÚ
Ð
TComTU
 &
rTu
, 
CompÚ’tID
 
compID
 );

149 
Void
 
codeD–QP
 ( 
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
 );

150 
Void
 
codeChromaQpAdju¡m’t
 ( 
TComD©aCU
* 
cu
, 
UIÁ
 
absP¬tIdx
 );

152 
Void
 
codeLa¡SignifiÿÁXY
 ( 
UIÁ
 
uiPosX
, UIÁ 
uiPosY
, 
IÁ
 
width
, IÁ 
height
, 
CompÚ’tID
 
compÚ’t
, UIÁ 
uiSÿnIdx
 );

153 
Void
 
codeCÛffNxN
 ( 
TComTU
 &
rTu
, 
TCÛff
* 
pcCÛf
, cÚ¡ 
CompÚ’tID
 
compID
 );

154 
Void
 
codeT¿nsfÜmSkFÏgs
 ( 
TComTU
 &
rTu
, 
CompÚ’tID
 
compÚ’t
 );

160 
Void
 
e¡B™
 (
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
);

161 
Void
 
e¡CBFB™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
 );

162 
Void
 
e¡SignifiÿÁCÛffGroupM­B™
Ð
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
ChªÃlTy³
 
chTy³
 );

163 
Void
 
e¡SignifiÿÁM­B™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
 );

164 
Void
 
e¡La¡SignifiÿÁPos™iÚB™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
IÁ
 
width
, IÁ 
height
, 
ChªÃlTy³
 
chTy³
, 
COEFF_SCAN_TYPE
 
sÿnTy³
 );

165 
Void
 
e¡SignifiÿÁCÛffic›ÁsB™
 ( 
e¡B™sSbacSŒuù
* 
pcE¡B™sSbac
, 
ChªÃlTy³
 
chTy³
 );

167 
Void
 
codeEx¶ic™RdpcmMode
 ( 
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
 );

170 
TEncBšIf
* 
	$g‘EncBšIf
(è{  
m_pcBšIf
; 
	}
}

171 
	g´iv©e
:

172 
CÚ‹xtMod–
 
m_cÚ‹xtMod–s
[
MAX_NUM_CTX_MOD
];

173 
IÁ
 
	gm_numCÚ‹xtMod–s
;

174 
CÚ‹xtMod–3DBufãr
 
	gm_cCUS¶™FÏgSCMod–
;

175 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSkFÏgSCMod–
;

176 
CÚ‹xtMod–3DBufãr
 
	gm_cCUM”geFÏgExtSCMod–
;

177 
CÚ‹xtMod–3DBufãr
 
	gm_cCUM”geIdxExtSCMod–
;

178 
CÚ‹xtMod–3DBufãr
 
	gm_cCUP¬tSizeSCMod–
;

179 
CÚ‹xtMod–3DBufãr
 
	gm_cCUP»dModeSCMod–
;

180 
CÚ‹xtMod–3DBufãr
 
	gm_cCUIÁ¿P»dSCMod–
;

181 
CÚ‹xtMod–3DBufãr
 
	gm_cCUChromaP»dSCMod–
;

182 
CÚ‹xtMod–3DBufãr
 
	gm_cCUD–QpSCMod–
;

183 
CÚ‹xtMod–3DBufãr
 
	gm_cCUIÁ”DœSCMod–
;

184 
CÚ‹xtMod–3DBufãr
 
	gm_cCURefPicSCMod–
;

185 
CÚ‹xtMod–3DBufãr
 
	gm_cCUMvdSCMod–
;

186 
CÚ‹xtMod–3DBufãr
 
	gm_cCUQtCbfSCMod–
;

187 
CÚ‹xtMod–3DBufãr
 
	gm_cCUT¿nsSubdivFÏgSCMod–
;

188 
CÚ‹xtMod–3DBufãr
 
	gm_cCUQtRoÙCbfSCMod–
;

190 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSigCÛffGroupSCMod–
;

191 
CÚ‹xtMod–3DBufãr
 
	gm_cCUSigSCMod–
;

192 
CÚ‹xtMod–3DBufãr
 
	gm_cCuCtxLa¡X
;

193 
CÚ‹xtMod–3DBufãr
 
	gm_cCuCtxLa¡Y
;

194 
CÚ‹xtMod–3DBufãr
 
	gm_cCUOÃSCMod–
;

195 
CÚ‹xtMod–3DBufãr
 
	gm_cCUAbsSCMod–
;

197 
CÚ‹xtMod–3DBufãr
 
	gm_cMVPIdxSCMod–
;

199 
CÚ‹xtMod–3DBufãr
 
	gm_cSaoM”geSCMod–
;

200 
CÚ‹xtMod–3DBufãr
 
	gm_cSaoTy³IdxSCMod–
;

201 
CÚ‹xtMod–3DBufãr
 
	gm_cT¿nsfÜmSkSCMod–
;

202 
CÚ‹xtMod–3DBufãr
 
	gm_CUT¿nsquªtBy·ssFÏgSCMod–
;

203 
CÚ‹xtMod–3DBufãr
 
	gm_ex¶ic™RdpcmFÏgSCMod–
;

204 
CÚ‹xtMod–3DBufãr
 
	gm_ex¶ic™RdpcmDœSCMod–
;

205 
CÚ‹xtMod–3DBufãr
 
	gm_cCrossCompÚ’tP»diùiÚSCMod–
;

207 
CÚ‹xtMod–3DBufãr
 
	gm_ChromaQpAdjFÏgSCMod–
;

208 
CÚ‹xtMod–3DBufãr
 
	gm_ChromaQpAdjIdcSCMod–
;

210 
UIÁ
 
	gm_gÞombRiûAd­tiÚSti¡ics
[
RExt__GOLOMB_RICE_ADAPTATION_STATISTICS_SETS
];

	@source/Lib/TLibEncoder/TEncSearch.cpp

38 
	~"TLibCommÚ/CommÚDef.h
"

39 
	~"TLibCommÚ/TComRom.h
"

40 
	~"TLibCommÚ/TComMÙiÚInfo.h
"

41 
	~"TEncS—rch.h
"

42 
	~"TLibCommÚ/TComTU.h
"

43 
	~"TLibCommÚ/Debug.h
"

44 
	~<m©h.h
>

45 
	~<lim™s
>

51 cÚ¡ 
TComMv
 
	gs_acMvRefšeH
[9] =

53 
TComMv
( 0, 0 ),

54 
TComMv
( 0, -1 ),

55 
TComMv
( 0, 1 ),

56 
TComMv
( -1, 0 ),

57 
TComMv
( 1, 0 ),

58 
TComMv
( -1, -1 ),

59 
TComMv
( 1, -1 ),

60 
TComMv
( -1, 1 ),

61 
TComMv
( 1, 1 )

64 cÚ¡ 
TComMv
 
	gs_acMvRefšeQ
[9] =

66 
TComMv
( 0, 0 ),

67 
TComMv
( 0, -1 ),

68 
TComMv
( 0, 1 ),

69 
TComMv
( -1, -1 ),

70 
TComMv
( 1, -1 ),

71 
TComMv
( -1, 0 ),

72 
TComMv
( 1, 0 ),

73 
TComMv
( -1, 1 ),

74 
TComMv
( 1, 1 )

77 
Void
 
	$off£tSubTUCBFs
(
TComTU
 &
rTu
, cÚ¡ 
CompÚ’tID
 
compID
)

79 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

80 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

81 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
(
compID
);

82 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
) >> 1;

86 
UCh¬
 
subTUCBF
[2];

87 
UCh¬
 
combšedSubTUCBF
 = 0;

89 
UIÁ
 
subTU
 = 0; subTU < 2; subTU++)

91 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
uiAbsP¬tIdx
 + (
subTU
 * 
·¹IdxesP”SubTU
);

93 
subTUCBF
[
subTU
] = 
pcCU
->
	`g‘Cbf
(
subTUAbsP¬tIdx
, 
compID
, 
uiTrD•th
);

94 
combšedSubTUCBF
 |ð
subTUCBF
[
subTU
];

97 
UIÁ
 
subTU
 = 0; subTU < 2; subTU++)

99 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
uiAbsP¬tIdx
 + (
subTU
 * 
·¹IdxesP”SubTU
);

100 cÚ¡ 
UCh¬
 
compos™eCBF
 = (
subTUCBF
[
subTU
] << 1è| 
combšedSubTUCBF
;

102 
pcCU
->
	`£tCbfP¬tRªge
((
compos™eCBF
 << 
uiTrD•th
), 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

104 
	}
}

107 
	gTEncS—rch
::
	$TEncS—rch
()

108 : 
	`m_puhQTTempTrIdx
(
NULL
)

109 , 
	`m_pcQTTempTComYuv
(
NULL
)

110 , 
	`m_pcEncCfg
 (
NULL
)

111 , 
	`m_pcTrQuªt
 (
NULL
)

112 , 
	`m_pcRdCo¡
 (
NULL
)

113 , 
	`m_pcEÁrÝyCod”
 (
NULL
)

114 , 
	`m_iS—rchRªge
 (0)

115 , 
	`m_b»dS—rchRªge
 (0)

116 , 
	`m_mÙiÚE¡im©iÚS—rchM‘hod
 (
MESEARCH_FULL
)

117 , 
	`m_µpcRDSbacCod”
 (
NULL
)

118 , 
	`m_pcRDGoOnSbacCod”
 (
NULL
)

119 , 
	`m_pTempP–
 (
NULL
)

120 , 
	$m_isIn™Ÿlized
 (
çl£
)

122 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

124 
m_µcQTTempCÛff
[
ch
] = 
NULL
;

125 #ià
ADAPTIVE_QP_SELECTION


126 
m_µcQTTempA¾CÛff
[
ch
] = 
NULL
;

128 
m_puhQTTempCbf
[
ch
] = 
NULL
;

129 
m_phQTTempCrossCompÚ’tP»diùiÚAÍha
[
ch
] = 
NULL
;

130 
m_pSh¬edP»dT¿nsfÜmSk
[
ch
] = 
NULL
;

131 
m_pcQTTempTUCÛff
[
ch
] = 
NULL
;

132 #ià
ADAPTIVE_QP_SELECTION


133 
m_µcQTTempTUA¾CÛff
[
ch
] = 
NULL
;

135 
m_puhQTTempT¿nsfÜmSkFÏg
[
ch
] = 
NULL
;

138 
IÁ
 
i
=0; i<
MAX_NUM_REF_LIST_ADAPT_SR
; i++)

140 
	`mem£t
 (
m_¯iAd­tSR
[
i
], 0, 
MAX_IDX_ADAPT_SR
 *  (
IÁ
));

142 
IÁ
 
i
=0; i<
AMVP_MAX_NUM_CANDS
+1; i++)

144 
	`mem£t
 (
m_auiMVPIdxCo¡
[
i
], 0, (
AMVP_MAX_NUM_CANDS
+1è*  (
UIÁ
) );

147 
	`£tWpSÿlšgDi¡P¬am
Ð
NULL
, -1, 
REF_PIC_LIST_X
 );

148 
	}
}

151 
Void
 
	gTEncS—rch
::
	$de¡roy
()

153 
	`as£¹
 (
m_isIn™Ÿlized
);

154 iàÐ
m_pTempP–
 )

156 
d–‘e
 [] 
m_pTempP–
;

157 
m_pTempP–
 = 
NULL
;

160 iàÐ
m_pcEncCfg
 )

162 cÚ¡ 
UIÁ
 
uiNumLay”sAÎoÿ‹d
 = 
m_pcEncCfg
->
	`g‘QuadŒ“TULog2MaxSize
()-m_pcEncCfg->
	`g‘QuadŒ“TULog2MšSize
()+1;

164 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

166 
UIÁ
 
Ïy”
 = 0;†ay” < 
uiNumLay”sAÎoÿ‹d
;†ayer++)

168 
d–‘e
[] 
m_µcQTTempCÛff
[
ch
][
Ïy”
];

169 #ià
ADAPTIVE_QP_SELECTION


170 
d–‘e
[] 
m_µcQTTempA¾CÛff
[
ch
][
Ïy”
];

173 
d–‘e
[] 
m_µcQTTempCÛff
[
ch
];

174 
d–‘e
[] 
m_puhQTTempCbf
[
ch
];

175 #ià
ADAPTIVE_QP_SELECTION


176 
d–‘e
[] 
m_µcQTTempA¾CÛff
[
ch
];

180  
UIÁ
 
Ïy”
 = 0;†ay” < 
uiNumLay”sAÎoÿ‹d
;†ayer++ )

182 
m_pcQTTempTComYuv
[
Ïy”
].
	`de¡roy
();

186 
d–‘e
[] 
m_puhQTTempTrIdx
;

187 
d–‘e
[] 
m_pcQTTempTComYuv
;

189 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

191 
d–‘e
[] 
m_pSh¬edP»dT¿nsfÜmSk
[
ch
];

192 
d–‘e
[] 
m_pcQTTempTUCÛff
[
ch
];

193 #ià
ADAPTIVE_QP_SELECTION


194 
d–‘e
[] 
m_µcQTTempTUA¾CÛff
[
ch
];

196 
d–‘e
[] 
m_phQTTempCrossCompÚ’tP»diùiÚAÍha
[
ch
];

197 
d–‘e
[] 
m_puhQTTempT¿nsfÜmSkFÏg
[
ch
];

199 
m_pcQTTempT¿nsfÜmSkTComYuv
.
	`de¡roy
();

201 
m_tmpYuvP»d
.
	`de¡roy
();

202 
m_isIn™Ÿlized
 = 
çl£
;

203 
	}
}

205 
	gTEncS—rch
::~
	$TEncS—rch
()

207 ià(
m_isIn™Ÿlized
)

209 
	`de¡roy
();

211 
	}
}

216 
Void
 
	gTEncS—rch
::
	$š™
(
TEncCfg
* 
pcEncCfg
,

217 
TComTrQuªt
* 
pcTrQuªt
,

218 
IÁ
 
iS—rchRªge
,

219 
IÁ
 
b»dS—rchRªge
,

220 
MES—rchM‘hod
 
mÙiÚE¡im©iÚS—rchM‘hod
,

221 cÚ¡ 
UIÁ
 
maxCUWidth
,

222 cÚ¡ 
UIÁ
 
maxCUHeight
,

223 cÚ¡ 
UIÁ
 
maxTÙ®CUD•th
,

224 
TEncEÁrÝy
* 
pcEÁrÝyCod”
,

225 
TComRdCo¡
* 
pcRdCo¡
,

226 
TEncSbac
*** 
µpcRDSbacCod”
,

227 
TEncSbac
* 
pcRDGoOnSbacCod”


230 
	`as£¹
 (!
m_isIn™Ÿlized
);

231 
m_pcEncCfg
 = 
pcEncCfg
;

232 
m_pcTrQuªt
 = 
pcTrQuªt
;

233 
m_iS—rchRªge
 = 
iS—rchRªge
;

234 
m_b»dS—rchRªge
 = 
b»dS—rchRªge
;

235 
m_mÙiÚE¡im©iÚS—rchM‘hod
 = 
mÙiÚE¡im©iÚS—rchM‘hod
;

236 
m_pcEÁrÝyCod”
 = 
pcEÁrÝyCod”
;

237 
m_pcRdCo¡
 = 
pcRdCo¡
;

239 
m_µpcRDSbacCod”
 = 
µpcRDSbacCod”
;

240 
m_pcRDGoOnSbacCod”
 = 
pcRDGoOnSbacCod”
;

242 
UIÁ
 
iDœ
 = 0; iDœ < 
MAX_NUM_REF_LIST_ADAPT_SR
; iDir++)

244 
UIÁ
 
iRefIdx
 = 0; iRefIdx < 
MAX_IDX_ADAPT_SR
; iRefIdx++)

246 
m_¯iAd­tSR
[
iDœ
][
iRefIdx
] = 
iS—rchRªge
;

251  
IÁ
 
iNum
 = 0; iNum < 
AMVP_MAX_NUM_CANDS
+1; iNum++)

253  
IÁ
 
iIdx
 = 0; iIdx < 
AMVP_MAX_NUM_CANDS
; iIdx++)

255 ià(
iIdx
 < 
iNum
)

257 
m_auiMVPIdxCo¡
[
iIdx
][
iNum
] = 
	`xG‘MvpIdxB™s
(iIdx, iNum);

261 
m_auiMVPIdxCo¡
[
iIdx
][
iNum
] = 
MAX_INT
;

266 cÚ¡ 
ChromaFÜm©
 
cfÜm
=
pcEncCfg
->
	`g‘ChromaFÜm©Idc
();

267 
	`š™TempBuff
(
cfÜm
);

269 
m_pTempP–
 = 
Ãw
 
P–
[
maxCUWidth
*
maxCUHeight
];

271 cÚ¡ 
UIÁ
 
uiNumLay”sToAÎoÿ‹
 = 
pcEncCfg
->
	`g‘QuadŒ“TULog2MaxSize
()-pcEncCfg->
	`g‘QuadŒ“TULog2MšSize
()+1;

272 cÚ¡ 
UIÁ
 
uiNumP¬t™iÚs
 = 1<<(
maxTÙ®CUD•th
<<1);

273 
UIÁ
 
ch
=0; ch<
MAX_NUM_COMPONENT
; ch++)

275 cÚ¡ 
UIÁ
 
csx
=::
	`g‘CompÚ’tSÿËX
(
	`CompÚ’tID
(
ch
), 
cfÜm
);

276 cÚ¡ 
UIÁ
 
csy
=::
	`g‘CompÚ’tSÿËY
(
	`CompÚ’tID
(
ch
), 
cfÜm
);

277 
m_µcQTTempCÛff
[
ch
] = 
Ãw
 
TCÛff
* [
uiNumLay”sToAÎoÿ‹
];

278 #ià
ADAPTIVE_QP_SELECTION


279 
m_µcQTTempA¾CÛff
[
ch
] = 
Ãw
 
TCÛff
*[
uiNumLay”sToAÎoÿ‹
];

281 
m_puhQTTempCbf
[
ch
] = 
Ãw
 
UCh¬
 [
uiNumP¬t™iÚs
];

283 
UIÁ
 
Ïy”
 = 0;†ay” < 
uiNumLay”sToAÎoÿ‹
;†ayer++)

285 
m_µcQTTempCÛff
[
ch
][
Ïy”
] = 
Ãw
 
TCÛff
[(
maxCUWidth
*
maxCUHeight
)>>(
csx
+
csy
)];

286 #ià
ADAPTIVE_QP_SELECTION


287 
m_µcQTTempA¾CÛff
[
ch
][
Ïy”
] = 
Ãw
 
TCÛff
[(
maxCUWidth
*
maxCUHeight
)>>(
csx
+
csy
) ];

291 
m_phQTTempCrossCompÚ’tP»diùiÚAÍha
[
ch
] = 
Ãw
 
SCh¬
 [
uiNumP¬t™iÚs
];

292 
m_pSh¬edP»dT¿nsfÜmSk
[
ch
] = 
Ãw
 
P–
 [
MAX_CU_SIZE
*MAX_CU_SIZE];

293 
m_pcQTTempTUCÛff
[
ch
] = 
Ãw
 
TCÛff
[
MAX_CU_SIZE
*MAX_CU_SIZE];

294 #ià
ADAPTIVE_QP_SELECTION


295 
m_µcQTTempTUA¾CÛff
[
ch
] = 
Ãw
 
TCÛff
[
MAX_CU_SIZE
*MAX_CU_SIZE];

297 
m_puhQTTempT¿nsfÜmSkFÏg
[
ch
] = 
Ãw
 
UCh¬
 [
uiNumP¬t™iÚs
];

299 
m_puhQTTempTrIdx
 = 
Ãw
 
UCh¬
 [
uiNumP¬t™iÚs
];

300 
m_pcQTTempTComYuv
 = 
Ãw
 
TComYuv
[
uiNumLay”sToAÎoÿ‹
];

301  
UIÁ
 
ui
 = 0; u˜< 
uiNumLay”sToAÎoÿ‹
; ++ui )

303 
m_pcQTTempTComYuv
[
ui
].
	`ü—‹
Ð
maxCUWidth
, 
maxCUHeight
, 
pcEncCfg
->
	`g‘ChromaFÜm©Idc
() );

305 
m_pcQTTempT¿nsfÜmSkTComYuv
.
	`ü—‹
Ð
maxCUWidth
, 
maxCUHeight
, 
pcEncCfg
->
	`g‘ChromaFÜm©Idc
() );

306 
m_tmpYuvP»d
.
	`ü—‹
(
MAX_CU_SIZE
, MAX_CU_SIZE, 
pcEncCfg
->
	`g‘ChromaFÜm©Idc
());

307 
m_isIn™Ÿlized
 = 
Œue
;

308 
	}
}

311 
__šlše
 
Void
 
	gTEncS—rch
::
	$xTZS—rchH–p
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
IÁ
 
iS—rchX
, cÚ¡ IÁ 
iS—rchY
, cÚ¡ 
UCh¬
 
ucPoštNr
, cÚ¡ 
UIÁ
 
uiDi¡ªû
 )

313 
Di¡ÜtiÚ
 
uiSad
 = 0;

315 cÚ¡ 
P–
* cÚ¡ 
piRefSrch
 = 
rcSŒuù
.
piRefY
 + 
iS—rchY
 *„cSŒuù.
iYSŒide
 + 
iS—rchX
;

318 
m_pcRdCo¡
->
	`£tDi¡P¬am
Ð
pcP©‹ºKey
, 
piRefSrch
, 
rcSŒuù
.
iYSŒide
, 
m_cDi¡P¬am
 );

320 
	`£tDi¡P¬amComp
(
COMPONENT_Y
);

323 
m_cDi¡P¬am
.
b™D•th
 = 
pcP©‹ºKey
->
	`g‘B™D•thY
();

324 
m_cDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
rcSŒuù
.
uiBe¡Sad
;

326 if((
m_pcEncCfg
->
	`g‘Re¡riùMESam¶šg
(è=ð
çl£
è&& m_pcEncCfg->
	`g‘MÙiÚE¡im©iÚS—rchM‘hod
(è=ð
MESEARCH_SELECTIVE
)

328 
IÁ
 
isubShiá
 = 0;

330 
Di¡ÜtiÚ
 
uiB™Co¡
 = 
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
Ð
iS—rchX
, 
iS—rchY
 );

333 ià(
uiB™Co¡
 < 
rcSŒuù
.
uiBe¡Sad
)

335 iàÐ
m_cDi¡P¬am
.
iRows
 > 32 )

337 
m_cDi¡P¬am
.
iSubShiá
 = 4;

339 iàÐ
m_cDi¡P¬am
.
iRows
 > 16 )

341 
m_cDi¡P¬am
.
iSubShiá
 = 3;

343 iàÐ
m_cDi¡P¬am
.
iRows
 > 8 )

345 
m_cDi¡P¬am
.
iSubShiá
 = 2;

349 
m_cDi¡P¬am
.
iSubShiá
 = 1;

352 
Di¡ÜtiÚ
 
uiTempSad
 = 
m_cDi¡P¬am
.
	`Di¡Func
( &m_cDistParam );

353 if((
uiTempSad
 + 
uiB™Co¡
è< 
rcSŒuù
.
uiBe¡Sad
)

355 
uiSad
 +ð
uiTempSad
 >> 
m_cDi¡P¬am
.
iSubShiá
;

356 
m_cDi¡P¬am
.
iSubShiá
 > 0)

358 
isubShiá
 = 
m_cDi¡P¬am
.
iSubShiá
 -1;

359 
m_cDi¡P¬am
.
pOrg
 = 
pcP©‹ºKey
->
	`g‘ROIY
(è+ (pcP©‹ºKey->
	`g‘P©‹ºLSŒide
(è<< 
isubShiá
);

360 
m_cDi¡P¬am
.
pCur
 = 
piRefSrch
 + (
rcSŒuù
.
iYSŒide
 << 
isubShiá
);

361 
uiTempSad
 = 
m_cDi¡P¬am
.
	`Di¡Func
( &m_cDistParam );

362 
uiSad
 +ð
uiTempSad
 >> 
m_cDi¡P¬am
.
iSubShiá
;

363 if(((
uiSad
 << 
isubShiá
è+ 
uiB™Co¡
è> 
rcSŒuù
.
uiBe¡Sad
)

368 
m_cDi¡P¬am
.
iSubShiá
--;

371 if(
m_cDi¡P¬am
.
iSubShiá
 == 0)

373 
uiSad
 +ð
uiB™Co¡
;

374 ifÐ
uiSad
 < 
rcSŒuù
.
uiBe¡Sad
 )

376 
rcSŒuù
.
uiBe¡Sad
 = 
uiSad
;

377 
rcSŒuù
.
iBe¡X
 = 
iS—rchX
;

378 
rcSŒuù
.
iBe¡Y
 = 
iS—rchY
;

379 
rcSŒuù
.
uiBe¡Di¡ªû
 = 
uiDi¡ªû
;

380 
rcSŒuù
.
uiBe¡Round
 = 0;

381 
rcSŒuù
.
ucPoštNr
 = ucPointNr;

382 
m_cDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
uiSad
;

391 iàÐ
m_pcEncCfg
->
	`g‘Fa¡IÁ”S—rchMode
()==
FASTINTERSEARCH_MODE1
 || m_pcEncCfg->g‘Fa¡IÁ”S—rchMode()==
FASTINTERSEARCH_MODE3
 )

393 iàÐ
m_cDi¡P¬am
.
iRows
 > 8 )

395 
m_cDi¡P¬am
.
iSubShiá
 = 1;

399 
uiSad
 = 
m_cDi¡P¬am
.
	`Di¡Func
( &m_cDistParam );

403 ifÐ
uiSad
 < 
rcSŒuù
.
uiBe¡Sad
 )

406 
uiSad
 +ð
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
Ð
iS—rchX
, 
iS—rchY
 );

408 ifÐ
uiSad
 < 
rcSŒuù
.
uiBe¡Sad
 )

410 
rcSŒuù
.
uiBe¡Sad
 = 
uiSad
;

411 
rcSŒuù
.
iBe¡X
 = 
iS—rchX
;

412 
rcSŒuù
.
iBe¡Y
 = 
iS—rchY
;

413 
rcSŒuù
.
uiBe¡Di¡ªû
 = 
uiDi¡ªû
;

414 
rcSŒuù
.
uiBe¡Round
 = 0;

415 
rcSŒuù
.
ucPoštNr
 = ucPointNr;

416 
m_cDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
uiSad
;

420 
	}
}

422 
__šlše
 
Void
 
	gTEncS—rch
::
	$xTZ2PoštS—rch
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
, cÚ¡ TComMv* cÚ¡ 
pcMvSrchRngRB
 )

424 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

425 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

426 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

427 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

432 
IÁ
 
iS¹X
 = 
rcSŒuù
.
iBe¡X
;

433 
IÁ
 
iS¹Y
 = 
rcSŒuù
.
iBe¡Y
;

434  
rcSŒuù
.
ucPoštNr
 )

438 iàÐ(
iS¹X
 - 1è>ð
iSrchRngHÜLeá
 )

440 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
, 0, 2 );

442 iàÐ(
iS¹Y
 - 1è>ð
iSrchRngV”TÝ
 )

444 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iS¹Y
 - 1, 0, 2 );

450 iàÐ(
iS¹Y
 - 1è>ð
iSrchRngV”TÝ
 )

452 iàÐ(
iS¹X
 - 1è>ð
iSrchRngHÜLeá
 )

454 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
 - 1, 0, 2 );

456 iàÐ(
iS¹X
 + 1è<ð
iSrchRngHÜRight
 )

458 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
 - 1, 0, 2 );

465 iàÐ(
iS¹Y
 - 1è>ð
iSrchRngV”TÝ
 )

467 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iS¹Y
 - 1, 0, 2 );

469 iàÐ(
iS¹X
 + 1è<ð
iSrchRngHÜRight
 )

471 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
, 0, 2 );

477 iàÐ(
iS¹X
 - 1è>ð
iSrchRngHÜLeá
 )

479 iàÐ(
iS¹Y
 + 1è<ð
iSrchRngV”BÙtom
 )

481 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
 + 1, 0, 2 );

483 iàÐ(
iS¹Y
 - 1è>ð
iSrchRngV”TÝ
 )

485 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
 - 1, 0, 2 );

492 iàÐ(
iS¹X
 + 1è<ð
iSrchRngHÜRight
 )

494 iàÐ(
iS¹Y
 - 1è>ð
iSrchRngV”TÝ
 )

496 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
 - 1, 0, 2 );

498 iàÐ(
iS¹Y
 + 1è<ð
iSrchRngV”BÙtom
 )

500 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
 + 1, 0, 2 );

507 iàÐ(
iS¹X
 - 1è>ð
iSrchRngHÜLeá
 )

509 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
 , 0, 2 );

511 iàÐ(
iS¹Y
 + 1è<ð
iSrchRngV”BÙtom
 )

513 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iS¹Y
 + 1, 0, 2 );

519 iàÐ(
iS¹Y
 + 1è<ð
iSrchRngV”BÙtom
 )

521 iàÐ(
iS¹X
 - 1è>ð
iSrchRngHÜLeá
 )

523 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 - 1, 
iS¹Y
 + 1, 0, 2 );

525 iàÐ(
iS¹X
 + 1è<ð
iSrchRngHÜRight
 )

527 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
 + 1, 0, 2 );

534 iàÐ(
iS¹X
 + 1è<ð
iSrchRngHÜRight
 )

536 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
 + 1, 
iS¹Y
, 0, 2 );

538 iàÐ(
iS¹Y
 + 1è<ð
iSrchRngV”BÙtom
 )

540 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iS¹Y
 + 1, 0, 2 );

546 
	`as£¹
Ð
çl£
 );

550 
	}
}

555 
__šlše
 
Void
 
	gTEncS—rch
::
	$xTZ8PoštSqu¬eS—rch
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
, cÚ¡ TComMv* cÚ¡ 
pcMvSrchRngRB
, cÚ¡ 
IÁ
 
iS¹X
, cÚ¡ IÁ 
iS¹Y
, cÚ¡ IÁ 
iDi¡
 )

557 cÚ¡ 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

558 cÚ¡ 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

559 cÚ¡ 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

560 cÚ¡ 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

565 
	`as£¹
Ð
iDi¡
 != 0 );

566 cÚ¡ 
IÁ
 
iTÝ
 = 
iS¹Y
 - 
iDi¡
;

567 cÚ¡ 
IÁ
 
iBÙtom
 = 
iS¹Y
 + 
iDi¡
;

568 cÚ¡ 
IÁ
 
iLeá
 = 
iS¹X
 - 
iDi¡
;

569 cÚ¡ 
IÁ
 
iRight
 = 
iS¹X
 + 
iDi¡
;

570 
rcSŒuù
.
uiBe¡Round
 += 1;

572 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 )

574 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

576 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iTÝ
, 1, 
iDi¡
 );

579 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 2, 
iDi¡
 );

581 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

583 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iTÝ
, 3, 
iDi¡
 );

586 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

588 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 4, 
iDi¡
 );

590 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

592 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 5, 
iDi¡
 );

594 iàÐ
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

596 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

598 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iBÙtom
, 6, 
iDi¡
 );

601 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 7, 
iDi¡
 );

603 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

605 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iBÙtom
, 8, 
iDi¡
 );

608 
	}
}

613 
__šlše
 
Void
 
	gTEncS—rch
::
	$xTZ8PoštDŸmÚdS—rch
ÐcÚ¡ 
TComP©‹º
*cÚ¡ 
pcP©‹ºKey
,

614 
IÁTZS—rchSŒuù
& 
rcSŒuù
,

615 cÚ¡ 
TComMv
*cÚ¡ 
pcMvSrchRngLT
,

616 cÚ¡ 
TComMv
*cÚ¡ 
pcMvSrchRngRB
,

617 cÚ¡ 
IÁ
 
iS¹X
,

618 cÚ¡ 
IÁ
 
iS¹Y
,

619 cÚ¡ 
IÁ
 
iDi¡
,

620 cÚ¡ 
BoÞ
 
bCheckCÜÃrsAtDi¡1
 )

622 cÚ¡ 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

623 cÚ¡ 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

624 cÚ¡ 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

625 cÚ¡ 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

630 
	`as£¹
 ( 
iDi¡
 != 0 );

631 cÚ¡ 
IÁ
 
iTÝ
 = 
iS¹Y
 - 
iDi¡
;

632 cÚ¡ 
IÁ
 
iBÙtom
 = 
iS¹Y
 + 
iDi¡
;

633 cÚ¡ 
IÁ
 
iLeá
 = 
iS¹X
 - 
iDi¡
;

634 cÚ¡ 
IÁ
 
iRight
 = 
iS¹X
 + 
iDi¡
;

635 
rcSŒuù
.
uiBe¡Round
 += 1;

637 iàÐ
iDi¡
 == 1 )

639 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 )

641 ià(
bCheckCÜÃrsAtDi¡1
)

643 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
)

645 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iTÝ
, 1, 
iDi¡
 );

647 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 2, 
iDi¡
 );

648 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

650 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iTÝ
, 3, 
iDi¡
 );

655 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 2, 
iDi¡
 );

658 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

660 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 4, 
iDi¡
 );

662 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

664 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 5, 
iDi¡
 );

666 iàÐ
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

668 ià(
bCheckCÜÃrsAtDi¡1
)

670 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
)

672 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iBÙtom
, 6, 
iDi¡
 );

674 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 7, 
iDi¡
 );

675 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

677 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iBÙtom
, 8, 
iDi¡
 );

682 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 7, 
iDi¡
 );

688 iàÐ
iDi¡
 <= 8 )

690 cÚ¡ 
IÁ
 
iTÝ_2
 = 
iS¹Y
 - (
iDi¡
>>1);

691 cÚ¡ 
IÁ
 
iBÙtom_2
 = 
iS¹Y
 + (
iDi¡
>>1);

692 cÚ¡ 
IÁ
 
iLeá_2
 = 
iS¹X
 - (
iDi¡
>>1);

693 cÚ¡ 
IÁ
 
iRight_2
 = 
iS¹X
 + (
iDi¡
>>1);

695 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 && 
iLeá
 >ð
iSrchRngHÜLeá
 &&

696 
iRight
 <ð
iSrchRngHÜRight
 && 
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

698 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 2, 
iDi¡
 );

699 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá_2
, 
iTÝ_2
, 1, 
iDi¡
>>1 );

700 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight_2
, 
iTÝ_2
, 3, 
iDi¡
>>1 );

701 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 4, 
iDi¡
 );

702 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 5, 
iDi¡
 );

703 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá_2
, 
iBÙtom_2
, 6, 
iDi¡
>>1 );

704 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight_2
, 
iBÙtom_2
, 8, 
iDi¡
>>1 );

705 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 7, 
iDi¡
 );

709 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 )

711 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 2, 
iDi¡
 );

713 iàÐ
iTÝ_2
 >ð
iSrchRngV”TÝ
 )

715 iàÐ
iLeá_2
 >ð
iSrchRngHÜLeá
 )

717 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá_2
, 
iTÝ_2
, 1, (
iDi¡
>>1) );

719 iàÐ
iRight_2
 <ð
iSrchRngHÜRight
 )

721 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight_2
, 
iTÝ_2
, 3, (
iDi¡
>>1) );

724 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

726 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 4, 
iDi¡
 );

728 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

730 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 5, 
iDi¡
 );

732 iàÐ
iBÙtom_2
 <ð
iSrchRngV”BÙtom
 )

734 iàÐ
iLeá_2
 >ð
iSrchRngHÜLeá
 )

736 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá_2
, 
iBÙtom_2
, 6, (
iDi¡
>>1) );

738 iàÐ
iRight_2
 <ð
iSrchRngHÜRight
 )

740 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight_2
, 
iBÙtom_2
, 8, (
iDi¡
>>1) );

743 iàÐ
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

745 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 7, 
iDi¡
 );

751 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 && 
iLeá
 >ð
iSrchRngHÜLeá
 &&

752 
iRight
 <ð
iSrchRngHÜRight
 && 
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

754 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 0, 
iDi¡
 );

755 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 0, 
iDi¡
 );

756 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 0, 
iDi¡
 );

757 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 0, 
iDi¡
 );

758  
IÁ
 
šdex
 = 1; index < 4; index++ )

760 cÚ¡ 
IÁ
 
iPosYT
 = 
iTÝ
 + ((
iDi¡
>>2è* 
šdex
);

761 cÚ¡ 
IÁ
 
iPosYB
 = 
iBÙtom
 - ((
iDi¡
>>2è* 
šdex
);

762 cÚ¡ 
IÁ
 
iPosXL
 = 
iS¹X
 - ((
iDi¡
>>2è* 
šdex
);

763 cÚ¡ 
IÁ
 
iPosXR
 = 
iS¹X
 + ((
iDi¡
>>2è* 
šdex
);

764 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXL
, 
iPosYT
, 0, 
iDi¡
 );

765 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXR
, 
iPosYT
, 0, 
iDi¡
 );

766 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXL
, 
iPosYB
, 0, 
iDi¡
 );

767 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXR
, 
iPosYB
, 0, 
iDi¡
 );

772 iàÐ
iTÝ
 >ð
iSrchRngV”TÝ
 )

774 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iTÝ
, 0, 
iDi¡
 );

776 iàÐ
iLeá
 >ð
iSrchRngHÜLeá
 )

778 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iLeá
, 
iS¹Y
, 0, 
iDi¡
 );

780 iàÐ
iRight
 <ð
iSrchRngHÜRight
 )

782 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iRight
, 
iS¹Y
, 0, 
iDi¡
 );

784 iàÐ
iBÙtom
 <ð
iSrchRngV”BÙtom
 )

786 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iS¹X
, 
iBÙtom
, 0, 
iDi¡
 );

788  
IÁ
 
šdex
 = 1; index < 4; index++ )

790 cÚ¡ 
IÁ
 
iPosYT
 = 
iTÝ
 + ((
iDi¡
>>2è* 
šdex
);

791 cÚ¡ 
IÁ
 
iPosYB
 = 
iBÙtom
 - ((
iDi¡
>>2è* 
šdex
);

792 cÚ¡ 
IÁ
 
iPosXL
 = 
iS¹X
 - ((
iDi¡
>>2è* 
šdex
);

793 cÚ¡ 
IÁ
 
iPosXR
 = 
iS¹X
 + ((
iDi¡
>>2è* 
šdex
);

795 iàÐ
iPosYT
 >ð
iSrchRngV”TÝ
 )

797 iàÐ
iPosXL
 >ð
iSrchRngHÜLeá
 )

799 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXL
, 
iPosYT
, 0, 
iDi¡
 );

801 iàÐ
iPosXR
 <ð
iSrchRngHÜRight
 )

803 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXR
, 
iPosYT
, 0, 
iDi¡
 );

806 iàÐ
iPosYB
 <ð
iSrchRngV”BÙtom
 )

808 iàÐ
iPosXL
 >ð
iSrchRngHÜLeá
 )

810 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXL
, 
iPosYB
, 0, 
iDi¡
 );

812 iàÐ
iPosXR
 <ð
iSrchRngHÜRight
 )

814 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
rcSŒuù
, 
iPosXR
, 
iPosYB
, 0, 
iDi¡
 );

821 
	}
}

823 
Di¡ÜtiÚ
 
	gTEncS—rch
::
	$xP©‹ºRefšem’t
Ð
TComP©‹º
* 
pcP©‹ºKey
,

824 
TComMv
 
ba£RefMv
,

825 
IÁ
 
iF¿c
, 
TComMv
& 
rcMvF¿c
,

826 
BoÞ
 
bAÎowU£OfHadam¬d


829 
Di¡ÜtiÚ
 
uiDi¡
;

830 
Di¡ÜtiÚ
 
uiDi¡Be¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

831 
UIÁ
 
uiDœecBe¡
 = 0;

833 
P–
* 
piRefPos
;

834 
IÁ
 
iRefSŒide
 = 
m_fž‹»dBlock
[0][0].
	`g‘SŒide
(
COMPONENT_Y
);

836 
m_pcRdCo¡
->
	`£tDi¡P¬am
Ð
pcP©‹ºKey
, 
m_fž‹»dBlock
[0][0].
	`g‘Addr
(
COMPONENT_Y
), 
iRefSŒide
, 1, 
m_cDi¡P¬am
, 
m_pcEncCfg
->
	`g‘U£HADME
(è&& 
bAÎowU£OfHadam¬d
 );

838 cÚ¡ 
TComMv
* 
pcMvRefše
 = (
iF¿c
 =ð2 ? 
s_acMvRefšeH
 : 
s_acMvRefšeQ
);

840 #ià
MCTS_ENC_CHECK


841 
UIÁ
 
maxRefšem’ts
 = 9;

842 
IÁ
 
mvShiá
 = 2;

845 cÚ¡ 
UIÁ
 
LumaLTSam¶eOff£t
 = 3;

846 cÚ¡ 
UIÁ
 
LumaRBSam¶eOff£t
 = 4;

848 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
())

851 iàÐ
pcP©‹ºKey
->
	`g‘ROIYPosX
(è+ (
ba£RefMv
.
	`g‘HÜ
(è>> 
mvShiá
 ) <…cP©‹ºKey->
	`g‘TžeLeáTÝP–PosX
(è+ 
LumaLTSam¶eOff£t
 ||

852 
pcP©‹ºKey
->
	`g‘ROIYPosY
(è+ (
ba£RefMv
.
	`g‘V”
(è>> 
mvShiá
 ) <…cP©‹ºKey->
	`g‘TžeLeáTÝP–PosY
(è+ 
LumaLTSam¶eOff£t
 ||

853 
pcP©‹ºKey
->
	`g‘ROIYPosX
(è+ (
ba£RefMv
.
	`g‘HÜ
(è>> 
mvShiá
è>…cP©‹ºKey->
	`g‘TžeRightBÙtomP–PosX
(è-…cP©‹ºKey->
	`g‘ROIYWidth
(è- 
LumaRBSam¶eOff£t
 ||

854 
pcP©‹ºKey
->
	`g‘ROIYPosY
(è+ (
ba£RefMv
.
	`g‘V”
(è>> 
mvShiá
è>…cP©‹ºKey->
	`g‘TžeRightBÙtomP–PosY
(è-…cP©‹ºKey->
	`g‘ROIYHeight
(è- 
LumaRBSam¶eOff£t


858 
maxRefšem’ts
 = 1;

862 
UIÁ
 
i
 = 0; i < 
maxRefšem’ts
; i++)

864 
UIÁ
 
i
 = 0; i < 9; i++)

867 
TComMv
 
cMvTe¡
 = 
pcMvRefše
[
i
];

868 
cMvTe¡
 +ð
ba£RefMv
;

870 
IÁ
 
hÜV®
 = 
cMvTe¡
.
	`g‘HÜ
(è* 
iF¿c
;

871 
IÁ
 
v”V®
 = 
cMvTe¡
.
	`g‘V”
(è* 
iF¿c
;

872 
piRefPos
 = 
m_fž‹»dBlock
[ 
v”V®
 & 3 ][ 
hÜV®
 & 3 ].
	`g‘Addr
(
COMPONENT_Y
);

873 iàÐ
hÜV®
 =ð2 && ( 
v”V®
 & 1 ) == 0 )

875 
piRefPos
 += 1;

877 iàÐÐ
hÜV®
 & 1 ) =ð0 && 
v”V®
 == 2 )

879 
piRefPos
 +ð
iRefSŒide
;

881 
cMvTe¡
 = 
pcMvRefše
[
i
];

882 
cMvTe¡
 +ð
rcMvF¿c
;

884 
	`£tDi¡P¬amComp
(
COMPONENT_Y
);

886 
m_cDi¡P¬am
.
pCur
 = 
piRefPos
;

887 
m_cDi¡P¬am
.
b™D•th
 = 
pcP©‹ºKey
->
	`g‘B™D•thY
();

888 
uiDi¡
 = 
m_cDi¡P¬am
.
	`Di¡Func
( &m_cDistParam );

889 
uiDi¡
 +ð
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
Ð
cMvTe¡
.
	`g‘HÜ
(), cMvTe¡.
	`g‘V”
() );

891 iàÐ
uiDi¡
 < 
uiDi¡Be¡
 )

893 
uiDi¡Be¡
 = 
uiDi¡
;

894 
uiDœecBe¡
 = 
i
;

895 
m_cDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
uiDi¡
;

899 
rcMvF¿c
 = 
pcMvRefše
[
uiDœecBe¡
];

901  
uiDi¡Be¡
;

902 
	}
}

906 
Void


907 
	gTEncS—rch
::
	$xEncSubdivCbfQT
(
TComTU
 &
rTu
,

908 
BoÞ
 
bLuma
,

909 
BoÞ
 
bChroma
 )

911 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

912 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

913 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

914 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

915 cÚ¡ 
UIÁ
 
uiSubdiv
 = ( 
uiTrMode
 > 
uiTrD•th
 ? 1 : 0 );

916 cÚ¡ 
UIÁ
 
uiLog2LumaT¿foSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

918 ifÐ
pcCU
->
	`isIÁ¿
(0è&&…cCU->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_NxN
 && 
uiTrD•th
 == 0 )

920 
	`as£¹
Ð
uiSubdiv
 );

922 ifÐ
uiLog2LumaT¿foSize
 > 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
() )

924 
	`as£¹
Ð
uiSubdiv
 );

926 ifÐ
uiLog2LumaT¿foSize
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MšSize
() )

928 
	`as£¹
Ð!
uiSubdiv
 );

930 ifÐ
uiLog2LumaT¿foSize
 =ð
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) )

932 
	`as£¹
Ð!
uiSubdiv
 );

936 
	`as£¹
Ð
uiLog2LumaT¿foSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) );

937 ifÐ
bLuma
 )

939 
m_pcEÁrÝyCod”
->
	`’codeT¿nsfÜmSubdivFÏg
Ð
uiSubdiv
, 5 - 
uiLog2LumaT¿foSize
 );

943 iàÐ
bChroma
 )

945 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
rTu
.
	`G‘ChromaFÜm©
());

946 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

948 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

949 ifÐ
rTu
.
	`ProûssšgAÎQuad¿Ás
(
compID
è&& (
uiTrD•th
==0 || 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, compID, uiTrDepth-1 ) ))

951 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
(
rTu
, 
compID
, (
uiSubdiv
 == 0));

956 ifÐ
uiSubdiv
 )

958 
TComTURecur£
 
	`tuRecur£
(
rTu
, 
çl£
);

961 
	`xEncSubdivCbfQT
Ð
tuRecur£
, 
bLuma
, 
bChroma
 );

962 } 
tuRecur£
.
	`ÃxtSeùiÚ
(
rTu
));

967 ifÐ
bLuma
 )

969 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
Ð
rTu
, 
COMPONENT_Y
, 
Œue
 );

972 
	}
}

977 
Void


978 
	gTEncS—rch
::
	$xEncCÛffQT
(
TComTU
 &
rTu
,

979 cÚ¡ 
CompÚ’tID
 
compÚ’t
,

980 
BoÞ
 
bR—lCÛff
 )

982 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

983 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

984 cÚ¡ 
UIÁ
 
uiTrD•th
=
rTu
.
	`G‘T¿nsfÜmD•thR–
();

986 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

987 cÚ¡ 
UIÁ
 
uiSubdiv
 = ( 
uiTrMode
 > 
uiTrD•th
 ? 1 : 0 );

989 ifÐ
uiSubdiv
 )

991 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

994 
	`xEncCÛffQT
Ð
tuRecur£Chžd
, 
compÚ’t
, 
bR—lCÛff
 );

995 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
) );

997 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compÚ’t
))

1000 cÚ¡ 
UIÁ
 
uiLog2T¿foSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

1001 
UIÁ
 
uiCÛffOff£t
 = 
rTu
.
	`g‘CÛffic›ÁOff£t
(
compÚ’t
);

1002 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2T¿foSize
;

1003 
TCÛff
* 
pcCÛff
 = 
bR—lCÛff
 ? 
pcCU
->
	`g‘CÛff
(
compÚ’t
è: 
m_µcQTTempCÛff
[compÚ’t][
uiQTLay”
];

1005 ià(
	`isChroma
(
compÚ’t
è&& (
pcCU
->
	`g‘Cbf
Ð
rTu
.
	`G‘AbsP¬tIdxTU
(), 
COMPONENT_Y
, 
uiTrMode
 ) !ð0è&&…cCU->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
() )

1007 
m_pcEÁrÝyCod”
->
	`’codeCrossCompÚ’tP»diùiÚ
Ð
rTu
, 
compÚ’t
 );

1010 
m_pcEÁrÝyCod”
->
	`’codeCÛffNxN
Ð
rTu
, 
pcCÛff
+
uiCÛffOff£t
, 
compÚ’t
 );

1012 
	}
}

1017 
Void


1018 
	gTEncS—rch
::
	$xEncIÁ¿H—d”
Ð
TComD©aCU
* 
pcCU
,

1019 
UIÁ
 
uiTrD•th
,

1020 
UIÁ
 
uiAbsP¬tIdx
,

1021 
BoÞ
 
bLuma
,

1022 
BoÞ
 
bChroma
 )

1024 ifÐ
bLuma
 )

1027 ifÐ
uiAbsP¬tIdx
 == 0 )

1029 ifÐ!
pcCU
->
	`g‘Sliû
()->
	`isIÁ¿
() )

1031 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

1033 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
Ð
pcCU
, 0, 
Œue
 );

1035 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
Ð
pcCU
, 0, 
Œue
 );

1036 
m_pcEÁrÝyCod”
->
	`’codeP»dMode
Ð
pcCU
, 0, 
Œue
 );

1038 
m_pcEÁrÝyCod”
 ->
	`’codeP¬tSize
Ð
pcCU
, 0,…cCU->
	`g‘D•th
(0), 
Œue
 );

1040 ià(
pcCU
->
	`isIÁ¿
(0è&&…cCU->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 )

1042 
m_pcEÁrÝyCod”
->
	`’codeIPCMInfo
Ð
pcCU
, 0, 
Œue
 );

1044 iàÐ
pcCU
->
	`g‘IPCMFÏg
 (0))

1051 ifÐ
pcCU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 )

1053 ià(
uiAbsP¬tIdx
==0)

1055 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeLuma
 ( 
pcCU
, 0 );

1060 
UIÁ
 
uiQNumP¬ts
 = 
pcCU
->
	`g‘TÙ®NumP¬t
() >> 2;

1061 ià(
uiTrD•th
>0 && (
uiAbsP¬tIdx
%
uiQNumP¬ts
)==0)

1063 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeLuma
 ( 
pcCU
, 
uiAbsP¬tIdx
 );

1068 ifÐ
bChroma
 )

1070 ifÐ
pcCU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 || !
	`’abË4ChromaPUsInIÁ¿NxNCU
ÕcCU->
	`g‘Pic
()->
	`g‘ChromaFÜm©
()))

1072 if(
uiAbsP¬tIdx
==0)

1074 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeChroma
 ( 
pcCU
, 
uiAbsP¬tIdx
 );

1079 
UIÁ
 
uiQNumP¬ts
 = 
pcCU
->
	`g‘TÙ®NumP¬t
() >> 2;

1080 
	`as£¹
(
uiTrD•th
>0);

1081 ià((
uiAbsP¬tIdx
%
uiQNumP¬ts
)==0)

1083 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeChroma
 ( 
pcCU
, 
uiAbsP¬tIdx
 );

1087 
	}
}

1092 
UIÁ


1093 
	gTEncS—rch
::
	$xG‘IÁ¿B™sQT
(
TComTU
 &
rTu
,

1094 
BoÞ
 
bLuma
,

1095 
BoÞ
 
bChroma
,

1096 
BoÞ
 
bR—lCÛff
 )

1098 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

1099 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1100 cÚ¡ 
UIÁ
 
uiTrD•th
=
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1101 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

1102 
	`xEncIÁ¿H—d”
 ( 
pcCU
, 
uiTrD•th
, 
uiAbsP¬tIdx
, 
bLuma
, 
bChroma
 );

1103 
	`xEncSubdivCbfQT
 ( 
rTu
, 
bLuma
, 
bChroma
 );

1105 ifÐ
bLuma
 )

1107 
	`xEncCÛffQT
 ( 
rTu
, 
COMPONENT_Y
, 
bR—lCÛff
 );

1109 ifÐ
bChroma
 )

1111 
	`xEncCÛffQT
 ( 
rTu
, 
COMPONENT_Cb
, 
bR—lCÛff
 );

1112 
	`xEncCÛffQT
 ( 
rTu
, 
COMPONENT_Cr
, 
bR—lCÛff
 );

1114 
UIÁ
 
uiB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

1116  
uiB™s
;

1117 
	}
}

1119 
UIÁ
 
	gTEncS—rch
::
	$xG‘IÁ¿B™sQTChroma
(
TComTU
 &
rTu
,

1120 
CompÚ’tID
 
compID
,

1121 
BoÞ
 
bR—lCÛff
 )

1123 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

1124 
	`xEncCÛffQT
 ( 
rTu
, 
compID
, 
bR—lCÛff
 );

1125 
UIÁ
 
uiB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

1126  
uiB™s
;

1127 
	}
}

1129 
Void
 
	gTEncS—rch
::
xIÁ¿CodšgTUBlock
Ð
TComYuv
* 
pcOrgYuv
,

1130 
TComYuv
* 
pcP»dYuv
,

1131 
TComYuv
* 
pcResiYuv
,

1132 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

1133 cÚ¡ 
BoÞ
 
checkCrossCP»diùiÚ
,

1134 
Di¡ÜtiÚ
& 
ruiDi¡
,

1135 cÚ¡ 
CompÚ’tID
 
compID
,

1136 
TComTU
& 
rTu


1137 
DEBUG_STRING_FN_DECLARE
(
sDebug
)

1138 ,
IÁ
 
deçuÉ0Save1Lßd2


1141 ià(!
	grTu
.
ProûssCompÚ’tSeùiÚ
(
compID
))

1145 cÚ¡ 
BoÞ
 
	gbIsLuma
 = 
isLuma
(
compID
);

1146 cÚ¡ 
	gTComReùªgË
 &
	g»ù
 = 
rTu
.
g‘Reù
(
compID
);

1147 
TComD©aCU
 *
	gpcCU
 = 
rTu
.
g‘CU
();

1148 cÚ¡ 
UIÁ
 
	guiAbsP¬tIdx
 = 
rTu
.
G‘AbsP¬tIdxTU
();

1149 cÚ¡ 
	gTComSPS
 &
	g¥s
 = *(
pcCU
->
g‘Sliû
()->
g‘SPS
());

1151 cÚ¡ 
UIÁ
 
	guiTrD•th
 = 
rTu
.
G‘T¿nsfÜmD•thR–Adj
(
compID
);

1152 cÚ¡ 
UIÁ
 
	guiFuÎD•th
 = 
rTu
.
G‘T¿nsfÜmD•thTÙ®
();

1153 cÚ¡ 
UIÁ
 
	guiLog2TrSize
 = 
rTu
.
G‘Log2LumaTrSize
();

1154 cÚ¡ 
ChromaFÜm©
 
	gchFmt
 = 
pcOrgYuv
->
g‘ChromaFÜm©
();

1155 cÚ¡ 
ChªÃlTy³
 
	gchTy³
 = 
toChªÃlTy³
(
compID
);

1156 cÚ¡ 
IÁ
 
	gb™D•th
 = 
¥s
.
g‘B™D•th
(
chTy³
);

1158 cÚ¡ 
UIÁ
 
	guiWidth
 = 
»ù
.
width
;

1159 cÚ¡ 
UIÁ
 
	guiHeight
 = 
»ù
.
height
;

1160 cÚ¡ 
UIÁ
 
	guiSŒide
 = 
pcOrgYuv
 ->
g‘SŒide
 (
compID
);

1161 
P–
 *
	gpiOrg
 = 
pcOrgYuv
 ->
g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1162 
P–
 *
	gpiP»d
 = 
pcP»dYuv
->
g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1163 
P–
 *
	gpiResi
 = 
pcResiYuv
->
g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1164 
P–
 *
	gpiReco
 = 
pcP»dYuv
->
g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1165 cÚ¡ 
UIÁ
 
	guiQTLay”
 = 
¥s
.
g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

1166 
P–
 *
	gpiRecQt
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1167 cÚ¡ 
UIÁ
 
	guiRecQtSŒide
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
g‘SŒide
(
compID
);

1168 cÚ¡ 
UIÁ
 
	guiZOrd”
 = 
pcCU
->
g‘ZÜd”IdxInCtu
(è+ 
uiAbsP¬tIdx
;

1169 
P–
 *
	gpiRecIP»d
 = 
pcCU
->
g‘Pic
()->
g‘PicYuvRec
()->
g‘Addr
Ð
compID
,…cCU->
g‘CtuRsAddr
(), 
uiZOrd”
 );

1170 
UIÁ
 
	guiRecIP»dSŒide
 = 
pcCU
->
g‘Pic
()->
g‘PicYuvRec
()->
g‘SŒide
 ( 
compID
 );

1171 
TCÛff
 *
	gpcCÛff
 = 
m_µcQTTempCÛff
[
compID
][
uiQTLay”
] + 
rTu
.
g‘CÛffic›ÁOff£t
(compID);

1172 
BoÞ
 
	gu£T¿nsfÜmSk
 = 
pcCU
->
g‘T¿nsfÜmSk
(
uiAbsP¬tIdx
, 
compID
);

1174 #ià
ADAPTIVE_QP_SELECTION


1175 
TCÛff
 *
	gpcA¾CÛff
 = 
m_µcQTTempA¾CÛff
[
compID
][ 
uiQTLay”
 ] + 
rTu
.
g‘CÛffic›ÁOff£t
(compID);

1178 cÚ¡ 
UIÁ
 
	guiChP»dMode
 = 
pcCU
->
g‘IÁ¿Dœ
Ð
chTy³
, 
uiAbsP¬tIdx
 );

1179 cÚ¡ 
UIÁ
 
	g·¹sP”MšCU
 = 1<<(2*(
¥s
.
g‘MaxTÙ®CUD•th
(è- sps.
g‘Log2DiffMaxMšCodšgBlockSize
()));

1180 cÚ¡ 
UIÁ
 
	guiChCodedMode
 = (
uiChP»dMode
==
DM_CHROMA_IDX
 && !
bIsLuma
è? 
pcCU
->
g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
g‘ChromasCÜ»¥ÚdšgPULumaIdx
(
uiAbsP¬tIdx
, 
chFmt
, 
·¹sP”MšCU
)) : uiChPredMode;

1181 cÚ¡ 
UIÁ
 
	guiChFš®Mode
 = ((
chFmt
 =ð
CHROMA_422
è&& !
bIsLuma
è? 
g_chroma422IÁ¿AngËM­pšgTabË
[
uiChCodedMode
] : uiChCodedMode;

1183 cÚ¡ 
IÁ
 
	gblkX
 = 
g_auiRa¡”ToP–X
[ 
g_auiZsÿnToRa¡”
[ 
uiAbsP¬tIdx
 ] ];

1184 cÚ¡ 
IÁ
 
	gblkY
 = 
g_auiRa¡”ToP–Y
[ 
g_auiZsÿnToRa¡”
[ 
uiAbsP¬tIdx
 ] ];

1185 cÚ¡ 
IÁ
 
	gbufãrOff£t
 = 
blkX
 + (
blkY
 * 
MAX_CU_SIZE
);

1186 
P–
 *cÚ¡ 
	g’cod”LumaResidu®
 = 
»siLuma
[
RESIDUAL_ENCODER_SIDE
 ] + 
bufãrOff£t
;

1187 
P–
 *cÚ¡ 
	g»cÚ¡ruùedLumaResidu®
 = 
»siLuma
[
RESIDUAL_RECONSTRUCTED
] + 
bufãrOff£t
;

1188 cÚ¡ 
BoÞ
 
	gbU£CrossCP»diùiÚ
 = 
isChroma
(
compID
è&& (
uiChP»dMode
 =ð
DM_CHROMA_IDX
è&& 
checkCrossCP»diùiÚ
;

1189 cÚ¡ 
BoÞ
 
	gbU£RecÚ¡ruùedResidu®FÜE¡im©e
 = 
m_pcEncCfg
->
g‘U£RecÚBa£dCrossCP»diùiÚE¡im©e
();

1190 
P–
 *cÚ¡ 
	glumaResidu®FÜE¡im©e
 = 
bU£RecÚ¡ruùedResidu®FÜE¡im©e
 ? 
»cÚ¡ruùedLumaResidu®
 : 
’cod”LumaResidu®
;

1192 #ià
DEBUG_STRING


1193 cÚ¡ 
IÁ
 
	gdebugP»dModeMask
=
DebugSŒšgG‘P»dModeMask
(
MODE_INTRA
);

1197 
DEBUG_STRING_NEW
(
sTemp
)

1199 #ià!
DEBUG_STRING


1200 ifÐ
	gdeçuÉ0Save1Lßd2
 != 2 )

1203 cÚ¡ 
BoÞ
 
bU£Fž‹»dP»diùiÚs
=
TComP»diùiÚ
::
fž‹ršgIÁ¿Reã»nûSam¶es
(
compID
, 
uiChFš®Mode
, 
uiWidth
, 
uiHeight
, 
chFmt
, 
¥s
.
g‘SpsRªgeEx‹nsiÚ
().
g‘IÁ¿SmoÙhšgDi§bËdFÏg
());

1205 
š™IÁ¿P©‹ºChTy³
Ð
rTu
, 
compID
, 
bU£Fž‹»dP»diùiÚs
 
DEBUG_STRING_PASS_INTO
(
sDebug
) );

1208 
´edIÁ¿Ang
Ð
compID
, 
uiChFš®Mode
, 
piOrg
, 
uiSŒide
, 
piP»d
, uiSŒide, 
rTu
, 
bU£Fž‹»dP»diùiÚs
 );

1211 ifÐ
	gdeçuÉ0Save1Lßd2
 == 1 )

1213 
P–
* 
pP»d
 = 
piP»d
;

1214 
P–
* 
	gpP»dBuf
 = 
m_pSh¬edP»dT¿nsfÜmSk
[
compID
];

1215 
IÁ
 
	gk
 = 0;

1216  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1218  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1220 
	gpP»dBuf
[ 
k
 ++ ] = 
pP»d
[ 
uiX
 ];

1222 
	gpP»d
 +ð
uiSŒide
;

1226 #ià!
DEBUG_STRING


1230 
P–
* 
	gpP»d
 = 
piP»d
;

1231 
P–
* 
	gpP»dBuf
 = 
m_pSh¬edP»dT¿nsfÜmSk
[
compID
];

1232 
IÁ
 
	gk
 = 0;

1233  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1235  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1237 
	gpP»d
[ 
uiX
 ] = 
pP»dBuf
[ 
k
 ++ ];

1239 
	gpP»d
 +ð
uiSŒide
;

1247 
P–
* 
	gpOrg
 = 
piOrg
;

1248 
P–
* 
	gpP»d
 = 
piP»d
;

1249 
P–
* 
	gpResi
 = 
piResi
;

1251  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1253  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1255 
	gpResi
[ 
uiX
 ] = 
pOrg
[ uiX ] - 
pP»d
[ uiX ];

1258 
	gpOrg
 +ð
uiSŒide
;

1259 
	gpResi
 +ð
uiSŒide
;

1260 
	gpP»d
 +ð
uiSŒide
;

1264 ià(
	gpcCU
->
g‘Sliû
()->
g‘PPS
()->
g‘PpsRªgeEx‹nsiÚ
().
g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

1266 ià(
	gbU£CrossCP»diùiÚ
)

1268 ià(
xC®cCrossCompÚ’tP»diùiÚAÍha
Ð
rTu
, 
compID
, 
lumaResidu®FÜE¡im©e
, 
piResi
, 
uiWidth
, 
uiHeight
, 
MAX_CU_SIZE
, 
uiSŒide
 ) == 0)

1272 
	gTComTrQuªt
::
üossCompÚ’tP»diùiÚ
 ( 
rTu
, 
compID
, 
»cÚ¡ruùedLumaResidu®
, 
piResi
,…iResi, 
uiWidth
, 
uiHeight
, 
MAX_CU_SIZE
, 
uiSŒide
, uiSŒide, 
çl£
 );

1274 ià(
isLuma
(
compID
è&& !
	gbU£RecÚ¡ruùedResidu®FÜE¡im©e
)

1276 
xStÜeCrossCompÚ’tP»diùiÚResuÉ
Ð
’cod”LumaResidu®
, 
piResi
, 
rTu
, 0, 0, 
MAX_CU_SIZE
, 
uiSŒide
 );

1282 ifÐ
	gu£T¿nsfÜmSk
 ? 
	gm_pcEncCfg
->
g‘U£RDOQTS
(è: 
m_pcEncCfg
->
g‘U£RDOQ
() )

1284 
COEFF_SCAN_TYPE
 
sÿnTy³
 = COEFF_SCAN_TYPE(
pcCU
->
g‘CÛfSÿnIdx
(
uiAbsP¬tIdx
, 
uiWidth
, 
uiHeight
, 
compID
));

1285 
	gm_pcEÁrÝyCod”
->
e¡im©eB™
Ð
m_pcTrQuªt
->
m_pcE¡B™sSbac
, 
uiWidth
, 
uiHeight
, 
chTy³
, 
sÿnTy³
 );

1289 
TCÛff
 
	guiAbsSum
 = 0;

1290 ià(
	gbIsLuma
)

1292 
	gpcCU
 ->
£tTrIdxSubP¬ts
 ( 
uiTrD•th
, 
uiAbsP¬tIdx
, 
uiFuÎD•th
 );

1295 cÚ¡ 
QpP¬am
 
cQP
(*
pcCU
, 
compID
);

1297 #ià
RDOQ_CHROMA_LAMBDA


1298 
	gm_pcTrQuªt
->
£ËùLambda
 (
compID
);

1301 
	gm_pcTrQuªt
->
ŒªsfÜmNxN
 ( 
rTu
, 
compID
, 
piResi
, 
uiSŒide
, 
pcCÛff
,

1302 #ià
ADAPTIVE_QP_SELECTION


1303 
pcA¾CÛff
,

1305 
uiAbsSum
, 
cQP


1310 #ià
DEBUG_STRING


1311 iàÐ(
	guiAbsSum
 > 0è|| (
	gDebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
.
g‘IÁ
()&
debugP»dModeMask
) )

1313 iàÐ
uiAbsSum
 > 0 )

1316 
m_pcTrQuªt
->
švT¿nsfÜmNxN
 ( 
rTu
, 
compID
, 
piResi
, 
uiSŒide
, 
pcCÛff
, 
cQP
 
DEBUG_STRING_PASS_INTO_OPTIONAL
(&
sDebug
, (
DebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
.
g‘IÁ
()&
debugP»dModeMask
)) );

1320 
P–
* 
	gpResi
 = 
piResi
;

1321 
mem£t
Ð
pcCÛff
, 0, Ð
TCÛff
 ) * 
uiWidth
 * 
uiHeight
 );

1322  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1324 
mem£t
Ð
pResi
, 0, Ð
P–
 ) * 
uiWidth
 );

1325 
	gpResi
 +ð
uiSŒide
;

1332 
P–
* 
	gpP»d
 = 
piP»d
;

1333 
P–
* 
	gpResi
 = 
piResi
;

1334 
P–
* 
	gpReco
 = 
piReco
;

1335 
P–
* 
	gpRecQt
 = 
piRecQt
;

1336 
P–
* 
	gpRecIP»d
 = 
piRecIP»d
;

1338 ià(
	gpcCU
->
g‘Sliû
()->
g‘PPS
()->
g‘PpsRªgeEx‹nsiÚ
().
g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

1340 ià(
	gbU£CrossCP»diùiÚ
)

1342 
	gTComTrQuªt
::
üossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
, 
»cÚ¡ruùedLumaResidu®
, 
piResi
,…iResi, 
uiWidth
, 
uiHeight
, 
MAX_CU_SIZE
, 
uiSŒide
, uiSŒide, 
Œue
 );

1344 ià(
isLuma
(
compID
))

1346 
xStÜeCrossCompÚ’tP»diùiÚResuÉ
Ð
»cÚ¡ruùedLumaResidu®
, 
piResi
, 
rTu
, 0, 0, 
MAX_CU_SIZE
, 
uiSŒide
 );

1350 #ià
DEBUG_STRING


1351 
	g¡d
::
¡ršg¡»am
 
ss
(¡ršg¡»am::
out
);

1352 cÚ¡ 
BoÞ
 
	gbDebugP»d
=((
DebugO±iÚLi¡
::
DebugSŒšg_P»d
.
g‘IÁ
()&
debugP»dModeMask
è&& 
DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

1353 cÚ¡ 
BoÞ
 
	gbDebugResi
=((
DebugO±iÚLi¡
::
DebugSŒšg_Resi
.
g‘IÁ
()&
debugP»dModeMask
è&& 
DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

1354 cÚ¡ 
BoÞ
 
	gbDebugReco
=((
DebugO±iÚLi¡
::
DebugSŒšg_Reco
.
g‘IÁ
()&
debugP»dModeMask
è&& 
DEBUG_STRING_CHANNEL_CONDITION
(
compID
));

1356 ià(
	gbDebugP»d
 || 
	gbDebugResi
 || 
	gbDebugReco
)

1358 
	gss
 << "###: " << "CompID: " << 
	gcompID
 << "…»d mod(ch/fš): " << 
	guiChP»dMode
 << "/" << 
	guiChFš®Mode
 << "‡bsP¬tIdx: " << 
	grTu
.
G‘AbsP¬tIdxTU
() << "\n";

1359  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1361 
	gss
 << "###: ";

1362 ià(
	gbDebugP»d
)

1364 
	gss
 << " -…red: ";

1365  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1367 
	gss
 << 
	gpP»d
[ 
uiX
 ] << ", ";

1370 ià(
	gbDebugResi
)

1372 
	gss
 << " -„esi: ";

1374  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1376 ià(
	gbDebugResi
)

1378 
	gss
 << 
	gpResi
[ 
uiX
 ] << ", ";

1380 
	gpReco
 [ 
uiX
 ] = 
P–
(
ClBD
<
IÁ
>ÐIÁ(
pP»d
[uiX]è+ IÁ(
pResi
[uiX]), 
b™D•th
 ));

1381 
	gpRecQt
 [ 
uiX
 ] = 
pReco
[ uiX ];

1382 
	gpRecIP»d
[ 
uiX
 ] = 
pReco
[ uiX ];

1384 ià(
	gbDebugReco
)

1386 
	gss
 << " -„eco: ";

1387  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1389 
	gss
 << 
	gpReco
[ 
uiX
 ] << ", ";

1392 
	gpP»d
 +ð
uiSŒide
;

1393 
	gpResi
 +ð
uiSŒide
;

1394 
	gpReco
 +ð
uiSŒide
;

1395 
	gpRecQt
 +ð
uiRecQtSŒide
;

1396 
	gpRecIP»d
 +ð
uiRecIP»dSŒide
;

1397 
	gss
 << "\n";

1399 
DEBUG_STRING_APPEND
(
sDebug
, 
ss
.
¡r
())

1405  
UIÁ
 
	guiY
 = 0; uiY < 
	guiHeight
; uiY++ )

1407  
UIÁ
 
	guiX
 = 0; uiX < 
	guiWidth
; uiX++ )

1409 
	gpReco
 [ 
uiX
 ] = 
P–
(
ClBD
<
IÁ
>ÐIÁ(
pP»d
[uiX]è+ IÁ(
pResi
[uiX]), 
b™D•th
 ));

1410 
	gpRecQt
 [ 
uiX
 ] = 
pReco
[ uiX ];

1411 
	gpRecIP»d
[ 
uiX
 ] = 
pReco
[ uiX ];

1413 
	gpP»d
 +ð
uiSŒide
;

1414 
	gpResi
 +ð
uiSŒide
;

1415 
	gpReco
 +ð
uiSŒide
;

1416 
	gpRecQt
 +ð
uiRecQtSŒide
;

1417 
	gpRecIP»d
 +ð
uiRecIP»dSŒide
;

1423 
	gruiDi¡
 +ð
m_pcRdCo¡
->
g‘Di¡P¬t
Ð
b™D•th
, 
piReco
, 
uiSŒide
, 
piOrg
, uiSŒide, 
uiWidth
, 
uiHeight
, 
compID
 );

1429 
Void


1430 
	gTEncS—rch
::
xRecurIÁ¿CodšgLumaQT
(
TComYuv
* 
pcOrgYuv
,

1431 
TComYuv
* 
pcP»dYuv
,

1432 
TComYuv
* 
pcResiYuv
,

1433 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

1434 
Di¡ÜtiÚ
& 
ruiDi¡Y
,

1435 #ià
HHI_RQT_INTRA_SPEEDUP


1436 
BoÞ
 
bCheckFœ¡
,

1438 
DoubË
& 
dRDCo¡
,

1439 
TComTU
& 
rTu


1440 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
))

1442 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

1443 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1444 cÚ¡ 
UIÁ
 
uiFuÎD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

1445 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1446 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

1447 
BoÞ
 
bCheckFuÎ
 = ( 
uiLog2TrSize
 <ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
() );

1448 
BoÞ
 
bCheckS¶™
 = ( 
uiLog2TrSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) );

1450 
P–
 
»siLumaS¶™
 [
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE];

1451 
P–
 
»siLumaSšgË
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE];

1453 
BoÞ
 
bMaššResidu®
[
NUMBER_OF_STORED_RESIDUAL_TYPES
];

1454 
UIÁ
 
»sidu®Ty³Index
 = 0;„esidu®Ty³Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
;„esidualTypeIndex++)

1456 
bMaššResidu®
[
»sidu®Ty³Index
] = 
Œue
;

1459 
bMaššResidu®
[
RESIDUAL_ENCODER_SIDE
] = !(
m_pcEncCfg
->
	`g‘U£RecÚBa£dCrossCP»diùiÚE¡im©e
());

1461 #ià
HHI_RQT_INTRA_SPEEDUP


1462 
IÁ
 
maxTuSize
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
();

1463 
IÁ
 
isIÁ¿Sliû
 = (
pcCU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
);

1465 
BoÞ
 
noS¶™IÁ¿MaxTuSize
 = 
bCheckFuÎ
;

1466 if(
m_pcEncCfg
->
	`g‘RD³ÇÉy
(è&& ! 
isIÁ¿Sliû
)

1469 
noS¶™IÁ¿MaxTuSize
 = ( 
uiLog2TrSize
 <ð
	`mš
(
maxTuSize
,4) );

1472 if(
m_pcEncCfg
->
	`g‘RD³ÇÉy
()==2)

1474 
bCheckFuÎ
 = ( 
uiLog2TrSize
 <ð
	`mš
(
maxTuSize
,4));

1477 ifÐ
bCheckFœ¡
 && 
noS¶™IÁ¿MaxTuSize
 )

1480 
bCheckS¶™
 = 
çl£
;

1483 
IÁ
 
maxTuSize
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
();

1484 
IÁ
 
isIÁ¿Sliû
 = (
pcCU
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
);

1486 if((
m_pcEncCfg
->
	`g‘RD³ÇÉy
()==2è&& !
isIÁ¿Sliû
)

1488 
bCheckFuÎ
 = ( 
uiLog2TrSize
 <ð
	`mš
(
maxTuSize
,4));

1491 
DoubË
 
dSšgËCo¡
 = 
MAX_DOUBLE
;

1492 
Di¡ÜtiÚ
 
uiSšgËDi¡Luma
 = 0;

1493 
UIÁ
 
uiSšgËCbfLuma
 = 0;

1494 
BoÞ
 
checkT¿nsfÜmSk
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
();

1495 
IÁ
 
be¡ModeId
[
MAX_NUM_COMPONENT
] = { 0, 0, 0};

1496 
checkT¿nsfÜmSk
 &ð
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
COMPONENT_Y
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
());

1497 
checkT¿nsfÜmSk
 &ð(!
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(0));

1499 
	`as£¹
 (
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
COMPONENT_Y
));

1500 cÚ¡ 
UIÁ
 
tÙ®Adju¡edD•thChª
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®Adj
(
COMPONENT_Y
);

1502 iàÐ
m_pcEncCfg
->
	`g‘U£T¿nsfÜmSkFa¡
() )

1504 
checkT¿nsfÜmSk
 &ð(
pcCU
->
	`g‘P¬t™iÚSize
(
uiAbsP¬tIdx
)==
SIZE_NxN
);

1507 ifÐ
bCheckFuÎ
 )

1509 if(
checkT¿nsfÜmSk
 =ð
Œue
)

1512 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1514 
Di¡ÜtiÚ
 
sšgËDi¡TmpLuma
 = 0;

1515 
UIÁ
 
sšgËCbfTmpLuma
 = 0;

1516 
DoubË
 
sšgËCo¡Tmp
 = 0;

1517 
IÁ
 
fœ¡CheckId
 = 0;

1519 
IÁ
 
modeId
 = 
fœ¡CheckId
; modeId < 2; modeId ++)

1521 
	`DEBUG_STRING_NEW
(
sModeSŒšg
)

1522 
IÁ
 
deçuÉ0Save1Lßd2
 = 0;

1523 
sšgËDi¡TmpLuma
=0;

1524 if(
modeId
 =ð
fœ¡CheckId
)

1526 
deçuÉ0Save1Lßd2
 = 1;

1530 
deçuÉ0Save1Lßd2
 = 2;

1534 
pcCU
->
	`£tT¿nsfÜmSkSubP¬ts
 ( 
modeId
, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
tÙ®Adju¡edD•thChª
 );

1535 
	`xIÁ¿CodšgTUBlock
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaSšgË
, 
çl£
, 
sšgËDi¡TmpLuma
, 
COMPONENT_Y
, 
rTu
 
	`DEBUG_STRING_PASS_INTO
(
sModeSŒšg
), 
deçuÉ0Save1Lßd2
 );

1537 
sšgËCbfTmpLuma
 = 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
COMPONENT_Y
, 
uiTrD•th
 );

1540 if(
modeId
 =ð1 && 
sšgËCbfTmpLuma
 == 0)

1543 
sšgËCo¡Tmp
 = 
MAX_DOUBLE
;

1547 
UIÁ
 
uiSšgËB™s
 = 
	`xG‘IÁ¿B™sQT
Ð
rTu
, 
Œue
, 
çl£
, false );

1548 
sšgËCo¡Tmp
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiSšgËB™s
, 
sšgËDi¡TmpLuma
 );

1550 if(
sšgËCo¡Tmp
 < 
dSšgËCo¡
)

1552 
	`DEBUG_STRING_SWAP
(
sDebug
, 
sModeSŒšg
)

1553 
dSšgËCo¡
 = 
sšgËCo¡Tmp
;

1554 
uiSšgËDi¡Luma
 = 
sšgËDi¡TmpLuma
;

1555 
uiSšgËCbfLuma
 = 
sšgËCbfTmpLuma
;

1557 
be¡ModeId
[
COMPONENT_Y
] = 
modeId
;

1558 if(
be¡ModeId
[
COMPONENT_Y
] =ð
fœ¡CheckId
)

1560 
	`xStÜeIÁ¿ResuÉQT
(
COMPONENT_Y
, 
rTu
 );

1561 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_TEMP_BEST
 ] );

1564 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

1566 cÚ¡ 
IÁ
 
xOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
x0
;

1567 cÚ¡ 
IÁ
 
yOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
y0
;

1568 
UIÁ
 
¡ÜedResidu®Index
 = 0; stÜedResidu®Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
; storedResidualIndex++)

1570 ià(
bMaššResidu®
[
¡ÜedResidu®Index
])

1572 
	`xStÜeCrossCompÚ’tP»diùiÚResuÉ
(
»siLuma
[
¡ÜedResidu®Index
], 
»siLumaSšgË
[¡ÜedResidu®Index], 
rTu
, 
xOff£t
, 
yOff£t
, 
MAX_CU_SIZE
, MAX_CU_SIZE);

1577 ià(
modeId
 =ð
fœ¡CheckId
)

1579 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1583 
pcCU
 ->
	`£tT¿nsfÜmSkSubP¬ts
 ( 
be¡ModeId
[
COMPONENT_Y
], COMPONENT_Y, 
uiAbsP¬tIdx
, 
tÙ®Adju¡edD•thChª
 );

1585 if(
be¡ModeId
[
COMPONENT_Y
] =ð
fœ¡CheckId
)

1587 
	`xLßdIÁ¿ResuÉQT
(
COMPONENT_Y
, 
rTu
 );

1588 
pcCU
->
	`£tCbfSubP¬ts
 ( 
uiSšgËCbfLuma
 << 
uiTrD•th
, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®Adj
(COMPONENT_Y) );

1590 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_TEMP_BEST
 ] );

1596 ifÐ
bCheckS¶™
 )

1598 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1601 
dSšgËCo¡
 = 0.0;

1603 
pcCU
 ->
	`£tT¿nsfÜmSkSubP¬ts
 ( 0, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
tÙ®Adju¡edD•thChª
 );

1604 
	`xIÁ¿CodšgTUBlock
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaSšgË
, 
çl£
, 
uiSšgËDi¡Luma
, 
COMPONENT_Y
, 
rTu
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
));

1606 ifÐ
bCheckS¶™
 )

1608 
uiSšgËCbfLuma
 = 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
COMPONENT_Y
, 
uiTrD•th
 );

1611 
UIÁ
 
uiSšgËB™s
 = 
	`xG‘IÁ¿B™sQT
Ð
rTu
, 
Œue
, 
çl£
, false );

1613 if(
m_pcEncCfg
->
	`g‘RD³ÇÉy
(è&& (
uiLog2TrSize
==5è&& !
isIÁ¿Sliû
)

1615 
uiSšgËB™s
=uiSingleBits*4;

1618 
dSšgËCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiSšgËB™s
, 
uiSšgËDi¡Luma
 );

1620 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

1622 cÚ¡ 
IÁ
 
xOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
x0
;

1623 cÚ¡ 
IÁ
 
yOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
y0
;

1624 
UIÁ
 
¡ÜedResidu®Index
 = 0; stÜedResidu®Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
; storedResidualIndex++)

1626 ià(
bMaššResidu®
[
¡ÜedResidu®Index
])

1628 
	`xStÜeCrossCompÚ’tP»diùiÚResuÉ
(
»siLuma
[
¡ÜedResidu®Index
], 
»siLumaSšgË
[¡ÜedResidu®Index], 
rTu
, 
xOff£t
, 
yOff£t
, 
MAX_CU_SIZE
, MAX_CU_SIZE);

1635 ifÐ
bCheckS¶™
 )

1638 ifÐ
bCheckFuÎ
 )

1640 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_TEST
 ] );

1641 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1645 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1648 
DoubË
 
dS¶™Co¡
 = 0.0;

1649 
Di¡ÜtiÚ
 
uiS¶™Di¡Luma
 = 0;

1650 
UIÁ
 
uiS¶™CbfLuma
 = 0;

1652 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

1653 
	`DEBUG_STRING_NEW
(
sS¶™
)

1656 
	`DEBUG_STRING_NEW
(
sChžd
)

1657 #ià
HHI_RQT_INTRA_SPEEDUP


1658 
	`xRecurIÁ¿CodšgLumaQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaS¶™
, 
uiS¶™Di¡Luma
, 
bCheckFœ¡
, 
dS¶™Co¡
, 
tuRecur£Chžd
 
	`DEBUG_STRING_PASS_INTO
(
sChžd
) );

1660 
	`xRecurIÁ¿CodšgLumaQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaS¶™
, 
uiS¶™Di¡Luma
, 
dS¶™Co¡
, 
tuRecur£Chžd
 
	`DEBUG_STRING_PASS_INTO
(
sChžd
) );

1662 
	`DEBUG_STRING_APPEND
(
sS¶™
, 
sChžd
)

1663 
uiS¶™CbfLuma
 |ð
pcCU
->
	`g‘Cbf
Ð
tuRecur£Chžd
.
	`G‘AbsP¬tIdxTU
(), 
COMPONENT_Y
,uRecur£Chžd.
	`G‘T¿nsfÜmD•thR–
() );

1664 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
) );

1666 
UIÁ
 
uiP¬tsDiv
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
();

1668 ià(
uiS¶™CbfLuma
)

1670 cÚ¡ 
UIÁ
 
æag
=1<<
uiTrD•th
;

1671 
UCh¬
 *
pBa£
=
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Y
 );

1672  
UIÁ
 
uiOffs
 = 0; uiOff < 
uiP¬tsDiv
; uiOffs++ )

1674 
pBa£
[ 
uiAbsP¬tIdx
 + 
uiOffs
 ] |ð
æag
;

1679 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

1682 
UIÁ
 
uiS¶™B™s
 = 
	`xG‘IÁ¿B™sQT
Ð
rTu
, 
Œue
, 
çl£
, false );

1683 
dS¶™Co¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiS¶™B™s
, 
uiS¶™Di¡Luma
 );

1686 ifÐ
dS¶™Co¡
 < 
dSšgËCo¡
 )

1689 
	`DEBUG_STRING_SWAP
(
sS¶™
, 
sDebug
)

1690 
ruiDi¡Y
 +ð
uiS¶™Di¡Luma
;

1691 
dRDCo¡
 +ð
dS¶™Co¡
;

1693 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

1695 cÚ¡ 
IÁ
 
xOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
x0
;

1696 cÚ¡ 
IÁ
 
yOff£t
 = 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
y0
;

1697 
UIÁ
 
¡ÜedResidu®Index
 = 0; stÜedResidu®Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
; storedResidualIndex++)

1699 ià(
bMaššResidu®
[
¡ÜedResidu®Index
])

1701 
	`xStÜeCrossCompÚ’tP»diùiÚResuÉ
(
»siLuma
[
¡ÜedResidu®Index
], 
»siLumaS¶™
[¡ÜedResidu®Index], 
rTu
, 
xOff£t
, 
yOff£t
, 
MAX_CU_SIZE
, MAX_CU_SIZE);

1710 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_TEST
 ] );

1713 
pcCU
->
	`£tTrIdxSubP¬ts
Ð
uiTrD•th
, 
uiAbsP¬tIdx
, 
uiFuÎD•th
 );

1714 cÚ¡ 
TComReùªgË
 &
tuReù
=
rTu
.
	`g‘Reù
(
COMPONENT_Y
);

1715 
pcCU
->
	`£tCbfSubP¬ts
 ( 
uiSšgËCbfLuma
 << 
uiTrD•th
, 
COMPONENT_Y
, 
uiAbsP¬tIdx
, 
tÙ®Adju¡edD•thChª
 );

1716 
pcCU
 ->
	`£tT¿nsfÜmSkSubP¬ts
 ( 
be¡ModeId
[
COMPONENT_Y
], COMPONENT_Y, 
uiAbsP¬tIdx
, 
tÙ®Adju¡edD•thChª
 );

1719 cÚ¡ 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

1720 cÚ¡ 
UIÁ
 
uiZOrd”
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
uiAbsP¬tIdx
;

1721 cÚ¡ 
UIÁ
 
uiWidth
 = 
tuReù
.
width
;

1722 cÚ¡ 
UIÁ
 
uiHeight
 = 
tuReù
.
height
;

1723 
P–
* 
piSrc
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 );

1724 
UIÁ
 
uiSrcSŒide
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`g‘SŒide
 ( 
COMPONENT_Y
 );

1725 
P–
* 
piDes
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
COMPONENT_Y
,…cCU->
	`g‘CtuRsAddr
(), 
uiZOrd”
 );

1726 
UIÁ
 
uiDesSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
 ( 
COMPONENT_Y
 );

1728  
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++, 
piSrc
 +ð
uiSrcSŒide
, 
piDes
 +ð
uiDesSŒide
 )

1730  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

1732 
piDes
[ 
uiX
 ] = 
piSrc
[ uiX ];

1736 
ruiDi¡Y
 +ð
uiSšgËDi¡Luma
;

1737 
dRDCo¡
 +ð
dSšgËCo¡
;

1738 
	}
}

1741 
Void


1742 
	gTEncS—rch
::
	$xS‘IÁ¿ResuÉLumaQT
(
TComYuv
* 
pcRecoYuv
, 
TComTU
 &
rTu
)

1744 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

1745 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1746 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1747 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

1748 ifÐ
uiTrMode
 =ð
uiTrD•th
 )

1750 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

1751 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

1755 cÚ¡ 
TComReùªgË
 &
tuReù
=
rTu
.
	`g‘Reù
(
COMPONENT_Y
);

1756 cÚ¡ 
UIÁ
 
cÛffOff£t
 = 
rTu
.
	`g‘CÛffic›ÁOff£t
(
COMPONENT_Y
);

1757 cÚ¡ 
UIÁ
 
numCÛffInBlock
 = 
tuReù
.
width
 *uReù.
height
;

1759 ià(
numCÛffInBlock
!=0)

1761 cÚ¡ 
TCÛff
* 
¤cCÛff
 = 
m_µcQTTempCÛff
[
COMPONENT_Y
][
uiQTLay”
] + 
cÛffOff£t
;

1762 
TCÛff
* 
de¡CÛff
 = 
pcCU
->
	`g‘CÛff
(
COMPONENT_Y
è+ 
cÛffOff£t
;

1763 ::
	`memýy
Ð
de¡CÛff
, 
¤cCÛff
, (
TCÛff
)*
numCÛffInBlock
 );

1764 #ià
ADAPTIVE_QP_SELECTION


1765 cÚ¡ 
TCÛff
* 
¤cA¾CÛff
 = 
m_µcQTTempA¾CÛff
[
COMPONENT_Y
][ 
uiQTLay”
 ] + 
cÛffOff£t
;

1766 
TCÛff
* 
de¡A¾CÛff
 = 
pcCU
->
	`g‘A¾CÛff
 (
COMPONENT_Y
è+ 
cÛffOff£t
;

1767 ::
	`memýy
Ð
de¡A¾CÛff
, 
¤cA¾CÛff
, Ð
TCÛff
 ) * 
numCÛffInBlock
 );

1769 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`cÝyP¬tToP¬tCompÚ’t
Ð
COMPONENT_Y
, 
pcRecoYuv
, 
uiAbsP¬tIdx
, 
tuReù
.
width
,uReù.
height
 );

1775 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

1778 
	`xS‘IÁ¿ResuÉLumaQT
Ð
pcRecoYuv
, 
tuRecur£Chžd
 );

1779 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

1781 
	}
}

1784 
Void


1785 
	gTEncS—rch
::
	$xStÜeIÁ¿ResuÉQT
(cÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
 )

1787 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

1788 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1789 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1790 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

1791 iàÐ
compID
==
COMPONENT_Y
 || 
uiTrMode
 =ð
uiTrD•th
 )

1793 
	`as£¹
(
uiTrMode
 =ð
uiTrD•th
);

1794 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

1795 cÚ¡ 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

1797 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

1799 cÚ¡ 
TComReùªgË
 &
tuReù
=
rTu
.
	`g‘Reù
(
compID
);

1802 cÚ¡ 
UIÁ
 
uiNumCÛff
 = 
tuReù
.
width
 *uReù.
height
;

1803 
TCÛff
* 
pcCÛffSrc
 = 
m_µcQTTempCÛff
[
compID
] [ 
uiQTLay”
 ] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

1804 
TCÛff
* 
pcCÛffD¡
 = 
m_pcQTTempTUCÛff
[
compID
];

1806 ::
	`memýy
Ð
pcCÛffD¡
, 
pcCÛffSrc
, Ð
TCÛff
 ) * 
uiNumCÛff
 );

1807 #ià
ADAPTIVE_QP_SELECTION


1808 
TCÛff
* 
pcA¾CÛffSrc
 = 
m_µcQTTempA¾CÛff
[
compID
] [ 
uiQTLay”
 ] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

1809 
TCÛff
* 
pcA¾CÛffD¡
 = 
m_µcQTTempTUA¾CÛff
[
compID
];

1810 ::
	`memýy
Ð
pcA¾CÛffD¡
, 
pcA¾CÛffSrc
, Ð
TCÛff
 ) * 
uiNumCÛff
 );

1813 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`cÝyP¬tToP¬tCompÚ’t
Ð
compID
, &
m_pcQTTempT¿nsfÜmSkTComYuv
, 
uiAbsP¬tIdx
, 
tuReù
.
width
,uReù.
height
 );

1816 
	}
}

1819 
Void


1820 
	gTEncS—rch
::
	$xLßdIÁ¿ResuÉQT
(cÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
)

1822 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

1823 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1824 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1825 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

1826 iàÐ
compID
==
COMPONENT_Y
 || 
uiTrMode
 =ð
uiTrD•th
 )

1828 
	`as£¹
(
uiTrMode
 =ð
uiTrD•th
);

1829 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

1830 cÚ¡ 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

1831 cÚ¡ 
UIÁ
 
uiZOrd”
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
uiAbsP¬tIdx
;

1833 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

1835 cÚ¡ 
TComReùªgË
 &
tuReù
=
rTu
.
	`g‘Reù
(
compID
);

1838 cÚ¡ 
UIÁ
 
uiNumCÛff
 = 
tuReù
.
width
 *uReù.
height
;

1839 
TCÛff
* 
pcCÛffD¡
 = 
m_µcQTTempCÛff
[
compID
] [ 
uiQTLay”
 ] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

1840 
TCÛff
* 
pcCÛffSrc
 = 
m_pcQTTempTUCÛff
[
compID
];

1842 ::
	`memýy
Ð
pcCÛffD¡
, 
pcCÛffSrc
, Ð
TCÛff
 ) * 
uiNumCÛff
 );

1843 #ià
ADAPTIVE_QP_SELECTION


1844 
TCÛff
* 
pcA¾CÛffD¡
 = 
m_µcQTTempA¾CÛff
[
compID
] [ 
uiQTLay”
 ] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

1845 
TCÛff
* 
pcA¾CÛffSrc
 = 
m_µcQTTempTUA¾CÛff
[
compID
];

1846 ::
	`memýy
Ð
pcA¾CÛffD¡
, 
pcA¾CÛffSrc
, Ð
TCÛff
 ) * 
uiNumCÛff
 );

1849 
m_pcQTTempT¿nsfÜmSkTComYuv
.
	`cÝyP¬tToP¬tCompÚ’t
Ð
compID
, &
m_pcQTTempTComYuv
[ 
uiQTLay”
 ], 
uiAbsP¬tIdx
, 
tuReù
.
width
,uReù.
height
 );

1851 
P–
* 
piRecIP»d
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
compID
,…cCU->
	`g‘CtuRsAddr
(), 
uiZOrd”
 );

1852 
UIÁ
 
uiRecIP»dSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
 (
compID
);

1853 
P–
* 
piRecQt
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`g‘Addr
Ð
compID
, 
uiAbsP¬tIdx
 );

1854 
UIÁ
 
uiRecQtSŒide
 = 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`g‘SŒide
 (
compID
);

1855 
UIÁ
 
uiWidth
 = 
tuReù
.
width
;

1856 
UIÁ
 
uiHeight
 = 
tuReù
.
height
;

1857 
P–
* 
pRecQt
 = 
piRecQt
;

1858 
P–
* 
pRecIP»d
 = 
piRecIP»d
;

1859  
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

1861  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

1863 
pRecIP»d
[ 
uiX
 ] = 
pRecQt
 [ uiX ];

1865 
pRecQt
 +ð
uiRecQtSŒide
;

1866 
pRecIP»d
 +ð
uiRecIP»dSŒide
;

1870 
	}
}

1872 
Void


1873 
	gTEncS—rch
::
	$xStÜeCrossCompÚ’tP»diùiÚResuÉ
Ð
P–
 *
pResiD¡
,

1874 cÚ¡ 
P–
 *
pResiSrc
,

1875 
TComTU
 &
rTu
,

1876 cÚ¡ 
IÁ
 
xOff£t
,

1877 cÚ¡ 
IÁ
 
yOff£t
,

1878 cÚ¡ 
IÁ
 
¡rideD¡
,

1879 cÚ¡ 
IÁ
 
¡rideSrc
 )

1881 cÚ¡ 
P–
 *
pSrc
 = 
pResiSrc
 + 
yOff£t
 * 
¡rideSrc
 + 
xOff£t
;

1882 
P–
 *
pD¡
 = 
pResiD¡
 + 
yOff£t
 * 
¡rideD¡
 + 
xOff£t
;

1884  
IÁ
 
y
 = 0; y < 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
height
; y++ )

1886 ::
	`memýy
Ð
pD¡
, 
pSrc
, (
P–
è* 
rTu
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
width
 );

1887 
pD¡
 +ð
¡rideD¡
;

1888 
pSrc
 +ð
¡rideSrc
;

1890 
	}
}

1892 
SCh¬


1893 
	gTEncS—rch
::
	$xC®cCrossCompÚ’tP»diùiÚAÍha
Ð
TComTU
 &
rTu
,

1894 cÚ¡ 
CompÚ’tID
 
compID
,

1895 cÚ¡ 
P–
* 
piResiL
,

1896 cÚ¡ 
P–
* 
piResiC
,

1897 cÚ¡ 
IÁ
 
width
,

1898 cÚ¡ 
IÁ
 
height
,

1899 cÚ¡ 
IÁ
 
¡rideL
,

1900 cÚ¡ 
IÁ
 
¡rideC
 )

1902 cÚ¡ 
P–
 *
pResiL
 = 
piResiL
;

1903 cÚ¡ 
P–
 *
pResiC
 = 
piResiC
;

1905 
TComD©aCU
 *
pCU
 = 
rTu
.
	`g‘CU
();

1906 cÚ¡ 
IÁ
 
absP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
Ð
compID
 );

1907 cÚ¡ 
IÁ
 
diffB™D•th
 = 
pCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘Difã»ÁŸlLumaChromaB™D•th
();

1909 
SCh¬
 
®pha
 = 0;

1910 
IÁ
 
SSxy
 = 0;

1911 
IÁ
 
SSxx
 = 0;

1913  
UIÁ
 
uiY
 = 0; uiY < 
height
; uiY++ )

1915  
UIÁ
 
uiX
 = 0; uiX < 
width
; uiX++ )

1917 cÚ¡ 
P–
 
sÿËdResiL
 = 
	`rightShiá
Ð
pResiL
[ 
uiX
 ], 
diffB™D•th
 );

1918 
SSxy
 +ðÐ
sÿËdResiL
 * 
pResiC
[ 
uiX
 ] );

1919 
SSxx
 +ðÐ
sÿËdResiL
 * scaledResiL );

1922 
pResiL
 +ð
¡rideL
;

1923 
pResiC
 +ð
¡rideC
;

1926 ifÐ
SSxx
 != 0 )

1928 
DoubË
 
dAÍha
 = 
SSxy
 / 
	`DoubË
Ð
SSxx
 );

1929 
®pha
 = 
	`SCh¬
(
Cl3
<
IÁ
>(-16, 16, (IÁ)(
dAÍha
 * 16)));

1931 cÚ¡ 
SCh¬
 
®phaQuªt
[17] = {0, 1, 1, 2, 2, 2, 4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8};

1933 
®pha
 = (®ph¨< 0è? -
®phaQuªt
[
	`IÁ
(-alpha)] :‡lphaQuant[Int(alpha)];

1935 
pCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
Ð
®pha
, 
compID
, 
absP¬tIdx
, 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
( compID ) );

1937  
®pha
;

1938 
	}
}

1940 
Void


1941 
	gTEncS—rch
::
xRecurIÁ¿ChromaCodšgQT
(
TComYuv
* 
pcOrgYuv
,

1942 
TComYuv
* 
pcP»dYuv
,

1943 
TComYuv
* 
pcResiYuv
,

1944 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

1945 
Di¡ÜtiÚ
& 
ruiDi¡
,

1946 
TComTU
& 
rTu


1947 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
))

1949 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

1950 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

1951 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

1952 cÚ¡ 
ChromaFÜm©
 
fÜm©
 = 
rTu
.
	`G‘ChromaFÜm©
();

1953 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

1954 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
);

1956 ifÐ
uiTrMode
 =ð
uiTrD•th
 )

1958 ià(!
rTu
.
	`ProûssChªÃlSeùiÚ
(
CHANNEL_TYPE_CHROMA
))

1963 cÚ¡ 
UIÁ
 
uiFuÎD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

1965 
BoÞ
 
checkT¿nsfÜmSk
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
();

1966 
checkT¿nsfÜmSk
 &ð
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
COMPONENT_Cb
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
());

1968 iàÐ
m_pcEncCfg
->
	`g‘U£T¿nsfÜmSkFa¡
() )

1970 
checkT¿nsfÜmSk
 &ð
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
COMPONENT_Y
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
());

1972 ià(
checkT¿nsfÜmSk
)

1974 
IÁ
 
nbLumaSk
 = 0;

1975 cÚ¡ 
UIÁ
 
maxAbsP¬tIdxSub
=
uiAbsP¬tIdx
 + (
rTu
.
	`ProûssšgAÎQuad¿Ás
(
COMPONENT_Cb
)?1:4);

1976 
UIÁ
 
absP¬tIdxSub
 = 
uiAbsP¬tIdx
;‡bsP¬tIdxSub < 
maxAbsP¬tIdxSub
;‡bsPartIdxSub ++)

1978 
nbLumaSk
 +ð
pcCU
->
	`g‘T¿nsfÜmSk
(
absP¬tIdxSub
, 
COMPONENT_Y
);

1980 
checkT¿nsfÜmSk
 &ð(
nbLumaSk
 > 0);

1985 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

1987 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

1988 
	`DEBUG_STRING_NEW
(
sDebugBe¡Mode
)

1991 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[
uiFuÎD•th
][
CI_QT_TRAFO_ROOT
] );

1993 cÚ¡ 
BoÞ
 
¥l™IÁoSubTUs
 = 
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
;

1995 
TComTURecur£
 
	`TUI‹¿tÜ
(
rTu
, 
çl£
, (
¥l™IÁoSubTUs
 ? 
TComTU
::
VERTICAL_SPLIT
 : TComTU::
DONT_SPLIT
), 
Œue
, 
compID
);

1997 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
TUI‹¿tÜ
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
);

2001 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
TUI‹¿tÜ
.
	`G‘AbsP¬tIdxTU
(
compID
);

2003 
DoubË
 
dSšgËCo¡
 = 
MAX_DOUBLE
;

2004 
IÁ
 
be¡ModeId
 = 0;

2005 
Di¡ÜtiÚ
 
sšgËDi¡C
 = 0;

2006 
UIÁ
 
sšgËCbfC
 = 0;

2007 
Di¡ÜtiÚ
 
sšgËDi¡CTmp
 = 0;

2008 
DoubË
 
sšgËCo¡Tmp
 = 0;

2009 
UIÁ
 
sšgËCbfCTmp
 = 0;

2010 
SCh¬
 
be¡CrossCP»diùiÚAÍha
 = 0;

2011 
IÁ
 
be¡T¿nsfÜmSkMode
 = 0;

2013 cÚ¡ 
BoÞ
 
checkCrossCompÚ’tP»diùiÚ
 = (
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_CHROMA
, 
subTUAbsP¬tIdx
è=ð
DM_CHROMA_IDX
)

2014 && 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
()

2015 && (
pcCU
->
	`g‘Cbf
(
subTUAbsP¬tIdx
, 
COMPONENT_Y
, 
uiTrD•th
) != 0);

2017 cÚ¡ 
IÁ
 
üossCP»diùiÚModesToTe¡
 = 
checkCrossCompÚ’tP»diùiÚ
 ? 2 : 1;

2018 cÚ¡ 
IÁ
 
ŒªsfÜmSkModesToTe¡
 = 
checkT¿nsfÜmSk
 ? 2 : 1;

2019 cÚ¡ 
IÁ
 
tÙ®ModesToTe¡
 = 
üossCP»diùiÚModesToTe¡
 * 
ŒªsfÜmSkModesToTe¡
;

2020 
IÁ
 
cu¼ModeId
 = 0;

2021 
IÁ
 
deçuÉ0Save1Lßd2
 = 0;

2023 
IÁ
 
ŒªsfÜmSkModeId
 = 0;¿nsfÜmSkModeId < 
ŒªsfÜmSkModesToTe¡
;ransformSkipModeId++)

2025 
IÁ
 
üossCP»diùiÚModeId
 = 0; crossCP»diùiÚModeId < 
üossCP»diùiÚModesToTe¡
; crossCPredictionModeId++)

2027 
pcCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
(0, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

2028 
	`DEBUG_STRING_NEW
(
sDebugMode
)

2029 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
Ð
ŒªsfÜmSkModeId
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

2030 
cu¼ModeId
++;

2032 cÚ¡ 
BoÞ
 
isOÃMode
 = (
tÙ®ModesToTe¡
 == 1);

2033 cÚ¡ 
BoÞ
 
isLa¡Mode
 = (
cu¼ModeId
 =ð
tÙ®ModesToTe¡
);

2035 ià(
isOÃMode
)

2037 
deçuÉ0Save1Lßd2
 = 0;

2039 ià(!
isOÃMode
 && (
ŒªsfÜmSkModeId
 =ð0è&& (
üossCP»diùiÚModeId
 == 0))

2041 
deçuÉ0Save1Lßd2
 = 1;

2045 
deçuÉ0Save1Lßd2
 = 2;

2048 
sšgËDi¡CTmp
 = 0;

2050 
	`xIÁ¿CodšgTUBlock
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLuma
, (
üossCP»diùiÚModeId
 !ð0), 
sšgËDi¡CTmp
, 
compID
, 
TUI‹¿tÜ
 
	`DEBUG_STRING_PASS_INTO
(
sDebugMode
), 
deçuÉ0Save1Lßd2
);

2051 
sšgËCbfCTmp
 = 
pcCU
->
	`g‘Cbf
Ð
subTUAbsP¬tIdx
, 
compID
, 
uiTrD•th
);

2053 iàÐ((
üossCP»diùiÚModeId
 =ð1è&& (
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
subTUAbsP¬tIdx
, 
compID
) == 0))

2054 || ((
ŒªsfÜmSkModeId
 =ð1è&& (
sšgËCbfCTmp
 == 0)))

2056 
sšgËCo¡Tmp
 = 
MAX_DOUBLE
;

2058 ià(!
isOÃMode
)

2060 
UIÁ
 
b™sTmp
 = 
	`xG‘IÁ¿B™sQTChroma
Ð
TUI‹¿tÜ
, 
compID
, 
çl£
 );

2061 
sšgËCo¡Tmp
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
b™sTmp
, 
sšgËDi¡CTmp
);

2064 if(
sšgËCo¡Tmp
 < 
dSšgËCo¡
)

2066 
	`DEBUG_STRING_SWAP
(
sDebugBe¡Mode
, 
sDebugMode
)

2067 
dSšgËCo¡
 = 
sšgËCo¡Tmp
;

2068 
sšgËDi¡C
 = 
sšgËDi¡CTmp
;

2069 
be¡CrossCP»diùiÚAÍha
 = (
üossCP»diùiÚModeId
 !ð0è? 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
subTUAbsP¬tIdx
, 
compID
) : 0;

2070 
be¡T¿nsfÜmSkMode
 = 
ŒªsfÜmSkModeId
;

2071 
be¡ModeId
 = 
cu¼ModeId
;

2072 
sšgËCbfC
 = 
sšgËCbfCTmp
;

2074 ià(!
isOÃMode
 && !
isLa¡Mode
)

2076 
	`xStÜeIÁ¿ResuÉQT
(
compID
, 
TUI‹¿tÜ
);

2077 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_TEMP_BEST
 ] );

2081 ià(!
isOÃMode
 && !
isLa¡Mode
)

2083 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

2088 if(
be¡ModeId
 < 
tÙ®ModesToTe¡
)

2090 
	`xLßdIÁ¿ResuÉQT
(
compID
, 
TUI‹¿tÜ
);

2091 
pcCU
->
	`£tCbfP¬tRªge
Ð
sšgËCbfC
 << 
uiTrD•th
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

2093 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiFuÎD•th
 ][ 
CI_TEMP_BEST
 ] );

2096 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sDebugBe¡Mode
)

2097 
pcCU
 ->
	`£tT¿nsfÜmSkP¬tRªge
 ( 
be¡T¿nsfÜmSkMode
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

2098 
pcCU
 ->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
Ð
be¡CrossCP»diùiÚAÍha
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

2099 
ruiDi¡
 +ð
sšgËDi¡C
;

2100 } 
TUI‹¿tÜ
.
	`ÃxtSeùiÚ
(
rTu
));

2102 ià(
¥l™IÁoSubTUs
)

2104 
	`off£tSubTUCBFs
(
rTu
, 
compID
);

2110 
UIÁ
 
uiS¶™Cbf
[
MAX_NUM_COMPONENT
] = {0,0,0};

2112 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

2113 cÚ¡ 
UIÁ
 
uiTrD•thChžd
 = 
tuRecur£Chžd
.
	`G‘T¿nsfÜmD•thR–
();

2116 
	`DEBUG_STRING_NEW
(
sChžd
)

2118 
	`xRecurIÁ¿ChromaCodšgQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLuma
, 
ruiDi¡
, 
tuRecur£Chžd
 
	`DEBUG_STRING_PASS_INTO
(
sChžd
) );

2120 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sChžd
)

2121 cÚ¡ 
UIÁ
 
uiAbsP¬tIdxSub
=
tuRecur£Chžd
.
	`G‘AbsP¬tIdxTU
();

2123 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

2125 
uiS¶™Cbf
[
ch
] |ð
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdxSub
, 
	`CompÚ’tID
(ch), 
uiTrD•thChžd
 );

2127 }  
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
) );

2130 
UIÁ
 
uiP¬tsDiv
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
();

2131 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

2133 ià(
uiS¶™Cbf
[
ch
])

2135 cÚ¡ 
UIÁ
 
æag
=1<<
uiTrD•th
;

2136 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

2137 
UCh¬
 *
pBa£
=
pcCU
->
	`g‘Cbf
Ð
compID
 );

2138  
UIÁ
 
uiOffs
 = 0; uiOff < 
uiP¬tsDiv
; uiOffs++ )

2140 
pBa£
[ 
uiAbsP¬tIdx
 + 
uiOffs
 ] |ð
æag
;

2145 
	}
}

2150 
Void


2151 
	gTEncS—rch
::
	$xS‘IÁ¿ResuÉChromaQT
(
TComYuv
* 
pcRecoYuv
, 
TComTU
 &
rTu
)

2153 ià(!
rTu
.
	`ProûssChªÃlSeùiÚ
(
CHANNEL_TYPE_CHROMA
))

2157 
TComD©aCU
 *
pcCU
=
rTu
.
	`g‘CU
();

2158 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

2159 cÚ¡ 
UIÁ
 
uiTrD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

2160 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

2161 ifÐ
uiTrMode
 =ð
uiTrD•th
 )

2163 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

2164 
UIÁ
 
uiQTLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

2167 cÚ¡ 
TComReùªgË
 &
tuReùCb
=
rTu
.
	`g‘Reù
(
COMPONENT_Cb
);

2168 
UIÁ
 
uiNumCÛffC
 = 
tuReùCb
.
width
*tuReùCb.
height
;

2169 cÚ¡ 
UIÁ
 
off£t
 = 
rTu
.
	`g‘CÛffic›ÁOff£t
(
COMPONENT_Cb
);

2171 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
rTu
.
	`G‘ChromaFÜm©
());

2172 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

2174 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
ch
);

2175 cÚ¡ 
TCÛff
* 
¤c
 = 
m_µcQTTempCÛff
[
compÚ’t
][
uiQTLay”
] + 
off£t
;

2176 
TCÛff
* 
de¡
 = 
pcCU
->
	`g‘CÛff
(
compÚ’t
è+ 
off£t
;

2177 ::
	`memýy
Ð
de¡
, 
¤c
, (
TCÛff
)*
uiNumCÛffC
 );

2178 #ià
ADAPTIVE_QP_SELECTION


2179 
TCÛff
* 
pcA¾CÛffSrc
 = 
m_µcQTTempA¾CÛff
[
compÚ’t
][ 
uiQTLay”
 ] + 
off£t
;

2180 
TCÛff
* 
pcA¾CÛffD¡
 = 
pcCU
->
	`g‘A¾CÛff
(
compÚ’t
è+ 
off£t
;

2181 ::
	`memýy
Ð
pcA¾CÛffD¡
, 
pcA¾CÛffSrc
, Ð
TCÛff
 ) * 
uiNumCÛffC
 );

2187 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`cÝyP¬tToP¬tCompÚ’t
Ð
COMPONENT_Cb
, 
pcRecoYuv
, 
uiAbsP¬tIdx
, 
tuReùCb
.
width
,uReùCb.
height
 );

2188 
m_pcQTTempTComYuv
[ 
uiQTLay”
 ].
	`cÝyP¬tToP¬tCompÚ’t
Ð
COMPONENT_Cr
, 
pcRecoYuv
, 
uiAbsP¬tIdx
, 
tuReùCb
.
width
,uReùCb.
height
 );

2192 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

2195 
	`xS‘IÁ¿ResuÉChromaQT
Ð
pcRecoYuv
, 
tuRecur£Chžd
 );

2196 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

2198 
	}
}

2202 
Void


2203 
	gTEncS—rch
::
e¡IÁ¿P»dLumaQT
(
TComD©aCU
* 
pcCU
,

2204 
TComYuv
* 
pcOrgYuv
,

2205 
TComYuv
* 
pcP»dYuv
,

2206 
TComYuv
* 
pcResiYuv
,

2207 
TComYuv
* 
pcRecoYuv
,

2208 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE]

2209 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
))

2211 cÚ¡ 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
(0);

2212 cÚ¡ 
UIÁ
 
uiIn™TrD•th
 = 
pcCU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
 ? 0 : 1;

2213 cÚ¡ 
UIÁ
 
uiNumPU
 = 1<<(2*
uiIn™TrD•th
);

2214 cÚ¡ 
UIÁ
 
uiQNumP¬ts
 = 
pcCU
->
	`g‘TÙ®NumP¬t
() >> 2;

2215 cÚ¡ 
UIÁ
 
uiWidthB™
 = 
pcCU
->
	`g‘IÁ¿SizeIdx
(0);

2216 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
pcCU
->
	`g‘Pic
()->
	`g‘ChromaFÜm©
();

2217 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
	`g‘Numb”V®idCompÚ’ts
(
chFmt
);

2218 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

2219 cÚ¡ 
TComPPS
 &
µs
 = *(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
());

2220 
Di¡ÜtiÚ
 
uiOv”®lDi¡Y
 = 0;

2221 
UIÁ
 
CªdNum
;

2222 
DoubË
 
CªdCo¡Li¡
[ 
FAST_UDI_MAX_RDMODE_NUM
 ];

2223 
P–
 
»siLumaPU
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE];

2225 
BoÞ
 
bMaššResidu®
[
NUMBER_OF_STORED_RESIDUAL_TYPES
];

2226 
UIÁ
 
»sidu®Ty³Index
 = 0;„esidu®Ty³Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
;„esidualTypeIndex++)

2228 
bMaššResidu®
[
»sidu®Ty³Index
] = 
Œue
;

2231 
bMaššResidu®
[
RESIDUAL_ENCODER_SIDE
] = !(
m_pcEncCfg
->
	`g‘U£RecÚBa£dCrossCP»diùiÚE¡im©e
());

2234 #ià
FULL_NBIT


2235 cÚ¡ 
DoubË
 
sq¹LambdaFÜFœ¡Pass
ð(
m_pcEncCfg
->
	`g‘Co¡Mode
()==
COST_MIXED_LOSSLESS_LOSSY_CODING
 && 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(0)) ?

2236 
	`sq¹
(0.57 * 
	`pow
(2.0, ((
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
 - 12) / 3.0)))

2237 : 
m_pcRdCo¡
->
	`g‘Sq¹Lambda
();

2239 cÚ¡ 
DoubË
 
sq¹LambdaFÜFœ¡Pass
ð(
m_pcEncCfg
->
	`g‘Co¡Mode
()==
COST_MIXED_LOSSLESS_LOSSY_CODING
 && 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(0)) ?

2240 
	`sq¹
(0.57 * 
	`pow
(2.0, ((
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP_PRIME
 - 12 - 6 * (
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) - 8)) / 3.0)))

2241 : 
m_pcRdCo¡
->
	`g‘Sq¹Lambda
();

2245 iàÐ
µs
.
	`g‘U£DQP
(è=ð
Œue
)

2247 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘QP
(0), 0, 
uiD•th
 );

2251 
pcCU
->
	`£tQPSubP¬ts
ÐpcCU->
	`g‘Sliû
()->
	`g‘SliûQp
(), 0, 
uiD•th
 );

2255 
TComTURecur£
 
	`tuRecur£CU
(
pcCU
, 0);

2256 
TComTURecur£
 
	`tuRecur£W™hPU
(
tuRecur£CU
, 
çl£
, (
uiIn™TrD•th
==0)?
TComTU
::
DONT_SPLIT
 : TComTU::
QUAD_SPLIT
);

2260 cÚ¡ 
UIÁ
 
uiP¬tOff£t
=
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxTU
();

2264 
	`DEBUG_STRING_NEW
(
sTemp2
)

2267 
IÁ
 
numModesAvažabË
 = 35;

2268 
UIÁ
 
uiRdModeLi¡
[
FAST_UDI_MAX_RDMODE_NUM
];

2269 
IÁ
 
numModesFÜFuÎRD
 = 
m_pcEncCfg
->
	`g‘Fa¡UDIU£MPMEÇbËd
()?
g_aucIÁ¿ModeNumFa¡_U£MPM
[ 
uiWidthB™
 ] : 
g_aucIÁ¿ModeNumFa¡_NÙU£MPM
[ uiWidthBit ];

2272 
	`as£¹
 (
tuRecur£W™hPU
.
	`ProûssCompÚ’tSeùiÚ
(
COMPONENT_Y
));

2273 
	`š™IÁ¿P©‹ºChTy³
Ð
tuRecur£W™hPU
, 
COMPONENT_Y
, 
Œue
 
	`DEBUG_STRING_PASS_INTO
(
sTemp2
) );

2275 
BoÞ
 
doFa¡S—rch
 = (
numModesFÜFuÎRD
 !ð
numModesAvažabË
);

2276 ià(
doFa¡S—rch
)

2278 
	`as£¹
(
numModesFÜFuÎRD
 < 
numModesAvažabË
);

2280  
IÁ
 
i
=0; i < 
numModesFÜFuÎRD
; i++ )

2282 
CªdCo¡Li¡
[ 
i
 ] = 
MAX_DOUBLE
;

2284 
CªdNum
 = 0;

2286 cÚ¡ 
TComReùªgË
 &
puReù
=
tuRecur£W™hPU
.
	`g‘Reù
(
COMPONENT_Y
);

2287 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxTU
();

2289 
P–
* 
piOrg
 = 
pcOrgYuv
 ->
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 );

2290 
P–
* 
piP»d
 = 
pcP»dYuv
->
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 );

2291 
UIÁ
 
uiSŒide
 = 
pcP»dYuv
->
	`g‘SŒide
Ð
COMPONENT_Y
 );

2292 
Di¡P¬am
 
di¡P¬am
;

2293 cÚ¡ 
BoÞ
 
bU£Hadam¬d
=
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(0) == 0;

2294 
m_pcRdCo¡
->
	`£tDi¡P¬am
(
di¡P¬am
, 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
), 
piOrg
, 
uiSŒide
, 
piP»d
, uiSŒide, 
puReù
.
width
,…uReù.
height
, 
bU£Hadam¬d
);

2295 
di¡P¬am
.
bAµlyWeight
 = 
çl£
;

2296  
IÁ
 
modeIdx
 = 0; modeIdx < 
numModesAvažabË
; modeIdx++ )

2298 
UIÁ
 
uiMode
 = 
modeIdx
;

2299 
Di¡ÜtiÚ
 
uiSad
 = 0;

2301 cÚ¡ 
BoÞ
 
bU£Fž‹r
=
TComP»diùiÚ
::
	`fž‹ršgIÁ¿Reã»nûSam¶es
(
COMPONENT_Y
, 
uiMode
, 
puReù
.
width
,…uReù.
height
, 
chFmt
, 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘IÁ¿SmoÙhšgDi§bËdFÏg
());

2303 
	`´edIÁ¿Ang
Ð
COMPONENT_Y
, 
uiMode
, 
piOrg
, 
uiSŒide
, 
piP»d
, uiSŒide, 
tuRecur£W™hPU
, 
bU£Fž‹r
, 
TComP»diùiÚ
::
	`U£DPCMFÜFœ¡PassIÁ¿E¡im©iÚ
(tuRecurseWithPU, uiMode) );

2306 
uiSad
+=
di¡P¬am
.
	`Di¡Func
(&distParam);

2308 
UIÁ
 
iModeB™s
 = 0;

2311 
iModeB™s
+=
	`xModeB™sIÁ¿
Ð
pcCU
, 
uiMode
, 
uiP¬tOff£t
, 
uiD•th
, 
CHANNEL_TYPE_LUMA
 );

2313 
DoubË
 
co¡
 = (DoubË)
uiSad
 + (DoubË)
iModeB™s
 * 
sq¹LambdaFÜFœ¡Pass
;

2315 #ià
DEBUG_INTRA_SEARCH_COSTS


2316 
¡d
::
cout
 << "1¡…as mod" << 
uiMode
 << " SAD = " << 
uiSad
 << ", modb™ ð" << 
iModeB™s
 << ", co¡ = " << 
co¡
 << "\n";

2319 
CªdNum
 +ð
	`xUpd©eCªdLi¡
Ð
uiMode
, 
co¡
, 
numModesFÜFuÎRD
, 
uiRdModeLi¡
, 
CªdCo¡Li¡
 );

2322 ià(
m_pcEncCfg
->
	`g‘Fa¡UDIU£MPMEÇbËd
())

2324 
IÁ
 
uiP»ds
[
NUM_MOST_PROBABLE_MODES
] = {-1, -1, -1};

2326 
IÁ
 
iMode
 = -1;

2327 
pcCU
->
	`g‘IÁ¿DœP»diùÜ
Ð
uiP¬tOff£t
, 
uiP»ds
, 
COMPONENT_Y
, &
iMode
 );

2329 cÚ¡ 
IÁ
 
numCªd
 = ( 
iMode
 >ð0 ) ? iMod: 
	`IÁ
(
NUM_MOST_PROBABLE_MODES
);

2331  
IÁ
 
j
=0; j < 
numCªd
; j++)

2333 
BoÞ
 
mo¡ProbabËModeInþuded
 = 
çl£
;

2334 
IÁ
 
mo¡ProbabËMode
 = 
uiP»ds
[
j
];

2336  
IÁ
 
i
=0; i < 
numModesFÜFuÎRD
; i++)

2338 
mo¡ProbabËModeInþuded
 |ð(
mo¡ProbabËMode
 =ð
uiRdModeLi¡
[
i
]);

2340 ià(!
mo¡ProbabËModeInþuded
)

2342 
uiRdModeLi¡
[
numModesFÜFuÎRD
++] = 
mo¡ProbabËMode
;

2349  
IÁ
 
i
=0; i < 
numModesFÜFuÎRD
; i++)

2351 
uiRdModeLi¡
[
i
] = i;

2356 #ià
HHI_RQT_INTRA_SPEEDUP_MOD


2357 
UIÁ
 
uiSecÚdBe¡Mode
 = 
MAX_UINT
;

2358 
DoubË
 
dSecÚdBe¡PUCo¡
 = 
MAX_DOUBLE
;

2360 
	`DEBUG_STRING_NEW
(
sPU
)

2361 
UIÁ
 
uiBe¡PUMode
 = 0;

2362 
Di¡ÜtiÚ
 
uiBe¡PUDi¡Y
 = 0;

2363 
DoubË
 
dBe¡PUCo¡
 = 
MAX_DOUBLE
;

2365 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


2366 
UIÁ
 
max
=
numModesFÜFuÎRD
;

2368 ià(
DebugO±iÚLi¡
::
FÜûLumaMode
.
	`isS‘
())

2370 
max
=0;

2372  
UIÁ
 
uiMode
 = 0; uiMod< 
max
; uiMode++)

2374  
UIÁ
 
uiMode
 = 0; uiMod< 
numModesFÜFuÎRD
; uiMode++ )

2378 
UIÁ
 
uiOrgMode
 = 
uiRdModeLi¡
[
uiMode
];

2380 
pcCU
->
	`£tIÁ¿DœSubP¬ts
 ( 
CHANNEL_TYPE_LUMA
, 
uiOrgMode
, 
uiP¬tOff£t
, 
uiD•th
 + 
uiIn™TrD•th
 );

2382 
	`DEBUG_STRING_NEW
(
sMode
)

2384 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
] );

2387 
Di¡ÜtiÚ
 
uiPUDi¡Y
 = 0;

2388 
DoubË
 
dPUCo¡
 = 0.0;

2389 #ià
HHI_RQT_INTRA_SPEEDUP


2390 
	`xRecurIÁ¿CodšgLumaQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaPU
, 
uiPUDi¡Y
, 
Œue
, 
dPUCo¡
, 
tuRecur£W™hPU
 
	`DEBUG_STRING_PASS_INTO
(
sMode
) );

2392 
	`xRecurIÁ¿CodšgLumaQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaPU
, 
uiPUDi¡Y
, 
dPUCo¡
, 
tuRecur£W™hPU
 
	`DEBUG_STRING_PASS_INTO
(
sMode
) );

2395 #ià
DEBUG_INTRA_SEARCH_COSTS


2396 
¡d
::
cout
 << "2nd…as [luma,chroma] mod[" << 
	`IÁ
(
pcCU
->
	`g‘IÁ¿Dœ
(
CHANNEL_TYPE_LUMA
, 
uiP¬tOff£t
)è<< "," << IÁÕcCU->g‘IÁ¿Dœ(
CHANNEL_TYPE_CHROMA
, uiP¬tOff£t)è<< "] co¡ = " << 
dPUCo¡
 << "\n";

2400 ifÐ
dPUCo¡
 < 
dBe¡PUCo¡
 )

2402 
	`DEBUG_STRING_SWAP
(
sPU
, 
sMode
)

2403 #ià
HHI_RQT_INTRA_SPEEDUP_MOD


2404 
uiSecÚdBe¡Mode
 = 
uiBe¡PUMode
;

2405 
dSecÚdBe¡PUCo¡
 = 
dBe¡PUCo¡
;

2407 
uiBe¡PUMode
 = 
uiOrgMode
;

2408 
uiBe¡PUDi¡Y
 = 
uiPUDi¡Y
;

2409 
dBe¡PUCo¡
 = 
dPUCo¡
;

2411 
	`xS‘IÁ¿ResuÉLumaQT
Ð
pcRecoYuv
, 
tuRecur£W™hPU
 );

2413 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

2415 cÚ¡ 
IÁ
 
xOff£t
 = 
tuRecur£W™hPU
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
x0
;

2416 cÚ¡ 
IÁ
 
yOff£t
 = 
tuRecur£W™hPU
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
y0
;

2417 
UIÁ
 
¡ÜedResidu®Index
 = 0; stÜedResidu®Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
; storedResidualIndex++)

2419 ià(
bMaššResidu®
[
¡ÜedResidu®Index
])

2421 
	`xStÜeCrossCompÚ’tP»diùiÚResuÉ
(
»siLuma
[
¡ÜedResidu®Index
], 
»siLumaPU
[¡ÜedResidu®Index], 
tuRecur£W™hPU
, 
xOff£t
, 
yOff£t
, 
MAX_CU_SIZE
, MAX_CU_SIZE );

2426 
UIÁ
 
uiQP¬tNum
 = 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxNumP¬ts
();

2428 ::
	`memýy
Ð
m_puhQTTempTrIdx
, 
pcCU
->
	`g‘T¿nsfÜmIdx
(è+ 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2429 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
numb”V®idCompÚ’ts
; component++)

2431 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’t
);

2432 ::
	`memýy
Ð
m_puhQTTempCbf
[
compID
], 
pcCU
->
	`g‘Cbf
ÐcompID ) + 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2433 ::
	`memýy
Ð
m_puhQTTempT¿nsfÜmSkFÏg
[
compID
], 
pcCU
->
	`g‘T¿nsfÜmSk
(compIDè+ 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2436 #ià
HHI_RQT_INTRA_SPEEDUP_MOD


2437 ifÐ
dPUCo¡
 < 
dSecÚdBe¡PUCo¡
 )

2439 
uiSecÚdBe¡Mode
 = 
uiOrgMode
;

2440 
dSecÚdBe¡PUCo¡
 = 
dPUCo¡
;

2445 #ià
HHI_RQT_INTRA_SPEEDUP


2446 #ià
HHI_RQT_INTRA_SPEEDUP_MOD


2447  
UIÁ
 
ui
 =0; ui < 2; ++ui )

2450 #ià
HHI_RQT_INTRA_SPEEDUP_MOD


2451 
UIÁ
 
uiOrgMode
 = 
ui
 ? 
uiSecÚdBe¡Mode
 : 
uiBe¡PUMode
;

2452 ifÐ
uiOrgMode
 =ð
MAX_UINT
 )

2457 
UIÁ
 
uiOrgMode
 = 
uiBe¡PUMode
;

2460 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


2461 ià(
DebugO±iÚLi¡
::
FÜûLumaMode
.
	`isS‘
())

2463 
uiOrgMode
 = 
DebugO±iÚLi¡
::
FÜûLumaMode
.
	`g‘IÁ
();

2467 
pcCU
->
	`£tIÁ¿DœSubP¬ts
 ( 
CHANNEL_TYPE_LUMA
, 
uiOrgMode
, 
uiP¬tOff£t
, 
uiD•th
 + 
uiIn™TrD•th
 );

2468 
	`DEBUG_STRING_NEW
(
sModeT»e
)

2471 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
] );

2474 
Di¡ÜtiÚ
 
uiPUDi¡Y
 = 0;

2475 
DoubË
 
dPUCo¡
 = 0.0;

2477 
	`xRecurIÁ¿CodšgLumaQT
Ð
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLumaPU
, 
uiPUDi¡Y
, 
çl£
, 
dPUCo¡
, 
tuRecur£W™hPU
 
	`DEBUG_STRING_PASS_INTO
(
sModeT»e
));

2480 ifÐ
dPUCo¡
 < 
dBe¡PUCo¡
 )

2482 
	`DEBUG_STRING_SWAP
(
sPU
, 
sModeT»e
)

2483 
uiBe¡PUMode
 = 
uiOrgMode
;

2484 
uiBe¡PUDi¡Y
 = 
uiPUDi¡Y
;

2485 
dBe¡PUCo¡
 = 
dPUCo¡
;

2487 
	`xS‘IÁ¿ResuÉLumaQT
Ð
pcRecoYuv
, 
tuRecur£W™hPU
 );

2489 ià(
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
())

2491 cÚ¡ 
IÁ
 
xOff£t
 = 
tuRecur£W™hPU
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
x0
;

2492 cÚ¡ 
IÁ
 
yOff£t
 = 
tuRecur£W™hPU
.
	`g‘Reù
Ð
COMPONENT_Y
 ).
y0
;

2493 
UIÁ
 
¡ÜedResidu®Index
 = 0; stÜedResidu®Index < 
NUMBER_OF_STORED_RESIDUAL_TYPES
; storedResidualIndex++)

2495 ià(
bMaššResidu®
[
¡ÜedResidu®Index
])

2497 
	`xStÜeCrossCompÚ’tP»diùiÚResuÉ
(
»siLuma
[
¡ÜedResidu®Index
], 
»siLumaPU
[¡ÜedResidu®Index], 
tuRecur£W™hPU
, 
xOff£t
, 
yOff£t
, 
MAX_CU_SIZE
, MAX_CU_SIZE );

2502 cÚ¡ 
UIÁ
 
uiQP¬tNum
 = 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxNumP¬ts
();

2503 ::
	`memýy
Ð
m_puhQTTempTrIdx
, 
pcCU
->
	`g‘T¿nsfÜmIdx
(è+ 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2505 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
numb”V®idCompÚ’ts
; component++)

2507 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’t
);

2508 ::
	`memýy
Ð
m_puhQTTempCbf
[
compID
], 
pcCU
->
	`g‘Cbf
ÐcompID ) + 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2509 ::
	`memýy
Ð
m_puhQTTempT¿nsfÜmSkFÏg
[
compID
], 
pcCU
->
	`g‘T¿nsfÜmSk
(compIDè+ 
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2515 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sPU
)

2518 
uiOv”®lDi¡Y
 +ð
uiBe¡PUDi¡Y
;

2521 cÚ¡ 
UIÁ
 
uiQP¬tNum
 = 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxNumP¬ts
();

2522 ::
	`memýy
Ð
pcCU
->
	`g‘T¿nsfÜmIdx
(è+ 
uiP¬tOff£t
, 
m_puhQTTempTrIdx
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2523 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
numb”V®idCompÚ’ts
; component++)

2525 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’t
);

2526 ::
	`memýy
Ð
pcCU
->
	`g‘Cbf
Ð
compID
 ) + 
uiP¬tOff£t
, 
m_puhQTTempCbf
[compID], 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2527 ::
	`memýy
Ð
pcCU
->
	`g‘T¿nsfÜmSk
Ð
compID
 ) + 
uiP¬tOff£t
, 
m_puhQTTempT¿nsfÜmSkFÏg
[compID ], 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2531 ifÐ!
tuRecur£W™hPU
.
	`IsLa¡SeùiÚ
() )

2533 cÚ¡ 
TComReùªgË
 &
puReù
=
tuRecur£W™hPU
.
	`g‘Reù
(
COMPONENT_Y
);

2534 cÚ¡ 
UIÁ
 
uiCompWidth
 = 
puReù
.
width
;

2535 cÚ¡ 
UIÁ
 
uiCompHeight
 = 
puReù
.
height
;

2537 cÚ¡ 
UIÁ
 
uiZOrd”
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
uiP¬tOff£t
;

2538 
P–
* 
piDes
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
COMPONENT_Y
,…cCU->
	`g‘CtuRsAddr
(), 
uiZOrd”
 );

2539 cÚ¡ 
UIÁ
 
uiDesSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
Ð
COMPONENT_Y
);

2540 cÚ¡ 
P–
* 
piSrc
 = 
pcRecoYuv
->
	`g‘Addr
Ð
COMPONENT_Y
, 
uiP¬tOff£t
 );

2541 cÚ¡ 
UIÁ
 
uiSrcSŒide
 = 
pcRecoYuv
->
	`g‘SŒide
Ð
COMPONENT_Y
);

2543  
UIÁ
 
uiY
 = 0; uiY < 
uiCompHeight
; uiY++, 
piSrc
 +ð
uiSrcSŒide
, 
piDes
 +ð
uiDesSŒide
 )

2545  
UIÁ
 
uiX
 = 0; uiX < 
uiCompWidth
; uiX++ )

2547 
piDes
[ 
uiX
 ] = 
piSrc
[ uiX ];

2553 
pcCU
->
	`£tIÁ¿DœSubP¬ts
 ( 
CHANNEL_TYPE_LUMA
, 
uiBe¡PUMode
, 
uiP¬tOff£t
, 
uiD•th
 + 
uiIn™TrD•th
 );

2554 } 
tuRecur£W™hPU
.
	`ÃxtSeùiÚ
(
tuRecur£CU
));

2557 ifÐ
uiNumPU
 > 1 )

2559 
UIÁ
 
uiCombCbfY
 = 0;

2560 
UIÁ
 
uiCombCbfU
 = 0;

2561 
UIÁ
 
uiCombCbfV
 = 0;

2562 
UIÁ
 
uiP¬tIdx
 = 0;

2563  
UIÁ
 
uiP¬t
 = 0; uiP¬ˆ< 4; uiP¬t++, 
uiP¬tIdx
 +ð
uiQNumP¬ts
 )

2565 
uiCombCbfY
 |ð
pcCU
->
	`g‘Cbf
Ð
uiP¬tIdx
, 
COMPONENT_Y
, 1 );

2566 
uiCombCbfU
 |ð
pcCU
->
	`g‘Cbf
Ð
uiP¬tIdx
, 
COMPONENT_Cb
, 1 );

2567 
uiCombCbfV
 |ð
pcCU
->
	`g‘Cbf
Ð
uiP¬tIdx
, 
COMPONENT_Cr
, 1 );

2569  
UIÁ
 
uiOffs
 = 0; uiOff < 4 * 
uiQNumP¬ts
; uiOffs++ )

2571 
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Y
 )[ 
uiOffs
 ] |ð
uiCombCbfY
;

2572 
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Cb
 )[ 
uiOffs
 ] |ð
uiCombCbfU
;

2573 
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Cr
 )[ 
uiOffs
 ] |ð
uiCombCbfV
;

2578 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
]);

2581 
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
(èð
uiOv”®lDi¡Y
;

2582 
	}
}

2587 
Void


2588 
	gTEncS—rch
::
e¡IÁ¿P»dChromaQT
(
TComD©aCU
* 
pcCU
,

2589 
TComYuv
* 
pcOrgYuv
,

2590 
TComYuv
* 
pcP»dYuv
,

2591 
TComYuv
* 
pcResiYuv
,

2592 
TComYuv
* 
pcRecoYuv
,

2593 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE]

2594 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
))

2596 cÚ¡ 
UIÁ
 
uiIn™TrD•th
 = 
pcCU
->
	`g‘P¬t™iÚSize
(0è!ð
SIZE_2Nx2N
 && 
	`’abË4ChromaPUsInIÁ¿NxNCU
(
pcOrgYuv
->
	`g‘ChromaFÜm©
()) ? 1 : 0;

2598 
TComTURecur£
 
	`tuRecur£CU
(
pcCU
, 0);

2599 
TComTURecur£
 
	`tuRecur£W™hPU
(
tuRecur£CU
, 
çl£
, (
uiIn™TrD•th
==0)?
TComTU
::
DONT_SPLIT
 : TComTU::
QUAD_SPLIT
);

2600 cÚ¡ 
UIÁ
 
uiQNumP¬ts
 = 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxNumP¬ts
();

2601 cÚ¡ 
UIÁ
 
uiD•thCU
=
tuRecur£W™hPU
.
	`g‘CUD•th
();

2602 cÚ¡ 
UIÁ
 
numb”V®idCompÚ’ts
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

2606 
UIÁ
 
uiBe¡Mode
 = 0;

2607 
Di¡ÜtiÚ
 
uiBe¡Di¡
 = 0;

2608 
DoubË
 
dBe¡Co¡
 = 
MAX_DOUBLE
;

2611 ià(
tuRecur£W™hPU
.
	`ProûssChªÃlSeùiÚ
(
CHANNEL_TYPE_CHROMA
))

2613 
UIÁ
 
uiModeLi¡
[
FAST_UDI_MAX_RDMODE_NUM
];

2614 cÚ¡ 
UIÁ
 
uiQP¬tNum
 = 
uiQNumP¬ts
;

2615 cÚ¡ 
UIÁ
 
uiP¬tOff£t
 = 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxTU
();

2617 
UIÁ
 
uiMšMode
 = 0;

2618 
UIÁ
 
uiMaxMode
 = 
NUM_CHROMA_MODE
;

2621 
pcCU
->
	`g‘AÎowedChromaDœ
Ð
uiP¬tOff£t
, 
uiModeLi¡
 );

2623 #ià
ENVIRONMENT_VARIABLE_DEBUG_AND_TEST


2624 ià(
DebugO±iÚLi¡
::
FÜûChromaMode
.
	`isS‘
())

2626 
uiMšMode
=
DebugO±iÚLi¡
::
FÜûChromaMode
.
	`g‘IÁ
();

2627 ià(
uiModeLi¡
[
uiMšMode
]==34)

2629 
uiMšMode
=4;

2631 
uiMaxMode
=
uiMšMode
+1;

2635 
	`DEBUG_STRING_NEW
(
sPU
)

2637  
UIÁ
 
uiMode
 = 
uiMšMode
; uiMod< 
uiMaxMode
; uiMode++ )

2640 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
uiD•thCU
][
CI_CURR_BEST
] );

2642 
	`DEBUG_STRING_NEW
(
sMode
)

2644 
Di¡ÜtiÚ
 
uiDi¡
 = 0;

2645 
pcCU
->
	`£tIÁ¿DœSubP¬ts
 ( 
CHANNEL_TYPE_CHROMA
, 
uiModeLi¡
[
uiMode
], 
uiP¬tOff£t
, 
uiD•thCU
+
uiIn™TrD•th
 );

2646 
	`xRecurIÁ¿ChromaCodšgQT
 ( 
pcOrgYuv
, 
pcP»dYuv
, 
pcResiYuv
, 
»siLuma
, 
uiDi¡
, 
tuRecur£W™hPU
 
	`DEBUG_STRING_PASS_INTO
(
sMode
) );

2648 ifÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
() )

2650 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
uiD•thCU
][
CI_CURR_BEST
] );

2653 
UIÁ
 
uiB™s
 = 
	`xG‘IÁ¿B™sQT
Ð
tuRecur£W™hPU
, 
çl£
, 
Œue
, false );

2654 
DoubË
 
dCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiB™s
, 
uiDi¡
 );

2657 ifÐ
dCo¡
 < 
dBe¡Co¡
 )

2659 
	`DEBUG_STRING_SWAP
(
sPU
, 
sMode
);

2660 
dBe¡Co¡
 = 
dCo¡
;

2661 
uiBe¡Di¡
 = 
uiDi¡
;

2662 
uiBe¡Mode
 = 
uiModeLi¡
[
uiMode
];

2664 
	`xS‘IÁ¿ResuÉChromaQT
Ð
pcRecoYuv
, 
tuRecur£W™hPU
 );

2665 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Cb
; compÚ’tIndex < 
numb”V®idCompÚ’ts
; componentIndex++)

2667 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

2668 ::
	`memýy
Ð
m_puhQTTempCbf
[
compID
], 
pcCU
->
	`g‘Cbf
ÐcompID )+
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2669 ::
	`memýy
Ð
m_puhQTTempT¿nsfÜmSkFÏg
[
compID
], 
pcCU
->
	`g‘T¿nsfÜmSk
ÐcompID )+
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2670 ::
	`memýy
Ð
m_phQTTempCrossCompÚ’tP»diùiÚAÍha
[
compID
], 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(compID)+
uiP¬tOff£t
, 
uiQP¬tNum
 * Ð
SCh¬
 ) );

2675 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sPU
)

2678 
UIÁ
 
compÚ’tIndex
 = 
COMPONENT_Cb
; compÚ’tIndex < 
numb”V®idCompÚ’ts
; componentIndex++)

2680 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

2681 ::
	`memýy
Ð
pcCU
->
	`g‘Cbf
Ð
compID
 )+
uiP¬tOff£t
, 
m_puhQTTempCbf
[compID], 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2682 ::
	`memýy
Ð
pcCU
->
	`g‘T¿nsfÜmSk
Ð
compID
 )+
uiP¬tOff£t
, 
m_puhQTTempT¿nsfÜmSkFÏg
[compID], 
uiQP¬tNum
 * Ð
UCh¬
 ) );

2683 ::
	`memýy
Ð
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
compID
)+
uiP¬tOff£t
, 
m_phQTTempCrossCompÚ’tP»diùiÚAÍha
[compID], 
uiQP¬tNum
 * Ð
SCh¬
 ) );

2687 ifÐ! 
tuRecur£W™hPU
.
	`IsLa¡SeùiÚ
() )

2689 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
numb”V®idCompÚ’ts
; ch++)

2691 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

2692 cÚ¡ 
TComReùªgË
 &
tuReù
 = 
tuRecur£W™hPU
.
	`g‘Reù
(
compID
);

2693 cÚ¡ 
UIÁ
 
uiCompWidth
 = 
tuReù
.
width
;

2694 cÚ¡ 
UIÁ
 
uiCompHeight
 = 
tuReù
.
height
;

2695 cÚ¡ 
UIÁ
 
uiZOrd”
 = 
pcCU
->
	`g‘ZÜd”IdxInCtu
(è+ 
tuRecur£W™hPU
.
	`G‘AbsP¬tIdxTU
();

2696 
P–
* 
piDes
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
compID
,…cCU->
	`g‘CtuRsAddr
(), 
uiZOrd”
 );

2697 cÚ¡ 
UIÁ
 
uiDesSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
Ð
compID
);

2698 cÚ¡ 
P–
* 
piSrc
 = 
pcRecoYuv
->
	`g‘Addr
Ð
compID
, 
uiP¬tOff£t
 );

2699 cÚ¡ 
UIÁ
 
uiSrcSŒide
 = 
pcRecoYuv
->
	`g‘SŒide
Ð
compID
);

2701  
UIÁ
 
uiY
 = 0; uiY < 
uiCompHeight
; uiY++, 
piSrc
 +ð
uiSrcSŒide
, 
piDes
 +ð
uiDesSŒide
 )

2703  
UIÁ
 
uiX
 = 0; uiX < 
uiCompWidth
; uiX++ )

2705 
piDes
[ 
uiX
 ] = 
piSrc
[ uiX ];

2711 
pcCU
->
	`£tIÁ¿DœSubP¬ts
Ð
CHANNEL_TYPE_CHROMA
, 
uiBe¡Mode
, 
uiP¬tOff£t
, 
uiD•thCU
+
uiIn™TrD•th
 );

2712 
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
 (è+ð
uiBe¡Di¡
;

2715 } 
tuRecur£W™hPU
.
	`ÃxtSeùiÚ
(
tuRecur£CU
));

2719 ifÐ
uiIn™TrD•th
 != 0 )

2721 
UIÁ
 
uiCombCbfU
 = 0;

2722 
UIÁ
 
uiCombCbfV
 = 0;

2723 
UIÁ
 
uiP¬tIdx
 = 0;

2724  
UIÁ
 
uiP¬t
 = 0; uiP¬ˆ< 4; uiP¬t++, 
uiP¬tIdx
 +ð
uiQNumP¬ts
 )

2726 
uiCombCbfU
 |ð
pcCU
->
	`g‘Cbf
Ð
uiP¬tIdx
, 
COMPONENT_Cb
, 1 );

2727 
uiCombCbfV
 |ð
pcCU
->
	`g‘Cbf
Ð
uiP¬tIdx
, 
COMPONENT_Cr
, 1 );

2729  
UIÁ
 
uiOffs
 = 0; uiOff < 4 * 
uiQNumP¬ts
; uiOffs++ )

2731 
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Cb
 )[ 
uiOffs
 ] |ð
uiCombCbfU
;

2732 
pcCU
->
	`g‘Cbf
Ð
COMPONENT_Cr
 )[ 
uiOffs
 ] |ð
uiCombCbfV
;

2736 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
uiD•thCU
][
CI_CURR_BEST
] );

2737 
	}
}

2755 
Void
 
	gTEncS—rch
::
	$xEncPCM
 (
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
P–
* 
pOrg
, P–* 
pPCM
, P–* 
pP»d
, P–* 
pResi
, P–* 
pReco
, UIÁ 
uiSŒide
, UIÁ 
uiWidth
, UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
 )

2757 cÚ¡ 
UIÁ
 
uiRecÚSŒide
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
compID
);

2758 cÚ¡ 
UIÁ
 
uiPCMB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘PCMB™D•th
(
	`toChªÃlTy³
(
compID
));

2759 cÚ¡ 
IÁ
 
chªÃlB™D•th
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

2760 
P–
* 
pRecoPic
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicYuvRec
()->
	`g‘Addr
(
compID
,…cCU->
	`g‘CtuRsAddr
(),…cCU->
	`g‘ZÜd”IdxInCtu
()+
uiAbsP¬tIdx
);

2762 cÚ¡ 
IÁ
 
pcmShiáRight
=(
chªÃlB™D•th
 - 
	`IÁ
(
uiPCMB™D•th
));

2764 
	`as£¹
(
pcmShiáRight
 >= 0);

2766  
UIÁ
 
uiY
 = 0; uiY < 
uiHeight
; uiY++ )

2768  
UIÁ
 
uiX
 = 0; uiX < 
uiWidth
; uiX++ )

2771 
pP»d
[
uiX
] = 0;

2772 
pResi
[
uiX
] = 0;

2774 
pPCM
[
uiX
] = (
pOrg
[uiX]>>
pcmShiáRight
);

2776 
pReco
 [
uiX
] = (
pPCM
[uiX]<<(
pcmShiáRight
));

2777 
pRecoPic
[
uiX
] = 
pReco
[uiX];

2779 
pP»d
 +ð
uiSŒide
;

2780 
pResi
 +ð
uiSŒide
;

2781 
pPCM
 +ð
uiWidth
;

2782 
pOrg
 +ð
uiSŒide
;

2783 
pReco
 +ð
uiSŒide
;

2784 
pRecoPic
 +ð
uiRecÚSŒide
;

2786 
	}
}

2790 
Void
 
	gTEncS—rch
::
	$IPCMS—rch
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcOrgYuv
, TComYuv* 
pcP»dYuv
, TComYuv* 
pcResiYuv
, TComYuv* 
pcRecoYuv
 )

2792 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
(0);

2793 cÚ¡ 
Di¡ÜtiÚ
 
uiDi¡ÜtiÚ
 = 0;

2794 
UIÁ
 
uiB™s
;

2796 
DoubË
 
dCo¡
;

2798 
UIÁ
 
ch
=0; ch < 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

2800 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

2801 cÚ¡ 
UIÁ
 
width
 = 
pcCU
->
	`g‘Width
(0è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËX
(
compID
);

2802 cÚ¡ 
UIÁ
 
height
 = 
pcCU
->
	`g‘Height
(0è>>…cCU->
	`g‘Pic
()->
	`g‘CompÚ’tSÿËY
(
compID
);

2803 cÚ¡ 
UIÁ
 
¡ride
 = 
pcP»dYuv
->
	`g‘SŒide
(
compID
);

2805 
P–
 * 
pOrig
 = 
pcOrgYuv
->
	`g‘Addr
 (
compID
, 0, 
width
);

2806 
P–
 * 
pResi
 = 
pcResiYuv
->
	`g‘Addr
(
compID
, 0, 
width
);

2807 
P–
 * 
pP»d
 = 
pcP»dYuv
->
	`g‘Addr
(
compID
, 0, 
width
);

2808 
P–
 * 
pReco
 = 
pcRecoYuv
->
	`g‘Addr
(
compID
, 0, 
width
);

2809 
P–
 * 
pPCM
 = 
pcCU
->
	`g‘PCMSam¶e
 (
compID
);

2811 
	`xEncPCM
 ( 
pcCU
, 0, 
pOrig
, 
pPCM
, 
pP»d
, 
pResi
, 
pReco
, 
¡ride
, 
width
, 
height
, 
compID
 );

2815 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

2816 
	`xEncIÁ¿H—d”
 ( 
pcCU
, 
uiD•th
, 0, 
Œue
, 
çl£
);

2817 
uiB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

2819 
dCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiB™s
, 
uiDi¡ÜtiÚ
 );

2821 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
]);

2823 
pcCU
->
	`g‘TÙ®B™s
(èð
uiB™s
;

2824 
pcCU
->
	`g‘TÙ®Co¡
(èð
dCo¡
;

2825 
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
(èð
uiDi¡ÜtiÚ
;

2827 
pcCU
->
	`cÝyToPic
(
uiD•th
);

2828 
	}
}

2833 
Void
 
	gTEncS—rch
::
	$xG‘IÁ”P»diùiÚE¼Ü
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvOrg
, 
IÁ
 
iP¬tIdx
, 
Di¡ÜtiÚ
& 
ruiE¼
, 
BoÞ
 )

2835 
	`mÙiÚCom³n§tiÚ
Ð
pcCU
, &
m_tmpYuvP»d
, 
REF_PIC_LIST_X
, 
iP¬tIdx
 );

2837 
UIÁ
 
uiAbsP¬tIdx
 = 0;

2838 
IÁ
 
iWidth
 = 0;

2839 
IÁ
 
iHeight
 = 0;

2840 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iP¬tIdx
, 
uiAbsP¬tIdx
, 
iWidth
, 
iHeight
 );

2842 
Di¡P¬am
 
cDi¡P¬am
;

2844 
cDi¡P¬am
.
bAµlyWeight
 = 
çl£
;

2847 
m_pcRdCo¡
->
	`£tDi¡P¬am
Ð
cDi¡P¬am
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
),

2848 
pcYuvOrg
->
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 ),…cYuvOrg->
	`g‘SŒide
(COMPONENT_Y),

2849 
m_tmpYuvP»d
 .
	`g‘Addr
Ð
COMPONENT_Y
, 
uiAbsP¬tIdx
 ), m_tmpYuvP»d.
	`g‘SŒide
(COMPONENT_Y),

2850 
iWidth
, 
iHeight
, 
m_pcEncCfg
->
	`g‘U£HADME
(è&& (
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
iP¬tIdx
) == 0) );

2852 
ruiE¼
 = 
cDi¡P¬am
.
	`Di¡Func
( &cDistParam );

2853 
	}
}

2856 
Void
 
	gTEncS—rch
::
	$xM”geE¡im©iÚ
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvOrg
, 
IÁ
 
iPUIdx
, 
UIÁ
& 
uiIÁ”Dœ
, 
TComMvF›ld
* 
·cMvF›ld
, UIÁ& 
uiM”geIndex
, 
Di¡ÜtiÚ
& 
ruiCo¡
, TComMvF›ld* 
cMvF›ldNeighbours
, 
UCh¬
* 
uhIÁ”DœNeighbours
, IÁ& 
numV®idM”geCªd
 )

2858 
UIÁ
 
uiAbsP¬tIdx
 = 0;

2859 
IÁ
 
iWidth
 = 0;

2860 
IÁ
 
iHeight
 = 0;

2862 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iPUIdx
, 
uiAbsP¬tIdx
, 
iWidth
, 
iHeight
 );

2863 
UIÁ
 
uiD•th
 = 
pcCU
->
	`g‘D•th
Ð
uiAbsP¬tIdx
 );

2865 
P¬tSize
 
·¹Size
 = 
pcCU
->
	`g‘P¬t™iÚSize
( 0 );

2866 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘Log2P¬®ËlM”geLev–Mšus2
(è&& 
·¹Size
 !ð
SIZE_2Nx2N
 &&…cCU->
	`g‘Width
( 0 ) <= 8 )

2868 iàÐ
iPUIdx
 == 0 )

2870 
pcCU
->
	`£tP¬tSizeSubP¬ts
Ð
SIZE_2Nx2N
, 0, 
uiD•th
 );

2871 #ià
MCTS_ENC_CHECK


2872 
UIÁ
 
numS·tŸlM”geCªdid©es
 = 0;

2873 
pcCU
->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
 );

2874 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& 
pcCU
->
	`isLa¡CÞumnCTUInTže
())

2876 
numV®idM”geCªd
 = 
numS·tŸlM”geCªdid©es
;

2879 
pcCU
->
	`g‘IÁ”M”geCªdid©es
Ð0, 0, 
cMvF›ldNeighbours
,
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
 );

2881 
pcCU
->
	`£tP¬tSizeSubP¬ts
Ð
·¹Size
, 0, 
uiD•th
 );

2886 #ià
MCTS_ENC_CHECK


2887 
UIÁ
 
numS·tŸlM”geCªdid©es
 = 0;

2888 
pcCU
->
	`g‘IÁ”M”geCªdid©es
Ð
uiAbsP¬tIdx
, 
iPUIdx
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
, 
numS·tŸlM”geCªdid©es
 );

2889 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& 
pcCU
->
	`isLa¡CÞumnCTUInTže
())

2891 
numV®idM”geCªd
 = 
numS·tŸlM”geCªdid©es
;

2894 
pcCU
->
	`g‘IÁ”M”geCªdid©es
Ð
uiAbsP¬tIdx
, 
iPUIdx
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
 );

2898 
	`xRe¡riùB»dM”geCªd
Ð
pcCU
, 
iPUIdx
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
 );

2900 
ruiCo¡
 = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

2901  
UIÁ
 
uiM”geCªd
 = 0; uiM”geCªd < 
numV®idM”geCªd
; ++uiMergeCand )

2903 
Di¡ÜtiÚ
 
uiCo¡Cªd
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

2904 
UIÁ
 
uiB™sCªd
 = 0;

2906 
P¬tSize
 
eP¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
( 0 );

2908 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[0 + 2*
uiM”geCªd
], 
eP¬tSize
, 
uiAbsP¬tIdx
, 0, 
iPUIdx
 );

2909 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvF›ld
Ð
cMvF›ldNeighbours
[1 + 2*
uiM”geCªd
], 
eP¬tSize
, 
uiAbsP¬tIdx
, 0, 
iPUIdx
 );

2911 
	`xG‘IÁ”P»diùiÚE¼Ü
Ð
pcCU
, 
pcYuvOrg
, 
iPUIdx
, 
uiCo¡Cªd
, 
m_pcEncCfg
->
	`g‘U£HADME
() );

2912 
uiB™sCªd
 = 
uiM”geCªd
 + 1;

2913 ià(
uiM”geCªd
 =ð
m_pcEncCfg
->
	`g‘MaxNumM”geCªd
() -1)

2915 
uiB™sCªd
--;

2917 
uiCo¡Cªd
 = uiCo¡Cªd + 
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiB™sCªd
 );

2918 iàÐ
uiCo¡Cªd
 < 
ruiCo¡
 )

2920 
ruiCo¡
 = 
uiCo¡Cªd
;

2921 
·cMvF›ld
[0] = 
cMvF›ldNeighbours
[0 + 2*
uiM”geCªd
];

2922 
·cMvF›ld
[1] = 
cMvF›ldNeighbours
[1 + 2*
uiM”geCªd
];

2923 
uiIÁ”Dœ
 = 
uhIÁ”DœNeighbours
[
uiM”geCªd
];

2924 
uiM”geIndex
 = 
uiM”geCªd
;

2927 
	}
}

2937 
Void
 
	gTEncS—rch
::
	$xRe¡riùB»dM”geCªd
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
puIdx
, 
TComMvF›ld
* 
mvF›ldNeighbours
, 
UCh¬
* 
š‹rDœNeighbours
, 
IÁ
 
numV®idM”geCªd
 )

2939 iàÐ
pcCU
->
	`isB»dRe¡riùiÚ
(
puIdx
) )

2941  
UIÁ
 
m”geCªd
 = 0; m”geCªd < 
numV®idM”geCªd
; ++mergeCand )

2943 iàÐ
š‹rDœNeighbours
[
m”geCªd
] == 3 )

2945 
š‹rDœNeighbours
[
m”geCªd
] = 1;

2946 
mvF›ldNeighbours
[(
m”geCªd
 << 1è+ 1].
	`£tMvF›ld
(
	`TComMv
(0,0), -1);

2950 
	}
}

2953 #ià
AMP_MRG


2954 
Void
 
	gTEncS—rch
::
´edIÁ”S—rch
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcOrgYuv
, TComYuv* 
pcP»dYuv
, TComYuv* 
pcResiYuv
, TComYuv* 
pcRecoYuv
 
DEBUG_STRING_FN_DECLARE
(
sDebug
), 
BoÞ
 
bU£Res
, BoÞ 
bU£MRG
 )

2956 
Void
 
	gTEncS—rch
::
	$´edIÁ”S—rch
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcOrgYuv
, TComYuv* 
pcP»dYuv
, TComYuv* 
pcResiYuv
, TComYuv* 
pcRecoYuv
, 
BoÞ
 
bU£Res
 )

2959 
UIÁ
 
i
=0; i<
NUM_REF_PIC_LIST_01
; i++)

2961 
m_acYuvP»d
[
i
].
	`þ—r
();

2963 
m_cYuvP»dTemp
.
	`þ—r
();

2964 
pcP»dYuv
->
	`þ—r
();

2966 iàÐ!
bU£Res
 )

2968 
pcResiYuv
->
	`þ—r
();

2971 
pcRecoYuv
->
	`þ—r
();

2973 
TComMv
 
cMvSrchRngLT
;

2974 
TComMv
 
cMvSrchRngRB
;

2976 
TComMv
 
cMvZ”o
;

2977 
TComMv
 
TempMv
;

2979 
TComMv
 
cMv
[2];

2980 
TComMv
 
cMvBi
[2];

2981 
TComMv
 
cMvTemp
[2][33];

2983 
IÁ
 
iNumP¬t
 = 
pcCU
->
	`g‘NumP¬t™iÚs
();

2984 
IÁ
 
iNumP»dDœ
 = 
pcCU
->
	`g‘Sliû
()->
	`isIÁ”P
() ? 1 : 2;

2986 
TComMv
 
cMvP»d
[2][33];

2988 
TComMv
 
cMvP»dBi
[2][33];

2989 
IÁ
 
¯iMvpIdxBi
[2][33];

2991 
IÁ
 
¯iMvpIdx
[2][33];

2992 
IÁ
 
¯iMvpNum
[2][33];

2994 
AMVPInfo
 
¯cAMVPInfo
[2][33];

2996 
IÁ
 
iRefIdx
[2]={0,0};

2997 
IÁ
 
iRefIdxBi
[2];

2999 
UIÁ
 
uiP¬tAddr
;

3000 
IÁ
 
iRoiWidth
, 
iRoiHeight
;

3002 
UIÁ
 
uiMbB™s
[3] = {1, 1, 0};

3004 
UIÁ
 
uiLa¡Mode
 = 0;

3005 
IÁ
 
iRefS¹
, 
iRefEnd
;

3007 
P¬tSize
 
eP¬tSize
 = 
pcCU
->
	`g‘P¬t™iÚSize
( 0 );

3009 
IÁ
 
be¡BiPRefIdxL1
 = 0;

3010 
IÁ
 
be¡BiPMvpL1
 = 0;

3011 
Di¡ÜtiÚ
 
biPDi¡Temp
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3013 
TComMvF›ld
 
cMvF›ldNeighbours
[
MRG_MAX_NUM_CANDS
 << 1];

3014 
UCh¬
 
uhIÁ”DœNeighbours
[
MRG_MAX_NUM_CANDS
];

3015 
IÁ
 
numV®idM”geCªd
 = 0 ;

3017  
IÁ
 
iP¬tIdx
 = 0; iP¬tIdx < 
iNumP¬t
; iPartIdx++ )

3019 
Di¡ÜtiÚ
 
uiCo¡
[2] = { 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
(), std::numeric_limits<Distortion>::max() };

3020 
Di¡ÜtiÚ
 
uiCo¡Bi
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3021 
Di¡ÜtiÚ
 
uiCo¡Temp
;

3023 
UIÁ
 
uiB™s
[3];

3024 
UIÁ
 
uiB™sTemp
;

3025 
Di¡ÜtiÚ
 
be¡BiPDi¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3027 
Di¡ÜtiÚ
 
uiCo¡TempL0
[
MAX_NUM_REF
];

3028 
IÁ
 
iNumRef
=0; iNumReà< 
MAX_NUM_REF
; iNumRef++)

3030 
uiCo¡TempL0
[
iNumRef
] = 
¡d
::
num”ic_lim™s
<
Di¡ÜtiÚ
>::
	`max
();

3032 
UIÁ
 
uiB™sTempL0
[
MAX_NUM_REF
];

3034 
TComMv
 
mvV®idLi¡1
;

3035 
IÁ
 
»fIdxV®idLi¡1
 = 0;

3036 
UIÁ
 
b™sV®idLi¡1
 = 
MAX_UINT
;

3037 
Di¡ÜtiÚ
 
co¡V®idLi¡1
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3039 
	`xG‘BlkB™s
Ð
eP¬tSize
, 
pcCU
->
	`g‘Sliû
()->
	`isIÁ”P
(), 
iP¬tIdx
, 
uiLa¡Mode
, 
uiMbB™s
);

3041 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iP¬tIdx
, 
uiP¬tAddr
, 
iRoiWidth
, 
iRoiHeight
 );

3043 #ià
AMP_MRG


3044 
BoÞ
 
bTe¡NÜm®MC
 = 
Œue
;

3046 iàÐ
bU£MRG
 && 
pcCU
->
	`g‘Width
Ð0 ) > 8 && 
iNumP¬t
 == 2 )

3048 
bTe¡NÜm®MC
 = 
çl£
;

3051 ià(
bTe¡NÜm®MC
)

3056  
IÁ
 
iRefLi¡
 = 0; iRefLi¡ < 
iNumP»dDœ
; iRefList++ )

3058 
RefPicLi¡
 
eRefPicLi¡
 = ( 
iRefLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

3060  
IÁ
 
iRefIdxTemp
 = 0; iRefIdxTem°< 
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
); iRefIdxTemp++ )

3062 
uiB™sTemp
 = 
uiMbB™s
[
iRefLi¡
];

3063 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
) > 1 )

3065 
uiB™sTemp
 +ð
iRefIdxTemp
+1;

3066 iàÐ
iRefIdxTemp
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
)-1 )

3068 
uiB™sTemp
--;

3071 
	`xE¡im©eMvP»dAMVP
Ð
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
eRefPicLi¡
, 
iRefIdxTemp
, 
cMvP»d
[
iRefLi¡
][iRefIdxTemp], 
çl£
, &
biPDi¡Temp
);

3072 
¯iMvpIdx
[
iRefLi¡
][
iRefIdxTemp
] = 
pcCU
->
	`g‘MVPIdx
(
eRefPicLi¡
, 
uiP¬tAddr
);

3073 
¯iMvpNum
[
iRefLi¡
][
iRefIdxTemp
] = 
pcCU
->
	`g‘MVPNum
(
eRefPicLi¡
, 
uiP¬tAddr
);

3075 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
(è&& 
iRefLi¡
==1 && 
biPDi¡Temp
 < 
be¡BiPDi¡
)

3077 
be¡BiPDi¡
 = 
biPDi¡Temp
;

3078 
be¡BiPMvpL1
 = 
¯iMvpIdx
[
iRefLi¡
][
iRefIdxTemp
];

3079 
be¡BiPRefIdxL1
 = 
iRefIdxTemp
;

3082 
uiB™sTemp
 +ð
m_auiMVPIdxCo¡
[
¯iMvpIdx
[
iRefLi¡
][
iRefIdxTemp
]][
AMVP_MAX_NUM_CANDS
];

3084 iàÐ
m_pcEncCfg
->
	`g‘Fa¡MEFÜG’BLowD–ayEÇbËd
(è&& 
iRefLi¡
 == 1 )

3086 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘Li¡1IdxToLi¡0Idx
Ð
iRefIdxTemp
 ) >= 0 )

3088 
cMvTemp
[1][
iRefIdxTemp
] = cMvTemp[0][
pcCU
->
	`g‘Sliû
()->
	`g‘Li¡1IdxToLi¡0Idx
( iRefIdxTemp )];

3089 
uiCo¡Temp
 = 
uiCo¡TempL0
[
pcCU
->
	`g‘Sliû
()->
	`g‘Li¡1IdxToLi¡0Idx
Ð
iRefIdxTemp
 )];

3091 
uiCo¡Temp
 -ð
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiB™sTempL0
[
pcCU
->
	`g‘Sliû
()->
	`g‘Li¡1IdxToLi¡0Idx
Ð
iRefIdxTemp
 )] );

3093 
m_pcRdCo¡
->
	`£tP»diùÜ
 ( 
cMvP»d
[
iRefLi¡
][
iRefIdxTemp
] );

3094 
uiB™sTemp
 +ð
m_pcRdCo¡
->
	`g‘B™sOfVeùÜW™hP»diùÜ
Ð
cMvTemp
[1][
iRefIdxTemp
].
	`g‘HÜ
(), cMvTemp[1][iRefIdxTemp].
	`g‘V”
() );

3096 
uiCo¡Temp
 +ð
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiB™sTemp
 );

3100 
	`xMÙiÚE¡im©iÚ
 ( 
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
eRefPicLi¡
, &
cMvP»d
[
iRefLi¡
][
iRefIdxTemp
], iRefIdxTemp, 
cMvTemp
[iRefLi¡][iRefIdxTemp], 
uiB™sTemp
, 
uiCo¡Temp
 );

3105 
	`xMÙiÚE¡im©iÚ
 ( 
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
eRefPicLi¡
, &
cMvP»d
[
iRefLi¡
][
iRefIdxTemp
], iRefIdxTemp, 
cMvTemp
[iRefLi¡][iRefIdxTemp], 
uiB™sTemp
, 
uiCo¡Temp
 );

3107 
	`xCÝyAMVPInfo
(
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘AMVPInfo
(), &
¯cAMVPInfo
[
iRefLi¡
][
iRefIdxTemp
]);

3108 
	`xCheckBe¡MVP
(
pcCU
, 
eRefPicLi¡
, 
cMvTemp
[
iRefLi¡
][
iRefIdxTemp
], 
cMvP»d
[iRefLi¡][iRefIdxTemp], 
¯iMvpIdx
[iRefLi¡][iRefIdxTemp], 
uiB™sTemp
, 
uiCo¡Temp
);

3110 iàÐ
iRefLi¡
 == 0 )

3112 
uiCo¡TempL0
[
iRefIdxTemp
] = 
uiCo¡Temp
;

3113 
uiB™sTempL0
[
iRefIdxTemp
] = 
uiB™sTemp
;

3115 iàÐ
uiCo¡Temp
 < 
uiCo¡
[
iRefLi¡
] )

3117 
uiCo¡
[
iRefLi¡
] = 
uiCo¡Temp
;

3118 
uiB™s
[
iRefLi¡
] = 
uiB™sTemp
;

3121 
cMv
[
iRefLi¡
] = 
cMvTemp
[iRefLi¡][
iRefIdxTemp
];

3122 
iRefIdx
[
iRefLi¡
] = 
iRefIdxTemp
;

3125 iàÐ
iRefLi¡
 =ð1 && 
uiCo¡Temp
 < 
co¡V®idLi¡1
 && 
pcCU
->
	`g‘Sliû
()->
	`g‘Li¡1IdxToLi¡0Idx
Ð
iRefIdxTemp
 ) < 0 )

3127 
co¡V®idLi¡1
 = 
uiCo¡Temp
;

3128 
b™sV®idLi¡1
 = 
uiB™sTemp
;

3131 
mvV®idLi¡1
 = 
cMvTemp
[
iRefLi¡
][
iRefIdxTemp
];

3132 
»fIdxV®idLi¡1
 = 
iRefIdxTemp
;

3138 iàÐ(
pcCU
->
	`g‘Sliû
()->
	`isIÁ”B
()è&& (pcCU->
	`isB»dRe¡riùiÚ
(
iP¬tIdx
è=ð
çl£
) )

3141 
cMvBi
[0] = 
cMv
[0]; cMvBi[1] = cMv[1];

3142 
iRefIdxBi
[0] = 
iRefIdx
[0]; iRefIdxBi[1] = iRefIdx[1];

3144 ::
	`memýy
(
cMvP»dBi
, 
cMvP»d
, (cMvPred));

3145 ::
	`memýy
(
¯iMvpIdxBi
, 
¯iMvpIdx
, (aaiMvpIdx));

3147 
UIÁ
 
uiMÙB™s
[2];

3149 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
())

3151 
	`xCÝyAMVPInfo
(&
¯cAMVPInfo
[1][
be¡BiPRefIdxL1
], 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘AMVPInfo
());

3152 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
be¡BiPMvpL1
, 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3153 
¯iMvpIdxBi
[1][
be¡BiPRefIdxL1
] = 
be¡BiPMvpL1
;

3154 
cMvP»dBi
[1][
be¡BiPRefIdxL1
] = 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘AMVPInfo
()->
m_acMvCªd
[
be¡BiPMvpL1
];

3156 
cMvBi
[1] = 
cMvP»dBi
[1][
be¡BiPRefIdxL1
];

3157 
iRefIdxBi
[1] = 
be¡BiPRefIdxL1
;

3158 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎMv
Ð
cMvBi
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3159 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎRefIdx
Ð
iRefIdxBi
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3160 
TComYuv
* 
pcYuvP»d
 = &
m_acYuvP»d
[
REF_PIC_LIST_1
];

3161 
	`mÙiÚCom³n§tiÚ
Ð
pcCU
, 
pcYuvP»d
, 
REF_PIC_LIST_1
, 
iP¬tIdx
 );

3163 
uiMÙB™s
[0] = 
uiB™s
[0] - 
uiMbB™s
[0];

3164 
uiMÙB™s
[1] = 
uiMbB™s
[1];

3166 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
) > 1 )

3168 
uiMÙB™s
[1] +ð
be¡BiPRefIdxL1
+1;

3169 iàÐ
be¡BiPRefIdxL1
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
REF_PIC_LIST_1
)-1 )

3171 
uiMÙB™s
[1]--;

3175 
uiMÙB™s
[1] +ð
m_auiMVPIdxCo¡
[
¯iMvpIdxBi
[1][
be¡BiPRefIdxL1
]][
AMVP_MAX_NUM_CANDS
];

3177 
uiB™s
[2] = 
uiMbB™s
[2] + 
uiMÙB™s
[0] + uiMotBits[1];

3179 
cMvTemp
[1][
be¡BiPRefIdxL1
] = 
cMvBi
[1];

3183 
uiMÙB™s
[0] = 
uiB™s
[0] - 
uiMbB™s
[0];

3184 
uiMÙB™s
[1] = 
uiB™s
[1] - 
uiMbB™s
[1];

3185 
uiB™s
[2] = 
uiMbB™s
[2] + 
uiMÙB™s
[0] + uiMotBits[1];

3189 
IÁ
 
iNumI‹r
 = 4;

3192 iàÐ
m_pcEncCfg
->
	`g‘Fa¡IÁ”S—rchMode
()==
FASTINTERSEARCH_MODE1
 || m_pcEncCfg->g‘Fa¡IÁ”S—rchMode()==
FASTINTERSEARCH_MODE2
 || 
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
() )

3194 
iNumI‹r
 = 1;

3197  
IÁ
 
iI‹r
 = 0; iI‹¸< 
iNumI‹r
; iIter++ )

3199 
IÁ
 
iRefLi¡
 = 
iI‹r
 % 2;

3201 iàÐ
m_pcEncCfg
->
	`g‘Fa¡IÁ”S—rchMode
()==
FASTINTERSEARCH_MODE1
 || m_pcEncCfg->g‘Fa¡IÁ”S—rchMode()==
FASTINTERSEARCH_MODE2
 )

3203 ifÐ
uiCo¡
[0] <= uiCost[1] )

3205 
iRefLi¡
 = 1;

3209 
iRefLi¡
 = 0;

3212 iàÐ
iI‹r
 == 0 )

3214 
iRefLi¡
 = 0;

3216 iàÐ
iI‹r
 =ð0 && !
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
())

3218 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(1-
iRefLi¡
))->
	`£tAÎMv
Ð
cMv
[1-iRefLi¡], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3219 
pcCU
->
	`g‘CUMvF›ld
(
	`RefPicLi¡
(1-
iRefLi¡
))->
	`£tAÎRefIdx
Ð
iRefIdx
[1-iRefLi¡], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3220 
TComYuv
* 
pcYuvP»d
 = &
m_acYuvP»d
[1-
iRefLi¡
];

3221 
	`mÙiÚCom³n§tiÚ
 ( 
pcCU
, 
pcYuvP»d
, 
	`RefPicLi¡
(1-
iRefLi¡
), 
iP¬tIdx
 );

3224 
RefPicLi¡
 
eRefPicLi¡
 = ( 
iRefLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

3226 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
())

3228 
iRefLi¡
 = 0;

3229 
eRefPicLi¡
 = 
REF_PIC_LIST_0
;

3232 
BoÞ
 
bChªged
 = 
çl£
;

3234 
iRefS¹
 = 0;

3235 
iRefEnd
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
)-1;

3237  
IÁ
 
iRefIdxTemp
 = 
iRefS¹
; iRefIdxTem°<ð
iRefEnd
; iRefIdxTemp++ )

3239 
uiB™sTemp
 = 
uiMbB™s
[2] + 
uiMÙB™s
[1-
iRefLi¡
];

3240 iàÐ
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
) > 1 )

3242 
uiB™sTemp
 +ð
iRefIdxTemp
+1;

3243 iàÐ
iRefIdxTemp
 =ð
pcCU
->
	`g‘Sliû
()->
	`g‘NumRefIdx
(
eRefPicLi¡
)-1 )

3245 
uiB™sTemp
--;

3248 
uiB™sTemp
 +ð
m_auiMVPIdxCo¡
[
¯iMvpIdxBi
[
iRefLi¡
][
iRefIdxTemp
]][
AMVP_MAX_NUM_CANDS
];

3250 
	`xMÙiÚE¡im©iÚ
 ( 
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
eRefPicLi¡
, &
cMvP»dBi
[
iRefLi¡
][
iRefIdxTemp
], iRefIdxTemp, 
cMvTemp
[iRefLi¡][iRefIdxTemp], 
uiB™sTemp
, 
uiCo¡Temp
, 
Œue
 );

3252 
	`xCÝyAMVPInfo
(&
¯cAMVPInfo
[
iRefLi¡
][
iRefIdxTemp
], 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘AMVPInfo
());

3253 
	`xCheckBe¡MVP
(
pcCU
, 
eRefPicLi¡
, 
cMvTemp
[
iRefLi¡
][
iRefIdxTemp
], 
cMvP»dBi
[iRefLi¡][iRefIdxTemp], 
¯iMvpIdxBi
[iRefLi¡][iRefIdxTemp], 
uiB™sTemp
, 
uiCo¡Temp
);

3255 iàÐ
uiCo¡Temp
 < 
uiCo¡Bi
 )

3257 
bChªged
 = 
Œue
;

3259 
cMvBi
[
iRefLi¡
] = 
cMvTemp
[iRefLi¡][
iRefIdxTemp
];

3260 
iRefIdxBi
[
iRefLi¡
] = 
iRefIdxTemp
;

3262 
uiCo¡Bi
 = 
uiCo¡Temp
;

3263 
uiMÙB™s
[
iRefLi¡
] = 
uiB™sTemp
 - 
uiMbB™s
[2] - uiMotBits[1-iRefList];

3264 
uiB™s
[2] = 
uiB™sTemp
;

3266 if(
iNumI‹r
!=1)

3269 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`£tAÎMv
Ð
cMvBi
[
iRefLi¡
], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3270 
pcCU
->
	`g‘CUMvF›ld
Ð
eRefPicLi¡
 )->
	`£tAÎRefIdx
Ð
iRefIdxBi
[
iRefLi¡
], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3272 
TComYuv
* 
pcYuvP»d
 = &
m_acYuvP»d
[
iRefLi¡
];

3273 
	`mÙiÚCom³n§tiÚ
Ð
pcCU
, 
pcYuvP»d
, 
eRefPicLi¡
, 
iP¬tIdx
 );

3278 iàÐ!
bChªged
 )

3280 iàÐ
uiCo¡Bi
 <ð
uiCo¡
[0] && uiCostBi <= uiCost[1] )

3282 
	`xCÝyAMVPInfo
(&
¯cAMVPInfo
[0][
iRefIdxBi
[0]], 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`g‘AMVPInfo
());

3283 
	`xCheckBe¡MVP
(
pcCU
, 
REF_PIC_LIST_0
, 
cMvBi
[0], 
cMvP»dBi
[0][
iRefIdxBi
[0]], 
¯iMvpIdxBi
[0][iRefIdxBi[0]], 
uiB™s
[2], 
uiCo¡Bi
);

3284 if(!
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
())

3286 
	`xCÝyAMVPInfo
(&
¯cAMVPInfo
[1][
iRefIdxBi
[1]], 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`g‘AMVPInfo
());

3287 
	`xCheckBe¡MVP
(
pcCU
, 
REF_PIC_LIST_1
, 
cMvBi
[1], 
cMvP»dBi
[1][
iRefIdxBi
[1]], 
¯iMvpIdxBi
[1][iRefIdxBi[1]], 
uiB™s
[2], 
uiCo¡Bi
);

3295 #ià
AMP_MRG


3299 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvF›ld
Ð
	`TComMvF›ld
(), 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3300 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvF›ld
Ð
	`TComMvF›ld
(), 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3301 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvd
 ( 
cMvZ”o
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3302 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvd
 ( 
cMvZ”o
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3304 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð-1, 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3305 
pcCU
->
	`£tMVPNumSubP¬ts
Ð-1, 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3306 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð-1, 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3307 
pcCU
->
	`£tMVPNumSubP¬ts
Ð-1, 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3309 
UIÁ
 
uiMEB™s
 = 0;

3311 
cMv
[1] = 
mvV®idLi¡1
;

3312 
iRefIdx
[1] = 
»fIdxV®idLi¡1
;

3313 
uiB™s
[1] = 
b™sV®idLi¡1
;

3314 
uiCo¡
[1] = 
co¡V®idLi¡1
;

3316 #ià
AMP_MRG


3317 ià(
bTe¡NÜm®MC
)

3320 iàÐ
uiCo¡Bi
 <ð
uiCo¡
[0] && uiCostBi <= uiCost[1])

3322 
uiLa¡Mode
 = 2;

3323 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMv
Ð
cMvBi
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3324 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎRefIdx
Ð
iRefIdxBi
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3325 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMv
Ð
cMvBi
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3326 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎRefIdx
Ð
iRefIdxBi
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3328 
TempMv
 = 
cMvBi
[0] - 
cMvP»dBi
[0][
iRefIdxBi
[0]];

3329 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvd
 ( 
TempMv
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3331 
TempMv
 = 
cMvBi
[1] - 
cMvP»dBi
[1][
iRefIdxBi
[1]];

3332 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvd
 ( 
TempMv
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3334 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð3, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(0) );

3336 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
¯iMvpIdxBi
[0][
iRefIdxBi
[0]], 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3337 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
¯iMvpNum
[0][
iRefIdxBi
[0]], 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3338 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
¯iMvpIdxBi
[1][
iRefIdxBi
[1]], 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3339 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
¯iMvpNum
[1][
iRefIdxBi
[1]], 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3341 
uiMEB™s
 = 
uiB™s
[2];

3343 iàÐ
uiCo¡
[0] <= uiCost[1] )

3345 
uiLa¡Mode
 = 0;

3346 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMv
Ð
cMv
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3347 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎRefIdx
Ð
iRefIdx
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3349 
TempMv
 = 
cMv
[0] - 
cMvP»d
[0][
iRefIdx
[0]];

3350 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvd
 ( 
TempMv
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3352 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð1, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(0) );

3354 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
¯iMvpIdx
[0][
iRefIdx
[0]], 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3355 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
¯iMvpNum
[0][
iRefIdx
[0]], 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3357 
uiMEB™s
 = 
uiB™s
[0];

3361 
uiLa¡Mode
 = 1;

3362 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMv
Ð
cMv
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3363 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎRefIdx
Ð
iRefIdx
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3365 
TempMv
 = 
cMv
[1] - 
cMvP»d
[1][
iRefIdx
[1]];

3366 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvd
 ( 
TempMv
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3368 
pcCU
->
	`£tIÁ”DœSubP¬ts
Ð2, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(0) );

3370 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
¯iMvpIdx
[1][
iRefIdx
[1]], 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3371 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
¯iMvpNum
[1][
iRefIdx
[1]], 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3373 
uiMEB™s
 = 
uiB™s
[1];

3375 #ià
AMP_MRG


3379 iàÐ
pcCU
->
	`g‘P¬t™iÚSize
Ð
uiP¬tAddr
 ) !ð
SIZE_2Nx2N
 )

3381 
UIÁ
 
uiMRGIÁ”Dœ
 = 0;

3382 
TComMvF›ld
 
cMRGMvF›ld
[2];

3383 
UIÁ
 
uiMRGIndex
 = 0;

3385 
UIÁ
 
uiMEIÁ”Dœ
 = 0;

3386 
TComMvF›ld
 
cMEMvF›ld
[2];

3388 
m_pcRdCo¡
->
	`£ËùMÙiÚLambda
Ð
Œue
, 0, 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiP¬tAddr
) );

3390 #ià
AMP_MRG


3392 
Di¡ÜtiÚ
 
uiMEE¼Ü
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3393 
Di¡ÜtiÚ
 
uiMECo¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3395 ià(
bTe¡NÜm®MC
)

3397 
	`xG‘IÁ”P»diùiÚE¼Ü
Ð
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
uiMEE¼Ü
, 
m_pcEncCfg
->
	`g‘U£HADME
() );

3398 
uiMECo¡
 = 
uiMEE¼Ü
 + 
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiMEB™s
 );

3402 
Di¡ÜtiÚ
 
uiMEE¼Ü
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3403 
	`xG‘IÁ”P»diùiÚE¼Ü
Ð
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
uiMEE¼Ü
, 
m_pcEncCfg
->
	`g‘U£HADME
() );

3404 
Di¡ÜtiÚ
 
uiMECo¡
 = 
uiMEE¼Ü
 + 
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiMEB™s
 );

3407 
uiMEIÁ”Dœ
 = 
pcCU
->
	`g‘IÁ”Dœ
Ð
uiP¬tAddr
 );

3408 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCU
, 
uiP¬tAddr
, 
REF_PIC_LIST_0
, 
cMEMvF›ld
[0] );

3409 
TComD©aCU
::
	`g‘MvF›ld
Ð
pcCU
, 
uiP¬tAddr
, 
REF_PIC_LIST_1
, 
cMEMvF›ld
[1] );

3412 
Di¡ÜtiÚ
 
uiMRGCo¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3414 
	`xM”geE¡im©iÚ
Ð
pcCU
, 
pcOrgYuv
, 
iP¬tIdx
, 
uiMRGIÁ”Dœ
, 
cMRGMvF›ld
, 
uiMRGIndex
, 
uiMRGCo¡
, 
cMvF›ldNeighbours
, 
uhIÁ”DœNeighbours
, 
numV®idM”geCªd
);

3416 iàÐ
uiMRGCo¡
 < 
uiMECo¡
 )

3419 
pcCU
->
	`£tM”geFÏgSubP¬ts
 ( 
Œue
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
( uiPartAddr ) );

3420 
pcCU
->
	`£tM”geIndexSubP¬ts
Ð
uiMRGIndex
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
( uiPartAddr ) );

3421 
pcCU
->
	`£tIÁ”DœSubP¬ts
 ( 
uiMRGIÁ”Dœ
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
( uiPartAddr ) );

3422 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_0
 )->
	`£tAÎMvF›ld
Ð
cMRGMvF›ld
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3423 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎMvF›ld
Ð
cMRGMvF›ld
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3425 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_0
)->
	`£tAÎMvd
 ( 
cMvZ”o
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3426 
pcCU
->
	`g‘CUMvF›ld
(
REF_PIC_LIST_1
)->
	`£tAÎMvd
 ( 
cMvZ”o
, 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3428 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð-1, 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3429 
pcCU
->
	`£tMVPNumSubP¬ts
Ð-1, 
REF_PIC_LIST_0
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3430 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð-1, 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3431 
pcCU
->
	`£tMVPNumSubP¬ts
Ð-1, 
REF_PIC_LIST_1
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3436 
pcCU
->
	`£tM”geFÏgSubP¬ts
Ð
çl£
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
( uiPartAddr ) );

3437 
pcCU
->
	`£tIÁ”DœSubP¬ts
 ( 
uiMEIÁ”Dœ
, 
uiP¬tAddr
, 
iP¬tIdx
,…cCU->
	`g‘D•th
( uiPartAddr ) );

3438 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_0
 )->
	`£tAÎMvF›ld
Ð
cMEMvF›ld
[0], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3439 
pcCU
->
	`g‘CUMvF›ld
Ð
REF_PIC_LIST_1
 )->
	`£tAÎMvF›ld
Ð
cMEMvF›ld
[1], 
eP¬tSize
, 
uiP¬tAddr
, 0, 
iP¬tIdx
 );

3443 #ià
MCTS_ENC_CHECK


3444 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& (!
	`checkTMùsMvp
(
pcCU
, 
iP¬tIdx
)))

3446 
pcCU
->
	`£tTMùsMvpIsV®id
(
çl£
);

3452 
	`mÙiÚCom³n§tiÚ
 ( 
pcCU
, 
pcP»dYuv
, 
REF_PIC_LIST_X
, 
iP¬tIdx
 );

3456 
	`£tWpSÿlšgDi¡P¬am
Ð
pcCU
, -1, 
REF_PIC_LIST_X
 );

3459 
	}
}

3463 
Void
 
	gTEncS—rch
::
	$xE¡im©eMvP»dAMVP
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcOrgYuv
, 
UIÁ
 
uiP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
IÁ
 
iRefIdx
, 
TComMv
& 
rcMvP»d
, 
BoÞ
 
bFžËd
, 
Di¡ÜtiÚ
* 
puiDi¡BiP
 )

3465 
AMVPInfo
* 
pcAMVPInfo
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘AMVPInfo
();

3467 
TComMv
 
cBe¡Mv
;

3468 
IÁ
 
iBe¡Idx
 = 0;

3469 
TComMv
 
cZ”oMv
;

3470 
TComMv
 
cMvP»d
;

3471 
Di¡ÜtiÚ
 
uiBe¡Co¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3472 
UIÁ
 
uiP¬tAddr
 = 0;

3473 
IÁ
 
iRoiWidth
, 
iRoiHeight
;

3474 
IÁ
 
i
;

3475 
IÁ
 
mšMVPCªd
;

3476 
IÁ
 
maxMVPCªd
;

3478 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
uiP¬tIdx
, 
uiP¬tAddr
, 
iRoiWidth
, 
iRoiHeight
 );

3480 ià(!
bFžËd
)

3482 
pcCU
->
	`fžlMvpCªd
Ð
uiP¬tIdx
, 
uiP¬tAddr
, 
eRefPicLi¡
, 
iRefIdx
, 
pcAMVPInfo
 );

3485 #ià
MCTS_ENC_CHECK


3486 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& 
pcCU
->
	`isLa¡CÞumnCTUInTže
(è&& (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 <…cAMVPInfo->
iN
))

3488 
iBe¡Idx
 = (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 == 0) ? 1 : 0;

3489 
cBe¡Mv
 = 
pcAMVPInfo
->
m_acMvCªd
[ÕcAMVPInfo->
numS·tŸlMVPCªdid©es
 == 0) ? 1 : 0];

3490 
mšMVPCªd
 = (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 == 0) ? 1 : 0;

3491 
maxMVPCªd
 = (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 =ð0è?…cAMVPInfo->
iN
 : 1;

3495 
iBe¡Idx
 = 0;

3496 
cBe¡Mv
 = 
pcAMVPInfo
->
m_acMvCªd
[0];

3497 
mšMVPCªd
 = 0;

3498 
maxMVPCªd
 = 
pcAMVPInfo
->
iN
;

3501 
iBe¡Idx
 = 0;

3502 
cBe¡Mv
 = 
pcAMVPInfo
->
m_acMvCªd
[0];

3503 
mšMVPCªd
 = 0;

3504 
maxMVPCªd
 = 
pcAMVPInfo
->
iN
;

3506 ià(
pcAMVPInfo
->
iN
 <= 1)

3508 
rcMvP»d
 = 
cBe¡Mv
;

3510 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
iBe¡Idx
, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3511 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
pcAMVPInfo
->
iN
, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3513 if(
pcCU
->
	`g‘Sliû
()->
	`g‘MvdL1Z”oFÏg
(è&& 
eRefPicLi¡
==
REF_PIC_LIST_1
)

3515 (*
puiDi¡BiP
èð
	`xG‘Tem¶©eCo¡
Ð
pcCU
, 
uiP¬tAddr
, 
pcOrgYuv
, &
m_cYuvP»dTemp
, 
rcMvP»d
, 0, 
AMVP_MAX_NUM_CANDS
, 
eRefPicLi¡
, 
iRefIdx
, 
iRoiWidth
, 
iRoiHeight
);

3520 ià(
bFžËd
)

3522 
	`as£¹
(
pcCU
->
	`g‘MVPIdx
(
eRefPicLi¡
,
uiP¬tAddr
) >= 0);

3523 
rcMvP»d
 = 
pcAMVPInfo
->
m_acMvCªd
[
pcCU
->
	`g‘MVPIdx
(
eRefPicLi¡
,
uiP¬tAddr
)];

3527 
m_cYuvP»dTemp
.
	`þ—r
();

3529  
i
 = 
mšMVPCªd
 ; i < 
maxMVPCªd
; i++)

3531 
Di¡ÜtiÚ
 
uiTmpCo¡
;

3532 
uiTmpCo¡
 = 
	`xG‘Tem¶©eCo¡
Ð
pcCU
, 
uiP¬tAddr
, 
pcOrgYuv
, &
m_cYuvP»dTemp
, 
pcAMVPInfo
->
m_acMvCªd
[
i
], i, 
AMVP_MAX_NUM_CANDS
, 
eRefPicLi¡
, 
iRefIdx
, 
iRoiWidth
, 
iRoiHeight
);

3533 iàÐ
uiBe¡Co¡
 > 
uiTmpCo¡
 )

3535 
uiBe¡Co¡
 = 
uiTmpCo¡
;

3536 
cBe¡Mv
 = 
pcAMVPInfo
->
m_acMvCªd
[
i
];

3537 
iBe¡Idx
 = 
i
;

3538 (*
puiDi¡BiP
èð
uiTmpCo¡
;

3542 
m_cYuvP»dTemp
.
	`þ—r
();

3545 
rcMvP»d
 = 
cBe¡Mv
;

3546 
pcCU
->
	`£tMVPIdxSubP¬ts
Ð
iBe¡Idx
, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3547 
pcCU
->
	`£tMVPNumSubP¬ts
Ð
pcAMVPInfo
->
iN
, 
eRefPicLi¡
, 
uiP¬tAddr
, 
uiP¬tIdx
,…cCU->
	`g‘D•th
(uiPartAddr));

3549 
	}
}

3551 
UIÁ
 
	gTEncS—rch
::
	$xG‘MvpIdxB™s
(
IÁ
 
iIdx
, IÁ 
iNum
)

3553 
	`as£¹
(
iIdx
 >ð0 && 
iNum
 >= 0 && iIdx < iNum);

3555 ià(
iNum
 == 1)

3560 
UIÁ
 
uiL’gth
 = 1;

3561 
IÁ
 
iTemp
 = 
iIdx
;

3562 iàÐ
iTemp
 == 0 )

3564  
uiL’gth
;

3567 
BoÞ
 
bCodeLa¡
 = ( 
iNum
-1 > 
iTemp
 );

3569 
uiL’gth
 +ð(
iTemp
-1);

3571 ifÐ
bCodeLa¡
 )

3573 
uiL’gth
++;

3576  
uiL’gth
;

3577 
	}
}

3579 
Void
 
	gTEncS—rch
::
	$xG‘BlkB™s
Ð
P¬tSize
 
eCUMode
, 
BoÞ
 
bPSliû
, 
IÁ
 
iP¬tIdx
, 
UIÁ
 
uiLa¡Mode
, UIÁ 
uiBlkB™
[3])

3581 iàÐ
eCUMode
 =ð
SIZE_2Nx2N
 )

3583 
uiBlkB™
[0] = (! 
bPSliû
) ? 3 : 1;

3584 
uiBlkB™
[1] = 3;

3585 
uiBlkB™
[2] = 5;

3587 iàÐ(
eCUMode
 =ð
SIZE_2NxN
 ||ƒCUMod=ð
SIZE_2NxnU
è||ƒCUMod=ð
SIZE_2NxnD
 )

3589 
UIÁ
 
¯uiMbB™s
[2][3][3] = { { {0,0,3}, {0,0,0}, {0,0,0} } , { {5,7,7}, {7,5,7}, {9-3,9-3,9-3} } };

3590 iàÐ
bPSliû
 )

3592 
uiBlkB™
[0] = 3;

3593 
uiBlkB™
[1] = 0;

3594 
uiBlkB™
[2] = 0;

3598 ::
	`memýy
Ð
uiBlkB™
, 
¯uiMbB™s
[
iP¬tIdx
][
uiLa¡Mode
], 3*(
UIÁ
) );

3601 iàÐ(
eCUMode
 =ð
SIZE_Nx2N
 ||ƒCUMod=ð
SIZE_nLx2N
è||ƒCUMod=ð
SIZE_nRx2N
 )

3603 
UIÁ
 
¯uiMbB™s
[2][3][3] = { { {0,2,3}, {0,0,0}, {0,0,0} } , { {5,7,7}, {7-2,7-2,9-2}, {9-3,9-3,9-3} } };

3604 iàÐ
bPSliû
 )

3606 
uiBlkB™
[0] = 3;

3607 
uiBlkB™
[1] = 0;

3608 
uiBlkB™
[2] = 0;

3612 ::
	`memýy
Ð
uiBlkB™
, 
¯uiMbB™s
[
iP¬tIdx
][
uiLa¡Mode
], 3*(
UIÁ
) );

3615 iàÐ
eCUMode
 =ð
SIZE_NxN
 )

3617 
uiBlkB™
[0] = (! 
bPSliû
) ? 3 : 1;

3618 
uiBlkB™
[1] = 3;

3619 
uiBlkB™
[2] = 5;

3623 
	`´štf
("Wrong!\n");

3624 
	`as£¹
( 0 );

3626 
	}
}

3628 
Void
 
	gTEncS—rch
::
	$xCÝyAMVPInfo
 (
AMVPInfo
* 
pSrc
, AMVPInfo* 
pD¡
)

3630 
pD¡
->
iN
 = 
pSrc
->iN;

3631 
IÁ
 
i
 = 0; i < 
pSrc
->
iN
; i++)

3633 
pD¡
->
m_acMvCªd
[
i
] = 
pSrc
->m_acMvCand[i];

3635 
	}
}

3637 
Void
 
	gTEncS—rch
::
	$xCheckBe¡MVP
 ( 
TComD©aCU
* 
pcCU
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMv
 
cMv
, TComMv& 
rcMvP»d
, 
IÁ
& 
riMVPIdx
, 
UIÁ
& 
ruiB™s
, 
Di¡ÜtiÚ
& 
ruiCo¡
 )

3639 
AMVPInfo
* 
pcAMVPInfo
 = 
pcCU
->
	`g‘CUMvF›ld
(
eRefPicLi¡
)->
	`g‘AMVPInfo
();

3641 
	`as£¹
(
pcAMVPInfo
->
m_acMvCªd
[
riMVPIdx
] =ð
rcMvP»d
);

3643 ià(
pcAMVPInfo
->
iN
 < 2)

3648 
m_pcRdCo¡
->
	`£ËùMÙiÚLambda
Ð
Œue
, 0, 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(0) );

3649 
m_pcRdCo¡
->
	`£tCo¡SÿË
 ( 0 );

3651 
IÁ
 
iBe¡MVPIdx
 = 
riMVPIdx
;

3653 
m_pcRdCo¡
->
	`£tP»diùÜ
Ð
rcMvP»d
 );

3654 
IÁ
 
iOrgMvB™s
 = 
m_pcRdCo¡
->
	`g‘B™sOfVeùÜW™hP»diùÜ
(
cMv
.
	`g‘HÜ
(), cMv.
	`g‘V”
());

3655 
iOrgMvB™s
 +ð
m_auiMVPIdxCo¡
[
riMVPIdx
][
AMVP_MAX_NUM_CANDS
];

3656 
IÁ
 
iBe¡MvB™s
 = 
iOrgMvB™s
;

3658 #ià
MCTS_ENC_CHECK


3659 
IÁ
 
mšMVPCªd
 = 0;

3660 
IÁ
 
maxMVPCªd
 = 
pcAMVPInfo
->
iN
;

3662 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
(è&& 
pcCU
->
	`isLa¡CÞumnCTUInTže
())

3664 
mšMVPCªd
 = (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 == 0) ? 1 : 0;

3665 
maxMVPCªd
 = (
pcAMVPInfo
->
numS·tŸlMVPCªdid©es
 =ð0è?…cAMVPInfo->
iN
 : 1;

3667 
IÁ
 
iMVPIdx
 = 
mšMVPCªd
; iMVPIdx < 
maxMVPCªd
; iMVPIdx++)

3669 
IÁ
 
iMVPIdx
 = 0; iMVPIdx < 
pcAMVPInfo
->
iN
; iMVPIdx++)

3672 ià(
iMVPIdx
 =ð
riMVPIdx
)

3677 
m_pcRdCo¡
->
	`£tP»diùÜ
Ð
pcAMVPInfo
->
m_acMvCªd
[
iMVPIdx
] );

3679 
IÁ
 
iMvB™s
 = 
m_pcRdCo¡
->
	`g‘B™sOfVeùÜW™hP»diùÜ
(
cMv
.
	`g‘HÜ
(), cMv.
	`g‘V”
());

3680 
iMvB™s
 +ð
m_auiMVPIdxCo¡
[
iMVPIdx
][
AMVP_MAX_NUM_CANDS
];

3682 ià(
iMvB™s
 < 
iBe¡MvB™s
)

3684 
iBe¡MvB™s
 = 
iMvB™s
;

3685 
iBe¡MVPIdx
 = 
iMVPIdx
;

3689 ià(
iBe¡MVPIdx
 !ð
riMVPIdx
)

3691 
rcMvP»d
 = 
pcAMVPInfo
->
m_acMvCªd
[
iBe¡MVPIdx
];

3693 
riMVPIdx
 = 
iBe¡MVPIdx
;

3694 
UIÁ
 
uiOrgB™s
 = 
ruiB™s
;

3695 
ruiB™s
 = 
uiOrgB™s
 - 
iOrgMvB™s
 + 
iBe¡MvB™s
;

3696 
ruiCo¡
 = (ruiCo¡ - 
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiOrgB™s
 )è+ m_pcRdCo¡->g‘Co¡Ð
ruiB™s
 );

3698 
	}
}

3701 
Di¡ÜtiÚ
 
	gTEncS—rch
::
	$xG‘Tem¶©eCo¡
Ð
TComD©aCU
* 
pcCU
,

3702 
UIÁ
 
uiP¬tAddr
,

3703 
TComYuv
* 
pcOrgYuv
,

3704 
TComYuv
* 
pcTem¶©eCªd
,

3705 
TComMv
 
cMvCªd
,

3706 
IÁ
 
iMVPIdx
,

3707 
IÁ
 
iMVPNum
,

3708 
RefPicLi¡
 
eRefPicLi¡
,

3709 
IÁ
 
iRefIdx
,

3710 
IÁ
 
iSizeX
,

3711 
IÁ
 
iSizeY


3714 
Di¡ÜtiÚ
 
uiCo¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3716 
TComPicYuv
* 
pcPicYuvRef
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdx
 )->
	`g‘PicYuvRec
();

3718 
pcCU
->
	`þMv
Ð
cMvCªd
 );

3721 iàÐ
pcCU
->
	`g‘Sliû
()->
	`‹¡WeightP»d
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
()==
P_SLICE
 )

3723 
	`xP»dIÁ”Blk
Ð
COMPONENT_Y
, 
pcCU
, 
pcPicYuvRef
, 
uiP¬tAddr
, &
cMvCªd
, 
iSizeX
, 
iSizeY
, 
pcTem¶©eCªd
, 
Œue
,…cCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) );

3727 
	`xP»dIÁ”Blk
Ð
COMPONENT_Y
, 
pcCU
, 
pcPicYuvRef
, 
uiP¬tAddr
, &
cMvCªd
, 
iSizeX
, 
iSizeY
, 
pcTem¶©eCªd
, 
çl£
,…cCU->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) );

3730 iàÐ
pcCU
->
	`g‘Sliû
()->
	`‹¡WeightP»d
(è&&…cCU->g‘Sliû()->
	`g‘SliûTy³
()==
P_SLICE
 )

3732 
	`xWeigh‹dP»diùiÚUni
Ð
pcCU
, 
pcTem¶©eCªd
, 
uiP¬tAddr
, 
iSizeX
, 
iSizeY
, 
eRefPicLi¡
,…cTem¶©eCªd, 
iRefIdx
 );

3737 
uiCo¡
 = 
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
), 
pcTem¶©eCªd
->
	`g‘Addr
(
COMPONENT_Y
, 
uiP¬tAddr
),…cTem¶©eCªd->
	`g‘SŒide
(COMPONENT_Y), 
pcOrgYuv
->g‘Addr(COMPONENT_Y, uiP¬tAddr),…cOrgYuv->g‘SŒide(COMPONENT_Y), 
iSizeX
, 
iSizeY
, COMPONENT_Y, 
DF_SAD
 );

3738 
uiCo¡
 = (
UIÁ
è
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
m_auiMVPIdxCo¡
[
iMVPIdx
][
iMVPNum
], uiCo¡, 
DF_SAD
 );

3739  
uiCo¡
;

3740 
	}
}

3743 
Void
 
	gTEncS—rch
::
	$xMÙiÚE¡im©iÚ
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvOrg
, 
IÁ
 
iP¬tIdx
, 
RefPicLi¡
 
eRefPicLi¡
, 
TComMv
* 
pcMvP»d
, IÁ 
iRefIdxP»d
, TComMv& 
rcMv
, 
UIÁ
& 
ruiB™s
, 
Di¡ÜtiÚ
& 
ruiCo¡
, 
BoÞ
 
bBi
 )

3745 
UIÁ
 
uiP¬tAddr
;

3746 
IÁ
 
iRoiWidth
;

3747 
IÁ
 
iRoiHeight
;

3749 
TComMv
 
cMvH®f
, 
cMvQ‹r
;

3750 
TComMv
 
cMvSrchRngLT
;

3751 
TComMv
 
cMvSrchRngRB
;

3753 
TComYuv
* 
pcYuv
 = 
pcYuvOrg
;

3755 
	`as£¹
(
eRefPicLi¡
 < 
MAX_NUM_REF_LIST_ADAPT_SR
 && 
iRefIdxP»d
<
	`IÁ
(
MAX_IDX_ADAPT_SR
));

3756 
m_iS—rchRªge
 = 
m_¯iAd­tSR
[
eRefPicLi¡
][
iRefIdxP»d
];

3758 
IÁ
 
iSrchRng
 = ( 
bBi
 ? 
m_b»dS—rchRªge
 : 
m_iS—rchRªge
 );

3759 
TComP©‹º
 
cP©‹º
;

3761 
DoubË
 
fWeight
 = 1.0;

3763 
pcCU
->
	`g‘P¬tIndexAndSize
Ð
iP¬tIdx
, 
uiP¬tAddr
, 
iRoiWidth
, 
iRoiHeight
 );

3765 iàÐ
bBi
 )

3767 
TComYuv
* 
pcYuvOth”
 = &
m_acYuvP»d
[1-(
IÁ
)
eRefPicLi¡
];

3768 
pcYuv
 = &
m_cYuvP»dTemp
;

3770 
pcYuvOrg
->
	`cÝyP¬tToP¬tYuv
Ð
pcYuv
, 
uiP¬tAddr
, 
iRoiWidth
, 
iRoiHeight
 );

3772 
pcYuv
->
	`»moveHighF»q
Ð
pcYuvOth”
, 
uiP¬tAddr
, 
iRoiWidth
, 
iRoiHeight
, 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•ths
().
»cÚ
, 
m_pcEncCfg
->
	`g‘ClFÜBiP»dMeEÇbËd
() );

3774 
fWeight
 = 0.5;

3776 
m_cDi¡P¬am
.
bIsBiP»d
 = 
bBi
;

3779 #ià
MCTS_ENC_CHECK


3780 
IÁ
 
roiPosX
, 
roiPosY
;

3781 
IÁ
 
roiW
, 
roiH
;

3782 
pcCU
->
	`g‘P¬tPos™iÚ
(
iP¬tIdx
, 
roiPosX
, 
roiPosY
, 
roiW
, 
roiH
);

3783 
	`as£¹
(
roiW
 =ð
iRoiWidth
);

3784 
	`as£¹
(
roiH
 =ð
iRoiHeight
);

3785 
cP©‹º
.
	`š™P©‹º
Ð
pcYuv
->
	`g‘Addr
(
COMPONENT_Y
, 
uiP¬tAddr
),

3786 
iRoiWidth
,

3787 
iRoiHeight
,

3788 
pcYuv
->
	`g‘SŒide
(
COMPONENT_Y
),

3789 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
),

3790 
roiPosX
,

3791 
roiPosY
);

3792 
	`xIn™TžeBÜd”s
(
pcCU
, &
cP©‹º
);

3794 
cP©‹º
.
	`š™P©‹º
Ð
pcYuv
->
	`g‘Addr
 ( 
COMPONENT_Y
, 
uiP¬tAddr
 ),

3795 
iRoiWidth
,

3796 
iRoiHeight
,

3797 
pcYuv
->
	`g‘SŒide
(
COMPONENT_Y
),

3798 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) );

3801 
P–
* 
piRefY
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdxP»d
 )->
	`g‘PicYuvRec
()->
	`g‘Addr
Ð
COMPONENT_Y
,…cCU->
	`g‘CtuRsAddr
(),…cCU->
	`g‘ZÜd”IdxInCtu
(è+ 
uiP¬tAddr
 );

3802 
IÁ
 
iRefSŒide
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘RefPic
Ð
eRefPicLi¡
, 
iRefIdxP»d
 )->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
COMPONENT_Y
);

3804 
TComMv
 
cMvP»d
 = *
pcMvP»d
;

3806 iàÐ
bBi
 )

3808 #ià
MCTS_ENC_CHECK


3809 
	`xS‘S—rchRªge
(
pcCU
, 
rcMv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
, &
cP©‹º
);

3811 
	`xS‘S—rchRªge
(
pcCU
, 
rcMv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
);

3816 #ià
MCTS_ENC_CHECK


3817 
	`xS‘S—rchRªge
(
pcCU
, 
cMvP»d
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
, &
cP©‹º
);

3819 
	`xS‘S—rchRªge
(
pcCU
, 
cMvP»d
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
);

3823 
m_pcRdCo¡
->
	`£ËùMÙiÚLambda
Ð
Œue
, 0, 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiP¬tAddr
) );

3825 
m_pcRdCo¡
->
	`£tP»diùÜ
 ( *
pcMvP»d
 );

3826 
m_pcRdCo¡
->
	`£tCo¡SÿË
 ( 2 );

3828 
	`£tWpSÿlšgDi¡P¬am
Ð
pcCU
, 
iRefIdxP»d
, 
eRefPicLi¡
 );

3830 iàÐ(
m_mÙiÚE¡im©iÚS—rchM‘hod
==
MESEARCH_FULL
è|| 
bBi
 )

3832 
	`xP©‹ºS—rch
 ( &
cP©‹º
, 
piRefY
, 
iRefSŒide
, &
cMvSrchRngLT
, &
cMvSrchRngRB
, 
rcMv
, 
ruiCo¡
 );

3836 
rcMv
 = *
pcMvP»d
;

3837 cÚ¡ 
TComMv
 *
pIÁeg”Mv2Nx2NP»d
=0;

3838 ià(
pcCU
->
	`g‘P¬t™iÚSize
(0è!ð
SIZE_2Nx2N
 ||…cCU->
	`g‘D•th
(0) != 0)

3840 
pIÁeg”Mv2Nx2NP»d
 = &(
m_š‹g”Mv2Nx2N
[
eRefPicLi¡
][
iRefIdxP»d
]);

3842 
	`xP©‹ºS—rchFa¡
 ( 
pcCU
, &
cP©‹º
, 
piRefY
, 
iRefSŒide
, &
cMvSrchRngLT
, &
cMvSrchRngRB
, 
rcMv
, 
ruiCo¡
, 
pIÁeg”Mv2Nx2NP»d
 );

3843 ià(
pcCU
->
	`g‘P¬t™iÚSize
(0è=ð
SIZE_2Nx2N
)

3845 
m_š‹g”Mv2Nx2N
[
eRefPicLi¡
][
iRefIdxP»d
] = 
rcMv
;

3849 
m_pcRdCo¡
->
	`£ËùMÙiÚLambda
Ð
Œue
, 0, 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiP¬tAddr
) );

3850 
m_pcRdCo¡
->
	`£tCo¡SÿË
 ( 1 );

3852 cÚ¡ 
BoÞ
 
bIsLos¦essCoded
 = 
pcCU
->
	`g‘CUT¿nsquªtBy·ss
(
uiP¬tAddr
) != 0;

3853 
	`xP©‹ºS—rchF¿cDIF
Ð
bIsLos¦essCoded
, &
cP©‹º
, 
piRefY
, 
iRefSŒide
, &
rcMv
, 
cMvH®f
, 
cMvQ‹r
, 
ruiCo¡
 );

3855 
m_pcRdCo¡
->
	`£tCo¡SÿË
( 0 );

3856 
rcMv
 <<= 2;

3857 
rcMv
 +ð(
cMvH®f
 <<= 1);

3858 
rcMv
 +ð
cMvQ‹r
;

3860 
UIÁ
 
uiMvB™s
 = 
m_pcRdCo¡
->
	`g‘B™sOfVeùÜW™hP»diùÜ
Ð
rcMv
.
	`g‘HÜ
(),„cMv.
	`g‘V”
() );

3862 
ruiB™s
 +ð
uiMvB™s
;

3863 
ruiCo¡
 = (
Di¡ÜtiÚ
)Ð
	`æoÜ
Ð
fWeight
 * ( (
DoubË
ìuiCo¡ - (DoubË)
m_pcRdCo¡
->
	`g‘Co¡
Ð
uiMvB™s
 ) ) ) + (DoubË)m_pcRdCo¡->g‘Co¡Ð
ruiB™s
 ) );

3864 
	}
}

3866 #ià
MCTS_ENC_CHECK


3867 
Void
 
	gTEncS—rch
::
	$xIn™TžeBÜd”s
(cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
, 
TComP©‹º
* 
pcP©‹ºKey
)

3869 ià(
m_pcEncCfg
->
	`g‘TMCTSSEITžeCÚ¡¿št
())

3871 
UIÁ
 
tžeXPosInCtus
 = 0;

3872 
UIÁ
 
tžeYPosInCtus
 = 0;

3873 
UIÁ
 
tžeWidthtInCtus
 = 0;

3874 
UIÁ
 
tžeHeightInCtus
 = 0;

3876 
	`g‘TžePos™iÚ
(
pcCU
, 
tžeXPosInCtus
, 
tžeYPosInCtus
, 
tžeWidthtInCtus
, 
tžeHeightInCtus
);

3878 cÚ¡ 
IÁ
 
ùuL’gth
 = 
pcCU
->
	`g‘Pic
()->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘MaxCUWidth
();

3881 cÚ¡ 
IÁ
 
tžeLeáTÝP–PosX
 = 
ùuL’gth
 * 
tžeXPosInCtus
;

3882 cÚ¡ 
IÁ
 
tžeLeáTÝP–PosY
 = 
ùuL’gth
 * 
tžeYPosInCtus
;

3883 cÚ¡ 
IÁ
 
tžeRightBÙtomP–PosX
 = ((
tžeWidthtInCtus
 + 
tžeXPosInCtus
è* 
ùuL’gth
) - 1;

3884 cÚ¡ 
IÁ
 
tžeRightBÙtomP–PosY
 = ((
tžeHeightInCtus
 + 
tžeYPosInCtus
è* 
ùuL’gth
) - 1;

3886 
pcP©‹ºKey
->
	`£tTžeBÜd”s
 (
tžeLeáTÝP–PosX
,
tžeLeáTÝP–PosY
,
tžeRightBÙtomP–PosX
,
tžeRightBÙtomP–PosY
);

3888 
	}
}

3892 
Void
 
	gTEncS—rch
::
xS‘S—rchRªge
 ( cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
, cÚ¡ 
TComMv
& 
cMvP»d
, cÚ¡ 
IÁ
 
iSrchRng
,

3893 #ià
MCTS_ENC_CHECK


3894 
TComMv
& 
rcMvSrchRngLT
, TComMv& 
rcMvSrchRngRB
, cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
 )

3896 
	gTComMv
& 
	grcMvSrchRngLT
, TComMv& 
	grcMvSrchRngRB
 )

3899 
IÁ
 
	giMvShiá
 = 2;

3900 
TComMv
 
	gcTmpMvP»d
 = 
cMvP»d
;

3901 
	gpcCU
->
þMv
Ð
cTmpMvP»d
 );

3903 #ià
MCTS_ENC_CHECK


3904 ià(
	gm_pcEncCfg
->
g‘TMCTSSEITžeCÚ¡¿št
())

3906 cÚ¡ 
IÁ
 
	glRªgeXLeá
 = 
max
(
cTmpMvP»d
.
g‘HÜ
(è- (
iSrchRng
 << 
iMvShiá
), (
pcP©‹ºKey
->
g‘TžeLeáTÝP–PosX
(è-…cP©‹ºKey->
g‘ROIYPosX
()) << iMvShift);

3907 cÚ¡ 
IÁ
 
	glRªgeYTÝ
 = 
max
(
cTmpMvP»d
.
g‘V”
(è- (
iSrchRng
 << 
iMvShiá
), (
pcP©‹ºKey
->
g‘TžeLeáTÝP–PosY
(è-…cP©‹ºKey->
g‘ROIYPosY
()) << iMvShift);

3908 cÚ¡ 
IÁ
 
	glRªgeXRight
 = 
mš
(
cTmpMvP»d
.
g‘HÜ
(è+ (
iSrchRng
 << 
iMvShiá
), (
pcP©‹ºKey
->
g‘TžeRightBÙtomP–PosX
(è- (pcP©‹ºKey->
g‘ROIYPosX
(è+…cP©‹ºKey->
g‘ROIYWidth
())) << iMvShift);

3909 cÚ¡ 
IÁ
 
	glRªgeYBÙtom
 = 
mš
(
cTmpMvP»d
.
g‘V”
(è+ (
iSrchRng
 << 
iMvShiá
), (
pcP©‹ºKey
->
g‘TžeRightBÙtomP–PosY
(è- (pcP©‹ºKey->
g‘ROIYPosY
(è+…cP©‹ºKey->
g‘ROIYHeight
())) << iMvShift);

3911 
	grcMvSrchRngLT
.
£tHÜ
(
lRªgeXLeá
);

3912 
	grcMvSrchRngLT
.
£tV”
(
lRªgeYTÝ
);

3914 
	grcMvSrchRngRB
.
£tHÜ
(
lRªgeXRight
);

3915 
	grcMvSrchRngRB
.
£tV”
(
lRªgeYBÙtom
);

3919 
	grcMvSrchRngLT
.
£tHÜ
(
cTmpMvP»d
.
g‘HÜ
(è- (
iSrchRng
 << 
iMvShiá
));

3920 
	grcMvSrchRngLT
.
£tV”
(
cTmpMvP»d
.
g‘V”
(è- (
iSrchRng
 << 
iMvShiá
));

3922 
	grcMvSrchRngRB
.
£tHÜ
Ð
cTmpMvP»d
.
g‘HÜ
(è+ (
iSrchRng
 << 
iMvShiá
));

3923 
	grcMvSrchRngRB
.
£tV”
Ð
cTmpMvP»d
.
g‘V”
(è+ (
iSrchRng
 << 
iMvShiá
) );

3926 
	grcMvSrchRngLT
.
£tHÜ
Ð
cTmpMvP»d
.
g‘HÜ
(è- (
iSrchRng
 << 
iMvShiá
) );

3927 
	grcMvSrchRngLT
.
£tV”
Ð
cTmpMvP»d
.
g‘V”
(è- (
iSrchRng
 << 
iMvShiá
) );

3929 
	grcMvSrchRngRB
.
£tHÜ
Ð
cTmpMvP»d
.
g‘HÜ
(è+ (
iSrchRng
 << 
iMvShiá
));

3930 
	grcMvSrchRngRB
.
£tV”
Ð
cTmpMvP»d
.
g‘V”
(è+ (
iSrchRng
 << 
iMvShiá
) );

3933 
	gpcCU
->
þMv
 ( 
rcMvSrchRngLT
 );

3934 
	gpcCU
->
þMv
 ( 
rcMvSrchRngRB
 );

3936 #ià
ME_ENABLE_ROUNDING_OF_MVS


3937 
	grcMvSrchRngLT
.
divideByPow”Of2
(
iMvShiá
);

3938 
	grcMvSrchRngRB
.
divideByPow”Of2
(
iMvShiá
);

3940 
	grcMvSrchRngLT
 >>ð
iMvShiá
;

3941 
	grcMvSrchRngRB
 >>ð
iMvShiá
;

3946 
Void
 
	gTEncS—rch
::
	$xP©‹ºS—rch
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

3947 cÚ¡ 
P–
* 
piRefY
,

3948 cÚ¡ 
IÁ
 
iRefSŒide
,

3949 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

3950 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

3951 
TComMv
& 
rcMv
,

3952 
Di¡ÜtiÚ
& 
ruiSAD
 )

3954 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

3955 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

3956 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

3957 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

3959 
Di¡ÜtiÚ
 
uiSad
;

3960 
Di¡ÜtiÚ
 
uiSadBe¡
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
	`max
();

3961 
IÁ
 
iBe¡X
 = 0;

3962 
IÁ
 
iBe¡Y
 = 0;

3965 
m_pcRdCo¡
->
	`£tDi¡P¬am
Ð
pcP©‹ºKey
, 
piRefY
, 
iRefSŒide
, 
m_cDi¡P¬am
 );

3968 iàÐ
m_pcEncCfg
->
	`g‘Fa¡IÁ”S—rchMode
()==
FASTINTERSEARCH_MODE1
 || m_pcEncCfg->g‘Fa¡IÁ”S—rchMode()==
FASTINTERSEARCH_MODE3
 )

3970 iàÐ
m_cDi¡P¬am
.
iRows
 > 8 )

3972 
m_cDi¡P¬am
.
iSubShiá
 = 1;

3976 
piRefY
 +ð(
iSrchRngV”TÝ
 * 
iRefSŒide
);

3977  
IÁ
 
y
 = 
iSrchRngV”TÝ
; y <ð
iSrchRngV”BÙtom
; y++ )

3979  
IÁ
 
x
 = 
iSrchRngHÜLeá
; x <ð
iSrchRngHÜRight
; x++ )

3982 
m_cDi¡P¬am
.
pCur
 = 
piRefY
 + 
x
;

3984 
	`£tDi¡P¬amComp
(
COMPONENT_Y
);

3986 
m_cDi¡P¬am
.
b™D•th
 = 
pcP©‹ºKey
->
	`g‘B™D•thY
();

3987 
uiSad
 = 
m_cDi¡P¬am
.
	`Di¡Func
( &m_cDistParam );

3990 
uiSad
 +ð
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
Ð
x
, 
y
 );

3992 iàÐ
uiSad
 < 
uiSadBe¡
 )

3994 
uiSadBe¡
 = 
uiSad
;

3995 
iBe¡X
 = 
x
;

3996 
iBe¡Y
 = 
y
;

3997 
m_cDi¡P¬am
.
m_maximumDi¡ÜtiÚFÜE¬lyEx™
 = 
uiSad
;

4000 
piRefY
 +ð
iRefSŒide
;

4003 
rcMv
.
	`£t
Ð
iBe¡X
, 
iBe¡Y
 );

4005 
ruiSAD
 = 
uiSadBe¡
 - 
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
Ð
iBe¡X
, 
iBe¡Y
 );

4007 
	}
}

4010 
Void
 
	gTEncS—rch
::
	$xP©‹ºS—rchFa¡
ÐcÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

4011 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

4012 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

4013 cÚ¡ 
IÁ
 
iRefSŒide
,

4014 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

4015 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

4016 
TComMv
& 
rcMv
,

4017 
Di¡ÜtiÚ
& 
ruiSAD
,

4018 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d
 )

4020 
	`as£¹
 (
MD_LEFT
 < 
NUM_MV_PREDICTORS
);

4021 
pcCU
->
	`g‘MvP»dLeá
 ( 
m_acMvP»diùÜs
[
MD_LEFT
] );

4022 
	`as£¹
 (
MD_ABOVE
 < 
NUM_MV_PREDICTORS
);

4023 
pcCU
->
	`g‘MvP»dAbove
 ( 
m_acMvP»diùÜs
[
MD_ABOVE
] );

4024 
	`as£¹
 (
MD_ABOVE_RIGHT
 < 
NUM_MV_PREDICTORS
);

4025 
pcCU
->
	`g‘MvP»dAboveRight
 ( 
m_acMvP»diùÜs
[
MD_ABOVE_RIGHT
] );

4027  
m_mÙiÚE¡im©iÚS—rchM‘hod
 )

4029 
MESEARCH_DIAMOND
:

4030 
	`xTZS—rch
Ð
pcCU
, 
pcP©‹ºKey
, 
piRefY
, 
iRefSŒide
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
rcMv
, 
ruiSAD
, 
pIÁeg”Mv2Nx2NP»d
, 
çl£
 );

4033 
MESEARCH_SELECTIVE
:

4034 
	`xTZS—rchS–eùive
Ð
pcCU
, 
pcP©‹ºKey
, 
piRefY
, 
iRefSŒide
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
rcMv
, 
ruiSAD
, 
pIÁeg”Mv2Nx2NP»d
 );

4037 
MESEARCH_DIAMOND_ENHANCED
:

4038 
	`xTZS—rch
Ð
pcCU
, 
pcP©‹ºKey
, 
piRefY
, 
iRefSŒide
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
rcMv
, 
ruiSAD
, 
pIÁeg”Mv2Nx2NP»d
, 
Œue
 );

4041 
MESEARCH_FULL
:

4045 
	}
}

4048 
Void
 
	gTEncS—rch
::
	$xTZS—rch
ÐcÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

4049 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

4050 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

4051 cÚ¡ 
IÁ
 
iRefSŒide
,

4052 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

4053 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

4054 
TComMv
& 
rcMv
,

4055 
Di¡ÜtiÚ
& 
ruiSAD
,

4056 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d
,

4057 cÚ¡ 
BoÞ
 
bEx‹ndedS‘tšgs
)

4059 cÚ¡ 
BoÞ
 
bU£Ad­tiveRa¡”
 = 
bEx‹ndedS‘tšgs
;

4060 cÚ¡ 
IÁ
 
iRa¡”
 = 5;

4061 cÚ¡ 
BoÞ
 
bTe¡Oth”P»diùedMV
 = 
bEx‹ndedS‘tšgs
;

4062 cÚ¡ 
BoÞ
 
bTe¡Z”oVeùÜ
 = 
Œue
;

4063 cÚ¡ 
BoÞ
 
bTe¡Z”oVeùÜS¹
 = 
bEx‹ndedS‘tšgs
;

4064 cÚ¡ 
BoÞ
 
bTe¡Z”oVeùÜStÝ
 = 
çl£
;

4065 cÚ¡ 
BoÞ
 
bFœ¡S—rchDŸmÚd
 = 
Œue
;

4066 cÚ¡ 
BoÞ
 
bFœ¡CÜÃrsFÜDŸmÚdDi¡1
 = 
bEx‹ndedS‘tšgs
;

4067 cÚ¡ 
BoÞ
 
bFœ¡S—rchStÝ
 = 
m_pcEncCfg
->
	`g‘Fa¡MEAssumšgSmoÙh”MVEÇbËd
();

4068 cÚ¡ 
UIÁ
 
uiFœ¡S—rchRounds
 = 3;

4069 cÚ¡ 
BoÞ
 
bEÇbËRa¡”S—rch
 = 
Œue
;

4070 cÚ¡ 
BoÞ
 
bAlwaysRa¡”S—rch
 = 
bEx‹ndedS‘tšgs
;

4071 cÚ¡ 
BoÞ
 
bRa¡”Refšem’tEÇbË
 = 
çl£
;

4072 cÚ¡ 
BoÞ
 
bRa¡”Refšem’tDŸmÚd
 = 
çl£
;

4073 cÚ¡ 
BoÞ
 
bRa¡”Refšem’tCÜÃrsFÜDŸmÚdDi¡1
 = 
bEx‹ndedS‘tšgs
;

4074 cÚ¡ 
BoÞ
 
bSrRefšem’tEÇbË
 = 
Œue
;

4075 cÚ¡ 
BoÞ
 
bSrRefšem’tDŸmÚd
 = 
Œue
;

4076 cÚ¡ 
BoÞ
 
bSrRefšem’tCÜÃrsFÜDŸmÚdDi¡1
 = 
bEx‹ndedS‘tšgs
;

4077 cÚ¡ 
BoÞ
 
bSrRefšem’tStÝ
 = 
çl£
;

4078 cÚ¡ 
UIÁ
 
uiSrRefšem’tRounds
 = 2;

4079 cÚ¡ 
BoÞ
 
bNewZ”oNeighbourhoodTe¡
 = 
bEx‹ndedS‘tšgs
;

4081 
UIÁ
 
uiS—rchRªge
 = 
m_iS—rchRªge
;

4082 
pcCU
->
	`þMv
Ð
rcMv
 );

4083 #ià
ME_ENABLE_ROUNDING_OF_MVS


4084 
rcMv
.
	`divideByPow”Of2
(2);

4086 
rcMv
 >>= 2;

4089 
IÁTZS—rchSŒuù
 
cSŒuù
;

4090 
cSŒuù
.
iYSŒide
 = 
iRefSŒide
;

4091 
cSŒuù
.
piRefY
 =…iRefY;

4092 
cSŒuù
.
uiBe¡Sad
 = 
MAX_UINT
;

4095 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
rcMv
.
	`g‘HÜ
(),„cMv.
	`g‘V”
(), 0, 0 );

4098 iàÐ
bTe¡Oth”P»diùedMV
 )

4100  
UIÁ
 
šdex
 = 0; index < 
NUM_MV_PREDICTORS
; index++ )

4102 
TComMv
 
cMv
 = 
m_acMvP»diùÜs
[
šdex
];

4103 
pcCU
->
	`þMv
Ð
cMv
 );

4104 #ià
ME_ENABLE_ROUNDING_OF_MVS


4105 
cMv
.
	`divideByPow”Of2
(2);

4107 
cMv
 >>= 2;

4109 ià(
cMv
 !ð
rcMv
 && (cMv.
	`g‘HÜ
(è!ð
cSŒuù
.
iBe¡X
 && cMv.
	`g‘V”
(è!ðcSŒuù.
iBe¡Y
))

4112 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
cMv
.
	`g‘HÜ
(), cMv.
	`g‘V”
(), 0, 0 );

4118 iàÐ
bTe¡Z”oVeùÜ
 )

4120 ià((
rcMv
.
	`g‘HÜ
(è!ð0 ||„cMv.
	`g‘V”
() != 0) &&

4121 (0 !ð
cSŒuù
.
iBe¡X
 || 0 !ðcSŒuù.
iBe¡Y
))

4124 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 0, 0, 0, 0 );

4128 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

4129 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

4130 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

4131 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

4133 ià(
pIÁeg”Mv2Nx2NP»d
 != 0)

4135 
TComMv
 
š‹g”Mv2Nx2NP»d
 = *
pIÁeg”Mv2Nx2NP»d
;

4136 
š‹g”Mv2Nx2NP»d
 <<= 2;

4137 
pcCU
->
	`þMv
Ð
š‹g”Mv2Nx2NP»d
 );

4138 #ià
ME_ENABLE_ROUNDING_OF_MVS


4139 
š‹g”Mv2Nx2NP»d
.
	`divideByPow”Of2
(2);

4141 
š‹g”Mv2Nx2NP»d
 >>= 2;

4143 ià((
rcMv
 !ð
š‹g”Mv2Nx2NP»d
) &&

4144 (
š‹g”Mv2Nx2NP»d
.
	`g‘HÜ
(è!ð
cSŒuù
.
iBe¡X
 || iÁeg”Mv2Nx2NP»d.
	`g‘V”
(è!ðcSŒuù.
iBe¡Y
))

4147 
	`xTZS—rchH–p
(
pcP©‹ºKey
, 
cSŒuù
, 
š‹g”Mv2Nx2NP»d
.
	`g‘HÜ
(), iÁeg”Mv2Nx2NP»d.
	`g‘V”
(), 0, 0);

4151 
TComMv
 
cMvSrchRngLT
;

4152 
TComMv
 
cMvSrchRngRB
;

4153 
IÁ
 
iSrchRng
 = 
m_iS—rchRªge
;

4154 
TComMv
 
	`cu¼Be¡Mv
(
cSŒuù
.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4155 
cu¼Be¡Mv
 <<= 2;

4156 #ià
MCTS_ENC_CHECK


4157 
	`xS‘S—rchRªge
(
pcCU
, 
cu¼Be¡Mv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
, 
pcP©‹ºKey
);

4159 
	`xS‘S—rchRªge
(
pcCU
, 
cu¼Be¡Mv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
);

4161 
iSrchRngHÜLeá
 = 
cMvSrchRngLT
.
	`g‘HÜ
();

4162 
iSrchRngHÜRight
 = 
cMvSrchRngRB
.
	`g‘HÜ
();

4163 
iSrchRngV”TÝ
 = 
cMvSrchRngLT
.
	`g‘V”
();

4164 
iSrchRngV”BÙtom
 = 
cMvSrchRngRB
.
	`g‘V”
();

4168 
IÁ
 
iDi¡
 = 0;

4169 
IÁ
 
iS¹X
 = 
cSŒuù
.
iBe¡X
;

4170 
IÁ
 
iS¹Y
 = 
cSŒuù
.
iBe¡Y
;

4172 cÚ¡ 
BoÞ
 
bBe¡Cªdid©eZ”o
 = (
cSŒuù
.
iBe¡X
 =ð0è&& (cSŒuù.
iBe¡Y
 == 0);

4176  
iDi¡
 = 1; iDi¡ <ð(
IÁ
)
uiS—rchRªge
; iDist*=2 )

4178 iàÐ
bFœ¡S—rchDŸmÚd
 == 1 )

4180 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
, 
bFœ¡CÜÃrsFÜDŸmÚdDi¡1
 );

4184 
	`xTZ8PoštSqu¬eS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
 );

4187 iàÐ
bFœ¡S—rchStÝ
 && ( 
cSŒuù
.
uiBe¡Round
 >ð
uiFœ¡S—rchRounds
 ) )

4193 ià(!
bNewZ”oNeighbourhoodTe¡
)

4196 iàÐ
bTe¡Z”oVeùÜS¹
 && ((
cSŒuù
.
iBe¡X
 !ð0è|| (cSŒuù.
iBe¡Y
 != 0)) )

4198 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 0, 0, 0, 0 );

4199 iàÐ(
cSŒuù
.
iBe¡X
 =ð0è&& (cSŒuù.
iBe¡Y
 == 0) )

4202  
iDi¡
 = 1; iDi¡ <ð(
IÁ
)
uiS—rchRªge
; iDist*=2 )

4204 
	`xTZ8PoštDŸmÚdS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 0, 0, 
iDi¡
, 
çl£
 );

4205 iàÐ
bTe¡Z”oVeùÜStÝ
 && (
cSŒuù
.
uiBe¡Round
 > 0) )

4219 ià(
bTe¡Z”oVeùÜS¹
 =ð
Œue
 && 
bBe¡Cªdid©eZ”o
 !=rue)

4221  
iDi¡
 = 1; iDi¡ <ð((
IÁ
)
uiS—rchRªge
 >> 1); iDist*=2 )

4223 
	`xTZ8PoštDŸmÚdS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 0, 0, 
iDi¡
, 
çl£
 );

4224 iàÐ
bTe¡Z”oVeùÜStÝ
 && (
cSŒuù
.
uiBe¡Round
 > 2) )

4233 iàÐ
cSŒuù
.
uiBe¡Di¡ªû
 == 1 )

4235 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4236 
	`xTZ2PoštS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
 );

4240 ià(
bU£Ad­tiveRa¡”
)

4242 
IÁ
 
iWšdowSize
 = 
iRa¡”
;

4243 
IÁ
 
iSrchRngRa¡”Leá
 = 
iSrchRngHÜLeá
;

4244 
IÁ
 
iSrchRngRa¡”Right
 = 
iSrchRngHÜRight
;

4245 
IÁ
 
iSrchRngRa¡”TÝ
 = 
iSrchRngV”TÝ
;

4246 
IÁ
 
iSrchRngRa¡”BÙtom
 = 
iSrchRngV”BÙtom
;

4248 ià(!(
bEÇbËRa¡”S—rch
 && ( ((
IÁ
)(
cSŒuù
.
uiBe¡Di¡ªû
è> 
iRa¡”
))))

4250 
iWšdowSize
 ++;

4251 
iSrchRngRa¡”Leá
 /= 2;

4252 
iSrchRngRa¡”Right
 /= 2;

4253 
iSrchRngRa¡”TÝ
 /= 2;

4254 
iSrchRngRa¡”BÙtom
 /= 2;

4256 
cSŒuù
.
uiBe¡Di¡ªû
 = 
iWšdowSize
;

4257  
iS¹Y
 = 
iSrchRngRa¡”TÝ
; iS¹Y <ð
iSrchRngRa¡”BÙtom
; iS¹Y +ð
iWšdowSize
 )

4259  
iS¹X
 = 
iSrchRngRa¡”Leá
; iS¹X <ð
iSrchRngRa¡”Right
; iS¹X +ð
iWšdowSize
 )

4261 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
iS¹X
, 
iS¹Y
, 0, 
iWšdowSize
 );

4267 iàÐ
bEÇbËRa¡”S—rch
 && ( ((
IÁ
)(
cSŒuù
.
uiBe¡Di¡ªû
è> 
iRa¡”
è|| 
bAlwaysRa¡”S—rch
 ) )

4269 
cSŒuù
.
uiBe¡Di¡ªû
 = 
iRa¡”
;

4270  
iS¹Y
 = 
iSrchRngV”TÝ
; iS¹Y <ð
iSrchRngV”BÙtom
; iS¹Y +ð
iRa¡”
 )

4272  
iS¹X
 = 
iSrchRngHÜLeá
; iS¹X <ð
iSrchRngHÜRight
; iS¹X +ð
iRa¡”
 )

4274 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
iS¹X
, 
iS¹Y
, 0, 
iRa¡”
 );

4282 iàÐ
bRa¡”Refšem’tEÇbË
 && 
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4284  
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4286 
iS¹X
 = 
cSŒuù
.
iBe¡X
;

4287 
iS¹Y
 = 
cSŒuù
.
iBe¡Y
;

4288 iàÐ
cSŒuù
.
uiBe¡Di¡ªû
 > 1 )

4290 
iDi¡
 = 
cSŒuù
.
uiBe¡Di¡ªû
 >>= 1;

4291 iàÐ
bRa¡”Refšem’tDŸmÚd
 == 1 )

4293 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
, 
bRa¡”Refšem’tCÜÃrsFÜDŸmÚdDi¡1
 );

4297 
	`xTZ8PoštSqu¬eS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
 );

4302 iàÐ
cSŒuù
.
uiBe¡Di¡ªû
 == 1 )

4304 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4305 iàÐ
cSŒuù
.
ucPoštNr
 != 0 )

4307 
	`xTZ2PoštS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
 );

4314 iàÐ
bSrRefšem’tEÇbË
 && 
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4316  
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4318 
iS¹X
 = 
cSŒuù
.
iBe¡X
;

4319 
iS¹Y
 = 
cSŒuù
.
iBe¡Y
;

4320 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4321 
cSŒuù
.
ucPoštNr
 = 0;

4322  
iDi¡
 = 1; iDi¡ < (
IÁ
)
uiS—rchRªge
 + 1; iDist*=2 )

4324 iàÐ
bSrRefšem’tDŸmÚd
 == 1 )

4326 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
, 
bSrRefšem’tCÜÃrsFÜDŸmÚdDi¡1
 );

4330 
	`xTZ8PoštSqu¬eS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
 );

4332 iàÐ
bSrRefšem’tStÝ
 && (
cSŒuù
.
uiBe¡Round
 >ð
uiSrRefšem’tRounds
) )

4339 iàÐ
cSŒuù
.
uiBe¡Di¡ªû
 == 1 )

4341 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4342 iàÐ
cSŒuù
.
ucPoštNr
 != 0 )

4344 
	`xTZ2PoštS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
 );

4351 
rcMv
.
	`£t
Ð
cSŒuù
.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4352 
ruiSAD
 = 
cSŒuù
.
uiBe¡Sad
 - 
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
ÐcSŒuù.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4353 
	}
}

4356 
Void
 
	gTEncS—rch
::
	$xTZS—rchS–eùive
ÐcÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

4357 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

4358 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

4359 cÚ¡ 
IÁ
 
iRefSŒide
,

4360 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

4361 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

4362 
TComMv
 &
rcMv
,

4363 
Di¡ÜtiÚ
 &
ruiSAD
,

4364 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d
 )

4366 cÚ¡ 
BoÞ
 
bTe¡Oth”P»diùedMV
 = 
Œue
;

4367 cÚ¡ 
BoÞ
 
bTe¡Z”oVeùÜ
 = 
Œue
;

4368 cÚ¡ 
BoÞ
 
bEÇbËRa¡”S—rch
 = 
Œue
;

4369 cÚ¡ 
BoÞ
 
bAlwaysRa¡”S—rch
 = 
çl£
;

4370 cÚ¡ 
BoÞ
 
bSrRefšem’tEÇbË
 = 
Œue
;

4371 cÚ¡ 
BoÞ
 
bSrRefšem’tDŸmÚd
 = 
Œue
;

4372 cÚ¡ 
BoÞ
 
bSrRefšem’tStÝ
 = 
çl£
;

4373 cÚ¡ 
UIÁ
 
uiSrRefšem’tRounds
 = 2;

4374 cÚ¡ 
UIÁ
 
uiS—rchRªge
 = 
m_iS—rchRªge
;

4375 cÚ¡ 
IÁ
 
uiS—rchRªgeIn™Ÿl
 = 
m_iS—rchRªge
 >> 2;

4376 cÚ¡ 
IÁ
 
uiS—rchS‹p
 = 4;

4377 cÚ¡ 
IÁ
 
iMVDi¡Th»sh
 = 8;

4379 
IÁ
 
iSrchRngHÜLeá
 = 
pcMvSrchRngLT
->
	`g‘HÜ
();

4380 
IÁ
 
iSrchRngHÜRight
 = 
pcMvSrchRngRB
->
	`g‘HÜ
();

4381 
IÁ
 
iSrchRngV”TÝ
 = 
pcMvSrchRngLT
->
	`g‘V”
();

4382 
IÁ
 
iSrchRngV”BÙtom
 = 
pcMvSrchRngRB
->
	`g‘V”
();

4383 
IÁ
 
iFœ¡SrchRngHÜLeá
 = 0;

4384 
IÁ
 
iFœ¡SrchRngHÜRight
 = 0;

4385 
IÁ
 
iFœ¡SrchRngV”TÝ
 = 0;

4386 
IÁ
 
iFœ¡SrchRngV”BÙtom
 = 0;

4387 
IÁ
 
iS¹X
 = 0;

4388 
IÁ
 
iS¹Y
 = 0;

4389 
IÁ
 
iBe¡X
 = 0;

4390 
IÁ
 
iBe¡Y
 = 0;

4391 
IÁ
 
iDi¡
 = 0;

4393 
pcCU
->
	`þMv
Ð
rcMv
 );

4394 #ià
ME_ENABLE_ROUNDING_OF_MVS


4395 
rcMv
.
	`divideByPow”Of2
(2);

4397 
rcMv
 >>= 2;

4400 
IÁTZS—rchSŒuù
 
cSŒuù
;

4401 
cSŒuù
.
iYSŒide
 = 
iRefSŒide
;

4402 
cSŒuù
.
piRefY
 =…iRefY;

4403 
cSŒuù
.
uiBe¡Sad
 = 
MAX_UINT
;

4404 
cSŒuù
.
iBe¡X
 = 0;

4405 
cSŒuù
.
iBe¡Y
 = 0;

4409 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
rcMv
.
	`g‘HÜ
(),„cMv.
	`g‘V”
(), 0, 0 );

4412 iàÐ
bTe¡Oth”P»diùedMV
 )

4414  
UIÁ
 
šdex
 = 0; index < 
NUM_MV_PREDICTORS
; index++ )

4416 
TComMv
 
cMv
 = 
m_acMvP»diùÜs
[
šdex
];

4417 
pcCU
->
	`þMv
Ð
cMv
 );

4418 #ià
ME_ENABLE_ROUNDING_OF_MVS


4419 
cMv
.
	`divideByPow”Of2
(2);

4421 
cMv
 >>= 2;

4423 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
cMv
.
	`g‘HÜ
(), cMv.
	`g‘V”
(), 0, 0 );

4428 iàÐ
bTe¡Z”oVeùÜ
 )

4430 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 0, 0, 0, 0 );

4433 iàÐ
pIÁeg”Mv2Nx2NP»d
 != 0 )

4435 
TComMv
 
š‹g”Mv2Nx2NP»d
 = *
pIÁeg”Mv2Nx2NP»d
;

4436 
š‹g”Mv2Nx2NP»d
 <<= 2;

4437 
pcCU
->
	`þMv
Ð
š‹g”Mv2Nx2NP»d
 );

4438 #ià
ME_ENABLE_ROUNDING_OF_MVS


4439 
š‹g”Mv2Nx2NP»d
.
	`divideByPow”Of2
(2);

4441 
š‹g”Mv2Nx2NP»d
 >>= 2;

4443 
	`xTZS—rchH–p
(
pcP©‹ºKey
, 
cSŒuù
, 
š‹g”Mv2Nx2NP»d
.
	`g‘HÜ
(), iÁeg”Mv2Nx2NP»d.
	`g‘V”
(), 0, 0);

4446 
TComMv
 
cMvSrchRngLT
;

4447 
TComMv
 
cMvSrchRngRB
;

4448 
IÁ
 
iSrchRng
 = 
m_iS—rchRªge
;

4449 
TComMv
 
	`cu¼Be¡Mv
(
cSŒuù
.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4450 
cu¼Be¡Mv
 <<= 2;

4451 #ià
MCTS_ENC_CHECK


4452 
	`xS‘S—rchRªge
(
pcCU
, 
cu¼Be¡Mv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
, 
pcP©‹ºKey
);

4454 
	`xS‘S—rchRªge
(
pcCU
, 
cu¼Be¡Mv
, 
iSrchRng
, 
cMvSrchRngLT
, 
cMvSrchRngRB
);

4456 
iSrchRngHÜLeá
 = 
cMvSrchRngLT
.
	`g‘HÜ
();

4457 
iSrchRngHÜRight
 = 
cMvSrchRngRB
.
	`g‘HÜ
();

4458 
iSrchRngV”TÝ
 = 
cMvSrchRngLT
.
	`g‘V”
();

4459 
iSrchRngV”BÙtom
 = 
cMvSrchRngRB
.
	`g‘V”
();

4463 
iBe¡X
 = 
cSŒuù
.iBestX;

4464 
iBe¡Y
 = 
cSŒuù
.iBestY;

4465 
iFœ¡SrchRngHÜLeá
 = ((
iBe¡X
 - 
uiS—rchRªgeIn™Ÿl
è> 
iSrchRngHÜLeá
) ? (iBestX - uiSearchRangeInitial) : iSrchRngHorLeft;

4466 
iFœ¡SrchRngV”TÝ
 = ((
iBe¡Y
 - 
uiS—rchRªgeIn™Ÿl
è> 
iSrchRngV”TÝ
) ? (iBestY - uiSearchRangeInitial) : iSrchRngVerTop;

4467 
iFœ¡SrchRngHÜRight
 = ((
iBe¡X
 + 
uiS—rchRªgeIn™Ÿl
è< 
iSrchRngHÜRight
) ? (iBestX + uiSearchRangeInitial) : iSrchRngHorRight;

4468 
iFœ¡SrchRngV”BÙtom
 = ((
iBe¡Y
 + 
uiS—rchRªgeIn™Ÿl
è< 
iSrchRngV”BÙtom
) ? (iBestY + uiSearchRangeInitial) : iSrchRngVerBottom;

4470  
iS¹Y
 = 
iFœ¡SrchRngV”TÝ
; iS¹Y <ð
iFœ¡SrchRngV”BÙtom
; iS¹Y +ð
uiS—rchS‹p
 )

4472  
iS¹X
 = 
iFœ¡SrchRngHÜLeá
; iS¹X <ð
iFœ¡SrchRngHÜRight
; iS¹X +ð
uiS—rchS‹p
 )

4474 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
iS¹X
, 
iS¹Y
, 0, 0 );

4475 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 1, 
çl£
 );

4476 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 2, 
çl£
 );

4480 
IÁ
 
iMaxMVDi¡ToP»d
 = (
	`abs
(
cSŒuù
.
iBe¡X
 - iBe¡Xè> 
iMVDi¡Th»sh
 ||‡bs(cSŒuù.
iBe¡Y
 - iBestY) > iMVDistThresh);

4483 iàÐ
bEÇbËRa¡”S—rch
 && (
iMaxMVDi¡ToP»d
 || 
bAlwaysRa¡”S—rch
) )

4485  
iS¹Y
 = 
iSrchRngV”TÝ
; iS¹Y <ð
iSrchRngV”BÙtom
; iStartY += 1 )

4487  
iS¹X
 = 
iSrchRngHÜLeá
; iS¹X <ð
iSrchRngHÜRight
; iStartX += 1 )

4489 
	`xTZS—rchH–p
Ð
pcP©‹ºKey
, 
cSŒuù
, 
iS¹X
, 
iS¹Y
, 0, 1 );

4494 iàÐ
bSrRefšem’tEÇbË
 && 
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4497  
cSŒuù
.
uiBe¡Di¡ªû
 > 0 )

4499 
iS¹X
 = 
cSŒuù
.
iBe¡X
;

4500 
iS¹Y
 = 
cSŒuù
.
iBe¡Y
;

4501 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4502 
cSŒuù
.
ucPoštNr
 = 0;

4503  
iDi¡
 = 1; iDi¡ < (
IÁ
)
uiS—rchRªge
 + 1; iDist*=2 )

4505 iàÐ
bSrRefšem’tDŸmÚd
 == 1 )

4507 
	`xTZ8PoštDŸmÚdS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
, 
çl£
 );

4511 
	`xTZ8PoštSqu¬eS—rch
 ( 
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
, 
iS¹X
, 
iS¹Y
, 
iDi¡
 );

4513 iàÐ
bSrRefšem’tStÝ
 && (
cSŒuù
.
uiBe¡Round
 >ð
uiSrRefšem’tRounds
) )

4520 iàÐ
cSŒuù
.
uiBe¡Di¡ªû
 == 1 )

4522 
cSŒuù
.
uiBe¡Di¡ªû
 = 0;

4523 iàÐ
cSŒuù
.
ucPoštNr
 != 0 )

4525 
	`xTZ2PoštS—rch
Ð
pcP©‹ºKey
, 
cSŒuù
, 
pcMvSrchRngLT
, 
pcMvSrchRngRB
 );

4532 
rcMv
.
	`£t
Ð
cSŒuù
.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4533 
ruiSAD
 = 
cSŒuù
.
uiBe¡Sad
 - 
m_pcRdCo¡
->
	`g‘Co¡OfVeùÜW™hP»diùÜ
ÐcSŒuù.
iBe¡X
, cSŒuù.
iBe¡Y
 );

4535 
	}
}

4538 
Void
 
	gTEncS—rch
::
	$xP©‹ºS—rchF¿cDIF
(

4539 
BoÞ
 
bIsLos¦essCoded
,

4540 
TComP©‹º
* 
pcP©‹ºKey
,

4541 
P–
* 
piRefY
,

4542 
IÁ
 
iRefSŒide
,

4543 
TComMv
* 
pcMvIÁ
,

4544 
TComMv
& 
rcMvH®f
,

4545 
TComMv
& 
rcMvQ‹r
,

4546 
Di¡ÜtiÚ
& 
ruiCo¡


4550 
TComP©‹º
 
cP©‹ºRoi
;

4551 
IÁ
 
iOff£t
 = 
pcMvIÁ
->
	`g‘HÜ
(è+…cMvIÁ->
	`g‘V”
(è* 
iRefSŒide
;

4552 
cP©‹ºRoi
.
	`š™P©‹º
(
piRefY
 + 
iOff£t
,

4553 
pcP©‹ºKey
->
	`g‘ROIYWidth
(),

4554 
pcP©‹ºKey
->
	`g‘ROIYHeight
(),

4555 
iRefSŒide
,

4556 #ià
MCTS_ENC_CHECK


4557 
pcP©‹ºKey
->
	`g‘B™D•thY
(),

4558 
pcP©‹ºKey
->
	`g‘ROIYPosX
(),

4559 
pcP©‹ºKey
->
	`g‘ROIYPosY
());

4561 
pcP©‹ºKey
->
	`g‘B™D•thY
());

4563 #ià
MCTS_ENC_CHECK


4564 
cP©‹ºRoi
.
	`£tTžeBÜd”s
(
pcP©‹ºKey
->
	`g‘TžeLeáTÝP–PosX
(),…cP©‹ºKey->
	`g‘TžeLeáTÝP–PosY
(),…cP©‹ºKey->
	`g‘TžeRightBÙtomP–PosX
(),…cP©‹ºKey->
	`g‘TžeRightBÙtomP–PosY
());

4568 
	`xExtDIFUpSam¶šgH
 ( &
cP©‹ºRoi
 );

4570 
rcMvH®f
 = *
pcMvIÁ
;„cMvHalf <<= 1;

4571 
TComMv
 
	`ba£RefMv
(0, 0);

4572 
ruiCo¡
 = 
	`xP©‹ºRefšem’t
Ð
pcP©‹ºKey
, 
ba£RefMv
, 2, 
rcMvH®f
, !
bIsLos¦essCoded
 );

4574 
m_pcRdCo¡
->
	`£tCo¡SÿË
( 0 );

4576 
	`xExtDIFUpSam¶šgQ
 ( &
cP©‹ºRoi
, 
rcMvH®f
 );

4577 
ba£RefMv
 = 
rcMvH®f
;

4578 
ba£RefMv
 <<= 1;

4580 
rcMvQ‹r
 = *
pcMvIÁ
;„cMvQter <<= 1;

4581 
rcMvQ‹r
 +ð
rcMvH®f
;„cMvQter <<= 1;

4582 
ruiCo¡
 = 
	`xP©‹ºRefšem’t
Ð
pcP©‹ºKey
, 
ba£RefMv
, 1, 
rcMvQ‹r
, !
bIsLos¦essCoded
 );

4583 
	}
}

4587 
Void
 
	gTEncS—rch
::
’codeResAndC®cRdIÁ”CU
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvOrg
, TComYuv* 
pcYuvP»d
,

4588 
TComYuv
* 
pcYuvResi
, TComYuv* 
pcYuvResiBe¡
, TComYuv* 
pcYuvRec
,

4589 
BoÞ
 
bSkResidu®
 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
) )

4591 
	`as£¹
 ( !
pcCU
->
	`isIÁ¿
(0) );

4593 cÚ¡ 
UIÁ
 
cuWidthPix–s
 = 
pcCU
->
	`g‘Width
 ( 0 );

4594 cÚ¡ 
UIÁ
 
cuHeightPix–s
 = 
pcCU
->
	`g‘Height
( 0 );

4595 cÚ¡ 
IÁ
 
numV®idCompÚ’ts
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

4596 cÚ¡ 
TComSPS
 &
¥s
=*(
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
());

4601 iàÐ
bSkResidu®
 )

4603 
pcCU
->
	`£tSkFÏgSubP¬ts
Ð
Œue
, 0,…cCU->
	`g‘D•th
(0) );

4605 
pcYuvResi
->
	`þ—r
();

4607 
pcYuvP»d
->
	`cÝyToP¬tYuv
Ð
pcYuvRec
, 0 );

4608 
Di¡ÜtiÚ
 
di¡ÜtiÚ
 = 0;

4610 
IÁ
 
comp
=0; com°< 
numV®idCompÚ’ts
; comp++)

4612 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

4613 cÚ¡ 
UIÁ
 
csx
=
pcYuvOrg
->
	`g‘CompÚ’tSÿËX
(
compID
);

4614 cÚ¡ 
UIÁ
 
csy
=
pcYuvOrg
->
	`g‘CompÚ’tSÿËY
(
compID
);

4615 
di¡ÜtiÚ
 +ð
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
)), 
pcYuvRec
->
	`g‘Addr
(compID),…cYuvRec->
	`g‘SŒide
(compID), 
pcYuvOrg
->getAddr(compID),

4616 
pcYuvOrg
->
	`g‘SŒide
(
compID
), 
cuWidthPix–s
 >> 
csx
, 
cuHeightPix–s
 >> 
csy
, compID);

4619 
m_pcRDGoOnSbacCod”
->
	`lßd
(
m_µpcRDSbacCod”
[
pcCU
->
	`g‘D•th
(0)][
CI_CURR_BEST
]);

4620 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

4622 ià(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

4624 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
(
pcCU
, 0, 
Œue
);

4627 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
(
pcCU
, 0, 
Œue
);

4628 
m_pcEÁrÝyCod”
->
	`’codeM”geIndex
Ð
pcCU
, 0, 
Œue
 );

4630 
UIÁ
 
uiB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

4631 
pcCU
->
	`g‘TÙ®B™s
(èð
uiB™s
;

4632 
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
(èð
di¡ÜtiÚ
;

4633 
pcCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiB™s
, 
di¡ÜtiÚ
 );

4635 
m_pcRDGoOnSbacCod”
->
	`¡Üe
(
m_µpcRDSbacCod”
[
pcCU
->
	`g‘D•th
(0)][
CI_TEMP_BEST
]);

4637 #ià
DEBUG_STRING


4638 
pcYuvResiBe¡
->
	`þ—r
();

4639 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
+1; i++)

4641 
sDebug
+=
debug_»Üd”_d©a_š‹r_tok’
[
i
];

4650 
pcYuvResi
->
	`subŒaù
Ð
pcYuvOrg
, 
pcYuvP»d
, 0, 
cuWidthPix–s
 );

4652 
TComTURecur£
 
	`tuLev–0
(
pcCU
, 0);

4654 
DoubË
 
nÚZ”oCo¡
 = 0;

4655 
UIÁ
 
nÚZ”oB™s
 = 0;

4656 
Di¡ÜtiÚ
 
nÚZ”oDi¡ÜtiÚ
 = 0;

4657 
Di¡ÜtiÚ
 
z”oDi¡ÜtiÚ
 = 0;

4659 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
pcCU
->
	`g‘D•th
Ð0 ) ][ 
CI_CURR_BEST
 ] );

4661 
	`xE¡im©eIÁ”Residu®QT
Ð
pcYuvResi
, 
nÚZ”oCo¡
, 
nÚZ”oB™s
, 
nÚZ”oDi¡ÜtiÚ
, &
z”oDi¡ÜtiÚ
, 
tuLev–0
 
	`DEBUG_STRING_PASS_INTO
(
sDebug
) );

4668 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

4669 
m_pcEÁrÝyCod”
->
	`’codeQtRoÙCbfZ”o
( );

4670 cÚ¡ 
UIÁ
 
z”oResiB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

4671 cÚ¡ 
DoubË
 
z”oCo¡
 = (
pcCU
->
	`isLos¦essCoded
Ð0 )è? (
nÚZ”oCo¡
+1è: (
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
z”oResiB™s
, 
z”oDi¡ÜtiÚ
 ));

4673 iàÐ
z”oCo¡
 < 
nÚZ”oCo¡
 || !
pcCU
->
	`g‘QtRoÙCbf
(0) )

4675 cÚ¡ 
UIÁ
 
uiQP¬tNum
 = 
tuLev–0
.
	`G‘AbsP¬tIdxNumP¬ts
();

4676 ::
	`mem£t
Ð
pcCU
->
	`g‘T¿nsfÜmIdx
(è, 0, 
uiQP¬tNum
 * (
UCh¬
) );

4677 
IÁ
 
comp
=0; com°< 
numV®idCompÚ’ts
; comp++)

4679 cÚ¡ 
CompÚ’tID
 
compÚ’t
 = 
	`CompÚ’tID
(
comp
);

4680 ::
	`mem£t
Ð
pcCU
->
	`g‘Cbf
Ð
compÚ’t
 ) , 0, 
uiQP¬tNum
 * (
UCh¬
) );

4681 ::
	`mem£t
Ð
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
compÚ’t
), 0, ( 
uiQP¬tNum
 * (
SCh¬
) ) );

4683 cÚ¡ 
UIÁ
 
u£TS
[
MAX_NUM_COMPONENT
]={0,0,0};

4684 
pcCU
->
	`£tT¿nsfÜmSkSubP¬ts
 ( 
u£TS
, 0,…cCU->
	`g‘D•th
(0) );

4685 #ià
DEBUG_STRING


4686 
sDebug
.
	`þ—r
();

4687 
UIÁ
 
i
=0; i<
MAX_NUM_COMPONENT
+1; i++)

4689 
sDebug
+=
debug_»Üd”_d©a_š‹r_tok’
[
i
];

4695 
	`xS‘IÁ”Residu®QTD©a
Ð
NULL
, 
çl£
, 
tuLev–0
);

4699 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[
pcCU
->
	`g‘D•th
(0)][
CI_CURR_BEST
] );

4701 
UIÁ
 
fš®B™s
 = 0;

4702 
	`xAddSymbÞB™sIÁ”
Ð
pcCU
, 
fš®B™s
 );

4705 iàÐ!
pcCU
->
	`g‘QtRoÙCbf
( 0 ) )

4707 
pcYuvResiBe¡
->
	`þ—r
();

4711 
	`xS‘IÁ”Residu®QTD©a
Ð
pcYuvResiBe¡
, 
Œue
, 
tuLev–0
 );

4713 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
pcCU
->
	`g‘D•th
Ð0 ) ][ 
CI_TEMP_BEST
 ] );

4715 
pcYuvRec
->
	`addCl
 ( 
pcYuvP»d
, 
pcYuvResiBe¡
, 0, 
cuWidthPix–s
, 
¥s
.
	`g‘B™D•ths
() );

4719 
Di¡ÜtiÚ
 
fš®Di¡ÜtiÚ
 = 0;

4720 
IÁ
 
comp
=0; comp<
numV®idCompÚ’ts
; comp++)

4722 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

4723 
fš®Di¡ÜtiÚ
 +ð
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
¥s
.
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
)), 
pcYuvRec
->
	`g‘Addr
(compID ),…cYuvRec->
	`g‘SŒide
(compID ), 
pcYuvOrg
->g‘Addr(compID ),…cYuvOrg->g‘SŒide(compID), 
cuWidthPix–s
 >>…cYuvOrg->
	`g‘CompÚ’tSÿËX
(compID), 
cuHeightPix–s
 >>…cYuvOrg->
	`g‘CompÚ’tSÿËY
(compID), compID);

4726 
pcCU
->
	`g‘TÙ®B™s
(èð
fš®B™s
;

4727 
pcCU
->
	`g‘TÙ®Di¡ÜtiÚ
(èð
fš®Di¡ÜtiÚ
;

4728 
pcCU
->
	`g‘TÙ®Co¡
(èð
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
fš®B™s
, 
fš®Di¡ÜtiÚ
 );

4729 
	}
}

4733 
Void
 
	gTEncS—rch
::
xE¡im©eIÁ”Residu®QT
Ð
TComYuv
 *
pcResi
,

4734 
DoubË
 &
rdCo¡
,

4735 
UIÁ
 &
ruiB™s
,

4736 
Di¡ÜtiÚ
 &
ruiDi¡
,

4737 
Di¡ÜtiÚ
 *
puiZ”oDi¡
,

4738 
TComTU
 &
rTu


4739 
	$DEBUG_STRING_FN_DECLARE
(
sDebug
) )

4741 
TComD©aCU
 *
pcCU
 = 
rTu
.
	`g‘CU
();

4742 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
 = 
rTu
.
	`G‘AbsP¬tIdxTU
();

4743 cÚ¡ 
UIÁ
 
uiD•th
 = 
rTu
.
	`G‘T¿nsfÜmD•thTÙ®
();

4744 cÚ¡ 
UIÁ
 
uiTrMode
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

4745 cÚ¡ 
UIÁ
 
subTUD•th
 = 
uiTrMode
 + 1;

4746 cÚ¡ 
UIÁ
 
numV®idComp
 = 
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
();

4747 
	`DEBUG_STRING_NEW
(
sSšgËSŒšgComp
[
MAX_NUM_COMPONENT
])

4749 
	`as£¹
Ð
pcCU
->
	`g‘D•th
Ð0 ) =ðpcCU->g‘D•thÐ
uiAbsP¬tIdx
 ) );

4750 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

4752 
UIÁ
 
S¶™FÏg
 = ((
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TUMaxD•thIÁ”
(è=ð1è&&…cCU->
	`isIÁ”
(
uiAbsP¬tIdx
è&& (…cCU->
	`g‘P¬t™iÚSize
(uiAbsP¬tIdxè!ð
SIZE_2Nx2N
 ));

4753 #ià
DEBUG_STRING


4754 cÚ¡ 
IÁ
 
debugP»dModeMask
 = 
	`DebugSŒšgG‘P»dModeMask
(
pcCU
->
	`g‘P»diùiÚMode
(
uiAbsP¬tIdx
));

4757 
BoÞ
 
bCheckFuÎ
;

4759 iàÐ
S¶™FÏg
 && 
uiD•th
 =ð
pcCU
->
	`g‘D•th
(
uiAbsP¬tIdx
è&& ( 
uiLog2TrSize
 >…cCU->
	`g‘QuadŒ“TULog2MšSizeInCU
(uiAbsPartIdx) ) )

4761 
bCheckFuÎ
 = 
çl£
;

4765 
bCheckFuÎ
 = ( 
uiLog2TrSize
 <ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
() );

4768 cÚ¡ 
BoÞ
 
bCheckS¶™
 = ( 
uiLog2TrSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) );

4770 
	`as£¹
Ð
bCheckFuÎ
 || 
bCheckS¶™
 );

4773 
DoubË
 
dSšgËCo¡
 = 
MAX_DOUBLE
;

4774 
UIÁ
 
uiSšgËB™s
 = 0;

4775 
Di¡ÜtiÚ
 
uiSšgËDi¡Comp
 [
MAX_NUM_COMPONENT
][2 ] = {{0,0},{0,0},{0,0}};

4776 
Di¡ÜtiÚ
 
uiSšgËDi¡
 = 0;

4777 
TCÛff
 
uiAbsSum
 [
MAX_NUM_COMPONENT
][2 ] = {{0,0},{0,0},{0,0}};

4778 
UIÁ
 
uiBe¡T¿nsfÜmMode
 [
MAX_NUM_COMPONENT
][2 ] = {{0,0},{0,0},{0,0}};

4780 
UIÁ
 
be¡Ex¶ic™RdpcmModeUnS¶™
[
MAX_NUM_COMPONENT
][2 ] = {{3,3}, {3,3}, {3,3}};

4781 
SCh¬
 
be¡CrossCP»diùiÚAÍha
 [
MAX_NUM_COMPONENT
][2 ] = {{0,0},{0,0},{0,0}};

4783 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

4785 ifÐ
bCheckFuÎ
 )

4787 
DoubË
 
mšCo¡
[
MAX_NUM_COMPONENT
][2 ];

4788 
BoÞ
 
checkT¿nsfÜmSk
[
MAX_NUM_COMPONENT
];

4789 
pcCU
->
	`£tTrIdxSubP¬ts
Ð
uiTrMode
, 
uiAbsP¬tIdx
, 
uiD•th
 );

4791 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

4793 
	`mem£t
Ð
m_pTempP–
, 0, Ð
P–
 ) * 
rTu
.
	`g‘Reù
(
COMPONENT_Y
).
width
 *„Tu.g‘Reù(COMPONENT_Y).
height
 );

4795 cÚ¡ 
UIÁ
 
uiQTTempAcûssLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

4796 
TCÛff
 *
pcCÛffCu¼
[
MAX_NUM_COMPONENT
];

4797 #ià
ADAPTIVE_QP_SELECTION


4798 
TCÛff
 *
pcA¾CÛffCu¼
[
MAX_NUM_COMPONENT
];

4801 
UIÁ
 
i
=0; i<
numV®idComp
; i++)

4803 
mšCo¡
[
i
][0] = 
MAX_DOUBLE
;

4804 
mšCo¡
[
i
][1] = 
MAX_DOUBLE
;

4807 
P–
 
üossCP»diùedResidu®Bufãr
[ 
MAX_TU_SIZE
 * MAX_TU_SIZE ];

4809 
UIÁ
 
i
=0; i<
numV®idComp
; i++)

4811 
checkT¿nsfÜmSk
[
i
]=
çl£
;

4812 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
i
);

4813 cÚ¡ 
IÁ
 
chªÃlB™D•th
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

4814 
pcCÛffCu¼
[
compID
] = 
m_µcQTTempCÛff
[compID][
uiQTTempAcûssLay”
] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

4815 #ià
ADAPTIVE_QP_SELECTION


4816 
pcA¾CÛffCu¼
[
compID
] = 
m_µcQTTempA¾CÛff
[compID ][
uiQTTempAcûssLay”
] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

4819 if(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

4821 cÚ¡ 
QpP¬am
 
	`cQP
(*
pcCU
, 
compID
);

4823 
checkT¿nsfÜmSk
[
compID
] = 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘U£T¿nsfÜmSk
() &&

4824 
	`TUCompReùHasAssocŸ‹dT¿nsfÜmSkFÏg
(
rTu
.
	`g‘Reù
(
compID
), 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘Log2MaxT¿nsfÜmSkBlockSize
()) &&

4825 (!
pcCU
->
	`isLos¦essCoded
(0));

4827 cÚ¡ 
BoÞ
 
¥l™IÁoSubTUs
 = 
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
;

4829 
TComTURecur£
 
	`TUI‹¿tÜ
(
rTu
, 
çl£
, (
¥l™IÁoSubTUs
 ? 
TComTU
::
VERTICAL_SPLIT
 : TComTU::
DONT_SPLIT
), 
Œue
, 
compID
);

4831 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
TUI‹¿tÜ
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
);

4835 cÚ¡ 
UIÁ
 
subTUIndex
 = 
TUI‹¿tÜ
.
	`G‘SeùiÚNumb”
();

4836 cÚ¡ 
UIÁ
 
subTUAbsP¬tIdx
 = 
TUI‹¿tÜ
.
	`G‘AbsP¬tIdxTU
(
compID
);

4837 cÚ¡ 
TComReùªgË
 &
tuCompReù
 = 
TUI‹¿tÜ
.
	`g‘Reù
(
compID
);

4838 cÚ¡ 
UIÁ
 
subTUBufãrOff£t
 = 
tuCompReù
.
width
 *uCompReù.
height
 * 
subTUIndex
;

4840 
TCÛff
 *
cu¼’tCÛffic›Ás
 = 
pcCÛffCu¼
[
compID
] + 
subTUBufãrOff£t
;

4841 #ià
ADAPTIVE_QP_SELECTION


4842 
TCÛff
 *
cu¼’tARLCÛffic›Ás
 = 
pcA¾CÛffCu¼
[
compID
] + 
subTUBufãrOff£t
;

4844 cÚ¡ 
BoÞ
 
isCrossCP»diùiÚAvažabË
 = 
	`isChroma
(
compID
)

4845 && 
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘CrossCompÚ’tP»diùiÚEÇbËdFÏg
()

4846 && (
pcCU
->
	`g‘Cbf
(
subTUAbsP¬tIdx
, 
COMPONENT_Y
, 
uiTrMode
) != 0);

4848 
SCh¬
 
´eC®cAÍha
 = 0;

4849 cÚ¡ 
P–
 *
pLumaResi
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
Ð
COMPONENT_Y
, 
rTu
.
	`g‘Reù
ÐCOMPONENT_Y ).
x0
,„Tu.g‘ReùÐCOMPONENT_Y ).
y0
 );

4851 ià(
isCrossCP»diùiÚAvažabË
)

4853 cÚ¡ 
BoÞ
 
bU£RecÚ¡ruùedResidu®FÜE¡im©e
 = 
m_pcEncCfg
->
	`g‘U£RecÚBa£dCrossCP»diùiÚE¡im©e
();

4854 cÚ¡ 
P–
 *cÚ¡ 
lumaResidu®FÜE¡im©e
 = 
bU£RecÚ¡ruùedResidu®FÜE¡im©e
 ? 
pLumaResi
 : 
pcResi
->
	`g‘AddrPix
(
COMPONENT_Y
, 
tuCompReù
.
x0
,uCompReù.
y0
);

4855 cÚ¡ 
UIÁ
 
lumaResidu®SŒideFÜE¡im©e
 = 
bU£RecÚ¡ruùedResidu®FÜE¡im©e
 ? 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
COMPONENT_Y
è: 
pcResi
->getStride(COMPONENT_Y);

4857 
´eC®cAÍha
 = 
	`xC®cCrossCompÚ’tP»diùiÚAÍha
(
TUI‹¿tÜ
,

4858 
compID
,

4859 
lumaResidu®FÜE¡im©e
,

4860 
pcResi
->
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

4861 
tuCompReù
.
width
,

4862 
tuCompReù
.
height
,

4863 
lumaResidu®SŒideFÜE¡im©e
,

4864 
pcResi
->
	`g‘SŒide
(
compID
));

4867 cÚ¡ 
IÁ
 
ŒªsfÜmSkModesToTe¡
 = 
checkT¿nsfÜmSk
[
compID
] ? 2 : 1;

4868 cÚ¡ 
IÁ
 
üossCP»diùiÚModesToTe¡
 = (
´eC®cAÍha
 != 0) ? 2 : 1;

4870 cÚ¡ 
BoÞ
 
isOÃMode
 = (
üossCP»diùiÚModesToTe¡
 =ð1è&& (
ŒªsfÜmSkModesToTe¡
 == 1);

4872 
IÁ
 
ŒªsfÜmSkModeId
 = 0;¿nsfÜmSkModeId < 
ŒªsfÜmSkModesToTe¡
;ransformSkipModeId++)

4874 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
(
ŒªsfÜmSkModeId
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

4876 
IÁ
 
üossCP»diùiÚModeId
 = 0; crossCP»diùiÚModeId < 
üossCP»diùiÚModesToTe¡
; crossCPredictionModeId++)

4878 cÚ¡ 
BoÞ
 
isFœ¡Mode
 = (
ŒªsfÜmSkModeId
 =ð0è&& (
üossCP»diùiÚModeId
 == 0);

4879 cÚ¡ 
BoÞ
 
bU£CrossCP»diùiÚ
 = 
üossCP»diùiÚModeId
 != 0;

4881 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

4882 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

4884 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
(
ŒªsfÜmSkModeId
, 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

4885 
pcCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
((
bU£CrossCP»diùiÚ
 ? 
´eC®cAÍha
 : 0), 
compID
, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

4887 ià((
compID
 !ð
COMPONENT_Cr
è&& ((
ŒªsfÜmSkModeId
 =ð1è? 
m_pcEncCfg
->
	`g‘U£RDOQTS
(è: m_pcEncCfg->
	`g‘U£RDOQ
()))

4889 
COEFF_SCAN_TYPE
 
sÿnTy³
 = 
	`COEFF_SCAN_TYPE
(
pcCU
->
	`g‘CÛfSÿnIdx
(
uiAbsP¬tIdx
, 
tuCompReù
.
width
,uCompReù.
height
, 
compID
));

4890 
m_pcEÁrÝyCod”
->
	`e¡im©eB™
(
m_pcTrQuªt
->
m_pcE¡B™sSbac
, 
tuCompReù
.
width
,uCompReù.
height
, 
	`toChªÃlTy³
(
compID
), 
sÿnTy³
);

4893 #ià
RDOQ_CHROMA_LAMBDA


4894 
m_pcTrQuªt
->
	`£ËùLambda
(
compID
);

4897 
P–
 *
pcResiCu¼Comp
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
);

4898 
UIÁ
 
»siSŒide
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
);

4900 
TCÛff
 
be¡CÛffComp
 [
MAX_TU_SIZE
*MAX_TU_SIZE];

4901 
P–
 
be¡ResiComp
 [
MAX_TU_SIZE
*MAX_TU_SIZE];

4903 #ià
ADAPTIVE_QP_SELECTION


4904 
TCÛff
 
be¡A¾CÛffComp
[
MAX_TU_SIZE
*MAX_TU_SIZE];

4906 
TCÛff
 
cu¼AbsSum
 = 0;

4907 
UIÁ
 
cu¼CompB™s
 = 0;

4908 
Di¡ÜtiÚ
 
cu¼CompDi¡
 = 0;

4909 
DoubË
 
cu¼CompCo¡
 = 0;

4910 
UIÁ
 
nÚCÛffB™s
 = 0;

4911 
Di¡ÜtiÚ
 
nÚCÛffDi¡
 = 0;

4912 
DoubË
 
nÚCÛffCo¡
 = 0;

4914 if(!
isOÃMode
 && !
isFœ¡Mode
)

4916 
	`memýy
(
be¡CÛffComp
, 
cu¼’tCÛffic›Ás
, ((
TCÛff
è* 
tuCompReù
.
width
 *uCompReù.
height
));

4917 #ià
ADAPTIVE_QP_SELECTION


4918 
	`memýy
(
be¡A¾CÛffComp
, 
cu¼’tARLCÛffic›Ás
, ((
TCÛff
è* 
tuCompReù
.
width
 *uCompReù.
height
));

4920 
IÁ
 
y
 = 0; y < 
tuCompReù
.
height
; y++)

4922 
	`memýy
(&
be¡ResiComp
[
y
 * 
tuCompReù
.
width
], (
pcResiCu¼Comp
 + (y * 
»siSŒide
)), ((
P–
) *uCompRect.width));

4926 ià(
bU£CrossCP»diùiÚ
)

4928 
TComTrQuªt
::
	`üossCompÚ’tP»diùiÚ
(
TUI‹¿tÜ
,

4929 
compID
,

4930 
pLumaResi
,

4931 
pcResi
->
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

4932 
üossCP»diùedResidu®Bufãr
,

4933 
tuCompReù
.
width
,

4934 
tuCompReù
.
height
,

4935 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
COMPONENT_Y
),

4936 
pcResi
->
	`g‘SŒide
(
compID
),

4937 
tuCompReù
.
width
,

4938 
çl£
);

4940 
m_pcTrQuªt
->
	`ŒªsfÜmNxN
(
TUI‹¿tÜ
, 
compID
, 
üossCP»diùedResidu®Bufãr
, 
tuCompReù
.
width
, 
cu¼’tCÛffic›Ás
,

4941 #ià
ADAPTIVE_QP_SELECTION


4942 
cu¼’tARLCÛffic›Ás
,

4944 
cu¼AbsSum
, 
cQP
);

4948 
m_pcTrQuªt
->
	`ŒªsfÜmNxN
(
TUI‹¿tÜ
, 
compID
, 
pcResi
->
	`g‘AddrPix
ÐcompID, 
tuCompReù
.
x0
,uCompReù.
y0
 ),…cResi->
	`g‘SŒide
(compID), 
cu¼’tCÛffic›Ás
,

4949 #ià
ADAPTIVE_QP_SELECTION


4950 
cu¼’tARLCÛffic›Ás
,

4952 
cu¼AbsSum
, 
cQP
);

4955 if(
isFœ¡Mode
 || (
cu¼AbsSum
 == 0))

4957 ià(
bU£CrossCP»diùiÚ
)

4959 
TComTrQuªt
::
	`üossCompÚ’tP»diùiÚ
(
TUI‹¿tÜ
,

4960 
compID
,

4961 
pLumaResi
,

4962 
m_pTempP–
,

4963 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

4964 
tuCompReù
.
width
,

4965 
tuCompReù
.
height
,

4966 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
COMPONENT_Y
),

4967 
tuCompReù
.
width
,

4968 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
),

4969 
Œue
);

4971 
nÚCÛffDi¡
 = 
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
chªÃlB™D•th
, 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
Ð
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
 ),

4972 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
Ð
compID
 ), 
pcResi
->
	`g‘AddrPix
ÐcompID, 
tuCompReù
.
x0
,uCompReù.
y0
 ),

4973 
pcResi
->
	`g‘SŒide
(
compID
), 
tuCompReù
.
width
,uCompReù.
height
, compID);

4977 
nÚCÛffDi¡
 = 
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
chªÃlB™D•th
, 
m_pTempP–
, 
tuCompReù
.
width
, 
pcResi
->
	`g‘AddrPix
Ð
compID
,uCompReù.
x0
,uCompReù.
y0
 ),

4978 
pcResi
->
	`g‘SŒide
(
compID
), 
tuCompReù
.
width
,uCompReù.
height
, compID);

4981 
m_pcEÁrÝyCod”
->
	`’codeQtCbfZ”o
Ð
TUI‹¿tÜ
, 
	`toChªÃlTy³
(
compID
) );

4983 iàÐ
isCrossCP»diùiÚAvažabË
 )

4985 
m_pcEÁrÝyCod”
->
	`’codeCrossCompÚ’tP»diùiÚ
Ð
TUI‹¿tÜ
, 
compID
 );

4988 
nÚCÛffB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

4989 
nÚCÛffCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
nÚCÛffB™s
, 
nÚCÛffDi¡
 );

4992 if((
puiZ”oDi¡
 !ð
NULL
è&& 
isFœ¡Mode
)

4994 *
puiZ”oDi¡
 +ð
nÚCÛffDi¡
;

4997 
	`DEBUG_STRING_NEW
(
sSšgËSŒšgTe¡
)

4999 ifÐ
cu¼AbsSum
 > 0 )

5001 ià(
isFœ¡Mode
)

5003 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

5004 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5007 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
Ð
TUI‹¿tÜ
, 
compID
, 
Œue
 );

5009 ià(
isCrossCP»diùiÚAvažabË
)

5011 
m_pcEÁrÝyCod”
->
	`’codeCrossCompÚ’tP»diùiÚ
Ð
TUI‹¿tÜ
, 
compID
 );

5014 
m_pcEÁrÝyCod”
->
	`’codeCÛffNxN
Ð
TUI‹¿tÜ
, 
cu¼’tCÛffic›Ás
, 
compID
 );

5015 
cu¼CompB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5017 
pcResiCu¼Comp
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
Ð
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
 );

5019 
m_pcTrQuªt
->
	`švT¿nsfÜmNxN
Ð
TUI‹¿tÜ
, 
compID
, 
pcResiCu¼Comp
, 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(compID), 
cu¼’tCÛffic›Ás
, 
cQP
 
	`DEBUG_STRING_PASS_INTO_OPTIONAL
(&
sSšgËSŒšgTe¡
, (
DebugO±iÚLi¡
::
DebugSŒšg_InvT¿n
.
	`g‘IÁ
()&
debugP»dModeMask
)) );

5021 ià(
bU£CrossCP»diùiÚ
)

5023 
TComTrQuªt
::
	`üossCompÚ’tP»diùiÚ
(
TUI‹¿tÜ
,

5024 
compID
,

5025 
pLumaResi
,

5026 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

5027 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

5028 
tuCompReù
.
width
,

5029 
tuCompReù
.
height
,

5030 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
COMPONENT_Y
),

5031 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
 ),

5032 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
 ),

5033 
Œue
);

5036 
cu¼CompDi¡
 = 
m_pcRdCo¡
->
	`g‘Di¡P¬t
Ð
chªÃlB™D•th
, 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
Ð
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
 ),

5037 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
),

5038 
pcResi
->
	`g‘AddrPix
Ð
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
 ),

5039 
pcResi
->
	`g‘SŒide
(
compID
),

5040 
tuCompReù
.
width
,uCompReù.
height
, 
compID
);

5042 
cu¼CompCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
(
cu¼CompB™s
, 
cu¼CompDi¡
);

5044 ià(
pcCU
->
	`isLos¦essCoded
(0))

5046 
nÚCÛffCo¡
 = 
MAX_DOUBLE
;

5049 ià((
ŒªsfÜmSkModeId
 =ð1è&& !
bU£CrossCP»diùiÚ
)

5051 
cu¼CompCo¡
 = 
MAX_DOUBLE
;

5055 
cu¼CompB™s
 = 
nÚCÛffB™s
;

5056 
cu¼CompDi¡
 = 
nÚCÛffDi¡
;

5057 
cu¼CompCo¡
 = 
nÚCÛffCo¡
;

5061 ià((
cu¼CompCo¡
 < 
mšCo¡
[
compID
][
subTUIndex
]è|| ((
ŒªsfÜmSkModeId
 == 1) && (currCompCost == minCost[compID][subTUIndex])))

5063 
be¡Ex¶ic™RdpcmModeUnS¶™
[
compID
][
subTUIndex
] = 
pcCU
->
	`g‘Ex¶ic™RdpcmMode
(compID, 
subTUAbsP¬tIdx
);

5065 if(
isFœ¡Mode
)

5067 if((
nÚCÛffCo¡
 < 
cu¼CompCo¡
è|| (
cu¼AbsSum
 == 0))

5069 
	`mem£t
(
cu¼’tCÛffic›Ás
, 0, ((
TCÛff
è* 
tuCompReù
.
width
 *uCompReù.
height
));

5071 
cu¼AbsSum
 = 0;

5072 
cu¼CompB™s
 = 
nÚCÛffB™s
;

5073 
cu¼CompDi¡
 = 
nÚCÛffDi¡
;

5074 
cu¼CompCo¡
 = 
nÚCÛffCo¡
;

5078 #ià
DEBUG_STRING


5079 ià(
cu¼AbsSum
 > 0)

5081 
	`DEBUG_STRING_SWAP
(
sSšgËSŒšgComp
[
compID
], 
sSšgËSŒšgTe¡
)

5085 
sSšgËSŒšgComp
[
compID
].
	`þ—r
();

5089 
uiAbsSum
 [
compID
][
subTUIndex
] = 
cu¼AbsSum
;

5090 
uiSšgËDi¡Comp
 [
compID
][
subTUIndex
] = 
cu¼CompDi¡
;

5091 
mšCo¡
 [
compID
][
subTUIndex
] = 
cu¼CompCo¡
;

5092 
uiBe¡T¿nsfÜmMode
 [
compID
][
subTUIndex
] = 
ŒªsfÜmSkModeId
;

5093 
be¡CrossCP»diùiÚAÍha
[
compID
][
subTUIndex
] = (
üossCP»diùiÚModeId
 =ð1è? 
pcCU
->
	`g‘CrossCompÚ’tP»diùiÚAÍha
(
subTUAbsP¬tIdx
, compID) : 0;

5095 ià(
uiAbsSum
[
compID
][
subTUIndex
] == 0)

5097 ià(
bU£CrossCP»diùiÚ
)

5099 
TComTrQuªt
::
	`üossCompÚ’tP»diùiÚ
(
TUI‹¿tÜ
,

5100 
compID
,

5101 
pLumaResi
,

5102 
m_pTempP–
,

5103 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
),

5104 
tuCompReù
.
width
,

5105 
tuCompReù
.
height
,

5106 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
COMPONENT_Y
),

5107 
tuCompReù
.
width
,

5108 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
),

5109 
Œue
);

5113 
pcResiCu¼Comp
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘AddrPix
(
compID
, 
tuCompReù
.
x0
,uCompReù.
y0
);

5114 cÚ¡ 
UIÁ
 
uiSŒide
 = 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`g‘SŒide
(
compID
);

5115 
UIÁ
 
uiY
 = 0; uiY < 
tuCompReù
.
height
; uiY++)

5117 
	`mem£t
(
pcResiCu¼Comp
, 0, ((
P–
è* 
tuCompReù
.
width
));

5118 
pcResiCu¼Comp
 +ð
uiSŒide
;

5126 
	`memýy
(
cu¼’tCÛffic›Ás
, 
be¡CÛffComp
, ((
TCÛff
è* 
tuCompReù
.
width
 *uCompReù.
height
));

5127 #ià
ADAPTIVE_QP_SELECTION


5128 
	`memýy
(
cu¼’tARLCÛffic›Ás
, 
be¡A¾CÛffComp
, ((
TCÛff
è* 
tuCompReù
.
width
 *uCompReù.
height
));

5130 
IÁ
 
y
 = 0; y < 
tuCompReù
.
height
; y++)

5132 
	`memýy
((
pcResiCu¼Comp
 + (
y
 * 
»siSŒide
)), &
be¡ResiComp
[y * 
tuCompReù
.
width
], ((
P–
) *uCompRect.width));

5138 
pcCU
->
	`£tEx¶ic™RdpcmModeP¬tRªge
 ( 
be¡Ex¶ic™RdpcmModeUnS¶™
[
compID
][
subTUIndex
], compID, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
);

5139 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
 ( 
uiBe¡T¿nsfÜmMode
 [
compID
][
subTUIndex
], compID, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

5140 
pcCU
->
	`£tCbfP¬tRªge
 ((((
uiAbsSum
 [
compID
][
subTUIndex
] > 0è? 1 : 0è<< 
uiTrMode
), compID, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

5141 
pcCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
Ð
be¡CrossCP»diùiÚAÍha
 [
compID
][
subTUIndex
], compID, 
subTUAbsP¬tIdx
, 
·¹IdxesP”SubTU
 );

5142 } 
TUI‹¿tÜ
.
	`ÃxtSeùiÚ
(
rTu
));

5146 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5148 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

5149 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
è&& (rTu.
	`g‘Reù
(compID).
width
 !ðrTu.g‘Reù(compID).
height
))

5151 
	`off£tSubTUCBFs
(
rTu
, 
compID
);

5155 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

5156 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5158 ifÐ
uiLog2TrSize
 > 
pcCU
->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) )

5160 
m_pcEÁrÝyCod”
->
	`’codeT¿nsfÜmSubdivFÏg
Ð0, 5 - 
uiLog2TrSize
 );

5163 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5165 cÚ¡ 
UIÁ
 
chOrd”Chªge
 = ((
ch
 + 1è=ð
numV®idComp
) ? 0 : (ch + 1);

5166 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
chOrd”Chªge
);

5167 ifÐ
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
) )

5169 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
Ð
rTu
, 
compID
, 
Œue
 );

5173 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5175 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

5176 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5178 if(
	`isChroma
(
compID
è&& (
uiAbsSum
[
COMPONENT_Y
][0] != 0))

5180 
m_pcEÁrÝyCod”
->
	`’codeCrossCompÚ’tP»diùiÚ
Ð
rTu
, 
compID
 );

5183 
m_pcEÁrÝyCod”
->
	`’codeCÛffNxN
Ð
rTu
, 
pcCÛffCu¼
[
compID
], compID );

5184 
UIÁ
 
subTUIndex
 = 0; subTUIndex < 2; subTUIndex++)

5186 
uiSšgËDi¡
 +ð
uiSšgËDi¡Comp
[
compID
][
subTUIndex
];

5191 
uiSšgËB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5193 
dSšgËCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiSšgËB™s
, 
uiSšgËDi¡
 );

5197 ifÐ
bCheckS¶™
 )

5199 ifÐ
bCheckFuÎ
 )

5201 
m_pcRDGoOnSbacCod”
->
	`¡Üe
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_TEST
 ] );

5202 
m_pcRDGoOnSbacCod”
->
	`lßd
 ( 
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

5204 
Di¡ÜtiÚ
 
uiSubdivDi¡
 = 0;

5205 
UIÁ
 
uiSubdivB™s
 = 0;

5206 
DoubË
 
dSubdivCo¡
 = 0.0;

5210 
UIÁ
 
be¡CBF
 [
MAX_NUM_COMPONENT
];

5211 
UIÁ
 
be¡subTUCBF
[
MAX_NUM_COMPONENT
][2];

5212 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5214 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

5216 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5218 
be¡CBF
[
compID
] = 
pcCU
->
	`g‘Cbf
(
uiAbsP¬tIdx
, compID, 
uiTrMode
);

5220 cÚ¡ 
TComReùªgË
 &
tuCompReù
 = 
rTu
.
	`g‘Reù
(
compID
);

5221 ià(
tuCompReù
.
width
 !ðtuCompReù.
height
)

5223 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
) >> 1;

5225 
UIÁ
 
subTU
 = 0; subTU < 2; subTU++)

5227 
be¡subTUCBF
[
compID
][
subTU
] = 
pcCU
->
	`g‘Cbf
 ((
uiAbsP¬tIdx
 + (subTU * 
·¹IdxesP”SubTU
)), compID, 
subTUD•th
);

5234 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

5235 cÚ¡ 
UIÁ
 
uiQP¬tNumSubdiv
 = 
tuRecur£Chžd
.
	`G‘AbsP¬tIdxNumP¬ts
();

5237 
	`DEBUG_STRING_NEW
(
sS¶™SŒšg
[
MAX_NUM_COMPONENT
])

5241 
	`DEBUG_STRING_NEW
(
chždSŒšg
)

5242 
	`xE¡im©eIÁ”Residu®QT
Ð
pcResi
, 
dSubdivCo¡
, 
uiSubdivB™s
, 
uiSubdivDi¡
, 
bCheckFuÎ
 ? 
NULL
 : 
puiZ”oDi¡
, 
tuRecur£Chžd
 
	`DEBUG_STRING_PASS_INTO
(
chždSŒšg
));

5243 #ià
DEBUG_STRING


5245 
¡d
::
size_t
 
Ï¡Pos
=0;

5246 cÚ¡ 
¡d
::
size_t
 
’dSŒng
=
chždSŒšg
.
	`fšd
(
debug_»Üd”_d©a_š‹r_tok’
[
MAX_NUM_COMPONENT
], 
Ï¡Pos
);

5247 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5249 ià(
Ï¡Pos
!=
¡d
::
¡ršg
::
Åos
 && 
chždSŒšg
.
	`fšd
(
debug_»Üd”_d©a_š‹r_tok’
[
ch
],†astPos)==lastPos)

5251 
Ï¡Pos
+=
	`¡¾’
(
debug_»Üd”_d©a_š‹r_tok’
[
ch
]);

5253 
¡d
::
size_t
 
pos
=
chždSŒšg
.
	`fšd
(
debug_»Üd”_d©a_š‹r_tok’
[
ch
+1], 
Ï¡Pos
);

5254 ià(
pos
!=
¡d
::
¡ršg
::
Åos
 &&…os>
’dSŒng
)

5256 
Ï¡Pos
=
’dSŒng
;

5258 
sS¶™SŒšg
[
ch
]+=
chždSŒšg
.
	`sub¡r
(
Ï¡Pos
, (
pos
==
¡d
::
¡ršg
::
Åos
)? std::string::npos : (pos-lastPos) );

5259 
Ï¡Pos
=
pos
;

5262 }  
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
) ) ;

5264 
UIÁ
 
uiCbfAny
=0;

5265 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5267 
UIÁ
 
uiYUVCbf
 = 0;

5268  
UIÁ
 
ui
 = 0; ui < 4; ++ui )

5270 
uiYUVCbf
 |ð
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
 + 
ui
 * 
uiQP¬tNumSubdiv
, 
	`CompÚ’tID
(
ch
), 
uiTrMode
 + 1 );

5272 
UCh¬
 *
pBa£
=
pcCU
->
	`g‘Cbf
Ð
	`CompÚ’tID
(
ch
) );

5273 cÚ¡ 
UIÁ
 
æags
=
uiYUVCbf
 << 
uiTrMode
;

5274  
UIÁ
 
ui
 = 0; u˜< 4 * 
uiQP¬tNumSubdiv
; ++ui )

5276 
pBa£
[
uiAbsP¬tIdx
 + 
ui
] |ð
æags
;

5278 
uiCbfAny
|=
uiYUVCbf
;

5281 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_ROOT
 ] );

5282 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5285 
	`xEncodeIÁ”Residu®QT
Ð
MAX_NUM_COMPONENT
, 
rTu
 );

5286 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5288 
	`xEncodeIÁ”Residu®QT
Ð
	`CompÚ’tID
(
ch
), 
rTu
 );

5291 
uiSubdivB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5292 
dSubdivCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð
uiSubdivB™s
, 
uiSubdivDi¡
 );

5294 ià(!
bCheckFuÎ
 || (
uiCbfAny
 && (
dSubdivCo¡
 < 
dSšgËCo¡
)))

5296 
rdCo¡
 +ð
dSubdivCo¡
;

5297 
ruiB™s
 +ð
uiSubdivB™s
;

5298 
ruiDi¡
 +ð
uiSubdivDi¡
;

5299 #ià
DEBUG_STRING


5300 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5302 
	`DEBUG_STRING_APPEND
(
sDebug
, 
debug_»Üd”_d©a_š‹r_tok’
[
ch
])

5303 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sS¶™SŒšg
[
ch
])

5309 
rdCo¡
 +ð
dSšgËCo¡
;

5310 
ruiB™s
 +ð
uiSšgËB™s
;

5311 
ruiDi¡
 +ð
uiSšgËDi¡
;

5315 
pcCU
->
	`£tTrIdxSubP¬ts
Ð
uiTrMode
, 
uiAbsP¬tIdx
, 
uiD•th
 );

5317 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5319 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

5321 
	`DEBUG_STRING_APPEND
(
sDebug
, 
debug_»Üd”_d©a_š‹r_tok’
[
ch
])

5322 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5324 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sSšgËSŒšgComp
[
compID
])

5326 cÚ¡ 
BoÞ
 
¥l™IÁoSubTUs
 = 
rTu
.
	`g‘Reù
(
compID
).
width
 !ðrTu.g‘Reù(compID).
height
;

5327 cÚ¡ 
UIÁ
 
numb”OfSeùiÚs
 = 
¥l™IÁoSubTUs
 ? 2 : 1;

5328 cÚ¡ 
UIÁ
 
·¹IdxesP”SubTU
 = 
rTu
.
	`G‘AbsP¬tIdxNumP¬ts
(
compID
è>> (
¥l™IÁoSubTUs
 ? 1 : 0);

5330 
UIÁ
 
subTUIndex
 = 0; subTUIndex < 
numb”OfSeùiÚs
; subTUIndex++)

5332 cÚ¡ 
UIÁ
 
uisubTUP¬tIdx
 = 
uiAbsP¬tIdx
 + (
subTUIndex
 * 
·¹IdxesP”SubTU
);

5334 ià(
¥l™IÁoSubTUs
)

5336 cÚ¡ 
UCh¬
 
combšedCBF
 = (
be¡subTUCBF
[
compID
][
subTUIndex
] << 
subTUD•th
è| (
be¡CBF
[compID] << 
uiTrMode
);

5337 
pcCU
->
	`£tCbfP¬tRªge
(
combšedCBF
, 
compID
, 
uisubTUP¬tIdx
, 
·¹IdxesP”SubTU
);

5341 
pcCU
->
	`£tCbfP¬tRªge
((
be¡CBF
[
compID
] << 
uiTrMode
), compID, 
uisubTUP¬tIdx
, 
·¹IdxesP”SubTU
);

5344 
pcCU
->
	`£tCrossCompÚ’tP»diùiÚAÍhaP¬tRªge
(
be¡CrossCP»diùiÚAÍha
[
compID
][
subTUIndex
], compID, 
uisubTUP¬tIdx
, 
·¹IdxesP”SubTU
);

5345 
pcCU
->
	`£tT¿nsfÜmSkP¬tRªge
(
uiBe¡T¿nsfÜmMode
[
compID
][
subTUIndex
], compID, 
uisubTUP¬tIdx
, 
·¹IdxesP”SubTU
);

5346 
pcCU
->
	`£tEx¶ic™RdpcmModeP¬tRªge
(
be¡Ex¶ic™RdpcmModeUnS¶™
[
compID
][
subTUIndex
], compID, 
uisubTUP¬tIdx
, 
·¹IdxesP”SubTU
);

5351 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[ 
uiD•th
 ][ 
CI_QT_TRAFO_TEST
 ] );

5356 
rdCo¡
 +ð
dSšgËCo¡
;

5357 
ruiB™s
 +ð
uiSšgËB™s
;

5358 
ruiDi¡
 +ð
uiSšgËDi¡
;

5359 #ià
DEBUG_STRING


5360 
UIÁ
 
ch
 = 0; ch < 
numV®idComp
; ch++)

5362 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
ch
);

5363 
	`DEBUG_STRING_APPEND
(
sDebug
, 
debug_»Üd”_d©a_š‹r_tok’
[
compID
])

5365 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5367 
	`DEBUG_STRING_APPEND
(
sDebug
, 
sSšgËSŒšgComp
[
compID
])

5372 
	`DEBUG_STRING_APPEND
(
sDebug
, 
debug_»Üd”_d©a_š‹r_tok’
[
MAX_NUM_COMPONENT
])

5373 
	}
}

5377 
Void
 
	gTEncS—rch
::
	$xEncodeIÁ”Residu®QT
ÐcÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
 )

5379 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

5380 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

5381 cÚ¡ 
UIÁ
 
uiCu¼TrMode
 = 
rTu
.
	`G‘T¿nsfÜmD•thR–
();

5382 
	`as£¹
Ð
pcCU
->
	`g‘D•th
Ð0 ) =ðpcCU->g‘D•thÐ
uiAbsP¬tIdx
 ) );

5383 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

5385 cÚ¡ 
BoÞ
 
bSubdiv
 = 
uiCu¼TrMode
 !ð
uiTrMode
;

5387 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

5389 ià(
compID
==
MAX_NUM_COMPONENT
)

5391 ifÐ
uiLog2TrSize
 <ð
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è&& uiLog2TrSiz>…cCU->
	`g‘QuadŒ“TULog2MšSizeInCU
(
uiAbsP¬tIdx
) )

5393 if((
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TUMaxD•thIÁ”
(è=ð1è&& (pcCU->
	`g‘P¬t™iÚSize
(
uiAbsP¬tIdx
è!ð
SIZE_2Nx2N
))

5395 
	`as£¹
(
bSubdiv
);

5399 
m_pcEÁrÝyCod”
->
	`’codeT¿nsfÜmSubdivFÏg
Ð
bSubdiv
, 5 - 
uiLog2TrSize
 );

5403 
	`as£¹
Ð!
pcCU
->
	`isIÁ¿
(
uiAbsP¬tIdx
) );

5405 cÚ¡ 
BoÞ
 
bFœ¡CbfOfCU
 = 
uiCu¼TrMode
 == 0;

5407 
UIÁ
 
ch
=
COMPONENT_Cb
; ch<
pcCU
->
	`g‘Pic
()->
	`g‘Numb”V®idCompÚ’ts
(); ch++)

5409 cÚ¡ 
CompÚ’tID
 
compIdIÂ”
=
	`CompÚ’tID
(
ch
);

5410 ifÐ
bFœ¡CbfOfCU
 || 
rTu
.
	`ProûssšgAÎQuad¿Ás
(
compIdIÂ”
) )

5412 ifÐ
bFœ¡CbfOfCU
 || 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
compIdIÂ”
, 
uiCu¼TrMode
 - 1 ) )

5414 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
Ð
rTu
, 
compIdIÂ”
, !
bSubdiv
 );

5419 
	`as£¹
Ð
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, 
compIdIÂ”
, 
uiCu¼TrMode
 ) ==…cCU->getCbf( uiAbsPartIdx, compIdInner, uiCurrTrMode - 1 ) );

5423 ià(!
bSubdiv
)

5425 
m_pcEÁrÝyCod”
->
	`’codeQtCbf
Ð
rTu
, 
COMPONENT_Y
, 
Œue
 );

5429 ifÐ!
bSubdiv
 )

5431 ià(
compID
 !ð
MAX_NUM_COMPONENT
)

5433 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5435 ià(
	`isChroma
(
compID
è&& (
pcCU
->
	`g‘Cbf
(
uiAbsP¬tIdx
, 
COMPONENT_Y
, 
uiTrMode
) != 0))

5437 
m_pcEÁrÝyCod”
->
	`’codeCrossCompÚ’tP»diùiÚ
(
rTu
, 
compID
);

5440 ià(
pcCU
->
	`g‘Cbf
(
uiAbsP¬tIdx
, 
compID
, 
uiTrMode
) != 0)

5442 cÚ¡ 
UIÁ
 
uiQTTempAcûssLay”
 = 
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
()->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

5443 
TCÛff
 *
pcCÛffCu¼
 = 
m_µcQTTempCÛff
[
compID
][
uiQTTempAcûssLay”
] + 
rTu
.
	`g‘CÛffic›ÁOff£t
(compID);

5444 
m_pcEÁrÝyCod”
->
	`’codeCÛffNxN
Ð
rTu
, 
pcCÛffCu¼
, 
compID
 );

5451 ifÐ
compID
==
MAX_NUM_COMPONENT
 || 
pcCU
->
	`g‘Cbf
Ð
uiAbsP¬tIdx
, compID, 
uiCu¼TrMode
 ) )

5453 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

5456 
	`xEncodeIÁ”Residu®QT
Ð
compID
, 
tuRecur£Chžd
 );

5457 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

5460 
	}
}

5465 
Void
 
	gTEncS—rch
::
	$xS‘IÁ”Residu®QTD©a
Ð
TComYuv
* 
pcResi
, 
BoÞ
 
bS·tŸl
, 
TComTU
 &
rTu
 )

5467 
TComD©aCU
* 
pcCU
=
rTu
.
	`g‘CU
();

5468 cÚ¡ 
UIÁ
 
uiCu¼TrMode
=
rTu
.
	`G‘T¿nsfÜmD•thR–
();

5469 cÚ¡ 
UIÁ
 
uiAbsP¬tIdx
=
rTu
.
	`G‘AbsP¬tIdxTU
();

5470 
	`as£¹
Ð
pcCU
->
	`g‘D•th
Ð0 ) =ðpcCU->g‘D•thÐ
uiAbsP¬tIdx
 ) );

5471 cÚ¡ 
UIÁ
 
uiTrMode
 = 
pcCU
->
	`g‘T¿nsfÜmIdx
Ð
uiAbsP¬tIdx
 );

5472 cÚ¡ 
TComSPS
 *
¥s
=
pcCU
->
	`g‘Sliû
()->
	`g‘SPS
();

5474 ifÐ
uiCu¼TrMode
 =ð
uiTrMode
 )

5476 cÚ¡ 
UIÁ
 
uiLog2TrSize
 = 
rTu
.
	`G‘Log2LumaTrSize
();

5477 cÚ¡ 
UIÁ
 
uiQTTempAcûssLay”
 = 
¥s
->
	`g‘QuadŒ“TULog2MaxSize
(è- 
uiLog2TrSize
;

5479 ifÐ
bS·tŸl
 )

5483 
UIÁ
 
i
=0; i<
pcResi
->
	`g‘Numb”V®idCompÚ’ts
(); i++)

5485 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
i
);

5486 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5488 cÚ¡ 
TComReùªgË
 &
	`»ùCompTU
(
rTu
.
	`g‘Reù
(
compID
));

5489 
m_pcQTTempTComYuv
[
uiQTTempAcûssLay”
].
	`cÝyP¬tToP¬tCompÚ’tMxN
 ( 
compID
, 
pcResi
, 
»ùCompTU
 );

5495 
UIÁ
 
ch
=0; ch < 
	`g‘Numb”V®idCompÚ’ts
(
¥s
->
	`g‘ChromaFÜm©Idc
()); ch++)

5497 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
ch
);

5498 ià(
rTu
.
	`ProûssCompÚ’tSeùiÚ
(
compID
))

5500 cÚ¡ 
TComReùªgË
 &
	`»ùCompTU
(
rTu
.
	`g‘Reù
(
compID
));

5501 cÚ¡ 
UIÁ
 
numCÛffInBlock
 = 
»ùCompTU
.
width
 *„eùCompTU.
height
;

5502 cÚ¡ 
UIÁ
 
off£t
 = 
rTu
.
	`g‘CÛffic›ÁOff£t
(
compID
);

5503 
TCÛff
* 
de¡
 = 
pcCU
->
	`g‘CÛff
(
compID
è+ 
off£t
;

5504 cÚ¡ 
TCÛff
* 
¤c
 = 
m_µcQTTempCÛff
[
compID
][
uiQTTempAcûssLay”
] + 
off£t
;

5505 ::
	`memýy
Ð
de¡
, 
¤c
, (
TCÛff
)*
numCÛffInBlock
 );

5507 #ià
ADAPTIVE_QP_SELECTION


5508 
TCÛff
* 
pcA¾CÛffSrc
 = 
m_µcQTTempA¾CÛff
[
compID
][
uiQTTempAcûssLay”
] + 
off£t
;

5509 
TCÛff
* 
pcA¾CÛffD¡
 = 
pcCU
->
	`g‘A¾CÛff
(
compID
è+ 
off£t
;

5510 ::
	`memýy
Ð
pcA¾CÛffD¡
, 
pcA¾CÛffSrc
, Ð
TCÛff
 ) * 
numCÛffInBlock
 );

5519 
TComTURecur£
 
	`tuRecur£Chžd
(
rTu
, 
çl£
);

5522 
	`xS‘IÁ”Residu®QTD©a
Ð
pcResi
, 
bS·tŸl
, 
tuRecur£Chžd
 );

5523 } 
tuRecur£Chžd
.
	`ÃxtSeùiÚ
(
rTu
));

5525 
	}
}

5530 
UIÁ
 
	gTEncS—rch
::
	$xModeB™sIÁ¿
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiMode
, UIÁ 
uiP¬tOff£t
, UIÁ 
uiD•th
, cÚ¡ 
ChªÃlTy³
 
chTy³
 )

5533 
m_pcRDGoOnSbacCod”
->
	`lßdIÁ¿DœMode
Ð
m_µpcRDSbacCod”
[
uiD•th
][
CI_CURR_BEST
], 
chTy³
 );

5539 
UCh¬
 &
rIÁ¿DœV®
=
pcCU
->
	`g‘IÁ¿Dœ
Ð
chTy³
 )[
uiP¬tOff£t
];

5540 
UCh¬
 
ÜigV®
=
rIÁ¿DœV®
;

5541 
rIÁ¿DœV®
 = 
uiMode
;

5544 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5545 ià(
	`isLuma
(
chTy³
))

5547 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeLuma
 ( 
pcCU
, 
uiP¬tOff£t
);

5551 
m_pcEÁrÝyCod”
->
	`’codeIÁ¿DœModeChroma
 ( 
pcCU
, 
uiP¬tOff£t
);

5554 
rIÁ¿DœV®
 = 
ÜigV®
;

5556  
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5557 
	}
}

5562 
UIÁ
 
	gTEncS—rch
::
	$xUpd©eCªdLi¡
Ð
UIÁ
 
uiMode
, 
DoubË
 
uiCo¡
, UIÁ 
uiFa¡CªdNum
, UIÁ * 
CªdModeLi¡
, DoubË * 
CªdCo¡Li¡
 )

5564 
UIÁ
 
i
;

5565 
UIÁ
 
shiá
=0;

5567  
shiá
<
uiFa¡CªdNum
 && 
uiCo¡
<
CªdCo¡Li¡
[ uiFastCandNum-1-shift ] )

5569 
shiá
++;

5572 ifÐ
shiá
!=0 )

5574 
i
=1; i<
shiá
; i++)

5576 
CªdModeLi¡
[ 
uiFa¡CªdNum
-
i
 ] = CandModeList[ uiFastCandNum-1-i ];

5577 
CªdCo¡Li¡
[ 
uiFa¡CªdNum
-
i
 ] = CandCostList[ uiFastCandNum-1-i ];

5579 
CªdModeLi¡
[ 
uiFa¡CªdNum
-
shiá
 ] = 
uiMode
;

5580 
CªdCo¡Li¡
[ 
uiFa¡CªdNum
-
shiá
 ] = 
uiCo¡
;

5585 
	}
}

5598 
Void
 
	gTEncS—rch
::
	$xAddSymbÞB™sIÁ”
Ð
TComD©aCU
* 
pcCU
, 
UIÁ
& 
ruiB™s
 )

5600 if(
pcCU
->
	`g‘M”geFÏg
Ð0 ) &&…cCU->
	`g‘P¬t™iÚSize
Ð0 ) =ð
SIZE_2Nx2N
 && !pcCU->
	`g‘QtRoÙCbf
( 0 ))

5602 
pcCU
->
	`£tSkFÏgSubP¬ts
Ð
Œue
, 0,…cCU->
	`g‘D•th
(0) );

5604 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5605 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

5607 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
(
pcCU
, 0, 
Œue
);

5609 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
(
pcCU
, 0, 
Œue
);

5610 
m_pcEÁrÝyCod”
->
	`’codeM”geIndex
(
pcCU
, 0, 
Œue
);

5612 
ruiB™s
 +ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5616 
m_pcEÁrÝyCod”
->
	`»£tB™s
();

5618 if(
pcCU
->
	`g‘Sliû
()->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())

5620 
m_pcEÁrÝyCod”
->
	`’codeCUT¿nsquªtBy·ssFÏg
(
pcCU
, 0, 
Œue
);

5623 
m_pcEÁrÝyCod”
->
	`’codeSkFÏg
 ( 
pcCU
, 0, 
Œue
 );

5624 
m_pcEÁrÝyCod”
->
	`’codeP»dMode
Ð
pcCU
, 0, 
Œue
 );

5625 
m_pcEÁrÝyCod”
->
	`’codeP¬tSize
Ð
pcCU
, 0,…cCU->
	`g‘D•th
(0), 
Œue
 );

5626 
m_pcEÁrÝyCod”
->
	`’codeP»dInfo
Ð
pcCU
, 0 );

5628 
BoÞ
 
codeD–Qp
 = 
çl£
;

5629 
BoÞ
 
codeChromaQpAdj
 = 
çl£
;

5630 
m_pcEÁrÝyCod”
->
	`’codeCÛff
 ( 
pcCU
, 0,…cCU->
	`g‘D•th
(0), 
codeD–Qp
, 
codeChromaQpAdj
 );

5632 
ruiB™s
 +ð
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

5634 
	}
}

5646 
Void
 
	gTEncS—rch
::
	$xExtDIFUpSam¶šgH
Ð
TComP©‹º
* 
·‰”n
 )

5648 
IÁ
 
width
 = 
·‰”n
->
	`g‘ROIYWidth
();

5649 
IÁ
 
height
 = 
·‰”n
->
	`g‘ROIYHeight
();

5650 
IÁ
 
¤cSŒide
 = 
·‰”n
->
	`g‘P©‹ºLSŒide
();

5652 
IÁ
 
štSŒide
 = 
m_fž‹»dBlockTmp
[0].
	`g‘SŒide
(
COMPONENT_Y
);

5653 
IÁ
 
d¡SŒide
 = 
m_fž‹»dBlock
[0][0].
	`g‘SŒide
(
COMPONENT_Y
);

5654 
P–
 *
štPŒ
;

5655 
P–
 *
d¡PŒ
;

5656 
IÁ
 
fž‹rSize
 = 
NTAPS_LUMA
;

5657 
IÁ
 
h®fFž‹rSize
 = (
fž‹rSize
>>1);

5658 
P–
 *
¤cPŒ
 = 
·‰”n
->
	`g‘ROIY
(è- 
h®fFž‹rSize
*
¤cSŒide
 - 1;

5660 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
m_fž‹»dBlock
[0][0].
	`g‘ChromaFÜm©
();

5662 
m_if
.
	`fž‹rHÜ
(
COMPONENT_Y
, 
¤cPŒ
, 
¤cSŒide
, 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(COMPONENT_Y), 
štSŒide
, 
width
+1, 
height
+
fž‹rSize
, 0, 
çl£
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5663 
m_if
.
	`fž‹rHÜ
(
COMPONENT_Y
, 
¤cPŒ
, 
¤cSŒide
, 
m_fž‹»dBlockTmp
[2].
	`g‘Addr
(COMPONENT_Y), 
štSŒide
, 
width
+1, 
height
+
fž‹rSize
, 2, 
çl£
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5665 
štPŒ
 = 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(
COMPONENT_Y
è+ 
h®fFž‹rSize
 * 
štSŒide
 + 1;

5666 
d¡PŒ
 = 
m_fž‹»dBlock
[0][0].
	`g‘Addr
(
COMPONENT_Y
);

5667 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
+0, 
height
+0, 0, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5669 
štPŒ
 = 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
 + 1;

5670 
d¡PŒ
 = 
m_fž‹»dBlock
[2][0].
	`g‘Addr
(
COMPONENT_Y
);

5671 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
+0, 
height
+1, 2, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5673 
štPŒ
 = 
m_fž‹»dBlockTmp
[2].
	`g‘Addr
(
COMPONENT_Y
è+ 
h®fFž‹rSize
 * 
štSŒide
;

5674 
d¡PŒ
 = 
m_fž‹»dBlock
[0][2].
	`g‘Addr
(
COMPONENT_Y
);

5675 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
+1, 
height
+0, 0, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5677 
štPŒ
 = 
m_fž‹»dBlockTmp
[2].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5678 
d¡PŒ
 = 
m_fž‹»dBlock
[2][2].
	`g‘Addr
(
COMPONENT_Y
);

5679 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
+1, 
height
+1, 2, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5680 
	}
}

5693 
Void
 
	gTEncS—rch
::
	$xExtDIFUpSam¶šgQ
Ð
TComP©‹º
* 
·‰”n
, 
TComMv
 
h®fP–Ref
 )

5695 
IÁ
 
width
 = 
·‰”n
->
	`g‘ROIYWidth
();

5696 
IÁ
 
height
 = 
·‰”n
->
	`g‘ROIYHeight
();

5697 
IÁ
 
¤cSŒide
 = 
·‰”n
->
	`g‘P©‹ºLSŒide
();

5699 
P–
 *
¤cPŒ
;

5700 
IÁ
 
štSŒide
 = 
m_fž‹»dBlockTmp
[0].
	`g‘SŒide
(
COMPONENT_Y
);

5701 
IÁ
 
d¡SŒide
 = 
m_fž‹»dBlock
[0][0].
	`g‘SŒide
(
COMPONENT_Y
);

5702 
P–
 *
štPŒ
;

5703 
P–
 *
d¡PŒ
;

5704 
IÁ
 
fž‹rSize
 = 
NTAPS_LUMA
;

5706 
IÁ
 
h®fFž‹rSize
 = (
fž‹rSize
>>1);

5708 
IÁ
 
extHeight
 = (
h®fP–Ref
.
	`g‘V”
(è=ð0è? 
height
 + 
fž‹rSize
 : height + filterSize-1;

5710 cÚ¡ 
ChromaFÜm©
 
chFmt
 = 
m_fž‹»dBlock
[0][0].
	`g‘ChromaFÜm©
();

5713 
¤cPŒ
 = 
·‰”n
->
	`g‘ROIY
(è- 
h®fFž‹rSize
 * 
¤cSŒide
 - 1;

5714 
štPŒ
 = 
m_fž‹»dBlockTmp
[1].
	`g‘Addr
(
COMPONENT_Y
);

5715 ià(
h®fP–Ref
.
	`g‘V”
() > 0)

5717 
¤cPŒ
 +ð
¤cSŒide
;

5719 ià(
h®fP–Ref
.
	`g‘HÜ
() >= 0)

5721 
¤cPŒ
 += 1;

5723 
m_if
.
	`fž‹rHÜ
(
COMPONENT_Y
, 
¤cPŒ
, 
¤cSŒide
, 
štPŒ
, 
štSŒide
, 
width
, 
extHeight
, 1, 
çl£
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5726 
¤cPŒ
 = 
·‰”n
->
	`g‘ROIY
(è- 
h®fFž‹rSize
*
¤cSŒide
 - 1;

5727 
štPŒ
 = 
m_fž‹»dBlockTmp
[3].
	`g‘Addr
(
COMPONENT_Y
);

5728 ià(
h®fP–Ref
.
	`g‘V”
() > 0)

5730 
¤cPŒ
 +ð
¤cSŒide
;

5732 ià(
h®fP–Ref
.
	`g‘HÜ
() > 0)

5734 
¤cPŒ
 += 1;

5736 
m_if
.
	`fž‹rHÜ
(
COMPONENT_Y
, 
¤cPŒ
, 
¤cSŒide
, 
štPŒ
, 
štSŒide
, 
width
, 
extHeight
, 3, 
çl£
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5739 
štPŒ
 = 
m_fž‹»dBlockTmp
[1].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5740 
d¡PŒ
 = 
m_fž‹»dBlock
[1][1].
	`g‘Addr
(
COMPONENT_Y
);

5741 ià(
h®fP–Ref
.
	`g‘V”
() == 0)

5743 
štPŒ
 +ð
štSŒide
;

5745 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 1, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5748 
štPŒ
 = 
m_fž‹»dBlockTmp
[1].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5749 
d¡PŒ
 = 
m_fž‹»dBlock
[3][1].
	`g‘Addr
(
COMPONENT_Y
);

5750 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 3, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5752 ià(
h®fP–Ref
.
	`g‘V”
() != 0)

5755 
štPŒ
 = 
m_fž‹»dBlockTmp
[1].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5756 
d¡PŒ
 = 
m_fž‹»dBlock
[2][1].
	`g‘Addr
(
COMPONENT_Y
);

5757 ià(
h®fP–Ref
.
	`g‘V”
() == 0)

5759 
štPŒ
 +ð
štSŒide
;

5761 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 2, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5764 
štPŒ
 = 
m_fž‹»dBlockTmp
[3].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5765 
d¡PŒ
 = 
m_fž‹»dBlock
[2][3].
	`g‘Addr
(
COMPONENT_Y
);

5766 ià(
h®fP–Ref
.
	`g‘V”
() == 0)

5768 
štPŒ
 +ð
štSŒide
;

5770 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 2, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5775 
štPŒ
 = 
m_fž‹»dBlockTmp
[1].
	`g‘Addr
(
COMPONENT_Y
è+ 
h®fFž‹rSize
 * 
štSŒide
;

5776 
d¡PŒ
 = 
m_fž‹»dBlock
[0][1].
	`g‘Addr
(
COMPONENT_Y
);

5777 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 0, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5780 
štPŒ
 = 
m_fž‹»dBlockTmp
[3].
	`g‘Addr
(
COMPONENT_Y
è+ 
h®fFž‹rSize
 * 
štSŒide
;

5781 
d¡PŒ
 = 
m_fž‹»dBlock
[0][3].
	`g‘Addr
(
COMPONENT_Y
);

5782 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 0, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5785 ià(
h®fP–Ref
.
	`g‘HÜ
() != 0)

5788 
štPŒ
 = 
m_fž‹»dBlockTmp
[2].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5789 
d¡PŒ
 = 
m_fž‹»dBlock
[1][2].
	`g‘Addr
(
COMPONENT_Y
);

5790 ià(
h®fP–Ref
.
	`g‘HÜ
() > 0)

5792 
štPŒ
 += 1;

5794 ià(
h®fP–Ref
.
	`g‘V”
() >= 0)

5796 
štPŒ
 +ð
štSŒide
;

5798 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 1, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5801 
štPŒ
 = 
m_fž‹»dBlockTmp
[2].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5802 
d¡PŒ
 = 
m_fž‹»dBlock
[3][2].
	`g‘Addr
(
COMPONENT_Y
);

5803 ià(
h®fP–Ref
.
	`g‘HÜ
() > 0)

5805 
štPŒ
 += 1;

5807 ià(
h®fP–Ref
.
	`g‘V”
() > 0)

5809 
štPŒ
 +ð
štSŒide
;

5811 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 3, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5816 
štPŒ
 = 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
 + 1;

5817 
d¡PŒ
 = 
m_fž‹»dBlock
[1][0].
	`g‘Addr
(
COMPONENT_Y
);

5818 ià(
h®fP–Ref
.
	`g‘V”
() >= 0)

5820 
štPŒ
 +ð
štSŒide
;

5822 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 1, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5825 
štPŒ
 = 
m_fž‹»dBlockTmp
[0].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
 + 1;

5826 
d¡PŒ
 = 
m_fž‹»dBlock
[3][0].
	`g‘Addr
(
COMPONENT_Y
);

5827 ià(
h®fP–Ref
.
	`g‘V”
() > 0)

5829 
štPŒ
 +ð
štSŒide
;

5831 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 3, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5835 
štPŒ
 = 
m_fž‹»dBlockTmp
[3].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5836 
d¡PŒ
 = 
m_fž‹»dBlock
[1][3].
	`g‘Addr
(
COMPONENT_Y
);

5837 ià(
h®fP–Ref
.
	`g‘V”
() == 0)

5839 
štPŒ
 +ð
štSŒide
;

5841 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 1, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5844 
štPŒ
 = 
m_fž‹»dBlockTmp
[3].
	`g‘Addr
(
COMPONENT_Y
è+ (
h®fFž‹rSize
-1è* 
štSŒide
;

5845 
d¡PŒ
 = 
m_fž‹»dBlock
[3][3].
	`g‘Addr
(
COMPONENT_Y
);

5846 
m_if
.
	`fž‹rV”
(
COMPONENT_Y
, 
štPŒ
, 
štSŒide
, 
d¡PŒ
, 
d¡SŒide
, 
width
, 
height
, 3, 
çl£
, 
Œue
, 
chFmt
, 
·‰”n
->
	`g‘B™D•thY
());

5847 
	}
}

5854 
Void
 
	gTEncS—rch
::
	$£tWpSÿlšgDi¡P¬am
Ð
TComD©aCU
* 
pcCU
, 
IÁ
 
iRefIdx
, 
RefPicLi¡
 
eRefPicLi¡Cur
 )

5856 iàÐ
iRefIdx
<0 )

5858 
m_cDi¡P¬am
.
bAµlyWeight
 = 
çl£
;

5862 
TComSliû
 *
pcSliû
 = 
pcCU
->
	`g‘Sliû
();

5863 
WPSÿlšgP¬am
 *
wp0
 , *
wp1
;

5865 
m_cDi¡P¬am
.
bAµlyWeight
 = ( 
pcSliû
->
	`g‘SliûTy³
()==
P_SLICE
 &&…cSliû->
	`‹¡WeightP»d
(èè|| (…cSliû->g‘SliûTy³()==
B_SLICE
 &&…cSliû->
	`‹¡WeightBiP»d
() ) ;

5867 iàÐ!
m_cDi¡P¬am
.
bAµlyWeight
 )

5872 
IÁ
 
iRefIdx0
 = ( 
eRefPicLi¡Cur
 =ð
REF_PIC_LIST_0
 ) ? 
iRefIdx
 : (-1);

5873 
IÁ
 
iRefIdx1
 = ( 
eRefPicLi¡Cur
 =ð
REF_PIC_LIST_1
 ) ? 
iRefIdx
 : (-1);

5875 
	`g‘WpSÿlšg
Ð
pcCU
, 
iRefIdx0
, 
iRefIdx1
, 
wp0
 , 
wp1
 );

5877 iàÐ
iRefIdx0
 < 0 )

5879 
wp0
 = 
NULL
;

5881 iàÐ
iRefIdx1
 < 0 )

5883 
wp1
 = 
NULL
;

5886 
m_cDi¡P¬am
.
wpCur
 = 
NULL
;

5888 iàÐ
eRefPicLi¡Cur
 =ð
REF_PIC_LIST_0
 )

5890 
m_cDi¡P¬am
.
wpCur
 = 
wp0
;

5894 
m_cDi¡P¬am
.
wpCur
 = 
wp1
;

5896 
	}
}

	@source/Lib/TLibEncoder/TEncSearch.h

38 #iâdeà
__TENCSEARCH__


39 
	#__TENCSEARCH__


	)

42 
	~"TLibCommÚ/TComYuv.h
"

43 
	~"TLibCommÚ/TComMÙiÚInfo.h
"

44 
	~"TLibCommÚ/TComP©‹º.h
"

45 
	~"TLibCommÚ/TComP»diùiÚ.h
"

46 
	~"TLibCommÚ/TComTrQuªt.h
"

47 
	~"TLibCommÚ/TComPic.h
"

48 
	~"TLibCommÚ/TComReùªgË.h
"

49 
	~"TEncEÁrÝy.h
"

50 
	~"TEncSbac.h
"

51 
	~"TEncCfg.h
"

57 
þass
 
	gTEncCu
;

63 cÚ¡ 
UIÁ
 
	gMAX_NUM_REF_LIST_ADAPT_SR
=2;

64 cÚ¡ 
UIÁ
 
	gMAX_IDX_ADAPT_SR
=33;

65 cÚ¡ 
UIÁ
 
	gNUM_MV_PREDICTORS
=3;

68 þas 
	cTEncS—rch
 : 
public
 
TComP»diùiÚ


70 
´iv©e
:

71 
TCÛff
** 
m_µcQTTempCÛff
[
MAX_NUM_COMPONENT
 ];

72 #ià
ADAPTIVE_QP_SELECTION


73 
TCÛff
** 
	mm_µcQTTempA¾CÛff
[
MAX_NUM_COMPONENT
];

75 
UCh¬
* 
	mm_puhQTTempTrIdx
;

76 
UCh¬
* 
	mm_puhQTTempCbf
[
MAX_NUM_COMPONENT
];

78 
TComYuv
* 
	mm_pcQTTempTComYuv
;

79 
TComYuv
 
	mm_tmpYuvP»d
;

81 
SCh¬
* 
	mm_phQTTempCrossCompÚ’tP»diùiÚAÍha
[
MAX_NUM_COMPONENT
];

82 
P–
* 
	mm_pSh¬edP»dT¿nsfÜmSk
[
MAX_NUM_COMPONENT
];

83 
TCÛff
* 
	mm_pcQTTempTUCÛff
[
MAX_NUM_COMPONENT
];

84 
UCh¬
* 
	mm_puhQTTempT¿nsfÜmSkFÏg
[
MAX_NUM_COMPONENT
];

85 
TComYuv
 
	mm_pcQTTempT¿nsfÜmSkTComYuv
;

86 #ià
ADAPTIVE_QP_SELECTION


87 
TCÛff
* 
	mm_µcQTTempTUA¾CÛff
[
MAX_NUM_COMPONENT
];

90 
	m´Ùeùed
:

92 
TEncCfg
* 
m_pcEncCfg
;

95 
TComTrQuªt
* 
	mm_pcTrQuªt
;

96 
TComRdCo¡
* 
	mm_pcRdCo¡
;

97 
TEncEÁrÝy
* 
	mm_pcEÁrÝyCod”
;

100 
IÁ
 
	mm_iS—rchRªge
;

101 
IÁ
 
	mm_b»dS—rchRªge
;

102 
MES—rchM‘hod
 
	mm_mÙiÚE¡im©iÚS—rchM‘hod
;

103 
IÁ
 
	mm_¯iAd­tSR
[
MAX_NUM_REF_LIST_ADAPT_SR
][
MAX_IDX_ADAPT_SR
];

104 
TComMv
 
	mm_acMvP»diùÜs
[
NUM_MV_PREDICTORS
];

107 
TEncSbac
*** 
	mm_µpcRDSbacCod”
;

108 
TEncSbac
* 
	mm_pcRDGoOnSbacCod”
;

109 
Di¡P¬am
 
	mm_cDi¡P¬am
;

112 
P–
* 
	mm_pTempP–
;

116 
UIÁ
 
	mm_auiMVPIdxCo¡
[
AMVP_MAX_NUM_CANDS
+1][AMVP_MAX_NUM_CANDS+1];

118 
TComMv
 
	mm_š‹g”Mv2Nx2N
[
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
];

120 
BoÞ
 
	mm_isIn™Ÿlized
;

121 
	mpublic
:

122 
TEncS—rch
();

123 
	mvœtu®
 ~
TEncS—rch
();

125 
Void
 
š™
(
TEncCfg
* 
pcEncCfg
,

126 
TComTrQuªt
* 
pcTrQuªt
,

127 
IÁ
 
iS—rchRªge
,

128 
IÁ
 
b»dS—rchRªge
,

129 
MES—rchM‘hod
 
mÙiÚE¡im©iÚS—rchM‘hod
,

130 cÚ¡ 
UIÁ
 
maxCUWidth
,

131 cÚ¡ 
UIÁ
 
maxCUHeight
,

132 cÚ¡ 
UIÁ
 
maxTÙ®CUD•th
,

133 
TEncEÁrÝy
* 
pcEÁrÝyCod”
,

134 
TComRdCo¡
* 
pcRdCo¡
,

135 
TEncSbac
*** 
µpcRDSbacCod”
,

136 
TEncSbac
* 
pcRDGoOnSbacCod”
 );

138 
Void
 
de¡roy
();

140 
	m´Ùeùed
:

143 
Di¡ÜtiÚ
 
xP©‹ºRefšem’t
Ð
TComP©‹º
* 
pcP©‹ºKey
,

144 
TComMv
 
ba£RefMv
,

145 
IÁ
 
iF¿c
, 
TComMv
& 
rcMvF¿c
, 
BoÞ
 
bAÎowU£OfHadam¬d


150 cÚ¡ 
P–
* 
	mpiRefY
;

151 
IÁ
 
	miYSŒide
;

152 
IÁ
 
	miBe¡X
;

153 
IÁ
 
	miBe¡Y
;

154 
UIÁ
 
	muiBe¡Round
;

155 
UIÁ
 
	muiBe¡Di¡ªû
;

156 
Di¡ÜtiÚ
 
	muiBe¡Sad
;

157 
UCh¬
 
	mucPoštNr
;

158 } 
	tIÁTZS—rchSŒuù
;

161 
__šlše
 
Void
 
xTZS—rchH–p
 ( cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
IÁ
 
iS—rchX
, cÚ¡ IÁ 
iS—rchY
, cÚ¡ 
UCh¬
 
ucPoštNr
, cÚ¡ 
UIÁ
 
uiDi¡ªû
 );

162 
__šlše
 
Void
 
xTZ2PoštS—rch
 ( cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
, cÚ¡ TComMv* cÚ¡ 
pcMvSrchRngRB
 );

163 
__šlše
 
Void
 
xTZ8PoštSqu¬eS—rch
 ( cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
, cÚ¡ TComMv* cÚ¡ 
pcMvSrchRngRB
, cÚ¡ 
IÁ
 
iS¹X
, cÚ¡ IÁ 
iS¹Y
, cÚ¡ IÁ 
iDi¡
 );

164 
__šlše
 
Void
 
xTZ8PoštDŸmÚdS—rch
ÐcÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
, 
IÁTZS—rchSŒuù
& 
rcSŒuù
, cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
, cÚ¡ TComMv* cÚ¡ 
pcMvSrchRngRB
, cÚ¡ 
IÁ
 
iS¹X
, cÚ¡ IÁ 
iS¹Y
, cÚ¡ IÁ 
iDi¡
, cÚ¡ 
BoÞ
 
bCheckCÜÃrsAtDi¡1
 );

166 
Void
 
xG‘IÁ”P»diùiÚE¼Ü
Ð
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcYuvOrg
, 
IÁ
 
iP¬tIdx
, 
Di¡ÜtiÚ
& 
ruiSAD
, 
BoÞ
 
Hadam¬d
 );

168 
	gpublic
:

169 
Void
 
e¡IÁ¿P»dLumaQT
 ( 
TComD©aCU
* 
pcCU
,

170 
TComYuv
* 
pcOrgYuv
,

171 
TComYuv
* 
pcP»dYuv
,

172 
TComYuv
* 
pcResiYuv
,

173 
TComYuv
* 
pcRecoYuv
,

174 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE]

175 
DEBUG_STRING_FN_DECLARE
(
sDebug
));

177 
Void
 
e¡IÁ¿P»dChromaQT
 ( 
TComD©aCU
* 
pcCU
,

178 
TComYuv
* 
pcOrgYuv
,

179 
TComYuv
* 
pcP»dYuv
,

180 
TComYuv
* 
pcResiYuv
,

181 
TComYuv
* 
pcRecoYuv
,

182 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE]

183 
DEBUG_STRING_FN_DECLARE
(
sDebug
));

186 
Void
 
´edIÁ”S—rch
 ( 
TComD©aCU
* 
pcCU
,

187 
TComYuv
* 
pcOrgYuv
,

188 
TComYuv
* 
pcP»dYuv
,

189 
TComYuv
* 
pcResiYuv
,

190 
TComYuv
* 
pcRecoYuv


191 
DEBUG_STRING_FN_DECLARE
(
sDebug
),

192 
BoÞ
 
bU£Res
 = 
çl£


193 #ià
AMP_MRG


194 ,
BoÞ
 
bU£MRG
 = 
çl£


199 
Void
 
’codeResAndC®cRdIÁ”CU
Ð
TComD©aCU
* 
pcCU
,

200 
TComYuv
* 
pcYuvOrg
,

201 
TComYuv
* 
pcYuvP»d
,

202 
TComYuv
* 
pcYuvResi
,

203 
TComYuv
* 
pcYuvResiBe¡
,

204 
TComYuv
* 
pcYuvRec
,

205 
BoÞ
 
bSkResidu®


206 
DEBUG_STRING_FN_DECLARE
(
sDebug
) );

209 
Void
 
	$£tAd­tiveS—rchRªge
 ( 
IÁ
 
iDœ
, IÁ 
iRefIdx
, IÁ 
iS—rchRªge
è{ 
	`as£¹
(iDœ < 
MAX_NUM_REF_LIST_ADAPT_SR
 && iRefIdx<
	`IÁ
(
MAX_IDX_ADAPT_SR
)); 
m_¯iAd­tSR
[iDœ][iRefIdx] = iS—rchRªge; 
	}
}

211 
Void
 
xEncPCM
 (
TComD©aCU
* 
pcCU
, 
UIÁ
 
uiAbsP¬tIdx
, 
P–
* 
piOrg
, P–* 
piPCM
, P–* 
piP»d
, P–* 
piResi
, P–* 
piReco
, UIÁ 
uiSŒide
, UIÁ 
uiWidth
, UIÁ 
uiHeight
, cÚ¡ 
CompÚ’tID
 
compID
 );

212 
Void
 
IPCMS—rch
 (
TComD©aCU
* 
pcCU
, 
TComYuv
* 
pcOrgYuv
, TComYuv* 
½cP»dYuv
, TComYuv* 
½cResiYuv
, TComYuv* 
½cRecoYuv
 );

213 
	g´Ùeùed
:

219 
Void
 
xEncSubdivCbfQT
 ( 
TComTU
 &
rTu
,

220 
BoÞ
 
bLuma
,

221 
BoÞ
 
bChroma
 );

223 
Void
 
xEncCÛffQT
 ( 
TComTU
 &
rTu
,

224 
CompÚ’tID
 
compÚ’t
,

225 
BoÞ
 
bR—lCÛff
 );

226 
Void
 
xEncIÁ¿H—d”
 ( 
TComD©aCU
* 
pcCU
,

227 
UIÁ
 
uiTrD•th
,

228 
UIÁ
 
uiAbsP¬tIdx
,

229 
BoÞ
 
bLuma
,

230 
BoÞ
 
bChroma
 );

231 
UIÁ
 
xG‘IÁ¿B™sQT
 ( 
TComTU
 &
rTu
,

232 
BoÞ
 
bLuma
,

233 
BoÞ
 
bChroma
,

234 
BoÞ
 
bR—lCÛff
 );

236 
UIÁ
 
xG‘IÁ¿B™sQTChroma
 ( 
TComTU
 &
rTu
,

237 
CompÚ’tID
 
compID
,

238 
BoÞ
 
bR—lCÛff
 );

240 
Void
 
xIÁ¿CodšgTUBlock
 ( 
TComYuv
* 
pcOrgYuv
,

241 
TComYuv
* 
pcP»dYuv
,

242 
TComYuv
* 
pcResiYuv
,

243 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

244 cÚ¡ 
BoÞ
 
checkCrossCP»diùiÚ
,

245 
Di¡ÜtiÚ
& 
ruiDi¡
,

246 cÚ¡ 
CompÚ’tID
 
compID
,

247 
TComTU
 &
rTu


248 
DEBUG_STRING_FN_DECLARE
(
sTe¡
)

249 ,
IÁ
 
deçuÉ0Save1Lßd2
 = 0

252 
Void
 
xRecurIÁ¿CodšgLumaQT
 ( 
TComYuv
* 
pcOrgYuv
,

253 
TComYuv
* 
pcP»dYuv
,

254 
TComYuv
* 
pcResiYuv
,

255 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

256 
Di¡ÜtiÚ
& 
ruiDi¡Y
,

257 #ià
HHI_RQT_INTRA_SPEEDUP


258 
BoÞ
 
bCheckFœ¡
,

260 
DoubË
& 
dRDCo¡
,

261 
TComTU
 &
rTu


262 
DEBUG_STRING_FN_DECLARE
(
sDebug
));

264 
Void
 
xS‘IÁ¿ResuÉLumaQT
 ( 
TComYuv
* 
pcRecoYuv
,

265 
TComTU
 &
rTu
);

267 
Void
 
xStÜeCrossCompÚ’tP»diùiÚResuÉ
 ( 
P–
 *
pResiLuma
,

268 cÚ¡ 
P–
 *
pBe¡Luma
,

269 
TComTU
 &
rTu
,

270 cÚ¡ 
IÁ
 
xOff£t
,

271 cÚ¡ 
IÁ
 
yOff£t
,

272 cÚ¡ 
IÁ
 
¡rideResi
,

273 cÚ¡ 
IÁ
 
¡rideBe¡
 );

275 
SCh¬
 
xC®cCrossCompÚ’tP»diùiÚAÍha
 ( 
TComTU
 &
rTu
,

276 cÚ¡ 
CompÚ’tID
 
compID
,

277 cÚ¡ 
P–
* 
piResiL
,

278 cÚ¡ 
P–
* 
piResiC
,

279 cÚ¡ 
IÁ
 
width
,

280 cÚ¡ 
IÁ
 
height
,

281 cÚ¡ 
IÁ
 
¡rideL
,

282 cÚ¡ 
IÁ
 
¡rideC
 );

284 
Void
 
xRecurIÁ¿ChromaCodšgQT
 ( 
TComYuv
* 
pcOrgYuv
,

285 
TComYuv
* 
pcP»dYuv
,

286 
TComYuv
* 
pcResiYuv
,

287 
P–
 
»siLuma
[
NUMBER_OF_STORED_RESIDUAL_TYPES
][
MAX_CU_SIZE
 * MAX_CU_SIZE],

288 
Di¡ÜtiÚ
& 
ruiDi¡
,

289 
TComTU
 &
rTu


290 
DEBUG_STRING_FN_DECLARE
(
sDebug
));

292 
Void
 
xS‘IÁ¿ResuÉChromaQT
 ( 
TComYuv
* 
pcRecoYuv
, 
TComTU
 &
rTu
);

294 
Void
 
xStÜeIÁ¿ResuÉQT
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
);

295 
Void
 
xLßdIÁ¿ResuÉQT
 ( cÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
);

302 
Void
 
xE¡im©eMvP»dAMVP
 ( 
TComD©aCU
* 
pcCU
,

303 
TComYuv
* 
pcOrgYuv
,

304 
UIÁ
 
uiP¬tIdx
,

305 
RefPicLi¡
 
eRefPicLi¡
,

306 
IÁ
 
iRefIdx
,

307 
TComMv
& 
rcMvP»d
,

308 
BoÞ
 
bFžËd
 = 
çl£


309 , 
Di¡ÜtiÚ
* 
puiDi¡BiP
 = 
NULL


312 
Void
 
xCheckBe¡MVP
 ( 
TComD©aCU
* 
pcCU
,

313 
RefPicLi¡
 
eRefPicLi¡
,

314 
TComMv
 
cMv
,

315 
TComMv
& 
rcMvP»d
,

316 
IÁ
& 
riMVPIdx
,

317 
UIÁ
& 
ruiB™s
,

318 
Di¡ÜtiÚ
& 
ruiCo¡
 );

320 
Di¡ÜtiÚ
 
xG‘Tem¶©eCo¡
 ( 
TComD©aCU
* 
pcCU
,

321 
UIÁ
 
uiP¬tAddr
,

322 
TComYuv
* 
pcOrgYuv
,

323 
TComYuv
* 
pcTem¶©eCªd
,

324 
TComMv
 
cMvCªd
,

325 
IÁ
 
iMVPIdx
,

326 
IÁ
 
iMVPNum
,

327 
RefPicLi¡
 
eRefPicLi¡
,

328 
IÁ
 
iRefIdx
,

329 
IÁ
 
iSizeX
,

330 
IÁ
 
iSizeY


334 
Void
 
xCÝyAMVPInfo
 ( 
AMVPInfo
* 
pSrc
, AMVPInfo* 
pD¡
 );

335 
UIÁ
 
xG‘MvpIdxB™s
 ( 
IÁ
 
iIdx
, IÁ 
iNum
 );

336 
Void
 
xG‘BlkB™s
 ( 
P¬tSize
 
eCUMode
, 
BoÞ
 
bPSliû
, 
IÁ
 
iP¬tIdx
, 
UIÁ
 
uiLa¡Mode
, UIÁ 
uiBlkB™
[3]);

338 
Void
 
xM”geE¡im©iÚ
 ( 
TComD©aCU
* 
pcCU
,

339 
TComYuv
* 
pcYuvOrg
,

340 
IÁ
 
iP¬tIdx
,

341 
UIÁ
& 
uiIÁ”Dœ
,

342 
TComMvF›ld
* 
·cMvF›ld
,

343 
UIÁ
& 
uiM”geIndex
,

344 
Di¡ÜtiÚ
& 
ruiCo¡
,

345 
TComMvF›ld
* 
cMvF›ldNeighbours
,

346 
UCh¬
* 
uhIÁ”DœNeighbours
,

347 
IÁ
& 
numV®idM”geCªd


350 
Void
 
xRe¡riùB»dM”geCªd
 ( 
TComD©aCU
* 
pcCU
,

351 
UIÁ
 
puIdx
,

352 
TComMvF›ld
* 
mvF›ldNeighbours
,

353 
UCh¬
* 
š‹rDœNeighbours
,

354 
IÁ
 
numV®idM”geCªd
 );

361 
Void
 
xMÙiÚE¡im©iÚ
 ( 
TComD©aCU
* 
pcCU
,

362 
TComYuv
* 
pcYuvOrg
,

363 
IÁ
 
iP¬tIdx
,

364 
RefPicLi¡
 
eRefPicLi¡
,

365 
TComMv
* 
pcMvP»d
,

366 
IÁ
 
iRefIdxP»d
,

367 
TComMv
& 
rcMv
,

368 
UIÁ
& 
ruiB™s
,

369 
Di¡ÜtiÚ
& 
ruiCo¡
,

370 
BoÞ
 
bBi
 = 
çl£
 );

372 
Void
 
xTZS—rch
 ( cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

373 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

374 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

375 cÚ¡ 
IÁ
 
iRefSŒide
,

376 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

377 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

378 
TComMv
& 
rcMv
,

379 
Di¡ÜtiÚ
& 
ruiSAD
,

380 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d
,

381 cÚ¡ 
BoÞ
 
bEx‹ndedS‘tšgs


384 
Void
 
xTZS—rchS–eùive
 ( cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

385 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

386 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

387 cÚ¡ 
IÁ
 
iRefSŒide
,

388 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

389 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

390 
TComMv
& 
rcMv
,

391 
Di¡ÜtiÚ
& 
ruiSAD
,

392 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d


395 
Void
 
xS‘S—rchRªge
 ( cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

396 cÚ¡ 
TComMv
& 
cMvP»d
,

397 cÚ¡ 
IÁ
 
iSrchRng
,

398 
TComMv
& 
rcMvSrchRngLT
,

399 #ià!
MCTS_ENC_CHECK


400 
TComMv
& 
rcMvSrchRngRB
 );

402 
	gTComMv
& 
	grcMvSrchRngRB
,

403 cÚ¡ 
TComP©‹º
* cÚ¡ 
	gpcP©‹ºKey
 );

406 #ià
MCTS_ENC_CHECK


407 
Void
 
xIn™TžeBÜd”s
(cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
, 
TComP©‹º
* 
pcP©‹ºKey
);

410 
Void
 
xP©‹ºS—rchFa¡
 ( cÚ¡ 
TComD©aCU
* cÚ¡ 
pcCU
,

411 cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

412 cÚ¡ 
P–
* cÚ¡ 
piRefY
,

413 cÚ¡ 
IÁ
 
iRefSŒide
,

414 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

415 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

416 
TComMv
& 
rcMv
,

417 
Di¡ÜtiÚ
& 
ruiSAD
,

418 cÚ¡ 
TComMv
* cÚ¡ 
pIÁeg”Mv2Nx2NP»d


421 
Void
 
xP©‹ºS—rch
 ( cÚ¡ 
TComP©‹º
* cÚ¡ 
pcP©‹ºKey
,

422 cÚ¡ 
P–
* 
piRefY
,

423 cÚ¡ 
IÁ
 
iRefSŒide
,

424 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngLT
,

425 cÚ¡ 
TComMv
* cÚ¡ 
pcMvSrchRngRB
,

426 
TComMv
& 
rcMv
,

427 
Di¡ÜtiÚ
& 
ruiSAD
 );

429 
Void
 
xP©‹ºS—rchF¿cDIF
 (

430 
BoÞ
 
bIsLos¦essCoded
,

431 
TComP©‹º
* 
pcP©‹ºKey
,

432 
P–
* 
piRefY
,

433 
IÁ
 
iRefSŒide
,

434 
TComMv
* 
pcMvIÁ
,

435 
TComMv
& 
rcMvH®f
,

436 
TComMv
& 
rcMvQ‹r
,

437 
Di¡ÜtiÚ
& 
ruiCo¡


440 
Void
 
xExtDIFUpSam¶šgH
Ð
TComP©‹º
* 
pcP©‹º
 );

441 
Void
 
xExtDIFUpSam¶šgQ
Ð
TComP©‹º
* 
pcP©‹ºKey
, 
TComMv
 
h®fP–Ref
 );

448 
Void
 
xEncodeIÁ”Residu®QT
ÐcÚ¡ 
CompÚ’tID
 
compID
, 
TComTU
 &
rTu
 );

449 
Void
 
xE¡im©eIÁ”Residu®QT
Ð
TComYuv
* 
pcResi
, 
DoubË
 &
rdCo¡
, 
UIÁ
 &
ruiB™s
, 
Di¡ÜtiÚ
 &
ruiDi¡
, Di¡ÜtiÚ *
puiZ”oDi¡
, 
TComTU
 &
rTu
 
DEBUG_STRING_FN_DECLARE
(
sDebug
) );

450 
Void
 
xS‘IÁ”Residu®QTD©a
Ð
TComYuv
* 
pcResi
, 
BoÞ
 
bS·tŸl
, 
TComTU
 &
rTu
 );

452 
UIÁ
 
xModeB™sIÁ¿
 ( 
TComD©aCU
* 
pcCU
, UIÁ 
uiMode
, UIÁ 
uiP¬tOff£t
, UIÁ 
uiD•th
, cÚ¡ 
ChªÃlTy³
 
compID
 );

453 
UIÁ
 
xUpd©eCªdLi¡
ÐUIÁ 
uiMode
, 
DoubË
 
uiCo¡
, UIÁ 
uiFa¡CªdNum
, UIÁ * 
CªdModeLi¡
, DoubË * 
CªdCo¡Li¡
 );

459 
Void
 
xAddSymbÞB™sIÁ”
 ( 
TComD©aCU
* 
pcCU
,

460 
UIÁ
& 
ruiB™s
);

462 
Void
 
£tWpSÿlšgDi¡P¬am
Ð
TComD©aCU
* 
pcCU
, 
IÁ
 
iRefIdx
, 
RefPicLi¡
 
eRefPicLi¡Cur
 );

463 
šlše
 
Void
 
	$£tDi¡P¬amComp
Ð
CompÚ’tID
 
compIdx
 ) { 
m_cDi¡P¬am
.compIdx = compIdx; 
	}
}

	@source/Lib/TLibEncoder/TEncSlice.cpp

38 
	~"TEncTÝ.h
"

39 
	~"TEncSliû.h
"

40 
	~<m©h.h
>

49 
	gTEncSliû
::
	$TEncSliû
()

50 : 
	$m_’cCABACTabËIdx
(
I_SLICE
)

52 
	}
}

54 
TEncSliû
::~
	$TEncSliû
()

56 
	`de¡roy
();

57 
	}
}

59 
Void
 
	gTEncSliû
::
	$ü—‹
Ð
IÁ
 
iWidth
, IÁ 
iHeight
, 
ChromaFÜm©
 
chromaFÜm©
, 
UIÁ
 
iMaxCUWidth
, UIÁ 
iMaxCUHeight
, 
UCh¬
 
uhTÙ®D•th
 )

62 
m_picYuvP»d
.
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©
, 
iMaxCUWidth
, 
iMaxCUHeight
, 
uhTÙ®D•th
, 
Œue
 );

65 
m_picYuvResi
.
	`ü—‹
Ð
iWidth
, 
iHeight
, 
chromaFÜm©
, 
iMaxCUWidth
, 
iMaxCUHeight
, 
uhTÙ®D•th
, 
Œue
 );

66 
	}
}

68 
Void
 
	gTEncSliû
::
	$de¡roy
()

70 
m_picYuvP»d
.
	`de¡roy
();

71 
m_picYuvResi
.
	`de¡roy
();

74 
m_vdRdPicLambda
.
	`þ—r
();

75 
m_vdRdPicQp
.
	`þ—r
();

76 
m_viRdPicQp
.
	`þ—r
();

77 
	}
}

79 
Void
 
	gTEncSliû
::
	$š™
Ð
TEncTÝ
* 
pcEncTÝ
 )

81 
m_pcCfg
 = 
pcEncTÝ
;

82 
m_pcLi¡Pic
 = 
pcEncTÝ
->
	`g‘Li¡Pic
();

84 
m_pcGOPEncod”
 = 
pcEncTÝ
->
	`g‘GOPEncod”
();

85 
m_pcCuEncod”
 = 
pcEncTÝ
->
	`g‘CuEncod”
();

86 
m_pcP»dS—rch
 = 
pcEncTÝ
->
	`g‘P»dS—rch
();

88 
m_pcEÁrÝyCod”
 = 
pcEncTÝ
->
	`g‘EÁrÝyCod”
();

89 
m_pcSbacCod”
 = 
pcEncTÝ
->
	`g‘SbacCod”
();

90 
m_pcBšCABAC
 = 
pcEncTÝ
->
	`g‘BšCABAC
();

91 
m_pcTrQuªt
 = 
pcEncTÝ
->
	`g‘TrQuªt
();

93 
m_pcRdCo¡
 = 
pcEncTÝ
->
	`g‘RdCo¡
();

94 
m_µpcRDSbacCod”
 = 
pcEncTÝ
->
	`g‘RDSbacCod”
();

95 
m_pcRDGoOnSbacCod”
 = 
pcEncTÝ
->
	`g‘RDGoOnSbacCod”
();

98 
m_vdRdPicLambda
.
	`»size
(
m_pcCfg
->
	`g‘D–QpRD
() * 2 + 1 );

99 
m_vdRdPicQp
.
	`»size
Ð
m_pcCfg
->
	`g‘D–QpRD
() * 2 + 1 );

100 
m_viRdPicQp
.
	`»size
Ð
m_pcCfg
->
	`g‘D–QpRD
() * 2 + 1 );

101 
m_pcR©eCŒl
 = 
pcEncTÝ
->
	`g‘R©eCŒl
();

102 
	}
}

104 
Void
 
	gTEncSliû
::
	$upd©eLambda
(
TComSliû
* 
pSliû
, 
DoubË
 
dQP
)

106 
IÁ
 
iQP
 = (IÁ)
dQP
;

107 
DoubË
 
dLambda
 = 
	`ÿlcuÏ‹Lambda
(
pSliû
, 
m_gÝID
,…Sliû->
	`g‘D•th
(),…Sliû->
	`g‘SliûQp
(), 
dQP
, 
iQP
);

109 
	`£tUpLambda
(
pSliû
, 
dLambda
, 
iQP
);

110 
	}
}

112 
Void


113 
	gTEncSliû
::
	$£tUpLambda
(
TComSliû
* 
¦iû
, cÚ¡ 
DoubË
 
dLambda
, 
IÁ
 
iQP
)

116 
m_pcRdCo¡
 ->
	`£tLambda
Ð
dLambda
, 
¦iû
->
	`g‘SPS
()->
	`g‘B™D•ths
() );

120 
DoubË
 
dLambdas
[
MAX_NUM_COMPONENT
] = { 
dLambda
 };

121 
UIÁ
 
compIdx
=1; compIdx<
MAX_NUM_COMPONENT
; compIdx++)

123 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
compIdx
);

124 
IÁ
 
chromaQPOff£t
 = 
¦iû
->
	`g‘PPS
()->
	`g‘QpOff£t
(
compID
è+ sliû->
	`g‘SliûChromaQpD–
(compID);

125 
IÁ
 
qpc
=(
iQP
 + 
chromaQPOff£t
 < 0è? iQP : 
	`g‘SÿËdChromaQP
(iQP + chromaQPOff£t, 
m_pcCfg
->
	`g‘ChromaFÜm©Idc
());

126 
DoubË
 
tmpWeight
 = 
	`pow
Ð2.0, (
iQP
-
qpc
)/3.0 );

127 
m_pcRdCo¡
->
	`£tDi¡ÜtiÚWeight
(
compID
, 
tmpWeight
);

128 
dLambdas
[
compIdx
]=
dLambda
/
tmpWeight
;

131 #ià
RDOQ_CHROMA_LAMBDA


133 
m_pcTrQuªt
->
	`£tLambdas
Ð
dLambdas
 );

135 
m_pcTrQuªt
->
	`£tLambda
Ð
dLambda
 );

139 
¦iû
->
	`£tLambdas
Ð
dLambdas
 );

140 
	}
}

159 
Void
 
	gTEncSliû
::
	$š™EncSliû
Ð
TComPic
* 
pcPic
, cÚ¡ 
IÁ
 
pocLa¡
, cÚ¡ IÁ 
pocCu¼
, cÚ¡ IÁ 
iGOPid
, 
TComSliû
*& 
½cSliû
, cÚ¡ 
BoÞ
 
isF›ld
 )

161 
DoubË
 
dQP
;

162 
DoubË
 
dLambda
;

164 
½cSliû
 = 
pcPic
->
	`g‘Sliû
(0);

165 
½cSliû
->
	`£tSliûB™s
(0);

166 
½cSliû
->
	`£tPic
Ð
pcPic
 );

167 
½cSliû
->
	`š™Sliû
();

168 
½cSliû
->
	`£tPicOuutFÏg
Ð
Œue
 );

169 
½cSliû
->
	`£tPOC
Ð
pocCu¼
 );

170 
pcPic
->
	`£tF›ld
(
isF›ld
);

171 
m_gÝID
 = 
iGOPid
;

174 
IÁ
 
d•th
;

176 
IÁ
 
poc
 = 
½cSliû
->
	`g‘POC
();

177 if(
isF›ld
)

179 
poc
 = (poc/2è% (
m_pcCfg
->
	`g‘GOPSize
()/2);

183 
poc
 =…oø% 
m_pcCfg
->
	`g‘GOPSize
();

186 iàÐ
poc
 == 0 )

188 
d•th
 = 0;

192 
IÁ
 
¡•
 = 
m_pcCfg
->
	`g‘GOPSize
();

193 
d•th
 = 0;

194  
IÁ
 
i
=
¡•
>>1; i>=1; i>>=1 )

196  
IÁ
 
j
=
i
; j<
m_pcCfg
->
	`g‘GOPSize
(); j+=
¡•
 )

198 iàÐ
j
 =ð
poc
 )

200 
i
=0;

204 
¡•
 >>= 1;

205 
d•th
++;

209 if(
m_pcCfg
->
	`g‘H¬mÚizeGÝFœ¡F›ldCou¶eEÇbËd
(è&& 
poc
 != 0)

211 ià(
isF›ld
 && ((
½cSliû
->
	`g‘POC
() % 2) == 1))

213 
d•th
 ++;

219 
SliûTy³
 
eSliûTy³
;

221 
eSliûTy³
=
B_SLICE
;

222 if(!(
isF›ld
 && 
pocLa¡
 =ð1è|| !
m_pcCfg
->
	`g‘Effic›ÁF›ldIRAPEÇbËd
())

224 if(
m_pcCfg
->
	`g‘DecodšgReäeshTy³
() == 3)

226 
eSliûTy³
 = (
pocLa¡
 =ð0 || 
pocCu¼
 % 
m_pcCfg
->
	`g‘IÁ¿P”iod
(è=ð0 || 
m_pcGOPEncod”
->
	`g‘GOPSize
(è=ð0è? 
I_SLICE
 :ƒSliceType;

230 
eSliûTy³
 = (
pocLa¡
 =ð0 || (
pocCu¼
 - (
isF›ld
 ? 1 : 0)è% 
m_pcCfg
->
	`g‘IÁ¿P”iod
(è=ð0 || 
m_pcGOPEncod”
->
	`g‘GOPSize
(è=ð0è? 
I_SLICE
 :ƒSliceType;

234 
½cSliû
->
	`£tSliûTy³
 ( 
eSliûTy³
 );

240 if(
pocLa¡
 == 0)

242 
½cSliû
->
	`£tTempÜ®Lay”NÚReã»nûFÏg
(
çl£
);

246 
½cSliû
->
	`£tTempÜ®Lay”NÚReã»nûFÏg
(!
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_»fPic
);

248 
½cSliû
->
	`£tReã»nûd
(
Œue
);

254 
dQP
 = 
m_pcCfg
->
	`g‘QPFÜPiùu»
(
iGOPid
, 
½cSliû
);

260 cÚ¡ 
IÁ
 
‹mpÜ®Id
=
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_‹mpÜ®Id
;

261 
IÁ
 
iQP
;

262 
DoubË
 
dOrigQP
 = 
dQP
;

265  
IÁ
 
iDQpIdx
 = 0; iDQpIdx < 2 * 
m_pcCfg
->
	`g‘D–QpRD
() + 1; iDQpIdx++ )

268 
dQP
 = 
dOrigQP
 + ((
iDQpIdx
+1)>>1)*(iDQpIdx%2 ? -1 : 1);

269 
dLambda
 = 
	`ÿlcuÏ‹Lambda
(
½cSliû
, 
iGOPid
, 
d•th
, 
dQP
, dQP, 
iQP
 );

271 
m_vdRdPicLambda
[
iDQpIdx
] = 
dLambda
;

272 
m_vdRdPicQp
 [
iDQpIdx
] = 
dQP
;

273 
m_viRdPicQp
 [
iDQpIdx
] = 
iQP
;

277 
dLambda
 = 
m_vdRdPicLambda
[0];

278 
dQP
 = 
m_vdRdPicQp
 [0];

279 
iQP
 = 
m_viRdPicQp
 [0];

282 if(
½cSliû
->
	`g‘PPS
()->
	`g‘SliûChromaQpFÏg
())

284 cÚ¡ 
BoÞ
 
bU£IÁ¿OrP”iodicOff£t
 = 
½cSliû
->
	`g‘SliûTy³
()==
I_SLICE
 || (
m_pcCfg
->
	`g‘SliûChromaOff£tQpP”iodic™y
()!=0 && (½cSliû->
	`g‘POC
()%m_pcCfg->getSliceChromaOffsetQpPeriodicity())==0);

285 
IÁ
 
cbQP
 = 
bU£IÁ¿OrP”iodicOff£t
? 
m_pcCfg
->
	`g‘SliûChromaOff£tQpIÁ¿OrP”iodic
(
çl£
è: m_pcCfg->
	`g‘GOPEÁry
(
iGOPid
).
m_CbQPoff£t
;

286 
IÁ
 
üQP
 = 
bU£IÁ¿OrP”iodicOff£t
? 
m_pcCfg
->
	`g‘SliûChromaOff£tQpIÁ¿OrP”iodic
(
Œue
è: m_pcCfg->
	`g‘GOPEÁry
(
iGOPid
).
m_CrQPoff£t
;

288 
cbQP
 = 
	`Cl3
Ð-12, 12, cbQP + 
½cSliû
->
	`g‘PPS
()->
	`g‘QpOff£t
(
COMPONENT_Cb
) ) -„pcSlice->getPPS()->getQpOffset(COMPONENT_Cb);

289 
üQP
 = 
	`Cl3
Ð-12, 12, crQP + 
½cSliû
->
	`g‘PPS
()->
	`g‘QpOff£t
(
COMPONENT_Cr
) ) -„pcSlice->getPPS()->getQpOffset(COMPONENT_Cr);

290 
½cSliû
->
	`£tSliûChromaQpD–
(
COMPONENT_Cb
, 
	`Cl3
Ð-12, 12, 
cbQP
));

291 
	`as£¹
(
½cSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cb
)+½cSliû->
	`g‘PPS
()->
	`g‘QpOff£t
(COMPONENT_Cb)<=12 &&„pcSlice->getSliceChromaQpDelta(COMPONENT_Cb)+rpcSlice->getPPS()->getQpOffset(COMPONENT_Cb)>=-12);

292 
½cSliû
->
	`£tSliûChromaQpD–
(
COMPONENT_Cr
, 
	`Cl3
Ð-12, 12, 
üQP
));

293 
	`as£¹
(
½cSliû
->
	`g‘SliûChromaQpD–
(
COMPONENT_Cr
)+½cSliû->
	`g‘PPS
()->
	`g‘QpOff£t
(COMPONENT_Cr)<=12 &&„pcSlice->getSliceChromaQpDelta(COMPONENT_Cr)+rpcSlice->getPPS()->getQpOffset(COMPONENT_Cr)>=-12);

297 
½cSliû
->
	`£tSliûChromaQpD–
Ð
COMPONENT_Cb
, 0 );

298 
½cSliû
->
	`£tSliûChromaQpD–
Ð
COMPONENT_Cr
, 0 );

302 
	`£tUpLambda
(
½cSliû
, 
dLambda
, 
iQP
);

304 ià(
m_pcCfg
->
	`g‘Fa¡MEFÜG’BLowD–ayEÇbËd
())

308 if(!(
isF›ld
 && 
pocLa¡
 =ð1è|| !
m_pcCfg
->
	`g‘Effic›ÁF›ldIRAPEÇbËd
())

310 if(
m_pcCfg
->
	`g‘DecodšgReäeshTy³
() == 3)

312 
eSliûTy³
 = (
pocLa¡
 =ð0 || (
pocCu¼
è% 
m_pcCfg
->
	`g‘IÁ¿P”iod
(è=ð0 || 
m_pcGOPEncod”
->
	`g‘GOPSize
(è=ð0è? 
I_SLICE
 :ƒSliceType;

316 
eSliûTy³
 = (
pocLa¡
 =ð0 || (
pocCu¼
 - (
isF›ld
 ? 1 : 0)è% 
m_pcCfg
->
	`g‘IÁ¿P”iod
(è=ð0 || 
m_pcGOPEncod”
->
	`g‘GOPSize
(è=ð0è? 
I_SLICE
 :ƒSliceType;

320 
½cSliû
->
	`£tSliûTy³
 ( 
eSliûTy³
 );

323 ià(
m_pcCfg
->
	`g‘U£ReÿlcuÏ‹QPAccÜdšgToLambda
())

325 
dQP
 = 
	`xG‘QPV®ueAccÜdšgToLambda
Ð
dLambda
 );

326 
iQP
 = 
	`max
Ð-
½cSliû
->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
	`mš
Ð
MAX_QP
, (
IÁ
è
	`æoÜ
Ð
dQP
 + 0.5 ) ) );

329 
½cSliû
->
	`£tSliûQp
 ( 
iQP
 );

330 #ià
ADAPTIVE_QP_SELECTION


331 
½cSliû
->
	`£tSliûQpBa£
 ( 
iQP
 );

333 
½cSliû
->
	`£tSliûQpD–
 ( 0 );

334 
½cSliû
->
	`£tU£ChromaQpAdj
Ð½cSliû->
	`g‘PPS
()->
	`g‘PpsRªgeEx‹nsiÚ
().
	`g‘ChromaQpOff£tLi¡EÇbËdFÏg
() );

335 
½cSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_0
,
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_numRefPicsAùive
);

336 
½cSliû
->
	`£tNumRefIdx
(
REF_PIC_LIST_1
,
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_numRefPicsAùive
);

338 iàÐ
m_pcCfg
->
	`g‘DeblockšgFž‹rM‘ric
() )

340 
½cSliû
->
	`£tDeblockšgFž‹rOv”rideFÏg
(
Œue
);

341 
½cSliû
->
	`£tDeblockšgFž‹rDi§bË
(
çl£
);

342 
½cSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
( 0 );

343 
½cSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
( 0 );

345 ià(
½cSliû
->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rCÚŒÞP»£ÁFÏg
())

347 
½cSliû
->
	`£tDeblockšgFž‹rOv”rideFÏg
Ð½cSliû->
	`g‘PPS
()->
	`g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
() );

348 
½cSliû
->
	`£tDeblockšgFž‹rDi§bË
Ð½cSliû->
	`g‘PPS
()->
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() );

349 iàÐ!
½cSliû
->
	`g‘DeblockšgFž‹rDi§bË
())

351 iàÐ
½cSliû
->
	`g‘DeblockšgFž‹rOv”rideFÏg
(è&& 
eSliûTy³
!=
I_SLICE
)

353 
½cSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_b‘aOff£tDiv2
 + m_pcCfg->
	`g‘LoÝFž‹rB‘aOff£t
() );

354 
½cSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
Ð
m_pcCfg
->
	`g‘GOPEÁry
(
iGOPid
).
m_tcOff£tDiv2
 + m_pcCfg->
	`g‘LoÝFž‹rTcOff£t
() );

358 
½cSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
m_pcCfg
->
	`g‘LoÝFž‹rB‘aOff£t
() );

359 
½cSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
Ð
m_pcCfg
->
	`g‘LoÝFž‹rTcOff£t
() );

365 
½cSliû
->
	`£tDeblockšgFž‹rOv”rideFÏg
Ð
çl£
 );

366 
½cSliû
->
	`£tDeblockšgFž‹rDi§bË
Ð
çl£
 );

367 
½cSliû
->
	`£tDeblockšgFž‹rB‘aOff£tDiv2
( 0 );

368 
½cSliû
->
	`£tDeblockšgFž‹rTcOff£tDiv2
( 0 );

371 
½cSliû
->
	`£tD•th
 ( 
d•th
 );

373 
pcPic
->
	`£tTLay”
Ð
‹mpÜ®Id
 );

374 if(
eSliûTy³
==
I_SLICE
)

376 
pcPic
->
	`£tTLay”
(0);

378 
½cSliû
->
	`£tTLay”
Ð
pcPic
->
	`g‘TLay”
() );

380 
pcPic
->
	`£tPicYuvP»d
Ð&
m_picYuvP»d
 );

381 
pcPic
->
	`£tPicYuvResi
Ð&
m_picYuvResi
 );

382 
½cSliû
->
	`£tSliûMode
 ( 
m_pcCfg
->
	`g‘SliûMode
() );

383 
½cSliû
->
	`£tSliûArgum’t
 ( 
m_pcCfg
->
	`g‘SliûArgum’t
() );

384 
½cSliû
->
	`£tSliûSegm’tMode
 ( 
m_pcCfg
->
	`g‘SliûSegm’tMode
() );

385 
½cSliû
->
	`£tSliûSegm’tArgum’t
 ( 
m_pcCfg
->
	`g‘SliûSegm’tArgum’t
() );

386 
½cSliû
->
	`£tMaxNumM”geCªd
 ( 
m_pcCfg
->
	`g‘MaxNumM”geCªd
() );

387 
	}
}

390 
DoubË
 
	gTEncSliû
::
	$ÿlcuÏ‹Lambda
ÐcÚ¡ 
TComSliû
* 
¦iû
,

391 cÚ¡ 
IÁ
 
GOPid
,

392 cÚ¡ 
IÁ
 
d•th
,

393 cÚ¡ 
DoubË
 
»fQP
,

394 cÚ¡ 
DoubË
 
dQP
,

395 
IÁ
 &
iQP
 )

397 
SliûTy³
 
eSliûTy³
 = 
¦iû
->
	`g‘SliûTy³
();

398 cÚ¡ 
BoÞ
 
isF›ld
 = 
¦iû
->
	`g‘Pic
()->
	`isF›ld
();

399 cÚ¡ 
IÁ
 
Numb”BF¿mes
 = ( 
m_pcCfg
->
	`g‘GOPSize
() - 1 );

400 cÚ¡ 
IÁ
 
SHIFT_QP
 = 12;

401 cÚ¡ 
IÁ
 
‹mpÜ®Id
=
m_pcCfg
->
	`g‘GOPEÁry
(
GOPid
).
m_‹mpÜ®Id
;

402 cÚ¡ 
¡d
::
veùÜ
<
DoubË
> &
šŒaLambdaModif›rs
=
m_pcCfg
->
	`g‘IÁ¿LambdaModif›r
();

404 #ià
FULL_NBIT


405 
IÁ
 
b™d•th_luma_qp_sÿË
 = 6 * (
¦iû
->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) - 8);

407 
IÁ
 
b™d•th_luma_qp_sÿË
 = 0;

409 
DoubË
 
qp_‹mp
 = 
dQP
 + 
b™d•th_luma_qp_sÿË
 - 
SHIFT_QP
;

411 
DoubË
 
dQPFaùÜ
 = 
m_pcCfg
->
	`g‘GOPEÁry
(
GOPid
).
m_QPFaùÜ
;

412 iàÐ
eSliûTy³
==
I_SLICE
 )

414 ià(
m_pcCfg
->
	`g‘IÁ¿QpFaùÜ
()>=0.0 && m_pcCfg->
	`g‘GOPEÁry
(
GOPid
).
m_¦iûTy³
 !ð
I_SLICE
)

416 
dQPFaùÜ
=
m_pcCfg
->
	`g‘IÁ¿QpFaùÜ
();

420 if(
m_pcCfg
->
	`g‘LambdaFromQPEÇbË
())

422 
dQPFaùÜ
=0.57;

426 
DoubË
 
dLambda_sÿË
 = 1.0 - 
	`Cl3
Ð0.0, 0.5, 0.05*(DoubË)(
isF›ld
 ? 
Numb”BF¿mes
/2 : NumberBFrames) );

427 
dQPFaùÜ
=0.57*
dLambda_sÿË
;

431 ifÐ
m_pcCfg
->
	`g‘LambdaFromQPEÇbË
() )

433 
dQPFaùÜ
=0.57;

436 
DoubË
 
dLambda
 = 
dQPFaùÜ
*
	`pow
Ð2.0, 
qp_‹mp
/3.0 );

438 ifÐ!(
m_pcCfg
->
	`g‘LambdaFromQPEÇbË
()è&& 
d•th
>0 )

440 #ià
FULL_NBIT


441 
DoubË
 
qp_‹mp_»f_Üig
 = 
»fQP
 - 
SHIFT_QP
;

442 
dLambda
 *ð
	`Cl3
Ð2.00, 4.00, (
qp_‹mp_»f_Üig
 / 6.0) );

444 
DoubË
 
qp_‹mp_»f
 = 
»fQP
 + 
b™d•th_luma_qp_sÿË
 - 
SHIFT_QP
;

445 
dLambda
 *ð
	`Cl3
Ð2.00, 4.00, (
qp_‹mp_»f
 / 6.0) );

450 iàÐ!
m_pcCfg
->
	`g‘U£HADME
(è&& 
¦iû
->
	`g‘SliûTy³
Ðè!ð
I_SLICE
 )

452 
dLambda
 *= 0.95;

455 
DoubË
 
ÏmbdaModif›r
;

456 ifÐ
eSliûTy³
 !ð
I_SLICE
 || 
šŒaLambdaModif›rs
.
	`em±y
())

458 
ÏmbdaModif›r
 = 
m_pcCfg
->
	`g‘LambdaModif›r
Ð
‹mpÜ®Id
 );

462 
ÏmbdaModif›r
 = 
šŒaLambdaModif›rs
[ (
‹mpÜ®Id
 < iÁ¿LambdaModif›rs.
	`size
()) ?emporalId : (intraLambdaModifiers.size()-1) ];

464 
dLambda
 *ð
ÏmbdaModif›r
;

466 
iQP
 = 
	`max
Ð-
¦iû
->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
	`mš
Ð
MAX_QP
, (
IÁ
è
	`æoÜ
Ð
dQP
 + 0.5 ) ) );

469  
dLambda
;

470 
	}
}

472 
Void
 
	gTEncSliû
::
	$»£tQP
Ð
TComPic
* 
pic
, 
IÁ
 
¦iûQP
, 
DoubË
 
Ïmbda
 )

474 
TComSliû
* 
¦iû
 = 
pic
->
	`g‘Sliû
(0);

477 
¦iû
->
	`£tSliûQp
Ð
¦iûQP
 );

478 #ià
ADAPTIVE_QP_SELECTION


479 
¦iû
->
	`£tSliûQpBa£
 ( 
¦iûQP
 );

481 
	`£tUpLambda
(
¦iû
, 
Ïmbda
, 
¦iûQP
);

482 
	}
}

489 
Void
 
	gTEncSliû
::
	$£tS—rchRªge
Ð
TComSliû
* 
pcSliû
 )

491 
IÁ
 
iCu¼POC
 = 
pcSliû
->
	`g‘POC
();

492 
IÁ
 
iRefPOC
;

493 
IÁ
 
iGOPSize
 = 
m_pcCfg
->
	`g‘GOPSize
();

494 
IÁ
 
iOff£t
 = (
iGOPSize
 >> 1);

495 
IÁ
 
iMaxSR
 = 
m_pcCfg
->
	`g‘S—rchRªge
();

496 
IÁ
 
iNumP»dDœ
 = 
pcSliû
->
	`isIÁ”P
() ? 1 : 2;

498 
IÁ
 
iDœ
 = 0; iDœ < 
iNumP»dDœ
; iDir++)

500 
RefPicLi¡
 
e
 = ( 
iDœ
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

501 
IÁ
 
iRefIdx
 = 0; iRefIdx < 
pcSliû
->
	`g‘NumRefIdx
(
e
); iRefIdx++)

503 
iRefPOC
 = 
pcSliû
->
	`g‘RefPic
(
e
, 
iRefIdx
)->
	`g‘POC
();

504 
IÁ
 
ÃwS—rchRªge
 = 
	`Cl3
(
m_pcCfg
->
	`g‘MšS—rchWšdow
(), 
iMaxSR
, (iMaxSR*
ADAPT_SR_SCALE
*
	`abs
(
iCu¼POC
 - 
iRefPOC
)+
iOff£t
)/
iGOPSize
);

505 
m_pcP»dS—rch
->
	`£tAd­tiveS—rchRªge
(
iDœ
, 
iRefIdx
, 
ÃwS—rchRªge
);

508 
	}
}

515 
Void
 
	gTEncSliû
::
	$´ecom´essSliû
Ð
TComPic
* 
pcPic
 )

518 iàÐ
m_pcCfg
->
	`g‘D–QpRD
() == 0 )

523 iàÐ
m_pcCfg
->
	`g‘U£R©eCŒl
() )

525 
	`´štf
( "\nMultiple QP optimization is‚ot‡llowed when„ate control isƒnabled." );

526 
	`as£¹
(0);

530 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

532 ià(
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
())

539 ià(
pcSliû
->
	`g‘SliûMode
()==
FIXED_NUMBER_OF_BYTES
)

542 
	`´štf
( "\nUnableo optimise Slice-level QP if Slice Mode is seto FIXED_NUMBER_OF_BYTES\n" );

543 
	`as£¹
(0);

547 
DoubË
 
dPicRdCo¡Be¡
 = 
MAX_DOUBLE
;

548 
UIÁ
 
uiQpIdxBe¡
 = 0;

550 
DoubË
 
dF¿meLambda
;

551 #ià
FULL_NBIT


552 
IÁ
 
SHIFT_QP
 = 12 + 6 * (
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
) - 8);

554 
IÁ
 
SHIFT_QP
 = 12;

558 ià(
m_pcCfg
->
	`g‘GOPSize
() > 1)

560 
dF¿meLambda
 = 0.68 * 
	`pow
 (2, (
m_viRdPicQp
[0] - 
SHIFT_QP
è/ 3.0è* (
pcSliû
->
	`isIÁ”B
()? 2 : 1);

564 
dF¿meLambda
 = 0.68 * 
	`pow
 (2, (
m_viRdPicQp
[0] - 
SHIFT_QP
) / 3.0);

566 
m_pcRdCo¡
 ->
	`£tF¿meLambda
(
dF¿meLambda
);

569  
UIÁ
 
uiQpIdx
 = 0; uiQpIdx < 2 * 
m_pcCfg
->
	`g‘D–QpRD
() + 1; uiQpIdx++ )

571 
pcSliû
 ->
	`£tSliûQp
 ( 
m_viRdPicQp
 [
uiQpIdx
] );

572 #ià
ADAPTIVE_QP_SELECTION


573 
pcSliû
 ->
	`£tSliûQpBa£
 ( 
m_viRdPicQp
 [
uiQpIdx
] );

575 
	`£tUpLambda
(
pcSliû
, 
m_vdRdPicLambda
[
uiQpIdx
], 
m_viRdPicQp
 [uiQpIdx]);

578 
	`com´essSliû
 ( 
pcPic
, 
Œue
, 
m_pcCfg
->
	`g‘Fa¡D–Qp
());

580 
UIÁ64
 
uiPicDi¡
 = 
m_uiPicDi¡
;

589 
DoubË
 
dPicRdCo¡
 = 
m_pcRdCo¡
->
	`ÿlcRdCo¡
Ð(DoubË)
m_uiPicTÙ®B™s
, 
uiPicDi¡
, 
DF_SSE_FRAME
);

591 iàÐ
dPicRdCo¡
 < 
dPicRdCo¡Be¡
 )

593 
uiQpIdxBe¡
 = 
uiQpIdx
;

594 
dPicRdCo¡Be¡
 = 
dPicRdCo¡
;

599 
pcSliû
 ->
	`£tSliûQp
 ( 
m_viRdPicQp
 [
uiQpIdxBe¡
] );

600 #ià
ADAPTIVE_QP_SELECTION


601 
pcSliû
 ->
	`£tSliûQpBa£
 ( 
m_viRdPicQp
 [
uiQpIdxBe¡
] );

603 
	`£tUpLambda
(
pcSliû
, 
m_vdRdPicLambda
[
uiQpIdxBe¡
], 
m_viRdPicQp
 [uiQpIdxBest]);

604 
	}
}

606 
Void
 
	gTEncSliû
::
	$ÿlCo¡SliûI
(
TComPic
* 
pcPic
)

608 
DoubË
 
iSumHadSliû
 = 0;

609 
TComSliû
 * cÚ¡ 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

610 cÚ¡ 
TComSPS
 &
¥s
 = *(
pcSliû
->
	`g‘SPS
());

611 cÚ¡ 
IÁ
 
shiá
 = 
¥s
.
	`g‘B™D•th
(
CHANNEL_TYPE_LUMA
)-8;

612 cÚ¡ 
IÁ
 
off£t
 = (
shiá
>0)?(1<<(shift-1)):0;

614 
pcSliû
->
	`£tSliûSegm’tB™s
(0);

616 
UIÁ
 
¡¬tCtuTsAddr
, 
boundšgCtuTsAddr
;

617 
	`xD‘”mšeS¹AndBoundšgCtuTsAddr
 ( 
¡¬tCtuTsAddr
, 
boundšgCtuTsAddr
, 
pcPic
 );

619  
UIÁ
 
ùuTsAddr
 = 
¡¬tCtuTsAddr
, 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
( startCtuTsAddr);

620 
ùuTsAddr
 < 
boundšgCtuTsAddr
;

621 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(++
ùuTsAddr
) )

624 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

625 
pCtu
->
	`š™Ctu
Ð
pcPic
, 
ùuRsAddr
 );

627 
IÁ
 
height
 = 
	`mš
Ð
¥s
.
	`g‘MaxCUHeight
(),¥s.
	`g‘PicHeightInLumaSam¶es
(è- 
ùuRsAddr
 / 
pcPic
->
	`g‘F¿meWidthInCtus
() * sps.getMaxCUHeight() );

628 
IÁ
 
width
 = 
	`mš
Ð
¥s
.
	`g‘MaxCUWidth
(), sps.
	`g‘PicWidthInLumaSam¶es
(è- 
ùuRsAddr
 % 
pcPic
->
	`g‘F¿meWidthInCtus
() * sps.getMaxCUWidth() );

630 
IÁ
 
iSumHad
 = 
m_pcCuEncod”
->
	`upd©eCtuD©aISliû
(
pCtu
, 
width
, 
height
);

632 (
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCU
(
ùuRsAddr
)).
m_co¡IÁ¿
=(
iSumHad
+
off£t
)>>
shiá
;

633 
iSumHadSliû
 +ð(
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCU
(
ùuRsAddr
)).
m_co¡IÁ¿
;

636 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`£tTÙ®IÁ¿Co¡
(
iSumHadSliû
);

637 
	}
}

641 
Void
 
	gTEncSliû
::
	$com´essSliû
Ð
TComPic
* 
pcPic
, cÚ¡ 
BoÞ
 
bCom´essEÁœeSliû
, cÚ¡ BoÞ 
bFa¡D–QP
 )

646 
UIÁ
 
¡¬tCtuTsAddr
;

647 
UIÁ
 
boundšgCtuTsAddr
;

648 
TComSliû
* cÚ¡ 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

649 
pcSliû
->
	`£tSliûSegm’tB™s
(0);

650 
	`xD‘”mšeS¹AndBoundšgCtuTsAddr
 ( 
¡¬tCtuTsAddr
, 
boundšgCtuTsAddr
, 
pcPic
 );

651 ià(
bCom´essEÁœeSliû
)

653 
boundšgCtuTsAddr
 = 
pcSliû
->
	`g‘SliûCurEndCtuTsAddr
();

654 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
(
boundšgCtuTsAddr
);

658 
m_uiPicTÙ®B™s
 = 0;

659 
m_dPicRdCo¡
 = 0;

660 
m_uiPicDi¡
 = 0;

662 
m_pcEÁrÝyCod”
->
	`£tEÁrÝyCod”
 ( 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
] );

663 
m_pcEÁrÝyCod”
->
	`»£tEÁrÝy
 ( 
pcSliû
 );

665 
TEncBšCABAC
* 
pRDSbacCod”
 = (TEncBšCABAC *è
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`g‘EncBšIf
();

666 
pRDSbacCod”
->
	`£tBšCouÁšgEÇbËFÏg
Ð
çl£
 );

667 
pRDSbacCod”
->
	`£tBšsCoded
( 0 );

669 
TComB™CouÁ”
 
‹mpB™CouÁ”
;

670 cÚ¡ 
UIÁ
 
äameWidthInCtus
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘F¿meWidthInCtus
();

672 
m_pcCuEncod”
->
	`£tFa¡D–Qp
(
bFa¡D–QP
);

678 ifÐ
pcSliû
->
	`g‘PPS
()->
	`g‘U£WP
(è||…cSliû->g‘PPS()->
	`g‘WPBiP»d
() )

680 
	`xC®cACDCP¬amSliû
(
pcSliû
);

683 cÚ¡ 
BoÞ
 
bWp_ex¶ic™
 = (
pcSliû
->
	`g‘SliûTy³
()==
P_SLICE
 &&…cSliû->
	`g‘PPS
()->
	`g‘U£WP
()è|| (pcSliû->g‘SliûTy³()==
B_SLICE
 &&…cSliû->g‘PPS()->
	`g‘WPBiP»d
());

685 iàÐ
bWp_ex¶ic™
 )

690 iàÐ
pcSliû
->
	`g‘SliûMode
()==
FIXED_NUMBER_OF_BYTES
 ||…cSliû->
	`g‘SliûSegm’tMode
()==FIXED_NUMBER_OF_BYTES )

692 
	`´štf
("Weigh‹d P»diùiÚ i nÙ suµÜ‹d w™h sliû modd‘”mšed by max‚umb” oàbšs.\n"); 
	`ex™
(0);

695 
	`xE¡im©eWPP¬amSliû
Ð
pcSliû
, 
m_pcCfg
->
	`g‘Weigh‹dP»diùiÚM‘hod
() );

696 
pcSliû
->
	`š™WpSÿlšg
ÕcSliû->
	`g‘SPS
());

699 
	`xCheckWPEÇbË
Ð
pcSliû
 );

702 #ià
ADAPTIVE_QP_SELECTION


703 ifÐ
m_pcCfg
->
	`g‘U£Ad­tQpS–eù
(è&& !(
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
()))

706 
m_pcTrQuªt
->
	`þ—rSliûARLCÁ
();

707 if(
pcSliû
->
	`g‘SliûTy³
()!=
I_SLICE
)

709 
IÁ
 
qpBa£
 = 
pcSliû
->
	`g‘SliûQpBa£
();

710 
pcSliû
->
	`£tSliûQp
(
qpBa£
 + 
m_pcTrQuªt
->
	`g‘QpD–
(qpBase));

719 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
Ð
¡¬tCtuTsAddr
);

720 cÚ¡ 
UIÁ
 
cu¼’tTžeIdx
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
(
ùuRsAddr
);

721 cÚ¡ 
TComTže
 *
pCu¼’tTže
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
cu¼’tTžeIdx
);

722 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pCu¼’tTže
->
	`g‘Fœ¡CtuRsAddr
();

723 ifÐ
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& 
ùuRsAddr
 !ð
fœ¡CtuRsAddrOfTže
 )

726 ifÐ
pCu¼’tTže
->
	`g‘TžeWidthInCtus
(è>ð2 || !
m_pcCfg
->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
() )

728 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`lßdCÚ‹xts
Ð&
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
 );

735  
UIÁ
 
ùuTsAddr
 = 
¡¬tCtuTsAddr
; ctuTsAdd¸< 
boundšgCtuTsAddr
; ++ctuTsAddr )

737 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
ùuTsAddr
);

739 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

740 
pCtu
->
	`š™Ctu
Ð
pcPic
, 
ùuRsAddr
 );

743 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
ÕcPic->g‘PicSym()->
	`g‘TžeIdxM­
(
ùuRsAddr
))->
	`g‘Fœ¡CtuRsAddr
();

744 cÚ¡ 
UIÁ
 
tžeXPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 % 
äameWidthInCtus
;

745 cÚ¡ 
UIÁ
 
ùuXPosInCtus
 = 
ùuRsAddr
 % 
äameWidthInCtus
;

747 ià(
ùuRsAddr
 =ð
fœ¡CtuRsAddrOfTže
)

749 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`»£tEÁrÝy
(
pcSliû
);

751 iàÐ
ùuXPosInCtus
 =ð
tžeXPosInCtus
 && 
m_pcCfg
->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
())

754 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`»£tEÁrÝy
(
pcSliû
);

756 
TComD©aCU
 *
pCtuUp
 = 
pCtu
->
	`g‘CtuAbove
();

757 iàÐ
pCtuUp
 && ((
ùuRsAddr
%
äameWidthInCtus
+1) < frameWidthInCtus) )

759 
TComD©aCU
 *
pCtuTR
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 - 
äameWidthInCtus
 + 1 );

760 iàÐ
pCtu
->
	`CUIsFromSameSliûAndTže
(
pCtuTR
) )

763 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`lßdCÚ‹xts
Ð&
m_’ŒÝyCodšgSyncCÚ‹xtS‹
 );

769 
m_pcEÁrÝyCod”
->
	`£tEÁrÝyCod”
 ( 
m_pcRDGoOnSbacCod”
 );

770 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
Ð&
‹mpB™CouÁ”
 );

771 
‹mpB™CouÁ”
.
	`»£tB™s
();

772 
m_pcRDGoOnSbacCod”
->
	`lßd
Ð
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
] );

775 ((
TEncBšCABAC
*)
m_pcRDGoOnSbacCod”
->
	`g‘EncBšIf
())->
	`£tBšCouÁšgEÇbËFÏg
(
Œue
);

777 
DoubË
 
ÞdLambda
 = 
m_pcRdCo¡
->
	`g‘Lambda
();

778 iàÐ
m_pcCfg
->
	`g‘U£R©eCŒl
() )

780 
IÁ
 
e¡QP
 = 
pcSliû
->
	`g‘SliûQp
();

781 
DoubË
 
e¡Lambda
 = -1.0;

782 
DoubË
 
bµ
 = -1.0;

784 iàÐÐ
pcPic
->
	`g‘Sliû
Ð0 )->
	`g‘SliûTy³
(è=ð
I_SLICE
 && 
m_pcCfg
->
	`g‘FÜûIÁ¿QP
(èè|| !m_pcCfg->
	`g‘LCULev–RC
() )

786 
e¡QP
 = 
pcSliû
->
	`g‘SliûQp
();

790 
bµ
 = 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCUT¬g‘Bµ
(
pcSliû
->
	`g‘SliûTy³
());

791 iàÐ
pcPic
->
	`g‘Sliû
Ð0 )->
	`g‘SliûTy³
(è=ð
I_SLICE
)

793 
e¡Lambda
 = 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCUE¡LambdaAndQP
(
bµ
, 
pcSliû
->
	`g‘SliûQp
(), &
e¡QP
);

797 
e¡Lambda
 = 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCUE¡Lambda
Ð
bµ
 );

798 
e¡QP
 = 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCUE¡QP
 ( 
e¡Lambda
, 
pcSliû
->
	`g‘SliûQp
() );

801 
e¡QP
 = 
	`Cl3
Ð-
pcSliû
->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
), 
MAX_QP
,ƒstQP );

803 
m_pcRdCo¡
->
	`£tLambda
(
e¡Lambda
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•ths
());

805 #ià
RDOQ_CHROMA_LAMBDA


807 cÚ¡ 
DoubË
 
chromaLambda
 = 
e¡Lambda
 / 
m_pcRdCo¡
->
	`g‘ChromaWeight
();

808 cÚ¡ 
DoubË
 
ÏmbdaA¼ay
[
MAX_NUM_COMPONENT
] = { 
e¡Lambda
, 
chromaLambda
, chromaLambda };

809 
m_pcTrQuªt
->
	`£tLambdas
Ð
ÏmbdaA¼ay
 );

811 
m_pcTrQuªt
->
	`£tLambda
Ð
e¡Lambda
 );

815 
m_pcR©eCŒl
->
	`£tRCQP
Ð
e¡QP
 );

816 #ià
ADAPTIVE_QP_SELECTION


817 
pCtu
->
	`g‘Sliû
()->
	`£tSliûQpBa£
Ð
e¡QP
 );

822 
m_pcCuEncod”
->
	`com´essCtu
Ð
pCtu
 );

829 
m_pcEÁrÝyCod”
->
	`£tEÁrÝyCod”
 ( 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
] );

830 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
Ð&
‹mpB™CouÁ”
 );

831 
pRDSbacCod”
->
	`£tBšCouÁšgEÇbËFÏg
Ð
Œue
 );

832 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`»£tB™s
();

833 
pRDSbacCod”
->
	`£tBšsCoded
( 0 );

836 
m_pcCuEncod”
->
	`’codeCtu
Ð
pCtu
 );

839 
pRDSbacCod”
->
	`£tBšCouÁšgEÇbËFÏg
Ð
çl£
 );

841 cÚ¡ 
IÁ
 
numb”OfWr™‹nB™s
 = 
m_pcEÁrÝyCod”
->
	`g‘Numb”OfWr™‹nB™s
();

845 cÚ¡ 
UIÁ
 
v®idEndOfSliûCtuTsAddr
 = 
ùuTsAddr
 + (ùuTsAdd¸=ð
¡¬tCtuTsAddr
 ? 1 : 0);

847 if(
pcSliû
->
	`g‘SliûMode
()==
FIXED_NUMBER_OF_BYTES
 &&…cSliû->
	`g‘SliûB™s
()+
numb”OfWr™‹nB™s
 > (pcSliû->
	`g‘SliûArgum’t
()<<3))

849 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
(
v®idEndOfSliûCtuTsAddr
);

850 
pcSliû
->
	`£tSliûCurEndCtuTsAddr
(
v®idEndOfSliûCtuTsAddr
);

851 
boundšgCtuTsAddr
=
v®idEndOfSliûCtuTsAddr
;

853 if((!
bCom´essEÁœeSliû
è&& 
pcSliû
->
	`g‘SliûSegm’tMode
()==
FIXED_NUMBER_OF_BYTES
 &&…cSliû->
	`g‘SliûSegm’tB™s
()+
numb”OfWr™‹nB™s
 > (pcSliû->
	`g‘SliûSegm’tArgum’t
()<<3))

855 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
(
v®idEndOfSliûCtuTsAddr
);

856 
boundšgCtuTsAddr
=
v®idEndOfSliûCtuTsAddr
;

859 ià(
boundšgCtuTsAddr
 <ð
ùuTsAddr
)

864 
pcSliû
->
	`£tSliûB™s
Ð(
UIÁ
)ÕcSliû->
	`g‘SliûB™s
(è+ 
numb”OfWr™‹nB™s
) );

865 
pcSliû
->
	`£tSliûSegm’tB™s
ÕcSliû->
	`g‘SliûSegm’tB™s
()+
numb”OfWr™‹nB™s
);

868 iàÐ
ùuXPosInCtus
 =ð
tžeXPosInCtus
+1 && 
m_pcCfg
->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
())

870 
m_’ŒÝyCodšgSyncCÚ‹xtS‹
.
	`lßdCÚ‹xts
(
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]);

874 iàÐ
m_pcCfg
->
	`g‘U£R©eCŒl
() )

876 
IÁ
 
aùu®QP
 = 
g_RCInv®idQPV®ue
;

877 
DoubË
 
aùu®Lambda
 = 
m_pcRdCo¡
->
	`g‘Lambda
();

878 
IÁ
 
aùu®B™s
 = 
pCtu
->
	`g‘TÙ®B™s
();

879 
IÁ
 
numb”OfEfãùivePix–s
 = 0;

881 #ià
JVET_M0600_RATE_CTRL


882 
IÁ
 
numb”OfSkPix–
 = 0;

883 
IÁ
 
idx
 = 0; idx < 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(); idx++)

886 
numb”OfSkPix–
 +ð16 * 
pCtu
->
	`isSk³d
(
idx
);

890  
IÁ
 
idx
 = 0; idx < 
pcPic
->
	`g‘NumP¬t™iÚsInCtu
(); idx++ )

892 iàÐ
pCtu
->
	`g‘P»diùiÚMode
Ð
idx
 ) !ð
NUMBER_OF_PREDICTION_MODES
 && ( !pCtu->
	`isSk³d
( idx ) ) )

894 
numb”OfEfãùivePix–s
 =‚umberOfEffectivePixels + 16;

899 #ià
JVET_M0600_RATE_CTRL


900 
DoubË
 
skR©io
 = (DoubË)
numb”OfSkPix–
 / 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCU
(
ùuTsAddr
).
m_numb”OfPix–
;

903 iàÐ
numb”OfEfãùivePix–s
 == 0 )

905 
aùu®QP
 = 
g_RCInv®idQPV®ue
;

909 
aùu®QP
 = 
pCtu
->
	`g‘QP
( 0 );

911 #ià
JVET_K0390_RATE_CTRL


912 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`g‘LCU
(
ùuTsAddr
).
m_aùu®MSE
 = (
DoubË
)
pCtu
->
	`g‘TÙ®Di¡ÜtiÚ
(è/ (DoubË)m_pcR©eCŒl->g‘RCPic()->g‘LCU(ùuTsAddr).
m_numb”OfPix–
;

914 
m_pcRdCo¡
->
	`£tLambda
(
ÞdLambda
, 
pcSliû
->
	`g‘SPS
()->
	`g‘B™D•ths
());

915 #ià
JVET_M0600_RATE_CTRL


916 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`upd©eAá”CTU
(m_pcR©eCŒl->g‘RCPic()->
	`g‘LCUCoded
(), 
aùu®B™s
, 
aùu®QP
, 
aùu®Lambda
, 
skR©io
,

917 
pCtu
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
 ? 0 : 
m_pcCfg
->
	`g‘LCULev–RC
());

919 
m_pcR©eCŒl
->
	`g‘RCPic
()->
	`upd©eAá”CTU
Ðm_pcR©eCŒl->g‘RCPic()->
	`g‘LCUCoded
(), 
aùu®B™s
, 
aùu®QP
, 
aùu®Lambda
,

920 
pCtu
->
	`g‘Sliû
()->
	`g‘SliûTy³
(è=ð
I_SLICE
 ? 0 : 
m_pcCfg
->
	`g‘LCULev–RC
() );

924 
m_uiPicTÙ®B™s
 +ð
pCtu
->
	`g‘TÙ®B™s
();

925 
m_dPicRdCo¡
 +ð
pCtu
->
	`g‘TÙ®Co¡
();

926 
m_uiPicDi¡
 +ð
pCtu
->
	`g‘TÙ®Di¡ÜtiÚ
();

931 ifÐ
pcSliû
->
	`g‘PPS
()->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
() )

933 
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
.
	`lßdCÚ‹xts
Ð
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
] );

937 
m_µpcRDSbacCod”
[0][
CI_CURR_BEST
]->
	`£tB™¡»am
(
NULL
);

938 
m_pcRDGoOnSbacCod”
->
	`£tB™¡»am
(
NULL
);

949 
	}
}

951 
Void
 
	gTEncSliû
::
	$’codeSliû
 ( 
TComPic
* 
pcPic
, 
TComOuutB™¡»am
* 
pcSub¡»ams
, 
UIÁ
 &
numBšsCoded
 )

953 
TComSliû
 *cÚ¡ 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

955 cÚ¡ 
UIÁ
 
¡¬tCtuTsAddr
 = 
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
();

956 cÚ¡ 
UIÁ
 
boundšgCtuTsAddr
 = 
pcSliû
->
	`g‘SliûSegm’tCurEndCtuTsAddr
();

958 cÚ¡ 
UIÁ
 
äameWidthInCtus
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘F¿meWidthInCtus
();

959 cÚ¡ 
BoÞ
 
d•SliûSegm’tsEÇbËd
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
();

960 cÚ¡ 
BoÞ
 
waveäÚtsEÇbËd
 = 
pcSliû
->
	`g‘PPS
()->
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
();

963 
m_pcSbacCod”
->
	`š™
Ð(
TEncBšIf
*)
m_pcBšCABAC
 );

964 
m_pcEÁrÝyCod”
->
	`£tEÁrÝyCod”
 ( 
m_pcSbacCod”
 );

965 
m_pcEÁrÝyCod”
->
	`»£tEÁrÝy
 ( 
pcSliû
 );

967 
numBšsCoded
 = 0;

968 
m_pcBšCABAC
->
	`£tBšCouÁšgEÇbËFÏg
Ð
Œue
 );

969 
m_pcBšCABAC
->
	`£tBšsCoded
(0);

971 #ià
ENC_DEC_TRACE


972 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûEÇbË
;

974 
	`DTRACE_CABAC_VL
Ð
g_nSymbÞCouÁ”
++ );

975 
	`DTRACE_CABAC_T
( "\tPOC: " );

976 
	`DTRACE_CABAC_V
Ð
pcPic
->
	`g‘POC
() );

977 
	`DTRACE_CABAC_T
( "\n" );

978 #ià
ENC_DEC_TRACE


979 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

983 ià(
d•SliûSegm’tsEÇbËd
)

986 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
Ð
¡¬tCtuTsAddr
 );

987 cÚ¡ 
UIÁ
 
cu¼’tTžeIdx
=
pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
(
ùuRsAddr
);

988 cÚ¡ 
TComTže
 *
pCu¼’tTže
=
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
cu¼’tTžeIdx
);

989 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
pCu¼’tTže
->
	`g‘Fœ¡CtuRsAddr
();

991 ifÐ
pcSliû
->
	`g‘D•’d’tSliûSegm’tFÏg
(è&& 
ùuRsAddr
 !ð
fœ¡CtuRsAddrOfTže
 )

993 ifÐ
pCu¼’tTže
->
	`g‘TžeWidthInCtus
(è>ð2 || !
waveäÚtsEÇbËd
 )

995 
m_pcSbacCod”
->
	`lßdCÚ‹xts
(&
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
);

1002  
UIÁ
 
ùuTsAddr
 = 
¡¬tCtuTsAddr
; ctuTsAdd¸< 
boundšgCtuTsAddr
; ++ctuTsAddr )

1004 cÚ¡ 
UIÁ
 
ùuRsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
ùuTsAddr
);

1005 cÚ¡ 
TComTže
 &
cu¼’tTže
 = *(
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
ÕcPic->g‘PicSym()->
	`g‘TžeIdxM­
(
ùuRsAddr
)));

1006 cÚ¡ 
UIÁ
 
fœ¡CtuRsAddrOfTže
 = 
cu¼’tTže
.
	`g‘Fœ¡CtuRsAddr
();

1007 cÚ¡ 
UIÁ
 
tžeXPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 % 
äameWidthInCtus
;

1008 cÚ¡ 
UIÁ
 
tžeYPosInCtus
 = 
fœ¡CtuRsAddrOfTže
 / 
äameWidthInCtus
;

1009 cÚ¡ 
UIÁ
 
ùuXPosInCtus
 = 
ùuRsAddr
 % 
äameWidthInCtus
;

1010 cÚ¡ 
UIÁ
 
ùuYPosInCtus
 = 
ùuRsAddr
 / 
äameWidthInCtus
;

1011 cÚ¡ 
UIÁ
 
uiSubSŒm
=
pcPic
->
	`g‘Sub¡»amFÜCtuAddr
(
ùuRsAddr
, 
Œue
, 
pcSliû
);

1012 
TComD©aCU
* 
pCtu
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 );

1014 
m_pcEÁrÝyCod”
->
	`£tB™¡»am
Ð&
pcSub¡»ams
[
uiSubSŒm
] );

1017 ià(
ùuRsAddr
 =ð
fœ¡CtuRsAddrOfTže
)

1019 ià(
ùuTsAddr
 !ð
¡¬tCtuTsAddr
)

1021 
m_pcEÁrÝyCod”
->
	`»£tEÁrÝy
(
pcSliû
);

1024 ià(
ùuXPosInCtus
 =ð
tžeXPosInCtus
 && 
waveäÚtsEÇbËd
)

1027 ià(
ùuTsAddr
 !ð
¡¬tCtuTsAddr
)

1029 
m_pcEÁrÝyCod”
->
	`»£tEÁrÝy
(
pcSliû
);

1031 
TComD©aCU
 *
pCtuUp
 = 
pCtu
->
	`g‘CtuAbove
();

1032 iàÐ
pCtuUp
 && ((
ùuRsAddr
%
äameWidthInCtus
+1) < frameWidthInCtus) )

1034 
TComD©aCU
 *
pCtuTR
 = 
pcPic
->
	`g‘Ctu
Ð
ùuRsAddr
 - 
äameWidthInCtus
 + 1 );

1035 iàÐ
pCtu
->
	`CUIsFromSameSliûAndTže
(
pCtuTR
) )

1038 
m_pcSbacCod”
->
	`lßdCÚ‹xts
Ð&
m_’ŒÝyCodšgSyncCÚ‹xtS‹
 );

1044 iàÐ
pcSliû
->
	`g‘SPS
()->
	`g‘U£SAO
() )

1046 
BoÞ
 
bIsSAOSliûEÇbËd
 = 
çl£
;

1047 
BoÞ
 
¦iûEÇbËd
[
MAX_NUM_COMPONENT
];

1048 
IÁ
 
comp
=0; com°< 
MAX_NUM_COMPONENT
; comp++)

1050 
CompÚ’tID
 
compId
=
	`CompÚ’tID
(
comp
);

1051 
¦iûEÇbËd
[
compId
] = 
pcSliû
->
	`g‘SaoEÇbËdFÏg
(
	`toChªÃlTy³
(compId)è&& (
comp
 < 
pcPic
->
	`g‘Numb”V®idCompÚ’ts
());

1052 ià(
¦iûEÇbËd
[
compId
])

1054 
bIsSAOSliûEÇbËd
=
Œue
;

1057 ià(
bIsSAOSliûEÇbËd
)

1059 
SAOBlkP¬am
& 
§oblkP¬am
 = (
pcPic
->
	`g‘PicSym
()->
	`g‘SAOBlkP¬am
())[
ùuRsAddr
];

1061 
BoÞ
 
ËáM”geAvaž
 = 
çl£
;

1062 
BoÞ
 
aboveM”geAvaž
ð
çl£
;

1064 
IÁ
 
rx
 = (
ùuRsAddr
 % 
äameWidthInCtus
);

1065 if(
rx
 > 0)

1067 
ËáM”geAvaž
 = 
pcPic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, ctuRsAddr-1);

1071 
IÁ
 
ry
 = (
ùuRsAddr
 / 
äameWidthInCtus
);

1072 if(
ry
 > 0)

1074 
aboveM”geAvaž
 = 
pcPic
->
	`g‘SAOM”geAvažabž™y
(
ùuRsAddr
, ctuRsAddr-
äameWidthInCtus
);

1077 
m_pcEÁrÝyCod”
->
	`’codeSAOBlkP¬am
(
§oblkP¬am
, 
pcPic
->
	`g‘PicSym
()->
	`g‘SPS
().
	`g‘B™D•ths
(), 
¦iûEÇbËd
, 
ËáM”geAvaž
, 
aboveM”geAvaž
);

1081 #ià
ENC_DEC_TRACE


1082 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûEÇbË
;

1084 
m_pcCuEncod”
->
	`’codeCtu
Ð
pCtu
 );

1085 #ià
ENC_DEC_TRACE


1086 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

1090 iàÐ
ùuXPosInCtus
 =ð
tžeXPosInCtus
+1 && 
waveäÚtsEÇbËd
)

1092 
m_’ŒÝyCodšgSyncCÚ‹xtS‹
.
	`lßdCÚ‹xts
Ð
m_pcSbacCod”
 );

1096 ià(
ùuTsAddr
+1 =ð
boundšgCtuTsAddr
 ||

1097 Ð
ùuXPosInCtus
 + 1 =ð
tžeXPosInCtus
 + 
cu¼’tTže
.
	`g‘TžeWidthInCtus
() &&

1098 Ð
ùuYPosInCtus
 + 1 =ð
tžeYPosInCtus
 + 
cu¼’tTže
.
	`g‘TžeHeightInCtus
(è|| 
waveäÚtsEÇbËd
)

1102 
m_pcEÁrÝyCod”
->
	`’codeT”mš©šgB™
(1);

1103 
m_pcEÁrÝyCod”
->
	`’codeSliûFšish
();

1105 
pcSub¡»ams
[
uiSubSŒm
].
	`wr™eBy‹Alignm’t
();

1108 ià(
ùuTsAddr
+1 !ð
boundšgCtuTsAddr
)

1110 
pcSliû
->
	`addSub¡»amSize
Ð(
pcSub¡»ams
[
uiSubSŒm
].
	`g‘Numb”OfWr™‹nB™s
(è>> 3è+…cSub¡»ams[uiSubSŒm].
	`couÁS¹CodeEmuÏtiÚs
() );

1115 ifÐ
d•SliûSegm’tsEÇbËd
 )

1117 
m_Ï¡SliûSegm’tEndCÚ‹xtS‹
.
	`lßdCÚ‹xts
Ð
m_pcSbacCod”
 );

1120 #ià
ADAPTIVE_QP_SELECTION


1121 ifÐ
m_pcCfg
->
	`g‘U£Ad­tQpS–eù
() )

1123 
m_pcTrQuªt
->
	`¡ÜeSliûQpNext
(
pcSliû
);

1127 ià(
pcSliû
->
	`g‘PPS
()->
	`g‘CabacIn™P»£ÁFÏg
(è&& !pcSliû->g‘PPS()->
	`g‘D•’d’tSliûSegm’tsEÇbËdFÏg
())

1129 
m_’cCABACTabËIdx
 = 
m_pcEÁrÝyCod”
->
	`d‘”mšeCabacIn™Idx
(
pcSliû
);

1133 
m_’cCABACTabËIdx
 = 
pcSliû
->
	`g‘SliûTy³
();

1136 
numBšsCoded
 = 
m_pcBšCABAC
->
	`g‘BšsCoded
();

1137 
	}
}

1139 
Void
 
	gTEncSliû
::
	$ÿlcuÏ‹BoundšgCtuTsAddrFÜSliû
(
UIÁ
 &
¡¬tCtuTSAddrSliû
, UIÁ &
boundšgCtuTSAddrSliû
, 
BoÞ
 &
haveR—chedTžeBound¬y
,

1140 
TComPic
* 
pcPic
, cÚ¡ 
IÁ
 
¦iûMode
, cÚ¡ IÁ 
¦iûArgum’t
)

1142 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

1143 cÚ¡ 
UIÁ
 
numb”OfCtusInF¿me
 = 
pcPic
->
	`g‘Numb”OfCtusInF¿me
();

1144 cÚ¡ 
TComPPS
 &
µs
=*(
pcSliû
->
	`g‘PPS
());

1145 
boundšgCtuTSAddrSliû
=0;

1146 
haveR—chedTžeBound¬y
=
çl£
;

1148 
¦iûMode
)

1150 
FIXED_NUMBER_OF_CTU
:

1152 
UIÁ
 
ùuAddrInüem’t
 = 
¦iûArgum’t
;

1153 
boundšgCtuTSAddrSliû
 = ((
¡¬tCtuTSAddrSliû
 + 
ùuAddrInüem’t
è< 
numb”OfCtusInF¿me
) ? (startCtuTSAddrSlice + ctuAddrIncrement) :‚umberOfCtusInFrame;

1156 
FIXED_NUMBER_OF_BYTES
:

1157 
boundšgCtuTSAddrSliû
 = 
numb”OfCtusInF¿me
;

1159 
FIXED_NUMBER_OF_TILES
:

1161 cÚ¡ 
UIÁ
 
tžeIdx
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
ÐpcPic->g‘PicSym()->
	`g‘CtuTsToRsAddrM­
(
¡¬tCtuTSAddrSliû
) );

1162 cÚ¡ 
UIÁ
 
tžeTÙ®CouÁ
 = (
pcPic
->
	`g‘PicSym
()->
	`g‘NumTžeCÞumnsMšus1
()+1è* (pcPic->g‘PicSym()->
	`g‘NumTžeRowsMšus1
()+1);

1163 
UIÁ
 
ùuAddrInüem’t
 = 0;

1165 
UIÁ
 
tžeIdxInüem’t
 = 0;žeIdxInüem’ˆ< 
¦iûArgum’t
;ileIdxIncrement++)

1167 if((
tžeIdx
 + 
tžeIdxInüem’t
è< 
tžeTÙ®CouÁ
)

1169 
UIÁ
 
tžeWidthInCtus
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
tžeIdx
 + 
tžeIdxInüem’t
)->
	`g‘TžeWidthInCtus
();

1170 
UIÁ
 
tžeHeightInCtus
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
tžeIdx
 + 
tžeIdxInüem’t
)->
	`g‘TžeHeightInCtus
();

1171 
ùuAddrInüem’t
 +ð(
tžeWidthInCtus
 * 
tžeHeightInCtus
);

1175 
boundšgCtuTSAddrSliû
 = ((
¡¬tCtuTSAddrSliû
 + 
ùuAddrInüem’t
è< 
numb”OfCtusInF¿me
) ? (startCtuTSAddrSlice + ctuAddrIncrement) :‚umberOfCtusInFrame;

1179 
boundšgCtuTSAddrSliû
 = 
numb”OfCtusInF¿me
;

1184 cÚ¡ 
BoÞ
 
waveäÚtsA»EÇbËd
 = 
µs
.
	`g‘EÁrÝyCodšgSyncEÇbËdFÏg
();

1186 ià((
¦iûMode
 =ð
FIXED_NUMBER_OF_CTU
 || sliûMod=ð
FIXED_NUMBER_OF_BYTES
) &&

1187 (
µs
.
	`g‘NumTžeRowsMšus1
(è> 0 ||…ps.
	`g‘NumTžeCÞumnsMšus1
() > 0))

1189 cÚ¡ 
UIÁ
 
ùuRSAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuTsToRsAddrM­
(
¡¬tCtuTSAddrSliû
);

1190 cÚ¡ 
UIÁ
 
¡¬tTžeIdx
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TžeIdxM­
(
ùuRSAddr
);

1192 cÚ¡ 
TComTže
 *
pS¹šgTže
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘TComTže
(
¡¬tTžeIdx
);

1193 cÚ¡ 
UIÁ
 
tžeS¹TsAddr
 = 
pcPic
->
	`g‘PicSym
()->
	`g‘CtuRsToTsAddrM­
(
pS¹šgTže
->
	`g‘Fœ¡CtuRsAddr
());

1194 cÚ¡ 
UIÁ
 
tžeS¹Width
 = 
pS¹šgTže
->
	`g‘TžeWidthInCtus
();

1195 cÚ¡ 
UIÁ
 
tžeS¹Height
 = 
pS¹šgTže
->
	`g‘TžeHeightInCtus
();

1196 cÚ¡ 
UIÁ
 
tžeLa¡TsAddr_exþ
 = 
tžeS¹TsAddr
 + 
tžeS¹Width
*
tžeS¹Height
;

1197 cÚ¡ 
UIÁ
 
tžeBoundšgCtuTsAddrSliû
 = 
tžeLa¡TsAddr_exþ
;

1199 cÚ¡ 
UIÁ
 
ùuCÞumnOfS¹šgTže
 = ((
¡¬tCtuTSAddrSliû
-
tžeS¹TsAddr
)%
tžeS¹Width
);

1200 ià(
waveäÚtsA»EÇbËd
 && 
ùuCÞumnOfS¹šgTže
!=0)

1203 cÚ¡ 
UIÁ
 
numb”OfCTUsToEndOfRow
 = 
tžeS¹Width
 - 
ùuCÞumnOfS¹šgTže
;

1204 cÚ¡ 
UIÁ
 
waveäÚtTžeBoundšgCtuAddrSliû
 = 
¡¬tCtuTSAddrSliû
 + 
numb”OfCTUsToEndOfRow
;

1205 ià(
waveäÚtTžeBoundšgCtuAddrSliû
 < 
boundšgCtuTSAddrSliû
)

1207 
boundšgCtuTSAddrSliû
 = 
waveäÚtTžeBoundšgCtuAddrSliû
;

1211 ià(
tžeBoundšgCtuTsAddrSliû
 < 
boundšgCtuTSAddrSliû
)

1213 
boundšgCtuTSAddrSliû
 = 
tžeBoundšgCtuTsAddrSliû
;

1214 
haveR—chedTžeBound¬y
 = 
Œue
;

1217 ià((
¦iûMode
 =ð
FIXED_NUMBER_OF_CTU
 || sliûMod=ð
FIXED_NUMBER_OF_BYTES
è&& 
waveäÚtsA»EÇbËd
 && ((
¡¬tCtuTSAddrSliû
 % 
pcPic
->
	`g‘F¿meWidthInCtus
()) != 0))

1221 
boundšgCtuTSAddrSliû
 = 
	`mš
(boundšgCtuTSAddrSliû, 
¡¬tCtuTSAddrSliû
 - (¡¬tCtuTSAddrSliû % 
pcPic
->
	`g‘F¿meWidthInCtus
()) + (pcPic->getFrameWidthInCtus()));

1223 
	}
}

1232 
Void
 
	gTEncSliû
::
	$xD‘”mšeS¹AndBoundšgCtuTsAddr
 ( 
UIÁ
& 
¡¬tCtuTsAddr
, UIÁ& 
boundšgCtuTsAddr
, 
TComPic
* 
pcPic
 )

1234 
TComSliû
* 
pcSliû
 = 
pcPic
->
	`g‘Sliû
(
	`g‘SliûIdx
());

1237 
UIÁ
 
¡¬tCtuTsAddrSliû
 = 
pcSliû
->
	`g‘SliûCurS¹CtuTsAddr
();

1238 
BoÞ
 
haveR—chedTžeBound¬ySliû
 = 
çl£
;

1239 
UIÁ
 
boundšgCtuTsAddrSliû
;

1240 
	`ÿlcuÏ‹BoundšgCtuTsAddrFÜSliû
(
¡¬tCtuTsAddrSliû
, 
boundšgCtuTsAddrSliû
, 
haveR—chedTžeBound¬ySliû
, 
pcPic
,

1241 
m_pcCfg
->
	`g‘SliûMode
(), m_pcCfg->
	`g‘SliûArgum’t
());

1242 
pcSliû
->
	`£tSliûCurEndCtuTsAddr
Ð
boundšgCtuTsAddrSliû
 );

1243 
pcSliû
->
	`£tSliûCurS¹CtuTsAddr
Ð
¡¬tCtuTsAddrSliû
 );

1246 
UIÁ
 
¡¬tCtuTsAddrSliûSegm’t
 = 
pcSliû
->
	`g‘SliûSegm’tCurS¹CtuTsAddr
();

1247 
BoÞ
 
haveR—chedTžeBound¬ySliûSegm’t
 = 
çl£
;

1248 
UIÁ
 
boundšgCtuTsAddrSliûSegm’t
;

1249 
	`ÿlcuÏ‹BoundšgCtuTsAddrFÜSliû
(
¡¬tCtuTsAddrSliûSegm’t
, 
boundšgCtuTsAddrSliûSegm’t
, 
haveR—chedTžeBound¬ySliûSegm’t
, 
pcPic
,

1250 
m_pcCfg
->
	`g‘SliûSegm’tMode
(), m_pcCfg->
	`g‘SliûSegm’tArgum’t
());

1251 ià(
boundšgCtuTsAddrSliûSegm’t
>
boundšgCtuTsAddrSliû
)

1253 
boundšgCtuTsAddrSliûSegm’t
 = 
boundšgCtuTsAddrSliû
;

1255 
pcSliû
->
	`£tSliûSegm’tCurEndCtuTsAddr
Ð
boundšgCtuTsAddrSliûSegm’t
 );

1256 
pcSliû
->
	`£tSliûSegm’tCurS¹CtuTsAddr
(
¡¬tCtuTsAddrSliûSegm’t
);

1259 
¡¬tCtuTsAddr
 = 
	`max
(
¡¬tCtuTsAddrSliû
 , 
¡¬tCtuTsAddrSliûSegm’t
 );

1260 
boundšgCtuTsAddr
 = 
boundšgCtuTsAddrSliûSegm’t
;

1261 
	}
}

1263 
DoubË
 
	gTEncSliû
::
	$xG‘QPV®ueAccÜdšgToLambda
 ( 
DoubË
 
Ïmbda
 )

1265  4.2005*
	`log
(
Ïmbda
) + 13.7122;

1266 
	}
}

	@source/Lib/TLibEncoder/TEncSlice.h

38 #iâdeà
__TENCSLICE__


39 
	#__TENCSLICE__


	)

42 
	~"TLibCommÚ/CommÚDef.h
"

43 
	~"TLibCommÚ/TComLi¡.h
"

44 
	~"TLibCommÚ/TComPic.h
"

45 
	~"TLibCommÚ/TComPicYuv.h
"

46 
	~"TEncCu.h
"

47 
	~"WeightP»dAÇlysis.h
"

48 
	~"TEncR©eCŒl.h
"

53 
þass
 
	gTEncTÝ
;

54 
þass
 
	gTEncGOP
;

61 þas 
	cTEncSliû


62 : 
public
 
WeightP»dAÇlysis


64 
´iv©e
:

66 
TEncCfg
* 
m_pcCfg
;

69 
	mTComLi¡
<
	mTComPic
*>* 
	mm_pcLi¡Pic
;

70 
TComPicYuv
 
	mm_picYuvP»d
;

71 
TComPicYuv
 
	mm_picYuvResi
;

74 
TEncGOP
* 
	mm_pcGOPEncod”
;

75 
TEncCu
* 
	mm_pcCuEncod”
;

78 
TEncS—rch
* 
	mm_pcP»dS—rch
;

81 
TEncEÁrÝy
* 
	mm_pcEÁrÝyCod”
;

82 
TEncSbac
* 
	mm_pcSbacCod”
;

83 
TEncBšCABAC
* 
	mm_pcBšCABAC
;

84 
TComTrQuªt
* 
	mm_pcTrQuªt
;

87 
TComRdCo¡
* 
	mm_pcRdCo¡
;

88 
TEncSbac
*** 
	mm_µpcRDSbacCod”
;

89 
TEncSbac
* 
	mm_pcRDGoOnSbacCod”
;

90 
UIÁ64
 
	mm_uiPicTÙ®B™s
;

91 
UIÁ64
 
	mm_uiPicDi¡
;

92 
DoubË
 
	mm_dPicRdCo¡
;

93 
	m¡d
::
veùÜ
<
DoubË
> 
m_vdRdPicLambda
;

94 
	m¡d
::
veùÜ
<
DoubË
> 
m_vdRdPicQp
;

95 
	m¡d
::
veùÜ
<
IÁ
> 
m_viRdPicQp
;

96 
TEncR©eCŒl
* 
	mm_pcR©eCŒl
;

97 
UIÁ
 
	mm_uiSliûIdx
;

98 
TEncSbac
 
	mm_Ï¡SliûSegm’tEndCÚ‹xtS‹
;

99 
TEncSbac
 
	mm_’ŒÝyCodšgSyncCÚ‹xtS‹
;

100 
SliûTy³
 
	mm_’cCABACTabËIdx
;

101 
IÁ
 
	mm_gÝID
;

103 
DoubË
 
ÿlcuÏ‹Lambda
ÐcÚ¡ 
TComSliû
* 
pSliû
, cÚ¡ 
IÁ
 
GOPid
, cÚ¡ IÁ 
d•th
, cÚ¡ DoubË 
»fQP
, cÚ¡ DoubË 
dQP
, IÁ &
iQP
 );

104 
Void
 
£tUpLambda
(
TComSliû
* 
¦iû
, cÚ¡ 
DoubË
 
dLambda
, 
IÁ
 
iQP
);

105 
Void
 
ÿlcuÏ‹BoundšgCtuTsAddrFÜSliû
(
UIÁ
 &
¡¬tCtuTSAddrSliû
, UIÁ &
boundšgCtuTSAddrSliû
, 
BoÞ
 &
haveR—chedTžeBound¬y
, 
TComPic
* 
pcPic
, cÚ¡ 
IÁ
 
¦iûMode
, cÚ¡ IÁ 
¦iûArgum’t
);

107 
	mpublic
:

108 
TEncSliû
();

109 
	mvœtu®
 ~
TEncSliû
();

111 
Void
 
ü—‹
 ( 
IÁ
 
iWidth
, IÁ 
iHeight
, 
ChromaFÜm©
 
chromaFÜm©
, 
UIÁ
 
iMaxCUWidth
, UIÁ 
iMaxCUHeight
, 
UCh¬
 
uhTÙ®D•th
 );

112 
Void
 
de¡roy
 ();

113 
Void
 
š™
 ( 
TEncTÝ
* 
pcEncTÝ
 );

114 
Void
 
	$»£tEncod”DecisiÚs
(è{ 
m_’cCABACTabËIdx
 = 
I_SLICE
; }

117 
Void
 
	`š™EncSliû
 ( 
TComPic
* 
pcPic
, cÚ¡ 
IÁ
 
pocLa¡
, cÚ¡ IÁ 
pocCu¼
,

118 cÚ¡ 
IÁ
 
iGOPid
, 
TComSliû
*& 
½cSliû
, cÚ¡ 
BoÞ
 
isF›ld
 );

119 
Void
 
	`»£tQP
 ( 
TComPic
* 
pic
, 
IÁ
 
¦iûQP
, 
DoubË
 
Ïmbda
 );

120 
Void
 
	$£tGÝID
Ð
IÁ
 
iGÝID
 ) { 
m_gÝID
 = iGÝID; 
	}
}

121 
IÁ
 
	$g‘GÝID
(ècÚ¡ {  
m_gÝID
; 
	}
}

122 
Void
 
upd©eLambda
(
TComSliû
* 
pSliû
, 
DoubË
 
dQP
);

125 
Void
 
´ecom´essSliû
 ( 
TComPic
* 
pcPic
 );

126 
Void
 
com´essSliû
 ( 
TComPic
* 
pcPic
, cÚ¡ 
BoÞ
 
bCom´essEÁœeSliû
, cÚ¡ BoÞ 
bFa¡D–QP
 );

127 
Void
 
ÿlCo¡SliûI
 ( 
TComPic
* 
pcPic
 );

128 
Void
 
’codeSliû
 ( 
TComPic
* 
pcPic
, 
TComOuutB™¡»am
* 
pcSub¡»ams
, 
UIÁ
 &
numBšsCoded
 );

131 
Void
 
£tS—rchRªge
 ( 
TComSliû
* 
pcSliû
 );

133 
TEncCu
* 
	$g‘CUEncod”
(è{  
m_pcCuEncod”
; 
	}
}

134 
Void
 
xD‘”mšeS¹AndBoundšgCtuTsAddr
 ( 
UIÁ
& 
¡¬tCtuTsAddr
, UIÁ& 
boundšgCtuTsAddr
, 
TComPic
* 
pcPic
 );

135 
UIÁ
 
	$g‘SliûIdx
(è{  
m_uiSliûIdx
; 
	}
}

136 
Void
 
	$£tSliûIdx
(
UIÁ
 
i
è{ 
m_uiSliûIdx
 = i; 
	}
}

138 
SliûTy³
 
	$g‘EncCABACTabËIdx
(ècÚ¡ {  
m_’cCABACTabËIdx
; 
	}
}

140 
	g´iv©e
:

141 
DoubË
 
xG‘QPV®ueAccÜdšgToLambda
 ( DoubË 
Ïmbda
 );

	@source/Lib/TLibEncoder/TEncTemporalFilter.cpp

37 
	~"TEncTempÜ®Fž‹r.h
"

38 
	~<m©h.h
>

45 cÚ¡ 
IÁ
 
	gTEncTempÜ®Fž‹r
::
s_¿nge
 = 2;

46 cÚ¡ 
DoubË
 
	gTEncTempÜ®Fž‹r
::
s_chromaFaùÜ
 = 0.55;

47 cÚ¡ 
DoubË
 
	gTEncTempÜ®Fž‹r
::
s_sigmaMuÉl›r
 = 9.0;

48 cÚ¡ 
DoubË
 
	gTEncTempÜ®Fž‹r
::
s_sigmaZ”oPošt
 = 10.0;

49 cÚ¡ 
IÁ
 
	gTEncTempÜ®Fž‹r
::
s_mÙiÚVeùÜFaùÜ
 = 16;

50 cÚ¡ 
IÁ
 
	gTEncTempÜ®Fž‹r
::
s_·ddšg
 = 128;

51 cÚ¡ 
IÁ
 
	gTEncTempÜ®Fž‹r
::
s_š‹½Þ©iÚFž‹r
[16][8] =

71 cÚ¡ 
DoubË
 
	gTEncTempÜ®Fž‹r
::
s_»fSŒ’gths
[3][2] =

79 
	gTEncTempÜ®Fž‹r
::
	$TEncTempÜ®Fž‹r
() :

80 
	`m_F¿meSk
(0),

81 
	`m_chromaFÜm©IDC
(
NUM_CHROMA_FORMAT
),

82 
	`m_sourûWidth
(0),

83 
	`m_sourûHeight
(0),

84 
	`m_QP
(0),

85 
	`m_GOPSize
(0),

86 
	`m_äamesToBeEncoded
(0),

87 
	`m_bClIÅutVideoToRec709Rªge
(
çl£
),

88 
	$m_šputCÞourS·ûCÚv”t
(
NUMBER_INPUT_COLOUR_SPACE_CONVERSIONS
)

89 {
	}
}

91 
	gTEncTempÜ®Fž‹r
::
š™
(cÚ¡ 
IÁ
 
äameSk
,

92 cÚ¡ 
IÁ
 
šputB™D•th
[
MAX_NUM_CHANNEL_TYPE
],

93 cÚ¡ 
IÁ
 
MSBEx‹ndedB™D•th
[
MAX_NUM_CHANNEL_TYPE
],

94 cÚ¡ 
IÁ
 
š‹º®B™D•th
[
MAX_NUM_CHANNEL_TYPE
],

95 cÚ¡ 
IÁ
 
width
,

96 cÚ¡ 
IÁ
 
height
,

97 cÚ¡ 
IÁ
 *
·d
,

98 cÚ¡ 
IÁ
 
äames
,

99 cÚ¡ 
BoÞ
 
Rec709
,

100 cÚ¡ 
¡d
::
¡ršg
 &
fž’ame
,

101 cÚ¡ 
ChromaFÜm©
 
šputChromaFÜm©IDC
,

102 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
cÞÜS·ûCÚv
,

103 cÚ¡ 
IÁ
 
QP
,

104 cÚ¡ 
IÁ
 
GOPSize
,

105 cÚ¡ 
¡d
::
m­
<
IÁ
, 
DoubË
> &
‹mpÜ®Fž‹rSŒ’gths
,

106 cÚ¡ 
BoÞ
 
gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
)

108 
	gm_F¿meSk
 = 
äameSk
;

109 
IÁ
 
	gi
 = 0; i < 
	gMAX_NUM_CHANNEL_TYPE
; i++)

111 
	gm_šputB™D•th
[
i
] = 
šputB™D•th
[i];

112 
	gm_MSBEx‹ndedB™D•th
[
i
] = 
MSBEx‹ndedB™D•th
[i];

113 
	gm_š‹º®B™D•th
[
i
] = 
š‹º®B™D•th
[i];

116 
	gm_sourûWidth
 = 
width
;

117 
	gm_sourûHeight
 = 
height
;

118 
IÁ
 
	gi
 = 0; i < 2; i++)

120 
	gm_aiPad
[
i
] = 
·d
[i];

122 
	gm_äamesToBeEncoded
 = 
äames
;

123 
	gm_bClIÅutVideoToRec709Rªge
 = 
Rec709
;

124 
	gm_šputFžeName
 = 
fž’ame
;

125 
	gm_chromaFÜm©IDC
 = 
šputChromaFÜm©IDC
;

126 
	gm_šputCÞourS·ûCÚv”t
 = 
cÞÜS·ûCÚv
;

127 
	gm_QP
 = 
QP
;

128 
	gm_GOPSize
 = 
GOPSize
;

129 
	gm_‹mpÜ®Fž‹rSŒ’gths
 = 
‹mpÜ®Fž‹rSŒ’gths
;

130 
	gm_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
 = 
gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
;

137 
BoÞ
 
	gTEncTempÜ®Fž‹r
::
	$fž‹r
(
TComPicYuv
 *
ÜgPic
, 
IÁ
 
»ûivedPoc
)

139 
BoÞ
 
isFž‹rThisF¿me
 = 
çl£
;

140 ià(
m_QP
 >= 17)

142 
m­
<
IÁ
, 
DoubË
>::
™”©Ü
 
™
 = 
m_‹mpÜ®Fž‹rSŒ’gths
.
	`begš
(); iˆ!ðm_‹mpÜ®Fž‹rSŒ’gths.
	`’d
(); ++it)

144 
IÁ
 
fž‹»dF¿me
 = 
™
->
fœ¡
;

145 ià(
»ûivedPoc
 % 
fž‹»dF¿me
 == 0)

147 
isFž‹rThisF¿me
 = 
Œue
;

153 ià(
isFž‹rThisF¿me
)

155 
IÁ
 
off£t
 = 
m_F¿meSk
;

156 
TVideoIOYuv
 
yuvF¿mes
;

157 
yuvF¿mes
.
	`Ý’
(
m_šputFžeName
, 
çl£
, 
m_šputB™D•th
, 
m_MSBEx‹ndedB™D•th
, 
m_š‹º®B™D•th
);

158 
yuvF¿mes
.
	`skF¿mes
(
¡d
::
	`max
(
off£t
 + 
»ûivedPoc
 - 
s_¿nge
, 0), 
m_sourûWidth
 - 
m_aiPad
[0], 
m_sourûHeight
 - m_aiPad[1], 
m_chromaFÜm©IDC
);

161 
¡d
::
deque
<
TempÜ®Fž‹rSourûPicInfo
> 
¤cF¿meInfo
;

163 
IÁ
 
fœ¡F¿me
 = 
»ûivedPoc
 + 
off£t
 - 
s_¿nge
;

164 
IÁ
 
Ï¡F¿me
 = 
»ûivedPoc
 + 
off£t
 + 
s_¿nge
;

165 ià(!
m_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
)

167 
Ï¡F¿me
 = 
»ûivedPoc
 + 
off£t
 - 1;

169 
IÁ
 
ÜigOff£t
 = -
s_¿nge
;

172 
TComPicYuv
 
ÜigPadded
;

174 
ÜigPadded
.
	`ü—‹W™houtCUInfo
(
m_sourûWidth
, 
m_sourûHeight
, 
m_chromaFÜm©IDC
, 
Œue
, 
s_·ddšg
, s_padding);

175 
ÜgPic
->
	`cÝyToPic
(&
ÜigPadded
);

176 
ÜigPadded
.
	`ex‹ndPicBÜd”
();

178 
TComPicYuv
 
ÜigSub§m¶ed2
;

179 
TComPicYuv
 
ÜigSub§m¶ed4
;

181 
	`sub§m¶eLuma
(
ÜigPadded
, 
ÜigSub§m¶ed2
);

182 
	`sub§m¶eLuma
(
ÜigSub§m¶ed2
, 
ÜigSub§m¶ed4
);

185 
IÁ
 
poc
 = 
fœ¡F¿me
;…oø<ð
Ï¡F¿me
;…oc++)

187 ià(
poc
 < 0)

189 
ÜigOff£t
++;

192 ià(
poc
 =ð
off£t
 + 
»ûivedPoc
)

194 
yuvF¿mes
.
	`skF¿mes
(1, 
m_sourûWidth
 - 
m_aiPad
[0], 
m_sourûHeight
 - m_aiPad[1], 
m_chromaFÜm©IDC
);

195 
ÜigOff£t
++;

198 
¤cF¿meInfo
.
	`push_back
(
	`TempÜ®Fž‹rSourûPicInfo
());

199 
TempÜ®Fž‹rSourûPicInfo
 &
¤cPic
=
¤cF¿meInfo
.
	`back
();

201 
TComPicYuv
 
dummyPicBufãrTO
;

202 
¤cPic
.
picBufãr
.
	`ü—‹W™houtCUInfo
(
m_sourûWidth
, 
m_sourûHeight
, 
m_chromaFÜm©IDC
, 
Œue
, 
s_·ddšg
, s_padding);

203 
dummyPicBufãrTO
.
	`ü—‹W™houtCUInfo
(
m_sourûWidth
, 
m_sourûHeight
, 
m_chromaFÜm©IDC
, 
Œue
, 
s_·ddšg
, s_padding);

204 ià(!
yuvF¿mes
.
	`»ad
(&
¤cPic
.
picBufãr
, &
dummyPicBufãrTO
, 
m_šputCÞourS·ûCÚv”t
, 
m_aiPad
, 
m_chromaFÜm©IDC
, 
m_bClIÅutVideoToRec709Rªge
))

206  
çl£
;

208 
¤cPic
.
picBufãr
.
	`ex‹ndPicBÜd”
();

209 
¤cPic
.
mvs
.
	`®loÿ‹
(
m_sourûWidth
 / 4, 
m_sourûHeight
 / 4);

211 
	`mÙiÚE¡im©iÚ
(
¤cPic
.
mvs
, 
ÜigPadded
, srcPic.
picBufãr
, 
ÜigSub§m¶ed2
, 
ÜigSub§m¶ed4
);

212 
¤cPic
.
ÜigOff£t
 = origOffset;

213 
ÜigOff£t
++;

217 
TComPicYuv
 
ÃwOrgPic
;

218 
ÃwOrgPic
.
	`ü—‹W™houtCUInfo
(
m_sourûWidth
, 
m_sourûHeight
, 
m_chromaFÜm©IDC
, 
Œue
, 
s_·ddšg
, s_padding);

219 
DoubË
 
ov”®lSŒ’gth
 = -1.0;

220 
m­
<
IÁ
, 
DoubË
>::
™”©Ü
 
™
 = 
m_‹mpÜ®Fž‹rSŒ’gths
.
	`begš
(); iˆ!ðm_‹mpÜ®Fž‹rSŒ’gths.
	`’d
(); ++it)

222 
IÁ
 
äame
 = 
™
->
fœ¡
;

223 
DoubË
 
¡»ngth
 = 
™
->
£cÚd
;

224 ià(
»ûivedPoc
 % 
äame
 == 0)

226 
ov”®lSŒ’gth
 = 
¡»ngth
;

230 
	`bž©”®Fž‹r
(
ÜigPadded
, 
¤cF¿meInfo
, 
ÃwOrgPic
, 
ov”®lSŒ’gth
);

233 
ÃwOrgPic
.
	`cÝyToPic
(
ÜgPic
);

235 
yuvF¿mes
.
	`þo£
();

236  
Œue
;

238  
çl£
;

239 
	}
}

245 
Void
 
	gTEncTempÜ®Fž‹r
::
	$sub§m¶eLuma
(cÚ¡ 
TComPicYuv
 &
šput
, TComPicYuv &
ouut
, cÚ¡ 
IÁ
 
çùÜ
) const

247 cÚ¡ 
IÁ
 
ÃwWidth
 = 
šput
.
	`g‘Width
(
COMPONENT_Y
è/ 
çùÜ
;

248 cÚ¡ 
IÁ
 
ÃwHeight
 = 
šput
.
	`g‘Height
(
COMPONENT_Y
è/ 
çùÜ
;

249 
ouut
.
	`ü—‹W™houtCUInfo
(
ÃwWidth
, 
ÃwHeight
, 
šput
.
	`g‘ChromaFÜm©
(), 
Œue
, 
s_·ddšg
, s_padding);

251 cÚ¡ 
P–
* 
¤cRow
 =
šput
.
	`g‘Addr
(
COMPONENT_Y
);

252 cÚ¡ 
UIÁ
 
¤cSŒide
=
šput
.
	`g‘SŒide
(
COMPONENT_Y
);

253 
P–
 *
d¡Row
 =
ouut
.
	`g‘Addr
(
COMPONENT_Y
);

254 cÚ¡ 
UIÁ
 
d¡SŒide
=
ouut
.
	`g‘SŒide
(
COMPONENT_Y
);

256 
IÁ
 
y
 = 0; y < 
ÃwHeight
; y++, 
¤cRow
+=
çùÜ
*
¤cSŒide
, 
d¡Row
+=
d¡SŒide
)

258 cÚ¡ 
P–
 *
šRow
 = 
¤cRow
;

259 cÚ¡ 
P–
 *
šRowB–ow
 = 
¤cRow
+
¤cSŒide
;

260 
P–
 *
rg‘
 = 
d¡Row
;

262 
IÁ
 
x
 = 0; x < 
ÃwWidth
; x++)

264 
rg‘
[
x
] = (
šRow
[0] + 
šRowB–ow
[0] + inRow[1] + inRowBelow[1] + 2) >> 2;

265 
šRow
 += 2;

266 
šRowB–ow
 += 2;

269 
ouut
.
	`ex‹ndPicBÜd”
();

270 
	}
}

272 
IÁ
 
	gTEncTempÜ®Fž‹r
::
	$mÙiÚE¼ÜLuma
(cÚ¡ 
TComPicYuv
 &
Üig
,

273 cÚ¡ 
TComPicYuv
 &
bufãr
,

274 cÚ¡ 
IÁ
 
x
,

275 cÚ¡ 
IÁ
 
y
,

276 
IÁ
 
dx
,

277 
IÁ
 
dy
,

278 cÚ¡ 
IÁ
 
bs
,

279 cÚ¡ 
IÁ
 
be¡”rÜ
 = 8 * 8 * 1024 * 1024) const

282 cÚ¡ 
P–
* 
ÜigOrigš
 =
Üig
.
	`g‘Addr
(
COMPONENT_Y
);

283 cÚ¡ 
IÁ
 
ÜigSŒide
 =
Üig
.
	`g‘SŒide
(
COMPONENT_Y
);

284 cÚ¡ 
P–
 *
buffOrigš
 =
bufãr
.
	`g‘Addr
(
COMPONENT_Y
);

285 cÚ¡ 
IÁ
 
buffSŒide
 =
bufãr
.
	`g‘SŒide
(
COMPONENT_Y
);

286 
IÁ
 
”rÜ
 = 0;

287 ià(((
dx
 | 
dy
) & 0xF) == 0)

289 
dx
 /ð
s_mÙiÚVeùÜFaùÜ
;

290 
dy
 /ð
s_mÙiÚVeùÜFaùÜ
;

291 
IÁ
 
y1
 = 0; y1 < 
bs
; y1++)

293 cÚ¡ 
P–
* 
ÜigRowS¹
 = 
ÜigOrigš
 + (
y
+
y1
)*
ÜigSŒide
 + 
x
;

294 cÚ¡ 
P–
* 
bufãrRowS¹
 = 
buffOrigš
 + (
y
+
y1
+
dy
)*
buffSŒide
 + (
x
+
dx
);

295 
IÁ
 
x1
 = 0; x1 < 
bs
; x1 += 2)

297 
IÁ
 
diff
 = 
ÜigRowS¹
[
x1
] - 
bufãrRowS¹
[x1];

298 
”rÜ
 +ð
diff
 * diff;

299 
diff
 = 
ÜigRowS¹
[
x1
 + 1] - 
bufãrRowS¹
[x1 + 1];

300 
”rÜ
 +ð
diff
 * diff;

302 ià(
”rÜ
 > 
be¡”rÜ
)

304  
”rÜ
;

310 cÚ¡ 
IÁ
 *
xFž‹r
 = 
s_š‹½Þ©iÚFž‹r
[
dx
 & 0xF];

311 cÚ¡ 
IÁ
 *
yFž‹r
 = 
s_š‹½Þ©iÚFž‹r
[
dy
 & 0xF];

312 
IÁ
 
‹mpA¼ay
[64 + 8][64];

314 
IÁ
 
iSum
, 
iBa£
;

315 
IÁ
 
y1
 = 1; y1 < 
bs
 + 7; y1++)

317 cÚ¡ 
IÁ
 
yOff£t
 = 
y
 + 
y1
 + (
dy
 >> 4) - 3;

318 cÚ¡ 
P–
 *
sourûRow
 = 
buffOrigš
 + (
yOff£t
)*
buffSŒide
 + 0;

319 
IÁ
 
x1
 = 0; x1 < 
bs
; x1++)

321 
iSum
 = 0;

322 
iBa£
 = 
x
 + 
x1
 + (
dx
 >> 4) - 3;

323 cÚ¡ 
P–
 *
rowS¹
 = 
sourûRow
 + 
iBa£
;

325 
iSum
 +ð
xFž‹r
[1] * 
rowS¹
[1];

326 
iSum
 +ð
xFž‹r
[2] * 
rowS¹
[2];

327 
iSum
 +ð
xFž‹r
[3] * 
rowS¹
[3];

328 
iSum
 +ð
xFž‹r
[4] * 
rowS¹
[4];

329 
iSum
 +ð
xFž‹r
[5] * 
rowS¹
[5];

330 
iSum
 +ð
xFž‹r
[6] * 
rowS¹
[6];

332 
‹mpA¼ay
[
y1
][
x1
] = 
iSum
;

336 cÚ¡ 
P–
 
maxSam¶eV®ue
 = (1<<
m_š‹º®B™D•th
[
CHANNEL_TYPE_LUMA
])-1;

337 
IÁ
 
y1
 = 0; y1 < 
bs
; y1++)

339 cÚ¡ 
P–
 *
ÜigRow
 = 
ÜigOrigš
 + (
y
+
y1
)*
ÜigSŒide
 + 0;

340 
IÁ
 
x1
 = 0; x1 < 
bs
; x1++)

342 
iSum
 = 0;

343 
iSum
 +ð
yFž‹r
[1] * 
‹mpA¼ay
[
y1
 + 1][
x1
];

344 
iSum
 +ð
yFž‹r
[2] * 
‹mpA¼ay
[
y1
 + 2][
x1
];

345 
iSum
 +ð
yFž‹r
[3] * 
‹mpA¼ay
[
y1
 + 3][
x1
];

346 
iSum
 +ð
yFž‹r
[4] * 
‹mpA¼ay
[
y1
 + 4][
x1
];

347 
iSum
 +ð
yFž‹r
[5] * 
‹mpA¼ay
[
y1
 + 5][
x1
];

348 
iSum
 +ð
yFž‹r
[6] * 
‹mpA¼ay
[
y1
 + 6][
x1
];

350 
iSum
 = (iSum + (1 << 11)) >> 12;

351 
iSum
 = iSum < 0 ? 0 : (iSum > 
maxSam¶eV®ue
 ? maxSampleValue : iSum);

353 
”rÜ
 +ð(
iSum
 - 
ÜigRow
[
x
 + 
x1
]) * (iSum - origRow[x + x1]);

355 ià(
”rÜ
 > 
be¡”rÜ
)

357  
”rÜ
;

361  
”rÜ
;

362 
	}
}

364 
Void
 
	gTEncTempÜ®Fž‹r
::
mÙiÚE¡im©iÚLuma
(
A¼ay2D
<
MÙiÚVeùÜ
> &
mvs
, cÚ¡ 
TComPicYuv
 &
Üig
, cÚ¡ TComPicYuv &
bufãr
, cÚ¡ 
IÁ
 
blockSize
,

365 cÚ¡ 
A¼ay2D
<
MÙiÚVeùÜ
> *
´evious
, cÚ¡ 
IÁ
 
çùÜ
, cÚ¡ 
BoÞ
 
doubËRes
) const

367 
IÁ
 
	g¿nge
 = 5;

368 cÚ¡ 
IÁ
 
	g¡•Size
 = 
blockSize
;

370 cÚ¡ 
IÁ
 
	gÜigWidth
 = 
Üig
.
g‘Width
(
COMPONENT_Y
);

371 cÚ¡ 
IÁ
 
	gÜigHeight
 = 
Üig
.
g‘Height
(
COMPONENT_Y
);

373 
IÁ
 
	gblockY
 = 0; blockY + 
	gblockSize
 < 
	gÜigHeight
; blockY +ð
¡•Size
)

375 
IÁ
 
blockX
 = 0; 
	gblockX
 + 
	gblockSize
 < 
	gÜigWidth
; blockX +ð
¡•Size
)

377 
MÙiÚVeùÜ
 
be¡
;

379 ià(
	g´evious
 =ð
NULL
)

381 
¿nge
 = 8;

385 
IÁ
 
	gpy
 = -2;…y <= 2;…y++)

387 
IÁ
 
	g‹¡y
 = 
blockY
 / (2 * 
blockSize
è+ 
py
;

388 
IÁ
 
	gpx
 = -2;…x <= 2;…x++)

390 
IÁ
 
	g‹¡x
 = 
blockX
 / (2 * 
blockSize
è+ 
px
;

391 ià((
	g‹¡x
 >ð0è&& (
‹¡x
 < 
ÜigWidth
 / (2 * 
blockSize
)è&& (
‹¡y
 >ð0è&& (‹¡y < 
ÜigHeight
 / (2 * blockSize)))

393 
MÙiÚVeùÜ
 
Þd
 = 
´evious
->
g‘
(
‹¡x
, 
‹¡y
);

394 
IÁ
 
	g”rÜ
 = 
mÙiÚE¼ÜLuma
(
Üig
, 
bufãr
, 
blockX
, 
blockY
, 
Þd
.
x
 * 
çùÜ
, old.
y
 * faùÜ, 
blockSize
, 
be¡
.
”rÜ
);

395 ià(
	g”rÜ
 < 
	gbe¡
.error)

397 
	gbe¡
.
£t
(
Þd
.
x
 * 
çùÜ
, old.
y
 * faùÜ, 
”rÜ
);

403 
MÙiÚVeùÜ
 
	g´evBe¡
 = 
be¡
;

404 
IÁ
 
	gy2
 = 
´evBe¡
.
y
 / 
s_mÙiÚVeùÜFaùÜ
 - 
¿nge
; y2 <=…revBest.y / s_motionVectorFactor +„ange; y2++)

406 
IÁ
 
	gx2
 = 
´evBe¡
.
x
 / 
s_mÙiÚVeùÜFaùÜ
 - 
¿nge
; x2 <=…revBest.x / s_motionVectorFactor +„ange; x2++)

408 
IÁ
 
	g”rÜ
 = 
mÙiÚE¼ÜLuma
(
Üig
, 
bufãr
, 
blockX
, 
blockY
, 
x2
 * 
s_mÙiÚVeùÜFaùÜ
, 
y2
 * s_mÙiÚVeùÜFaùÜ, 
blockSize
, 
be¡
.
”rÜ
);

409 ià(
	g”rÜ
 < 
	gbe¡
.error)

411 
	gbe¡
.
£t
(
x2
 * 
s_mÙiÚVeùÜFaùÜ
, 
y2
 * s_mÙiÚVeùÜFaùÜ, 
”rÜ
);

415 ià(
	gdoubËRes
)

417 
	g´evBe¡
 = 
be¡
;

418 
IÁ
 
	gdoubËRªge
 = 3 * 4;

419 
IÁ
 
	gy2
 = 
´evBe¡
.
y
 - 
doubËRªge
; y2 <=…revBest.y + doubleRange; y2 += 4)

421 
IÁ
 
x2
 = 
´evBe¡
.
x
 - 
doubËRªge
; 
	gx2
 <=…revBest.x + doubleRange; x2 += 4)

423 
IÁ
 
”rÜ
 = 
mÙiÚE¼ÜLuma
(
Üig
, 
bufãr
, 
blockX
, 
blockY
, 
x2
, 
y2
, 
blockSize
, 
be¡
.error);

424 ià(
	g”rÜ
 < 
	gbe¡
.error)

426 
	gbe¡
.
£t
(
x2
, 
y2
, 
”rÜ
);

432 
	g´evBe¡
 = 
be¡
;

433 
	gdoubËRªge
 = 3;

434 
IÁ
 
	gy2
 = 
´evBe¡
.
y
 - 
doubËRªge
; y2 <=…revBest.y + doubleRange; y2++)

436 
IÁ
 
	gx2
 = 
´evBe¡
.
x
 - 
doubËRªge
; x2 <=…revBest.x + doubleRange; x2++)

438 
IÁ
 
	g”rÜ
 = 
mÙiÚE¼ÜLuma
(
Üig
, 
bufãr
, 
blockX
, 
blockY
, 
x2
, 
y2
, 
blockSize
, 
be¡
.
”rÜ
);

439 ià(
	g”rÜ
 < 
	gbe¡
.error)

441 
	gbe¡
.
£t
(
x2
, 
y2
, 
”rÜ
);

448 
	gmvs
.
g‘
(
blockX
 / 
¡•Size
, 
blockY
 / s‹pSizeèð
be¡
;

453 
Void
 
	gTEncTempÜ®Fž‹r
::
mÙiÚE¡im©iÚ
(
A¼ay2D
<
MÙiÚVeùÜ
> &
mv
, cÚ¡ 
TComPicYuv
 &
ÜgPic
, cÚ¡ TComPicYuv &
bufãr
, cÚ¡ TComPicYuv &
ÜigSub§m¶ed2
, cÚ¡ TComPicYuv &
ÜigSub§m¶ed4
) const

455 cÚ¡ 
IÁ
 
	gwidth
 = 
m_sourûWidth
;

456 cÚ¡ 
IÁ
 
	gheight
 = 
m_sourûHeight
;

457 
	gA¼ay2D
<
	gMÙiÚVeùÜ
> 
mv_0
(
width
 / 16, 
height
 / 16);

458 
	gA¼ay2D
<
	gMÙiÚVeùÜ
> 
mv_1
(
width
 / 16, 
height
 / 16);

459 
	gA¼ay2D
<
	gMÙiÚVeùÜ
> 
mv_2
(
width
 / 16, 
height
 / 16);

461 
TComPicYuv
 
	gbufãrSub2
;

462 
TComPicYuv
 
	gbufãrSub4
;

464 
sub§m¶eLuma
(
bufãr
, 
bufãrSub2
);

465 
sub§m¶eLuma
(
bufãrSub2
, 
bufãrSub4
);

467 
mÙiÚE¡im©iÚLuma
(
mv_0
, 
ÜigSub§m¶ed4
, 
bufãrSub4
, 16);

468 
mÙiÚE¡im©iÚLuma
(
mv_1
, 
ÜigSub§m¶ed2
, 
bufãrSub2
, 16, &
mv_0
, 2);

469 
mÙiÚE¡im©iÚLuma
(
mv_2
, 
ÜgPic
, 
bufãr
, 16, &
mv_1
, 2);

471 
mÙiÚE¡im©iÚLuma
(
mv
, 
ÜgPic
, 
bufãr
, 8, &
mv_2
, 1, 
Œue
);

474 
Void
 
	gTEncTempÜ®Fž‹r
::
­¶yMÙiÚ
(cÚ¡ 
A¼ay2D
<
MÙiÚVeùÜ
> &
mvs
, cÚ¡ 
TComPicYuv
 &
šput
, TComPicYuv &
ouut
) const

476 cÚ¡ 
IÁ
 
	glumaBlockSize
=8;

478 
IÁ
 
	gc
=0; c< 
g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
); c++)

480 cÚ¡ 
CompÚ’tID
 
	gcompID
=(CompÚ’tID)
c
;

481 cÚ¡ 
IÁ
 
	gcsx
=
g‘CompÚ’tSÿËX
(
compID
, 
m_chromaFÜm©IDC
);

482 cÚ¡ 
IÁ
 
	gcsy
=
g‘CompÚ’tSÿËY
(
compID
, 
m_chromaFÜm©IDC
);

483 cÚ¡ 
IÁ
 
	gblockSizeX
 = 
lumaBlockSize
>>
csx
;

484 cÚ¡ 
IÁ
 
	gblockSizeY
 = 
lumaBlockSize
>>
csy
;

485 cÚ¡ 
IÁ
 
	gheight
 = 
šput
.
g‘Height
(
compID
);

486 cÚ¡ 
IÁ
 
	gwidth
 = 
šput
.
g‘Width
(
compID
);

488 cÚ¡ 
P–
 
	gmaxV®ue
 = (1<<
m_š‹º®B™D•th
[
toChªÃlTy³
(
compID
)])-1;

490 cÚ¡ 
P–
 *
	gpSrcImage
=
šput
.
g‘Addr
(
compID
);

491 cÚ¡ 
IÁ
 
	g¤cSŒide
=
šput
.
g‘SŒide
(
compID
);

493 
P–
 *
	gpD¡Image
=
ouut
.
g‘Addr
(
compID
);

494 
IÁ
 
	gd¡SŒide
=
ouut
.
g‘SŒide
(
compID
);

496 
IÁ
 
	gy
 = 0, 
	gblockNumY
 = 0; y + 
	gblockSizeY
 <ð
height
; y +ð
blockSizeY
, blockNumY++)

498 
IÁ
 
	gx
 = 0, 
	gblockNumX
 = 0; x + 
	gblockSizeX
 <ð
width
; x +ð
blockSizeX
, blockNumX++)

500 cÚ¡ 
	gMÙiÚVeùÜ
 &
	gmv
 = 
mvs
.
g‘
(
blockNumX
,
blockNumY
);

501 cÚ¡ 
IÁ
 
	gdx
 = 
mv
.
x
 >> 
csx
 ;

502 cÚ¡ 
IÁ
 
	gdy
 = 
mv
.
y
 >> 
csy
 ;

503 cÚ¡ 
IÁ
 
	gxIÁ
 = 
mv
.
x
 >> (4+
csx
) ;

504 cÚ¡ 
IÁ
 
	gyIÁ
 = 
mv
.
y
 >> (4+
csy
) ;

506 cÚ¡ 
IÁ
 *
	gxFž‹r
 = 
s_š‹½Þ©iÚFž‹r
[
dx
 & 0xf];

507 cÚ¡ 
IÁ
 *
	gyFž‹r
 = 
s_š‹½Þ©iÚFž‹r
[
dy
 & 0xf];

508 cÚ¡ 
IÁ
 
	gnumFž‹rT­s
=7;

509 cÚ¡ 
IÁ
 
	gûÁ»T­Off£t
=3;

511 
IÁ
 
	g‹mpA¼ay
[
lumaBlockSize
 + 
numFž‹rT­s
][lumaBlockSize];

513 
IÁ
 
	gby
 = 1; by < 
	gblockSizeY
 + 
	gnumFž‹rT­s
; by++)

515 cÚ¡ 
IÁ
 
	gyOff£t
 = 
y
 + 
by
 + 
yIÁ
 - 
ûÁ»T­Off£t
;

516 cÚ¡ 
P–
 *
	gsourûRow
 = 
pSrcImage
+
yOff£t
*
¤cSŒide
;

517 
IÁ
 
	gbx
 = 0; bx < 
	gblockSizeX
; bx++)

519 
IÁ
 
	giBa£
 = 
x
 + 
bx
 + 
xIÁ
 - 
ûÁ»T­Off£t
;

520 cÚ¡ 
P–
 *
	growS¹
 = 
sourûRow
 + 
iBa£
;

522 
IÁ
 
	giSum
 = 0;

523 
	giSum
 +ð
xFž‹r
[1] * 
rowS¹
[1];

524 
	giSum
 +ð
xFž‹r
[2] * 
rowS¹
[2];

525 
	giSum
 +ð
xFž‹r
[3] * 
rowS¹
[3];

526 
	giSum
 +ð
xFž‹r
[4] * 
rowS¹
[4];

527 
	giSum
 +ð
xFž‹r
[5] * 
rowS¹
[5];

528 
	giSum
 +ð
xFž‹r
[6] * 
rowS¹
[6];

530 
	g‹mpA¼ay
[
by
][
bx
] = 
iSum
;

534 
P–
 *
	gpD¡Row
=
pD¡Image
+
y
*
d¡SŒide
;

535 
IÁ
 
	gby
 = 0; by < 
	gblockSizeY
; by++, 
	gpD¡Row
+=
d¡SŒide
)

537 
P–
 *
pD¡P–
=
pD¡Row
+
x
;

538 
IÁ
 
	gbx
 = 0; bx < 
	gblockSizeX
; bx++, 
	gpD¡P–
++)

540 
IÁ
 
	giSum
 = 0;

542 
	giSum
 +ð
yFž‹r
[1] * 
‹mpA¼ay
[
by
 + 1][
bx
];

543 
	giSum
 +ð
yFž‹r
[2] * 
‹mpA¼ay
[
by
 + 2][
bx
];

544 
	giSum
 +ð
yFž‹r
[3] * 
‹mpA¼ay
[
by
 + 3][
bx
];

545 
	giSum
 +ð
yFž‹r
[4] * 
‹mpA¼ay
[
by
 + 4][
bx
];

546 
	giSum
 +ð
yFž‹r
[5] * 
‹mpA¼ay
[
by
 + 5][
bx
];

547 
	giSum
 +ð
yFž‹r
[6] * 
‹mpA¼ay
[
by
 + 6][
bx
];

549 
	giSum
 = (
iSum
 + (1 << 11)) >> 12;

550 
	giSum
 = 
iSum
 < 0 ? 0 : (iSum > 
maxV®ue
 ? maxValue : iSum);

551 *
	gpD¡P–
 = 
iSum
;

559 
Void
 
	gTEncTempÜ®Fž‹r
::
bž©”®Fž‹r
(cÚ¡ 
TComPicYuv
 &
ÜgPic
,

560 cÚ¡ 
¡d
::
deque
<
TempÜ®Fž‹rSourûPicInfo
> &
¤cF¿meInfo
,

561 
TComPicYuv
 &
ÃwOrgPic
,

562 
DoubË
 
ov”®lSŒ’gth
) const

564 cÚ¡ 
	gnumRefs
 = 
IÁ
(
¤cF¿meInfo
.
size
());

565 
	g¡d
::
veùÜ
<
TComPicYuv
> 
cÜ»ùedPics
(
numRefs
);

566 
IÁ
 
	gi
 = 0; i < 
	gnumRefs
; i++)

568 
	gcÜ»ùedPics
[
i
].
ü—‹W™houtCUInfo
Ð
m_sourûWidth
, 
m_sourûHeight
, 
ÜgPic
.
g‘ChromaFÜm©
(), 
Œue
, 
s_·ddšg
, s_padding );

569 
­¶yMÙiÚ
(
¤cF¿meInfo
[
i
].
mvs
, srcF¿meInfo[i].
picBufãr
, 
cÜ»ùedPics
[i]);

572 
IÁ
 
	g»fSŒ’gthRow
 = 2;

573 ià(
	gnumRefs
 =ð
s_¿nge
*2)

575 
»fSŒ’gthRow
 = 0;

577 ià(
	gnumRefs
 =ð
s_¿nge
)

579 
»fSŒ’gthRow
 = 1;

582 cÚ¡ 
DoubË
 
	glumaSigmaSq
 = (
m_QP
 - 
s_sigmaZ”oPošt
è* (m_QP - s_sigmaZ”oPoštè* 
s_sigmaMuÉl›r
;

583 cÚ¡ 
DoubË
 
	gchromaSigmaSq
 = 30 * 30;

585 
IÁ
 
	gc
=0; c< 
g‘Numb”V®idCompÚ’ts
(
m_chromaFÜm©IDC
); c++)

587 cÚ¡ 
CompÚ’tID
 
	gcompID
=(CompÚ’tID)
c
;

588 cÚ¡ 
IÁ
 
	gheight
 = 
ÜgPic
.
g‘Height
(
compID
);

589 cÚ¡ 
IÁ
 
	gwidth
 = 
ÜgPic
.
g‘Width
(
compID
);

590 cÚ¡ 
P–
 *
	g¤cP–Row
 = 
ÜgPic
.
g‘Addr
(
compID
);

591 cÚ¡ 
IÁ
 
	g¤cSŒide
 = 
ÜgPic
.
g‘SŒide
(
compID
);

592 
P–
 *
	gd¡P–Row
 = 
ÃwOrgPic
.
g‘Addr
(
compID
);

593 cÚ¡ 
IÁ
 
	gd¡SŒide
 = 
ÃwOrgPic
.
g‘SŒide
(
compID
);

594 cÚ¡ 
DoubË
 
	gsigmaSq
 = 
isChroma
(
compID
)? 
chromaSigmaSq
 : 
lumaSigmaSq
;

595 cÚ¡ 
DoubË
 
	gweightSÿlšg
 = 
ov”®lSŒ’gth
 * (
isChroma
(
compID
è? 
s_chromaFaùÜ
 : 0.4);

596 cÚ¡ 
P–
 
	gmaxSam¶eV®ue
 = (1<<
m_š‹º®B™D•th
[
toChªÃlTy³
(
compID
)])-1;

597 cÚ¡ 
DoubË
 
	gb™D•thDiffWeightšg
=1024.0 / (
maxSam¶eV®ue
+1);

599 
IÁ
 
	gy
 = 0; y < 
	gheight
; y++, 
	g¤cP–Row
+=
¤cSŒide
, 
	gd¡P–Row
+=
d¡SŒide
)

601 cÚ¡ 
P–
 *
¤cP–
=
¤cP–Row
;

602 
P–
 *
	gd¡P–
=
d¡P–Row
;

603 
IÁ
 
	gx
 = 0; x < 
	gwidth
; x++, 
	g¤cP–
++, 
	gd¡P–
++)

605 cÚ¡ 
IÁ
 
	gÜgV®
 = (IÁè*
¤cP–
;

606 
DoubË
 
	g‹mpÜ®WeightSum
 = 1.0;

607 
DoubË
 
	gÃwV®
 = (DoubËè
ÜgV®
;

608 
IÁ
 
	gi
 = 0; i < 
	gnumRefs
; i++)

610 cÚ¡ 
P–
 *
	gpCÜ»ùedP–PŒ
=
cÜ»ùedPics
[
i
].
g‘Addr
(
compID
)+(
y
*cÜ»ùedPics[i].
g‘SŒide
(compID)+
x
);

611 cÚ¡ 
IÁ
 
	g»fV®
 = (IÁè*
pCÜ»ùedP–PŒ
;

612 
DoubË
 
	gdiff
 = (DoubË)(
»fV®
 - 
ÜgV®
);

613 
	gdiff
 *ð
b™D•thDiffWeightšg
;

614 
DoubË
 
	gdiffSq
 = 
diff
 * diff;

615 cÚ¡ 
IÁ
 
	gšdex
 = 
¡d
::
mš
(1, std::
abs
(
¤cF¿meInfo
[
i
].
ÜigOff£t
) - 1);

616 cÚ¡ 
DoubË
 
	gweight
 = 
weightSÿlšg
 * 
s_»fSŒ’gths
[
»fSŒ’gthRow
][
šdex
] * 
exp
(-
diffSq
 / (2 * 
sigmaSq
));

617 
	gÃwV®
 +ð
weight
 * 
»fV®
;

618 
	g‹mpÜ®WeightSum
 +ð
weight
;

620 
	gÃwV®
 /ð
‹mpÜ®WeightSum
;

621 
P–
 
	g§m¶eV®
 = (P–)
round
(
ÃwV®
);

622 
	g§m¶eV®
=(
§m¶eV®
<0?0 : (§m¶eV®>
maxSam¶eV®ue
 ? maxSampleValue : sampleVal));

623 *
	gd¡P–
 = 
§m¶eV®
;

	@source/Lib/TLibEncoder/TEncTemporalFilter.h

38 #iâdeà
__TEMPORAL_FILTER__


39 
	#__TEMPORAL_FILTER__


	)

40 
	~"TLibCommÚ/TComPicYuv.h
"

41 
	~"Utž™›s/TVideoIOYuv.h
"

42 
	~<s¡»am
>

43 
	~<m­
>

44 
	~<deque
>

49 
	sMÙiÚVeùÜ


51 
IÁ
 
	mx
, 
	my
;

52 
IÁ
 
	m”rÜ
;

53 
MÙiÚVeùÜ
(è: 
x
(0), 
y
(0), 
”rÜ
(
INT_LEAST32_MAX
) {}

54 
£t
(
IÁ
 
nx
, IÁ 
ny
, IÁ 
Ã
è{ 
	mx
 =‚x; 
	my
 =‚y; 
	m”rÜ
 =‚e; }

57 
	g‹m¶©e
 <
þass
 
	gT
>

58 
	sA¼ay2D


60 
	m´iv©e
:

61 
UIÁ
 
m_width
, 
	mm_height
;

62 
	m¡d
::
veùÜ
< 
T
 > 
v
;

63 
	mpublic
:

64 
A¼ay2D
(è: 
m_width
(0), 
m_height
(0), 
v
() { }

65 
A¼ay2D
(
UIÁ
 
width
, UIÁ 
height
, cÚ¡ 
T
& 
v®ue
=T()è: 
m_width
(0), 
m_height
(0), 
v
(è{ 
®loÿ‹
(width, height, value); }

67 
Void
 
®loÿ‹
(
UIÁ
 
width
, UIÁ 
height
, cÚ¡ 
T
& 
v®ue
=T())

69 
m_width
=
width
;

70 
	mm_height
=
height
;

71 
	mv
.
»size
(
¡d
::
size_t
(
m_width
*
m_height
), 
v®ue
);

74 
	mT
& 
g‘
(
UIÁ
 
x
, UIÁ 
y
)

76 
as£¹
(
x
<
m_width
 && 
y
<
m_height
);

77  
	mv
[
y
*
m_width
+
x
];

80 cÚ¡ 
	mT
& 
g‘
(
UIÁ
 
x
, UIÁ 
y
) const

82 
as£¹
(
x
<
m_width
 && 
y
<
m_height
);

83  
	mv
[
y
*
m_width
+
x
];

87 
	sTempÜ®Fž‹rSourûPicInfo


89 
TempÜ®Fž‹rSourûPicInfo
(è: 
picBufãr
(), 
mvs
(), 
ÜigOff£t
(0) { }

90 
TComPicYuv
 
	mpicBufãr
;

91 
	mA¼ay2D
<
	mMÙiÚVeùÜ
> 
	mmvs
;

92 
IÁ
 
	mÜigOff£t
;

99 þas 
	cTEncTempÜ®Fž‹r


101 
	mpublic
:

102 
TEncTempÜ®Fž‹r
();

103 ~
	$TEncTempÜ®Fž‹r
() {}

105 
	`š™
(cÚ¡ 
IÁ
 
äameSk
,

106 cÚ¡ 
IÁ
 
šputB™D•th
[
MAX_NUM_CHANNEL_TYPE
],

107 cÚ¡ 
IÁ
 
MSBEx‹ndedB™D•th
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ IÁ 
IÁ”ÇlB™D•th
[MAX_NUM_CHANNEL_TYPE],

108 cÚ¡ 
IÁ
 
width
,

109 cÚ¡ 
IÁ
 
height
,

110 cÚ¡ 
IÁ
 *
·d
,

111 cÚ¡ 
IÁ
 
äames
,

112 cÚ¡ 
BoÞ
 
Rec709
,

113 cÚ¡ 
¡d
::
¡ršg
 &
fž’ame
,

114 cÚ¡ 
ChromaFÜm©
 
šputChromaFÜm©IDC
,

115 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
cÞÜS·ûCÚv
,

116 cÚ¡ 
IÁ
 
qp
,

117 cÚ¡ 
IÁ
 
GOPSize
,

118 cÚ¡ 
¡d
::
m­
<
IÁ
, 
DoubË
> &
‹mpÜ®Fž‹rSŒ’gths
,

119 cÚ¡ 
BoÞ
 
gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
);

121 
BoÞ
 
	`fž‹r
(
TComPicYuv
 *
ÜgPic
, 
IÁ
 
äame
);

123 
´iv©e
:

125 cÚ¡ 
IÁ
 
s_¿nge
;

126 cÚ¡ 
DoubË
 
s_chromaFaùÜ
;

127 cÚ¡ 
DoubË
 
s_sigmaMuÉl›r
;

128 cÚ¡ 
DoubË
 
s_sigmaZ”oPošt
;

129 cÚ¡ 
IÁ
 
s_mÙiÚVeùÜFaùÜ
;

130 cÚ¡ 
IÁ
 
s_·ddšg
;

131 cÚ¡ 
IÁ
 
s_š‹½Þ©iÚFž‹r
[16][8];

132 cÚ¡ 
DoubË
 
s_»fSŒ’gths
[3][2];

135 
IÁ
 
m_F¿meSk
;

136 
¡d
::
¡ršg
 
m_šputFžeName
;

137 
IÁ
 
m_šputB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

138 
IÁ
 
m_MSBEx‹ndedB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

139 
IÁ
 
m_š‹º®B™D•th
[
MAX_NUM_CHANNEL_TYPE
];

140 
ChromaFÜm©
 
m_chromaFÜm©IDC
;

141 
IÁ
 
m_sourûWidth
;

142 
IÁ
 
m_sourûHeight
;

143 
IÁ
 
m_QP
;

144 
IÁ
 
m_GOPSize
;

145 
¡d
::
m­
<
IÁ
, 
DoubË
> 
m_‹mpÜ®Fž‹rSŒ’gths
;

146 
IÁ
 
m_aiPad
[2];

147 
IÁ
 
m_äamesToBeEncoded
;

148 
BoÞ
 
m_bClIÅutVideoToRec709Rªge
;

149 
IÅutCÞourS·ûCÚv”siÚ
 
m_šputCÞourS·ûCÚv”t
;

150 
BoÞ
 
m_gÝBa£dTempÜ®Fž‹rFutu»Reã»nû
;

153 
Void
 
	$sub§m¶eLuma
(cÚ¡ 
TComPicYuv
 &
šput
, TComPicYuv &
ouut
, cÚ¡ 
IÁ
 
çùÜ
 = 2) const;

154 
IÁ
 
	$mÙiÚE¼ÜLuma
(cÚ¡ 
TComPicYuv
 &
Üig
, cÚ¡ TComPicYuv &
bufãr
, cÚ¡ 
IÁ
 
x
, cÚ¡ IÁ 
y
, IÁ 
dx
, IÁ 
dy
, cÚ¡ IÁ 
bs
, cÚ¡ IÁ 
be¡”rÜ
) const;

155 
Void
 
	`mÙiÚE¡im©iÚLuma
(
A¼ay2D
<
MÙiÚVeùÜ
> &
mvs
, cÚ¡ 
TComPicYuv
 &
Üig
, cÚ¡ TComPicYuv &
bufãr
, cÚ¡ 
IÁ
 
bs
,

156 cÚ¡ 
A¼ay2D
<
MÙiÚVeùÜ
> *
´evious
=0, cÚ¡ 
IÁ
 
çùÜ
 = 1, cÚ¡ 
BoÞ
 
doubËRes
 = 
çl£
) const;

157 
Void
 
	`mÙiÚE¡im©iÚ
(
A¼ay2D
<
MÙiÚVeùÜ
> &
mvs
, cÚ¡ 
TComPicYuv
 &
ÜgPic
, cÚ¡ TComPicYuv &
bufãr
, cÚ¡ TComPicYuv &
ÜigSub§m¶ed2
, cÚ¡ TComPicYuv &
ÜigSub§m¶ed4
) const;

159 
Void
 
	`bž©”®Fž‹r
(cÚ¡ 
TComPicYuv
 &
ÜgPic
, cÚ¡ 
¡d
::
deque
<
TempÜ®Fž‹rSourûPicInfo
> &
¤cF¿meInfo
, TComPicYuv &
ÃwOrgPic
, 
DoubË
 
ov”®lSŒ’gth
) const;

160 
Void
 
	`­¶yMÙiÚ
(cÚ¡ 
A¼ay2D
<
MÙiÚVeùÜ
> &
mvs
, cÚ¡ 
TComPicYuv
 &
šput
, TComPicYuv &
ouut
) const;

161 
	}
};

	@source/Lib/TLibEncoder/TEncTop.cpp

38 
	~"TLibCommÚ/CommÚDef.h
"

39 
	~"TEncTÝ.h
"

40 
	~"TEncPic.h
"

41 
	~"TLibCommÚ/TComChromaFÜm©.h
"

42 #ià
FAST_BIT_EST


43 
	~"TLibCommÚ/CÚ‹xtMod–.h
"

53 
	gTEncTÝ
::
	$TEncTÝ
() :

54 
	`m_¥sM­
(
MAX_NUM_SPS
)

55 , 
	$m_µsM­
(
MAX_NUM_PPS
)

57 
m_iPOCLa¡
 = -1;

58 
m_iNumPicRcvd
 = 0;

59 
m_uiNumAÎPicCoded
 = 0;

60 
m_µpcRDSbacCod”
 = 
NULL
;

61 
m_µpcBšCod”CABAC
 = 
NULL
;

62 
m_cRDGoOnSbacCod”
.
	`š™
Ð&
m_cRDGoOnBšCod”CABAC
 );

63 #ià
ENC_DEC_TRACE


64 ià(
g_hT¿û
 =ð
NULL
)

66 
g_hT¿û
 = 
	`fÝ’
( "TraceEnc.txt", "wb" );

68 
g_bJu¡DoIt
 = 
g_bEncDecT¿ûDi§bË
;

69 
g_nSymbÞCouÁ”
 = 0;

72 
m_iMaxRefPicNum
 = 0;

74 #ià
FAST_BIT_EST


75 
CÚ‹xtMod–
::
	`buždNextS‹TabË
();

77 
	}
}

79 
	gTEncTÝ
::~
	$TEncTÝ
()

81 #ià
ENC_DEC_TRACE


82 ià(
g_hT¿û
 !ð
¡dout
)

84 
	`fþo£
Ð
g_hT¿û
 );

87 
	}
}

89 
Void
 
	gTEncTÝ
::
	$ü—‹
 ()

92 
	`š™ROM
();

95 
m_cGOPEncod”
. 
	`ü—‹
( );

96 
m_cSliûEncod”
. 
	`ü—‹
Ð
	`g‘SourûWidth
(), 
	`g‘SourûHeight
(), 
m_chromaFÜm©IDC
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
m_maxTÙ®CUD•th
 );

97 
m_cCuEncod”
. 
	`ü—‹
Ð
m_maxTÙ®CUD•th
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
m_chromaFÜm©IDC
 );

98 ià(
m_bU£SAO
)

100 
m_cEncSAO
.
	`ü—‹
Ð
	`g‘SourûWidth
(), 
	`g‘SourûHeight
(), 
m_chromaFÜm©IDC
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
m_maxTÙ®CUD•th
, 
m_log2SaoOff£tSÿË
[
CHANNEL_TYPE_LUMA
], m_log2SaoOff£tSÿË[
CHANNEL_TYPE_CHROMA
] );

101 
m_cEncSAO
.
	`ü—‹EncD©a
(
	`g‘SaoCtuBound¬y
());

103 #ià
ADAPTIVE_QP_SELECTION


104 ià(
m_bU£Ad­tQpS–eù
)

106 
m_cTrQuªt
.
	`š™SliûQpD–
();

110 
m_cLoÝFž‹r
.
	`ü—‹
Ð
m_maxTÙ®CUD•th
 );

112 iàÐ
m_RCEÇbËR©eCÚŒÞ
 )

114 
m_cR©eCŒl
.
	`š™
Ð
m_äamesToBeEncoded
, 
m_RCT¬g‘B™¿‹
, (
IÁ
)Ð(
DoubË
)
m_iF¿meR©e
/
m_‹mpÜ®Sub§m¶eR©io
 + 0.5), 
m_iGOPSize
, 
m_iSourûWidth
, 
m_iSourûHeight
,

115 
m_maxCUWidth
, 
m_maxCUHeight
,
m_RCK“pH›¿rchiÿlB™
, 
m_RCU£LCUS•¬©eMod–
, 
m_GOPLi¡
 );

118 
m_µpcRDSbacCod”
 = 
Ãw
 
TEncSbac
** [
m_maxTÙ®CUD•th
+1];

119 #ià
FAST_BIT_EST


120 
m_µpcBšCod”CABAC
 = 
Ãw
 
TEncBšCABACCouÁ”
** [
m_maxTÙ®CUD•th
+1];

122 
m_µpcBšCod”CABAC
 = 
Ãw
 
TEncBšCABAC
** [
m_maxTÙ®CUD•th
+1];

125  
IÁ
 
iD•th
 = 0; iD•th < 
m_maxTÙ®CUD•th
+1; iDepth++ )

127 
m_µpcRDSbacCod”
[
iD•th
] = 
Ãw
 
TEncSbac
* [
CI_NUM
];

128 #ià
FAST_BIT_EST


129 
m_µpcBšCod”CABAC
[
iD•th
] = 
Ãw
 
TEncBšCABACCouÁ”
* [
CI_NUM
];

131 
m_µpcBšCod”CABAC
[
iD•th
] = 
Ãw
 
TEncBšCABAC
* [
CI_NUM
];

134 
IÁ
 
iCIIdx
 = 0; iCIIdx < 
CI_NUM
; iCIIdx ++ )

136 
m_µpcRDSbacCod”
[
iD•th
][
iCIIdx
] = 
Ãw
 
TEncSbac
;

137 #ià
FAST_BIT_EST


138 
m_µpcBšCod”CABAC
 [
iD•th
][
iCIIdx
] = 
Ãw
 
TEncBšCABACCouÁ”
;

140 
m_µpcBšCod”CABAC
 [
iD•th
][
iCIIdx
] = 
Ãw
 
TEncBšCABAC
;

142 
m_µpcRDSbacCod”
 [
iD•th
][
iCIIdx
]->
	`š™
Ð
m_µpcBšCod”CABAC
 [iDepth][iCIIdx] );

145 
	}
}

147 
Void
 
	gTEncTÝ
::
	$de¡roy
 ()

150 
m_cGOPEncod”
. 
	`de¡roy
();

151 
m_cSliûEncod”
. 
	`de¡roy
();

152 
m_cCuEncod”
. 
	`de¡roy
();

153 
m_cEncSAO
. 
	`de¡royEncD©a
();

154 
m_cEncSAO
. 
	`de¡roy
();

155 
m_cLoÝFž‹r
. 
	`de¡roy
();

156 
m_cR©eCŒl
. 
	`de¡roy
();

157 
m_cS—rch
. 
	`de¡roy
();

158 
IÁ
 
iD•th
;

159  
iD•th
 = 0; iD•th < 
m_maxTÙ®CUD•th
+1; iDepth++ )

161 
IÁ
 
iCIIdx
 = 0; iCIIdx < 
CI_NUM
; iCIIdx ++ )

163 
d–‘e
 
m_µpcRDSbacCod”
[
iD•th
][
iCIIdx
];

164 
d–‘e
 
m_µpcBšCod”CABAC
[
iD•th
][
iCIIdx
];

168  
iD•th
 = 0; iD•th < 
m_maxTÙ®CUD•th
+1; iDepth++ )

170 
d–‘e
 [] 
m_µpcRDSbacCod”
[
iD•th
];

171 
d–‘e
 [] 
m_µpcBšCod”CABAC
[
iD•th
];

174 
d–‘e
 [] 
m_µpcRDSbacCod”
;

175 
d–‘e
 [] 
m_µpcBšCod”CABAC
;

178 
	`de¡royROM
();

181 
	}
}

183 
Void
 
	gTEncTÝ
::
	$š™
(
BoÞ
 
isF›ldCodšg
)

185 
TComSPS
 &
¥s0
=*(
m_¥sM­
.
	`®loÿ‹PS
(0));

186 
TComPPS
 &
µs0
=*(
m_µsM­
.
	`®loÿ‹PS
(0));

188 
	`xIn™SPS
(
¥s0
);

189 
	`xIn™VPS
(
m_cVPS
, 
¥s0
);

191 ià(
m_RCCpbS©u¿tiÚEÇbËd
)

193 
m_cR©eCŒl
.
	`š™HrdP¬am
(
¥s0
.
	`g‘VuiP¬am‘”s
()->
	`g‘HrdP¬am‘”s
(), 
m_iF¿meR©e
, 
m_RCIn™ŸlCpbFuÎÃss
);

196 
m_cRdCo¡
.
	`£tCo¡Mode
(
m_co¡Mode
);

199 
	`xIn™PPS
(
µs0
, 
¥s0
);

200 
	`xIn™RPS
(
¥s0
, 
isF›ldCodšg
);

201 
	`xIn™SÿlšgLi¡s
(
¥s0
, 
µs0
);

203 ià(
m_wcgChromaQpCÚŒÞ
.
	`isEÇbËd
())

205 
TComPPS
 &
µs1
=*(
m_µsM­
.
	`®loÿ‹PS
(1));

206 
	`xIn™PPS
(
µs1
, 
¥s0
);

207 
	`xIn™SÿlšgLi¡s
(
¥s0
, 
µs1
);

211 
m_cGOPEncod”
. 
	`š™
Ð
this
 );

212 
m_cSliûEncod”
.
	`š™
Ð
this
 );

213 
m_cCuEncod”
. 
	`š™
Ð
this
 );

214 
m_cCuEncod”
.
	`£tSliûEncod”
(&
m_cSliûEncod”
);

217 
m_pcCavlcCod”
 = 
	`g‘CavlcCod”
();

219 
m_cTrQuªt
.
	`š™
Ð1 << 
m_uiQuadŒ“TULog2MaxSize
,

220 
m_u£RDOQ
,

221 
m_u£RDOQTS
,

222 
m_u£S–eùiveRDOQ
,

223 
Œue


224 ,
m_u£T¿nsfÜmSkFa¡


225 #ià
ADAPTIVE_QP_SELECTION


226 ,
m_bU£Ad­tQpS–eù


231 
m_cS—rch
.
	`š™
Ð
this
, &
m_cTrQuªt
, 
m_iS—rchRªge
, 
m_b»dS—rchRªge
, 
m_mÙiÚE¡im©iÚS—rchM‘hod
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
m_maxTÙ®CUD•th
, &
m_cEÁrÝyCod”
, &
m_cRdCo¡
, 
	`g‘RDSbacCod”
(), 
	`g‘RDGoOnSbacCod”
() );

233 
m_iMaxRefPicNum
 = 0;

234 
	}
}

236 
Void
 
	gTEncTÝ
::
	$xIn™SÿlšgLi¡s
(
TComSPS
 &
¥s
, 
TComPPS
 &
µs
)

240 cÚ¡ 
IÁ
 
maxLog2TrDyÇmicRªge
[
MAX_NUM_CHANNEL_TYPE
] =

242 
¥s
.
	`g‘MaxLog2TrDyÇmicRªge
(
CHANNEL_TYPE_LUMA
),

243 
¥s
.
	`g‘MaxLog2TrDyÇmicRªge
(
CHANNEL_TYPE_CHROMA
)

245 if(
	`g‘U£SÿlšgLi¡Id
(è=ð
SCALING_LIST_OFF
)

247 
	`g‘TrQuªt
()->
	`£tFÏtSÿlšgLi¡
(
maxLog2TrDyÇmicRªge
, 
¥s
.
	`g‘B™D•ths
());

248 
	`g‘TrQuªt
()->
	`£tU£SÿlšgLi¡
(
çl£
);

249 
¥s
.
	`£tSÿlšgLi¡P»£ÁFÏg
(
çl£
);

250 
µs
.
	`£tSÿlšgLi¡P»£ÁFÏg
(
çl£
);

252 if(
	`g‘U£SÿlšgLi¡Id
(è=ð
SCALING_LIST_DEFAULT
)

254 
¥s
.
	`g‘SÿlšgLi¡
().
	`£tDeçuÉSÿlšgLi¡
 ();

255 
¥s
.
	`£tSÿlšgLi¡P»£ÁFÏg
(
çl£
);

256 
µs
.
	`£tSÿlšgLi¡P»£ÁFÏg
(
çl£
);

258 
	`g‘TrQuªt
()->
	`£tSÿlšgLi¡
(&(
¥s
.
	`g‘SÿlšgLi¡
()), 
maxLog2TrDyÇmicRªge
, sps.
	`g‘B™D•ths
());

259 
	`g‘TrQuªt
()->
	`£tU£SÿlšgLi¡
(
Œue
);

261 if(
	`g‘U£SÿlšgLi¡Id
(è=ð
SCALING_LIST_FILE_READ
)

263 
¥s
.
	`g‘SÿlšgLi¡
().
	`£tDeçuÉSÿlšgLi¡
 ();

264 if(
¥s
.
	`g‘SÿlšgLi¡
().
	`xP¬£SÿlšgLi¡
(
	`g‘SÿlšgLi¡FžeName
()))

266 
BoÞ
 
bP¬£dSÿlšgLi¡
=
çl£
;

267 
	`as£¹
(
bP¬£dSÿlšgLi¡
);

268 
	`ex™
(1);

270 
¥s
.
	`g‘SÿlšgLi¡
().
	`checkDcOfM©rix
();

271 
¥s
.
	`£tSÿlšgLi¡P»£ÁFÏg
(¥s.
	`g‘SÿlšgLi¡
().
	`checkDeçuÉSÿlšgLi¡
());

272 
µs
.
	`£tSÿlšgLi¡P»£ÁFÏg
(
çl£
);

273 
	`g‘TrQuªt
()->
	`£tSÿlšgLi¡
(&(
¥s
.
	`g‘SÿlšgLi¡
()), 
maxLog2TrDyÇmicRªge
, sps.
	`g‘B™D•ths
());

274 
	`g‘TrQuªt
()->
	`£tU£SÿlšgLi¡
(
Œue
);

278 
	`´štf
("”rÜ : SÿlšgLi¡ =ð%d‚Ù suµÜ‹d\n",
	`g‘U£SÿlšgLi¡Id
());

279 
	`as£¹
(0);

282 ià(
	`g‘U£SÿlšgLi¡Id
(è!ð
SCALING_LIST_OFF
)

285 
UIÁ
 
sizeId
 = 0; sizeId < 
SCALING_LIST_SIZE_NUM
; sizeId++)

287 cÚ¡ 
IÁ
 
´edLi¡S‹p
 = (
sizeId
 =ð
SCALING_LIST_32x32
? (
SCALING_LIST_NUM
/
NUMBER_OF_PREDICTION_MODES
) : 1);

289 
UIÁ
 
li¡Id
 = 0;†i¡Id < 
SCALING_LIST_NUM
;†i¡Id+=
´edLi¡S‹p
)

291 
¥s
.
	`g‘SÿlšgLi¡
().
	`checkP»dMode
Ð
sizeId
, 
li¡Id
 );

295 
	}
}

301 
Void
 
	gTEncTÝ
::
	$d–‘ePicBufãr
()

303 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

304 
IÁ
 
iSize
 = 
	`IÁ
Ð
m_cLi¡Pic
.
	`size
() );

306  
IÁ
 
i
 = 0; i < 
iSize
; i++ )

308 
TComPic
* 
pcPic
 = *(
™”Pic
++);

310 
pcPic
->
	`de¡roy
();

311 
d–‘e
 
pcPic
;

312 
pcPic
 = 
NULL
;

314 
	}
}

329 
Void
 
	gTEncTÝ
::
’code
Ð
BoÞ
 
æush
, 
TComPicYuv
* 
pcPicYuvOrg
, TComPicYuv* 
pcPicYuvTrueOrg
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢rCSC
, 
TComLi¡
<TComPicYuv*>& 
rcLi¡PicYuvRecOut
, 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sOut
, 
IÁ
& 
iNumEncoded
 )

331 ià(
	gpcPicYuvOrg
 !ð
NULL
)

334 
TComPic
* 
pcPicCu¼
 = 
NULL
;

336 
IÁ
 
	gµsID
=-1;

337 ià(
g‘WCGChromaQPCÚŒÞ
().
isEÇbËd
())

339 
	gµsID
=
g‘dQPs
()[ 
m_iPOCLa¡
+1 ];

341 
xG‘NewPicBufãr
Ð
pcPicCu¼
, 
µsID
 );

342 
	gpcPicYuvOrg
->
cÝyToPic
Ð
pcPicCu¼
->
g‘PicYuvOrg
() );

343 
	gpcPicYuvTrueOrg
->
cÝyToPic
Ð
pcPicCu¼
->
g‘PicYuvTrueOrg
() );

346 iàÐ
g‘U£Ad­tiveQP
() )

348 
	gm_cP»ª®yz”
.
xP»ª®yze
Ð
dyÇmic_ÿ¡
<
TEncPic
*>Ð
pcPicCu¼
 ) );

352 ià((
	gm_iNumPicRcvd
 =ð0è|| (!
æush
 && (
m_iPOCLa¡
 !ð0è&& (
m_iNumPicRcvd
 !ð
m_iGOPSize
) && (m_iGOPSize != 0)))

354 
iNumEncoded
 = 0;

358 iàÐ
	gm_RCEÇbËR©eCÚŒÞ
 )

360 
	gm_cR©eCŒl
.
š™RCGOP
Ð
m_iNumPicRcvd
 );

364 
	gm_cGOPEncod”
.
com´essGOP
(
m_iPOCLa¡
, 
m_iNumPicRcvd
, 
m_cLi¡Pic
, 
rcLi¡PicYuvRecOut
, 
acûssUn™sOut
, 
çl£
, f®£, 
CSC
, 
¢rCSC
, 
g‘OuutLogCÚŒÞ
());

366 iàÐ
	gm_RCEÇbËR©eCÚŒÞ
 )

368 
	gm_cR©eCŒl
.
de¡royRCGOP
();

371 
	giNumEncoded
 = 
m_iNumPicRcvd
;

372 
	gm_iNumPicRcvd
 = 0;

373 
	gm_uiNumAÎPicCoded
 +ð
iNumEncoded
;

379 
Void
 
	$£·¿‹F›lds
(
P–
* 
Üg
, P–* 
d¡F›ld
, 
UIÁ
 
¡ride
, UIÁ 
width
, UIÁ 
height
, 
BoÞ
 
isTÝ
)

381 ià(!
isTÝ
)

383 
Üg
 +ð
¡ride
;

385 
IÁ
 
y
 = 0; y < 
height
>>1; y++)

387 
IÁ
 
x
 = 0; x < 
width
; x++)

389 
d¡F›ld
[
x
] = 
Üg
[x];

392 
d¡F›ld
 +ð
¡ride
;

393 
Üg
 +ð
¡ride
*2;

396 
	}
}

398 
Void
 
	gTEncTÝ
::
’code
(
BoÞ
 
æush
, 
TComPicYuv
* 
pcPicYuvOrg
, TComPicYuv* 
pcPicYuvTrueOrg
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢rCSC
, 
TComLi¡
<TComPicYuv*>& 
rcLi¡PicYuvRecOut
, 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sOut
, 
IÁ
& 
iNumEncoded
, BoÞ 
isTff
)

400 
	giNumEncoded
 = 0;

402 
IÁ
 
	gf›ldNum
=0; fieldNum<2; fieldNum++)

404 ià(
	gpcPicYuvOrg
)

408 cÚ¡ 
BoÞ
 
	gisTÝF›ld
=
isTff
==(
f›ldNum
==0);

410 
TComPic
 *
	gpcF›ld
;

411 
xG‘NewPicBufãr
Ð
pcF›ld
, -1 );

412 
	gpcF›ld
->
£tRecÚM¬k
 (
çl£
);

414 ià(
	gf›ldNum
==1)

416 
TComPicYuv
* 
½cPicYuvRec
;

419 iàÐ
	grcLi¡PicYuvRecOut
.
size
(è>ð(
UIÁ
)
m_iGOPSize
+1 )

421 
½cPicYuvRec
 = 
rcLi¡PicYuvRecOut
.
pÝFrÚt
();

425 
	g½cPicYuvRec
 = 
Ãw
 
TComPicYuv
;

426 
	g½cPicYuvRec
->
ü—‹
Ð
m_iSourûWidth
, 
m_iSourûHeight
, 
m_chromaFÜm©IDC
, 
m_maxCUWidth
, 
m_maxCUHeight
, 
m_maxTÙ®CUD•th
, 
Œue
);

428 
	grcLi¡PicYuvRecOut
.
pushBack
Ð
½cPicYuvRec
 );

431 
	gpcF›ld
->
g‘Sliû
(0)->
£tPOC
Ð
m_iPOCLa¡
 );

432 #ià!
REDUCED_ENCODER_MEMORY


433 
	gpcF›ld
->
g‘PicYuvRec
()->
£tBÜd”Ex‹nsiÚ
(
çl£
);

436 
	gpcF›ld
->
£tTÝF›ld
(
isTÝF›ld
);

438 
UIÁ
 
	gcompÚ’tIndex
 = 0; compÚ’tIndex < 
	gpcPicYuvOrg
->
g‘Numb”V®idCompÚ’ts
(); componentIndex++)

440 cÚ¡ 
CompÚ’tID
 
	gcompÚ’t
 = CompÚ’tID(
compÚ’tIndex
);

441 cÚ¡ 
UIÁ
 
	g¡ride
 = 
pcPicYuvOrg
->
g‘SŒide
(
compÚ’t
);

443 
£·¿‹F›lds
((
pcPicYuvOrg
->
g‘Buf
(
compÚ’t
è+…cPicYuvOrg->
g‘M¬gšX
(compÚ’tè+ (pcPicYuvOrg->
g‘M¬gšY
(compÚ’tè* 
¡ride
)),

444 
pcF›ld
->
g‘PicYuvOrg
()->
g‘Addr
(
compÚ’t
),

445 
pcPicYuvOrg
->
g‘SŒide
(
compÚ’t
),

446 
pcPicYuvOrg
->
g‘Width
(
compÚ’t
),

447 
pcPicYuvOrg
->
g‘Height
(
compÚ’t
),

448 
isTÝF›ld
);

450 
£·¿‹F›lds
((
pcPicYuvTrueOrg
->
g‘Buf
(
compÚ’t
è+…cPicYuvTrueOrg->
g‘M¬gšX
(compÚ’tè+ (pcPicYuvTrueOrg->
g‘M¬gšY
(compÚ’tè* 
¡ride
)),

451 
pcF›ld
->
g‘PicYuvTrueOrg
()->
g‘Addr
(
compÚ’t
),

452 
pcPicYuvTrueOrg
->
g‘SŒide
(
compÚ’t
),

453 
pcPicYuvTrueOrg
->
g‘Width
(
compÚ’t
),

454 
pcPicYuvTrueOrg
->
g‘Height
(
compÚ’t
),

455 
isTÝF›ld
);

459 iàÐ
g‘U£Ad­tiveQP
() )

461 
	gm_cP»ª®yz”
.
xP»ª®yze
Ð
dyÇmic_ÿ¡
<
TEncPic
*>Ð
pcF›ld
 ) );

465 iàÐ
	gm_iNumPicRcvd
 && ((
	gæush
&&
	gf›ldNum
==1è|| (
m_iPOCLa¡
/2)==0 || 
m_iNumPicRcvd
==
m_iGOPSize
 ) )

468 
m_cGOPEncod”
.
com´essGOP
(
m_iPOCLa¡
, 
m_iNumPicRcvd
, 
m_cLi¡Pic
, 
rcLi¡PicYuvRecOut
, 
acûssUn™sOut
, 
Œue
, 
isTff
, 
CSC
, 
¢rCSC
, 
g‘OuutLogCÚŒÞ
());

469 
	giNumEncoded
 +ð
m_iNumPicRcvd
;

470 
	gm_uiNumAÎPicCoded
 +ð
m_iNumPicRcvd
;

471 
	gm_iNumPicRcvd
 = 0;

487 
Void
 
	gTEncTÝ
::
	$xG‘NewPicBufãr
 ( 
TComPic
*& 
½cPic
, 
IÁ
 
µsId
 )

489 
½cPic
=0;

492 cÚ¡ 
TComPPS
 *
pPPS
=(
µsId
<0è? 
m_µsM­
.
	`g‘Fœ¡PS
(è: m_µsM­.
	`g‘PS
(ppsId);

493 
	`as£¹
 (
pPPS
!=0);

494 cÚ¡ 
TComPPS
 &
µs
=*
pPPS
;

496 cÚ¡ 
TComSPS
 *
pSPS
=
m_¥sM­
.
	`g‘PS
(
µs
.
	`g‘SPSId
());

497 
	`as£¹
 (
pSPS
!=0);

498 cÚ¡ 
TComSPS
 &
¥s
=*
pSPS
;

500 
TComSliû
::
	`sÜtPicLi¡
(
m_cLi¡Pic
);

503 ià(
m_cLi¡Pic
.
	`size
(è>ð(
UIÁ
)(
m_iGOPSize
 + 
	`g‘MaxDecPicBufãršg
(
MAX_TLAYER
-1) + 2) )

505 
TComLi¡
<
TComPic
*>::
™”©Ü
 
™”Pic
 = 
m_cLi¡Pic
.
	`begš
();

506 
IÁ
 
iSize
 = 
	`IÁ
Ð
m_cLi¡Pic
.
	`size
() );

507  
IÁ
 
i
 = 0; i < 
iSize
; i++ )

509 
½cPic
 = *
™”Pic
;

510 if(
½cPic
->
	`g‘Sliû
(0)->
	`isReã»nûd
(è=ð
çl£
)

514 
™”Pic
++;

519 ià(
µs
.
	`g‘PPSId
(è=ð
½cPic
->
	`g‘PicSym
()->
	`g‘PPS
().getPPSId())

521 #ià
REDUCED_ENCODER_MEMORY


522 
½cPic
->
	`»Ëa£AÎRecÚ¡ruùiÚD©a
();

523 
½cPic
->
	`´•¬eFÜEncod”SourûPicYuv
();

529 
d–‘e
 
½cPic
;

530 
m_cLi¡Pic
.
	`”a£
(
™”Pic
);

531 
½cPic
=0;

535 ià(
½cPic
==0)

537 iàÐ
	`g‘U£Ad­tiveQP
() )

539 
TEncPic
* 
pcEPic
 = 
Ãw
 TEncPic;

540 #ià
REDUCED_ENCODER_MEMORY


541 
pcEPic
->
	`ü—‹
Ð
¥s
, 
µs
,…ps.
	`g‘MaxCuDQPD•th
()+1);

543 
pcEPic
->
	`ü—‹
Ð
¥s
, 
µs
,…ps.
	`g‘MaxCuDQPD•th
()+1, 
çl£
);

545 
½cPic
 = 
pcEPic
;

549 
½cPic
 = 
Ãw
 
TComPic
;

550 #ià
REDUCED_ENCODER_MEMORY


551 
½cPic
->
	`ü—‹
Ð
¥s
, 
µs
, 
Œue
, 
çl£
 );

553 
½cPic
->
	`ü—‹
Ð
¥s
, 
µs
, 
çl£
 );

557 
m_cLi¡Pic
.
	`pushBack
Ð
½cPic
 );

559 
½cPic
->
	`£tRecÚM¬k
 (
çl£
);

561 
m_iPOCLa¡
++;

562 
m_iNumPicRcvd
++;

564 
½cPic
->
	`g‘Sliû
(0)->
	`£tPOC
Ð
m_iPOCLa¡
 );

565 #ià!
REDUCED_ENCODER_MEMORY


567 
½cPic
->
	`g‘PicYuvRec
()->
	`£tBÜd”Ex‹nsiÚ
(
çl£
);

569 
	}
}

571 
Void
 
	gTEncTÝ
::
	$xIn™VPS
(
TComVPS
 &
vps
, cÚ¡ 
TComSPS
 &
¥s
)

575 *
vps
.
	`g‘PTL
(èð*
¥s
.getPTL();

576 
vps
.
	`£tMaxOpS‘s
(1);

577 
vps
.
	`g‘TimšgInfo
()->
	`£tTimšgInfoP»£ÁFÏg
 ( 
çl£
 );

578 
vps
.
	`£tNumHrdP¬am‘”s
( 0 );

580 
vps
.
	`ü—‹HrdP¬amBufãr
();

581  
UIÁ
 
i
 = 0; i < 
vps
.
	`g‘NumHrdP¬am‘”s
(); i ++ )

583 
vps
.
	`£tHrdOpS‘Idx
Ð0, 
i
 );

584 
vps
.
	`£tC´msP»£ÁFÏg
Ð
çl£
, 
i
 );

587 
	}
}

589 
Void
 
	gTEncTÝ
::
	$xIn™SPS
(
TComSPS
 &
¥s
)

591 
ProfžeT›rLev–
& 
´ofžeT›rLev–
 = *
¥s
.
	`g‘PTL
()->
	`g‘G’”®PTL
();

592 
´ofžeT›rLev–
.
	`£tLev–Idc
(
m_Ëv–
);

593 
´ofžeT›rLev–
.
	`£tT›rFÏg
(
m_Ëv–T›r
);

594 
´ofžeT›rLev–
.
	`£tProfžeIdc
(
m_´ofže
);

595 
´ofžeT›rLev–
.
	`£tProfžeCom·tibž™yFÏg
(
m_´ofže
, 1);

596 
´ofžeT›rLev–
.
	`£tProg»ssiveSourûFÏg
(
m_´og»ssiveSourûFÏg
);

597 
´ofžeT›rLev–
.
	`£tIÁ”ÏûdSourûFÏg
(
m_š‹¾aûdSourûFÏg
);

598 
´ofžeT›rLev–
.
	`£tNÚPackedCÚ¡¿štFÏg
(
m_nÚPackedCÚ¡¿štFÏg
);

599 
´ofžeT›rLev–
.
	`£tF¿meOÆyCÚ¡¿štFÏg
(
m_äameOÆyCÚ¡¿štFÏg
);

600 
´ofžeT›rLev–
.
	`£tB™D•thCÚ¡¿št
(
m_b™D•thCÚ¡¿štV®ue
);

601 
´ofžeT›rLev–
.
	`£tChromaFÜm©CÚ¡¿št
(
m_chromaFÜm©CÚ¡¿štV®ue
);

602 
´ofžeT›rLev–
.
	`£tIÁ¿CÚ¡¿štFÏg
(
m_šŒaCÚ¡¿štFÏg
);

603 
´ofžeT›rLev–
.
	`£tOÃPiùu»OÆyCÚ¡¿štFÏg
(
m_ÚePiùu»OÆyCÚ¡¿štFÏg
);

604 
´ofžeT›rLev–
.
	`£tLow”B™R©eCÚ¡¿štFÏg
(
m_low”B™R©eCÚ¡¿štFÏg
);

606 ià((
m_´ofže
 =ð
Profže
::
MAIN10
è&& (
m_b™D•th
[
CHANNEL_TYPE_LUMA
] =ð8è&& (m_b™D•th[
CHANNEL_TYPE_CHROMA
] == 8))

609 
´ofžeT›rLev–
.
	`£tProfžeCom·tibž™yFÏg
(
Profže
::
MAIN
, 1);

611 ià(
m_´ofže
 =ð
Profže
::
MAIN
)

614 
´ofžeT›rLev–
.
	`£tProfžeCom·tibž™yFÏg
(
Profže
::
MAIN10
, 1);

620 
¥s
.
	`£tPicWidthInLumaSam¶es
 ( 
m_iSourûWidth
 );

621 
¥s
.
	`£tPicHeightInLumaSam¶es
 ( 
m_iSourûHeight
 );

622 
¥s
.
	`£tCÚfÜmªûWšdow
 ( 
m_cÚfÜmªûWšdow
 );

623 
¥s
.
	`£tMaxCUWidth
 ( 
m_maxCUWidth
 );

624 
¥s
.
	`£tMaxCUHeight
 ( 
m_maxCUHeight
 );

625 
¥s
.
	`£tMaxTÙ®CUD•th
 ( 
m_maxTÙ®CUD•th
 );

626 
¥s
.
	`£tChromaFÜm©Idc
Ð
m_chromaFÜm©IDC
);

627 
¥s
.
	`£tLog2DiffMaxMšCodšgBlockSize
(
m_log2DiffMaxMšCodšgBlockSize
);

629 
IÁ
 
mšCUSize
 = 
¥s
.
	`g‘MaxCUWidth
(è>> ( sps.
	`g‘Log2DiffMaxMšCodšgBlockSize
() );

630 
IÁ
 
log2MšCUSize
 = 0;

631 
mšCUSize
 > 1)

633 
mšCUSize
 >>= 1;

634 
log2MšCUSize
++;

637 
¥s
.
	`£tLog2MšCodšgBlockSize
(
log2MšCUSize
);

639 
¥s
.
	`£tPCMLog2MšSize
 (
m_uiPCMLog2MšSize
);

640 
¥s
.
	`£tU£PCM
 ( 
m_u£PCM
 );

641 
¥s
.
	`£tPCMLog2MaxSize
Ð
m_pcmLog2MaxSize
 );

643 
¥s
.
	`£tQuadŒ“TULog2MaxSize
Ð
m_uiQuadŒ“TULog2MaxSize
 );

644 
¥s
.
	`£tQuadŒ“TULog2MšSize
Ð
m_uiQuadŒ“TULog2MšSize
 );

645 
¥s
.
	`£tQuadŒ“TUMaxD•thIÁ”
Ð
m_uiQuadŒ“TUMaxD•thIÁ”
 );

646 
¥s
.
	`£tQuadŒ“TUMaxD•thIÁ¿
Ð
m_uiQuadŒ“TUMaxD•thIÁ¿
 );

648 
¥s
.
	`£tSPSTempÜ®MVPEÇbËdFÏg
((
	`g‘TMVPModeId
() == 2 || getTMVPModeId() == 1));

650 
¥s
.
	`£tMaxTrSize
 ( 1 << 
m_uiQuadŒ“TULog2MaxSize
 );

652 
¥s
.
	`£tU£AMP
 ( 
m_u£AMP
 );

654 
UIÁ
 
chªÃlTy³
 = 0; chªÃlTy³ < 
MAX_NUM_CHANNEL_TYPE
; channelType++)

656 
¥s
.
	`£tB™D•th
 (
	`ChªÃlTy³
(
chªÃlTy³
), 
m_b™D•th
[channelType] );

657 #ià
O0043_BEST_EFFORT_DECODING


658 
¥s
.
	`£tSŒ—mB™D•th
(
	`ChªÃlTy³
(
chªÃlTy³
), 
m_b™D•th
[channelType] );

660 
¥s
.
	`£tQpBDOff£t
 (
	`ChªÃlTy³
(
chªÃlTy³
), (6 * (
m_b™D•th
[channelType] - 8)));

661 
¥s
.
	`£tPCMB™D•th
 (
	`ChªÃlTy³
(
chªÃlTy³
), 
m_PCMB™D•th
[channelType] );

664 
¥s
.
	`£tU£SAO
Ð
m_bU£SAO
 );

666 
¥s
.
	`£tMaxTLay”s
Ð
m_maxTempLay”
 );

667 
¥s
.
	`£tTempÜ®IdNe¡šgFÏg
ÐÐ
m_maxTempLay”
 =ð1 ) ? 
Œue
 : 
çl£
 );

669 
IÁ
 
i
 = 0; i < 
	`mš
(
¥s
.
	`g‘MaxTLay”s
(),(
UIÁ
è
MAX_TLAYER
); i++ )

671 
¥s
.
	`£tMaxDecPicBufãršg
(
m_maxDecPicBufãršg
[
i
], i);

672 
¥s
.
	`£tNumReÜd”Pics
(
m_numReÜd”Pics
[
i
], i);

675 
¥s
.
	`£tPCMFž‹rDi§bËFÏg
 ( 
m_bPCMFž‹rDi§bËFÏg
 );

676 
¥s
.
	`£tSÿlšgLi¡FÏg
 ( (
m_u£SÿlšgLi¡Id
 =ð
SCALING_LIST_OFF
) ? 0 : 1 );

677 
¥s
.
	`£tU£SŒÚgIÁ¿SmoÙhšg
Ð
m_u£SŒÚgIÁ¿SmoÙhšg
 );

678 
¥s
.
	`£tVuiP¬am‘”sP»£ÁFÏg
(
	`g‘VuiP¬am‘”sP»£ÁFÏg
());

680 ià(
¥s
.
	`g‘VuiP¬am‘”sP»£ÁFÏg
())

682 
TComVUI
* 
pcVUI
 = 
¥s
.
	`g‘VuiP¬am‘”s
();

683 
pcVUI
->
	`£tA¥eùR©ioInfoP»£ÁFÏg
(
	`g‘A¥eùR©ioInfoP»£ÁFÏg
());

684 
pcVUI
->
	`£tA¥eùR©ioIdc
(
	`g‘A¥eùR©ioIdc
());

685 
pcVUI
->
	`£tS¬Width
(
	`g‘S¬Width
());

686 
pcVUI
->
	`£tS¬Height
(
	`g‘S¬Height
());

687 
pcVUI
->
	`£tOv”sÿnInfoP»£ÁFÏg
(
	`g‘Ov”sÿnInfoP»£ÁFÏg
());

688 
pcVUI
->
	`£tOv”sÿnAµrÝrŸ‹FÏg
(
	`g‘Ov”sÿnAµrÝrŸ‹FÏg
());

689 
pcVUI
->
	`£tVideoSigÇlTy³P»£ÁFÏg
(
	`g‘VideoSigÇlTy³P»£ÁFÏg
());

690 
pcVUI
->
	`£tVideoFÜm©
(
	`g‘VideoFÜm©
());

691 
pcVUI
->
	`£tVideoFuÎRªgeFÏg
(
	`g‘VideoFuÎRªgeFÏg
());

692 
pcVUI
->
	`£tCÞourDesütiÚP»£ÁFÏg
(
	`g‘CÞourDesütiÚP»£ÁFÏg
());

693 
pcVUI
->
	`£tCÞourPrim¬›s
(
	`g‘CÞourPrim¬›s
());

694 
pcVUI
->
	`£tT¿nsãrCh¬aù”i¡ics
(
	`g‘T¿nsãrCh¬aù”i¡ics
());

695 
pcVUI
->
	`£tM©rixCÛffic›Ás
(
	`g‘M©rixCÛffic›Ás
());

696 
pcVUI
->
	`£tChromaLocInfoP»£ÁFÏg
(
	`g‘ChromaLocInfoP»£ÁFÏg
());

697 
pcVUI
->
	`£tChromaSam¶eLocTy³TÝF›ld
(
	`g‘ChromaSam¶eLocTy³TÝF›ld
());

698 
pcVUI
->
	`£tChromaSam¶eLocTy³BÙtomF›ld
(
	`g‘ChromaSam¶eLocTy³BÙtomF›ld
());

699 
pcVUI
->
	`£tNeuŒ®ChromaIndiÿtiÚFÏg
(
	`g‘NeuŒ®ChromaIndiÿtiÚFÏg
());

700 
pcVUI
->
	`£tDeçuÉDi¥ÏyWšdow
(
	`g‘DeçuÉDi¥ÏyWšdow
());

701 
pcVUI
->
	`£tF¿meF›ldInfoP»£ÁFÏg
(
	`g‘F¿meF›ldInfoP»£ÁFÏg
());

702 
pcVUI
->
	`£tF›ldSeqFÏg
(
çl£
);

703 
pcVUI
->
	`£tHrdP¬am‘”sP»£ÁFÏg
(
çl£
);

704 
pcVUI
->
	`g‘TimšgInfo
()->
	`£tPocPrÝÜtiÚ®ToTimšgFÏg
(
	`g‘PocPrÝÜtiÚ®ToTimšgFÏg
());

705 
pcVUI
->
	`g‘TimšgInfo
()->
	`£tNumTicksPocDiffOÃMšus1
 (
	`g‘NumTicksPocDiffOÃMšus1
() );

706 
pcVUI
->
	`£tB™¡»amRe¡riùiÚFÏg
(
	`g‘B™¡»amRe¡riùiÚFÏg
());

707 
pcVUI
->
	`£tTžesFixedSŒuùu»FÏg
(
	`g‘TžesFixedSŒuùu»FÏg
());

708 
pcVUI
->
	`£tMÙiÚVeùÜsOv”PicBound¬›sFÏg
(
	`g‘MÙiÚVeùÜsOv”PicBound¬›sFÏg
());

709 
pcVUI
->
	`£tMšS·tŸlSegm’tiÚIdc
(
	`g‘MšS·tŸlSegm’tiÚIdc
());

710 
pcVUI
->
	`£tMaxBy‹sP”PicD’om
(
	`g‘MaxBy‹sP”PicD’om
());

711 
pcVUI
->
	`£tMaxB™sP”MšCuD’om
(
	`g‘MaxB™sP”MšCuD’om
());

712 
pcVUI
->
	`£tLog2MaxMvL’gthHÜizÚl
(
	`g‘Log2MaxMvL’gthHÜizÚl
());

713 
pcVUI
->
	`£tLog2MaxMvL’gthV”tiÿl
(
	`g‘Log2MaxMvL’gthV”tiÿl
());

715 
¥s
.
	`£tNumLÚgT”mRefPicSPS
(
NUM_LONG_TERM_REF_PIC_SPS
);

716 
	`as£¹
 (
NUM_LONG_TERM_REF_PIC_SPS
 <ð
MAX_NUM_LONG_TERM_REF_PICS
);

717 
IÁ
 
k
 = 0; k < 
NUM_LONG_TERM_REF_PIC_SPS
; k++)

719 
¥s
.
	`£tLtRefPicPocLsbSps
(
k
, 0);

720 
¥s
.
	`£tU£dByCu¼PicLtSPSFÏg
(
k
, 0);

723 ifÐ
	`g‘Piùu»TimšgSEIEÇbËd
(è|| 
	`g‘DecodšgUn™InfoSEIEÇbËd
(è|| 
	`g‘CpbS©u¿tiÚEÇbËd
() )

725 
	`xIn™HrdP¬am‘”s
(
¥s
);

727 ifÐ
	`g‘BufãršgP”iodSEIEÇbËd
(è|| 
	`g‘Piùu»TimšgSEIEÇbËd
(è|| 
	`g‘DecodšgUn™InfoSEIEÇbËd
() )

729 
¥s
.
	`g‘VuiP¬am‘”s
()->
	`£tHrdP¬am‘”sP»£ÁFÏg
Ð
Œue
 );

733 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tT¿nsfÜmSkRÙ©iÚEÇbËdFÏg
(
m_ŒªsfÜmSkRÙ©iÚEÇbËdFÏg
);

734 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tT¿nsfÜmSkCÚ‹xtEÇbËdFÏg
(
m_ŒªsfÜmSkCÚ‹xtEÇbËdFÏg
);

735 
UIÁ
 
sigÇÎšgModeIndex
 = 0; sigÇÎšgModeIndex < 
NUMBER_OF_RDPCM_SIGNALLING_MODES
; signallingModeIndex++)

737 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tRdpcmEÇbËdFÏg
(
	`RDPCMSigÇÎšgMode
(
sigÇÎšgModeIndex
), 
m_rdpcmEÇbËdFÏg
[signallingModeIndex]);

739 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tEx‹ndedP»cisiÚProûssšgFÏg
(
m_ex‹ndedP»cisiÚProûssšgFÏg
);

740 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tIÁ¿SmoÙhšgDi§bËdFÏg
Ð
m_šŒaSmoÙhšgDi§bËdFÏg
 );

741 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tHighP»cisiÚOff£tsEÇbËdFÏg
(
m_highP»cisiÚOff£tsEÇbËdFÏg
);

742 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tP”si¡’tRiûAd­tiÚEÇbËdFÏg
(
m_³rsi¡’tRiûAd­tiÚEÇbËdFÏg
);

743 
¥s
.
	`g‘SpsRªgeEx‹nsiÚ
().
	`£tCabacBy·ssAlignm’tEÇbËdFÏg
(
m_ÿbacBy·ssAlignm’tEÇbËdFÏg
);

744 
	}
}

747 
IÁ
 
	$ÿlcSÿË
(
IÁ
 
x
)

749 ià(
x
==0)

753 
UIÁ
 
iMask
 = 0xffffffff;

754 
IÁ
 
SÿËV®ue
 = 32;

756 (
x
&
iMask
) != 0)

758 
SÿËV®ue
--;

759 
iMask
 = (iMask >> 1);

762  
SÿËV®ue
;

763 
	}
}

765 
Void
 
	gTEncTÝ
::
	$xIn™HrdP¬am‘”s
(
TComSPS
 &
¥s
)

767 
BoÞ
 
u£SubCpbP¬ams
 = (
	`g‘SliûMode
(è> 0è|| (
	`g‘SliûSegm’tMode
() > 0);

768 
IÁ
 
b™R©e
 = 
	`g‘T¬g‘B™¿‹
();

769 
BoÞ
 
isRªdomAcûss
 = 
	`g‘IÁ¿P”iod
() > 0;

770 
IÁ
 
ýbSize
 = 
	`g‘CpbSize
();

771 
	`as£¹
 (
ýbSize
!=0);

772 ifÐ!
	`g‘VuiP¬am‘”sP»£ÁFÏg
(è&& !
	`g‘CpbS©u¿tiÚEÇbËd
() )

777 
TComVUI
 *
vui
 = 
¥s
.
	`g‘VuiP¬am‘”s
();

778 
TComHRD
 *
hrd
 = 
vui
->
	`g‘HrdP¬am‘”s
();

780 
TimšgInfo
 *
timšgInfo
 = 
vui
->
	`g‘TimšgInfo
();

781 
timšgInfo
->
	`£tTimšgInfoP»£ÁFÏg
Ð
Œue
 );

782  
	`g‘F¿meR©e
() )

785 
timšgInfo
->
	`£tNumUn™sInTick
Ð1125000 );imšgInfo->
	`£tTimeSÿË
 ( 27000000 );

788 
timšgInfo
->
	`£tNumUn™sInTick
Ð1080000 );imšgInfo->
	`£tTimeSÿË
 ( 27000000 );

791 
timšgInfo
->
	`£tNumUn™sInTick
Ð900900 );imšgInfo->
	`£tTimeSÿË
 ( 27000000 );

794 
timšgInfo
->
	`£tNumUn™sInTick
Ð540000 );imšgInfo->
	`£tTimeSÿË
 ( 27000000 );

797 
timšgInfo
->
	`£tNumUn™sInTick
Ð450450 );imšgInfo->
	`£tTimeSÿË
 ( 27000000 );

800 
timšgInfo
->
	`£tNumUn™sInTick
Ð1001 );imšgInfo->
	`£tTimeSÿË
 ( 60000 );

804 ià(
	`g‘TempÜ®Sub§m¶eR©io
()>1)

806 
UIÁ
 
‹mpÜ®Sub§m¶eR©io
 = 
	`g‘TempÜ®Sub§m¶eR©io
();

807 iàÐ
	`DoubË
(
timšgInfo
->
	`g‘NumUn™sInTick
()è* 
‹mpÜ®Sub§m¶eR©io
 > 
¡d
::
num”ic_lim™s
<
UIÁ
>::
	`max
() )

809 
timšgInfo
->
	`£tTimeSÿË
ÐtimšgInfo->
	`g‘TimeSÿË
(è/ 
‹mpÜ®Sub§m¶eR©io
 );

813 
timšgInfo
->
	`£tNumUn™sInTick
ÐtimšgInfo->
	`g‘NumUn™sInTick
(è* 
‹mpÜ®Sub§m¶eR©io
 );

817 
BoÞ
 
¿‹CÁ
 = ( 
b™R©e
 > 0 );

818 
hrd
->
	`£tN®HrdP¬am‘”sP»£ÁFÏg
Ð
¿‹CÁ
 );

819 
hrd
->
	`£tVþHrdP¬am‘”sP»£ÁFÏg
Ð
¿‹CÁ
 );

820 
hrd
->
	`£tSubPicCpbP¬amsP»£ÁFÏg
Ð
u£SubCpbP¬ams
 );

822 ifÐ
hrd
->
	`g‘SubPicCpbP¬amsP»£ÁFÏg
() )

824 
hrd
->
	`£tTickDivisÜMšus2
( 100 - 2 );

825 
hrd
->
	`£tDuCpbRemov®D–ayL’gthMšus1
( 7 );

826 
hrd
->
	`£tSubPicCpbP¬amsInPicTimšgSEIFÏg
Ð
Œue
 );

827 
hrd
->
	`£tDpbOuutD–ayDuL’gthMšus1
( 5 + 7 );

831 
hrd
->
	`£tSubPicCpbP¬amsInPicTimšgSEIFÏg
Ð
çl£
 );

834 ià(
	`ÿlcSÿË
(
b™R©e
) <= 6)

836 
hrd
->
	`£tB™R©eSÿË
(0);

840 
hrd
->
	`£tB™R©eSÿË
(
	`ÿlcSÿË
(
b™R©e
) - 6);

843 ià(
	`ÿlcSÿË
(
ýbSize
) <= 4)

845 
hrd
->
	`£tCpbSizeSÿË
(0);

849 
hrd
->
	`£tCpbSizeSÿË
(
	`ÿlcSÿË
(
ýbSize
) - 4);

852 
hrd
->
	`£tDuCpbSizeSÿË
( 6 );

854 
hrd
->
	`£tIn™ŸlCpbRemov®D–ayL’gthMšus1
(15);

855 ifÐ
isRªdomAcûss
 )

857 
hrd
->
	`£tCpbRemov®D–ayL’gthMšus1
(5);

858 
hrd
->
	`£tDpbOuutD–ayL’gthMšus1
 (5);

862 
hrd
->
	`£tCpbRemov®D–ayL’gthMšus1
(9);

863 
hrd
->
	`£tDpbOuutD–ayL’gthMšus1
 (9);

867 
IÁ
 
i
, 
j
;

868 
UIÁ
 
b™¿‹V®ue
, 
ýbSizeV®ue
;

869 
UIÁ
 
duCpbSizeV®ue
;

870 
UIÁ
 
duB™R©eV®ue
 = 0;

872  
i
 = 0; i < 
MAX_TLAYER
; i ++ )

874 
hrd
->
	`£tFixedPicR©eFÏg
Ð
i
, 1 );

875 
hrd
->
	`£tPicDu¿tiÚInTcMšus1
Ð
i
, 0 );

876 
hrd
->
	`£tLowD–ayHrdFÏg
Ð
i
, 0 );

877 
hrd
->
	`£tCpbCÁMšus1
Ð
i
, 0 );

881 
b™¿‹V®ue
 = 
b™R©e
 / (1 << (6 + 
hrd
->
	`g‘B™R©eSÿË
()) );

883 
ýbSizeV®ue
 = 
ýbSize
 / (1 << (4 + 
hrd
->
	`g‘CpbSizeSÿË
()) );

887 
duCpbSizeV®ue
 = 
b™¿‹V®ue
;

888 
duB™R©eV®ue
 = 
ýbSizeV®ue
;

890  
j
 = 0; j < ( 
hrd
->
	`g‘CpbCÁMšus1
Ð
i
 ) + 1 ); j ++ )

892 
hrd
->
	`£tB™R©eV®ueMšus1
Ð
i
, 
j
, 0, ( 
b™¿‹V®ue
 - 1 ) );

893 
hrd
->
	`£tCpbSizeV®ueMšus1
Ð
i
, 
j
, 0, ( 
ýbSizeV®ue
 - 1 ) );

894 
hrd
->
	`£tDuCpbSizeV®ueMšus1
Ð
i
, 
j
, 0, ( 
duCpbSizeV®ue
 - 1 ) );

895 
hrd
->
	`£tDuB™R©eV®ueMšus1
Ð
i
, 
j
, 0, ( 
duB™R©eV®ue
 - 1 ) );

896 
hrd
->
	`£tCbrFÏg
Ð
i
, 
j
, 0, 
çl£
 );

898 
hrd
->
	`£tB™R©eV®ueMšus1
Ð
i
, 
j
, 1, ( 
b™¿‹V®ue
 - 1) );

899 
hrd
->
	`£tCpbSizeV®ueMšus1
Ð
i
, 
j
, 1, ( 
ýbSizeV®ue
 - 1 ) );

900 
hrd
->
	`£tDuCpbSizeV®ueMšus1
Ð
i
, 
j
, 1, ( 
duCpbSizeV®ue
 - 1 ) );

901 
hrd
->
	`£tDuB™R©eV®ueMšus1
Ð
i
, 
j
, 1, ( 
duB™R©eV®ue
 - 1 ) );

902 
hrd
->
	`£tCbrFÏg
Ð
i
, 
j
, 1, 
çl£
 );

905 
	}
}

907 
Void
 
	gTEncTÝ
::
	$xIn™PPS
(
TComPPS
 &
µs
, cÚ¡ 
TComSPS
 &
¥s
)

910 
µs
.
	`£tSPSId
(
¥s
.
	`g‘SPSId
());

912 
µs
.
	`£tCÚ¡¿šedIÁ¿P»d
Ð
m_bU£CÚ¡¿šedIÁ¿P»d
 );

913 
BoÞ
 
bU£DQP
 = (
	`g‘MaxCuDQPD•th
(è> 0)? 
Œue
 : 
çl£
;

915 if((
	`g‘MaxD–QP
(è!ð0 )|| 
	`g‘U£Ad­tiveQP
())

917 
bU£DQP
 = 
Œue
;

920 iàÐ
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
() )

922 
bU£DQP
 = 
Œue
;

925 ià(
m_co¡Mode
==
COST_SEQUENCE_LEVEL_LOSSLESS
 || m_co¡Mode==
COST_LOSSLESS_CODING
)

927 
bU£DQP
=
çl£
;

931 iàÐ
m_RCEÇbËR©eCÚŒÞ
 )

933 
µs
.
	`£tU£DQP
(
Œue
);

934 
µs
.
	`£tMaxCuDQPD•th
( 0 );

936 if(
bU£DQP
)

938 
µs
.
	`£tU£DQP
(
Œue
);

939 
µs
.
	`£tMaxCuDQPD•th
Ð
m_iMaxCuDQPD•th
 );

943 
µs
.
	`£tU£DQP
(
çl£
);

944 
µs
.
	`£tMaxCuDQPD•th
( 0 );

947 iàÐ
m_diffCuChromaQpOff£tD•th
 >= 0 )

949 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tDiffCuChromaQpOff£tD•th
(
m_diffCuChromaQpOff£tD•th
);

950 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`þ—rChromaQpOff£tLi¡
();

951 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tChromaQpOff£tLi¡EÁry
(1, 6, 6);

956 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tDiffCuChromaQpOff£tD•th
(0);

957 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`þ—rChromaQpOff£tLi¡
();

959 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tCrossCompÚ’tP»diùiÚEÇbËdFÏg
(
m_üossCompÚ’tP»diùiÚEÇbËdFÏg
);

960 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tLog2SaoOff£tSÿË
(
CHANNEL_TYPE_LUMA
, 
m_log2SaoOff£tSÿË
[CHANNEL_TYPE_LUMA ]);

961 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tLog2SaoOff£tSÿË
(
CHANNEL_TYPE_CHROMA
, 
m_log2SaoOff£tSÿË
[CHANNEL_TYPE_CHROMA]);

963 ià(
	`g‘WCGChromaQPCÚŒÞ
().
	`isEÇbËd
())

965 cÚ¡ 
IÁ
 
ba£Qp
=
m_iQP
+
µs
.
	`g‘PPSId
();

966 cÚ¡ 
DoubË
 
chromaQp
 = 
m_wcgChromaQpCÚŒÞ
.
chromaQpSÿË
 * 
ba£Qp
 + m_wcgChromaQpCÚŒÞ.
chromaQpOff£t
;

967 cÚ¡ 
DoubË
 
dcbQP
 = 
m_wcgChromaQpCÚŒÞ
.
chromaCbQpSÿË
 * 
chromaQp
;

968 cÚ¡ 
DoubË
 
düQP
 = 
m_wcgChromaQpCÚŒÞ
.
chromaCrQpSÿË
 * 
chromaQp
;

969 cÚ¡ 
IÁ
 
cbQP
 =(IÁ)(
dcbQP
 + ( dcbQP < 0 ? -0.5 : 0.5) );

970 cÚ¡ 
IÁ
 
üQP
 =(IÁ)(
düQP
 + ( dcrQP < 0 ? -0.5 : 0.5) );

971 
µs
.
	`£tQpOff£t
(
COMPONENT_Cb
, 
	`Cl3
Ð-12, 12, 
	`mš
(0, 
cbQP
è+ 
m_chromaCbQpOff£t
 ));

972 
µs
.
	`£tQpOff£t
(
COMPONENT_Cr
, 
	`Cl3
Ð-12, 12, 
	`mš
(0, 
üQP
è+ 
m_chromaCrQpOff£t
));

976 
µs
.
	`£tQpOff£t
(
COMPONENT_Cb
, 
m_chromaCbQpOff£t
 );

977 
µs
.
	`£tQpOff£t
(
COMPONENT_Cr
, 
m_chromaCrQpOff£t
 );

979 
BoÞ
 
bChromaD–QPEÇbËd
 = 
çl£
;

981 
bChromaD–QPEÇbËd
 = ( 
m_¦iûChromaQpOff£tIÁ¿OrP”iodic
[0] || m_sliceChromaQpOffsetIntraOrPeriodic[1] );

982 ifÐ!
bChromaD–QPEÇbËd
 )

984  
IÁ
 
i
=0; i<
m_iGOPSize
; i++ )

986 ifÐ
m_GOPLi¡
[
i
].
m_CbQPoff£t
 || m_GOPLi¡[i].
m_CrQPoff£t
 )

988 
bChromaD–QPEÇbËd
 = 
Œue
;

994 
µs
.
	`£tSliûChromaQpFÏg
(
bChromaD–QPEÇbËd
);

996 
µs
.
	`£tEÁrÝyCodšgSyncEÇbËdFÏg
Ð
m_’ŒÝyCodšgSyncEÇbËdFÏg
 );

997 
µs
.
	`£tTžesEÇbËdFÏg
Ð(
m_iNumCÞumnsMšus1
 > 0 || 
m_iNumRowsMšus1
 > 0) );

998 
µs
.
	`£tU£WP
Ð
m_u£Weigh‹dP»d
 );

999 
µs
.
	`£tWPBiP»d
Ð
m_u£Weigh‹dBiP»d
 );

1000 
µs
.
	`£tOuutFÏgP»£ÁFÏg
Ð
çl£
 );

1001 
µs
.
	`£tSignD©aHidšgEÇbËdFÏg
(
	`g‘SignD©aHidšgEÇbËdFÏg
());

1003 iàÐ
	`g‘DeblockšgFž‹rM‘ric
() )

1005 
µs
.
	`£tDeblockšgFž‹rOv”rideEÇbËdFÏg
(
Œue
);

1006 
µs
.
	`£tPPSDeblockšgFž‹rDi§bËdFÏg
(
çl£
);

1010 
µs
.
	`£tDeblockšgFž‹rOv”rideEÇbËdFÏg
Ð!
	`g‘LoÝFž‹rOff£tInPPS
() );

1011 
µs
.
	`£tPPSDeblockšgFž‹rDi§bËdFÏg
Ð
	`g‘LoÝFž‹rDi§bË
() );

1014 ià(! 
µs
.
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
())

1016 
µs
.
	`£tDeblockšgFž‹rB‘aOff£tDiv2
Ð
	`g‘LoÝFž‹rB‘aOff£t
() );

1017 
µs
.
	`£tDeblockšgFž‹rTcOff£tDiv2
Ð
	`g‘LoÝFž‹rTcOff£t
() );

1021 
µs
.
	`£tDeblockšgFž‹rB‘aOff£tDiv2
(0);

1022 
µs
.
	`£tDeblockšgFž‹rTcOff£tDiv2
(0);

1026 cÚ¡ 
BoÞ
 
deblockšgFž‹rCÚŒÞP»£ÁFÏg
 = 
µs
.
	`g‘DeblockšgFž‹rOv”rideEÇbËdFÏg
() ||

1027 
µs
.
	`g‘PPSDeblockšgFž‹rDi§bËdFÏg
() ||

1028 
µs
.
	`g‘DeblockšgFž‹rB‘aOff£tDiv2
() != 0 ||

1029 
µs
.
	`g‘DeblockšgFž‹rTcOff£tDiv2
() != 0;

1031 
µs
.
	`£tDeblockšgFž‹rCÚŒÞP»£ÁFÏg
(
deblockšgFž‹rCÚŒÞP»£ÁFÏg
);

1033 
µs
.
	`£tLog2P¬®ËlM”geLev–Mšus2
 (
m_log2P¬®ËlM”geLev–Mšus2
 );

1034 
µs
.
	`£tCabacIn™P»£ÁFÏg
(
CABAC_INIT_PRESENT_FLAG
);

1035 
µs
.
	`£tLoÝFž‹rAüossSliûsEÇbËdFÏg
Ð
m_bLFCrossSliûBound¬yFÏg
 );

1038 
IÁ
 
hi¡og¿m
[
MAX_NUM_REF
 + 1];

1039  
IÁ
 
i
 = 0; i <ð
MAX_NUM_REF
; i++ )

1041 
hi¡og¿m
[
i
]=0;

1043  
IÁ
 
i
 = 0; i < 
	`g‘GOPSize
(); i++)

1045 
	`as£¹
(
	`g‘GOPEÁry
(
i
).
m_numRefPicsAùive
 >ð0 && g‘GOPEÁry(i).m_numRefPicsAùiv<ð
MAX_NUM_REF
);

1046 
hi¡og¿m
[
	`g‘GOPEÁry
(
i
).
m_numRefPicsAùive
]++;

1049 
IÁ
 
maxHi¡
=-1;

1050 
IÁ
 
be¡Pos
=0;

1051  
IÁ
 
i
 = 0; i <ð
MAX_NUM_REF
; i++ )

1053 if(
hi¡og¿m
[
i
]>
maxHi¡
)

1055 
maxHi¡
=
hi¡og¿m
[
i
];

1056 
be¡Pos
=
i
;

1059 
	`as£¹
(
be¡Pos
 <= 15);

1060 
µs
.
	`£tNumRefIdxL0DeçuÉAùive
(
be¡Pos
);

1061 
µs
.
	`£tNumRefIdxL1DeçuÉAùive
(
be¡Pos
);

1062 
µs
.
	`£tT¿nsquªtBy·ssEÇbËdFÏg
(
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
());

1063 
µs
.
	`£tU£T¿nsfÜmSk
Ð
m_u£T¿nsfÜmSk
 );

1064 
µs
.
	`g‘PpsRªgeEx‹nsiÚ
().
	`£tLog2MaxT¿nsfÜmSkBlockSize
Ð
m_log2MaxT¿nsfÜmSkBlockSize
 );

1066 ià(
m_¦iûSegm’tMode
 !ð
NO_SLICES
)

1068 
µs
.
	`£tD•’d’tSliûSegm’tsEÇbËdFÏg
Ð
Œue
 );

1071 
	`xIn™PPSfÜTžes
(
µs
);

1072 
	}
}

1075 
Void
 
	gTEncTÝ
::
	$xIn™RPS
(
TComSPS
 &
¥s
, 
BoÞ
 
isF›ldCodšg
)

1077 
TComReã»nûPiùu»S‘
* 
½s
;

1079 
¥s
.
	`ü—‹RPSLi¡
(
	`g‘GOPSize
(è+ 
m_exŒaRPSs
 + 1);

1080 
TComRPSLi¡
* 
½sLi¡
 = 
¥s
.
	`g‘RPSLi¡
();

1082  
IÁ
 
i
 = 0; i < 
	`g‘GOPSize
()+
m_exŒaRPSs
; i++)

1084 cÚ¡ 
GOPEÁry
 &
ge
 = 
	`g‘GOPEÁry
(
i
);

1085 
½s
 = 
½sLi¡
->
	`g‘Reã»nûPiùu»S‘
(
i
);

1086 
½s
->
	`£tNumb”OfPiùu»s
(
ge
.
m_numRefPics
);

1087 
½s
->
	`£tNumRefIdc
(
ge
.
m_numRefIdc
);

1088 
IÁ
 
numNeg
 = 0;

1089 
IÁ
 
numPos
 = 0;

1090  
IÁ
 
j
 = 0; j < 
ge
.
m_numRefPics
; j++)

1092 
½s
->
	`£tD–POC
(
j
,
ge
.
m_»ã»nûPics
[j]);

1093 
½s
->
	`£tU£d
(
j
,
ge
.
m_u£dByCu¼Pic
[j]);

1094 if(
ge
.
m_»ã»nûPics
[
j
]>0)

1096 
numPos
++;

1100 
numNeg
++;

1103 
½s
->
	`£tNumb”OfNeg©ivePiùu»s
(
numNeg
);

1104 
½s
->
	`£tNumb”OfPos™ivePiùu»s
(
numPos
);

1107 
½s
->
	`£tIÁ”RPSP»diùiÚ
(
ge
.
m_š‹rRPSP»diùiÚ
 > 0);

1108 
½s
->
	`£tD–RIdxMšus1
(0);

1109 
TComReã»nûPiùu»S‘
* 
RPSRef
 = 
i
>0 ? 
½sLi¡
->
	`g‘Reã»nûPiùu»S‘
(i-1): 
NULL
;

1111 ià(
ge
.
m_š‹rRPSP»diùiÚ
 == 2)

1113 
	`as£¹
 (
RPSRef
!=
NULL
);

1114 
IÁ
 
d–RPS
 = 
	`g‘GOPEÁry
(
i
-1).
m_POC
 - 
ge
.m_POC;

1115 
IÁ
 
numRefD–POC
 = 
RPSRef
->
	`g‘Numb”OfPiùu»s
();

1117 
½s
->
	`£tD–RPS
(
d–RPS
);

1118 
½s
->
	`£tNumRefIdc
(
numRefD–POC
+1);

1119 
IÁ
 
couÁ
=0;

1120 
IÁ
 
j
 = 0; j <ð
numRefD–POC
; j++ )

1122 
IÁ
 
RefD–POC
 = (
j
<
numRefD–POC
)? 
RPSRef
->
	`g‘D–POC
(j): 0;

1123 
½s
->
	`£tRefIdc
(
j
, 0);

1124 
IÁ
 
k
 = 0; k < 
½s
->
	`g‘Numb”OfPiùu»s
(); k++ )

1126 ià(
½s
->
	`g‘D–POC
(
k
è=ðÐ
RefD–POC
 + 
d–RPS
))

1128 
½s
->
	`£tRefIdc
(
j
, (½s->
	`g‘U£d
(
k
)?1:2));

1129 
couÁ
++;

1134 ià(
couÁ
 !ð
½s
->
	`g‘Numb”OfPiùu»s
())

1136 
	`´štf
("Warning: Unable fully…redict‡ll delta POCs usinghe„eference RPS index given inhe config file. Setting Inter RPSo false forhis RPS.\n");

1137 
½s
->
	`£tIÁ”RPSP»diùiÚ
(0);

1140 ià(
ge
.
m_š‹rRPSP»diùiÚ
 == 1)

1142 
	`as£¹
 (
RPSRef
!=
NULL
);

1143 
½s
->
	`£tD–RPS
(
ge
.
m_d–RPS
);

1144 
½s
->
	`£tNumRefIdc
(
ge
.
m_numRefIdc
);

1145 
IÁ
 
j
 = 0; j < 
ge
.
m_numRefIdc
; j++ )

1147 
½s
->
	`£tRefIdc
(
j
, 
ge
.
m_»fIdc
[j]);

1151 
numNeg
 = 0;

1152 
numPos
 = 0;

1153 
TComReã»nûPiùu»S‘
 
RPSTemp
;

1155 
IÁ
 
j
 = 0; j < 
ge
.
m_numRefIdc
; j++ )

1157 ià(
ge
.
m_»fIdc
[
j
])

1159 
IÁ
 
d–POC
 = 
ge
.
m_d–RPS
 + ((
j
 < 
RPSRef
->
	`g‘Numb”OfPiùu»s
())? RPSRef->
	`g‘D–POC
(j) : 0);

1160 
RPSTemp
.
	`£tD–POC
((
numNeg
+
numPos
),
d–POC
);

1161 
RPSTemp
.
	`£tU£d
((
numNeg
+
numPos
),
ge
.
m_»fIdc
[
j
]==1?1:0);

1162 ià(
d–POC
<0)

1164 
numNeg
++;

1168 
numPos
++;

1172 ià(
numNeg
 !ð
½s
->
	`g‘Numb”OfNeg©ivePiùu»s
())

1174 
	`´štf
("Warning:‚umber of‚egative…ictures in RPS is different between intra‡nd inter RPS specified inhe config file.\n");

1175 
½s
->
	`£tNumb”OfNeg©ivePiùu»s
(
numNeg
);

1176 
½s
->
	`£tNumb”OfPiùu»s
(
numNeg
+
numPos
);

1178 ià(
numPos
 !ð
½s
->
	`g‘Numb”OfPos™ivePiùu»s
())

1180 
	`´štf
("Warning:‚umber of…ositive…ictures in RPS is different between intra‡nd inter RPS specified inhe config file.\n");

1181 
½s
->
	`£tNumb”OfPos™ivePiùu»s
(
numPos
);

1182 
½s
->
	`£tNumb”OfPiùu»s
(
numNeg
+
numPos
);

1184 
RPSTemp
.
	`£tNumb”OfPiùu»s
(
numNeg
+
numPos
);

1185 
RPSTemp
.
	`£tNumb”OfNeg©ivePiùu»s
(
numNeg
);

1186 
RPSTemp
.
	`sÜtD–POC
();

1189 
IÁ
 
j
 = 0; j < 
ge
.
m_numRefIdc
; j++ )

1191 ià(
RPSTemp
.
	`g‘D–POC
(
j
è!ð
½s
->getDeltaPOC(j))

1193 
	`´štf
("Warning: delta POC is different between intra RPS‡nd inter RPS specified inhe config file.\n");

1194 
½s
->
	`£tD–POC
(
j
,
RPSTemp
.
	`g‘D–POC
(j));

1196 ià(
RPSTemp
.
	`g‘U£d
(
j
è!ð
½s
->getUsed(j))

1198 
	`´štf
("Warning: Used by Current in RPS is different between intra‡nd inter RPS specified inhe config file.\n");

1199 
½s
->
	`£tU£d
(
j
,
RPSTemp
.
	`g‘U£d
(j));

1206 ià(
isF›ldCodšg
)

1208 
½s
 = 
½sLi¡
->
	`g‘Reã»nûPiùu»S‘
(
	`g‘GOPSize
()+
m_exŒaRPSs
);

1209 
½s
->
	`£tNumb”OfPiùu»s
(1);

1210 
½s
->
	`£tNumb”OfNeg©ivePiùu»s
(1);

1211 
½s
->
	`£tNumb”OfPos™ivePiùu»s
(0);

1212 
½s
->
	`£tNumb”OfLÚg‹rmPiùu»s
(0);

1213 
½s
->
	`£tD–POC
(0,-1);

1214 
½s
->
	`£tPOC
(0,0);

1215 
½s
->
	`£tU£d
(0,
Œue
);

1216 
½s
->
	`£tIÁ”RPSP»diùiÚ
(
çl£
);

1217 
½s
->
	`£tD–RIdxMšus1
(0);

1218 
½s
->
	`£tD–RPS
(0);

1219 
½s
->
	`£tNumRefIdc
(0);

1221 
	}
}

1226 
Void
 
	gTEncTÝ
::
	$£ËùReã»nûPiùu»S‘
(
TComSliû
* 
¦iû
, 
IÁ
 
POCCu¼
, IÁ 
GOPid
 )

1228 
¦iû
->
	`£tRPSidx
(
GOPid
);

1230 
IÁ
 
exŒaNum
=
m_iGOPSize
;ƒxŒaNum<
m_exŒaRPSs
+m_iGOPSize;ƒxtraNum++)

1232 if(
m_uiIÁ¿P”iod
 > 0 && 
	`g‘DecodšgReäeshTy³
() > 0)

1234 
IÁ
 
POCIndex
 = 
POCCu¼
%
m_uiIÁ¿P”iod
;

1235 if(
POCIndex
 == 0)

1237 
POCIndex
 = 
m_uiIÁ¿P”iod
;

1239 if(
POCIndex
 =ð
m_GOPLi¡
[
exŒaNum
].
m_POC
)

1241 
¦iû
->
	`£tRPSidx
(
exŒaNum
);

1246 if(
POCCu¼
==
m_GOPLi¡
[
exŒaNum
].
m_POC
)

1248 
¦iû
->
	`£tRPSidx
(
exŒaNum
);

1253 if(
POCCu¼
 =ð1 && 
¦iû
->
	`g‘Pic
()->
	`isF›ld
())

1255 
¦iû
->
	`£tRPSidx
(
m_iGOPSize
+
m_exŒaRPSs
);

1258 cÚ¡ 
TComReã»nûPiùu»S‘
 *
½s
 = (
¦iû
->
	`g‘SPS
()->
	`g‘RPSLi¡
()->
	`g‘Reã»nûPiùu»S‘
(¦iû->
	`g‘RPSidx
()));

1259 
¦iû
->
	`£tRPS
(
½s
);

1260 
	}
}

1262 
IÁ
 
	gTEncTÝ
::
	$g‘Reã»nûPiùu»S‘IdxFÜSOP
(
IÁ
 
POCCu¼
, IÁ 
GOPid
 )

1264 
IÁ
 
½sIdx
 = 
GOPid
;

1266 
IÁ
 
exŒaNum
=
m_iGOPSize
;ƒxŒaNum<
m_exŒaRPSs
+m_iGOPSize;ƒxtraNum++)

1268 if(
m_uiIÁ¿P”iod
 > 0 && 
	`g‘DecodšgReäeshTy³
() > 0)

1270 
IÁ
 
POCIndex
 = 
POCCu¼
%
m_uiIÁ¿P”iod
;

1271 if(
POCIndex
 == 0)

1273 
POCIndex
 = 
m_uiIÁ¿P”iod
;

1275 if(
POCIndex
 =ð
m_GOPLi¡
[
exŒaNum
].
m_POC
)

1277 
½sIdx
 = 
exŒaNum
;

1282 if(
POCCu¼
==
m_GOPLi¡
[
exŒaNum
].
m_POC
)

1284 
½sIdx
 = 
exŒaNum
;

1289  
½sIdx
;

1290 
	}
}

1292 
Void
 
	gTEncTÝ
::
	$xIn™PPSfÜTžes
(
TComPPS
 &
µs
)

1294 
µs
.
	`£tTžeUnifÜmS·cšgFÏg
Ð
m_tžeUnifÜmS·cšgFÏg
 );

1295 
µs
.
	`£tNumTžeCÞumnsMšus1
Ð
m_iNumCÞumnsMšus1
 );

1296 
µs
.
	`£tNumTžeRowsMšus1
Ð
m_iNumRowsMšus1
 );

1297 ifÐ!
m_tžeUnifÜmS·cšgFÏg
 )

1299 
µs
.
	`£tTžeCÞumnWidth
Ð
m_tžeCÞumnWidth
 );

1300 
µs
.
	`£tTžeRowHeight
Ð
m_tžeRowHeight
 );

1302 
µs
.
	`£tLoÝFž‹rAüossTžesEÇbËdFÏg
Ð
m_loÝFž‹rAüossTžesEÇbËdFÏg
 );

1305 
	}
}

1307 
Void
 
	gTEncCfg
::
	$xCheckGSP¬am‘”s
()

1309 
IÁ
 
iWidthInCU
 = ( 
m_iSourûWidth
%
m_maxCUWidth
 ) ? m_iSourceWidth/m_maxCUWidth + 1 : m_iSourceWidth/m_maxCUWidth;

1310 
IÁ
 
iHeightInCU
 = ( 
m_iSourûHeight
%
m_maxCUHeight
 ) ? m_iSourceHeight/m_maxCUHeight + 1 : m_iSourceHeight/m_maxCUHeight;

1311 
UIÁ
 
uiCummuÏtiveCÞumnWidth
 = 0;

1312 
UIÁ
 
uiCummuÏtiveRowHeight
 = 0;

1315 ifÐ
m_iNumCÞumnsMšus1
 >ð(1<<(
LOG2_MAX_NUM_COLUMNS_MINUS1
+1)) )

1317 
	`´štf
( "The‚umber of columns is†argerhanhe maximum‡llowed‚umber of columns.\n" );

1318 
	`ex™
Ð
EXIT_FAILURE
 );

1321 ifÐ
m_iNumCÞumnsMšus1
 >ð
iWidthInCU
 )

1323 
	`´štf
( "The current…icture can‚ot have so many columns.\n" );

1324 
	`ex™
Ð
EXIT_FAILURE
 );

1327 ifÐ
m_iNumCÞumnsMšus1
 && !
m_tžeUnifÜmS·cšgFÏg
 )

1329 
IÁ
 
i
=0; i<
m_iNumCÞumnsMšus1
; i++)

1331 
uiCummuÏtiveCÞumnWidth
 +ð
m_tžeCÞumnWidth
[
i
];

1334 ifÐ
uiCummuÏtiveCÞumnWidth
 >ð
iWidthInCU
 )

1336 
	`´štf
( "The width ofhe column isoo†arge.\n" );

1337 
	`ex™
Ð
EXIT_FAILURE
 );

1342 ifÐ
m_iNumRowsMšus1
 >ð(1<<(
LOG2_MAX_NUM_ROWS_MINUS1
+1)) )

1344 
	`´štf
( "The‚umber of„ows is†argerhanhe maximum‡llowed‚umber of„ows.\n" );

1345 
	`ex™
Ð
EXIT_FAILURE
 );

1348 ifÐ
m_iNumRowsMšus1
 >ð
iHeightInCU
 )

1350 
	`´štf
( "The current…icture can‚ot have so many„ows.\n" );

1351 
	`ex™
Ð
EXIT_FAILURE
 );

1354 ifÐ
m_iNumRowsMšus1
 && !
m_tžeUnifÜmS·cšgFÏg
 )

1356 
IÁ
 
i
=0; i<
m_iNumRowsMšus1
; i++)

1358 
uiCummuÏtiveRowHeight
 +ð
m_tžeRowHeight
[
i
];

1361 ifÐ
uiCummuÏtiveRowHeight
 >ð
iHeightInCU
 )

1363 
	`´štf
( "The height ofhe„ow isoo†arge.\n" );

1364 
	`ex™
Ð
EXIT_FAILURE
 );

1367 
	}
}

1369 
Void
 
	gTEncTÝ
::
	$£tP¬amS‘Chªged
(
IÁ
 
¥sId
, IÁ 
µsId
)

1371 
m_µsM­
.
	`£tChªgedFÏg
(
µsId
);

1372 
m_¥sM­
.
	`£tChªgedFÏg
(
¥sId
);

1373 
	}
}

1375 
BoÞ
 
	gTEncTÝ
::
	$PPSN“dsWr™šg
(
IÁ
 
µsId
)

1377 
BoÞ
 
bChªged
=
m_µsM­
.
	`g‘ChªgedFÏg
(
µsId
);

1378 
m_µsM­
.
	`þ—rChªgedFÏg
(
µsId
);

1379  
bChªged
;

1380 
	}
}

1382 
BoÞ
 
	gTEncTÝ
::
	$SPSN“dsWr™šg
(
IÁ
 
¥sId
)

1384 
BoÞ
 
bChªged
=
m_¥sM­
.
	`g‘ChªgedFÏg
(
¥sId
);

1385 
m_¥sM­
.
	`þ—rChªgedFÏg
(
¥sId
);

1386  
bChªged
;

1387 
	}
}

1389 
IÁ
 
	gTEncCfg
::
	$g‘QPFÜPiùu»
(cÚ¡ 
UIÁ
 
gÝIndex
, cÚ¡ 
TComSliû
 *
pSliû
) const

1391 cÚ¡ 
IÁ
 
lumaQpBDOff£t
 = 
pSliû
->
	`g‘SPS
()->
	`g‘QpBDOff£t
(
CHANNEL_TYPE_LUMA
);

1392 
IÁ
 
qp
;

1394 ià(
	`g‘Co¡Mode
()==
COST_LOSSLESS_CODING
)

1396 
qp
=
LOSSLESS_AND_MIXED_LOSSLESS_RD_COST_TEST_QP
;

1400 cÚ¡ 
SliûTy³
 
¦iûTy³
=
pSliû
->
	`g‘SliûTy³
();

1402 
qp
 = 
	`g‘Ba£QP
();

1405 cÚ¡ 
IÁ
* 
pdQPs
 = 
	`g‘dQPs
();

1406 iàÐ
pdQPs
 )

1408 
qp
 +ð
pdQPs
[ 
pSliû
->
	`g‘POC
() ];

1411 if(
¦iûTy³
==
I_SLICE
)

1413 
qp
 +ð
	`g‘IÁ¿QPOff£t
();

1418 ià(!(Ð
	`g‘MaxD–QP
(è=ð0 ) && (!
	`g‘LumaLev–ToD–QPM­pšg
().
	`isEÇbËd
()è&& (
qp
 =ð-
lumaQpBDOff£t
 ) && (
pSliû
->
	`g‘PPS
()->
	`g‘T¿nsquªtBy·ssEÇbËdFÏg
())))

1420 cÚ¡ 
GOPEÁry
 &
gÝEÁry
=
	`g‘GOPEÁry
(
gÝIndex
);

1422 
qp
 +=
gÝEÁry
.
m_QPOff£t
;

1425 
DoubË
 
dqpOff£t
=
qp
*
gÝEÁry
.
m_QPOff£tMod–SÿË
+gÝEÁry.
m_QPOff£tMod–Off£t
+0.5;

1426 
IÁ
 
qpOff£t
 = (IÁ)
	`æoÜ
(
Cl3
<
DoubË
>(0.0, 3.0, 
dqpOff£t
));

1427 
qp
 +ð
qpOff£t
 ;

1432 
qp
 = 
	`Cl3
Ð-
lumaQpBDOff£t
, 
MAX_QP
, qp );

1433  
qp
;

1434 
	}
}

	@source/Lib/TLibEncoder/TEncTop.h

38 #iâdeà
__TENCTOP__


39 
	#__TENCTOP__


	)

42 
	~"TLibCommÚ/TComLi¡.h
"

43 
	~"TLibCommÚ/TComP»diùiÚ.h
"

44 
	~"TLibCommÚ/TComTrQuªt.h
"

45 
	~"TLibCommÚ/TComLoÝFž‹r.h
"

46 
	~"TLibCommÚ/AcûssUn™.h
"

48 
	~"Utž™›s/TVideoIOYuv.h
"

50 
	~"TEncCfg.h
"

51 
	~"TEncGOP.h
"

52 
	~"TEncSliû.h
"

53 
	~"TEncEÁrÝy.h
"

54 
	~"TEncCavlc.h
"

55 
	~"TEncSbac.h
"

56 
	~"TEncS—rch.h
"

57 
	~"TEncSam¶eAd­tiveOff£t.h
"

58 
	~"TEncP»ª®yz”.h
"

59 
	~"TEncR©eCŒl.h
"

68 þas 
	cTEncTÝ
 : 
public
 
TEncCfg


70 
´iv©e
:

72 
IÁ
 
m_iPOCLa¡
;

73 
IÁ
 
	mm_iNumPicRcvd
;

74 
UIÁ
 
	mm_uiNumAÎPicCoded
;

75 
	mTComLi¡
<
	mTComPic
*> 
	mm_cLi¡Pic
;

78 
TEncS—rch
 
	mm_cS—rch
;

80 
TEncCavlc
* 
	mm_pcCavlcCod”
;

82 
TComTrQuªt
 
	mm_cTrQuªt
;

83 
TComLoÝFž‹r
 
	mm_cLoÝFž‹r
;

84 
TEncSam¶eAd­tiveOff£t
 
	mm_cEncSAO
;

85 
TEncEÁrÝy
 
	mm_cEÁrÝyCod”
;

86 
TEncCavlc
 
	mm_cCavlcCod”
;

87 
TEncSbac
 
	mm_cSbacCod”
;

88 
TEncBšCABAC
 
	mm_cBšCod”CABAC
;

91 
TEncGOP
 
	mm_cGOPEncod”
;

92 
TEncSliû
 
	mm_cSliûEncod”
;

93 
TEncCu
 
	mm_cCuEncod”
;

95 
	mP¬am‘”S‘M­
<
	mTComSPS
> 
	mm_¥sM­
;

96 
	mP¬am‘”S‘M­
<
	mTComPPS
> 
	mm_µsM­
;

98 
TComRdCo¡
 
	mm_cRdCo¡
;

99 
TEncSbac
*** 
	mm_µpcRDSbacCod”
;

100 
TEncSbac
 
	mm_cRDGoOnSbacCod”
;

101 #ià
FAST_BIT_EST


102 
TEncBšCABACCouÁ”
*** 
	mm_µpcBšCod”CABAC
;

103 
TEncBšCABACCouÁ”
 
	mm_cRDGoOnBšCod”CABAC
;

105 
TEncBšCABAC
*** 
	mm_µpcBšCod”CABAC
;

106 
TEncBšCABAC
 
	mm_cRDGoOnBšCod”CABAC
;

110 
TEncP»ª®yz”
 
	mm_cP»ª®yz”
;

112 
TEncR©eCŒl
 
	mm_cR©eCŒl
;

114 
	m´Ùeùed
:

115 
Void
 
xG‘NewPicBufãr
 ( 
TComPic
*& 
½cPic
, 
IÁ
 
µsId
 );

116 
Void
 
xIn™VPS
 (
TComVPS
 &
vps
, cÚ¡ 
TComSPS
 &
¥s
);

117 
Void
 
xIn™SPS
 (
TComSPS
 &
¥s
);

118 
Void
 
xIn™PPS
 (
TComPPS
 &
µs
, cÚ¡ 
TComSPS
 &
¥s
);

119 
Void
 
xIn™SÿlšgLi¡s
 (
TComSPS
 &
¥s
, 
TComPPS
 &
µs
);

120 
Void
 
xIn™HrdP¬am‘”s
(
TComSPS
 &
¥s
);

122 
Void
 
xIn™PPSfÜTžes
 (
TComPPS
 &
µs
);

123 
Void
 
xIn™RPS
 (
TComSPS
 &
¥s
, 
BoÞ
 
isF›ldCodšg
);

125 
	mpublic
:

126 
TEncTÝ
();

127 
	mvœtu®
 ~
TEncTÝ
();

129 
Void
 
ü—‹
 ();

130 
Void
 
de¡roy
 ();

131 
Void
 
š™
 (
BoÞ
 
isF›ldCodšg
);

132 
Void
 
d–‘ePicBufãr
 ();

138 
	mTComLi¡
<
	mTComPic
*>* 
	$g‘Li¡Pic
 (è{  &
m_cLi¡Pic
; }

139 
TEncS—rch
* 
	$g‘P»dS—rch
 (è{  &
m_cS—rch
; 
	}
}

141 
TComTrQuªt
* 
	$g‘TrQuªt
 (è{  &
m_cTrQuªt
; 
	}
}

142 
TComLoÝFž‹r
* 
	$g‘LoÝFž‹r
 (è{  &
m_cLoÝFž‹r
; 
	}
}

143 
TEncSam¶eAd­tiveOff£t
* 
	$g‘SAO
 (è{  &
m_cEncSAO
; 
	}
}

144 
TEncGOP
* 
	$g‘GOPEncod”
 (è{  &
m_cGOPEncod”
; 
	}
}

145 
TEncSliû
* 
	$g‘SliûEncod”
 (è{  &
m_cSliûEncod”
; 
	}
}

146 
TEncCu
* 
	$g‘CuEncod”
 (è{  &
m_cCuEncod”
; 
	}
}

147 
TEncEÁrÝy
* 
	$g‘EÁrÝyCod”
 (è{  &
m_cEÁrÝyCod”
; 
	}
}

148 
TEncCavlc
* 
	$g‘CavlcCod”
 (è{  &
m_cCavlcCod”
; 
	}
}

149 
TEncSbac
* 
	$g‘SbacCod”
 (è{  &
m_cSbacCod”
; 
	}
}

150 
TEncBšCABAC
* 
	$g‘BšCABAC
 (è{  &
m_cBšCod”CABAC
; 
	}
}

152 
TComRdCo¡
* 
	$g‘RdCo¡
 (è{  &
m_cRdCo¡
; 
	}
}

153 
TEncSbac
*** 
	$g‘RDSbacCod”
 (è{  
m_µpcRDSbacCod”
; 
	}
}

154 
TEncSbac
* 
	$g‘RDGoOnSbacCod”
 (è{  &
m_cRDGoOnSbacCod”
; 
	}
}

155 
TEncR©eCŒl
* 
	$g‘R©eCŒl
 (è{  &
m_cR©eCŒl
; 
	}
}

156 
Void
 
£ËùReã»nûPiùu»S‘
(
TComSliû
* 
¦iû
, 
IÁ
 
POCCu¼
, IÁ 
GOPid
 );

157 
IÁ
 
g‘Reã»nûPiùu»S‘IdxFÜSOP
(IÁ 
POCCu¼
, IÁ 
GOPid
 );

159 
Void
 
£tP¬amS‘Chªged
(
IÁ
 
¥sId
, IÁ 
µsId
);

160 
BoÞ
 
PPSN“dsWr™šg
(
IÁ
 
µsId
);

161 
BoÞ
 
SPSN“dsWr™šg
(
IÁ
 
¥sId
);

168 
Void
 
’code
Ð
BoÞ
 
bEos
,

169 
TComPicYuv
* 
pcPicYuvOrg
,

170 
TComPicYuv
* 
pcPicYuvTrueOrg
,

171 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢rCSC
,

172 
TComLi¡
<
TComPicYuv
*>& 
rcLi¡PicYuvRecOut
,

173 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sOut
, 
IÁ
& 
iNumEncoded
 );

176 
Void
 
’code
Ð
BoÞ
 
bEos
, 
TComPicYuv
* 
pcPicYuvOrg
,

177 
TComPicYuv
* 
pcPicYuvTrueOrg
,

178 cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, cÚ¡ IÅutCÞourS·ûCÚv”siÚ 
¢rCSC
,

179 
TComLi¡
<
TComPicYuv
*>& 
rcLi¡PicYuvRecOut
,

180 
¡d
::
li¡
<
AcûssUn™
>& 
acûssUn™sOut
, 
IÁ
& 
iNumEncoded
, 
BoÞ
 
isTff
);

182 
	gTEncAÇlyze
::
OuutLogCÚŒÞ
 
	$g‘OuutLogCÚŒÞ
() const

184 
TEncAÇlyze
::
OuutLogCÚŒÞ
 
ouutLogCŒl
;

185 
ouutLogCŒl
.
´štF¿meMSE
=
m_´štF¿meMSE
;

186 
ouutLogCŒl
.
´štMSEBa£dSNR
=
m_´štMSEBa£dSequ’ûPSNR
;

187 
ouutLogCŒl
.
´štMSSSIM
=
m_´štMSSSIM
;

188 
ouutLogCŒl
.
´štSequ’ûMSE
=
m_´štSequ’ûMSE
;

189 
ouutLogCŒl
.
´štXPSNR
=
m_bXPSNREÇbËFÏg
;

190 
ouutLogCŒl
.
´štHexP”POCPSNRs
=
m_´štHexP¢r
;

191  
ouutLogCŒl
;

192 
	}
}

194 
Void
 
	$´štSumm¬y
(
BoÞ
 
isF›ld
)

196 
m_cGOPEncod”
.
	`´štOutSumm¬y
 (
m_uiNumAÎPicCoded
, 
isF›ld
, 
	`g‘OuutLogCÚŒÞ
(), 
m_¥sM­
.
	`g‘Fœ¡PS
()->
	`g‘B™D•ths
());

197 
	}
}

	@source/Lib/TLibEncoder/WeightPredAnalysis.cpp

38 
	~"../TLibCommÚ/CommÚDef.h
"

39 
	~"../TLibCommÚ/TComSliû.h
"

40 
	~"../TLibCommÚ/TComPic.h
"

41 
	~"../TLibCommÚ/TComPicYuv.h
"

42 
	~"WeightP»dAÇlysis.h
"

43 
	~<lim™s
>

45 cÚ¡ 
DoubË
 
	gWEIGHT_PRED_SAD_RELATIVE_TO_NON_WEIGHT_PRED_SAD
=0.99;

49 
IÁ64
 
xC®cSADv®ueWP
(cÚ¡ 
IÁ
 
b™D•th
,

50 cÚ¡ 
P–
 *
pOrgP–
,

51 cÚ¡ 
P–
 *
pRefP–
,

52 cÚ¡ 
IÁ
 
width
,

53 cÚ¡ 
IÁ
 
height
,

54 cÚ¡ 
IÁ
 
ÜgSŒide
,

55 cÚ¡ 
IÁ
 
»fSŒide
,

56 cÚ¡ 
IÁ
 
log2D’om
,

57 cÚ¡ 
IÁ
 
weight
,

58 cÚ¡ 
IÁ
 
off£t
,

59 cÚ¡ 
BoÞ
 
u£HighP»cisiÚ
);

63 
IÁ64
 
xC®cSADv®ueWPO±iÚ®Cl
(cÚ¡ 
IÁ
 
b™D•th
,

64 cÚ¡ 
P–
 *
pOrgP–
,

65 cÚ¡ 
P–
 *
pRefP–
,

66 cÚ¡ 
IÁ
 
width
,

67 cÚ¡ 
IÁ
 
height
,

68 cÚ¡ 
IÁ
 
ÜgSŒide
,

69 cÚ¡ 
IÁ
 
»fSŒide
,

70 cÚ¡ 
IÁ
 
log2D’om
,

71 cÚ¡ 
IÁ
 
weight
,

72 cÚ¡ 
IÁ
 
off£t
,

73 cÚ¡ 
BoÞ
 
u£HighP»cisiÚ
,

74 cÚ¡ 
BoÞ
 
þ³d
);

82 
Void
 
xC®cHi¡og¿m
(cÚ¡ 
P–
 *
pP–
,

83 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿m
,

84 cÚ¡ 
IÁ
 
width
,

85 cÚ¡ 
IÁ
 
height
,

86 cÚ¡ 
IÁ
 
¡ride
,

87 cÚ¡ 
IÁ
 
maxP–
)

89 
	ghi¡og¿m
.
þ—r
();

90 
	ghi¡og¿m
.
»size
(
maxP–
);

91  
IÁ
 
	gy
 = 0; y < 
	gheight
; y++ )

93  
IÁ
 
	gx
 = 0; x < 
	gwidth
; x++ )

95 cÚ¡ 
P–
 
	gv
=
pP–
[
x
];

96 
	ghi¡og¿m
[
v
<0?0:(v>=
maxP–
)?maxPel-1:v]++;

98 
	gpP–
 +ð
¡ride
;

103 
Di¡ÜtiÚ
 
xC®cHi¡Di¡ÜtiÚ
 (cÚ¡ 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿m0
,

104 cÚ¡ 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿m1
)

106 
Di¡ÜtiÚ
 
di¡ÜtiÚ
 = 0;

107 
as£¹
(
hi¡og¿m0
.
size
()==
hi¡og¿m1
.size());

108 cÚ¡ 
IÁ
 
	gnumEËm’ts
=IÁ(
hi¡og¿m0
.
size
());

111 
IÁ
 
	gi
 = 0; i <ð
numEËm’ts
; i++)

113 
	gdi¡ÜtiÚ
 +ð(
Di¡ÜtiÚ
)(
abs
(
hi¡og¿m0
[
i
] - 
hi¡og¿m1
[i]));

116  
	gdi¡ÜtiÚ
;

120 
xSÿËHi¡og¿m
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿mIÅut
,

121 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿mOuut
,

122 cÚ¡ 
IÁ
 
b™D•th
,

123 cÚ¡ 
IÁ
 
log2D’om
,

124 cÚ¡ 
IÁ
 
weight
,

125 cÚ¡ 
IÁ
 
off£t
,

126 cÚ¡ 
BoÞ
 
bHighP»cisiÚ
)

128 
as£¹
(&
hi¡og¿mIÅut
 !ð&
hi¡og¿mOuut
);

129 cÚ¡ 
IÁ
 
	gnumEËm’ts
=IÁ(
hi¡og¿mIÅut
.
size
());

130 
	ghi¡og¿mOuut
.
þ—r
();

131 
	ghi¡og¿mOuut
.
»size
(
numEËm’ts
);

133 cÚ¡ 
IÁ64
 
	giR—lLog2D’om
 = 
bHighP»cisiÚ
 ? 0 : (
b™D•th
 - 8);

134 cÚ¡ 
IÁ64
 
	giR—lOff£t
 = ((IÁ64)
off£t
)<<
iR—lLog2D’om
;

136 cÚ¡ 
IÁ
 
	gdivOff£t
 = 
log2D’om
 == 0 ? 0 : 1 << (log2Denom - 1);

141 
IÁ
 
	gi
 = 0; i < 
	gnumEËm’ts
; i++)

143 cÚ¡ 
IÁ
 
	gj
 = 
Cl3
(0, 
numEËm’ts
 - 1, (IÁ)(((
weight
 * 
i
 + 
divOff£t
è>> 
log2D’om
è+ 
iR—lOff£t
));

144 
	ghi¡og¿mOuut
[
j
] +ð
hi¡og¿mIÅut
[
i
];

149 
Di¡ÜtiÚ
 
xS—rchHi¡og¿m
(cÚ¡ 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿mSourû
,

150 cÚ¡ 
¡d
::
veùÜ
<
IÁ
> &
hi¡og¿mRef
,

151 
¡d
::
veùÜ
<
IÁ
> &
ouutHi¡og¿m
,

152 cÚ¡ 
IÁ
 
b™D•th
,

153 cÚ¡ 
IÁ
 
log2D’om
,

154 
IÁ
 &
weightToUpd©e
,

155 
IÁ
 &
off£tToUpd©e
,

156 cÚ¡ 
BoÞ
 
bHighP»cisiÚ
,

157 cÚ¡ 
CompÚ’tID
 
compID
)

159 cÚ¡ 
IÁ
 
	gš™ŸlWeight
 = 
weightToUpd©e
;

160 cÚ¡ 
IÁ
 
	gš™ŸlOff£t
 = 
off£tToUpd©e
;

161 cÚ¡ 
IÁ
 
	gweightRªge
 = 10;

162 cÚ¡ 
IÁ
 
	goff£tRªge
 = 10;

163 cÚ¡ 
IÁ
 
	gmaxOff£t
 = 1 << ((
bHighP»cisiÚ
 =ð
Œue
è? (
b™D•th
 - 1) : 7);

164 cÚ¡ 
IÁ
 
	g¿nge
 = 
bHighP»cisiÚ
 ? (1<<
b™D•th
) / 2 : 128;

165 cÚ¡ 
IÁ
 
	gdeçuÉWeight
 = (1<<
log2D’om
);

166 cÚ¡ 
IÁ
 
	gmšS—rchWeight
 = 
¡d
::
max
<IÁ>(
š™ŸlWeight
 - 
weightRªge
, 
	gdeçuÉWeight
 - 
	g¿nge
);

167 cÚ¡ 
IÁ
 
	gmaxS—rchWeight
 = 
¡d
::
mš
<IÁ>(
š™ŸlWeight
 + 
weightRªge
+1, 
	gdeçuÉWeight
 + 
	g¿nge
);

169 
Di¡ÜtiÚ
 
	gmšDi¡ÜtiÚ
 = 
¡d
::
num”ic_lim™s
<Di¡ÜtiÚ>::
max
();

170 
IÁ
 
	gbe¡Weight
 = 
š™ŸlWeight
;

171 
IÁ
 
	gbe¡Off£t
 = 
š™ŸlOff£t
;

173 
IÁ
 
	g£¬chWeight
 = 
mšS—rchWeight
; s—rchWeighˆ< 
	gmaxS—rchWeight
; searchWeight++)

175 ià(
	gcompID
 =ð
COMPONENT_Y
)

177 
IÁ
 
£¬chOff£t
 = 
¡d
::
max
<IÁ>(
š™ŸlOff£t
 - 
off£tRªge
, -
	gmaxOff£t
);

178 
	g£¬chOff£t
 <ð
š™ŸlOff£t
 + 
off£tRªge
 && 
£¬chOff£t
<=(
maxOff£t
-1);

179 
	g£¬chOff£t
++)

181 
xSÿËHi¡og¿m
(
hi¡og¿mRef
, 
ouutHi¡og¿m
, 
b™D•th
, 
log2D’om
, 
£¬chWeight
, 
£¬chOff£t
, 
bHighP»cisiÚ
);

182 cÚ¡ 
Di¡ÜtiÚ
 
	gdi¡ÜtiÚ
 = 
xC®cHi¡Di¡ÜtiÚ
(
hi¡og¿mSourû
, 
ouutHi¡og¿m
);

184 ià(
	gdi¡ÜtiÚ
 < 
	gmšDi¡ÜtiÚ
)

186 
	gmšDi¡ÜtiÚ
 = 
di¡ÜtiÚ
;

187 
	gbe¡Weight
 = 
£¬chWeight
;

188 
	gbe¡Off£t
 = 
£¬chOff£t
;

194 cÚ¡ 
IÁ
 
	g´ed
 = ( 
maxOff£t
 - ( ( maxOff£t*
£¬chWeight
)>>(
log2D’om
) ) );

196 
IÁ
 
	g£¬chOff£t
 = 
š™ŸlOff£t
 - 
off£tRªge
; searchOffset <= initialOffset + offsetRange; searchOffset++)

198 cÚ¡ 
IÁ
 
	gd–Off£t
 = 
Cl3
Ð-4*
maxOff£t
, 4*maxOff£t-1, (
£¬chOff£t
 - 
´ed
) );

199 cÚ¡ 
IÁ
 
	gþ³dOff£t
 = 
Cl3
Ð-1*
maxOff£t
, 1*maxOff£t-1, (
d–Off£t
 + 
´ed
) );

200 
xSÿËHi¡og¿m
(
hi¡og¿mRef
, 
ouutHi¡og¿m
, 
b™D•th
, 
log2D’om
, 
£¬chWeight
, 
þ³dOff£t
, 
bHighP»cisiÚ
);

201 cÚ¡ 
Di¡ÜtiÚ
 
	gdi¡ÜtiÚ
 = 
xC®cHi¡Di¡ÜtiÚ
(
hi¡og¿mSourû
, 
ouutHi¡og¿m
);

203 ià(
	gdi¡ÜtiÚ
 < 
	gmšDi¡ÜtiÚ
)

205 
	gmšDi¡ÜtiÚ
 = 
di¡ÜtiÚ
;

206 
	gbe¡Weight
 = 
£¬chWeight
;

207 
	gbe¡Off£t
 = 
þ³dOff£t
;

213 
	gweightToUpd©e
 = 
be¡Weight
;

214 
	goff£tToUpd©e
 = 
be¡Off£t
;

217 
xSÿËHi¡og¿m
(
hi¡og¿mRef
, 
ouutHi¡og¿m
, 
b™D•th
, 
log2D’om
, 
be¡Weight
, 
be¡Off£t
, 
bHighP»cisiÚ
);

219  
	gmšDi¡ÜtiÚ
;

226 
	gWeightP»dAÇlysis
::
	$WeightP»dAÇlysis
()

228  
UIÁ
 
l¡
 =0 ;†¡<
NUM_REF_PIC_LIST_01
 ;†st++ )

230  
IÁ
 
»fIdx
=0 ;„efIdx<
MAX_NUM_REF
 ;„efIdx++ )

232  
IÁ
 
comp
=0 ; comp<
MAX_NUM_COMPONENT
 ;comp++ )

234 
WPSÿlšgP¬am
 *
pwp
 = &(
m_wp
[
l¡
][
»fIdx
][
comp
]);

235 
pwp
->
bP»£ÁFÏg
 = 
çl£
;

236 
pwp
->
uiLog2WeightD’om
 = 0;

237 
pwp
->
iWeight
 = 1;

238 
pwp
->
iOff£t
 = 0;

242 
	}
}

246 
Void
 
	gWeightP»dAÇlysis
::
	$xC®cACDCP¬amSliû
(
TComSliû
 *cÚ¡ 
¦iû
)

249 
TComPicYuv
* 
pPic
 = 
¦iû
->
	`g‘Pic
()->
	`g‘PicYuvOrg
();

251 
WPACDCP¬am
 
weightACDCP¬am
[
MAX_NUM_COMPONENT
];

253 
IÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); componentIndex++)

255 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
compÚ’tIndex
);

259 cÚ¡ 
IÁ
 
¡ride
 = 
pPic
->
	`g‘SŒide
(
compID
);

260 cÚ¡ 
IÁ
 
width
 = 
pPic
->
	`g‘Width
(
compID
);

261 cÚ¡ 
IÁ
 
height
 = 
pPic
->
	`g‘Height
(
compID
);

263 cÚ¡ 
IÁ
 
§m¶e
 = 
width
*
height
;

265 
IÁ64
 
ÜgDC
 = 0;

267 cÚ¡ 
P–
 *
pP–
 = 
pPic
->
	`g‘Addr
(
compID
);

269 
IÁ
 
y
 = 0; y < 
height
; y++, 
pP–
+=
¡ride
 )

271 
IÁ
 
x
 = 0; x < 
width
; x++ )

273 
ÜgDC
 +ð(
IÁ
)Ð
pP–
[
x
] );

278 cÚ¡ 
IÁ64
 
ÜgNÜmDC
 = ((
ÜgDC
+(
§m¶e
>>1)) / sample);

280 
IÁ64
 
ÜgAC
 = 0;

282 cÚ¡ 
P–
 *
pP–
 = 
pPic
->
	`g‘Addr
(
compID
);

284 
IÁ
 
y
 = 0; y < 
height
; y++, 
pP–
 +ð
¡ride
 )

286 
IÁ
 
x
 = 0; x < 
width
; x++ )

288 
ÜgAC
 +ð
	`abs
Ð(
IÁ
)
pP–
[
x
] - (IÁ)
ÜgNÜmDC
 );

293 cÚ¡ 
IÁ
 
fixedB™Shiá
 = (
¦iû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
())?
RExt__PREDICTION_WEIGHTING_ANALYSIS_DC_PRECISION
:0;

294 
weightACDCP¬am
[
compID
].
iDC
 = (((
ÜgDC
<<
fixedB™Shiá
)+(
§m¶e
>>1)) / sample);

295 
weightACDCP¬am
[
compID
].
iAC
 = 
ÜgAC
;

298 
¦iû
->
	`£tWpAcDcP¬am
(
weightACDCP¬am
);

299 
	}
}

303 
Void
 
	gWeightP»dAÇlysis
::
	$xCheckWPEÇbË
(
TComSliû
 *cÚ¡ 
¦iû
)

305 cÚ¡ 
TComPicYuv
 *
pPic
 = 
¦iû
->
	`g‘Pic
()->
	`g‘PicYuvOrg
();

307 
IÁ
 
´e£ÁCÁ
 = 0;

308  
UIÁ
 
l¡
=0 ;†¡<
NUM_REF_PIC_LIST_01
 ;†st++ )

310  
IÁ
 
»fIdx
=0 ;„efIdx<
MAX_NUM_REF
 ;„efIdx++ )

312 
IÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); componentIndex++)

314 
WPSÿlšgP¬am
 *
pwp
 = &(
m_wp
[
l¡
][
»fIdx
][
compÚ’tIndex
]);

315 
´e£ÁCÁ
 +ð(
IÁ
)
pwp
->
bP»£ÁFÏg
;

320 if(
´e£ÁCÁ
==0)

322 
¦iû
->
	`£tTe¡WeightP»d
(
çl£
);

323 
¦iû
->
	`£tTe¡WeightBiP»d
(
çl£
);

325  
UIÁ
 
l¡
=0 ;†¡<
NUM_REF_PIC_LIST_01
 ;†st++ )

327  
IÁ
 
»fIdx
=0 ;„efIdx<
MAX_NUM_REF
 ;„efIdx++ )

329 
IÁ
 
compÚ’tIndex
 = 0; compÚ’tIndex < 
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); componentIndex++)

331 
WPSÿlšgP¬am
 *
pwp
 = &(
m_wp
[
l¡
][
»fIdx
][
compÚ’tIndex
]);

333 
pwp
->
bP»£ÁFÏg
 = 
çl£
;

334 
pwp
->
uiLog2WeightD’om
 = 0;

335 
pwp
->
iWeight
 = 1;

336 
pwp
->
iOff£t
 = 0;

340 
¦iû
->
	`£tWpSÿlšg
Ð
m_wp
 );

344 
¦iû
->
	`£tTe¡WeightP»d
 (¦iû->
	`g‘PPS
()->
	`g‘U£WP
());

345 
¦iû
->
	`£tTe¡WeightBiP»d
(¦iû->
	`g‘PPS
()->
	`g‘WPBiP»d
());

347 
	}
}

351 
Void
 
	gWeightP»dAÇlysis
::
	$xE¡im©eWPP¬amSliû
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
Weigh‹dP»diùiÚM‘hod
 
m‘hod
)

353 
IÁ
 
iD’om
 = 6;

354 
BoÞ
 
v®idRªgeFÏg
 = 
çl£
;

356 if(
¦iû
->
	`g‘NumRefIdx
(
REF_PIC_LIST_0
)>3)

358 
iD’om
 = 7;

363 
v®idRªgeFÏg
 = 
	`xUpd©šgWPP¬am‘”s
(
¦iû
, 
iD’om
);

364 ià(!
v®idRªgeFÏg
)

366 
iD’om
--;

368 } 
v®idRªgeFÏg
 =ð
çl£
);

372 
m‘hod
)

374 
WP_PER_PICTURE_WITH_SIMPLE_DC_COMBINED_COMPONENT
:

375 
	`xS–eùWP
(
¦iû
, 
iD’om
);

377 
WP_PER_PICTURE_WITH_SIMPLE_DC_PER_COMPONENT
:

378 
	`xS–eùWPHi¡ExtCl
(
¦iû
, 
iD’om
, 
çl£
, false, false);

380 
WP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT
:

381 
	`xS–eùWPHi¡ExtCl
(
¦iû
, 
iD’om
, 
çl£
, f®£, 
Œue
);

383 
WP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING
:

384 
	`xS–eùWPHi¡ExtCl
(
¦iû
, 
iD’om
, 
çl£
, 
Œue
,rue);

386 
WP_PER_PICTURE_WITH_HISTOGRAM_AND_PER_COMPONENT_AND_CLIPPING_AND_EXTENSION
:

387 
	`xS–eùWPHi¡ExtCl
(
¦iû
, 
iD’om
, 
Œue
,rue,rue);

390 
	`as£¹
(0);

391 
	`ex™
(1);

394 
¦iû
->
	`£tWpSÿlšg
Ð
m_wp
 );

395 
	}
}

399 
BoÞ
 
	gWeightP»dAÇlysis
::
	$xUpd©šgWPP¬am‘”s
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
)

401 cÚ¡ 
IÁ
 
numComp
 = 
¦iû
->
	`g‘Pic
()->
	`g‘PicYuvOrg
()->
	`g‘Numb”V®idCompÚ’ts
();

402 cÚ¡ 
BoÞ
 
bU£HighP»cisiÚWeightšg
 = 
¦iû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
();

403 cÚ¡ 
IÁ
 
numP»dDœ
 = 
¦iû
->
	`isIÁ”P
() ? 1 : 2;

405 
	`as£¹
 (
numP»dDœ
 <ð
	`IÁ
(
NUM_REF_PIC_LIST_01
));

407  
IÁ
 
»fLi¡
 = 0;„efLi¡ < 
numP»dDœ
;„efList++ )

409 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
 = ( 
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

411  
IÁ
 
»fIdxTemp
 = 0;„efIdxTem°< 
¦iû
->
	`g‘NumRefIdx
(
eRefPicLi¡
);„efIdxTemp++ )

413 
WPACDCP¬am
 *
cu¼WeightACDCP¬am
, *
»fWeightACDCP¬am
;

414 
¦iû
->
	`g‘WpAcDcP¬am
(
cu¼WeightACDCP¬am
);

415 
¦iû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdxTemp
)->
	`g‘Sliû
(0)->
	`g‘WpAcDcP¬am
(
»fWeightACDCP¬am
);

417  
IÁ
 
comp
 = 0; com°< 
numComp
; comp++ )

419 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

420 cÚ¡ 
IÁ
 
b™D•th
 = 
¦iû
->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

421 cÚ¡ 
IÁ
 
¿nge
 = 
bU£HighP»cisiÚWeightšg
 ? (1<<
b™D•th
)/2 : 128;

422 cÚ¡ 
IÁ
 
»®Log2D’om
 = 
log2D’om
 + (
bU£HighP»cisiÚWeightšg
 ? 
RExt__PREDICTION_WEIGHTING_ANALYSIS_DC_PRECISION
 : (
b™D•th
 - 8));

423 cÚ¡ 
IÁ
 
»®Off£t
 = ((IÁ)1<<(
»®Log2D’om
-1));

426 cÚ¡ 
IÁ64
 
cu¼DC
 = 
cu¼WeightACDCP¬am
[
comp
].
iDC
;

427 cÚ¡ 
IÁ64
 
cu¼AC
 = 
cu¼WeightACDCP¬am
[
comp
].
iAC
;

429 cÚ¡ 
IÁ64
 
»fDC
 = 
»fWeightACDCP¬am
[
comp
].
iDC
;

430 cÚ¡ 
IÁ64
 
»fAC
 = 
»fWeightACDCP¬am
[
comp
].
iAC
;

433 cÚ¡ 
DoubË
 
dWeight
 = (
»fAC
==0è? (DoubË)1.0 : 
	`Cl3
Ð-16.0, 15.0, ((DoubË)
cu¼AC
 / (Double)refAC) );

434 cÚ¡ 
IÁ
 
weight
 = (IÁ)Ð0.5 + 
dWeight
 * (
DoubË
)(1<<
log2D’om
) );

435 cÚ¡ 
IÁ
 
off£t
 = (IÁ)Ð((
cu¼DC
<<
log2D’om
è- ((
IÁ64
)
weight
 * 
»fDC
è+ (IÁ64)
»®Off£t
è>> 
»®Log2D’om
 );

437 
IÁ
 
þ³dOff£t
;

438 if(
	`isChroma
(
compID
))

440 cÚ¡ 
IÁ
 
´ed
 = ( 
¿nge
 - ( („ªge*
weight
)>>(
log2D’om
) ) );

441 cÚ¡ 
IÁ
 
d–Off£t
 = 
	`Cl3
Ð-4*
¿nge
, 4*¿nge-1, (
off£t
 - 
´ed
) );

443 
þ³dOff£t
 = 
	`Cl3
Ð-
¿nge
,„ªge-1, (
d–Off£t
 + 
´ed
) );

447 
þ³dOff£t
 = 
	`Cl3
Ð-
¿nge
,„ªge-1, 
off£t
);

451 cÚ¡ 
IÁ
 
deçuÉWeight
 = (1<<
log2D’om
);

452 cÚ¡ 
IÁ
 
d–Weight
 = (
weight
 - 
deçuÉWeight
);

454 if(
d–Weight
 >ð
¿nge
 || deltaWeight < -range)

456  
çl£
;

459 
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
].
bP»£ÁFÏg
 = 
Œue
;

460 
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
].
iWeight
 = 
weight
;

461 
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
].
iOff£t
 = 
þ³dOff£t
;

462 
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
].
uiLog2WeightD’om
 = 
log2D’om
;

466  
Œue
;

467 
	}
}

475 
BoÞ
 
	gWeightP»dAÇlysis
::
	$xS–eùWPHi¡ExtCl
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
, cÚ¡ 
BoÞ
 
bDoEnhªûm’t
, cÚ¡ BoÞ 
bClIn™ŸlSADWP
, cÚ¡ BoÞ 
bU£Hi¡og¿m
)

477 cÚ¡ 
TComPicYuv
 *cÚ¡ 
pPic
 = 
¦iû
->
	`g‘Pic
()->
	`g‘PicYuvOrg
();

478 cÚ¡ 
IÁ
 
deçuÉWeight
 = 1<<
log2D’om
;

479 cÚ¡ 
IÁ
 
numP»dDœ
 = 
¦iû
->
	`isIÁ”P
() ? 1 : 2;

480 cÚ¡ 
BoÞ
 
u£HighP»cisiÚ
 = 
¦iû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
();

482 
	`as£¹
 (
numP»dDœ
 <ð
	`IÁ
(
NUM_REF_PIC_LIST_01
));

484  
IÁ
 
»fLi¡
 = 0;„efLi¡ < 
numP»dDœ
;„efList++ )

486 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
 = ( 
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

488  
IÁ
 
»fIdxTemp
 = 0;„efIdxTem°< 
¦iû
->
	`g‘NumRefIdx
(
eRefPicLi¡
);„efIdxTemp++ )

490 
BoÞ
 
u£ChromaWeight
 = 
çl£
;

492 
IÁ
 
comp
=0; comp<
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

494 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

495 cÚ¡ 
P–
 *
pOrg
 = 
pPic
->
	`g‘Addr
(
compID
);

496 cÚ¡ 
P–
 *
pRef
 = 
¦iû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdxTemp
)->
	`g‘PicYuvRec
()->
	`g‘Addr
(
compID
);

497 cÚ¡ 
IÁ
 
ÜgSŒide
 = 
pPic
->
	`g‘SŒide
(
compID
);

498 cÚ¡ 
IÁ
 
»fSŒide
 = 
¦iû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdxTemp
)->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
compID
);

499 cÚ¡ 
IÁ
 
width
 = 
pPic
->
	`g‘Width
(
compID
);

500 cÚ¡ 
IÁ
 
height
 = 
pPic
->
	`g‘Height
(
compID
);

501 cÚ¡ 
IÁ
 
b™D•th
 = 
¦iû
->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

502 
WPSÿlšgP¬am
 &
wp
 = 
m_wp
[
»fLi¡
][
»fIdxTemp
][
compID
];

503 
IÁ
 
weight
 = 
wp
.
iWeight
;

504 
IÁ
 
off£t
 = 
wp
.
iOff£t
;

505 
IÁ
 
weightDef
 = 
deçuÉWeight
;

506 
IÁ
 
off£tDef
 = 0;

509 cÚ¡ 
IÁ64
 
SADnoWP
 = 
	`xC®cSADv®ueWPO±iÚ®Cl
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
deçuÉWeight
, 0, 
u£HighP»cisiÚ
, 
bClIn™ŸlSADWP
);

510 ià(
SADnoWP
 > 0)

512 cÚ¡ 
IÁ64
 
SADWP
 = 
	`xC®cSADv®ueWPO±iÚ®Cl
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
weight
, 
off£t
, 
u£HighP»cisiÚ
, 
bClIn™ŸlSADWP
);

513 cÚ¡ 
DoubË
 
dR©ioSAD
 = (DoubË)
SADWP
 / (DoubË)
SADnoWP
;

514 
DoubË
 
dR©ioSr0SAD
 = 
¡d
::
num”ic_lim™s
<DoubË>::
	`max
();

515 
DoubË
 
dR©ioSrSAD
 = 
¡d
::
num”ic_lim™s
<DoubË>::
	`max
();

517 ià(
bU£Hi¡og¿m
)

519 
¡d
::
veùÜ
<
IÁ
> 
hi¡og¿mOrg
;

520 
¡d
::
veùÜ
<
IÁ
> 
hi¡og¿mRef
;

521 
¡d
::
veùÜ
<
IÁ
> 
£¬chedHi¡og¿m
;

524 
	`xC®cHi¡og¿m
(
pOrg
, 
hi¡og¿mOrg
, 
width
, 
height
, 
ÜgSŒide
, 1 << 
b™D•th
);

525 
	`xC®cHi¡og¿m
(
pRef
, 
hi¡og¿mRef
, 
width
, 
height
, 
»fSŒide
, 1 << 
b™D•th
);

528 
	`xS—rchHi¡og¿m
(
hi¡og¿mOrg
, 
hi¡og¿mRef
, 
£¬chedHi¡og¿m
, 
b™D•th
, 
log2D’om
, 
weight
, 
off£t
, 
u£HighP»cisiÚ
, 
compID
);

530 cÚ¡ 
IÁ64
 
SADSrWP
 = 
	`xC®cSADv®ueWP
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
weight
, 
off£t
, 
u£HighP»cisiÚ
);

531 
dR©ioSrSAD
 = (
DoubË
)
SADSrWP
 / (DoubË)
SADnoWP
;

533 ià(
bDoEnhªûm’t
)

536 
	`xS—rchHi¡og¿m
(
hi¡og¿mOrg
, 
hi¡og¿mRef
, 
£¬chedHi¡og¿m
, 
b™D•th
, 
log2D’om
, 
weightDef
, 
off£tDef
, 
u£HighP»cisiÚ
, 
compID
);

538 cÚ¡ 
IÁ64
 
SADSr0WP
 = 
	`xC®cSADv®ueWP
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
weightDef
, 
off£tDef
, 
u£HighP»cisiÚ
);

539 
dR©ioSr0SAD
 = (
DoubË
)
SADSr0WP
 / (DoubË)
SADnoWP
;

543 if(
	`mš
(
dR©ioSr0SAD
, mš(
dR©ioSAD
, 
dR©ioSrSAD
)è>ð
WEIGHT_PRED_SAD_RELATIVE_TO_NON_WEIGHT_PRED_SAD
)

545 
wp
.
bP»£ÁFÏg
 = 
çl£
;

546 
wp
.
iOff£t
 = 0;

547 
wp
.
iWeight
 = 
deçuÉWeight
;

548 
wp
.
uiLog2WeightD’om
 = 
log2D’om
;

552 ià(
compID
 !ð
COMPONENT_Y
)

554 
u£ChromaWeight
 = 
Œue
;

557 ià(
dR©ioSr0SAD
 < 
dR©ioSrSAD
 && dR©ioSr0SAD < 
dR©ioSAD
)

559 
wp
.
bP»£ÁFÏg
 = 
Œue
;

560 
wp
.
iOff£t
 = 
off£tDef
;

561 
wp
.
iWeight
 = 
weightDef
;

562 
wp
.
uiLog2WeightD’om
 = 
log2D’om
;

564 ià(
dR©ioSrSAD
 < 
dR©ioSAD
)

566 
wp
.
bP»£ÁFÏg
 = 
Œue
;

567 
wp
.
iOff£t
 = 
off£t
;

568 
wp
.
iWeight
 = 
weight
;

569 
wp
.
uiLog2WeightD’om
 = 
log2D’om
;

575 
wp
.
bP»£ÁFÏg
 = 
çl£
;

576 
wp
.
iOff£t
 = 0;

577 
wp
.
iWeight
 = 
deçuÉWeight
;

578 
wp
.
uiLog2WeightD’om
 = 
log2D’om
;

582 
IÁ
 
comp
=1; comp<
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

584 
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
].
bP»£ÁFÏg
 = 
u£ChromaWeight
;

589  
Œue
;

590 
	}
}

593 
BoÞ
 
	gWeightP»dAÇlysis
::
	$xS–eùWP
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
)

595 
TComPicYuv
 *cÚ¡ 
pPic
 = 
¦iû
->
	`g‘Pic
()->
	`g‘PicYuvOrg
();

596 cÚ¡ 
IÁ
 
deçuÉWeight
 = 1<<
log2D’om
;

597 cÚ¡ 
IÁ
 
numP»dDœ
 = 
¦iû
->
	`isIÁ”P
() ? 1 : 2;

598 cÚ¡ 
BoÞ
 
u£HighP»cisiÚP»diùiÚWeightšg
 = 
¦iû
->
	`g‘SPS
()->
	`g‘SpsRªgeEx‹nsiÚ
().
	`g‘HighP»cisiÚOff£tsEÇbËdFÏg
();

600 
	`as£¹
 (
numP»dDœ
 <ð
	`IÁ
(
NUM_REF_PIC_LIST_01
));

602  
IÁ
 
»fLi¡
 = 0;„efLi¡ < 
numP»dDœ
;„efList++ )

604 cÚ¡ 
RefPicLi¡
 
eRefPicLi¡
 = ( 
»fLi¡
 ? 
REF_PIC_LIST_1
 : 
REF_PIC_LIST_0
 );

606  
IÁ
 
»fIdxTemp
 = 0;„efIdxTem°< 
¦iû
->
	`g‘NumRefIdx
(
eRefPicLi¡
);„efIdxTemp++ )

608 
IÁ64
 
SADWP
 = 0, 
SADnoWP
 = 0;

610 
IÁ
 
comp
=0; comp<
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

612 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

613 
P–
 *
pOrg
 = 
pPic
->
	`g‘Addr
(
compID
);

614 
P–
 *
pRef
 = 
¦iû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdxTemp
)->
	`g‘PicYuvRec
()->
	`g‘Addr
(
compID
);

615 cÚ¡ 
IÁ
 
ÜgSŒide
 = 
pPic
->
	`g‘SŒide
(
compID
);

616 cÚ¡ 
IÁ
 
»fSŒide
 = 
¦iû
->
	`g‘RefPic
(
eRefPicLi¡
, 
»fIdxTemp
)->
	`g‘PicYuvRec
()->
	`g‘SŒide
(
compID
);

617 cÚ¡ 
IÁ
 
width
 = 
pPic
->
	`g‘Width
(
compID
);

618 cÚ¡ 
IÁ
 
height
 = 
pPic
->
	`g‘Height
(
compID
);

619 cÚ¡ 
IÁ
 
b™D•th
 = 
¦iû
->
	`g‘SPS
()->
	`g‘B™D•th
(
	`toChªÃlTy³
(
compID
));

622 
SADWP
 +ð
	`xC®cSADv®ueWP
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
m_wp
[
»fLi¡
][
»fIdxTemp
][
compID
].
iWeight
, m_wp[»fLi¡][»fIdxTemp][compID].
iOff£t
, 
u£HighP»cisiÚP»diùiÚWeightšg
);

623 
SADnoWP
 +ð
	`xC®cSADv®ueWP
(
b™D•th
, 
pOrg
, 
pRef
, 
width
, 
height
, 
ÜgSŒide
, 
»fSŒide
, 
log2D’om
, 
deçuÉWeight
, 0, 
u£HighP»cisiÚP»diùiÚWeightšg
);

626 cÚ¡ 
DoubË
 
dR©io
 = 
SADnoWP
 > 0 ? (((DoubË)
SADWP
 / (DoubË)SADnoWP)è: 
¡d
::
num”ic_lim™s
<DoubË>::
	`max
();

627 if(
dR©io
 >ð
WEIGHT_PRED_SAD_RELATIVE_TO_NON_WEIGHT_PRED_SAD
)

629 
IÁ
 
comp
=0; comp<
pPic
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

631 
WPSÿlšgP¬am
 &
wp
=
m_wp
[
»fLi¡
][
»fIdxTemp
][
comp
];

632 
wp
.
bP»£ÁFÏg
 = 
çl£
;

633 
wp
.
iOff£t
 = 0;

634 
wp
.
iWeight
 = 
deçuÉWeight
;

635 
wp
.
uiLog2WeightD’om
 = 
log2D’om
;

641  
Œue
;

642 
	}
}

647 
IÁ64
 
	$xC®cSADv®ueWP
(cÚ¡ 
IÁ
 
b™D•th
,

648 cÚ¡ 
P–
 *
pOrgP–
,

649 cÚ¡ 
P–
 *
pRefP–
,

650 cÚ¡ 
IÁ
 
width
,

651 cÚ¡ 
IÁ
 
height
,

652 cÚ¡ 
IÁ
 
ÜgSŒide
,

653 cÚ¡ 
IÁ
 
»fSŒide
,

654 cÚ¡ 
IÁ
 
log2D’om
,

655 cÚ¡ 
IÁ
 
weight
,

656 cÚ¡ 
IÁ
 
off£t
,

657 cÚ¡ 
BoÞ
 
u£HighP»cisiÚ
)

660 cÚ¡ 
IÁ64
 
»®Log2D’om
 = 
u£HighP»cisiÚ
 ? 
log2D’om
 : (log2D’om + (
b™D•th
 - 8));

661 cÚ¡ 
IÁ64
 
»®Off£t
 = ((IÁ64)
off£t
)<<
»®Log2D’om
;

663 
IÁ64
 
SAD
 = 0;

664  
IÁ
 
y
 = 0; y < 
height
; y++ )

666  
IÁ
 
x
 = 0; x < 
width
; x++ )

668 
SAD
 +ð
	`abs
(Ð((
IÁ64
)
pOrgP–
[
x
] << (IÁ64è
log2D’om
è- ( (IÁ64è
pRefP–
[x] * (IÁ64è
weight
 + (
»®Off£t
) ) ) );

670 
pOrgP–
 +ð
ÜgSŒide
;

671 
pRefP–
 +ð
»fSŒide
;

675  
SAD
;

676 
	}
}

679 
IÁ64
 
	$xC®cSADv®ueWPO±iÚ®Cl
(cÚ¡ 
IÁ
 
b™D•th
,

680 cÚ¡ 
P–
 *
pOrgP–
,

681 cÚ¡ 
P–
 *
pRefP–
,

682 cÚ¡ 
IÁ
 
width
,

683 cÚ¡ 
IÁ
 
height
,

684 cÚ¡ 
IÁ
 
ÜgSŒide
,

685 cÚ¡ 
IÁ
 
»fSŒide
,

686 cÚ¡ 
IÁ
 
log2D’om
,

687 cÚ¡ 
IÁ
 
weight
,

688 cÚ¡ 
IÁ
 
off£t
,

689 cÚ¡ 
BoÞ
 
u£HighP»cisiÚ
,

690 cÚ¡ 
BoÞ
 
þ³d
)

692 
IÁ64
 
SAD
 = 0;

693 ià(
þ³d
)

695 cÚ¡ 
IÁ64
 
»®Log2D’om
 = 
u£HighP»cisiÚ
 ? 0 : (
b™D•th
 - 8);

696 cÚ¡ 
IÁ64
 
»®Off£t
 = (IÁ64)
off£t
<<
»®Log2D’om
;

697 cÚ¡ 
IÁ64
 
roundOff£t
 = (
log2D’om
 == 0) ? 0 : 1 << (log2Denom - 1);

698 cÚ¡ 
IÁ64
 
mšV®ue
 = 0;

699 cÚ¡ 
IÁ64
 
maxV®ue
 = (1 << 
b™D•th
) - 1;

701  
IÁ
 
y
 = 0; y < 
height
; y++ )

703  
IÁ
 
x
 = 0; x < 
width
; x++ )

705 
IÁ64
 
sÿËdV®ue
 = 
	`Cl3
(
mšV®ue
, 
maxV®ue
, ((((IÁ64è
pRefP–
[
x
] * (IÁ64è
weight
 + 
roundOff£t
èè>> (IÁ64è
log2D’om
è+ 
»®Off£t
);

706 
SAD
 +ð
	`abs
((
IÁ64
)
pOrgP–
[
x
] - 
sÿËdV®ue
);

708 
pOrgP–
 +ð
ÜgSŒide
;

709 
pRefP–
 +ð
»fSŒide
;

715 cÚ¡ 
IÁ64
 
»®Log2D’om
 = 
u£HighP»cisiÚ
 ? 
log2D’om
 : (log2D’om + (
b™D•th
 - 8));

716 cÚ¡ 
IÁ64
 
»®Off£t
 = ((IÁ64)
off£t
)<<
»®Log2D’om
;

718  
IÁ
 
y
 = 0; y < 
height
; y++ )

720  
IÁ
 
x
 = 0; x < 
width
; x++ )

722 
SAD
 +ð
	`abs
(Ð((
IÁ64
)
pOrgP–
[
x
] << (IÁ64è
log2D’om
è- ( (IÁ64è
pRefP–
[x] * (IÁ64è
weight
 + (
»®Off£t
) ) ) );

724 
pOrgP–
 +ð
ÜgSŒide
;

725 
pRefP–
 +ð
»fSŒide
;

728  
SAD
;

729 
	}
}

	@source/Lib/TLibEncoder/WeightPredAnalysis.h

37 #iâdeà
__WEIGHTPREDANALYSIS__


38 
	#__WEIGHTPREDANALYSIS__


	)

40 
	~"../TLibCommÚ/CommÚDef.h
"

41 
	~"../TLibCommÚ/TComSliû.h
"

42 
	~"TEncCavlc.h
"

44 þas 
	cWeightP»dAÇlysis


46 
	m´iv©e
:

49 
WPSÿlšgP¬am
 
m_wp
[
NUM_REF_PIC_LIST_01
][
MAX_NUM_REF
][
MAX_NUM_COMPONENT
];

53 
BoÞ
 
xS–eùWP
 (
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
);

54 
BoÞ
 
xS–eùWPHi¡ExtCl
 (
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
, cÚ¡ BoÞ 
bDoEnhªûm’t
, cÚ¡ BoÞ 
bClIn™ŸlSADWP
, cÚ¡ BoÞ 
bU£Hi¡og¿m
);

55 
BoÞ
 
xUpd©šgWPP¬am‘”s
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
IÁ
 
log2D’om
);

57 
	mpublic
:

59 
WeightP»dAÇlysis
();

62 
Void
 
xC®cACDCP¬amSliû
 (
TComSliû
 *cÚ¡ 
¦iû
);

63 
Void
 
xE¡im©eWPP¬amSliû
(
TComSliû
 *cÚ¡ 
¦iû
, cÚ¡ 
Weigh‹dP»diùiÚM‘hod
 
m‘hod
);

64 
Void
 
xCheckWPEÇbË
 (
TComSliû
 *cÚ¡ 
¦iû
);

	@source/Lib/Utilities/TVideoIOYuv.cpp

38 
	~<c¡dlib
>

39 
	~<fúŽ.h
>

40 
	~<as£¹.h
>

41 
	~<sys/¡©.h
>

42 
	~<f¡»am
>

43 
	~<io¡»am
>

44 
	~<memÜy.h
>

46 
	~"TLibCommÚ/TComRom.h
"

47 
	~"TVideoIOYuv.h
"

49 
usšg
 
Çme¥aû
 
	g¡d
;

70 
Void
 
	$sÿËPÏÃ
(
P–
* 
img
, cÚ¡ 
UIÁ
 
¡ride
, cÚ¡ UIÁ 
width
, cÚ¡ UIÁ 
height
, 
IÁ
 
shiáb™s
, P– 
mšv®
, P– 
maxv®
)

72 ià(
shiáb™s
 > 0)

74 
UIÁ
 
y
 = 0; y < 
height
; y++, 
img
+=
¡ride
)

76 
UIÁ
 
x
 = 0; x < 
width
; x++)

78 
img
[
x
] <<ð
shiáb™s
;

82 ià(
shiáb™s
 < 0)

84 
shiáb™s
=-shiftbits;

86 
P–
 
roundšg
 = 1 << (
shiáb™s
-1);

87 
UIÁ
 
y
 = 0; y < 
height
; y++, 
img
+=
¡ride
)

89 
UIÁ
 
x
 = 0; x < 
width
; x++)

91 
img
[
x
] = 
	`Cl3
(
mšv®
, 
maxv®
, 
	`P–
((img[x] + 
roundšg
è>> 
shiáb™s
));

95 
	}
}

97 
Void


98 
cÝyPÏÃ
(cÚ¡ 
TComPicYuv
 &
¤c
, cÚ¡ 
CompÚ’tID
 
¤cPÏÃ
, TComPicYuv &
de¡
, cÚ¡ CompÚ’tID 
de¡PÏÃ
);

120 
Void
 
	gTVideoIOYuv
::
	$Ý’
ÐcÚ¡ 
¡d
::
¡ršg
 &
fžeName
, 
BoÞ
 
bWr™eMode
, cÚ¡ 
IÁ
 
fžeB™D•th
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ IÁ 
MSBEx‹ndedB™D•th
[MAX_NUM_CHANNEL_TYPE], cÚ¡ IÁ 
š‹º®B™D•th
[MAX_NUM_CHANNEL_TYPE] )

123 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

125 
m_fžeB™d•th
 [
ch
] = 
¡d
::
mš
<
UIÁ
>(
fžeB™D•th
[ch], 16);

126 
m_MSBEx‹ndedB™D•th
[
ch
] = 
MSBEx‹ndedB™D•th
[ch];

127 
m_b™d•thShiá
 [
ch
] = 
š‹º®B™D•th
[ch] - 
m_MSBEx‹ndedB™D•th
[ch];

129 ià(
m_fžeB™d•th
[
ch
] > 16)

131 ià(
bWr™eMode
)

133 
¡d
::
û¼
 << "\nWARNING: CªnÙ wr™¨yuv fžoàb™ d•th g»©”hª 16 - ouuˆwžÈbright-shiáed dowÀtØ16-b™…»cisiÚ\n" << std::
’dl
;

137 
¡d
::
û¼
 << "\nERROR: CªnÙ„—d‡ yuv fžoàb™ d•th g»©”hª 16\n" << std::
’dl
;

138 
	`ex™
(0);

143 iàÐ
bWr™eMode
 )

145 
m_cHªdË
.
	`Ý’
Ð
fžeName
.
	`c_¡r
(), 
ios
::
bš¬y
 | ios::
out
 );

147 ifÐ
m_cHªdË
.
	`çž
() )

149 
	`´štf
("\nfailedo write„econstructed YUV file\n");

150 
	`ex™
(0);

155 
m_cHªdË
.
	`Ý’
Ð
fžeName
.
	`c_¡r
(), 
ios
::
bš¬y
 | ios::
š
 );

157 ifÐ
m_cHªdË
.
	`çž
() )

159 
	`´štf
("\nfailedo open Input YUV file\n");

160 
	`ex™
(0);

165 
	}
}

167 
Void
 
	gTVideoIOYuv
::
	$þo£
()

169 
m_cHªdË
.
	`þo£
();

170 
	}
}

172 
BoÞ
 
	gTVideoIOYuv
::
	$isEof
()

174  
m_cHªdË
.
	`eof
();

175 
	}
}

177 
BoÞ
 
	gTVideoIOYuv
::
	$isFaž
()

179  
m_cHªdË
.
	`çž
();

180 
	}
}

188 
Void
 
	gTVideoIOYuv
::
	$skF¿mes
(
IÁ
 
numF¿mes
, 
UIÁ
 
width
, UIÁ 
height
, 
ChromaFÜm©
 
fÜm©
)

190 ià(
numF¿mes
==0)

197 
¡»amoff
 
äameSize
 = 0;

198 
UIÁ
 
wÜdsize
=1;

199 
UIÁ
 
compÚ’t
 = 0; compÚ’ˆ< 
	`g‘Numb”V®idCompÚ’ts
(
fÜm©
); component++)

201 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
compÚ’t
);

202 
äameSize
 +ð(
width
 >> 
	`g‘CompÚ’tSÿËX
(
compID
, 
fÜm©
)è* (
height
 >> 
	`g‘CompÚ’tSÿËY
(compID, format));

203 ià(
m_fžeB™d•th
[
	`toChªÃlTy³
(
compID
)] > 8)

205 
wÜdsize
=2;

208 
äameSize
 *ð
wÜdsize
;

211 cÚ¡ 
¡»amoff
 
off£t
 = 
äameSize
 * 
numF¿mes
;

214 ià(!!
m_cHªdË
.
	`£ekg
(
off£t
, 
ios
::
cur
))

218 
m_cHªdË
.
	`þ—r
();

221 
TCh¬
 
buf
[512];

222 cÚ¡ 
¡»amoff
 
off£t_mod_bufsize
 = 
off£t
 % (
buf
);

223 
¡»amoff
 
i
 = 0; i < 
off£t
 - 
off£t_mod_bufsize
; i +ð(
buf
))

225 
m_cHªdË
.
	`»ad
(
buf
, (buf));

227 
m_cHªdË
.
	`»ad
(
buf
, 
off£t_mod_bufsize
);

228 
	}
}

249 
BoÞ
 
	$»adPÏÃ
(
P–
* 
d¡
,

250 
i¡»am
& 
fd
,

251 
BoÞ
 
is16b™
,

252 
UIÁ
 
¡ride444
,

253 
UIÁ
 
width444
,

254 
UIÁ
 
height444
,

255 
UIÁ
 
·d_x444
,

256 
UIÁ
 
·d_y444
,

257 cÚ¡ 
CompÚ’tID
 
compID
,

258 cÚ¡ 
ChromaFÜm©
 
de¡FÜm©
,

259 cÚ¡ 
ChromaFÜm©
 
fžeFÜm©
,

260 cÚ¡ 
UIÁ
 
fžeB™D•th
)

262 cÚ¡ 
UIÁ
 
csx_fže
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
fžeFÜm©
);

263 cÚ¡ 
UIÁ
 
csy_fže
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
fžeFÜm©
);

264 cÚ¡ 
UIÁ
 
csx_de¡
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
de¡FÜm©
);

265 cÚ¡ 
UIÁ
 
csy_de¡
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
de¡FÜm©
);

267 cÚ¡ 
UIÁ
 
width_de¡
 = 
width444
 >>
csx_de¡
;

268 cÚ¡ 
UIÁ
 
height_de¡
 = 
height444
>>
csy_de¡
;

269 cÚ¡ 
UIÁ
 
·d_x_de¡
 = 
·d_x444
>>
csx_de¡
;

270 cÚ¡ 
UIÁ
 
·d_y_de¡
 = 
·d_y444
>>
csy_de¡
;

271 cÚ¡ 
UIÁ
 
¡ride_de¡
 = 
¡ride444
>>
csx_de¡
;

273 cÚ¡ 
UIÁ
 
fuÎ_width_de¡
 = 
width_de¡
+
·d_x_de¡
;

274 cÚ¡ 
UIÁ
 
fuÎ_height_de¡
 = 
height_de¡
+
·d_y_de¡
;

276 cÚ¡ 
UIÁ
 
¡ride_fže
 = (
width444
 * (
is16b™
 ? 2 : 1)è>> 
csx_fže
;

277 
¡d
::
veùÜ
<
UCh¬
> 
	`bufVec
(
¡ride_fže
);

278 
UCh¬
 *
buf
=&(
bufVec
[0]);

280 ià(
compID
!=
COMPONENT_Y
 && (
fžeFÜm©
==
CHROMA_400
 || 
de¡FÜm©
==CHROMA_400))

282 ià(
de¡FÜm©
!=
CHROMA_400
)

285 cÚ¡ 
P–
 
v®ue
=
	`P–
(1<<(
fžeB™D•th
-1));

286 
UIÁ
 
y
 = 0; y < 
fuÎ_height_de¡
; y++, 
d¡
+=
¡ride_de¡
)

288 
UIÁ
 
x
 = 0; x < 
fuÎ_width_de¡
; x++)

290 
d¡
[
x
] = 
v®ue
;

295 ià(
fžeFÜm©
!=
CHROMA_400
)

297 cÚ¡ 
UIÁ
 
height_fže
 = 
height444
>>
csy_fže
;

298 
fd
.
	`£ekg
(
height_fže
*
¡ride_fže
, 
ios
::
cur
);

299 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

301  
çl£
;

307 cÚ¡ 
UIÁ
 
mask_y_fže
=(1<<
csy_fže
)-1;

308 cÚ¡ 
UIÁ
 
mask_y_de¡
=(1<<
csy_de¡
)-1;

309 
UIÁ
 
y444
=0; y444<
height444
; y444++)

311 ià((
y444
&
mask_y_fže
)==0)

314 
fd
.
	`»ad
(
»š‹½»t_ÿ¡
<
TCh¬
*>(
buf
), 
¡ride_fže
);

315 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

317  
çl£
;

321 ià((
y444
&
mask_y_de¡
)==0)

324 ià(
csx_fže
 < 
csx_de¡
)

327 cÚ¡ 
UIÁ
 
sx
=
csx_de¡
-
csx_fže
;

328 ià(!
is16b™
)

330 
UIÁ
 
x
 = 0; x < 
width_de¡
; x++)

332 
d¡
[
x
] = 
buf
[x<<
sx
];

337 
UIÁ
 
x
 = 0; x < 
width_de¡
; x++)

339 
d¡
[
x
] = 
	`P–
(
buf
[(x<<
sx
)*2+0]) | (Pel(buf[(x<<sx)*2+1])<<8);

346 cÚ¡ 
UIÁ
 
sx
=
csx_fže
-
csx_de¡
;

347 ià(!
is16b™
)

349 
UIÁ
 
x
 = 0; x < 
width_de¡
; x++)

351 
d¡
[
x
] = 
buf
[x>>
sx
];

356 
UIÁ
 
x
 = 0; x < 
width_de¡
; x++)

358 
d¡
[
x
] = 
	`P–
(
buf
[(x>>
sx
)*2+0]) | (Pel(buf[(x>>sx)*2+1])<<8);

364 cÚ¡ 
P–
 
v®
=
d¡
[
width_de¡
-1];

365 
UIÁ
 
x
 = 
width_de¡
; x < 
fuÎ_width_de¡
; x++)

367 
d¡
[
x
] = 
v®
;

370 
d¡
 +ð
¡ride_de¡
;

375 
UIÁ
 
y
 = 
height_de¡
; y < 
fuÎ_height_de¡
; y++, 
d¡
+=
¡ride_de¡
)

377 
UIÁ
 
x
 = 0; x < 
fuÎ_width_de¡
; x++)

379 
d¡
[
x
] = (d¡ - 
¡ride_de¡
)[x];

383  
Œue
;

384 
	}
}

401 
BoÞ
 
	$wr™ePÏÃ
(
o¡»am
& 
fd
, 
P–
* 
¤c
, 
BoÞ
 
is16b™
,

402 
UIÁ
 
¡ride444
,

403 
UIÁ
 
width444
, UIÁ 
height444
,

404 cÚ¡ 
CompÚ’tID
 
compID
,

405 cÚ¡ 
ChromaFÜm©
 
¤cFÜm©
,

406 cÚ¡ 
ChromaFÜm©
 
fžeFÜm©
,

407 cÚ¡ 
UIÁ
 
fžeB™D•th
)

409 cÚ¡ 
UIÁ
 
csx_fže
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
fžeFÜm©
);

410 cÚ¡ 
UIÁ
 
csy_fže
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
fžeFÜm©
);

411 cÚ¡ 
UIÁ
 
csx_¤c
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
¤cFÜm©
);

412 cÚ¡ 
UIÁ
 
csy_¤c
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
¤cFÜm©
);

414 cÚ¡ 
UIÁ
 
¡ride_¤c
 = 
¡ride444
>>
csx_¤c
;

416 cÚ¡ 
UIÁ
 
¡ride_fže
 = (
width444
 * (
is16b™
 ? 2 : 1)è>> 
csx_fže
;

417 cÚ¡ 
UIÁ
 
width_fže
 = 
width444
 >>
csx_fže
;

418 cÚ¡ 
UIÁ
 
height_fže
 = 
height444
>>
csy_fže
;

420 
¡d
::
veùÜ
<
UCh¬
> 
	`bufVec
(
¡ride_fže
);

421 
UCh¬
 *
buf
=&(
bufVec
[0]);

423 ià(
compID
!=
COMPONENT_Y
 && (
fžeFÜm©
==
CHROMA_400
 || 
¤cFÜm©
==CHROMA_400))

425 ià(
fžeFÜm©
!=
CHROMA_400
)

427 cÚ¡ 
UIÁ
 
v®ue
=1<<(
fžeB™D•th
-1);

429 
UIÁ
 
y
=0; y< 
height_fže
; y++)

431 ià(!
is16b™
)

433 
UCh¬
 
	`v®
(
v®ue
);

434 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

436 
buf
[
x
]=
v®
;

441 
UShÜt
 
	`v®
(
v®ue
);

442 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

444 
buf
[2*
x
+0]ð(
v®
>>0) & 0xff;

445 
buf
[2*
x
+1]ð(
v®
>>8) & 0xff;

449 
fd
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
buf
), 
¡ride_fže
);

450 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

452  
çl£
;

459 cÚ¡ 
UIÁ
 
mask_y_fže
=(1<<
csy_fže
)-1;

460 cÚ¡ 
UIÁ
 
mask_y_¤c
 =(1<<
csy_¤c
 )-1;

461 
UIÁ
 
y444
=0; y444<
height444
; y444++)

463 ià((
y444
&
mask_y_fže
)==0)

466 ià(
csx_fže
 < 
csx_¤c
)

469 cÚ¡ 
UIÁ
 
sx
=
csx_¤c
-
csx_fže
;

470 ià(!
is16b™
)

472 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

474 
buf
[
x
] = (
UCh¬
)(
¤c
[x>>
sx
]);

479 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

481 
buf
[2*
x
 ] = (
¤c
[x>>
sx
]>>0) & 0xff;

482 
buf
[2*
x
+1] = (
¤c
[x>>
sx
]>>8) & 0xff;

489 cÚ¡ 
UIÁ
 
sx
=
csx_fže
-
csx_¤c
;

490 ià(!
is16b™
)

492 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

494 
buf
[
x
] = (
UCh¬
)(
¤c
[x<<
sx
]);

499 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

501 
buf
[2*
x
 ] = (
¤c
[x<<
sx
]>>0) & 0xff;

502 
buf
[2*
x
+1] = (
¤c
[x<<
sx
]>>8) & 0xff;

507 
fd
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
buf
), 
¡ride_fže
);

508 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

510  
çl£
;

514 ià((
y444
&
mask_y_¤c
)==0)

516 
¤c
 +ð
¡ride_¤c
;

521  
Œue
;

522 
	}
}

524 
BoÞ
 
	$wr™eF›ld
(
o¡»am
& 
fd
, 
P–
* 
tÝ
, P–* 
bÙtom
, 
BoÞ
 
is16b™
,

525 
UIÁ
 
¡ride444
,

526 
UIÁ
 
width444
, UIÁ 
height444
,

527 cÚ¡ 
CompÚ’tID
 
compID
,

528 cÚ¡ 
ChromaFÜm©
 
¤cFÜm©
,

529 cÚ¡ 
ChromaFÜm©
 
fžeFÜm©
,

530 cÚ¡ 
UIÁ
 
fžeB™D•th
, cÚ¡ 
BoÞ
 
isTff
)

532 cÚ¡ 
UIÁ
 
csx_fže
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
fžeFÜm©
);

533 cÚ¡ 
UIÁ
 
csy_fže
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
fžeFÜm©
);

534 cÚ¡ 
UIÁ
 
csx_¤c
 =
	`g‘CompÚ’tSÿËX
(
compID
, 
¤cFÜm©
);

535 cÚ¡ 
UIÁ
 
csy_¤c
 =
	`g‘CompÚ’tSÿËY
(
compID
, 
¤cFÜm©
);

537 cÚ¡ 
UIÁ
 
¡ride_¤c
 = 
¡ride444
>>
csx_¤c
;

539 cÚ¡ 
UIÁ
 
¡ride_fže
 = (
width444
 * (
is16b™
 ? 2 : 1)è>> 
csx_fže
;

540 cÚ¡ 
UIÁ
 
width_fže
 = 
width444
 >>
csx_fže
;

541 cÚ¡ 
UIÁ
 
height_fže
 = 
height444
>>
csy_fže
;

543 
¡d
::
veùÜ
<
UCh¬
> 
	`bufVec
(
¡ride_fže
 * 2);

544 
UCh¬
 *
buf
=&(
bufVec
[0]);

546 ià(
compID
!=
COMPONENT_Y
 && (
fžeFÜm©
==
CHROMA_400
 || 
¤cFÜm©
==CHROMA_400))

548 ià(
fžeFÜm©
!=
CHROMA_400
)

550 cÚ¡ 
UIÁ
 
v®ue
=1<<(
fžeB™D•th
-1);

552 
UIÁ
 
y
=0; y< 
height_fže
; y++)

554 
UIÁ
 
f›ld
 = 0; field < 2; field++)

556 
UCh¬
 *
f›ldBufãr
 = 
buf
 + (
f›ld
 * 
¡ride_fže
);

558 ià(!
is16b™
)

560 
UCh¬
 
	`v®
(
v®ue
);

561 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

563 
f›ldBufãr
[
x
]=
v®
;

568 
UShÜt
 
	`v®
(
v®ue
);

569 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

571 
f›ldBufãr
[2*
x
+0]ð(
v®
>>0) & 0xff;

572 
f›ldBufãr
[2*
x
+1]ð(
v®
>>8) & 0xff;

577 
fd
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
buf
), (
¡ride_fže
 * 2));

578 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

580  
çl£
;

587 cÚ¡ 
UIÁ
 
mask_y_fže
=(1<<
csy_fže
)-1;

588 cÚ¡ 
UIÁ
 
mask_y_¤c
 =(1<<
csy_¤c
 )-1;

589 
UIÁ
 
y444
=0; y444<
height444
; y444++)

591 ià((
y444
&
mask_y_fže
)==0)

593 
UIÁ
 
f›ld
 = 0; field < 2; field++)

595 
UCh¬
 *
f›ldBufãr
 = 
buf
 + (
f›ld
 * 
¡ride_fže
);

596 
P–
 *
¤c
 = (((
f›ld
 =ð0è&& 
isTff
è|| ((f›ld =ð1è&& (!isTff))è? 
tÝ
 : 
bÙtom
;

599 ià(
csx_fže
 < 
csx_¤c
)

602 cÚ¡ 
UIÁ
 
sx
=
csx_¤c
-
csx_fže
;

603 ià(!
is16b™
)

605 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

607 
f›ldBufãr
[
x
] = (
UCh¬
)(
¤c
[x>>
sx
]);

612 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

614 
f›ldBufãr
[2*
x
 ] = (
¤c
[x>>
sx
]>>0) & 0xff;

615 
f›ldBufãr
[2*
x
+1] = (
¤c
[x>>
sx
]>>8) & 0xff;

622 cÚ¡ 
UIÁ
 
sx
=
csx_fže
-
csx_¤c
;

623 ià(!
is16b™
)

625 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

627 
f›ldBufãr
[
x
] = (
UCh¬
)(
¤c
[x<<
sx
]);

632 
UIÁ
 
x
 = 0; x < 
width_fže
; x++)

634 
f›ldBufãr
[2*
x
 ] = (
¤c
[x<<
sx
]>>0) & 0xff;

635 
f›ldBufãr
[2*
x
+1] = (
¤c
[x<<
sx
]>>8) & 0xff;

641 
fd
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ 
TCh¬
*>(
buf
), (
¡ride_fže
 * 2));

642 ià(
fd
.
	`eof
(è|| fd.
	`çž
() )

644  
çl£
;

648 ià((
y444
&
mask_y_¤c
)==0)

650 
tÝ
 +ð
¡ride_¤c
;

651 
bÙtom
 +ð
¡ride_¤c
;

656  
Œue
;

657 
	}
}

675 
BoÞ
 
	gTVideoIOYuv
::
	$»ad
 ( 
TComPicYuv
* 
pPicYuvU£r
, TComPicYuv* 
pPicYuvTrueOrg
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
csc
, 
IÁ
 
aiPad
[2], 
ChromaFÜm©
 
fÜm©
, cÚ¡ 
BoÞ
 
bClToRec709
 )

678 iàÐ
	`isEof
() )

680  
çl£
;

682 
TComPicYuv
 *
pPicYuv
=
pPicYuvTrueOrg
;

683 ià(
fÜm©
>=
NUM_CHROMA_FORMAT
)

685 
fÜm©
=
pPicYuv
->
	`g‘ChromaFÜm©
();

688 
BoÞ
 
is16b™
 = 
çl£
;

690 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

692 ià(
m_fžeB™d•th
[
ch
] > 8)

694 
is16b™
=
Œue
;

698 cÚ¡ 
UIÁ
 
¡ride444
 = 
pPicYuv
->
	`g‘SŒide
(
COMPONENT_Y
);

701 cÚ¡ 
UIÁ
 
·d_h444
 = 
aiPad
[0];

702 cÚ¡ 
UIÁ
 
·d_v444
 = 
aiPad
[1];

704 cÚ¡ 
UIÁ
 
width_fuÎ444
 = 
pPicYuv
->
	`g‘Width
(
COMPONENT_Y
);

705 cÚ¡ 
UIÁ
 
height_fuÎ444
 = 
pPicYuv
->
	`g‘Height
(
COMPONENT_Y
);

707 cÚ¡ 
UIÁ
 
width444
 = 
width_fuÎ444
 - 
·d_h444
;

708 cÚ¡ 
UIÁ
 
height444
 = 
height_fuÎ444
 - 
·d_v444
;

710 
UIÁ
 
comp
=0; comp<
MAX_NUM_COMPONENT
; comp++)

712 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

713 cÚ¡ 
ChªÃlTy³
 
chTy³
=
	`toChªÃlTy³
(
compID
);

715 cÚ¡ 
IÁ
 
desœed_b™d•th
 = 
m_MSBEx‹ndedB™D•th
[
chTy³
] + 
m_b™d•thShiá
[chType];

717 cÚ¡ 
BoÞ
 
b709Com¶Ÿnû
=(
bClToRec709
è&& (
m_b™d•thShiá
[
chTy³
] < 0 && 
desœed_b™d•th
 >= 8);

718 cÚ¡ 
P–
 
mšv®
 = 
b709Com¶Ÿnû
? (Ð1 << (
desœed_b™d•th
 - 8)) ) : 0;

719 cÚ¡ 
P–
 
maxv®
 = 
b709Com¶Ÿnû
? ((0xfà<< (
desœed_b™d•th
 - 8)) -1) : (1 << desired_bitdepth) - 1;

721 ià(! 
	`»adPÏÃ
(
pPicYuv
->
	`g‘Addr
(
compID
), 
m_cHªdË
, 
is16b™
, 
¡ride444
, 
width444
, 
height444
, 
·d_h444
, 
·d_v444
, compID,…PicYuv->
	`g‘ChromaFÜm©
(), 
fÜm©
, 
m_fžeB™d•th
[
chTy³
]))

723  
çl£
;

726 ià(
compID
 < 
pPicYuv
->
	`g‘Numb”V®idCompÚ’ts
() )

728 cÚ¡ 
UIÁ
 
csx
=
	`g‘CompÚ’tSÿËX
(
compID
, 
pPicYuv
->
	`g‘ChromaFÜm©
());

729 cÚ¡ 
UIÁ
 
csy
=
	`g‘CompÚ’tSÿËY
(
compID
, 
pPicYuv
->
	`g‘ChromaFÜm©
());

730 
	`sÿËPÏÃ
(
pPicYuv
->
	`g‘Addr
(
compID
), 
¡ride444
>>
csx
, 
width_fuÎ444
>>csx, 
height_fuÎ444
>>
csy
, 
m_b™d•thShiá
[
chTy³
], 
mšv®
, 
maxv®
);

734 if(
pPicYuvU£r
)

736 
	`CÞourS·ûCÚv”t
(*
pPicYuvTrueOrg
, *
pPicYuvU£r
, 
csc
, 
Œue
);

739  
Œue
;

740 
	}
}

755 
BoÞ
 
	gTVideoIOYuv
::
	$wr™e
Ð
TComPicYuv
* 
pPicYuvU£r
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, 
IÁ
 
cÚfLeá
, IÁ 
cÚfRight
, IÁ 
cÚfTÝ
, IÁ 
cÚfBÙtom
, 
ChromaFÜm©
 
fÜm©
, cÚ¡ 
BoÞ
 
bClToRec709
 )

757 
TComPicYuv
 
cPicYuvCSCd
;

758 ià(
CSC
!=
IPCOLOURSPACE_UNCHANGED
)

760 
cPicYuvCSCd
.
	`ü—‹W™houtCUInfo
(
pPicYuvU£r
->
	`g‘Width
(
COMPONENT_Y
),…PicYuvU£r->
	`g‘Height
(COMPONENT_Y),…PicYuvU£r->
	`g‘ChromaFÜm©
() );

761 
	`CÞourS·ûCÚv”t
(*
pPicYuvU£r
, 
cPicYuvCSCd
, 
CSC
, 
çl£
);

763 
TComPicYuv
 *
pPicYuv
=(
CSC
==
IPCOLOURSPACE_UNCHANGED
è? 
pPicYuvU£r
 : &
cPicYuvCSCd
;

766 
BoÞ
 
is16b™
 = 
çl£
;

767 
BoÞ
 
nÚZ”oB™D•thShiá
=
çl£
;

769 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

771 ià(
m_fžeB™d•th
[
ch
] > 8)

773 
is16b™
=
Œue
;

775 ià(
m_b™d•thShiá
[
ch
] != 0)

777 
nÚZ”oB™D•thShiá
=
Œue
;

781 
TComPicYuv
 *
d¡PicYuv
 = 
NULL
;

782 
BoÞ
 
»tv®
 = 
Œue
;

783 ià(
fÜm©
>=
NUM_CHROMA_FORMAT
)

785 
fÜm©
=
pPicYuv
->
	`g‘ChromaFÜm©
();

788 ià(
nÚZ”oB™D•thShiá
)

790 
d¡PicYuv
 = 
Ãw
 
TComPicYuv
;

791 
d¡PicYuv
->
	`ü—‹W™houtCUInfo
Ð
pPicYuv
->
	`g‘Width
(
COMPONENT_Y
),…PicYuv->
	`g‘Height
(COMPONENT_Y),…PicYuv->
	`g‘ChromaFÜm©
() );

793 
UIÁ
 
comp
=0; comp<
d¡PicYuv
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

795 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

796 cÚ¡ 
ChªÃlTy³
 
ch
=
	`toChªÃlTy³
(
compID
);

797 cÚ¡ 
BoÞ
 
b709Com¶Ÿnû
 = 
bClToRec709
 && (-
m_b™d•thShiá
[
ch
] < 0 && 
m_MSBEx‹ndedB™D•th
[ch] >= 8);

798 cÚ¡ 
P–
 
mšv®
 = 
b709Com¶Ÿnû
? (Ð1 << (
m_MSBEx‹ndedB™D•th
[
ch
] - 8)) ) : 0;

799 cÚ¡ 
P–
 
maxv®
 = 
b709Com¶Ÿnû
? ((0xfà<< (
m_MSBEx‹ndedB™D•th
[
ch
] - 8)) -1) : (1 << m_MSBExtendedBitDepth[ch]) - 1;

801 
	`cÝyPÏÃ
(*
pPicYuv
, 
compID
, *
d¡PicYuv
, compID);

802 
	`sÿËPÏÃ
(
d¡PicYuv
->
	`g‘Addr
(
compID
), d¡PicYuv->
	`g‘SŒide
(compID), d¡PicYuv->
	`g‘Width
(compID), d¡PicYuv->
	`g‘Height
(compID), -
m_b™d•thShiá
[
ch
], 
mšv®
, 
maxv®
);

807 
d¡PicYuv
 = 
pPicYuv
;

810 cÚ¡ 
IÁ
 
¡ride444
 = 
d¡PicYuv
->
	`g‘SŒide
(
COMPONENT_Y
);

811 cÚ¡ 
UIÁ
 
width444
 = 
d¡PicYuv
->
	`g‘Width
(
COMPONENT_Y
è- 
cÚfLeá
 - 
cÚfRight
;

812 cÚ¡ 
UIÁ
 
height444
 = 
d¡PicYuv
->
	`g‘Height
(
COMPONENT_Y
è- 
cÚfTÝ
 - 
cÚfBÙtom
;

814 ià((
width444
 =ð0è|| (
height444
 == 0))

816 
	`´štf
 ("\nW¬nšg: wr™šg %d x %d†um¨§m¶ouuˆpiùu»!", 
width444
, 
height444
);

819 
UIÁ
 
comp
=0; 
»tv®
 && comp<
d¡PicYuv
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

821 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

822 cÚ¡ 
ChªÃlTy³
 
ch
=
	`toChªÃlTy³
(
compID
);

823 cÚ¡ 
UIÁ
 
csx
 = 
d¡PicYuv
->
	`g‘CompÚ’tSÿËX
(
compID
);

824 cÚ¡ 
UIÁ
 
csy
 = 
d¡PicYuv
->
	`g‘CompÚ’tSÿËY
(
compID
);

825 cÚ¡ 
IÁ
 
¶ªeOff£t
 = (
cÚfLeá
>>
csx
è+ (
cÚfTÝ
>>
csy
è* 
d¡PicYuv
->
	`g‘SŒide
(
compID
);

826 ià(! 
	`wr™ePÏÃ
(
m_cHªdË
, 
d¡PicYuv
->
	`g‘Addr
(
compID
è+ 
¶ªeOff£t
, 
is16b™
, 
¡ride444
, 
width444
, 
height444
, compID, d¡PicYuv->
	`g‘ChromaFÜm©
(), 
fÜm©
, 
m_fžeB™d•th
[
ch
]))

828 
»tv®
=
çl£
;

832 ià(
nÚZ”oB™D•thShiá
)

834 
d¡PicYuv
->
	`de¡roy
();

835 
d–‘e
 
d¡PicYuv
;

838 
cPicYuvCSCd
.
	`de¡roy
();

840  
»tv®
;

841 
	}
}

843 
BoÞ
 
	gTVideoIOYuv
::
	$wr™e
Ð
TComPicYuv
* 
pPicYuvU£rTÝ
, TComPicYuv* 
pPicYuvU£rBÙtom
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, 
IÁ
 
cÚfLeá
, IÁ 
cÚfRight
, IÁ 
cÚfTÝ
, IÁ 
cÚfBÙtom
, 
ChromaFÜm©
 
fÜm©
, cÚ¡ 
BoÞ
 
isTff
, cÚ¡ BoÞ 
bClToRec709
 )

846 
TComPicYuv
 
cPicYuvTÝCSCd
;

847 
TComPicYuv
 
cPicYuvBÙtomCSCd
;

848 ià(
CSC
!=
IPCOLOURSPACE_UNCHANGED
)

850 
cPicYuvTÝCSCd
 .
	`ü—‹W™houtCUInfo
(
pPicYuvU£rTÝ
 ->
	`g‘Width
(
COMPONENT_Y
),…PicYuvU£rTÝ ->
	`g‘Height
(COMPONENT_Y),…PicYuvU£rTÝ ->
	`g‘ChromaFÜm©
() );

851 
cPicYuvBÙtomCSCd
.
	`ü—‹W™houtCUInfo
(
pPicYuvU£rBÙtom
->
	`g‘Width
(
COMPONENT_Y
),…PicYuvU£rBÙtom->
	`g‘Height
(COMPONENT_Y),…PicYuvU£rBÙtom->
	`g‘ChromaFÜm©
() );

852 
	`CÞourS·ûCÚv”t
(*
pPicYuvU£rTÝ
, 
cPicYuvTÝCSCd
, 
CSC
, 
çl£
);

853 
	`CÞourS·ûCÚv”t
(*
pPicYuvU£rBÙtom
, 
cPicYuvBÙtomCSCd
, 
CSC
, 
çl£
);

855 
TComPicYuv
 *
pPicYuvTÝ
 = (
CSC
==
IPCOLOURSPACE_UNCHANGED
è? 
pPicYuvU£rTÝ
 : &
cPicYuvTÝCSCd
;

856 
TComPicYuv
 *
pPicYuvBÙtom
 = (
CSC
==
IPCOLOURSPACE_UNCHANGED
è? 
pPicYuvU£rBÙtom
 : &
cPicYuvBÙtomCSCd
;

858 
BoÞ
 
is16b™
 = 
çl£
;

859 
BoÞ
 
nÚZ”oB™D•thShiá
=
çl£
;

861 
UIÁ
 
ch
=0; ch<
MAX_NUM_CHANNEL_TYPE
; ch++)

863 ià(
m_fžeB™d•th
[
ch
] > 8)

865 
is16b™
=
Œue
;

867 ià(
m_b™d•thShiá
[
ch
] != 0)

869 
nÚZ”oB™D•thShiá
=
Œue
;

873 
TComPicYuv
 *
d¡PicYuvTÝ
 = 
NULL
;

874 
TComPicYuv
 *
d¡PicYuvBÙtom
 = 
NULL
;

876 
UIÁ
 
f›ld
 = 0; field < 2; field++)

878 
TComPicYuv
 *
pPicYuv
 = (
f›ld
 =ð0è? 
pPicYuvTÝ
 : 
pPicYuvBÙtom
;

880 ià(
fÜm©
>=
NUM_CHROMA_FORMAT
)

882 
fÜm©
=
pPicYuv
->
	`g‘ChromaFÜm©
();

885 
TComPicYuv
* &
d¡PicYuv
 = (
f›ld
 =ð0è? 
d¡PicYuvTÝ
 : 
d¡PicYuvBÙtom
;

887 ià(
nÚZ”oB™D•thShiá
)

889 
d¡PicYuv
 = 
Ãw
 
TComPicYuv
;

890 
d¡PicYuv
->
	`ü—‹W™houtCUInfo
Ð
pPicYuv
->
	`g‘Width
(
COMPONENT_Y
),…PicYuv->
	`g‘Height
(COMPONENT_Y),…PicYuv->
	`g‘ChromaFÜm©
() );

892 
UIÁ
 
comp
=0; comp<
d¡PicYuv
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

894 cÚ¡ 
CompÚ’tID
 
compID
=
	`CompÚ’tID
(
comp
);

895 cÚ¡ 
ChªÃlTy³
 
ch
=
	`toChªÃlTy³
(
compID
);

896 cÚ¡ 
BoÞ
 
b709Com¶Ÿnû
=
bClToRec709
 && (-
m_b™d•thShiá
[
ch
] < 0 && 
m_MSBEx‹ndedB™D•th
[ch] >= 8);

897 cÚ¡ 
P–
 
mšv®
 = 
b709Com¶Ÿnû
? (Ð1 << (
m_MSBEx‹ndedB™D•th
[
ch
] - 8)) ) : 0;

898 cÚ¡ 
P–
 
maxv®
 = 
b709Com¶Ÿnû
? ((0xfà<< (
m_MSBEx‹ndedB™D•th
[
ch
] - 8)) -1) : (1 << m_MSBExtendedBitDepth[ch]) - 1;

900 
	`cÝyPÏÃ
(*
pPicYuv
, 
compID
, *
d¡PicYuv
, compID);

901 
	`sÿËPÏÃ
(
d¡PicYuv
->
	`g‘Addr
(
compID
), d¡PicYuv->
	`g‘SŒide
(compID), d¡PicYuv->
	`g‘Width
(compID), d¡PicYuv->
	`g‘Height
(compID), -
m_b™d•thShiá
[
ch
], 
mšv®
, 
maxv®
);

906 
d¡PicYuv
 = 
pPicYuv
;

910 
BoÞ
 
»tv®
 = 
Œue
;

912 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘Numb”V®idCompÚ’ts
(è=ð
d¡PicYuvBÙtom
->getNumberValidComponents());

913 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘ChromaFÜm©
(è=ð
d¡PicYuvBÙtom
->getChromaFormat() );

915 
UIÁ
 
comp
=0; 
»tv®
 && comp<
d¡PicYuvTÝ
->
	`g‘Numb”V®idCompÚ’ts
(); comp++)

917 cÚ¡ 
CompÚ’tID
 
compID
 = 
	`CompÚ’tID
(
comp
);

918 cÚ¡ 
ChªÃlTy³
 
ch
=
	`toChªÃlTy³
(
compID
);

920 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘Width
 (
compID
è=ð
d¡PicYuvBÙtom
->getWidth (compID));

921 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘Height
 (
compID
è=ð
d¡PicYuvBÙtom
->getHeight (compID));

922 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘CompÚ’tSÿËX
(
compID
è=ð
d¡PicYuvBÙtom
->getComponentScaleX(compID));

923 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘CompÚ’tSÿËY
(
compID
è=ð
d¡PicYuvBÙtom
->getComponentScaleY(compID));

924 
	`as£¹
(
d¡PicYuvTÝ
->
	`g‘SŒide
 (
compID
è=ð
d¡PicYuvBÙtom
->getStride (compID));

926 cÚ¡ 
UIÁ
 
width444
 = 
d¡PicYuvTÝ
->
	`g‘Width
(
COMPONENT_Y
è- (
cÚfLeá
 + 
cÚfRight
);

927 cÚ¡ 
UIÁ
 
height444
 = 
d¡PicYuvTÝ
->
	`g‘Height
(
COMPONENT_Y
è- (
cÚfTÝ
 + 
cÚfBÙtom
);

929 ià((
width444
 =ð0è|| (
height444
 == 0))

931 
	`´štf
 ("\nW¬nšg: wr™šg %d x %d†um¨§m¶ouuˆpiùu»!", 
width444
, 
height444
);

934 cÚ¡ 
UIÁ
 
csx
 = 
d¡PicYuvTÝ
->
	`g‘CompÚ’tSÿËX
(
compID
);

935 cÚ¡ 
UIÁ
 
csy
 = 
d¡PicYuvTÝ
->
	`g‘CompÚ’tSÿËY
(
compID
);

936 cÚ¡ 
IÁ
 
¶ªeOff£t
 = (
cÚfLeá
>>
csx
è+ ( 
cÚfTÝ
>>
csy
è* 
d¡PicYuvTÝ
->
	`g‘SŒide
(
compID
);

938 ià(! 
	`wr™eF›ld
(
m_cHªdË
,

939 (
d¡PicYuvTÝ
 ->
	`g‘Addr
(
compID
è+ 
¶ªeOff£t
),

940 (
d¡PicYuvBÙtom
->
	`g‘Addr
(
compID
è+ 
¶ªeOff£t
),

941 
is16b™
,

942 
d¡PicYuvTÝ
->
	`g‘SŒide
(
COMPONENT_Y
),

943 
width444
, 
height444
, 
compID
, 
d¡PicYuvTÝ
->
	`g‘ChromaFÜm©
(), 
fÜm©
, 
m_fžeB™d•th
[
ch
], 
isTff
))

945 
»tv®
=
çl£
;

949 ià(
nÚZ”oB™D•thShiá
)

951 
d¡PicYuvTÝ
->
	`de¡roy
();

952 
d¡PicYuvBÙtom
->
	`de¡roy
();

953 
d–‘e
 
d¡PicYuvTÝ
;

954 
d–‘e
 
d¡PicYuvBÙtom
;

957 
cPicYuvTÝCSCd
.
	`de¡roy
();

958 
cPicYuvBÙtomCSCd
.
	`de¡roy
();

960  
»tv®
;

961 
	}
}

963 
Void


964 
	$cÝyPÏÃ
(cÚ¡ 
TComPicYuv
 &
¤c
, cÚ¡ 
CompÚ’tID
 
¤cPÏÃ
, TComPicYuv &
de¡
, cÚ¡ CompÚ’tID 
de¡PÏÃ
)

966 cÚ¡ 
UIÁ
 
width
=
¤c
.
	`g‘Width
(
¤cPÏÃ
);

967 cÚ¡ 
UIÁ
 
height
=
¤c
.
	`g‘Height
(
¤cPÏÃ
);

968 
	`as£¹
(
de¡
.
	`g‘Width
(
de¡PÏÃ
è=ð
width
);

969 
	`as£¹
(
de¡
.
	`g‘Height
(
de¡PÏÃ
è=ð
height
);

970 cÚ¡ 
P–
 *
pSrc
=
¤c
.
	`g‘Addr
(
¤cPÏÃ
);

971 
P–
 *
pDe¡
=
de¡
.
	`g‘Addr
(
de¡PÏÃ
);

972 cÚ¡ 
UIÁ
 
¡rideSrc
=
¤c
.
	`g‘SŒide
(
¤cPÏÃ
);

973 cÚ¡ 
UIÁ
 
¡rideDe¡
=
de¡
.
	`g‘SŒide
(
de¡PÏÃ
);

974 
UIÁ
 
y
=0; y<
height
; y++, 
pSrc
+=
¡rideSrc
, 
pDe¡
+=
¡rideDe¡
)

976 
	`memýy
(
pDe¡
, 
pSrc
, 
width
*(
P–
));

978 
	}
}

981 
Void
 
	gTVideoIOYuv
::
	$CÞourS·ûCÚv”t
(cÚ¡ 
TComPicYuv
 &
¤c
, TComPicYuv &
de¡
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
cÚv”siÚ
, 
BoÞ
 
bIsFÜw¬ds
)

983 cÚ¡ 
ChromaFÜm©
 
fÜm©
=
¤c
.
	`g‘ChromaFÜm©
();

984 cÚ¡ 
UIÁ
 
numV®idComp
=
¤c
.
	`g‘Numb”V®idCompÚ’ts
();

986 
cÚv”siÚ
)

988 
IPCOLOURSPACE_YCbC¹oYYY
:

989 ià(
fÜm©
!=
CHROMA_444
)

992 
	`as£¹
(
fÜm©
==
CHROMA_444
);

993 
	`ex™
(1);

997 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

999 
	`cÝyPÏÃ
(
¤c
, 
	`CompÚ’tID
(
bIsFÜw¬ds
?0:
comp
), 
de¡
, ComponentID(comp));

1003 
IPCOLOURSPACE_YCbC¹oYCrCb
:

1005 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

1007 
	`cÝyPÏÃ
(
¤c
, 
	`CompÚ’tID
(
comp
), 
de¡
, CompÚ’tID((
numV®idComp
-comp)%numValidComp));

1012 
IPCOLOURSPACE_RGBtoGBR
:

1014 ià(
fÜm©
!=
CHROMA_444
)

1017 
	`as£¹
(
fÜm©
==
CHROMA_444
);

1018 
	`ex™
(1);

1022 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

1024 cÚ¡ 
CompÚ’tID
 
compID¤c
=
	`CompÚ’tID
((
comp
+1)%
numV®idComp
);

1025 cÚ¡ 
CompÚ’tID
 
compIDd¡
=
	`CompÚ’tID
(
comp
);

1026 
	`cÝyPÏÃ
(
¤c
, 
bIsFÜw¬ds
?
compID¤c
:
compIDd¡
, 
de¡
, bIsForwards?compIDdst:compIDsrc);

1031 
IPCOLOURSPACE_UNCHANGED
:

1034 
UIÁ
 
comp
=0; comp<
numV®idComp
; comp++)

1036 
	`cÝyPÏÃ
(
¤c
, 
	`CompÚ’tID
(
comp
), 
de¡
, ComponentID(comp));

1041 
	}
}

	@source/Lib/Utilities/TVideoIOYuv.h

38 #iâdeà
__TVIDEOIOYUV__


39 
	#__TVIDEOIOYUV__


	)

41 
	~<¡dio.h
>

42 
	~<f¡»am
>

43 
	~<io¡»am
>

44 
	~"TLibCommÚ/CommÚDef.h
"

45 
	~"TLibCommÚ/TComPicYuv.h
"

47 
usšg
 
Çme¥aû
 
	g¡d
;

54 þas 
	cTVideoIOYuv


56 
	m´iv©e
:

57 
f¡»am
 
m_cHªdË
;

58 
IÁ
 
	mm_fžeB™d•th
[
MAX_NUM_CHANNEL_TYPE
];

59 
IÁ
 
	mm_MSBEx‹ndedB™D•th
[
MAX_NUM_CHANNEL_TYPE
];

60 
IÁ
 
	mm_b™d•thShiá
[
MAX_NUM_CHANNEL_TYPE
];

62 
	mpublic
:

63 
	$TVideoIOYuv
() {}

64 
vœtu®
 ~
	$TVideoIOYuv
(è{
	}
}

66 
Void
 
Ý’
 ( cÚ¡ 
¡d
::
¡ršg
 &
fžeName
, 
BoÞ
 
bWr™eMode
, cÚ¡ 
IÁ
 
fžeB™D•th
[
MAX_NUM_CHANNEL_TYPE
], cÚ¡ IÁ 
MSBEx‹ndedB™D•th
[MAX_NUM_CHANNEL_TYPE], cÚ¡ IÁ 
š‹º®B™D•th
[MAX_NUM_CHANNEL_TYPE] );

67 
Void
 
þo£
 ();

69 
Void
 
skF¿mes
(
IÁ
 
numF¿mes
, 
UIÁ
 
width
, UIÁ 
height
, 
ChromaFÜm©
 
fÜm©
);

75 
BoÞ
 
»ad
 ( 
TComPicYuv
* 
pPicYuv
, TComPicYuv* 
pPicYuvTrueOrg
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
csc
, 
IÁ
 
aiPad
[2], 
ChromaFÜm©
 
fžeFÜm©
=
NUM_CHROMA_FORMAT
, cÚ¡ BoÞ 
bClToRec709
=
çl£
 );

78 
BoÞ
 
wr™e
 ( 
TComPicYuv
* 
pPicYuv
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, 
IÁ
 
cÚfLeá
=0, IÁ 
cÚfRight
=0, IÁ 
cÚfTÝ
=0, IÁ 
cÚfBÙtom
=0, 
ChromaFÜm©
 
fžeFÜm©
=
NUM_CHROMA_FORMAT
, cÚ¡ BoÞ 
bClToRec709
=
çl£
 );

81 
BoÞ
 
wr™e
 ( 
TComPicYuv
* 
pPicYuvTÝ
, TComPicYuv* 
pPicYuvBÙtom
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
CSC
, 
IÁ
 
cÚfLeá
=0, IÁ 
cÚfRight
=0, IÁ 
cÚfTÝ
=0, IÁ 
cÚfBÙtom
=0, 
ChromaFÜm©
 
fžeFÜm©
=
NUM_CHROMA_FORMAT
, cÚ¡ BoÞ 
isTff
=
çl£
, cÚ¡ BoÞ 
bClToRec709
=false);

82 
Void
 
CÞourS·ûCÚv”t
(cÚ¡ 
TComPicYuv
 &
¤c
, TComPicYuv &
de¡
, cÚ¡ 
IÅutCÞourS·ûCÚv”siÚ
 
cÚv”siÚ
, 
BoÞ
 
bIsFÜw¬ds
);

84 
BoÞ
 
isEof
 ();

85 
BoÞ
 
isFaž
();

	@source/Lib/Utilities/program_options_lite.cpp

33 
	~<¡dlib.h
>

34 
	~<io¡»am
>

35 
	~<f¡»am
>

36 
	~<s¡»am
>

37 
	~<¡ršg
>

38 
	~<li¡
>

39 
	~<m­
>

40 
	~<®gÜ™hm
>

41 
	~"´og¿m_ÝtiÚs_l™e.h
"

43 
usšg
 
Çme¥aû
 
	g¡d
;

48 
Çme¥aû
 
	gdf


50 
Çme¥aû
 
	g´og¿m_ÝtiÚs_l™e


52 
E¼ÜR•Ü‹r
 
	gdeçuÉ_”rÜ_»pÜ‹r
;

54 
	go¡»am
& 
	gE¼ÜR•Ü‹r
::
”rÜ
(cÚ¡ 
¡ršg
& 
wh”e
)

56 
is_”rÜed
 = 1;

57 
	gû¼
 << 
	gwh”e
 << "ƒrror: ";

58  
	gû¼
;

61 
	go¡»am
& 
	gE¼ÜR•Ü‹r
::
w¬n
(cÚ¡ 
¡ršg
& 
wh”e
)

63 
û¼
 << 
wh”e
 << " warning: ";

64  
	gû¼
;

67 
	gO±iÚs
::~
O±iÚs
()

69 
O±iÚs
::
NamesPŒLi¡
::
™”©Ü
 
™
 = 
Ýt_li¡
.
begš
(); 
	g™
 !ðÝt_li¡.
’d
(); it++)

71 
d–‘e
 *
	g™
;

75 
	gO±iÚs
::
addO±iÚ
(
O±iÚBa£
 *
Ýt
)

77 
Names
* 
Çmes
 = 
Ãw
 Names();

78 
	gÇmes
->
	gÝt
 = 
Ýt
;

79 
	g¡ršg
& 
	gÝt_¡ršg
 = 
Ýt
->
Ýt_¡ršg
;

81 
size_t
 
	gÝt_¡¬t
 = 0;

82 
size_t
 
	gÝt_’d
 = 0; o±_’d !ð
¡ršg
::
Åos
;)

84 
	gÝt_’d
 = 
Ýt_¡ršg
.
fšd_fœ¡_of
(',', 
Ýt_¡¬t
);

85 
boÞ
 
	gfÜû_shÜt
 = 0;

86 ià(
	gÝt_¡ršg
[
Ýt_¡¬t
] == '-')

88 
Ýt_¡¬t
++;

89 
	gfÜû_shÜt
 = 1;

91 
¡ršg
 
	gÝt_Çme
 = 
Ýt_¡ršg
.
sub¡r
(
Ýt_¡¬t
, 
Ýt_’d
 - opt_start);

92 ià(
	gfÜû_shÜt
 || 
	gÝt_Çme
.
size
() == 1)

94 
Çmes
->
Ýt_shÜt
.
push_back
(
Ýt_Çme
);

95 
	gÝt_shÜt_m­
[
Ýt_Çme
].
push_back
(
Çmes
);

99 ià(
	gÝt_Çme
.
size
(è> 0 && o±_Çme.
back
() == '*')

101 
¡ršg
 
´efix_Çme
 = 
Ýt_Çme
.
sub¡r
(0, o±_Çme.
size
() - 1);

102 
	gÇmes
->
	gÝt_´efix
.
push_back
(
´efix_Çme
);

103 
	gÝt_´efix_m­
[
´efix_Çme
].
push_back
(
Çmes
);

107 
	gÇmes
->
	gÝt_lÚg
.
push_back
(
Ýt_Çme
);

108 
	gÝt_lÚg_m­
[
Ýt_Çme
].
push_back
(
Çmes
);

111 
	gÝt_¡¬t
 +ð
Ýt_’d
 + 1;

113 
	gÝt_li¡
.
push_back
(
Çmes
);

117 
O±iÚS³cific
 
	gO±iÚs
::
addO±iÚs
()

119  
O±iÚS³cific
(*
this
);

122 
£tO±iÚs
(
O±iÚs
::
NamesPŒLi¡
& 
Ýt_li¡
, cÚ¡ 
¡ršg
& 
v®ue
, 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
)

126 
	gO±iÚs
::
NamesPŒLi¡
::
™”©Ü
 
™
 = 
Ýt_li¡
.
begš
(); 
	g™
 !ðÝt_li¡.
’d
(); ++it)

128 (*
	g™
)->
	gÝt
->
·r£
(
v®ue
, 
”rÜ_»pÜ‹r
);

132 cÚ¡ 
	g¥aûs
[41] = " ";

138 
doH–pO±
(
o¡»am
& 
out
, cÚ¡ 
O±iÚs
::
Names
& 
’Œy
, 
·d_shÜt
 = 0)

140 
·d_shÜt
 = 
mš
(pad_short, 8u);

142 ià(!
	g’Œy
.
	gÝt_shÜt
.
em±y
())

144 
	g·d
 = 
max
(()
·d_shÜt
 - ()
’Œy
.
Ýt_shÜt
.
äÚt
().
size
(), 0);

145 
	gout
 << "-" << 
	g’Œy
.
	gÝt_shÜt
.
äÚt
();

146 ià(!
	g’Œy
.
	gÝt_lÚg
.
em±y
())

148 
	gout
 << ", ";

150 
	gout
 << &(
	g¥aûs
[40 - 
·d
]);

154 
	gout
 << " ";

155 
	gout
 << &(
	g¥aûs
[40 - 
·d_shÜt
]);

158 ià(!
	g’Œy
.
	gÝt_lÚg
.
em±y
())

160 
	gout
 << "--" << 
	g’Œy
.
	gÝt_lÚg
.
äÚt
();

162 ià(!
	g’Œy
.
	gÝt_´efix
.
em±y
())

164 
	gout
 << "--" << 
	g’Œy
.
	gÝt_´efix
.
äÚt
() << "*";

169 
doH–p
(
o¡»am
& 
out
, 
O±iÚs
& 
Ýts
, 
cÞumns
)

171 cÚ¡ 
	g·d_shÜt
 = 3;

173 
	gmax_width
 = 0;

174 
	gO±iÚs
::
NamesPŒLi¡
::
™”©Ü
 
™
 = 
Ýts
.
Ýt_li¡
.
begš
(); 
	g™
 !ðÝts.Ýt_li¡.
’d
(); it++)

176 
o¡ršg¡»am
 
lše
(
ios_ba£
::
out
);

177 
doH–pO±
(
lše
, **
™
, 
·d_shÜt
);

178 
	gmax_width
 = 
max
(
max_width
, (è
lše
.
‹Îp
());

181 
	gÝt_width
 = 
mš
(
max_width
+2, 28u + 
·d_shÜt
) + 2;

182 
	gdesc_width
 = 
cÞumns
 - 
Ýt_width
;

189 
	gO±iÚs
::
NamesPŒLi¡
::
™”©Ü
 
™
 = 
Ýts
.
Ýt_li¡
.
begš
(); 
	g™
 !ðÝts.Ýt_li¡.
’d
(); it++)

191 
o¡ršg¡»am
 
lše
(
ios_ba£
::
out
);

192 
	glše
 << " ";

193 
doH–pO±
(
lše
, **
™
, 
·d_shÜt
);

195 cÚ¡ 
	g¡ršg
& 
	gÝt_desc
 = (*
™
)->
Ýt
->
Ýt_desc
;

196 ià(
	gÝt_desc
.
em±y
())

199 
	gcout
 << 
	glše
.
¡r
(è<< 
	g’dl
;

202 
size_t
 
	gcu¼Ëngth
 = size_t(
lše
.
‹Îp
());

203 ià(
	gcu¼Ëngth
 > 
	gÝt_width
)

207 
	glše
 << 
	g’dl
;

208 
	gcu¼Ëngth
 = 0;

212 
size_t
 
	gÃwlše_pos
 = 0, 
	gcur_pos
 = 0; cur_po !ð
¡ršg
::
Åos
; 
	gcu¼Ëngth
 = 0)

215 
lše
 << &(
¥aûs
[40 - 
Ýt_width
 + 
cu¼Ëngth
]);

216 
	gÃwlše_pos
 = 
Ýt_desc
.
fšd_fœ¡_of
('\n', 
Ãwlše_pos
);

217 ià(
	gÃwlše_pos
 !ð
¡ršg
::
Åos
)

220 
Ãwlše_pos
++;

221 
	glše
 << 
	gÝt_desc
.
sub¡r
(
cur_pos
, 
Ãwlše_pos
 - cur_pos);

222 
	gcur_pos
 = 
Ãwlše_pos
;

225 ià(
	gcur_pos
 + 
	gdesc_width
 > 
	gÝt_desc
.
size
())

228 
	glše
 << 
	gÝt_desc
.
sub¡r
(
cur_pos
);

232 
size_t
 
	g¥l™_pos
 = 
Ýt_desc
.
fšd_Ï¡_of
(' ', 
cur_pos
 + 
desc_width
);

233 ià(
	g¥l™_pos
 !ð
¡ršg
::
Åos
)

236 
¥l™_pos
 = 
Ýt_desc
.
fšd_Ï¡_nÙ_of
(' ', split_pos) + 1;

240 
boÞ
 
	gbad_¥l™
 = 
¥l™_pos
 =ð
¡ršg
::
Åos
 || s¶™_po <ð
cur_pos
;

241 ià(
	gbad_¥l™
)

243 
	g¥l™_pos
 = 
cur_pos
 + 
desc_width
;

245 
	glše
 << 
	gÝt_desc
.
sub¡r
(
cur_pos
, 
¥l™_pos
 - cur_pos);

248 ià(!
	gbad_¥l™
)

250 
	g¥l™_pos
 = 
Ýt_desc
.
fšd_fœ¡_nÙ_of
(' ', 
¥l™_pos
);

252 
	gcur_pos
 = 
Ãwlše_pos
 = 
¥l™_pos
;

254 ià(
	gcur_pos
 >ð
Ýt_desc
.
size
())

258 
	glše
 << 
	g’dl
;

261 
	gcout
 << 
	glše
.
¡r
(è<< 
	g’dl
;

265 
	sO±iÚWr™”


267 
O±iÚWr™”
(
O±iÚs
& 
rO±s
, 
E¼ÜR•Ü‹r
& 
”r
)

268 : 
Ýts
(
rO±s
), 
”rÜ_»pÜ‹r
(
”r
)

270 
	gvœtu®
 ~
O±iÚWr™”
() {}

272 
vœtu®
 cÚ¡ 
¡ršg
 
wh”e
() = 0;

274 
boÞ
 
¡ÜePaœ
(boÞ 
®low_lÚg
, boÞ 
®low_shÜt
, cÚ¡ 
¡ršg
& 
Çme
, cÚ¡ sŒšg& 
v®ue
);

275 
boÞ
 
¡ÜePaœ
(cÚ¡ 
¡ršg
& 
Çme
, cÚ¡ sŒšg& 
v®ue
)

277  
¡ÜePaœ
(
Œue
,rue, 
Çme
, 
v®ue
);

280 
	gO±iÚs
& 
	gÝts
;

281 
	gE¼ÜR•Ü‹r
& 
	g”rÜ_»pÜ‹r
;

284 
boÞ
 
	gO±iÚWr™”
::
¡ÜePaœ
(boÞ 
®low_lÚg
, boÞ 
®low_shÜt
, cÚ¡ 
¡ršg
& 
Çme
, cÚ¡ sŒšg& 
v®ue
)

286 
boÞ
 
	gfound
 = 
çl£
;

287 
	g¡d
::
¡ršg
 
v®
 = 
v®ue
;

288 
	gO±iÚs
::
NamesM­
::
™”©Ü
 
Ýt_™
;

289 ià(
	g®low_lÚg
)

291 
	gÝt_™
 = 
Ýts
.
Ýt_lÚg_m­
.
fšd
(
Çme
);

292 ià(
	gÝt_™
 !ð
Ýts
.
Ýt_lÚg_m­
.
’d
())

294 
found
 = 
Œue
;

299 ià(
	g®low_shÜt
 && !(
	gfound
 && 
	g®low_lÚg
))

301 
	gÝt_™
 = 
Ýts
.
Ýt_shÜt_m­
.
fšd
(
Çme
);

302 ià(
	gÝt_™
 !ð
Ýts
.
Ýt_shÜt_m­
.
’d
())

304 
found
 = 
Œue
;

308 
boÞ
 
	g®low_´efix
 = 
®low_lÚg
;

309 ià(
	g®low_´efix
 && !
	gfound
)

311 
	gÝt_™
 = 
Ýts
.
Ýt_´efix_m­
.
begš
(); o±_™ !ðÝts.Ýt_´efix_m­.
’d
(); opt_it++)

313 
	g¡d
::
¡ršg
 
Çme_´efix
 = 
Çme
.
sub¡r
(0, 
Ýt_™
->
fœ¡
.
size
());

314 ià(
	gÇme_´efix
 =ð
Ýt_™
->
fœ¡
)

317 
v®
 = 
Çme
.
sub¡r
(
Çme_´efix
.
size
()è+ 
¡d
::
¡ršg
(" ") + val;

318 
	gfound
 = 
Œue
;

324 ià(!
	gfound
)

326 
	g”rÜ_»pÜ‹r
.
”rÜ
(
wh”e
())

327 << "UnknowÀÝtiÚ `" << 
	gÇme
 << "' (v®ue:`" << 
	gv®ue
 << "')\n";

328  
	gçl£
;

331 
£tO±iÚs
((*
Ýt_™
).
£cÚd
, 
v®
, 
”rÜ_»pÜ‹r
);

332  
	gŒue
;

335 
	gArgvP¬£r
 : 
public
 
O±iÚWr™”


337 
ArgvP¬£r
(
O±iÚs
& 
rO±s
, 
E¼ÜR•Ü‹r
& 
rE¼Ü_»pÜ‹r
)

338 : 
O±iÚWr™”
(
rO±s
, 
rE¼Ü_»pÜ‹r
)

341 cÚ¡ 
¡ršg
 
wh”e
() {  "command†ine"; }

343 
·r£GNU
(
¬gc
, cÚ¡ * 
¬gv
[]);

344 
·r£SHORT
(
¬gc
, cÚ¡ * 
¬gv
[]);

350 
	gArgvP¬£r
::
·r£GNU
(
¬gc
, cÚ¡ * 
¬gv
[])

356 
¡ršg
 
¬g
(
¬gv
[0]);

357 
size_t
 
	g¬g_Ýt_¡¬t
 = 
¬g
.
fšd_fœ¡_nÙ_of
('-');

358 
size_t
 
	g¬g_Ýt_£p
 = 
¬g
.
fšd_fœ¡_of
('=');

359 
¡ršg
 
	gÝtiÚ
 = 
¬g
.
sub¡r
(
¬g_Ýt_¡¬t
, 
¬g_Ýt_£p
 -‡rg_opt_start);

361 
	gexŒa_¬gc_cÚsumed
 = 0;

362 ià(
	g¬g_Ýt_£p
 =ð
¡ršg
::
Åos
)

370 ià(
¬gc
 == 1)

374 
	gexŒa_¬gc_cÚsumed
 = 1;

376 if(!
¡ÜePaœ
(
Œue
, 
çl£
, 
ÝtiÚ
, "1"))

384 
¡ršg
 
	gv®
 = 
¬g
.
sub¡r
(
¬g_Ýt_£p
 + 1);

385 
¡ÜePaœ
(
Œue
, 
çl£
, 
ÝtiÚ
, 
v®
);

388  
	gexŒa_¬gc_cÚsumed
;

391 
	gArgvP¬£r
::
·r£SHORT
(
¬gc
, cÚ¡ * 
¬gv
[])

397 
¡ršg
 
¬g
(
¬gv
[0]);

398 
size_t
 
	g¬g_Ýt_¡¬t
 = 
¬g
.
fšd_fœ¡_nÙ_of
('-');

399 
¡ršg
 
	gÝtiÚ
 = 
¬g
.
sub¡r
(
¬g_Ýt_¡¬t
);

404 ià(
	g¬gc
 == 1)

406 
”rÜ_»pÜ‹r
.
”rÜ
(
wh”e
())

407 << "NÙ…roûssšg o±iÚ `" << 
ÝtiÚ
 << "' without‡rgument\n";

410 
¡ÜePaœ
(
çl£
, 
Œue
, 
ÝtiÚ
, 
¡ršg
(
¬gv
[1]));

415 
	gli¡
<const *>

416 
sÿnArgv
(
O±iÚs
& 
Ýts
, 
¬gc
, cÚ¡ * 
¬gv
[], 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
)

418 
ArgvP¬£r
 
avp
(
Ýts
, 
”rÜ_»pÜ‹r
);

421 
	gli¡
<cÚ¡ *> 
	gnÚ_ÝtiÚ_¬gum’ts
;

423 
	gi
 = 1; i < 
	g¬gc
; i++)

425 ià(
	g¬gv
[
i
][0] != '-')

427 
nÚ_ÝtiÚ_¬gum’ts
.
push_back
(
¬gv
[
i
]);

431 ià(
	g¬gv
[
i
][1] == 0)

434 
nÚ_ÝtiÚ_¬gum’ts
.
push_back
(
¬gv
[
i
]);

438 ià(
	g¬gv
[
i
][1] != '-')

441 
i
 +ð
avp
.
·r£SHORT
(
¬gc
 - i, &
¬gv
[i]);

445 ià(
	g¬gv
[
i
][2] == 0)

448 ++
i
 < 
¬gc
)

450 
nÚ_ÝtiÚ_¬gum’ts
.
push_back
(
¬gv
[
i
]);

456 
	gi
 +ð
avp
.
·r£GNU
(
¬gc
 - 
i
, &
¬gv
[i]);

459  
	gnÚ_ÝtiÚ_¬gum’ts
;

462 
	gCfgSŒ—mP¬£r
 : 
public
 
O±iÚWr™”


464 
CfgSŒ—mP¬£r
(cÚ¡ 
¡ršg
& 
rName
, 
O±iÚs
& 
rO±s
, 
E¼ÜR•Ü‹r
& 
rE¼Ü_»pÜ‹r
)

465 : 
O±iÚWr™”
(
rO±s
, 
rE¼Ü_»pÜ‹r
)

466 , 
Çme
(
rName
)

467 , 
lš’um
(0)

470 cÚ¡ 
¡ršg
 
	gÇme
;

471 
	glš’um
;

472 cÚ¡ 
¡ršg
 
wh”e
()

474 
o¡ršg¡»am
 
	gos
;

475 
	gos
 << 
	gÇme
 << ":" << 
	glš’um
;

476  
	gos
.
¡r
();

479 
sÿnLše
(
¡ršg
& 
lše
);

480 
sÿnSŒ—m
(
i¡»am
& 
š
);

483 
	gCfgSŒ—mP¬£r
::
sÿnLše
(
¡ršg
& 
lše
)

486 
size_t
 
¡¬t
 = 
lše
.
fšd_fœ¡_nÙ_of
(" \t\n\r");

487 ià(
	g¡¬t
 =ð
¡ršg
::
Åos
)

492 ià(
	glše
[
¡¬t
] == '#')

498 
size_t
 
	gÝtiÚ_’d
 = 
lše
.
fšd_fœ¡_of
(": \t\n\r",
¡¬t
);

499 
¡ršg
 
	gÝtiÚ
 = 
lše
.
sub¡r
(
¡¬t
, 
ÝtiÚ_’d
 - start);

502 
	g¡¬t
 = 
lše
.
fšd_fœ¡_nÙ_of
(" \t\n\r", 
ÝtiÚ_’d
);

503 ià(
	g¡¬t
 =ð
¡ršg
::
Åos
)

506 
”rÜ_»pÜ‹r
.
w¬n
(
wh”e
()) << "line formattingƒrror\n";

509 ià(
	glše
[
¡¬t
] != ':')

512 
”rÜ_»pÜ‹r
.
w¬n
(
wh”e
()) << "line formattingƒrror\n";

517 
	g¡¬t
 = 
lše
.
fšd_fœ¡_nÙ_of
(" \t\n\r", ++
¡¬t
);

518 ià(
	g¡¬t
 =ð
¡ršg
::
Åos
)

521 
”rÜ_»pÜ‹r
.
w¬n
(
wh”e
()) << "line formattingƒrror\n";

527 
size_t
 
	gv®ue_’d
 = 
¡¬t
;

530 ià(
	glše
[
v®ue_’d
] == '#')

533 
v®ue_’d
--;

536 
	gv®ue_’d
 = 
lše
.
fšd_fœ¡_of
(" \t\n\r", 
v®ue_’d
);

539 
	gv®ue_’d
 = 
lše
.
fšd_fœ¡_nÙ_of
(" \t\n\r", 
v®ue_’d
);

540 } 
	gv®ue_’d
 !ð
¡ršg
::
Åos
);

542 
	gv®ue_’d
 = 
lše
.
fšd_Ï¡_nÙ_of
(" \t\n\r", 
v®ue_’d
);

544 
¡ršg
 
	gv®ue
;

545 ià(
	gv®ue_’d
 >ð
¡¬t
)

547 
v®ue
 = 
lše
.
sub¡r
(
¡¬t
, 
v®ue_’d
 +1 - start);

552 
	g”rÜ_»pÜ‹r
.
w¬n
(
wh”e
()) << "no value found\n";

557 
¡ÜePaœ
(
Œue
, 
çl£
, 
ÝtiÚ
, 
v®ue
);

560 
	gCfgSŒ—mP¬£r
::
sÿnSŒ—m
(
i¡»am
& 
š
)

564 
lš’um
++;

565 
¡ršg
 
	glše
;

566 
g‘lše
(
š
, 
lše
);

567 
sÿnLše
(
lše
);

568 } !!
	gš
);

573 
£tDeçuÉs
(
O±iÚs
& 
Ýts
)

575 
	gO±iÚs
::
NamesPŒLi¡
::
™”©Ü
 
™
 = 
Ýts
.
Ýt_li¡
.
begš
(); 
	g™
 !ðÝts.Ýt_li¡.
’d
(); it++)

577 (*
	g™
)->
	gÝt
->
£tDeçuÉ
();

581 
·r£CÚfigFže
(
O±iÚs
& 
Ýts
, cÚ¡ 
¡ršg
& 
fž’ame
, 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
)

583 
if¡»am
 
cfg¡»am
(
fž’ame
.
c_¡r
(), if¡»am::
š
);

584 ià(!
	gcfg¡»am
)

586 
	g”rÜ_»pÜ‹r
.
”rÜ
(
fž’ame
) << "Failedo open config file\n";

589 
CfgSŒ—mP¬£r
 
c¥
(
fž’ame
, 
Ýts
, 
”rÜ_»pÜ‹r
);

590 
	gc¥
.
sÿnSŒ—m
(
cfg¡»am
);

	@source/Lib/Utilities/program_options_lite.h

33 
	~<io¡»am
>

34 
	~<s¡»am
>

35 
	~<¡ršg
>

36 
	~<li¡
>

37 
	~<m­
>

39 #iâdeà
__PROGRAM_OPTIONS_LITE__


40 
	#__PROGRAM_OPTIONS_LITE__


	)

46 
Çme¥aû
 
	gdf


48 
Çme¥aû
 
	g´og¿m_ÝtiÚs_l™e


50 
	gO±iÚs
;

52 
	gP¬£Fažu»
 : 
public
 
¡d
::
exû±iÚ


54 
P¬£Fažu»
(
¡d
::
¡ršg
 
¬g0
, std::¡ršg 
v®0
è
throw
()

55 : 
¬g
(
¬g0
), 
v®
(
v®0
)

58 ~
P¬£Fažu»
(è
throw
() {};

60 
	g¡d
::
¡ršg
 
¬g
;

61 
	g¡d
::
¡ršg
 
v®
;

63 cÚ¡ * 
wh©
(ècÚ¡ 
throw
() {  "Option Parse Failure"; }

66 
	sE¼ÜR•Ü‹r


68 
E¼ÜR•Ü‹r
(è: 
is_”rÜed
(0) {}

69 
vœtu®
 ~
E¼ÜR•Ü‹r
() {}

70 
vœtu®
 
¡d
::
o¡»am
& 
”rÜ
(cÚ¡ std::
¡ršg
& 
wh”e
);

71 
vœtu®
 
	g¡d
::
o¡»am
& 
w¬n
(cÚ¡ 
¡d
::
¡ršg
& 
wh”e
);

72 
boÞ
 
	gis_”rÜed
;

75 
E¼ÜR•Ü‹r
 
deçuÉ_”rÜ_»pÜ‹r
;

77 
doH–p
(
¡d
::
o¡»am
& 
out
, 
O±iÚs
& 
Ýts
, 
cÞumns
 = 80);

78 
	g¡d
::
li¡
<cÚ¡ *> 
sÿnArgv
(
O±iÚs
& 
Ýts
, 
¬gc
, cÚ¡ * 
¬gv
[], 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
 = 
deçuÉ_”rÜ_»pÜ‹r
);

79 
£tDeçuÉs
(
O±iÚs
& 
Ýts
);

80 
·r£CÚfigFže
(
O±iÚs
& 
Ýts
, cÚ¡ 
¡d
::
¡ršg
& 
fž’ame
, 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
 = 
deçuÉ_”rÜ_»pÜ‹r
);

85 
	sO±iÚBa£


87 
O±iÚBa£
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, cÚ¡ std::¡ršg& 
desc
)

88 : 
Ýt_¡ršg
(
Çme
), 
Ýt_desc
(
desc
)

91 
	gvœtu®
 ~
O±iÚBa£
() {}

94 
vœtu®
 
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
¬g
, 
E¼ÜR•Ü‹r
&) = 0;

96 
vœtu®
 
£tDeçuÉ
() = 0;

98 
	g¡d
::
¡ršg
 
Ýt_¡ršg
;

99 
	g¡d
::
¡ršg
 
Ýt_desc
;

103 
	g‹m¶©e
<
ty³Çme
 
	gT
>

104 
	gO±iÚ
 : 
public
 
O±iÚBa£


106 
O±iÚ
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
T
& 
¡Üage
, T 
deçuÉ_v®
, cÚ¡ std::¡ršg& 
desc
)

107 : 
O±iÚBa£
(
Çme
, 
desc
), 
Ýt_¡Üage
(
¡Üage
), 
Ýt_deçuÉ_v®
(
deçuÉ_v®
)

110 
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
¬g
, 
E¼ÜR•Ü‹r
&);

112 
£tDeçuÉ
()

114 
	gÝt_¡Üage
 = 
Ýt_deçuÉ_v®
;

117 
	gT
& 
	gÝt_¡Üage
;

118 
T
 
	gÝt_deçuÉ_v®
;

122 
	g‹m¶©e
<
ty³Çme
 
	gT
>

123 
šlše
 

124 
	gO±iÚ
<
	gT
>::
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
¬g
, 
E¼ÜR•Ü‹r
&)

126 
	g¡d
::
i¡ršg¡»am
 
¬g_ss
 (
¬g
,
¡d
::i¡ršg¡»am::
š
);

127 
	g¬g_ss
.
exû±iÚs
(
¡d
::
ios
::
çžb™
);

128 
	gŒy


130 
	g¬g_ss
 >> 
	gÝt_¡Üage
;

132 
ÿtch
 (...)

134 
throw
 
P¬£Fažu»
(
Ýt_¡ršg
, 
¬g
);

140 
	g‹m¶©e
<>

141 
šlše
 

142 
	gO±iÚ
<
	g¡d
::
¡ršg
>::
·r£
(cÚ¡ 
¡d
::¡ršg& 
¬g
, 
E¼ÜR•Ü‹r
&)

144 
	gÝt_¡Üage
 = 
¬g
;

148 
	gO±iÚFunc
 : 
public
 
O±iÚBa£


150 (
Func
)(
	tO±iÚs
&, cÚ¡ 
	t¡d
::
	t¡ršg
&, 
	tE¼ÜR•Ü‹r
&);

152 
O±iÚFunc
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
O±iÚs
& 
·»Á_
, 
Func
 *
func_
, cÚ¡ std::¡ršg& 
desc
)

153 : 
O±iÚBa£
(
Çme
, 
desc
), 
·»Á
(
·»Á_
), 
func
(
func_
)

156 
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
¬g
, 
E¼ÜR•Ü‹r
& 
”rÜ_»pÜ‹r
)

158 
func
(
·»Á
, 
¬g
, 
”rÜ_»pÜ‹r
);

161 
£tDeçuÉ
()

166 
	g´iv©e
:

167 
O±iÚs
& 
·»Á
;

168 
Func
* 
	gfunc
;

171 
þass
 
	gO±iÚS³cific
;

172 
	sO±iÚs


174 ~
O±iÚs
();

176 
O±iÚS³cific
 
addO±iÚs
();

178 
	sNames


180 
Names
(è: 
Ýt
(0) {};

181 ~
Names
()

183 ià(
	gÝt
)

185 
d–‘e
 
	gÝt
;

188 
	g¡d
::
li¡
<
¡d
::
¡ršg
> 
Ýt_lÚg
;

189 
	g¡d
::
li¡
<
¡d
::
¡ršg
> 
Ýt_´efix
;

190 
	g¡d
::
li¡
<
¡d
::
¡ršg
> 
Ýt_shÜt
;

191 
O±iÚBa£
* 
	gÝt
;

194 
addO±iÚ
(
O±iÚBa£
 *
Ýt
);

196 
	g¡d
::
	tli¡
<
	tNames
*> 
	tNamesPŒLi¡
;

197 
NamesPŒLi¡
 
	gÝt_li¡
;

199 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tNamesPŒLi¡
> 
	tNamesM­
;

200 
NamesM­
 
	gÝt_lÚg_m­
;

201 
NamesM­
 
	gÝt_shÜt_m­
;

202 
NamesM­
 
	gÝt_´efix_m­
;

206 þas 
	cO±iÚS³cific


208 
	gpublic
:

209 
O±iÚS³cific
(
O±iÚs
& 
·»Á_
è: 
·»Á
(parent_) {}

217 
‹m¶©e
<
ty³Çme
 
T
>

218 
O±iÚS³cific
&

219 
Ý”©Ü
()(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
	gT
& 
	g¡Üage
, 
T
 
	gdeçuÉ_v®
, cÚ¡ 
	g¡d
::¡ršg& 
desc
 = "")

221 
·»Á
.
addO±iÚ
(
Ãw
 
O±iÚ
<
T
>(
Çme
, 
¡Üage
, 
deçuÉ_v®
, 
desc
));

222  *
	gthis
;

232 
	gO±iÚS³cific
&

233 
Ý”©Ü
()(cÚ¡ 
	g¡d
::
¡ršg
& 
Çme
, 
	gO±iÚFunc
::
Func
 *
func
, cÚ¡ std::¡ršg& 
desc
 = "")

235 
·»Á
.
addO±iÚ
(
Ãw
 
O±iÚFunc
(
Çme
,…¬’t, 
func
, 
desc
));

236  *
	gthis
;

238 
	g´iv©e
:

239 
O±iÚs
& 
·»Á
;

	@source/Lib/libmd5/MD5.h

33 #´agm¨
Úû


34 
	~"libmd5.h
"

35 
	~<¡ršg
>

40 cÚ¡ 
UIÁ
 
	gMD5_DIGEST_STRING_LENGTH
=16;

42 þas 
	cMD5


44 
	mpublic
:

48 
	$MD5
()

50 
	`MD5In™
(&
m_¡©e
);

57 
	$upd©e
(*
buf
, 
Ën
)

59 
	`MD5Upd©e
(&
m_¡©e
, 
buf
, 
Ën
);

60 
	}
}

65 
	$fš®ize
(
dige¡
[
MD5_DIGEST_STRING_LENGTH
])

67 
	`MD5Fš®
(
dige¡
, &
m_¡©e
);

68 
	}
}

70 
	g´iv©e
:

71 
cÚ‹xt_md5_t
 
m_¡©e
;

	@source/Lib/libmd5/libmd5.cpp

16 
	~<¡dšt.h
>

17 
	~<¡ršg.h
>

18 
	~"libmd5.h
"

23 
MD5T¿nsfÜm
(
ušt32_t
 
buf
[4], ušt32_ˆcÚ¡ 
š
[16]);

25 #iâdeà
__BIG_ENDIAN__


26 
	#by‹Rev”£
(
buf
, 
Ën
è

	)

28 
by‹Rev”£
(
ušt32_t
 *
buf
, 
Ën
);

32 
	$by‹Rev”£
(
ušt32_t
 *
buf
, 
Ën
)

34 
ušt32_t
 
t
;

36 * 
by‹s
 = (*è
buf
;

37 
t
 = ((è
by‹s
[3] << 8 | bytes[2]) << 16 |

38 ((è
by‹s
[1] << 8 | bytes[0]);

39 *
buf
 = 
t
;

40 
buf
++;

41 } --
Ën
);

42 
	}
}

49 
	$MD5In™
(
cÚ‹xt_md5_t
 *
ùx
)

51 
ùx
->
buf
[0] = 0x67452301;

52 
ùx
->
buf
[1] = 0xefcdab89;

53 
ùx
->
buf
[2] = 0x98badcfe;

54 
ùx
->
buf
[3] = 0x10325476;

56 
ùx
->
b™s
[0] = 0;

57 
ùx
->
b™s
[1] = 0;

58 
	}
}

64 
	$MD5Upd©e
(
cÚ‹xt_md5_t
 *
ùx
, *
buf
, 
Ën
)

66 
ušt32_t
 
t
;

70 
t
 = 
ùx
->
b™s
[0];

71 ià((
ùx
->
b™s
[0] = 
t
 + ((
ušt32_t
è
Ën
 << 3)) <)

72 
ùx
->
b™s
[1]++;

73 
ùx
->
b™s
[1] +ð
Ën
 >> 29;

75 
t
 = (t >> 3) & 0x3f;

79 ià(
t
) {

80 *
p
 = 
ùx
->
š
.
b8
 + 
t
;

82 
t
 = 64 -;

83 ià(
Ën
 < 
t
) {

84 
	`memýy
(
p
, 
buf
, 
Ën
);

87 
	`memýy
(
p
, 
buf
, 
t
);

88 
	`by‹Rev”£
(
ùx
->
š
.
b32
, 16);

89 
	`MD5T¿nsfÜm
(
ùx
->
buf
, ctx->
š
.
b32
);

90 
buf
 +ð
t
;

91 
Ën
 -ð
t
;

95 
Ën
 >= 64) {

96 
	`memýy
(
ùx
->
š
.
b8
, 
buf
, 64);

97 
	`by‹Rev”£
(
ùx
->
š
.
b32
, 16);

98 
	`MD5T¿nsfÜm
(
ùx
->
buf
, ctx->
š
.
b32
);

99 
buf
 += 64;

100 
Ën
 -= 64;

105 
	`memýy
(
ùx
->
š
.
b8
, 
buf
, 
Ën
);

106 
	}
}

112 
	$MD5Fš®
(
dige¡
[16], 
cÚ‹xt_md5_t
 *
ùx
)

114 
couÁ
;

115 *
p
;

118 
couÁ
 = (
ùx
->
b™s
[0] >> 3) & 0x3F;

122 
p
 = 
ùx
->
š
.
b8
 + 
couÁ
;

123 *
p
++ = 0x80;

126 
couÁ
 = 64 - 1 - count;

129 ià(
couÁ
 < 8) {

131 
	`mem£t
(
p
, 0, 
couÁ
);

132 
	`by‹Rev”£
(
ùx
->
š
.
b32
, 16);

133 
	`MD5T¿nsfÜm
(
ùx
->
buf
, ctx->
š
.
b32
);

136 
	`mem£t
(
ùx
->
š
.
b8
, 0, 56);

139 
	`mem£t
(
p
, 0, 
couÁ
 - 8);

141 
	`by‹Rev”£
(
ùx
->
š
.
b32
, 14);

144 
ùx
->
š
.
b32
[14] = ctx->
b™s
[0];

145 
ùx
->
š
.
b32
[15] = ctx->
b™s
[1];

147 
	`MD5T¿nsfÜm
(
ùx
->
buf
, ctx->
š
.
b32
);

148 
	`by‹Rev”£
((
ušt32_t
 *è
ùx
->
buf
, 4);

149 
	`memýy
(
dige¡
, 
ùx
->
buf
, 16);

151 
	`mem£t
(
ùx
, 0, (* ctx));

156 
	}
}

161 
	#F1
(
x
, 
y
, 
z
è(z ^ (x & (y ^ z)))

	)

162 
	#F2
(
x
, 
y
, 
z
è
	`F1
(z, x, y)

	)

163 
	#F3
(
x
, 
y
, 
z
è(x ^ y ^ z)

	)

164 
	#F4
(
x
, 
y
, 
z
è(y ^ (x | ~z))

	)

167 
	#MD5STEP
(
f
, 
w
, 
x
, 
y
, 
z
, 
d©a
, 
s
) \

168 Ð
w
 +ð
	`f
(
x
, 
y
, 
z
è+ 
d©a
, w = w<<
s
 | w>>(32-s), w +ðx )

	)

175 
	$MD5T¿nsfÜm
(
ušt32_t
 
buf
[4], ušt32_ˆcÚ¡ 
š
[16])

177 
ušt32_t
 
a
, 
b
, 
c
, 
d
;

179 
a
 = 
buf
[0];

180 
b
 = 
buf
[1];

181 
c
 = 
buf
[2];

182 
d
 = 
buf
[3];

184 
	`MD5STEP
(
F1
, 
a
, 
b
, 
c
, 
d
, 
š
[0] + 0xd76aa478, 7);

185 
	`MD5STEP
(
F1
, 
d
, 
a
, 
b
, 
c
, 
š
[1] + 0xe8c7b756, 12);

186 
	`MD5STEP
(
F1
, 
c
, 
d
, 
a
, 
b
, 
š
[2] + 0x242070db, 17);

187 
	`MD5STEP
(
F1
, 
b
, 
c
, 
d
, 
a
, 
š
[3] + 0xc1bdceee, 22);

188 
	`MD5STEP
(
F1
, 
a
, 
b
, 
c
, 
d
, 
š
[4] + 0xf57c0faf, 7);

189 
	`MD5STEP
(
F1
, 
d
, 
a
, 
b
, 
c
, 
š
[5] + 0x4787c62a, 12);

190 
	`MD5STEP
(
F1
, 
c
, 
d
, 
a
, 
b
, 
š
[6] + 0xa8304613, 17);

191 
	`MD5STEP
(
F1
, 
b
, 
c
, 
d
, 
a
, 
š
[7] + 0xfd469501, 22);

192 
	`MD5STEP
(
F1
, 
a
, 
b
, 
c
, 
d
, 
š
[8] + 0x698098d8, 7);

193 
	`MD5STEP
(
F1
, 
d
, 
a
, 
b
, 
c
, 
š
[9] + 0x8b44f7af, 12);

194 
	`MD5STEP
(
F1
, 
c
, 
d
, 
a
, 
b
, 
š
[10] + 0xffff5bb1, 17);

195 
	`MD5STEP
(
F1
, 
b
, 
c
, 
d
, 
a
, 
š
[11] + 0x895cd7be, 22);

196 
	`MD5STEP
(
F1
, 
a
, 
b
, 
c
, 
d
, 
š
[12] + 0x6b901122, 7);

197 
	`MD5STEP
(
F1
, 
d
, 
a
, 
b
, 
c
, 
š
[13] + 0xfd987193, 12);

198 
	`MD5STEP
(
F1
, 
c
, 
d
, 
a
, 
b
, 
š
[14] + 0xa679438e, 17);

199 
	`MD5STEP
(
F1
, 
b
, 
c
, 
d
, 
a
, 
š
[15] + 0x49b40821, 22);

201 
	`MD5STEP
(
F2
, 
a
, 
b
, 
c
, 
d
, 
š
[1] + 0xf61e2562, 5);

202 
	`MD5STEP
(
F2
, 
d
, 
a
, 
b
, 
c
, 
š
[6] + 0xc040b340, 9);

203 
	`MD5STEP
(
F2
, 
c
, 
d
, 
a
, 
b
, 
š
[11] + 0x265e5a51, 14);

204 
	`MD5STEP
(
F2
, 
b
, 
c
, 
d
, 
a
, 
š
[0] + 0xe9b6c7aa, 20);

205 
	`MD5STEP
(
F2
, 
a
, 
b
, 
c
, 
d
, 
š
[5] + 0xd62f105d, 5);

206 
	`MD5STEP
(
F2
, 
d
, 
a
, 
b
, 
c
, 
š
[10] + 0x02441453, 9);

207 
	`MD5STEP
(
F2
, 
c
, 
d
, 
a
, 
b
, 
š
[15] + 0xd8a1e681, 14);

208 
	`MD5STEP
(
F2
, 
b
, 
c
, 
d
, 
a
, 
š
[4] + 0xe7d3fbc8, 20);

209 
	`MD5STEP
(
F2
, 
a
, 
b
, 
c
, 
d
, 
š
[9] + 0x21e1cde6, 5);

210 
	`MD5STEP
(
F2
, 
d
, 
a
, 
b
, 
c
, 
š
[14] + 0xc33707d6, 9);

211 
	`MD5STEP
(
F2
, 
c
, 
d
, 
a
, 
b
, 
š
[3] + 0xf4d50d87, 14);

212 
	`MD5STEP
(
F2
, 
b
, 
c
, 
d
, 
a
, 
š
[8] + 0x455a14ed, 20);

213 
	`MD5STEP
(
F2
, 
a
, 
b
, 
c
, 
d
, 
š
[13] + 0xa9e3e905, 5);

214 
	`MD5STEP
(
F2
, 
d
, 
a
, 
b
, 
c
, 
š
[2] + 0xfcefa3f8, 9);

215 
	`MD5STEP
(
F2
, 
c
, 
d
, 
a
, 
b
, 
š
[7] + 0x676f02d9, 14);

216 
	`MD5STEP
(
F2
, 
b
, 
c
, 
d
, 
a
, 
š
[12] + 0x8d2a4c8a, 20);

218 
	`MD5STEP
(
F3
, 
a
, 
b
, 
c
, 
d
, 
š
[5] + 0xfffa3942, 4);

219 
	`MD5STEP
(
F3
, 
d
, 
a
, 
b
, 
c
, 
š
[8] + 0x8771f681, 11);

220 
	`MD5STEP
(
F3
, 
c
, 
d
, 
a
, 
b
, 
š
[11] + 0x6d9d6122, 16);

221 
	`MD5STEP
(
F3
, 
b
, 
c
, 
d
, 
a
, 
š
[14] + 0xfde5380c, 23);

222 
	`MD5STEP
(
F3
, 
a
, 
b
, 
c
, 
d
, 
š
[1] + 0xa4beea44, 4);

223 
	`MD5STEP
(
F3
, 
d
, 
a
, 
b
, 
c
, 
š
[4] + 0x4bdecfa9, 11);

224 
	`MD5STEP
(
F3
, 
c
, 
d
, 
a
, 
b
, 
š
[7] + 0xf6bb4b60, 16);

225 
	`MD5STEP
(
F3
, 
b
, 
c
, 
d
, 
a
, 
š
[10] + 0xbebfbc70, 23);

226 
	`MD5STEP
(
F3
, 
a
, 
b
, 
c
, 
d
, 
š
[13] + 0x289b7ec6, 4);

227 
	`MD5STEP
(
F3
, 
d
, 
a
, 
b
, 
c
, 
š
[0] + 0xeaa127fa, 11);

228 
	`MD5STEP
(
F3
, 
c
, 
d
, 
a
, 
b
, 
š
[3] + 0xd4ef3085, 16);

229 
	`MD5STEP
(
F3
, 
b
, 
c
, 
d
, 
a
, 
š
[6] + 0x04881d05, 23);

230 
	`MD5STEP
(
F3
, 
a
, 
b
, 
c
, 
d
, 
š
[9] + 0xd9d4d039, 4);

231 
	`MD5STEP
(
F3
, 
d
, 
a
, 
b
, 
c
, 
š
[12] + 0xe6db99e5, 11);

232 
	`MD5STEP
(
F3
, 
c
, 
d
, 
a
, 
b
, 
š
[15] + 0x1fa27cf8, 16);

233 
	`MD5STEP
(
F3
, 
b
, 
c
, 
d
, 
a
, 
š
[2] + 0xc4ac5665, 23);

235 
	`MD5STEP
(
F4
, 
a
, 
b
, 
c
, 
d
, 
š
[0] + 0xf4292244, 6);

236 
	`MD5STEP
(
F4
, 
d
, 
a
, 
b
, 
c
, 
š
[7] + 0x432aff97, 10);

237 
	`MD5STEP
(
F4
, 
c
, 
d
, 
a
, 
b
, 
š
[14] + 0xab9423a7, 15);

238 
	`MD5STEP
(
F4
, 
b
, 
c
, 
d
, 
a
, 
š
[5] + 0xfc93a039, 21);

239 
	`MD5STEP
(
F4
, 
a
, 
b
, 
c
, 
d
, 
š
[12] + 0x655b59c3, 6);

240 
	`MD5STEP
(
F4
, 
d
, 
a
, 
b
, 
c
, 
š
[3] + 0x8f0ccc92, 10);

241 
	`MD5STEP
(
F4
, 
c
, 
d
, 
a
, 
b
, 
š
[10] + 0xffeff47d, 15);

242 
	`MD5STEP
(
F4
, 
b
, 
c
, 
d
, 
a
, 
š
[1] + 0x85845dd1, 21);

243 
	`MD5STEP
(
F4
, 
a
, 
b
, 
c
, 
d
, 
š
[8] + 0x6fa87e4f, 6);

244 
	`MD5STEP
(
F4
, 
d
, 
a
, 
b
, 
c
, 
š
[15] + 0xfe2ce6e0, 10);

245 
	`MD5STEP
(
F4
, 
c
, 
d
, 
a
, 
b
, 
š
[6] + 0xa3014314, 15);

246 
	`MD5STEP
(
F4
, 
b
, 
c
, 
d
, 
a
, 
š
[13] + 0x4e0811a1, 21);

247 
	`MD5STEP
(
F4
, 
a
, 
b
, 
c
, 
d
, 
š
[4] + 0xf7537e82, 6);

248 
	`MD5STEP
(
F4
, 
d
, 
a
, 
b
, 
c
, 
š
[11] + 0xbd3af235, 10);

249 
	`MD5STEP
(
F4
, 
c
, 
d
, 
a
, 
b
, 
š
[2] + 0x2ad7d2bb, 15);

250 
	`MD5STEP
(
F4
, 
b
, 
c
, 
d
, 
a
, 
š
[9] + 0xeb86d391, 21);

252 
buf
[0] +ð
a
;

253 
buf
[1] +ð
b
;

254 
buf
[2] +ð
c
;

255 
buf
[3] +ð
d
;

256 
	}
}

	@source/Lib/libmd5/libmd5.h

33 #´agm¨
Úû


34 
	~<¡dšt.h
>

39 
	s_cÚ‹xt_md5_t
 {

40 
ušt32_t
 
	mbuf
[4];

41 
ušt32_t
 
	mb™s
[2];

43 
	mb8
[64];

44 
ušt32_t
 
	mb32
[16];

45 } 
	mš
;

46 } 
	tcÚ‹xt_md5_t
;

48 #ifdeà
__ýlu¥lus


51 
MD5In™
(
cÚ‹xt_md5_t
 *
ùx
);

52 
MD5Upd©e
(
cÚ‹xt_md5_t
 *
ùx
, *
buf
, 
Ën
);

53 
MD5Fš®
(
dige¡
[16], 
cÚ‹xt_md5_t
 *
ùx
);

54 #ifdeà
__ýlu¥lus


	@/usr/include/assert.h

23 #ifdef 
_ASSERT_H


25 #undeà
_ASSERT_H


26 #undeà
as£¹


27 #undeà
__ASSERT_VOID_CAST


29 #ifdef 
__USE_GNU


30 #undeà
as£¹_³¼Ü


35 
	#_ASSERT_H
 1

	)

36 
	~<ã©u»s.h
>

38 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (2,95)

39 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

41 
	#__ASSERT_VOID_CAST
 ()

	)

49 #ifdef 
NDEBUG


51 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

59 #ifdef 
__USE_GNU


60 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

65 
__BEGIN_DECLS


68 
	$__as£¹_çž
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fže
,

69 
__lše
, cÚ¡ *
__funùiÚ
)

70 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

73 
	$__as£¹_³¼Ü_çž
 (
__”ºum
, cÚ¡ *
__fže
,

74 
__lše
, cÚ¡ *
__funùiÚ
)

75 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

80 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fže
, 
__lše
)

81 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

84 
__END_DECLS


86 
	#as£¹
(
ex´
) \

87 ((
ex´
) \

88 ? 
	`__ASSERT_VOID_CAST
 (0) \

89 : 
	`__as£¹_çž
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

91 #ifdef 
__USE_GNU


92 
	#as£¹_³¼Ü
(
”ºum
) \

93 (!(
”ºum
) \

94 ? 
	`__ASSERT_VOID_CAST
 (0) \

95 : 
	`__as£¹_³¼Ü_çž
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

103 #ià
defšed
 
__ýlu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

104 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

106 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

107 
	#__ASSERT_FUNCTION
 
__func__


	)

109 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

116 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ýlu¥lus


118 #undeà
¡©ic_as£¹


119 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fúŽ.h
>

39 #ifdeà
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oæag
) \

41 (((
oæag
è& 
O_CREAT
è!ð0 || ((oæagè& 
__O_TMPFILE
è=ð__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oæag
è(((oæagè& 
O_CREAT
è!ð0)

	)

49 #iâdeà
__mode_t_defšed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_defšed


	)

54 #iâdeà
__off_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_defšed


	)

63 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_defšed


	)

68 #iâdeà
__pid_t_defšed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_defšed


	)

74 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

77 
	~<b™s/¡©.h
>

79 
	#S_IFMT
 
__S_IFMT


	)

80 
	#S_IFDIR
 
__S_IFDIR


	)

81 
	#S_IFCHR
 
__S_IFCHR


	)

82 
	#S_IFBLK
 
__S_IFBLK


	)

83 
	#S_IFREG
 
__S_IFREG


	)

84 #ifdeà
__S_IFIFO


85 
	#S_IFIFO
 
__S_IFIFO


	)

87 #ifdeà
__S_IFLNK


88 
	#S_IFLNK
 
__S_IFLNK


	)

90 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


91 
	#S_IFSOCK
 
__S_IFSOCK


	)

96 
	#S_ISUID
 
__S_ISUID


	)

97 
	#S_ISGID
 
__S_ISGID


	)

99 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


101 
	#S_ISVTX
 
__S_ISVTX


	)

104 
	#S_IRUSR
 
__S_IREAD


	)

105 
	#S_IWUSR
 
__S_IWRITE


	)

106 
	#S_IXUSR
 
__S_IEXEC


	)

108 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

110 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

111 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

112 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

114 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

116 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

117 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

118 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

120 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

123 #ifdef 
__USE_MISC


124 #iâdeà
R_OK


127 
	#R_OK
 4

	)

128 
	#W_OK
 2

	)

129 
	#X_OK
 1

	)

130 
	#F_OK
 0

	)

135 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


136 
	#SEEK_SET
 0

	)

137 
	#SEEK_CUR
 1

	)

138 
	#SEEK_END
 2

	)

141 #ifdeà
__USE_ATFILE


142 
	#AT_FDCWD
 -100

	)

145 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

146 
	#AT_REMOVEDIR
 0x200

	)

148 
	#AT_SYMLINK_FOLLOW
 0x400

	)

149 #ifdeà
__USE_GNU


150 
	#AT_NO_AUTOMOUNT
 0x800

	)

152 
	#AT_EMPTY_PATH
 0x1000

	)

154 
	#AT_EACCESS
 0x200

	)

163 
fúŽ
 (
__fd
, 
__cmd
, ...);

172 #iâdeà
__USE_FILE_OFFSET64


173 
	$Ý’
 (cÚ¡ *
__fže
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

175 #ifdeà
__REDIRECT


176 
	`__REDIRECT
 (
Ý’
, (cÚ¡ *
__fže
, 
__oæag
, ...), 
Ý’64
)

177 
	`__nÚnuÎ
 ((1));

179 
	#Ý’
 
Ý’64


	)

182 #ifdeà
__USE_LARGEFILE64


183 
	$Ý’64
 (cÚ¡ *
__fže
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

186 #ifdeà
__USE_ATFILE


196 #iâdeà
__USE_FILE_OFFSET64


197 
	$Ý’©
 (
__fd
, cÚ¡ *
__fže
, 
__oæag
, ...)

198 
	`__nÚnuÎ
 ((2));

200 #ifdeà
__REDIRECT


201 
	`__REDIRECT
 (
Ý’©
, (
__fd
, cÚ¡ *
__fže
, 
__oæag
,

202 ...), 
Ý’©64
è
	`__nÚnuÎ
 ((2));

204 
	#Ý’©
 
Ý’©64


	)

207 #ifdeà
__USE_LARGEFILE64


208 
	$Ý’©64
 (
__fd
, cÚ¡ *
__fže
, 
__oæag
, ...)

209 
	`__nÚnuÎ
 ((2));

218 #iâdeà
__USE_FILE_OFFSET64


219 
	$ü—t
 (cÚ¡ *
__fže
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

221 #ifdeà
__REDIRECT


222 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fže
, 
mode_t
 
__mode
),

223 
ü—t64
è
	`__nÚnuÎ
 ((1));

225 
	#ü—t
 
ü—t64


	)

228 #ifdeà
__USE_LARGEFILE64


229 
	$ü—t64
 (cÚ¡ *
__fže
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

232 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

233 && !
defšed
 
__USE_POSIX
))

242 
	#F_ULOCK
 0

	)

243 
	#F_LOCK
 1

	)

244 
	#F_TLOCK
 2

	)

245 
	#F_TEST
 3

	)

247 #iâdeà
__USE_FILE_OFFSET64


248 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

250 #ifdeà
__REDIRECT


251 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

253 
	#lockf
 
lockf64


	)

256 #ifdeà
__USE_LARGEFILE64


257 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

261 #ifdeà
__USE_XOPEN2K


264 #iâdeà
__USE_FILE_OFFSET64


265 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

266 
__advi£
è
__THROW
;

268 #ifdeà
__REDIRECT_NTH


269 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

270 
__off64_t
 
__Ën
, 
__advi£
),

271 
posix_çdvi£64
);

273 
	#posix_çdvi£
 
posix_çdvi£64


	)

276 #ifdeà
__USE_LARGEFILE64


277 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

278 
__advi£
è
__THROW
;

286 #iâdeà
__USE_FILE_OFFSET64


287 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

289 #ifdeà
__REDIRECT


290 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

291 
__off64_t
 
__Ën
),

292 
posix_çÎoÿ‹64
);

294 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

297 #ifdeà
__USE_LARGEFILE64


298 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

304 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

305 && 
defšed
 
__va_¬g_·ck_Ën


306 
	~<b™s/fúŽ2.h
>

309 
__END_DECLS


	@/usr/include/malloc.h

20 #iâdeà
_MALLOC_H


21 
	#_MALLOC_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<¡ddef.h
>

25 
	~<¡dio.h
>

26 
	#__m®loc_±r_t
 *

	)

29 
	#__m®loc_size_t
 
size_t


	)

30 
	#__m®loc_±rdiff_t
 
±rdiff_t


	)

32 #ifdeà
__GNUC__


34 
	#__MALLOC_P
(
¬gs
è¬g 
__THROW


	)

37 
	#__MALLOC_PMT
(
¬gs
è
	)
args

39 #ifdeà
_LIBC


40 
	#__MALLOC_HOOK_VOLATILE


	)

41 
	#__MALLOC_DEPRECATED


	)

43 
	#__MALLOC_HOOK_VOLATILE
 vÞ©že

	)

44 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

49 
	#__MALLOC_P
(
¬gs
è
	)
args

50 
	#__MALLOC_PMT
(
¬gs
è
	)
args

51 
	#__MALLOC_HOOK_VOLATILE


	)

52 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

57 
__BEGIN_DECLS


60 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

64 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

72 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

75 
	$ä“
 (*
__±r
è
__THROW
;

78 
	$cä“
 (*
__±r
è
__THROW
;

81 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

82 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

85 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

89 * 
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

93 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

96 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

97 
__THROW
 
__©Œibu‹_m®loc__
;

101 
	sm®lšfo


103 
¬’a
;

104 
Üdblks
;

105 
smblks
;

106 
hblks
;

107 
hblkhd
;

108 
usmblks
;

109 
fsmblks
;

110 
uÜdblks
;

111 
fÜdblks
;

112 
k“pco¡
;

116 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

119 #iâdeà
M_MXFAST


120 
	#M_MXFAST
 1

	)

122 #iâdeà
M_NLBLKS


123 
	#M_NLBLKS
 2

	)

125 #iâdeà
M_GRAIN


126 
	#M_GRAIN
 3

	)

128 #iâdeà
M_KEEP


129 
	#M_KEEP
 4

	)

133 
	#M_TRIM_THRESHOLD
 -1

	)

134 
	#M_TOP_PAD
 -2

	)

135 
	#M_MMAP_THRESHOLD
 -3

	)

136 
	#M_MMAP_MAX
 -4

	)

137 
	#M_CHECK_ACTION
 -5

	)

138 
	#M_PERTURB
 -6

	)

139 
	#M_ARENA_TEST
 -7

	)

140 
	#M_ARENA_MAX
 -8

	)

143 
	$m®lÝt
 (
__·¿m
, 
__v®
è
__THROW
;

147 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

151 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

154 
	$m®loc_¡©s
 (è
__THROW
;

157 
	$m®loc_šfo
 (
__ÝtiÚs
, 
FILE
 *
__å
è
__THROW
;

160 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

164 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

169 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

170 
__MALLOC_DEPRECATED
;

172 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

173 cÚ¡ 
__m®loc_±r_t
)

174 
__MALLOC_DEPRECATED
;

175 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
è(
size_t
 
__size
,

176 cÚ¡ 
__m®loc_±r_t
)

177 
__MALLOC_DEPRECATED
;

178 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
è(*
__±r
,

179 
size_t
 
__size
,

180 cÚ¡ 
__m®loc_±r_t
)

181 
__MALLOC_DEPRECATED
;

182 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
è(
size_t
 
__®ignm’t
,

183 
size_t
 
__size
,

184 cÚ¡ 
__m®loc_±r_t
)

185 
__MALLOC_DEPRECATED
;

186 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

189 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

192 
__END_DECLS


	@/usr/include/math.h

24 #iâdef 
_MATH_H


25 
	#_MATH_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 
	~<b™s/huge_v®.h
>

34 #ifdeà
__USE_ISOC99


35 
	~<b™s/huge_v®f.h
>

36 
	~<b™s/huge_v®l.h
>

39 
	~<b™s/šf.h
>

42 
	~<b™s/Çn.h
>

46 
	~<b™s/m©hdef.h
>

53 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

54 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

55 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

56 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

57 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

58 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

59 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

60 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

61 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

62 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

63 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

64 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

66 
	#_MdoubË_
 

	)

67 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

68 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

69 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

70 
	~<b™s/m©hÿÎs.h
>

71 #undeà
_MdoubË_


72 #undeà
_MdoubË_BEGIN_NAMESPACE


73 #undeà
_MdoubË_END_NAMESPACE


74 #undeà
__MATH_PRECNAME


76 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


82 #iâdeà
_Mæßt_


83 
	#_Mæßt_
 

	)

85 
	#_MdoubË_
 
_Mæßt_


	)

86 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

87 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

88 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

89 
	~<b™s/m©hÿÎs.h
>

90 #undeà
_MdoubË_


91 #undeà
_MdoubË_BEGIN_NAMESPACE


92 #undeà
_MdoubË_END_NAMESPACE


93 #undeà
__MATH_PRECNAME


95 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

96 || 
defšed
 
__LDBL_COMPAT


97 #ifdeà
__LDBL_COMPAT


99 #ifdeà
__USE_ISOC99


100 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

101 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

102 #ifdeà
__REDIRECT_NTH


103 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

104 
__Ædbl_Ãx‰ow¬df
)

105 
	`__©Œibu‹__
 ((
__cÚ¡__
));

106 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

107 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

108 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

109 (
__x
, 
__y
),

110 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

114 #undeà
__MATHDECL_1


115 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

116 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

117 
¬gs
, 
®Ÿs
)

	)

118 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

119 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

125 #iâdeà
_MlÚg_doubË_


126 
	#_MlÚg_doubË_
 

	)

128 
	#_MdoubË_
 
_MlÚg_doubË_


	)

129 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

130 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

131 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

132 
	#__MATH_DECLARE_LDOUBLE
 1

	)

133 
	~<b™s/m©hÿÎs.h
>

134 #undeà
_MdoubË_


135 #undeà
_MdoubË_BEGIN_NAMESPACE


136 #undeà
_MdoubË_END_NAMESPACE


137 #undeà
__MATH_PRECNAME


142 #undeà
__MATHDECL_1


143 #undeà
__MATHDECL


144 #undeà
__MATHCALL


147 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


149 
signgam
;

154 #ifdeà
__USE_ISOC99


192 
FP_NAN
 =

193 
	#FP_NAN
 0

	)

194 
FP_NAN
,

195 
FP_INFINITE
 =

196 
	#FP_INFINITE
 1

	)

197 
FP_INFINITE
,

198 
FP_ZERO
 =

199 
	#FP_ZERO
 2

	)

200 
FP_ZERO
,

201 
FP_SUBNORMAL
 =

202 
	#FP_SUBNORMAL
 3

	)

203 
FP_SUBNORMAL
,

204 
FP_NORMAL
 =

205 
	#FP_NORMAL
 4

	)

206 
FP_NORMAL


210 #ifdeà
__NO_LONG_DOUBLE_MATH


211 
	#åþassify
(
x
) \

212 ( (
x
è=ð (è? 
	`__åþassifyf
 (xè: 
	`__åþassify
 (x))

	)

214 
	#åþassify
(
x
) \

215 ( (
x
) ==  () \

216 ? 
	`__åþassifyf
 (
x
) \

217 :  (
x
) ==  () \

218 ? 
	`__åþassify
 (
x
è: 
	`__åþassifyl
 (x))

	)

222 #ifdeà
__NO_LONG_DOUBLE_MATH


223 
	#signb™
(
x
) \

224 ( (
x
è=ð (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

226 
	#signb™
(
x
) \

227 ( (
x
) ==  () \

228 ? 
	`__signb™f
 (
x
) \

229 :  (
x
) ==  () \

230 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

234 #ifdeà
__NO_LONG_DOUBLE_MATH


235 
	#isfš™e
(
x
) \

236 ( (
x
è=ð (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

238 
	#isfš™e
(
x
) \

239 ( (
x
) ==  () \

240 ? 
	`__fš™ef
 (
x
) \

241 :  (
x
) ==  () \

242 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

246 
	#i¢Üm®
(
x
è(
	`åþassify
 (xè=ð
FP_NORMAL
)

	)

250 #ifdeà
__NO_LONG_DOUBLE_MATH


251 
	#i¢ª
(
x
) \

252 ( (
x
è=ð (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

254 
	#i¢ª
(
x
) \

255 ( (
x
) ==  () \

256 ? 
	`__i¢ªf
 (
x
) \

257 :  (
x
) ==  () \

258 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

262 #ifdeà
__NO_LONG_DOUBLE_MATH


263 
	#isšf
(
x
) \

264 ( (
x
è=ð (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

266 
	#isšf
(
x
) \

267 ( (
x
) ==  () \

268 ? 
	`__isšff
 (
x
) \

269 :  (
x
) ==  () \

270 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

274 
	#MATH_ERRNO
 1

	)

275 
	#MATH_ERREXCEPT
 2

	)

280 #iâdeà
__FAST_MATH__


281 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

286 #ifdef 
__USE_MISC


290 
_IEEE_
 = -1,

291 
_SVID_
,

292 
_XOPEN_
,

293 
_POSIX_
,

294 
_ISOC_


295 } 
	t_LIB_VERSION_TYPE
;

300 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

304 #ifdeà
__USE_SVID


310 #ifdeà
__ýlu¥lus


311 
__exû±iÚ


313 
exû±iÚ


316 
ty³
;

317 *
Çme
;

318 
¬g1
;

319 
¬g2
;

320 
»tv®
;

321 
	}
};

323 #ifdeà
__ýlu¥lus


324 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

326 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

329 
	#X_TLOSS
 1.41484755040568800000e+16

	)

332 
	#DOMAIN
 1

	)

333 
	#SING
 2

	)

334 
	#OVERFLOW
 3

	)

335 
	#UNDERFLOW
 4

	)

336 
	#TLOSS
 5

	)

337 
	#PLOSS
 6

	)

340 
	#HUGE
 3.40282347e+38F

	)

344 #ifdeà
__USE_XOPEN


346 
	#MAXFLOAT
 3.40282347e+38F

	)

353 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


354 
	#M_E
 2.7182818284590452354

	)

355 
	#M_LOG2E
 1.4426950408889634074

	)

356 
	#M_LOG10E
 0.43429448190325182765

	)

357 
	#M_LN2
 0.69314718055994530942

	)

358 
	#M_LN10
 2.30258509299404568402

	)

359 
	#M_PI
 3.14159265358979323846

	)

360 
	#M_PI_2
 1.57079632679489661923

	)

361 
	#M_PI_4
 0.78539816339744830962

	)

362 
	#M_1_PI
 0.31830988618379067154

	)

363 
	#M_2_PI
 0.63661977236758134308

	)

364 
	#M_2_SQRTPI
 1.12837916709551257390

	)

365 
	#M_SQRT2
 1.41421356237309504880

	)

366 
	#M_SQRT1_2
 0.70710678118654752440

	)

372 #ifdeà
__USE_GNU


373 
	#M_El
 2.718281828459045235360287471352662498L

	)

374 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

375 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

376 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

377 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

378 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

379 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

380 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

381 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

382 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

383 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

384 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

385 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

392 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


393 
	#__NO_MATH_INLINES
 1

	)

396 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

403 
	#isg»©”
(
x
, 
y
è
	`__bužtš_isg»©”
(x, y)

	)

404 
	#isg»©”equ®
(
x
, 
y
è
	`__bužtš_isg»©”equ®
(x, y)

	)

405 
	#i¦ess
(
x
, 
y
è
	`__bužtš_i¦ess
(x, y)

	)

406 
	#i¦es£qu®
(
x
, 
y
è
	`__bužtš_i¦es£qu®
(x, y)

	)

407 
	#i¦essg»©”
(
x
, 
y
è
	`__bužtš_i¦essg»©”
(x, y)

	)

408 
	#isunÜd”ed
(
u
, 
v
è
	`__bužtš_isunÜd”ed
(u, v)

	)

412 #ifdeà
__USE_EXTERN_INLINES


413 
	~<b™s/m©hšlše.h
>

418 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

419 
	~<b™s/m©h-fš™e.h
>

422 #ifdeà
__USE_ISOC99


426 #iâdeà
isg»©”


427 
	#isg»©”
(
x
, 
y
) \

428 (
__ex‹nsiÚ__
 \

429 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

430 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

434 #iâdeà
isg»©”equ®


435 
	#isg»©”equ®
(
x
, 
y
) \

436 (
__ex‹nsiÚ__
 \

437 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

438 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ð__y; }))

	)

442 #iâdeà
i¦ess


443 
	#i¦ess
(
x
, 
y
) \

444 (
__ex‹nsiÚ__
 \

445 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

446 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

450 #iâdeà
i¦es£qu®


451 
	#i¦es£qu®
(
x
, 
y
) \

452 (
__ex‹nsiÚ__
 \

453 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

454 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ð__y; }))

	)

458 #iâdeà
i¦essg»©”


459 
	#i¦essg»©”
(
x
, 
y
) \

460 (
__ex‹nsiÚ__
 \

461 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

462 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

466 #iâdeà
isunÜd”ed


467 
	#isunÜd”ed
(
u
, 
v
) \

468 (
__ex‹nsiÚ__
 \

469 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

470 
	`åþassify
 (
__u
è=ð
FP_NAN
 || fpþassify (
__v
è=ðFP_NAN; }))

	)

475 
	g__END_DECLS


	@/usr/include/memory.h

22 #iâdef 
_MEMORY_H


23 
	#_MEMORY_H
 1

	)

25 
	~<ã©u»s.h
>

28 #iâdef 
_STRING_H


29 
	~<¡ršg.h
>

	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifdeà
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #iâdeà
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

283 
	#INT8_C
(
c
è
	)
c

284 
	#INT16_C
(
c
è
	)
c

285 
	#INT32_C
(
c
è
	)
c

286 #ià
__WORDSIZE
 == 64

287 
	#INT64_C
(
c
èø## 
L


	)

289 
	#INT64_C
(
c
èø## 
LL


	)

293 
	#UINT8_C
(
c
è
	)
c

294 
	#UINT16_C
(
c
è
	)
c

295 
	#UINT32_C
(
c
èø## 
U


	)

296 #ià
__WORDSIZE
 == 64

297 
	#UINT64_C
(
c
èø## 
UL


	)

299 
	#UINT64_C
(
c
èø## 
ULL


	)

303 #ià
__WORDSIZE
 == 64

304 
	#INTMAX_C
(
c
èø## 
L


	)

305 
	#UINTMAX_C
(
c
èø## 
UL


	)

307 
	#INTMAX_C
(
c
èø## 
LL


	)

308 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__fž’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Þd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Þdfd
, cÚ¡ *
__Þd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfže
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfže
, (), 
tmpfže64
è
__wur
;

200 
	#tmpfže
 
tmpfže64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfže64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fþo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fþo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fÝ’
 (cÚ¡ *
__»¡riù
 
__fž’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeÝ’
 (cÚ¡ *
__»¡riù
 
__fž’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fÝ’
, (cÚ¡ *
__»¡riù
 
__fž’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fÝ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeÝ’
, (cÚ¡ *
__»¡riù
 
__fž’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeÝ’64
)

289 
__wur
;

291 
	#fÝ’
 
fÝ’64


	)

292 
	#äeÝ’
 
äeÝ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fÝ’64
 (cÚ¡ *
__»¡riù
 
__fž’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeÝ’64
 (cÚ¡ *
__»¡riù
 
__fž’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdÝ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fÝ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemÝ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$Ý’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£Žšebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ýlu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$þ—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$þ—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$fž’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$fž’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pÝ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pþo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfže
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfže
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfže
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘Ýt


	)

928 
	~<g‘Ýt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ýlu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ýlu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Þ
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Þl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Þd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Þ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Þl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Þ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Þl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Þd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Þ
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Þ
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Þ
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Þl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Þl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Þd_x
[3];

416 
__c
;

417 
__š™
;

418 
__a
;

422 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

423 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

424 
	$”ªd48_r
 (
__xsubi
[3],

425 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

426 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

429 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

430 *
__»¡riù
 
__»suÉ
)

431 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

432 
	$Äªd48_r
 (
__xsubi
[3],

433 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

434 *
__»¡riù
 
__»suÉ
)

435 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

439 *
__»¡riù
 
__»suÉ
)

440 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

441 
	$j¿nd48_r
 (
__xsubi
[3],

442 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

443 *
__»¡riù
 
__»suÉ
)

444 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

448 
__THROW
 
	`__nÚnuÎ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$lcÚg48_r
 (
__·¿m
[7],

454 
d¿nd48_d©a
 *
__bufãr
)

455 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

461 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


462 
	#__m®loc_ªd_ÿÎoc_defšed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

467 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

468 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

482 
	$ä“
 (*
__±r
è
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$cä“
 (*
__±r
è
__THROW
;

490 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


491 
	~<®loÿ.h
>

494 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

495 || 
defšed
 
__USE_BSD


497 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

500 #ifdeà
__USE_XOPEN2K


502 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

503 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

506 #ifdeà
__USE_ISOC11


508 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

509 
__THROW
 
__wur
 
	`__©Œibu‹__
 ((
__m®loc__
, 
	`__®loc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

518 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

520 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


522 #ifdeà
__ýlu¥lus


523 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

526 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

535 
__THROW
 
	`__nÚnuÎ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

544 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


548 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

550 
__END_NAMESPACE_STD


552 #ifdeà
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

564 
__END_NAMESPACE_STD


566 #ifdeà
__USE_GNU


569 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

570 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

573 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


577 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

580 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


583 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

584 
__THROW
 
	`__nÚnuÎ
 ((2));

587 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$þ—»nv
 (è
__THROW
;

598 #ià
defšed
 
__USE_MISC
 \

599 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

605 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

609 || 
defšed
 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fže_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sÞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

760 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

761 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

762 #ifdeà
__USE_GNU


763 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

764 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

765 
	`__nÚnuÎ
 ((1, 4));

770 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

771 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

772 
__END_NAMESPACE_STD


774 #ifdeà
__USE_ISOC99


775 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

776 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__num”
, 
__d’om
)

785 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

787 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

793 
__d’om
)

794 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

795 
__END_NAMESPACE_C99


799 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

800 || 
defšed
 
__USE_SVID


807 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deýt
,

808 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

813 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deýt
,

814 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

819 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

820 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

823 #ifdeà
__USE_MISC


825 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

826 *
__»¡riù
 
__deýt
, *__»¡riù 
__sign
)

827 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

828 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

829 *
__»¡riù
 
__deýt
, *__»¡riù 
__sign
)

830 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

831 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

832 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

837 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deýt
,

838 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

839 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deýt
,

841 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

842 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

845 *
__»¡riù
 
__deýt
, *__»¡riù 
__sign
,

846 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

847 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deýt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

863 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

866 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

870 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

871 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

873 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

874 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifdeà
__USE_SVID


884 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

888 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


895 
	$g‘subÝt
 (**
__»¡riù
 
__ÝtiÚp
,

896 *cÚ¡ *
__»¡riù
 
__tok’s
,

897 **
__»¡riù
 
__v®u•
)

898 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

902 #ifdeà
__USE_XOPEN


904 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

910 #ifdeà
__USE_XOPEN2KXSI


912 
	$posix_Ý’±
 (
__oæag
è
__wur
;

915 #ifdeà
__USE_XOPEN


920 
	$g¿Á±
 (
__fd
è
__THROW
;

924 
	$uÆock±
 (
__fd
è
__THROW
;

929 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

932 #ifdeà
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

937 
__THROW
 
	`__nÚnuÎ
 ((2));

940 
	`g‘±
 ();

943 #ifdeà
__USE_BSD


947 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

948 
__THROW
 
	`__nÚnuÎ
 ((1));

951 
	~<b™s/¡dlib-æßt.h
>

954 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


955 
	~<b™s/¡dlib.h
>

957 #ifdeà
__LDBL_COMPAT


958 
	~<b™s/¡dlib-ldbl.h
>

962 #undeà
__Ãed_m®loc_ªd_ÿÎoc


964 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

35 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$memýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


54 *
	$memcýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

69 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

74 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 #ifdeà
__OPTIMIZE__


78 
__ex‹º_®ways_šlše
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


81  
	`__bužtš_memchr
 (
__s
, 
__c
, 
__n
);

84 
__ex‹º_®ways_šlše
 const *

85 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


87  
	`__bužtš_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifdeà
__USE_GNU


100 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$¡rýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

128 *
	$¡ºýy
 (*
__»¡riù
 
__de¡
,

129 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

137 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡rcÞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

151 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
 
	`__nÚnuÎ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifdeà
__USE_XOPEN2K8


159 
	~<xloÿË.h
>

162 
	$¡rcÞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

163 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

165 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

166 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

169 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

170 || 
defšed
 
__USE_XOPEN2K8


172 *
	$¡rdup
 (cÚ¡ *
__s
)

173 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

179 #ià
defšed
 
__USE_XOPEN2K8


180 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

181 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

184 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


186 
	#¡rdu·
(
s
) \

187 (
__ex‹nsiÚ__
 \

189 cÚ¡ *
__Þd
 = (
s
); \

190 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Þd
) + 1; \

191 *
__Ãw
 = (*è
	`__bužtš_®loÿ
 (
__Ën
); \

192 (*è
	`memýy
 (
__Ãw
, 
__Þd
, 
__Ën
); \

193 
	}
}))

	)

196 
	#¡ºdu·
(
s
, 
n
) \

197 (
__ex‹nsiÚ__
 \

199 cÚ¡ *
__Þd
 = (
s
); \

200 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Þd
, (
n
)); \

201 *
__Ãw
 = (*è
	`__bužtš_®loÿ
 (
__Ën
 + 1); \

202 
__Ãw
[
__Ën
] = '\0'; \

203 (*è
	`memýy
 (
__Ãw
, 
__Þd
, 
__Ën
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
¡rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

214 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

217 #ifdeà
__OPTIMIZE__


218 
__ex‹º_®ways_šlše
 *

219 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


221  
__bužtš_¡rchr
 (
__s
, 
__c
);

224 
__ex‹º_®ways_šlše
 const *

225 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


227  
__bužtš_¡rchr
 (
__s
, 
__c
);

232 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

233 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

236 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`¡¼chr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

241 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

244 #ifdeà
__OPTIMIZE__


245 
__ex‹º_®ways_šlše
 *

246 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


248  
	`__bužtš_¡¼chr
 (
__s
, 
__c
);

251 
__ex‹º_®ways_šlše
 const *

252 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


254  
	`__bužtš_¡¼chr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

260 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifdeà
__USE_GNU


267 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

270 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

274 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

282 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

285 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

292 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

293 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

294 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

296 #ifdeà
__OPTIMIZE__


297 
__ex‹º_®ways_šlše
 *

298 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


300  
	`__bužtš_¡½brk
 (
__s
, 
__acû±
);

303 
__ex‹º_®ways_šlše
 const *

304 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


306  
	`__bužtš_¡½brk
 (
__s
, 
__acû±
);

309 
	}
}

311 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

312 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

315 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

319 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

320 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

321 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

323 #ifdeà
__OPTIMIZE__


324 
__ex‹º_®ways_šlše
 *

325 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


327  
	`__bužtš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

330 
__ex‹º_®ways_šlše
 const *

331 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


333  
	`__bužtš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

336 
	}
}

338 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

339 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

344 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

345 
__THROW
 
	`__nÚnuÎ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

351 cÚ¡ *
__»¡riù
 
__d–im
,

352 **
__»¡riù
 
__§ve_±r
)

353 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

354 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


355 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

360 #ifdeà
__USE_GNU


362 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

364 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

365 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

366 cÚ¡ *
__ÃedË
)

367 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

370 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

374 #ifdeà
__USE_GNU


378 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

379 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

380 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

384 *
	$__mempýy
 (*
__»¡riù
 
__de¡
,

385 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

386 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

387 *
	$mempýy
 (*
__»¡riù
 
__de¡
,

388 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

389 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

396 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

403 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

410 
__END_NAMESPACE_STD


411 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


419 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


422 #ifdeà
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

424 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

425 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

427 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

428 
__THROW
 
	`__nÚnuÎ
 ((2));

429 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

434 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

435 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

439 #ifdeà
__USE_XOPEN2K8


441 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

447 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

449 #ifdeà
__USE_BSD


451 
	$bcÝy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

452 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

455 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

458 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

462 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`šdex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

467 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

470 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__ex‹º_®ways_šlše
 *

472 
	`šdex
 (*
__s
, 
__c
è
__THROW


474  
	`__bužtš_šdex
 (
__s
, 
__c
);

477 
__ex‹º_®ways_šlše
 const *

478 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


480  
	`__bužtš_šdex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

486 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

490 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`ršdex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

495 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

498 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__ex‹º_®ways_šlše
 *

500 
	`ršdex
 (*
__s
, 
__c
è
__THROW


502  
	`__bužtš_ršdex
 (
__s
, 
__c
);

505 
__ex‹º_®ways_šlše
 const *

506 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


508  
	`__bužtš_ršdex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

514 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

519 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

523 #ifdef 
__USE_GNU


524 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

525 #ifdeà
__GNUC__


526 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

527 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

532 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

533 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

536 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

544 
__loÿË_t
 
__loc
)

545 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

547 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

548 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

549 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

556 cÚ¡ *
__»¡riù
 
__d–im
)

557 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

565 *
	$__¡pýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

566 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

567 *
	$¡pýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

572 *
	$__¡²ýy
 (*
__»¡riù
 
__de¡
,

573 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

575 *
	$¡²ýy
 (*
__»¡riù
 
__de¡
,

576 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

583 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

586 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

589 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #iâdeà
ba£Çme


596 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£Çme
 (*
__fž’ame
)

598 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

599 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__fž’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

602 *
	$ba£Çme
 (cÚ¡ *
__fž’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

609 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

610 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ýlu¥lus


630 
	~<b™s/¡ršg.h
>

633 
	~<b™s/¡ršg2.h
>

636 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


638 
	~<b™s/¡ršg3.h
>

642 
__END_DECLS


	@/usr/include/sys/stat.h

23 #iâdef 
_SYS_STAT_H


24 
	#_SYS_STAT_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
 || defšed 
__USE_MISC
 \

31 || 
defšed
 
	g__USE_ATFILE


32 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


33 
	#__Ãed_time_t


	)

35 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ATFILE


36 
	#__Ãed_time¥ec


	)

38 
	~<time.h
>

41 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


44 #iâdeà
__dev_t_defšed


45 
__dev_t
 
	tdev_t
;

46 
	#__dev_t_defšed


	)

49 #iâdeà
__gid_t_defšed


50 
__gid_t
 
	tgid_t
;

51 
	#__gid_t_defšed


	)

54 #iâdeà
__šo_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__šo_t
 
	tšo_t
;

58 
__šo64_t
 
	tšo_t
;

60 
	#__šo_t_defšed


	)

63 #iâdeà
__mode_t_defšed


64 
__mode_t
 
	tmode_t
;

65 
	#__mode_t_defšed


	)

68 #iâdeà
__Æšk_t_defšed


69 
__Æšk_t
 
	tÆšk_t
;

70 
	#__Æšk_t_defšed


	)

73 #iâdeà
__off_t_defšed


74 #iâdeà
__USE_FILE_OFFSET64


75 
__off_t
 
	toff_t
;

77 
__off64_t
 
	toff_t
;

79 
	#__off_t_defšed


	)

82 #iâdeà
__uid_t_defšed


83 
__uid_t
 
	tuid_t
;

84 
	#__uid_t_defšed


	)

88 #ifdeà
__USE_UNIX98


89 #iâdeà
__blkút_t_defšed


90 #iâdeà
__USE_FILE_OFFSET64


91 
__blkút_t
 
	tblkút_t
;

93 
__blkút64_t
 
	tblkút_t
;

95 
	#__blkút_t_defšed


	)

98 #iâdeà
__blksize_t_defšed


99 
__blksize_t
 
	tblksize_t
;

100 
	#__blksize_t_defšed


	)

104 
	g__BEGIN_DECLS


106 
	~<b™s/¡©.h
>

108 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


109 
	#S_IFMT
 
__S_IFMT


	)

110 
	#S_IFDIR
 
__S_IFDIR


	)

111 
	#S_IFCHR
 
__S_IFCHR


	)

112 
	#S_IFBLK
 
__S_IFBLK


	)

113 
	#S_IFREG
 
__S_IFREG


	)

114 #ifdeà
__S_IFIFO


115 
	#S_IFIFO
 
__S_IFIFO


	)

117 #ifdeà
__S_IFLNK


118 
	#S_IFLNK
 
__S_IFLNK


	)

120 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_UNIX98
) \

121 && 
defšed
 
	g__S_IFSOCK


122 
	#S_IFSOCK
 
__S_IFSOCK


	)

128 
	#__S_ISTYPE
(
mode
, 
mask
è(((modeè& 
__S_IFMT
è=ð(mask))

	)

130 
	#S_ISDIR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

131 
	#S_ISCHR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

132 
	#S_ISBLK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

133 
	#S_ISREG
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

134 #ifdeà
__S_IFIFO


135 
	#S_ISFIFO
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

137 #ifdeà
__S_IFLNK


138 
	#S_ISLNK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

141 #ià
defšed
 
__USE_BSD
 && !defšed 
__S_IFLNK


142 
	#S_ISLNK
(
mode
è0

	)

145 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K
) \

146 && 
defšed
 
	g__S_IFSOCK


147 
	#S_ISSOCK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

148 #–ià
defšed
 
__USE_XOPEN2K


149 
	#S_ISSOCK
(
mode
è0

	)

156 #ifdef 
__USE_POSIX199309


157 
	#S_TYPEISMQ
(
buf
è
	`__S_TYPEISMQ
(buf)

	)

158 
	#S_TYPEISSEM
(
buf
è
	`__S_TYPEISSEM
(buf)

	)

159 
	#S_TYPEISSHM
(
buf
è
	`__S_TYPEISSHM
(buf)

	)

165 
	#S_ISUID
 
__S_ISUID


	)

166 
	#S_ISGID
 
__S_ISGID


	)

168 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


170 
	#S_ISVTX
 
__S_ISVTX


	)

173 
	#S_IRUSR
 
__S_IREAD


	)

174 
	#S_IWUSR
 
__S_IWRITE


	)

175 
	#S_IXUSR
 
__S_IEXEC


	)

177 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

179 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_BSD


180 
	#S_IREAD
 
S_IRUSR


	)

181 
	#S_IWRITE
 
S_IWUSR


	)

182 
	#S_IEXEC
 
S_IXUSR


	)

185 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

186 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

187 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

189 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

191 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

192 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

193 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

195 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

198 #ifdef 
__USE_BSD


200 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
è

	)

201 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

202 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

204 
	#S_BLKSIZE
 512

	)

208 #iâdeà
__USE_FILE_OFFSET64


210 
	$¡©
 (cÚ¡ *
__»¡riù
 
__fže
,

211 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

215 
	$f¡©
 (
__fd
, 
¡©
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

217 #ifdeà
__REDIRECT_NTH


218 
	`__REDIRECT_NTH
 (
¡©
, (cÚ¡ *
__»¡riù
 
__fže
,

219 
¡©
 *
__»¡riù
 
__buf
), 
¡©64
)

220 
	`__nÚnuÎ
 ((1, 2));

221 
	`__REDIRECT_NTH
 (
f¡©
, (
__fd
, 
¡©
 *
__buf
), 
f¡©64
)

222 
	`__nÚnuÎ
 ((2));

224 
	#¡©
 
¡©64


	)

225 
	#f¡©
 
f¡©64


	)

228 #ifdeà
__USE_LARGEFILE64


229 
	$¡©64
 (cÚ¡ *
__»¡riù
 
__fže
,

230 
¡©64
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

231 
	$f¡©64
 (
__fd
, 
¡©64
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

234 #ifdeà
__USE_ATFILE


238 #iâdeà
__USE_FILE_OFFSET64


239 
	$f¡©©
 (
__fd
, cÚ¡ *
__»¡riù
 
__fže
,

240 
¡©
 *
__»¡riù
 
__buf
, 
__æag
)

241 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

243 #ifdeà
__REDIRECT_NTH


244 
	`__REDIRECT_NTH
 (
f¡©©
, (
__fd
, cÚ¡ *
__»¡riù
 
__fže
,

245 
¡©
 *
__»¡riù
 
__buf
,

246 
__æag
),

247 
f¡©©64
è
	`__nÚnuÎ
 ((2, 3));

249 
	#f¡©©
 
f¡©©64


	)

253 #ifdeà
__USE_LARGEFILE64


254 
	$f¡©©64
 (
__fd
, cÚ¡ *
__»¡riù
 
__fže
,

255 
¡©64
 *
__»¡riù
 
__buf
, 
__æag
)

256 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

260 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


261 #iâdeà
__USE_FILE_OFFSET64


264 
	$l¡©
 (cÚ¡ *
__»¡riù
 
__fže
,

265 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

267 #ifdeà
__REDIRECT_NTH


268 
	`__REDIRECT_NTH
 (
l¡©
,

269 (cÚ¡ *
__»¡riù
 
__fže
,

270 
¡©
 *
__»¡riù
 
__buf
), 
l¡©64
)

271 
	`__nÚnuÎ
 ((1, 2));

273 
	#l¡©
 
l¡©64


	)

276 #ifdeà
__USE_LARGEFILE64


277 
	$l¡©64
 (cÚ¡ *
__»¡riù
 
__fže
,

278 
¡©64
 *
__»¡riù
 
__buf
)

279 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

285 
	$chmod
 (cÚ¡ *
__fže
, 
__mode_t
 
__mode
)

286 
__THROW
 
	`__nÚnuÎ
 ((1));

288 #ifdeà
__USE_BSD


292 
	$lchmod
 (cÚ¡ *
__fže
, 
__mode_t
 
__mode
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

297 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX


298 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
è
__THROW
;

301 #ifdeà
__USE_ATFILE


304 
	$fchmod©
 (
__fd
, cÚ¡ *
__fže
, 
__mode_t
 
__mode
,

305 
__æag
)

306 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
è
__THROW
;

315 #ifdef 
__USE_GNU


318 
__mode_t
 
	$g‘umask
 (è
__THROW
;

322 
	$mkdœ
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

323 
__THROW
 
	`__nÚnuÎ
 ((1));

325 #ifdeà
__USE_ATFILE


329 
	$mkdœ©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

330 
__THROW
 
	`__nÚnuÎ
 ((2));

336 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


337 
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

338 
__THROW
 
	`__nÚnuÎ
 ((1));

340 #ifdeà
__USE_ATFILE


344 
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

345 
__dev_t
 
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2));

351 
	$mkfifo
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

352 
__THROW
 
	`__nÚnuÎ
 ((1));

354 #ifdeà
__USE_ATFILE


358 
	$mkfifßt
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

359 
__THROW
 
	`__nÚnuÎ
 ((2));

362 #ifdeà
__USE_ATFILE


365 
	$utim’§t
 (
__fd
, cÚ¡ *
__·th
,

366 cÚ¡ 
time¥ec
 
__times
[2],

367 
__æags
)

368 
__THROW
 
	`__nÚnuÎ
 ((2));

371 #ifdeà
__USE_XOPEN2K8


373 
	$futim’s
 (
__fd
, cÚ¡ 
time¥ec
 
__times
[2]è
__THROW
;

391 #iâdeà
_STAT_VER


392 
	#_STAT_VER
 0

	)

394 #iâdeà
_MKNOD_VER


395 
	#_MKNOD_VER
 0

	)

399 #iâdeà
__USE_FILE_OFFSET64


400 
	$__fx¡©
 (
__v”
, 
__fždes
, 
¡©
 *
__¡©_buf
)

401 
__THROW
 
	`__nÚnuÎ
 ((3));

402 
	$__x¡©
 (
__v”
, cÚ¡ *
__fž’ame
,

403 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

404 
	$__lx¡©
 (
__v”
, cÚ¡ *
__fž’ame
,

405 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

406 
	$__fx¡©©
 (
__v”
, 
__fždes
, cÚ¡ *
__fž’ame
,

407 
¡©
 *
__¡©_buf
, 
__æag
)

408 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

410 #ifdeà
__REDIRECT_NTH


411 
	`__REDIRECT_NTH
 (
__fx¡©
, (
__v”
, 
__fždes
,

412 
¡©
 *
__¡©_buf
), 
__fx¡©64
)

413 
	`__nÚnuÎ
 ((3));

414 
	`__REDIRECT_NTH
 (
__x¡©
, (
__v”
, cÚ¡ *
__fž’ame
,

415 
¡©
 *
__¡©_buf
), 
__x¡©64
)

416 
	`__nÚnuÎ
 ((2, 3));

417 
	`__REDIRECT_NTH
 (
__lx¡©
, (
__v”
, cÚ¡ *
__fž’ame
,

418 
¡©
 *
__¡©_buf
), 
__lx¡©64
)

419 
	`__nÚnuÎ
 ((2, 3));

420 
	`__REDIRECT_NTH
 (
__fx¡©©
, (
__v”
, 
__fždes
,

421 cÚ¡ *
__fž’ame
,

422 
¡©
 *
__¡©_buf
, 
__æag
),

423 
__fx¡©©64
è
	`__nÚnuÎ
 ((3, 4));

426 
	#__fx¡©
 
__fx¡©64


	)

427 
	#__x¡©
 
__x¡©64


	)

428 
	#__lx¡©
 
__lx¡©64


	)

432 #ifdeà
__USE_LARGEFILE64


433 
	$__fx¡©64
 (
__v”
, 
__fždes
, 
¡©64
 *
__¡©_buf
)

434 
__THROW
 
	`__nÚnuÎ
 ((3));

435 
	$__x¡©64
 (
__v”
, cÚ¡ *
__fž’ame
,

436 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

437 
	$__lx¡©64
 (
__v”
, cÚ¡ *
__fž’ame
,

438 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

439 
	$__fx¡©©64
 (
__v”
, 
__fždes
, cÚ¡ *
__fž’ame
,

440 
¡©64
 *
__¡©_buf
, 
__æag
)

441 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

443 
	$__xmknod
 (
__v”
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

444 
__dev_t
 *
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

446 
	$__xmknod©
 (
__v”
, 
__fd
, cÚ¡ *
__·th
,

447 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

448 
__THROW
 
	`__nÚnuÎ
 ((3, 5));

450 #ià
defšed
 
__GNUC__
 && __GNUC__ >ð2 && defšed 
__USE_EXTERN_INLINES


453 
__ex‹º_šlše
 

454 
	`__NTH
 (
	$¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

456  
	`__x¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

457 
	}
}

459 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


460 
__ex‹º_šlše
 

461 
__NTH
 (
	$l¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

463  
	`__lx¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

464 
	}
}

467 
__ex‹º_šlše
 

468 
__NTH
 (
	$f¡©
 (
__fd
, 
¡©
 *
__¡©buf
))

470  
	`__fx¡©
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

471 
	}
}

473 #ifdeà
__USE_ATFILE


474 
__ex‹º_šlše
 

475 
__NTH
 (
	$f¡©©
 (
__fd
, cÚ¡ *
__fž’ame
, 
¡©
 *
__¡©buf
,

476 
__æag
))

478  
	`__fx¡©©
 (
_STAT_VER
, 
__fd
, 
__fž’ame
, 
__¡©buf
, 
__æag
);

479 
	}
}

482 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD


483 
__ex‹º_šlše
 

484 
__NTH
 (
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

486  
	`__xmknod
 (
_MKNOD_VER
, 
__·th
, 
__mode
, &
__dev
);

487 
	}
}

490 #ifdeà
__USE_ATFILE


491 
__ex‹º_šlše
 

492 
__NTH
 (
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

493 
__dev_t
 
__dev
))

495  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__·th
, 
__mode
, &
__dev
);

496 
	}
}

499 #ià
defšed
 
__USE_LARGEFILE64
 \

500 && (! 
defšed
 
	g__USE_FILE_OFFSET64
 \

501 || (
defšed
 
	g__REDIRECT_NTH
 && defšed 
	g__OPTIMIZE__
))

502 
__ex‹º_šlše
 

503 
__NTH
 (
	$¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

505  
	`__x¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

506 
	}
}

508 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


509 
__ex‹º_šlše
 

510 
__NTH
 (
	$l¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

512  
	`__lx¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

513 
	}
}

516 
__ex‹º_šlše
 

517 
__NTH
 (
	$f¡©64
 (
__fd
, 
¡©64
 *
__¡©buf
))

519  
	`__fx¡©64
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

520 
	}
}

522 #ifdeà
__USE_ATFILE


523 
__ex‹º_šlše
 

524 
__NTH
 (
	$f¡©©64
 (
__fd
, cÚ¡ *
__fž’ame
, 
¡©64
 *
__¡©buf
,

525 
__æag
))

527  
	`__fx¡©©64
 (
_STAT_VER
, 
__fd
, 
__fž’ame
, 
__¡©buf
, 
__æag
);

528 
	}
}

535 
	g__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_þock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__þock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_þock_t
)

53 
	#__þock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__þock_t
 
	tþock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
þock_t
)

66 #undeà
__Ãed_þock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__þockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_þockid_t
)

86 
	#__þockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__þockid_t
 
	tþockid_t
;

94 #undeà
__þockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
þock_t
 
	$þock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ð0 && ((y—rè% 100 !ð0 || (y—rè% 400 =ð0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$þock_g‘»s
 (
þockid_t
 
__þock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$þock_g‘time
 (
þockid_t
 
__þock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$þock_£‰ime
 (
þockid_t
 
__þock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`þock_Çno¦“p
 (
þockid_t
 
__þock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$þock_g‘ýuþockid
 (
pid_t
 
__pid
, 
þockid_t
 *
__þock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
þockid_t
 
__þock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__bužtš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/fcntl.h

19 #iâdeà
_FCNTL_H


23 #ifdeà
__x86_64__


24 
	#__O_LARGEFILE
 0

	)

27 #ifdeà
__x86_64__


29 
	#F_GETLK64
 5

	)

30 
	#F_SETLK64
 6

	)

31 
	#F_SETLKW64
 7

	)

35 
	sæock


37 
	ml_ty³
;

38 
	ml_wh’û
;

39 #iâdeà
__USE_FILE_OFFSET64


40 
__off_t
 
	ml_¡¬t
;

41 
__off_t
 
	ml_Ën
;

43 
__off64_t
 
	ml_¡¬t
;

44 
__off64_t
 
	ml_Ën
;

46 
__pid_t
 
	ml_pid
;

49 #ifdeà
__USE_LARGEFILE64


50 
	sæock64


52 
	ml_ty³
;

53 
	ml_wh’û
;

54 
__off64_t
 
	ml_¡¬t
;

55 
__off64_t
 
	ml_Ën
;

56 
__pid_t
 
	ml_pid
;

61 
	~<b™s/fúŽ-lšux.h
>

	@/usr/include/bits/fcntl2.h

19 #iâdef 
_FCNTL_H


25 #iâdeà
__USE_FILE_OFFSET64


26 
	$__Ý’_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

27 
	`__REDIRECT
 (
__Ý’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

28 
Ý’
è
	`__nÚnuÎ
 ((1));

30 
	`__REDIRECT
 (
__Ý’_2
, (cÚ¡ *
__·th
, 
__oæag
),

31 
__Ý’64_2
è
	`__nÚnuÎ
 ((1));

32 
	`__REDIRECT
 (
__Ý’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

33 
Ý’64
è
	`__nÚnuÎ
 ((1));

35 
	`__”rÜdeþ
 (
__Ý’_too_mªy_¬gs
,

37 
	`__”rÜdeþ
 (
__Ý’_missšg_mode
,

40 
__fÜtify_funùiÚ
 

41 
	$Ý’
 (cÚ¡ *
__·th
, 
__oæag
, ...)

43 ià(
	`__va_¬g_·ck_Ën
 () > 1)

44 
	`__Ý’_too_mªy_¬gs
 ();

46 ià(
	`__bužtš_cÚ¡ªt_p
 (
__oæag
))

48 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

50 
	`__Ý’_missšg_mode
 ();

51  
	`__Ý’_2
 (
__·th
, 
__oæag
);

53  
	`__Ý’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

56 ià(
	`__va_¬g_·ck_Ën
 () < 1)

57  
	`__Ý’_2
 (
__·th
, 
__oæag
);

59  
	`__Ý’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

60 
	}
}

63 #ifdeà
__USE_LARGEFILE64


64 
	$__Ý’64_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

65 
	`__REDIRECT
 (
__Ý’64_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
,

66 ...), 
Ý’64
è
	`__nÚnuÎ
 ((1));

67 
	`__”rÜdeþ
 (
__Ý’64_too_mªy_¬gs
,

69 
	`__”rÜdeþ
 (
__Ý’64_missšg_mode
,

72 
__fÜtify_funùiÚ
 

73 
	$Ý’64
 (cÚ¡ *
__·th
, 
__oæag
, ...)

75 ià(
	`__va_¬g_·ck_Ën
 () > 1)

76 
	`__Ý’64_too_mªy_¬gs
 ();

78 ià(
	`__bužtš_cÚ¡ªt_p
 (
__oæag
))

80 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

82 
	`__Ý’64_missšg_mode
 ();

83  
	`__Ý’64_2
 (
__·th
, 
__oæag
);

85  
	`__Ý’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

88 ià(
	`__va_¬g_·ck_Ën
 () < 1)

89  
	`__Ý’64_2
 (
__·th
, 
__oæag
);

91  
	`__Ý’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

92 
	}
}

96 #ifdeà
__USE_ATFILE


97 #iâdeà
__USE_FILE_OFFSET64


98 
	$__Ý’©_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

99 
	`__nÚnuÎ
 ((2));

100 
	`__REDIRECT
 (
__Ý’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

101 
__oæag
, ...), 
Ý’©
)

102 
	`__nÚnuÎ
 ((2));

104 
	`__REDIRECT
 (
__Ý’©_2
, (
__fd
, cÚ¡ *
__·th
,

105 
__oæag
), 
__Ý’©64_2
)

106 
	`__nÚnuÎ
 ((2));

107 
	`__REDIRECT
 (
__Ý’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

108 
__oæag
, ...), 
Ý’©64
)

109 
	`__nÚnuÎ
 ((2));

111 
	`__”rÜdeþ
 (
__Ý’©_too_mªy_¬gs
,

113 
	`__”rÜdeþ
 (
__Ý’©_missšg_mode
,

116 
__fÜtify_funùiÚ
 

117 
	$Ý’©
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

119 ià(
	`__va_¬g_·ck_Ën
 () > 1)

120 
	`__Ý’©_too_mªy_¬gs
 ();

122 ià(
	`__bužtš_cÚ¡ªt_p
 (
__oæag
))

124 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

126 
	`__Ý’©_missšg_mode
 ();

127  
	`__Ý’©_2
 (
__fd
, 
__·th
, 
__oæag
);

129  
	`__Ý’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

132 ià(
	`__va_¬g_·ck_Ën
 () < 1)

133  
	`__Ý’©_2
 (
__fd
, 
__·th
, 
__oæag
);

135  
	`__Ý’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

136 
	}
}

139 #ifdeà
__USE_LARGEFILE64


140 
	$__Ý’©64_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

141 
	`__nÚnuÎ
 ((2));

142 
	`__REDIRECT
 (
__Ý’©64_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

143 
__oæag
, ...), 
Ý’©64
)

144 
	`__nÚnuÎ
 ((2));

145 
	`__”rÜdeþ
 (
__Ý’©64_too_mªy_¬gs
,

147 
	`__”rÜdeþ
 (
__Ý’©64_missšg_mode
,

150 
__fÜtify_funùiÚ
 

151 
	$Ý’©64
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

153 ià(
	`__va_¬g_·ck_Ën
 () > 1)

154 
	`__Ý’©64_too_mªy_¬gs
 ();

156 ià(
	`__bužtš_cÚ¡ªt_p
 (
__oæag
))

158 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

160 
	`__Ý’©64_missšg_mode
 ();

161  
	`__Ý’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

163  
	`__Ý’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

166 ià(
	`__va_¬g_·ck_Ën
 () < 1)

167  
	`__Ý’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

169  
	`__Ý’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

170 
	}
}

	@/usr/include/bits/huge_val.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VAL
 (
	`__bužtš_huge_v®
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VAL
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

36 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

44 #ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


45 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

47 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


48 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

51 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

52 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VALF
 (
	`__bužtš_huge_v®f
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VALF
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7f800000UL }).
__d
)

	)

40 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

42 #ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


43 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


46 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

49 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

50 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__bužtš_huge_v®l
())

	)

27 #–ià
__GNUC_PREREQ
(2,96)

28 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 0x1.0
p32767L
)

	)

31 
	#__HUGE_VALL_by‹s
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

33 
	#__huge_v®l_t
 uniÚ { 
__c
[12]; 
__ld
; }

	)

34 #ifdeà
__GNUC__


35 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 \

36 ((
__huge_v®l_t
è{ 
__c
: 
__HUGE_VALL_by‹s
 }).
__ld
)

	)

38 
__huge_v®l_t
 
	g__huge_v®l
 = { 
__HUGE_VALL_by‹s
 };

39 
	#HUGE_VALL
 (
__huge_v®l
.
__ld
)

	)

	@/usr/include/bits/inf.h

19 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__bužtš_šff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #iâdeà
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_fš™e
);

25 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_fš™e
);

26 #ifdeà
__MATH_DECLARE_LDOUBLE


27 #ifdeà
__NO_LONG_DOUBLE_MATH


28 
__REDIRECT_NTH
 (
aco¦
, (), 
__acos_fš™e
);

30 
__REDIRECT_NTH
 (
aco¦
, (), 
__aco¦_fš™e
);

34 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


36 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_fš™e
);

37 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_fš™e
);

38 #ifdeà
__MATH_DECLARE_LDOUBLE


39 #ifdeà
__NO_LONG_DOUBLE_MATH


40 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_fš™e
);

42 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_fš™e
);

48 
__REDIRECT_NTH
 (
asš
, (), 
__asš_fš™e
);

49 
__REDIRECT_NTH
 (
asšf
, (), 
__asšf_fš™e
);

50 #ifdeà
__MATH_DECLARE_LDOUBLE


51 #ifdeà
__NO_LONG_DOUBLE_MATH


52 
__REDIRECT_NTH
 (
asšl
, (), 
__asš_fš™e
);

54 
__REDIRECT_NTH
 (
asšl
, (), 
__asšl_fš™e
);

59 
__REDIRECT_NTH
 (
©ª2
, (, ), 
__©ª2_fš™e
);

60 
__REDIRECT_NTH
 (
©ª2f
, (, ), 
__©ª2f_fš™e
);

61 #ifdeà
__MATH_DECLARE_LDOUBLE


62 #ifdeà
__NO_LONG_DOUBLE_MATH


63 
__REDIRECT_NTH
 (
©ª2l
, (, ),

64 
__©ª2_fš™e
);

66 
__REDIRECT_NTH
 (
©ª2l
, (, ),

67 
__©ª2l_fš™e
);

71 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


73 
__REDIRECT_NTH
 (
©ªh
, (), 
__©ªh_fš™e
);

74 
__REDIRECT_NTH
 (
©ªhf
, (), 
__©ªhf_fš™e
);

75 #ifdeà
__MATH_DECLARE_LDOUBLE


76 #ifdeà
__NO_LONG_DOUBLE_MATH


77 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªh_fš™e
);

79 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªhl_fš™e
);

85 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_fš™e
);

86 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_fš™e
);

87 #ifdeà
__MATH_DECLARE_LDOUBLE


88 #ifdeà
__NO_LONG_DOUBLE_MATH


89 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_fš™e
);

91 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_fš™e
);

96 
__REDIRECT_NTH
 (
exp
, (), 
__exp_fš™e
);

97 
__REDIRECT_NTH
 (
expf
, (), 
__expf_fš™e
);

98 #ifdeà
__MATH_DECLARE_LDOUBLE


99 #ifdeà
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
ex¶
, (), 
__exp_fš™e
);

102 
__REDIRECT_NTH
 (
ex¶
, (), 
__ex¶_fš™e
);

106 #ifdeà
__USE_GNU


108 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_fš™e
);

109 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_fš™e
);

110 #ifdeà
__MATH_DECLARE_LDOUBLE


111 #ifdeà
__NO_LONG_DOUBLE_MATH


112 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_fš™e
);

114 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_fš™e
);

119 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_fš™e
);

120 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_fš™e
);

121 #ifdeà
__MATH_DECLARE_LDOUBLE


122 #ifdeà
__NO_LONG_DOUBLE_MATH


123 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_fš™e
);

125 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_fš™e
);

130 #ifdeà
__USE_ISOC99


132 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_fš™e
);

133 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_fš™e
);

134 #ifdeà
__MATH_DECLARE_LDOUBLE


135 #ifdeà
__NO_LONG_DOUBLE_MATH


136 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_fš™e
);

138 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_fš™e
);

144 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_fš™e
);

145 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_fš™e
);

146 #ifdeà
__MATH_DECLARE_LDOUBLE


147 #ifdeà
__NO_LONG_DOUBLE_MATH


148 
__REDIRECT_NTH
 (
fmodl
, (, ),

149 
__fmod_fš™e
);

151 
__REDIRECT_NTH
 (
fmodl
, (, ),

152 
__fmodl_fš™e
);

156 #ifdeà
__USE_ISOC99


158 
__REDIRECT_NTH
 (
hypÙ
, (, ), 
__hypÙ_fš™e
);

159 
__REDIRECT_NTH
 (
hypÙf
, (, ), 
__hypÙf_fš™e
);

160 #ifdeà
__MATH_DECLARE_LDOUBLE


161 #ifdeà
__NO_LONG_DOUBLE_MATH


162 
__REDIRECT_NTH
 (
hypÙl
, (, ),

163 
__hypÙ_fš™e
);

165 
__REDIRECT_NTH
 (
hypÙl
, (, ),

166 
__hypÙl_fš™e
);

171 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


173 
__REDIRECT_NTH
 (
j0
, (), 
__j0_fš™e
);

174 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_fš™e
);

175 #ifdeà
__MATH_DECLARE_LDOUBLE


176 #ifdeà
__NO_LONG_DOUBLE_MATH


177 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_fš™e
);

179 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_fš™e
);

184 
__REDIRECT_NTH
 (
y0
, (), 
__y0_fš™e
);

185 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_fš™e
);

186 #ifdeà
__MATH_DECLARE_LDOUBLE


187 #ifdeà
__NO_LONG_DOUBLE_MATH


188 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_fš™e
);

190 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_fš™e
);

195 
__REDIRECT_NTH
 (
j1
, (), 
__j1_fš™e
);

196 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_fš™e
);

197 #ifdeà
__MATH_DECLARE_LDOUBLE


198 #ifdeà
__NO_LONG_DOUBLE_MATH


199 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_fš™e
);

201 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_fš™e
);

206 
__REDIRECT_NTH
 (
y1
, (), 
__y1_fš™e
);

207 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_fš™e
);

208 #ifdeà
__MATH_DECLARE_LDOUBLE


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_fš™e
);

212 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_fš™e
);

217 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_fš™e
);

218 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_fš™e
);

219 #ifdeà
__MATH_DECLARE_LDOUBLE


220 #ifdeà
__NO_LONG_DOUBLE_MATH


221 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jn_fš™e
);

223 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jÆ_fš™e
);

228 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_fš™e
);

229 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_fš™e
);

230 #ifdeà
__MATH_DECLARE_LDOUBLE


231 #ifdeà
__NO_LONG_DOUBLE_MATH


232 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yn_fš™e
);

234 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yÆ_fš™e
);

239 #ifdeà
__USE_MISC


241 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_fš™e
);

242 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_fš™e
);

243 #ifdeà
__MATH_DECLARE_LDOUBLE


244 #ifdeà
__NO_LONG_DOUBLE_MATH


245 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

246 
__lgamma_r_fš™e
);

248 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

249 
__lgamm®_r_fš™e
);

254 #ià((
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99
) \

255 && 
defšed
 
	g__ex‹º_®ways_šlše
)

257 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamma
 (
__d
))

259 #ifdeà
__USE_ISOC99


260 
__loÿl_signgam
 = 0;

261  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

263  
	`lgamma_r
 (
__d
, &
signgam
);

265 
	}
}

266 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgammaf
 (
__d
))

268 #ifdeà
__USE_ISOC99


269 
__loÿl_signgam
 = 0;

270  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

272  
	`lgammaf_r
 (
__d
, &
signgam
);

274 
	}
}

275 #ifdeà
__MATH_DECLARE_LDOUBLE


276 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamm®
 (
__d
))

278 #ifdeà
__USE_ISOC99


279 
__loÿl_signgam
 = 0;

280  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

282  
	`lgamm®_r
 (
__d
, &
signgam
);

284 
	}
}

288 #ià((
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
) \

289 && 
defšed
 
	g__ex‹º_®ways_šlše
)

291 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamma
 (
__d
))

293 #ifdeà
__USE_ISOC99


294 
__loÿl_signgam
 = 0;

295  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

297  
	`lgamma_r
 (
__d
, &
signgam
);

299 
	}
}

300 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gammaf
 (
__d
))

302 #ifdeà
__USE_ISOC99


303 
__loÿl_signgam
 = 0;

304  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

306  
	`lgammaf_r
 (
__d
, &
signgam
);

308 
	}
}

309 #ifdeà
__MATH_DECLARE_LDOUBLE


310 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamm®
 (
__d
))

312 #ifdeà
__USE_ISOC99


313 
__loÿl_signgam
 = 0;

314  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

316  
	`lgamm®_r
 (
__d
, &
signgam
);

318 
	}
}

323 
__REDIRECT_NTH
 (
log
, (), 
__log_fš™e
);

324 
__REDIRECT_NTH
 (
logf
, (), 
__logf_fš™e
);

325 #ifdeà
__MATH_DECLARE_LDOUBLE


326 #ifdeà
__NO_LONG_DOUBLE_MATH


327 
__REDIRECT_NTH
 (
logl
, (), 
__log_fš™e
);

329 
__REDIRECT_NTH
 (
logl
, (), 
__logl_fš™e
);

334 
__REDIRECT_NTH
 (
log10
, (), 
__log10_fš™e
);

335 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_fš™e
);

336 #ifdeà
__MATH_DECLARE_LDOUBLE


337 #ifdeà
__NO_LONG_DOUBLE_MATH


338 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_fš™e
);

340 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_fš™e
);

344 #ifdeà
__USE_ISOC99


346 
__REDIRECT_NTH
 (
log2
, (), 
__log2_fš™e
);

347 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_fš™e
);

348 #ifdeà
__MATH_DECLARE_LDOUBLE


349 #ifdeà
__NO_LONG_DOUBLE_MATH


350 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_fš™e
);

352 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_fš™e
);

358 
__REDIRECT_NTH
 (
ldexp
, (, ), 
sÿlbn
);

359 
__REDIRECT_NTH
 (
ldexpf
, (, ), 
sÿlbnf
);

360 #ifdeà
__MATH_DECLARE_LDOUBLE


361 
__REDIRECT_NTH
 (
ldex¶
, (, ), 
sÿlbÆ
);

365 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_fš™e
);

366 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_fš™e
);

367 #ifdeà
__MATH_DECLARE_LDOUBLE


368 #ifdeà
__NO_LONG_DOUBLE_MATH


369 
__REDIRECT_NTH
 (
powl
, (, ),

370 
__pow_fš™e
);

372 
__REDIRECT_NTH
 (
powl
, (, ),

373 
__powl_fš™e
);

378 
__REDIRECT_NTH
 (
»mašd”
, (, ), 
__»mašd”_fš™e
);

379 
__REDIRECT_NTH
 (
»mašd”f
, (, ), 
__»mašd”f_fš™e
);

380 #ifdeà
__MATH_DECLARE_LDOUBLE


381 #ifdeà
__NO_LONG_DOUBLE_MATH


382 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

383 
__»mašd”_fš™e
);

385 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

386 
__»mašd”l_fš™e
);

390 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


392 
__REDIRECT_NTH
 (
sÿlb
, (, ), 
__sÿlb_fš™e
);

393 
__REDIRECT_NTH
 (
sÿlbf
, (, ), 
__sÿlbf_fš™e
);

394 #ifdeà
__MATH_DECLARE_LDOUBLE


395 #ifdeà
__NO_LONG_DOUBLE_MATH


396 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

397 
__sÿlb_fš™e
);

399 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

400 
__sÿlbl_fš™e
);

406 
__REDIRECT_NTH
 (
sšh
, (), 
__sšh_fš™e
);

407 
__REDIRECT_NTH
 (
sšhf
, (), 
__sšhf_fš™e
);

408 #ifdeà
__MATH_DECLARE_LDOUBLE


409 #ifdeà
__NO_LONG_DOUBLE_MATH


410 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšh_fš™e
);

412 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšhl_fš™e
);

417 
__REDIRECT_NTH
 (
sq¹
, (), 
__sq¹_fš™e
);

418 
__REDIRECT_NTH
 (
sq¹f
, (), 
__sq¹f_fš™e
);

419 #ifdeà
__MATH_DECLARE_LDOUBLE


420 #ifdeà
__NO_LONG_DOUBLE_MATH


421 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹_fš™e
);

423 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹l_fš™e
);

427 #ià
defšed
 
__USE_ISOC99
 && defšed 
__ex‹º_®ways_šlše


429 
__gamma_r_fš™e
 (, *);

430 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamma
 (
__d
))

432 
__loÿl_signgam
 = 0;

433 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

434  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

435 
	}
}

436 
__gammaf_r_fš™e
 (, *);

437 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgammaf
 (
__d
))

439 
__loÿl_signgam
 = 0;

440 
__»s
 = 
	`__gammaf_r_fš™e
 (
__d
, &
__loÿl_signgam
);

441  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

442 
	}
}

443 #ifdeà
__MATH_DECLARE_LDOUBLE


444 
__gamm®_r_fš™e
 (, *);

445 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamm®
 (
__d
))

447 
__loÿl_signgam
 = 0;

448 #ifdeà
__NO_LONG_DOUBLE_MATH


449 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

451 
__»s
 = 
	`__gamm®_r_fš™e
 (
__d
, &
__loÿl_signgam
);

453  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

454 
	}
}

	@/usr/include/bits/mathcalls.h

45 #iâdeà
_MATH_H


52 
_MdoubË_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

56 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

58 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

60 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

63 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

65 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

67 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

74 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

76 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

77 
	g_MdoubË_END_NAMESPACE


79 #ifdeà
__USE_GNU


81 
__MATHDECL
 (,
sšcos
,,

82 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

85 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

90 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

92 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubË_BEGIN_NAMESPACE


100 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

103 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

109 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
))

116 
__©Œibu‹__
 ((
__nÚnuÎ__
 (2)));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
ûž
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cÝysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (cÚ¡ *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
žogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALLX
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

342 
__MATHCALLX
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

346 
__MATHDECL_1
 (, 
__åþassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


22 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #ià
defšed
 
__x86_64__
 || (defšed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tæßt_t
;

29 
	tdoubË_t
;

35 
	tæßt_t
;

37 
	tdoubË_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #ifdeà
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #ifdeà
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #ifdeà
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #iâdeà
_MATH_H


23 #iâdeà
__ex‹º_®ways_šlše


24 
	#__MATH_INLINE
 
__šlše


	)

26 
	#__MATH_INLINE
 
__ex‹º_®ways_šlše


	)

30 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

32 #ià!
__GNUC_PREREQ
 (2,97)

37 #undeà
isg»©”


38 #undeà
isg»©”equ®


39 #undeà
i¦ess


40 #undeà
i¦es£qu®


41 #undeà
i¦essg»©”


42 #undeà
isunÜd”ed


43 #ifdeà
__i686__


46 
	#isg»©”
(
x
, 
y
) \

47 ({ 
__»suÉ
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__»suÉ
; })

	)

51 
	#isg»©”equ®
(
x
, 
y
) \

52 ({ 
__»suÉ
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__»suÉ
; })

	)

57 
	#i¦ess
(
x
, 
y
) \

58 ({ 
__»suÉ
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__»suÉ
; })

	)

63 
	#i¦es£qu®
(
x
, 
y
) \

64 ({ 
__»suÉ
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__»suÉ
; })

	)

69 
	#i¦essg»©”
(
x
, 
y
) \

70 ({ 
__»suÉ
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__»suÉ
; })

	)

75 
	#isunÜd”ed
(
x
, 
y
) \

76 ({ 
__»suÉ
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__»suÉ
; })

	)

82 
	#isg»©”
(
x
, 
y
) \

83 ({ 
__»suÉ
; \

84 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

85 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__»suÉ
; })

	)

88 
	#isg»©”equ®
(
x
, 
y
) \

89 ({ 
__»suÉ
; \

90 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

91 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__»suÉ
; })

	)

94 
	#i¦ess
(
x
, 
y
) \

95 ({ 
__»suÉ
; \

96 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

97 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__»suÉ
; })

	)

100 
	#i¦es£qu®
(
x
, 
y
) \

101 ({ 
__»suÉ
; \

102 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

103 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__»suÉ
; })

	)

106 
	#i¦essg»©”
(
x
, 
y
) \

107 ({ 
__»suÉ
; \

108 
	`__asm__
 ("fucompp; fnstsw;estb $0x44, %%ah; setz %%al" \

109 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__»suÉ
; })

	)

112 
	#isunÜd”ed
(
x
, 
y
) \

113 ({ 
__»suÉ
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__»suÉ
; })

	)

122 #ià
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signb™f
 (
__x
))

129 #ifdeà
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signb™
 (
__x
))

141 #ifdeà
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signb™l
 (
__x
))

153 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #ià
__GNUC_PREREQ
 (2, 8)

165 #ià!
__GNUC_PREREQ
 (3, 4è&& !
defšed
 
__NO_MATH_INLINES
 \

166 && 
defšed
 
	g__OPTIMIZE__


170 #ifdeà
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifdeà
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ìštf
 (
__x
))

178 
__»s
;

183 
__asm
 
	`__vÞ©že__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

184  
__»s
;

185 
	}
}

187 #ifdeà
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ìšt
 (
__x
))

191 
__»s
;

196 
__asm
 
	`__vÞ©že__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

197  
__»s
;

198 
	}
}

200 #ifdeà
__x86_64__


201 
__MATH_INLINE
 

202 
__NTH
 (
	$Îrštf
 (
__x
))

204 
__»s
;

209 
__asm
 
	`__vÞ©že__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

210  
__»s
;

211 
	}
}

212 
__MATH_INLINE
 

213 
__NTH
 (
	$Îršt
 (
__x
))

215 
__»s
;

220 
__asm
 
	`__vÞ©že__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

221  
__»s
;

222 
	}
}

225 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

226 && 
defšed
 
__SSE2_MATH__


228 
__MATH_INLINE
 

229 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

231 #ifdeà
__AVX__


232 
__»s
;

233 
	`__asm
 ("vmaxs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

234  
__»s
;

236 
	`__asm
 ("maxs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

237  
__x
;

239 
	}
}

240 
__MATH_INLINE
 

241 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

243 #ifdeà
__AVX__


244 
__»s
;

245 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

246  
__»s
;

248 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

249  
__x
;

251 
	}
}

254 
__MATH_INLINE
 

255 
__NTH
 (
	$fmšf
 (
__x
, 
__y
))

257 #ifdeà
__AVX__


258 
__»s
;

259 
	`__asm
 ("vmšs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

260  
__»s
;

262 
	`__asm
 ("mšs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

263  
__x
;

265 
	}
}

266 
__MATH_INLINE
 

267 
__NTH
 (
	$fmš
 (
__x
, 
__y
))

269 #ifdeà
__AVX__


270 
__»s
;

271 
	`__asm
 ("vmšsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

272  
__»s
;

274 
	`__asm
 ("mšsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

275  
__x
;

277 
	}
}

280 
	g__END_NAMESPACE_C99


283 #ià
defšed
 
__SSE4_1__
 && defšed 
__SSE2_MATH__


284 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


285 
__BEGIN_NAMESPACE_C99


288 
__MATH_INLINE
 

289 
__NTH
 (
	$ršt
 (
__x
))

291 
__»s
;

296 
__asm
 
	`__vÞ©že__
 ("roundsd $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

297  
__»s
;

298 
	}
}

299 
__MATH_INLINE
 

300 
__NTH
 (
	$rštf
 (
__x
))

302 
__»s
;

307 
__asm
 
	`__vÞ©že__
 ("rounds $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

308  
__»s
;

309 
	}
}

311 #ifdeà
__USE_ISOC99


313 
__MATH_INLINE
 

314 
__NTH
 (
	$Ã¬byšt
 (
__x
))

316 
__»s
;

321 
__asm
 
	`__vÞ©že__
 ("roundsd $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

322  
__»s
;

323 
	}
}

324 
__MATH_INLINE
 

325 
__NTH
 (
	$Ã¬byštf
 (
__x
))

327 
__»s
;

332 
__asm
 
	`__vÞ©že__
 ("rounds $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

333  
__»s
;

334 
	}
}

337 
	g__END_NAMESPACE_C99


340 
__BEGIN_NAMESPACE_STD


342 
__MATH_INLINE
 

343 
__NTH
 (
	$ûž
 (
__x
))

345 
__»s
;

346 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

347  
__»s
;

348 
	}
}

349 
__END_NAMESPACE_STD


351 
__BEGIN_NAMESPACE_C99


352 
__MATH_INLINE
 

353 
__NTH
 (
	$ûžf
 (
__x
))

355 
__»s
;

356 
	`__asm
 ("rounds $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

357  
__»s
;

358 
	}
}

359 
__END_NAMESPACE_C99


361 
__BEGIN_NAMESPACE_STD


363 
__MATH_INLINE
 

364 
__NTH
 (
	$æoÜ
 (
__x
))

366 
__»s
;

367 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

368  
__»s
;

369 
	}
}

370 
__END_NAMESPACE_STD


372 
__BEGIN_NAMESPACE_C99


373 
__MATH_INLINE
 

374 
__NTH
 (
	$æoÜf
 (
__x
))

376 
__»s
;

377 
	`__asm
 ("rounds $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

378  
__»s
;

379 
	}
}

380 
	g__END_NAMESPACE_C99


385 #iâdeà
__x86_64__


386 #ià((!
defšed
 
__NO_MATH_INLINES
 || defšed 
__LIBC_INTERNAL_MATH_INLINES
) \

387 && 
defšed
 
	g__OPTIMIZE__
)

391 #undeà
m©h_”rhªdlšg


400 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


401 
	#__šlše_m©hÝ
(
func
, 
Ý
) \

402 
	`__šlše_m©hÝ_
 (, 
func
, 
Ý
) \

403 
	`__šlše_m©hÝ_
 (, 
	`__CONCAT
(
func
,
f
), 
Ý
) \

404 
	`__šlše_m©hÝ_
 (, 
	`__CONCAT
(
func
,
l
), 
Ý
)

	)

405 
	#__šlše_m©hÝNP
(
func
, 
Ý
) \

406 
	`__šlše_m©hÝNP_
 (, 
func
, 
Ý
) \

407 
	`__šlše_m©hÝNP_
 (, 
	`__CONCAT
(
func
,
f
), 
Ý
) \

408 
	`__šlše_m©hÝNP_
 (, 
	`__CONCAT
(
func
,
l
), 
Ý
)

	)

410 
	#__šlše_m©hÝ
(
func
, 
Ý
) \

411 
	`__šlše_m©hÝ_
 (, 
func
, 
Ý
)

	)

412 
	#__šlše_m©hÝNP
(
func
, 
Ý
) \

413 
	`__šlše_m©hÝNP_
 (, 
func
, 
Ý
)

	)

416 
	#__šlše_m©hÝ_
(
æßt_ty³
, 
func
, 
Ý
) \

417 
	`__šlše_m©hÝ_deþ_
 (
æßt_ty³
, 
func
, 
Ý
, "0" (
__x
))

	)

418 
	#__šlše_m©hÝNP_
(
æßt_ty³
, 
func
, 
Ý
) \

419 
	`__šlše_m©hÝ_deþNP_
 (
æßt_ty³
, 
func
, 
Ý
, "0" (
__x
))

	)

422 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


423 
	#__šlše_m©hÝ_deþ
(
func
, 
Ý
, 
·¿ms
...) \

424 
	`__šlše_m©hÝ_deþ_
 (, 
func
, 
Ý
, 
·¿ms
) \

425 
	`__šlše_m©hÝ_deþ_
 (, 
	`__CONCAT
(
func
,
f
), 
Ý
, 
·¿ms
) \

426 
	`__šlše_m©hÝ_deþ_
 (, 
	`__CONCAT
(
func
,
l
), 
Ý
, 
·¿ms
)

	)

427 
	#__šlše_m©hÝ_deþNP
(
func
, 
Ý
, 
·¿ms
...) \

428 
	`__šlše_m©hÝ_deþNP_
 (, 
func
, 
Ý
, 
·¿ms
) \

429 
	`__šlše_m©hÝ_deþNP_
 (, 
	`__CONCAT
(
func
,
f
), 
Ý
, 
·¿ms
) \

430 
	`__šlše_m©hÝ_deþNP_
 (, 
	`__CONCAT
(
func
,
l
), 
Ý
, 
·¿ms
)

	)

432 
	#__šlše_m©hÝ_deþ
(
func
, 
Ý
, 
·¿ms
...) \

433 
	`__šlše_m©hÝ_deþ_
 (, 
func
, 
Ý
, 
·¿ms
)

	)

434 
	#__šlše_m©hÝ_deþNP
(
func
, 
Ý
, 
·¿ms
...) \

435 
	`__šlše_m©hÝ_deþNP_
 (, 
func
, 
Ý
, 
·¿ms
)

	)

438 
	#__šlše_m©hÝ_deþ_
(
æßt_ty³
, 
func
, 
Ý
, 
·¿ms
...) \

439 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

440 
	`__šlše_m©hÝ_deþNP_
 (
æßt_ty³
, 
func
, 
Ý
, 
·¿ms
)

	)

442 
	#__šlše_m©hÝ_deþNP_
(
æßt_ty³
, 
func
, 
Ý
, 
·¿ms
...) \

443 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
__x
)) \

445 
æßt_ty³
 
__»suÉ
; \

446 
__asm
 
	`__vÞ©že__
 (
Ý
 : "ñ" (
__»suÉ
è: 
·¿ms
); \

447  
__»suÉ
; \

448 }

	)

451 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


452 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

453 
	`__šlše_m©hcode_
 (, 
func
, 
¬g
, 
code
) \

454 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

455 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

456 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

457 
	`__šlše_m©hcodeNP_
 (, 
func
, 
¬g
, 
code
) \

458 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

459 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

460 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

461 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

462 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

463 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

464 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

465 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

466 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

467 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

468 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

469 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

470 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

471 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

472 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

473 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

474 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

475 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

477 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

478 
	`__šlše_m©hcode_
 (, 
func
, (
¬g
), 
code
)

	)

479 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

480 
	`__šlše_m©hcodeNP_
 (, 
func
, (
¬g
), 
code
)

	)

481 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

482 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

483 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

484 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

485 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

486 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

487 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

488 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

491 
	#__šlše_m©hcode_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

492 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

493 
	`__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
)

	)

495 
	#__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

496 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g
)) \

498 
code
; \

499 }

	)

502 
	#__šlše_m©hcode2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

503 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³è
__THROW
; \

504 
	`__šlše_m©hcodeNP2_
 (
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

506 
	#__šlše_m©hcodeNP2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

507 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
)) \

509 
code
; \

510 }

	)

512 
	#__šlše_m©hcode3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

513 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³, flßt_ty³è
__THROW
; \

514 
	`__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

516 
	#__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

517 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
, \

518 
æßt_ty³
 
¬g3
)) \

520 
code
; \

521 }

	)

525 #ià!
defšed
 
__NO_MATH_INLINES
 && defšed 
__OPTIMIZE__


529 #ifdeà
__FAST_MATH__


530 #ifdeà
__USE_GNU


531 
	#__sšcos_code
 \

532 
__co¤
; \

533 
__sšr
; \

534 
__swtmp
; \

535 
__asm
 
__vÞ©že__
 \

550 : "ñ" (
__co¤
), "=u" (
__sšr
), "÷" (
__swtmp
è: "0" (
__x
)); \

551 *
__sšx
 = 
__sšr
; \

552 *
__cosx
 = 
__co¤


	)

554 
__MATH_INLINE
 

555 
__NTH
 (
	$__sšcos
 (
__x
, *
__sšx
, *
__cosx
))

557 
__sšcos_code
;

558 
	}
}

560 
__MATH_INLINE
 

561 
__NTH
 (
	$__sšcosf
 (
__x
, *
__sšx
, *
__cosx
))

563 
__sšcos_code
;

564 
	}
}

566 
__MATH_INLINE
 

567 
__NTH
 (
	$__sšco¦
 (
__x
, *
__sšx
, *
__cosx
))

569 
__sšcos_code
;

570 
	}
}

577 #ià
__GNUC_PREREQ
 (3, 5)

578 
	#__expm1_code
 \

579 
__‹mp
; \

580 
__‹mp
 = 
	`__bužtš_expm1l
 (
__x
); \

581  
__‹mp
 ? __‹m°: 
__x


	)

583 
	#__expm1_code
 \

584 
__v®ue
; \

585 
__expÚ’t
; \

586 
__‹mp
; \

587 
__asm
 
__vÞ©že__
 \

596 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

597 
__asm
 
__vÞ©že__
 \

599 : "ñ" (
__‹mp
è: "0" (1.0), "u" (
__expÚ’t
)); \

600 
__‹mp
 -= 1.0; \

601 
__‹mp
 +ð
__v®ue
; \

602  
__‹mp
 ? __‹m°: 
__x


	)

604 
	$__šlše_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

606 #ià
	`__GNUC_PREREQ
 (3, 4)

607 
	`__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
,  
	$__bužtš_ex¶
 (
__x
))

609 
	#__exp_code
 \

610 
__v®ue
; \

611 
__expÚ’t
; \

612 
__asm
 
__vÞ©že__
 \

620 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

621 
__v®ue
 += 1.0; \

622 
__asm
 
__vÞ©že__
 \

624 : "ñ" (
__v®ue
è: "0" (__v®ue), "u" (
__expÚ’t
)); \

625  
__v®ue


	)

626 
	$__šlše_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

627 
	$__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
, 
__exp_code
)

631 #ià!
	`__GNUC_PREREQ
 (3, 5)

632 
	`__šlše_m©hcodeNP
 (
n
, 
__x
, \

633 
__v®ue
; \

634 
__v®ue2
 
	`__©Œibu‹__
 ((
__unu£d__
)); \

635 
__asm
 
__vÞ©že__
 \

637 : "ñ" (
__v®ue2
), "=u" (
__v®ue
è: "0" (
__x
)); \

638  
__v®ue
)

643 #ià
	`__GNUC_PREREQ
 (3, 4)

644 
	`__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
,

645  
	$__bužtš_©ª2l
 (
__y
, 
__x
))

647 
	#__©ª2_code
 \

648 
__v®ue
; \

649 
__asm
 
__vÞ©že__
 \

651 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "st(1)"); \

652  
__v®ue


	)

653 #ifdeà
__FAST_MATH__


654 
	$__šlše_m©hcodeNP2
 (
©ª2
, 
__y
, 
__x
, 
__©ª2_code
)

656 
	$__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
, 
__©ª2_code
)

660 #ià
defšed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

661 
	`__šlše_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

662 
__v®ue
; \

663 
__asm
 
__vÞ©že__
 \

668 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

669  
__v®ue
)

673 #ifdeà
__FAST_MATH__


674 #ià!
	`__GNUC_PREREQ
 (3,3)

675 
	`__šlše_m©hÝNP
 (
sq¹
, "fsqrt")

676 
	`__šlše_m©hÝNP_
 (, 
__sq¹l
, "fsqrt")

677 
	#__libc_sq¹l
(
n
è
	`__sq¹l
 (n)

	)

679 
	#__libc_sq¹l
(
n
è
	`__bužtš_sq¹l
 (n)

	)

683 #ià
	`__GNUC_PREREQ
 (2, 8)

684 
	`__šlše_m©hcodeNP_
 (, 
çbs
, 
__x
,  
	$__bužtš_çbs
 (
__x
))

685 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


686 
	`__šlše_m©hcodeNP_
 (, 
çbsf
, 
__x
,  
	$__bužtš_çbsf
 (
__x
))

687 
	`__šlše_m©hcodeNP_
 (, 
çb¦
, 
__x
,  
	$__bužtš_çb¦
 (
__x
))

689 
	`__šlše_m©hcodeNP_
 (, 
__çb¦
, 
__x
,  
	$__bužtš_çb¦
 (
__x
))

691 
	`__šlše_m©hÝ
 (
çbs
, "fabs")

692 
	`__šlše_m©hÝ_
 (, 
__çb¦
, "fabs")

695 #ifdeà
__FAST_MATH__


696 #ià!
	`__GNUC_PREREQ
 (3, 4)

698 
	`__šlše_m©hÝNP
 (
sš
, "fsin")

700 
	`__šlše_m©hÝNP
 (
cos
, "fcos")

702 
	`__šlše_m©hÝ_deþNP
 (
log
, "ædÊ2; fxch; fyl2x", "0" (
__x
) : "st(1)")

705 #ià!
	`__GNUC_PREREQ
 (3, 5)

706 
	`__šlše_m©hÝ_deþNP
 (
log10
, "ædlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

708 
	`__šlše_m©hcodeNP
 (
asš
, 
__x
,  
	`__©ª2l
 (__x, 
	`__libc_sq¹l
 (1.0 - __x * __x)))

709 
	`__šlše_m©hcodeNP
 (
acos
, 
__x
,  
	`__©ª2l
 (
	`__libc_sq¹l
 (1.0 - __x * __x), __x))

712 #ià!
	`__GNUC_PREREQ
 (3, 4)

713 
	`__šlše_m©hÝ_deþNP
 (
©ª
, "æd1; f·n", "0" (
__x
) : "st(1)")

717 
	`__šlše_m©hcode_
 (, 
__sgn1l
, 
__x
, \

718 
__ex‹nsiÚ__
 uniÚ { 
__xld
; 
__xi
[3]; } 
__n
 = \

719 { 
__xld
: 
__x
 
	}
}; \

720 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

721 
	g__n
.
	g__xi
[1] = 0x80000000; \

722 
	g__n
.
	g__xi
[0] = 0; \

723  
	g__n
.
	g__xld
)

726 #ifdeà
__FAST_MATH__


728 
__šlše_m©hcodeNP
 (
sšh
, 
__x
, \

729 
__exm1
 = 
__expm1l
 (
__çb¦
 (
__x
)); \

730  0.5 * (
__exm1
 / (__exm1 + 1.0è+ __exm1è* 
	$__sgn1l
 (
__x
))

732 
	`__šlše_m©hcodeNP
 (
cosh
, 
__x
, \

733 
__ex
 = 
	`__ex¶
 (
__x
); \

734  0.5 * (
__ex
 + 1.0 / __ex))

736 
	`__šlše_m©hcodeNP
 (
nh
, 
__x
, \

737 
__exm1
 = 
	`__expm1l
 (-
	`__çb¦
 (
__x
 + __x)); \

738  
__exm1
 / (__exm1 + 2.0è* 
	`__sgn1l
 (-
__x
))

741 
	`__šlše_m©hcodeNP
 (
æoÜ
, 
__x
, \

742 
__v®ue
; \

743 
__ignÜe
; \

744 
__cw
; \

745 
__cwtmp
; \

746 
__asm
 
	`__vÞ©že
 ("fnstcw %3\n\t" \

754 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

755 "=m" (
__cw
) \

756 : "0" (
__x
)); \

757  
__v®ue
)

759 
	`__šlše_m©hcodeNP
 (
ûž
, 
__x
, \

760 
__v®ue
; \

761 
__ignÜe
; \

762 
__cw
; \

763 
__cwtmp
; \

764 
__asm
 
	`__vÞ©že
 ("fnstcw %3\n\t" \

772 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

773 "=m" (
__cw
) \

774 : "0" (
__x
)); \

775  
__v®ue
)

777 #ifdeà
__FAST_MATH__


778 
	#__ldexp_code
 \

779 
__v®ue
; \

780 
__asm
 
__vÞ©že__
 \

782 : "ñ" (
__v®ue
è: "0" (
__x
), "u" ((è
__y
)); \

783  
__v®ue


	)

785 
__MATH_INLINE
 

786 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

788 
__ldexp_code
;

789 
	}
}

794 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


796 #ifdeà
__FAST_MATH__


797 
	$__šlše_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

801 
	#__M_SQRT2
 1.41421356237309504880L

	)

803 #ià!
	`__GNUC_PREREQ
 (3, 5)

804 
	`__šlše_m©hcodeNP
 (
log1p
, 
__x
, \

805 
__v®ue
; \

806 ià(
	`__çb¦
 (
__x
è>ð1.0 - 0.5 * 
__M_SQRT2
) \

807 
__v®ue
 = 
	`logl
 (1.0 + 
__x
); \

809 
__asm
 
__vÞ©že__
 \

813 : "ñ" (
__v®ue
è: "0" (
__x
) : "st(1)"); \

814  
__v®ue
)

819 
	`__šlše_m©hcodeNP
 (
asšh
, 
__x
, \

820 
__y
 = 
	`__çb¦
 (
__x
); \

821  (
	`log1¶
 (
__y
 * __y / (
	`__libc_sq¹l
 (__y * __y + 1.0) + 1.0) + __y) \

822 * 
	$__sgn1l
 (
__x
)))

824 
	`__šlše_m©hcodeNP
 (
acosh
, 
__x
, \

825  
	`logl
 (
__x
 + 
	`__libc_sq¹l
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

827 
	`__šlše_m©hcodeNP
 (
©ªh
, 
__x
, \

828 
__y
 = 
	`__çb¦
 (
__x
); \

829  -0.5 * 
	`log1¶
 (-(
__y
 + __yè/ (1.0 + __y)è* 
	$__sgn1l
 (
__x
))

832 
	`__šlše_m©hcodeNP2
 (
hypÙ
, 
__x
, 
__y
,

833  
	`__libc_sq¹l
 (
__x
 * __x + 
__y
 * __y))

835 #ià!
	`__GNUC_PREREQ
 (3, 5)

836 
	`__šlše_m©hcodeNP
(
logb
, 
__x
, \

837 
__v®ue
; \

838 
__junk
; \

839 
__asm
 
__vÞ©že__
 \

841 : "ñ" (
__junk
), "=u" (
__v®ue
è: "0" (
__x
)); \

842  
__v®ue
)

848 #ifdeà
__USE_ISOC99


849 #ifdeà
__FAST_MATH__


851 #ià!
	`__GNUC_PREREQ
 (3, 5)

852 
	`__šlše_m©hÝ_deþNP
 (
log2
, "æd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

855 
__MATH_INLINE
 

856 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

858 
__ldexp_code
;

859 
	}
}

861 
__MATH_INLINE
 

862 
__NTH
 (
	$ldex¶
 (
__x
, 
__y
))

864 
__ldexp_code
;

865 
	}
}

867 
__šlše_m©hÝNP
 (
ršt
, "frndint")

870 
	#__Ìšt_code
 \

871 
__ÌšŒes
; \

872 
__asm__
 
__vÞ©že__
 \

874 : "=m" (
__ÌšŒes
è: "t" (
__x
) : "st"); \

875  
__ÌšŒes


	)

876 
__MATH_INLINE
 

877 
__NTH
 (
	$Ìštf
 (
__x
))

879 
__Ìšt_code
;

880 
	}
}

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ìšt
 (
__x
))

884 
__Ìšt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$ÌšŽ
 (
__x
))

889 
__Ìšt_code
;

890 
	}
}

891 #undeà
__Ìšt_code


893 
	#__Îršt_code
 \

894 
__ÎršŒes
; \

895 
__asm__
 
__vÞ©že__
 \

897 : "=m" (
__ÎršŒes
è: "t" (
__x
) : "st"); \

898  
__ÎršŒes


	)

899 
__MATH_INLINE
 

900 
__NTH
 (
	$Îrštf
 (
__x
))

902 
__Îršt_code
;

903 
	}
}

904 
__MATH_INLINE
 

905 
__NTH
 (
	$Îršt
 (
__x
))

907 
__Îršt_code
;

908 
	}
}

909 
__MATH_INLINE
 

910 
__NTH
 (
	$ÎršŽ
 (
__x
))

912 
__Îršt_code
;

913 
	}
}

914 #undeà
__Îršt_code


919 #ifdeà
__USE_MISC


921 #ià
defšed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

922 
__šlše_m©hcodeNP2
 (
d»m
, 
__x
, 
__y
, \

923 
__v®ue
; \

924 
__þobb”ed
; \

925 
__asm
 
__vÞ©že__
 \

930 : "ñ" (
__v®ue
), "=&a" (
__þobb”ed
è: "0" (
__x
), "u" (
__y
) : "cc"); \

931  
__v®ue
)

936 
__MATH_INLINE
 

937 
__NTH
 (
	$__fš™e
 (
__x
))

939  (
__ex‹nsiÚ__


940 (((((uniÚ { 
__d
; 
__i
[2]; }è{__d: 
__x
}).__i[1]

942 
	}
}

947 #undeà
__©ª2_code


948 #ifdeà
__FAST_MATH__


949 #undeà
__expm1_code


950 #undeà
__exp_code


951 #undeà
__sšcos_code


958 #ifdeà
__LIBC_INTERNAL_MATH_INLINES


959 
__šlše_m©hÝ
 (
__›“754_sq¹
, "fsqrt")

960 
__šlše_m©hcode2
 (
__›“754_©ª2
, 
__y
, 
__x
,

961 
__v®ue
;

962 
__asm
 
__vÞ©že__
 ("fpatan\n\t"

963 : "ñ" (
__v®ue
)

964 : "0" (
__x
), "u" (
__y
) : "st(1)");

965  
__v®ue
;)

	@/usr/include/bits/nan.h

19 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__bužtš_Çnf
 (""))

	)

30 #–ià
defšed
 
__GNUC__


32 
	#NAN
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


42 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

44 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


45 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

48 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


49 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

50 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/stat.h

18 #ià!
defšed
 
_SYS_STAT_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #iâdeà
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s¡©


48 
__dev_t
 
	m¡_dev
;

49 #iâdeà
__x86_64__


50 
	m__·d1
;

52 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


53 
__šo_t
 
	m¡_šo
;

55 
__šo_t
 
	m__¡_šo
;

57 #iâdeà
__x86_64__


58 
__mode_t
 
	m¡_mode
;

59 
__Æšk_t
 
	m¡_Æšk
;

61 
__Æšk_t
 
	m¡_Æšk
;

62 
__mode_t
 
	m¡_mode
;

64 
__uid_t
 
	m¡_uid
;

65 
__gid_t
 
	m¡_gid
;

66 #ifdeà
__x86_64__


67 
	m__·d0
;

69 
__dev_t
 
	m¡_rdev
;

70 #iâdeà
__x86_64__


71 
	m__·d2
;

73 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m¡_size
;

76 
__off64_t
 
	m¡_size
;

78 
__blksize_t
 
	m¡_blksize
;

79 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


80 
__blkút_t
 
	m¡_blocks
;

82 
__blkút64_t
 
	m¡_blocks
;

84 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


91 
time¥ec
 
	m¡_©im
;

92 
time¥ec
 
	m¡_mtim
;

93 
time¥ec
 
	m¡_ùim
;

94 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

95 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

96 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

98 
__time_t
 
	m¡_©ime
;

99 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

100 
__time_t
 
	m¡_mtime
;

101 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

102 
__time_t
 
	m¡_ùime
;

103 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

105 #ifdeà
__x86_64__


106 
__sysÿÎ_¦Úg_t
 
	m__unu£d
[3];

108 #iâdeà
__USE_FILE_OFFSET64


109 
	m__unu£d4
;

110 
	m__unu£d5
;

112 
__šo64_t
 
	m¡_šo
;

117 #ifdeà
__USE_LARGEFILE64


119 
	s¡©64


121 
__dev_t
 
	m¡_dev
;

122 #ifdeà
__x86_64__


123 
__šo64_t
 
	m¡_šo
;

124 
__Æšk_t
 
	m¡_Æšk
;

125 
__mode_t
 
	m¡_mode
;

127 
	m__·d1
;

128 
__šo_t
 
	m__¡_šo
;

129 
__mode_t
 
	m¡_mode
;

130 
__Æšk_t
 
	m¡_Æšk
;

132 
__uid_t
 
	m¡_uid
;

133 
__gid_t
 
	m¡_gid
;

134 #ifdeà
__x86_64__


135 
	m__·d0
;

136 
__dev_t
 
	m¡_rdev
;

137 
__off_t
 
	m¡_size
;

139 
__dev_t
 
	m¡_rdev
;

140 
	m__·d2
;

141 
__off64_t
 
	m¡_size
;

143 
__blksize_t
 
	m¡_blksize
;

144 
__blkút64_t
 
	m¡_blocks
;

145 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


152 
time¥ec
 
	m¡_©im
;

153 
time¥ec
 
	m¡_mtim
;

154 
time¥ec
 
	m¡_ùim
;

156 
__time_t
 
	m¡_©ime
;

157 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

163 #ifdeà
__x86_64__


164 
__sysÿÎ_¦Úg_t
 
	m__unu£d
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

19 #iâdeà
_STDIO_H


23 
__BEGIN_NAMESPACE_STD


24 
	$__LDBL_REDIR_DECL
 (
årštf
)

25 
	$__LDBL_REDIR_DECL
 (
´štf
)

26 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

27 
	$__LDBL_REDIR_DECL
 (
vårštf
)

28 
	$__LDBL_REDIR_DECL
 (
v´štf
)

29 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

30 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

31 && !
defšed
 
__REDIRECT
 \

32 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

33 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

34 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

37 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

41 
__END_NAMESPACE_STD


43 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

46 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

47 
__END_NAMESPACE_C99


50 #ifdef 
__USE_ISOC99


51 
__BEGIN_NAMESPACE_C99


52 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

53 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

54 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

55 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

58 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

62 
__END_NAMESPACE_C99


65 #ifdeà
__USE_XOPEN2K8


66 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

67 
	$__LDBL_REDIR_DECL
 (
d´štf
)

70 #ifdeà
__USE_GNU


71 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

73 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

74 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

75 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

78 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


79 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

81 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


82 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

85 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

90 #ifdeà
__USE_XOPEN2K8


91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

94 #ifdeà
__USE_GNU


95 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

96 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

97 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

98 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

19 #iâdeà
_STDIO_H


23 #iâdeà
__ex‹º_šlše


24 
	#__STDIO_INLINE
 
šlše


	)

26 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

30 #ifdeà
__USE_EXTERN_INLINES


33 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
)

35 
__STDIO_INLINE
 

36 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

38  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

39 
	}
}

43 
__STDIO_INLINE
 

44 
	$g‘ch¬
 ()

46  
	`_IO_g‘c
 (
¡dš
);

47 
	}
}

50 #ifdeà
__USE_MISC


52 
__STDIO_INLINE
 

53 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

55  
	`_IO_g‘c_uÆocked
 (
__å
);

56 
	}
}

60 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


62 
__STDIO_INLINE
 

63 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

65  
	`_IO_g‘c_uÆocked
 (
__å
);

66 
	}
}

69 
__STDIO_INLINE
 

70 
	$g‘ch¬_uÆocked
 ()

72  
	`_IO_g‘c_uÆocked
 (
¡dš
);

73 
	}
}

78 
__STDIO_INLINE
 

79 
	$putch¬
 (
__c
)

81  
	`_IO_putc
 (
__c
, 
¡dout
);

82 
	}
}

85 #ifdeà
__USE_MISC


87 
__STDIO_INLINE
 

88 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

90  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

91 
	}
}

95 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


97 
__STDIO_INLINE
 

98 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

100  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

101 
	}
}

104 
__STDIO_INLINE
 

105 
	$putch¬_uÆocked
 (
__c
)

107  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

108 
	}
}

112 #ifdef 
__USE_GNU


114 
__STDIO_INLINE
 
_IO_ssize_t


115 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

117  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

118 
	}
}

122 #ifdeà
__USE_MISC


124 
__STDIO_INLINE
 

125 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

127  
	`_IO_ãof_uÆocked
 (
__¡»am
);

128 
	}
}

131 
__STDIO_INLINE
 

132 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

134  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

135 
	}
}

141 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

142 && !
defšed
 
	g__ýlu¥lus


144 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

145 (
	`__ex‹nsiÚ__
 ((
	`__bužtš_cÚ¡ªt_p
 (
size
è&& __bužtš_cÚ¡ªt_°(
n
) \

146 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

147 && (
size_t
è(
size
) != 0) \

148 ? ({ *
__±r
 = (*è(
±r
); \

149 
FILE
 *
__¡»am
 = (
¡»am
); \

150 
size_t
 
__út
; \

151 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

152 
__út
 > 0; --__cnt) \

154 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

155 ià(
__c
 =ð
EOF
) \

157 *
__±r
++ = 
__c
; \

159 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

160 / (
size_t
è(
size
); }) \

161 : (((
	`__bužtš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

162 || (
	`__bužtš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

164 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

165 (è(
n
), (
size_t
) 0) \

166 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

168 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

169 (
	`__ex‹nsiÚ__
 ((
	`__bužtš_cÚ¡ªt_p
 (
size
è&& __bužtš_cÚ¡ªt_°(
n
) \

170 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

171 && (
size_t
è(
size
) != 0) \

172 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

173 
FILE
 *
__¡»am
 = (
¡»am
); \

174 
size_t
 
__út
; \

175 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

176 
__út
 > 0; --__cnt) \

177 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ð
EOF
) \

179 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

180 / (
size_t
è(
size
); }) \

181 : (((
	`__bužtš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

182 || (
	`__bužtš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

184 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

185 (è(
n
), (
size_t
) 0) \

186 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

190 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #iâdeà
_STDIO_H


23 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

24 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

25 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

26 cÚ¡ *
__»¡riù
 
__fÜm©
,

27 
_G_va_li¡
 
__­
è
__THROW
;

29 #ifdeà
__va_¬g_·ck


30 
__fÜtify_funùiÚ
 

31 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
, ...))

33  
	`__bužtš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

34 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

35 
	}
}

36 #–ià!
defšed
 
__ýlu¥lus


37 
	#¥rštf
(
¡r
, ...) \

38 
	`__bužtš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

39 
__VA_ARGS__
)

	)

42 
__fÜtify_funùiÚ
 

43 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
,

44 
_G_va_li¡
 
__­
))

46  
	`__bužtš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

47 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

48 
	}
}

50 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


52 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

53 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

54 ...è
__THROW
;

55 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

56 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

57 
_G_va_li¡
 
__­
è
__THROW
;

59 #ifdeà
__va_¬g_·ck


60 
__fÜtify_funùiÚ
 

61 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

62 cÚ¡ *
__»¡riù
 
__fmt
, ...))

64  
	`__bužtš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

65 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

66 
	}
}

67 #–ià!
defšed
 
__ýlu¥lus


68 
	#¢´štf
(
¡r
, 
Ën
, ...) \

69 
	`__bužtš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

70 
__VA_ARGS__
)

	)

73 
__fÜtify_funùiÚ
 

74 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

75 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

77  
	`__bužtš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

78 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

79 
	}
}

83 #ià
__USE_FORTIFY_LEVEL
 > 1

85 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

86 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

87 
__´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

88 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

90 
__v´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

91 
_G_va_li¡
 
__­
);

93 #ifdeà
__va_¬g_·ck


94 
__fÜtify_funùiÚ
 

95 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ *__»¡riù 
__fmt
, ...)

97  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

98 
	`__va_¬g_·ck
 ());

99 
	}
}

101 
__fÜtify_funùiÚ
 

102 
	$´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, ...)

104  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

105 
	}
}

106 #–ià!
defšed
 
__ýlu¥lus


107 
	#´štf
(...) \

108 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

109 
	#årštf
(
¡»am
, ...) \

110 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

113 
__fÜtify_funùiÚ
 

114 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

116 #ifdeà
__USE_EXTERN_INLINES


117  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

119  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

121 
	}
}

123 
__fÜtify_funùiÚ
 

124 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

125 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

127  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

128 
	}
}

130 #ifdeà
__USE_XOPEN2K8


131 
	$__d´štf_chk
 (
__fd
, 
__æag
, cÚ¡ *
__»¡riù
 
__fmt
,

132 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

133 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

134 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

135 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

137 #ifdeà
__va_¬g_·ck


138 
__fÜtify_funùiÚ
 

139 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

141  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

142 
	`__va_¬g_·ck
 ());

143 
	}
}

144 #–ià!
defšed
 
__ýlu¥lus


145 
	#d´štf
(
fd
, ...) \

146 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

149 
__fÜtify_funùiÚ
 

150 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

152  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

153 
	}
}

156 #ifdeà
__USE_GNU


158 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

159 cÚ¡ *
__»¡riù
 
__fmt
, ...)

160 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

161 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

162 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

163 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

164 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

165 
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

167 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

168 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

169 
__æag
,

170 cÚ¡ *
__»¡riù
 
__fÜm©
,

171 
_G_va_li¡
 
__¬gs
)

172 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

174 #ifdeà
__va_¬g_·ck


175 
__fÜtify_funùiÚ
 

176 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
, ...))

178  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

179 
	`__va_¬g_·ck
 ());

180 
	}
}

182 
__fÜtify_funùiÚ
 

183 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

186  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

187 
	`__va_¬g_·ck
 ());

188 
	}
}

190 
__fÜtify_funùiÚ
 

191 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

192 cÚ¡ *
__»¡riù
 
__fmt
, ...))

194  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

195 
	`__va_¬g_·ck
 ());

196 
	}
}

197 #–ià!
defšed
 
__ýlu¥lus


198 
	#a¥rštf
(
±r
, ...) \

199 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

200 
	#__a¥rštf
(
±r
, ...) \

201 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

202 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

203 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

206 
__fÜtify_funùiÚ
 

207 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

208 
_G_va_li¡
 
__­
))

210  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

211 
	}
}

213 
__fÜtify_funùiÚ
 

214 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

215 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

217  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

218 
__­
);

219 
	}
}

225 #ià!
defšed
 
__USE_ISOC11
 \

226 || (
defšed
 
	g__ýlu¥lus
 && __ýlu¥lu <ð201103L && !defšed 
__USE_GNU
)

227 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

228 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

229 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

232 
__fÜtify_funùiÚ
 
__wur
 *

233 
	$g‘s
 (*
__¡r
)

235 ià(
	`__bos
 (
__¡r
è!ð(
size_t
) -1)

236  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

237  
	`__g‘s_w¬n
 (
__¡r
);

238 
	}
}

241 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

242 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

243 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

244 (*
__»¡riù
 
__s
, 
__n
,

245 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

246 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

247 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

248 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

249 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

252 
__fÜtify_funùiÚ
 
__wur
 *

253 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

255 ià(
	`__bos
 (
__s
è!ð(
size_t
) -1)

257 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

258  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

260 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

261  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

263  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

264 
	}
}

266 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

269 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

270 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

271 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

272 
ä—d
è
__wur
;

273 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

274 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

275 
size_t
 
__size
, size_ˆ
__n
,

276 
FILE
 *
__»¡riù
 
__¡»am
),

277 
__ä—d_chk
)

278 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

281 
__fÜtify_funùiÚ
 
__wur
 
size_t


282 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

283 
FILE
 *
__»¡riù
 
__¡»am
)

285 ià(
	`__bos0
 (
__±r
è!ð(
size_t
) -1)

287 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__size
)

288 || !
	`__bužtš_cÚ¡ªt_p
 (
__n
)

289 || (
__size
 | 
__n
è>ð(((
size_t
) 1) << (8 *  (size_t) / 2)))

290  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

292 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

293  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

295  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

296 
	}
}

298 #ifdeà
__USE_GNU


299 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

300 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

301 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

302 (*
__»¡riù
 
__s
, 
__n
,

303 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

304 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

305 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

306 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

307 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

310 
__fÜtify_funùiÚ
 
__wur
 *

311 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

313 ià(
	`__bos
 (
__s
è!ð(
size_t
) -1)

315 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

316  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

318 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

319  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

321  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

322 
	}
}

325 #ifdeà
__USE_MISC


326 #undeà
ä—d_uÆocked


327 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

330 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

331 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

332 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

333 
ä—d_uÆocked
è
__wur
;

334 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

335 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

336 
size_t
 
__size
, size_ˆ
__n
,

337 
FILE
 *
__»¡riù
 
__¡»am
),

338 
__ä—d_uÆocked_chk
)

339 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

342 
__fÜtify_funùiÚ
 
__wur
 
size_t


343 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

344 
FILE
 *
__»¡riù
 
__¡»am
)

346 ià(
	`__bos0
 (
__±r
è!ð(
size_t
) -1)

348 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__size
)

349 || !
	`__bužtš_cÚ¡ªt_p
 (
__n
)

350 || (
__size
 | 
__n
è>ð(((
size_t
) 1) << (8 *  (size_t) / 2)))

351  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

352 
__¡»am
);

354 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

355  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

356 
__¡»am
);

359 #ifdeà
__USE_EXTERN_INLINES


360 ià(
	`__bužtš_cÚ¡ªt_p
 (
__size
)

361 && 
	`__bužtš_cÚ¡ªt_p
 (
__n
)

362 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

363 && 
__size
 * 
__n
 <= 8)

365 
size_t
 
__út
 = 
__size
 * 
__n
;

366 *
__ýŒ
 = (*è
__±r
;

367 ià(
__út
 == 0)

370 ; 
__út
 > 0; --__cnt)

372 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

373 ià(
__c
 =ð
EOF
)

375 *
__ýŒ
++ = 
__c
;

377  (
__ýŒ
 - (*è
__±r
è/ 
__size
;

380  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

381 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


22 #ifdeà
_STDIO_H


23 
	#L_tm²am
 20

	)

24 
	#TMP_MAX
 238328

	)

25 
	#FILENAME_MAX
 4096

	)

27 #ifdeà
__USE_POSIX


28 
	#L_ù”mid
 9

	)

29 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


30 
	#L_cu£rid
 9

	)

35 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


36 #undeà
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

40 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


41 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__ex‹º_šlše
 

26 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

28  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
¡¹Þd
, 
¡¹od
)

26 
__END_NAMESPACE_C99


29 #ifdeà
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
¡¹Þd_l
, 
¡¹od_l
)

33 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


34 #ifdeà
__USE_MISC


35 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

39 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sÞved
,

25 
size_t
 
__»sÞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sÞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sÞved
,

32 
size_t
 
__»sÞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sÞved
))

39 ià(
	`__bos
 (
__»sÞved
è!ð(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sÞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sÞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sÞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sÞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ð(
size_t
) -1)

68 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ð
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ð(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

118 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

149 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/string.h

19 #iâdeà
_STRING_H


24 
	#_STRING_ARCH_uÇligÃd
 1

	)

28 #ià!
defšed
 
__x86_64__
 && (defšed 
__i486__
 || defšed 
__³Áium__
 \

29 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

30 || 
defšed
 
	g__nocÚa__
 || defšed 
	g__©om__
 \

31 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__cÜei7__
 \

32 || 
defšed
 
	g__k6__
 || defšed 
	g__geode__
 \

33 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

34 || 
defšed
 
	g__amdçm10__
)

38 #ià!
defšed
 
__NO_STRING_INLINES
 && defšed 
__USE_STRING_INLINES
 \

39 && 
defšed
 
	g__GNUC__
 && __GNUC__ >= 2

41 #iâdeà
__STRING_INLINE


42 #iâdeà
__ex‹º_šlše


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 
	#__STRING_SMALL_GET16
(
¤c
, 
idx
) \

51 ((((cÚ¡ *è(
¤c
))[
idx
 + 1] << 8) \

52 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
¤c
, 
idx
) \

54 (((((cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

55 | ((cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

56 | ((cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

57 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_memýy
 1

	)

62 
	#memýy
(
de¡
, 
¤c
, 
n
) \

63 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
n
) \

64 ? 
	`__memýy_c
 ((
de¡
), (
¤c
), (
n
)) \

65 : 
	`__memýy_g
 ((
de¡
), (
¤c
), (
n
))))

	)

66 
	#__memýy_c
(
de¡
, 
¤c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de¡
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__memýy_by4
 (
de¡
, 
¤c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__memýy_by2
 (
de¡
, 
¤c
, 
n
) \

73 : 
	`__memýy_g
 (
de¡
, 
¤c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__memýy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__memýy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de¡
;

83 
__asm__
 
__vÞ©že__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 4)

94  
__de¡
;

95 
	}
}

97 
__STRING_INLINE
 *
__memýy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__memýy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de¡
;

105 
__asm__
 
__vÞ©že__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 2)

121  
__de¡
;

122 
	}
}

124 
__STRING_INLINE
 *
__memýy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__memýy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de¡
;

131 
__asm__
 
__vÞ©že__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__¤c
),

145 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
)

147  
__de¡
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #iâdeà
_FORCE_INLINES


154 
	#memmove
(
de¡
, 
¤c
, 
n
è
	`__memmove_g
 (de¡, src,‚)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, cÚ¡ *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de¡
;

164 ià(
__de¡
 < 
__¤c
)

165 
__asm__
 
__vÞ©že__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

170 : "0" (
__n
), "1" (
__¤c
), "2" (
__tmp
),

171 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

173 
__asm__
 
__vÞ©že__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

179 : "0" (
__n
), "1" (__À- 1 + (cÚ¡ *è
__¤c
),

180 "2" (
__n
 - 1 + (*è
__tmp
),

181 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

182  
__de¡
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #iâdeà
_FORCE_INLINES


189 #iâdeà
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__»s
;

196 
__asm__
 
__vÞ©že__


204 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

209  
__»s
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

223 ? (
	`__bužtš_cÚ¡ªt_p
 (
n
) \

224 ? 
	`__mem£t_cú
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__bužtš_cÚ¡ªt_p
 (
n
) \

227 ? 
	`__mem£t_gú
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
è({ *
__s
 = (s); \

231 *((*è
__s
èð(è(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((è((è(
c
))) * 0x01010101; \

247 ià((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vÞ©že__
 ("" : "ô" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (è
__c
; \

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (è
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (è
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (è
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_cú
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_cú_by4
 (
s
, ((è((è(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_cú_by2
 (
s
, \

317 ((è((è(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_cú_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_cú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifdeà
__i686__


330 
__asm__
 
__vÞ©že__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vÞ©že__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_cú_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_cú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifdeà
__i686__


361 
__asm__
 
__vÞ©že__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vÞ©že__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_gú
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_gú_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_gú_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vÞ©že__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vÞ©že__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #iâdeà
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifdeà
__i686__


449 
__d1
;

451 *
__»s
;

452 ià(
__n
 == 0)

453  
NULL
;

454 #ifdeà
__i686__


455 
__asm__
 
__vÞ©že__


459 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vÞ©že__


470 : "=D" (
__»s
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

475  
__»s
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #iâdeà
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifdeà
__i686__


488 
__d1
;

490 *
__»s
;

491 ià(
__n
 == 0)

492  
NULL
;

493 #ifdeà
__i686__


494 
__asm__
 
__vÞ©že__


500 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vÞ©že__


512 : "=D" (
__»s
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

517  
__»s
;

518 
	}
}

519 #ifdeà
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
è
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_¿wmemchr
 1

	)

526 
__STRING_INLINE
 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

528 #iâdeà
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

532 
__d0
;

533 *
__»s
;

534 
__asm__
 
__vÞ©že__


537 : "=D" (
__»s
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

541  
__»s
 - 1;

542 
	}
}

543 #ifdeà
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

547  
	`__¿wmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_¡¾’
 1

	)

555 
	#¡¾’
(
¡r
) \

556 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¡r
) \

557 ? 
	`__bužtš_¡¾’
 (
¡r
) \

558 : 
	`__¡¾’_g
 (
¡r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__¡¾’_g
 (cÚ¡ *
__¡r
);

561 
__STRING_INLINE
 
size_t


562 
	$__¡¾’_g
 (cÚ¡ *
__¡r
)

564 
__dummy
;

565 cÚ¡ *
__tmp
 = 
__¡r
;

566 
__asm__
 
__vÞ©že__


572 : "ô" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__¡r
),

574 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¡r
)

576  
__tmp
 - 
__¡r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_¡rýy
 1

	)

582 
	#¡rýy
(
de¡
, 
¤c
) \

583 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

584 ? ( ((
¤c
)[0]è=ð1 && 
	`¡¾’
 (src) + 1 <= 8 \

585 ? 
	`__¡rýy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

586 : (*è
	`memýy
 ((*è(
de¡
), \

587 (cÚ¡ *è(
¤c
), \

588 
	`¡¾’
 (
¤c
) + 1)) \

589 : 
	`__¡rýy_g
 ((
de¡
), (
¤c
))))

	)

591 
	#__¡rýy_a_sm®l
(
de¡
, 
¤c
, 
¤þ’
) \

592 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*è
__de¡
; \

599 
¤þ’
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

609 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

617 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

622 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

627 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

629 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

638 (*è
__de¡
; }))

	)

640 
__STRING_INLINE
 *
__¡rýy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

642 
__STRING_INLINE
 *

643 
	$__¡rýy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

645 *
__tmp
 = 
__de¡
;

646 
__dummy
;

647 
__asm__
 
__vÞ©že__


656 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

658 : "0" (
__¤c
), "1" (
__tmp
),

659 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

661  
__de¡
;

662 
	}
}

665 #ifdeà
__USE_GNU


666 
	#_HAVE_STRING_ARCH_¡pýy
 1

	)

668 
	#__¡pýy
(
de¡
, 
¤c
) \

669 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

670 ? (
	`¡¾’
 (
¤c
) + 1 <= 8 \

671 ? 
	`__¡pýy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

672 : 
	`__¡pýy_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1)) \

673 : 
	`__¡pýy_g
 ((
de¡
), (
¤c
))))

	)

674 
	#__¡pýy_c
(
de¡
, 
¤c
, 
¤þ’
) \

675 ((
¤þ’
) % 4 == 0 \

676 ? 
	`__mempýy_by4
 (
de¡
, 
¤c
, 
¤þ’
) - 1 \

677 : ((
¤þ’
) % 2 == 0 \

678 ? 
	`__mempýy_by2
 (
de¡
, 
¤c
, 
¤þ’
) - 1 \

679 : 
	`__mempýy_byn
 (
de¡
, 
¤c
, 
¤þ’
è- 1))

	)

682 
	#¡pýy
(
de¡
, 
¤c
è
	`__¡pýy
 ((de¡), (¤c))

	)

684 
	#__¡pýy_a_sm®l
(
de¡
, 
¤c
, 
¤þ’
) \

685 (
	`__ex‹nsiÚ__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*è(
de¡
); \

691 
¤þ’
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

698 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

702 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

707 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

711 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

716 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

718 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

722 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

724 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

729 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

731 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

734 (*è
__u
; }))

	)

736 
__STRING_INLINE
 *
__mempýy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

737 
size_t
 
__¤þ’
);

739 
__STRING_INLINE
 *

740 
	$__mempýy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤þ’
)

742 *
__tmp
 = 
__de¡
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vÞ©že__


752 : "=&r" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤þ’
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__mempýy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

759 
size_t
 
__¤þ’
);

761 
__STRING_INLINE
 *

762 
	$__mempýy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤þ’
)

764 *
__tmp
 = 
__de¡
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vÞ©že__


779 : "=&q" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
),

780 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__de¡
)

781 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤þ’
 / 2),

782 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__mempýy_byn
 (*
__de¡
, cÚ¡ *
__¤c
,

788 
size_t
 
__¤þ’
);

790 
__STRING_INLINE
 *

791 
	$__mempýy_byn
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤þ’
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de¡
;

795 
__asm__
 
__vÞ©že__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__de¡
)

808 : "0" (
__tmp
), "1" (
__¤þ’
), "2" (
__¤c
),

809 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__¡pýy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

816 
__STRING_INLINE
 *

817 
	$__¡pýy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

819 *
__tmp
 = 
__de¡
;

820 
__dummy
;

821 
__asm__
 
__vÞ©že__


830 : "=&r" (
__¤c
), "ô" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

832 : "0" (
__¤c
), "1" (
__tmp
),

833 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_¡ºýy
 1

	)

842 
	#¡ºýy
(
de¡
, 
¤c
, 
n
) \

843 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

844 ? ((
	`¡¾’
 (
¤c
è+ 1 >ð((
size_t
è(
n
)) \

845 ? (*è
	`memýy
 ((*è(
de¡
), \

846 (cÚ¡ *è(
¤c
), 
n
) \

847 : 
	`__¡ºýy_cg
 ((
de¡
), (
¤c
), 
	`¡¾’
 (¤cè+ 1, 
n
))) \

848 : 
	`__¡ºýy_gg
 ((
de¡
), (
¤c
), 
n
)))

	)

849 
	#__¡ºýy_cg
(
de¡
, 
¤c
, 
¤þ’
, 
n
) \

850 (((
¤þ’
) % 4 == 0) \

851 ? 
	`__¡ºýy_by4
 (
de¡
, 
¤c
, 
¤þ’
, 
n
) \

852 : (((
¤þ’
) % 2 == 0) \

853 ? 
	`__¡ºýy_by2
 (
de¡
, 
¤c
, 
¤þ’
, 
n
) \

854 : 
	`__¡ºýy_byn
 (
de¡
, 
¤c
, 
¤þ’
, 
n
)))

	)

856 
__STRING_INLINE
 *
__¡ºýy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[],

857 
size_t
 
__¤þ’
, size_ˆ
__n
);

859 
__STRING_INLINE
 *

860 
	$__¡ºýy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤þ’
, size_ˆ
__n
)

862 *
__tmp
 = 
__de¡
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vÞ©že__


872 : "=&r" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

873 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__de¡
)

874 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤þ’
 / 4),

875 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

877 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤þ’
);

878  
__de¡
;

879 
	}
}

881 
__STRING_INLINE
 *
__¡ºýy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[],

882 
size_t
 
__¤þ’
, size_ˆ
__n
);

884 
__STRING_INLINE
 *

885 
	$__¡ºýy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤þ’
, size_ˆ
__n
)

887 *
__tmp
 = 
__de¡
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vÞ©že__


902 : "=&q" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

903 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__de¡
)

904 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤þ’
 / 2),

905 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

907 (è
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__¤þ’
);

908  
__de¡
;

909 
	}
}

911 
__STRING_INLINE
 *
__¡ºýy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[],

912 
size_t
 
__¤þ’
, size_ˆ
__n
);

914 
__STRING_INLINE
 *

915 
	$__¡ºýy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤þ’
, size_ˆ
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de¡
;

919 
__asm__
 
__vÞ©že__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__de¡
)

932 : "1" (
__¤þ’
), "0" (
__tmp
),"2" (
__¤c
),

933 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

935 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤þ’
);

936  
__de¡
;

937 
	}
}

939 
__STRING_INLINE
 *
__¡ºýy_gg
 (*
__de¡
, cÚ¡ *
__¤c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__¡ºýy_gg
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de¡
;

946 
__dummy
;

947 ià(
__n
 > 0)

948 
__asm__
 
__vÞ©že__


964 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__¤c
), "1" (
__tmp
), "3" (
__n
)

968  
__de¡
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_¡rÿt
 1

	)

974 
	#¡rÿt
(
de¡
, 
¤c
) \

975 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

976 ? 
	`__¡rÿt_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

977 : 
	`__¡rÿt_g
 ((
de¡
), (
¤c
))))

	)

979 
__STRING_INLINE
 *
__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[],

980 
size_t
 
__¤þ’
);

982 
__STRING_INLINE
 *

983 
	$__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤þ’
)

985 #ifdeà
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vÞ©že__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

992 : "0" (
__de¡
), "1" (0xffffffff), "a" (0),

993 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de¡
 - 1;

998 
__asm__
 
__vÞ©že__


1003 : "ô" (
__tmp
),

1004 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1005 : "0" (
__tmp
),

1006 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤þ’
]; } *)
__¤c
)

1009 (è
	`memýy
 (
__tmp
, 
__¤c
, 
__¤þ’
);

1010  
__de¡
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
);

1015 
__STRING_INLINE
 *

1016 
	$__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
)

1018 *
__tmp
 = 
__de¡
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vÞ©že__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
),

1033 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1034 : "1" (
__tmp
), "2" (
__¤c
),

1035 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

1037  
__de¡
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_¡ºÿt
 1

	)

1043 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

1044 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

1045 
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

1046 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

1047 ? 
	`¡rÿt
 (
__de¡
, (
¤c
)) \

1048 : (*(*)
	`__mempýy
 (
	`¡rchr
 (
__de¡
, '\0'), \

1049 (cÚ¡ *è(
¤c
), \

1050 (
n
)èð0, 
__de¡
)) \

1051 : 
	`__¡ºÿt_g
 (
__de¡
, (
¤c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de¡
;

1060 
__dummy
;

1061 #ifdeà
__i686__


1062 
__asm__
 
__vÞ©že__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__¤c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__¤c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vÞ©že__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
)

1102  
__de¡
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_¡rcmp
 1

	)

1108 
	#¡rcmp
(
s1
, 
s2
) \

1109 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& __bužtš_cÚ¡ªt_°(
s2
) \

1110 && ( ((
s1
)[0]è!ð1 || 
	`¡¾’
 (s1) >= 4) \

1111 && ( ((
s2
)[0]è!ð1 || 
	`¡¾’
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

1113 (
	`¡¾’
 (
s1
è< sŒËÀ(
s2
) \

1114 ? 
	`¡¾’
 (
s1
è: sŒËÀ(
s2
)) + 1) \

1115 : (
	`__bužtš_cÚ¡ªt_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]è=ð1 && 
	`¡¾’
 (
s1
) < 4 \

1117 ? (
	`__bužtš_cÚ¡ªt_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1119 (cÚ¡ *è(
s2
), \

1120 
	`¡¾’
 (
s1
)) \

1121 : 
	`__¡rcmp_cg
 ((cÚ¡ *è(
s1
), \

1122 (cÚ¡ *è(
s2
), \

1123 
	`¡¾’
 (
s1
))) \

1124 : (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]è=ð1 && 
	`¡¾’
 (s2) < 4 \

1126 ? (
	`__bužtš_cÚ¡ªt_p
 (
s1
) \

1127 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1128 (cÚ¡ *è(
s2
), \

1129 
	`¡¾’
 (
s2
)) \

1130 : 
	`__¡rcmp_gc
 ((cÚ¡ *è(
s1
), \

1131 (cÚ¡ *è(
s2
), \

1132 
	`¡¾’
 (
s2
))) \

1133 : 
	`__¡rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = (
s1
)[0] - (
s2
)[0]; \

1137 ià(
l
 > 0 && 
__»suÉ
 == 0) \

1139 
__»suÉ
 = (
s1
)[1] - (
s2
)[1]; \

1140 ià(
l
 > 1 && 
__»suÉ
 == 0) \

1142 
__»suÉ
 = (
s1
)[2] - (
s2
)[2]; \

1143 ià(
l
 > 2 && 
__»suÉ
 == 0) \

1144 
__»suÉ
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__»suÉ
; }))

	)

1149 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = (
s2
); \

1151 
__»suÉ
 = (
s1
)[0] - 
__s2
[0]; \

1152 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

1154 
__»suÉ
 = (
s1
)[1] - 
__s2
[1]; \

1155 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

1157 
__»suÉ
 = (
s1
)[2] - 
__s2
[2]; \

1158 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

1159 
__»suÉ
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__»suÉ
; }))

	)

1164 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = (
s1
); \

1166 
__»suÉ
 = 
__s1
[0] - (
s2
)[0]; \

1167 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

1169 
__»suÉ
 = 
__s1
[1] - (
s2
)[1]; \

1170 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

1172 
__»suÉ
 = 
__s1
[2] - (
s2
)[2]; \

1173 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

1174 
__»suÉ
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__»suÉ
; }))

	)

1179 
__STRING_INLINE
 
__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

1184 
__»s
;

1185 
__asm__
 
__vÞ©že__


1201 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__»s
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_¡ºcmp
 1

	)

1212 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& 
	`¡¾’
 (s1è< ((
size_t
è(
n
)) \

1214 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&& 
	`¡¾’
 (s2è< ((
size_t
è(
n
))\

1216 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__¡ºcmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

1225 
__»s
;

1226 
__asm__
 
__vÞ©že__


1245 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

1250  
__»s
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_¡rchr
 1

	)

1256 
	#_USE_STRING_ARCH_¡rchr
 1

	)

1257 
	#¡rchr
(
s
, 
c
) \

1258 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*è
	`__¿wmemchr
 ((
s
), (
c
)) \

1261 : 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__¡rchr_c
 (cÚ¡ *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__¡rchr_c
 (cÚ¡ *
__s
, 
__c
)

1269 
__d0
;

1270 *
__»s
;

1271 
__asm__
 
__vÞ©že__


1281 : "ô" (
__»s
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1285  
__»s
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__¡rchr_g
 (cÚ¡ *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__¡rchr_g
 (cÚ¡ *
__s
, 
__c
)

1293 
__d0
;

1294 *
__»s
;

1295 
__asm__
 
__vÞ©že__


1306 : "ô" (
__»s
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1310  
__»s
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_¡rchºul
 1

	)

1316 
	#__¡rchºul
(
s
, 
c
) \

1317 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*è
	`__¿wmemchr
 ((
s
), 
c
) \

1320 : 
	`__¡rchºul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__¡rchºul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
)

1328 
__d0
;

1329 *
__»s
;

1330 
__asm__
 
__vÞ©že__


1340 : "ô" (
__»s
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1344  
__»s
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
)

1352 
__d0
;

1353 *
__»s
;

1354 
__asm__
 
__vÞ©že__


1365 : "ô" (
__»s
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1369  
__»s
;

1370 
	}
}

1371 #ifdeà
__USE_GNU


1372 
	#¡rchºul
(
s
, 
c
è
	`__¡rchºul
 ((s), (c))

	)

1376 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_šdex
 1

	)

1379 
	#šdex
(
s
, 
c
) \

1380 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

1381 ? 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_¡¼chr
 1

	)

1388 
	#¡¼chr
(
s
, 
c
) \

1389 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

1390 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1393 #ifdeà
__i686__


1394 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__»s
;

1401 
__asm__
 
__vÞ©že__


1409 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1413  
__»s
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__»s
;

1423 
__asm__
 
__vÞ©že__


1432 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1436  
__»s
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__»s
;

1446 
__asm__
 
__vÞ©že__


1456 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1460  
__»s
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__»s
;

1470 
__asm__
 
__vÞ©že__


1481 : "ô" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1485  
__»s
;

1486 
	}
}

1490 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_ršdex
 1

	)

1493 
	#ršdex
(
s
, 
c
) \

1494 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) \

1495 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_¡rc¥n
 1

	)

1503 
	#¡rc¥n
(
s
, 
»jeù
) \

1504 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
»jeù
) &&  ((reject)[0]) == 1 \

1505 ? ((
»jeù
)[0] == '\0' \

1506 ? 
	`¡¾’
 (
s
) \

1507 : ((
»jeù
)[1] == '\0' \

1508 ? 
	`__¡rc¥n_c1
 ((
s
), (((
»jeù
)[0] << 8) & 0xff00)) \

1509 : 
	`__¡rc¥n_cg
 ((
s
), (
»jeù
), 
	`¡¾’
 (reject)))) \

1510 : 
	`__¡rc¥n_g
 ((
s
), (
»jeù
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

1514 #iâdeà
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

1518 
__d0
;

1519 *
__»s
;

1520 
__asm__
 
__vÞ©že__


1529 : "ô" (
__»s
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__»jeù
),

1531 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__»s
 - 1è- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[],

1538 
size_t
 
__»jeù_Ën
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[], 
size_t
 
__»jeù_Ën
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 cÚ¡ *
__»s
;

1545 
__asm__
 
__vÞ©že__


1556 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__»jeù
), "g" (
__»jeù_Ën
)

1559  (
__»s
 - 1è- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
);

1563 #ifdeà
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 cÚ¡ *
__»s
;

1570 
__asm__
 
__vÞ©že__


1587 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__»jeù
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__»s
 - 1è- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 cÚ¡ *
__»s
;

1598 
__asm__
 
__vÞ©že__


1612 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__»jeù
), "b" (__reject)

1616  (
__»s
 - 1è- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_¡r¥n
 1

	)

1624 
	#¡r¥n
(
s
, 
acû±
) \

1625 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1626 ? ((
acû±
)[0] == '\0' \

1627 ? ((è(
s
), 0) \

1628 : ((
acû±
)[1] == '\0' \

1629 ? 
	`__¡r¥n_c1
 ((
s
), (((
acû±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__¡r¥n_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1631 : 
	`__¡r¥n_g
 ((
s
), (
acû±
))))

	)

1633 #iâdeà
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1639 
__d0
;

1640 *
__»s
;

1642 
__asm__
 
__vÞ©že__


1648 : "ô" (
__»s
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__acû±
),

1650 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__»s
 - 1è- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1657 
size_t
 
__acû±_Ën
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 cÚ¡ *
__»s
;

1664 
__asm__
 
__vÞ©že__


1675 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__acû±
), "g" (
__acû±_Ën
),

1679 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__acû±_Ën
]; } *)
__acû±
)

1682  (
__»s
 - 1è- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1686 #ifdeà
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 cÚ¡ *
__»s
;

1693 
__asm__
 
__vÞ©že__


1709 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__»s
 - 1è- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 cÚ¡ *
__»s
;

1720 
__asm__
 
__vÞ©že__


1734 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__acû±
), "b" (__accept)

1737  (
__»s
 - 1è- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_¡½brk
 1

	)

1744 
	#¡½brk
(
s
, 
acû±
) \

1745 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1746 ? ((
acû±
)[0] == '\0' \

1747 ? ((è(
s
), (*) 0) \

1748 : ((
acû±
)[1] == '\0' \

1749 ? 
	`¡rchr
 ((
s
), (
acû±
)[0]) \

1750 : 
	`__¡½brk_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1751 : 
	`__¡½brk_g
 ((
s
), (
acû±
))))

	)

1753 
__STRING_INLINE
 *
__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1754 
size_t
 
__acû±_Ën
);

1756 
__STRING_INLINE
 *

1757 
	$__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__»s
;

1761 
__asm__
 
__vÞ©že__


1776 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__acû±
), "g" (
__acû±_Ën
)

1779  
__»s
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1783 #ifdeà
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__»s
;

1790 
__asm__
 
__vÞ©že__


1811 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__»s
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__»s
;

1822 
__asm__
 
__vÞ©že__


1841 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__acû±
)

1844  
__»s
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_¡r¡r
 1

	)

1851 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1852 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
ÃedË
) &&  ((needle)[0]) == 1 \

1853 ? ((
ÃedË
)[0] == '\0' \

1854 ? (
hay¡ack
) \

1855 : ((
ÃedË
)[1] == '\0' \

1856 ? 
	`¡rchr
 ((
hay¡ack
), (
ÃedË
)[0]) \

1857 : 
	`__¡r¡r_cg
 ((
hay¡ack
), (
ÃedË
), \

1858 
	`¡¾’
 (
ÃedË
)))) \

1859 : 
	`__¡r¡r_g
 ((
hay¡ack
), (
ÃedË
))))

	)

1863 
__STRING_INLINE
 *
__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
,

1864 cÚ¡ 
__ÃedË
[],

1865 
size_t
 
__ÃedË_Ën
);

1867 
__STRING_INLINE
 *

1868 
	$__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
, cÚ¡ 
__ÃedË
[],

1869 
size_t
 
__ÃedË_Ën
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__»s
;

1873 
__asm__
 
__vÞ©že__


1886 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__ÃedË_Ën
), "1" (
__hay¡ack
), "d" (
__ÃedË
)

1889  
__»s
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__¡r¡r_g
 (cÚ¡ *
__hay¡ack
,

1893 cÚ¡ *
__ÃedË
);

1894 #ifdeà
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__»s
;

1901 
__asm__
 
__vÞ©že__


1920 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1922 "d" (
__ÃedË
)

1924  
__»s
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__»s
;

1932 
__asm__
 
__vÞ©že__


1949 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1951 "b" (
__ÃedË
)

1953  
__»s
;

1954 
	}
}

1960 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1961 #ifdeà
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
wÜd
è(
	`__bužtš_cÚ¡ªt_p
 (word) \

1964 ? 
	`__bužtš_ffs
 (
wÜd
) \

1965 : ({ 
__út
, 
__tmp
; \

1966 
__asm__
 
__vÞ©že__
 \

1969 : "=&r" (
__út
), "ô" (
__tmp
) \

1970 : "rm" (
wÜd
), "1" (-1)); \

1971 
__út
 + 1; }))

	)

1973 #iâdeà
ff¦


1974 
	#ff¦
(
wÜd
è
	`ffs
(wÜd)

	)

1979 #iâdeà
_FORCE_INLINES


1980 #undeà
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #iâdeà
_STRING_H


24 #iâdeà
__NO_STRING_INLINES


41 #iâdeà
__STRING_INLINE


42 #ifdeà
__ýlu¥lus


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

49 #ià
_STRING_ARCH_uÇligÃd


51 
	~<’dŸn.h
>

52 
	~<b™s/ty³s.h
>

54 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

56 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

57 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

59 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

60 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

61 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

62 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

65 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

66 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

68 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

69 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

70 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

71 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 ¡ruù { 
__¬r
[
N
]; } \

78 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #undeà
__STRING2_COPY_TYPE


92 
	#__¡ršg2_1b±r_p
(
__x
) \

93 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ð1)

	)

96 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


97 #ià!
__GNUC_PREREQ
 (3, 0)

98 #ià
_STRING_ARCH_uÇligÃd


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__bužtš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

109 *((
__ušt8_t
 *è
__s
èð(__ušt8_tè
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

121 (è(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (è
__c
 * 0x0101; \

134 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (è
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (è
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (è
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #ià
__GNUC_PREREQ
 (2, 91)

194 
	#__bz”o
(
s
, 
n
è
	`__bužtš_mem£t
 (s, '\0',‚)

	)

202 #ifdeà
__USE_GNU


203 #ià!
defšed
 
_HAVE_STRING_ARCH_mempýy
 || defšed 
_FORCE_INLINES


204 #iâdeà
_HAVE_STRING_ARCH_mempýy


205 #ià
__GNUC_PREREQ
 (3, 4)

206 
	#__mempýy
(
de¡
, 
¤c
, 
n
è
	`__bužtš_mempýy
 (de¡, src,‚)

	)

207 #–ià
__GNUC_PREREQ
 (3, 0)

208 
	#__mempýy
(
de¡
, 
¤c
, 
n
) \

209 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

210 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

211 ? 
	`__bužtš_memýy
 (
de¡
, 
¤c
, 
n
) + (n) \

212 : 
	`__mempýy
 (
de¡
, 
¤c
, 
n
)))

	)

214 
	#__mempýy
(
de¡
, 
¤c
, 
n
) \

215 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

216 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

217 ? 
	`__mempýy_sm®l
 (
de¡
, 
	`__mempýy_¬gs
 (
¤c
), 
n
) \

218 : 
	`__mempýy
 (
de¡
, 
¤c
, 
n
)))

	)

222 
	#mempýy
(
de¡
, 
¤c
, 
n
è
	`__mempýy
 (de¡, src,‚)

	)

225 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


226 #ià
_STRING_ARCH_uÇligÃd


227 #iâdeà
_FORCE_INLINES


228 
	#__mempýy_¬gs
(
¤c
) \

229 ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[2], \

230 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[6], \

231 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

236 
__STRING_INLINE
 *
__mempýy_sm®l
 (*, , , , ,

237 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

238 
__ušt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__mempýy_sm®l
 (*
__de¡1
,

241 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

242 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

243 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

244 
size_t
 
__¤þ’
)

247 
__ušt32_t
 
__ui
;

248 
__ušt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de¡1
;

252 (è
__¤þ’
)

255 
__u
->
__c
 = 
__¤c0_1
;

256 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__¤c0_2
;

260 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__¤c0_2
;

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__¤c2_1
;

266 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__¤c0_4
;

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__¤c0_4
;

274 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__¤c4_1
;

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__¤c0_4
;

280 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__¤c4_2
;

282 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__¤c0_4
;

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__¤c4_2
;

288 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__¤c6_1
;

290 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__¤c0_4
;

294 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__¤c4_4
;

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

299  (*è
__u
;

300 
	}
}

302 #iâdeà
_FORCE_INLINES


303 
	#__mempýy_¬gs
(
¤c
) \

304 ((cÚ¡ *è(
¤c
))[0], \

305 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1] } }), \

307 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

309 ((cÚ¡ *è(
¤c
))[2] } }), \

310 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

312 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3] } }), \

313 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

315 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

316 ((cÚ¡ *è(
¤c
))[4] } }), \

317 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

319 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

320 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5] } }), \

321 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

323 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

324 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

325 ((cÚ¡ *è(
¤c
))[6] } }), \

326 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

328 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

329 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

330 ((cÚ¡ *è(
¤c
))[6], ((cÚ¡ *è(¤c))[7] } })

	)

332 
__STRING_INLINE
 *
__mempýy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__mempýy_sm®l
 (*
__de¡
, 
__¤c1
,

341 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

342 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

343 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

344 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤þ’
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sÿ2
;

349 
__STRING2_COPY_ARR3
 
__sÿ3
;

350 
__STRING2_COPY_ARR4
 
__sÿ4
;

351 
__STRING2_COPY_ARR5
 
__sÿ5
;

352 
__STRING2_COPY_ARR6
 
__sÿ6
;

353 
__STRING2_COPY_ARR7
 
__sÿ7
;

354 
__STRING2_COPY_ARR8
 
__sÿ8
;

355 } *
__u
 = 
__de¡
;

356 (è
__¤þ’
)

359 
__u
->
__c
 = 
__¤c1
;

362 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

365 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

368 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

371 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

374 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

377 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

380 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

383  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤þ’
);

384 
	}
}

392 #iâdeà
_HAVE_STRING_ARCH_¡rchr


393 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

394 #ià
__GNUC_PREREQ
 (3, 2)

395 
	#¡rchr
(
s
, 
c
) \

396 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
è&& !__bužtš_cÚ¡ªt_°(
s
) \

397 && (
c
) == '\0' \

398 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

399 : 
	`__bužtš_¡rchr
 (
s
, 
c
)))

	)

401 
	#¡rchr
(
s
, 
c
) \

402 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

403 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

404 : 
	`¡rchr
 (
s
, 
c
)))

	)

410 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rýy
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
defšed
 
	g_FORCE_INLINES


412 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rýy
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#¡rýy
(
de¡
, 
¤c
) \

414 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

415 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

416 ? 
	`__¡rýy_sm®l
 (
de¡
, 
	`__¡rýy_¬gs
 (
¤c
), \

417 
	`¡¾’
 (
¤c
) + 1) \

418 : (*è
	`memýy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

419 : 
	`¡rýy
 (
de¡
, 
¤c
)))

	)

422 #ià
_STRING_ARCH_uÇligÃd


423 #iâdeà
_FORCE_INLINES


424 
	#__¡rýy_¬gs
(
¤c
) \

425 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

430 
__STRING_INLINE
 *
__¡rýy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

431 
__ušt32_t
, __ušt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__¡rýy_sm®l
 (*
__de¡
,

434 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

435 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

436 
size_t
 
__¤þ’
)

439 
__ušt32_t
 
__ui
;

440 
__ušt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*è
__de¡
;

443 (è
__¤þ’
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__¤c0_2
;

452 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__¤c0_4
;

460 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__¤c0_4
;

466 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__¤c4_2
;

470 
__u
->
__ui
 = 
__¤c0_4
;

471 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__¤c4_2
;

473 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__¤c0_4
;

478 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__¤c4_4
;

482  
__de¡
;

483 
	}
}

485 #iâdeà
_FORCE_INLINES


486 
	#__¡rýy_¬gs
(
¤c
) \

487 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

489 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

492 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

494 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

495 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

497 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

499 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

501 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

502 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

503 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

505 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

506 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

508 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

510 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

511 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

512 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__¡rýy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__¡rýy_sm®l
 (*
__de¡
,

523 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

524 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

525 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

526 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤þ’
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sÿ2
;

531 
__STRING2_COPY_ARR3
 
__sÿ3
;

532 
__STRING2_COPY_ARR4
 
__sÿ4
;

533 
__STRING2_COPY_ARR5
 
__sÿ5
;

534 
__STRING2_COPY_ARR6
 
__sÿ6
;

535 
__STRING2_COPY_ARR7
 
__sÿ7
;

536 
__STRING2_COPY_ARR8
 
__sÿ8
;

537 } *
__u
 = (*è
__de¡
;

538 (è
__¤þ’
)

541 
__u
->
__c
 = '\0';

544 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

547 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

550 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

553 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

556 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

559 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

562 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

565  
__de¡
;

566 
	}
}

572 #ifdeà
__USE_GNU


573 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pýy
 || defšed 
_FORCE_INLINES


574 #iâdeà
_HAVE_STRING_ARCH_¡pýy


575 #ià
__GNUC_PREREQ
 (3, 4)

576 
	#__¡pýy
(
de¡
, 
¤c
è
	`__bužtš_¡pýy
 (de¡, src)

	)

577 #–ià
__GNUC_PREREQ
 (3, 0)

578 
	#__¡pýy
(
de¡
, 
¤c
) \

579 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

580 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

581 ? 
	`__bužtš_¡rýy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

582 : ((*è(
__mempýy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

584 : 
	`__¡pýy
 (
de¡
, 
¤c
)))

	)

586 
	#__¡pýy
(
de¡
, 
¤c
) \

587 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
) \

588 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

589 ? 
	`__¡pýy_sm®l
 (
de¡
, 
	`__¡pýy_¬gs
 (
¤c
), \

590 
	`¡¾’
 (
¤c
) + 1) \

591 : ((*è(
__mempýy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

593 : 
	`__¡pýy
 (
de¡
, 
¤c
)))

	)

597 
	#¡pýy
(
de¡
, 
¤c
è
	`__¡pýy
 (de¡, src)

	)

600 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


601 #ià
_STRING_ARCH_uÇligÃd


602 #iâdeà
_FORCE_INLINES


603 
	#__¡pýy_¬gs
(
¤c
) \

604 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

609 
__STRING_INLINE
 *
__¡pýy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

610 
__ušt32_t
, __ušt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__¡pýy_sm®l
 (*
__de¡
,

613 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

614 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

615 
size_t
 
__¤þ’
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*è
__de¡
;

623 (è
__¤þ’
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__¤c0_2
;

630 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__¤c0_2
;

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__¤c0_4
;

639 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__¤c0_4
;

643 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__¤c0_4
;

648 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__¤c4_2
;

650 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__¤c0_4
;

654 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__¤c4_2
;

656 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__¤c0_4
;

661 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__¤c4_4
;

663 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #iâdeà
_FORCE_INLINES


670 
	#__¡pýy_¬gs
(
¤c
) \

671 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

673 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

676 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

678 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

679 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

681 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

683 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

685 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

686 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

687 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

689 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

690 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

692 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

694 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

695 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

696 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__¡pýy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__¡pýy_sm®l
 (*
__de¡
,

707 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

708 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

709 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

710 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤þ’
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sÿ2
;

715 
__STRING2_COPY_ARR3
 
__sÿ3
;

716 
__STRING2_COPY_ARR4
 
__sÿ4
;

717 
__STRING2_COPY_ARR5
 
__sÿ5
;

718 
__STRING2_COPY_ARR6
 
__sÿ6
;

719 
__STRING2_COPY_ARR7
 
__sÿ7
;

720 
__STRING2_COPY_ARR8
 
__sÿ8
;

721 } *
__u
 = (*è
__de¡
;

722 (è
__¤þ’
)

725 
__u
->
__c
 = '\0';

728 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

731 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

734 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

737 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

740 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

743 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

746 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

749  
__de¡
 + 
__¤þ’
 - 1;

750 
	}
}

758 #iâdeà
_HAVE_STRING_ARCH_¡ºýy


759 #ià
__GNUC_PREREQ
 (3, 2)

760 
	#¡ºýy
(
de¡
, 
¤c
, 
n
è
	`__bužtš_¡ºýy
 (de¡, src,‚)

	)

762 
	#¡ºýy
(
de¡
, 
¤c
, 
n
) \

763 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

764 ? (
	`¡¾’
 (
¤c
è+ 1 >ð((
size_t
è(
n
)) \

765 ? (*è
	`memýy
 (
de¡
, 
¤c
, 
n
) \

766 : 
	`¡ºýy
 (
de¡
, 
¤c
, 
n
)) \

767 : 
	`¡ºýy
 (
de¡
, 
¤c
, 
n
)))

	)

773 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


774 #ifdeà
_USE_STRING_ARCH_¡rchr


775 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

776 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

777 
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

778 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

779 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

780 : (*((*è
	`__mempýy
 (
	`¡rchr
 (
__de¡
, '\0'), \

781 
¤c
, 
n
)èð'\0', 
__de¡
)) \

782 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

783 #–ià
__GNUC_PREREQ
 (3, 2)

784 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__bužtš_¡ºÿt
 (de¡, src,‚)

	)

786 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

787 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
¤c
è&& __bužtš_cÚ¡ªt_°(
n
) \

788 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

789 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

790 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

797 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


798 #ià
__GNUC_PREREQ
 (3, 2)

799 
	#¡rcmp
(
s1
, 
s2
) \

800 
__ex‹nsiÚ__
 \

801 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

802 (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& __bužtš_cÚ¡ªt_°(
s2
) \

803 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

804 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

805 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

806 ? 
	`__bužtš_¡rcmp
 (
s1
, 
s2
) \

807 : (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

808 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

809 ? (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

810 ? 
	`__bužtš_¡rcmp
 (
s1
, 
s2
) \

811 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

812 : (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

813 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

814 ? (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

815 ? 
	`__bužtš_¡rcmp
 (
s1
, 
s2
) \

816 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

817 : 
	`__bužtš_¡rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#¡rcmp
(
s1
, 
s2
) \

820 
__ex‹nsiÚ__
 \

821 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

822 (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& __bužtš_cÚ¡ªt_°(
s2
) \

823 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

824 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

825 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

826 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

827 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

829 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

830 ? (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

831 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

832 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

833 : (
	`__bužtš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

834 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

835 ? (
	`__bužtš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

836 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

837 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

838 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

843 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

844 - ((cÚ¡ *è(cÚ¡ *)(
s2
))[0]); \

845 ià(
l
 > 0 && 
__»suÉ
 == 0) \

847 
__»suÉ
 = (((const *) \

848 (cÚ¡ *è(
s1
))[1] \

850 (cÚ¡ *è(
s2
))[1]); \

851 ià(
l
 > 1 && 
__»suÉ
 == 0) \

853 
__»suÉ
 = \

855 (cÚ¡ *è(
s1
))[2] \

857 (cÚ¡ *è(
s2
))[2]); \

858 ià(
l
 > 2 && 
__»suÉ
 == 0) \

859 
__»suÉ
 = \

861 (cÚ¡ *è(
s1
))[3] \

863 (cÚ¡ *è(
s2
))[3]); \

866 
__»suÉ
; }))

	)

868 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = \

870 (cÚ¡ *è(cÚ¡ *è(
s2
); \

871 
__»suÉ
 = \

872 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

873 - 
__s2
[0]); \

874 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

876 
__»suÉ
 = (((const *) \

877 (cÚ¡ *è(
s1
))[1] - 
__s2
[1]); \

878 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

880 
__»suÉ
 = (((const *) \

881 (cÚ¡ *è(
s1
))[2] - 
__s2
[2]); \

882 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

883 
__»suÉ
 = (((const *) \

884 (cÚ¡ *è(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__»suÉ
; }))

	)

890 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

891 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = \

892 (cÚ¡ *è(cÚ¡ *è(
s1
); \

893 
__»suÉ
 = \

894 
__s1
[0] - ((const *) \

895 (cÚ¡ *è(
s2
))[0]; \

896 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

898 
__»suÉ
 = (
__s1
[1] \

900 (cÚ¡ *è(
s2
))[1]); \

901 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

903 
__»suÉ
 = \

904 (
__s1
[2] - ((const *) \

905 (cÚ¡ *è(
s2
))[2]); \

906 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

907 
__»suÉ
 = \

908 (
__s1
[3] \

910 (cÚ¡ *è(
s2
))[3]); \

913 
__»suÉ
; }))

	)

918 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


919 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

920 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
n
) \

921 && ((
	`__bužtš_cÚ¡ªt_p
 (
s1
) \

922 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

923 || (
	`__bužtš_cÚ¡ªt_p
 (
s2
) \

924 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

925 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

931 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


932 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


933 #ià
__GNUC_PREREQ
 (3, 2)

934 
	#¡rc¥n
(
s
, 
»jeù
) \

935 
__ex‹nsiÚ__
 \

936 ({ 
__r0
, 
__r1
, 
__r2
; \

937 (
	`__bužtš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

938 ? ((
	`__bužtš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

939 ? 
	`__bužtš_¡rc¥n
 (
s
, 
»jeù
) \

940 : ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

941 ? 
	`¡¾’
 (
s
) \

942 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

943 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

944 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

945 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

946 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

947 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

948 : 
	`__bužtš_¡rc¥n
 (
s
, 
»jeù
)))))) \

949 : 
	`__bužtš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

951 
	#¡rc¥n
(
s
, 
»jeù
) \

952 
__ex‹nsiÚ__
 \

953 ({ 
__r0
, 
__r1
, 
__r2
; \

954 (
	`__bužtš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

955 ? ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

956 ? 
	`¡¾’
 (
s
) \

957 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

958 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

959 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

960 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

961 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

962 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

963 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

964 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

968 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

969 
__STRING_INLINE
 
size_t


970 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

972 
size_t
 
__»suÉ
 = 0;

973 
__s
[
__»suÉ
] !ð'\0' && __s[__»suÉ] !ð
__»jeù
)

974 ++
__»suÉ
;

975  
__»suÉ
;

976 
	}
}

978 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
,

979 
__»jeù2
);

980 
__STRING_INLINE
 
size_t


981 
	$__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
)

983 
size_t
 
__»suÉ
 = 0;

984 
__s
[
__»suÉ
] !ð'\0' && __s[__»suÉ] !ð
__»jeù1


985 && 
__s
[
__»suÉ
] !ð
__»jeù2
)

986 ++
__»suÉ
;

987  
__»suÉ
;

988 
	}
}

990 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
,

991 
__»jeù2
, 
__»jeù3
);

992 
__STRING_INLINE
 
size_t


993 
	$__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
,

994 
__»jeù3
)

996 
size_t
 
__»suÉ
 = 0;

997 
__s
[
__»suÉ
] !ð'\0' && __s[__»suÉ] !ð
__»jeù1


998 && 
__s
[
__»suÉ
] !ð
__»jeù2
 && __s[__»suÉ] !ð
__»jeù3
)

999 ++
__»suÉ
;

1000  
__»suÉ
;

1001 
	}
}

1007 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


1008 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


1009 #ià
__GNUC_PREREQ
 (3, 2)

1010 
	#¡r¥n
(
s
, 
acû±
) \

1011 
__ex‹nsiÚ__
 \

1012 ({ 
__a0
, 
__a1
, 
__a2
; \

1013 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1014 ? ((
	`__bužtš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1015 ? 
	`__bužtš_¡r¥n
 (
s
, 
acû±
) \

1016 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1017 ? ((è(
s
), (
size_t
) 0) \

1018 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1019 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1020 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1021 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1022 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1023 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1024 : 
	`__bužtš_¡r¥n
 (
s
, 
acû±
)))))) \

1025 : 
	`__bužtš_¡r¥n
 (
s
, 
acû±
)); })

	)

1027 
	#¡r¥n
(
s
, 
acû±
) \

1028 
__ex‹nsiÚ__
 \

1029 ({ 
__a0
, 
__a1
, 
__a2
; \

1030 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1031 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1032 ? ((è(
s
), (
size_t
) 0) \

1033 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1034 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1035 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1036 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1037 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1038 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1039 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1040 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1044 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1045 
__STRING_INLINE
 
size_t


1046 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1048 
size_t
 
__»suÉ
 = 0;

1050 
__s
[
__»suÉ
] =ð
__acû±
)

1051 ++
__»suÉ
;

1052  
__»suÉ
;

1053 
	}
}

1055 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1056 
__acû±2
);

1057 
__STRING_INLINE
 
size_t


1058 
	$__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1060 
size_t
 
__»suÉ
 = 0;

1062 
__s
[
__»suÉ
] =ð
__acû±1
 || __s[__»suÉ] =ð
__acû±2
)

1063 ++
__»suÉ
;

1064  
__»suÉ
;

1065 
	}
}

1067 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1068 
__acû±2
, 
__acû±3
);

1069 
__STRING_INLINE
 
size_t


1070 
	$__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1072 
size_t
 
__»suÉ
 = 0;

1074 
__s
[
__»suÉ
] =ð
__acû±1
 || __s[__»suÉ] =ð
__acû±2


1075 || 
__s
[
__»suÉ
] =ð
__acû±3
)

1076 ++
__»suÉ
;

1077  
__»suÉ
;

1078 
	}
}

1083 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1084 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1085 #ià
__GNUC_PREREQ
 (3, 2)

1086 
	#¡½brk
(
s
, 
acû±
) \

1087 
__ex‹nsiÚ__
 \

1088 ({ 
__a0
, 
__a1
, 
__a2
; \

1089 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1090 ? ((
	`__bužtš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1091 ? 
	`__bužtš_¡½brk
 (
s
, 
acû±
) \

1092 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1093 ? ((è(
s
), (*è
NULL
) \

1094 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1095 ? 
	`__bužtš_¡rchr
 (
s
, 
__a0
) \

1096 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1097 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1098 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1099 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1100 : 
	`__bužtš_¡½brk
 (
s
, 
acû±
)))))) \

1101 : 
	`__bužtš_¡½brk
 (
s
, 
acû±
)); })

	)

1103 
	#¡½brk
(
s
, 
acû±
) \

1104 
__ex‹nsiÚ__
 \

1105 ({ 
__a0
, 
__a1
, 
__a2
; \

1106 (
	`__bužtš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1107 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1108 ? ((è(
s
), (*è
NULL
) \

1109 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1110 ? 
	`¡rchr
 (
s
, 
__a0
) \

1111 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1112 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1113 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1114 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1115 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1116 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1120 
__STRING_INLINE
 *
__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1121 
__acû±2
);

1122 
__STRING_INLINE
 *

1123 
	$__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1126 *
__s
 !ð'\0' && *__ !ð
__acû±1
 && *__ !ð
__acû±2
)

1127 ++
__s
;

1128  *
__s
 =ð'\0' ? 
NULL
 : (*è(
size_t
) __s;

1129 
	}
}

1131 
__STRING_INLINE
 *
__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1132 
__acû±2
, 
__acû±3
);

1133 
__STRING_INLINE
 *

1134 
	$__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1137 *
__s
 !ð'\0' && *__ !ð
__acû±1
 && *__ !ð
__acû±2


1138 && *
__s
 !ð
__acû±3
)

1139 ++
__s
;

1140  *
__s
 =ð'\0' ? 
NULL
 : (*è(
size_t
) __s;

1141 
	}
}

1147 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1148 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1149 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1150 ? (((cÚ¡ *è(
ÃedË
))[0] == '\0' \

1151 ? (*è(
size_t
è(
hay¡ack
) \

1152 : (((cÚ¡ *è(
ÃedË
))[1] == '\0' \

1153 ? 
	`¡rchr
 (
hay¡ack
, \

1154 ((cÚ¡ *è(
ÃedË
))[0]) \

1155 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1156 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1160 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1161 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1162 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1163 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1164 && ((cÚ¡ *è(
£p
))[0] != '\0' \

1165 && ((cÚ¡ *è(
£p
))[1] == '\0' \

1166 ? 
	`__¡¹ok_r_1c
 (
s
, ((cÚ¡ *è(
£p
))[0], 
Ãx
) \

1167 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1170 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1171 
__STRING_INLINE
 *

1172 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1174 *
__»suÉ
;

1175 ià(
__s
 =ð
NULL
)

1176 
__s
 = *
__Ãx
;

1177 *
__s
 =ð
__£p
)

1178 ++
__s
;

1179 
__»suÉ
 = 
NULL
;

1180 ià(*
__s
 != '\0')

1182 
__»suÉ
 = 
__s
++;

1183 *
__s
 != '\0')

1184 ià(*
__s
++ =ð
__£p
)

1186 
__s
[-1] = '\0';

1190 *
__Ãx
 = 
__s
;

1191  
__»suÉ
;

1192 
	}
}

1193 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1194 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1199 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1200 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1202 *
__¡r£p_g
 (**
__¡ršgp
, cÚ¡ *
__d–im
);

1203 
	#__¡r£p
(
s
, 
»jeù
) \

1204 
__ex‹nsiÚ__
 \

1205 ({ 
__r0
, 
__r1
, 
__r2
; \

1206 (
	`__bužtš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1207 && (
__r0
 = ((cÚ¡ *è(
»jeù
))[0], \

1208 ((cÚ¡ *è(
»jeù
))[0] != '\0') \

1209 ? ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], \

1210 ((cÚ¡ *è(
»jeù
))[1] == '\0') \

1211 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1212 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

1213 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1214 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

1215 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1216 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1217 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1220 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1221 
__STRING_INLINE
 *

1222 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1224 *
__»tv®
 = *
__s
;

1225 ià(
__»tv®
 !ð
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1226 *(*
__s
)++ = '\0';

1227  
__»tv®
;

1228 
	}
}

1230 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1231 
__STRING_INLINE
 *

1232 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1234 *
__»tv®
 = *
__s
;

1235 ià(
__»tv®
 !ð
NULL
)

1237 *
__ý
 = 
__»tv®
;

1240 ià(*
__ý
 == '\0')

1242 
__ý
 = 
NULL
;

1245 ià(*
__ý
 =ð
__»jeù1
 || *__ý =ð
__»jeù2
)

1247 *
__ý
++ = '\0';

1250 ++
__ý
;

1252 *
__s
 = 
__ý
;

1254  
__»tv®
;

1255 
	}
}

1257 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1258 
__»jeù3
);

1259 
__STRING_INLINE
 *

1260 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1262 *
__»tv®
 = *
__s
;

1263 ià(
__»tv®
 !ð
NULL
)

1265 *
__ý
 = 
__»tv®
;

1268 ià(*
__ý
 == '\0')

1270 
__ý
 = 
NULL
;

1273 ià(*
__ý
 =ð
__»jeù1
 || *__ý =ð
__»jeù2
 || *__ý =ð
__»jeù3
)

1275 *
__ý
++ = '\0';

1278 ++
__ý
;

1280 *
__s
 = 
__ý
;

1282  
__»tv®
;

1283 
	}
}

1284 #ifdeà
__USE_BSD


1285 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1292 #ifdeà
__USE_MISC


1294 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1295 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1296 
	~<¡dlib.h
>

1299 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1301 *
	$__¡rdup
 (cÚ¡ *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1302 
	#__¡rdup
(
s
) \

1303 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1304 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1305 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1306 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1307 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1308 ià(
__»tv®
 !ð
NULL
) \

1309 
__»tv®
 = (*è
	`memýy
 (__»tv®, 
s
, 
__Ën
); \

1310 
__»tv®
; 
	}
})) \

1311 : 
	`__¡rdup
 (
s
)))

	)

1313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1314 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1318 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1320 *
	$__¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

1321 
__THROW
 
__©Œibu‹_m®loc__
;

1322 
	#__¡ºdup
(
s
, 
n
) \

1323 (
	`__ex‹nsiÚ__
 (
	`__bužtš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1324 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1325 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1326 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1327 
size_t
 
__n
 = (
n
); \

1328 *
__»tv®
; \

1329 ià(
__n
 < 
__Ën
) \

1330 
__Ën
 = 
__n
 + 1; \

1331 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1332 ià(
__»tv®
 !ð
NULL
) \

1334 
__»tv®
[
__Ën
 - 1] = '\0'; \

1335 
__»tv®
 = (*è
	`memýy
 (__»tv®, 
s
, \

1336 
__Ën
 - 1); \

1338 
__»tv®
; 
	}
})) \

1339 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1341 #ifdeà
__USE_GNU


1342 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1348 #iâdeà
_FORCE_INLINES


1349 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #iâdeà
_STRING_H


22 
__w¬ndeþ
 (
__w¬n_mem£t_z”o_Ën
,

25 #iâdeà
__ýlu¥lus


29 #undeà
memýy


30 #undeà
memmove


31 #undeà
mem£t


32 #undeà
¡rÿt


33 #undeà
¡rýy


34 #undeà
¡ºÿt


35 #undeà
¡ºýy


36 #ifdeà
__USE_GNU


37 #undeà
mempýy


38 #undeà
¡pýy


40 #ifdeà
__USE_BSD


41 #undeà
bcÝy


42 #undeà
bz”o


47 
__fÜtify_funùiÚ
 *

48 
__NTH
 (
	$memýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

49 
size_t
 
__Ën
))

51  
	`__bužtš___memýy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__fÜtify_funùiÚ
 *

55 
__NTH
 (
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__Ën
))

57  
	`__bužtš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifdeà
__USE_GNU


61 
__fÜtify_funùiÚ
 *

62 
__NTH
 (
	$mempýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

63 
size_t
 
__Ën
))

65  
	`__bužtš___mempýy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__fÜtify_funùiÚ
 *

76 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

78 ià(
	`__bužtš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

79 && (!
	`__bužtš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

81 
	`__w¬n_mem£t_z”o_Ën
 ();

82  
__de¡
;

84  
	`__bužtš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifdeà
__USE_BSD


88 
__fÜtify_funùiÚ
 

89 
__NTH
 (
	$bcÝy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

91 (è
	`__bužtš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__fÜtify_funùiÚ
 

95 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

97 (è
	`__bužtš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__fÜtify_funùiÚ
 *

102 
__NTH
 (
	$¡rýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

104  
	`__bužtš___¡rýy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifdeà
__USE_GNU


108 
__fÜtify_funùiÚ
 *

109 
__NTH
 (
	$¡pýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

111  
	`__bužtš___¡pýy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__fÜtify_funùiÚ
 *

117 
__NTH
 (
	$¡ºýy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

118 
size_t
 
__Ën
))

120  
	`__bužtš___¡ºýy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__¡²ýy_chk
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

125 
size_t
 
__de¡Ën
è
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__¡²ýy_®Ÿs
, (*
__de¡
, cÚ¡ *
__¤c
,

127 
size_t
 
__n
), 
¡²ýy
);

129 
__fÜtify_funùiÚ
 *

130 
	`__NTH
 (
	$¡²ýy
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
))

132 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1

133 && (!
	`__bužtš_cÚ¡ªt_p
 (
__n
è|| __À<ð
	`__bos
 (
__de¡
)))

134  
	`__¡²ýy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__¡²ýy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

136 
	}
}

139 
__fÜtify_funùiÚ
 *

140 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

142  
	`__bužtš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__fÜtify_funùiÚ
 *

147 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

148 
size_t
 
__Ën
))

150  
	`__bužtš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/sys_errlist.h

19 #iâdeà
_STDIO_H


25 #ifdeà 
__USE_BSD


26 
sys_Ã¼
;

27 cÚ¡ *cÚ¡ 
sys_”¾i¡
[];

29 #ifdeà 
__USE_GNU


30 
_sys_Ã¼
;

31 cÚ¡ *cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__þock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

81 
	#CLOCK_TAI
 11

	)

84 
	#TIMER_ABSTIME
 1

	)

87 #ifdeà
__USE_GNU


88 
	~<b™s/timex.h
>

90 
__BEGIN_DECLS


93 
	$þock_adjtime
 (
__þockid_t
 
__þock_id
, 
timex
 *
__utx
è
__THROW
;

95 
__END_DECLS


101 #undeà
__Ãed_timev®


	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

45 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

54 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

60 
	m__v®
[2];

61 } 
	t__quad_t
;

64 
__u_lÚg
 
	m__v®
[2];

65 } 
	t__u_quad_t
;

98 
	#__S16_TYPE
 

	)

99 
	#__U16_TYPE
 

	)

100 
	#__S32_TYPE
 

	)

101 
	#__U32_TYPE
 

	)

102 
	#__SLONGWORD_TYPE
 

	)

103 
	#__ULONGWORD_TYPE
 

	)

104 #ià
__WORDSIZE
 == 32

105 
	#__SQUAD_TYPE
 
__quad_t


	)

106 
	#__UQUAD_TYPE
 
__u_quad_t


	)

107 
	#__SWORD_TYPE
 

	)

108 
	#__UWORD_TYPE
 

	)

109 
	#__SLONG32_TYPE
 

	)

110 
	#__ULONG32_TYPE
 

	)

111 
	#__S64_TYPE
 
__quad_t


	)

112 
	#__U64_TYPE
 
__u_quad_t


	)

115 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

116 #–ià
__WORDSIZE
 == 64

117 
	t__SQUAD_TYPE
 

	)

118 
	t__UQUAD_TYPE
 

	)

119 
	t__SWORD_TYPE
 

	)

120 
	t__UWORD_TYPE
 

	)

121 
	t__SLONG32_TYPE
 

	)

122 
	t__ULONG32_TYPE
 

	)

123 
	t__S64_TYPE
 

	)

124 
	t__U64_TYPE
 

	)

126 
	t__STD_TYPE
 

	)

130 
	~<b™s/ty³sizes.h
>

133 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

134 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

135 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

136 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

137 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

138 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

139 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

140 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

141 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

142 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

143 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

144 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__þock_t
;

145 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

146 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

147 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

148 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

149 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

150 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

152 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

153 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

156 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__þockid_t
;

159 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

162 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

167 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

168 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

171 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

172 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

175 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfžút_t
;

176 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfžút64_t
;

179 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

181 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

186 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

190 
__off64_t
 
	t__loff_t
;

191 
__quad_t
 *
	t__qaddr_t
;

192 *
	t__ÿddr_t
;

195 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

198 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

201 #undeà
__STD_TYPE


	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ð0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ð0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ð
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<’dŸn.h
>

66 
	uwa™


68 
	mw_¡©us
;

71 #if 
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


72 
	m__w_‹rmsig
:7;

73 
	m__w_cÜedump
:1;

74 
	m__w_»tcode
:8;

77 #if 
__BYTE_ORDER
 =ð
__BIG_ENDIAN


79 
	m__w_»tcode
:8;

80 
	m__w_cÜedump
:1;

81 
	m__w_‹rmsig
:7;

83 } 
	m__wa™_‹rmš©ed
;

86 #if 
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


87 
	m__w_¡Ýv®
:8;

88 
	m__w_¡Ýsig
:8;

91 #if 
__BYTE_ORDER
 =ð
__BIG_ENDIAN


93 
	m__w_¡Ýsig
:8;

94 
	m__w_¡Ýv®
:8;

96 } 
	m__wa™_¡Ý³d
;

99 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

100 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

101 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

102 
	#w_¡Ýsig
 
__wa™_¡Ý³d
.
__w_¡Ýsig


	)

103 
	#w_¡Ýv®
 
__wa™_¡Ý³d
.
__w_¡Ýv®


	)

	@/usr/include/bits/wchar.h

19 #iâdeà
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

22 
	~<b™s/wÜdsize.h
>

24 #ià
__WORDSIZE
 == 64

25 
	#__WCHAR_MIN
 (-2147483647 - 1)

	)

26 
	#__WCHAR_MAX
 (2147483647)

	)

28 
	#__WCHAR_MIN
 (-2147483647È- 1l)

	)

29 
	#__WCHAR_MAX
 (2147483647l)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #undeà
__USE_ISOC11


99 #undeà
__USE_ISOC99


100 #undeà
__USE_ISOC95


101 #undeà
__USE_ISOCXX11


102 #undeà
__USE_POSIX


103 #undeà
__USE_POSIX2


104 #undeà
__USE_POSIX199309


105 #undeà
__USE_POSIX199506


106 #undeà
__USE_XOPEN


107 #undeà
__USE_XOPEN_EXTENDED


108 #undeà
__USE_UNIX98


109 #undeà
__USE_XOPEN2K


110 #undeà
__USE_XOPEN2KXSI


111 #undeà
__USE_XOPEN2K8


112 #undeà
__USE_XOPEN2K8XSI


113 #undeà
__USE_LARGEFILE


114 #undeà
__USE_LARGEFILE64


115 #undeà
__USE_FILE_OFFSET64


116 #undeà
__USE_BSD


117 #undeà
__USE_SVID


118 #undeà
__USE_MISC


119 #undeà
__USE_ATFILE


120 #undeà
__USE_GNU


121 #undeà
__USE_REENTRANT


122 #undeà
__USE_FORTIFY_LEVEL


123 #undeà
__FAVOR_BSD


124 #undeà
__KERNEL_STRICT_NAMES


128 #iâdeà
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

144 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ð((
maj
è<< 16è+ (
mš
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

151 #ià
defšed
 
_BSD_SOURCE
 && \

152 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

153 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifdeà
_GNU_SOURCE


159 #undeà
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #undeà
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #undeà
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #undeà
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #undeà
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #undeà
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #undeà
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #undeà
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #undeà
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #undeà
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #undeà
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

186 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

187 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #ià(
defšed
 
_ISOC11_SOURCE
 \

194 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

200 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

206 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #ià((
defšed
 
__ýlu¥lus
 && __cplusplus >= 201103L) \

215 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ð1 || defšed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ð2 || defšed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #undeà
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #undeà
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #undeà
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #ià(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #undeà
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #ià(
_XOPEN_SOURCE
 - 0) >= 600

274 #ià(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #undeà
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #undeà
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifdeà
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifdeà
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifdeà
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

329 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

330 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
compžšg
 
w™h
 
Ýtimiz©iÚ
 (-
O
)

331 #–ià!
__GNUC_PREREQ
 (4, 1)

332 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
GCC
 4.1 
Ü
 
Ï‹r


333 #–ià
_FORTIFY_SOURCE
 > 1

334 
	#__USE_FORTIFY_LEVEL
 2

	)

336 
	#__USE_FORTIFY_LEVEL
 1

	)

339 #iâdeà
__USE_FORTIFY_LEVEL


340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<¡dc-´edef.h
>

353 #undeà
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 17

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

362 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ð((
maj
è<< 16è+ (
mš
))

	)

365 #ià
defšed
 
__GNUC__
 \

366 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

367 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

368 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

369 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

373 #iâdeà
__ASSEMBLER__


374 #iâdeà
_SYS_CDEFS_H


375 
	~<sys/cdefs.h
>

380 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


381 
	#__USE_LARGEFILE
 1

	)

382 
	#__USE_LARGEFILE64
 1

	)

388 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

389 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

390 && 
defšed
 
	g__ex‹º_šlše


391 
	#__USE_EXTERN_INLINES
 1

	)

399 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

20 #iâdeà
_GETOPT_H


22 #iâdeà
__Ãed_g‘Ýt


23 
	#_GETOPT_H
 1

	)

33 #ià!
defšed
 
__GNU_LIBRARY__


34 
	~<ùy³.h
>

37 #iâdeà
__THROW


38 #iâdeà
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

41 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__ýlu¥lus


58 *
Ýrg
;

72 
Ýtšd
;

77 
Ý‹¼
;

81 
ÝtÝt
;

83 #iâdeà
__Ãed_g‘Ýt


105 
	sÝtiÚ


107 cÚ¡ *
	gÇme
;

110 
	ghas_¬g
;

111 *
	gæag
;

112 
	gv®
;

117 
	#no_¬gum’t
 0

	)

118 
	#»quœed_¬gum’t
 1

	)

119 
	#ÝtiÚ®_¬gum’t
 2

	)

147 #ifdeà
__GNU_LIBRARY__


151 
g‘Ýt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtÝts
)

152 
__THROW
;

154 #ià
defšed
 
__Ãed_g‘Ýt
 && defšed 
__USE_POSIX2
 \

155 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


159 #ifdeà
__REDIRECT


160 
__REDIRECT_NTH
 (
g‘Ýt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

161 cÚ¡ *
__shÜtÝts
),

162 
__posix_g‘Ýt
);

164 
__posix_g‘Ýt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

165 cÚ¡ *
__shÜtÝts
è
__THROW
;

166 
	#g‘Ýt
 
__posix_g‘Ýt


	)

170 
g‘Ýt
 ();

173 #iâdeà
__Ãed_g‘Ýt


174 
g‘Ýt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

175 cÚ¡ *
__shÜtÝts
,

176 cÚ¡ 
ÝtiÚ
 *
__lÚgÝts
, *
__lÚgšd
)

177 
__THROW
;

178 
g‘Ýt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

179 cÚ¡ *
__shÜtÝts
,

180 cÚ¡ 
ÝtiÚ
 *
__lÚgÝts
, *
__lÚgšd
)

181 
__THROW
;

185 #ifdef 
__ýlu¥lus


190 #undeà
__Ãed_g‘Ýt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_åos_t
 
_G_åos_t


	)

35 
	#_IO_åos64_t
 
_G_åos64_t


	)

36 
	#_IO_size_t
 
size_t


	)

37 
	#_IO_ssize_t
 
__ssize_t


	)

38 
	#_IO_off_t
 
__off_t


	)

39 
	#_IO_off64_t
 
__off64_t


	)

40 
	#_IO_pid_t
 
__pid_t


	)

41 
	#_IO_uid_t
 
__uid_t


	)

42 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

43 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

44 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

45 
	#_IO_va_li¡
 
_G_va_li¡


	)

46 
	#_IO_wšt_t
 
wšt_t


	)

49 
	#__Ãed___va_li¡


	)

50 
	~<¡d¬g.h
>

51 #ifdeà
__GNUC_VA_LIST


52 #undeà
_IO_va_li¡


53 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

56 #iâdeà
__P


57 
	~<sys/cdefs.h
>

60 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

62 #iâdeà
EOF


63 
	#EOF
 (-1)

	)

65 #iâdeà
NULL


66 #ià
defšed
 
__GNUG__
 && \

67 (
	g__GNUC__
 > 2 || (__GNUC__ =ð2 && 
__GNUC_MINOR__
 >= 8))

68 
	#NULL
 (
__nuÎ
)

	)

70 #ià!
defšed
(
__ýlu¥lus
)

71 
	#NULL
 ((*)0)

	)

73 
	#NULL
 (0)

	)

78 
	#_IOS_INPUT
 1

	)

79 
	#_IOS_OUTPUT
 2

	)

80 
	#_IOS_ATEND
 4

	)

81 
	#_IOS_APPEND
 8

	)

82 
	#_IOS_TRUNC
 16

	)

83 
	#_IOS_NOCREATE
 32

	)

84 
	#_IOS_NOREPLACE
 64

	)

85 
	#_IOS_BIN
 128

	)

93 
	#_IO_MAGIC
 0xFBAD0000

	)

94 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

95 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

96 
	#_IO_USER_BUF
 1

	)

97 
	#_IO_UNBUFFERED
 2

	)

98 
	#_IO_NO_READS
 4

	)

99 
	#_IO_NO_WRITES
 8

	)

100 
	#_IO_EOF_SEEN
 0x10

	)

101 
	#_IO_ERR_SEEN
 0x20

	)

102 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

103 
	#_IO_LINKED
 0x80

	)

104 
	#_IO_IN_BACKUP
 0x100

	)

105 
	#_IO_LINE_BUF
 0x200

	)

106 
	#_IO_TIED_PUT_GET
 0x400

	)

107 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

108 
	#_IO_IS_APPENDING
 0x1000

	)

109 
	#_IO_IS_FILEBUF
 0x2000

	)

110 
	#_IO_BAD_SEEN
 0x4000

	)

111 
	#_IO_USER_LOCK
 0x8000

	)

113 
	#_IO_FLAGS2_MMAP
 1

	)

114 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

115 #ifdeà
_LIBC


116 
	#_IO_FLAGS2_FORTIFY
 4

	)

118 
	#_IO_FLAGS2_USER_WBUF
 8

	)

119 #ifdeà
_LIBC


120 
	#_IO_FLAGS2_SCANF_STD
 16

	)

121 
	#_IO_FLAGS2_NOCLOSE
 32

	)

122 
	#_IO_FLAGS2_CLOEXEC
 64

	)

126 
	#_IO_SKIPWS
 01

	)

127 
	#_IO_LEFT
 02

	)

128 
	#_IO_RIGHT
 04

	)

129 
	#_IO_INTERNAL
 010

	)

130 
	#_IO_DEC
 020

	)

131 
	#_IO_OCT
 040

	)

132 
	#_IO_HEX
 0100

	)

133 
	#_IO_SHOWBASE
 0200

	)

134 
	#_IO_SHOWPOINT
 0400

	)

135 
	#_IO_UPPERCASE
 01000

	)

136 
	#_IO_SHOWPOS
 02000

	)

137 
	#_IO_SCIENTIFIC
 04000

	)

138 
	#_IO_FIXED
 010000

	)

139 
	#_IO_UNITBUF
 020000

	)

140 
	#_IO_STDIO
 040000

	)

141 
	#_IO_DONT_CLOSE
 0100000

	)

142 
	#_IO_BOOLALPHA
 0200000

	)

145 
_IO_jump_t
; 
	g_IO_FILE
;

148 #ifdeà
_IO_MTSAFE_IO


149 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

150 
	~<b™s/¡dio-lock.h
>

155 
	t_IO_lock_t
;

161 
	s_IO_m¬k”
 {

162 
_IO_m¬k”
 *
	m_Ãxt
;

163 
_IO_FILE
 *
	m_sbuf
;

167 
	m_pos
;

169 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

170 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

171 
	mpublic
:

172 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

173 ~
¡»amm¬k”
();

174 
§všg
(è{  
	m_¥os
 == -2; }

175 
d–
(
¡»amm¬k”
&);

176 
d–
();

181 
	e__codecvt_»suÉ


183 
	m__codecvt_ok
,

184 
	m__codecvt_·¹Ÿl
,

185 
	m__codecvt_”rÜ
,

186 
	m__codecvt_nocÚv


189 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


192 
	s_IO_codecvt


194 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

195 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

196 
	m__mb¡©e_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 *,

199 cÚ¡ 
	mwch¬_t
 **, *,

201 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

202 
	m__mb¡©e_t
 *, *,

204 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

205 
	m__mb¡©e_t
 *,

207 cÚ¡ **, 
	mwch¬_t
 *,

208 
	mwch¬_t
 *, wchar_t **);

209 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

211 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

212 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

213 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

215 
_IO_icÚv_t
 
	m__cd_š
;

216 
_IO_icÚv_t
 
	m__cd_out
;

220 
	s_IO_wide_d©a


222 
wch¬_t
 *
	m_IO_»ad_±r
;

223 
wch¬_t
 *
	m_IO_»ad_’d
;

224 
wch¬_t
 *
	m_IO_»ad_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_ba£
;

226 
wch¬_t
 *
	m_IO_wr™e_±r
;

227 
wch¬_t
 *
	m_IO_wr™e_’d
;

228 
wch¬_t
 *
	m_IO_buf_ba£
;

229 
wch¬_t
 *
	m_IO_buf_’d
;

231 
wch¬_t
 *
	m_IO_§ve_ba£
;

232 
wch¬_t
 *
	m_IO_backup_ba£
;

234 
wch¬_t
 *
	m_IO_§ve_’d
;

236 
__mb¡©e_t
 
	m_IO_¡©e
;

237 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

238 
_IO_codecvt
 
	m_codecvt
;

240 
wch¬_t
 
	m_shÜtbuf
[1];

242 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

246 
	s_IO_FILE
 {

247 
	m_æags
;

248 
	#_IO_fže_æags
 
_æags


	)

252 * 
	m_IO_»ad_±r
;

253 * 
	m_IO_»ad_’d
;

254 * 
	m_IO_»ad_ba£
;

255 * 
	m_IO_wr™e_ba£
;

256 * 
	m_IO_wr™e_±r
;

257 * 
	m_IO_wr™e_’d
;

258 * 
	m_IO_buf_ba£
;

259 * 
	m_IO_buf_’d
;

261 *
	m_IO_§ve_ba£
;

262 *
	m_IO_backup_ba£
;

263 *
	m_IO_§ve_’d
;

265 
_IO_m¬k”
 *
	m_m¬k”s
;

267 
_IO_FILE
 *
	m_chaš
;

269 
	m_fž’o
;

271 
	m_blksize
;

273 
	m_æags2
;

275 
_IO_off_t
 
	m_Þd_off£t
;

277 
	#__HAVE_COLUMN


	)

279 
	m_cur_cÞumn
;

280 sigÃd 
	m_vbË_off£t
;

281 
	m_shÜtbuf
[1];

285 
_IO_lock_t
 *
	m_lock
;

286 #ifdeà
_IO_USE_OLD_IO_FILE


289 
	s_IO_FILE_com¶‘e


291 
_IO_FILE
 
	m_fže
;

293 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

294 
_IO_off64_t
 
	m_off£t
;

295 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


297 
_IO_codecvt
 *
	m_codecvt
;

298 
_IO_wide_d©a
 *
	m_wide_d©a
;

299 
_IO_FILE
 *
	m_ä“»s_li¡
;

300 *
	m_ä“»s_buf
;

301 
size_t
 
	m_ä“»s_size
;

303 *
	m__·d1
;

304 *
	m__·d2
;

305 *
	m__·d3
;

306 *
	m__·d4
;

307 
size_t
 
	m__·d5
;

309 
	m_mode
;

311 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

315 #iâdeà
__ýlu¥lus


316 
_IO_FILE
 
	t_IO_FILE
;

319 
	g_IO_FILE_¶us
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

323 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

324 #iâdeà
_LIBC


325 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

326 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

327 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

329 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

331 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

339 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

347 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

348 
	tsize_t
 
	t__n
);

356 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

359 
	t__io_þo£_â
 (*
	t__cook›
);

362 #ifdeà
_GNU_SOURCE


364 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

365 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

366 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

367 
__io_þo£_â
 
	tcook›_þo£_funùiÚ_t
;

372 
__io_»ad_â
 *
	m»ad
;

373 
__io_wr™e_â
 *
	mwr™e
;

374 
__io_£ek_â
 *
	m£ek
;

375 
__io_þo£_â
 *
	mþo£
;

376 } 
	t_IO_cook›_io_funùiÚs_t
;

377 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

379 
	g_IO_cook›_fže
;

382 
_IO_cook›_š™
 (
_IO_cook›_fže
 *
__cfže
, 
__»ad_wr™e
,

383 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

387 #ifdeà
__ýlu¥lus


391 
__und”æow
 (
_IO_FILE
 *);

392 
__uæow
 (
_IO_FILE
 *);

393 
__ov”æow
 (
_IO_FILE
 *, );

394 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


395 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

397 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

400 #ià 
__GNUC__
 >= 3

401 
	#_IO_BE
(
ex´
, 
»s
è
	`__bužtš_ex³ù
 (Óx´),„es)

	)

403 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

406 
	#_IO_g‘c_uÆocked
(
_å
) \

407 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ð(_å)->
_IO_»ad_’d
, 0) \

408 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

409 
	#_IO_³ekc_uÆocked
(
_å
) \

410 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ð(_å)->
_IO_»ad_’d
, 0) \

411 && 
	`__und”æow
 (
_å
è=ð
EOF
 ? EOF \

412 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

413 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

414 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ð(_å)->
_IO_wr™e_’d
, 0) \

415 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

416 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

418 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


419 
	#_IO_g‘wc_uÆocked
(
_å
) \

420 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ð
NULL
 \

421 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

422 >ð(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

423 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

424 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

425 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ð
NULL
 \

426 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

427 >ð(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

428 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

429 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

432 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ð0)

	)

433 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ð0)

	)

435 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

436 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

437 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

438 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

440 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

443 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

444 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

446 
_IO_æockfže
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_fuÆockfže
 (
_IO_FILE
 *è
__THROW
;

448 
_IO_árylockfže
 (
_IO_FILE
 *è
__THROW
;

450 #ifdeà
_IO_MTSAFE_IO


451 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

452 
	#_IO_æockfže
(
_å
) \

453 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ð0è
	`_IO_æockfže
 (_å)

	)

454 
	#_IO_fuÆockfže
(
_å
) \

455 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ð0è
	`_IO_fuÆockfže
 (_å)

	)

457 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

458 
	#_IO_æockfže
(
_å
è

	)

459 
	#_IO_fuÆockfže
(
_å
è

	)

460 
	#_IO_árylockfže
(
_å
è

	)

461 
	#_IO_þ—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

462 
	#_IO_þ—nup_»giÚ_’d
(
_Do™
è

	)

465 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

466 
_IO_va_li¡
, *
__»¡riù
);

467 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

468 
_IO_va_li¡
);

469 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

470 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

472 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

473 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

475 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

477 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


478 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

479 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

480 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

481 #ià
__GNUC__
 >= 2

484 #ià
defšed
 
_LIBC
 && defšed 
SHARED


485 
	~<shlib-com·t.h
>

486 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

487 
	#_IO_fwide_maybe_šcom·tibË
 \

488 (
	`__bužtš_ex³ù
 (&
_IO_¡dš_u£d
 =ð
NULL
, 0))

	)

489 cÚ¡ 
_IO_¡dš_u£d
;

490 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

493 #iâdeà
_IO_fwide_maybe_šcom·tibË


494 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

498 
	#_IO_fwide
(
__å
, 
__mode
) \

499 ({ 
__»suÉ
 = (
__mode
); \

500 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

502 ià((
__å
)->
_mode
 == 0) \

504 (
__å
)->
_mode
 = -1; \

505 
__»suÉ
 = (
__å
)->
_mode
; \

507 ià(
	`__bužtš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

508 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

510 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

511 
__»suÉ
; })

	)

514 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

515 
_IO_va_li¡
, *
__»¡riù
);

516 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

517 
_IO_va_li¡
);

518 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

519 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

522 #ifdeà
__LDBL_COMPAT


523 
	~<b™s/libio-ldbl.h
>

526 #ifdeà
__ýlu¥lus


	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_BSD


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_BSD


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_þock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_þockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

167 #–ià
__GLIBC_HAVE_LONG_LONG


168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

178 #–ià
__GLIBC_HAVE_LONG_LONG


179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfžút_t_defšed


243 
__fsfžút_t
 
	tfsfžút_t
;

244 
	#__fsfžút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfžút_t_defšed


256 
__fsfžút64_t
 
	tfsfžút_t
;

257 
	#__fsfžút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfžút64_t
 
	tfsfžút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tÞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/bits/fcntl-linux.h

19 #iâdef 
_FCNTL_H


37 #ifdeà
__USE_GNU


38 
	~<b™s/uio.h
>

42 
	#O_ACCMODE
 0003

	)

43 
	#O_RDONLY
 00

	)

44 
	#O_WRONLY
 01

	)

45 
	#O_RDWR
 02

	)

46 #iâdeà
O_CREAT


47 
	#O_CREAT
 0100

	)

49 #iâdeà
O_EXCL


50 
	#O_EXCL
 0200

	)

52 #iâdeà
O_NOCTTY


53 
	#O_NOCTTY
 0400

	)

55 #iâdeà
O_TRUNC


56 
	#O_TRUNC
 01000

	)

58 #iâdeà
O_APPEND


59 
	#O_APPEND
 02000

	)

61 #iâdeà
O_NONBLOCK


62 
	#O_NONBLOCK
 04000

	)

64 #iâdeà
O_NDELAY


65 
	#O_NDELAY
 
O_NONBLOCK


	)

67 #iâdeà
O_SYNC


68 
	#O_SYNC
 04010000

	)

70 
	#O_FSYNC
 
O_SYNC


	)

71 #iâdeà
O_ASYNC


72 
	#O_ASYNC
 020000

	)

74 #iâdeà
__O_LARGEFILE


75 
	#__O_LARGEFILE
 0100000

	)

78 #iâdeà
__O_DIRECTORY


79 
	#__O_DIRECTORY
 0200000

	)

81 #iâdeà
__O_NOFOLLOW


82 
	#__O_NOFOLLOW
 0400000

	)

84 #iâdeà
__O_CLOEXEC


85 
	#__O_CLOEXEC
 02000000

	)

87 #iâdeà
__O_DIRECT


88 
	#__O_DIRECT
 040000

	)

90 #iâdeà
__O_NOATIME


91 
	#__O_NOATIME
 01000000

	)

93 #iâdeà
__O_PATH


94 
	#__O_PATH
 010000000

	)

96 #iâdeà
__O_DSYNC


97 
	#__O_DSYNC
 010000

	)

99 #iâdeà
__O_TMPFILE


100 
	#__O_TMPFILE
 (020000000 | 
__O_DIRECTORY
)

	)

103 #iâdeà
F_GETLK


104 #iâdeà
__USE_FILE_OFFSET64


105 
	#F_GETLK
 5

	)

106 
	#F_SETLK
 6

	)

107 
	#F_SETLKW
 7

	)

109 
	#F_GETLK
 
F_GETLK64


	)

110 
	#F_SETLK
 
F_SETLK64


	)

111 
	#F_SETLKW
 
F_SETLKW64


	)

114 #iâdeà
F_GETLK64


115 
	#F_GETLK64
 12

	)

116 
	#F_SETLK64
 13

	)

117 
	#F_SETLKW64
 14

	)

120 #ifdeà
__USE_FILE_OFFSET64


132 #ifdeà
__USE_GNU


133 
	#F_OFD_GETLK
 36

	)

134 
	#F_OFD_SETLK
 37

	)

135 
	#F_OFD_SETLKW
 38

	)

139 #ifdeà
__USE_LARGEFILE64


140 
	#O_LARGEFILE
 
__O_LARGEFILE


	)

143 #ifdeà
__USE_XOPEN2K8


144 
	#O_DIRECTORY
 
__O_DIRECTORY


	)

145 
	#O_NOFOLLOW
 
__O_NOFOLLOW


	)

146 
	#O_CLOEXEC
 
__O_CLOEXEC


	)

149 #ifdeà
__USE_GNU


150 
	#O_DIRECT
 
__O_DIRECT


	)

151 
	#O_NOATIME
 
__O_NOATIME


	)

152 
	#O_PATH
 
__O_PATH


	)

153 
	#O_TMPFILE
 
__O_TMPFILE


	)

159 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


160 
	#O_DSYNC
 
__O_DSYNC


	)

161 #ià
defšed
 
__O_RSYNC


162 
	#O_RSYNC
 
__O_RSYNC


	)

164 
	#O_RSYNC
 
O_SYNC


	)

169 
	#F_DUPFD
 0

	)

170 
	#F_GETFD
 1

	)

171 
	#F_SETFD
 2

	)

172 
	#F_GETFL
 3

	)

173 
	#F_SETFL
 4

	)

175 #iâdeà
__F_SETOWN


176 
	#__F_SETOWN
 8

	)

177 
	#__F_GETOWN
 9

	)

180 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


181 
	#F_SETOWN
 
__F_SETOWN


	)

182 
	#F_GETOWN
 
__F_GETOWN


	)

185 #iâdeà
__F_SETSIG


186 
	#__F_SETSIG
 10

	)

187 
	#__F_GETSIG
 11

	)

189 #iâdeà
__F_SETOWN_EX


190 
	#__F_SETOWN_EX
 15

	)

191 
	#__F_GETOWN_EX
 16

	)

194 #ifdeà
__USE_GNU


195 
	#F_SETSIG
 
__F_SETSIG


	)

196 
	#F_GETSIG
 
__F_GETSIG


	)

197 
	#F_SETOWN_EX
 
__F_SETOWN_EX


	)

198 
	#F_GETOWN_EX
 
__F_GETOWN_EX


	)

201 #ifdeà
__USE_GNU


202 
	#F_SETLEASE
 1024

	)

203 
	#F_GETLEASE
 1025

	)

204 
	#F_NOTIFY
 1026

	)

205 
	#F_SETPIPE_SZ
 1031

	)

206 
	#F_GETPIPE_SZ
 1032

	)

208 #ifdeà
__USE_XOPEN2K8


209 
	#F_DUPFD_CLOEXEC
 1030

	)

214 
	#FD_CLOEXEC
 1

	)

216 #iâdeà
F_RDLCK


218 
	#F_RDLCK
 0

	)

219 
	#F_WRLCK
 1

	)

220 
	#F_UNLCK
 2

	)

225 #iâdeà
F_EXLCK


226 
	#F_EXLCK
 4

	)

227 
	#F_SHLCK
 8

	)

230 #ifdeà
__USE_BSD


232 
	#LOCK_SH
 1

	)

233 
	#LOCK_EX
 2

	)

234 
	#LOCK_NB
 4

	)

236 
	#LOCK_UN
 8

	)

239 #ifdeà
__USE_GNU


240 
	#LOCK_MAND
 32

	)

241 
	#LOCK_READ
 64

	)

242 
	#LOCK_WRITE
 128

	)

243 
	#LOCK_RW
 192

	)

246 #ifdeà
__USE_GNU


248 
	#DN_ACCESS
 0x00000001

	)

249 
	#DN_MODIFY
 0x00000002

	)

250 
	#DN_CREATE
 0x00000004

	)

251 
	#DN_DELETE
 0x00000008

	)

252 
	#DN_RENAME
 0x00000010

	)

253 
	#DN_ATTRIB
 0x00000020

	)

254 
	#DN_MULTISHOT
 0x80000000

	)

258 #ifdeà
__USE_GNU


260 
	e__pid_ty³


262 
	mF_OWNER_TID
 = 0,

263 
	mF_OWNER_PID
,

264 
	mF_OWNER_PGRP
,

265 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


269 
	sf_owÃr_ex


271 
__pid_ty³
 
	mty³
;

272 
__pid_t
 
	mpid
;

278 #ifdef 
__USE_BSD


279 
	#FAPPEND
 
O_APPEND


	)

280 
	#FFSYNC
 
O_FSYNC


	)

281 
	#FASYNC
 
O_ASYNC


	)

282 
	#FNONBLOCK
 
O_NONBLOCK


	)

283 
	#FNDELAY
 
O_NDELAY


	)

286 #iâdeà
__POSIX_FADV_DONTNEED


287 
	#__POSIX_FADV_DONTNEED
 4

	)

288 
	#__POSIX_FADV_NOREUSE
 5

	)

291 #ifdeà
__USE_XOPEN2K


292 
	#POSIX_FADV_NORMAL
 0

	)

293 
	#POSIX_FADV_RANDOM
 1

	)

294 
	#POSIX_FADV_SEQUENTIAL
 2

	)

295 
	#POSIX_FADV_WILLNEED
 3

	)

296 
	#POSIX_FADV_DONTNEED
 
__POSIX_FADV_DONTNEED


	)

297 
	#POSIX_FADV_NOREUSE
 
__POSIX_FADV_NOREUSE


	)

301 #ifdeà
__USE_GNU


303 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

306 
	#SYNC_FILE_RANGE_WRITE
 2

	)

309 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

314 
	#SPLICE_F_MOVE
 1

	)

315 
	#SPLICE_F_NONBLOCK
 2

	)

318 
	#SPLICE_F_MORE
 4

	)

319 
	#SPLICE_F_GIFT
 8

	)

323 
	~<lšux/çÎoc.h
>

327 
	sfže_hªdË


329 
	mhªdË_by‹s
;

330 
	mhªdË_ty³
;

332 
	mf_hªdË
[0];

336 
	#MAX_HANDLE_SZ
 128

	)

339 
	g__BEGIN_DECLS


341 #ifdeà
__USE_GNU


344 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

345 
__THROW
;

352 
	`sync_fže_¿nge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__couÁ
,

353 
__æags
);

360 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

361 
size_t
 
__couÁ
, 
__æags
);

367 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

368 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

369 
__æags
);

375 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

376 
__æags
);

382 #iâdeà
__USE_FILE_OFFSET64


383 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

385 #ifdeà
__REDIRECT


386 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

387 
__off64_t
 
__Ën
),

388 
çÎoÿ‹64
);

390 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

393 #ifdeà
__USE_LARGEFILE64


394 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

395 
__off64_t
 
__Ën
);

400 
	$Çme_to_hªdË_©
 (
__dfd
, cÚ¡ *
__Çme
,

401 
fže_hªdË
 *
__hªdË
, *
__mÁ_id
,

402 
__æags
è
__THROW
;

408 
	`Ý’_by_hªdË_©
 (
__mouÁdœfd
, 
fže_hªdË
 *
__hªdË
,

409 
__æags
);

413 
__END_DECLS


	@/usr/include/bits/libio-ldbl.h

19 #iâdeà
_IO_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

24 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
	m__–isiÚ
;

106 
__±h»ad_li¡_t
 
	m__li¡
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

109 
	#__PTHREAD_SPINS
 0, 0

	)

111 
	m__nu£rs
;

112 
__ex‹nsiÚ__
 union

116 
	m__e¥šs
;

117 
	m__–isiÚ
;

118 
	#__¥šs
 
__–isiÚ_d©a
.
__e¥šs


	)

119 
	#__–isiÚ
 
__–isiÚ_d©a
.
__–isiÚ


	)

120 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

121 } 
	m__–isiÚ_d©a
;

122 
__±h»ad_¦i¡_t
 
	m__li¡
;

125 } 
	m__d©a
;

126 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

127 
	m__®ign
;

128 } 
	t±h»ad_mu‹x_t
;

132 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

133 
	m__®ign
;

134 } 
	t±h»ad_mu‹x©Œ_t
;

143 
	m__lock
;

144 
	m__fu‹x
;

145 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

146 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

147 
__ex‹nsiÚ__
 
	m__wok’_£q
;

148 *
	m__mu‹x
;

149 
	m__nwa™”s
;

150 
	m__brßdÿ¡_£q
;

151 } 
	m__d©a
;

152 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

153 
__ex‹nsiÚ__
 
	m__®ign
;

154 } 
	t±h»ad_cÚd_t
;

158 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

159 
	m__®ign
;

160 } 
	t±h»ad_cÚd©Œ_t
;

164 
	t±h»ad_key_t
;

168 
	t±h»ad_Úû_t
;

171 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


176 #ifdeà
__x86_64__


179 
	m__lock
;

180 
	m__Ä_»ad”s
;

181 
	m__»ad”s_wakeup
;

182 
	m__wr™”_wakeup
;

183 
	m__Ä_»ad”s_queued
;

184 
	m__Ä_wr™”s_queued
;

185 
	m__wr™”
;

186 
	m__sh¬ed
;

187 
	m__·d1
;

188 
	m__·d2
;

191 
	m__æags
;

192 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

193 } 
	m__d©a
;

197 
	m__lock
;

198 
	m__Ä_»ad”s
;

199 
	m__»ad”s_wakeup
;

200 
	m__wr™”_wakeup
;

201 
	m__Ä_»ad”s_queued
;

202 
	m__Ä_wr™”s_queued
;

205 
	m__æags
;

206 
	m__sh¬ed
;

207 
	m__·d1
;

208 
	m__·d2
;

209 
	m__wr™”
;

210 } 
	m__d©a
;

212 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

213 
	m__®ign
;

214 } 
	t±h»ad_rwlock_t
;

218 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

219 
	m__®ign
;

220 } 
	t±h»ad_rwlock©Œ_t
;

224 #ifdeà
__USE_XOPEN2K


226 vÞ©ž
	t±h»ad_¥šlock_t
;

233 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

234 
	m__®ign
;

235 } 
	t±h»ad_b¬r›r_t
;

239 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

240 
	m__®ign
;

241 } 
	t±h»ad_b¬r›¿‰r_t
;

245 #iâdeà
__x86_64__


247 
	#__þ—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/stdio-lock.h

19 #iâdeà
_BITS_STDIO_LOCK_H


20 
	#_BITS_STDIO_LOCK_H
 1

	)

22 
	~<b™s/libc-lock.h
>

24 
	$__libc_lock_defše_»cursive
 (, 
_IO_lock_t
)

27 #ifdeà
	t_LIBC_LOCK_RECURSIVE_INITIALIZER


28 
	t_IO_lock_š™Ÿliz”
 
	t_LIBC_LOCK_RECURSIVE_INITIALIZER


	)

29 #–ià
	t_IO_MTSAFE_IO


30 #”rÜ 
	tlibio
 
	tÃeds
 
	t»cursive
 
	tmu‹xes
 
	t_IO_MTSAFE_IO


33 
	t_IO_lock_š™
(
	t_Çme
è
	t__libc_lock_š™_»cursive
 (_Çme)

	)

34 
	t_IO_lock_fši
(
	t_Çme
è
	t__libc_lock_fši_»cursive
 (_Çme)

	)

35 
	t_IO_lock_lock
(
	t_Çme
è
	t__libc_lock_lock_»cursive
 (_Çme)

	)

36 
	t_IO_lock_Œylock
(
	t_Çme
è
	t__libc_lock_Œylock_»cursive
 (_Çme)

	)

37 
	t_IO_lock_uÆock
(
	t_Çme
è
	t__libc_lock_uÆock_»cursive
 (_Çme)

	)

40 
	t_IO_þ—nup_»giÚ_¡¬t
(
	t_fù
, 
	t_å
) \

41 
	t__libc_þ—nup_»giÚ_¡¬t
 (((
	t_å
)->
	t_æags
 & 
	t_IO_USER_LOCK
è=ð0, 
	t_fù
, _å)

	)

42 
	t_IO_þ—nup_»giÚ_¡¬t_nßrg
(
	t_fù
) \

43 
	t__libc_þ—nup_»giÚ_¡¬t
 (1, 
	t_fù
, 
	tNULL
)

	)

44 
	t_IO_þ—nup_»giÚ_’d
(
	t_do™
) \

45 
	t__libc_þ—nup_»giÚ_’d
 (
	t_do™
)

	)

47 #ià
	tdefšed
 
	t_LIBC
 && 
	tIS_IN
 (
	tlibc
)

48 
	t_IO_acquœe_lock
(
	t_å
) \

49 
	t_IO_þ—nup_»giÚ_¡¬t
 (((*è(*)è
	t_IO_fuÆockfže
, (
	t_å
)); \

50 
	`_IO_æockfže
 (
_å
)

	)

52 
	#_IO_»Ëa£_lock
(
_å
) \

53 
	`_IO_fuÆockfže
 (
_å
); \

54 
	`_IO_þ—nup_»giÚ_’d
 (0)

	)

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtÞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡abž
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifdeà
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/ctype.h

23 #iâdef 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 
	g__BEGIN_DECLS


31 #iâdeà
_ISb™


40 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


42 
	#_ISb™
(
b™
è(1 << (b™))

	)

44 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

49 
	m_ISuµ”
 = 
_ISb™
 (0),

50 
	m_ISlow”
 = 
_ISb™
 (1),

51 
	m_IS®pha
 = 
_ISb™
 (2),

52 
	m_ISdig™
 = 
_ISb™
 (3),

53 
	m_ISxdig™
 = 
_ISb™
 (4),

54 
	m_IS¥aû
 = 
_ISb™
 (5),

55 
	m_IS´št
 = 
_ISb™
 (6),

56 
	m_ISg¿ph
 = 
_ISb™
 (7),

57 
	m_ISbÏnk
 = 
_ISb™
 (8),

58 
	m_ISúŒl
 = 
_ISb™
 (9),

59 
	m_ISpunù
 = 
_ISb™
 (10),

60 
	m_IS®num
 = 
_ISb™
 (11)

80 cÚ¡ **
	$__ùy³_b_loc
 ()

81 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

82 cÚ¡ 
__št32_t
 **
	$__ùy³_tÞow”_loc
 ()

83 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

84 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

85 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

88 #iâdeà
__ýlu¥lus


89 
	#__isùy³
(
c
, 
ty³
) \

90 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 #–ià
defšed
 
__USE_EXTERN_INLINES


92 
	#__isùy³_f
(
ty³
) \

93 
__ex‹º_šlše
 \

94 
is
##
	`ty³
 (
__c
è
__THROW
 \

96  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

97 
	}

	)
}

100 
	#__i§scii
(
c
è(((cè& ~0x7fè=ð0è

	)

101 
	#__tßscii
(
c
è((cè& 0x7fè

	)

103 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__exùy³
 (
i§Êum
);

112 
__exùy³
 (
i§Íha
);

113 
__exùy³
 (
isúŒl
);

114 
__exùy³
 (
isdig™
);

115 
__exùy³
 (
i¦ow”
);

116 
__exùy³
 (
isg¿ph
);

117 
__exùy³
 (
i¥ršt
);

118 
__exùy³
 (
i¥unù
);

119 
__exùy³
 (
is¥aû
);

120 
__exùy³
 (
isuµ”
);

121 
__exùy³
 (
isxdig™
);

125 
	$tÞow”
 (
__c
è
__THROW
;

128 
	$touµ”
 (
__c
è
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__exùy³
 (
isbÏnk
);

139 
__END_NAMESPACE_C99


142 #ifdeà
__USE_GNU


144 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

147 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


151 
	$i§scii
 (
__c
è
__THROW
;

155 
	$tßscii
 (
__c
è
__THROW
;

159 
	`__exùy³
 (
_touµ”
);

160 
	`__exùy³
 (
_tÞow”
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

165 (
__ex‹nsiÚ__
 \

166 ({ 
__»s
; \

167 ià( (
c
) > 1) \

169 ià(
	`__bužtš_cÚ¡ªt_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

175 
__»s
 = 
f
 
¬gs
; \

178 
__»s
 = (
a
)[(è(
c
)]; \

179 
__»s
; 
	}
}))

	)

181 #ià!
defšed
 
__NO_CTYPE


182 #ifdeà
__isùy³_f


183 
	$__isùy³_f
 (
®num
)

184 
	$__isùy³_f
 (
®pha
)

185 
	$__isùy³_f
 (
úŒl
)

186 
	$__isùy³_f
 (
dig™
)

187 
	$__isùy³_f
 (
low”
)

188 
	$__isùy³_f
 (
g¿ph
)

189 
	$__isùy³_f
 (
´št
)

190 
	$__isùy³_f
 (
punù
)

191 
	$__isùy³_f
 (
¥aû
)

192 
	$__isùy³_f
 (
uµ”
)

193 
	$__isùy³_f
 (
xdig™
)

194 #ifdeà
__USE_ISOC99


195 
	$__isùy³_f
 (
bÏnk
)

197 #–ià
defšed
 
__isùy³


198 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

199 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

200 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

201 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

202 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

203 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

204 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

205 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

206 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

207 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

208 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

209 #ifdeà
__USE_ISOC99


210 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

214 #ifdeà
__USE_EXTERN_INLINES


215 
__ex‹º_šlše
 

216 
	`__NTH
 (
	$tÞow”
 (
__c
))

218  
__c
 >ð-128 && __ø< 256 ? (*
	`__ùy³_tÞow”_loc
 ())[__c] : __c;

219 
	}
}

221 
__ex‹º_šlše
 

222 
__NTH
 (
	$touµ”
 (
__c
))

224  
__c
 >ð-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

225 
	}
}

228 #ià
__GNUC__
 >ð2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ýlu¥lus


229 
	#tÞow”
(
c
è
	`__tobody
 (c, 
tÞow”
, *
	`__ùy³_tÞow”_loc
 (), (c))

	)

230 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

233 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


234 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

235 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

237 
	#_tÞow”
(
c
è((è(*
	`__ùy³_tÞow”_loc
 ())[(è(c)])

	)

238 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

244 #ifdeà
__USE_XOPEN2K8


258 
	~<xloÿË.h
>

262 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

263 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

265 
	#__exùy³_l
(
Çme
) \

266 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

272 
__exùy³_l
 (
i§Êum_l
);

273 
__exùy³_l
 (
i§Íha_l
);

274 
__exùy³_l
 (
isúŒl_l
);

275 
__exùy³_l
 (
isdig™_l
);

276 
__exùy³_l
 (
i¦ow”_l
);

277 
__exùy³_l
 (
isg¿ph_l
);

278 
__exùy³_l
 (
i¥ršt_l
);

279 
__exùy³_l
 (
i¥unù_l
);

280 
__exùy³_l
 (
is¥aû_l
);

281 
__exùy³_l
 (
isuµ”_l
);

282 
__exùy³_l
 (
isxdig™_l
);

284 
__exùy³_l
 (
isbÏnk_l
);

288 
	$__tÞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

289 
	$tÞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

293 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

295 #ià
__GNUC__
 >ð2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ýlu¥lus


296 
	#__tÞow”_l
(
c
, 
loÿË
) \

297 
	`__tobody
 (
c
, 
__tÞow”_l
, (
loÿË
)->
__ùy³_tÞow”
, (c,†oÿË))

	)

298 
	#__touµ”_l
(
c
, 
loÿË
) \

299 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

300 
	#tÞow”_l
(
c
, 
loÿË
è
	`__tÞow”_l
 ((c), (loÿË))

	)

301 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

305 #iâdeà
__NO_CTYPE


306 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

307 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

308 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

309 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

310 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

311 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

312 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

313 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

314 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

315 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

316 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

318 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

320 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


321 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

322 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

325 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

326 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

327 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

328 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

329 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

330 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

331 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

332 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

333 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

334 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

335 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

337 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

339 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


340 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

341 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htÞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htÞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 #ià
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htÞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

81 
	#htobe16
(
x
è(x)

	)

82 
	#htÞe16
(
x
è
	`__bsw­_16
 (x)

	)

83 
	#be16toh
(
x
è(x)

	)

84 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

86 
	#htobe32
(
x
è(x)

	)

87 
	#htÞe32
(
x
è
	`__bsw­_32
 (x)

	)

88 
	#be32toh
(
x
è(x)

	)

89 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

91 #ià
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
è(x)

	)

93 
	#htÞe64
(
x
è
	`__bsw­_64
 (x)

	)

94 
	#be64toh
(
x
è(x)

	)

95 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	#__STDC_IEC_559__
 1

	)

31 
	#__STDC_IEC_559_COMPLEX__
 1

	)

35 
	#__STDC_ISO_10646__
 201103L

	)

38 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

19 #iâdef 
_SYS_CDEFS_H


20 
	#_SYS_CDEFS_H
 1

	)

23 #iâdeà
_FEATURES_H


24 
	~<ã©u»s.h
>

30 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


35 #undeà
__P


36 #undeà
__PMT


38 #ifdeà
__GNUC__


42 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


43 
	#__LEAF
 , 
__Ëaf__


	)

44 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

46 
	#__LEAF


	)

47 
	#__LEAF_ATTR


	)

55 #ià!
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

56 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

57 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

58 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

60 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

65 
	#__THROW


	)

66 
	#__THROWNL


	)

67 
	#__NTH
(
fù
è
	)
fct

73 
	#__šlše


	)

75 
	#__THROW


	)

76 
	#__THROWNL


	)

77 
	#__NTH
(
fù
è
	)
fct

83 
	#__P
(
¬gs
è
	)
args

84 
	#__PMT
(
¬gs
è
	)
args

89 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

90 
	#__STRING
(
x
è#x

	)

93 
	#__±r_t
 *

	)

94 
	#__lÚg_doubË_t
 

	)

98 #ifdef 
__ýlu¥lus


99 
	#__BEGIN_DECLS
 "C" {

	)

100 
	#__END_DECLS
 }

	)

102 
	#__BEGIN_DECLS


	)

103 
	#__END_DECLS


	)

112 #ià
defšed
 
__ýlu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


113 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

114 
	#__END_NAMESPACE_STD
 }

	)

115 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

116 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

117 
	#__END_NAMESPACE_C99
 }

	)

118 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

123 
	#__BEGIN_NAMESPACE_STD


	)

124 
	#__END_NAMESPACE_STD


	)

125 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

126 
	#__BEGIN_NAMESPACE_C99


	)

127 
	#__END_NAMESPACE_C99


	)

128 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

133 #iâdeà
__BOUNDED_POINTERS__


134 
	#__bounded


	)

135 
	#__unbounded


	)

136 
	#__±rv®ue


	)

141 
	#__bos
(
±r
è
	`__bužtš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

142 
	#__bos0
(
±r
è
	`__bužtš_objeù_size
 (±r, 0)

	)

144 #ià
__GNUC_PREREQ
 (4,3)

145 
	#__w¬ndeþ
(
Çme
, 
msg
) \

146 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

147 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

148 
	#__”rÜdeþ
(
Çme
, 
msg
) \

149 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

151 
	#__w¬ndeþ
(
Çme
, 
msg
è
	`Çme
 ()

	)

152 
	#__w¬Ç‰r
(
msg
)

	)

153 
	#__”rÜdeþ
(
Çme
, 
msg
è
	`Çme
 ()

	)

157 #ià
__GNUC_PREREQ
 (2,97)

159 
	#__æex¬r
 []

	)

161 #ifdeà
__GNUC__


162 
	#__æex¬r
 [0]

	)

164 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

165 
	#__æex¬r
 []

	)

168 
	#__æex¬r
 [1]

	)

184 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

186 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

187 #ifdeà
__ýlu¥lus


188 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

189 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

190 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

191 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

193 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

194 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

195 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

196 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

198 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

199 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

212 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

213 
	#__©Œibu‹__
(
xyz
è

	)

219 #ià
__GNUC_PREREQ
 (2,96)

220 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

222 
	#__©Œibu‹_m®loc__


	)

228 #ià
__GNUC_PREREQ
 (2,96)

229 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

231 
	#__©Œibu‹_pu»__


	)

235 #ià
__GNUC_PREREQ
 (2,5)

236 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

238 
	#__©Œibu‹_cÚ¡__


	)

244 #ià
__GNUC_PREREQ
 (3,1)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

246 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

248 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

249 
	#__©Œibu‹_nošlše__


	)

253 #ià
__GNUC_PREREQ
 (3,2)

254 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

256 
	#__©Œibu‹_d•»ÿ‹d__


	)

265 #ià
__GNUC_PREREQ
 (2,8)

266 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

268 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

275 #ià
__GNUC_PREREQ
 (2,97)

276 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

277 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

279 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

284 #ià
__GNUC_PREREQ
 (3,3)

285 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

287 
	#__nÚnuÎ
(
·¿ms
)

	)

292 #ià
__GNUC_PREREQ
 (3,4)

293 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

294 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

295 #ià
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

299 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

301 #iâdeà
__wur


302 
	#__wur


	)

306 #ià
__GNUC_PREREQ
 (3,2)

307 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

309 
	#__®ways_šlše
 
__šlše


	)

314 #ià
__GNUC_PREREQ
 (4,3)

315 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

317 
	#__©Œibu‹_¬tificŸl__


	)

329 #ià(!
defšed
 
__ýlu¥lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
defšed
 
__þªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

331 || 
defšed
 
__GNUC_GNU_INLINE__
)))

332 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ýlu¥lus


333 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

334 
	#__ex‹º_®ways_šlše
 \

335 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

337 
	#__ex‹º_šlše
 
__šlše


	)

338 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

342 #ifdeà
__ex‹º_®ways_šlše


343 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

348 #ià
__GNUC_PREREQ
 (4,3)

349 
	#__va_¬g_·ck
(è
	`__bužtš_va_¬g_·ck
 ()

	)

350 
	#__va_¬g_·ck_Ën
(è
	`__bužtš_va_¬g_·ck_Ën
 ()

	)

357 #ià!
__GNUC_PREREQ
 (2,8)

358 
	#__ex‹nsiÚ__


	)

362 #ià!
__GNUC_PREREQ
 (2,92)

363 
	#__»¡riù


	)

369 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


370 
	#__»¡riù_¬r
 
__»¡riù


	)

372 #ifdeà
__GNUC__


373 
	#__»¡riù_¬r


	)

375 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__»¡riù_¬r
 
»¡riù


	)

379 
	#__»¡riù_¬r


	)

384 #ià
__GNUC__
 >= 3

385 
	#__glibc_uÆik–y
(
cÚd
è
	`__bužtš_ex³ù
((cÚd), 0)

	)

386 
	#__glibc_lik–y
(
cÚd
è
	`__bužtš_ex³ù
((cÚd), 1)

	)

388 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

389 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

392 
	~<b™s/wÜdsize.h
>

394 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


395 
	#__LDBL_COMPAT
 1

	)

396 #ifdeà
__REDIRECT


397 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

398 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

399 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

400 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

401 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

402 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

403 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

404 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

405 
	#__LDBL_REDIR_DECL
(
Çme
) \

406 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

407 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

408 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

409 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

410 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

413 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


414 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

415 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

416 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

417 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

418 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

419 #ifdeà
__REDIRECT


420 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

421 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

422 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

20 #iâdeà
_SYS_SYSMACROS_H


21 
	#_SYS_SYSMACROS_H
 1

	)

23 
	~<ã©u»s.h
>

28 #ifdeà
__GLIBC_HAVE_LONG_LONG


29 
__BEGIN_DECLS


31 
__ex‹nsiÚ__


32 
	$gnu_dev_majÜ
 (
__dev
)

33 
__THROW
 
__©Œibu‹_cÚ¡__
;

34 
__ex‹nsiÚ__


35 
	$gnu_dev_mšÜ
 (
__dev
)

36 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 
__ex‹nsiÚ__


38 
	$gnu_dev_makedev
 (
__majÜ
,

39 
__mšÜ
)

40 
__THROW
 
__©Œibu‹_cÚ¡__
;

42 #ià
defšed
 
__GNUC__
 && __GNUC__ >ð2 && defšed 
__USE_EXTERN_INLINES


43 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

44 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

46  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

47 
	}
}

49 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

50 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

52  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

53 
	}
}

55 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

56 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

58  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

59 | (((è(
__mšÜ
 & ~0xff)) << 12)

60 | (((è(
__majÜ
 & ~0xfff)) << 32));

61 
	}
}

63 
	g__END_DECLS


66 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

67 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

68 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__bužtš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ð64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__bužtš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__bužtš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__bužtš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__bužtš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__bužtš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

137 #–ià
__GLIBC_HAVE_LONG_LONG


138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libc-lock.h

21 #iâdeà
_BITS_LIBC_LOCK_H


22 
	#_BITS_LIBC_LOCK_H
 1

	)

24 
	~<±h»ad.h
>

27 #ifdeà
_IO_MTSAFE_IO


28 
±h»ad_mu‹x_t
 
	t__libc_lock_t
;

29 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

30 #ifdeà
__USE_UNIX98


31 
±h»ad_rwlock_t
 
	t__libc_rwlock_t
;

33 
__libc_rwlock_Ýaque__
 
	t__libc_rwlock_t
;

35 
__libc_lock_»cursive_t
 
	t__¹ld_lock_»cursive_t
;

37 
__libc_lock_Ýaque__
 
	t__libc_lock_t
;

38 
__libc_lock_»cursive_Ýaque__
 
	t__libc_lock_»cursive_t
;

39 
__libc_rwlock_Ýaque__
 
	t__libc_rwlock_t
;

43 
±h»ad_key_t
 
	t__libc_key_t
;

52 
	#__libc_lock_defše
(
CLASS
,
NAME
) \

53 
CLASS
 
__libc_lock_t
 
NAME
;

	)

54 
	#__libc_rwlock_defše
(
CLASS
,
NAME
) \

55 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

56 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

57 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

58 
	#__¹ld_lock_defše_»cursive
(
CLASS
,
NAME
) \

59 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
;

	)

70 #ià
__LT_SPINLOCK_INIT
 == 0

71 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

72 
CLASS
 
__libc_lock_t
 
NAME
;

	)

74 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

75 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

78 
	#__libc_rwlock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

79 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

83 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

84 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

85 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

86 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

88 
	#__¹ld_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

89 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

90 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

91 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

93 #ià
defšed
 
__PIC__


94 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

95 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
FUNC
è*
_â
 = (FUNC); \

96 
_â
 !ð
NULL
 ? (*_âè
ARGS
 : 
ELSE
; }))

	)

98 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

99 (
FUNC
 !ð
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

101 
	#__libc_maybe_ÿÎ2
(
FUNC
, 
ARGS
, 
ELSE
è
	`__libc_maybe_ÿÎ
 (
__
##FUNC, ARGS, ELSE)

	)

105 
	#__libc_lock_š™
(
NAME
) \

106 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_š™
, (&(
NAME
), 
NULL
), 0))

	)

107 
	#__libc_rwlock_š™
(
NAME
) \

108 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_š™
, (&(
NAME
), 
NULL
), 0));

	)

111 
	#__libc_lock_š™_»cursive
(
NAME
) \

113 ià(
__±h»ad_mu‹x_š™
 !ð
NULL
) \

115 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

116 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

117 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

118 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

119 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

121 } 0);

	)

122 
	#__¹ld_lock_š™_»cursive
(
NAME
) \

123 
	`__libc_lock_š™_»cursive
 (
NAME
)

	)

128 
	#__libc_lock_fši
(
NAME
) \

129 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0));

	)

130 
	#__libc_rwlock_fši
(
NAME
) \

131 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_de¡roy
, (&(
NAME
)), 0));

	)

134 
	#__libc_lock_fši_»cursive
(
NAME
è
	`__libc_lock_fši
 ((NAME).
mu‹x
)

	)

135 
	#__¹ld_lock_fši_»cursive
(
NAME
è
	`__libc_lock_fši_»cursive
 (NAME)

	)

138 
	#__libc_lock_lock
(
NAME
) \

139 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_lock
, (&(
NAME
)), 0));

	)

140 
	#__libc_rwlock_rdlock
(
NAME
) \

141 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_rdlock
, (&(
NAME
)), 0));

	)

142 
	#__libc_rwlock_w¾ock
(
NAME
) \

143 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_w¾ock
, (&(
NAME
)), 0));

	)

146 
	#__libc_lock_lock_»cursive
(
NAME
è
	`__libc_lock_lock
 ((NAME).
mu‹x
)

	)

149 
	#__libc_lock_Œylock
(
NAME
) \

150 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0))

	)

151 
	#__libc_rwlock_Œyrdlock
(
NAME
) \

152 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyrdlock
, (&(
NAME
)), 0))

	)

153 
	#__libc_rwlock_Œyw¾ock
(
NAME
) \

154 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyw¾ock
, (&(
NAME
)), 0))

	)

157 
	#__libc_lock_Œylock_»cursive
(
NAME
è
	`__libc_lock_Œylock
 ((NAME).
mu‹x
)

	)

158 
	#__¹ld_lock_Œylock_»cursive
(
NAME
) \

159 
	`__libc_lock_Œylock_»cursive
 (
NAME
)

	)

162 
	#__libc_lock_uÆock
(
NAME
) \

163 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0));

	)

164 
	#__libc_rwlock_uÆock
(
NAME
) \

165 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_uÆock
, (&(
NAME
)), 0));

	)

168 
	#__libc_lock_uÆock_»cursive
(
NAME
è
	`__libc_lock_uÆock
 ((NAME).
mu‹x
)

	)

170 
	#__¹ld_lock_lock_»cursive
(
NAME
è
	`__libc_lock_lock_»cursive
 (NAME)

	)

171 
	#__¹ld_lock_uÆock_»cursive
(
NAME
è
	`__libc_lock_uÆock_»cursive
 (NAME)

	)

174 #ià
PTHREAD_ONCE_INIT
 == 0

177 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

178 
CLASS
 
±h»ad_Úû_t
 
NAME


	)

180 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

181 
CLASS
 
±h»ad_Úû_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

185 
	#__libc_Úû
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

187 ià(
__±h»ad_Úû
 !ð
NULL
) \

188 
	`__±h»ad_Úû
 (&(
ONCE_CONTROL
), (
INIT_FUNCTION
)); \

189 ià((
ONCE_CONTROL
è=ð
PTHREAD_ONCE_INIT
) { \

190 
	`INIT_FUNCTION
 (); \

191 (
ONCE_CONTROL
) = 2; \

193 } 0)

	)

197 
	#__libc_þ—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

198 { 
_±h»ad_þ—nup_bufãr
 
_bufãr
; \

199 
_avaž
 = (
DOIT
è&& 
_±h»ad_þ—nup_push_deãr
 !ð
NULL
; \

200 ià(
_avaž
) { \

201 
	`_±h»ad_þ—nup_push_deãr
 (&
_bufãr
, (
FCT
), (
ARG
)); \

202 }

	)

205 
	#__libc_þ—nup_»giÚ_’d
(
DOIT
) \

206 ià(
_avaž
) { \

207 
	`_±h»ad_þ—nup_pÝ_»¡Üe
 (&
_bufãr
, (
DOIT
)); \

209 }

	)

212 
	#__libc_þ—nup_’d
(
DOIT
) \

213 ià(
_avaž
) { \

214 
	`_±h»ad_þ—nup_pÝ_»¡Üe
 (&
_bufãr
, (
DOIT
)); \

215 }

	)

217 
	#__libc_þ—nup_push
(
fù
, 
¬g
) \

218 { 
_±h»ad_þ—nup_bufãr
 
_bufãr
; \

219 
	`__libc_maybe_ÿÎ
 (
_±h»ad_þ—nup_push
, (&
_bufãr
, (
fù
), (
¬g
)), 0)

	)

221 
	#__libc_þ—nup_pÝ
(
execu‹
) \

222 
	`__libc_maybe_ÿÎ
 (
_±h»ad_þ—nup_pÝ
, (&
_bufãr
, 
execu‹
), 0); \

223 }

	)

226 
	#__libc_key_ü—‹
(
KEY
, 
DESTRUCTOR
) \

227 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_key_ü—‹
, (
KEY
, 
DESTRUCTOR
), 1))

	)

230 
	#__libc_g‘¥ecific
(
KEY
) \

231 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_g‘¥ecific
, (
KEY
), 
NULL
))

	)

234 
	#__libc_£t¥ecific
(
KEY
, 
VALUE
) \

235 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_£t¥ecific
, (
KEY
, 
VALUE
), 0))

	)

239 
	#__libc_©fÜk
(
PREPARE
, 
PARENT
, 
CHILD
) \

240 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_©fÜk
, (
PREPARE
, 
PARENT
, 
CHILD
), 0))

	)

242 
__BEGIN_DECLS


244 
_±h»ad_þ—nup_push_deãr
 (
_±h»ad_þ—nup_bufãr
 *
__bufãr
,

245 (*
__routše
) (*),

246 *
__¬g
è
__THROW
;

248 
	$_±h»ad_þ—nup_pÝ_»¡Üe
 (
_±h»ad_þ—nup_bufãr
 *
__bufãr
,

249 
__execu‹
è
__THROW
;

255 
	`__±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

256 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x_©Œ
);

258 
	`__±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

260 
	`__±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

262 
	`__±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

264 
	`__±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

266 
	`__±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

268 
	`__±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

270 
	`__±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

271 
__kšd
);

273 #ifdeà
__USE_UNIX98


274 
	`__±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__rwlock
,

275 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__©Œ
);

277 
	`__±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
);

279 
	`__±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

281 
	`__±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

283 
	`__±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

285 
	`__±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

287 
	`__±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
);

290 
	`__±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

291 (*
__de¡r_funùiÚ
) (*));

293 
	`__±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

294 
__cÚ¡
 *
__poš‹r
);

296 *
	`__±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
);

298 
	`__±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒÞ
,

299 (*
__š™_routše
) ());

301 
	`__±h»ad_©fÜk
 ((*
__´•¬e
) (),

302 (*
__·»Á
) (),

303 (*
__chžd
) ());

305 
__END_DECLS


309 #iâdeà
__NO_WEAK_PTHREAD_ALIASES


310 #´agm¨
w—k
 
__±h»ad_mu‹x_š™


311 #´agm¨
w—k
 
__±h»ad_mu‹x_de¡roy


312 #´agm¨
w—k
 
__±h»ad_mu‹x_lock


313 #´agm¨
w—k
 
__±h»ad_mu‹x_Œylock


314 #´agm¨
w—k
 
__±h»ad_mu‹x_uÆock


315 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_š™


316 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_de¡roy


317 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_£‰y³


318 #´agm¨
w—k
 
__±h»ad_rwlock_de¡roy


319 #´agm¨
w—k
 
__±h»ad_rwlock_rdlock


320 #´agm¨
w—k
 
__±h»ad_rwlock_Œyrdlock


321 #´agm¨
w—k
 
__±h»ad_rwlock_w¾ock


322 #´agm¨
w—k
 
__±h»ad_rwlock_Œyw¾ock


323 #´agm¨
w—k
 
__±h»ad_rwlock_uÆock


324 #´agm¨
w—k
 
__±h»ad_key_ü—‹


325 #´agm¨
w—k
 
__±h»ad_£t¥ecific


326 #´agm¨
w—k
 
__±h»ad_g‘¥ecific


327 #´agm¨
w—k
 
__±h»ad_Úû


328 #´agm¨
w—k
 
__±h»ad_š™Ÿlize


329 #´agm¨
w—k
 
__±h»ad_©fÜk


330 #´agm¨
w—k
 
_±h»ad_þ—nup_push_deãr


331 #´agm¨
w—k
 
_±h»ad_þ—nup_pÝ_»¡Üe


332 #´agm¨
w—k
 
_±h»ad_þ—nup_push


333 #´agm¨
w—k
 
_±h»ad_þ—nup_pÝ


338 
	#__libc_mu‹x_uÆock
 
__±h»ad_mu‹x_uÆock


	)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vÞ©že__
 ("þd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ð
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ð~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ð0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__bužtš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ð
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

20 #iâdef 
_SIGSET_H_ty³s


21 
	#_SIGSET_H_ty³s
 1

	)

23 
	t__sig_©omic_t
;

27 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

30 
	m__v®
[
_SIGSET_NWORDS
];

31 } 
	t__sig£t_t
;

42 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


43 
	#_SIGSET_H_âs
 1

	)

45 #iâdeà
_EXTERN_INLINE


46 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

50 
	#__sigmask
(
sig
) \

51 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

54 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

56 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

57 
	#__sigem±y£t
(
£t
) \

58 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

59 
sig£t_t
 *
__£t
 = (
£t
); \

60 --
__út
 >ð0è
__£t
->
__v®
[__cnt] = 0; \

61 0; }))

	)

62 
	#__sigfžl£t
(
£t
) \

63 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

64 
sig£t_t
 *
__£t
 = (
£t
); \

65 --
__út
 >ð0è
__£t
->
__v®
[__cnt] = ~0UL; \

66 0; }))

	)

68 #ifdeà
__USE_GNU


72 
	#__sigi£m±y£t
(
£t
) \

73 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

74 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

75 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

76 !
__»t
 && --
__út
 >= 0) \

77 
__»t
 = 
__£t
->
__v®
[
__út
]; \

78 
__»t
 =ð0; }))

	)

79 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

80 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

81 
sig£t_t
 *
__de¡
 = (
de¡
); \

82 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

83 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

84 --
__út
 >= 0) \

85 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

86 & 
__right
->
__v®
[
__út
]); \

87 0; }))

	)

88 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

89 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

90 
sig£t_t
 *
__de¡
 = (
de¡
); \

91 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

92 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

93 --
__út
 >= 0) \

94 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

95 | 
__right
->
__v®
[
__út
]); \

96 0; }))

	)

103 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

104 
__sigadd£t
 (
__sig£t_t
 *, );

105 
__sigd–£t
 (
__sig£t_t
 *, );

107 #ifdeà
__USE_EXTERN_INLINES


108 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

109 
_EXTERN_INLINE
 \

110 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

112 
__mask
 = 
	`__sigmask
 (
__sig
); \

113 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

114  
BODY
; \

115 }

	)

117 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

118 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ð
__mask
), 0), )

119 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ð~
__mask
), 0), )

121 #undeà
__SIGSETFN


	@/usr/include/bits/uio.h

18 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_UIO_H


23 
	#_BITS_UIO_H
 1

	)

25 
	~<sys/ty³s.h
>

39 
	#UIO_MAXIOV
 1024

	)

43 
	siovec


45 *
	miov_ba£
;

46 
size_t
 
	miov_Ën
;

52 #ifdeà
__USE_GNU


53 #ià
defšed
 
_SYS_UIO_H
 && !defšed 
_BITS_UIO_H_FOR_SYS_UIO_H


54 
	#_BITS_UIO_H_FOR_SYS_UIO_H
 1

	)

56 
__BEGIN_DECLS


59 
ssize_t
 
	$´oûss_vm_»adv
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

60 
__liovút
,

61 cÚ¡ 
iovec
 *
__rvec
,

62 
__riovút
,

63 
__æags
)

64 
__THROW
;

67 
ssize_t
 
	$´oûss_vm_wr™ev
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

68 
__liovút
,

69 cÚ¡ 
iovec
 *
__rvec
,

70 
__riovút
,

71 
__æags
)

72 
__THROW
;

74 
__END_DECLS


	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_ç‰ach


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_fd‘ach


	)

14 
	#__¡ub_g‰y


	)

15 
	#__¡ub_lchmod


	)

16 
	#__¡ub_»voke


	)

17 
	#__¡ub_£Žogš


	)

18 
	#__¡ub_sig»tuº


	)

19 
	#__¡ub_s¡k


	)

20 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£Žogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/linux/falloc.h

1 #iâdeà
_FALLOC_H_


2 
	#_FALLOC_H_


	)

4 
	#FALLOC_FL_KEEP_SIZE
 0x01

	)

5 
	#FALLOC_FL_PUNCH_HOLE
 0x02

	)

6 
	#FALLOC_FL_NO_HIDE_STALE
 0x04

	)

28 
	#FALLOC_FL_COLLAPSE_RANGE
 0x08

	)

42 
	#FALLOC_FL_ZERO_RANGE
 0x10

	)

59 
	#FALLOC_FL_INSERT_RANGE
 0x20

	)

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ýlu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscÞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscÞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemýy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempýy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__bužtš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__bužtš_cÚ¡ªt_p
 (
__wc
è&& __wø>ð
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ð
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Þd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Þ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Þl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Þ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Þl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Þd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wýýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wýnýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$Ý’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__bužtš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/wchar-ldbl.h

19 #iâdeà
_WCHAR_H


23 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


24 
__BEGIN_NAMESPACE_C99


25 
__LDBL_REDIR_DECL
 (
fw´štf
);

26 
__LDBL_REDIR_DECL
 (
w´štf
);

27 
__LDBL_REDIR_DECL
 (
sw´štf
);

28 
__LDBL_REDIR_DECL
 (
vfw´štf
);

29 
__LDBL_REDIR_DECL
 (
vw´štf
);

30 
__LDBL_REDIR_DECL
 (
vsw´štf
);

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
	g__REDIRECT
 \

33 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

38 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

39 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

42 
__END_NAMESPACE_C99


45 #ifdeà
__USE_ISOC99


46 
__BEGIN_NAMESPACE_C99


47 
	`__LDBL_REDIR1_DECL
 (
wc¡Þd
, 
wc¡od
);

48 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

49 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

50 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

51 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

54 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

55 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

58 
__END_NAMESPACE_C99


61 #ifdeà
__USE_GNU


62 
	`__LDBL_REDIR1_DECL
 (
wc¡Þd_l
, 
wc¡od_l
);

65 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


66 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

67 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

68 #ià
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar2.h

19 #iâdeà
_WCHAR_H


24 
wch¬_t
 *
	$__wmemýy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

25 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

26 
size_t
 
__ns1
è
__THROW
;

27 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemýy_®Ÿs
,

28 (
wch¬_t
 *
__»¡riù
 
__s1
,

29 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

30 
wmemýy
);

31 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemýy_chk_w¬n
,

32 (
wch¬_t
 *
__»¡riù
 
__s1
,

33 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

34 
size_t
 
__ns1
), 
__wmemýy_chk
)

35 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

38 
__fÜtify_funùiÚ
 
wch¬_t
 *

39 
	`__NTH
 (
	$wmemýy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

40 
size_t
 
__n
))

42 ià(
	`__bos0
 (
__s1
è!ð(
size_t
) -1)

44 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

45  
	`__wmemýy_chk
 (
__s1
, 
__s2
, 
__n
,

46 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

48 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

49  
	`__wmemýy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

50 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

52  
	`__wmemýy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

53 
	}
}

56 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

57 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

58 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

59 cÚ¡ 
wch¬_t
 *
__s2
,

60 
size_t
 
__n
), 
wmemmove
);

61 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

62 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

63 
size_t
 
__n
, size_ˆ
__ns1
), 
__wmemmove_chk
)

64 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

67 
__fÜtify_funùiÚ
 
wch¬_t
 *

68 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
))

70 ià(
	`__bos0
 (
__s1
è!ð(
size_t
) -1)

72 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

73  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

74 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

76 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

77  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

78 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

80  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

81 
	}
}

84 #ifdeà
__USE_GNU


85 
wch¬_t
 *
	$__wmempýy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

86 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

87 
size_t
 
__ns1
è
__THROW
;

88 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempýy_®Ÿs
,

89 (
wch¬_t
 *
__»¡riù
 
__s1
,

90 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
,

91 
size_t
 
__n
), 
wmempýy
);

92 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempýy_chk_w¬n
,

93 (
wch¬_t
 *
__»¡riù
 
__s1
,

94 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

95 
size_t
 
__ns1
), 
__wmempýy_chk
)

96 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

99 
__fÜtify_funùiÚ
 
wch¬_t
 *

100 
	`__NTH
 (
	$wmempýy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

101 
size_t
 
__n
))

103 ià(
	`__bos0
 (
__s1
è!ð(
size_t
) -1)

105 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

106  
	`__wmempýy_chk
 (
__s1
, 
__s2
, 
__n
,

107 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

109 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

110  
	`__wmempýy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

111 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

113  
	`__wmempýy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

114 
	}
}

118 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

119 
size_t
 
__ns
è
__THROW
;

120 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

121 
size_t
 
__n
), 
wmem£t
);

122 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

123 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

124 
size_t
 
__ns
), 
__wmem£t_chk
)

125 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

128 
__fÜtify_funùiÚ
 
wch¬_t
 *

129 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

131 ià(
	`__bos0
 (
__s
è!ð(
size_t
) -1)

133 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

134  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

136 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

137  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

138 
	`__bos0
 (
__s
è/  (
wch¬_t
));

140  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

141 
	}
}

144 
wch¬_t
 *
	$__wcsýy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

146 
size_t
 
__n
è
__THROW
;

147 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsýy_®Ÿs
,

148 (
wch¬_t
 *
__»¡riù
 
__de¡
,

149 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsýy
);

151 
__fÜtify_funùiÚ
 
wch¬_t
 *

152 
	`__NTH
 (
	$wcsýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

154 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

155  
	`__wcsýy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

156  
	`__wcsýy_®Ÿs
 (
__de¡
, 
__¤c
);

157 
	}
}

160 
wch¬_t
 *
	$__wýýy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

161 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

162 
size_t
 
__de¡Ën
è
__THROW
;

163 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wýýy_®Ÿs
,

164 (
wch¬_t
 *
__»¡riù
 
__de¡
,

165 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wýýy
);

167 
__fÜtify_funùiÚ
 
wch¬_t
 *

168 
	`__NTH
 (
	$wýýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

170 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

171  
	`__wýýy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

172  
	`__wýýy_®Ÿs
 (
__de¡
, 
__¤c
);

173 
	}
}

176 
wch¬_t
 *
	$__wc¢ýy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

177 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

178 
size_t
 
__de¡Ën
è
__THROW
;

179 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ýy_®Ÿs
,

180 (
wch¬_t
 *
__»¡riù
 
__de¡
,

181 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

182 
size_t
 
__n
), 
wc¢ýy
);

183 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ýy_chk_w¬n
,

184 (
wch¬_t
 *
__»¡riù
 
__de¡
,

185 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

186 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ýy_chk
)

187 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

190 
__fÜtify_funùiÚ
 
wch¬_t
 *

191 
	`__NTH
 (
	$wc¢ýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

192 
size_t
 
__n
))

194 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

196 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

197  
	`__wc¢ýy_chk
 (
__de¡
, 
__¤c
, 
__n
,

198 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

199 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

200  
	`__wc¢ýy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

201 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

203  
	`__wc¢ýy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

204 
	}
}

207 
wch¬_t
 *
	$__wýnýy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

208 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

209 
size_t
 
__de¡Ën
è
__THROW
;

210 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wýnýy_®Ÿs
,

211 (
wch¬_t
 *
__»¡riù
 
__de¡
,

212 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

213 
size_t
 
__n
), 
wýnýy
);

214 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wýnýy_chk_w¬n
,

215 (
wch¬_t
 *
__»¡riù
 
__de¡
,

216 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

217 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wýnýy_chk
)

218 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

221 
__fÜtify_funùiÚ
 
wch¬_t
 *

222 
	`__NTH
 (
	$wýnýy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

223 
size_t
 
__n
))

225 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

227 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
))

228  
	`__wýnýy_chk
 (
__de¡
, 
__¤c
, 
__n
,

229 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

230 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

231  
	`__wýnýy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

232 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

234  
	`__wýnýy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

235 
	}
}

238 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

239 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

240 
size_t
 
__de¡Ën
è
__THROW
;

241 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

242 (
wch¬_t
 *
__»¡riù
 
__de¡
,

243 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

245 
__fÜtify_funùiÚ
 
wch¬_t
 *

246 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

248 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

249  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

250  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

251 
	}
}

254 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

255 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

256 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

257 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

258 (
wch¬_t
 *
__»¡riù
 
__de¡
,

259 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

260 
size_t
 
__n
), 
wc¢ÿt
);

262 
__fÜtify_funùiÚ
 
wch¬_t
 *

263 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

264 
size_t
 
__n
))

266 ià(
	`__bos
 (
__de¡
è!ð(
size_t
) -1)

267  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

268 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

269  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

270 
	}
}

273 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

274 
__æag
, 
size_t
 
__s_Ën
,

275 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

276 
__THROW
 ;

278 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

279 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

280 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

281 
sw´štf
);

283 #ifdeà
__va_¬g_·ck


284 
__fÜtify_funùiÚ
 

285 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

286 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

288 ià(
	`__bos
 (
__s
è!ð(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

289  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

290 
	`__bos
 (
__s
è/  (
wch¬_t
),

291 
__fmt
, 
	`__va_¬g_·ck
 ());

292  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

293 
	}
}

294 #–ià!
defšed
 
__ýlu¥lus


296 
	#sw´štf
(
s
, 
n
, ...) \

297 (
	`__bos
 (
s
è!ð(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

298 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

299 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

300 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

303 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

304 
__æag
, 
size_t
 
__s_Ën
,

305 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

306 
__gnuc_va_li¡
 
__¬g
)

307 
__THROW
 ;

309 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

310 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

311 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
,

312 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

314 
__fÜtify_funùiÚ
 

315 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

316 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

318 ià(
	`__bos
 (
__s
è!ð(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

319  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

320 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

321  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

322 
	}
}

325 #ià
__USE_FORTIFY_LEVEL
 > 1

327 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

328 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

329 
__w´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

331 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

332 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

333 
__gnuc_va_li¡
 
__­
);

334 
__vw´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

335 
__gnuc_va_li¡
 
__­
);

337 #ifdeà
__va_¬g_·ck


338 
__fÜtify_funùiÚ
 

339 
	$w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

341  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

342 
	}
}

344 
__fÜtify_funùiÚ
 

345 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ 
wch¬_t
 *__»¡riù 
__fmt
, ...)

347  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

348 
	`__va_¬g_·ck
 ());

349 
	}
}

350 #–ià!
defšed
 
__ýlu¥lus


351 
	#w´štf
(...) \

352 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

353 
	#fw´štf
(
¡»am
, ...) \

354 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

357 
__fÜtify_funùiÚ
 

358 
	$vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

360  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

361 
	}
}

363 
__fÜtify_funùiÚ
 

364 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

365 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

367  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

368 
	}
}

372 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

373 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

374 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

375 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

376 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

377 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

378 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

379 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

380 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

383 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

384 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

386 ià(
	`__bos
 (
__s
è!ð(
size_t
) -1)

388 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

389  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

390 
__n
, 
__¡»am
);

392 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

393  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

394 
__n
, 
__¡»am
);

396  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

397 
	}
}

399 #ifdeà
__USE_GNU


400 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

401 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

402 
__wur
;

403 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

404 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

405 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

406 
__wur
;

407 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

408 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

409 
__FILE
 *
__»¡riù
 
__¡»am
),

410 
__fg‘ws_uÆocked_chk
)

411 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

414 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

415 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

417 ià(
	`__bos
 (
__s
è!ð(
size_t
) -1)

419 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

420  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

421 
__n
, 
__¡»am
);

423 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

424  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

425 
__n
, 
__¡»am
);

427  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

428 
	}
}

432 
size_t
 
	$__wütomb_chk
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

433 
mb¡©e_t
 *
__»¡riù
 
__p
,

434 
size_t
 
__buæ’
è
__THROW
 
__wur
;

435 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

436 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

437 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

439 
__fÜtify_funùiÚ
 
__wur
 
size_t


440 
	`__NTH
 (
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

441 
mb¡©e_t
 *
__»¡riù
 
__ps
))

446 
	#__WCHAR_MB_LEN_MAX
 16

	)

447 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ð
__WCHAR_MB_LEN_MAX


450 ià(
	`__bos
 (
__s
è!ð(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

451  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

452  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

453 
	}
}

456 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

457 cÚ¡ **
__»¡riù
 
__¤c
,

458 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

459 
size_t
 
__d¡Ën
è
__THROW
;

460 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

461 (
wch¬_t
 *
__»¡riù
 
__d¡
,

462 cÚ¡ **
__»¡riù
 
__¤c
,

463 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

464 
mb¤towcs
);

465 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

466 (
wch¬_t
 *
__»¡riù
 
__d¡
,

467 cÚ¡ **
__»¡riù
 
__¤c
,

468 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

469 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

470 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

473 
__fÜtify_funùiÚ
 
size_t


474 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

475 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

477 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

479 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

480  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

481 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

483 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

484  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

485 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

487  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

488 
	}
}

491 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

492 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

493 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

494 
size_t
 
__d¡Ën
è
__THROW
;

495 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

496 (*
__»¡riù
 
__d¡
,

497 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

498 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

499 
wc¤tombs
);

500 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

501 (*
__»¡riù
 
__d¡
,

502 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

503 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

504 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

505 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

507 
__fÜtify_funùiÚ
 
size_t


508 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

509 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

511 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

513 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

514  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

516 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

517  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

519  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

520 
	}
}

523 #ifdeà
__USE_GNU


524 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

525 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

526 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

527 
size_t
 
__d¡Ën
è
__THROW
;

528 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

529 (
wch¬_t
 *
__»¡riù
 
__d¡
,

530 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

531 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

532 
mb¢¹owcs
);

533 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

534 (
wch¬_t
 *
__»¡riù
 
__d¡
,

535 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

536 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

537 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

538 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

541 
__fÜtify_funùiÚ
 
size_t


542 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

543 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

545 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

547 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

548  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

549 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

551 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

552  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

553 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

555  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

556 
	}
}

559 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

560 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

561 
size_t
 
__nwc
, size_ˆ
__Ën
,

562 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

563 
__THROW
;

564 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

565 (*
__»¡riù
 
__d¡
,

566 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

567 
size_t
 
__nwc
, size_ˆ
__Ën
,

568 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

569 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

570 (*
__»¡riù
 
__d¡
,

571 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

572 
size_t
 
__nwc
, size_ˆ
__Ën
,

573 
mb¡©e_t
 *
__»¡riù
 
__ps
,

574 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

575 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

577 
__fÜtify_funùiÚ
 
size_t


578 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

579 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

581 ià(
	`__bos
 (
__d¡
è!ð(
size_t
) -1)

583 ià(!
	`__bužtš_cÚ¡ªt_p
 (
__Ën
))

584  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

585 
	`__bos
 (
__d¡
));

587 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

588  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

589 
	`__bos
 (
__d¡
));

591  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

592 
	}
}

	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifdeà
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

95 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

96 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

100 
	#PTHREAD_MUTEX_INITIALIZER
 \

101 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

102 #ifdeà
__USE_GNU


103 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

107 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

115 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


118 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

119 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

120 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

121 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


127 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


128 #ià
__WORDSIZE
 == 64

129 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

134 
	#PTHREAD_RWLOCK_INITIALIZER
 \

135 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

136 #ifdeà
__USE_GNU


137 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


138 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

140 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

142 #ià
__BYTE_ORDER
 =ð
__LITTLE_ENDIAN


143 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

144 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

145 0, 0, 0, 0 } }

	)

147 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

148 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

149 0 } }

	)

159 
	mPTHREAD_INHERIT_SCHED
,

160 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

161 
	mPTHREAD_EXPLICIT_SCHED


162 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

169 
	mPTHREAD_SCOPE_SYSTEM
,

170 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

171 
	mPTHREAD_SCOPE_PROCESS


172 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

179 
	mPTHREAD_PROCESS_PRIVATE
,

180 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

181 
	mPTHREAD_PROCESS_SHARED


182 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

188 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

192 
	s_±h»ad_þ—nup_bufãr


194 (*
	m__routše
) (*);

195 *
	m__¬g
;

196 
	m__ÿnûÉy³
;

197 
_±h»ad_þ—nup_bufãr
 *
	m__´ev
;

203 
	mPTHREAD_CANCEL_ENABLE
,

204 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

205 
	mPTHREAD_CANCEL_DISABLE


206 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

210 
	mPTHREAD_CANCEL_DEFERRED
,

211 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

212 
	mPTHREAD_CANCEL_ASYNCHRONOUS


213 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

215 
	#PTHREAD_CANCELED
 ((*è-1)

	)

219 
	#PTHREAD_ONCE_INIT
 0

	)

222 #ifdeà
__USE_XOPEN2K


226 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

230 
__BEGIN_DECLS


235 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

236 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

237 *(*
__¡¬t_routše
) (*),

238 *
__»¡riù
 
__¬g
è
__THROWNL
 
__nÚnuÎ
 ((1, 3));

244 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

252 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

254 #ifdeà
__USE_GNU


257 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

265 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

266 cÚ¡ 
time¥ec
 *
__ab¡ime
);

273 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

277 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

280 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

281 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

289 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

292 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

297 *
__d‘ach¡©e
)

298 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

301 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

302 
__d‘ach¡©e
)

303 
__THROW
 
	`__nÚnuÎ
 ((1));

307 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

308 
size_t
 *
__gu¬dsize
)

309 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

312 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

313 
size_t
 
__gu¬dsize
)

314 
__THROW
 
	`__nÚnuÎ
 ((1));

318 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

319 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

320 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

323 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

324 cÚ¡ 
sched_·¿m
 *
__»¡riù


325 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

328 
	$±h»ad_©Œ_g‘schedpÞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


329 
__©Œ
, *
__»¡riù
 
__pÞicy
)

330 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

333 
	$±h»ad_©Œ_£tschedpÞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pÞicy
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

337 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


338 
__©Œ
, *
__»¡riù
 
__šh”™
)

339 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

342 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

343 
__šh”™
)

344 
__THROW
 
	`__nÚnuÎ
 ((1));

348 
	$±h»ad_©Œ_g‘scÝe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

349 *
__»¡riù
 
__scÝe
)

350 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

353 
	$±h»ad_©Œ_£tscÝe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scÝe
)

354 
__THROW
 
	`__nÚnuÎ
 ((1));

357 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


358 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

359 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

365 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

366 *
__¡ackaddr
)

367 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

370 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


371 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

372 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

377 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

378 
size_t
 
__¡acksize
)

379 
__THROW
 
	`__nÚnuÎ
 ((1));

381 #ifdeà
__USE_XOPEN2K


383 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

384 **
__»¡riù
 
__¡ackaddr
,

385 
size_t
 *
__»¡riù
 
__¡acksize
)

386 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

391 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

392 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

395 #ifdeà
__USE_GNU


398 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

399 
size_t
 
__ýu£tsize
,

400 cÚ¡ 
ýu_£t_t
 *
__ýu£t
)

401 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

405 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

406 
size_t
 
__ýu£tsize
,

407 
ýu_£t_t
 *
__ýu£t
)

408 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

414 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

415 
__THROW
 
	`__nÚnuÎ
 ((2));

423 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pÞicy
,

424 cÚ¡ 
sched_·¿m
 *
__·¿m
)

425 
__THROW
 
	`__nÚnuÎ
 ((3));

428 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

429 *
__»¡riù
 
__pÞicy
,

430 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

431 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

434 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

435 
__THROW
;

438 #ifdeà
__USE_GNU


440 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

441 
size_t
 
__buæ’
)

442 
__THROW
 
	`__nÚnuÎ
 ((2));

445 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

446 
__THROW
 
	`__nÚnuÎ
 ((2));

450 #ifdeà
__USE_UNIX98


452 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

455 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

458 #ifdeà
__USE_GNU


463 
	$±h»ad_y›ld
 (è
__THROW
;

468 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ýu£tsize
,

469 cÚ¡ 
ýu_£t_t
 *
__ýu£t
)

470 
__THROW
 
	`__nÚnuÎ
 ((3));

473 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ýu£tsize
,

474 
ýu_£t_t
 *
__ýu£t
)

475 
__THROW
 
	`__nÚnuÎ
 ((3));

488 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒÞ
,

489 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

500 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Þd¡©e
);

504 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Þdty³
);

507 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

512 
	`±h»ad_‹¡ÿnûl
 ();

521 
__jmp_buf
 
__ÿnûl_jmp_buf
;

522 
__mask_was_§ved
;

523 } 
__ÿnûl_jmp_buf
[1];

524 *
__·d
[4];

525 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

528 #iâdeà
__þ—nup_fù_©Œibu‹


529 
	#__þ—nup_fù_©Œibu‹


	)

534 
	s__±h»ad_þ—nup_äame


536 (*
__ÿnûl_routše
) (*);

537 *
__ÿnûl_¬g
;

538 
__do_™
;

539 
__ÿnûl_ty³
;

542 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


543 #ifdeà
__ýlu¥lus


545 þas 
	c__±h»ad_þ—nup_þass


547 (*
__ÿnûl_routše
) (*);

548 *
__ÿnûl_¬g
;

549 
__do_™
;

550 
__ÿnûl_ty³
;

552 
public
:

553 
	`__±h»ad_þ—nup_þass
 ((*
__fù
è(*), *
__¬g
)

554 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

555 ~
	$__±h»ad_þ—nup_þass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

556 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

557 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

558 &
__ÿnûl_ty³
); 
	}
}

559 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

569 
	#±h»ad_þ—nup_push
(
routše
, 
¬g
) \

571 
__±h»ad_þ—nup_þass
 
	`__þäame
 (
routše
, 
¬g
)

	)

575 
	#±h»ad_þ—nup_pÝ
(
execu‹
) \

576 
__þäame
.
	`__£tdo™
 (
execu‹
); \

577 } 0)

	)

579 #ifdeà
__USE_GNU


583 
	#±h»ad_þ—nup_push_deãr_Å
(
routše
, 
¬g
) \

585 
__±h»ad_þ—nup_þass
 
	`__þäame
 (
routše
, 
¬g
); \

586 
__þäame
.
	`__deãr
 ()

	)

591 
	#±h»ad_þ—nup_pÝ_»¡Üe_Å
(
execu‹
) \

592 
__þäame
.
	`__»¡Üe
 (); \

593 
__þäame
.
	`__£tdo™
 (
execu‹
); \

594 } 0)

	)

601 
__ex‹º_šlše
 

602 
	$__±h»ad_þ—nup_routše
 (
__±h»ad_þ—nup_äame
 *
__äame
)

604 ià(
__äame
->
__do_™
)

605 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

606 
	}
}

615 
	#±h»ad_þ—nup_push
(
routše
, 
¬g
) \

617 
__±h»ad_þ—nup_äame
 
__þäame
 \

618 
	`__©Œibu‹__
 ((
	`__þ—nup__
 (
__±h»ad_þ—nup_routše
))) \

619 ð{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

620 .
__do_™
 = 1 };

	)

624 
	#±h»ad_þ—nup_pÝ
(
execu‹
) \

625 
__þäame
.
__do_™
 = (
execu‹
); \

626 } 0)

	)

628 #ifdeà
__USE_GNU


632 
	#±h»ad_þ—nup_push_deãr_Å
(
routše
, 
¬g
) \

634 
__±h»ad_þ—nup_äame
 
__þäame
 \

635 
	`__©Œibu‹__
 ((
	`__þ—nup__
 (
__±h»ad_þ—nup_routše
))) \

636 ð{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

637 .
__do_™
 = 1 }; \

638 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

639 &
__þäame
.
__ÿnûl_ty³
)

	)

644 
	#±h»ad_þ—nup_pÝ_»¡Üe_Å
(
execu‹
) \

645 (è
	`±h»ad_£tÿnûÉy³
 (
__þäame
.
__ÿnûl_ty³
, 
NULL
); \

646 
__þäame
.
__do_™
 = (
execu‹
); \

647 } 0)

	)

658 
	#±h»ad_þ—nup_push
(
routše
, 
¬g
) \

660 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

661 (*
__ÿnûl_routše
è(*èð(
routše
); \

662 *
__ÿnûl_¬g
 = (
¬g
); \

663 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

664 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

665 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

667 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

668 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

672 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

673 dØ{

	)

674 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

675 
__þ—nup_fù_©Œibu‹
;

679 
	#±h»ad_þ—nup_pÝ
(
execu‹
) \

682 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

683 ià(
execu‹
) \

684 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

685 } 0)

	)

686 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

687 
__þ—nup_fù_©Œibu‹
;

689 #ifdeà
__USE_GNU


693 
	#±h»ad_þ—nup_push_deãr_Å
(
routše
, 
¬g
) \

695 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

696 (*
__ÿnûl_routše
è(*èð(
routše
); \

697 *
__ÿnûl_¬g
 = (
¬g
); \

698 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

699 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

700 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

702 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

703 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

707 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

708 dØ{

	)

709 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

710 
__þ—nup_fù_©Œibu‹
;

715 
	#±h»ad_þ—nup_pÝ_»¡Üe_Å
(
execu‹
) \

718 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

719 ià(
execu‹
) \

720 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

721 
	}
} 0)

	)

722 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

723 
__þ—nup_fù_©Œibu‹
;

727 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

728 
__þ—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

729 #iâdeà
SHARED


730 
	`__©Œibu‹__
 ((
__w—k__
))

736 
__jmp_buf_g
;

737 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

743 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

744 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

745 
__THROW
 
	`__nÚnuÎ
 ((1));

748 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

749 
__THROW
 
	`__nÚnuÎ
 ((1));

752 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

753 
__THROWNL
 
	`__nÚnuÎ
 ((1));

756 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

757 
__THROWNL
 
	`__nÚnuÎ
 ((1));

759 #ifdeà
__USE_XOPEN2K


761 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

762 cÚ¡ 
time¥ec
 *
__»¡riù


763 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

767 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

768 
__THROWNL
 
	`__nÚnuÎ
 ((1));

772 
	$±h»ad_mu‹x_g‘´ioûžšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

773 
__»¡riù
 
__mu‹x
,

774 *
__»¡riù
 
__´ioûžšg
)

775 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

779 
	$±h»ad_mu‹x_£rioûžšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

780 
__´ioûžšg
,

781 *
__»¡riù
 
__Þd_ûžšg
)

782 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

785 #ifdeà
__USE_XOPEN2K8


787 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

788 
__THROW
 
	`__nÚnuÎ
 ((1));

789 #ifdeà
__USE_GNU


790 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

791 
__THROW
 
	`__nÚnuÎ
 ((1));

800 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

801 
__THROW
 
	`__nÚnuÎ
 ((1));

804 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

805 
__THROW
 
	`__nÚnuÎ
 ((1));

808 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

809 
__»¡riù
 
__©Œ
,

810 *
__»¡riù
 
__psh¬ed
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

814 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

815 
__psh¬ed
)

816 
__THROW
 
	`__nÚnuÎ
 ((1));

818 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


820 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


821 
__©Œ
, *
__»¡riù
 
__kšd
)

822 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

827 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

828 
__THROW
 
	`__nÚnuÎ
 ((1));

832 
	$±h»ad_mu‹x©Œ_g‘´ÙocÞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

833 
__»¡riù
 
__©Œ
,

834 *
__»¡riù
 
__´ÙocÞ
)

835 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

839 
	$±h»ad_mu‹x©Œ_£rÙocÞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

840 
__´ÙocÞ
)

841 
__THROW
 
	`__nÚnuÎ
 ((1));

844 
	$±h»ad_mu‹x©Œ_g‘´ioûžšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

845 
__»¡riù
 
__©Œ
,

846 *
__»¡riù
 
__´ioûžšg
)

847 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

850 
	$±h»ad_mu‹x©Œ_£rioûžšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

851 
__´ioûžšg
)

852 
__THROW
 
	`__nÚnuÎ
 ((1));

854 #ifdeà
__USE_XOPEN2K


856 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 *
__robu¡Ãss
)

858 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

859 #ifdeà
__USE_GNU


860 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

861 *
__robu¡Ãss
)

862 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

866 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

867 
__robu¡Ãss
)

868 
__THROW
 
	`__nÚnuÎ
 ((1));

869 #ifdeà
__USE_GNU


870 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

871 
__robu¡Ãss
)

872 
__THROW
 
	`__nÚnuÎ
 ((1));

877 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


882 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

883 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


884 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

887 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

888 
__THROW
 
	`__nÚnuÎ
 ((1));

891 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

892 
__THROWNL
 
	`__nÚnuÎ
 ((1));

895 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

896 
__THROWNL
 
	`__nÚnuÎ
 ((1));

898 #ifdeà
__USE_XOPEN2K


900 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

901 cÚ¡ 
time¥ec
 *
__»¡riù


902 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

906 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

907 
__THROWNL
 
	`__nÚnuÎ
 ((1));

910 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

911 
__THROWNL
 
	`__nÚnuÎ
 ((1));

913 #ifdeà
__USE_XOPEN2K


915 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

916 cÚ¡ 
time¥ec
 *
__»¡riù


917 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

921 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

922 
__THROWNL
 
	`__nÚnuÎ
 ((1));

928 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

929 
__THROW
 
	`__nÚnuÎ
 ((1));

932 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

933 
__THROW
 
	`__nÚnuÎ
 ((1));

936 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

937 
__»¡riù
 
__©Œ
,

938 *
__»¡riù
 
__psh¬ed
)

939 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

942 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

943 
__psh¬ed
)

944 
__THROW
 
	`__nÚnuÎ
 ((1));

947 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

948 
__»¡riù
 
__©Œ
,

949 *
__»¡riù
 
__´ef
)

950 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

953 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

954 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

962 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

963 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

964 
__THROW
 
	`__nÚnuÎ
 ((1));

967 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

968 
__THROW
 
	`__nÚnuÎ
 ((1));

971 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

972 
__THROWNL
 
	`__nÚnuÎ
 ((1));

975 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

976 
__THROWNL
 
	`__nÚnuÎ
 ((1));

983 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

984 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

985 
	`__nÚnuÎ
 ((1, 2));

994 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

995 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

996 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

997 
	`__nÚnuÎ
 ((1, 2, 3));

1002 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1003 
__THROW
 
	`__nÚnuÎ
 ((1));

1006 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1007 
__THROW
 
	`__nÚnuÎ
 ((1));

1010 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1011 
__»¡riù
 
__©Œ
,

1012 *
__»¡riù
 
__psh¬ed
)

1013 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1016 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1017 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1019 #ifdeà
__USE_XOPEN2K


1021 
	$±h»ad_cÚd©Œ_g‘þock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1022 
__»¡riù
 
__©Œ
,

1023 
__þockid_t
 *
__»¡riù
 
__þock_id
)

1024 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1027 
	$±h»ad_cÚd©Œ_£tþock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1028 
__þockid_t
 
__þock_id
)

1029 
__THROW
 
	`__nÚnuÎ
 ((1));

1033 #ifdeà
__USE_XOPEN2K


1038 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1039 
__THROW
 
	`__nÚnuÎ
 ((1));

1042 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1043 
__THROW
 
	`__nÚnuÎ
 ((1));

1046 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1047 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1050 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1051 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1054 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1055 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1062 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1063 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1064 
__©Œ
, 
__couÁ
)

1065 
__THROW
 
	`__nÚnuÎ
 ((1));

1068 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1069 
__THROW
 
	`__nÚnuÎ
 ((1));

1072 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1073 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1077 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1078 
__THROW
 
	`__nÚnuÎ
 ((1));

1081 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1082 
__THROW
 
	`__nÚnuÎ
 ((1));

1085 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1086 
__»¡riù
 
__©Œ
,

1087 *
__»¡riù
 
__psh¬ed
)

1088 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1091 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1092 
__psh¬ed
)

1093 
__THROW
 
	`__nÚnuÎ
 ((1));

1105 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1106 (*
__de¡r_funùiÚ
) (*))

1107 
__THROW
 
	`__nÚnuÎ
 ((1));

1110 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1113 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1116 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1117 cÚ¡ *
__poš‹r
è
__THROW
 ;

1120 #ifdeà
__USE_XOPEN2K


1122 
	$±h»ad_g‘ýuþockid
 (
±h»ad_t
 
__th»ad_id
,

1123 
__þockid_t
 *
__þock_id
)

1124 
__THROW
 
	`__nÚnuÎ
 ((2));

1139 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1140 (*
__·»Á
) (),

1141 (*
__chžd
è()è
__THROW
;

1144 #ifdeà
__USE_EXTERN_INLINES


1146 
__ex‹º_šlše
 

1147 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1149  
__th»ad1
 =ð
__th»ad2
;

1150 
	}
}

1153 
	g__END_DECLS


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ð
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´Ý”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´Ý”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´Ý”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´Ý”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@/usr/include/bits/setjmp.h

19 #iâdeà
_BITS_SETJMP_H


20 
	#_BITS_SETJMP_H
 1

	)

22 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


26 
	~<b™s/wÜdsize.h
>

28 #iâdeà
_ASM


30 #ià
__WORDSIZE
 == 64

31 
	t__jmp_buf
[8];

32 #–ià
defšed
 
__x86_64__


33 
	t__jmp_buf
[8];

35 
	t__jmp_buf
[6];

	@/usr/include/sched.h

20 #iâdef 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	#__Ãed_time_t


	)

32 
	#__Ãed_time¥ec


	)

33 
	~<time.h
>

35 #iâdeà
__pid_t_defšed


36 
__pid_t
 
	tpid_t
;

37 
	#__pid_t_defšed


	)

42 
	~<b™s/sched.h
>

44 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

47 
__BEGIN_DECLS


50 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

51 
__THROW
;

54 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

57 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pÞicy
,

58 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

61 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

64 
	$sched_y›ld
 (è
__THROW
;

67 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

70 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

73 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

76 #ifdeà
__USE_GNU


78 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

79 
	#CPU_SET
(
ýu
, 
ýu£
è
	`__CPU_SET_S
 (ýu,  (
ýu_£t_t
), cpu£)

	)

80 
	#CPU_CLR
(
ýu
, 
ýu£
è
	`__CPU_CLR_S
 (ýu,  (
ýu_£t_t
), cpu£)

	)

81 
	#CPU_ISSET
(
ýu
, 
ýu£
è
	`__CPU_ISSET_S
 (ýu,  (
ýu_£t_t
), \

82 
ýu£
)

	)

83 
	#CPU_ZERO
(
ýu£
è
	`__CPU_ZERO_S
 ( (
ýu_£t_t
), cpu£)

	)

84 
	#CPU_COUNT
(
ýu£
è
	`__CPU_COUNT_S
 ( (
ýu_£t_t
), cpu£)

	)

86 
	#CPU_SET_S
(
ýu
, 
£tsize
, 
ýu£
è
	`__CPU_SET_S
 (ýu, s‘size, cpu£)

	)

87 
	#CPU_CLR_S
(
ýu
, 
£tsize
, 
ýu£
è
	`__CPU_CLR_S
 (ýu, s‘size, cpu£)

	)

88 
	#CPU_ISSET_S
(
ýu
, 
£tsize
, 
ýu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

89 
ýu£
)

	)

90 
	#CPU_ZERO_S
(
£tsize
, 
ýu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

91 
	#CPU_COUNT_S
(
£tsize
, 
ýu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

93 
	#CPU_EQUAL
(
ýu£1
, 
ýu£2
) \

94 
	`__CPU_EQUAL_S
 ( (
ýu_£t_t
), 
ýu£1
, 
ýu£2
)

	)

95 
	#CPU_EQUAL_S
(
£tsize
, 
ýu£1
, 
ýu£2
) \

96 
	`__CPU_EQUAL_S
 (
£tsize
, 
ýu£1
, 
ýu£2
)

	)

98 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

99 
	`__CPU_OP_S
 ( (
ýu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

100 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

101 
	`__CPU_OP_S
 ( (
ýu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

102 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

103 
	`__CPU_OP_S
 ( (
ýu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

104 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

105 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

106 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

107 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

108 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

109 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

111 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

112 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

113 
	#CPU_FREE
(
ýu£t
è
	`__CPU_FREE
 (ýu£t)

	)

117 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ýu£tsize
,

118 cÚ¡ 
ýu_£t_t
 *
__ýu£t
è
__THROW
;

121 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ýu£tsize
,

122 
ýu_£t_t
 *
__ýu£t
è
__THROW
;

125 
__END_DECLS


	@/usr/include/bits/sched.h

21 #iâdeà
__Ãed_sched·¿m


23 #iâdeà
_SCHED_H


29 
	#SCHED_OTHER
 0

	)

30 
	#SCHED_FIFO
 1

	)

31 
	#SCHED_RR
 2

	)

32 #ifdeà
__USE_GNU


33 
	#SCHED_BATCH
 3

	)

34 
	#SCHED_IDLE
 5

	)

36 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

39 #ifdeà
__USE_GNU


41 
	#CSIGNAL
 0x000000fà

	)

42 
	#CLONE_VM
 0x00000100

	)

43 
	#CLONE_FS
 0x00000200

	)

44 
	#CLONE_FILES
 0x00000400

	)

45 
	#CLONE_SIGHAND
 0x00000800

	)

46 
	#CLONE_PTRACE
 0x00002000

	)

47 
	#CLONE_VFORK
 0x00004000

	)

49 
	#CLONE_PARENT
 0x00008000

	)

51 
	#CLONE_THREAD
 0x00010000

	)

52 
	#CLONE_NEWNS
 0x00020000

	)

53 
	#CLONE_SYSVSEM
 0x00040000

	)

54 
	#CLONE_SETTLS
 0x00080000

	)

55 
	#CLONE_PARENT_SETTID
 0x00100000

	)

57 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

59 
	#CLONE_DETACHED
 0x00400000

	)

60 
	#CLONE_UNTRACED
 0x00800000

	)

62 
	#CLONE_CHILD_SETTID
 0x01000000

	)

64 
	#CLONE_NEWUTS
 0x04000000

	)

65 
	#CLONE_NEWIPC
 0x08000000

	)

66 
	#CLONE_NEWUSER
 0x10000000

	)

67 
	#CLONE_NEWPID
 0x20000000

	)

68 
	#CLONE_NEWNET
 0x40000000

	)

69 
	#CLONE_IO
 0x80000000

	)

73 
	ssched_·¿m


75 
	m__sched_´iÜ™y
;

78 
	g__BEGIN_DECLS


80 #ifdeà
__USE_GNU


82 
þÚe
 ((*
__â
è(*
__¬g
), *
__chžd_¡ack
,

83 
__æags
, *
__¬g
, ...è
__THROW
;

86 
	$unsh¬e
 (
__æags
è
__THROW
;

89 
	$sched_g‘ýu
 (è
__THROW
;

92 
	$£Šs
 (
__fd
, 
__n¡y³
è
__THROW
;

96 
__END_DECLS


100 #ià!
defšed
 
__defšed_sched·¿m
 \

101 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

102 
	#__defšed_sched·¿m
 1

	)

104 
	s__sched_·¿m


106 
__sched_´iÜ™y
;

108 #undeà
__Ãed_sched·¿m


112 #ià
defšed
 
_SCHED_H
 && !defšed 
__ýu_£t_t_defšed


113 
	#__ýu_£t_t_defšed


	)

115 
	#__CPU_SETSIZE
 1024

	)

116 
	#__NCPUBITS
 (8 *  (
__ýu_mask
))

	)

119 
	t__ýu_mask
;

122 
	#__CPUELT
(
ýu
è((ýuè/ 
__NCPUBITS
)

	)

123 
	#__CPUMASK
(
ýu
è((
__ýu_mask
è1 << ((ýuè% 
__NCPUBITS
))

	)

128 
__ýu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

129 } 
	týu_£t_t
;

132 #ià
	`__GNUC_PREREQ
 (2, 91)

133 
	#__CPU_ZERO_S
(
£tsize
, 
ýu£
) \

134 dØ
	`__bužtš_mem£t
 (
ýu£
, '\0', 
£tsize
); 0)

	)

136 
	#__CPU_ZERO_S
(
£tsize
, 
ýu£
) \

138 
size_t
 
__i
; \

139 
size_t
 
__imax
 = (
£tsize
è/  (
__ýu_mask
); \

140 
__ýu_mask
 *
__b™s
 = (
ýu£
)->__bits; \

141 
__i
 = 0; __˜< 
__imax
; ++__i) \

142 
__b™s
[
__i
] = 0; \

143 
	}
} 0)

	)

145 
	#__CPU_SET_S
(
ýu
, 
£tsize
, 
ýu£
) \

146 (
__ex‹nsiÚ__
 \

147 ({ 
size_t
 
__ýu
 = (
ýu
); \

148 
__ýu
 < 8 * (
£tsize
) \

149 ? (((
__ýu_mask
 *è((
ýu£
)->
__b™s
))[
	`__CPUELT
 (
__ýu
)] \

150 |ð
	`__CPUMASK
 (
__ýu
)) \

151 : 0; }))

	)

152 
	#__CPU_CLR_S
(
ýu
, 
£tsize
, 
ýu£
) \

153 (
__ex‹nsiÚ__
 \

154 ({ 
size_t
 
__ýu
 = (
ýu
); \

155 
__ýu
 < 8 * (
£tsize
) \

156 ? (((
__ýu_mask
 *è((
ýu£
)->
__b™s
))[
	`__CPUELT
 (
__ýu
)] \

157 &ð~
	`__CPUMASK
 (
__ýu
)) \

158 : 0; }))

	)

159 
	#__CPU_ISSET_S
(
ýu
, 
£tsize
, 
ýu£
) \

160 (
__ex‹nsiÚ__
 \

161 ({ 
size_t
 
__ýu
 = (
ýu
); \

162 
__ýu
 < 8 * (
£tsize
) \

163 ? ((((cÚ¡ 
__ýu_mask
 *è((
ýu£
)->
__b™s
))[
	`__CPUELT
 (
__ýu
)] \

164 & 
	`__CPUMASK
 (
__ýu
))) != 0 \

165 : 0; }))

	)

167 
	#__CPU_COUNT_S
(
£tsize
, 
ýu£
) \

168 
	`__sched_ýucouÁ
 (
£tsize
, 
ýu£
)

	)

170 #ià
__GNUC_PREREQ
 (2, 91)

171 
	#__CPU_EQUAL_S
(
£tsize
, 
ýu£1
, 
ýu£2
) \

172 (
	`__bužtš_memcmp
 (
ýu£1
, 
ýu£2
, 
£tsize
è=ð0)

	)

174 
	#__CPU_EQUAL_S
(
£tsize
, 
ýu£1
, 
ýu£2
) \

175 (
__ex‹nsiÚ__
 \

176 ({ cÚ¡ 
__ýu_mask
 *
__¬r1
 = (
ýu£1
)->
__b™s
; \

177 cÚ¡ 
__ýu_mask
 *
__¬r2
 = (
ýu£2
)->
__b™s
; \

178 
size_t
 
__imax
 = (
£tsize
è/  (
__ýu_mask
); \

179 
size_t
 
__i
; \

180 
__i
 = 0; __˜< 
__imax
; ++__i) \

181 ià(
__¬r1
[
__i
] !ð
__¬r2
[__i]) \

183 
__i
 =ð
__imax
; }))

	)

186 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
Ý
) \

187 (
__ex‹nsiÚ__
 \

188 ({ 
ýu_£t_t
 *
__de¡
 = (
de¡£t
); \

189 cÚ¡ 
__ýu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

190 cÚ¡ 
__ýu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

191 
size_t
 
__imax
 = (
£tsize
è/  (
__ýu_mask
); \

192 
size_t
 
__i
; \

193 
__i
 = 0; __˜< 
__imax
; ++__i) \

194 ((
__ýu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
Ý
 
__¬r2
[__i]; \

195 
__de¡
; }))

	)

197 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

198 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ýu_mask
))

	)

199 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ýu®loc
 (couÁ)

	)

200 
	#__CPU_FREE
(
ýu£t
è
	`__sched_ýuä“
 (ýu£t)

	)

202 
__BEGIN_DECLS


204 
	$__sched_ýucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ýu_£t_t
 *
__£
)

205 
__THROW
;

206 
ýu_£t_t
 *
	$__sched_ýu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

207 
	$__sched_ýuä“
 (
ýu_£t_t
 *
__£t
è
__THROW
;

209 
__END_DECLS


	@
1
.
1
/usr/include
262
9294
build/CMakeFiles/3.18.4/CompilerIdC/CMakeCCompilerId.c
build/CMakeFiles/3.18.4/CompilerIdCXX/CMakeCXXCompilerId.cpp
build/CMakeFiles/FindOpenMP/OpenMPCheckVersion.c
build/CMakeFiles/FindOpenMP/OpenMPCheckVersion.cpp
build/CMakeFiles/FindOpenMP/OpenMPTryFlag.c
build/CMakeFiles/FindOpenMP/OpenMPTryFlag.cpp
build/CMakeFiles/feature_tests.cxx
compat/msvc/stdint.h
doc/mainpage.h
source/App/Parcat/parcat.cpp
source/App/SEIRemovalApp/SEIRemovalApp.cpp
source/App/SEIRemovalApp/SEIRemovalApp.h
source/App/SEIRemovalApp/SEIRemovalAppCfg.cpp
source/App/SEIRemovalApp/SEIRemovalAppCfg.h
source/App/SEIRemovalApp/seiremovalmain.cpp
source/App/TAppDecoder/TAppDecCfg.cpp
source/App/TAppDecoder/TAppDecCfg.h
source/App/TAppDecoder/TAppDecTop.cpp
source/App/TAppDecoder/TAppDecTop.h
source/App/TAppDecoder/decmain.cpp
source/App/TAppEncoder/TAppEncCfg.cpp
source/App/TAppEncoder/TAppEncCfg.h
source/App/TAppEncoder/TAppEncTop.cpp
source/App/TAppEncoder/TAppEncTop.h
source/App/TAppEncoder/encmain.cpp
source/App/TAppMCTSExtractor/TAppMctsExtCfg.cpp
source/App/TAppMCTSExtractor/TAppMctsExtCfg.h
source/App/TAppMCTSExtractor/TAppMctsExtTop.cpp
source/App/TAppMCTSExtractor/TAppMctsExtTop.h
source/App/TAppMCTSExtractor/mctsExtmain.cpp
source/App/utils/BitrateTargeting/ExtractBitrates.cpp
source/App/utils/BitrateTargeting/ExtractBitrates.h
source/App/utils/BitrateTargeting/ExtractBitratesMain.cpp
source/App/utils/BitrateTargeting/GuessLambdaModifiers.cpp
source/App/utils/BitrateTargeting/GuessLambdaModifiers.h
source/App/utils/BitrateTargeting/GuessLambdaModifiersMain.cpp
source/App/utils/BitrateTargeting/RuntimeError.h
source/App/utils/annexBbytecount.cpp
source/App/utils/convert_NtoMbit_YCbCr.cpp
source/Lib/TLibCommon/AccessUnit.h
source/Lib/TLibCommon/CommonDef.h
source/Lib/TLibCommon/ContextModel.cpp
source/Lib/TLibCommon/ContextModel.h
source/Lib/TLibCommon/ContextModel3DBuffer.cpp
source/Lib/TLibCommon/ContextModel3DBuffer.h
source/Lib/TLibCommon/ContextTables.h
source/Lib/TLibCommon/Debug.cpp
source/Lib/TLibCommon/Debug.h
source/Lib/TLibCommon/NAL.h
source/Lib/TLibCommon/ProfileLevelTierFeatures.cpp
source/Lib/TLibCommon/ProfileLevelTierFeatures.h
source/Lib/TLibCommon/SEI.cpp
source/Lib/TLibCommon/SEI.h
source/Lib/TLibCommon/SEIFilmGrainSynthesizer.cpp
source/Lib/TLibCommon/SEIFilmGrainSynthesizer.h
source/Lib/TLibCommon/TComBitCounter.h
source/Lib/TLibCommon/TComBitStream.cpp
source/Lib/TLibCommon/TComBitStream.h
source/Lib/TLibCommon/TComCABACTables.cpp
source/Lib/TLibCommon/TComCABACTables.h
source/Lib/TLibCommon/TComChromaFormat.cpp
source/Lib/TLibCommon/TComChromaFormat.h
source/Lib/TLibCommon/TComCodingStatistics.h
source/Lib/TLibCommon/TComDataCU.cpp
source/Lib/TLibCommon/TComDataCU.h
source/Lib/TLibCommon/TComInterpolationFilter.cpp
source/Lib/TLibCommon/TComInterpolationFilter.h
source/Lib/TLibCommon/TComList.h
source/Lib/TLibCommon/TComLoopFilter.cpp
source/Lib/TLibCommon/TComLoopFilter.h
source/Lib/TLibCommon/TComMotionInfo.cpp
source/Lib/TLibCommon/TComMotionInfo.h
source/Lib/TLibCommon/TComMv.h
source/Lib/TLibCommon/TComPattern.cpp
source/Lib/TLibCommon/TComPattern.h
source/Lib/TLibCommon/TComPic.cpp
source/Lib/TLibCommon/TComPic.h
source/Lib/TLibCommon/TComPicSym.cpp
source/Lib/TLibCommon/TComPicSym.h
source/Lib/TLibCommon/TComPicYuv.cpp
source/Lib/TLibCommon/TComPicYuv.h
source/Lib/TLibCommon/TComPicYuvMD5.cpp
source/Lib/TLibCommon/TComPrediction.cpp
source/Lib/TLibCommon/TComPrediction.h
source/Lib/TLibCommon/TComRdCost.cpp
source/Lib/TLibCommon/TComRdCost.h
source/Lib/TLibCommon/TComRdCostWeightPrediction.cpp
source/Lib/TLibCommon/TComRdCostWeightPrediction.h
source/Lib/TLibCommon/TComRectangle.h
source/Lib/TLibCommon/TComRom.cpp
source/Lib/TLibCommon/TComRom.h
source/Lib/TLibCommon/TComSampleAdaptiveOffset.cpp
source/Lib/TLibCommon/TComSampleAdaptiveOffset.h
source/Lib/TLibCommon/TComSlice.cpp
source/Lib/TLibCommon/TComSlice.h
source/Lib/TLibCommon/TComTU.cpp
source/Lib/TLibCommon/TComTU.h
source/Lib/TLibCommon/TComTrQuant.cpp
source/Lib/TLibCommon/TComTrQuant.h
source/Lib/TLibCommon/TComWeightPrediction.cpp
source/Lib/TLibCommon/TComWeightPrediction.h
source/Lib/TLibCommon/TComYuv.cpp
source/Lib/TLibCommon/TComYuv.h
source/Lib/TLibCommon/TypeDef.h
source/Lib/TLibDecoder/AnnexBread.cpp
source/Lib/TLibDecoder/AnnexBread.h
source/Lib/TLibDecoder/NALread.cpp
source/Lib/TLibDecoder/NALread.h
source/Lib/TLibDecoder/SEIread.cpp
source/Lib/TLibDecoder/SEIread.h
source/Lib/TLibDecoder/SyntaxElementParser.cpp
source/Lib/TLibDecoder/SyntaxElementParser.h
source/Lib/TLibDecoder/TDecBinCoder.h
source/Lib/TLibDecoder/TDecBinCoderCABAC.cpp
source/Lib/TLibDecoder/TDecBinCoderCABAC.h
source/Lib/TLibDecoder/TDecCAVLC.cpp
source/Lib/TLibDecoder/TDecCAVLC.h
source/Lib/TLibDecoder/TDecConformance.cpp
source/Lib/TLibDecoder/TDecConformance.h
source/Lib/TLibDecoder/TDecCu.cpp
source/Lib/TLibDecoder/TDecCu.h
source/Lib/TLibDecoder/TDecEntropy.cpp
source/Lib/TLibDecoder/TDecEntropy.h
source/Lib/TLibDecoder/TDecGop.cpp
source/Lib/TLibDecoder/TDecGop.h
source/Lib/TLibDecoder/TDecSbac.cpp
source/Lib/TLibDecoder/TDecSbac.h
source/Lib/TLibDecoder/TDecSlice.cpp
source/Lib/TLibDecoder/TDecSlice.h
source/Lib/TLibDecoder/TDecTop.cpp
source/Lib/TLibDecoder/TDecTop.h
source/Lib/TLibEncoder/AnnexBwrite.h
source/Lib/TLibEncoder/NALwrite.cpp
source/Lib/TLibEncoder/NALwrite.h
source/Lib/TLibEncoder/SEIEncoder.cpp
source/Lib/TLibEncoder/SEIEncoder.h
source/Lib/TLibEncoder/SEIwrite.cpp
source/Lib/TLibEncoder/SEIwrite.h
source/Lib/TLibEncoder/SyntaxElementWriter.cpp
source/Lib/TLibEncoder/SyntaxElementWriter.h
source/Lib/TLibEncoder/TEncAnalyze.h
source/Lib/TLibEncoder/TEncBinCoder.h
source/Lib/TLibEncoder/TEncBinCoderCABAC.cpp
source/Lib/TLibEncoder/TEncBinCoderCABAC.h
source/Lib/TLibEncoder/TEncBinCoderCABACCounter.cpp
source/Lib/TLibEncoder/TEncBinCoderCABACCounter.h
source/Lib/TLibEncoder/TEncCavlc.cpp
source/Lib/TLibEncoder/TEncCavlc.h
source/Lib/TLibEncoder/TEncCfg.h
source/Lib/TLibEncoder/TEncCu.cpp
source/Lib/TLibEncoder/TEncCu.h
source/Lib/TLibEncoder/TEncEntropy.cpp
source/Lib/TLibEncoder/TEncEntropy.h
source/Lib/TLibEncoder/TEncGOP.cpp
source/Lib/TLibEncoder/TEncGOP.h
source/Lib/TLibEncoder/TEncPic.cpp
source/Lib/TLibEncoder/TEncPic.h
source/Lib/TLibEncoder/TEncPreanalyzer.cpp
source/Lib/TLibEncoder/TEncPreanalyzer.h
source/Lib/TLibEncoder/TEncRateCtrl.cpp
source/Lib/TLibEncoder/TEncRateCtrl.h
source/Lib/TLibEncoder/TEncSampleAdaptiveOffset.cpp
source/Lib/TLibEncoder/TEncSampleAdaptiveOffset.h
source/Lib/TLibEncoder/TEncSbac.cpp
source/Lib/TLibEncoder/TEncSbac.h
source/Lib/TLibEncoder/TEncSearch.cpp
source/Lib/TLibEncoder/TEncSearch.h
source/Lib/TLibEncoder/TEncSlice.cpp
source/Lib/TLibEncoder/TEncSlice.h
source/Lib/TLibEncoder/TEncTemporalFilter.cpp
source/Lib/TLibEncoder/TEncTemporalFilter.h
source/Lib/TLibEncoder/TEncTop.cpp
source/Lib/TLibEncoder/TEncTop.h
source/Lib/TLibEncoder/WeightPredAnalysis.cpp
source/Lib/TLibEncoder/WeightPredAnalysis.h
source/Lib/Utilities/TVideoIOYuv.cpp
source/Lib/Utilities/TVideoIOYuv.h
source/Lib/Utilities/program_options_lite.cpp
source/Lib/Utilities/program_options_lite.h
source/Lib/libmd5/MD5.h
source/Lib/libmd5/libmd5.cpp
source/Lib/libmd5/libmd5.h
/usr/include/assert.h
/usr/include/fcntl.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/memory.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/stat.h
/usr/include/time.h
/usr/include/alloca.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sys/types.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/fcntl-linux.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/timex.h
/usr/include/bits/typesizes.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/gnu/stubs.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libc-lock.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
/usr/include/bits/uio.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/linux/falloc.h
/usr/include/wchar.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/bits/setjmp.h
/usr/include/sched.h
/usr/include/bits/sched.h
